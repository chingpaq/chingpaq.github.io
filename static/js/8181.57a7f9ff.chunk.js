"use strict";(self.webpackChunkflowhero=self.webpackChunkflowhero||[]).push([[8181],{8181:(e,t,l)=>{l.r(t),l.d(t,{default:()=>G});var n=l(39518),o=l(71871),i=l(67861),a=l(88374),r=l(49465),d=l(23280),c=l(34710),s=l(11577),u=l(73500),v=l(14170),m=l(27182),p=l(23512),g=l(1413),h=l(96140),y=l(23330),b=l(48921),x=l(15155),f=l(61574),k=l(59205),E=l(41929),w=l(1650),C=l(67861);let S;!function(e){e.Select="select",e.Rectangle="rectangle",e.Circle="circle",e.Scribble="freedraw",e.Arrow="arrow",e.Text="text"}(S||(S={}));const R=[{id:S.Select,label:"Select Shapes",icon:C.createElement(b.Z,null)},{id:S.Rectangle,label:"Draw Rectangle Shape",icon:C.createElement(x.Z,null)},{id:S.Circle,label:"Draw Cirle Shape",icon:C.createElement(f.Z,null)},{id:S.Arrow,label:"Draw Arrow Shape",icon:C.createElement(k.Z,null)},{id:S.Scribble,label:"Scribble",icon:C.createElement(E.Z,null)},{id:S.Text,label:"Text",icon:C.createElement(w.Z,null)}];var Z=l(14281),q=l(80690),z=l(6592),I=l(14822),U=l(94543),T=l(3856),D=l(63813),A=l(20767),L=l(37271),N=l(63084),_=l(8853),P=l(75646),W=l(93304),F=l(38271),H=l(34358),M=l(67861);const O=e=>{const{textNode:t,onClose:l,onChange:n}=e,o=(0,i.useRef)(null);return(0,i.useEffect)(()=>{if(!o.current)return;const e=o.current,i=t.getStage(),a=t.position(),r=(i.container().getBoundingClientRect(),{x:a.x,y:a.y});e.value=t.text(),e.style.position="absolute",e.style.top="".concat(r.y,"px"),e.style.left="".concat(r.x,"px"),e.style.width="".concat(t.width()-2*t.padding(),"px"),e.style.height="".concat(t.height()-2*t.padding()+5,"px"),e.style.fontSize="".concat(t.fontSize(),"px"),e.style.border="none",e.style.padding="0px",e.style.margin="0px",e.style.overflow="hidden",e.style.background="none",e.style.outline="none",e.style.resize="none",e.style.lineHeight=t.lineHeight(),e.style.fontFamily=t.fontFamily(),e.style.transformOrigin="left top",e.style.textAlign=t.align(),e.style.color=t.fill();const d=t.rotation();let c="";d&&(c+="rotateZ(".concat(d,"deg)")),e.style.transform=c,e.style.height="auto",e.style.height="".concat(e.scrollHeight+3,"px"),e.focus();const s=t=>{t.target!==e&&(n(e.value),l())},u=t=>{"Enter"!==t.key||t.shiftKey||(t.preventDefault(),n(e.value),l()),"Escape"===t.key&&l()},v=()=>{const l=t.getAbsoluteScale().x;e.style.width="".concat(t.width()*l,"px"),e.style.height="auto",e.style.height="".concat(e.scrollHeight+t.fontSize(),"px")};return e.addEventListener("keydown",u),e.addEventListener("input",v),setTimeout(()=>{window.addEventListener("click",s)}),()=>{e.removeEventListener("keydown",u),e.removeEventListener("input",v),window.removeEventListener("click",s)}},[t,n,l]),M.createElement(H.Vt,null,M.createElement("textarea",{ref:o,style:{minHeight:"1em",position:"absolute"}}))},j=2e3,J=(0,i.memo)(e=>{const{control:t,visible:l}=e,[n,o]=(0,i.useState)("white"),[a,r]=(0,i.useState)(S.Select),[d,c]=(0,i.useState)([]),[s,u]=(0,i.useState)([]),[v,m]=(0,i.useState)([]),[p,b]=(0,i.useState)([]),[x,f]=(0,i.useState)(),[k,E]=(0,i.useState)([]),[w,C]=(0,i.useState)([]),[H,M]=(0,i.useState)(!1),[J,X]=(0,i.useState)(),G=(0,i.useCallback)(e=>{var t;if(null!==(t=e.target.files)&&void 0!==t&&t[0]){var l;const t=URL.createObjectURL(null===(l=e.target.files)||void 0===l?void 0:l[0]),n=new Image;n.src=t,f(n),E(e=>[...e,n])}e.target.files=null},[]),Y=(0,i.useRef)(null),$=(0,i.useRef)(null),B=(0,i.useCallback)(()=>{var e;(null===Y||void 0===Y?void 0:Y.current)&&(null===Y||void 0===Y||null===(e=Y.current)||void 0===e||e.click())},[]),K=(0,i.useCallback)(()=>{var e;((e,t)=>{const l=document.createElement("a");l.download=t,l.href=e||"",document.body.appendChild(l),l.click(),document.body.removeChild(l)})(null===$||void 0===$||null===(e=$.current)||void 0===e?void 0:e.toDataURL({pixelRatio:3}),"image.png")},[]),Q=(0,i.useCallback)(()=>{u([]),m([]),c([]),b([]),C([]),f(void 0),E([]),X(void 0)},[]),V=(0,i.useRef)(!1),ee=(0,i.useRef)([]),te=(0,i.useCallback)(()=>{V.current=!1},[]),le=(0,i.useRef)(),ne=(0,i.useCallback)(e=>{if(a===S.Select)return;V.current=!0;const t=null===$||void 0===$?void 0:$.current,l=null===t||void 0===t?void 0:t.getPointerPosition(),o=(null===l||void 0===l?void 0:l.x)||0,i=(null===l||void 0===l?void 0:l.y)||0,r=(0,y.Z)();switch(le.current=r,a){case S.Scribble:c(e=>[...e,{id:r,points:[o,i],color:n}]);break;case S.Circle:m(e=>[...e,{id:r,radius:1,x:o,y:i,color:n}]);break;case S.Rectangle:u(e=>[...e,{id:r,height:1,width:1,x:o,y:i,color:n}]);break;case S.Arrow:b(e=>[...e,{id:r,points:[o,i,o,i],color:n}]);break;case S.Text:C(e=>[...e,{id:r,text:"Your text here",color:n,visible:true,x:o,y:100,width:300}])}},[a,n]),oe=(0,i.useCallback)(()=>{if(a===S.Select||!V.current)return;const e=null===$||void 0===$?void 0:$.current,t=le.current,l=null===e||void 0===e?void 0:e.getPointerPosition(),n=(null===l||void 0===l?void 0:l.x)||0,o=(null===l||void 0===l?void 0:l.y)||0;switch(a){case S.Scribble:c(e=>null===e||void 0===e?void 0:e.map(e=>e.id===t?(0,g.Z)((0,g.Z)({},e),{},{points:[...e.points,n,o]}):e));break;case S.Circle:m(e=>null===e||void 0===e?void 0:e.map(e=>e.id===t?(0,g.Z)((0,g.Z)({},e),{},{radius:((n-e.x)**2+(o-e.y)**2)**.5}):e));break;case S.Rectangle:u(e=>null===e||void 0===e?void 0:e.map(e=>e.id===t?(0,g.Z)((0,g.Z)({},e),{},{height:o-e.y,width:n-e.x}):e))}},[a]),ie=(0,i.useRef)(null),ae=(0,i.useCallback)(e=>{var t;if(a!==S.Select)return;const l=e.currentTarget;null===ie||void 0===ie||null===(t=ie.current)||void 0===t||t.node(l)},[a]),re=(0,i.useCallback)(e=>{const t=w.find(t=>t.id===e);t&&(t.visible=!1,X(t),M(!0))},[w]),de=(0,i.useCallback)(e=>{const t=w.find(e=>e.id===(null===J||void 0===J?void 0:J.id));t&&(t.text=e)},[J]),ce=a===S.Select,se=(0,i.useCallback)(e=>{var t;null===ie||void 0===ie||null===(t=ie.current)||void 0===t||t.nodes([])},[a]),ue=(0,i.useCallback)(e=>{const t=w.findIndex(t=>t.id===e),l=ee.current[t],n=l.scaleX(),o=l.width()*n;w[t].width=o,l.setAttrs({width:o,scaleX:1}),C(w)},[w]);return l&&i.createElement(q.x,{m:4,width:"auto"},t&&i.createElement(z.k,{justifyContent:"space-between",alignItems:"center"},i.createElement(I.h,{size:"sm",isAttached:!0,variant:"solid"},R.map(e=>{let{id:t,label:l,icon:n}=e;return i.createElement(U.h,{key:t,"aria-label":l,icon:n,onClick:()=>r(t),colorScheme:t===a?"whatsapp":void 0})}),i.createElement(T.J,null,i.createElement(D.x,null,i.createElement(q.x,{bg:n,h:"32px",w:"32px",borderRadius:"sm",cursor:"pointer"})),i.createElement(A.y,{width:"300"},i.createElement(L.Q,null),i.createElement(N.u,null),i.createElement(Z.xS,{color:n,onChangeComplete:e=>o(e.hex)}))),i.createElement(U.h,{"aria-label":"Clear",icon:i.createElement(P.Z,null),onClick:Q})),i.createElement(z.k,{gap:4,alignItems:"center",height:"100%"},i.createElement("input",{type:"file",ref:Y,onChange:G,style:{display:"none"},accept:"image/*"}),i.createElement(_.z,{leftIcon:i.createElement(W.Z,null),variant:"solid",onClick:B,size:"sm"},"Import Image"),i.createElement(_.z,{leftIcon:i.createElement(F.Z,null),colorScheme:"whatsapp",variant:"solid",onClick:K,size:"sm"},"Export"))),i.createElement(q.x,{width:"inherit",height:"".concat(j,"px"),border:"0px solid black",backgroundColor:"transparent",mt:4,overflow:"hidden"},i.createElement(h.Hf,{height:j,width:j,ref:$,onMouseUp:te,onMouseDown:ne,onMouseMove:oe},i.createElement(h.mh,null,i.createElement(h.UL,{x:0,y:0,height:j,width:j,fill:"transparent",id:"bg",onClick:se}),k.map((e,t)=>i.createElement(h.Ee,{key:t,image:e,x:0,y:0,height:1e3,width:1e3,onClick:ae,draggable:ce})),s.map(e=>i.createElement(h.UL,{key:e.id,x:null===e||void 0===e?void 0:e.x,y:null===e||void 0===e?void 0:e.y,height:null===e||void 0===e?void 0:e.height,width:null===e||void 0===e?void 0:e.width,stroke:null===e||void 0===e?void 0:e.color,fill:null===e||void 0===e?void 0:e.color,id:null===e||void 0===e?void 0:e.id,strokeWidth:4,onClick:ae,draggable:ce})),v.map(e=>i.createElement(h.Cd,{key:e.id,id:e.id,x:null===e||void 0===e?void 0:e.x,y:null===e||void 0===e?void 0:e.y,radius:null===e||void 0===e?void 0:e.radius,stroke:null===e||void 0===e?void 0:e.color,strokeWidth:4,onClick:ae,draggable:ce})),d.map(e=>i.createElement(h.x1,{key:e.id,id:e.id,lineCap:"round",lineJoin:"round",stroke:null===e||void 0===e?void 0:e.color,strokeWidth:4,points:e.points,onClick:ae,draggable:ce})),w.map((e,t)=>i.createElement(h.xv,{key:e.id,id:e.id,ref:e=>{e&&(ee.current[t]=e)},x:0,y:0,text:e.text,width:e.width,fontSize:20,fontFamily:"Montserrat",fill:e.color,onClick:ae,onDblClick:()=>re(e.id),onTransform:()=>ue(e.id),draggable:ce,visible:e.visible})),H&&i.createElement(O,{textNode:ee.current[w.findIndex(e=>e.id===(null===J||void 0===J?void 0:J.id))],onChange:de,onClose:()=>{const e=w.findIndex(e=>e.id===(null===J||void 0===J?void 0:J.id));w[e].visible=!0,C(w),M(!1)}}),!H&&i.createElement(h.$T,{ref:ie})))))});var X=l(67861);const G=(0,n.$j)(e=>{const{authenticatedUser:{position:t},authenticatedUser:l}=e.authReducer,{user:n}=e.sessionReducer,{companyData:o,companyPositionsArray:i,allTasks:a,allCompletedTasks:r,allCompletedTasksPaginated:d,companyUsersArray:c}=e.flowReducer;return{companyData:o,companyPositionsArray:i,position:t,allTasks:a,allCompletedTasks:r,allCompletedTasksPaginated:d,user:n,companyUsersArray:c,authenticatedUser:l}},e=>({}))(e=>{var t,l,g,h,y,b,x,f,k,E,w;const C=(0,n.I0)(),[S,R]=(0,i.useState)(null!==(t=JSON.parse(localStorage.getItem("companyData")))&&void 0!==t?t:{name:""}),{slug:Z}=(0,d.UO)(),q=(0,d.s0)();return document.title="Company | ".concat(Z),(0,i.useEffect)(()=>{var e;null!==S&&void 0!==S&&S.display_name&&Z===(null===S||void 0===S?void 0:S.slug)?null!==S&&void 0!==S&&null!==(e=S.company_standards)&&void 0!==e&&e.hbanner||q("/login"):(C((0,a.tR)(!1)),C((0,a.IW)(!1)),(0,c.Ac)(Z).pipe((0,s.P)()).subscribe({next:e=>{var t;C((0,a.Xc)({show:!1,message:""})),localStorage.setItem("companyData",JSON.stringify(e)),R(e),null!==e&&void 0!==e&&null!==(t=e.company_standards)&&void 0!==t&&t.hbanner||q("/login")}}))},[S]),"543c31fa-d480-4538-99b7-b055e740ad24"===(null===S||void 0===S?void 0:S.id)?X.createElement(m.default,null):X.createElement("div",{className:o.Z.companyHome,style:{backgroundRepeat:u.tq?"":"no-repeat",height:u.tq?"100vh":"",backgroundImage:null!==S&&void 0!==S&&null!==(l=S.company_standards)&&void 0!==l&&l.hbanner?"url(".concat(null===S||void 0===S||null===(g=S.company_standards)||void 0===g?void 0:g.hbanner,")"):"",backgroundColor:"white",backgroundSize:u.tq?"scale-down":"cover",backgroundPosition:u.tq?"left":"center",padding:"20px"}},X.createElement(p.x,null,X.createElement(J,{control:!1,visible:!1})),X.createElement("div",{className:o.Z.navbarSection,style:{padding:u.tq?"0":"",display:(null!==(h=S.company_standards)&&void 0!==h&&h.message,"flex"),flexDirection:u.tq?"column":"row"}},X.createElement("div",{style:{display:"flex",margin:"20px",width:"100%",justifyContent:"space-between"}},!u.tq&&null!==S&&void 0!==S&&S.logo?X.createElement("img",{alt:"lg",src:(0,r.oY)(null===S||void 0===S?void 0:S.logo),className:o.Z.logoUrlImg}):X.createElement("div",{style:{padding:"5px 20px 10px",display:u.tq||null!==S&&void 0!==S&&S.logo?"none":"",backgroundColor:"black",borderRadius:"3px"}},(0,r.lh)(u.tq?"18px":"36px","white","bold"),X.createElement("div",{style:{fontSize:u.tq?"12px":"14px",fontWeight:u.tq?"normal":"bold",fontFamily:"var(--app-text-mobile-font)",color:"white"}},null===S||void 0===S||null===(y=S.display_name)||void 0===y?void 0:y.toUpperCase())),X.createElement("div",{style:{display:"flex",flexDirection:(u.tq,"row")}},!u.tq&&X.createElement(v.zx,{title:"LOGIN",style:{marginTop:"20px"},titleStyle:{fontFamily:"var(--app-text-main-font)",color:"black",fontWeight:"bold",fontSize:"16px",letterSpacing:".8px"},light:!0,clicked:()=>{q("/login")}}),(null===S||void 0===S||null===(b=S.core_values)||void 0===b?void 0:b.singleUser)&&!u.tq&&X.createElement(v.zx,{title:"SIGN UP",clicked:()=>{C((0,a.Xc)({show:!1,message:""})),q("/user")},style:{marginTop:"20px"},titleStyle:{fontFamily:"var(--app-text-main-font)",color:"black",fontWeight:"bold",fontSize:"16px",letterSpacing:".8px"},light:!0})))),u.tq&&X.createElement("div",{style:{padding:"10px 10px",backgroundColor:"rgba(0, 0, 0, .3)",bbackgroundColor:"var(--app-color-gray-dark)",borderRadius:"3px",width:"100%",alignContent:"center"}},X.createElement("div",{style:{fontSize:u.tq?"20px":"14px",fontWeight:"normal",fontFamily:"var(--app-text-mobile-font)",color:"white"}},null===S||void 0===S||null===(x=S.display_name)||void 0===x?void 0:x.toUpperCase(),(0,r.lh)("14px","white","bold"))),u.tq&&X.createElement("div",{className:o.Z.centerDiv,style:{backgroundColor:"transparent",fontSize:u.tq?"":"30px"}},X.createElement(v.zx,{title:"LOGIN",clicked:()=>q("/login"),style:{width:"200px"},titleStyle:{fontFamily:"var(--app-text-mobile-font)",color:"black",fontWeight:"bold",fontSize:"16px",letterSpacing:"0.8px"},light:!0})),!u.tq&&(null===(f=S.company_standards)||void 0===f?void 0:f.message)&&X.createElement("div",{className:o.Z.banner2},null===(k=S.company_standards)||void 0===k?void 0:k.message),!u.tq&&(null===(E=S.company_standards)||void 0===E?void 0:E.subMessage)&&X.createElement("div",{className:o.Z.banner2},null===(w=S.company_standards)||void 0===w?void 0:w.subMessage))})}}]);
//# sourceMappingURL=8181.57a7f9ff.chunk.js.map