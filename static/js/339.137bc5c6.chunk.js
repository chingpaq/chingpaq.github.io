"use strict";(self.webpackChunkflowhero=self.webpackChunkflowhero||[]).push([[339],{60020:function(e,t,n){n.r(t),n.d(t,{default:function(){return fe}});var l=n(42982),o=n(1413),i=n(70885),a=n(67861),r=n(23280),d=n(61616),s=n(41771),c=n(40694),u=n(2288),p=n(72864),m=(n(83381),n(20086)),v=n(50981),f=n.n(v),h=n(9825),g=n.n(h),_=n(39518),y=n(63077),E=n(79492),k=n.n(E),b=n(88374),C=n(88827),Z=n(51481),x=n(89293),T="TaskForm_newTaskFormHost__8YIFH",w="TaskForm_buttonsContainer__Y5EGp",S="TaskForm_datePickerWrapper__vAFgZ",M="TaskForm_saveButton__6OqA+",N="TaskForm_calendarSVG__bXc-+",D=n(73500),I=n(27436);n(38893);var A=function(e){var t=e.isOpen,n=e.onClose,l=e.loading,o=e.removeTask,i=e.taskId;return a.createElement(m.U7,{isOpen:t,onClose:function(){return n(!1)},backdropColor:!0,blured:!0,scrollable:!0,shadowedContainerStyle:{width:"35%"}},a.createElement("div",null,a.createElement("p",{style:{textAlign:"center",fontSize:"20px",color:"#4A4A4A",fontFamily:"var(--app-font-poppins)"}},"Are you sure do you want to delete this task?"),a.createElement(c.Z,{loading:l,clicked:function(){return o(i)},title:"Yes, Delete",style:{fontWeight:"500",marginLeft:"auto",marginRight:"auto"}}),a.createElement("p",{style:{cursor:"pointer",textAlign:"center",fontSize:"16px",fontWeight:600,color:"#4A4A4A",fontFamily:"var(--app-font-quicksand-medium)"},onClick:function(){return n(!1)},className:"go-back-text"},"No, Go Back")))},q=(0,_.$j)((function(e){var t=e.flowReducer;return{selectedProcess:t.selectedProcess,companyUsersArray:t.companyUsersArray,companyProcesses:t.companyProcesses,allModules:t.allModules,user:e.sessionReducer.user}}))((function(e){var t,n,l,d,u,p,m,v,h,_,E,q,P,Y,O,F,R,W,U,B,z,L,H,V,j,J,X,K,Q,G=(0,r.s0)(),$=e.selectedProcess,ee=e.isProcess,te=e.setIsProcessBegin,ne=e.companyUsersArray,le=e.task,oe=e.isEdit,ie=e.assigneeId,ae=e.setDisplayModal,re=e.allModules,de=e.companyProcesses,se=e.onClose,ce=e.user,ue=(0,a.useState)(null!==le&&void 0!==le&&null!==(t=le.assignee)&&void 0!==t&&t.id?{assignee_id:null===le||void 0===le||null===(n=le.assignee)||void 0===n?void 0:n.id}:""),pe=(0,i.Z)(ue,2),me=pe[0],ve=pe[1],fe=(0,a.useState)(null!==le&&void 0!==le&&null!==(l=le.process)&&void 0!==l&&l.id?{process:null===le||void 0===le||null===(d=le.process)||void 0===d?void 0:d.id}:""),he=(0,i.Z)(fe,2),ge=he[0],_e=he[1],ye=(0,a.useState)((null===le||void 0===le?void 0:le.name)||""),Ee=(0,i.Z)(ye,2),ke=Ee[0],be=Ee[1],Ce=(0,a.useState)((null===le||void 0===le?void 0:le.status)||""),Ze=(0,i.Z)(Ce,2),xe=Ze[0],Te=Ze[1],we=(0,a.useState)((null===le||void 0===le?void 0:le.description)||""),Se=(0,i.Z)(we,2),Me=Se[0],Ne=Se[1],De=(0,a.useState)(null!==le&&void 0!==le&&le.due_date?new Date(null===le||void 0===le?void 0:le.due_date):(new Date).setDate((new Date).getDate()+1)),Ie=(0,i.Z)(De,2),Ae=Ie[0],qe=Ie[1],Pe=(0,a.useState)(""),Ye=(0,i.Z)(Pe,2),Oe=Ye[0],Fe=Ye[1],Re=(0,a.useState)(!1),We=(0,i.Z)(Re,2),Ue=We[0],Be=We[1],ze=(0,a.useState)(!1),Le=(0,i.Z)(ze,2),He=Le[0],Ve=Le[1],je=(0,a.useState)(!1),Je=(0,i.Z)(je,2),Xe=Je[0],Ke=Je[1],Qe=(0,a.useState)(!1),Ge=(0,i.Z)(Qe,2),$e=Ge[0],et=Ge[1],tt=(0,a.useState)(ee),nt=(0,i.Z)(tt,2),lt=nt[0],ot=nt[1],it=(0,a.useState)((null===le||void 0===le||null===(u=le.add_info)||void 0===u?void 0:u.priority)||""),at=(0,i.Z)(it,2),rt=at[0],dt=at[1],st=(null===ne||void 0===ne?void 0:ne.length)>0?ne.map((function(e){return{label:e.first_name+" "+e.last_name,value:e.id}})):[],ct=(null===re||void 0===re?void 0:re.length)>0?re.map((function(e){return{label:e.name,value:e.id,module:e}})):[];(0,a.useEffect)((function(){return Ke(!0),function(){Ke(!1)}}),[]),(0,a.useEffect)((function(){if(lt&&null!==$&&void 0!==$&&$.id&&Xe){_e({procedure_id:$.id}),Ne($.description)}}),[lt,Xe,$.description,$.id]);var ut=function(e){Be(!0),(0,Z.vr)(""!==ge?{newAssignee:me,taskProcess:ge,taskName:ke,taskDescription:Me,dueDate:f()(Ae).format("YYYY-MM-DD"),add_info:{module_id:ge.module.id,priority:rt}}:{newAssignee:me,taskName:ke,taskDescription:Me,dueDate:f()(Ae).format("YYYY-MM-DD"),add_info:{priority:null!==rt&&void 0!==rt?rt:""}}).subscribe({next:function(t){e&&(0,Z.lV)(t.id).subscribe(),ve(""),_e(""),be(""),Ne(""),qe(new Date),C.h.dispatch((0,b.qJ)(t)),C.h.dispatch((0,b.q4)((0,o.Z)((0,o.Z)({},ge),{},{stepIndex:0,module_id:ge.module.id,module:ge.module}))),lt&&(G("/begin-module"),te(!0)),e&&G("/begin-module")},error:function(e){e&&(Fe(e.data),Be(!1))},complete:function(){Be(!1),!lt&&ae(!1)}})},pt={control:function(e,t){return(0,o.Z)((0,o.Z)({},e),{},{boxShadow:"none","&:hover":{border:"1px solid var(--app-color-gray-lighter)"},position:"relative",height:"60px",width:"100%",border:"var(--app-color-gray-lighter) solid 1px",padding:"3px",fontFamily:"var(--app-font-quicksand-medium)",fontSize:"1.4em",fontWeight:"700",color:"#4A4A4A",textAlign:"left",flex:"1 1 auto",justifyContent:"center",alignItems:"center",alignContent:"center",alignSelf:"center",margin:"10px 0 0 0 ",marginBottom:"20px"})},input:function(e,t){return(0,o.Z)((0,o.Z)({},e),{},{fontFamily:"var(--app-font-quicksand-medium)",color:"#4A4A4A",width:"100%",textAlign:"left",fontSize:"0.8em",fontWeight:"700",alignSelf:"center"})},menu:function(e,t){return(0,o.Z)((0,o.Z)({},e),{},{justifyContent:"center",alignItems:"center",verticalTextAlign:"center",alignContent:"center"})},menulist:function(e,t){return(0,o.Z)((0,o.Z)({},e),{},{justifyContent:"center",alignItems:"center",verticalTextAlign:"center",alignContent:"center",fontFamily:"var(--app-font-quicksand-medium)"})},option:function(e,t){return(0,o.Z)((0,o.Z)({},e),{},{minHeight:15,paddingTop:0,fontSize:"1.1em",color:"black",verticalTextAlign:"center",justifyContent:"center",alignItems:"center",alignContent:"center",fontFamily:"var(--app-font-quicksand-medium)"})},placeholder:function(e,t){return(0,o.Z)((0,o.Z)({},e),{},{fontSize:"0.75em",lineHeight:"20px",color:"#4A4A4A",fontWeight:400,overflow:"hidden",fontFamily:"var(--app-font-quicksand-medium)"})},singleValue:function(e,t){var n=t.isDisabled?.5:1;return(0,o.Z)((0,o.Z)({},e),{},{opacity:n,transition:"opacity 300ms",marginLeft:"0px",fontSize:"0.75em",lineHeight:"20px",color:"#4A4A4A",fontFamily:"var(--app-font-quicksand-medium)"})},indicatorsContainer:function(e,t){t._data;return(0,o.Z)((0,o.Z)({},e),{},{marginTop:"auto",marginBottom:"auto",color:"#4A4A4A",size:7,":hover":{color:"gray"},width:"65px",height:"45px"})}},mt=[{label:"Done",value:"Done"},{label:"Ongoing",value:"Ongoing"},{label:"In Review",value:"In Review"},{label:"Approved",value:"Approved"},{label:"Postponed",value:"Postponed"},{label:"Moved",value:"Moved"},{label:"Cancelled",value:"Cancelled"}];return a.createElement("div",{className:T},a.createElement(k(),{style:{flex:1}},a.createElement("div",null,a.createElement("label",{style:{color:null!==Oe&&void 0!==Oe&&null!==(p=Oe.errors)&&void 0!==p&&p.name?"var(--app-color-error)":"",display:(le.completed_at,"")}},"Name",a.createElement("textarea",{readOnly:void 0!==(null===le||void 0===le?void 0:le.id)&&(!!le.completed_at||ce.id!==(null===le||void 0===le||null===(m=le.creator)||void 0===m?void 0:m.id)),required:null===Oe||void 0===Oe||null===(v=Oe.errors)||void 0===v?void 0:v.name,onFocus:function(){return Fe("")},value:ke,onChange:function(e){return be(e.target.value)}})),Oe&&(null===Oe||void 0===Oe||null===(h=Oe.errors)||void 0===h?void 0:h.name)&&a.createElement(I.Z,{message:Oe.errors.name})),a.createElement("div",null,a.createElement("label",{style:{color:null!==Oe&&void 0!==Oe&&null!==(_=Oe.errors)&&void 0!==_&&_.due_date?"var(--app-color-error)":""}},"Due Date",a.createElement("div",null,a.createElement(g(),{disabled:void 0!==(null===le||void 0===le?void 0:le.id)&&(!!le.completed_at||ce.id!==(null===le||void 0===le||null===(E=le.creator)||void 0===E?void 0:E.id)),placeholderText:"Due Date",customInput:a.createElement("div",{id:"custom-input",style:{cursor:"pointer",display:"flex",justifyContent:"center",width:"100%",alignItems:"stretch",border:"1px solid",borderColor:null!==Oe&&void 0!==Oe&&null!==(q=Oe.errors)&&void 0!==q&&q.due_date?"var(--app-color-error)":"var(--app-color-gray-lighter)"}},a.createElement("input",{readOnly:void 0!==(null===le||void 0===le?void 0:le.id)&&(!!le.completed_at||ce.id!==(null===le||void 0===le||null===(P=le.creator)||void 0===P?void 0:P.id)),onFocus:function(){return Fe("")},value:f()(Ae).format("DD MMMM YYYY")+" ("+f()(Ae).fromNow()+")",type:"text",required:null===Oe||void 0===Oe||null===(Y=Oe.errors)||void 0===Y?void 0:Y.due_date,id:"due-date",style:{flex:1,marginTop:"auto",marginBottom:"auto",outline:"none",border:"none",fontFamily:"var(--app-font-quicksand-medium)",fontSize:"16px",lineHeight:"20px",color:"#4A4A4A",textAlign:(null===Ae||void 0===Ae?void 0:Ae.length)>0?"center":"left",maxWidth:"98%"},placeholder:"Due Date",onChange:function(e){}}),a.createElement(s.faS,{className:N})),className:S,selected:Ae,onChange:function(e){qe(e)}}))),Oe&&(null===Oe||void 0===Oe||null===(O=Oe.errors)||void 0===O?void 0:O.due_date)&&a.createElement(I.Z,{message:Oe.errors.due_date})),a.createElement("div",null,a.createElement("label",{style:{color:null!==Oe&&void 0!==Oe&&null!==(F=Oe.errors)&&void 0!==F&&F.description?"var(--app-color-error)":""}},"Description",a.createElement("textarea",{disabled:!!le.completed_at,onFocus:function(){return Fe("")},required:null===Oe||void 0===Oe||null===(R=Oe.errors)||void 0===R?void 0:R.description,value:Me,onChange:function(e){return Ne(e.target.value)}})),Oe&&(null===Oe||void 0===Oe||null===(W=Oe.errors)||void 0===W?void 0:W.description)&&a.createElement(I.Z,{message:Oe.errors.description})),a.createElement("div",null,a.createElement("label",{style:{color:null!==Oe&&void 0!==Oe&&null!==(U=Oe.errors)&&void 0!==U&&U.assignee_id?"var(--app-color-error)":""}},"Assignee",le.completed_at?a.createElement("div",null,a.createElement("input",{style:{cursor:"auto"},placeholder:(null===le||void 0===le?void 0:le.assignee.first_name)+" "+(null===le||void 0===le?void 0:le.assignee.last_name),readOnly:!0})):a.createElement(y.ZP,{onFocus:function(){return Fe("")},isSearchable:!1,key:"Assignee",styles:pt,defaultInputValue:"",components:{DropdownIndicator:x.ms},placeholder:"",value:st[st.findIndex((function(e){return e.value===me.assignee_id}))],options:st,onChange:function(e){e&&ve((function(t){return(0,o.Z)((0,o.Z)({},t),{},{assignee_id:e.value})}))}})),Oe&&(null===Oe||void 0===Oe||null===(B=Oe.errors)||void 0===B?void 0:B.assignee_id)&&a.createElement(I.Z,{message:Oe.errors.assignee_id})),(null===e||void 0===e||null===(z=e.task)||void 0===z?void 0:z.creator)&&a.createElement("div",{style:{marginTop:"10px"}},a.createElement("label",null,"Creator",a.createElement("input",{style:{cursor:"auto"},placeholder:(null===le||void 0===le?void 0:le.creator.first_name)+" "+(null===le||void 0===le?void 0:le.creator.last_name),readOnly:!0})),a.createElement("label",null,"Created Date",a.createElement("input",{style:{cursor:"auto"},placeholder:f()(null===le||void 0===le?void 0:le.created_at).format("DD MMMM YYYY")+" ("+f()(Ae).fromNow()+")",readOnly:!0}))),a.createElement("div",{style:{marginTop:"10px"}},a.createElement("label",{style:{color:null!==Oe&&void 0!==Oe&&null!==(L=Oe.errors)&&void 0!==L&&L.procedure_id?"var(--app-color-error)":"",display:"none"}},"Module Process",ee||oe?oe?a.createElement("input",{style:{cursor:"auto"},placeholder:null!==(H=ct[ct.findIndex((function(e){return e.module.procedure.id===ge.process}))])&&void 0!==H&&H.label?null===(V=ct[ct.findIndex((function(e){return e.module.procedure.id===ge.process}))])||void 0===V?void 0:V.label:"Not a module process task.",readOnly:!0}):a.createElement("p",{style:{color:"#4a4a4a"}},$.name):a.createElement(y.ZP,{onFocus:function(){return Fe("")},isSearchable:!1,key:"Process",styles:pt,defaultInputValue:"",components:{DropdownIndicator:x.ms},placeholder:"Select process to start (optional)...",value:ct[ct.findIndex((function(e){return e.module.procedure.id===ge.process}))],options:ct,onChange:function(e){e&&(_e((0,o.Z)((0,o.Z)({},de.find((function(t){return t.id===e.module.procedure.id}))),{},{process:e.module.procedure,procedure_id:e.module.procedure.id,module_id:e.module.id,module:e.module,stepIndex:0})),ot(!0))}})),a.createElement("label",{style:{color:null!==Oe&&void 0!==Oe&&null!==(j=Oe.errors)&&void 0!==j&&j.procedure_id?"var(--app-color-error)":""}},"Priority",null!==le&&void 0!==le&&le.completed_at?a.createElement("input",{style:{cursor:"auto"},placeholder:null!==(J=null===le||void 0===le?void 0:le.priority)&&void 0!==J?J:"Medium",readOnly:!0}):a.createElement(y.ZP,{onFocus:function(){return Fe("")},key:"priority",styles:pt,defaultInputValue:"",components:{DropdownIndicator:x.ms},placeholder:"Select priority (optional)...",value:x._l.find((function(e){return e.value===rt})),options:x._l,onChange:function(e){return dt(e.value)}})),a.createElement("label",{style:{color:null!==Oe&&void 0!==Oe&&null!==(X=Oe.errors)&&void 0!==X&&X.procedure_id?"var(--app-color-error)":""}},"Status",null!==le&&void 0!==le&&le.completed_at?a.createElement("input",{style:{cursor:"auto"},placeholder:null!==(K=null===le||void 0===le?void 0:le.status)&&void 0!==K?K:"No status set",readOnly:!0}):a.createElement(y.ZP,{onFocus:function(){return Fe("")},key:"status",styles:pt,defaultInputValue:"",components:{DropdownIndicator:x.ms},placeholder:"Select status (optional)...",value:mt.find((function(e){return e.value===xe})),options:mt,onChange:function(e){return Te(e.value)}})),Oe&&(null===Oe||void 0===Oe||null===(Q=Oe.errors)||void 0===Q?void 0:Q.procedure_id)&&a.createElement(I.Z,{message:Oe.errors.procedure_id})),Oe&&(null===Oe||void 0===Oe?void 0:Oe.message)&&a.createElement(I.Z,{message:Oe.message})),null!==le&&void 0!==le&&le.completed_at?a.createElement("div",{className:w},a.createElement(c.Z,{clicked:se,className:M,title:"Close"})):oe?a.createElement("div",{className:w},a.createElement(c.Z,{clicked:se,className:M,title:"Close"}),a.createElement(c.Z,{light:!0,clicked:function(){return et(!0)},className:M,title:"Delete"}),a.createElement(c.Z,{light:!0,clicked:function(){return function(){var t,n;Be(!0);var l=me?me.assignee_id:ie;(0,Z.xJ)({assignee_id:l,name:ke,description:Me,due_date:f()(Ae).format("YYYY-MM-DD"),status:null!==xe&&void 0!==xe?xe:"",add_info:(0,o.Z)((0,o.Z)({},null===e||void 0===e||null===(t=e.task)||void 0===t?void 0:t.add_info),{},{priority:null!==rt&&void 0!==rt?rt:""})},null===e||void 0===e||null===(n=e.task)||void 0===n?void 0:n.id).subscribe({next:function(e){Be(!1),ae(!1)},error:function(e){e&&(Fe(e.data),Be(!1))},complete:function(){}})}()},className:M,title:"Update",loading:Ue}),ge.process&&a.createElement(c.Z,{light:!0,clicked:function(){return C.h.dispatch((0,b.qJ)(le)),C.h.dispatch((0,b.q4)((0,o.Z)((0,o.Z)({},de.find((function(e){return e.id===le.process.id}))),{},{stepIndex:0,module_id:le.add_info.module_id,module:re.find((function(e){return e.id===le.add_info.module_id}))}))),void G("/begin-module")},className:M,title:"Run"})):a.createElement("div",{className:w},!D.tq&&a.createElement(c.Z,{clicked:se,className:M,title:"Close"}),!ee&&a.createElement(c.Z,{light:!0,clicked:function(){return ut(!1)},className:M,title:"Save",loading:Ue}),lt&&a.createElement(c.Z,{light:!0,clicked:function(){return ut(!0)},className:M,title:"Run"})),$e&&a.createElement(A,{taskId:le.id,isOpen:$e,removeTask:function(e){Ve(!0),(0,Z._5)(e).subscribe({next:function(e){Ve(!1),et(!1)},error:function(e){Ve(!1)},complete:function(){ae(!1)}})},loading:He,onClose:et}))})),P=function(e){var t=e.isEdit,n=e.modalVisible,l=e.heading,o=e.onClose,i=e.isProcess,r=e.setIsProcessBegin,d=e.task;return a.createElement("div",null,a.createElement(m.U7,{scrollable:!0,shadowedContainerStyle:{width:D.tq?"96%":"35%"},isOpen:n,onClose:function(){},blured:!0},a.createElement("div",null,D.tq&&a.createElement(m.zx,{clicked:o,title:"Close"}),a.createElement("p",{style:{fontFamily:"var(--app-font-poppins)",fontSize:"2rem",color:"#4A4A4A",marginTop:"10px",marginBottom:"5px",textAlign:"center"}},d.completed_at?"Completed Task":l),t&&a.createElement("p",{style:{fontFamily:"var(--app-font-poppins)",fontSize:"15px",fontWeight:"700",color:"#4A4A4A",marginTop:"5px",marginBottom:"5px",textAlign:"center"}},"Task ID: ".concat(d.id.slice(-6))),a.createElement(q,{task:d,setIsProcessBegin:r,setDisplayModal:o,isProcess:i,isEdit:t,onClose:function(){return o()}}))))},Y={host:"Dashboard_host__5V1Px",dashboardPanel:"Dashboard_dashboardPanel__KsIe5",headerContainer:"Dashboard_headerContainer__Bb76Q",title:"Dashboard_title__0Sg0v",modalTitle:"Dashboard_modalTitle__5VQoX",singleButton:"Dashboard_singleButton__RaYRv",fieldRowContainer:"Dashboard_fieldRowContainer__qZamr",fieldTypeInput:"Dashboard_fieldTypeInput__IuVWl",dashboardCard:"Dashboard_dashboardCard__BFQfi"},O=n(93389),F=n(6073),R=n(95256),W=n(30994),U=n(96332),B=n(66284),z=n(10103),L=n(11577),H=n(1542),V=n(46415),j=n(34710),J="ModulePanel_moduleBoardPanelHost__oSpYm",X="ModulePanel_container__GIAqY",K="ModulePanel_titleContainer__3nUmv",Q="ModulePanel_cardTitle__93SOc",G=n(67861),$=function(e){var t=e.iconSrc,n=e.cardTitle,l=e.children,o=e.style,i=e.endLabel,a=void 0===i?"":i,r=e.loading,d=void 0!==r&&r,s=e.onAddItem,c=void 0===s?function(){}:s,u=e.withAddButton,p=void 0===u||u;return G.createElement("div",{className:J,style:o},G.createElement("div",{className:X},G.createElement("div",{className:K},t&&G.createElement("img",{alt:"",src:t}),n&&G.createElement("p",{className:Q},n),d&&G.createElement(m.$j,{type:"BallTriangle",color:"var(--app-color-gray-dark)",height:30,width:"".concat(30,"px"),style:{padding:"0 0 0 10px"}})),p&&G.createElement(m.zx,{clear:!0,style:{width:"120px",backgroundColor:"rgb(83, 159, 234)",color:"white"},clicked:c,title:"Add Item"}),G.createElement("div",{style:{fontSize:"12px",textAlign:"right"}},a),l))},ee="ComponentModuleCard_component-card__2-rIM",te="ComponentModuleCard_component-card-container__QM+Tm",ne="ComponentModuleCard_clickLabel1__y6p7N",le="ComponentModuleCard_clickLabel2__rVtV0",oe="ComponentModuleCard_clickLabel3__Rb8mM",ie="ComponentModuleCard_clickLabel4__DErj1",ae="ComponentModuleCard_tileLabel__IUf2-";var re=function(e){var t,n,l,o,i=e.component,r=e.options,d=e.openModal,c=void 0===d?function(){}:d,u=e.setComponentToEdit,p=void 0===u?function(){}:u,m=e.clicked,v=void 0===m?function(){}:m,h=e.isEditable,g=void 0===h||h,_=e.children,y=i.title,E=null!==(t=null===(n=i.component_fields.find((function(e){return"Status"===e.data_type_name})))||void 0===n?void 0:n.value)&&void 0!==t?t:"",k=null!==(l=null===(o=i.component_fields.find((function(e){var t,n,l,o;return(null===e||void 0===e||null===(t=e.value)||void 0===t?void 0:t.includes("jpg"))||(null===e||void 0===e||null===(n=e.value)||void 0===n?void 0:n.includes("jpeg"))||(null===e||void 0===e||null===(l=e.value)||void 0===l?void 0:l.includes("png"))||(null===e||void 0===e||null===(o=e.value)||void 0===o?void 0:o.includes("pdf"))})))||void 0===o?void 0:o.value)&&void 0!==l?l:"";return 1==(null===r||void 0===r?void 0:r.asGraphical)?a.createElement("div",{className:ee,style:{display:"Hide"===E||"Closed"===E||"Done"===E?"none":""}},a.createElement("div",{onClick:v,className:te},""!==k?k.includes("pdf")?a.createElement("embed",{src:"".concat(k,"#toolbar=0&navpanes=0&scrollbar=0&zoom=100%"),width:"100%",height:"1000px"}):a.createElement("img",{alt:"lg",src:k,style:{margin:"0 0 0 0",padding:"3px 3px 3px 0",width:"100%",height:"100%"},onClick:v}):a.createElement("div",null,"Image Not available")),a.createElement("p",{className:ae,onClick:v},"".concat(y))):a.createElement("div",{className:ee,onClick:v},a.createElement("div",{className:te},""!==k?a.createElement("div",{style:{width:"50%",display:"flex"}},a.createElement("img",{alt:"lg",src:k,style:{margin:"0 0 0 0",padding:"3px 13px 3px 0",width:"50px",height:"50px"}}),a.createElement("p",{className:ne,onClick:v},"".concat(null!==y&&void 0!==y?y:i.id))):y.split("  ").length>0&&y.split("  ").map((function(e,t){return a.createElement("p",{key:t,className:y.split("  ").length>1?ne:ie,onClick:v},"".concat(e))})),a.createElement("p",{className:le,onClick:v,sstyle:{position:"absolute",left:"20%"}},E),a.createElement("p",{className:oe,onClick:v},f()(i.created_date).format("DD MMM YYYY")),_,g&&a.createElement("img",{alt:"",style:{cursor:"pointer"},src:s.ePH,onClick:function(){c(),p()}})))},de=n(64509),se=n(88550),ce=(n(60940),n(81330)),ue=n.n(ce),pe=n(62589),me=n(43984),ve=n(38893),fe=(0,_.$j)((function(e){var t=e.flowReducer,n=t.begunModule,l=t.allTasks,o=t.allCompletedTasks,i=t.allCompletedTasksPaginated,a=t.companyProcesses,r=t.allModules,d=t.components,s=t.companyData,c=t.companyUsersArray,u=t.blueprints;return{begunModule:n,allTasks:l,allCompletedTasks:o,allCompletedTasksPaginated:i,companyProcesses:a,allModules:r,components:d,companyData:s,companyUsersArray:c,user:e.sessionReducer.user,blueprints:u}}),(function(e){return{onSetSelectedProcess:function(t){return e((0,b.Xu)(t))}}}))((function(e){var t,n,h,g,y,E,k,T,w,S,M,N,A,q=(0,r.TH)(),J=e.allTasks,X=e.allCompletedTasks,K=e.allCompletedTasksPaginated,Q=e.onSetSelectedProcess,G=e.user,ee=e.companyProcesses,te=e.allModules,ne=e.components,le=e.companyData,oe=e.companyUsersArray,ie=e.begunModule,ae=(e.blueprints,(0,a.useState)(!1)),ce=(0,i.Z)(ae,2),fe=ce[0],he=ce[1],ge=(0,a.useState)(!1),_e=(0,i.Z)(ge,2),ye=_e[0],Ee=_e[1],ke=(0,a.useState)(!1),be=(0,i.Z)(ke,2),Ce=be[0],Ze=be[1],xe=(0,a.useState)(1),Te=(0,i.Z)(xe,2),we=Te[0],Se=Te[1],Me=(0,a.useState)(1),Ne=(0,i.Z)(Me,2),De=Ne[0],Ie=Ne[1],Ae=(0,a.useState)({laterTasks:[],todayTasks:[],overdueTasks:[],completedTasks:[]}),qe=(0,i.Z)(Ae,2),Pe=qe[0],Ye=qe[1],Oe=(0,a.useState)([]),Fe=(0,i.Z)(Oe,2)[1],Re=(0,a.useState)(""),We=(0,i.Z)(Re,2),Ue=We[0],Be=We[1],ze=(0,a.useState)(0),Le=(0,i.Z)(ze,2),He=Le[0],Ve=Le[1],je=(0,a.useState)(!1),Je=(0,i.Z)(je,2),Xe=Je[0],Ke=Je[1],Qe=(0,a.useState)({}),Ge=(0,i.Z)(Qe,2),$e=Ge[0],et=Ge[1],tt=(0,se.pQ)(),nt=(0,i.Z)(tt,2)[1],lt=(0,a.useState)(!1),ot=(0,i.Z)(lt,2),it=ot[0],at=ot[1],rt=(0,a.useState)({message:""}),dt=(0,i.Z)(rt,2),st=dt[0],ct=dt[1],ut=(0,a.useState)(!1),pt=(0,i.Z)(ut,2),mt=pt[0],vt=pt[1],ft=(0,r.UO)(),ht=ft.hash,gt=ft.transactionID,_t=ft.newStatus,yt=(0,_.I0)(),Et=(0,r.s0)(),kt=(0,a.useRef)(),bt=(0,_.v9)((function(e){return e.sessionReducer})).authenticated;(0,a.useEffect)((function(){return yt((0,b.IW)(!0))}),[]),(0,a.useEffect)((function(){if(bt){var e;if("trial_ended"!==(null===le||void 0===le?void 0:le.status)&&"inactive"!==(null===le||void 0===le?void 0:le.status))if((0,Z.km)(G.id).pipe((0,z.q)(1)).subscribe({complete:function(){return(0,Z.qp)(x.KI,G.id).pipe((0,z.q)(1)).subscribe({})}}),null===G||void 0===G||null===(e=G.pinned_modules)||void 0===e||e.map((function(e){return 0==ne.filter((function(t){return t.module_id===e.id})).length&&(0,H.vC)(e,x.Qc,5).pipe((0,z.q)(1)).subscribe({complete:function(){return e.lastUpdate=(0,v.now)()}})})),0==ee.length&&C.h.dispatch((0,b.Xc)({show:!0,message:"Fetching processes, transactions and other data. Dashboard will update in a while...",color:"var(--app-color-gray-light)",spinner:!0,noTimeout:!0,bottom:!0})),function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=C.h.getState().authReducer.sessionSettings.last_access_token,n=C.h.getState().flowReducer,l=n.lastUpdates,i=(n.transactions,(0,o.Z)((0,o.Z)({},W.ns.transactions.getAllTransactions(t)),{},{handlerEnabled:!0}));return new R.y((function(t){e||f()((0,v.now)()).diff(f()(l.transactions),"minutes")>10?(0,U.b)(i).then((function(e){var n;200===(null===e||void 0===e?void 0:e.status)&&null!==e&&void 0!==e&&e.data&&null!==e&&void 0!==e&&null!==(n=e.data)&&void 0!==n&&n.data&&(C.h.dispatch((0,b.C2)((0,o.Z)((0,o.Z)({},l),{},{transactions:(0,v.now)()}))),C.h.dispatch((0,b.Lf)(e.data.data.length>0?e.data.data:[])),t.next(e.data.data),t.complete())})).catch((function(e){t.error(e)})):t.complete()}))}(x.KI).pipe((0,z.q)(1)).subscribe({complete:function(){return(0,B.Xp)(x.KI).pipe((0,z.q)(1)).subscribe({complete:function(){return(0,F.EE)().pipe((0,z.q)(1)).subscribe({})}})}}),(null===ht||void 0===ht?void 0:ht.length)>0)(0,Z.yW)(ht).pipe((0,z.q)(1)).subscribe({next:function(e){Be(e),vt(!0)}});else if((null===gt||void 0===gt?void 0:gt.length)>0){var t;et(null===ne||void 0===ne?void 0:ne.find((function(e){return e.id===gt})));var n=null===ee||void 0===ee?void 0:ee.find((function(e){var t,n;return e.id===(null===(t=te.find((function(e){return e.id===ne.find((function(e){return e.id===gt})).module_id})))||void 0===t||null===(n=t.procedure)||void 0===n?void 0:n.id)}));(null===n||void 0===n||null===(t=n.steps)||void 0===t?void 0:t.length)>0?(C.h.dispatch((0,b.q4)(n)),he(!1),(null===_t||void 0===_t?void 0:_t.length)>0?xt(n,ne.find((function(e){return e.id===gt})),_t):Ke(!0)):(he(!0),(0,O.zJ)(n.id).pipe((0,L.P)()).subscribe({next:function(e){C.h.dispatch((0,b.q4)(e)),he(!1),(null===_t||void 0===_t?void 0:_t.length)>0?xt(e,ne.find((function(e){return e.id===gt}))):Ke(!0)},error:function(e){}}))}""===(null===G||void 0===G?void 0:G.id)&&(yt((0,me.ci)()),yt((0,b.mb)()))}}),[bt]),(0,a.useEffect)((function(){te.length>0&&te.filter((function(e,t){return(0,H.vC)(e).pipe((0,z.q)(1)).subscribe({next:function(){return te.length==t+1&&C.h.dispatch((0,b.Xc)({show:!1,message:""}))},complete:function(){return e.lastUpdate=(0,v.now)()}})}))}),[te]),(0,a.useEffect)((function(){var e=null===J||void 0===J?void 0:J.find((function(e){return e.id==new URLSearchParams(null===q||void 0===q?void 0:q.search).get("taskId")}));e&&(Be(e),Ee(!0))}),[J,q]);var Ct=(0,a.useCallback)((function(){var e=[];0!==(null===K||void 0===K?void 0:K.length)&&(K.map((function(t){var n;return e.push({taskName:t.name,process:null===t||void 0===t||null===(n=t.process)||void 0===n?void 0:n.name,completedOn:f()(t.completed_at).format("DD MMMM YYYY hh:mm"),duration:t.duration})})),Fe(e),Ye((0,o.Z)((0,o.Z)({},Pe),{},{completedTasks:K})))}),[X,J]);(0,a.useEffect)((function(){return Ct()}),[X,J]),(0,a.useEffect)((function(){return Zt()}),[J]),(0,a.useEffect)((function(){return Q({description:"",id:"",is_pinned:"",name:"",user_id:"",registered:!1,type:!1})}),[]);var Zt=(0,a.useCallback)((function(){var e=[],t=[],n=[];0!==(null===J||void 0===J?void 0:J.length)&&(J.map((function(l){var o=f()(new Date).format("YYYY-MM-DD");return"Done"===l.status?void 0:f()(l.due_date,"YYYY-MM-DD").isSame(o)?t.push(l):"Moved"===l.status||"Postponed"===l.status||"Cancelled"===l.status||f()(l.due_date,"YYYY-MM-DD").isAfter(o)?n.push(l):e.push(l)})),Ye({laterTasks:n,todayTasks:t,overdueTasks:e,completedTasks:K}))}),[J]),xt=function(e,t){var n,i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r=[],d=1;(null===e||void 0===e||null===(n=e.steps)||void 0===n?void 0:n.length)>0&&(null===e||void 0===e||null===(i=e.steps)||void 0===i||i.filter((function(e){var t;return null===e||void 0===e||null===(t=e.component_blueprints)||void 0===t?void 0:t.filter((function(e){return e.selected_fields.filter((function(e){return e.value=void 0}))}))}))),ve.uniqWith(ve.eqProps("group"))(t.component_fields).map((function(e){r=[].concat((0,l.Z)(r),[{id:e.component_blueprint_id,temp_id:e.id,selected_fields:ve.filter(ve.propEq("group",e.group))(t.component_fields)}])})),e.steps.filter((function(e){e.component_blueprints.filter((function(n){n.selected_fields.filter((function(n){var l=t.component_fields.find((function(e){return e.field_name===n.field_name}));if("Status"===n.data_type_name&&void 0!==a&&(d=+e.rank-1),void 0!=l)n.value=l.value;else if("Component"===n.data_type_name){var o=t.component_fields.find((function(e){return e.field_name===n.options.name}));void 0!=o&&(n.value=o.value)}}))}))})),nt({action:se._U.setComponents,value:r}),nt({action:se._U.setModuleItems,value:t.component_items}),C.h.dispatch((0,b.q4)((0,o.Z)((0,o.Z)({},e),{},{steps:e.steps,stepIndex:d,module_id:t.module_id,module:te.find((function(e){return e.id===t.module_id})),isUpdating:!0,selectedComponent:t}))),C.h.dispatch((0,b.IW)(!1)),Et("/begin-module")},Tt=function(){Ee(!ye)},wt=function(){Ee(!0),Ze(!0)},St=function(e){var t=Math.ceil(e.length/x.ZP);D.tq&&t>8?t=7:!D.tq&&t>23&&(t=23);var n=e.length>0?e.length<x.ZP+1||123456==we?ve.sortWith([ve.ascend(ve.prop("due_date"))])(e):ve.sortWith([ve.ascend(ve.prop("due_date"))])(e).slice(we*x.ZP-x.ZP,we*x.ZP):[];return a.createElement("div",null,a.createElement(c.Z,{style:{width:"120px",display:"none"},clicked:Tt,title:"New Task"}),e.length>0?n.map((function(e,t){var n,l;return a.createElement("div",{key:t},a.createElement(p.Z,{isEditable:!0,task:e,clicked:function(){!function(e){(0,Z.xJ)({status:"Done"},null===e||void 0===e?void 0:e.id).subscribe({next:function(e){K.push(e)},complete:function(){return Ve(3)}})}(e)},taskId:e.id,setTaskToEdit:function(){return Be(e)},openModal:function(){return wt()},priority:null!==(null===e||void 0===e||null===(n=e.add_info)||void 0===n?void 0:n.priority)?null===(l=x._l.find((function(t){var n;return t.value===(null===e||void 0===e||null===(n=e.add_info)||void 0===n?void 0:n.priority)})))||void 0===l?void 0:l.icon:""}))})):"No tasks found",e.length>0&&a.createElement("div",{style:{display:t>1?"flex":"none",margin:"20px 0 0 0"}},a.createElement("p",{style:{padding:"0 10px 0 0",fontSize:"14px"}},"Page:"),t>0&&(0,l.Z)(Array(t)).map((function(e,t){return a.createElement(c.Z,{title:t+1,disabled:t==we-1,clear:!0,key:t,style:{width:"10px",display:t<18?"":"none"},clicked:function(){return Se(t+1)}})})),a.createElement(c.Z,{title:"All",disabled:123456==we,clicked:function(){return Se(123456)},clear:!0})))},Mt=null===$e||void 0===$e||null===(t=$e.component_fields)||void 0===t||null===(n=t.find((function(e){return"Status"===e.data_type_name})))||void 0===n?void 0:n.value,Nt=(null===ie||void 0===ie||null===(h=ie.processModule)||void 0===h||null===(g=h.steps)||void 0===g?void 0:g.length)>0?null===ie||void 0===ie||null===(y=ie.processModule)||void 0===y||null===(E=y.steps)||void 0===E||null===(k=E.find((function(e){return(null===e||void 0===e?void 0:e.component_blueprints.filter((function(e){return e.selected_fields.filter((function(e){return"Status"===e.data_type_name})).length>0})).length)>0})))||void 0===k||null===(T=k.component_blueprints)||void 0===T||null===(w=T.find((function(e){return e.selected_fields.filter((function(e){return"Status"===e.data_type_name})).length>0})))||void 0===w||null===(S=w.options)||void 0===S?void 0:S.showOnly:void 0;return a.createElement(a.Fragment,null,a.createElement("div",{className:Y.host},a.createElement("div",{className:Y.dashboardPanel,style:{display:"flex",margin:"80px 0 0 0"}},a.createElement(d.Z,{headerTitle:"Dashboard",hasHeaderImgX:!0,headerImgSrc:s.wq4,targetProcessing:!1}),!D.tq&&function(){var e=[];if(te.filter((function(t){return ee.filter((function(e){var n;return t.procedure.id===e.id&&e.steps.length>0&&(null===e||void 0===e||null===(n=e.steps)||void 0===n?void 0:n.filter((function(e){return e.component_blueprints.filter((function(e){var t;return 1==(null===(t=e.options)||void 0===t?void 0:t.asDashboard)}))})))})).filter((function(n){return n.steps.filter((function(e){return e.component_blueprints.filter((function(e){var t;return 1==(null===(t=e.options)||void 0===t?void 0:t.asDashboard)}))})).filter((function(i){return i.component_blueprints.filter((function(e){var t;return 1==(null===(t=e.options)||void 0===t?void 0:t.asDashboard)})).filter((function(i){return i.selected_fields.filter((function(e){return 1==e.visible&&"Formula"===e.data_type_name})).map((function(a){var r,d,s;e=G.positions.filter((function(e){var t,n;return null===(t=i.options)||void 0===t||null===(n=t.showOnly)||void 0===n?void 0:n.includes(e.id)})).length>0||0==(null===(r=i.options)||void 0===r||null===(d=r.showOnly)||void 0===d?void 0:d.length)||void 0===(null===(s=i.options)||void 0===s?void 0:s.showOnly)?[].concat((0,l.Z)(e),[(0,o.Z)((0,o.Z)({},a),{},{module_id:t.id,procedure:n,module:t})]):(0,l.Z)(e)}))}))}))}))})),e.length>0)return a.createElement("div",{style:{display:"flex",margin:"20px 20px 30px 0"}},e.map((function(e,t){var n,l=null!==(n=e.value)&&void 0!==n?n:0;return"Formula"===e.data_type_name&&(l=(0,x.LV)(e.options,ne,[],[])),ne.filter((function(t){return t.module_id===e.module_id})).length>0?a.createElement("div",{key:t,className:Y.dashboardCard,onClick:function(){var t,n,l;(C.h.dispatch((0,b.IW)(!1)),C.h.dispatch((0,b.q4)((0,o.Z)((0,o.Z)({},e.procedure),{},{stepIndex:0,module_id:e.module_id,module:e.module}))),"countdateocc"===(null===e||void 0===e||null===(t=e.options)||void 0===t?void 0:t.operator))?Et("/modules/".concat(e.module_id,"?key=").concat(e.options.list.length>0?e.options.list[0]:"Status","&value=").concat(f()((0,x.Ob)(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.searchtext)).format("DD MMM YYYY"))):Et("/modules/".concat(e.module_id,"?key=").concat(e.options.list.length>0?e.options.list[0]:"Status","&value=").concat(null!==(l=e.options.searchtext)&&void 0!==l?l:""))}},a.createElement("p",null,e.field_name),l):0==t&&a.createElement("div",{key:t})})))}(),(null===G||void 0===G||null===(M=G.pinned_modules)||void 0===M?void 0:M.length)>0&&ve.sortWith([ve.descend(ve.prop("name"))])(null!==(N=null===G||void 0===G?void 0:G.pinned_modules)&&void 0!==N?N:[]).map((function(e,t){var n,i,r,d,s,u,p,v,f,h,g,_=ee.find((function(t){var n;return t.id===(null===e||void 0===e||null===(n=e.procedure)||void 0===n?void 0:n.id)}));return a.createElement("div",{key:t},a.createElement("div",{style:{minWidth:D.tq?"110%":"600px",marginBottom:"20px",width:D.tq?"100%":"70%"}},a.createElement($,{cardTitle:e.name,withAddButton:!!(null!==(n=!(null!==(i=e.options)&&void 0!==i&&i.asGraphical))&&void 0!==n?n:_)&&((null===_||void 0===_?void 0:_.steps.length)>0&&("trial_ended"!==le.status&&"inactive"!==le.status)),onAddItem:function(){var t,n,l,i;le.start=!1,(0,j.aK)().pipe((0,L.P)()).subscribe({}),C.h.dispatch((0,b.IW)(!1)),C.h.dispatch((0,b.q4)((0,o.Z)((0,o.Z)({},e.procedure),{},{stepIndex:1,module_id:e.id,module:e}))),nt({action:se._U.setModuleItems,value:$e.component_items}),nt({action:se._U.setModuleNewStepComponents,value:[]}),nt({action:se._U.setComponents,value:[]}),(null===ie||void 0===ie||null===(t=ie.processModule)||void 0===t||null===(n=t.steps)||void 0===n?void 0:n.length)>0&&(null===ie||void 0===ie||null===(l=ie.processModule)||void 0===l||null===(i=l.steps)||void 0===i||i.filter((function(e){var t;return null===e||void 0===e||null===(t=e.component_blueprints)||void 0===t?void 0:t.filter((function(e){return e.selected_fields.filter((function(e){return e.value=void 0}))}))}))),Et("/begin-module")},loading:fe,endLabel:!0===(null===(r=e.options)||void 0===r?void 0:r.asGraphical)?"":"Created Date"},function(e){var t=ne.filter((function(t){return t.module_id===e.id})),n=Math.ceil(t.length/x.M4);D.tq&&n>7?n=7:!D.tq&&n>23&&(n=23);var o=t.length>0?t.length<x.M4+1||123456==De?ve.sortWith([ve.descend(ve.prop("created_date"))])(t):ve.sortWith([ve.descend(ve.prop("created_date"))])(t).slice(De*x.M4-x.M4,De*x.M4):[];return a.createElement("div",null,t.length>0?o.map((function(t,n){return a.createElement("div",{key:n},a.createElement(re,{isEditable:!1,options:null===e||void 0===e?void 0:e.options,component:t,clicked:function(){var n;if(et(t),le.start=!0,ee.length>0&&(null===(n=ee.find((function(t){return t.id===e.procedure.id})))||void 0===n?void 0:n.steps.length)>0)return C.h.dispatch((0,b.q4)(ee.find((function(t){return t.id===e.procedure.id})))),void Ke(!0);he(!0),(0,O.zJ)(e.procedure.id).pipe((0,L.P)()).subscribe({next:function(e){C.h.dispatch((0,b.q4)(e)),Ke(!0),he(!1)},error:function(e){}})},setComponentToEdit:function(){},openModal:function(){}}))})):"No items found",a.createElement("div",{style:{display:n>1?"flex":"none",margin:"20px 0 0 0"}},t.length>0&&a.createElement(a.Fragment,null,a.createElement("p",{style:{padding:"0 10px 0 0",fontSize:"14px"}},"Page:"),n>0&&(0,l.Z)(Array(n)).map((function(e,t){return a.createElement(c.Z,{title:t+1,disabled:t==De-1,clear:!0,key:t,style:{width:"10px",display:t<18?"":"none"},clicked:function(){return Ie(t+1)}})}))),a.createElement(c.Z,{title:"All",disabled:123456==De,clicked:function(){return Ie(123456)},clear:!0})))}(e))),a.createElement(m.U7,{onClose:function(){return Ke(!1)},hasCloseIcon:!!D.tq,blured:!0,scrollable:!0,isOpen:Xe,backdropColor:!0,shadowedContainerStyle:{width:D.tq?"100%":"800px"}},a.createElement(de.r,{print:it,ref:kt,begunModule:ie,allModules:te,companyData:le,components:ne,selectedComponent:$e,companyUsersArray:oe}),a.createElement("div",{style:{display:"flex",alignSelf:"center"}},!it&&a.createElement(c.Z,{title:"Close",style:{width:"120px",display:D.tq?"none":""},clicked:function(){et({}),Ke(!1),at(!1),C.h.dispatch((0,b.q4)(""))}}),it&&a.createElement(c.Z,{light:!0,title:"Close",style:{width:"120px"},clicked:function(){at(!1)}}),(void 0===Mt&&((null===G||void 0===G?void 0:G.id)===(null===ie||void 0===ie||null===(d=ie.processModule)||void 0===d?void 0:d.user_id)||(null===Nt||void 0===Nt?void 0:Nt.filter((function(e){return G.positions.map((function(e){return e.id})).indexOf(e)>-1})).length)>0)||(void 0===Mt||"New"===Mt)&&(null===$e||void 0===$e||null===(s=$e.created_by)||void 0===s?void 0:s.id)===(null===G||void 0===G?void 0:G.id)||void 0!==Mt&&!("Closed"===Mt||Mt===(null===le||void 0===le||null===(u=le.misc_info)||void 0===u?void 0:u.lock))&&(null===Nt||void 0===Nt?void 0:Nt.filter((function(e){return G.positions.map((function(e){return e.id})).indexOf(e)>-1})).length)>0&&(1!=(null===G||void 0===G||null===(p=G.pinned_modules)||void 0===p||null===(v=p.find((function(e){return e.id===$e.module_id})))||void 0===v||null===(f=v.options)||void 0===f?void 0:f.strict)||(null===$e||void 0===$e||null===(h=$e.created_by)||void 0===h?void 0:h.id)!==(null===G||void 0===G?void 0:G.id))||!1===(null===$e||void 0===$e?void 0:$e.is_complete)&&(null===$e||void 0===$e||null===(g=$e.created_by)||void 0===g?void 0:g.id)===(null===G||void 0===G?void 0:G.id))&&a.createElement(c.Z,{light:!0,title:"Edit",style:{width:"120px"},clicked:function(){var e,t,n,i,a=[];(null===ie||void 0===ie||null===(e=ie.processModule)||void 0===e||null===(t=e.steps)||void 0===t?void 0:t.length)>0&&(null===ie||void 0===ie||null===(n=ie.processModule)||void 0===n||null===(i=n.steps)||void 0===i||i.filter((function(e){var t;return null===e||void 0===e||null===(t=e.component_blueprints)||void 0===t?void 0:t.filter((function(e){return e.selected_fields.filter((function(e){return e.value=void 0}))}))}))),ve.uniqWith(ve.eqProps("group"))($e.component_fields).map((function(e){a=[].concat((0,l.Z)(a),[{id:e.component_blueprint_id,temp_id:e.id,selected_fields:ve.filter(ve.propEq("group",e.group))($e.component_fields)}])})),ie.processModule.steps.filter((function(e){e.component_blueprints.filter((function(e){e.selected_fields.filter((function(e){var t,n=null===(t=$e.component_fields)||void 0===t?void 0:t.find((function(t){return t.field_name===e.field_name}));if(void 0!=n)e.value=n.value;else if("Component"===e.data_type_name){var l,o=null===(l=$e.component_fields)||void 0===l?void 0:l.find((function(t){return t.field_name===e.options.name}));void 0!=o&&(e.value=o.value)}}))}))})),nt({action:se._U.setComponents,value:a}),nt({action:se._U.setModuleItems,value:JSON.parse(JSON.stringify($e.component_items))}),C.h.dispatch((0,b.IW)(!1));var r=ie.processModule.steps.filter((function(e){var t,n,l,o,i;return void 0==(null===e||void 0===e||null===(t=e.options)||void 0===t?void 0:t.showStepAll)||1==(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.showStepAll)||0==(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.showStepAll)&&(null===e||void 0===e||null===(o=e.options)||void 0===o||null===(i=o.showOnly)||void 0===i?void 0:i.filter((function(e){return G.positions.map((function(e){return e.id})).indexOf(e)>-1})).length)>0})).map((function(e,t){return(0,o.Z)((0,o.Z)({},e),{},{rank:t+1})}));C.h.dispatch((0,b.q4)((0,o.Z)((0,o.Z)({},ie.processModule),{},{steps:r,stepIndex:1,back_id:r.length>0?r[0].id:0,module_id:$e.module_id,module:null===te||void 0===te?void 0:te.find((function(e){return e.id===$e.module_id})),isUpdating:!0,selectedComponent:$e}))),Et("/begin-module")}}),!it&&a.createElement(c.Z,{light:!0,title:"Print",clicked:function(){return at(!0)},style:{width:"120px"}}),it&&a.createElement(ue(),{trigger:function(){return a.createElement("button",{className:Y.singleButton},"Send to Printer")},content:function(){return kt.current}}))))})),a.createElement("div",{style:{display:null!==G&&void 0!==G&&null!==(A=G.ui_permissions)&&void 0!==A&&A.find((function(e){return"view-dashboard-task"===e}))?"":"none"}},a.createElement("div",{className:Y.headerContainer,style:{display:""}},a.createElement("div",{style:{paddingRight:"30px"}},a.createElement(c.Z,{className:te.length>1?Y.newTaskButton:Y.default,style:{width:"120px"},clicked:Tt,title:"New Task"}))),a.createElement(V.mQ,{style:{width:"100%",fontFamily:"var(--app-font-poppins)",fontSize:D.tq?"12px":"16px",fontWeight:"700"},selectedIndex:He,onSelect:function(e){Ve(e),Se(1)}},a.createElement(V.td,null,a.createElement(V.OK,null,"Today",(null===Pe||void 0===Pe?void 0:Pe.todayTasks.length)>0&&" [".concat(null===Pe||void 0===Pe?void 0:Pe.todayTasks.length,"]")),a.createElement(V.OK,null,"Overdue",(null===Pe||void 0===Pe?void 0:Pe.overdueTasks.length)>0&&" [".concat(null===Pe||void 0===Pe?void 0:Pe.overdueTasks.length,"]")),a.createElement(V.OK,null,"Upcoming",(null===Pe||void 0===Pe?void 0:Pe.laterTasks.length)>0&&" [".concat(null===Pe||void 0===Pe?void 0:Pe.laterTasks.length,"]")),a.createElement(V.OK,null,"Completed")),a.createElement(V.x4,null,a.createElement("div",{style:{minWidth:D.tq?"110%":"600px",marginTop:"20px",width:D.tq?"100%":"70%"}},a.createElement(u.Z,{cardTitle:"Tasks for Today"},St(Pe.todayTasks)))),a.createElement(V.x4,null,a.createElement("div",{style:{minWidth:D.tq?"110%":"600px",marginTop:"20px",width:D.tq?"100%":"70%"}},a.createElement(u.Z,{cardTitle:"Overdue Tasks"},St(Pe.overdueTasks)))),a.createElement(V.x4,null,a.createElement("div",{style:{minWidth:D.tq?"110%":"600px",marginTop:"20px",width:D.tq?"100%":"70%"}},a.createElement(u.Z,{cardTitle:"Upcoming Tasks"},St(Pe.laterTasks)))),a.createElement(V.x4,null,a.createElement("div",{style:{minWidth:D.tq?"110%":"600px",marginTop:"20px",width:D.tq?"100%":"70%"}},a.createElement(u.Z,{cardTitle:"Completed Tasks"},function(e){var t=Math.ceil(e.length/x.M4);D.tq&&t>8?t=7:!D.tq&&t>23&&(t=23);var n=e.length>0?e.length<x.M4-1||123456==we?ve.sortWith([ve.descend(ve.prop("completed_at"))])(e):ve.sortWith([ve.descend(ve.prop("completed_at"))])(e).slice(we*x.M4-x.M4,we*x.M4):[];return a.createElement("div",null,a.createElement(c.Z,{style:{width:"120px",display:"none"},clicked:Tt,title:"New Task"}),a.createElement("div",{style:{fontSize:"12px",textAlign:"right"}},(null===e||void 0===e?void 0:e.length)>0?"Completed Date":""),e.length>0?n.map((function(e,t){var n,l;return a.createElement("div",{key:t},a.createElement(p.Z,{false:!0,task:e,clicked:function(){},taskId:e.id,setTaskToEdit:function(){return Be(e)},openModal:function(){return wt()},priority:null!==(null===e||void 0===e||null===(n=e.add_info)||void 0===n?void 0:n.priority)?null===(l=x._l.find((function(t){var n;return t.value===(null===e||void 0===e||null===(n=e.add_info)||void 0===n?void 0:n.priority)})))||void 0===l?void 0:l.icon:""}))})):"No tasks found",e.length>0&&a.createElement("div",{style:{display:t>1?"flex":"none",margin:"20px 0 0 0"}},a.createElement("p",{style:{padding:"0 10px 0 0",fontSize:"14px"}},"Page:"),t>0&&(0,l.Z)(Array(t)).map((function(e,t){return a.createElement(c.Z,{disabled:t==we-1,title:t+1,clear:!0,key:t,style:{width:"10px"},clicked:function(){return Se(t+1)}})})),a.createElement(c.Z,{title:"All",disabled:123456==we,clicked:function(){return Se(123456)},clear:!0})))}(Pe.completedTasks)))),a.createElement("br",null))),a.createElement("div",{style:{marginTop:"20px",width:D.tq?"120%":"50%",display:"superadmin"===G.user_type?"":"none"}},a.createElement("div",{className:Y.headerContainer,style:{display:""}},a.createElement("div",{style:{paddingRight:"30px"}},a.createElement(c.Z,{style:{width:"150px"},clicked:function(){st.companyName&&st.displayName&&st.email&&st.firstName&&st.lastName&&st.slug&&(he(!0),(0,j.F2)(st).pipe((0,z.q)(1)).subscribe({next:function(){return C.h.dispatch((0,b.Xc)({show:!0,message:"Success! ".concat(st.companyName," was created. Email notification sent to ").concat(st.email)}))},complete:function(){return he(!1)}}))},title:"New Company",loading:fe,icon:a.createElement("img",{alt:"",src:s.ytc,style:{width:"24px",height:"24px",display:"none"}})}))),""!==(null===st||void 0===st?void 0:st.message)&&a.createElement(I.Z,{message:null===st||void 0===st?void 0:st.message,onClick:function(){return ct((0,o.Z)((0,o.Z)({},st),{},{message:""}))}}),a.createElement(u.Z,{cardTitle:"Create Company"},a.createElement("div",null,a.createElement(m.Ev,{fieldLabel:"Company Name",style:{border:"0"},visible:!0},a.createElement("div",{className:Y.fieldRowContainer},a.createElement("input",{onChange:function(e){ct((0,o.Z)((0,o.Z)({},st),{},{companyName:e.target.value}))},autoComplete:"none",className:Y.fieldTypeInput,name:"Company Name"}))),a.createElement(m.Ev,{fieldLabel:"Display Name",style:{border:"0"},visible:!0},a.createElement("div",{className:Y.fieldRowContainer},a.createElement("input",{onChange:function(e){ct((0,o.Z)((0,o.Z)({},st),{},{displayName:e.target.value}))},autoComplete:"none",className:Y.fieldTypeInput,name:"Company Name"}))),a.createElement(m.Ev,{fieldLabel:"Slug",style:{border:"0"},visible:!0},a.createElement("div",{className:Y.fieldRowContainer},a.createElement("input",{onChange:function(e){ct((0,o.Z)((0,o.Z)({},st),{},{slug:e.target.value}))},autoComplete:"none",className:Y.fieldTypeInput,name:"Slug"}))),a.createElement(m.Ev,{fieldLabel:"Email",style:{border:"0"},visible:!0},a.createElement("div",{className:Y.fieldRowContainer},a.createElement("input",{onChange:function(e){ct((0,o.Z)((0,o.Z)({},st),{},{email:e.target.value}))},autoComplete:"none",className:Y.fieldTypeInput,name:"Email"}))),a.createElement(m.Ev,{fieldLabel:"First Name",style:{border:"0"},visible:!0},a.createElement("div",{className:Y.fieldRowContainer},a.createElement("input",{onChange:function(e){ct((0,o.Z)((0,o.Z)({},st),{},{firstName:e.target.value}))},autoComplete:"none",className:Y.fieldTypeInput,name:"First Name"}))),a.createElement(m.Ev,{fieldLabel:"Last Name",style:{border:"0"},visible:!0},a.createElement("div",{className:Y.fieldRowContainer},a.createElement("input",{onChange:function(e){ct((0,o.Z)((0,o.Z)({},st),{},{lastName:e.target.value}))},autoComplete:"none",className:Y.fieldTypeInput,name:"Last Name"})))))))),a.createElement(P,{modalVisible:ye,heading:Ce?"Edit Task":"Create a New Task",task:Ce?Ue:{},isProcess:!1,blured:!0,shadowedContainerStyle:{width:"35%",minWidth:"400px"},onClose:function(){return Ee(!1),void Ze(!1)},isEdit:Ce}),a.createElement(pe.Z,{openedTask:Ue,taskName:Ue.name,modalVisible:mt,modalClosed:function(){return vt(!1)},hasTutorial:!1,blured:!0,childrenWrapperStyle:{alignItems:"center"},onCancel:function(){return vt(!1)}}))}))},62589:function(e,t,n){n.d(t,{Z:function(){return _}});var l=n(1413),o=n(67861),i=(n(83381),n(39518)),a=n(88374),r=n(20086),d="InfoTaskModal_savedDescription__4uzvj",s="InfoTaskModal_contentWrapper__gt+iR",c="InfoTaskModal_contentContainer__DoP5Z",u="InfoTaskModal_content__42cL+",p="InfoTaskModal_backIconContainer__eM6Vt",m="InfoTaskModal_fieldHistoryTitle__z8Foi",v=n(50981),f=n.n(v),h=n(73500);var g=function(e){var t=e.title,n=e.content;return o.createElement("div",null,o.createElement("p",{className:m},t),o.createElement("p",{className:d},n),e.children)},_=(0,i.$j)((function(e){var t=e.flowReducer;return{inviteColleguesList:t.inviteColleguesList,companyData:t.companyData}}),(function(e){return{onSetCompanyDataField:function(t){return e((0,a.QK)(t))}}}))((function(e){var t=e.modalVisible,n=e.childrenWrapperStyle,i=e.modalClosed,a=e.openedTask,d=a.name,m=a.created_at,v=a.completed_on,_=a.duration,y=(a.process,a.creator),E=a.assignee;return a.components,t?o.createElement("div",null,o.createElement(r.U7,{backdropStyle:{height:"900px"},marginTop:"500px",onClose:i,shadowedContainerStyle:{width:h.tq?"100%":"40%"},position:"fixed",scrollable:!0,backdropColor:!0,blured:!0,width:"90%",isOpen:t},o.createElement("div",{className:p},o.createElement(r.zx,{title:"Close",clicked:i})),o.createElement("div",{className:s,style:(0,l.Z)({},n)},o.createElement("div",{className:c},o.createElement("div",{className:u},o.createElement(g,{title:"Task Name",content:d}),o.createElement(g,{title:"Task Created On",content:f()(m).format("DD of MMMM YYYY hh:mm")}),o.createElement(g,{title:"Completed On",content:f()(v).format("DD of MMMM YYYY hh:mm")}),o.createElement(g,{title:"Time on this Task",content:_}),o.createElement(g,{title:"Task Creator",content:y.first_name+" "+y.last_name}),o.createElement(g,{title:"Assignee",content:E.first_name+" "+E.last_name})))))):null}))},72864:function(e,t,n){n.d(t,{Z:function(){return u}});var l=n(50981),o=n.n(l),i=n(67861),a=n(41771),r=n(20086),d="TaskCard_task-card__8sPmS",s="TaskCard_task-card-container__rHG31",c="TaskCard_clickLabel__A3ARk";var u=function(e){var t=e.task,n=e.openModal,l=void 0===n?function(){}:n,u=e.setTaskToEdit,p=void 0===u?function(){}:u,m=e.clicked,v=void 0===m?function(){}:m,f=e.isEditable,h=e.priority,g=t.name,_=t.process,y=t.status;return t.add_info,i.createElement("div",{className:d},t.completed_at?i.createElement("div",{className:s,style:{flex:1},onClick:function(){l(),p()}},i.createElement("p",{className:c},"".concat(void 0!==h?"".concat(h):"","  ").concat(g)),i.createElement("p",{className:c},o()(t.completed_at).format("DD of MMMM YYYY"))):i.createElement("div",{className:s},!_&&i.createElement(r.XZ,{label:"".concat(void 0!==h?"".concat(h):""," ").concat(g," ").concat(null!==y?"  (".concat(y,")"):""),onChange:v}),_&&i.createElement("p",{className:c,onClick:v}," ".concat(void 0!==h?"".concat(h):""," ").concat(g," ").concat(null!==y?"(".concat(y,")"):"")),f&&i.createElement("img",{alt:"",style:{cursor:"pointer"},src:a.ePH,onClick:function(){l(),p()}})))}},61616:function(e,t,n){n.d(t,{Z:function(){return d}});var l="HeaderTopBar_headerTopBar__D+HJ9",o="HeaderTopBar_headerTopBarContainer__1jgza",i="HeaderTopBar_loadingContainer__UcfwW",a=n(93572),r=n(67861),d=function(e){var t=e.hasHeaderImg,n=e.headerTitle,d=e.headerImgSrc,s=e.targetProcessing;return r.createElement("div",{className:l},r.createElement("div",{className:o},t&&r.createElement("img",{alt:"",src:d}),r.createElement("p",null,n),s&&r.createElement("span",{className:i},r.createElement(a.Z,{type:"Watch",color:"var(--app-color-gray-light)",height:15,width:"".concat(30,"px")}))))}},51481:function(e,t,n){n.d(t,{_5:function(){return v},km:function(){return p},lV:function(){return h},qp:function(){return m},vr:function(){return f},xJ:function(){return g},yW:function(){return u}});var l=n(1413),o=n(50981),i=n.n(o),a=n(95256),r=n(88374),d=n(88827),s=n(30994),c=n(96332),u=function(e){var t=d.h.getState().authReducer.sessionSettings.last_access_token,n=(0,l.Z)((0,l.Z)({},s.ns.tasks.getTaskById(t,e)),{},{handlerEnabled:!0});return new a.y((function(e){(0,c.b)(n).then((function(t){var n,l;200===(null===t||void 0===t?void 0:t.status)&&null!==t&&void 0!==t&&t.data&&null!==t&&void 0!==t&&null!==(n=t.data)&&void 0!==n&&n.data&&(e.next(null===t||void 0===t||null===(l=t.data)||void 0===l?void 0:l.data),e.complete())})).catch((function(t){e.error(t)}))}))},p=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=d.h.getState().authReducer.sessionSettings.last_access_token,u=d.h.getState().flowReducer,p=u.lastUpdates,m=u.allTasks,v=(0,l.Z)((0,l.Z)({},s.ns.tasks.getAllTasks(n,e)),{},{handlerEnabled:!0});return new a.y((function(e){t||i()((0,o.now)()).diff(i()(p.tasks),"minutes")>10||0===m.length?(0,c.b)(v).then((function(t){var n;if(200===(null===t||void 0===t?void 0:t.status)&&null!==t&&void 0!==t&&t.data&&null!==t&&void 0!==t&&null!==(n=t.data)&&void 0!==n&&n.data){var i,a=null===t||void 0===t||null===(i=t.data)||void 0===i?void 0:i.data;d.h.dispatch((0,r.rh)(a)),d.h.dispatch((0,r.C2)((0,l.Z)((0,l.Z)({},p),{},{tasks:(0,o.now)()}))),e.next(a),e.complete()}})).catch((function(t){e.error(t)})):e.complete()}))},m=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],u=d.h.getState().authReducer.sessionSettings.last_access_token,p=(0,l.Z)((0,l.Z)({},s.ns.tasks.getAllCompletedTasks(u,e,t)),{},{handlerEnabled:!0}),m=d.h.getState().flowReducer,v=m.lastUpdates,f=m.allCompletedTasks;return new a.y((function(t){n||i()((0,o.now)()).diff(i()(v.allCompletedTasks),"minutes")>10||0===f.data.length?(0,c.b)(p).then((function(n){var l;if(200===(null===n||void 0===n?void 0:n.status)&&null!==n&&void 0!==n&&n.data&&null!==n&&void 0!==n&&null!==(l=n.data)&&void 0!==l&&l.data){var o=null===n||void 0===n?void 0:n.data;d.h.dispatch((0,r.cL)(o,e)),t.next(o),t.complete()}})).catch((function(e){t.error(e)})):t.complete()}))},v=function(e){var t=d.h.getState().authReducer.sessionSettings.last_access_token,n=new FormData,o=(0,l.Z)({},s.ns.tasks.deleteTask(t,e)),i=(0,l.Z)((0,l.Z)({},o),{},{headers:(0,l.Z)({},o.headers),data:n,handlerEnabled:!0});return new a.y((function(t){return(0,c.b)(i).then((function(n){200===(null===n||void 0===n?void 0:n.status)&&null!==n&&void 0!==n&&n.data&&(d.h.dispatch((0,r.Xc)({show:!0,message:"You have successfully deleted the task",color:"red"})),d.h.dispatch((0,r.OQ)(e)),t.next(n.data),t.complete())})).catch((function(e){t.error(e)}))}))},f=function(e){var t=d.h.getState().authReducer.sessionSettings.last_access_token,n=new FormData;n.append("name",e.taskName),n.append("description",e.taskDescription),n.append("due_date",e.dueDate),n.append("assignee_id",e.newAssignee.assignee_id),e.taskProcess&&n.append("procedure_id",e.taskProcess.procedure_id),e.add_info&&n.append("add_info",JSON.stringify(e.add_info));var o=(0,l.Z)((0,l.Z)({},s.ns.tasks.createTask(t)),{},{data:n,handlerEnabled:!0});return new a.y((function(e){return(0,c.b)(o).then((function(t){var n;if(null!==t&&void 0!==t&&t.data&&null!==t&&void 0!==t&&null!==(n=t.data)&&void 0!==n&&n.data){var l,o=null===t||void 0===t||null===(l=t.data)||void 0===l?void 0:l.data;d.h.dispatch((0,r.Pb)(o)),d.h.dispatch((0,r.N5)(o,!1)),d.h.dispatch((0,r.Xc)({show:!0,message:"You have successfully created a new task"})),e.next(o),e.complete()}})).catch((function(t){e.error(t)}))}))},h=function(e){var t=d.h.getState().authReducer.sessionSettings.last_access_token,n=(0,l.Z)((0,l.Z)({},s.ns.tasks.startTaskById(t,e)),{},{data:e,handlerEnabled:!0,forwardAllErrors:!0});return new a.y((function(e){return(0,c.b)(n).then((function(t){var n,l;null!==t&&void 0!==t&&t.data&&null!==t&&void 0!==t&&null!==(n=t.data)&&void 0!==n&&n.data&&(d.h.dispatch((0,r.eT)(null===t||void 0===t||null===(l=t.data)||void 0===l?void 0:l.data)),e.next(),e.complete())})).catch((function(t){e.error(t)}))}))},g=function(e,t){var n,o=d.h.getState().authReducer.sessionSettings.last_access_token,i={name:e.name,description:e.description,due_date:e.due_date,assignee_id:e.assignee_id,status:null!==(n=null===e||void 0===e?void 0:e.status)&&void 0!==n?n:""};e.add_info&&(i.add_info=JSON.stringify(e.add_info));var u=(0,l.Z)((0,l.Z)({},s.ns.tasks.editTask(o,t)),{},{data:i,forwardAllErrors:!0});return new a.y((function(e){return(0,c.b)(u).then((function(t){var n;if(null!==t&&void 0!==t&&t.data&&null!==t&&void 0!==t&&null!==(n=t.data)&&void 0!==n&&n.data){var l,o=null===t||void 0===t||null===(l=t.data)||void 0===l?void 0:l.data;d.h.dispatch((0,r.eT)(o)),e.next(o),e.complete()}})).catch((function(t){e.error(t)}))}))}}}]);
//# sourceMappingURL=339.137bc5c6.chunk.js.map