(self.webpackChunkflowhero=self.webpackChunkflowhero||[]).push([[722,308],{48630:function(e,n,l){"use strict";l.d(n,{X:function(){return g}});var t=l(4942),o=l(87462),i=l(45987),d=l(67861),a=l(64468),u="Checkbox_host__MtZZg",r="Checkbox_checkmarkContainer__7m7hu",s="Checkbox_input__fK+n4",c="Checkbox_checkboxControl__TezWV",v="Checkbox_checkboxControlIcon__5qzo9",p="Checkbox_checkboxLabel__lacXH",m="Checkbox_checkboxDisabled__Qo2Ag",f=l(41771),_=l(47144),y=l.n(_),h=["checkboxLabel","hasMandatoryIndicator","disabled","errormessage"];var g=(0,d.forwardRef)((function(e,n){var l=e.checkboxLabel,_=e.hasMandatoryIndicator,g=e.disabled,b=e.errormessage,Z=(0,i.Z)(e,h);return d.createElement(a.__,{hasMandatoryIndicator:_,className:y()(u,(0,t.Z)({},m,g)),"app-checkbox-error":b&&(null===b||void 0===b?void 0:b.length)>0?"error":"false"},d.createElement("span",{className:y()(r)},d.createElement("input",(0,o.Z)({ref:n,className:y()(s),type:"checkbox",disabled:g},Z)),d.createElement("span",{className:y()(c)},d.createElement(f.MKd,{className:y()(v)}))),d.createElement("span",{className:y()(p)},l))}))},5980:function(e,n,l){"use strict";l.d(n,{Z:function(){return P}});var t=l(1413),o=l(70885),i=l(67861),d=l(39518),a=l(11577),u=l(93389),r=l(88374),s="ProcessStepsChart_host__Ubvna",c="ProcessStepsChart_target__lLbWe",v="ProcessStepsChart_startContainer__1AZuF",p="ProcessStepsChart_placeholderContainer__HI-Ue",m="ProcessStepsChart_paragraph__D9Hr2",f="ProcessStepsChart_tree__uqAbd",_="ProcessStepsChart_step__1kNXi",y=l(89293),h=l(29937),g=l(71265),b=l(20086),Z=l(28550),C=l(88846),E=l(62169),S=l(84634),M=l(9204),x=l(30401),w=l(62498),k=l(80121),I=l(19194),N=l(67861),P=(0,d.$j)((function(e){var n=e.flowReducer;return{selectedProcess:n.selectedProcess,companyProcesses:n.companyProcesses}}),(function(e){return{onSetSelectedProStep:function(n){return e((0,r.Sc)(n))}}}))((function(e){var n=(0,g.Z)(),l=e.selectedProcess,d=e.onEditStep,r=e.companyProcesses,P=(0,h._M)(),T=(0,o.Z)(P,2),A=T[0],L=T[1],D=(0,i.useState)(!1),O=(0,o.Z)(D,2),B=O[0],U=O[1];(0,i.useEffect)((function(){if(""!==l.name&&""!==l.id){var e=r.find((function(e){return e.id===l.id}));if(e&&(null===e||void 0===e?void 0:e.steps.length)>0){var t=C.Z(E.Z(S.Z("rank")),M.Z(x.Z(w.Z("component_blueprints"),M.Z((function(e){return Z.Z("_uuid",(0,y.mR)(),e)})))))(e.steps);L({type:h.Cb.setAllSteps,value:t})}else U(!0),(0,u.zJ)(l.id).pipe((0,a.P)()).subscribe({next:function(e){var l;if((null===e||void 0===e||null===(l=e.steps)||void 0===l?void 0:l.length)>0){var t=C.Z(E.Z(S.Z("rank")),M.Z(x.Z(w.Z("component_blueprints"),M.Z((function(e){return Z.Z("_uuid",(0,y.mR)(),e)})))))(e.steps);L({type:h.Cb.setAllSteps,value:t}),n()&&U(!1)}else U(!1)},error:function(e){n()&&U(!1)}})}}),[l]);var q=function e(l){var o,i,r,s=l.step;return N.createElement(I.O,{label:N.createElement("div",{className:c,style:{display:""},onClick:function(){var e;L({type:h.Cb.setSelectedStep,value:(0,t.Z)((0,t.Z)({},s),{},{parent_steps:M.Z(k.Z(["id","name","rank"]))(null!==(e=null===s||void 0===s?void 0:s.parent_steps)&&void 0!==e?e:[])})}),d()}},N.createElement("div",{className:v},N.createElement("div",{className:_,"app-card-type":"start"},N.createElement("p",{className:m},null===s||void 0===s?void 0:s.name))))},(null===s||void 0===s?void 0:s.next_steps)&&(null===s||void 0===s||null===(o=s.next_steps)||void 0===o?void 0:o.map((function(n,l){return N.createElement(e,{key:l,step:null===A||void 0===A?void 0:A.steps.find((function(e){return e.id===n.id}))})}))),(null===s||void 0===s?void 0:s.pathway_steps)&&(null===s||void 0===s||null===(i=s.pathway_steps)||void 0===i?void 0:i.map((function(e,n){return N.createElement(I.O,{key:n,label:N.createElement("div",{className:f},e.name)})}))),(null===s||void 0===s?void 0:s.pathway_processes)&&(null===s||void 0===s||null===(r=s.pathway_processes)||void 0===r?void 0:r.map((function(e,l){return N.createElement(I.O,{key:l,label:N.createElement("div",{className:f,onClick:function(){U(!0),(0,u.hI)({processId:e.id}).pipe((0,a.P)()).subscribe({next:function(e){var l=C.Z(E.Z(S.Z("rank")),M.Z(x.Z(w.Z("component_blueprints"),M.Z((function(e){return Z.Z("_uuid",(0,y.mR)(),e)})))))(e);L({type:h.Cb.setAllSteps,value:l}),n()&&U(!1)},error:function(e){n()&&U(!1)}})}},"Process: ".concat(e.name))})}))),!0===(null===s||void 0===s?void 0:s.is_end)&&N.createElement(I.O,{label:N.createElement("div",{className:f},"End Step")}))};return N.createElement("div",null,B&&""!==l.name&&""!==l.id&&N.createElement("div",{className:p,style:{display:""}},N.createElement(b.$j,{size:80,type:"ThreeDots"})),N.createElement("div",{className:s,"app-is-preview":"false",style:{display:(null===A||void 0===A?void 0:A.steps.length)>0?"":"none"}},!B&&(null===A||void 0===A?void 0:A.steps.length)>0&&N.createElement(I.m,{lineWidth:"2px",lineColor:"green",lineBorderRadius:"10px",label:N.createElement("div",{className:f,style:{display:(null===A||void 0===A?void 0:A.steps.length)>0?"":"none"}},"Start of Process")},(null===A||void 0===A?void 0:A.steps.length)>0&&N.createElement(q,{step:null===A||void 0===A?void 0:A.steps.find((function(e){return 1===e.rank}))}))))}))},12308:function(e,n,l){"use strict";l.r(n),l.d(n,{ModuleLists:function(){return _},default:function(){return y}});var t=l(42982),o=l(87462),i=l(70885),d="ModuleLists_tableContainer__bWvCW",a="ModuleLists_tableHostSimple__FZv16",u="ModuleLists_tableHost__ivwXL",r="ModuleLists_tableReport__ZqBV5",s=l(90369),c=l(73500),v=l(67861),p=l(20086),m=l(89293),f=l(67861),_=function(e){var n=e.columns,l=void 0===n?[]:n,_=e.list,y=void 0===_?[]:_,h=e.title,g=e.onListItemClick,b=void 0===g?function(e){}:g,Z=e.className,C=void 0===Z?d:Z,E=e.children,S=e.isReport,M=void 0!==S&&S,x=(0,v.useState)(1),w=(0,i.Z)(x,2),k=w[0],I=w[1],N=(0,v.useState)(void 0),P=(0,i.Z)(N,2),T=(P[0],P[1]),A=c.tq?l.slice(1,4):l;function L(e){var n=e.columns,l=e.data,t=(0,s.useTable)({columns:n,data:l}),i=t.getTableProps,d=t.getTableBodyProps,c=t.headerGroups,v=t.rows,p=t.prepareRow;return f.createElement("div",{className:h?M?r:u:a},f.createElement("table",(0,o.Z)({},i(),{size:"sm"}),f.createElement("thead",null,c.map((function(e,n){return f.createElement("tr",(0,o.Z)({key:n},e.getHeaderGroupProps()),e.headers.map((function(e,n){return f.createElement("th",(0,o.Z)({key:n},e.getHeaderProps()),f.createElement("div",{style:{border:"0"}},e.render("Header")))})))}))),f.createElement("tbody",d(),v.map((function(e,n){return p(e)||f.createElement("tr",(0,o.Z)({key:n},e.getRowProps(),{onClick:function(){T(n),b(h?12345==k?y[e.index]:y.slice(k*m.ZP-m.ZP,k*m.ZP)[e.index]:y[e.index])}}),e.cells.map((function(e,n){return f.createElement("td",(0,o.Z)({key:n},e.getCellProps()),f.createElement("div",{style:{border:"0"}},e.render("Cell")))})))})))))}return f.createElement("div",{className:null!==C&&void 0!==C?C:"","app-variant-is-mobile":c.tq?"true":"false",style:{display:"flex",flexDirection:"column"}},f.createElement("div",{style:{marginBottom:"10px"}},E,!h&&f.createElement(L,{columns:A.map((function(e){return{Header:function(){return f.createElement("span",null,e)},accessor:e}})),data:y}),h&&f.createElement(L,{columns:[{Header:h,columns:A.map((function(e){return{Header:e,accessor:e}}))}],data:12345==k?y:y.slice(k*m.ZP-m.ZP,k*m.ZP)}),h&&y.length>0&&y.length>m.ZP+1&&y.slice(k*m.ZP-m.ZP,k*m.ZP).length<m.ZP+1&&f.createElement("div",{style:{display:"flex"}},f.createElement("p",{style:{padding:"10px 10px 0 0",fontSize:"12px"}},"Page:"),(0,t.Z)(Array(Math.ceil(y.length/m.ZP))).map((function(e,n){return f.createElement(p.zx,{disabled:n==k-1,title:n+1,clear:!0,key:n,style:{width:"10px",display:n<18?"":"none"},clicked:function(){return I(n+1)}})})),f.createElement(p.zx,{title:"All",disabled:12345==k,clicked:function(){return I(12345)},clear:!0}))))},y=_},64509:function(e,n,l){"use strict";l.d(n,{r:function(){return el},Z:function(){return nl}});var t=l(87462),o=l(4942),i=l(1413),d=l(42982),a=l(70885),u=l(67861),r={processStepHost:"ModuleStep_processStepHost__fdU12",listContainer:"ModuleStep_listContainer__+T0XF",detailContainer:"ModuleStep_detailContainer__EFIwE",centeredCardMargin:"ModuleStep_centeredCardMargin__eYosE",centeredSpinner:"ModuleStep_centeredSpinner__sOFdo",emptyElementsSection:"ModuleStep_emptyElementsSection__ehjx-",stepCounter:"ModuleStep_stepCounter__mD22I",clockIcon:"ModuleStep_clockIcon__TY0er",stepTitle:"ModuleStep_stepTitle__f9SxJ",stepTitleSmaller:"ModuleStep_stepTitleSmaller__Ng9ym",stepGuidance:"ModuleStep_stepGuidance__aWqq0",stepGuidanceSmaller:"ModuleStep_stepGuidanceSmaller__IKIF+",inputContainer:"ModuleStep_inputContainer__s9qZ2",selectInput:"ModuleStep_selectInput__LcokN",multiselectWithSearch:"ModuleStep_multiselectWithSearch__qMOzq",smoMultiselectParent:"ModuleStep_smoMultiselectParent__Pweb-",selectMenuItem:"ModuleStep_selectMenuItem__i73KN",inputClassName:"ModuleStep_inputClassName__VI3pY",toggleMenuInputButton:"ModuleStep_toggleMenuInputButton__gcFHY",goToNextStep:"ModuleStep_goToNextStep__ePl+k",nextStepsContainer:"ModuleStep_nextStepsContainer__zcpA0",nextStepImageContainer:"ModuleStep_nextStepImageContainer__55MGd",nextStepWrapper:"ModuleStep_nextStepWrapper__ZtiNA",tasksTableHost:"ModuleStep_tasksTableHost__AZ6rT",headerContainer:"ModuleStep_headerContainer__4kozo",content:"ModuleStep_content__ClnRX","react-grid-layout":"ModuleStep_react-grid-layout__21OCf",layoutJSON:"ModuleStep_layoutJSON__tFPI9",columns:"ModuleStep_columns__dPw3m","react-grid-item":"ModuleStep_react-grid-item__tFcr7","react-grid-placeholder":"ModuleStep_react-grid-placeholder__canbf",resizing:"ModuleStep_resizing__xUUDG",static:"ModuleStep_static__IPrAy",text:"ModuleStep_text__MzRSh",minMax:"ModuleStep_minMax__SkZxD",add:"ModuleStep_add__aOZYV","react-grid-dragHandleExample":"ModuleStep_react-grid-dragHandleExample__iEu5W",cssTransforms:"ModuleStep_cssTransforms__aN9IT","react-draggable-dragging":"ModuleStep_react-draggable-dragging__epzS0","react-resizable-handle":"ModuleStep_react-resizable-handle__XaFka",singleButton:"ModuleStep_singleButton__+BXaC",menuRightButtons:"ModuleStep_menuRightButtons__r-OPw",menuButtons:"ModuleStep_menuButtons__TsY6r",menuAccordionButtons:"ModuleStep_menuAccordionButtons__4QNWj",detailLabel:"ModuleStep_detailLabel__hVTU1",subLabel:"ModuleStep_subLabel__6PFJJ",modalHeaderTitle:"ModuleStep_modalHeaderTitle__hDlRr",p:"ModuleStep_p__njhI7",accordionContainer:"ModuleStep_accordionContainer__oW7nH",itemsTable:"ModuleStep_itemsTable__ttZKV",sharesTable:"ModuleStep_sharesTable__Gy1CG",peoplePositionsSelect:"ModuleStep_peoplePositionsSelect__jXRrK",peoplePositionsSelectInput:"ModuleStep_peoplePositionsSelectInput__NSg8e",peoplePositionsSelectMenuOverlay:"ModuleStep_peoplePositionsSelectMenuOverlay__S0xqm",peoplePositionsSelectMenuOverlayItem:"ModuleStep_peoplePositionsSelectMenuOverlayItem__Vuo-D",deleteText:"ModuleStep_deleteText__XIVyR",deleteButton:"ModuleStep_deleteButton__PhwaV",searchContainer:"ModuleStep_searchContainer__s1Y37",searchInput:"ModuleStep_searchInput__XukKm",emailInput:"ModuleStep_emailInput__sTwU9",actionsContainer:"ModuleStep_actionsContainer__jWMeW",detailButton:"ModuleStep_detailButton__w7F3v",detailButtonTitleContainer:"ModuleStep_detailButtonTitleContainer__8ffTu",fetchingLatestP:"ModuleStep_fetchingLatestP__gnf89",modalTitle:"ModuleStep_modalTitle__T4SaB",modalSubTitle:"ModuleStep_modalSubTitle__SIFKS",dropdownSelectComponent:"ModuleStep_dropdownSelectComponent__L66Sz",dropdownSelectComponentL:"ModuleStep_dropdownSelectComponentL__wOEsz",dropdownSelectOperation:"ModuleStep_dropdownSelectOperation__DEwuW",dropdownSelectReport:"ModuleStep_dropdownSelectReport__g2+2D",cardTitle:"ModuleStep_cardTitle__h24lD",customButton:"ModuleStep_customButton__sVkp5",fieldTypeInput:"ModuleStep_fieldTypeInput__q1+bw",fieldRowContainer:"ModuleStep_fieldRowContainer__5hIbd",templateInformation:"ModuleStep_templateInformation__UjdWL"},s=l(41771),c=l(47491),v=l(39518),p=l(20086),m=l(6073),f=l(93389),_=l(66284),y=l(34710),h=l(88827),g=l(88374),b=l(11577),Z=l(10103),C=l(88550),E=l(49119);var S=function(e){var n;return u.createElement("svg",{className:e.className,width:null!==(n=null===e||void 0===e?void 0:e.width)&&void 0!==n?n:"14",height:"8",viewBox:"0 0 14 8",fill:"none",xmlns:"http://www.w3.org/2000/svg"},u.createElement("path",{d:"M1 1L7 7L13 1",stroke:"#333333",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}))},M="StaticAccordionModule_section__E+rSn",x="StaticAccordionModule_accordionContainer__6xeqD",w="StaticAccordionModule_active__39RQh",k="StaticAccordionModule_title__1Jas1",I="StaticAccordionModule_icon__Uc3dg",N="StaticAccordionModule_loaderContainer__XDmsY",P="StaticAccordionModule_iconsContainer__YbQ+l",T="StaticAccordionModule_rotate__kR7q7",A="StaticAccordionModule_content__-a1q1",L="StaticAccordionModule_fieldTypeInput__78Qbk",D="StaticAccordionModule_fieldTypeTextarea__RF3xI",O="StaticAccordionModule_emulatedFlexGap__F5FQC",B="StaticAccordionModule_cardTitle__lJnSQ",U=l(5786),q=l(20777),R=l(73500),F=l(47144),z=l.n(F),Y=l(27436),G=(l(68140),l(12308)),H=l(38893),j=l(97606),W=l(8284),V=l(50981),Q=l.n(V),X=(0,u.memo)((function(e){var n,l,t=e.component,d=e.components,a=(e.companyUsersArray,e.allComponents),r=(null===t||void 0===t||null===(n=t.selected_fields)||void 0===n?void 0:n.length)>0&&(null===t||void 0===t||null===(l=t.selected_fields)||void 0===l?void 0:l.filter((function(e){return!0!==e.value||void 0!==(null===e||void 0===e?void 0:e.value)})).map((function(e,n){var l,r,s,c;if((null===e||void 0===e||null===(l=e.options)||void 0===l||null===(r=l.list)||void 0===r?void 0:r.length)>0&&(null===e||void 0===e||null===(s=e.options)||void 0===s||null===(c=s.component_id)||void 0===c?void 0:c.length)>0&&("Step List"===(null===e||void 0===e?void 0:e.data_type_name)||"Component List"===(null===e||void 0===e?void 0:e.data_type_name)))return u.createElement("div",{key:n,style:{width:"100%"}},u.createElement(G.default,{columns:e.options.list,list:(h=e.options,d.filter((function(e){return e.id===h.component_id})).map((function(e){var n={};return h.list.map((function(l){n=(0,i.Z)((0,i.Z)({},n),{},(0,o.Z)({},l,e.selected_fields.find((function(e){return e.field_name===l})).value))})),n})))}));if("output"===e.data_type&&"Formula"!==e.data_type_name&&"Component"!==e.data_type_name&&"Filters"!==e.data_type_name)return null;if("Info"===e.data_type_name)return null;if("URL"===e.data_type_name)return null;if("Lookup"===e.data_type_name)return null;if("ID"===e.data_type_name){var v,m,f=null!==(v=null===H||void 0===H?void 0:j.Z(null===H||void 0===H?void 0:W.Z("field_name",e.field_name))(t.values))&&void 0!==v?v:null;return u.createElement(U.Z,{key:n,width:R.tq?"100%":"50%",fieldLabel:e.field_name,style:{border:"0"},fieldIcon:e.icon,isProcess:!0,visible:void 0!==(null===e||void 0===e?void 0:e.value)||e.visible,mandatory:!1,error:e.errors,customIconBgColor:"white"},u.createElement("input",{disabled:!0,type:e.data_type,onChange:function(){},autoComplete:"none",value:null===f||null===f.value?"":null===f||void 0===f||null===(m=f.value)||void 0===m?void 0:m.split(",")[0],className:L,name:e.field_name}))}var _,y,h,g=null!==(_=null===H||void 0===H?void 0:j.Z(null===H||void 0===H?void 0:W.Z("field_name",null===e||void 0===e?void 0:e.field_name))(t.values))&&void 0!==_?_:{},b=null===g||void 0===g?void 0:g.value,Z=null===t||void 0===t||null===(y=t.selected_fields)||void 0===y?void 0:y.find((function(e){return"Info"===e.data_type_name}));if(Z){var C,E,S=a.find((function(e){return e.component_fields.filter((function(e){return e.component_blueprint_id===Z.options.component_id&&e.value===b})).length>0}));if(S)return null===Z||void 0===Z||null===(C=Z.options)||void 0===C||null===(E=C.list)||void 0===E?void 0:E.map((function(n,l){var t,o,i=null!==(t=null===(o=S.component_fields.find((function(e){return e.field_name===n})))||void 0===o?void 0:o.value)&&void 0!==t?t:"";return u.createElement(U.Z,{width:R.tq?"100%":"50%",key:l,style:{border:"0"},fieldLabel:n,fieldIcon:e.icon,isProcess:!0,visible:void 0!==(null===e||void 0===e?void 0:e.value)||e.visible,mandatory:!1,error:e.errors},i.length>55?u.createElement("textarea",{className:D,type:e.data_type,value:i,onFocus:function(){},autoComplete:"none",onChange:function(e){},disabled:!0,style:{backgroundColor:"rgba(234, 231, 231, 0.91)",height:"auto"}}):u.createElement("input",{disabled:!0,autoComplete:"none",value:i,className:L,name:e.field_name}))}))}return"Link"===e.data_type_name?u.createElement(U.Z,{width:R.tq?"100%":"50%",style:{border:"0"},key:n,fieldLabel:e.field_name,fieldIcon:e.icon,isProcess:!0,visible:void 0!==(null===e||void 0===e?void 0:e.value)||e.visible,mandatory:!1,error:e.errors,customIconBgColor:"white"},null!==b&&void 0!==b&&b.includes("jpg")||null!==b&&void 0!==b&&b.includes("jpeg")||null!==b&&void 0!==b&&b.includes("png")?u.createElement("div",{className:x,onClick:function(){return window.open(b,"_blank")}},u.createElement("img",{alt:"lg",src:b,style:{width:"100%",height:"100%",cursor:"pointer"}})):null!==b&&void 0!==b&&b.includes("pdf")?u.createElement("div",{className:x,onClick:function(){return window.open(b,"_blank")}},u.createElement("embed",{onClick:function(){return window.open(b,"_blank")},src:"".concat(b,"#toolbar=0&navpanes=0&scrollbar=0"),width:"400px",height:"500px"})):u.createElement("div",{style:{width:"inherit"},onClick:function(){return window.open(b,"_blank")}},u.createElement("textarea",{disabled:!0,onChange:function(){},autoComplete:"none",value:null===b?"":b,className:L,style:{height:"auto",width:"inherit",cursor:"pointer"},name:e.field_name}))):"Checkbox"===e.data_type_name?u.createElement(U.Z,{width:R.tq?"100%":"50%",key:n,style:{border:"0"},fieldLabel:e.options.value,fieldIcon:e.icon,isProcess:!0,visible:void 0!==(null===e||void 0===e?void 0:e.value)||e.visible,mandatory:!1,error:e.errors,customIconBgColor:"white"},u.createElement("input",{disabled:!0,onChange:function(){},autoComplete:"none",value:void 0===b?"":1==b?"Yes":"No",className:L,name:e.field_name})):"Upload"===e.data_type_name?u.createElement(U.Z,{key:n,fieldLabel:e.field_name,fieldIcon:e.icon,isProcess:!0,visible:void 0!==b||(null===b||void 0===b?void 0:b.length)>0,mandatory:!1,error:e.errors,customIconBgColor:"white",style:{marginRight:"10px"}},u.createElement("a",{key:n,href:b,download:"Example-PDF-document",target:"_blank",rel:"noreferrer"},u.createElement(p.zx,{clear:!0,title:"Download File"}))):u.createElement(U.Z,{width:R.tq?"100%":"50%",key:n,style:{border:"0"},fieldLabel:e.field_name,fieldIcon:e.icon,isProcess:!0,visible:void 0!==b||e.visible,mandatory:!1,error:e.errors},(null===b||void 0===b?void 0:b.length)>55?u.createElement("textarea",{className:D,disabled:!0,onFocus:function(){},required:!0,value:null===b||void 0===b?"":"Date"===e.data_type_name?Q()(new Date(b)).format("DD MMM YYYY"):b,onChange:function(e){}}):u.createElement("input",{disabled:!0,onChange:function(){},autoComplete:"none",value:null===b||void 0===b?"":"Date"===e.data_type_name?"Invalid date"===Q()(new Date(b)).format("DD MMM YYYY")?"":Q()(new Date(b)).format("DD MMM YYYY"):b,className:L,name:e.field_name}))})));return u.createElement("div",{className:O,style:{width:R.tq?"100%":""}},r)})),J=function(e){var n,l,t=e.component,o=e.blueprintIndex,i=e.isMandatoryError,d=e.nextButtonClicked,r=e.companyData,c=e.components,v=e.allComponents,p=e.companyUsersArray,m=(e.createdBy,(0,C.pQ)()),f=(0,a.Z)(m,1)[0],_=(0,u.useState)(w),y=(0,a.Z)(_,2),h=y[0],g=y[1],b=(0,u.useState)("0px"),Z=(0,a.Z)(b,2)[1],E=(0,u.useState)(I),L=(0,a.Z)(E,2),D=L[0],O=L[1],U=(0,u.useState)(!1),F=(0,a.Z)(U,1)[0],G=(0,u.useState)(""),H=(0,a.Z)(G,1)[0],j=(0,u.useRef)(null),W=null===(n=f.currentStep)||void 0===n?void 0:n.component_blueprints.findIndex((function(e){return e.id===t.id}));return u.createElement("div",{id:"accordion",className:M,key:o},u.createElement("div",{className:z()(x,h),"app-variant-has-error":H?"error":""},u.createElement("div",{style:{display:"none"}},u.createElement("img",{src:s.bYv,alt:"componentsGray"}),u.createElement("p",{className:k,style:{color:i&&d?"var(--app-color-error)":""}},null===t||void 0===t?void 0:t.name),u.createElement("div",{onClick:function(){},className:P,style:{display:"none"}},F?u.createElement("div",{className:N},u.createElement(q.Z,{type:R.G6?"Watch":"Puff",color:"var(--app-color-gray-dark)",secondaryColor:"gray",radius:32,height:32,width:"32px"})):u.createElement(s.nQX,null)),u.createElement("div",{className:"".concat(D),style:{cursor:"pointer",display:null===t.options?"":!0===t.options.allowMultipleInputs?"none":""},onClick:function(){g(""===h?w:""),Z(h===w?"0px":"".concat(j.current.scrollHeight,"px")),O(h===w?I:z()(I,T))}},u.createElement(S,{width:13,fill:"#4A4A4A"}))),u.createElement("p",{className:B},t.name),u.createElement("div",{ref:j,style:{maxHeight:h===w?"":"0px",display:"flex"},className:A},u.createElement(X,{components:c,allComponents:v,component:t,handleInputChange:function(){},handlePrefixChange:function(){},handleCurrencyChange:function(){},checkIfAreMandatoryErrored:!1,handleCheckbox:function(){},isInherited:!1,indexInContextArray:W,handleLocationChange:function(){},processTaskContext:f,companyData:r,companyUsersArray:p}))),H&&(null===H||void 0===H||null===(l=H.errors)||void 0===l?void 0:l.title)&&u.createElement(Y.Z,{message:H.errors.title}),H&&(null===H||void 0===H?void 0:H.message)&&u.createElement(Y.Z,{message:H.message}))},K=function(e){var n,l,t=e.component;return u.createElement("div",{className:x},u.createElement("div",{className:O,style:{width:(R.tq,"100%")}},u.createElement(U.Z,{width:R.tq?"100%":"50%",fieldLabel:"Created By",style:{border:"0"},isProcess:!0,visible:!0},u.createElement("input",{disabled:!0,onChange:function(){},autoComplete:"none",value:"".concat(null===(n=t.created_by)||void 0===n?void 0:n.first_name," ").concat(null===(l=t.created_by)||void 0===l?void 0:l.last_name),className:L})),u.createElement(U.Z,{width:R.tq?"100%":"50%",fieldLabel:"Created Date",style:{border:"0"},isProcess:!0,visible:!0},u.createElement("input",{disabled:!0,onChange:function(){},autoComplete:"none",value:Q()(new Date(t.created_date)).format("DD MMM YYYY"),className:L,name:"Created Date"}))))},$="AccordionModule_selectAndMultiselectHost__H5+ac",ee="AccordionModule_selectAndMultiselectHostTiles__zy8A7",ne="AccordionModule_section__WDGnE",le="AccordionModule_accordionContainer__xiMyc",te="AccordionModule_active__a1e+z",oe="AccordionModule_title__K6M+I",ie="AccordionModule_icon__7T+T6",de="AccordionModule_loaderContainer__fKA1C",ae="AccordionModule_iconsContainer__gYCG-",ue="AccordionModule_rotate__ojdmf",re="AccordionModule_content__N8Nff",se="AccordionModule_fieldTypeInput__Mql2D",ce="AccordionModule_labelInput__djkp5",ve="AccordionModule_fieldRowContainer__eD864",pe="AccordionModule_emulatedFlexGap__UKu5e",me="AccordionModule_singleInputContainer__7L-68",fe="AccordionModule_inputContainerClassName__ZLNQe",_e="AccordionModule_phoneIInput__bFeGI",ye="AccordionModule_currencySymbol__jg7Fb",he="AccordionModule_currencySelectComponent__vxRYx",ge="AccordionModule_currencySelectMenuOverlayList__suVOI",be="AccordionModule_currencySelectMenuOverlayListItem__F4q4l",Ze="AccordionModule_currencySearchInput__EStZB",Ce="AccordionModule_currencyClearControlsClassName__9qj4b",Ee="AccordionModule_currencyInputContainerClassName__gSheY",Se="AccordionModule_currencyInput__pD6+T",Me="AccordionModule_peoplePositionsSelect__8SVZX",xe="AccordionModule_peoplePositionsSelectInput__Zf0FV",we="AccordionModule_peoplePositionsSelectMenuOverlay__G6S96",ke="AccordionModule_peoplePositionsSelectMenuOverlayItem__l7tLe",Ie="AccordionModule_menuOverlayList__53cF+",Ne="AccordionModule_menuOverlayListItem__52ph5",Pe="AccordionModule_menuOverlayListItemInput__D1qcy",Te="AccordionModule_menuOverlayListItemInputContainerClassName__jn-Os",Ae="AccordionModule_openSelectWithSearchHost__S8Y7m",Le="AccordionModule_openSelectWithSearch__xb15e",De="AccordionModule_dropdownClassContainer__opaaF",Oe="AccordionModule_dropdownHeightClassContainer__alywJ",Be="AccordionModule_fieldTypeTextarea__wJxdM",Ue="AccordionModule_filtersContainer__kaLD+",qe="AccordionModule_dropdownSelectComponent__IfPlb",Re="AccordionModule_itemsTable__kWpNG",Fe="SelectAndMultiselect_selectAndMultiselectHost__JL5Qu",ze="SelectAndMultiselect_tiles__GNuMU",Ye="SelectAndMultiselect_fieldLabel__LpRMc",Ge="SelectAndMultiselect_multiselectComponent__0I85T",He="SelectAndMultiselect_multiselectMenuOverlayList__4knAb",je="SelectAndMultiselect_multiselectMenuOverlayListItem__fBe0B",We="SelectAndMultiselect_dropdownSelectMenuOverlayList__MRf2l",Ve="SelectAndMultiselect_dropdownSelectComponent__0UNAl",Qe="SelectAndMultiselect_dropdownInput__BPcW7",Xe="SelectAndMultiselect_menuButtonPlaceholder__V0wnB",Je="SelectAndMultiselect_dropdownSelectMenuOverlayListItem__NM5xS",Ke=l(64967),$e=l(77016),en=l(38893),nn=function(e){var n=e.selectionType,l=void 0===n?"Dropdown":n,t=e.items,o=e.fieldIcon,i=e.placeholder,d=e.fieldLabel,a=e.onChange,r=e.visible,s=void 0===r||r,c=e.mandatory,v=void 0!==c&&c,m=e.error,f=e.loading,_=e.onFocus,y=e.onClicked,h=void 0===y?function(){}:y,g=e.value,b=e.className;return u.createElement("div",{onFocus:_,className:Fe,style:{display:s?"":"none"}},d?u.createElement("label",{className:Ye},d," ",v&&u.createElement("span",null,"*")):u.createElement(u.Fragment,null),u.createElement("div",{className:ze},"Tiles"===l&&t.map((function(e,n){return u.createElement($e.Z,{cardTitle:e.label,key:n,onClick:function(){a("".concat(e.value))}})}))),"multiple"===l&&u.createElement(p.NU,{loading:f,items:null!==t&&void 0!==t?t:[],toggleLeftIcon:o,notags:!0,error:!!m,initialSelectedValues:g&&en.split(",",g),itemType:"checkboxes",tmiClassName:Qe,className:b||Ge,molclassname:He,moliclassname:je,menuButtonPlaceholder:Xe,placeholder:i,checkboxEmplacement:"right",onChange:function(e){a(e.map((function(e){return e.label})).toString())}}),("single"===l||"Dropdown"===l)&&u.createElement(Ke.M,{className:b||Ve,tmiClassName:Qe,molclassname:We,moliclassname:Je,menuButtonPlaceholder:Xe,selectType:"checkbox",loading:f,title:"",error:!!m,placeholder:i,onOpen:function(e){return h(e)},onChange:function(e){a("".concat(e.value))},items:null!==t&&void 0!==t?t:[],defaultSelected:g&&t.find((function(e){return e.label===g}))}),m&&u.createElement(Y.Z,{message:m}))},ln=l(75105),tn=l(66180),on=l.n(tn),dn=l(89293),an=l(81235),un={App:"MapPin_App__ttDFM",circle:"MapPin_circle__XymBg",circleText:"MapPin_circleText__wjHtA"},rn=l(67861),sn=l(38893),cn=function(e){var n=e.onLocationChange,l=e.value,t=(0,u.useRef)(150.9171779),o=(0,u.useRef)(-33.8149597),i=l?sn.split(",",l):[14.652116,121.012255],d=(0,u.useState)({id:1,title:"Current Location",lat:+i[0],lng:+i[1]}),r=(0,a.Z)(d,2),s=r[0],c=r[1],v=function(e){var n=e.text,l=e.tooltip;return rn.createElement("div",{className:un.circle},rn.createElement("span",{className:un.circleText,title:l},n))};return rn.createElement("div",{style:{height:"600px",width:"100%"}},"Pin location",rn.createElement("div",null,"(click mouse to change location or enter location values in textbox below)"),rn.createElement("div",{style:{height:"80%",width:"100%"}},rn.createElement(an.ZP,{onClick:function(e){c({id:1,title:"My pin",lat:e.lat,lng:e.lng}),n({lat:e.lat,lng:e.lng})},bootstrapURLKeys:{key:"AIzaSyDEZgyux-heiGo2ur369715z1-CtG1S4PI",language:"en",region:"US"},center:{lat:+s.lat,lng:+s.lng},defaultZoom:15,distanceToMouse:function(e,n){if(e&&n)return Math.sqrt((e.x-n.x)*(e.x-n.x)+(e.y-n.y)*(e.y-n.y))}},void 0!=l&&rn.createElement(v,{key:s.id,lat:s.lat,lng:s.lng,tooltip:s.title}))),rn.createElement("br",null),rn.createElement("span",null,"Longitude:",rn.createElement("input",{type:"number",ref:o,name:"input-longitude",className:un.inputField,value:s.lng,onChange:function(e){o.current.value=e.target.value,c({id:1,title:"My pin",lat:t.current.value,lng:o.current.value})}}),"Latitude:",rn.createElement("input",{type:"number",ref:t,name:"input-latitude",className:un.inputField,value:s.lat,onChange:function(e){t.current.value=e.target.value,c({id:1,title:"My pin",lat:t.current.value,lng:o.current.value})}})))},vn=l(13845),pn=l(67861),mn=l(38893),fn={selectProcess:{id:"selectedProcess",title:"Select Process",tooltipText:"Select target process for this map",defaultHighlighted:!0,withAckButton:!1,useContext:vn.fG},selectBlueprint:{id:"selectedComponentBlueprint",title:"Select source of map pins",tooltipText:"Select target source pins for this map",defaultHighlighted:!0,withAckButton:!1,useContext:vn.fG},selectComponent:{id:"selectedComponent",title:"Select Component",tooltipText:"Select target component for this map",defaultHighlighted:!0,withAckButton:!1,useContext:vn.fG},selectFields:{id:"selectedFields",title:"Filter by",tooltipText:"Select target filter for this map",defaultHighlighted:!0,withAckButton:!1,useContext:vn.fG},selectItem:{id:"selectedItem",title:"Select Item",tooltipText:"Select target item for this map",defaultHighlighted:!0,withAckButton:!1,useContext:vn.fG},selectRoutingMethod:{id:"selectedRouting",title:"Select Routing",tooltipText:"Select target routing method for this map",defaultHighlighted:!0,withAckButton:!1,useContext:vn.fG}},_n=(0,v.$j)((function(e){return{companyProcesses:e.flowReducer.companyProcesses}}))((function(e){var n=e.companyProcesses,l=(0,u.useState)({name:"",icon:"",fields:"",components:""}),o=(0,a.Z)(l,2),r=o[0],s=o[1],c=(0,u.useState)([]),v=(0,a.Z)(c,2),f=v[0],_=(v[1],(0,u.useState)([])),y=(0,a.Z)(_,2),h=y[0],g=y[1],Z=(0,u.useState)([]),C=(0,a.Z)(Z,2),E=C[0],S=C[1],M=(0,u.useState)([]),x=(0,a.Z)(M,2),w=x[0],k=x[1],I=(0,u.useState)([]),N=(0,a.Z)(I,2),P=N[0],T=N[1],A=(0,u.useState)([]),L=(0,a.Z)(A,2),D=L[0],O=L[1],B=(0,u.useState)({value:"",blueprint:{}}),U=(0,a.Z)(B,2),q=U[0],R=U[1],F=(0,u.useState)({value:"",process:{}}),z=(0,a.Z)(F,2),Y=z[0],G=z[1],H=(0,u.useState)({value:"",field:{}}),j=(0,a.Z)(H,2),W=j[0],V=j[1],Q=(0,u.useState)({value:"",item:{}}),X=(0,a.Z)(Q,2),J=X[0],K=X[1],$=(0,u.useState)([]),ee=(0,a.Z)($,2),ne=ee[0],le=ee[1],te=(null===n||void 0===n?void 0:n.length)>0?n.map((function(e){return{label:e.name,value:e.id}})):[],oe=function(e){var n=e.text,l=e.tooltip;return pn.createElement("div",{className:un.circle},pn.createElement("span",{className:un.circleText,title:l},n))};(0,u.useEffect)((function(){de()}),[]);var ie=(0,u.useCallback)((function(e,n){var l=e.filter((function(e){return e.component.component_fields.filter((function(e){return e.value===n.value})).length>0})),t=[];return l.map((function(e){var n=e.component.component_fields.find((function(e){return"Pin"===e.field_name}));if(void 0!=n&&n.value){var l=mn.split(",",n.value);t.push({id:e.id,title:e.label,lat:+l[0],lng:+l[1]})}})),{components:l,pins:t}})),de=(0,u.useCallback)((function(){(0,m.d7)().pipe((0,b.P)()).pipe((0,b.P)()).subscribe({next:function(e){var n=e.data.length>0?mn.sortBy(mn.prop("name"),e.data.filter((function(e){return e.fields.filter((function(e){return"Pin"===e.name})).length>0}))):[];g(n.map((function(e){return{label:e.name,value:e.id,blueprint:e}})))},error:function(e){}})}));return pn.createElement("div",{style:{height:"1200px",width:"100%"}},"Routes",pn.createElement(vn.ij,null,pn.createElement("div",{style:{height:"30%",width:"100%"}},pn.createElement(an.ZP,{bootstrapURLKeys:{key:"AIzaSyDEZgyux-heiGo2ur369715z1-CtG1S4PI",language:"en",region:"US"},center:{lat:-33.8149597,lng:150.9171779},defaultZoom:11,distanceToMouse:function(e,n){if(e&&n)return Math.sqrt((e.x-n.x)*(e.x-n.x)+(e.y-n.y)*(e.y-n.y))}},ne.map((function(e){var n=e.lat,l=e.lng,t=e.id,o=e.title;return pn.createElement(oe,{key:t,lat:n,lng:l,tooltip:o})})))),pn.createElement("br",null),pn.createElement("div",{style:{maxWidth:"50%"}},pn.createElement(p.n2,(0,t.Z)({},fn.selectBlueprint,{value:q.value,placeholder:"Select blueprint...",sectionError:r.icon,onOpenChanged:function(){}}),pn.createElement(p.rk,{items:h,iconValue:!0,defaultSelected:"",className:un.selectComponent,molclassname:un.selectMenuOverlayList,moliclassname:un.selectMenuOverlayListItem,placeholder:"Select blueprint...",onChange:function(e){var n=e.blueprint.fields.filter((function(e){return"Pin"!=e.name}));R({value:e.label,blueprint:e.blueprint}),k((0,d.Z)(n.map((function(e){return{label:e.value,value:e.id,field:e}})))),le([]),V({value:"",field:{}}),K({value:"",item:{}}),G({value:"",process:{}});var l=[];f.map((function(e){var n=e.component.component_fields.find((function(e){return"Pin"===e.field_name}));if(void 0!=n&&n.value){var t=mn.split(",",n.value);l.push({id:e.id,title:e.label,lat:+t[0],lng:+t[1]})}})),le([].concat(l)),console.log("found",l,"componentsArray",f)}})),pn.createElement(p.n2,(0,t.Z)({},fn.selectFields,{value:W.value,placeholder:"Select field...",sectionError:r.icon,onOpenChanged:function(){}}),pn.createElement(p.rk,{items:w,iconValue:!0,defaultSelected:"",className:un.selectComponent,molclassname:un.selectMenuOverlayList,moliclassname:un.selectMenuOverlayListItem,placeholder:"Select field...",onChange:function(e){V({value:e.label,field:e.field});var n=f.filter((function(n){return n.component.component_fields.filter((function(n){return n.component_blueprint_id===e.field.component_blueprint_id})).length>0})),l=[];n.map((function(n){var t=n.component.component_fields.find((function(n){return n.field_name===e.label}));void 0!=t&&("People"===t.data_type_name||"Component"===t.data_type_name?l.push({label:t.value.split(",")[0],value:t.value,id:t.id,component:n.component}):l.push({label:t.value,value:t.value,id:t.id,component:n.component}))})),T((0,d.Z)(new Map(l.map((function(e){return[e.label,e]}))).values())),S(n),le([]),K({value:"",item:{}}),G({value:"",process:{}})}})),pn.createElement(p.n2,(0,t.Z)({},fn.selectItem,{value:J.value,placeholder:"Select item...",sectionError:r.icon,onOpenChanged:function(){}}),pn.createElement(p.rk,{items:P,iconValue:!0,defaultSelected:"",className:un.selectComponent,molclassname:un.selectMenuOverlayList,moliclassname:un.selectMenuOverlayListItem,placeholder:"Select item...",onChange:function(e){var n=ie(E,e);K({value:e.label,id:e.id,item:e}),O(te.filter((function(e){return(0,d.Z)(n.components.map((function(e){return e.component.procedure_id}))).some((function(n){return e.value===n}))}))),le((0,d.Z)(n.pins)),G({value:"",process:{}})}})),pn.createElement(p.n2,(0,t.Z)({},fn.selectProcess,{value:Y.value,placeholder:"Select process...",sectionError:r.icon,onOpenChanged:function(){s((function(e){return(0,i.Z)((0,i.Z)({},e),{},{icon:""})}))}}),pn.createElement(p.rk,{items:D,iconValue:!0,defaultSelected:"",className:un.selectComponent,molclassname:un.selectMenuOverlayList,moliclassname:un.selectMenuOverlayListItem,placeholder:"Select process...",onChange:function(e){var n=ie(E.filter((function(n){return n.component.procedure_id===e.value})),{value:J.item.value});G({id:e.value,value:e.label}),le((0,d.Z)(n.pins))}})),pn.createElement(p.n2,(0,t.Z)({},fn.selectRoutingMethod,{placeholder:"Select routing method...",sectionError:r.icon,onOpenChanged:function(){}}),pn.createElement(p.rk,{items:[{label:"By Manual Routing",value:"Method 1"},{label:"Automated - by distance",value:"Method 2"},{label:"By sales visit time",value:"Method 3"}],iconValue:!0,defaultSelected:"",className:un.selectComponent,molclassname:un.selectMenuOverlayList,moliclassname:un.selectMenuOverlayListItem,placeholder:"Select routing method...",onChange:function(){}})))))})),yn=l(4358),hn=l(32086),gn=l(68218),bn=l(84634),Zn=l(74369),Cn=l(91426),En=l(10074),Sn=l(48630);function Mn(e){return null!==e&&void 0!==e&&e.country_prefix?null===e||void 0===e?void 0:e.country_prefix:null!==e&&void 0!==e&&e.currency_value?(null===e||void 0===e?void 0:e.currency_value)+" ":""}var xn=function(e,n,l,t,o){var i,a,u,r=null===(u=(0,d.Z)(null!==(i=null===(a=o.currentStep)||void 0===a?void 0:a.component_blueprints)&&void 0!==i?i:[])[l])||void 0===u?void 0:u.selected_fields[t];switch(e){case"Link":!function(e){var n;try{n=new URL(e)}catch(l){return!1}return"http:"===n.protocol||"https:"===n.protocol}(n)?r.errors="This field should contain a link!":r.errors="";break;case"E-mail":case"Email":new RegExp(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/).test(n)?r.errors="":r.errors="This field should contain an valid email address!";break;case"Phone":new RegExp(/^[+]?[(]?[0-9]{3}[)]?[-\s.]?[0-9]{3}[-\s.]?[0-9]{4,6}$/im).test(n)?r.errors="":r.errors="This field should contain an valid phone number!";break;case"Email Recipient":new RegExp(/^([a-z0-9!#$%&'*+/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*)(([, ]+[a-z0-9!#$%&'*+/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])\.([a-z0-9]([a-z0-9-]*[a-z0-9]))*)?)*$/).test(n)?r.errors="":r.errors="This field should contain an valid email address!"}},wn=(0,u.memo)((function(e){var n,l,t=e.component,r=e.handleInputChange,s=e.indexInContextArray,c=e.handleCheckbox,v=e.processTaskContext,m=e.setTaskProcessContext,f=e.isInherited,_=e.checkIfAreMandatoryErrored,y=e.handlePrefixChange,h=e.handleCurrencyChange,g=e.handleLocationChange,Z=e.companyData,E=e.components,S=e.products,M=e.begunModule,x=e.blueprints,w=e.companyUsersArray,k=e.companyPositionsArray,I=(0,u.useState)(w.map((function(e){return{label:e.first_name+" "+e.last_name,value:e.id,user:e}}))),N=(0,a.Z)(I,2),P=N[0],T=N[1],A=(0,u.useState)(!1),L=(0,a.Z)(A,2),D=L[0],O=L[1],B=(0,u.useState)(new Date),q=(0,a.Z)(B,2),F=q[0],z=q[1],Y=(0,u.useState)([new Date,new Date(Q()().add(7,"days"))]),H=(0,a.Z)(Y,2),j=H[0],W=H[1],X=(0,a.Z)(j,2),J=X[0],K=X[1],ne=(0,u.useState)(""),le=(0,a.Z)(ne,2),te=le[0],oe=le[1],ie=(0,u.useState)([]),de=(0,a.Z)(ie,2),ae=de[0],ue=de[1],re=(0,u.useState)(!0),ve=(0,a.Z)(re,2),Fe=ve[0],ze=ve[1],Ye=(0,u.useState)(!0),Ge=(0,a.Z)(Ye,2),He=Ge[0],je=Ge[1],We=(0,u.useState)("80px"),Ve=(0,a.Z)(We,2),Qe=Ve[0],Xe=Ve[1],Je=(0,u.useState)("80px"),Ke=(0,a.Z)(Je,2),$e=Ke[0],en=Ke[1],tn=(0,u.useState)("80px"),an=(0,a.Z)(tn,2),un=an[0],rn=an[1],sn=(0,u.useState)("80px"),vn=(0,a.Z)(sn,2),pn=vn[0],mn=vn[1],fn=(0,u.useCallback)((function(e){void 0!==e&&(0==P.length?O(!0):O(!1),(0,ln.n0)(e).pipe((0,b.P)()).subscribe({next:function(e){T(e),O(!1)}}))}),[]),hn=function(e){var n;return null===v||void 0===v||null===(n=v.items)||void 0===n?void 0:n.map((function(n){var l={};return Object.keys(e.map).map((function(t){var d;l=(0,i.Z)((0,i.Z)({},l),{},(d={},(0,o.Z)(d,e.map[t],n[t]),(0,o.Z)(d,"item",n),d))})),l}))},wn=function(e){var n=e.field_name;return t.selected_fields.findIndex((function(e){return e.field_name===n}))},In=function(e){var n=t.selected_fields.filter((function(e){return"Info"===e.data_type_name})),l=E.find((function(n){return n.id===e}));n.map((function(n){var o;null===n||void 0===n||null===(o=n.options)||void 0===o||o.list.map((function(o){var i,d,a=null===(i=l.component_fields)||void 0===i?void 0:i.find((function(e){return e.field_name===o})),u=wn({field_name:o});-1!=u&&(null===(d=l.component_fields)||void 0===d?void 0:d.length)>0&&(t.selected_fields[u].value=a?a.value:"",n.value=e)}))})),t.selected_fields.filter((function(e){return"Global"===e.data_type_name&&1==e.visible})).map((function(e){var n,o,i=null===(n=l.component_fields)||void 0===n?void 0:n.find((function(n){return n.field_name===e.field_name})),d=wn({field_name:e.field_name});-1!=d&&(null===(o=l.component_fields)||void 0===o?void 0:o.length)>0&&(t.selected_fields[d].value=i.value)}))},Nn=function(e){var n,l,o=null===(n=v.components.find((function(n){return n.selected_fields.filter((function(n){var l,o;return"Global"===n.data_type_name&&1==n.visible&&n.field_name===(null===(l=t.selected_fields.find((function(n){return n.data_type_name===e&&1==n.visible})))||void 0===l||null===(o=l.options)||void 0===o?void 0:o.global)})).length>0})))||void 0===n||null===(l=n.selected_fields.find((function(e){return"Global"===e.data_type_name})))||void 0===l?void 0:l.value;return o?E.filter((function(n){return n.component_fields.filter((function(n){var l,i;return n.value===o&&n.field_name===(null===(l=t.selected_fields.find((function(n){return n.data_type_name===e})))||void 0===l||null===(i=l.options)||void 0===i?void 0:i.global)})).length>0})):E},Pn=(null===t||void 0===t||null===(n=t.selected_fields)||void 0===n?void 0:n.length)>0&&(null===t||void 0===t||null===(l=t.selected_fields)||void 0===l?void 0:l.sort((function(e,n){return e.index-n.index})).map((function(e,n){var l,a,b,w,I,N,T,A,L,B,q,Y,H,j,X,ne,le,ie,de,re,ve,pe,Ye,Ge,We,Ve,Je,Ke,ln,tn,an,sn,vn,Pn,Tn,An,Ln,Dn,On,Bn,Un,qn,Rn,Fn,zn,Yn,Gn,Hn,jn,Wn,Vn,Qn,Xn,Jn="";if((null===e||void 0===e||null===(l=e.options)||void 0===l||null===(a=l.fieldToMatch)||void 0===a?void 0:a.length)>0){var Kn,$n,el,nl,ll,tl,ol,il,dl,al,ul,rl,sl,cl,vl,pl,ml,fl,_l,yl,hl,gl,bl,Zl,Cl=t.selected_fields.find((function(n){var l;return n.field_name===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.fieldToMatch)}));if(Cl&&(null===e||void 0===e||null===(Kn=e.options)||void 0===Kn||null===($n=Kn.valueToMatch)||void 0===$n?void 0:$n.length)>0&&(null===e||void 0===e||null===(el=e.options)||void 0===el||null===(nl=el.actionToPerform)||void 0===nl?void 0:nl.length)>0&&(null===e||void 0===e||null===(ll=e.options)||void 0===ll||null===(tl=ll.initialState)||void 0===tl?void 0:tl.length)>0)if(null!==e&&void 0!==e&&null!==(dl=e.options)&&void 0!==dl&&null!==(al=dl.valueToMatch)&&void 0!==al&&al.split(",").includes(null===Cl||void 0===Cl?void 0:Cl.value))"hide"===(null===e||void 0===e||null===(ul=e.options)||void 0===ul?void 0:ul.actionToPerform)?e.visible=!1:"visible"===(null===e||void 0===e||null===(rl=e.options)||void 0===rl?void 0:rl.actionToPerform)?e.visible=!0:"mandatory"===(null===e||void 0===e||null===(sl=e.options)||void 0===sl?void 0:sl.actionToPerform)?(e.mandatory=!0,e.visible=!0):"optional"===(null===e||void 0===e||null===(cl=e.options)||void 0===cl?void 0:cl.actionToPerform)?(e.mandatory=!1,e.visible=!0):"visman"===(null===e||void 0===e||null===(vl=e.options)||void 0===vl?void 0:vl.actionToPerform)?(e.mandatory=!0,e.visible=!0):"disable"===(null===e||void 0===e||null===(pl=e.options)||void 0===pl?void 0:pl.actionToPerform)&&(Jn="none");else"hidden"===(null===e||void 0===e||null===(ml=e.options)||void 0===ml?void 0:ml.initialState)?e.visible=!1:"visible"===(null===e||void 0===e||null===(fl=e.options)||void 0===fl?void 0:fl.initialState)?e.visible=!0:"mandatory"===(null===e||void 0===e||null===(_l=e.options)||void 0===_l?void 0:_l.initialState)?(e.mandatory=!0,e.visible=!0):"optional"===(null===e||void 0===e||null===(yl=e.options)||void 0===yl?void 0:yl.initialState)?(e.mandatory=!1,e.visible=!0):"visman"===(null===e||void 0===e||null===(hl=e.options)||void 0===hl?void 0:hl.actionToPerform)?(e.mandatory=!0,e.visible=!0):"disable"===(null===e||void 0===e||null===(gl=e.options)||void 0===gl?void 0:gl.actionToPerform)&&(Jn="none");if(Cl&&(null===e||void 0===e||null===(ol=e.options)||void 0===ol||null===(il=ol.valueToMatch2)||void 0===il?void 0:il.length)>0)if(null!==e&&void 0!==e&&null!==(bl=e.options)&&void 0!==bl&&null!==(Zl=bl.valueToMatch2)&&void 0!==Zl&&Zl.split(",").includes(null===Cl||void 0===Cl?void 0:Cl.value)){var El,Sl,Ml,xl,wl,kl,Il,Nl,Pl,Tl,Al,Ll;if((null===e||void 0===e||null===(El=e.options)||void 0===El||null===(Sl=El.value)||void 0===Sl?void 0:Sl.length)>0)if("Text"===(null===e||void 0===e?void 0:e.data_type_name))e.value=null===e||void 0===e||null===(wl=e.options)||void 0===wl?void 0:wl.value;else if("Date"===(null===e||void 0===e?void 0:e.data_type_name)){var Dl,Ol,Bl,Ul,ql,Rl;if(0==(null===e||void 0===e||null===(Dl=e.value)||void 0===Dl?void 0:Dl.length)||void 0==(null===e||void 0===e?void 0:e.value))"today"===(null===e||void 0===e||null===(Ol=e.options)||void 0===Ol?void 0:Ol.value)?e.value=new Date(Q()((0,V.now)())):"tomorrow"===(null===e||void 0===e||null===(Bl=e.options)||void 0===Bl?void 0:Bl.value)?e.value=new Date(Q()((0,V.now)()).add(1,"days")):"week"===(null===e||void 0===e||null===(Ul=e.options)||void 0===Ul?void 0:Ul.value)?e.value=new Date(Q()((0,V.now)()).add(1,"weeks")):"month"===(null===e||void 0===e||null===(ql=e.options)||void 0===ql?void 0:ql.value)&&(e.value=new Date(Q()((0,V.now)()).add(1,"months"))),"none"===(null===e||void 0===e||null===(Rl=e.options)||void 0===Rl?void 0:Rl.value)&&(e.value=void 0)}if((null===e||void 0===e||null===(Ml=e.options)||void 0===Ml||null===(xl=Ml.actionToPerform2)||void 0===xl?void 0:xl.length)>0)"hide"===(null===e||void 0===e||null===(kl=e.options)||void 0===kl?void 0:kl.actionToPerform2)?e.visible=!1:"visible"===(null===e||void 0===e||null===(Il=e.options)||void 0===Il?void 0:Il.actionToPerform2)?e.visible=!0:"mandatory"===(null===e||void 0===e||null===(Nl=e.options)||void 0===Nl?void 0:Nl.actionToPerform2)?(e.mandatory=!0,e.visible=!0):"optional"===(null===e||void 0===e||null===(Pl=e.options)||void 0===Pl?void 0:Pl.actionToPerform2)?(e.mandatory=!1,e.visible=!0):"visman"===(null===e||void 0===e||null===(Tl=e.options)||void 0===Tl?void 0:Tl.actionToPerform2)?(e.mandatory=!0,e.visible=!0):"disable"===(null===e||void 0===e||null===(Al=e.options)||void 0===Al?void 0:Al.actionToPerform2)?Jn="none":"enable"===(null===e||void 0===e||null===(Ll=e.options)||void 0===Ll?void 0:Ll.actionToPerform2)&&(Jn="")}}if("Component"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(b=e.options)||void 0===b||null===(w=b.component_id)||void 0===w?void 0:w.length)>0){var Fl,zl,Yl,Gl,Hl,jl,Wl,Vl,Ql=Nn(null===e||void 0===e?void 0:e.data_type_name).filter((function(n){return n.component_fields.filter((function(n){var l;return n.component_blueprint_id===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.component_id)})).length>0})).map((function(n){var l,t,i,d,a="";return null===e||void 0===e||null===(l=e.options)||void 0===l||null===(t=l.names)||void 0===t||t.map((function(e){var l,t;return a=0==a.length?null===(l=n.component_fields.find((function(n){return n.field_name===e})))||void 0===l?void 0:l.value:"".concat(a," ").concat(null===(t=n.component_fields.find((function(n){return n.field_name===e})))||void 0===t?void 0:t.value)})),(0,o.Z)({label:a,value:n.id,component:n},null===e||void 0===e||null===(i=e.options)||void 0===i?void 0:i.output,null===(d=n.component_fields.find((function(n){var l;return n.field_name===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.output)})))||void 0===d?void 0:d.value)}));if(Ql.length>0)if(e.value){if(Vl=Ql.find((function(n){var l;return n[null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.output]===e.value}))){var Xl,Jl;In(Vl.value);var Kl=(0,d.Z)(null!==(Xl=null===(Jl=v.currentStep)||void 0===Jl?void 0:Jl.component_blueprints)&&void 0!==Xl?Xl:[]);Kl&&(v.newStepComponents=Kl)}}else if(1==Ql.length&&1==(null===e||void 0===e?void 0:e.mandatory)&&(Vl=Ql[0])){var $l,et;In(Vl.value);var nt=(0,d.Z)(null!==($l=null===(et=v.currentStep)||void 0===et?void 0:et.component_blueprints)&&void 0!==$l?$l:[]);nt&&(v.newStepComponents=nt)}return!Vl&&null!==e&&void 0!==e&&e.value?u.createElement("div",{key:n},"A component value ( ".concat(null===e||void 0===e?void 0:e.value," ) was previously selected but record is not shared with your profile or could have been deleted. Please check with your admin.")):u.createElement(U.Z,{enabled:Jn,width:R.tq||"Tiles"===(null===e||void 0===e||null===(Fl=e.options)||void 0===Fl?void 0:Fl.selection)?"100%":"50%",key:n,fieldLabel:x.find((function(n){var l;return n.id===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.component_id)})).name,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors},u.createElement("div",{style:{width:"inherit",height:"Tiles"===(null===e||void 0===e||null===(zl=e.options)||void 0===zl?void 0:zl.selection)?"auto":"80px"==$e?"37px":$e}},u.createElement(nn,{key:n,visible:null===e||void 0===e?void 0:e.visible,mandatory:null===e||void 0===e?void 0:e.mandatory,items:Ql,loading:D,error:null===e||void 0===e?void 0:e.errors,className:De,onClicked:function(e){return en(e?"".concat(80+36*Ql.length,"px"):"80px")},onChange:function(l){var t,o;Z.start=!0,en("80px"),In(l),c(null!==(t=null===Ql||void 0===Ql?void 0:Ql.find((function(e){return e.value===l}))[null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.output])&&void 0!==t?t:null,n)},selectionType:(null===e||void 0===e||null===(Yl=e.options)||void 0===Yl?void 0:Yl.selection.length)>0?null===e||void 0===e||null===(Gl=e.options)||void 0===Gl?void 0:Gl.selection:null===e||void 0===e||null===(Hl=e.options)||void 0===Hl?void 0:Hl.type,value:null!==(jl=null===(Wl=Vl)||void 0===Wl?void 0:Wl.label)&&void 0!==jl?jl:"",placeholder:"Select..."})))}if("Filters"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(I=e.options)||void 0===I||null===(N=I.component_id)||void 0===N?void 0:N.length)>0){var lt,tt,ot,it,dt,at,ut,rt,st,ct,vt,pt,mt,ft,_t,yt,ht,gt,bt,Zt,Ct,Et,St,Mt,xt,wt,kt,It,Nt,Pt,Tt,At=Nn(null===e||void 0===e?void 0:e.data_type_name).filter((function(n){return n.component_fields.filter((function(n){var l;return n.component_blueprint_id===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.component_id)})).length>0})),Lt=At.map((function(n){var l,t;return(0,o.Z)({label:n.title,value:n.id,component:n},null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.output,null===(t=n.component_fields.find((function(n){var l;return n.field_name===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.output)})))||void 0===t?void 0:t.value)}));if(At.length>0){if(e.value){if(Tt=At.find((function(n){return n.component_fields.find((function(n){var l;return n.field_name===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.output)&&n.value===e.value}))}))){var Dt,Ot,Bt;In(null===(Dt=Tt)||void 0===Dt?void 0:Dt.id);var Ut=(0,d.Z)(null!==(Ot=null===(Bt=v.currentStep)||void 0===Bt?void 0:Bt.component_blueprints)&&void 0!==Ot?Ot:[]);Ut&&(v.newStepComponents=Ut)}}else if(1==Lt.length&&1==(null===e||void 0===e?void 0:e.mandatory)&&(Tt=At[0])){var qt,Rt,Ft;In(null===(qt=Tt)||void 0===qt?void 0:qt.id);var zt=(0,d.Z)(null!==(Rt=null===(Ft=v.currentStep)||void 0===Ft?void 0:Ft.component_blueprints)&&void 0!==Rt?Rt:[]);zt&&(v.newStepComponents=zt)}if(1==Lt.length||e.value){var Yt,Gt,Ht,jt;if((null===e||void 0===e||null===(Yt=e.options)||void 0===Yt?void 0:Yt.filters.length)>1)ae[null===e||void 0===e||null===(Ht=e.options)||void 0===Ht?void 0:Ht.filters[0]]=gn.Z(bn.Z("value"))(At.map((function(n){var l=null===n||void 0===n?void 0:n.component_fields.find((function(n){var l;return n.field_name===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.filters[1])}));return{label:null===l||void 0===l?void 0:l.value,value:null===l||void 0===l?void 0:l.value,component:n}}))).filter((function(n){var l;return(null===(l=n.component)||void 0===l?void 0:l.component_fields.filter((function(n){var l,t,o;return n.value===(null===(l=Tt)||void 0===l||null===(t=l.component_fields.find((function(n){var l;return n.field_name===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.filters[1])})))||void 0===t?void 0:t.value)&&n.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[1])})).length)>0}));if((null===e||void 0===e||null===(Gt=e.options)||void 0===Gt?void 0:Gt.filters.length)>1)ae[null===e||void 0===e||null===(jt=e.options)||void 0===jt?void 0:jt.filters[1]]=gn.Z(bn.Z("value"))(At.map((function(n){var l=n.component_fields.find((function(n){var l;return n.field_name===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.filters[2])}));return{label:null===l||void 0===l?void 0:l.value,value:null===l||void 0===l?void 0:l.value,component:n}}))).filter((function(n){return n.component.component_fields.filter((function(n){var l,t,o;return n.value===(null===(l=Tt)||void 0===l||null===(t=l.component_fields.find((function(n){var l;return n.field_name===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.filters[2])})))||void 0===t?void 0:t.value)&&n.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[2])})).length>0}))}}return!Tt&&null!==e&&void 0!==e&&e.value?u.createElement("div",{key:n},"A component value ( ".concat(null===e||void 0===e?void 0:e.value," ) was previously selected but record is not shared with your profile or could have been deleted. Please check with your admin.")):u.createElement("div",{key:n,className:Ue,style:{width:R.tq?"100%":"50%",height:"80px"===$e?(null===e||void 0===e||null===(lt=e.options)||void 0===lt||null===(tt=lt.filters)||void 0===tt?void 0:tt.length)>2?"400px":"300px":$e,display:null!==e&&void 0!==e&&e.visible?"":"none",pointerEvents:Jn}},x.find((function(n){var l;return n.id===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.component_id)})).name,u.createElement("br",null),u.createElement("br",null),(null===e||void 0===e||null===(ot=e.options)||void 0===ot||null===(it=ot.filters)||void 0===it?void 0:it.length)>0&&u.createElement(nn,{visible:null===e||void 0===e?void 0:e.visible,mandatory:1==(null===e||void 0===e||null===(dt=e.options)||void 0===dt||null===(at=dt.filters)||void 0===at?void 0:at.length)&&(null===e||void 0===e?void 0:e.mandatory),items:gn.Z(bn.Z("value"))(At.map((function(n){var l=n.component_fields.find((function(n){var l;return n.field_name===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.filters[0])}));return{label:null===l||void 0===l?void 0:l.value,value:null===l||void 0===l?void 0:l.value,component:n}}))),loading:D,error:1==(null===e||void 0===e||null===(ut=e.options)||void 0===ut||null===(rt=ut.filters)||void 0===rt?void 0:rt.length)?null===e||void 0===e?void 0:e.errors:"",onChange:function(l){var t,i,d,a,u;(null===e||void 0===e||null===(t=e.options)||void 0===t||null===(i=t.filters)||void 0===i?void 0:i.length)>1?(c(void 0,n),je(!1),ze(!1),setTimeout((function(){ze(!0),je(!0)}),10),ue((0,o.Z)({},null===e||void 0===e||null===(d=e.options)||void 0===d?void 0:d.filters[0],gn.Z(bn.Z("value"))(At.map((function(n){var t=n.component_fields.find((function(n){var l;return n.field_name===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.filters[1])}));return{label:null===t||void 0===t?void 0:t.value,value:null===t||void 0===t?void 0:t.value,component:n,selected:l}})).filter((function(n){return n.component.component_fields.filter((function(n){var t;return n.value===l&&n.field_name===(null===e||void 0===e||null===(t=e.options)||void 0===t?void 0:t.filters[0])})).length>0})))))):(c(null!==(a=At.find((function(e){return e.value===l}))[null===e||void 0===e||null===(u=e.options)||void 0===u?void 0:u.output])&&void 0!==a?a:null,n),In(At.find((function(e){return e.value===l})).component.id))},fieldLabel:null===e||void 0===e||null===(st=e.options)||void 0===st?void 0:st.filters[0],placeholder:"Select...",value:Tt?null===(ct=Tt.component_fields.find((function(n){var l;return n.field_name===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.filters[0])})))||void 0===ct?void 0:ct.value:""}),u.createElement("div",{style:{display:null!==e&&void 0!==e&&e.visible?"":"none",marginBottom:"10px"}},(null===e||void 0===e||null===(vt=e.options)||void 0===vt||null===(pt=vt.filters)||void 0===pt?void 0:pt.length)>1&&Fe&&u.createElement(nn,{visible:null===e||void 0===e?void 0:e.visible,mandatory:2==(null===e||void 0===e||null===(mt=e.options)||void 0===mt||null===(ft=mt.filters)||void 0===ft?void 0:ft.length)&&(null===e||void 0===e?void 0:e.mandatory),items:null!==(_t=ae[null===e||void 0===e||null===(yt=e.options)||void 0===yt?void 0:yt.filters[0]])&&void 0!==_t?_t:[],loading:D,error:2==(null===e||void 0===e||null===(ht=e.options)||void 0===ht||null===(gt=ht.filters)||void 0===gt?void 0:gt.length)?null===e||void 0===e?void 0:e.errors:"",onClicked:function(n){var l,t,o;return en(n?"".concat(null!==(l=400+(null===(t=ae[null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[0]])||void 0===t?void 0:t.length))&&void 0!==l?l:0,"px"):"80px")},onChange:function(l){var t,d,a,u,r,s,v,p,m,f,_;(en((null===e||void 0===e||null===(t=e.options)||void 0===t||null===(d=t.filters)||void 0===d?void 0:d.length)>2?"400px":"300px"),(null===e||void 0===e||null===(a=e.options)||void 0===a||null===(u=a.filters)||void 0===u?void 0:u.length)>2)?(je(!1),setTimeout((function(){return je(!0)}),10),ue((0,i.Z)((0,i.Z)({},ae),{},(0,o.Z)({},null===e||void 0===e||null===(r=e.options)||void 0===r?void 0:r.filters[1],null!==(s=gn.Z(bn.Z("value"))(At.map((function(n){var l=n.component_fields.find((function(n){var l;return n.field_name===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.filters[2])}));return{label:null===l||void 0===l?void 0:l.value,value:null===l||void 0===l?void 0:l.value,component:n}})).filter((function(n){return n.component.component_fields.filter((function(n){var t;return n.value===l&&n.field_name===(null===e||void 0===e||null===(t=e.options)||void 0===t?void 0:t.filters[1])})).length>0})).filter((function(n){return n.component.component_fields.filter((function(n){var l,t;return n.value===ae[null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.filters[0]][0].component.component_fields.find((function(n){var l;return n.field_name===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.filters[0])})).value&&n.field_name===(null===e||void 0===e||null===(t=e.options)||void 0===t?void 0:t.filters[0])})).length>0}))))&&void 0!==s?s:[])))):(Z.start=!0,c(null!==(v=null===(p=ae[null===e||void 0===e||null===(f=e.options)||void 0===f?void 0:f.filters[0]])||void 0===p||null===(m=p.find((function(e){return e.value===l})))||void 0===m?void 0:m.component.component_fields.find((function(n){var l;return n.field_name===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.output)})).value)&&void 0!==v?v:null,n),In(ae[null===e||void 0===e||null===(_=e.options)||void 0===_?void 0:_.filters[0]].find((function(e){return e.value===l})).component.id))},fieldLabel:null===e||void 0===e||null===(bt=e.options)||void 0===bt?void 0:bt.filters[1],placeholder:"Select...",value:Tt?null===(Zt=Tt.component_fields.find((function(n){var l;return n.field_name===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.filters[1])})))||void 0===Zt?void 0:Zt.value:""})),u.createElement("div",{style:{display:null!==e&&void 0!==e&&e.visible?"":"none",marginBottom:"10px"}},(null===e||void 0===e||null===(Ct=e.options)||void 0===Ct||null===(Et=Ct.filters)||void 0===Et?void 0:Et.length)>2&&He&&u.createElement(nn,{visible:null===e||void 0===e?void 0:e.visible,mandatory:3==(null===e||void 0===e||null===(St=e.options)||void 0===St||null===(Mt=St.filters)||void 0===Mt?void 0:Mt.length)&&(null===e||void 0===e?void 0:e.mandatory),items:null!==(xt=ae[null===e||void 0===e||null===(wt=e.options)||void 0===wt?void 0:wt.filters[1]])&&void 0!==xt?xt:[],loading:D,error:3==(null===e||void 0===e||null===(kt=e.options)||void 0===kt||null===(It=kt.filters)||void 0===It?void 0:It.length)?null===e||void 0===e?void 0:e.errors:"",onClicked:function(n){var l,t,o;return en(n?"".concat(null!==(l=400+(null===(t=ae[null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[1]])||void 0===t?void 0:t.length))&&void 0!==l?l:0,"px"):"80px")},onChange:function(l){var t,o,i,d,a,u,r;Z.start=!0,c(null!==(t=null===(o=ae[null===e||void 0===e||null===(d=e.options)||void 0===d?void 0:d.filters[1]])||void 0===o||null===(i=o.find((function(e){return e.value===l})))||void 0===i?void 0:i.component.component_fields.find((function(n){var l;return n.field_name===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.output)})).value)&&void 0!==t?t:null,n),In(ae[null===e||void 0===e||null===(a=e.options)||void 0===a?void 0:a.filters[1]].find((function(e){return e.value===l})).component.id),en((null===e||void 0===e||null===(u=e.options)||void 0===u||null===(r=u.filters)||void 0===r?void 0:r.length)>2?"400px":"300px")},fieldLabel:null===e||void 0===e||null===(Nt=e.options)||void 0===Nt?void 0:Nt.filters[2],placeholder:"Select...",value:Tt?null===(Pt=Tt.component_fields.find((function(n){var l;return n.field_name===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.filters[2])})))||void 0===Pt?void 0:Pt.value:""})))}if("Global"!==(null===e||void 0===e?void 0:e.data_type_name)&&"Connector"!==(null===e||void 0===e?void 0:e.data_type_name)&&"Emails"!==(null===e||void 0===e?void 0:e.data_type_name)&&"Template"!==(null===e||void 0===e?void 0:e.data_type_name)){if("Info"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(T=e.options)||void 0===T||null===(A=T.list)||void 0===A?void 0:A.length)>0&&(null===e||void 0===e||null===(L=e.options)||void 0===L||null===(B=L.component_id)||void 0===B?void 0:B.length)>0){var Wt,Vt=E.find((function(n){return n.id===(null===e||void 0===e?void 0:e.value)}));return Vt&&u.createElement("div",{key:n,className:Ue,style:{height:"inherit",width:R.tq?"100%":"35%",display:null!==e&&void 0!==e&&e.visible?"":"none"}},null===e||void 0===e||null===(Wt=e.options)||void 0===Wt?void 0:Wt.list.map((function(n,l){var t;if(0==Vt.component_fields.length)return u.createElement("div",null);var o=Vt.component_fields.find((function(e){return e.field_name===n}));return u.createElement(U.Z,{style:{border:"0",fontSize:"14px"},key:l,fieldLabel:n,fieldIcon:e.icon,isProcess:!0,visible:!0,mandatory:e.mandatory,error:e.errors},(null===o||void 0===o||null===(t=o.value)||void 0===t?void 0:t.length)<50||void 0===o?u.createElement("input",{onBlur:function(n){return xn(e.data_type_name,n.target.value,s,l,v)},type:e.data_type,value:o?o.value:"",autoComplete:"none",className:se,name:e.field_name,disabled:!0,style:{border:"1px dashed rgba(234, 231, 231, 0.91)",fontSize:"16px",backgroundColor:"rgba(234, 231, 231, 0.91)"}}):u.createElement("textarea",{className:Be,type:e.data_type,value:o?o.value:"",onFocus:function(){},autoComplete:"none",onChange:function(e){},disabled:!0,style:{backgroundColor:"rgba(234, 231, 231, 0.91)",height:"auto",fontSize:"16px"}}))})))}if("Lookup"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(q=e.options)||void 0===q||null===(Y=q.list)||void 0===Y?void 0:Y.length)>0&&(null===e||void 0===e||null===(H=e.options)||void 0===H||null===(j=H.source_id)||void 0===j?void 0:j.length)>0&&null!==e&&void 0!==e&&null!==(X=e.options)&&void 0!==X&&null!==(ne=X.target_id)&&void 0!==ne&&ne.length){var Qt,Xt,Jt,Kt,$t,eo,no,lo,to,oo=function(e,n,l,t,o){var i=E.filter((function(e){var n;return(null===(n=e.component_fields)||void 0===n?void 0:n.filter((function(e){return e.component_blueprint_id===l})).length)>0})),a=[];return E.filter((function(n){return n.component_fields.filter((function(n){return n.component_blueprint_id===e})).length>0})).map((function(e){var l,u=e.component_fields.find((function(e){return e.field_name===n})),r=null===(l=e.component_fields.find((function(e){return e.field_name===t})))||void 0===l?void 0:l.value;void 0!==u&&i.filter((function(e){return e.component_fields.filter((function(e){return e.value===u.value})).length>0})).map((function(e){var n,l=null===(n=e.component_fields.find((function(e){return e.field_name===o})))||void 0===n?void 0:n.value;a=[].concat((0,d.Z)(a),[{label:l,value:e.id,field:e,grouping:r}])}))})),a}(null===e||void 0===e||null===(Qt=e.options)||void 0===Qt?void 0:Qt.source_id,null===e||void 0===e||null===(Xt=e.options)||void 0===Xt?void 0:Xt.common_field,null===e||void 0===e||null===(Jt=e.options)||void 0===Jt?void 0:Jt.target_id,null===e||void 0===e||null===(Kt=e.options)||void 0===Kt?void 0:Kt.sourceLabel,null===e||void 0===e||null===($t=e.options)||void 0===$t?void 0:$t.referenceLabel);return u.createElement(U.Z,{enabled:Jn,width:R.tq?"100%":"calc(100% / 3)",key:n,fieldLabel:e.field_name,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors},"Dropdown"===(null===e||void 0===e||null===(eo=e.options)||void 0===eo?void 0:eo.selection)?u.createElement(yn.yV,{items:oo,groupedBy:"grouping",groupname:"grouping",triggerType:"chevron",title:te,className:De,inputClassName:xe,molclassname:we,moliclassname:ke,notags:!0,onChange:function(l){var o;l.length>0&&(null===e||void 0===e||null===(o=e.options)||void 0===o||o.list.map((function(n){var o=wn({field_name:n});if(-1!=o){var i=E.find((function(e){return e.id===l[0].value})),d=i.component_fields.find((function(e){return e.field_name===n}));if(void 0==d){var a=i.component_fields.find((function(n){var l;return n.field_name===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.common_field)})),u=E.find((function(n){return n.component_fields.filter((function(n){var l;return n.value===a.value&&n.component_blueprint_id===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.source_id)})).length>0}));if(void 0!=u){var r=u.component_fields.find((function(e){return e.field_name===n}));void 0!=r?(t.selected_fields[o].value=r.value,t.selected_fields[o].disabled=!0):t.selected_fields[o].value=""}else t.selected_fields[o].value=""}else t.selected_fields[o].value=d.value,t.selected_fields[o].disabled=!0}})),c("".concat(l[0].label,",").concat(l[0].value),n),oe("".concat(l[0].grouping)))}}):"Tiles"===(null===e||void 0===e||null===(no=e.options)||void 0===no?void 0:no.selection)?u.createElement(yn.qq,{items:oo,selectedItems:ae,groupedBy:"grouping",groupname:"grouping",className:Me,moliclassname:ke,onGroupChange:function(e){ue(oo.filter((function(n){return n.grouping===e})))},onChange:function(l){var o;l&&(null===e||void 0===e||null===(o=e.options)||void 0===o||o.list.map((function(n){var o=wn({field_name:n});if(-1!=o){var i=E.find((function(e){return e.id===l.value})),d=i.component_fields.find((function(e){return e.field_name===n}));if(void 0==d){var a=i.component_fields.find((function(n){var l;return n.field_name===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.common_field)})),u=E.find((function(n){return n.component_fields.filter((function(n){var l;return n.value===a.value&&n.component_blueprint_id===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.source_id)})).length>0}));if(void 0!=u){var r=u.component_fields.find((function(e){return e.field_name===n}));void 0!=r?(t.selected_fields[o].value=r.value,t.selected_fields[o].disabled=!0):t.selected_fields[o].value=""}else t.selected_fields[o].value=""}else t.selected_fields[o].value=d.value,t.selected_fields[o].disabled=!0}})),c("".concat(l.label,",").concat(l.value),n))}}):u.createElement("div",{className:Ae},u.createElement(Cn.Z,{title:null===e||void 0===e||null===(lo=e.options)||void 0===lo?void 0:lo.sourceLabel,triggerType:"eyeglass",className:Le,molclassname:Ie,moliclassname:Ne,inputClassName:Pe,inputContainerClassName:Te,items:gn.Z(bn.Z("grouping"))(oo).map((function(e){return{label:e.grouping,value:e.grouping}})),onChange:function(e){ue(oo.filter((function(n){return n.grouping===e.value})))}}),u.createElement(Cn.Z,{title:null===e||void 0===e||null===(to=e.options)||void 0===to?void 0:to.referenceLabel,triggerType:"eyeglass",className:Le,molclassname:Ie,moliclassname:Ne,inputClassName:Pe,inputContainerClassName:Te,items:ae,onChange:function(l){var o;l&&(null===e||void 0===e||null===(o=e.options)||void 0===o||o.list.map((function(n){var o=wn({field_name:n});if(-1!=o){var i=E.find((function(e){return e.id===l.value})),d=i.component_fields.find((function(e){return e.field_name===n}));if(void 0==d){var a=i.component_fields.find((function(n){var l;return n.field_name===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.common_field)})),u=E.find((function(n){return n.component_fields.filter((function(n){var l;return n.value===a.value&&n.component_blueprint_id===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.source_id)})).length>0}));if(void 0!=u){var r=u.component_fields.find((function(e){return e.field_name===n}));void 0!=r?(t.selected_fields[o].value=r.value,t.selected_fields[o].disabled=!0):t.selected_fields[o].value=""}else t.selected_fields[o].value=""}else t.selected_fields[o].value=d.value,t.selected_fields[o].disabled=!0}})),c("".concat(l.label,",").concat(l.value),n))}})))}var io,ao,uo,ro,so,co,vo,po,mo,fo,_o,yo,ho,go,bo,Zo,Co,Eo,So,Mo,xo,wo,ko,Io,No,Po,To,Ao,Lo,Do,Oo,Bo;if(("Step List"===(null===e||void 0===e?void 0:e.data_type_name)||"Component List"===(null===e||void 0===e?void 0:e.data_type_name))&&(null===e||void 0===e||null===(le=e.options)||void 0===le||null===(ie=le.list)||void 0===ie?void 0:ie.length)>0&&(null===e||void 0===e||null===(de=e.options)||void 0===de||null===(re=de.component_id)||void 0===re?void 0:re.length)>0)return u.createElement("div",{key:n,style:{width:R.tq?"100%":"70%",display:1==e.visible?"":"none"}},u.createElement(G.default,{columns:null===e||void 0===e||null===(io=e.options)||void 0===io?void 0:io.list,list:(Xn=null===e||void 0===e?void 0:e.options,v.components.filter((function(e){return e.id===Xn.component_id})).map((function(e){var n={};return Xn.list.map((function(l){var t,d;n=(0,i.Z)((0,i.Z)({},n),{},(d={},(0,o.Z)(d,l,null===(t=e.selected_fields.find((function(e){return e.field_name===l})))||void 0===t?void 0:t.value),(0,o.Z)(d,"temp_id",e.temp_id),d))})),n}))),onListItemClick:function(e){m({action:C._U.removeModuleComponents,value:e.temp_id})}}));if("Checkbox"===(null===e||void 0===e?void 0:e.data_type_name))return u.createElement(U.Z,{enabled:Jn,border:{border:"0",paddingTop:"40px"},width:R.tq?"100%":"calc(100% / 3)",key:n,visible:e.visible,mandatory:e.mandatory,error:e.errors,customIconBgColor:"white"},u.createElement(Sn.X,{defaultChecked:null!==(ao=e.value)&&void 0!==ao&&ao,checkboxLabel:null===e||void 0===e||null===(uo=e.options)||void 0===uo?void 0:uo.value,onChange:function(e){c(e.target.checked,n)}}));if("Transaction List"===(null===e||void 0===e?void 0:e.data_type_name)&&null!==e&&void 0!==e&&null!==(ve=e.options)&&void 0!==ve&&ve.map&&(null===e||void 0===e||null===(pe=e.options)||void 0===pe||null===(Ye=pe.module_id)||void 0===Ye?void 0:Ye.length)>0)return u.createElement(En.Z,{key:n,className:Re,tableStyle:{minWidth:R.tq?"100px":"730px",width:R.tq?"100%":""},columns:Object.values(e.options.map),footer:R.tq?[]:["Totals:","".concat(Zn.Z((function(e,n){var l;return null!==(l=+e+ +n.quantity)&&void 0!==l?l:0}),0,null!==(ro=null===v||void 0===v?void 0:v.items)&&void 0!==ro?ro:[]))],list:hn(e.options),onListItemClick:function(e){m({action:C._U.removeModuleItems,value:e.item})}});if("ID"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(Ge=e.options)||void 0===Ge||null===(We=Ge.id)||void 0===We?void 0:We.length)>0){var Uo,qo=void 0===e.value||null===e.value?"".concat(null===e||void 0===e?void 0:e.options.id).concat(null===(null===Z||void 0===Z?void 0:Z.misc_info)?1:null!==(Uo=null===Z||void 0===Z?void 0:Z.misc_info[null===e||void 0===e?void 0:e.field_name])&&void 0!==Uo?Uo:1):e.value;return e.value=qo,u.createElement(U.Z,{width:R.tq?"100%":"calc(100% / 3)",key:n,fieldLabel:e.field_name,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors,customIconBgColor:"white"},u.createElement("input",{onBlur:function(l){return xn(e.data_type_name,l.target.value,s,n,v)},type:e.data_type,autoComplete:"none",value:qo,className:se,name:e.field_name,disabled:!0}))}if("Notes"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(Ve=e.options)||void 0===Ve||null===(Je=Ve.value)||void 0===Je?void 0:Je.length)>0)return u.createElement("label",{key:n,className:ce,style:{display:e.visible?"":"none"}},"".concat(e.field_name,": ").concat(null===e||void 0===e||null===(so=e.options)||void 0===so?void 0:so.value));if("List Filter"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(Ke=e.options)||void 0===Ke||null===(ln=Ke.value)||void 0===ln?void 0:ln.length)>0)return u.createElement(u.Fragment,null);if("Value"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(tn=e.options)||void 0===tn||null===(an=tn.module_id)||void 0===an?void 0:an.length)>0&&(null===e||void 0===e||null===(sn=e.options)||void 0===sn||null===(vn=sn.component_id)||void 0===vn?void 0:vn.length)>0)return u.createElement(U.Z,{width:R.tq?"100%":"calc(100% / 3)",key:n,fieldLabel:e.field_name,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors,customIconBgColor:"white"},u.createElement("input",{value:null===e||void 0===e||null===(co=e.options)||void 0===co?void 0:co.value,className:se,name:e.field_name,disabled:!0}));if("URL"===e.data_type_name)return u.createElement(U.Z,{border:{border:"0"},width:R.tq?"100%":"80%",key:n,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors,customIconBgColor:"white"},null!==e&&void 0!==e&&null!==(vo=e.options.value)&&void 0!==vo&&vo.includes("jpg")||null!==e&&void 0!==e&&null!==(po=e.options.value)&&void 0!==po&&po.includes("jpeg")||null!==e&&void 0!==e&&null!==(mo=e.options.value)&&void 0!==mo&&mo.includes("png")?u.createElement("div",{onClick:function(){return window.open(null===e||void 0===e?void 0:e.options.value,"_blank")}},u.createElement("img",{alt:"lg",src:null===e||void 0===e?void 0:e.options.value,style:{width:"100%",height:"100%",cursor:"pointer"}})):null!==e&&void 0!==e&&null!==(fo=e.options.value)&&void 0!==fo&&fo.includes("pdf")?u.createElement("div",{style:{width:"inherit"},onClick:function(){return window.open(null===e||void 0===e?void 0:e.options.value,"_blank")}},u.createElement("embed",{src:"".concat(null===e||void 0===e?void 0:e.options.value,"#toolbar=0&navpanes=0&scrollbar=0&zoom=100%"),width:"100%",height:"1000px"})):u.createElement("div",{style:{width:"inherit"},onClick:function(){return window.open(null===e||void 0===e?void 0:e.options.value,"_blank")}},u.createElement("textarea",{disabled:!0,onChange:function(){},autoComplete:"none",value:null===(null===e||void 0===e?void 0:e.options.value)?"":null===e||void 0===e?void 0:e.options.value,className:se,style:{height:"auto",width:"inherit",cursor:"pointer"},name:e.field_name})));if("Formula"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(Pn=e.options)||void 0===Pn||null===(Tn=Pn.operator)||void 0===Tn?void 0:Tn.length)>0){var Ro=(0,dn.LV)(null===e||void 0===e?void 0:e.options,t.selected_fields.filter((function(n){return e.options.list.includes(n.field_name)})),v.components,v.items);return void 0!==Ro&&(e.value=Ro),u.createElement(U.Z,{width:R.tq?"100%":"calc(100% / 3)",key:n,fieldLabel:e.field_name,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors,customIconBgColor:"white"},u.createElement("input",{value:Ro||0,className:se,name:e.field_name,disabled:!0}))}if("Dropdown"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(An=e.options)||void 0===An||null===(Ln=An.list)||void 0===Ln?void 0:Ln.length)>0)return u.createElement(U.Z,{enabled:Jn,height:un,width:R.tq?"100%":"calc(100% / 3)",key:n,fieldLabel:e.field_name,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors},u.createElement(nn,{key:n,visible:e.visible,mandatory:e.mandatory,items:null===e||void 0===e||null===(_o=e.options)||void 0===_o?void 0:_o.list.map((function(e){return{label:e,value:e}})),className:De,error:e.errors,onClicked:function(n){var l;return rn(n?"".concat(80+36*(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.list.length),"px"):"80px")},onChange:function(e){rn("80px"),c(e,n)},selectionType:null===e||void 0===e||null===(yo=e.options)||void 0===yo?void 0:yo.type,fieldIcon:e.icon,value:void 0===e.value||null===e.value?"":e.value,placeholder:"Click to select option..."}));if("Positions"===(null===e||void 0===e?void 0:e.data_type_name))return u.createElement(U.Z,{height:null!==(ho="".concat(80+36*(null===e||void 0===e||null===(go=e.value)||void 0===go?void 0:go.split(",").length),"px"))&&void 0!==ho?ho:"180px",enabled:Jn,width:R.tq?"100%":"calc(100% / 3)",key:n,fieldLabel:e.field_name,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors},u.createElement(nn,{key:n,visible:null===e||void 0===e?void 0:e.visible,mandatory:null===e||void 0===e?void 0:e.mandatory,className:Oe,items:k,value:e.value,loading:D,error:null===e||void 0===e?void 0:e.errors,onChange:function(e){c(e,n)},selectionType:"multiple",fieldIcon:null===e||void 0===e?void 0:e.icon,placeholder:"Select positions..."}));if("People"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(Dn=e.options)||void 0===Dn||null===(On=Dn.position_id)||void 0===On?void 0:On.length)>0)return u.createElement(U.Z,{enabled:Jn,height:pn,width:R.tq?"100%":"calc(100% / 3)",key:n,fieldLabel:e.field_name,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors},u.createElement(nn,{onFocus:function(){var n;return 0==P.length&&fn(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.position_id)},key:n,visible:null===e||void 0===e?void 0:e.visible,mandatory:null===e||void 0===e?void 0:e.mandatory,className:"multiple"===(null===e||void 0===e||null===(bo=e.options)||void 0===bo?void 0:bo.type)?Oe:De,items:P.filter((function(n){var l,t;return(null===n||void 0===n||null===(l=n.user)||void 0===l||null===(t=l.positions)||void 0===t?void 0:t.filter((function(n){var l,t;return null===e||void 0===e||null===(l=e.options)||void 0===l||null===(t=l.position_id)||void 0===t?void 0:t.includes(null===n||void 0===n?void 0:n.id)})).length)>0})),value:"single"===(null===e||void 0===e||null===(Zo=e.options)||void 0===Zo?void 0:Zo.type)?null===(Co=P.find((function(n){return n.label===(null===e||void 0===e?void 0:e.value)})))||void 0===Co?void 0:Co.label:e.value,loading:D,error:null===e||void 0===e?void 0:e.errors,onChange:function(l){var t;if("single"===(null===e||void 0===e||null===(t=e.options)||void 0===t?void 0:t.type)){var o,i,d=P.find((function(e){return e.value===l}));if(1==(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.email))e.email=null===d||void 0===d||null===(i=d.user)||void 0===i?void 0:i.email;c(null===d||void 0===d?void 0:d.label,n)}else c(l,n);mn("80px")},onClicked:function(e){return mn(e?"".concat(80+36*P.length,"px"):"80px")},selectionType:null===e||void 0===e||null===(Eo=e.options)||void 0===Eo?void 0:Eo.type,fieldIcon:null===e||void 0===e?void 0:e.icon,placeholder:"Select user..."}));if("People"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(Bn=e.options)||void 0===Bn||null===(Un=Bn.componentF)||void 0===Un?void 0:Un.length)>0&&(null===e||void 0===e||null===(qn=e.options)||void 0===qn||null===(Rn=qn.componentO)||void 0===Rn?void 0:Rn.length)>0){var Fo,zo,Yo,Go,Ho,jo=null===(Fo=v.components.find((function(n){return n.selected_fields.filter((function(n){var l;return n.field_name===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.componentF)})).length>0})))||void 0===Fo?void 0:Fo.selected_fields.find((function(n){var l;return n.field_name===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.componentF)})),Wo=E.find((function(n){var l;return n.component_fields.filter((function(e){return e.value===(null===jo||void 0===jo?void 0:jo.value)})).length>0&&n.module_id===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.module_id)})),Vo=null===Wo||void 0===Wo?void 0:Wo.component_fields.find((function(n){var l;return n.field_name===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.componentO)}));return u.createElement(U.Z,{enabled:Jn,height:pn,width:R.tq?"100%":"calc(100% / 3)",key:n,fieldLabel:e.field_name,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors},u.createElement(nn,{onFocus:function(){var n;return 0==P.length&&fn(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.position_id)},key:n,visible:null===e||void 0===e?void 0:e.visible,mandatory:null===e||void 0===e?void 0:e.mandatory,className:"multiple"===(null===e||void 0===e||null===(zo=e.options)||void 0===zo?void 0:zo.type)?Oe:De,items:P.filter((function(e){var n,l;return(null===e||void 0===e||null===(n=e.user)||void 0===n||null===(l=n.positions)||void 0===l?void 0:l.filter((function(e){var n;return null===Vo||void 0===Vo||null===(n=Vo.value)||void 0===n?void 0:n.split(",").includes(null===e||void 0===e?void 0:e.name)})).length)>0})),value:"single"===(null===e||void 0===e||null===(Yo=e.options)||void 0===Yo?void 0:Yo.type)?null===(Go=P.find((function(n){return n.label===(null===e||void 0===e?void 0:e.value)})))||void 0===Go?void 0:Go.label:e.value,loading:D,error:null===e||void 0===e?void 0:e.errors,onChange:function(l){var t;if("single"===(null===e||void 0===e||null===(t=e.options)||void 0===t?void 0:t.type)){var o,i,d=P.find((function(e){return e.value===l}));if(1==(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.email))e.email=null===d||void 0===d||null===(i=d.user)||void 0===i?void 0:i.email;c(null===d||void 0===d?void 0:d.label,n)}else c(l,n);mn("80px")},onClicked:function(e){return mn(e?"".concat(80+36*P.length,"px"):"80px")},selectionType:null===e||void 0===e||null===(Ho=e.options)||void 0===Ho?void 0:Ho.type,fieldIcon:null===e||void 0===e?void 0:e.icon,placeholder:"Select user..."}))}if("People"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(Fn=e.options)||void 0===Fn||null===(zn=Fn.componentF)||void 0===zn?void 0:zn.length)>0&&(null===e||void 0===e||null===(Yn=e.options)||void 0===Yn||null===(Gn=Yn.componentUO)||void 0===Gn?void 0:Gn.length)>0){var Qo,Xo,Jo,Ko,$o,ei=null===(Qo=v.components.find((function(n){return n.selected_fields.filter((function(n){var l;return n.field_name===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.componentF)})).length>0})))||void 0===Qo?void 0:Qo.selected_fields.find((function(n){var l;return n.field_name===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.componentF)})),ni=E.filter((function(n){var l;return n.module_id===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.module_id)})).find((function(e){return e.component_fields.filter((function(e){return e.value===ei.value})).length>0})),li=ni?null===ni||void 0===ni?void 0:ni.component_fields.find((function(n){var l;return n.field_name===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.componentUO)})):"";return u.createElement(U.Z,{enabled:Jn,height:pn,width:R.tq?"100%":"calc(100% / 3)",key:n,fieldLabel:e.field_name,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors},u.createElement(nn,{onFocus:function(){var n;return 0==P.length&&fn(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.position_id)},key:n,visible:null===e||void 0===e?void 0:e.visible,mandatory:null===e||void 0===e?void 0:e.mandatory,className:"multiple"===(null===e||void 0===e||null===(Xo=e.options)||void 0===Xo?void 0:Xo.type)?Oe:De,items:P.filter((function(e){var n;return null===li||void 0===li||null===(n=li.value)||void 0===n?void 0:n.split(",").includes(null===e||void 0===e?void 0:e.label)})),value:"single"===(null===e||void 0===e||null===(Jo=e.options)||void 0===Jo?void 0:Jo.type)?null===(Ko=P.find((function(n){return n.label===(null===e||void 0===e?void 0:e.value)})))||void 0===Ko?void 0:Ko.label:e.value,loading:D,error:null===e||void 0===e?void 0:e.errors,onChange:function(l){var t;if("single"===(null===e||void 0===e||null===(t=e.options)||void 0===t?void 0:t.type)){var o,i,d=P.find((function(e){return e.value===l}));if(1==(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.email))e.email=null===d||void 0===d||null===(i=d.user)||void 0===i?void 0:i.email;c(null===d||void 0===d?void 0:d.label,n)}else c(l,n);mn("80px")},onClicked:function(e){return mn(e?"".concat(80+36*P.length,"px"):"80px")},selectionType:null===e||void 0===e||null===($o=e.options)||void 0===$o?void 0:$o.type,fieldIcon:null===e||void 0===e?void 0:e.icon,placeholder:"Select user..."}))}if("Product"===(null===e||void 0===e?void 0:e.data_type_name))return u.createElement("div",{key:n,style:{height:Qe,width:R.tq?"100%":"50%",display:null!==e&&void 0!==e&&e.visible?"":"none",pointerEvents:Jn}},u.createElement(nn,{key:n,visible:null===e||void 0===e?void 0:e.visible,mandatory:null===e||void 0===e?void 0:e.mandatory,items:null===e||void 0===e||null===(So=e.options)||void 0===So?void 0:So.list.map((function(e){return{label:S.find((function(n){return n.product_code===e})).name,value:e}})),loading:D,error:null===e||void 0===e?void 0:e.errors,onClicked:function(n){var l;return Xe(n?"".concat(80+36*(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.list.length),"px"):"80px")},onChange:function(e){Xe("80px");var l=wn({field_name:"Product ID"});-1!=l&&(t.selected_fields[l].value=e),In(e),c(e,n)},selectionType:"Dropdown",fieldIcon:null===e||void 0===e?void 0:e.icon,fieldLabel:null===e||void 0===e?void 0:e.field_name,placeholder:void 0==e.value?"...Select ".concat(null===e||void 0===e?void 0:e.field_name):null===e||void 0===e?void 0:e.value.split(",")[0]}));if("Product Lookup"===(null===e||void 0===e?void 0:e.data_type_name)){var ti,oi,ii,di=function(e,n){var l=[];return E.filter((function(n){return n.component_fields.filter((function(n){return n.component_blueprint_id===e})).length>0})).map((function(e){S.map((function(t){if(e.component_fields.filter((function(e){return e.value===t.product_code})).length>0){var o=e.component_fields.find((function(e){return e.field_name===n}));l=[].concat((0,d.Z)(l),[{label:o.value,value:e.id,grouping:t.name}])}}))})),l}(null===e||void 0===e||null===(ti=e.options)||void 0===ti?void 0:ti.component_id,null===e||void 0===e||null===(oi=e.options)||void 0===oi?void 0:oi.referenceLabel);return u.createElement("label",{key:n,style:{width:"inherit"}},e.field_name,u.createElement("div",{className:"Tiles"===e.options.selection?ee:"Columns"===e.options.selection?Ae:$,style:{width:R.tq?"100%":"50%",overflow:"Dropdown"===e.options.selection?"":"hidden",pointerEvents:Jn}},"Dropdown"===e.options.selection?u.createElement(yn.yV,{visible:null===e||void 0===e?void 0:e.visible,mandatory:null===e||void 0===e?void 0:e.mandatory,placeholder:"...Select ".concat(e.field_name),items:di,groupedBy:"grouping",groupname:"grouping",triggerType:"chevron",title:te,className:Me,inputClassName:xe,molclassname:we,moliclassname:ke,notags:!0,onChange:function(l){l.length>0&&(e.options.list.map((function(n){var o=wn({field_name:n});if(-1!=o){var i,d=E.find((function(e){return e.id===l.value})),a=null===d||void 0===d||null===(i=d.component_fields)||void 0===i?void 0:i.find((function(e){return e.field_name===n}));if(void 0==a){var u,r=null===d||void 0===d||null===(u=d.component_fields)||void 0===u?void 0:u.find((function(n){var l;return n.field_name===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.common_field)})),s=E.find((function(n){return n.component_fields.filter((function(n){var l;return n.value===(null===r||void 0===r?void 0:r.value)&&n.component_blueprint_id===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.source_id)})).length>0}));if(void 0!=s){var c=s.component_fields.find((function(e){return e.field_name===n}));void 0!=c?(t.selected_fields[o].value=c.value,t.selected_fields[o].disabled=!0):t.selected_fields[o].value=""}else t.selected_fields[o].value=""}else t.selected_fields[o].value=a.value,t.selected_fields[o].disabled=!0}})),c("".concat(l[0].label,",").concat(l[0].value),n),oe("".concat(l[0].grouping)))}}):"Tiles"===e.options.selection?u.createElement(yn.qq,{items:di,selectedItems:ae,groupedBy:"grouping",groupname:"grouping",className:Me,moliclassname:ke,onGroupChange:function(e){ue(di.filter((function(n){return n.grouping===e})))},onChange:function(l){l&&(e.options.list.map((function(n){var o=wn({field_name:n});if(-1!=o){var i,d=E.find((function(e){return e.id===l.value})),a=null===d||void 0===d||null===(i=d.component_fields)||void 0===i?void 0:i.find((function(e){return e.field_name===n}));if(void 0==a){var u,r=null===d||void 0===d||null===(u=d.component_fields)||void 0===u?void 0:u.find((function(n){var l;return n.field_name===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.common_field)})),s=E.find((function(n){return n.component_fields.filter((function(n){var l;return n.value===(null===r||void 0===r?void 0:r.value)&&n.component_blueprint_id===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.source_id)})).length>0}));if(void 0!=s){var c=s.component_fields.find((function(e){return e.field_name===n}));void 0!=c?(t.selected_fields[o].value=c.value,t.selected_fields[o].disabled=!0):t.selected_fields[o].value=""}else t.selected_fields[o].value=""}else t.selected_fields[o].value=a.value,t.selected_fields[o].disabled=!0}})),c("".concat(l.label,",").concat(l.value),n))}}):u.createElement("div",{className:Ae},u.createElement(Cn.Z,{title:"Product",triggerType:"eyeglass",className:Le,molclassname:Ie,moliclassname:Ne,inputClassName:Pe,inputContainerClassName:Te,items:gn.Z(bn.Z("grouping"))(di).map((function(e){return{label:e.grouping,value:e.grouping}})),onChange:function(e){ue(di.filter((function(n){return n.grouping===e.value})))}}),u.createElement(Cn.Z,{title:null===e||void 0===e||null===(ii=e.options)||void 0===ii?void 0:ii.referenceLabel,triggerType:"eyeglass",className:Le,molclassname:Ie,moliclassname:Ne,inputClassName:Pe,inputContainerClassName:Te,items:ae,onChange:function(l){l&&(e.options.list.map((function(n){var o=wn({field_name:n});if(-1!=o){var i=E.find((function(e){return e.id===l.value})),d=i.component_fields.find((function(e){return e.field_name===n}));if(void 0==d){var a=i.component_fields.find((function(n){var l;return n.field_name===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.common_field)})),u=E.find((function(n){return n.component_fields.filter((function(n){var l;return n.value===a.value&&n.component_blueprint_id===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.source_id)})).length>0}));if(void 0!=u){var r=u.component_fields.find((function(e){return e.field_name===n}));void 0!=r?(t.selected_fields[o].value=r.value,t.selected_fields[o].disabled=!0):t.selected_fields[o].value=""}else t.selected_fields[o].value=""}else t.selected_fields[o].value=d.value,t.selected_fields[o].disabled=!0}})),c("".concat(l.label,",").concat(l.value),n))}}))))}if("Status"===(null===e||void 0===e?void 0:e.data_type_name)){var ai,ui,ri,si,ci,vi,pi,mi,fi=1==(null===(ai=M.processModule.module.options)||void 0===ai?void 0:ai.asGraphical)?[{label:"Show",value:"Show"},{label:"Hide",value:"Hide"}]:(null===Z||void 0===Z||null===(ui=Z.misc_info)||void 0===ui||null===(ri=ui.status)||void 0===ri?void 0:ri.length)>0?null===Z||void 0===Z||null===(si=Z.misc_info)||void 0===si?void 0:si.status:[{label:"Ongoing",value:"Ongoing"},{label:"Pending",value:"Pending"},{label:"Awaiting Payment",value:"Awaiting Payment"},{label:"Awaiting Fulfillment",value:"Awaiting Fulfillment"},{label:"Awaiting Shipment",value:"Awaiting Shipment"},{label:"Awaiting Pickup",value:"Awaiting Pickup"},{label:"Partially Shipped",value:"Partially Shipped"},{label:"Completed",value:"Completed"},{label:"Shipped",value:"Shipped"},{label:"Cancelled",value:"Cancelled"},{label:"Declined",value:"Declined"},{label:"Refunded",value:"Refunded"},{label:"Disputed",value:"Disputed"},{label:"Done",value:"Done"},{label:"Closed (Will lock Edit)",value:"Closed"}];if((null===Z||void 0===Z||null===(ci=Z.misc_info)||void 0===ci||null===(vi=ci.rules)||void 0===vi?void 0:vi.length)>0)null===Z||void 0===Z||null===(mi=Z.misc_info)||void 0===mi||mi.rules.filter((function(e){return"status"===e.type})).filter((function(n){n.valueCondition===e.value&&(fi="0"===n.allow?fi.filter((function(e){return n.values.includes(e.value)})):fi.filter((function(e){return!n.values.includes(e.value)})))}));return u.createElement("div",{key:n,style:{height:un,width:R.tq?"100%":"calc(100% / 3)",display:"",paddingBottom:"100px",pointerEvents:Jn}},u.createElement(nn,{key:n,visible:e.visible,mandatory:e.mandatory,value:null!==(pi=e.value)&&void 0!==pi?pi:"",items:fi,error:e.errors,className:qe,onClicked:function(e){return rn(e?"".concat(208,"px"):"80px")},onChange:function(e){Z.start=!0,rn("80px"),c(e,n);var l=t.selected_fields.find((function(n){return"Date"===n.data_type_name&n.field_name===e}));l&&(l.value=new Date(Q().now()))},fieldIcon:e.icon,fieldLabel:e.field_name,placeholder:"Select status..."}))}return"Pin"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(Hn=e.options)||void 0===Hn||null===(jn=Hn.pintype)||void 0===jn?void 0:jn.length)>0?u.createElement(cn,{key:n,value:null===t||void 0===t?void 0:t.selected_fields[n].value,onLocationChange:function(e){return g(e,n)}}):"Map"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(Wn=e.options)||void 0===Wn||null===(Vn=Wn.maptype)||void 0===Vn?void 0:Vn.length)>0?u.createElement(_n,{key:n,value:null===t||void 0===t?void 0:t.selected_fields[n].value,onLocationChange:function(e){return g(e,n)}}):"Currency"===(null===e||void 0===e?void 0:e.data_type_name)&&null!==e&&void 0!==e&&null!==(Qn=e.options)&&void 0!==Qn&&Qn.currency_type?u.createElement(U.Z,{enabled:Jn,width:R.tq?"100%":"calc(100% / 3)",key:n,fieldLabel:e.field_name,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors},u.createElement("div",{onClick:function(){return O(!D)},className:ye},null!==e&&void 0!==e&&null!==(Mo=e.options)&&void 0!==Mo&&Mo.symbol?null===e||void 0===e||null===(xo=e.options)||void 0===xo?void 0:xo.symbol:""," "),D&&u.createElement(p.Ld,{items:dn.s3,defaultSelectedItem:{label:null===e||void 0===e||null===(wo=e.options)||void 0===wo?void 0:wo.currency_type,value:null===e||void 0===e||null===(ko=e.options)||void 0===ko?void 0:ko.country_code},triggerType:"chevron",placeholder:"Select curency...",className:he,inputClassName:Ze,inputContainerClassName:Ee,clearControlsClassName:Ce,molclassname:ge,moliclassname:be,onChange:function(e){h(e,n),O(!1)}}),!D&&u.createElement("input",{type:"number",autoComplete:"off",value:null!==(Io=t.selected_fields[n].value)&&void 0!==Io?Io:0,className:Se,onChange:function(e){r(e.target.value,n)}})):u.createElement(U.Z,{enabled:Jn,width:R.tq?"100%":"calc(100% / 3)",key:n,fieldLabel:e.field_name,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors,customIconBgColor:"white"},"file"===e.data_type?u.createElement(kn,{field_id:e.id,value:null===e||void 0===e?void 0:e.value,isInherited:f,checkIfAreMandatoryErrored:_,options:null===e||void 0===e?void 0:e.options,index:n,indexInContextArray:s}):"date"===e.data_type||null!==e&&void 0!==e&&null!==(No=e.options)&&void 0!==No&&No.country_code||null!==e&&void 0!==e&&null!==(Po=e.options)&&void 0!==Po&&Po.currency_type||"Number"===e.data_type_name?u.createElement("div",{className:se},"date"===e.data_type?"Range"===(null===e||void 0===e||null===(To=e.options)||void 0===To?void 0:To.type)?u.createElement(p.$m,{inputContainerClassName:fe,dateChangeHandler:function(e){return function(e,n){W(e),r(e,n)}(e,n)},startDate:J,endDate:K}):u.createElement(p.X9,{value:void 0==e.value?"":Q()(new Date(e.value)).format("Do MMMM YYYY"),dateChangeHandler:function(e){return function(e,n){z(e),r(e,n)}(e,n)},selected:new Date(Q()(F,"YYYY-MM-DD")),inputContainerClassName:me,inputStyle:{textAlign:"left",border:"none",height:"auto"},hasCalendarIcon:!0}):null!==e&&void 0!==e&&null!==(Ao=e.options)&&void 0!==Ao&&Ao.country_code?u.createElement(on(),{value:t.selected_fields[n].value,country:null===e||void 0===e||null===(Lo=e.options)||void 0===Lo?void 0:Lo.country_code,onChange:function(e,l,t){y(l,n,t.target.value)},inputClass:_e}):u.createElement("input",{onBlur:function(l){return xn(e.data_type_name,l.target.value,s,n,v)},type:e.data_type,onChange:function(e){r(e.target.value,n)},autoComplete:"none",value:t.selected_fields[n].value?t.selected_fields[n].value:""===Mn(null===e||void 0===e?void 0:e.options)?"":Mn(null===e||void 0===e?void 0:e.options),placeholder:"Number"===t.selected_fields[n].data_type_name?"0":"",className:se,name:e.field_name,disabled:null!==(Do=t.selected_fields[n].disabled)&&void 0!==Do&&Do})):"Long Text"===e.data_type_name?u.createElement("textarea",{className:Be,onBlur:function(l){return xn(e.data_type_name,l.target.value,s,n,v)},type:e.data_type,value:t.selected_fields[n].value?t.selected_fields[n].value:""===Mn(null===e||void 0===e?void 0:e.options)?"":Mn(null===e||void 0===e?void 0:e.options),onFocus:function(){},disabled:null!==(Oo=t.selected_fields[n].disabled)&&void 0!==Oo&&Oo,autoComplete:"none",onChange:function(e){r(e.target.value,n)},placeholder:"Number"===t.selected_fields[n].data_type_name?"0":"",name:e.field_name}):u.createElement("input",{onBlur:function(l){return xn(e.data_type_name,l.target.value,s,n,v)},type:e.data_type,onChange:function(e){r(e.target.value,n)},autoComplete:"none",value:t.selected_fields[n].value?t.selected_fields[n].value:""===Mn(null===e||void 0===e?void 0:e.options)?"":Mn(null===e||void 0===e?void 0:e.options),placeholder:"Number"===t.selected_fields[n].data_type_name?"0":"",className:se,name:e.field_name,disabled:null!==(Bo=t.selected_fields[n].disabled)&&void 0!==Bo&&Bo}))}})));return u.createElement("div",{className:pe,style:{width:R.tq?"100%":""}},Pn)})),kn=function(e){var n,l=e.options,t=e.field_id,o=e.index,i=e.indexInContextArray,r=e.value,s=e.checkIfAreMandatoryErrored,c=(0,u.useState)(),v=(0,a.Z)(c,2),p=v[0],f=v[1],_=(0,u.useState)(!1),y=(0,a.Z)(_,2),h=y[0],g=y[1],b=(0,C.pQ)(),Z=(0,a.Z)(b,2),E=Z[0],S=Z[1];return u.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",flex:"1 1",overflow:"hidden"}},u.createElement("u",{onClick:function(){var e;null===(e=document.getElementById("file-change-".concat(t)))||void 0===e||e.click()},style:{cursor:"pointer",marginLeft:"20px",wordWrap:"break-word"}},null!==p&&void 0!==p&&p.name||r?(null===p||void 0===p?void 0:p.name)||r:"Click to upload file..."),u.createElement("input",{accept:"."+(null===l||void 0===l||null===(n=l.accepted_mimes)||void 0===n?void 0:n.replace(/,/g,",.")),type:"file",onChange:function(){return function(e){var n,l,a=document.getElementById("file-change-".concat(t)).files[0],u=((null===a||void 0===a?void 0:a.size)/1024/1024).toFixed(4),r=(e/1024).toFixed(4);g(!0);var c=(0,d.Z)(null!==(n=null===(l=E.currentStep)||void 0===l?void 0:l.component_blueprints)&&void 0!==n?n:[]);u>r?alert("File is too big!"):(0,m.kf)(a,t).subscribe({next:function(e){f(a),g(!1),c[i].selected_fields[o].value=null===e||void 0===e?void 0:e.file_url,c[i].selected_fields[o].value&&c[i].selected_fields[o].mandatory&&(c[i].selected_fields[o].errors=""),s(),S({action:C._U.setComponentBlueprints,value:c}),S({action:C._U.setModuleNewStepComponents,value:c})}})}(null===l||void 0===l?void 0:l.max_file_size)},style:{position:"absolute",visibility:"hidden",width:"0px"},id:"file-change-".concat(t),className:se}),h&&u.createElement(q.Z,{type:R.G6?"Watch":"Puff",color:"#4A4A4A",secondaryColor:"gray",radius:22,height:22,width:"22px"}),(null===p||void 0===p?void 0:p.type)&&u.createElement(In,{fileType:null===p||void 0===p?void 0:p.type}))},In=function(e){return"application/pdf"===(null===e||void 0===e?void 0:e.fileType)?u.createElement("img",{alt:"",src:s.edG}):u.createElement("img",{alt:"",src:s.dm0})},Nn=function(e){var n,l,t,o,r,c,v,m,f,_,y,h,g,b,Z,E,M,x,w,k,I,N,P,T=e.component,A=e.blueprintIndex,L=e.isMandatoryError,D=e.nextButtonClicked,O=e.setIsMandatoryError,B=e.companyUsersArray,U=e.companyData,F=e.components,G=e.products,H=e.authenticatedUser,j=e.begunModule,V=e.blueprints,Q=e.selectedComponent,X=e.companyPositionsArray,J=(0,C.pQ)(),K=(0,a.Z)(J,2),$=K[0],ee=K[1],se=(0,u.useState)(te),ce=(0,a.Z)(se,2),ve=ce[0],pe=ce[1],me=(0,u.useState)(ie),fe=(0,a.Z)(me,2),_e=fe[0],ye=fe[1],he=(0,u.useState)(!1),ge=(0,a.Z)(he,2),be=ge[0],Ze=ge[1],Ce=(0,u.useState)(""),Ee=(0,a.Z)(Ce,2),Se=Ee[0],Me=Ee[1],xe=(0,u.useRef)(null),we=null===(n=$.currentStep)||void 0===n?void 0:n.component_blueprints.findIndex((function(e){return e.id===T.id}));(0,u.useEffect)((function(){ke()}),[D]);var ke=function(){var e;null!==T&&void 0!==T&&null!==(e=T.selected_fields)&&void 0!==e&&e.some((function(e){var n;return!0===e.mandatory&&!0===e.visible&&(!e.value||(null===e||void 0===e||null===(n=e.value)||void 0===n?void 0:n.length)<1)}))?O(!0):O(!1)},Ie=(0,u.useCallback)((function(){var e,n,l,t=(0,d.Z)(null!==(e=null===(n=$.currentStep)||void 0===n?void 0:n.component_blueprints)&&void 0!==e?e:[]),o=null===(l=t[we])||void 0===l?void 0:l.selected_fields;ke(),t[we].selected_fields=null===o||void 0===o?void 0:o.map((function(e){return(0,i.Z)((0,i.Z)({},e),{},{errors:!0!==e.mandatory||e.value?"":"Field is mandatory"})})),ee({action:C._U.setComponentBlueprints,value:t}),ee({action:C._U.setModuleNewStepComponents,value:t})}),[$.currentStep]),Ne=function(e,n){var l,t,o,i=(0,d.Z)(null!==(l=null===(t=$.currentStep)||void 0===t?void 0:t.component_blueprints)&&void 0!==l?l:[]),a=null===(o=i[we])||void 0===o?void 0:o.selected_fields[n];"Number"===(null===a||void 0===a?void 0:a.data_type_name)?Number(+e)?a.value=e:""===e&&(a.value=""):a.value=e,null!==a&&void 0!==a&&a.value&&a.mandatory&&(a.errors=""),ke(),ee({action:C._U.setComponentBlueprints,value:i}),ee({action:C._U.setModuleNewStepComponents,value:i})},Pe=(0,u.useCallback)((function(e,n,l){var t,o,i,a=(0,d.Z)(null!==(t=null===(o=$.currentStep)||void 0===o?void 0:o.component_blueprints)&&void 0!==t?t:[]),u=null===(i=a[we])||void 0===i?void 0:i.selected_fields[n];u.options.country_code=null===e||void 0===e?void 0:e.countryCode,u.options.country_name=null===e||void 0===e?void 0:e.name,u.options.country_prefix="+".concat(null===e||void 0===e?void 0:e.dialCode),ee({action:C._U.setComponentBlueprints,value:a}),ee({action:C._U.setModuleNewStepComponents,value:a}),Ne(l,n)}),[]),Te=(0,u.useCallback)((function(e,n){var l,t,o,i=(0,d.Z)(null!==(l=null===(t=$.currentStep)||void 0===t?void 0:t.component_blueprints)&&void 0!==l?l:[]),a=null===(o=i[we])||void 0===o?void 0:o.selected_fields[n];a.options.currency_type=null===e||void 0===e?void 0:e.label,a.options.currency_value=null===e||void 0===e?void 0:e.value,a.options.symbol=null===e||void 0===e?void 0:e.symbol,ee({action:C._U.setComponentBlueprints,value:i}),ee({action:C._U.setModuleNewStepComponents,value:i})}),[]);return u.createElement("div",{id:"accordion",className:ne,key:A,style:{display:!1===(null===(l=T.options)||void 0===l?void 0:l.useCustomTemplate)||void 0===(null===(t=T.options)||void 0===t?void 0:t.useCustomTemplate)?void 0===(null===(o=T.options)||void 0===o?void 0:o.showOnly)?"":(null===(r=T.options)||void 0===r||null===(c=r.showOnly)||void 0===c?void 0:c.length)>0?(null===(v=T.options)||void 0===v||null===(m=v.showOnly)||void 0===m?void 0:m.filter((function(e){var n;return(null===H||void 0===H||null===(n=H.positions)||void 0===n?void 0:n.filter((function(n){return n.id===e})).length)>0})).length)>0?"":"none":"":"none",pointerEvents:void 0===(null===Q||void 0===Q?void 0:Q.id)||(null===Q||void 0===Q||null===(f=Q.created_by)||void 0===f?void 0:f.id)===H.id||void 0===(null===j||void 0===j||null===(_=j.processModule)||void 0===_||null===(y=_.module)||void 0===y||null===(h=y.options)||void 0===h?void 0:h.strict)||0==(null===j||void 0===j||null===(g=j.processModule)||void 0===g||null===(b=g.module)||void 0===b||null===(Z=b.options)||void 0===Z?void 0:Z.strict)?"":void 0===(null===(E=T.options)||void 0===E?void 0:E.showOnly)?"none":(null===(M=T.options)||void 0===M||null===(x=M.showOnly)||void 0===x?void 0:x.length)>0&&(null===(w=T.options)||void 0===w||null===(k=w.showOnly)||void 0===k?void 0:k.filter((function(e){var n;return(null===H||void 0===H||null===(n=H.positions)||void 0===n?void 0:n.filter((function(n){return n.id===e})).length)>0})).length)>0?"":"none"}},u.createElement("div",{className:z()(le,ve),"app-variant-has-error":Se?"error":""},u.createElement("div",{style:{display:"flex"}},u.createElement("p",{className:oe,style:{color:L&&D?"var(--app-color-error)":""}},null===T||void 0===T?void 0:T.name),u.createElement("div",{onClick:function(){var e;if(Ie(),null===T||void 0===T||null===(e=T.selected_fields)||void 0===e||!e.some((function(e){var n;return!0===e.mandatory&&!0===e.visible&&(!e.value||(null===e||void 0===e||null===(n=e.value)||void 0===n?void 0:n.length)<1)}))){var n={},l=T.selected_fields.map((function(e){var l,t;if("Formula"===e.data_type_name){var o,d,a,u=(0,dn.LV)(e.options,T.selected_fields.filter((function(n){return e.options.list.includes(n.field_name)})),$.components,null!==(o=$.items)&&void 0!==o?o:[]);if(null!==e&&void 0!==e&&null!==(d=e.options)&&void 0!==d&&d.mapToItem)n[null===e||void 0===e||null===(a=e.options)||void 0===a?void 0:a.mapToItem]="".concat(u.toString());return(0,i.Z)((0,i.Z)({},e),{},{value:"".concat(u.toString())})}null!==e&&void 0!==e&&null!==(l=e.options)&&void 0!==l&&l.mapToItem&&(n[null===e||void 0===e||null===(t=e.options)||void 0===t?void 0:t.mapToItem]="".concat(e.value.toString()));return e}));if(Object.keys(n).length>0){var t,o=null===(t=$.items)||void 0===t?void 0:t.find((function(e){return e.item_code===n.item_code}));void 0===o?ee({action:C._U.addModuleItems,value:(0,i.Z)((0,i.Z)({},n),{},{id:(0,dn.mR)()})}):0==n.quantity?ee({action:C._U.removeModuleItems,value:o}):ee({action:C._U.updateModuleItems,value:(0,i.Z)((0,i.Z)({},o),n)})}else{var a=JSON.parse(JSON.stringify((0,i.Z)((0,i.Z)({},T),{},{temp_id:(0,dn.mR)(),selected_fields:l})));ee({action:C._U.addModuleComponents,value:a})}Ze(!1),Me(""),T.selected_fields.map((function(e,n){Ne("",n)})),ee({action:C._U.setModuleNewStepComponents,value:(0,d.Z)(hn.Z((function(e){return e.selected_fields.filter((function(e){return""===e.value})).length>0}),(0,d.Z)(hn.Z(W.Z("id",T.id))($.newStepComponents))))})}},className:ae,style:{display:null===T.options?"none":!0===(null===T||void 0===T||null===(I=T.options)||void 0===I?void 0:I.allowMultipleInputs)?"":"none"}},be?u.createElement("div",{className:de},u.createElement(q.Z,{type:R.G6?"Watch":"Puff",color:"var(--app-color-gray-dark)",secondaryColor:"gray",radius:32,height:32,width:"32px"})):u.createElement(p.zx,{light:!0},u.createElement(s.mm_,null))),u.createElement("div",{className:"".concat(_e),style:{cursor:"pointer",display:null===T.options?"":!0===(null===T||void 0===T||null===(N=T.options)||void 0===N?void 0:N.allowMultipleInputs)?"none":""},onClick:function(){pe(""===ve?te:""),ye(ve===te?ie:z()(ie,ue))}},u.createElement(S,{width:13,fill:"#4A4A4A"}))),u.createElement("div",{ref:xe,style:{maxHeight:ve===te?"":"0px",display:"flex"},className:re},u.createElement(wn,{blueprints:V,component:T,handleInputChange:Ne,handlePrefixChange:Pe,handleCurrencyChange:Te,checkIfAreMandatoryErrored:ke,handleCheckbox:function(e,n){var l,t,o,i=(0,d.Z)(null!==(l=null===(t=$.currentStep)||void 0===t?void 0:t.component_blueprints)&&void 0!==l?l:[]),a=null===(o=i[we])||void 0===o?void 0:o.selected_fields[n];a.value=e,null!==a&&void 0!==a&&a.value&&a.mandatory&&(a.errors=""),ee({action:C._U.setComponentBlueprints,value:i}),ee({action:C._U.setModuleNewStepComponents,value:i}),ke()},isInherited:!1,indexInContextArray:we,handleLocationChange:function(e,n){var l,t,o,i=(0,d.Z)(null!==(l=null===(t=$.currentStep)||void 0===t?void 0:t.component_blueprints)&&void 0!==l?l:[]);(null===(o=i[we])||void 0===o?void 0:o.selected_fields[n]).value="".concat(e.lat,", ").concat(e.lng),ee({action:C._U.setComponentBlueprints,value:i}),ee({action:C._U.setModuleNewStepComponents,value:i})},processTaskContext:$,begunModule:j,setTaskProcessContext:ee,companyData:U,companyUsersArray:B,companyPositionsArray:X,components:F,products:G}))),Se&&(null===Se||void 0===Se||null===(P=Se.errors)||void 0===P?void 0:P.title)&&u.createElement(Y.Z,{message:Se.errors.title}),Se&&(null===Se||void 0===Se?void 0:Se.message)&&u.createElement(Y.Z,{message:Se.message}))},Pn=function(e){var n,l=e.component,t=e.isMandatoryError,o=e.nextButtonClicked,i=e.setIsMandatoryError,d=(0,C.pQ)(),r=(0,a.Z)(d,1)[0],c=(0,u.useState)(""),v=(0,a.Z)(c,1)[0],p=(0,u.useRef)(null);(0,u.useEffect)((function(){m()}),[o]);var m=function(){var e;null!==l&&void 0!==l&&null!==(e=l.selected_fields)&&void 0!==e&&e.some((function(e){var n;return!0===e.mandatory&&!0===e.visible&&(!e.value||(null===e||void 0===e||null===(n=e.value)||void 0===n?void 0:n.length)<1)}))?i(!0):i(!1)},f=function(e,n){var l,t;0==n?r.newProduct={name:e,product_code:null===r||void 0===r||null===(l=r.newProduct)||void 0===l?void 0:l.product_code}:r.newProduct={product_code:e,name:null===r||void 0===r||null===(t=r.newProduct)||void 0===t?void 0:t.name}};return u.createElement("div",{id:"accordion",className:ne},u.createElement("div",{className:z()(le,!0),"app-variant-has-error":v?"error":""},u.createElement("div",{style:{display:"flex"}},u.createElement("p",{className:oe,style:{color:t&&o?"var(--app-color-error)":""}},"New Product Details")),u.createElement("div",{ref:p,style:{maxHeight:"",display:"flex",padding:"0px 0px 20px 0px"},className:re},u.createElement(U.Z,{fieldIcon:s.MQR,fieldLabel:"Product Name",isProcess:!0,visible:!0,mandatory:!0,customIconBgColor:"white"},u.createElement("div",{className:ve},u.createElement("input",{type:"text",onChange:function(e){f(e.target.value,0)},autoComplete:"none",className:se,name:"field.field_name"}))),u.createElement("div",{style:{width:"10px"}}),u.createElement(U.Z,{fieldIcon:s.MQR,fieldLabel:"Product Code",isProcess:!0,visible:!0,mandatory:!0,customIconBgColor:"white"},u.createElement("div",{className:ve},u.createElement("input",{type:"text",onChange:function(e){f(e.target.value,1)},autoComplete:"none",className:se,name:"field.field_name"}))))),v&&(null===v||void 0===v||null===(n=v.errors)||void 0===n?void 0:n.title)&&u.createElement(Y.Z,{message:v.errors.title}),v&&(null===v||void 0===v?void 0:v.message)&&u.createElement(Y.Z,{message:v.message}))},Tn=l(13290),An=l(40694),Ln=l(81330),Dn=l.n(Ln),On="GeneralCard_userCard__0SOp0",Bn="GeneralCard_userCardContainer__wJA5U",Un="GeneralCard_userCardBottomContainer__0WoR6",qn="GeneralCard_fullName__QizQf",Rn="GeneralCard_position__3X6Ea",Fn="GeneralCard_email__U8cda",zn=function(e){var n=e.cardClicked,l=e.title,t=e.subtitle,o=e.children,i=e.description,d=e.customClass,a=void 0===d?On:d,r=e.customStyle;return u.createElement("div",{className:a,onClick:n,style:r},u.createElement("div",{className:Bn},u.createElement("div",{className:Un},u.createElement("p",{className:qn},l),u.createElement("p",{className:Fn},i),u.createElement("p",{className:Rn},t),o)))},Yn=l(5980),Gn=l(29937),Hn=l(1542),jn=l(35606),Wn=l(79544),Vn=l(98032),Qn=l(62169),Xn=l(13397),Jn=l(88346),Kn=(l(67055),l(71901),l(95007));var $n=(0,u.memo)((function(e){var n,l,o,d,s,c,v,m=e.step,_=e.isMandatoryError,y=e.nextButtonClicked,h=e.setIsMandatoryError,g=e.begunModule,Z=e.companyData,C=e.components,S=e.isEditing,M=e.companyUsersArray,x=e.setUsers,w=e.setPositions,k=void 0===w?function(){}:w,I=e.products,N=e.selectedComponent,P=e.goToNextStep,T=e.authenticatedUser,A=e.setIsCompleted,L=e.companyPositionsArray,D=(e.cart,e.blueprints),O=e.usersArray,B=(0,E.WidthProvider)(E.Responsive),U=(0,u.useState)(null===(n=null===N||void 0===N?void 0:N.is_complete)||void 0===n||n),q=(0,a.Z)(U,1)[0],R=[],F={margin:[0,0],allowOverlap:!1,containerPadding:[0,0,0,0],className:"layout",rowHeight:100,width:1e3,cols:{lg:12,md:10,sm:6,xs:4,xxs:2},onLayoutChange:function(){}},z=(null===m||void 0===m||null===(l=m.component_blueprints)||void 0===l?void 0:l.length)>0?null===m||void 0===m?void 0:m.component_blueprints.map((function(e,n){var l=e.selected_fields.find((function(e){return"Template"===e.data_type_name&&1==e.visible}));return l?u.createElement("div",{key:n},u.createElement(Tn.Z,{templateName:l.field_name,nextButtonClicked:y,isMandatoryError:_,blueprintIndex:n,setIsMandatoryError:h,component:e,companyData:Z,components:C,products:I,selectedComponent:N})):e.selected_fields.filter((function(e){return 1==e.visible})).length>0?u.createElement("div",{key:n,style:{margin:"30px 0 0 0"}},u.createElement(Nn,{nextButtonClicked:y,isMandatoryError:_,blueprintIndex:n,setIsMandatoryError:h,blueprints:D,component:e,companyData:Z,components:C,products:I,authenticatedUser:T,selectedComponent:N,companyUsersArray:M,companyPositionsArray:L,begunModule:g})):u.createElement("div",{key:n,className:r.emptyElementsSection})})):u.createElement("div",{className:r.emptyElementsSection}),Y=(0,u.useState)({currentBreakpoint:"lg",compactType:"vertical",mounted:!1,layouts:{lg:m.options.layout},editing:S}),G=(0,a.Z)(Y,2),H=G[0],j=G[1];return u.createElement("div",null,u.createElement(p.j3,{permissions:[p.po.processes.create]},u.createElement("button",{onClick:function(){R=H.layouts.lg.map((function(e){return(0,i.Z)((0,i.Z)({},e),{},{static:!1})})),j((0,i.Z)((0,i.Z)({},H),{},{layouts:{lg:R},editing:!H.editing}))},hidden:!H.editing},"Edit Layout"),u.createElement("button",{onClick:function(){var e=R.map((function(e){return(0,i.Z)((0,i.Z)({},e),{},{static:!0})}));(0,f.T5)({options:(0,i.Z)((0,i.Z)({},m.options),{},{layout:e})},m.id,!0).pipe((0,b.P)()).subscribe({next:function(n){j((0,i.Z)((0,i.Z)({},H),{},{layouts:{lg:e},editing:!H.editing}))},error:function(e){j((0,i.Z)((0,i.Z)({},H),{},{layouts:{lg:m.options.layout},editing:!H.editing}))}})},hidden:!H.editing},"Save Layout")),u.createElement(B,(0,t.Z)({},F,{layouts:H.layouts,onLayoutChange:function(e,n){R=n.lg,F.onLayoutChange(e,n)},measureBeforeMount:!1,useCSSTransforms:H.mounted,compactType:H.compactType,preventCollision:!H.compactType})),z,"product"===(null===(o=g.processModule.module)||void 0===o?void 0:o.options.outputTo)&&(null===m||void 0===m?void 0:m.is_end)&&u.createElement(Pn,{nextButtonClicked:y,isMandatoryError:_,setIsMandatoryError:h,component:{}}),(null===(d=g.processModule.module)||void 0===d?void 0:d.options.forSpecificUsers)&&(null===m||void 0===m?void 0:m.is_end)&&function(){var e;return u.createElement(p.jL,{ungrouped:!0,title:"Select users to share this item:",columned:!0,withAckButton:!1},u.createElement(yn.Cm,{id:"Users",tagEmplacement:"inlined",searchable:!1,items:O,groupedBy:"department",groupname:"department",triggerType:"chevron",initialSelectedValues:null===N||void 0===N||null===(e=N.shared_users)||void 0===e?void 0:e.map((function(e){return O.find((function(n){return n.value===e.id}))})),className:r.peoplePositionsSelect,inputClassName:r.peoplePositionsSelectInput,molclassname:r.peoplePositionsSelectMenuOverlay,moliclassname:r.peoplePositionsSelectMenuOverlayItem,onChange:function(e){e.length>0?x(null===e||void 0===e?void 0:e.map((function(e){return null===e||void 0===e?void 0:e.value}))):x([])}}))}(),(null===(s=g.processModule.module)||void 0===s?void 0:s.options.forSpecificUsers)&&(null===m||void 0===m?void 0:m.is_end)&&function(){var e;return u.createElement(p.jL,{ungrouped:!0,title:"Select positions to share this item:",columned:!0,withAckButton:!1},u.createElement(yn.Cm,{id:"Positions",tagEmplacement:"inlined",searchable:!1,items:L,groupedBy:"department",groupname:"department",triggerType:"chevron",initialSelectedValues:null===N||void 0===N||null===(e=N.shared_positions)||void 0===e?void 0:e.map((function(e){return L.find((function(n){return n.value===e.id}))})),className:r.peoplePositionsSelect,inputClassName:r.peoplePositionsSelectInput,molclassname:r.peoplePositionsSelectMenuOverlay,moliclassname:r.peoplePositionsSelectMenuOverlayItem,onChange:function(e){e.length>0?k(null===e||void 0===e?void 0:e.map((function(e){return null===e||void 0===e?void 0:e.value}))):k([])}}))}(),(null===m||void 0===m?void 0:m.is_end)&&(void 0===(null===N||void 0===N?void 0:N.is_complete)||0==(null===N||void 0===N?void 0:N.is_complete))&&u.createElement("div",{className:r.emptyElementsSection,style:{width:"260px",padding:"0px 0px 0px 20px"}},u.createElement(p.pd,{id:"draft",title:"Save as draft?",ungrouped:!0,withAckButton:!1,style:{margin:"20px 2.5% 10px 5px",width:"auto",display:""},value:!q,toggleSelected:function(e){A(!e)}})),(null===m||void 0===m||null===(c=m.pathway_steps)||void 0===c?void 0:c.length)>0&&function(){var e=m.pathway_steps.map((function(e){return{label:"".concat(e.name),value:e.id}})),n=M.map((function(e){return{label:"".concat(e.first_name," ").concat(e.last_name),value:e.id}}));return u.createElement("div",{className:r.emptyElementsSection,style:{width:"60%",padding:"20px 20px 20px 20px",height:"".concat(n.length*n.length>4?70:200,"px")}},u.createElement(nn,{visible:!0,mandatory:!1,items:e,onChange:function(e){P(e)},placeholder:"Continue to this step..."}))}(),(null===m||void 0===m||null===(v=m.pathway_processes)||void 0===v?void 0:v.length)>0&&function(){var e=m.pathway_processes.map((function(e){return{label:"".concat(e.name),value:e.id}})),n=M.map((function(e){return{label:"".concat(e.first_name," ").concat(e.last_name),value:e.id}}));return u.createElement("div",{className:r.emptyElementsSection,style:{width:"60%",padding:"20px 20px 20px 20px",height:"".concat(n.length*n.length>4?70:200,"px")}},u.createElement(nn,{visible:!0,mandatory:!1,items:e,onChange:function(){},placeholder:"Continue to this process..."}))}())})),el=u.forwardRef((function(e,n){var l=e.begunModule,t=e.allModules,s=e.companyData,c=e.selectedComponent,v=e.companyUsersArray,p=e.companyPositionsArray,m=e.print,f=e.components,_=void 0===f?[]:f,y=(0,u.useState)([]),h=(0,a.Z)(y,2),g=h[0],b=h[1],Z=(0,u.useState)(!1),C=(0,a.Z)(Z,2),E=C[0],S=C[1];(0,u.useEffect)((function(){var e=[];gn.Z(bn.Z("group"))(c.component_fields).map((function(n){e=[].concat((0,d.Z)(e),[{id:n.component_blueprint_id,selected_fields:Jn.Z(W.Z("group",n.group))(c.component_fields)}])}));var n=[];l.processModule.steps.length>0&&l.processModule.steps.map((function(o){o.component_blueprints.filter((function(e){var n,l;return 0==(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.asModuleList)||void 0==(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.asModuleList)})).map((function(a,r){var p,m,f,y=c.component_fields.filter((function(e){return e.component_blueprint_id===a.id})),h=!!y.find((function(e){return!(""===e.value||void 0===e.value||null===e.value)}));y.length>0&&a.selected_fields.filter((function(e){return 1==e.visible})).length>0&&(null!==a.options?!1!==a.options.allowMultipleInputs&&void 0!==a.options.allowMultipleInputs&&null!==a.options.allowMultipleInputs||(n=[].concat((0,d.Z)(n),[u.createElement("div",{key:n.length,style:{display:h?"":"none"}},u.createElement(J,{step:o,isInherited:!1,nextButtonClicked:function(){},isMandatoryError:!1,stepId:o.id,blueprintIndex:r,setIsMandatoryError:function(){},component:(0,i.Z)((0,i.Z)({},a),{},{created_date:c.created_date,values:null!==(p=null===(m=e.find((function(e){return e.id===a.id})))||void 0===m?void 0:m.selected_fields)&&void 0!==p?p:[]}),begunModule:l,allModules:t,companyData:s,components:e,allComponents:_,companyUsersArray:v}))])):n=[].concat((0,d.Z)(n),[u.createElement("div",{key:n.length},u.createElement(J,{step:o,isInherited:!1,nextButtonClicked:function(){},isMandatoryError:!1,stepId:o.id,blueprintIndex:r,setIsMandatoryError:function(){},component:(0,i.Z)((0,i.Z)({},a),{},{created_date:c.created_date,values:null===(f=e.find((function(e){return e.id===a.id})))||void 0===f?void 0:f.selected_fields}),begunModule:l,allModules:t,companyData:s,components:e,allComponents:_,companyUsersArray:v}))]))}))})),b(n)}),[c]);var M=u.createElement("div",null,(c.shared_users.length>0||c.shared_positions.length>0)&&u.createElement("div",{className:r.accordionContainer},u.createElement("p",{className:r.cardTitle},"Shares"),u.createElement("div",{style:{display:"flex"}},c.shared_positions.length>0&&u.createElement(G.default,{className:r.sharesTable,columns:["Position"],list:c.shared_positions.map((function(e){var n=p.find((function(n){return n.value===e.id}));return(0,o.Z)({},"Position",n.label)}))}),c.shared_users.length>0&&u.createElement(G.default,{className:r.sharesTable,columns:["User"],list:c.shared_users.map((function(e){var n=v.find((function(n){return n.id===e.id}));return(0,o.Z)({},"User","".concat(n.first_name," ").concat(n.last_name))}))}))));return u.createElement("div",{ref:n,style:{padding:m?"50px 120px 50px 100px":"",alignSelf:"center"}},m&&u.createElement("p",{className:r.detailLabel},s.display_name),u.createElement("p",{className:r.detailLabel,onClick:function(){return S(!E)}},"Transaction Info:"),u.createElement("p",{style:{display:E?"":"none"}},"ID: ".concat(c.id)),function(){var e,n,t,i,d,a,v,p,m,f=null===l||void 0===l||null===(e=l.processModule)||void 0===e?void 0:e.steps.find((function(e){return e.component_blueprints.filter((function(e){var n;return(null===(n=e.selected_fields)||void 0===n?void 0:n.filter((function(e){var n;return"item_code"===(null===(n=e.options)||void 0===n?void 0:n.mapToItem)})).length)>0})).length>0})),_=null!==(n=null===f||void 0===f||null===(t=f.component_blueprints)||void 0===t?void 0:t.find((function(e){var n;return(null===(n=e.selected_fields)||void 0===n?void 0:n.filter((function(e){var n;return"item_code"===(null===(n=e.options)||void 0===n?void 0:n.mapToItem)})).length)>0})))&&void 0!==n?n:void 0,y=_?null===(i=_.selected_fields)||void 0===i||null===(d=i.find((function(e){return"Template"===e.data_type_name})))||void 0===d?void 0:d.field_name:"",h=null===s||void 0===s||null===(a=s.misc_info)||void 0===a?void 0:a.templatesData.find((function(e){return e.name===y})),g=h?null===(v=h.config)||void 0===v?void 0:v.filter((function(e){return"Text"===e.value||"Number"===e.value||"Connector"===e.value})):_?_.selected_fields.filter((function(e){var n,l,t;return 1==e.visible&&!(""===(null===(n=e.options)||void 0===n?void 0:n.mapToItem)||void 0==(null===(l=e.options)||void 0===l?void 0:l.mapToItem)||null==(null===(t=e.options)||void 0===t?void 0:t.mapToItem))})):void 0;return c.component_items.length>0&&u.createElement("div",{className:r.accordionContainer},u.createElement("p",{className:r.cardTitle},"Items"),u.createElement(En.Z,{className:r.itemsTable,tableStyle:{minWidth:R.tq?"100px":"730px",width:R.tq?"100%":""},columns:g?g.map((function(e){return h?e.label:e.field_name})):["Product ID","Quantity","Price"],footer:g?g.map((function(e){var n,l,t;return h?"item_code"===e.key?"Totals":"".concat(Zn.Z((function(n,l){var t;return null!==(t=+n+ +l[e.key])&&void 0!==t?t:0}),0,null!==(n=c.component_items)&&void 0!==n?n:[])):"item_code"===(null===(l=e.options)||void 0===l?void 0:l.mapToItem)?"Totals":"".concat(Zn.Z((function(n,l){var t,o;return null!==(t=+n+ +l[null===(o=e.options)||void 0===o?void 0:o.mapToItem])&&void 0!==t?t:0}),0,null!==(t=c.component_items)&&void 0!==t?t:[]))})):["Totals","".concat(Zn.Z((function(e,n){var l;return null!==(l=+e+ +n.quantity)&&void 0!==l?l:0}),0,null!==(p=c.component_items)&&void 0!==p?p:[])),"".concat(Zn.Z((function(e,n){var l;return null!==(l=+e+ +n.value)&&void 0!==l?l:0}),0,null!==(m=c.component_items)&&void 0!==m?m:[]))],list:c.component_items.map((function(e){var n,l,t,i,d,a,s,c,v,p,m,f,_,y,b,Z,C,E,S,M,x,w,k,I,N,P,T,A=e.item_code,L=e.quantity,D=null!==(n=e.alt_value)&&void 0!==n?n:0,O=null!==(l=e.value)&&void 0!==l?l:0,B=null!==(t=e.total)&&void 0!==t?t:0;return void 0!=h?(y={},(0,o.Z)(y,null!==(i=null===(d=h.config.find((function(e){return"item_code"===e.key})))||void 0===d?void 0:d.label)&&void 0!==i?i:"Item Code",u.createElement("div",{className:r.templateInformation},A)),(0,o.Z)(y,null!==(a=null===(s=h.config.find((function(e){return"value"===e.key})))||void 0===s?void 0:s.label)&&void 0!==a?a:"Price",u.createElement("div",{className:r.templateInformation},O)),(0,o.Z)(y,null!==(c=null===(v=h.config.find((function(e){return"total"===e.key})))||void 0===v?void 0:v.label)&&void 0!==c?c:"Total",u.createElement("div",{className:r.templateInformation},B)),(0,o.Z)(y,null!==(p=null===(m=h.config.find((function(e){return"quantity"===e.key})))||void 0===m?void 0:m.label)&&void 0!==p?p:"Quantity",u.createElement("div",{className:r.templateInformation},L)),(0,o.Z)(y,null!==(f=null===(_=h.config.find((function(e){return"alt_value"===e.key})))||void 0===_?void 0:_.label)&&void 0!==f?f:"Discount",u.createElement("div",{className:r.templateInformation},D)),(0,o.Z)(y,"id",e.id),y):(T={},(0,o.Z)(T,null!==(b=null===(Z=g.find((function(e){var n;return"item_code"===(null===(n=e.options)||void 0===n?void 0:n.mapToItem)})))||void 0===Z?void 0:Z.field_name)&&void 0!==b?b:"Product ID",u.createElement("div",{className:r.templateInformation},A)),(0,o.Z)(T,null!==(C=null===(E=g.find((function(e){var n;return"value"===(null===(n=e.options)||void 0===n?void 0:n.mapToItem)})))||void 0===E?void 0:E.field_name)&&void 0!==C?C:"Price",u.createElement("div",{className:r.templateInformation},O)),(0,o.Z)(T,null!==(S=null===(M=g.find((function(e){var n;return"total"===(null===(n=e.options)||void 0===n?void 0:n.mapToItem)})))||void 0===M?void 0:M.field_name)&&void 0!==S?S:"Total",u.createElement("div",{className:r.templateInformation},B)),(0,o.Z)(T,null!==(x=null===(w=g.find((function(e){var n;return"quantity"===(null===(n=e.options)||void 0===n?void 0:n.mapToItem)})))||void 0===w?void 0:w.field_name)&&void 0!==x?x:"Quantity",u.createElement("div",{className:r.templateInformation},L)),(0,o.Z)(T,null!==(k=null===(I=g.find((function(e){var n;return"alt_value"===(null===(n=e.options)||void 0===n?void 0:n.mapToItem)})))||void 0===I?void 0:I.field_name)&&void 0!==k?k:"Discount",u.createElement("div",{className:r.templateInformation},D)),(0,o.Z)(T,null!==(N=null===(P=g.find((function(e){var n;return"alt_value"===(null===(n=e.options)||void 0===n?void 0:n.mapToItem)})))||void 0===P?void 0:P.field_name)&&void 0!==N?N:"Actual",u.createElement("div",{className:r.templateInformation},D)),(0,o.Z)(T,"id",e.id),T)}))}))}(),g,u.createElement(K,{component:c}),M)})),nl=(0,v.$j)((function(e){var n=e.flowReducer,l=n.begunModule,t=n.allModules,o=n.companyData,i=n.components,d=n.rememberPath,a=n.lastUpdates,u=n.companyUsersArray,r=n.products,s=n.transactions,c=n.companyProcesses,v=n.companyPositionsArray,p=n.cart,m=n.blueprints;return{begunModule:l,allModules:t,companyData:o,components:i,rememberPath:d,lastUpdates:a,companyUsersArray:u,products:r,transactions:s,companyProcesses:c,authenticatedUser:e.authReducer.authenticatedUser,companyPositionsArray:v,cart:p,blueprints:m}}),(function(e){return{onSetSelectedProcess:function(n){return e((0,g.Xu)(n))}}}))((function(e){var n,l,t,v,f,E,S,M,x,w,k,I,N,P,T,A,L,D,O,B,U,q,F,z,H,j,X,J,K,$,ee,ne,le,te,oe,ie,de,ae,ue,re,se,ce,ve,pe,me,fe,_e,ye,he,ge,be=e.navigateTo,Ze=e.begunModule,Ce=e.allModules,Ee=e.companyData,Se=e.components,Me=e.isEditing,xe=e.lastUpdates,we=e.companyUsersArray,ke=e.products,Ie=e.onSetSelectedProcess,Ne=e.children,Pe=e.authenticatedUser,Te=e.companyPositionsArray,Ae=e.cart,Le=e.blueprints,De=(0,u.useState)(1),Oe=(0,a.Z)(De,1)[0],Be=(0,u.useState)(!1),Ue=(0,a.Z)(Be,2),qe=Ue[0],Re=Ue[1],Fe=(0,u.useState)(!1),ze=(0,a.Z)(Fe,2),Ye=ze[0],Ge=ze[1],He=(0,u.useState)(""),je=(0,a.Z)(He,2),We=je[0],Ve=je[1],Qe=(0,u.useState)(!1),Xe=(0,a.Z)(Qe,2),Je=Xe[0],Ke=Xe[1],$e=(0,C.pQ)(),en=(0,a.Z)($e,2),ln=en[0],tn=en[1],on=(0,u.useState)(!1),an=(0,a.Z)(on,2),un=an[0],rn=an[1],sn=(0,u.useState)(1==(null===Ze||void 0===Ze||null===(n=Ze.processModule)||void 0===n?void 0:n.isUpdating)),cn=(0,a.Z)(sn,2),vn=cn[0],pn=cn[1],mn=(0,u.useState)(null!==(l=null===Ze||void 0===Ze||null===(t=Ze.processModule)||void 0===t?void 0:t.selectedComponent)&&void 0!==l?l:{}),fn=(0,a.Z)(mn,2),_n=fn[0],Zn=fn[1],Cn=(0,u.useState)(null===(v=null===_n||void 0===_n?void 0:_n.is_complete)||void 0===v||v),En=(0,a.Z)(Cn,2),Sn=En[0],Mn=En[1],xn=(0,u.useState)([]),wn=(0,a.Z)(xn,2),kn=wn[0],In=wn[1],Nn=(0,u.useState)([]),Pn=(0,a.Z)(Nn,2),Tn=Pn[0],Ln=Pn[1],On=(0,u.useState)(!1),Bn=(0,a.Z)(On,2),Un=Bn[0],qn=Bn[1],Rn=(0,u.useState)(!1),Fn=(0,a.Z)(Rn,2),nl=Fn[0],ll=Fn[1],tl=(0,u.useState)(!1),ol=(0,a.Z)(tl,2),il=ol[0],dl=ol[1],al=(0,u.useState)(!1),ul=(0,a.Z)(al,2),rl=ul[0],sl=ul[1],cl=(0,u.useState)(!1),vl=(0,a.Z)(cl,2),pl=vl[0],ml=vl[1],fl=(0,u.useState)(!1),_l=(0,a.Z)(fl,2),yl=_l[0],hl=_l[1],gl=(0,u.useState)(!1),bl=(0,a.Z)(gl,2),Zl=bl[0],Cl=bl[1],El=(0,u.useState)(!1),Sl=(0,a.Z)(El,2),Ml=Sl[0],xl=Sl[1],wl=(0,u.useState)(!1),kl=(0,a.Z)(wl,2),Il=kl[0],Nl=kl[1],Pl=(0,u.useState)([]),Tl=(0,a.Z)(Pl,2),Al=Tl[0],Ll=Tl[1],Dl=(0,u.useState)([]),Ol=(0,a.Z)(Dl,2),Bl=Ol[0],Ul=Ol[1],ql=(0,u.useState)([]),Rl=(0,a.Z)(ql,2),Fl=Rl[0],zl=Rl[1],Yl=(0,u.useState)({list:[],operator:"AND"}),Gl=(0,a.Z)(Yl,2),Hl=Gl[0],jl=Gl[1],Wl=(0,u.useState)([]),Vl=(0,a.Z)(Wl,2),Ql=Vl[0],Xl=Vl[1],Jl=(0,u.useState)([]),Kl=(0,a.Z)(Jl,2),$l=Kl[0],et=Kl[1],nt=(null===Ze||void 0===Ze||null===(f=Ze.processModule)||void 0===f||null===(E=f.steps)||void 0===E?void 0:E.length)>0?null===Ze||void 0===Ze||null===(S=Ze.processModule)||void 0===S?void 0:S.steps[Ze.processModule.stepIndex]:{},lt=(null===Ze||void 0===Ze||null===(M=Ze.processModule)||void 0===M||null===(x=M.steps)||void 0===x?void 0:x.length)>0?null===(w=Ze.processModule.steps[Ze.processModule.stepIndex])||void 0===w?void 0:w.pathway_steps:[],tt=(null===Ze||void 0===Ze||null===(k=Ze.processModule)||void 0===k||null===(I=k.steps)||void 0===I?void 0:I.length)>0?null===(N=Ze.processModule.steps[Ze.processModule.stepIndex])||void 0===N?void 0:N.pathway_processes:[],ot=(0,u.useRef)();(0,u.useEffect)((function(){var e=we.filter((function(e){return 0==e.departments.length})).map((function(e){return{label:"".concat(e.first_name," ").concat(e.last_name),value:e.id,department:"General",user:e}}));we.filter((function(e){return e.departments.length>0})).filter((function(n){n.departments.filter((function(l){e=[].concat((0,d.Z)(e),[{label:"".concat(n.first_name," ").concat(n.last_name),value:n.id,department:l.name,user:n}])}))})),Xl(e)}),[we]),(0,u.useEffect)((function(){var e,n,l,t;(null===Ze||void 0===Ze||null===(e=Ze.processModule)||void 0===e||null===(n=e.steps)||void 0===n?void 0:n.length)>0&&!Il&&(jl({list:[],operator:"AND"}),void 0!==(null===be||void 0===be?void 0:be.key)?Ll(vt(null===Ze||void 0===Ze||null===(l=Ze.processModule)||void 0===l||null===(t=l.module)||void 0===t?void 0:t.id,Se,be.value,be.key)):Ll(Se.filter((function(e){var n,l;return e.module_id===(null===Ze||void 0===Ze||null===(n=Ze.processModule)||void 0===n||null===(l=n.module)||void 0===l?void 0:l.id)}))))}),[null===Ze||void 0===Ze||null===(P=Ze.processModule)||void 0===P?void 0:P.steps,Se]),(0,u.useEffect)((function(){var e,n,l,t;(null===Ze||void 0===Ze||null===(e=Ze.processModule)||void 0===e||null===(n=e.steps)||void 0===n?void 0:n.length)>0&&!Il&&(void 0!==be.key||""!==be.key)&&Ll(vt(null===Ze||void 0===Ze||null===(l=Ze.processModule)||void 0===l||null===(t=l.module)||void 0===t?void 0:t.id,Se,be.value))}),[be]);var it=(0,u.useCallback)((function(){var e=!1;return nt.component_blueprints.filter((function(e){var n,l;return null===e.options||(!1===(null===(n=e.options)||void 0===n?void 0:n.allowMultipleInputs)||void 0===(null===(l=e.options)||void 0===l?void 0:l.allowMultipleInputs))})).some((function(e){var n;return!0===(null===(n=e.selected_fields)||void 0===n?void 0:n.filter((function(e){return"ID"!==e.data_type_name&&"Info"!==e.data_type_name&&"Notes"!==e.data_type_name&&"URL"!==e.data_type_name&&"Emails"!==e.data_type_name&&"Template"!==e.data_type_name})).some((function(e){var n;return!0===e.mandatory&&!0===e.visible&&(!e.value||(null===e||void 0===e||null===(n=e.value)||void 0===n?void 0:n.length)<1)})))}))&&(e=!0),!0===e?(Ge(!0),!0):(Ve(""),Ge(!1),!1)}),[nt]),dt=function(e){Ke(!0),it()&&!1===vn?ct():ut(e)},at=function(e){ln.components=[],ln.items=[],ln.currentStep={},ln.newStepComponents=[],Ze.processModule.steps.filter((function(e){return e.component_blueprints.filter((function(e){return e.selected_fields.filter((function(e){return e.value=void 0}))}))})),Ze.processModule.isUpdating=!1,pn(!1),rn(!1),Ke(!0),ut(e),Ee.start=!1,(0,y.aK)().pipe((0,b.P)()).subscribe({next:function(){}})},ut=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Ke(!1),Ge(!1),Re(!1);var l={};if(void 0===e){if(void 0===(l=Ze.processModule.steps[Ze.processModule.stepIndex+1]))return void h.h.dispatch((0,g.Xc)({show:!0,message:"Misconfigured next step, please contact your administrator",color:"red",bottom:!0}));var t;tn({action:C._U.setCurrentStep,value:l}),h.h.dispatch((0,g.q4)((0,i.Z)((0,i.Z)({},Ze.processModule),{},{stepIndex:Ze.processModule.stepIndex+1,back_id:n||null===ln||void 0===ln||null===(t=ln.currentStep)||void 0===t?void 0:t.id})))}else{if(void 0==(l=Ze.processModule.steps.find((function(n){return n.id===e})))){var o;l=Ze.processModule.steps[Ze.processModule.stepIndex+1],h.h.dispatch((0,g.q4)((0,i.Z)((0,i.Z)({},Ze.processModule),{},{stepIndex:Ze.processModule.stepIndex+1,back_id:n||null===ln||void 0===ln||null===(o=ln.currentStep)||void 0===o?void 0:o.id})))}else{var a,u,r,s=Ze.processModule.steps[(null===(a=l)||void 0===a?void 0:a.rank)-1];if(void 0===s)return void h.h.dispatch((0,g.Xc)({show:!0,message:"Misconfigured next step, please contact your administrator",color:"red",bottom:!0}));h.h.dispatch((0,g.q4)((0,i.Z)((0,i.Z)({},Ze.processModule),{},{stepIndex:(null===(u=l)||void 0===u?void 0:u.rank)-1,back_id:n||null===ln||void 0===ln||null===(r=ln.currentStep)||void 0===r?void 0:r.id})))}tn({action:C._U.setCurrentStep,value:l})}var c=ln.newStepComponents.filter((function(e){return null===e.options||(void 0===e.allowMultipleInputs||!1===e.options.allowMultipleInputs)}));tn({action:C._U.setComponents,value:[].concat((0,d.Z)(ln.components.filter((function(e){return c.every((function(n){return n.id!==e.id}))}))),(0,d.Z)(hn.Z((function(e){return e.selected_fields.filter((function(e){return""===e.value})).length>0}),c)))}),tn({action:C._U.setModuleNewStepComponents,value:l.component_blueprints.filter((function(e){return e.selected_fields.filter((function(e){return"Status"===e.data_type_name||"ID"===e.data_type_name||"Value"===e.data_type_name})).length>0}))})},rt=function(){var e,n,l,t,o,a,u,r,s,c,v;if(it())return Ve("There are mandatory fields to be completed!"),void Re(!1);var p,f=function(){tn({action:C._U.setModuleItems,value:[]}),tn({action:C._U.setComponents,value:[]}),tn({action:C._U.addModuleComponents,value:[]}),tn({action:C._U.setModuleNewStepComponents,value:[]}),at(Ze.processModule.steps[0].id)},y=ln.newStepComponents.filter((function(e){var n,l;return null===e.options||(!1===(null===(n=e.options)||void 0===n?void 0:n.allowMultipleInputs)||void 0===(null===(l=e.options)||void 0===l?void 0:l.allowMultipleInputs))})),b=[].concat((0,d.Z)(ln.components.filter((function(e){return y.every((function(n){return n.id!==e.id}))}))),(0,d.Z)(hn.Z((function(e){return e.selected_fields.filter((function(e){return""===e.value})).length>0}),y))),Z=null,E=[],S="",M="",x=!1;b.map((function(e,n){e.selected_fields.filter((function(e){return"Component"===e.data_type_name||"Filters"===e.data_type_name})).map((function(e,l){var t;if(null!==e.value&&void 0!==e.value&&1!=(null===(t=e.options)||void 0===t?void 0:t.skip)){var o,a;E=[].concat((0,d.Z)(E),[(0,i.Z)((0,i.Z)({},e),{},{index:l,group:n})]),S=e.value;var u=null===(o=Se.find((function(n){return n.component_fields.filter((function(n){var l;return n.component_blueprint_id===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.component_id)&&(null===n||void 0===n?void 0:n.value)===S})).length>0})))||void 0===o||null===(a=o.component_fields.find((function(e){return"Email Recipient"===e.data_type_name})))||void 0===a?void 0:a.value;u&&(p=u)}})),e.selected_fields.filter((function(e){return!("Component"===e.data_type_name||"Filters"===e.data_type_name)})).map((function(e,l){var t,o;if(null!==e.value&&void 0!==e.value&&1!=(null===(t=e.options)||void 0===t?void 0:t.skip)){if("ID"===(null===e||void 0===e?void 0:e.data_type_name))vn?E=[].concat((0,d.Z)(E),[(0,i.Z)((0,i.Z)({},e),{},{index:l,group:n})]):(E=[].concat((0,d.Z)(E),[(0,i.Z)((0,i.Z)({},e),{},{index:l,group:n,value:"".concat(null===e||void 0===e?void 0:e.options.id).concat(null===(null===Ee||void 0===Ee?void 0:Ee.misc_info)?1:null!==(o=null===Ee||void 0===Ee?void 0:Ee.misc_info[null===e||void 0===e?void 0:e.field_name])&&void 0!==o?o:1)})]),Z="".concat(e.field_name));else if("Value"===(null===e||void 0===e?void 0:e.data_type_name)){var a;E=[].concat((0,d.Z)(E),[(0,i.Z)((0,i.Z)({},e),{},{index:l,value:null===e||void 0===e||null===(a=e.options)||void 0===a?void 0:a.value,group:n})])}else if("Email Recipient"===(null===e||void 0===e?void 0:e.data_type_name))E=[].concat((0,d.Z)(E),[(0,i.Z)((0,i.Z)({},e),{},{index:l,value:e.value.replace(/ /g,""),group:n})]);else if("Lookup"===e.data_type_name||"Product Lookup"===e.data_type_name)E=(0,d.Z)(E);else if("Status"===e.data_type_name&&"Draft"===e.value&&1==Sn)x=!0,E=[].concat((0,d.Z)(E),[(0,i.Z)((0,i.Z)({},e),{},{index:l,value:"New",group:n})]);else if("Formula"===e.data_type_name){var u=vn?(0,dn.LV)(null===e||void 0===e?void 0:e.options,_n.component_fields.filter((function(n){var l;return null===(l=e.options)||void 0===l?void 0:l.list.includes(n.field_name)})),b,ln.items):e.value;E=[].concat((0,d.Z)(E),[(0,i.Z)((0,i.Z)({},e),{},{index:l,value:u.toString(),group:n})])}else if("output"!==e.data_type){var r,s,c,v,m;if("People"===e.data_type_name)if(!0===(null===(m=e.options)||void 0===m?void 0:m.email)){var f,_,y=null===(f=Ql.find((function(n){return n.label===(null===e||void 0===e?void 0:e.value)})))||void 0===f||null===(_=f.user)||void 0===_?void 0:_.email;M=y?M.concat(M.length>0?",".concat(y):y):M,e.email=void 0}"email"===(null===e||void 0===e||null===(r=e.options)||void 0===r?void 0:r.actionToPerform2)&&null!==e&&void 0!==e&&null!==(s=e.options)&&void 0!==s&&null!==(c=s.valueToMatch2)&&void 0!==c&&null!==(v=c.split(","))&&void 0!==v&&v.includes(null===e||void 0===e?void 0:e.value)&&p&&(x=!0,M=M.concat(M.length>0?",".concat(p):p)),E=[].concat((0,d.Z)(E),[(0,i.Z)((0,i.Z)({},e),{},{index:l,group:n})])}}else"Status"===(null===e||void 0===e?void 0:e.data_type_name)&&(E=[].concat((0,d.Z)(E),1==Sn?[(0,i.Z)((0,i.Z)({},e),{},{index:l,value:"New",group:n})]:[(0,i.Z)((0,i.Z)({},e),{},{index:l,value:"Draft",group:n})]))}))}));var w,k,I,N,P,T,A,L,D,O,B="";(null===(e=Ze.processModule)||void 0===e||null===(n=e.module)||void 0===n||null===(l=n.options)||void 0===l||null===(t=l.title)||void 0===t?void 0:t.length)>0?(null===(w=Ze.processModule)||void 0===w||null===(k=w.module)||void 0===k||null===(I=k.options)||void 0===I||null===(N=I.title)||void 0===N||N.map((function(e){if("Info"!==e){var n,l,t,o,i;B=""===B?"".concat(null!==(n=null===(l=E.find((function(n){return n.field_name===e})))||void 0===l?void 0:l.value)&&void 0!==n?n:""):"".concat(null!==(t=B)&&void 0!==t?t:"","  ").concat(null!==(o=null===(i=E.find((function(n){return n.field_name===e})))||void 0===i?void 0:i.value)&&void 0!==o?o:"")}else{var d=Ze.processModule.steps.find((function(e){var n;return(null===(n=e.component_blueprints.filter((function(e){var n;return(null===(n=e.selected_fields.filter((function(e){return"Info"===e.data_type_name})))||void 0===n?void 0:n.length)>0})))||void 0===n?void 0:n.length)>0}));if(void 0!==d){var a,u,r,s,c,v,p,m,f,_=null===(a=d.component_blueprints)||void 0===a||null===(u=a.find((function(e){var n;return(null===(n=e.selected_fields.filter((function(e){return"Info"===e.data_type_name})))||void 0===n?void 0:n.length)>0})).selected_fields)||void 0===u?void 0:u.find((function(e){return"Info"===e.data_type_name})),y=Se.find((function(e){var n;return(null===(n=e.component_fields.filter((function(e){return e.component_blueprint_id===_.options.component_id&&e.value===S})))||void 0===n?void 0:n.length)>0}));if(y)if((null===_||void 0===_||null===(r=_.options)||void 0===r||null===(s=r.list)||void 0===s?void 0:s.length)>0)B=""===B?"".concat(null!==(c=null===(v=y.component_fields.find((function(e){var n;return e.field_name===(null===_||void 0===_||null===(n=_.options)||void 0===n?void 0:n.list[0])})))||void 0===v?void 0:v.value)&&void 0!==c?c:""):"".concat(null!==(p=B)&&void 0!==p?p:"","  ").concat(null!==(m=null===(f=y.component_fields.find((function(e){var n;return e.field_name===(null===_||void 0===_||null===(n=_.options)||void 0===n?void 0:n.list[0])})))||void 0===f?void 0:f.value)&&void 0!==m?m:"")}}})),null!==(P=Ze.processModule)&&void 0!==P&&null!==(T=P.module)&&void 0!==T&&null!==(A=T.options)&&void 0!==A&&A.title.find((function(e){return"UUID"===e}))&&(B="".concat(vn?_n.id:(0,dn.mR)()))):B=vn?_n.id:(0,dn.mR)();var U,q,R,F,z={};if(!0===(null===(o=Ze.processModule)||void 0===o||null===(a=o.module)||void 0===a||null===(u=a.options)||void 0===u?void 0:u.emailOutputs)){var Y,G,H,j,W=Ze.processModule.steps.find((function(e){var n;return(null===(n=e.component_blueprints.filter((function(e){var n;return(null===(n=e.selected_fields.filter((function(e){return"Info"===e.data_type_name&&1==e.options.email})))||void 0===n?void 0:n.length)>0})))||void 0===n?void 0:n.length)>0}));if(void 0!==W){var V,Q,X=null===(V=W.component_blueprints)||void 0===V||null===(Q=V.find((function(e){var n;return(null===(n=e.selected_fields.filter((function(e){var n;return"Info"===e.data_type_name&&1==(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.email)})))||void 0===n?void 0:n.length)>0})).selected_fields)||void 0===Q?void 0:Q.find((function(e){var n;return"Info"===e.data_type_name&&!0===(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.email)})),J=Se.find((function(e){var n;return(null===(n=e.component_fields.filter((function(e){return e.component_blueprint_id===X.options.component_id&&e.value===S})))||void 0===n?void 0:n.length)>0}));J&&(D=X.id,L=J.id)}if(void 0!==(W=Ze.processModule.steps.find((function(e){var n;return!0===e.is_end&&(null===(n=e.component_blueprints.filter((function(e){var n;return(null===(n=e.selected_fields.filter((function(e){return"Emails"===e.data_type_name})))||void 0===n?void 0:n.length)>0})))||void 0===n?void 0:n.length)>0}))))(null===(H=W.component_blueprints)||void 0===H?void 0:H.find((function(e){var n;return(null===(n=e.selected_fields.filter((function(e){return"Emails"===e.data_type_name})))||void 0===n?void 0:n.length)>0}))).selected_fields.filter((function(e){return"Emails"===e.data_type_name})).filter((function(e){var n;E.find((function(n){return n.value===e.options.valueToMatch&&n.field_name===e.options.fieldToMatch}))&&(p&&(O=e,x=!0,!0===(null===(n=e.options)||void 0===n?void 0:n.copyEmailRecip)&&(M=M.concat(M.length>0?",".concat(p):p))))}));if(M=null!==(Y=M.split(","))&&void 0!==Y?Y:[],($l.length>0||M.length>0)&&(M=vn?!0===x?[].concat((0,d.Z)($l),(0,d.Z)(M)):(0,d.Z)($l):[].concat((0,d.Z)($l),(0,d.Z)(M))),M.length>0&&(z={emailTo:M}),D&&L&&(z=(0,i.Z)((0,i.Z)({},z),{},{info:D,target:L})),(null===(G=O)||void 0===G?void 0:G.id.length)>0)z=(0,i.Z)((0,i.Z)({},z),{},{template:null===(j=O)||void 0===j?void 0:j.id})}"product"!==(null===(r=Ze.processModule)||void 0===r||null===(s=r.module)||void 0===s||null===(c=s.options)||void 0===c?void 0:c.outputTo)||vn||null!==ln&&void 0!==ln&&null!==(U=ln.newProduct)&&void 0!==U&&U.name&&null!==ln&&void 0!==ln&&null!==(q=ln.newProduct)&&void 0!==q&&q.product_code&&(0,_.ry)(null===ln||void 0===ln||null===(R=ln.newProduct)||void 0===R?void 0:R.name,null===ln||void 0===ln||null===(F=ln.newProduct)||void 0===F?void 0:F.product_code).subscribe({error:function(e){},next:function(){ll(!0),h.h.dispatch((0,g.C2)((0,i.Z)((0,i.Z)({},xe),{},{products:0})))},complete:function(){}});(null===(v=E)||void 0===v?void 0:v.length)>0?(ll(!0),vn?(_n.options=z,(0,m.KL)((0,i.Z)((0,i.Z)({},_n),{},{selected_fields:(0,d.Z)(E),component_items:ln.items}),_n.id,kn,B,Sn,Tn).subscribe({error:function(e){},next:function(){f()},complete:function(){ll(!1)}})):(0,m.LM)({id:b[0].id,selected_fields:(0,d.Z)(E),component_items:ln.items,options:z},"",Ze.processModule.module_id,kn,B,Sn,Tn).subscribe({next:function(e){var n,l,t,o;null!==Z&&st(Z),xl((null===Ze||void 0===Ze||null===(n=Ze.processModule)||void 0===n||null===(l=n.module)||void 0===l||null===(t=l.options)||void 0===t||null===(o=t.message)||void 0===o?void 0:o.length)>0&&1==e.is_complete),h.h.dispatch((0,g.RV)({})),f()},error:function(e){},complete:function(){ll(!1)}})):h.h.dispatch((0,g.Xc)({show:!0,message:"There are no items to be saved",color:"red"}))},st=function(e){if(null!=e){var n,l=null===(null===Ee||void 0===Ee?void 0:Ee.misc_info)?1:null!==(n=null===Ee||void 0===Ee?void 0:Ee.misc_info[e])&&void 0!==n?n:1;ll(!0),(0,y.x5)({misc_info:(0,i.Z)((0,i.Z)({},Ee.misc_info),{},(0,o.Z)({},e,parseInt(l)+1))}).pipe((0,b.P)()).subscribe({})}},ct=function(){Ve("There are mandatory fields to be completed!"),Re(!1)},vt=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],l=arguments.length>2?arguments[2]:void 0,t=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],i=n.filter((function(n){return n.module_id===e})).filter((function(e){var n;return o.length>0?o.includes(e.id):""===l?e:e.title.includes(l)||(null===(n=e.component_fields.filter((function(e){var n,o,i,d,a;return"Component"===e.data_type_name?null===(n=Se.find((function(n){var l;return(null===(l=n.component_fields.filter((function(n){return n.field_name===e.options.output&&n.component_blueprint_id===e.options.component_id&&n.value===(null===e||void 0===e?void 0:e.value)})))||void 0===l?void 0:l.length)>0})))||void 0===n?void 0:n.component_fields.find((function(n){return e.options.names.includes(n.field_name)})).value.includes(l):void 0!==t?("date"===e.data_type?null===(o=Q()(new Date(null===e||void 0===e?void 0:e.value)))||void 0===o?void 0:o.format("DD MMM YYYY").includes(l):null===e||void 0===e||null===(i=e.value)||void 0===i?void 0:i.includes(l))&&e.field_name===t:"date"===e.data_type?null===(d=Q()(new Date(null===e||void 0===e?void 0:e.value)))||void 0===d?void 0:d.format("DD MMM YYYY").includes(l):null===e||void 0===e||null===(a=e.value)||void 0===a?void 0:a.includes(l)})))||void 0===n?void 0:n.length)>0}));return i},pt=function(e){var n,l,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Al,a=jn.Z([Wn.Z(Vn.Z("created_date"))])(t).map((function(n){var l,t,d,a,u,r={};e.list.map((function(e){var l=n.component_fields.find((function(n){return n.field_name===e}));if(void 0!=l)if("People"===l.data_type_name)r=(0,i.Z)((0,i.Z)({},r),{},(0,o.Z)({},e,l.value));else if("Date"===l.data_type_name){var t,d=new Date(null===l||void 0===l||null===(t=l.value)||void 0===t?void 0:t.split(",")[0]);r=(0,i.Z)((0,i.Z)({},r),{},(0,o.Z)({},e,Q()(d).format("DD MMM YYYY")))}else if("Component"===l.data_type_name){var a;r=(0,i.Z)((0,i.Z)({},r),{},(0,o.Z)({},e,R.tq?"".concat(null===l||void 0===l?void 0:l.value.slice(1,20)):"".concat(null===l||void 0===l?void 0:l.value))),null===(a=Se.find((function(e){var n;return(null===(n=e.component_fields.filter((function(e){return e.field_name===l.options.output&&e.component_blueprint_id===l.options.component_id&&e.value===(null===l||void 0===l?void 0:l.value)})))||void 0===n?void 0:n.length)>0})))||void 0===a||a.component_fields.filter((function(e){r=(0,i.Z)((0,i.Z)({},r),{},(0,o.Z)({},e.field_name,R.tq?e.value.slice(1,20):e.value))}))}else if("Filters"===l.data_type_name){var u;r=(0,i.Z)((0,i.Z)({},r),{},(0,o.Z)({},e,R.tq?"".concat(null===l||void 0===l?void 0:l.value.slice(1,20)):"".concat(null===l||void 0===l?void 0:l.value))),null===(u=Se.find((function(e){var n;return(null===(n=e.component_fields.filter((function(e){return e.field_name===l.options.output&&e.component_blueprint_id===l.options.component_id&&e.value===(null===l||void 0===l?void 0:l.value)})))||void 0===n?void 0:n.length)>0})))||void 0===u||u.component_fields.filter((function(e){r=(0,i.Z)((0,i.Z)({},r),{},(0,o.Z)({},e.field_name,R.tq?e.value.slice(1,20):e.value))}))}else if("Status"===l.data_type_name)r=0==n.is_complete?(0,i.Z)((0,i.Z)({},r),{},(0,o.Z)({},e,"Draft")):(0,i.Z)((0,i.Z)({},r),{},(0,o.Z)({},e,"".concat(null===l||void 0===l?void 0:l.value)));else{var s,c;r=(0,i.Z)((0,i.Z)({},r),{},(0,o.Z)({},e,R.tq?null===l||void 0===l||null===(s=l.value)||void 0===s?void 0:s.slice(1,20).split(",")[0]:null===l||void 0===l||null===(c=l.value)||void 0===c?void 0:c.split(",")[0]))}})),(null===n||void 0===n||null===(l=n.component_items)||void 0===l?void 0:l.length)>0&&(r=(0,i.Z)((0,i.Z)({},r),{},(0,o.Z)({},"Total Qty",n.component_items.reduce((function(e,n){return e+ +n.quantity}),0)))),(null===n||void 0===n?void 0:n.shared_positions.length)>0&&(r=(0,i.Z)((0,i.Z)({},r),{},{Shares:null===n||void 0===n?void 0:n.shared_positions.map((function(e){var n;return null===(n=Te.find((function(n){return n.value===e.id})))||void 0===n?void 0:n.label})).toString()}));var s=new Date(n.created_date);return r=(0,i.Z)((0,i.Z)({},r),{},(a={id:n.id},(0,o.Z)(a,"Created By","".concat(null===n||void 0===n||null===(t=n.created_by)||void 0===t?void 0:t.first_name," ").concat(null===n||void 0===n||null===(d=n.created_by)||void 0===d?void 0:d.last_name)),(0,o.Z)(a,"Created Date",Q()(s).format("DD MMM YYYY")),(0,o.Z)(a,"Title",n.title),(0,o.Z)(a,"items",n.component_items),a)),null===e||void 0===e||null===(u=e.reports)||void 0===u||u.filter((function(e){return"Formula"===e.data_type_name})).map((function(e){var l=(0,dn.LV)(e.options,e.options.list.map((function(e){var n;return{value:null!==(n=r[e])&&void 0!==n?n:0}})),Se.filter((function(e){var n,l;return e.module_id===(null===Ze||void 0===Ze||null===(n=Ze.processModule)||void 0===n||null===(l=n.module)||void 0===l?void 0:l.id)})),null===n||void 0===n?void 0:n.component_items);r=(0,i.Z)((0,i.Z)({},r),{},(0,o.Z)({},e.field_name,"".concat(l)))})),r}));null===e||void 0===e||null===(n=e.reports)||void 0===n||n.filter((function(e){return"List Filter"===e.data_type_name})).map((function(e){a=a.filter((function(n){var l,t;return n[null===(l=e.options)||void 0===l?void 0:l.field]===(null===(t=e.options)||void 0===t?void 0:t.value)}))}));var u=null===e||void 0===e||null===(l=e.reports)||void 0===l?void 0:l.find((function(e){return"Transaction List"===e.data_type_name}));if(u){var r=[];a.map((function(e){e.items.filter((function(n){var l=(0,i.Z)({},e);Object.keys(u.options.map).map((function(e){l[u.options.map[e]]=n[e]})),r=[].concat((0,d.Z)(r),[l])})),delete e.items})),a=r}return a},mt=function(){return(0,d.Z)(new Set(Bl.filter((function(e){return void 0!==e.Status})).map((function(e){return e.Status})))).map((function(e){return{label:e,value:e}}))},ft=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Bl,l=JSON.parse(JSON.stringify(n));e.filter((function(e,t){"status"===e.type?l="OR"===Hl.operator?[].concat((0,d.Z)(0==t?[]:l),(0,d.Z)(n.filter((function(n){return n.Status===e.value})))):l.filter((function(n){return n.Status===e.value})):"user"===e.type?l="OR"===Hl.operator?[].concat((0,d.Z)(0==t?[]:l),(0,d.Z)(n.filter((function(n){return n["Created By"]===e.label})))):l.filter((function(n){return n["Created By"]===e.label})):"fields"===e.type&&(l="OR"===Hl.operator?[].concat((0,d.Z)(0==t?[]:l),(0,d.Z)(n.filter((function(n){return n[e.filter]===e.value})))):l.filter((function(n){return n[e.filter]===e.value})))})),Ul(l)},_t=function(){var e;return u.createElement("div",{style:{display:""}},u.createElement(nn,{value:null!==(e=Hl.operator)&&void 0!==e?e:"AND",className:r.dropdownSelectOperation,items:[{label:"AND",value:"AND"},{label:"OR",value:"OR"}],onChange:function(e){jl((0,i.Z)((0,i.Z)({},Hl),{},{operator:e}))}}))},yt=function(){return u.createElement("div",{style:{alignSelf:"flex-end",display:nt.component_blueprints.filter((function(e){var n;return 1==(null===(n=e.options)||void 0===n?void 0:n.asReport)})).length>0?"flex":"none"}},u.createElement(An.Z,{light:!0,clicked:function(){Il?(jl({list:[],operator:"AND"}),Ll(Se.filter((function(e){var n,l;return e.module_id===(null===Ze||void 0===Ze||null===(n=Ze.processModule)||void 0===n||null===(l=n.module)||void 0===l?void 0:l.id)})))):Ll([]),zl([]),Nl(!Il)},style:Il?{height:"36px"}:{},icon:u.createElement("img",{src:Il?s.hFT:c.aRA})}),1==Il&&u.createElement(u.Fragment,null,u.createElement(nn,{className:r.dropdownSelectReport,items:nt.component_blueprints.filter((function(e){var n,l,t;return 1==(null===(n=e.options)||void 0===n?void 0:n.asReport)&&(void 0===(null===(l=e.options)||void 0===l?void 0:l.showOnly)||0==(null===(t=e.options)||void 0===t?void 0:t.showOnly.length)||Pe.positions.filter((function(n){var l,t;return null===(l=e.options)||void 0===l||null===(t=l.showOnly)||void 0===t?void 0:t.includes(n.id)})).length>0)})).map((function(e){return{label:e.name,value:e.id,blueprint:e}})),visible:!0,onChange:function(e){Ll(Se.filter((function(e){var n,l;return e.module_id===(null===Ze||void 0===Ze||null===(n=Ze.processModule)||void 0===n||null===(l=n.module)||void 0===l?void 0:l.id)})));var n=[];jn.Z([Xn.Z(Vn.Z("index"))])(nt.component_blueprints.find((function(n){return n.id===e})).selected_fields.filter((function(e){return 1==e.visible}))).map((function(e){n=[].concat((0,d.Z)(n),[e.field_name]),"Info"===e.data_type_name?e.options.list.map((function(e){return n=[].concat((0,d.Z)(n),[e])})):"Transaction List"===e.data_type_name&&Object.values(e.options.map).map((function(e){return n=[].concat((0,d.Z)(n),[e])}))})),jl({list:(0,d.Z)(new Set(n)),title:nt.component_blueprints.find((function(n){return n.id===e})).name,reports:jn.Z([Wn.Z(Vn.Z("index"))])(nt.component_blueprints.find((function(n){return n.id===e})).selected_fields).map((function(e){return{field_name:e.field_name,data_type_name:e.data_type_name,options:e.options}})),operator:"AND"}),Ul(pt({list:(0,d.Z)(new Set(n)),title:nt.component_blueprints.find((function(n){return n.id===e})).name,reports:jn.Z([Wn.Z(Vn.Z("index"))])(nt.component_blueprints.find((function(n){return n.id===e})).selected_fields).map((function(e){return{field_name:e.field_name,data_type_name:e.data_type_name,options:e.options}})),operator:"AND"},Se.filter((function(e){var n,l;return e.module_id===(null===Ze||void 0===Ze||null===(n=Ze.processModule)||void 0===n||null===(l=n.module)||void 0===l?void 0:l.id)}))))},placeholder:"Reports"})))},ht=function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.keys(n[0]),t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null===(e=Ze.processModule.module)||void 0===e?void 0:e.name;return u.createElement(An.Z,{light:!0,title:(null===Hl||void 0===Hl?void 0:Hl.title)&&"Export as file",clicked:function(){var e,i,a,u=Il?l:1==(null===(e=Ze.processModule.module)||void 0===e||null===(i=e.options)||void 0===i?void 0:i.isMaster)?[].concat((0,d.Z)(l),["Shares","Title"]):l,r=Kn.utils.book_new(),s=Kn.utils.json_to_sheet([]);Kn.utils.sheet_add_aoa(s,[u]),Kn.utils.sheet_add_json(s,n.map((function(e){return Object.assign.apply(Object,[{}].concat((0,d.Z)(u.map((function(n){return(0,o.Z)({},n,e[n])})))))})),{origin:"A2",skipHeader:!0}),Kn.utils.book_append_sheet(r,s,"".concat(null===(a=Ze.processModule.module)||void 0===a?void 0:a.name)),(0,Kn.writeFile)(r,"".concat(t).concat((0,V.now)(),".xlsx"))},cicon:u.createElement("img",{src:c.so})},u.createElement("img",{src:c.so}))},gt=null===_n||void 0===_n||null===(T=_n.component_fields)||void 0===T||null===(A=T.find((function(e){return"Status"===e.data_type_name})))||void 0===A?void 0:A.value,bt=(null===Ze||void 0===Ze||null===(L=Ze.processModule)||void 0===L||null===(D=L.steps)||void 0===D?void 0:D.length)>0?null===Ze||void 0===Ze||null===(O=Ze.processModule)||void 0===O||null===(B=O.steps)||void 0===B||null===(U=B.find((function(e){return(null===e||void 0===e?void 0:e.component_blueprints.filter((function(e){return e.selected_fields.filter((function(e){return"Status"===e.data_type_name})).length>0})).length)>0})))||void 0===U||null===(q=U.component_blueprints.find((function(e){var n;return(null===(n=e.selected_fields.filter((function(e){return"Status"===e.data_type_name})))||void 0===n?void 0:n.length)>0})))||void 0===q||null===(F=q.options)||void 0===F?void 0:F.showOnly:void 0;return u.createElement("div",{className:r.processStepHost,style:e.style},u.createElement("div",{className:r.centeredCardMargin,"app-variant-is-mobile":R.tq?"true":"false"},1==(null===nt||void 0===nt?void 0:nt.rank)&&u.createElement(zn,{title:null===Ze||void 0===Ze||null===(z=Ze.processModule)||void 0===z||null===(H=z.module)||void 0===H?void 0:H.name,subtitle:null===Ze||void 0===Ze||null===(j=Ze.processModule)||void 0===j?void 0:j.description,customStyle:{width:R.tq?"100%":"80%",minWidth:R.tq?"100px":"1000px"},cardClicked:function(){Ie(null===Ze||void 0===Ze?void 0:Ze.processModule),dl(!il)}})),il&&1==(null===nt||void 0===nt?void 0:nt.rank)&&u.createElement("div",{className:r.centeredCardMargin,"app-variant-is-mobile":R.tq?"true":"false"},u.createElement(zn,{title:"Steps:",customStyle:{width:R.tq?"100%":"80%",minWidth:R.tq?"100px":"1000px"}},u.createElement(Gn.FZ,null,u.createElement(Yn.Z,null)))),Ne,u.createElement("div",{className:r.centeredCardMargin,"app-variant-is-mobile":R.tq?"true":"false"},1===Oe&&void 0===(null===nt||void 0===nt?void 0:nt.component_blueprints)?u.createElement("div",{className:r.centeredSpinner},u.createElement(p.$j,{size:80,type:"ThreeDots"})):(null===nt||void 0===nt||null===(X=nt.component_blueprints)||void 0===X?void 0:X.filter((function(e){var n;return 1==(null===(n=e.options)||void 0===n?void 0:n.asModuleList)})).length)>0?null===nt||void 0===nt||null===(J=nt.component_blueprints)||void 0===J?void 0:J.filter((function(e){var n,l,t;return 1==e.options.asModuleList&&(Pe.positions.filter((function(n){var l,t;return null===(l=e.options)||void 0===l||null===(t=l.showOnly)||void 0===t?void 0:t.includes(n.id)})).length>0||0==(null===(n=e.options)||void 0===n||null===(l=n.showOnly)||void 0===l?void 0:l.length)||void 0===(null===(t=e.options)||void 0===t?void 0:t.showOnly))})).map((function(e,n){return u.createElement(G.default,{key:n,className:r.listContainer,isReport:Il,"app-variant-is-mobile":R.tq?"true":"false",title:Il?"Reports":null===nt||void 0===nt?void 0:nt.name,columns:Il?Hl.list:jn.Z([Xn.Z(Vn.Z("index"))])(e.selected_fields.filter((function(e){return 1==e.visible}))).map((function(e){return"Info"===e.data_type_name?e.options.list[0]:e.field_name})),list:Il?Bl:pt({list:e.selected_fields.filter((function(e){return 1==e.visible})).map((function(e){return e.field_name}))}),addClicked:function(){at(),Zn({})},onListItemClick:function(e){if(!Il){var n=Se.find((function(n){return n.id===e.id}));Zn(n),Mn(n.is_complete),rn(!0),qn(!1)}}},u.createElement("div",null,u.createElement("div",{style:{display:"flex"}},Fl.length>0&&u.createElement(An.Z,{title:"Show all",clicked:function(){Ll(Se.filter((function(e){var n,l;return e.module_id===(null===Ze||void 0===Ze||null===(n=Ze.processModule)||void 0===n||null===(l=n.module)||void 0===l?void 0:l.id)}))),jl((0,i.Z)((0,i.Z)({},Hl),{},{filter:void 0})),Ul(pt((0,i.Z)((0,i.Z)({},Hl),{},{filter:void 0})))},style:{height:"30px",width:"140px"}}),Fl.map((function(e,n){return u.createElement(An.Z,{className:r.customButton,icon:u.createElement("img",{src:s.C7j,style:{height:"16px",width:"16px"}}),clicked:function(){zl(Fl.filter((function(n){return n.value!==e.value}))),ft(Fl.filter((function(n){return n.value!==e.value})),pt((0,i.Z)((0,i.Z)({},Hl),{},{filter:void 0})))},key:n,style:{height:"30px",width:"inherit"}},"".concat(0==n?"":e.operator," ").concat(e.label))})),Fl.length>0&&u.createElement(An.Z,{title:"Apply",style:{height:"30px",width:"160px"},clicked:function(){ft(Fl,pt((0,i.Z)((0,i.Z)({},Hl),{},{filter:void 0})))},light:!0})),Il&&u.createElement("div",{style:{display:"flex"}},_t(),mt().length>0&&u.createElement(nn,{className:r.dropdownSelectComponent,items:mt(),onChange:function(e){Fl.map((function(e){return e.label})).includes(e)||zl([].concat((0,d.Z)(Fl),[{label:e,value:e,type:"status",operator:Hl.operator}]))},placeholder:"Status"}),Il&&u.createElement(nn,{className:r.dropdownSelectComponent,items:Hl.list.map((function(e){return{label:e,value:e}})),onChange:function(e){jl((0,i.Z)((0,i.Z)({},Hl),{},{filter:void 0})),setTimeout((function(){return jl((0,i.Z)((0,i.Z)({},Hl),{},{filter:e}))}),10)},placeholder:"Filter by fields"}),1==Il&&void 0!==(null===Hl||void 0===Hl?void 0:Hl.filter)&&u.createElement(nn,{className:r.dropdownSelectComponentL,items:(0,d.Z)(new Set(pt(Hl).map((function(e){return e[Hl.filter]})))).map((function(e){return{label:e,value:e}})),onChange:function(e){Fl.map((function(e){return e.value})).includes(e)||zl([].concat((0,d.Z)(Fl),[{label:"".concat(Hl.filter,": ").concat(e),value:e,type:"fields",filter:Hl.filter,operator:Hl.operator}]))},placeholder:"Field value"}),1==Il&&u.createElement(nn,{className:r.dropdownSelectComponent,items:we.map((function(e){return{label:"".concat(e.first_name," ").concat(e.last_name),value:e.id}})),onChange:function(e){if(!Fl.map((function(e){return e.label})).includes(e)){var n=we.find((function(n){return n.id===e}));zl([].concat((0,d.Z)(Fl),[{label:"".concat(n.first_name," ").concat(n.last_name),value:e,type:"user",operator:Hl.operator}]))}},placeholder:"Created by"}))),u.createElement("div",{className:r.actionsContainer},!(null!==Hl&&void 0!==Hl&&Hl.title)&&Il&&u.createElement("label",{style:{padding:"20px 0px 20px 5px",fontSize:"12px"}},"OR"===Hl.operator?"Selecting OR will select all instances of selected value":"Selecting AND will only include instances of selected value"),Il?(null===Hl||void 0===Hl?void 0:Hl.title)&&ht(Bl,Hl.list,Hl.title):u.createElement("div",{className:r.searchContainer},u.createElement(s.Oaj,null),u.createElement("input",{placeholder:"Search",className:r.searchInput,onChange:function(e){var n,l,t;if("deleteContentBackward"===e.nativeEvent.inputType)Ll(vt(null===Ze||void 0===Ze||null===(l=Ze.processModule)||void 0===l||null===(t=l.module)||void 0===t?void 0:t.id,Se,e.target.value));else if((null===(n=e.target.value)||void 0===n?void 0:n.length)>1){var o,i;Ll(vt(null===Ze||void 0===Ze||null===(o=Ze.processModule)||void 0===o||null===(i=o.module)||void 0===i?void 0:i.id,Al,e.target.value))}else 0==e.target.value.length&&Ll(Se.filter((function(e){var n,l;return e.module_id===(null===Ze||void 0===Ze||null===(n=Ze.processModule)||void 0===n||null===(l=n.module)||void 0===l?void 0:l.id)})))}})),Il&&yt(),u.createElement("div",{style:{display:Il?"none":"flex",alignSelf:"flex-end"}},!("trial_ended"===Ee.status||"inactive"===Ee.status)&&function(){var e,n,l;return u.createElement(An.Z,{light:!0,style:{display:1!=(null===Ze||void 0===Ze||null===(e=Ze.processModule)||void 0===e||null===(n=e.module)||void 0===n||null===(l=n.options)||void 0===l?void 0:l.readOnly)||"manager"===Pe.user_type||"admin"===Pe.user_type?"":"none"},clicked:function(){at(),Zn({})},icon:u.createElement("img",{src:s.IHx})})}(),!R.tq&&yt(),!R.tq&&ht(pt({list:e.selected_fields.filter((function(e){return 1==e.visible})).map((function(e){return e.field_name}))}),e.selected_fields.filter((function(e){return 1==e.visible})).map((function(e){return e.field_name}))),u.createElement(An.Z,{light:!0,clicked:function(){ll(!0);var e=Ce.find((function(e){return e.id===Ze.processModule.module_id}));e.lastUpdate=0,(0,Hn.vC)(e,dn.Qc).pipe((0,Z.q)(1)).subscribe({next:function(e){h.h.dispatch((0,g.mK)(Qn.Z(Vn.Z("created_date"),[].concat((0,d.Z)(Se.filter((function(e){return e.module_id!==Ze.processModule.module_id}))),(0,d.Z)(e))),dn.KI,Le.map((function(e){return e.fields})).flat(1))),ll(!1)},complete:function(){return e.lastUpdate=(0,V.now)()},error:function(){return ll(!1)}})},icon:u.createElement("img",{src:s.Fdh}),loading:nl}))))})):1===Oe&&void 0===nt.component_blueprints?u.createElement(u.Fragment,null,"No components in step"):u.createElement("div",{className:r.listContainer,"app-variant-is-mobile":R.tq?"true":"false"},u.createElement("p",{className:r.stepTitleSmaller},null===nt||void 0===nt?void 0:nt.name),u.createElement("br",null),!R.tq&&u.createElement("label",{className:r.stepGuidanceSmaller},null===nt||void 0===nt?void 0:nt.guidance),We&&Ye&&u.createElement(Y.Z,{message:We,onClick:function(){return Ve("")}}),u.createElement($n,{nextButtonClicked:Je,step:nt,setIsMandatoryError:Ge,isMandatoryError:Ye,begunModule:Ze,companyData:Ee,blueprints:Le,components:Se,products:ke,authenticatedUser:Pe,isEditing:Me,companyUsersArray:we,usersArray:Ql,setUsers:In,setPositions:Ln,setIsCompleted:Mn,selectedComponent:_n,goToNextStep:ut,companyPositionsArray:Te,cart:Ae}),u.createElement("div",{className:r.menuRightButtons}),u.createElement("div",{className:r.menuAccordionButtons},Ze.processModule.stepIndex>0&&u.createElement(An.Z,{title:"Cancel",light:!0,style:{width:"80px"},clicked:function(){Ll(Se.filter((function(e){var n,l;return e.module_id===(null===Ze||void 0===Ze||null===(n=Ze.processModule)||void 0===n||null===(l=n.module)||void 0===l?void 0:l.id)}))),ut(Ze.processModule.steps[0].id)}}),Ze.processModule.stepIndex>0&&u.createElement(An.Z,{title:"Back",light:!0,style:{width:"80px"},clicked:function(){var e,n,l;(1==Ze.processModule.stepIndex&&Ll(Se.filter((function(e){var n,l;return e.module_id===(null===Ze||void 0===Ze||null===(n=Ze.processModule)||void 0===n||null===(l=n.module)||void 0===l?void 0:l.id)}))),void 0===(null===Ze||void 0===Ze||null===(e=Ze.processModule)||void 0===e?void 0:e.back_id))?ut(null===(n=Ze.processModule.steps[Ze.processModule.stepIndex-1])||void 0===n?void 0:n.id):ut(null===(l=Ze.processModule.steps.find((function(e){var n;return e.id===(null===(n=Ze.processModule)||void 0===n?void 0:n.back_id)})))||void 0===l?void 0:l.id,!0)}}),!0===(null===nt||void 0===nt?void 0:nt.is_end)?u.createElement(An.Z,{disabled:!1===(null===Ee||void 0===Ee?void 0:Ee.start),title:vn?"Update":Sn&&null!==(K=null===Ze||void 0===Ze||null===($=Ze.processModule)||void 0===$||null===(ee=$.module)||void 0===ee||null===(ne=ee.options)||void 0===ne?void 0:ne.save)&&void 0!==K?K:"Save",loading:nl,style:{width:"160px",marginLeft:"0px"},clicked:function(){var e,n,l,t,o,i;return 1==(null===Ze||void 0===Ze||null===(e=Ze.processModule)||void 0===e||null===(n=e.module)||void 0===n||null===(l=n.options)||void 0===l?void 0:l.emailOutputs)&&1==(null===Ze||void 0===Ze||null===(t=Ze.processModule)||void 0===t||null===(o=t.module)||void 0===o||null===(i=o.options)||void 0===i?void 0:i.selectiveEmail)&&Sn?ml(!0):rt()}}):u.createElement(An.Z,{disabled:!1===(null===Ee||void 0===Ee?void 0:Ee.start),title:"Next",style:{width:"80px"},clicked:function(){var e;(null===nt||void 0===nt?void 0:nt.next_steps.length)>1||lt.length>1||tt.length>1?Re(!qe):0!==nt.next_steps.length&&dt(null===(e=Ze.processModule.steps[Ze.processModule.steps.findIndex((function(e){return e.id===nt.id}))+1])||void 0===e?void 0:e.id)}}),qe&&u.createElement("div",{className:r.goToNextStep},null===nt||void 0===nt?void 0:nt.next_steps.map((function(e,n){return u.createElement("div",{key:n,onClick:function(){return dt(e.id)},className:r.nextStepsContainer},u.createElement("div",{className:r.nextStepImageContainer},u.createElement("img",{alt:"",src:s.c6V})),u.createElement("p",null,e.name))})),null===lt||void 0===lt?void 0:lt.map((function(e,n){return u.createElement("div",{key:n,onClick:function(){return dt(e.id)},className:r.nextStepsContainer},u.createElement("div",{className:r.nextStepImageContainer},u.createElement("img",{alt:"",src:s.th9})),u.createElement("p",null,e.name))})),null===tt||void 0===tt?void 0:tt.map((function(e,n){return u.createElement("div",{key:n,onClick:function(){return n=e,h.h.dispatch((0,g.pU)(n)),void Re(!1);var n},className:r.nextStepsContainer},u.createElement("div",{className:r.nextStepImageContainer},u.createElement("img",{alt:"",src:s.IR8})),u.createElement("p",null,e.name))}))))),rl&&u.createElement(p.U7,{isOpen:m.v7,onClose:function(){},backdropColor:!0,blured:!0,scrollable:!0,shadowedContainerStyle:{width:R.tq?"100%":"20%"}},u.createElement("div",null,u.createElement("p",{className:r.deleteText},"Are you sure you want to delete ".concat(_n.title,"?")),u.createElement("div",{style:{display:"flex",justifyContent:"center"}},u.createElement(An.Z,{title:"Delete",clicked:function(){Cl(!0),(0,m.v7)(_n.id).pipe((0,b.P)()).subscribe({next:function(){Cl(!1),rn(!1),sl(!1)},complete:function(){},error:function(){Cl(!1),sl(!1)}})},loading:Zl}),u.createElement(An.Z,{title:"No",light:!0,clicked:function(){return sl(!1)}})))),yl&&u.createElement(p.U7,{isOpen:yl,onClose:function(){},backdropColor:!0,blured:!1,scrollable:!0,shadowedContainerStyle:{width:R.tq?"100%":"20%"}},u.createElement("div",null,u.createElement("p",{className:r.deleteText},"Cannot delete ".concat(_n.title,". Some transactions and master data are using this item")),u.createElement("div",{style:{display:"flex",justifyContent:"center"}},u.createElement(An.Z,{title:"Close",light:!0,clicked:function(){return hl(!1)}}))))),u.createElement(p.U7,{isOpen:pl,onClose:function(){return ml(!1)},backdropColor:!0,blured:!0,scrollable:!0,shadowedContainerStyle:{width:R.tq?"100%":"15%"}},u.createElement("div",null,u.createElement(p.jL,{ungrouped:!0,title:"nonmanager"===Pe.user_type?"Type an email address to send copy of this transaction (optional)":"Select users to email this transaction (Optional)",columned:!0,withAckButton:!1},"nonmanager"===Pe.user_type?u.createElement("input",{placeholder:"Use comma, no space, for multiple email addresses",className:r.emailInput,onChange:function(e){new RegExp(/^([a-z0-9!#$%&'*+/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*)(([, ]+[a-z0-9!#$%&'*+/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])\.([a-z0-9]([a-z0-9-]*[a-z0-9]))*)?)*$/).test(e.target.value)&&et(e.target.value.split(","))}}):u.createElement(yn.Cm,{id:"Users",tagEmplacement:"inlined",searchable:!1,items:Ql.filter((function(e){return e.department===Pe.departments[0].name})),groupedBy:"department",groupname:"department",triggerType:"chevron",initialSelectedValues:[],className:r.peoplePositionsSelect,inputClassName:r.peoplePositionsSelectInput,molclassname:r.peoplePositionsSelectMenuOverlay,moliclassname:r.peoplePositionsSelectMenuOverlayItem,onChange:function(e){e.length>0?et(null===e||void 0===e?void 0:e.map((function(e){return null===e||void 0===e?void 0:e.user.email}))):et([])}})),u.createElement("div",{style:{display:"flex",justifyContent:"center"}},u.createElement(An.Z,{title:"Back",light:!0,clicked:function(){return ml(!1)}}),u.createElement(An.Z,{disabled:!1===(null===Ee||void 0===Ee?void 0:Ee.start),title:vn?"Update":Sn&&null!==(le=null===Ze||void 0===Ze||null===(te=Ze.processModule)||void 0===te||null===(oe=te.module)||void 0===oe||null===(ie=oe.options)||void 0===ie?void 0:ie.save)&&void 0!==le?le:"Save",loading:nl,style:{width:"160px",marginLeft:"0px"},clicked:function(){ml(!1),rt()}})))),u.createElement(p.U7,{isOpen:un,onClose:function(){return rn(!1)},hasCloseIcon:!!R.tq,backdropColor:!0,blured:!1,scrollable:!0,shadowedContainerStyle:{width:R.tq?"100%":"50%",height:"auto",minWidth:R.tq?"100px":"800px"}},u.createElement("div",{className:r.detailContainers,"app-variant-is-mobile":R.tq?"true":"false",style:{display:"flex",justifyContent:"center",flexDirection:"column"}},u.createElement(el,{ref:ot,begunModule:Ze,allModules:Ce,companyData:Ee,components:Se,selectedComponent:_n,companyUsersArray:we,print:Un,step:s.Nbs,companyPositionsArray:Te}),u.createElement("div",{className:r.menuButtons},u.createElement(An.Z,{title:"Close",style:{width:"100px",display:R.tq?"none":""},clicked:function(){rn(!1),qn(!1)}}),!Un&&u.createElement(An.Z,{title:"Print",style:{width:"100px",display:R.tq?"none":""},light:!0,clicked:function(){qn(!0)}}),Un&&u.createElement(Dn(),{trigger:function(){return u.createElement("button",{className:r.singleButton},"Print Now")},content:function(){return ot.current}}),(void 0===gt&&(null===bt||void 0===bt?void 0:bt.filter((function(e){return Pe.positions.map((function(e){return e.id})).indexOf(e)>-1})).length)>0||(void 0===gt||"New"===gt||"Show"===gt)&&(null===_n||void 0===_n||null===(de=_n.created_by)||void 0===de?void 0:de.id)===(null===Pe||void 0===Pe?void 0:Pe.id)||void 0!==gt&&!("Hide"===gt||"Closed"===gt||gt===(null===Ee||void 0===Ee||null===(ae=Ee.misc_info)||void 0===ae?void 0:ae.lock))&&(null===bt||void 0===bt?void 0:bt.filter((function(e){return Pe.positions.map((function(e){return e.id})).indexOf(e)>-1})).length)>0&&(1!=(null===Ze||void 0===Ze||null===(ue=Ze.processModule)||void 0===ue||null===(re=ue.module)||void 0===re||null===(se=re.options)||void 0===se?void 0:se.strict)||(null===_n||void 0===_n||null===(ce=_n.created_by)||void 0===ce?void 0:ce.id)!==(null===Pe||void 0===Pe?void 0:Pe.id))||!1===(null===_n||void 0===_n?void 0:_n.is_complete)&&(null===_n||void 0===_n||null===(ve=_n.created_by)||void 0===ve?void 0:ve.id)===(null===Pe||void 0===Pe?void 0:Pe.id))&&u.createElement(An.Z,{title:"Edit",style:{display:"trial_ended"===Ee.status||"inactive"===Ee.status?"none":"",width:"100px"},light:!0,clicked:function(){var e,n,l,t;rn(!1),pn(!0),Ze.processModule.isUpdating=!0,Ee.start=!0,ut(),(null===Ze||void 0===Ze||null===(e=Ze.processModule)||void 0===e||null===(n=e.steps)||void 0===n?void 0:n.length)>0&&(null===Ze||void 0===Ze||null===(l=Ze.processModule)||void 0===l||null===(t=l.steps)||void 0===t||t.filter((function(e){var n;return null===e||void 0===e||null===(n=e.component_blueprints)||void 0===n?void 0:n.filter((function(e){return e.selected_fields.filter((function(e){return e.value=void 0}))}))})));var o=[];gn.Z(bn.Z("group"))(_n.component_fields).map((function(e){o=[].concat((0,d.Z)(o),[{id:e.component_blueprint_id,temp_id:e.id,selected_fields:Jn.Z(W.Z("group",e.group))(_n.component_fields)}])})),Ze.processModule.steps.filter((function(e){e.component_blueprints.filter((function(e){e.selected_fields.filter((function(e){var n=_n.component_fields.find((function(n){return n.field_name===e.field_name}));if(void 0!=n)e.value=n.value;else if("Component"===e.data_type_name){var l=_n.component_fields.find((function(n){return n.field_name===e.options.name}));void 0!=l&&(e.value=l.value)}}))}))})),tn({action:C._U.setModuleItems,value:JSON.parse(JSON.stringify(_n.component_items))}),tn({action:C._U.setComponents,value:o})}}),!0===(null===(pe=Ze.processModule.module)||void 0===pe?void 0:pe.options.copyOutputs)&&(null===_n||void 0===_n||null===(me=_n.created_by)||void 0===me?void 0:me.id)===Pe.id&&u.createElement(An.Z,{title:"Duplicate",style:{width:"100px"},light:!0,clicked:function(){rn(!1),at();var e=[];gn.Z(bn.Z("group"))(_n.component_fields).map((function(n){e=[].concat((0,d.Z)(e),[{id:n.component_blueprint_id,temp_id:n.id,selected_fields:Jn.Z(W.Z("group",n.group))(_n.component_fields)}])})),Ze.processModule.steps.filter((function(e){e.component_blueprints.filter((function(e){e.selected_fields.filter((function(e){var n=_n.component_fields.find((function(n){return n.procedure_step_blueprint_field_id===e.procedure_step_blueprint_field_id}));if(void 0!=n)"ID"===e.data_type_name||"Status"===e.data_type_name?e.value=void 0:e.value=n.value;else if("Component"===e.data_type_name){var l=_n.component_fields.find((function(n){return n.field_name===e.options.name}));void 0!=l&&(e.value=l.value)}}))}))})),tn({action:C._U.addModuleComponents,value:e}),tn({action:C._U.setModuleItems,value:_n.component_items}),pn(!1),Ze.processModule.isUpdating=!1,Zn({})}}),!0===(null===Pe||void 0===Pe?void 0:Pe.is_admin)&&u.createElement(An.Z,{title:"Delete",style:{width:"100px"},light:!0,clicked:function(){var e,n,l;if(!0===(null===Ze||void 0===Ze||null===(e=Ze.processModule)||void 0===e||null===(n=e.module)||void 0===n||null===(l=n.options)||void 0===l?void 0:l.isMaster)){var t=Se.filter((function(e){return e.module_id!==_n.module_id})).filter((function(e){return-1!=Ce.filter((function(e){var n;return!0===(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.isMaster)})).map((function(e){return e.id})).indexOf(e.module_id)})),o=Se.filter((function(e){return-1!=Ce.filter((function(e){var n;return 1!=(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.isMaster)})).map((function(e){return e.id})).indexOf(e.module_id)})),i=t.filter((function(e){return e.component_fields.filter((function(e){return-1!=_n.component_fields.map((function(e){return e.value})).indexOf(e.value)})).length>0})).length>0||o.filter((function(e){return e.component_items.filter((function(e){return-1!=_n.component_fields.map((function(e){return e.value})).indexOf(e.item_code)})).length>0})).length>0||o.filter((function(e){return e.component_fields.filter((function(e){return"output"!==e.data_type&&-1!=_n.component_fields.map((function(e){return e.value})).indexOf(e.value)})).length>0})).length>0;hl(i),sl(!i)}else sl(!0)}})))),u.createElement(p.U7,{isOpen:Ml,hasCloseIcon:!0,onClose:function(){return xl(!1)},backdropColor:!0,blured:!1,scrollable:!0,shadowedContainerStyle:{width:R.tq?"100%":"30%",height:"auto"}},u.createElement("div",{style:{textAlign:"center",padding:"20px"}},u.createElement("p",{className:r.modalTitle},null===(fe=Ze.processModule.module)||void 0===fe?void 0:fe.name),u.createElement("p",{className:r.modalSubTitle},null!==(_e=null===Ze||void 0===Ze||null===(ye=Ze.processModule)||void 0===ye||null===(he=ye.module)||void 0===he||null===(ge=he.options)||void 0===ge?void 0:ge.message)&&void 0!==_e?_e:"Transaction saved"))))}))},55382:function(){},72095:function(){},61219:function(){}}]);
//# sourceMappingURL=722.46045659.chunk.js.map