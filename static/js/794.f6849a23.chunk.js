"use strict";(self.webpackChunkflowhero=self.webpackChunkflowhero||[]).push([[794,193],{27794:function(e,n,a){a.r(n),a.d(n,{default:function(){return Z}});var t=a(39518),o=a(71982),r=a(71871),i=a(1413),s=a(29439),d=a(67861),l=a(23280),u=a(11577),c=a(34710),m=a(10904),p={host:"CompanyCards_host__HOUay",buttonStyle:"CompanyCards_buttonStyle__qwBmN",borderedCardHost:"CompanyCards_borderedCardHost__vy296",borderedCardContainer:"CompanyCards_borderedCardContainer__5uZRq",unBorderedCardOrgChartHost:"CompanyCards_unBorderedCardOrgChartHost__TLL6X",unBorderedCardLoadingContainer:"CompanyCards_unBorderedCardLoadingContainer__x9P0N",bottomStatisticsOrgChartHost:"CompanyCards_bottomStatisticsOrgChartHost__LHIwN",bottomStatisticsOrgChart:"CompanyCards_bottomStatisticsOrgChart__cX6mK",unBorderedCardOverviewHost:"CompanyCards_unBorderedCardOverviewHost__NAxVU",companyOverviewRow:"CompanyCards_companyOverviewRow__thvn+",companyOverviewNameContainer:"CompanyCards_companyOverviewNameContainer__JPHQ2",companyOverviewNameText:"CompanyCards_companyOverviewNameText__pjVPv",companyOverviewLogoContainer:"CompanyCards_companyOverviewLogoContainer__niIPu",companyOverviewLogo:"CompanyCards_companyOverviewLogo__MBzPL",companyOverviewLogoFallback:"CompanyCards_companyOverviewLogoFallback__7l-OU",companyOverviewLabeledContainer:"CompanyCards_companyOverviewLabeledContainer__GbYpX",companyOverviewLabel:"CompanyCards_companyOverviewLabel__j8xFA",companyOverviewDataContainer:"CompanyCards_companyOverviewDataContainer__d0pcD",companyOverviewData:"CompanyCards_companyOverviewData__6Hc+-",labeledContainerLabel:"CompanyCards_labeledContainerLabel__Y5rmE"},y=(a(48862),a(88374)),v=a(88827),_=a(73500),C=a(67861),f=function(e){var n=(0,l.s0)(),a=(0,d.useState)(!1),t=(0,s.Z)(a,2),o=t[0],r=t[1];function i(){v.h.dispatch((0,y.IW)(!1)),r(!1),n("/chart")}return(0,d.useEffect)((function(){r(!0),(0,c.on)().pipe((0,u.P)()).subscribe({complete:function(){return r(!1)}})}),[]),e.initVersion?C.createElement(g,{label:""},C.createElement("div",{className:p.borderedCardHost},C.createElement("div",{className:p.borderedCardContainer},C.createElement("p",null,"Begin setting up your Company by creating departments and positions."),C.createElement(m.zx,{light:!0,loading:o,title:"Start Setup",clicked:function(){return i()}})))):!_.tq&&C.createElement("div",null,C.createElement(m.zx,{title:"View Roles and Departments",clicked:function(){return i()},style:{}}))},g=function(e){var n=e.label,a=e.children;return C.createElement("div",{className:p.labeledContainerHost},C.createElement("p",{className:p.labeledContainerLabel},n),a)},h=function(e){var n=e.companyData,a=(0,d.useState)(n),t=(0,s.Z)(a,2),o=t[0],r=t[1];return(0,d.useEffect)((function(){(0,c.aK)().pipe((0,u.P)()).subscribe({next:function(e){r((0,i.Z)({},e))}})}),[]),C.createElement("div",{className:p.host},C.createElement(f,{initVersion:0==o.departments_count}))},b=a(1193),w=a(61616),E=a(89293),O=(a(70518),a(67861)),Z=(0,t.$j)((function(e){var n=e.authReducer,a=n.authenticatedUser.position,t=n.authenticatedUser,o=e.sessionReducer.user,r=e.flowReducer;return{companyData:r.companyData,companyPositionsArray:r.companyPositionsArray,position:a,allTasks:r.allTasks,allCompletedTasks:r.allCompletedTasks,allCompletedTasksPaginated:r.allCompletedTasksPaginated,user:o,companyUsersArray:r.companyUsersArray,authenticatedUser:t}}),(function(e){return{onSetOnBoardingVisible:function(n){return e((0,o.DJ)(n))},onToggleModalVisibility:function(n){return e((0,o.$6)(n))}}}))((function(e){var n=e.companyData,a=e.authenticatedUser,o=(0,t.I0)();return document.title="Company | ".concat(E.iC),(0,d.useEffect)((function(){o((0,y.tR)(!1)),o((0,y.IW)(!0))}),[]),O.createElement("div",{className:r.Z.companyHost},O.createElement("div",{style:{display:"flex",flexDirection:"column",margin:_.tq?"100px 0 0 0":"200px 0 0 0"}},O.createElement(w.Z,{headerTitle:"Company",targetProcessing:!1}),!0===a.is_admin&&O.createElement(m.j3,{permissions:[m.po.company.orgChart.update]},O.createElement(h,{companyData:n}))),O.createElement(b.default,null))}))},1193:function(e,n,a){a.r(n),a.d(n,{default:function(){return h}});var t=a(1413),o=a(93433),r=a(29439),i=a(50981),s=a.n(i),d=a(67861),l=a(39518),u=a(11577),c=(a(60940),a(10103)),m=a(43984),p=a(88374),y=a(71982),v=a(75105),_=a(34710),C=a(89293),f=a(10904),g="CompanySettings_host__BUW5K";var h=(0,l.$j)((function(e){var n=e.authReducer.authenticatedUser.position,a=e.flowReducer;return{companyData:a.companyData,companyPositionsArray:a.companyPositionsArray,position:n,companyUsersArray:a.companyUsersArray}}),(function(e){return{onSetCompanyDataField:function(n){return e((0,p.QK)(n))},onSetAuthenticatedUserPosition:function(n){return e((0,m.IF)(n))},onTutorialModalOpen:function(n){return e((0,y.ay)(n))}}}))((function(e){var n,a,i,l=e.companyUsersArray,m=e.companyData,p=e.position,y=(0,d.useState)(!0),h=(0,r.Z)(y,2)[1],b=(0,d.useState)((0,o.Z)(null!==(n=l.map((function(e){var n;return{id:e.id,first_name:e.first_name,last_name:e.last_name,email:e.email,position:"".concat(null===(n=e.positions)||void 0===n?void 0:n.map((function(e){return e.name})).join(", ")),is_admin:e.is_admin,photo:e.photo,timezone:e.timezone}})))&&void 0!==n?n:[])),w=(0,r.Z)(b,2)[1],E=m.name,O=m.founding_date,Z=m.employees_no,D=m.industry,N=(0,d.useState)({name:(null===m||void 0===m||null===(a=m.name)||void 0===a?void 0:a.length)>2,display_name:(null===m||void 0===m||null===(i=m.display_name)||void 0===i?void 0:i.length)>2,founding_date:s()(m.founding_date,"YYYY-MM-DD").diff(s()().format("YYYY-MM-DD"))<0,employees_no:C.rT.some((function(e){return e.value===m.employees_no})),industry:null===C.No||void 0===C.No?void 0:C.No.some((function(e){return e.label==m.industry}))}),S=(0,r.Z)(N,2),T=S[0],H=S[1],L=(0,d.useState)(""),P=(0,r.Z)(L,1)[0],Y=(0,d.useState)({name:"",display_name:"",founding_date:"",employees_no:"",industry:""}),k=(0,r.Z)(Y,2),B=k[0],U=k[1];(0,d.useEffect)((function(){(0,v.AW)().pipe((0,c.q)(1)).subscribe({next:function(e){w((0,o.Z)(null!==e&&void 0!==e?e:[]))},error:function(e){P(e.data)},complete:function(){}})}),[]);var x=(0,d.useCallback)((function(){var e,n,a,o,r;U({name:"",display_name:"",founding_date:"",employees_no:"",industry:"",misc_info:""});var i=!1;return(null===m||void 0===m||null===(e=m.name)||void 0===e?void 0:e.length)<2&&(U((function(e){return(0,t.Z)((0,t.Z)({},e),{},{name:"Company name must have at least 2 characters"})})),i=!0),(null===m||void 0===m||null===(n=m.display_name)||void 0===n?void 0:n.length)<2&&(U((function(e){return(0,t.Z)((0,t.Z)({},e),{},{display_name:"Company display name must have at least 2 characters"})})),i=!0),s()(m.founding_date,"YYYY-MM-DD").diff(s()().format("YYYY-MM-DD"))>0&&(U((function(e){return(0,t.Z)((0,t.Z)({},e),{},{founding_date:"Company's founding date is not a valid date"})})),i=!0),((null===m||void 0===m||null===(a=m.employees_no)||void 0===a?void 0:a.toString().length)<3||!C.rT.some((function(e){return e.value===m.employees_no})))&&(U((function(e){return(0,t.Z)((0,t.Z)({},e),{},{employees_no:"Employees' number is not valid. \nStored value (".concat(null===m||void 0===m?void 0:m.employees_no,") is not matching any selectable range")})})),i=!0),((null===m||void 0===m||null===(o=m.industry)||void 0===o?void 0:o.length)<3||null===C.No||void 0===C.No||!C.No.some((function(e){return e.label==m.industry})))&&(U((function(e){return(0,t.Z)((0,t.Z)({},e),{},{industry:"Industry field entry is not valid"})})),i=!0),(null===m||void 0===m||null===(r=m.name)||void 0===r?void 0:r.length)>0&&((null===E||void 0===E?void 0:E.length)>0?h(!1):h(!0)),i}),[m,O,Z,D,T]);return(0,d.useEffect)((function(){T.industry&&x()}),[m,p]),d.createElement("div",{id:"company-settings",className:g},d.createElement(f.o4,{datePickerRC:!0,feValidation:(0,t.Z)({},B),sendCompanyDetails:function(e){(0,_.sy)(e).pipe((0,u.P)()).subscribe({error:function(e){var n={name:"",display_name:"",founding_date:"",employees_no:"",industry:""};e.data.errors.name&&(n.name=e.data.errors.name[0]),e.data.errors.display_name&&(n.display_name=e.data.errors.display_name[0]),e.data.errors.founding_date&&(n.founding_date=e.data.errors.founding_date[0]),e.data.errors.employees_no&&(n.employees_no=e.data.errors.employees_no[0]),e.data.errors.industry&&(n.industry=e.data.errors.industry[0]),U((function(e){return(0,t.Z)((0,t.Z)({},e),n)}))}})},setElementsTouched:H}))}))},61616:function(e,n,a){a.d(n,{Z:function(){return d}});var t="HeaderTopBar_headerTopBar__D+HJ9",o="HeaderTopBar_headerTopBarContainer__1jgza",r="HeaderTopBar_loadingContainer__UcfwW",i=a(93572),s=a(67861),d=function(e){var n=e.hasHeaderImg,a=e.headerTitle,d=e.headerImgSrc,l=e.targetProcessing;return s.createElement("div",{className:t},s.createElement("div",{className:o},n&&s.createElement("img",{alt:"",src:d}),s.createElement("p",null,a),l&&s.createElement("span",{className:r},s.createElement(i.Z,{type:"Watch",color:"var(--app-color-gray-light)",height:15,width:"".concat(30,"px")}))))}},60940:function(){}}]);
//# sourceMappingURL=794.f6849a23.chunk.js.map