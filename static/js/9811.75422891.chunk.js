"use strict";(self.webpackChunkflowhero=self.webpackChunkflowhero||[]).push([[9811,7905,2299],{41131:function(e,n,l){l.d(n,{C6:function(){return Se},ZP:function(){return Me}});var o=l(1413),t=l(93433),i=l(29439),d=l(67861),a="CustomTemplateModule_section__S+Ga8",u="CustomTemplateModule_accordionContainer__Eooxm",r="CustomTemplateModule_active__x9Y6U",s="CustomTemplateModule_content__3auE3",v=l(47144),c=l.n(v),p=l(27436),m=l(39518),f=l(89293),_=l(88550),y=l(51330),h=l(4942),g=l(73500),b=l(46415),x=l(10904),E={mobilepopup:"CustomSportsClub_mobilepopup__efO50",mobilepopupopen:"CustomSportsClub_mobilepopupopen__R9HZu",mobilePopupActionContainer:"CustomSportsClub_mobilePopupActionContainer__9+kzH",filtersContainer:"CustomSportsClub_filtersContainer__GwQ7c",centerDiv:"CustomSportsClub_centerDiv__oTWCq",fieldInput:"CustomSportsClub_fieldInput__ZHED4"},C=l(6073),w=l(12308),Z=l(11577),M=l(9969),S=l(12075),k=l(52902),I=l(32588),P=l(50981),N=l.n(P),T=l(88827),D=l(88374),z=l(93389),U=l(58535),A=l(85508),O=l(63864),R=l(27658),L=l(9825),W=l.n(L),q=(0,m.$j)((function(e){var n=e.authReducer,l=(n.authenticatedUser.position,n.authenticatedUser),o=e.sessionReducer.user,t=e.flowReducer;return{begunModule:t.begunModule,allModules:t.allModules,companyData:t.companyData,companyUsersArray:t.companyUsersArray,companyPositionsArray:t.companyPositionsArray,components:t.components,authenticatedUser:l,user:o,companyProcesses:t.companyProcesses}}))((function(e){var n,l,a,u,r,s,v,c,p,m,y,S,k,P,U,O,R,L,W,q,F,B,H,j,V,J,G,Q,K=e.begunModule,X=e.allModules,$=e.companyData,ee=e.companyUsersArray,ne=e.goto,le=e.components,oe=e.authenticatedUser,te=e.user,ie=e.companyProcesses,de=(e.template,e.title),ae=e.selectedComponent,ue=e.setSelectedComponent,re=(e.step,(0,d.useState)(!1)),se=(0,i.Z)(re,2),ve=se[0],ce=se[1],pe=(0,d.useState)((null===(n=ae.shared_users)||void 0===n||null===(l=n.filter((function(e){return(null===e||void 0===e?void 0:e.id)===(null===oe||void 0===oe?void 0:oe.id)})))||void 0===l?void 0:l.length)>0),me=(0,i.Z)(pe,2),fe=me[0],_e=me[1],ye=(0,d.useState)((null===(a=ae.component_items)||void 0===a||null===(u=a.filter((function(e){var n,l;return(null===e||void 0===e?void 0:e.value)===(null===oe||void 0===oe?void 0:oe.id)&&"Join"===(null===e||void 0===e?void 0:e.type)&&(null===e||void 0===e?void 0:e.item_code)===(null===K||void 0===K||null===(n=K.processModule)||void 0===n||null===(l=n.module)||void 0===l?void 0:l.id)})))||void 0===u?void 0:u.length)>0),he=(0,i.Z)(ye,2),ge=he[0],be=he[1],xe=(0,d.useState)(!1),Ee=(0,i.Z)(xe,2),Ce=Ee[0],we=Ee[1],Ze=(0,d.useState)(!1),Me=(0,i.Z)(Ze,2),Se=Me[0],ke=Me[1],Ie=(0,d.useState)(!1),Pe=(0,i.Z)(Ie,2),Ne=(Pe[0],Pe[1]),Te=(0,d.useState)(!1),De=(0,i.Z)(Te,2),ze=(De[0],De[1]),Ue=(0,_.pQ)(),Ae=(0,i.Z)(Ue,2),Oe=(Ae[0],Ae[1]),Re=(null===oe||void 0===oe?void 0:oe.id)===(null===ae||void 0===ae||null===(r=ae.created_by)||void 0===r?void 0:r.id),Le=1===(null===ae||void 0===ae||null===(s=ae.component_items)||void 0===s?void 0:s.filter((function(e){return"Moderator"===e.type&&(null===e||void 0===e?void 0:e.value)===(null===oe||void 0===oe?void 0:oe.id)})).length),We=Re||Le,qe=null!==(v=ae.component_fields.find((function(e){return"Private"===e.field_name})))&&void 0!==v&&v,Fe=null!==(c=null===(p=ae.component_fields.find((function(e){return"My Community"===e.field_name})))||void 0===p?void 0:p.value)&&void 0!==c?c:"Metro Manila",Be=null===(m=ae.component_fields.find((function(e){return"Club Description"===e.field_name})))||void 0===m?void 0:m.value,Ye="Yes"===(null===(y=ae.component_fields.find((function(e){return"Basketball"===e.field_name})))||void 0===y?void 0:y.value)?"Basketball":"Yes"===(null===(S=ae.component_fields.find((function(e){return"Pickleball"===e.field_name})))||void 0===S?void 0:S.value)?"Pickleball":"All Sports",He=null===X||void 0===X?void 0:X.find((function(e){return"Meets"===(null===e||void 0===e?void 0:e.name)}));return d.createElement("div",null,d.createElement("div",{style:{fontFamily:"var(--app-text-mobile-font)",fontSize:g.tq?"18px":"20px",fontWeight:"bold",marginTop:g.tq?"":"50px"}},de),d.createElement("div",{style:{fontFamily:"var(--app-text-mobile-font)",fontSize:"12px",marginTop:"5px"}},"".concat(qe?"Private":"Public"," \u25e6 ").concat(Ye," \u25e6 ").concat(Fe)),Be&&d.createElement("div",{style:{fontFamily:"var(--app-text-mobile-font)",fontSize:"12px",margin:"40px 0"}},"".concat(Be)),fe&&!We&&d.createElement("p",{style:{fontFamily:"var(--app-text-mobile-font)",fontSize:"14px",fontWeight:"bold",marginTop:"30px"}},"You are a member of this club"),We&&d.createElement("p",{style:{fontFamily:"var(--app-text-mobile-font)",fontSize:"14px",fontWeight:"bold",marginTop:"30px"}},Le?"You are a moderator of this club":"You are the admin of this club"),d.createElement(b.mQ,{style:{width:"100%",fontSize:g.tq?"16px":"20px",marginTop:"20px"}},d.createElement(b.td,{style:{fontFamily:"var(--app-text-mobile-font)",fontSize:g.tq?"14px":"16px"}},We&&d.createElement(b.OK,null,"DETAILS"),d.createElement(b.OK,null,"MEMBERS"),d.createElement(b.OK,null,"MEETS")),We&&d.createElement(b.x4,{id:"DETAILS"},d.createElement("div",{style:{width:"100%",minHeight:"50vh",overflow:"auto"}},e.children)),d.createElement(b.x4,{id:"MEMBERS"},d.createElement("div",{style:{width:"100%",minHeight:"100vh",overflow:"auto"}},d.createElement("div",{className:E.centeredDiv,style:{width:"inherit",fontSize:"14px",marginTop:"20px"}},d.createElement("div",{style:{fontFamily:"var(--app-text-main-font)",fontWeight:"bold",color:"var(--app-color-gray-dark)",paddingLeft:"5px"}},"Club Admin"),d.createElement("div",{className:E.filtersContainer},d.createElement(I.Z,{simple:!0,photo:null!==(k=null===oe||void 0===oe?void 0:oe.photo)&&void 0!==k?k:"https://s3-symbol-logo.tradingview.com/logo-yazilim--600.png",email:"Founded club: ".concat(N()(new Date(ae.created_date)).format("DD MMM YYYY")),position:null!==(P=null===oe||void 0===oe||null===(U=oe.options)||void 0===U?void 0:U.info)&&void 0!==P?P:"",firstName:d.createElement("div",{style:{fontWeight:"bold"}},"".concat(null===ae||void 0===ae||null===(O=ae.created_by)||void 0===O?void 0:O.first_name," ").concat(null===ae||void 0===ae||null===(R=ae.created_by)||void 0===R?void 0:R.last_name)),cardClicked:function(){},width:"100%"}))),(null===ae||void 0===ae||null===(L=ae.shared_users)||void 0===L?void 0:L.length)>0&&d.createElement(d.Fragment,null,d.createElement("p",{style:{fontSize:"14px",fontFamily:"var(--app-text-main-font)",fontWeight:"bold",color:"var(--app-color-gray-dark)",paddingLeft:"5px"}},"Members ( ".concat(null===ae||void 0===ae||null===(W=ae.shared_users)||void 0===W?void 0:W.length," )")),d.createElement(w.default,{className:E.sharesTable,withColumns:!1,modern:!0,columns:["User","Photo","Bio","Pay"],list:null===ae||void 0===ae||null===(q=ae.shared_users)||void 0===q?void 0:q.map((function(e){var n,l,t,i,a,u=ee.find((function(n){return n.id===e.id})),r=null===ae||void 0===ae||null===(n=ae.component_items)||void 0===n?void 0:n.find((function(e){return"Moderator"===e.type&&(null===e||void 0===e?void 0:e.value)===(null===u||void 0===u?void 0:u.id)}));return u?(a={},(0,h.Z)(a,"User",d.createElement("div",{style:{fontWeight:"bold"}},"".concat(null===u||void 0===u?void 0:u.first_name," ").concat(null===u||void 0===u?void 0:u.last_name))),(0,h.Z)(a,"Photo",null!==(l=null===u||void 0===u?void 0:u.photo)&&void 0!==l?l:null===$||void 0===$?void 0:$.logo),(0,h.Z)(a,"Bio",null!==(t=null===u||void 0===u||null===(i=u.options)||void 0===i?void 0:i.info)&&void 0!==t?t:""),(0,h.Z)(a,"Pay",Re?d.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},r?d.createElement(x.zx,{title:"Remove as Moderator",clicked:function(){var e,n,l;ce(!0),(0,C.KL)((0,o.Z)((0,o.Z)({},ae),{},{component_items:null===ae||void 0===ae||null===(e=ae.component_items)||void 0===e?void 0:e.filter((function(e){return"Moderator"===e.type&&(null===e||void 0===e?void 0:e.value)!==(null===u||void 0===u?void 0:u.id)}))}),ae.id,null===(n=ae.shared_users)||void 0===n?void 0:n.map((function(e){return e.id})),ae.title,null===ae||void 0===ae?void 0:ae.is_complete,null===ae||void 0===ae||null===(l=ae.shared_positions)||void 0===l?void 0:l.map((function(e){return null===e||void 0===e?void 0:e.id}))).subscribe({next:function(e){ue(null===e||void 0===e?void 0:e.data),ce(!1)},error:function(){return ce(!1)}})},style:{width:"160px"},titleStyle:{fontSize:"10px"},loading:ve}):d.createElement(x.zx,{title:"Add as Moderator",clicked:function(){var e,n,l;ce(!0),(0,C.np)({index:null===ae||void 0===ae||null===(e=ae.component_items)||void 0===e?void 0:e.length,item_code:null===K||void 0===K||null===(n=K.processModule)||void 0===n||null===(l=n.module)||void 0===l?void 0:l.id,type:"Moderator",value:null===u||void 0===u?void 0:u.id},ae.id).subscribe({next:function(e){ue(null===e||void 0===e?void 0:e.data),ce(!1)},error:function(){return ce(!1)}})},style:{width:"160px"},titleStyle:{fontSize:"10px"},loading:ve})):d.createElement("div",{style:{fontWeight:"bold"}}," ",r?"* Club Moderator":""," ")),a):{User:null===e||void 0===e?void 0:e.id}}))})),We&&(null===ae||void 0===ae||null===(F=ae.component_items)||void 0===F?void 0:F.filter((function(e){return"Invite"===e.type})).length)>0&&d.createElement(d.Fragment,null,d.createElement("p",{style:{fontSize:"14px",fontFamily:"var(--app-text-main-font)",fontWeight:"bold",color:"var(--app-color-gray-dark)",paddingLeft:"5px"}},"Invited ( ".concat(null===ae||void 0===ae||null===(B=ae.component_items)||void 0===B?void 0:B.filter((function(e){return"Invite"===e.type})).length," )")),d.createElement(w.default,{className:E.sharesTable,withColumns:!1,modern:!0,columns:["User","Photo","Bio"],list:null===ae||void 0===ae||null===(H=ae.component_items)||void 0===H||null===(j=H.filter((function(e){return"Invite"===e.type})))||void 0===j?void 0:j.map((function(e){var n,l,o,t,i=ee.find((function(n){return n.id===e.value}));return t={},(0,h.Z)(t,"User","".concat(null===i||void 0===i?void 0:i.first_name," ").concat(null===i||void 0===i?void 0:i.last_name)),(0,h.Z)(t,"Photo",null!==(n=null===i||void 0===i?void 0:i.photo)&&void 0!==n?n:null===$||void 0===$?void 0:$.logo),(0,h.Z)(t,"Bio",null!==(l=null===i||void 0===i||null===(o=i.options)||void 0===o?void 0:o.info)&&void 0!==l?l:""),t}))})),We&&(null===ae||void 0===ae||null===(V=ae.component_items)||void 0===V?void 0:V.filter((function(e){return"Join"===e.type})).length)>0&&d.createElement(d.Fragment,null,d.createElement("p",{style:{fontSize:"14px",fontFamily:"var(--app-text-main-font)",fontWeight:"bold",color:"var(--app-color-gray-dark)",paddingLeft:"5px"}},"Requests to Join ( ".concat(null===ae||void 0===ae||null===(J=ae.component_items)||void 0===J?void 0:J.filter((function(e){return"Join"===e.type})).length," )")),d.createElement(w.default,{className:E.sharesTable,withColumns:!1,modern:!0,columns:["User","Photo","Requests"],list:null===ae||void 0===ae||null===(G=ae.component_items)||void 0===G||null===(Q=G.filter((function(e){return"Join"===e.type})))||void 0===Q?void 0:Q.map((function(e){var n,l,i,a,u=ee.find((function(n){return n.id===e.value}));return u?(a={},(0,h.Z)(a,"User",d.createElement("div",{style:{fontWeight:"bold"}},"".concat(null===u||void 0===u?void 0:u.first_name," ").concat(null===u||void 0===u?void 0:u.last_name))),(0,h.Z)(a,"Photo",null!==(n=null===u||void 0===u?void 0:u.photo)&&void 0!==n?n:null===$||void 0===$?void 0:$.logo),(0,h.Z)(a,"Requests",We?null!==ae&&void 0!==ae&&null!==(l=ae.component_items)&&void 0!==l&&l.find((function(e){return"Payments"===e.type&&(null===e||void 0===e?void 0:e.value)===(null===u||void 0===u?void 0:u.id)}))?"Paid":d.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},d.createElement("p",{style:{width:"50%"}},null===u||void 0===u||null===(i=u.options)||void 0===i?void 0:i.info),d.createElement(x.zx,{title:"Accept",clicked:function(){var n,l,i;ce(!0),(0,C.KL)((0,o.Z)((0,o.Z)({},ae),{},{component_items:ae.component_items.filter((function(n){return n.id!==e.id}))}),ae.id,[].concat((0,t.Z)(null!==(n=null===(l=ae.shared_users)||void 0===l?void 0:l.map((function(e){return e.id})))&&void 0!==n?n:[]),[null===u||void 0===u?void 0:u.id]),ae.title,null===ae||void 0===ae?void 0:ae.is_complete,null===ae||void 0===ae||null===(i=ae.shared_positions)||void 0===i?void 0:i.map((function(e){return null===e||void 0===e?void 0:e.id}))).subscribe({next:function(e){ue(null===e||void 0===e?void 0:e.data),ce(!1)},error:function(){return ce(!1)}})},style:{width:"80px",backgroundColor:"blue"},titleStyle:{fontSize:"10px"},loading:ve}),d.createElement(x.zx,{title:"Decline",clicked:function(){var n,l;ce(!0),(0,C.KL)((0,o.Z)((0,o.Z)({},ae),{},{component_items:ae.component_items.filter((function(n){return n.id!==e.id}))}),ae.id,null===(n=ae.shared_users)||void 0===n?void 0:n.map((function(e){return e.id})),ae.title,null===ae||void 0===ae?void 0:ae.is_complete,null===ae||void 0===ae||null===(l=ae.shared_positions)||void 0===l?void 0:l.map((function(e){return null===e||void 0===e?void 0:e.id}))).subscribe({next:function(e){ue(null===e||void 0===e?void 0:e.data),ce(!1)},error:function(){return ce(!1)}})},style:{width:"80px",backgroundColor:"red"},titleStyle:{fontSize:"10px"},loading:ve})):""),a):{User:null===e||void 0===e?void 0:e.id}}))})),!(fe||ge||We)&&qe&&d.createElement(x.zx,{title:"Request to Join Club",clicked:function(){var e,n,l;ce(!0),(0,C.np)({index:null===ae||void 0===ae||null===(e=ae.component_items)||void 0===e?void 0:e.length,item_code:null===K||void 0===K||null===(n=K.processModule)||void 0===n||null===(l=n.module)||void 0===l?void 0:l.id,type:"Join",value:null===oe||void 0===oe?void 0:oe.id},ae.id).subscribe({next:function(){be(!0),ce(!1)},error:function(){return ce(!1)}})},style:{width:"100%",backgroundColor:"green"},loading:ve}),!(fe||We)&&!qe&&d.createElement(x.zx,{title:"Join Club",clicked:function(){var e,n,l;ce(!0),(0,C.KL)((0,o.Z)((0,o.Z)({},ae),{},{component_items:ae.component_items.filter((function(e){return("Invite"===e.type||"Join"===e.type)&&e.value!==oe.id}))}),ae.id,[].concat((0,t.Z)(null!==(e=null===(n=ae.shared_users)||void 0===n?void 0:n.map((function(e){return e.id})))&&void 0!==e?e:[]),[null===oe||void 0===oe?void 0:oe.id]),de,null===ae||void 0===ae?void 0:ae.is_complete,null===ae||void 0===ae||null===(l=ae.shared_positions)||void 0===l?void 0:l.map((function(e){return null===e||void 0===e?void 0:e.id}))).subscribe({next:function(e){var n;ae.shared_users=null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.shared_users,_e(!0),ce(!1)},error:function(){return ce(!1)}})},style:{width:"100%",backgroundColor:"blue"},loading:ve}),We&&d.createElement(x.zx,{title:"Invite Players",clicked:function(){ke(!0)},style:{width:"100%",backgroundColor:"green"},loading:ve})),fe&&!We&&d.createElement(x.zx,{title:"Leave Club",clicked:function(){var e;ce(!0),(0,C.KL)((0,o.Z)((0,o.Z)({},ae),{},{component_items:ae.component_items.filter((function(e){return e.value!==(null===oe||void 0===oe?void 0:oe.id)}))}),ae.id,ae.shared_users.filter((function(e){return e.id!==(null===oe||void 0===oe?void 0:oe.id)})).map((function(e){return e.id})),de,null===ae||void 0===ae?void 0:ae.is_complete,null===ae||void 0===ae||null===(e=ae.shared_positions)||void 0===e?void 0:e.map((function(e){return null===e||void 0===e?void 0:e.id}))).subscribe({next:function(e){var n;ae.shared_users=null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.shared_users,ue(ae),_e(!1),ce(!1)},error:function(){return ce(!1)}})},style:{width:"100%",backgroundColor:"red"},loading:ve})),d.createElement(b.x4,{id:"MEETS"},d.createElement("div",{style:{width:"100%",minHeight:"60vh",overflow:"auto",zIndex:"-1"}},d.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end"}},d.createElement(x.zx,{light:!0,style:{display:We?"":"none"},clicked:function(){we(!0)},icon:d.createElement("img",{src:M.IHx})})),!Ce&&d.createElement(Y,{events:le.filter((function(e){return"Expired"!==e.status&&e.module_id===(null===He||void 0===He?void 0:He.id)})),isAdmin:We,onEventClick:function(e){var n=le.find((function(n){return n.id===(null===e||void 0===e?void 0:e.event_id)}));ne&&(0,A.navigateToTransaction)(ie,ue,Ne,$,n,Oe,oe,K,te,X,ze,ee,He)}})))),d.createElement("div",{className:Se?E.mobilepopupopen:E.mobilepopup,style:{display:Se?"":"none"}},d.createElement("div",{style:{width:"100%",height:"50vh",backgroundColor:"white",opacity:"0.9"},onClick:function(){return ke(!1)}}),d.createElement("div",{className:E.mobilePopupActionContainer,style:{padding:"20px"}},d.createElement("p",{style:{fontSize:"14px",fontFamily:"var(--app-text-main-font)",fontWeight:"bold",color:"var(--app-color-gray-dark)",paddingLeft:"5px"}},"Invite"),d.createElement(w.default,{className:E.sharesTable,withColumns:!1,modern:!0,columns:["User","Photo","Bio"],list:ee.filter((function(e){var n,l,o;return!(null!==ae&&void 0!==ae&&null!==(n=ae.shared_users)&&void 0!==n&&null!==(l=n.map((function(e){return e.id})))&&void 0!==l&&l.includes(e.id)||null!==ae&&void 0!==ae&&null!==(o=ae.component_items.filter((function(e){return"Invite"===e.type})).map((function(e){return e.value})))&&void 0!==o&&o.includes(e.id))})).map((function(e){var n,l,o,t;return t={},(0,h.Z)(t,"User","".concat(null===e||void 0===e?void 0:e.first_name," ").concat(null===e||void 0===e?void 0:e.last_name)),(0,h.Z)(t,"Photo",null!==(n=null===e||void 0===e?void 0:e.photo)&&void 0!==n?n:null===$||void 0===$?void 0:$.logo),(0,h.Z)(t,"Bio",null!==(l=null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.info)&&void 0!==l?l:""),(0,h.Z)(t,"id",e.id),t})),onListItemClick:function(e){var n,l,o;ce(!0),(0,C.np)({index:null===ae||void 0===ae||null===(n=ae.component_items)||void 0===n?void 0:n.length,item_code:null===K||void 0===K||null===(l=K.processModule)||void 0===l||null===(o=l.module)||void 0===o?void 0:o.id,type:"Invite",value:null===e||void 0===e?void 0:e.id},ae.id).subscribe({next:function(){ce(!1)},error:function(){return ce(!1)}})}}))),d.createElement("div",{className:Ce?E.mobilepopupopen:E.mobilepopup,style:{display:Ce?"":"none"}},d.createElement("div",{style:{width:"100%",height:"50vh",backgroundColor:"white",opacity:"0.9"},onClick:function(){return we(!1)}}),d.createElement("div",{className:E.mobilePopupActionContainer},d.createElement(x.zx,{title:"Create one-off meet",style:{width:"100%"},clicked:function(){var e=function(e){var n,l,i,d,a,u,r=e.steps.filter((function(n){var l,o,t,i,d,a;return void 0==(null===n||void 0===n||null===(l=n.options)||void 0===l?void 0:l.showStepAll)||1==(null===n||void 0===n||null===(o=n.options)||void 0===o?void 0:o.showStepAll)||0==(null===n||void 0===n||null===(t=n.options)||void 0===t?void 0:t.showStepAll)&&(null===n||void 0===n||null===(i=n.options)||void 0===i||null===(d=i.showOnly)||void 0===d?void 0:d.filter((function(e){return oe.positions.map((function(e){return e.id})).indexOf(e)>-1})).length)>0||(null===n||void 0===n||null===(a=n.options)||void 0===a?void 0:a.showStepAuthor)&&(null===oe||void 0===oe?void 0:oe.id)===(null===e||void 0===e?void 0:e.user_id)})).map((function(e,n){return(0,o.Z)((0,o.Z)({},e),{},{rank:n+1})}));T.h.dispatch((0,D.q4)(e)),T.h.dispatch((0,D.an)([e],f.Qc)),T.h.dispatch((0,D.q4)((0,o.Z)((0,o.Z)({},e),{},{completeSteps:e.steps,steps:r,stepIndex:2,module_id:He.id,module:He,isUpdating:!1}))),Oe({action:_._U.setCurrentStep,value:null===e||void 0===e?void 0:e.steps[2]}),Oe({action:_._U.setModuleItems,value:ae.component_items}),Oe({action:_._U.setModuleNewStepComponents,value:[]}),Oe({action:_._U.setComponents,value:[]});var s=(0,t.Z)(null!==(n=null===(l=r[2])||void 0===l?void 0:l.component_blueprints)&&void 0!==n?n:[]);if((null===s||void 0===s?void 0:s.length)>0){var v,c,p=null===(v=s.find((function(e){return e.selected_fields.find((function(e){return"Club"===e.field_name}))})))||void 0===v?void 0:v.selected_fields.find((function(e){return"Club"===e.field_name}));p&&(p.value=de),(p=null===(c=s.find((function(e){return e.selected_fields.find((function(e){return"Sport"===e.field_name}))})))||void 0===c?void 0:c.selected_fields.find((function(e){return"Sport"===e.field_name})))&&(p.value=Ye),Oe({action:_._U.setComponentBlueprints,value:s}),Oe({action:_._U.setModuleNewStepComponents,value:s})}(null===K||void 0===K||null===(i=K.processModule)||void 0===i||null===(d=i.steps)||void 0===d?void 0:d.length)>0&&(null===K||void 0===K||null===(a=K.processModule)||void 0===a||null===(u=a.steps)||void 0===u||u.filter((function(e){var n;return null===e||void 0===e||null===(n=e.component_blueprints)||void 0===n?void 0:n.filter((function(e){return e.selected_fields.filter((function(e){return e.value=void 0}))}))})))};ie.find((function(e){return e.id===He.procedure.id}))?e(ie.find((function(e){return e.id===He.procedure.id}))):(ce(!0),(0,z.zJ)(He.procedure.id).pipe((0,Z.P)()).subscribe({next:function(n){ce(!1),e(n)},error:function(e){}}))}}),d.createElement(x.zx,{title:"Create recurring schedule",clicked:function(){return we(!1)},style:{width:"100%"}}))))})),F=function(e){var n,l,a,u,r,s,v,c,p,_,y,T,D,z,U,A,L,q,F,B,Y,H,j,V,J,G,Q,K,X,$,ee,ne,le,oe,te,ie,de,ae,ue,re=e.selectedComponent,se=e.begunModule,ve=e.goto,ce=(0,m.v9)((function(e){return e.flowReducer})),pe=ce.companyData,me=ce.companyUsersArray,fe=ce.components,_e=(0,m.v9)((function(e){return e.authReducer})),ye=_e.authenticatedUser,he=(0,d.useState)(!1),ge=(0,i.Z)(he,2),be=ge[0],xe=ge[1],Ee=(0,d.useState)((null===re||void 0===re||null===(n=re.shared_users)||void 0===n||null===(l=n.filter((function(e){return(null===e||void 0===e?void 0:e.id)===(null===ye||void 0===ye?void 0:ye.id)})))||void 0===l?void 0:l.length)>0),Ce=(0,i.Z)(Ee,2),we=Ce[0],Ze=Ce[1],Me=(0,d.useState)((null===re||void 0===re||null===(a=re.component_items)||void 0===a||null===(u=a.filter((function(e){var n,l;return(null===e||void 0===e?void 0:e.value)===(null===ye||void 0===ye?void 0:ye.id)&&("Request"===(null===e||void 0===e?void 0:e.type)||"Waitlist"===(null===e||void 0===e?void 0:e.type))&&(null===e||void 0===e?void 0:e.item_code)===(null===se||void 0===se||null===(n=se.processModule)||void 0===n||null===(l=n.module)||void 0===l?void 0:l.id)})))||void 0===u?void 0:u.length)>0),Se=(0,i.Z)(Me,2),ke=Se[0],Ie=Se[1],Pe=(0,d.useState)(null===re||void 0===re?void 0:re.component_fields.find((function(e){return"Status"===e.field_name}))),Ne=(0,i.Z)(Pe,1)[0],Te=(0,d.useState)(null===re||void 0===re||null===(r=re.component_items)||void 0===r?void 0:r.find((function(e){return"Payments"===e.type&&(null===e||void 0===e?void 0:e.value)===(null===ye||void 0===ye?void 0:ye.id)}))),De=(0,i.Z)(Te,2),ze=De[0],Ue=De[1],Ae=(0,d.useState)(""),Oe=(0,i.Z)(Ae,2),Re=Oe[0],Le=Oe[1],We=(0,d.useState)(!1),qe=(0,i.Z)(We,2),Fe=qe[0],Be=qe[1],Ye=(0,d.useState)({type:"Match"}),He=(0,i.Z)(Ye,2),je=He[0],Ve=He[1],Je=(0,d.useState)(),Ge=(0,i.Z)(Je,2),Qe=Ge[0],Ke=Ge[1],Xe=(null===ye||void 0===ye?void 0:ye.id)===(null===re||void 0===re||null===(s=re.created_by)||void 0===s?void 0:s.id),$e=(null===re||void 0===re||null===(v=re.component_fields.find((function(e){return"Sport"===e.field_name})))||void 0===v||v.value,null===re||void 0===re||null===(c=re.component_fields.find((function(e){return"Type"===e.field_name})))||void 0===c||c.value,null===re||void 0===re||null===(p=re.component_fields.find((function(e){return"Notes"===e.field_name})))||void 0===p||p.value,null===re||void 0===re?void 0:re.component_fields.find((function(e){return"Club"===e.field_name}))),en=fe.find((function(e){var n;return e.module_id===(null===$e||void 0===$e||null===(n=$e.options)||void 0===n?void 0:n.module_id)&&(null===e||void 0===e?void 0:e.component_fields.find((function(e){return e.value===(null===$e||void 0===$e?void 0:$e.value)})))})),nn=(null===en||void 0===en||en.component_fields.find((function(e){return"Value Button"===e.data_type_name&&(null===e||void 0===e?void 0:e.value)})),_=null===en||void 0===en||null===(y=en.component_fields.find((function(e){return"My Community"===e.field_name})))||void 0===y?void 0:y.value,null!==(T=null===re||void 0===re?void 0:re.component_fields.find((function(e){return"Private"===e.field_name})))&&void 0!==T&&T),ln="".concat(N()(new Date(null===re||void 0===re||null===(D=re.component_fields.find((function(e){return"Meet Date"===e.field_name})))||void 0===D?void 0:D.value)).format("DD MMM YYYY hh:mm A")),on=null===re||void 0===re?void 0:re.component_fields.find((function(e){return"Fee"===e.field_name})),tn=function(){return d.createElement("div",null,!(we||Xe)&&!nn&&!("Closed"===(null===re||void 0===re?void 0:re.status)||"Done"===(null===re||void 0===re?void 0:re.status)||"Cancelled"===(null===re||void 0===re?void 0:re.status)||"Expired"===(null===re||void 0===re?void 0:re.status))&&d.createElement(x.zx,{title:"Join Meet",clicked:function(){var e,n,l;xe(!0),(0,C.KL)((0,o.Z)((0,o.Z)({},re),{},{component_items:re.component_items.filter((function(e){return e.value!==ye.id&&"Unavailable"===e.type}))}),re.id,[].concat((0,t.Z)(null!==(e=null===(n=re.shared_users)||void 0===n?void 0:n.map((function(e){return e.id})))&&void 0!==e?e:[]),[null===ye||void 0===ye?void 0:ye.id]),null===re||void 0===re?void 0:re.title,null===re||void 0===re?void 0:re.is_complete,null===re||void 0===re||null===(l=re.shared_positions)||void 0===l?void 0:l.map((function(e){return null===e||void 0===e?void 0:e.id}))).subscribe({next:function(e){var n;re.shared_users=null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.shared_users,Ze(!0),xe(!1)},error:function(){return xe(!1)}})},style:{width:"100%",backgroundColor:"green"},loading:be}),!we&&Xe&&!("Closed"===(null===re||void 0===re?void 0:re.status)||"Done"===(null===re||void 0===re?void 0:re.status)||"Cancelled"===(null===re||void 0===re?void 0:re.status)||"Expired"===(null===re||void 0===re?void 0:re.status))&&d.createElement(x.zx,{title:"Participate as Player",clicked:function(){var e,n,l;xe(!0),(0,C.KL)((0,o.Z)((0,o.Z)({},re),{},{component_items:re.component_items.filter((function(e){return e.value!==ye.id&&"Unavailable"===e.type}))}),re.id,[].concat((0,t.Z)(null!==(e=null===(n=re.shared_users)||void 0===n?void 0:n.map((function(e){return e.id})))&&void 0!==e?e:[]),[null===ye||void 0===ye?void 0:ye.id]),null===re||void 0===re?void 0:re.title,null===re||void 0===re?void 0:re.is_complete,null===re||void 0===re||null===(l=re.shared_positions)||void 0===l?void 0:l.map((function(e){return null===e||void 0===e?void 0:e.id}))).subscribe({next:function(e){var n;re.shared_users=null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.shared_users,Ze(!0),xe(!1)},error:function(){return xe(!1)}})},style:{width:"100%",backgroundColor:"green"},loading:be}),we&&on&&!Xe&&!ze&&d.createElement(x.zx,{disabled:+(null===ye||void 0===ye?void 0:ye.wallet)<+(null===on||void 0===on?void 0:on.value),title:"Pay ".concat(null===on||void 0===on?void 0:on.field_name),clicked:function(){+(null===ye||void 0===ye?void 0:ye.wallet)>+(null===on||void 0===on?void 0:on.value)?(xe(!0),(0,R.e_)({user_id:ye.id,id:(0,f.mR)(),total:-+(null===on||void 0===on?void 0:on.value),product:"PY-".concat(null===re||void 0===re?void 0:re.id),notes:"Wallet",quantity:1}).pipe((0,Z.P)()).subscribe({next:function(){var e,n,l,o,t;ye.wallet=+(+(null!==(e=null===ye||void 0===ye?void 0:ye.wallet)&&void 0!==e?e:0)-+(null===on||void 0===on?void 0:on.value)),(0,C.np)({index:null===re||void 0===re||null===(n=re.component_items)||void 0===n?void 0:n.length,item_code:null===se||void 0===se||null===(l=se.processModule)||void 0===l||null===(o=l.module)||void 0===o?void 0:o.id,type:"Payments",value:null===ye||void 0===ye?void 0:ye.id,alt_value:null===re||void 0===re||null===(t=re.created_by)||void 0===t?void 0:t.id,total:null===on||void 0===on?void 0:on.value},re.id).subscribe({next:function(e){var n,l;Ue(null===e||void 0===e||null===(n=e.component_items)||void 0===n?void 0:n.find((function(e){return"Payments"===e.type&&(null===e||void 0===e?void 0:e.value)===(null===ye||void 0===ye?void 0:ye.id)}))),(0,R.e_)({user_id:null===re||void 0===re||null===(l=re.created_by)||void 0===l?void 0:l.id,id:(0,f.mR)(),total:+(null===on||void 0===on?void 0:on.value),product:"CR-".concat(null===re||void 0===re?void 0:re.id),notes:"Wallet",quantity:1}).pipe((0,Z.P)()).subscribe({next:function(){return xe(!1)},error:function(){return xe(!1)}})},error:function(){return xe(!1)}})}})):Le("Insufficient wallet balance. ( Available: ".concat(null===ye||void 0===ye?void 0:ye.wallet,")"))},style:{width:"100%",backgroundColor:"green"},loading:be}),Re&&d.createElement("p",{style:{fontFamily:"var(--app-text-mobile-font)",fontSize:"14px",fontWeight:"bold"},onClick:function(){return Le("")}},Re),we&&!Xe&&!("Closed"===(null===re||void 0===re?void 0:re.status)||"Done"===(null===re||void 0===re?void 0:re.status)||"Cancelled"===(null===re||void 0===re?void 0:re.status)||"Expired"===(null===re||void 0===re?void 0:re.status))&&d.createElement(x.zx,{title:"Cant Join",clicked:function(){var e,n,l,i,d,a,u;xe(!0),(0,C.KL)((0,o.Z)((0,o.Z)({},re),{},{component_items:[].concat((0,t.Z)(null!==(e=null===re||void 0===re?void 0:re.component_items)&&void 0!==e?e:[]),[{index:null===re||void 0===re||null===(n=re.component_items)||void 0===n?void 0:n.length,item_code:null===se||void 0===se||null===(l=se.processModule)||void 0===l||null===(i=l.module)||void 0===i?void 0:i.id,type:"Unavailable",value:null===ye||void 0===ye?void 0:ye.id}])}),re.id,null===(d=re.shared_users)||void 0===d||null===(a=d.filter((function(e){return e.id!==(null===ye||void 0===ye?void 0:ye.id)})))||void 0===a?void 0:a.map((function(e){return e.id})),null===re||void 0===re?void 0:re.title,null===re||void 0===re?void 0:re.is_complete,null===re||void 0===re||null===(u=re.shared_positions)||void 0===u?void 0:u.map((function(e){return null===e||void 0===e?void 0:e.id}))).subscribe({next:function(e){var n,l;re.shared_users=null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.shared_users,re.component_items=null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.component_items,Ze(!1),xe(!1)},error:function(){return xe(!1)}})},style:{width:"100%"},loading:be}),!(we||Xe)&&!ke&&nn&&!("Closed"===(null===re||void 0===re?void 0:re.status)||"Done"===(null===re||void 0===re?void 0:re.status)||"Cancelled"===(null===re||void 0===re?void 0:re.status)||"Expired"===(null===re||void 0===re?void 0:re.status))&&d.createElement(x.zx,{title:"Request to Join Meet",clicked:function(){var e,n,l;xe(!0),(0,C.np)({index:null===re||void 0===re||null===(e=re.component_items)||void 0===e?void 0:e.length,item_code:null===se||void 0===se||null===(n=se.processModule)||void 0===n||null===(l=n.module)||void 0===l?void 0:l.id,type:"Request",value:null===ye||void 0===ye?void 0:ye.id},re.id).subscribe({next:function(){Ie(!0),xe(!1)},error:function(){return xe(!1)}})},style:{width:"100%",backgroundColor:"var(--app-color-blue)"},loading:be}))},dn=function(){var e,n,l,i,a,u=[].concat((0,t.Z)(me),[ye]).find((function(e){return e.id===je.value})),r=[].concat((0,t.Z)(me),[ye]).find((function(e){return e.id===je.alt_value})),s=JSON.parse(je.item_code);return d.createElement("div",{className:E.mobilePopupActionContainer},d.createElement("div",{style:{fontFamily:"var(--app-text-mobile-font)",fontSize:"18px",fontWeight:"bold"}},null===s||void 0===s?void 0:s.round),d.createElement("div",{style:{fontFamily:"var(--app-text-mobile-font)",fontSize:"12px",marginTop:"5px"}},"Date: ".concat(N()(null===s||void 0===s?void 0:s.date).format("DD MMMM YYYY HH:mm"))),d.createElement("div",{style:{fontFamily:"var(--app-text-mobile-font)",fontSize:"12px",marginTop:"5px"}},"Venue: ".concat(null===s||void 0===s?void 0:s.court)),d.createElement("hr",null),d.createElement("div",{style:{display:"flex",justifyContent:"space-between",width:"100%"}},d.createElement("p",{style:{fontSize:"14px",fontFamily:"var(--app-text-main-font)",fontWeight:"bold",marginRight:"20px",width:"50%"}},"".concat(null!==(e=null===u||void 0===u?void 0:u.first_name)&&void 0!==e?e:"Player"," ").concat(null!==(n=null===u||void 0===u?void 0:u.last_name)&&void 0!==n?n:"1")),d.createElement("p",{style:{textAlign:"right",fontSize:"14px",fontFamily:"var(--app-text-main-font)",fontWeight:"bold",marginRight:"20px",width:"50%"}},"".concat(null!==(l=null===r||void 0===r?void 0:r.first_name)&&void 0!==l?l:"Player"," ").concat(null!==(i=null===r||void 0===r?void 0:r.last_name)&&void 0!==i?i:"2"))),null===s||void 0===s||null===(a=s.matches)||void 0===a?void 0:a.map((function(e,n){return d.createElement("div",{key:n,style:{display:"flex",justifyContent:"space-between",width:"100%"}},d.createElement("input",{defaultValue:null===e||void 0===e?void 0:e.p1,style:{textAlign:"center",width:"50px",height:"50px",margin:"10px"},onChange:function(n){e.p1=n.target.value,je.item_code=JSON.stringify(s)}}),d.createElement("p",{style:{fontSize:"14px",fontFamily:"var(--app-text-main-font)"}},"SET ",e.set),d.createElement("input",{defaultValue:null===e||void 0===e?void 0:e.p2,style:{textAlign:"center",width:"50px",height:"50px",margin:"10px"},onChange:function(n){e.p2=n.target.value,je.item_code=JSON.stringify(s)}}))})),d.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},(Xe||u.id===ye.id||r.id===ye.id)&&d.createElement(x.zx,{light:!0,style:{display:"",backgroundColor:"rgb(246,244,236)"},clicked:function(){xe(!0),(0,C.np)(je,re.id).subscribe({next:function(e){re.component_items=e.data.component_items,xe(!1),Be(!1)},error:function(){return xe(!1)}})},title:"UPDATE",loading:be}),(Xe||u.id===ye.id||r.id===ye.id)&&d.createElement(x.zx,{light:!0,style:{display:"",backgroundColor:"rgb(246,244,236)"},clicked:function(){var e;s.matches.push({p1:0,p2:0,set:(null===s||void 0===s||null===(e=s.matches)||void 0===e?void 0:e.length)+1}),Ve((0,o.Z)((0,o.Z)({},je),{},{item_code:JSON.stringify(s)}))},title:"ADD SET"})))};return d.createElement("div",null,d.createElement("div",{style:{fontFamily:"var(--app-text-mobile-font)",fontSize:g.tq?"18px":"20px",fontWeight:"bold",marginTop:g.tq?"":"50px"}},null===re||void 0===re?void 0:re.title),d.createElement("div",{style:{fontFamily:"var(--app-text-mobile-font)",fontSize:"12px",marginTop:"5px"}},ln),d.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},we&&!Xe&&d.createElement("p",{style:{fontFamily:"var(--app-text-mobile-font)",fontSize:"14px",fontWeight:"bold",marginTop:"30px"}},"You are a participant of this meet"),Xe&&d.createElement("p",{style:{fontFamily:"var(--app-text-mobile-font)",fontSize:"14px",fontWeight:"bold",marginTop:"30px"}},"You are the organizer of this meet"),!Xe&&on&&d.createElement("p",{style:{fontFamily:"var(--app-text-mobile-font)",fontSize:"14px",fontWeight:"bold",marginTop:"30px"}},ze?"PAID":"FEE (".concat(null===on||void 0===on?void 0:on.value,")"))),d.createElement(b.mQ,{style:{width:"100%",fontSize:g.tq?"16px":"20px",marginTop:"20px"}},d.createElement(b.td,{style:{fontFamily:"var(--app-text-mobile-font)",fontSize:g.tq?"14px":"16px"}},d.createElement(b.OK,null,"DETAILS"),d.createElement(b.OK,null,"PARTICIPANTS"),!("New"===re.status||"None"===re.status)&&d.createElement(b.OK,null,"GAMES")),d.createElement(b.x4,{id:"DETAILS"},d.createElement("div",{style:{width:"100%",minHeight:"60vh",overflow:"auto"}},d.createElement("div",{className:E.centeredDiv,style:{width:"inherit",fontSize:"14px",marginTop:"20px"}},e.children,Xe&&"Expired"!==(null===re||void 0===re?void 0:re.status)&&d.createElement("div",{style:{width:"100%",display:""}},d.createElement(O.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-light)"},className:E.multiselectComponent,visible:!0,mandatory:!1,value:null===Ne||void 0===Ne?void 0:Ne.value,items:null===Ne||void 0===Ne||null===(z=Ne.options)||void 0===z||null===(U=z.list)||void 0===U?void 0:U.map((function(e){return{label:e,value:e}})),onChange:function(e){var n,l;re.status=e,Ne.value=e,xe(!0),(0,C.KL)(re,re.id,null===(n=re.shared_users)||void 0===n?void 0:n.map((function(e){return e.id})),null===re||void 0===re?void 0:re.title,null===re||void 0===re?void 0:re.is_complete,null===re||void 0===re||null===(l=re.shared_positions)||void 0===l?void 0:l.map((function(e){return null===e||void 0===e?void 0:e.id}))).subscribe({next:function(e){xe(!1)},error:function(){return xe(!1)}})},fieldLabel:"Status",placeholder:"Select status..."}))))),d.createElement(b.x4,{id:"PARTICIPANTS"},d.createElement("div",{style:{width:"100%",minHeight:"50vh",overflow:"auto"}},!Xe&&d.createElement("p",{style:{fontSize:"14px",fontFamily:"var(--app-text-main-font)",fontWeight:"bold",color:"var(--app-color-gray-dark)",paddingLeft:"5px"}},"Organizer"),!Xe&&d.createElement("div",{className:E.filtersContainer},d.createElement(I.Z,{simple:!0,photo:null!==(A=null===ye||void 0===ye?void 0:ye.photo)&&void 0!==A?A:"https://s3-symbol-logo.tradingview.com/logo-yazilim--600.png",email:"",position:null!==(L=null===ye||void 0===ye||null===(q=ye.options)||void 0===q?void 0:q.info)&&void 0!==L?L:"",firstName:d.createElement("div",{style:{fontWeight:"bold"}},"".concat(null===re||void 0===re||null===(F=re.created_by)||void 0===F?void 0:F.first_name," ").concat(null===re||void 0===re||null===(B=re.created_by)||void 0===B?void 0:B.last_name)),cardClicked:function(){},width:"100%"})),(null===re||void 0===re||null===(Y=re.shared_users)||void 0===Y?void 0:Y.length)>0&&d.createElement(d.Fragment,null,d.createElement("p",{style:{fontSize:"14px",fontFamily:"var(--app-text-main-font)",fontWeight:"bold",color:"var(--app-color-gray-dark)",paddingLeft:"5px"}},"Participants ( ".concat(null===re||void 0===re||null===(H=re.shared_users)||void 0===H?void 0:H.length," )")),d.createElement(w.default,{className:E.sharesTable,withColumns:!1,modern:!0,columns:["User","Photo","Bio","Pay"],list:null===re||void 0===re||null===(j=re.shared_users)||void 0===j?void 0:j.map((function(e){var n,l,o,t,i,a=me.find((function(n){return n.id===e.id}));return a?(i={},(0,h.Z)(i,"User",d.createElement("div",{style:{fontWeight:"bold"}},"".concat(null===a||void 0===a?void 0:a.first_name," ").concat(null===a||void 0===a?void 0:a.last_name))),(0,h.Z)(i,"Photo",null!==(n=null===a||void 0===a?void 0:a.photo)&&void 0!==n?n:null===pe||void 0===pe?void 0:pe.logo),(0,h.Z)(i,"Bio",null!==(l=null===a||void 0===a||null===(o=a.options)||void 0===o?void 0:o.info)&&void 0!==l?l:""),(0,h.Z)(i,"Pay",on&&Xe?null!==re&&void 0!==re&&null!==(t=re.component_items)&&void 0!==t&&t.find((function(e){return"Payments"===e.type&&(null===e||void 0===e?void 0:e.value)===(null===a||void 0===a?void 0:a.id)}))?"Paid":d.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},d.createElement("p",{style:{fontFamily:"var(--app-text-mobile-font)",fontSize:"14px",fontWeight:"bold"}},"Unpaid"),d.createElement(x.zx,{title:"Remove",clicked:function(){var e,n;xe(!0),(0,C.KL)(re,re.id,null===(e=re.shared_users)||void 0===e?void 0:e.filter((function(e){return e.id!==(null===a||void 0===a?void 0:a.id)})).map((function(e){return e.id})),null===re||void 0===re?void 0:re.title,null===re||void 0===re?void 0:re.is_complete,null===re||void 0===re||null===(n=re.shared_positions)||void 0===n?void 0:n.map((function(e){return null===e||void 0===e?void 0:e.id}))).subscribe({next:function(e){var n;re.component_items=null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.component_items,Ze(!1),xe(!1)},error:function(){return xe(!1)}})},style:{width:"100px"},loading:be})):""),i):{User:null===e||void 0===e?void 0:e.id}}))})),Xe&&(null===re||void 0===re||null===(V=re.component_items)||void 0===V?void 0:V.filter((function(e){return"Unavailable"===e.type})).length)>0&&d.createElement(d.Fragment,null,d.createElement("p",{style:{fontSize:"14px",fontFamily:"var(--app-text-main-font)",fontWeight:"bold",color:"var(--app-color-gray-dark)",paddingLeft:"5px"}},"Unavailable ( ".concat(null===re||void 0===re||null===(J=re.component_items)||void 0===J?void 0:J.filter((function(e){return"Unavailable"===e.type})).length," )")),d.createElement(w.default,{className:E.sharesTable,withColumns:!1,modern:!0,columns:["User","Photo","Bio"],list:null===re||void 0===re||null===(G=re.component_items)||void 0===G||null===(Q=G.filter((function(e){return"Unavailable"===e.type})))||void 0===Q?void 0:Q.map((function(e){var n,l,o,t,i=me.find((function(n){return n.id===e.value}));return t={},(0,h.Z)(t,"User","".concat(null===i||void 0===i?void 0:i.first_name," ").concat(null===i||void 0===i?void 0:i.last_name)),(0,h.Z)(t,"Photo",null!==(n=null===i||void 0===i?void 0:i.photo)&&void 0!==n?n:null===pe||void 0===pe?void 0:pe.logo),(0,h.Z)(t,"Bio",null!==(l=null===i||void 0===i||null===(o=i.options)||void 0===o?void 0:o.info)&&void 0!==l?l:""),t}))})),Xe&&(null===re||void 0===re||null===(K=re.component_items)||void 0===K?void 0:K.filter((function(e){return"Request"===e.type||"Waitlist"===e.type})).length)>0&&d.createElement(d.Fragment,null,d.createElement("p",{style:{fontSize:"14px",fontFamily:"var(--app-text-main-font)",fontWeight:"bold",color:"var(--app-color-gray-dark)",paddingLeft:"5px"}},"Request to Join ( ".concat(null===re||void 0===re||null===(X=re.component_items)||void 0===X?void 0:X.filter((function(e){return"Request"===e.type||"Waitlist"===e.type})).length," )")),null===re||void 0===re||null===($=re.component_items)||void 0===$||null===(ee=$.filter((function(e){return"Request"===e.type||"Waitlist"===e.type})))||void 0===ee?void 0:ee.map((function(e,n){var l=me.find((function(n){return n.id===e.value}));return d.createElement("div",{key:n,style:{display:"flex"},className:E.filtersContainer},d.createElement("p",{style:{fontSize:"14px",fontFamily:"var(--app-text-main-font)",width:"200px",marginRight:"20px"}},"".concat(null===l||void 0===l?void 0:l.first_name," ").concat(null===l||void 0===l?void 0:l.last_name)),d.createElement(x.zx,{title:"Approve",clicked:function(){var e,n,i;xe(!0),(0,C.KL)((0,o.Z)((0,o.Z)({},re),{},{component_items:re.component_items.filter((function(e){return e.value!==l.id&&("Request"===e.type||"Waitlist"===e.type)}))}),re.id,[].concat((0,t.Z)(null!==(e=null===(n=re.shared_users)||void 0===n?void 0:n.map((function(e){return e.id})))&&void 0!==e?e:[]),[null===l||void 0===l?void 0:l.id]),null===re||void 0===re?void 0:re.title,null===re||void 0===re?void 0:re.is_complete,null===re||void 0===re||null===(i=re.shared_positions)||void 0===i?void 0:i.map((function(e){return null===e||void 0===e?void 0:e.id}))).subscribe({next:function(e){var n,l;re.shared_users=null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.shared_users,re.component_items=null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.component_items,xe(!1)},error:function(){return xe(!1)}})},style:{width:"100px",backgroundColor:"green",fontSize:"10px"},titleStyle:{fontSize:"10px"},loading:be}),d.createElement(x.zx,{title:"Decline",clicked:function(){var e,n;xe(!0),(0,C.KL)((0,o.Z)((0,o.Z)({},re),{},{component_items:re.component_items.filter((function(e){return e.value!==l.id&&("Request"===e.type||"Waitlist"===e.type)}))}),re.id,null===(e=re.shared_users)||void 0===e?void 0:e.map((function(e){return e.id})),null===re||void 0===re?void 0:re.title,null===re||void 0===re?void 0:re.is_complete,null===re||void 0===re||null===(n=re.shared_positions)||void 0===n?void 0:n.map((function(e){return null===e||void 0===e?void 0:e.id}))).subscribe({next:function(e){var n;re.component_items=null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.component_items,Ze(!1),xe(!1)},error:function(){return xe(!1)}})},style:{width:"100px"},titleStyle:{fontSize:"10px"},loading:be}),"Request"===e.type?d.createElement(x.zx,{title:"Waitlist",clicked:function(){xe(!0),(0,C.np)((0,o.Z)((0,o.Z)({},e),{},{type:"Waitlist"}),re.id).subscribe({next:function(n){e.type="Waitlist",xe(!1)},error:function(){return xe(!1)}})},style:{width:"100px",backgroundColor:"orange"},titleStyle:{fontSize:"10px"},loading:be}):d.createElement("p",{style:{fontSize:"16px",fontFamily:"var(--app-text-main-font)",fontWeight:"bold"}},"Waitlisted"))}))),ke&&d.createElement(d.Fragment,null,d.createElement("p",{style:{fontSize:"14px",fontFamily:"var(--app-text-main-font)",fontWeight:"bold",color:"var(--app-color-gray-dark)",paddingLeft:"5px"}},(null===(ne=re.component_items)||void 0===ne||null===(le=ne.filter((function(e){var n,l;return(null===e||void 0===e?void 0:e.value)===(null===ye||void 0===ye?void 0:ye.id)&&"Request"===(null===e||void 0===e?void 0:e.type)&&(null===e||void 0===e?void 0:e.item_code)===(null===se||void 0===se||null===(n=se.processModule)||void 0===n||null===(l=n.module)||void 0===l?void 0:l.id)})))||void 0===le?void 0:le.length)>0?"Pending Request":"Waitlisted"),d.createElement("div",{className:E.filtersContainer},d.createElement(I.Z,{simple:!0,photo:null!==(oe=null===ye||void 0===ye?void 0:ye.photo)&&void 0!==oe?oe:"https://s3-symbol-logo.tradingview.com/logo-yazilim--600.png",email:"",position:null!==(te=null===ye||void 0===ye||null===(ie=ye.options)||void 0===ie?void 0:ie.info)&&void 0!==te?te:"",firstName:d.createElement("div",{style:{fontWeight:"bold"}},"".concat(null===ye||void 0===ye?void 0:ye.first_name," ").concat(null===ye||void 0===ye?void 0:ye.last_name)),cardClicked:function(){},width:"100%"}))),d.createElement(tn,null))),!("New"===re.status||"None"===re.status)&&d.createElement(b.x4,{id:"GAMES"},d.createElement("div",{style:{width:"100%",minHeight:"50vh",overflow:"auto"}},ve&&Xe&&d.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end"}},d.createElement(x.zx,{light:!0,style:{display:""},clicked:function(){Be(!0),Ve({type:"Match"})},icon:d.createElement("img",{src:M.IHx})})),d.createElement("p",{style:{fontSize:"14px",fontFamily:"var(--app-text-main-font)",fontWeight:"bold",color:"var(--app-color-gray-dark)",paddingLeft:"5px"}},"Matches ( ".concat(null===re||void 0===re||null===(de=re.component_items)||void 0===de?void 0:de.filter((function(e){return"Match"===e.type})).length," )")),null===re||void 0===re||null===(ae=re.component_items)||void 0===ae||null===(ue=ae.filter((function(e){return"Match"===e.type})))||void 0===ue?void 0:ue.map((function(e,n){var l,o,i,a,u=[].concat((0,t.Z)(me),[ye]).find((function(n){return n.id===e.value})),r=[].concat((0,t.Z)(me),[ye]).find((function(n){return n.id===e.alt_value})),s=JSON.parse(e.item_code),v=s.matches.map((function(e){return"  ".concat(e.p1,"-").concat(e.p2,"  ")})).toString();return d.createElement("div",{key:n,className:E.filtersContainer,onClick:function(){ve&&(Ve(e),Be(!0))}},d.createElement("div",{style:{display:"flex",width:"100%",justifyContent:"space-between"}},d.createElement("div",{style:{fontSize:"14px",fontFamily:"var(--app-text-main-font)",fontWeight:"bold",marginRight:"20px"}},"".concat(null===s||void 0===s?void 0:s.round)),d.createElement("div",{style:{fontSize:"14px",fontFamily:"var(--app-text-main-font)",fontWeight:"bold",marginRight:"20px"}},"".concat(v))),d.createElement("hr",{style:{border:"0.5px solid var(--app-color-gray-light)"}}),d.createElement("div",{style:{display:"flex",marginTop:"5px",width:"100%",justifyContent:"space-between"}},d.createElement("div",{style:{fontSize:"14px",fontFamily:"var(--app-text-main-font)",fontWeight:"bold",marginRight:"20px"}},"".concat(null!==(l=null===r||void 0===r?void 0:r.first_name)&&void 0!==l?l:"Player"," ").concat(null!==(o=null===r||void 0===r?void 0:r.last_name)&&void 0!==o?o:"1")),d.createElement("div",{style:{fontSize:"14px",fontFamily:"var(--app-text-main-font)",fontWeight:"bold",marginRight:"20px"}},"".concat(null!==(i=null===u||void 0===u?void 0:u.first_name)&&void 0!==i?i:"Player"," ").concat(null!==(a=null===u||void 0===u?void 0:u.last_name)&&void 0!==a?a:"2"))))}))),d.createElement("div",{className:Fe?E.mobilepopupopen:E.mobilepopup,style:{display:Fe?"":"none"}},d.createElement("div",{style:{width:"100%",height:"20vh",backgroundColor:"white",opacity:"0.9"},onClick:function(){return Be(!1)}}),null!==je&&void 0!==je&&je.id?d.createElement(dn,null):d.createElement("div",{className:E.mobilePopupActionContainer},d.createElement(O.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-light)"},className:E.multiselectComponent,visible:!0,mandatory:!1,items:re.shared_users.map((function(e,n){var l=me.find((function(n){return n.id===e.id}));return l?{label:"".concat(null===l||void 0===l?void 0:l.first_name," ").concat(null===l||void 0===l?void 0:l.last_name),value:e.id}:{label:"Player ".concat(n+1),value:n}})),onChange:function(e){Ve((0,o.Z)((0,o.Z)({},je),{},{value:e}))},fieldLabel:"Player 1",placeholder:"Select player 1"}),d.createElement(O.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-light)"},className:E.multiselectComponent,visible:!0,mandatory:!1,items:re.shared_users.map((function(e){var n=me.find((function(n){return n.id===e.id}));return{label:"".concat(n.first_name," ").concat(n.last_name),value:e.id}})),onChange:function(e){Ve((0,o.Z)((0,o.Z)({},je),{},{alt_value:e}))},fieldLabel:"Player 2",placeholder:"Select player 2"}),d.createElement(O.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-light)"},className:E.multiselectComponent,visible:!0,mandatory:!1,items:[{label:"Round 1",value:"Round 1"},{label:"Round 2",value:"Round 2"},{label:"Round 3",value:"Round 3"},{label:"Round 4",value:"Round 4"},{label:"Round 5",value:"Round 5"},{label:"Round 6",value:"Round 6"},{label:"Round 7",value:"Round 7"},{label:"Round 8",value:"Round 8"},{label:"Round 9",value:"Round 9"}],onChange:function(e){var n,l=JSON.parse(null!==(n=null===je||void 0===je?void 0:je.item_code)&&void 0!==n?n:"{}");l.round=e,l.matches=[{p1:0,p2:0,set:1}],Ve((0,o.Z)((0,o.Z)({},je),{},{item_code:JSON.stringify(l)}))},fieldLabel:"Round",placeholder:"Select Round"}),d.createElement("label",{className:E.fieldLabel,style:{color:"var(--app-color-gray-light",fontSize:"12px",marginTop:"10px"}},"Date and Time"),d.createElement("div",{className:E.filtersContainer,style:{height:"60px",border:"2px solid var(--app-color-gray-lighter)",padding:"10px",marginTop:"10px"}},d.createElement(W(),{showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:5,customInput:d.createElement("div",{id:"custom-input",style:{cursor:"pointer",display:"flex",justifyContent:"center",width:"100%",alignItems:"stretch",padding:"5px",border:"0px solid var(--app-color-gray-lighter)",backgroundColor:"rgb(246,244,236)"}},d.createElement(S.G,{icon:k.WRo,style:{marginLeft:"10px",width:"20px",height:"20px"}}),d.createElement("input",{value:Qe?N()(Qe).format("DD MMMM YYYY HH:mm"):"",disabled:!0,type:"text",style:{flex:1,outline:"none",fontFamily:"var(--app-text-main-font)",fontSize:"16px",fontWeight:"bold",lineHeight:"20px",color:"#4A4A4A",textAlign:"left",maxWidth:"98%",border:"0px",backgroundColor:"rgb(246,244,236)"},onChange:function(e){}})),className:E.singleInputContainer,selected:Qe?new Date(N()(Qe)):(0,P.now)(),onChange:function(e){if(e>(0,P.now)()){var n;Ke(e);var l=JSON.parse(null!==(n=null===je||void 0===je?void 0:je.item_code)&&void 0!==n?n:"{}");l.date=e,l.matches=[{p1:0,p2:0,set:1}],Ve((0,o.Z)((0,o.Z)({},je),{},{item_code:JSON.stringify(l)}))}}})),d.createElement(O.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-light)"},className:E.multiselectComponent,visible:!0,mandatory:!1,items:[{label:"Court 1",value:"Court 1"},{label:"Court 2",value:"Court 2"},{label:"Court 3",value:"Court 3"},{label:"Court 4",value:"Court 4"},{label:"Court 5",value:"Court 5"},{label:"Court 6",value:"Court 6"},{label:"Court 7",value:"Court 7"},{label:"Court 8",value:"Court 8"},{label:"Court 9",value:"Court 9"}],onChange:function(e){var n,l=JSON.parse(null!==(n=null===je||void 0===je?void 0:je.item_code)&&void 0!==n?n:"{}");l.court=e,l.matches=[{p1:0,p2:0,set:1}],Ve((0,o.Z)((0,o.Z)({},je),{},{item_code:JSON.stringify(l)}))},fieldLabel:"Court",placeholder:"Select Court"}),(null===je||void 0===je?void 0:je.value)&&(null===je||void 0===je?void 0:je.alt_value)&&(null===je||void 0===je?void 0:je.item_code)&&d.createElement(x.zx,{title:"Create match",style:{width:"100%"},clicked:function(){var e;xe(!0),(0,C.np)((0,o.Z)((0,o.Z)({},je),{},{index:null===re||void 0===re||null===(e=re.component_items)||void 0===e?void 0:e.length}),re.id).subscribe({next:function(e){re.component_items=e.data.component_items,xe(!1),Be(!1)},error:function(){return xe(!1)}})},loading:be}))))))},B=function(e){var n=e.begunModule,l=e.authenticatedUser,a=(e.user,e.template,(0,m.v9)((function(e){return e.flowReducer}))),u=(a.companyData,a.companyUsersArray,a.components),r=(a.companyPositionsArray,a.allModules,a.companyProcesses,(0,d.useState)(!1)),s=(0,i.Z)(r,2),v=s[0],c=s[1],p=u.filter((function(e){return e.module_id===n.processModule.module_id&&e.component_items.find((function(e){return"Invite"===e.type&&e.value===l.id}))})).map((function(e){return(0,o.Z)((0,o.Z)({},e.component_items.find((function(e){return"Invite"===e.type&&e.value===l.id}))),{},{club:e})}));return d.createElement("div",{style:{width:"100%",padding:"0 20px",fontFamily:"var(--app-text-main-font)"}},null===p||void 0===p?void 0:p.map((function(e,n){return d.createElement("div",{className:E.filtersContainer,key:n,style:{border:"0"}},d.createElement(I.Z,{photo:"https://s3-symbol-logo.tradingview.com/logo-yazilim--600.png",firstName:d.createElement("div",{style:{fontWeight:"bold"}},"".concat(e.club.title)),position:"has invited you to join their club",email:"",ccardClicked:function(){var n,i,d,a,u;c(!0),(0,C.KL)((0,o.Z)((0,o.Z)({},e.club),{},{component_items:e.club.component_items.filter((function(n){return n.id!==e.id}))}),e.club.id,[].concat((0,t.Z)(null!==(n=null===(i=e.club.shared_users)||void 0===i?void 0:i.map((function(e){return e.id})))&&void 0!==n?n:[]),[null===l||void 0===l?void 0:l.id]),e.club.title,null===(d=e.club)||void 0===d?void 0:d.is_complete,null===e||void 0===e||null===(a=e.club)||void 0===a||null===(u=a.shared_positions)||void 0===u?void 0:u.map((function(e){return null===e||void 0===e?void 0:e.id}))).subscribe({next:function(n){var l;e.club.shared_users=null===n||void 0===n||null===(l=n.data)||void 0===l?void 0:l.shared_users,c(!1)},error:function(){return c(!1)}})},width:"100%"},d.createElement("div",{style:{display:"flex",justifyContent:"space-evenly"}},d.createElement(x.zx,{title:"Accept",clicked:function(){var n,i,d,a,u;c(!0),(0,C.KL)((0,o.Z)((0,o.Z)({},e.club),{},{component_items:e.club.component_items.filter((function(n){return n.id!==e.id}))}),e.club.id,[].concat((0,t.Z)(null!==(n=null===(i=e.club.shared_users)||void 0===i?void 0:i.map((function(e){return e.id})))&&void 0!==n?n:[]),[null===l||void 0===l?void 0:l.id]),e.club.title,null===(d=e.club)||void 0===d?void 0:d.is_complete,null===e||void 0===e||null===(a=e.club)||void 0===a||null===(u=a.shared_positions)||void 0===u?void 0:u.map((function(e){return null===e||void 0===e?void 0:e.id}))).subscribe({next:function(n){var l;e.club.shared_users=null===n||void 0===n||null===(l=n.data)||void 0===l?void 0:l.shared_users,c(!1)},error:function(){return c(!1)}})},style:{width:"80px",backgroundColor:"blue"},titleStyle:{fontSize:"12px"},loading:v}),d.createElement(x.zx,{title:"Decline",clicked:function(){var n,l,t,i;c(!0),(0,C.KL)((0,o.Z)((0,o.Z)({},e.club),{},{component_items:e.club.component_items.filter((function(n){return n.id!==e.id}))}),e.club.id,null===(n=e.club.shared_users)||void 0===n?void 0:n.map((function(e){return e.id})),e.club.title,null===(l=e.club)||void 0===l?void 0:l.is_complete,null===e||void 0===e||null===(t=e.club)||void 0===t||null===(i=t.shared_positions)||void 0===i?void 0:i.map((function(e){return null===e||void 0===e?void 0:e.id}))).subscribe({next:function(e){c(!1)},error:function(){return c(!1)}})},style:{width:"80px",backgroundColor:"red"},titleStyle:{fontSize:"12px"},loading:v}))))})))},Y=function(e){var n=e.events,l=e.onEventClick,o=e.isAdmin,t=void 0===o||o,a=(0,d.useState)("day"),u=(0,i.Z)(a,2),r=u[0],s=u[1];return d.createElement(U.Scheduler,{style:{fontFamily:"var(--app-text-main-font)",fontSize:"30px"},events:null===n||void 0===n?void 0:n.map((function(e){var n,l,o=null===(n=e.component_fields.find((function(e){return"Meet Date"===e.field_name&&"Date"===e.data_type_name})))||void 0===n?void 0:n.value,t=null===(l=e.component_fields.find((function(e){return"Ends"===e.field_name&&"Date"===e.data_type_name})))||void 0===l?void 0:l.value;return{event_id:e.id,title:e.title,start:new Date(Date.parse(o)),end:new Date(Date.parse(t)),admin_id:e.id,editable:!1,deletable:!1}})),agenda:!0,navigation:t,alwaysShowAgendaDays:!1,view:r,onEventClick:l,onViewChange:function(e){return s(e)}})},H=function(e){var n,l,a,u,r,s,v=e.selectedComponent,c=e.begunModule,p=e.goto,y=e.setSelectedComponent,I=(0,m.v9)((function(e){return e.flowReducer})),P=I.companyData,N=I.companyUsersArray,U=I.components,L=I.allModules,W=I.companyProcesses,q=(0,m.v9)((function(e){return e.authReducer})),F=q.authenticatedUser,B=(0,d.useState)(!1),H=(0,i.Z)(B,2),j=H[0],V=H[1],J=(0,d.useState)(!1),G=(0,i.Z)(J,2)[1],Q=(0,_.pQ)(),K=(0,i.Z)(Q,2)[1],X=(0,d.useState)(null===v||void 0===v||null===(n=v.component_items)||void 0===n?void 0:n.find((function(e){return"Payments"===e.type&&(null===e||void 0===e?void 0:e.value)===(null===F||void 0===F?void 0:F.id)}))),$=(0,i.Z)(X,2),ee=$[0],ne=($[1],(0,d.useState)("")),le=(0,i.Z)(ne,2),oe=le[0],te=le[1],ie=(0,d.useState)(!1),de=(0,i.Z)(ie,2),ae=de[0],ue=de[1],re=(0,d.useState)(!1),se=(0,i.Z)(re,2),ve=(se[0],se[1]),ce=(0,d.useState)([]),pe=(0,i.Z)(ce,2),me=pe[0],fe=pe[1],_e=(0,d.useState)({type:"Service"}),ye=(0,i.Z)(_e,2),he=ye[0],ge=ye[1],be=(null===F||void 0===F?void 0:F.id)===(null===v||void 0===v||null===(l=v.created_by)||void 0===l?void 0:l.id),xe=(null===v||void 0===v||v.component_fields.find((function(e){return"Club"===e.field_name})),null===L||void 0===L?void 0:L.find((function(e){return"Meets"===(null===e||void 0===e?void 0:e.name)})));return d.createElement("div",null,d.createElement("div",{style:{fontFamily:"var(--app-text-mobile-font)",fontSize:g.tq?"18px":"20px",fontWeight:"bold",marginTop:g.tq?"":"50px"}},null===v||void 0===v?void 0:v.title),d.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},be&&d.createElement("p",{style:{fontFamily:"var(--app-text-mobile-font)",fontSize:"14px",fontWeight:"bold",marginTop:"30px"}},"You are the admin of this facility")),d.createElement(b.mQ,{style:{width:"100%",fontSize:g.tq?"12px":"20px",marginTop:"20px"},onSelect:function(e){3==e&&(0,R.GP)().pipe((0,Z.P)()).subscribe({next:function(e){fe(e.data)},error:function(){}})}},d.createElement(b.td,{style:{fontFamily:"var(--app-text-mobile-font)",fontSize:g.tq?"10px":"16px"}},d.createElement(b.OK,null,"INFO"),d.createElement(b.OK,null,"ACTIVITIES"),d.createElement(b.OK,null,"SERVICES"),d.createElement(b.OK,null,"PURCHASES")),d.createElement(b.x4,{id:"DETAILS"},d.createElement("div",{style:{width:"100%",minHeight:"60vh",overflow:"auto"}},d.createElement("div",{className:E.centeredDiv,style:{width:"inherit",fontSize:"14px",marginTop:"20px"}},e.children))),d.createElement(b.x4,{id:"ACTIVITIES"},d.createElement("div",{style:{width:"100%",minHeight:"60vh",overflow:"auto",zIndex:"-1"}},d.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end"}},d.createElement(x.zx,{light:!0,style:{display:be?"":"none"},clicked:function(){var e=function(e){var n,l,i,d,a,u,r=e.steps.filter((function(n){var l,o,t,i,d,a;return void 0==(null===n||void 0===n||null===(l=n.options)||void 0===l?void 0:l.showStepAll)||1==(null===n||void 0===n||null===(o=n.options)||void 0===o?void 0:o.showStepAll)||0==(null===n||void 0===n||null===(t=n.options)||void 0===t?void 0:t.showStepAll)&&(null===n||void 0===n||null===(i=n.options)||void 0===i||null===(d=i.showOnly)||void 0===d?void 0:d.filter((function(e){return F.positions.map((function(e){return e.id})).indexOf(e)>-1})).length)>0||(null===n||void 0===n||null===(a=n.options)||void 0===a?void 0:a.showStepAuthor)&&(null===F||void 0===F?void 0:F.id)===(null===e||void 0===e?void 0:e.user_id)})).map((function(e,n){return(0,o.Z)((0,o.Z)({},e),{},{rank:n+1})}));T.h.dispatch((0,D.q4)(e)),T.h.dispatch((0,D.an)([e],f.Qc)),T.h.dispatch((0,D.q4)((0,o.Z)((0,o.Z)({},e),{},{completeSteps:e.steps,steps:r,stepIndex:2,module_id:xe.id,module:xe,isUpdating:!1}))),K({action:_._U.setCurrentStep,value:null===e||void 0===e?void 0:e.steps[2]}),K({action:_._U.setModuleItems,value:v.component_items}),K({action:_._U.setModuleNewStepComponents,value:[]}),K({action:_._U.setComponents,value:[]});var s=(0,t.Z)(null!==(n=null===(l=r[2])||void 0===l?void 0:l.component_blueprints)&&void 0!==n?n:[]);if((null===s||void 0===s?void 0:s.length)>0){var p,m=null===(p=s.find((function(e){return e.selected_fields.find((function(e){return"Sport"===e.field_name}))})))||void 0===p?void 0:p.selected_fields.find((function(e){return"Sport"===e.field_name}));m&&(m.value="Basketball"),K({action:_._U.setComponentBlueprints,value:s}),K({action:_._U.setModuleNewStepComponents,value:s})}(null===c||void 0===c||null===(i=c.processModule)||void 0===i||null===(d=i.steps)||void 0===d?void 0:d.length)>0&&(null===c||void 0===c||null===(a=c.processModule)||void 0===a||null===(u=a.steps)||void 0===u||u.filter((function(e){var n;return null===e||void 0===e||null===(n=e.component_blueprints)||void 0===n?void 0:n.filter((function(e){return e.selected_fields.filter((function(e){return e.value=void 0}))}))})))};W.find((function(e){return e.id===xe.procedure.id}))?e(W.find((function(e){return e.id===xe.procedure.id}))):(V(!0),(0,z.zJ)(xe.procedure.id).pipe((0,Z.P)()).subscribe({next:function(n){V(!1),e(n)},error:function(e){}}))},icon:d.createElement("img",{src:M.IHx})})),d.createElement(Y,{events:U.filter((function(e){return"Expired"!==e.status&&e.module_id===(null===xe||void 0===xe?void 0:xe.id)})),isAdmin:be,onEventClick:function(e){var n=U.find((function(n){return n.id===(null===e||void 0===e?void 0:e.event_id)}));p&&(0,A.navigateToTransaction)(W,y,ve,P,n,K,F,c,F,L,G,N,xe)}}))),d.createElement(b.x4,{id:"SERVICES"},d.createElement("div",{style:{width:"100%",minHeight:"60vh",overflow:"auto"}},d.createElement("div",{className:E.centeredDiv,style:{width:"inherit",fontSize:"14px",marginTop:"20px"}},be&&d.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end"}},d.createElement(x.zx,{light:!0,style:{display:""},clicked:function(){ue(!0),ge({type:"Service"})},icon:d.createElement("img",{src:M.IHx,loading:j})})),(null===v||void 0===v||null===(a=v.component_items)||void 0===a?void 0:a.filter((function(e){return"Service"===e.type})).length)>0&&d.createElement(d.Fragment,null,d.createElement("p",{style:{fontSize:"14px",fontFamily:"var(--app-text-main-font)",fontWeight:"bold",color:"var(--app-color-gray-dark)",paddingLeft:"5px"}},"Merchandise and Services"),oe&&d.createElement("p",{style:{fontFamily:"var(--app-text-mobile-font)",color:"green",fontSize:"14px",fontWeight:"bold"},onClick:function(){return te("")}},oe),d.createElement(w.default,{className:E.sharesTable,withColumns:!1,modern:!0,columns:["value","description","quantity","item_code","photo","controls"],list:null===v||void 0===v||null===(u=v.component_items)||void 0===u||null===(r=u.filter((function(e){return"Service"===e.type})))||void 0===r?void 0:r.map((function(e,n){var l;return e.qty=null!==(l=null===e||void 0===e?void 0:e.qty)&&void 0!==l?l:1,{item_code:null===e||void 0===e?void 0:e.item_code,value:null===e||void 0===e?void 0:e.value,quantity:null===e||void 0===e?void 0:e.total,description:null===e||void 0===e?void 0:e.alt_value,photo:null===e||void 0===e?void 0:e.quantity,controls:d.createElement("div",{style:{display:"flex",justifyContent:"left",justifyItems:"center",alignContent:"center",alignItems:"center"}},!be&&d.createElement(x.zx,{light:!0,title:"Purchase",disabled:void 0===(null===F||void 0===F?void 0:F.wallet)||(null===F||void 0===F?void 0:F.wallet)<+(null===e||void 0===e?void 0:e.total),clicked:function(){V(!0),(0,R.e_)({user_id:F.id,id:(0,f.mR)(),total:-+(null===e||void 0===e?void 0:e.total)*(null===e||void 0===e?void 0:e.qty),product:"".concat(null===e||void 0===e?void 0:e.alt_value),notes:"Purchases",quantity:null===e||void 0===e?void 0:e.qty}).pipe((0,Z.P)()).subscribe({next:function(){var n;F.wallet=+(+(null!==(n=null===F||void 0===F?void 0:F.wallet)&&void 0!==n?n:0)+ee),V(!1),te("You have bought ".concat(e.qty,"x ").concat(null===e||void 0===e?void 0:e.alt_value,". You may claim the item/s")),window.scrollTo({top:0,behavior:"smooth"})},error:function(){return V(!1)}})},loading:0===n&&j}),!be&&d.createElement("input",{type:"number",defaultValue:null===e||void 0===e?void 0:e.qty,style:{textAlign:"center",width:"50px",height:"40px",margin:"0 10px 0 0",fontFamily:"var(--app-text-main-font)",fontSize:"16px"},onChange:function(n){e.qty=+n.target.value}}),be&&d.createElement(x.zx,{light:!0,icon:d.createElement(S.G,{icon:k.$aW,style:{width:"20px",height:"16px"}}),disabled:void 0===(null===F||void 0===F?void 0:F.wallet)||(null===F||void 0===F?void 0:F.wallet)<+(null===e||void 0===e?void 0:e.total),clicked:function(){var n,l,t;V(!0),(0,C.KL)((0,o.Z)((0,o.Z)({},v),{},{component_items:null===v||void 0===v||null===(n=v.component_items)||void 0===n?void 0:n.filter((function(n){return(null===n||void 0===n?void 0:n.id)!==(null===e||void 0===e?void 0:e.id)}))}),v.id,null===(l=v.shared_users)||void 0===l?void 0:l.map((function(e){return e.id})),v.title,null===v||void 0===v?void 0:v.is_complete,null===v||void 0===v||null===(t=v.shared_positions)||void 0===t?void 0:t.map((function(e){return null===e||void 0===e?void 0:e.id}))).subscribe({next:function(e){y(null===e||void 0===e?void 0:e.data),V(!1)},error:function(){return V(!1)}})}}))}}))})),d.createElement("p",{style:{fontSize:"14px",fontFamily:"var(--app-text-main-font)",color:"var(--app-color-gray-dark)",paddingLeft:"5px"}},"Note: Some products and services here may require credits to be available in your app wallet")))),d.createElement(b.x4,{id:"PURCHASES"},d.createElement("div",{style:{width:"100%",minHeight:"60vh",overflow:"auto"}},oe&&d.createElement("p",{style:{fontFamily:"var(--app-text-mobile-font)",color:"green",fontSize:"14px",fontWeight:"bold"},onClick:function(){return te("")}},oe),d.createElement(w.default,{className:E.sharesTable,modern:!0,columns:["Item","Cost","Quantity","Sold To"].concat(be?["Options"]:[]),list:null===me||void 0===me||null===(s=me.filter((function(e){return"Purchases"===e.stripe_status&&(be?e.user_id!==(null===F||void 0===F?void 0:F.id):e.user_id===(null===F||void 0===F?void 0:F.id))})))||void 0===s?void 0:s.map((function(e,n){var l,o;return o={Item:e.stripe_product,Cost:Math.abs(+(null===e||void 0===e?void 0:e.stripe_price)),Quantity:null===e||void 0===e?void 0:e.quantity},(0,h.Z)(o,"Sold To",null===(l=N.find((function(n){return n.id===(null===e||void 0===e?void 0:e.user_id)})))||void 0===l?void 0:l.first_name),(0,h.Z)(o,"Options",me.find((function(n){return n.stripe_id===e.id}))?null:d.createElement("div",{style:{display:"flex",justifyContent:"left",justifyItems:"center",alignContent:"center",alignItems:"center"}},be&&d.createElement(x.zx,{light:!0,title:"Release",disabled:void 0===(null===F||void 0===F?void 0:F.wallet)||(null===F||void 0===F?void 0:F.wallet)<+(null===e||void 0===e?void 0:e.total),clicked:function(){V(!0),(0,R.e_)({user_id:F.id,id:null===e||void 0===e?void 0:e.id,total:-+(null===e||void 0===e?void 0:e.stripe_price),product:"".concat(null===e||void 0===e?void 0:e.stripe_product),notes:"Purchases",quantity:null===e||void 0===e?void 0:e.quantity}).pipe((0,Z.P)()).subscribe({next:function(n){var l;fe([].concat((0,t.Z)(me),[n])),F.wallet=+(+(null!==(l=null===F||void 0===F?void 0:F.wallet)&&void 0!==l?l:0)+ +(null===n||void 0===n?void 0:n.stripe_price)),te("You have sold ".concat(e.qty,"x ").concat(null===e||void 0===e?void 0:e.stripe_product)),V(!1),window.scrollTo({top:0,behavior:"smooth"})},error:function(){return V(!1)}})},loading:0===n&&j}))),o}))})))),d.createElement("div",{className:ae?E.mobilepopupopen:E.mobilepopup,style:{display:ae?"":"none"}},d.createElement("div",{style:{width:"100%",height:"20vh",backgroundColor:"white",opacity:"0.9"},onClick:function(){return ue(!1)}}),d.createElement("div",{className:E.mobilePopupActionContainer},d.createElement(O.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-light)"},className:E.multiselectComponent,visible:!0,mandatory:!1,items:[{label:"Court Rental",value:"Court Rental"},{label:"Equipment Rental",value:"Equipment Rental"},{label:"Food",value:"Food"},{label:"Others",value:"Others"}],onChange:function(e){ge((0,o.Z)((0,o.Z)({},he),{},{item_code:e}))},fieldLabel:"Service Type",placeholder:"Select Service"}),d.createElement("label",{className:E.fieldLabel,style:{color:"var(--app-color-gray-light",fontSize:"12px",marginTop:"10px"}},"Name"),d.createElement("input",{type:"text",className:E.fieldInput,onChange:function(e){ge((0,o.Z)((0,o.Z)({},he),{},{value:e.target.value}))}}),d.createElement("label",{className:E.fieldLabel,style:{color:"var(--app-color-gray-light",fontSize:"12px",marginTop:"10px"}},"Description"),d.createElement("input",{type:"text",className:E.fieldInput,onChange:function(e){ge((0,o.Z)((0,o.Z)({},he),{},{alt_value:e.target.value}))}}),d.createElement("label",{className:E.fieldLabel,style:{color:"var(--app-color-gray-light",fontSize:"12px",marginTop:"10px"}},"Photo"),d.createElement("input",{type:"text",className:E.fieldInput,onChange:function(e){ge((0,o.Z)((0,o.Z)({},he),{},{quantity:e.target.value}))}}),d.createElement("label",{className:E.fieldLabel,style:{color:"var(--app-color-gray-light",fontSize:"12px",marginTop:"10px"}},"Price"),d.createElement("input",{type:"number",className:E.fieldInput,onChange:function(e){ge((0,o.Z)((0,o.Z)({},he),{},{total:e.target.value}))}}),(null===he||void 0===he?void 0:he.value)&&(null===he||void 0===he?void 0:he.alt_value)&&(null===he||void 0===he?void 0:he.item_code)&&d.createElement(x.zx,{title:"Add service",style:{width:"100%"},clicked:function(){var e;V(!0),(0,C.np)((0,o.Z)((0,o.Z)({},he),{},{index:null===v||void 0===v||null===(e=v.component_items)||void 0===e?void 0:e.length}),v.id).subscribe({next:function(e){v.component_items=e.data.component_items,V(!1),ue(!1)},error:function(){return V(!1)}})},loading:j}))))},j="CustomGeneric_accordionContainer__sELnZ",V={itemsTable:"CustomHR_itemsTable__HAV5Z",inputValue:"CustomHR_inputValue__OSYPp",multiselectComponent:"CustomHR_multiselectComponent__m25o5",dropdownComponent:"CustomHR_dropdownComponent__l2dQs",dropdownComponent_ii:"CustomHR_dropdownComponent_ii__pPeh5",title:"CustomHR_title__qfol-",subtitle:"CustomHR_subtitle__yCda9"},J=l(35606),G=l(13397),Q=l(98032),K=l(74369),X=l(3295),$=l(85841),ee=l(22781),ne=l(12892),le=l(7924),oe=l(41756),te=l.n(oe),ie=(l(16207),(0,m.$j)((function(e){var n=e.authReducer,l=(n.authenticatedUser.position,n.authenticatedUser),o=e.sessionReducer.user,t=e.flowReducer;return{begunModule:t.begunModule,allModules:t.allModules,companyData:t.companyData,companyUsersArray:t.companyUsersArray,companyPositionsArray:t.companyPositionsArray,components:t.components,authenticatedUser:l,user:o,companyProcesses:t.companyProcesses}}))((function(e){var n=e.title;return d.createElement("div",{className:j},d.createElement("div",{style:{fontFamily:"var(--app-text-mobile-font)",fontSize:g.tq?"18px":"20px",fontWeight:"bold",marginTop:g.tq?"":"50px"}},n))})),function(e){var n,l,o,a,u,r,s=e.selectedComponent,v=e.component_blueprint,c=(0,m.v9)((function(e){return e.flowReducer})),p=c.components,y=(0,m.v9)((function(e){return e.authReducer})),E=(y.authenticatedUser,(0,d.useState)((null===s||void 0===s||null===(n=s.component_items)||void 0===n?void 0:n.length)>0?s.component_items.filter((function(e){return(0,X.WU)(e.value,"MM/yyyy")===(0,X.WU)(new Date,"MM/yyyy")})):[{item_code:"",value:"",alt_value:"",id:(0,f.mR)()}])),C=(0,i.Z)(E,2),Z=C[0],I=C[1],P=(0,d.useState)("month"),T=(0,i.Z)(P,2),D=T[0],z=T[1],U=(0,d.useState)((0,$.v)(new Date,{weekStartsOn:1})),A=(0,i.Z)(U,2),R=A[0],L=A[1],q=(0,d.useState)((0,ee.z)(R,{weekStartsOn:1})),F=(0,i.Z)(q,2),B=F[0],Y=F[1],H=(0,_.pQ)(),oe=(0,i.Z)(H,2),te=(oe[0],oe[1]),ie=function(e){var n,l=e.type,o=e.itm;return d.createElement(d.Fragment,null,("Start Time"===l||"all"===l)&&d.createElement(de,{showTimeSelect:!0,value:o.value,style:{width:"100%",border:"1px solid black",margin:"5px 0"},handleDate:function(e){o.value=e,null!==o&&void 0!==o&&o.alt_value&&null!==o&&void 0!==o&&o.value&&(o.total=(N()(new Date(o.alt_value),"DD/MM/YYYY").diff(N()(new Date(o.value),"DD/MM/YYYY"),"minutes")/60).toFixed(2),te({action:_._U.setModuleItems,value:[].concat((0,t.Z)(s.component_items.filter((function(e){return e.id!==o.id}))),[o])})),I([].concat((0,t.Z)(Z.filter((function(e){return e.id!==o.id}))),[o]))}}),("End Time"===l||"all"===l)&&d.createElement(de,{showTimeSelect:!0,value:o.alt_value,style:{width:"100%",border:"1px solid black",margin:"5px 0"},handleDate:function(e){o.alt_value=e,null!==o&&void 0!==o&&o.alt_value&&null!==o&&void 0!==o&&o.value&&(o.total=(N()(new Date(o.alt_value),"DD/MM/YYYY").diff(N()(new Date(o.value),"DD/MM/YYYY"),"minutes")/60).toFixed(2),te({action:_._U.setModuleItems,value:[].concat((0,t.Z)(s.component_items.filter((function(e){return e.id!==o.id}))),[o])})),I([].concat((0,t.Z)(Z.filter((function(e){return e.id!==o.id}))),[o]))}}),("Duration"===l||"all"===l)&&d.createElement("input",{value:null!==(n=null===o||void 0===o?void 0:o.total)&&void 0!==n?n:0,className:V.inputValue,style:{fontWeight:"bold",border:"1px dashed gray",height:"50px",paddingLeft:"10px"},readOnly:!0}),("Work Details"===l||"all"===l)&&d.createElement("input",{defaultValue:o.item_code,className:V.inputValue,style:{fontWeight:"bold",border:"1px dashed gray",height:"50px",width:g.tq?"100%":"300px",paddingLeft:"10px"},onBlur:function(e){o.item_code!==e.target.value&&(o.item_code=e.target.value,te({action:_._U.setModuleItems,value:[].concat((0,t.Z)(s.component_items.filter((function(e){return e.id!==o.id}))),[o])}))}}),("Project"===l||"all"===l)&&d.createElement("div",{style:{border:"1px dashed gray",minWidth:g.tq?"":"200px"}},d.createElement(O.Z,{value:null===o||void 0===o?void 0:o.quantity,titleProps:{fontSize:"12px",color:"var(--app-color-gray-light)"},className:V.dropdownComponent,visible:!0,mandatory:!1,items:p.filter((function(e){var n;return e.component_fields.filter((function(e){var n;return e.component_blueprint_id===(null===ae||void 0===ae||null===(n=ae.options)||void 0===n?void 0:n.component_id)})).length>0||e.module_id===(null===ae||void 0===ae||null===(n=ae.options)||void 0===n?void 0:n.module_id)})).map((function(e){var n,l,o="";return null===ae||void 0===ae||null===(n=ae.options)||void 0===n||null===(l=n.names)||void 0===l||l.map((function(n){var l,t;return o=""===o?null===(l=e.component_fields.find((function(e){return e.field_name===n})))||void 0===l?void 0:l.value:"".concat(o," ").concat(null===(t=e.component_fields.find((function(e){return e.field_name===n})))||void 0===t?void 0:t.value)})),{label:o=""!==o&&o?o:e.title,value:o}})),onChange:function(e){o.quantity=e,te({action:_._U.setModuleItems,value:[].concat((0,t.Z)(s.component_items.filter((function(e){return e.id!==o.id}))),[o])})}})),("Options"===l||"all"===l)&&d.createElement(S.G,{icon:k.$aW,onClick:function(){te({action:_._U.setModuleItems,value:Z.filter((function(e){return e.id!==o.id}))}),I(Z.filter((function(e){return e.id!==o.id})))}}))},de=function(e){var n,l;return d.createElement("div",{style:{width:"100%",height:"50px",border:"1px dashed gray",alignContent:"center"}},d.createElement(W(),{selected:null!==e&&void 0!==e&&e.value?new Date(null===e||void 0===e?void 0:e.value):new Date,showTimeSelect:null!==(n=e.showTimeSelect)&&void 0!==n&&n,timeFormat:"HH:mm",timeIntervals:15,customInput:d.createElement("div",{style:{cursor:"pointer",display:"flex",justifyContent:"center",width:"100%",alignItems:"stretch",padding:"5px",border:"0px solid var(--app-color-gray-lighter)"}},d.createElement("input",{value:e.value?N()(e.value).format(null!==(l=e.format)&&void 0!==l?l:"DD MMMM YYYY HH:mm"):"",className:V.inputValue,type:"text",style:{flex:1,marginTop:"auto",marginBottom:"auto",outline:"none",fontFamily:"var(--app-text-main-font)",fontSize:"16px",fontWeight:"bold",lineHeight:"20px",color:"#4A4A4A",textAlign:"left",maxWidth:"98%",border:"0px"},onChange:function(e){}}),d.createElement(S.G,{icon:k.WRo,style:{margin:"0 10px",width:"20px",height:"20px"}})),className:V.singleInputContainer,onChange:function(n){e.handleDate(n)}}))},ae=null===v||void 0===v||null===(l=v.selected_fields)||void 0===l?void 0:l.find((function(e){return"Record"===e.data_type_name&&"Project"===e.field_name}));return d.createElement("div",{className:j},d.createElement("div",{style:{fontFamily:"var(--app-text-mobile-font)",fontSize:g.tq?"18px":"20px",fontWeight:"bold",marginTop:g.tq?"":"50px",padding:"20px"}},d.createElement(b.mQ,{style:{width:"100%",fontSize:g.tq?"16px":"20px",marginTop:"20px"},onSelect:function(e){1===e?(I(s.component_items),L((0,$.v)(new Date,{weekStartsOn:1})),Y((0,ee.z)(new Date,{weekStartsOn:1})),z("week")):(I(s.component_items.filter((function(e){return(0,X.WU)(e.value,"MM/yyyy")===(0,X.WU)(new Date,"MM/yyyy")}))),z("month"))}},d.createElement(b.td,{style:{fontFamily:"var(--app-text-mobile-font)",fontSize:g.tq?"14px":"16px"}},d.createElement(b.OK,null,"BY TIME"),d.createElement(b.OK,null,"BY PROJECT")),d.createElement(b.x4,{id:"TIMESHEETS"},d.createElement("div",{style:{width:"100%",overflow:"auto"}},d.createElement("div",{style:{display:"flex",justifyContent:"flex-end",width:"100%",padding:"20px"}},d.createElement("div",{style:{display:"flex"}},d.createElement(O.Z,{value:null===(o=[{label:"Today",value:"today"},{label:"This Week",value:"week"},{label:"This Month",value:"month"},{label:"Select Month",value:"select"},{label:"Custom Date",value:"custom"}].find((function(e){return e.value===D})))||void 0===o?void 0:o.label,className:g.tq?"":V.multiselectComponent,visible:!0,mandatory:!1,items:[{label:"Today",value:"today"},{label:"This Week",value:"week"},{label:"This Month",value:"month"},{label:"Select Month",value:"select"},{label:"Custom Date",value:"custom"}],onChange:function(e){if("week"===e)I(function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"d/MM/yyyy",l=arguments.length>2?arguments[2]:void 0,o=null!==l&&void 0!==l?l:new Date,t=(0,ee.z)(o,{weekStartsOn:1}),i=(0,ne.D)({start:t,end:o}).map((function(e){return(0,X.WU)(e,n)}));return e.filter((function(e){return i.includes("".concat((0,X.WU)(e.value,n)))}))}(s.component_items));else if("today"===e){var n=new Date;I(s.component_items.filter((function(e){return(0,X.WU)(e.value,"d/MM/yyyy")===(0,X.WU)(n,"d/MM/yyyy")})))}else if("month"===e){var l=new Date;I(s.component_items.filter((function(e){return(0,X.WU)(e.value,"MM/yyyy")===(0,X.WU)(l,"MM/yyyy")})))}else"custom"===e&&(L(new Date),I(s.component_items.filter((function(e){return(0,X.WU)(e.value,"d/MM/yyyy")===(0,X.WU)(new Date,"d/MM/yyyy")}))));z(e)}}),"select"===D&&d.createElement(O.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-light)"},className:g.tq?"":V.multiselectComponent,visible:!0,mandatory:!1,items:[{label:"January",value:"01"},{label:"February",value:"02"},{label:"March",value:"03"},{label:"April",value:"04"},{label:"May",value:"05"},{label:"June",value:"06"},{label:"July",value:"07"},{label:"August",value:"08"},{label:"September",value:"09"},{label:"October",value:"10"},{label:"November",value:"11"},{label:"December",value:"12"}],onChange:function(e){I(s.component_items.filter((function(n){return(0,X.WU)(n.value,"MM")===e})))}}),"custom"===D&&d.createElement("div",{style:{display:"flex",hheight:"50px",alignItems:"center",width:"300px"}},d.createElement(de,{value:R,style:{width:"100%",border:"1px solid black"},format:"DD MMMM YYYY",handleDate:function(e){L(e),I(s.component_items.filter((function(n){return(0,X.WU)(n.value,"d/MM/yyyy")===(0,X.WU)(e,"d/MM/yyyy")})))}})))),null!==s&&void 0!==s&&s.id?d.createElement(w.default,{className:V.itemsTable,columns:["Start Time","End Time","Work Details","Project","Duration","Options"],modern:!!g.tq,list:null===(a=J.Z([G.Z(Q.Z("value"))])(Z.filter((function(e){return null!==e.item_code&&null!==e.alt_value}))))||void 0===a?void 0:a.map((function(e){var n;return n={},(0,h.Z)(n,"All",d.createElement(ie,{itm:e,type:"all"})),(0,h.Z)(n,"Start Time",d.createElement(ie,{itm:e,type:"Start Time"})),(0,h.Z)(n,"End Time",d.createElement(ie,{itm:e,type:"End Time"})),(0,h.Z)(n,"Duration",d.createElement(ie,{itm:e,type:"Duration"})),(0,h.Z)(n,"Work Details",d.createElement(ie,{itm:e,type:"Work Details"})),(0,h.Z)(n,"Project",d.createElement(ie,{itm:e,type:"Project"})),(0,h.Z)(n,"Options",d.createElement(ie,{itm:e,type:"Options"})),(0,h.Z)(n,"id",e.id),n})),footer:[d.createElement("br",{key:0}),d.createElement("br",{key:1}),d.createElement("br",{key:2}),d.createElement("br",{key:3}),d.createElement("input",{key:4,readOnly:!0,className:V.inputValue,defaultValue:"".concat(K.Z((function(e,n){return+e+ +n.total}),0,null!==(u=Z.filter((function(e){return null!==e.item_code&&null!==e.alt_value})))&&void 0!==u?u:[]).toFixed(2))}),d.createElement("br",{key:5})]}):e.children,d.createElement("div",{style:{display:"flex",justifyContent:"left"}},d.createElement(x.zx,{light:!0,style:{display:""},clicked:function(){I([].concat((0,t.Z)(Z),[{item_code:"",value:"",alt_value:"",total:0,quantity:"",id:(0,f.mR)()}]))},icon:d.createElement("img",{src:M.IHx})})))),d.createElement(b.x4,{id:"BY PROJECT"},d.createElement("div",{style:{width:"100%",overflow:"auto"}},d.createElement("div",{style:{display:"flex",justifyContent:"flex-end",width:"100%",padding:"20px"}},d.createElement("div",{style:{display:"flex",height:"50px",alignItems:"center",width:"auto"}},d.createElement(O.Z,{value:null===(r=[{label:"This Week",value:"week"},{label:"This Month",value:"month"},{label:"Select Month",value:"select"},{label:"Custom Date",value:"custom"}].find((function(e){return e.value===D})))||void 0===r?void 0:r.label,className:V.multiselectComponent,visible:!0,mandatory:!1,items:[{label:"This Week",value:"week"},{label:"This Month",value:"month"},{label:"Select Month",value:"select"},{label:"Custom Date",value:"custom"}],onChange:function(e){if("week"===e){var n=(0,$.v)(new Date,{weekStartsOn:1});L(n),Y((0,ee.z)(n,{weekStartsOn:1}))}z(e)}}),"select"===D&&d.createElement(O.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-light)"},className:g.tq?"":V.multiselectComponent,visible:!0,mandatory:!1,items:[{label:"January",value:"00"},{label:"February",value:"01"},{label:"March",value:"02"},{label:"April",value:"03"},{label:"May",value:"04"},{label:"June",value:"05"},{label:"July",value:"06"},{label:"August",value:"07"},{label:"September",value:"08"},{label:"October",value:"09"},{label:"November",value:"10"},{label:"December",value:"11"}],onChange:function(e){var n=(0,X.WU)(new Date,"yyyy"),l=new Date(n,+e,1),o=(0,le.V)(l);L(o),Y(l)}}),"custom"===D&&d.createElement("div",{style:{display:"flex",height:"50px",alignItems:"center",width:"300px"}},d.createElement(de,{value:R,style:{width:"100%",border:"1px solid black"},format:"DD MMMM YYYY",handleDate:function(e){var n=(0,$.v)(e,{weekStartsOn:1});L(n),Y((0,ee.z)(n,{weekStartsOn:1}))}})))),null!==s&&void 0!==s&&s.id?d.createElement(w.default,{className:V.itemsTable,modern:!!g.tq,columns:["Project"].concat("select"===D?["".concat((0,X.WU)(B,"MMM"))]:"month"===D?["".concat((0,X.WU)(new Date,"MMM"))]:(0,ne.D)({start:B,end:R}).map((function(e){return(0,X.WU)(e,"E MMM d")}))),list:p.filter((function(e){var n;return e.component_fields.filter((function(e){var n;return e.component_blueprint_id===(null===ae||void 0===ae||null===(n=ae.options)||void 0===n?void 0:n.component_id)})).length>0||e.module_id===(null===ae||void 0===ae||null===(n=ae.options)||void 0===n?void 0:n.module_id)})).map((function(e){var n,l,o="";null===ae||void 0===ae||null===(n=ae.options)||void 0===n||null===(l=n.names)||void 0===l||l.map((function(n){var l,t;return o=""===o?null===(l=e.component_fields.find((function(e){return e.field_name===n})))||void 0===l?void 0:l.value:"".concat(o," ").concat(null===(t=e.component_fields.find((function(e){return e.field_name===n})))||void 0===t?void 0:t.value)})),o=""!==o&&o?o:e.title;var i={Project:d.createElement("input",{defaultValue:o,className:V.inputValue,style:{fontWeight:"bold",width:g.tq?"100%":"300px",height:"40px"},readOnly:!0})};return"month"===D?i["".concat((0,X.WU)(new Date,"MMM"))]=d.createElement("input",{defaultValue:Z.filter((function(e){return e.quantity===o&&"".concat((0,X.WU)(e.value,"MMM"))==="".concat((0,X.WU)(new Date,"MMM"))})).map((function(e){return null===e||void 0===e?void 0:e.total})).reduce((function(e,n){return e+ +n}),0),className:V.inputValue,style:{fontWeight:"bold",border:"1px dashed gray",height:"40px",textAlign:"center"},readOnly:!0}):"select"===D?i["".concat((0,X.WU)(B,"MMM"))]=d.createElement("input",{defaultValue:Z.filter((function(e){return e.quantity===o&&"".concat((0,X.WU)(e.value,"MMM"))==="".concat((0,X.WU)(B,"MMM"))})).map((function(e){return null===e||void 0===e?void 0:e.total})).reduce((function(e,n){return e+ +n}),0),className:V.inputValue,style:{fontWeight:"bold",border:"1px dashed gray",height:"40px",textAlign:"center"},readOnly:!0}):(0,ne.D)({start:B,end:R}).map((function(e){return i["".concat((0,X.WU)(e,"E MMM d"))]=d.createElement("input",{defaultValue:Z.filter((function(n){return n.quantity===o&&"".concat((0,X.WU)(n.value,"E MMM d"))==="".concat((0,X.WU)(e,"E MMM d"))})).map((function(e){return null===e||void 0===e?void 0:e.total})).reduce((function(e,n){return e+ +n}),0),className:V.inputValue,style:{fontWeight:"bold",border:"1px dashed gray",height:"40px",textAlign:"center"},onBlur:function(n){var l=Z.find((function(n){return n.quantity===o&&null===n.item_code&&"".concat((0,X.WU)(null===n||void 0===n?void 0:n.value,"E MMM d"))==="".concat((0,X.WU)(e,"E MMM d"))}));if(l)l.total=n.target.value,te({action:_._U.updateModuleItems,value:l}),I([].concat((0,t.Z)(Z.filter((function(e){return e.id!==l.id}))),[l]));else{var i={value:N()(e).format("YYYY-MM-DD HH:mm:ss"),total:n.target.value,quantity:o,id:(0,f.mR)()};te({action:_._U.addModuleItems,value:i}),I([].concat((0,t.Z)(Z),[i]))}}})})),i}))}):e.children)))))}),de=function(e){var n,l,o,a,u,r=e.selectedComponent,s=(e.begunModule,e.goto,e.component_blueprint),v=(0,m.v9)((function(e){return e.flowReducer})),c=(v.companyData,v.companyUsersArray,v.components,(0,m.v9)((function(e){return e.authReducer}))),p=c.authenticatedUser,y=(0,d.useState)(!1),E=(0,i.Z)(y,2),C=(E[0],E[1],(0,d.useState)((null===r||void 0===r||null===(n=r.component_items)||void 0===n?void 0:n.length)>0?r.component_items:[{item_code:"",value:"",alt_value:"",id:(0,f.mR)()}])),Z=(0,i.Z)(C,2),I=Z[0],P=Z[1],T=(0,d.useState)("month"),D=(0,i.Z)(T,2),z=D[0],U=D[1],A=(0,d.useState)((0,$.v)(new Date,{weekStartsOn:1})),R=(0,i.Z)(A,2),L=R[0],q=R[1],F=(0,d.useState)((0,ee.z)(L,{weekStartsOn:1})),B=(0,i.Z)(F,2),Y=(B[0],B[1]),H=(0,_.pQ)(),le=(0,i.Z)(H,2),oe=(le[0],le[1]),te=function(e){var n,l,o;return d.createElement("div",{style:{width:"100%",height:"50px",border:"1px dashed gray",alignContent:"center"}},d.createElement(W(),{disabled:null!==(n=null===e||void 0===e?void 0:e.disabled)&&void 0!==n&&n,selected:null!==e&&void 0!==e&&e.value?new Date(null===e||void 0===e?void 0:e.value):new Date,showTimeSelect:null!==(l=e.showTimeSelect)&&void 0!==l&&l,timeFormat:"HH:mm",timeIntervals:15,customInput:d.createElement("div",{style:{cursor:"pointer",display:"flex",justifyContent:"center",width:"100%",alignItems:"stretch",padding:"5px",border:"0px solid var(--app-color-gray-lighter)"}},d.createElement("input",{value:e.value?N()(e.value).format(null!==(o=e.format)&&void 0!==o?o:"DD MMMM YYYY HH:mm"):"",className:V.inputValue,type:"text",style:{flex:1,marginTop:"auto",marginBottom:"auto",outline:"none",fontFamily:"var(--app-text-main-font)",fontSize:"16px",lineHeight:"20px",color:"#4A4A4A",textAlign:"left",maxWidth:"98%",border:"0px",fontWeight:"bold"},onChange:function(e){}}),d.createElement(S.G,{icon:k.WRo,style:{margin:"0 10px",width:"20px",height:"20px"}})),className:V.singleInputContainer,onChange:function(n){e.handleDate(n)}}))},ie=null===s||void 0===s||null===(l=s.selected_fields)||void 0===l?void 0:l.find((function(e){return"Dropdown"===e.data_type_name&&"Type"===e.field_name}));return d.createElement("div",{className:j},d.createElement("div",{style:{fontFamily:"var(--app-text-mobile-font)",fontSize:g.tq?"18px":"20px",fontWeight:"bold",marginTop:g.tq?"":"50px",padding:"20px"}},d.createElement(b.mQ,{style:{width:"100%",fontSize:g.tq?"16px":"20px",marginTop:"20px"}},d.createElement(b.td,{style:{fontFamily:"var(--app-text-mobile-font)",fontSize:g.tq?"14px":"16px"}},d.createElement(b.OK,null,"LEAVES"),d.createElement(b.OK,{onChange:function(){P(r.component_items),q((0,$.v)(new Date,{weekStartsOn:1})),Y((0,ee.z)(new Date,{weekStartsOn:1}))}},"BALANCES")),d.createElement(b.x4,{id:"LEAVES"},d.createElement("div",{style:{width:"100%",overflow:"auto"}},d.createElement("div",{style:{display:"flex",justifyContent:"flex-end",width:"100%",padding:"20px"}},d.createElement("div",{style:{display:"flex"}},d.createElement(O.Z,{value:null===(o=[{label:"Today",value:"today"},{label:"This Week",value:"week"},{label:"This Month",value:"month"},{label:"Select Month",value:"select"}].find((function(e){return e.value===z})))||void 0===o?void 0:o.label,className:g.tq?"":V.multiselectComponent,visible:!0,mandatory:!1,items:[{label:"Today",value:"today"},{label:"This Week",value:"week"},{label:"This Month",value:"month"},{label:"Select Month",value:"select"}],onChange:function(e){if("week"===e)P(function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"d/MM/yyyy",l=arguments.length>2?arguments[2]:void 0,o=null!==l&&void 0!==l?l:new Date,t=(0,ee.z)(o,{weekStartsOn:1}),i=(0,ne.D)({start:t,end:o}).map((function(e){return(0,X.WU)(e,n)}));return e.filter((function(e){return i.includes("".concat((0,X.WU)(e.value,n)))}))}(r.component_items));else if("today"===e){var n=new Date;P(r.component_items.filter((function(e){return(0,X.WU)(e.value,"d/MM/yyyy")===(0,X.WU)(n,"d/MM/yyyy")})))}else if("month"===e){var l=new Date;P(r.component_items.filter((function(e){return(0,X.WU)(e.value,"MM/yyyy")===(0,X.WU)(l,"MM/yyyy")})))}else"custom"===e&&(q(new Date),P(r.component_items.filter((function(e){return(0,X.WU)(e.value,"d/MM/yyyy")===(0,X.WU)(new Date,"d/MM/yyyy")}))));U(e)}}),"select"===z&&d.createElement(O.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-light)"},className:g.tq?"":V.multiselectComponent,visible:!0,mandatory:!1,items:[{label:"January",value:"01"},{label:"February",value:"02"},{label:"March",value:"03"},{label:"April",value:"04"},{label:"May",value:"05"},{label:"June",value:"06"},{label:"July",value:"07"},{label:"August",value:"08"},{label:"September",value:"09"},{label:"October",value:"10"},{label:"November",value:"11"},{label:"December",value:"12"}],onChange:function(e){P(r.component_items.filter((function(n){return(0,X.WU)(n.value,"MM")===e})))}}),"custom"===z&&d.createElement("div",{style:{display:"flex",height:"50px",alignItems:"center",width:"300px"}},d.createElement(te,{value:L,style:{width:"100%",border:"1px solid black"},format:"DD MMMM YYYY",handleDate:function(e){q(e),P(r.component_items.filter((function(n){return(0,X.WU)(n.value,"d/MM/yyyy")===(0,X.WU)(e,"d/MM/yyyy")})))}})))),null!==r&&void 0!==r&&r.id?d.createElement(w.default,{className:V.itemsTable,modern:!!g.tq,columns:["Date From","Date To","Details","Type","Duration","Status","Options"],list:null===(a=J.Z([G.Z(Q.Z("value"))])(I))||void 0===a?void 0:a.map((function(e,n){var l,o,i;return i={},(0,h.Z)(i,"Date From",d.createElement(te,{disabled:1===+e.quantity||9===+e.quantity,showTimeSelect:!0,value:e.value,style:{width:"100%",border:"1px solid black"},handleDate:function(l){e.value=l,null!==e&&void 0!==e&&e.alt_value&&null!==e&&void 0!==e&&e.value&&(e.total=(N()(new Date(e.alt_value),"DD/MM/YYYY").diff(N()(new Date(e.value),"DD/MM/YYYY"),"minutes")/60).toFixed(2),document.getElementById("Duration".concat(n)).value=e.total,oe({action:_._U.setModuleItems,value:[].concat((0,t.Z)(r.component_items.filter((function(n){return n.id!==e.id}))),[e])})),P([].concat((0,t.Z)(I.filter((function(n){return n.id!==e.id}))),[e]))}})),(0,h.Z)(i,"Date To",d.createElement(te,{disabled:1===+e.quantity||9===+e.quantity,showTimeSelect:!0,value:e.alt_value,style:{width:"100%",border:"1px solid black"},handleDate:function(l){e.alt_value=l,null!==e&&void 0!==e&&e.alt_value&&null!==e&&void 0!==e&&e.value&&(e.total=(N()(new Date(e.alt_value),"DD/MM/YYYY").diff(N()(new Date(e.value),"DD/MM/YYYY"),"minutes")/60).toFixed(2),document.getElementById("Duration".concat(n)).value=e.total,oe({action:_._U.setModuleItems,value:[].concat((0,t.Z)(r.component_items.filter((function(n){return n.id!==e.id}))),[e])})),P([].concat((0,t.Z)(I.filter((function(n){return n.id!==e.id}))),[e]))}})),(0,h.Z)(i,"Duration",d.createElement("input",{disabled:1===+e.quantity||9===+e.quantity,defaultValue:null!==(l=null===e||void 0===e?void 0:e.total)&&void 0!==l?l:0,id:"Duration".concat(n),className:V.inputValue,style:{fontWeight:"bold",border:"1px dashed gray",height:"50px",paddingLeft:"10px",width:g.tq?"100%":"100px"},onBlur:function(n){e.total!==n.target.value&&(e.total=n.target.value,oe({action:_._U.setModuleItems,value:[].concat((0,t.Z)(r.component_items.filter((function(n){return n.id!==e.id}))),[e])})),P([].concat((0,t.Z)(I.filter((function(n){return n.id!==e.id}))),[e]))}})),(0,h.Z)(i,"Details",d.createElement("input",{defaultValue:e.item_code,disabled:1===+e.quantity||9===+e.quantity,className:V.inputValue,style:{fontWeight:"bold",border:"1px dashed gray",height:g.tq?"100px":"50px",width:g.tq?"100%":"300px",paddingLeft:"10px"},onBlur:function(n){e.item_code!==n.target.value&&(e.item_code=n.target.value,oe({action:_._U.setModuleItems,value:[].concat((0,t.Z)(r.component_items.filter((function(n){return n.id!==e.id}))),[e])}))}})),(0,h.Z)(i,"Status",d.createElement("input",{defaultValue:1===+e.quantity?"Approved":9===+e.quantity?"Disapproved":"For Approval",className:V.inputValue,disabled:!0,style:{fontWeight:"bold",border:"1px dashed gray",height:"50px",width:"160px",paddingLeft:"10px"},readOnly:!0})),(0,h.Z)(i,"Type",d.createElement("div",{style:{border:"1px dashed gray",width:g.tq?"100%":"240px",pointerEvents:1===+e.quantity||9===+e.quantity?"none":""}},d.createElement(O.Z,{value:null===e||void 0===e?void 0:e.type,titleProps:{fontSize:"12px",color:"var(--app-color-gray-light)"},className:V.dropdownComponent,visible:!0,mandatory:!1,items:null===(o=ie.options)||void 0===o?void 0:o.list.map((function(e){return{label:e,value:e}})),onChange:function(n){e.type=n,oe({action:_._U.setModuleItems,value:[].concat((0,t.Z)(r.component_items.filter((function(n){return n.id!==e.id}))),[e])})}}))),(0,h.Z)(i,"Options",d.createElement("div",{style:{display:"flex",justifyContent:"space-evenly",paddingTop:"10px"}},p.id===r.created_by.id&&d.createElement(S.G,{icon:k.u8Q,onClick:function(){e.quantity=1,oe({action:_._U.setModuleItems,value:[].concat((0,t.Z)(r.component_items.filter((function(n){return n.id!==e.id}))),[e])}),P([].concat((0,t.Z)(I.filter((function(n){return n.id!==e.id}))),[e]))},style:{color:1===+e.quantity?"var(--app-color-gray-lightest)":"green",cursor:"pointer",pointerEvents:1===+e.quantity?"none":""}}),p.id===r.created_by.id&&d.createElement(S.G,{icon:k.QWY,onClick:function(){e.quantity=9,oe({action:_._U.setModuleItems,value:[].concat((0,t.Z)(r.component_items.filter((function(n){return n.id!==e.id}))),[e])}),P([].concat((0,t.Z)(I.filter((function(n){return n.id!==e.id}))),[e]))},style:{color:9===+e.quantity?"var(--app-color-gray-lightest)":"red",cursor:"pointer",pointerEvents:9===+e.quantity?"none":""}}),d.createElement(S.G,{icon:k.$aW,onClick:function(){oe({action:_._U.setModuleItems,value:I.filter((function(n){return n.id!==e.id}))}),P(I.filter((function(n){return n.id!==e.id})))},style:{color:0!==+e.quantity?"var(--app-color-gray-lightest)":"black",cursor:"pointer",pointerEvents:0!==+e.quantity?"none":""}}))),(0,h.Z)(i,"id",e.id),i}))}):e.children,d.createElement("div",{style:{display:"flex",justifyContent:"left"}},d.createElement(x.zx,{light:!0,style:{display:""},clicked:function(){P([].concat((0,t.Z)(I),[{item_code:"",value:"",alt_value:"",total:0,quantity:"",id:(0,f.mR)()}]))},icon:d.createElement("img",{src:M.IHx})})))),d.createElement(b.x4,{id:"DETAILS"},d.createElement("div",{style:{width:"100%",overflow:"auto"}},null!==r&&void 0!==r&&r.id?d.createElement(w.default,{modern:!!g.tq,className:V.itemsTable,columns:["Type","Allocated","For Approval","Availed","Balance"],list:null===(u=ie.options)||void 0===u?void 0:u.list.map((function(e){var n,l,o,t,i,a,u,s;return s={Type:d.createElement("input",{className:V.inputValue,defaultValue:e,style:{fontWeight:"bold",height:"50px",width:"100%",paddingLeft:"10px"},readOnly:!0}),Allocated:d.createElement("input",{className:V.inputValue,defaultValue:null!==(n=null===(l=r.component_fields.find((function(n){return n.field_name===e})))||void 0===l?void 0:l.value)&&void 0!==n?n:"0",style:{fontWeight:"bold",border:"1px dashed gray",height:"50px",width:"100%",paddingLeft:"10px"},readOnly:!0})},(0,h.Z)(s,"For Approval",d.createElement("input",{className:V.inputValue,defaultValue:"".concat(K.Z((function(e,n){return+e+ +n.total}),0,null!==(o=r.component_items.filter((function(n){return n.type===e&&0===+n.quantity})))&&void 0!==o?o:[]).toFixed(2)),style:{fontWeight:"bold",border:"1px dashed gray",height:"50px",width:"100%",paddingLeft:"10px"},readOnly:!0})),(0,h.Z)(s,"Availed",d.createElement("input",{className:V.inputValue,defaultValue:"".concat(K.Z((function(e,n){return+e+ +n.total}),0,null!==(t=r.component_items.filter((function(n){return n.type===e&&1===+n.quantity})))&&void 0!==t?t:[]).toFixed(2)),style:{fontWeight:"bold",border:"1px dashed gray",height:"50px",width:"100%",paddingLeft:"10px"},readOnly:!0})),(0,h.Z)(s,"Balance",d.createElement("input",{className:V.inputValue,defaultValue:"".concat((+(null!==(i=null===(a=r.component_fields.find((function(n){return n.field_name===e})))||void 0===a?void 0:a.value)&&void 0!==i?i:0)-K.Z((function(e,n){return+e+ +n.total}),0,null!==(u=r.component_items.filter((function(n){return n.type===e&&1===+n.quantity})))&&void 0!==u?u:[])).toFixed(2)),style:{fontWeight:"bold",border:"1px dashed gray",height:"50px",width:"100%",paddingLeft:"10px"},readOnly:!0})),s}))}):e.children)))))},ae=function(e){var n,l,o,a,u,r,s,v=e.selectedComponent,c=(e.begunModule,e.goto,e.component_blueprint),p=(0,m.v9)((function(e){return e.authReducer})),y=p.authenticatedUser,E=(0,d.useState)(!1),C=(0,i.Z)(E,2),Z=(C[0],C[1],(0,d.useState)((null===v||void 0===v||null===(n=v.component_items)||void 0===n?void 0:n.length)>0?v.component_items:[{item_code:"",value:"",alt_value:"",type:"goal",id:(0,f.mR)()}])),I=(0,i.Z)(Z,2),P=I[0],N=I[1],T=(0,d.useState)("goal"),D=(0,i.Z)(T,2),z=D[0],U=D[1],A=(0,_.pQ)(),R=(0,i.Z)(A,2),L=(R[0],R[1]),W={clipboard:{matchers:[]},toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],["link","image","video","formula"],[{header:[1,2,3,4,5,6,!1]}],[{list:"ordered"},{list:"bullet"},{list:"check"}],[{size:["small",!1,"large","huge"]}]]},q=["header","font","bold","italic","underline","strike","blockquote","list","bullet","indent","link","image"],F=function(){return d.createElement(x.zx,{light:!0,style:{display:""},clicked:function(){N([].concat((0,t.Z)(P),[{type:z,item_code:"",value:"",alt_value:"",total:"",quantity:"",id:(0,f.mR)()}]))},icon:d.createElement("img",{src:M.IHx})})},B=function(e){var n;return d.createElement(te(),{modules:(null!==e&&void 0!==e&&e.showToolbar,W),style:{fontFamily:"var(--app-text-main-font)",minHeight:"200px"},readOnly:null!==(n=null===e||void 0===e?void 0:e.readOnly)&&void 0!==n&&n,formats:q,defaultValue:null===e||void 0===e?void 0:e.value,onChange:null===e||void 0===e?void 0:e.onChange,onBlur:null===e||void 0===e?void 0:e.onBlur,theme:"snow"})},Y=null===c||void 0===c||null===(l=c.selected_fields)||void 0===l?void 0:l.find((function(e){return"Dropdown"===e.data_type_name&&"Goal"===e.field_name})),H=null===c||void 0===c||null===(o=c.selected_fields)||void 0===o?void 0:o.find((function(e){return"Dropdown"===e.data_type_name&&"KPI"===e.field_name}));return d.createElement("div",{className:j},d.createElement("div",{style:{fontFamily:"var(--app-text-mobile-font)",fontSize:g.tq?"18px":"20px",fontWeight:"bold",marginTop:g.tq?"":"50px",padding:"20px"}},e.children,d.createElement(b.mQ,{style:{width:"100%",fontSize:g.tq?"16px":"20px",marginTop:"20px"},onSelect:function(e){U(1===e?"kpi":"goal")}},d.createElement(b.td,{style:{fontFamily:"var(--app-text-mobile-font)",fontSize:g.tq?"14px":"16px"}},d.createElement(b.OK,null,"TARGET GOALS"),d.createElement(b.OK,null,"KEY PERFORMANCE INDICATORS")),d.createElement(b.x4,{id:"TARGET GOALS"},d.createElement("div",{style:{width:"100%",overflow:"auto"}},null!==v&&void 0!==v&&v.id&&v.created_by.id===y.id?d.createElement(w.default,{modern:!!g.tq,className:V.itemsTable,columns:["Goal","Description","Result","Employee Comment","Options"],list:null===(a=J.Z([G.Z(Q.Z("value"))])(P.filter((function(e){return"goal"===e.type}))))||void 0===a?void 0:a.map((function(e,n){var l,o,i,a,u;return u={},(0,h.Z)(u,"Goal",d.createElement("div",{style:{}},d.createElement("div",{style:{border:"1px dashed gray",minWidth:g.tq?"":"300px",width:"auto"}},d.createElement(O.Z,{value:null===e||void 0===e?void 0:e.item_code,className:V.dropdownComponent,visible:!0,mandatory:!1,items:null===(l=Y.options)||void 0===l?void 0:l.list.map((function(e){return{label:e,value:e}})),onChange:function(n){e.item_code=n,L({action:_._U.setModuleItems,value:[].concat((0,t.Z)(v.component_items.filter((function(n){return n.id!==e.id}))),[e])})}})),d.createElement("textarea",{defaultValue:e.value,className:V.inputValue,style:{fontWeight:"bold",fontSize:"18px",border:"1px dashed gray",height:"200px",width:"100%",paddingLeft:"20px",marginTop:"10px"},placeholder:"Goal Item",onBlur:function(n){e.value!==n.target.value&&(e.value=n.target.value,L({action:_._U.setModuleItems,value:[].concat((0,t.Z)(v.component_items.filter((function(n){return n.id!==e.id}))),[e])}))}}))),(0,h.Z)(u,"Description",d.createElement("div",{style:{border:"0px dashed gray",width:"auto"}},d.createElement(B,{showToolbar:!g.tq,value:null!==(o=null===e||void 0===e?void 0:e.alt_value)&&void 0!==o?o:"",onBlur:function(){L({action:_._U.setModuleItems,value:[].concat((0,t.Z)(v.component_items.filter((function(n){return n.id!==e.id}))),[e])})},onChange:function(n){e.alt_value=n}}))),(0,h.Z)(u,"Result",d.createElement("div",{style:{border:"0px dashed gray",width:"auto"}},d.createElement(B,{showToolbar:!g.tq,value:null!==(i=null===e||void 0===e?void 0:e.quantity)&&void 0!==i?i:"",onBlur:function(){L({action:_._U.setModuleItems,value:[].concat((0,t.Z)(v.component_items.filter((function(n){return n.id!==e.id}))),[e])})},onChange:function(n){e.quantity=n}}))),(0,h.Z)(u,"Employee Comment",d.createElement("div",{style:{}},d.createElement(B,{value:null!==(a=null===e||void 0===e?void 0:e.total)&&void 0!==a?a:"",readOnly:!0,showToolbar:!1}))),(0,h.Z)(u,"Options",d.createElement("div",{style:{display:"flex",justifyContent:"space-evenly"}},d.createElement(S.G,{icon:k.$aW,onClick:function(){L({action:_._U.setModuleItems,value:P.filter((function(n){return n.id!==e.id}))}),N(P.filter((function(n){return n.id!==e.id})))},style:{cursor:"pointer"}}))),(0,h.Z)(u,"id",e.id),u}))}):d.createElement("br",null),v.created_by.id===y.id&&d.createElement("div",{style:{display:"flex",justifyContent:"left"}},F()),null!==v&&void 0!==v&&v.id&&v.assigned_to.id===y.id?d.createElement(w.default,{modern:!0,className:V.itemsTable,columns:["Goal","Goal Item","Description","Result","Comments"],list:null===(u=J.Z([G.Z(Q.Z("type"))])(P.filter((function(e){return"goal"===e.type}))))||void 0===u?void 0:u.map((function(e,n){var l,o,i;return i={},(0,h.Z)(i,"Goal",d.createElement("input",{defaultValue:e.item_code,className:V.inputValue,style:{fontWeight:"bolder",border:"1px dashed gray",padding:"10px",minHeight:"50px",margin:"10px",fontSize:"18px"},disabled:!0})),(0,h.Z)(i,"Goal Item",d.createElement("div",{style:{border:"0px dashed gray",width:"auto"}},d.createElement("textarea",{defaultValue:e.value,className:V.inputValue,style:{fontWeight:"bolder",border:"1px dashed gray",height:"auto",minHeight:"50px",width:"100%",paddingLeft:"10px",margin:"10px"},disabled:!0}))),(0,h.Z)(i,"Description",d.createElement("div",{style:{border:"0px dashed gray",width:"auto"}},d.createElement(B,{value:null!==(l=null===e||void 0===e?void 0:e.alt_value)&&void 0!==l?l:"",readOnly:!0,showToolbar:!1}))),(0,h.Z)(i,"Owner",d.createElement("div",{style:{border:"0px dashed gray",width:"auto"}},d.createElement("textarea",{defaultValue:e.quantity,className:V.inputValue,style:{fontWeight:"bolder",border:"1px dashed gray",minHeight:"50px",width:"100%",paddingLeft:"10px",margin:"10px"},disabled:!0}))),(0,h.Z)(i,"Comments",d.createElement("div",{style:{}},d.createElement(B,{showToolbar:!g.tq,value:null!==(o=null===e||void 0===e?void 0:e.total)&&void 0!==o?o:"",onBlur:function(){L({action:_._U.setModuleItems,value:[].concat((0,t.Z)(v.component_items.filter((function(n){return n.id!==e.id}))),[e])})},onChange:function(n){e.total=n}}))),(0,h.Z)(i,"id",e.id),i}))}):d.createElement("br",null))),d.createElement(b.x4,{id:"KPI"},d.createElement("div",{style:{width:"100%",overflow:"auto"}},null!==v&&void 0!==v&&v.id&&v.created_by.id===y.id?d.createElement(w.default,{modern:!!g.tq,className:V.itemsTable,columns:["KPI","KPI Elements","Owner","Comments","Options"],list:null===(r=J.Z([G.Z(Q.Z("value"))])(P.filter((function(e){return"kpi"===e.type}))))||void 0===r?void 0:r.map((function(e,n){var l,o,i,a,u;return u={},(0,h.Z)(u,"KPI",d.createElement("div",null,d.createElement("div",{style:{border:"1px dashed gray",minWidth:g.tq?"":"300px",width:"auto"}},d.createElement(O.Z,{value:null===e||void 0===e?void 0:e.item_code,className:V.dropdownComponent,visible:!0,mandatory:!1,items:null===(l=H.options)||void 0===l?void 0:l.list.map((function(e){return{label:e,value:e}})),onChange:function(n){e.item_code=n,L({action:_._U.setModuleItems,value:[].concat((0,t.Z)(v.component_items.filter((function(n){return n.id!==e.id}))),[e])})}})),d.createElement("textarea",{defaultValue:e.value,className:V.inputValue,style:{fontWeight:"bold",fontSize:"18px",border:"1px dashed gray",height:"200px",width:"100%",paddingLeft:"20px",marginTop:"10px"},placeholder:"KPI Item",onBlur:function(n){e.value!==n.target.value&&(e.value=n.target.value,L({action:_._U.setModuleItems,value:[].concat((0,t.Z)(v.component_items.filter((function(n){return n.id!==e.id}))),[e])}))}}))),(0,h.Z)(u,"KPI Elements",d.createElement("div",{style:{border:"0px dashed gray",width:"auto"}},d.createElement(B,{showToolbar:!g.tq,value:null!==(o=null===e||void 0===e?void 0:e.alt_value)&&void 0!==o?o:"",onBlur:function(n){L({action:_._U.setModuleItems,value:[].concat((0,t.Z)(v.component_items.filter((function(n){return n.id!==e.id}))),[e])})},onChange:function(n){e.alt_value=n}}))),(0,h.Z)(u,"Owner",d.createElement("div",{style:{border:"0px dashed gray",width:"auto"}},d.createElement(B,{showToolbar:!g.tq,value:null!==(i=null===e||void 0===e?void 0:e.quantity)&&void 0!==i?i:"",onBlur:function(n){L({action:_._U.setModuleItems,value:[].concat((0,t.Z)(v.component_items.filter((function(n){return n.id!==e.id}))),[e])})},onChange:function(n){e.quantity=n}}))),(0,h.Z)(u,"Comments",d.createElement("div",{style:{}},d.createElement(B,{showToolbar:!g.tq,value:null!==(a=null===e||void 0===e?void 0:e.total)&&void 0!==a?a:"",onBlur:function(n){L({action:_._U.setModuleItems,value:[].concat((0,t.Z)(v.component_items.filter((function(n){return n.id!==e.id}))),[e])})},onChange:function(n){e.total=n}}))),(0,h.Z)(u,"Options",d.createElement("div",{style:{display:"flex",justifyContent:"space-evenly"}},d.createElement(S.G,{icon:k.$aW,onClick:function(){L({action:_._U.setModuleItems,value:P.filter((function(n){return n.id!==e.id}))}),N(P.filter((function(n){return n.id!==e.id})))},style:{cursor:"pointer"}}))),(0,h.Z)(u,"id",e.id),u}))}):d.createElement("br",null),v.created_by.id===y.id&&d.createElement("div",{style:{display:"flex",justifyContent:"left"}},F()),null!==v&&void 0!==v&&v.id&&v.assigned_to.id===y.id?d.createElement(w.default,{modern:!0,className:V.itemsTable,columns:["KPI","KPI Item","KPI Element","Result","Owner"],list:null===(s=J.Z([G.Z(Q.Z("type"))])(P.filter((function(e){return"kpi"===e.type}))))||void 0===s?void 0:s.map((function(e,n){var l,o,t,i;return i={},(0,h.Z)(i,"KPI",d.createElement("input",{defaultValue:e.item_code,className:V.inputValue,style:{fontWeight:"bolder",border:"1px dashed gray",padding:"10px",minHeight:"50px",margin:"10px",fontSize:"18px"},disabled:!0})),(0,h.Z)(i,"KPI Item",d.createElement("div",{style:{border:"0px dashed gray",width:"auto"}},d.createElement("textarea",{defaultValue:e.value,className:V.inputValue,style:{fontWeight:"bolder",border:"1px dashed gray",height:"auto",minHeight:"50px",width:"100%",paddingLeft:"10px",margin:"10px"},disabled:!0}))),(0,h.Z)(i,"KPI Element",d.createElement("div",{style:{border:"0px dashed gray",width:"auto"}},d.createElement(B,{value:null!==(l=null===e||void 0===e?void 0:e.alt_value)&&void 0!==l?l:"",readOnly:!0,showToolbar:!1}))),(0,h.Z)(i,"Owner",d.createElement("div",{style:{border:"0px dashed gray",width:"auto"}},d.createElement(B,{value:null!==(o=null===e||void 0===e?void 0:e.quantity)&&void 0!==o?o:"",readOnly:!0,showToolbar:!1}))),(0,h.Z)(i,"Comments",d.createElement("div",{style:{border:"0px dashed gray",width:"auto"}},d.createElement(B,{value:null!==(t=null===e||void 0===e?void 0:e.total)&&void 0!==t?t:"",readOnly:!0,showToolbar:!1}))),(0,h.Z)(i,"id",e.id),i}))}):d.createElement("br",null))))))},ue=l(74165),re=l(15861),se={itemsTable:"CustomRoutes_itemsTable__9GNyT",inputValue:"CustomRoutes_inputValue__mE20S",multiselectComponent:"CustomRoutes_multiselectComponent__JWLpx",dropdownComponent:"CustomRoutes_dropdownComponent__1P3Wa",dropdownComponent_ii:"CustomRoutes_dropdownComponent_ii__5Cecx",title:"CustomRoutes_title__yxO4J",subtitle:"CustomRoutes_subtitle__aarjQ",dropdownContainer:"CustomRoutes_dropdownContainer__LcpSg",currencyInput:"CustomRoutes_currencyInput__Axdwe",tmiClassName:"CustomRoutes_tmiClassName__k+Nse",templateNotes:"CustomRoutes_templateNotes__ZU+Al"},ve=l(68218),ce=l(84634),pe=l(60179),me=l(37390),fe=l(11217),_e=(l(11712),(0,m.$j)((function(e){var n=e.authReducer,l=(n.authenticatedUser.position,n.authenticatedUser),o=e.sessionReducer.user,t=e.flowReducer;return{begunModule:t.begunModule,allModules:t.allModules,companyData:t.companyData,companyUsersArray:t.companyUsersArray,companyPositionsArray:t.companyPositionsArray,components:t.components,authenticatedUser:l,user:o,companyProcesses:t.companyProcesses}}))((function(e){var n,l,a,u,r,s,v,c,p,y,b,E,C,Z,M,I,T,z,U,A,R,L,W,q,F,B,Y,H,V,J,G,Q,K,X=e.components,$=e.component,ee=e.selectedComponent,ne=e.children,le=(0,m.I0)(),oe=(0,m.v9)((function(e){return e.flowReducer})),te=oe.companyData,ie=oe.map,de=(0,_.pQ)(),ae=(0,i.Z)(de,2),_e=ae[0],ye=ae[1],he=(0,d.useState)({}),ge=(0,i.Z)(he,2),be=ge[0],xe=ge[1],Ee=(0,d.useState)([]),Ce=(0,i.Z)(Ee,2),we=(Ce[0],Ce[1]),Ze=(0,d.useState)(),Me=(0,i.Z)(Ze,2),Se=Me[0],ke=Me[1],Ie=(0,d.useState)(),Pe=(0,i.Z)(Ie,2),Ne=Pe[0],Te=Pe[1],De=(0,d.useState)(!1),ze=(0,i.Z)(De,2),Ue=ze[0],Ae=ze[1],Oe=(0,d.useState)(!0),Re=(0,i.Z)(Oe,2),Le=Re[0],We=Re[1],qe=(0,d.useState)(_e.items.length>0),Fe=(0,i.Z)(qe,2),Be=Fe[0],Ye=Fe[1],He=$.selected_fields.find((function(e){var n;return"item_code"===(null===(n=e.options)||void 0===n?void 0:n.mapToItem)&&"Record"===e.data_type_name&&"Customer"===e.field_name})),je=$.selected_fields.find((function(e){var n;return"alt_value"===(null===(n=e.options)||void 0===n?void 0:n.mapToItem)&&"Dropdown"===e.data_type_name&&"Status"===e.field_name})),Ve=$.selected_fields.find((function(e){return"Map"===e.data_type_name})),Je=X.filter((function(e){return e.component_fields.filter((function(e){var n;return e.component_blueprint_id===(null===He||void 0===He||null===(n=He.options)||void 0===n?void 0:n.component_id)})).length>0})),Ge=(0,d.useState)(null===Je||void 0===Je?void 0:Je.filter((function(e){return!_e.items.map((function(e){return e.item_code})).includes(e.title)&&e.component_fields.find((function(e){return"Pin"===e.data_type_name&&e.value}))}))),Qe=(0,i.Z)(Ge,2),Ke=Qe[0],Xe=Qe[1],$e=(0,d.useState)($.selected_fields.find((function(e){var n;return"Pin"===e.data_type_name&&!0===(null===(n=e.options)||void 0===n?void 0:n.destination)}))),en=(0,i.Z)($e,1)[0],nn=(0,d.useState)(null===(n=_e.newStepComponents.find((function(e){return e.selected_fields.find((function(e){return"Number"===e.data_type_name&&"Stopover"===e.field_name}))})))||void 0===n?void 0:n.selected_fields.find((function(e){return"Number"===e.data_type_name&&"Stopover"===e.field_name}))),ln=(0,i.Z)(nn,1)[0],on=(0,d.useMemo)((function(){return[{Header:"View",columns:[{Header:"View",accessor:"view"}]}]}),[]),tn=null===(l=_e.currentStep)||void 0===l?void 0:l.component_blueprints.findIndex((function(e){return e.id===(null===$||void 0===$?void 0:$.id)})),dn=function(e,n){var l,o,i,d=(0,t.Z)(null!==(l=null===(o=_e.currentStep)||void 0===o?void 0:o.component_blueprints)&&void 0!==l?l:[]),a=null===(i=d[tn])||void 0===i?void 0:i.selected_fields[n];"Number"===(null===a||void 0===a?void 0:a.data_type_name)?Number(+e)?a.value=e:""===e&&(a.value=""):null!==a&&void 0!==a&&a.data_type_name&&(a.value=e),null!==a&&void 0!==a&&a.value&&a.mandatory&&(a.errors=""),ye({action:_._U.setComponentBlueprints,value:d}),ye({action:_._U.setModuleNewStepComponents,value:d})};return d.createElement("div",{className:j},d.createElement("div",{style:{display:"flex",width:"100%",flexDirection:g.tq?"column":"row"}},d.createElement("div",{style:{width:g.tq?"100%":"20%",padding:"140px 10px 0 10px"}},d.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},!0===(null===en||void 0===en?void 0:en.visible)&&d.createElement("div",null,"Route:"),_e.items.length>0&&d.createElement(S.G,{icon:k.XTR,onClick:function(){ye({action:_._U.setModuleItems,value:[]}),le((0,D.wM)({routes:{},pins:""}))},style:{cursor:"pointer"}})),_e.items.length>0?d.createElement(pe.zx,null,!0===(null===en||void 0===en?void 0:en.visible)&&d.createElement("div",{style:{border:"1px dashed gray",padding:"5px",cursor:"pointer"},onClick:function(){var e,n,l,o=JSON.parse(null!==(e=null===en||void 0===en?void 0:en.value)&&void 0!==e?e:"{}");null!==o&&void 0!==o&&o.source&&(le((0,D.wM)({pins:[{position:{lat:null===o||void 0===o||null===(n=o.source)||void 0===n?void 0:n.lat,lng:null===o||void 0===o||null===(l=o.source)||void 0===l?void 0:l.lng},type:"OriginMarker"}]})),le((0,D.wM)({zoom:17})))}},d.createElement("p",null,"Start"),d.createElement("p",{style:{fontSize:"12px"}},"".concat(null!==(a=null===(u=JSON.parse(null!==(s=null===en||void 0===en?void 0:en.value)&&void 0!==s?s:"{}"))||void 0===u||null===(r=u.source)||void 0===r?void 0:r.address)&&void 0!==a?a:"Please set start"))),d.createElement(pe.iA,{columns:on,data:null===_e||void 0===_e?void 0:_e.items.map((function(e,n){var l,o,t,i,a,u,r,s,v,c=JSON.parse(null!==(l=null===e||void 0===e?void 0:e.quantity)&&void 0!==l?l:"{}"),p=JSON.parse(null!==(o=e[null===je||void 0===je||null===(t=je.options)||void 0===t?void 0:t.mapToItem])&&void 0!==o?o:"{}"),m=JSON.parse(null!==(i=null===e||void 0===e?void 0:e.value)&&void 0!==i?i:"{}");return{id:e.id,view:d.createElement("div",{style:{border:e.isOpen?"1px dashed blue":"1px dashed gray",padding:"5px 5px 10px 5px"}},e.isOpen&&d.createElement("div",{style:{display:"flex",justifyContent:"right"}},d.createElement(S.G,{icon:k.$aW,onClick:function(){ye({action:_._U.removeModuleItems,value:e})},style:{cursor:"pointer"}})),d.createElement("p",{style:{cursor:"pointer"},onClick:function(){var n;if(e.isOpen=!(null!==(n=null===e||void 0===e?void 0:e.isOpen)&&void 0!==n&&n),ye({action:_._U.setModuleItems,value:_e.items}),e.isOpen){var l,o;le((0,D.wM)({pins:[{position:{lat:null===m||void 0===m||null===(l=m.source)||void 0===l?void 0:l.lat,lng:null===m||void 0===m||null===(o=m.source)||void 0===o?void 0:o.lng},type:"Pin"}]})),le((0,D.wM)({zoom:17}))}else{if(null!==en&&void 0!==en&&en.value){var t,i,d,a,u,r,s=JSON.parse(null!==(t=null===en||void 0===en?void 0:en.value)&&void 0!==t?t:"{}");le((0,D.wM)({pins:[{position:{lat:null===s||void 0===s||null===(i=s.source)||void 0===i?void 0:i.lat,lng:null===s||void 0===s||null===(d=s.source)||void 0===d?void 0:d.lng},type:"OriginMarker"},{position:{lat:null===s||void 0===s||null===(a=s.destination)||void 0===a?void 0:a.lat,lng:null===s||void 0===s||null===(u=s.destination)||void 0===u?void 0:u.lng},type:"DestinationMarker"}].concat(null===_e||void 0===_e||null===(r=_e.items)||void 0===r?void 0:r.map((function(e){var n,l,o,t=JSON.parse(null!==(n=e.value)&&void 0!==n?n:"{}");return{position:{lat:null===t||void 0===t||null===(l=t.source)||void 0===l?void 0:l.lat,lng:null===t||void 0===t||null===(o=t.source)||void 0===o?void 0:o.lng},type:"Pin"}})))}))}else{var v;le((0,D.wM)({pins:null===_e||void 0===_e||null===(v=_e.items)||void 0===v?void 0:v.map((function(e){var n,l,o,t=JSON.parse(null!==(n=e.value)&&void 0!==n?n:"{}");return{position:{lat:null===t||void 0===t||null===(l=t.source)||void 0===l?void 0:l.lat,lng:null===t||void 0===t||null===(o=t.source)||void 0===o?void 0:o.lng},type:"Pin"}}))}))}Ye(!1),le((0,D.wM)({zoom:null}))}}},d.createElement("span",{style:{fontSize:"12px"}},"".concat(n+1,". ")),"".concat(e.item_code)),d.createElement("p",{style:{fontSize:"14px"}},"".concat(null===m||void 0===m||null===(a=m.source)||void 0===a?void 0:a.address)),e.isOpen&&d.createElement("div",null,Object.keys(c).map((function(e,n){return d.createElement("p",{style:{fontSize:"12px"},key:n},"".concat(e,": ").concat(N()(c[e]).format("DD MMMM YYYY HH:mm")))})),d.createElement("p",null,"Notes"),d.createElement("textarea",{defaultValue:null===p||void 0===p?void 0:p.notes,className:se.templateNotes,onChange:function(e){return p.notes=e.target.value}}),d.createElement("p",null,"Status"),je&&d.createElement(O.Z,{visible:!0,items:null===je||void 0===je||null===(u=je.options)||void 0===u?void 0:u.list.map((function(e){return{label:e,value:e}})),className:se.dropdownClassContainer,onChange:function(n){var l,o;p.status=n,e[null===je||void 0===je||null===(l=je.options)||void 0===l?void 0:l.mapToItem]=JSON.stringify(p),c[n]=(0,P.now)(),e.quantity=JSON.stringify(c),null!==Ve&&void 0!==Ve&&null!==(o=Ve.options)&&void 0!==o&&o.realtime&&null!==ee&&void 0!==ee&&ee.id?navigator.geolocation.getCurrentPosition((function(l){var o={},t={lat:l.coords.latitude,lng:l.coords.longitude,id:"10"};o[n]=t,e.total=JSON.stringify(o),ye({action:_._U.setModuleItems,value:_e.items}),ee.lat=l.coords.latitude,ee.lng=l.coords.longitude})):ye({action:_._U.setModuleItems,value:_e.items})},selectionType:null===je||void 0===je||null===(r=je.options)||void 0===r?void 0:r.type,backgroundColor:null!==je&&void 0!==je&&null!==(s=je.options)&&void 0!==s&&s.valueC&&null!==je&&void 0!==je&&je.value?null===je||void 0===je||null===(v=je.options)||void 0===v?void 0:v.valueC:"",value:void 0===(null===p||void 0===p?void 0:p.status)||null===(null===p||void 0===p?void 0:p.status)?"":null===p||void 0===p?void 0:p.status}))),item:e}})),onhandleDragEnd:function(e){We(!1),Ae(!0),setTimeout((function(){return Ae(!1)}),10),ye({action:_._U.setModuleItems,value:e.map((function(e,n){return(0,o.Z)((0,o.Z)({},e.item),{},{index:n})}))})}}),!0===(null===en||void 0===en?void 0:en.visible)&&d.createElement("div",{style:{border:"1px dashed gray",marginTop:"10px",cursor:"pointer"},onClick:function(){var e,n,l,o=JSON.parse(null!==(e=null===en||void 0===en?void 0:en.value)&&void 0!==e?e:"{}");null!==o&&void 0!==o&&o.destination&&(le((0,D.wM)({pins:[{position:{lat:null===o||void 0===o||null===(n=o.destination)||void 0===n?void 0:n.lat,lng:null===o||void 0===o||null===(l=o.destination)||void 0===l?void 0:l.lng},type:"DestinationMarker"}]})),le((0,D.wM)({zoom:17})))}},d.createElement("p",null,"End"),d.createElement("p",{style:{fontSize:"12px"}},"".concat(null!==(v=null===(c=JSON.parse(null!==(y=null===en||void 0===en?void 0:en.value)&&void 0!==y?y:"{}"))||void 0===c||null===(p=c.destination)||void 0===p?void 0:p.address)&&void 0!==v?v:"Please set end")))):d.createElement("div",null,d.createElement("p",{style:{fontSize:"14px"}},"None found."),d.createElement("p",{style:{fontSize:"14px"}},"Add using filters below. Click Add to Route or Add All to Route to add pin/s. Set a starting and end point. When done press Generate Route. You can also set Optimize Route Order to No and drag pins manually.")),(null===ie||void 0===ie||null===(b=ie.routes)||void 0===b||null===(E=b.DRIVE)||void 0===E?void 0:E.length)>0&&(null===_e||void 0===_e||null===(C=_e.items)||void 0===C?void 0:C.length)>0&&d.createElement("div",{style:{margin:"40px 0"}},d.createElement("p",{style:{fontSize:"12px"}},"Route Distance: ".concat(+(null===ie||void 0===ie||null===(Z=ie.routes)||void 0===Z||null===(M=Z.DRIVE[0])||void 0===M?void 0:M.distanceMeters)/1e3," km")),d.createElement("p",{style:{fontSize:"12px"}},"No of Stopover: ".concat(_e.items.length," ")),d.createElement("p",{style:{fontSize:"12px"}},"Time per Stopover: ".concat(+(null===ln||void 0===ln?void 0:ln.value)/60," min")),d.createElement("p",{style:{fontSize:"12px"}},"Total Duration: ".concat(((+(null===ie||void 0===ie||null===(I=ie.routes)||void 0===I||null===(T=I.DRIVE[0])||void 0===T||null===(z=T.duration)||void 0===z?void 0:z.replace("s",""))+ +(null===ln||void 0===ln?void 0:ln.value)*_e.items.length)/3600).toFixed(2)," hr"))),(null===_e||void 0===_e||null===(U=_e.items)||void 0===U?void 0:U.length)>1&&(null===en||void 0===en?void 0:en.value)&&d.createElement("div",null,!Ue&&d.createElement(x.pd,{id:"optimizeWaypointOrder?",title:"Optimize Route Order",ungrouped:!0,withAckButton:!1,value:Le,style:{margin:"20px 0px 20px 0px",width:"auto"},toggleSelected:function(e){We(!!e)}}),d.createElement(x.zx,{title:"Generate Routes",style:{width:"100%",backgroundColor:"darkblue",textAlign:"left",marginTop:"50px"},clicked:(0,re.Z)((0,ue.Z)().mark((function e(){var n,l,t,i,d,a,u,r,s,v,c,p,m,f,y,g,b,x,E,C,w,Z,M,S;return(0,ue.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===en||void 0===en||!en.value){e.next=9;break}return a={},u=JSON.parse(null!==(n=null===en||void 0===en?void 0:en.value)&&void 0!==n?n:"{}"),e.next=5,(0,fe.s)({origin:{location:{latLng:{latitude:u.source.lat,longitude:u.source.lng}}},destination:{location:{latLng:{latitude:u.destination.lat,longitude:u.destination.lng}}},intermediates:null===_e||void 0===_e||null===(l=_e.items)||void 0===l?void 0:l.map((function(e){var n,l,o,t=JSON.parse(null!==(n=e.value)&&void 0!==n?n:"{}");return{location:{latLng:{latitude:null===t||void 0===t||null===(l=t.source)||void 0===l?void 0:l.lat,longitude:null===t||void 0===t||null===(o=t.source)||void 0===o?void 0:o.lng}}}})),computeAlternativeRoutes:"false",optimizeWaypointOrder:Le?"true":"false",travelMode:me.jk[0],routingPreference:"traffic_aware",extraComputations:["TRAFFIC_ON_POLYLINE"]},null===te||void 0===te||null===(t=te.misc_info)||void 0===t?void 0:t.map);case 5:null!==(r=e.sent)&&void 0!==r&&null!==(i=r.routes)&&void 0!==i&&i.DRIVE&&null!==r&&void 0!==r&&null!==(s=r.routes)&&void 0!==s&&null!==(v=s.DRIVE[0])&&void 0!==v&&v.legs&&(null===r||void 0===r||(null===(c=r.routes)||void 0===c||delete c.DRIVE[0].legs)),a[me.jk[0]]=[],(null===r||void 0===r||null===(d=r.routes)||void 0===d?void 0:d.length)>0&&(null!==(p=r.routes[0])&&void 0!==p&&p.optimizedIntermediateWaypointIndex&&ye({action:_._U.setModuleItems,value:null===(M=r.routes[0])||void 0===M||null===(S=M.optimizedIntermediateWaypointIndex)||void 0===S?void 0:S.map((function(e,n){return(0,o.Z)((0,o.Z)({},_e.items[+e]),{},{index:n})}))}),a[me.jk[0]]=[null===r||void 0===r?void 0:r.routes[0]],le((0,D.wM)({routes:a,pins:[{position:{lat:null===u||void 0===u||null===(m=u.source)||void 0===m?void 0:m.lat,lng:null===u||void 0===u||null===(f=u.source)||void 0===f?void 0:f.lng},type:"OriginMarker"},{position:{lat:null===u||void 0===u||null===(y=u.destination)||void 0===y?void 0:y.lat,lng:null===u||void 0===u||null===(g=u.destination)||void 0===g?void 0:g.lng},type:"DestinationMarker"}].concat(null===_e||void 0===_e||null===(b=_e.items)||void 0===b?void 0:b.map((function(e){var n,l,o,t=JSON.parse(null!==(n=e.value)&&void 0!==n?n:"{}");return{position:{lat:null===t||void 0===t||null===(l=t.source)||void 0===l?void 0:l.lat,lng:null===t||void 0===t||null===(o=t.source)||void 0===o?void 0:o.lng},type:"Pin"}})))})),dn(JSON.stringify((0,o.Z)((0,o.Z)({},ie),{},{routes:(0,h.Z)({},me.jk[0],[null===r||void 0===r?void 0:r.routes[0]]),pins:[{position:{lat:null===u||void 0===u||null===(x=u.source)||void 0===x?void 0:x.lat,lng:null===u||void 0===u||null===(E=u.source)||void 0===E?void 0:E.lng},type:"OriginMarker"},{position:{lat:null===u||void 0===u||null===(C=u.destination)||void 0===C?void 0:C.lat,lng:null===u||void 0===u||null===(w=u.destination)||void 0===w?void 0:w.lng},type:"DestinationMarker"}].concat(null===_e||void 0===_e||null===(Z=_e.items)||void 0===Z?void 0:Z.map((function(e){var n,l,o,t=JSON.parse(null!==(n=e.value)&&void 0!==n?n:"{}");return{position:{lat:null===t||void 0===t||null===(l=t.source)||void 0===l?void 0:l.lat,lng:null===t||void 0===t||null===(o=t.source)||void 0===o?void 0:o.lng},type:"Pin"}})))})),Ve.index));case 9:case"end":return e.stop()}}),e)})))})),(null===_e||void 0===_e||null===(A=_e.items)||void 0===A?void 0:A.length)>1&&!0===!(null!==en&&void 0!==en&&en.visible)&&d.createElement("div",null,d.createElement(x.zx,{title:"Save Map",loading:Ue,style:{width:"100%",backgroundColor:"darkblue",textAlign:"left",marginTop:"50px"},clicked:function(){var e;dn(JSON.stringify((0,o.Z)((0,o.Z)({},ie),{},{pins:null===_e||void 0===_e||null===(e=_e.items)||void 0===e?void 0:e.map((function(e){var n,l,o,t=JSON.parse(null!==(n=e.value)&&void 0!==n?n:"{}");return{position:{lat:null===t||void 0===t||null===(l=t.source)||void 0===l?void 0:l.lat,lng:null===t||void 0===t||null===(o=t.source)||void 0===o?void 0:o.lng},type:"Pin"}}))})),Ve.index),Ae(!0),setTimeout((function(){return Ae(!1)}),1e3)}}))),d.createElement("div",{style:{width:g.tq?"100%":"80%"}},d.createElement("div",{style:{display:"flex",justifyContent:"right",padding:"20px 5px 10px 10px"}},d.createElement(S.G,{icon:Be?k.byT:k.tAh,onClick:function(){Ye(!Be),le((0,D.wM)({zoom:null}))},style:{cursor:"pointer"}})),d.createElement("div",{style:{height:"auto",width:"100%",pointerEvents:Be?"none":""}},ne))),d.createElement("div",{style:{display:"flex",flexDirection:g.tq?"column":"row",width:"100%",padding:"20px"}},d.createElement("div",{style:{width:"20%",padding:"20px 10px 0 10px"}},d.createElement("div",{style:{disabled:!0,width:"250px",display:"flex",flexDirection:"column",marginRight:"0px",mmarginTop:"".concat(280+60*(null!==(R=null===_e||void 0===_e||null===(L=_e.items)||void 0===L?void 0:L.length)&&void 0!==R?R:1),"px"),fontSize:"18px"}},"Filters:",(null===He||void 0===He||null===(W=He.options)||void 0===W||null===(q=W.filters)||void 0===q?void 0:q.length)>0&&d.createElement("div",{className:se.dropdownContainer},d.createElement(x.rk,{items:Je?ve.Z(ce.Z("value"))(Je.map((function(e){var n=e.component_fields.find((function(e){var n;return e.field_name===(null===He||void 0===He||null===(n=He.options)||void 0===n?void 0:n.filters[0])}));return{label:null===n||void 0===n?void 0:n.value,value:null===n||void 0===n?void 0:n.value,component:e}}))):[],onChange:function(e){var n,l,o,t;we([]),xe((0,h.Z)({},null===He||void 0===He||null===(n=He.options)||void 0===n?void 0:n.filters[0],e.value)),Xe([]),Te(!1),ke(!1),setTimeout((function(){return ke(!0)}),10),Xe(null===Je||void 0===Je||null===(l=Je.filter((function(e){return!_e.items.map((function(e){return e.item_code})).includes(e.title)&&e.component_fields.find((function(e){return"Pin"===e.data_type_name&&e.value}))})))||void 0===l?void 0:l.filter((function(n){var l;return(null===(l=n.component_fields.filter((function(n){return n.value===e.value})))||void 0===l?void 0:l.length)>0}))),ye({action:_._U.setModuleNewStepComponents,value:null!==(o=null===(t=_e.currentStep)||void 0===t?void 0:t.component_blueprints)&&void 0!==o?o:[]})},placeholder:null===He||void 0===He||null===(F=He.options)||void 0===F?void 0:F.filters[0],moliclassname:se.componentsSelectMenuOverlayListItem,className:se.currencyInput,tmiClassName:se.tmiClassName})),d.createElement("div",{style:{height:"10px"}}),(null===He||void 0===He||null===(B=He.options)||void 0===B||null===(Y=B.filters)||void 0===Y?void 0:Y.length)>1&&!g.tq&&Se&&d.createElement("div",{className:se.dropdownContainer},d.createElement(x.rk,{items:be[null===He||void 0===He||null===(H=He.options)||void 0===H?void 0:H.filters[0]]?ve.Z(ce.Z("value"))(Je.map((function(e){var n=e.component_fields.find((function(e){var n;return e.field_name===(null===He||void 0===He||null===(n=He.options)||void 0===n?void 0:n.filters[1])}));return{label:null===n||void 0===n?void 0:n.value,value:null===n||void 0===n?void 0:n.value,component:e}})).filter((function(e){return e.component.component_fields.filter((function(e){var n,l;return e.value===be[null===He||void 0===He||null===(n=He.options)||void 0===n?void 0:n.filters[0]]&&e.field_name===(null===He||void 0===He||null===(l=He.options)||void 0===l?void 0:l.filters[0])})).length>0}))):[],onChange:function(e){var n,l,t,i;Te(!1),setTimeout((function(){return Te(!0)}),10),ye({action:_._U.setModuleNewStepComponents,value:null!==(n=null===(l=_e.currentStep)||void 0===l?void 0:l.component_blueprints)&&void 0!==n?n:[]}),xe((0,o.Z)((0,o.Z)({},be),{},(0,h.Z)({},null===He||void 0===He||null===(t=He.options)||void 0===t?void 0:t.filters[1],e.value))),Xe(null===Je||void 0===Je||null===(i=Je.filter((function(e){return!_e.items.map((function(e){return e.item_code})).includes(e.title)&&e.component_fields.find((function(e){return"Pin"===e.data_type_name&&e.value}))})))||void 0===i?void 0:i.filter((function(n){var l;return(null===(l=n.component_fields.filter((function(n){return n.value===e.value})))||void 0===l?void 0:l.length)>0})).filter((function(e){var n;return(null===(n=e.component_fields.filter((function(e){var n;return e.value===be[null===He||void 0===He||null===(n=He.options)||void 0===n?void 0:n.filters[0]]})))||void 0===n?void 0:n.length)>0})))},placeholder:null===He||void 0===He||null===(V=He.options)||void 0===V?void 0:V.filters[1],style:{fontSize:"16px"},moliclassname:se.componentsSelectMenuOverlayListItem,tmiClassName:se.tmiClassName})),d.createElement("div",{style:{height:"10px"}}),(null===He||void 0===He||null===(J=He.options)||void 0===J||null===(G=J.filters)||void 0===G?void 0:G.length)>2&&!g.tq&&Ne&&d.createElement("div",{className:se.dropdownContainer},d.createElement(x.rk,{items:be[null===He||void 0===He||null===(Q=He.options)||void 0===Q?void 0:Q.filters[1]]?ve.Z(ce.Z("value"))(Ke.map((function(e){var n=e.component_fields.find((function(e){var n;return e.field_name===(null===He||void 0===He||null===(n=He.options)||void 0===n?void 0:n.filters[2])}));return{label:null===n||void 0===n?void 0:n.value,value:null===n||void 0===n?void 0:n.value,component:e}})).filter((function(e){return e.component.component_fields.filter((function(e){var n,l;return e.value===be[null===He||void 0===He||null===(n=He.options)||void 0===n?void 0:n.filters[1]]&&e.field_name===(null===He||void 0===He||null===(l=He.options)||void 0===l?void 0:l.filters[1])})).length>0}))):[],onChange:function(e){var n,l,t,i;ye({action:_._U.setModuleNewStepComponents,value:null!==(n=null===(l=_e.currentStep)||void 0===l?void 0:l.component_blueprints)&&void 0!==n?n:[]}),xe((0,o.Z)((0,o.Z)({},be),{},(0,h.Z)({},null===He||void 0===He||null===(t=He.options)||void 0===t?void 0:t.filters[1],e.value))),Xe(null===Je||void 0===Je||null===(i=Je.filter((function(e){return!_e.items.map((function(e){return e.item_code})).includes(e.title)&&e.component_fields.find((function(e){return"Pin"===e.data_type_name&&e.value}))})))||void 0===i?void 0:i.filter((function(n){var l;return(null===(l=n.component_fields.filter((function(n){return n.value===e.value})))||void 0===l?void 0:l.length)>0})).filter((function(e){var n;return(null===(n=e.component_fields.filter((function(e){var n;return e.value===be[null===He||void 0===He||null===(n=He.options)||void 0===n?void 0:n.filters[0]]})))||void 0===n?void 0:n.length)>0})))},placeholder:null===He||void 0===He||null===(K=He.options)||void 0===K?void 0:K.filters[2],style:{fontSize:"16px"},moliclassname:se.componentsSelectMenuOverlayListItem,tmiClassName:se.tmiClassName})))),d.createElement("div",{style:{width:g.tq?"100%":"80%"}},d.createElement(w.default,{className:se.itemsTable,modern:!!g.tq,columns:["Name","Address","Action"],list:null===Ke||void 0===Ke?void 0:Ke.map((function(e){var n,l,o=null===(n=e.component_fields.find((function(e){return"Pin"===e.data_type_name})))||void 0===n?void 0:n.value,t=JSON.parse(null!==o&&void 0!==o?o:"{}");return{id:e.id,location:null===t||void 0===t?void 0:t.source,Name:d.createElement("div",{style:{textAlign:"left",padding:"10px",cursor:"pointer"}},e.title),Action:d.createElement(x.zx,{title:!0===(null===en||void 0===en?void 0:en.visible)?"Add to Route":"Add to Map",clicked:function(){var n,l,i={id:(0,f.mR)(),item_code:e.title,value:o,alt_value:"{}",quantity:"{}",total:"{}",isOpen:!0};ye({action:_._U.addModuleItems,value:i}),Xe(Ke.filter((function(n){return n.id!==e.id}))),le((0,D.wM)({pins:[{position:{lat:null===t||void 0===t||null===(n=t.source)||void 0===n?void 0:n.lat,lng:null===t||void 0===t||null===(l=t.source)||void 0===l?void 0:l.lng}}]}))},titleStyle:{fontSize:"12px"},style:{height:"30px",width:"140px"}}),Address:d.createElement("div",{style:{textAlign:"left",padding:"10px"}},null===(l=t.source)||void 0===l?void 0:l.address)}})),onListItemClick:function(e){var n,l;le((0,D.wM)({pins:[{position:{lat:null===(n=e.location)||void 0===n?void 0:n.lat,lng:null===(l=e.location)||void 0===l?void 0:l.lng},type:"Pin"}]}))}}),Ke.length>1&&d.createElement("div",{style:{display:"flex",justifyContent:"right",padding:"20px 5px 0 10px"}},d.createElement(x.zx,{title:!0===(null===en||void 0===en?void 0:en.visible)?"Add All to Route":"Add All to Map",style:{height:"30px",width:"140px",backgroundColor:"darkgreen"},titleStyle:{fontSize:"12px"},clicked:function(){var e=Ke.map((function(e){var n,l=null===(n=e.component_fields.find((function(e){return"Pin"===e.data_type_name})))||void 0===n?void 0:n.value;return{id:(0,f.mR)(),item_code:e.title,value:l,alt_value:"{}",quantity:"{}",total:"{}"}}));le((0,D.wM)({pins:null===e||void 0===e?void 0:e.map((function(e){var n,l,o,t=JSON.parse(null!==(n=e.value)&&void 0!==n?n:"{}");return{position:{lat:null===t||void 0===t||null===(l=t.source)||void 0===l?void 0:l.lat,lng:null===t||void 0===t||null===(o=t.source)||void 0===o?void 0:o.lng},type:"Pin"}}))})),ye({action:_._U.setModuleItems,value:[].concat((0,t.Z)(_e.items),(0,t.Z)(e))}),Xe([])}})))))}))),ye=l(67598),he=l(60534),ge=l(67861),be=function(e){var n,l,d,a,u,r,s,v,c,p,m,y,b,E,w,Z,S,k,I,P,N,T,D,z,U,A=(0,_.pQ)(),O=(0,i.Z)(A,2),R=O[0],L=O[1],W=e.user,q=e.favorites,F=e.creating,B=e.items,Y=e.templateName,H=e.field,j=e.showSecond,V=e.listItems,J=e.orderItems,G=e.setShowSecond,Q=e.components,X=e.template,$=e.component,ee=e.showFavorites,ne=e.companyData,le=e.setShowFavorites,oe=e.setListItems,te=e.setOrderItems,ie=e.setSelectedItems,de=e.selectedItems,ae=null!==(n=null===X||void 0===X||null===(l=X.config.find((function(e){return"quantity"===e.key})))||void 0===l?void 0:l.label)&&void 0!==n?n:"Quantity",ue=null!==(d=null===X||void 0===X||null===(a=X.config.find((function(e){return"alt_value"===e.key})))||void 0===a?void 0:a.label)&&void 0!==d?d:"Actual",re=null!==(u=null===X||void 0===X||null===(r=X.config.find((function(e){return"item_code"===e.key})))||void 0===r?void 0:r.label)&&void 0!==u?u:"Product ID",se=null!==(s=null===X||void 0===X?void 0:X.list)&&void 0!==s?s:[],pe=function(e){var n,l=[];e.filter((function(e){var n=null===B||void 0===B?void 0:B.find((function(n){var l;return(null===(l=n.component_fields.filter((function(n){return n.value===e.component_id})))||void 0===l?void 0:l.length)>0}));n&&(l=[].concat((0,t.Z)(l),[n]))})),oe(l),te(null===(n=l)||void 0===n?void 0:n.map((function(e){var n={};return $.selected_fields.filter((function(l){var t,i;"Text"!==l.data_type_name&&"Number"!==l.data_type_name||(n=(0,o.Z)((0,o.Z)({},n),{},(0,h.Z)({},l.field_name,null!==(t=null===(i=e.component_fields.find((function(e){return e.field_name===l.field_name})))||void 0===i?void 0:i.value)&&void 0!==t?t:0)))})),n})))},me=function(e,n,l){var o,t=e.component_fields.find((function(e){var n;return e.field_name===(null===$||void 0===$||null===(n=$.options)||void 0===n?void 0:n.key)})),i=null===R||void 0===R||null===(o=R.items)||void 0===o?void 0:o.find((function(e){return e.item_code===t.value}));if(void 0===i){var d,a,u,r={alt_value:null!==(d=J[n][ue])&&void 0!==d?d:0,quantity:null!==(a=J[n][ae])&&void 0!==a?a:0,item_code:t.value,id:(0,f.mR)(),value:null!==(u=parseFloat(l*+J[n][ae]).toFixed(2))&&void 0!==u?u:0};L({action:_._U.addModuleItems,value:r})}else{var s;if(0==+J[n][ae])L({action:_._U.removeModuleItems,value:i});else i.quantity=J[n][ae],i.alt_value=J[n][ue],i.value=null!==(s=parseFloat(l*+J[n][ae]).toFixed(2))&&void 0!==s?s:0,L({action:_._U.updateModuleItems,value:i})}};return ge.createElement("div",{style:{width:"100%",justifyContent:"center"}},ge.createElement("div",null,ge.createElement("div",{style:{display:"flex",flexDirection:"row",marginTop:"50px",width:"100%"}},ge.createElement("div",{style:{disabled:!0,width:"250px",display:g.tq?"none":"flex",flexDirection:"column",marginRight:"20px",marginTop:"".concat(280+60*(null!==(v=null===R||void 0===R||null===(c=R.items)||void 0===c?void 0:c.length)&&void 0!==v?v:1),"px"),fontSize:"18px"}},"Filters:",(null===H||void 0===H||null===(p=H.options)||void 0===p||null===(m=p.filters)||void 0===m?void 0:m.length)>0&&ge.createElement("div",{className:ye.Z.dropdownContainer},ge.createElement(x.rk,{items:B?ve.Z(ce.Z("value"))(B.map((function(e){var n=e.component_fields.find((function(e){var n;return e.field_name===(null===H||void 0===H||null===(n=H.options)||void 0===n?void 0:n.filters[0])}));return{label:null===n||void 0===n?void 0:n.value,value:null===n||void 0===n?void 0:n.value,component:e}}))):[],onChange:function(e){var n,l,t;le(!1),te([]),ie((0,h.Z)({},null===H||void 0===H||null===(n=H.options)||void 0===n?void 0:n.filters[0],e.value)),oe([]),G(!1),setTimeout((function(){return G(!0)}),10),oe(null===B||void 0===B?void 0:B.filter((function(n){var l;return(null===(l=n.component_fields.filter((function(n){return n.value===e.value})))||void 0===l?void 0:l.length)>0}))),L({action:_._U.setModuleNewStepComponents,value:null!==(l=null===(t=R.currentStep)||void 0===t?void 0:t.component_blueprints)&&void 0!==l?l:[]}),te(null===B||void 0===B?void 0:B.filter((function(n){var l;return(null===(l=n.component_fields.filter((function(n){return n.value===e.value})))||void 0===l?void 0:l.length)>0})).map((function(e){var n={};return $.selected_fields.filter((function(l){var t,i;"Text"!==l.data_type_name&&"Number"!==l.data_type_name||(n=(0,o.Z)((0,o.Z)({},n),{},(0,h.Z)({},l.field_name,null!==(t=null===(i=e.component_fields.find((function(e){return e.field_name===l.field_name})))||void 0===i?void 0:i.value)&&void 0!==t?t:0)))})),n})))},placeholder:null===H||void 0===H||null===(y=H.options)||void 0===y?void 0:y.filters[0],moliclassname:ye.Z.componentsSelectMenuOverlayListItem,className:ye.Z.currencyInput})),ge.createElement("div",{style:{height:"10px"}}),(null===H||void 0===H||null===(b=H.options)||void 0===b||null===(E=b.filters)||void 0===E?void 0:E.length)>1&&!g.tq&&j&&ge.createElement("div",{className:ye.Z.dropdownContainer},ge.createElement(x.rk,{items:de[null===H||void 0===H||null===(w=H.options)||void 0===w?void 0:w.filters[0]]?ve.Z(ce.Z("value"))(B.map((function(e){var n=e.component_fields.find((function(e){var n;return e.field_name===(null===H||void 0===H||null===(n=H.options)||void 0===n?void 0:n.filters[1])}));return{label:null===n||void 0===n?void 0:n.value,value:null===n||void 0===n?void 0:n.value,component:e}})).filter((function(e){return e.component.component_fields.filter((function(e){var n,l;return e.value===de[null===H||void 0===H||null===(n=H.options)||void 0===n?void 0:n.filters[0]]&&e.field_name===(null===H||void 0===H||null===(l=H.options)||void 0===l?void 0:l.filters[0])})).length>0}))):[],onChange:function(e){var n,l,t;le(!1),L({action:_._U.setModuleNewStepComponents,value:null!==(n=null===(l=R.currentStep)||void 0===l?void 0:l.component_blueprints)&&void 0!==n?n:[]}),ie((0,o.Z)((0,o.Z)({},de),{},(0,h.Z)({},null===H||void 0===H||null===(t=H.options)||void 0===t?void 0:t.filters[1],e.value))),te(null===B||void 0===B?void 0:B.filter((function(n){var l;return(null===(l=n.component_fields.filter((function(n){return n.value===e.value})))||void 0===l?void 0:l.length)>0})).filter((function(e){var n;return(null===(n=e.component_fields.filter((function(e){var n;return e.value===de[null===H||void 0===H||null===(n=H.options)||void 0===n?void 0:n.filters[0]]})))||void 0===n?void 0:n.length)>0})).map((function(e){var n={};return $.selected_fields.filter((function(l){var t,i;"Text"!==l.data_type_name&&"Number"!==l.data_type_name||(n=(0,o.Z)((0,o.Z)({},n),{},(0,h.Z)({},l.field_name,null!==(t=null===(i=e.component_fields.find((function(e){return e.field_name===l.field_name})))||void 0===i?void 0:i.value)&&void 0!==t?t:0)))})),n}))),oe(null===B||void 0===B?void 0:B.filter((function(n){var l;return(null===(l=n.component_fields.filter((function(n){return n.value===e.value})))||void 0===l?void 0:l.length)>0})).filter((function(e){var n;return(null===(n=e.component_fields.filter((function(e){var n;return e.value===de[null===H||void 0===H||null===(n=H.options)||void 0===n?void 0:n.filters[0]]})))||void 0===n?void 0:n.length)>0})))},placeholder:null===H||void 0===H||null===(Z=H.options)||void 0===Z?void 0:Z.filters[1],style:{fontSize:"16px"},moliclassname:ye.Z.componentsSelectMenuOverlayListItem}))),ge.createElement("div",{style:{display:"flex",flexDirection:"column",width:g.tq?"100%":"80%"}},"Orders",ge.createElement(he.Z,{className:ye.Z.mobileTable,style:{width:"100%"},highlights:"var(--app-color-gray-lighter)",columns:g.tq?null===ne||void 0===ne||null===(S=ne.misc_info)||void 0===S||null===(k=S.templatesData.find((function(e){return e.name===Y})).config)||void 0===k?void 0:k.filter((function(e){return"Text"===e.value||"Number"===e.value||"Connector"===e.value})).map((function(e){return e.label})).slice(0,2):null===ne||void 0===ne||null===(I=ne.misc_info)||void 0===I||null===(P=I.templatesData.find((function(e){return e.name===Y})).config)||void 0===P?void 0:P.filter((function(e){return"Text"===e.value||"Number"===e.value||"Connector"===e.value})).map((function(e){return e.label})),footer:g.tq?["Totals","".concat(K.Z((function(e,n){var l;return null!==(l=+e+ +n.quantity)&&void 0!==l?l:0}),0,null!==(N=null===R||void 0===R?void 0:R.items)&&void 0!==N?N:[]))]:["Totals:","".concat(K.Z((function(e,n){var l;return null!==(l=+e+ +n.quantity)&&void 0!==l?l:0}),0,null!==(T=null===R||void 0===R?void 0:R.items)&&void 0!==T?T:[])),"".concat(K.Z((function(e,n){var l;return+e+(isNaN(+n.alt_value)?0:null!==(l=+n.alt_value)&&void 0!==l?l:0)}),0,null!==(D=null===R||void 0===R?void 0:R.items)&&void 0!==D?D:[]))],list:null===R||void 0===R||null===(z=R.items)||void 0===z?void 0:z.map((function(e){var n,l,o,t=e.item_code,i=null!==(n=e.quantity)&&void 0!==n?n:0,d=null!==(l=e.alt_value)&&void 0!==l?l:0;return o={List:ge.createElement("div",{className:ye.Z.templateInformation,style:{display:"flex",flex:"1"}},ge.createElement("div",{style:{width:"40%"}},t),ge.createElement("div",{style:{width:"20%"}},i))},(0,h.Z)(o,null===$||void 0===$?void 0:$.options.key,ge.createElement("div",{className:ye.Z.templateInformation},ge.createElement("span",null,t))),(0,h.Z)(o,"Quantity",ge.createElement("div",{className:ye.Z.templateInformation},ge.createElement("span",null,i))),(0,h.Z)(o,"Actual",ge.createElement("div",{className:ye.Z.templateInformation},ge.createElement("span",null,d))),(0,h.Z)(o,"id",e.id),(0,h.Z)(o,"code",t),o})),onListItemClick:function(e){te(null===B||void 0===B?void 0:B.filter((function(n){var l;return(null===(l=n.component_fields.filter((function(n){return n.value===e.code})))||void 0===l?void 0:l.length)>0})).map((function(e){var n,l={};$.selected_fields.filter((function(n){var t,i;"Text"!==n.data_type_name&&"Number"!==n.data_type_name||(l=(0,o.Z)((0,o.Z)({},l),{},(0,h.Z)({},n.field_name,null!==(t=null===(i=e.component_fields.find((function(e){return e.field_name===n.field_name})))||void 0===i?void 0:i.value)&&void 0!==t?t:0)))}));var t=null===R||void 0===R||null===(n=R.items)||void 0===n?void 0:n.find((function(e){return e.item_code===l[re]}));return l[ue]=t.alt_value,l[ae]=t.quantity,l}))),oe(null===Q||void 0===Q?void 0:Q.filter((function(n){var l;return(null===(l=n.component_fields.filter((function(n){return n.value===e.code})))||void 0===l?void 0:l.length)>0})))}}),ge.createElement("br",null),ge.createElement("div",{className:ye.Z.searchContainer,style:{display:ee?"none":""}},ge.createElement(M.Oaj,null),ge.createElement("input",{placeholder:"Search",className:ye.Z.searchInput,onChange:function(e){var n,l,t;(null===(n=e.target.value)||void 0===n?void 0:n.length)>1?(te(null===(t=Q.filter((function(e){return e.component_fields.filter((function(e){return e.component_blueprint_id===H.options.component_id})).length>0})))||void 0===t?void 0:t.filter((function(n){var l;return(null===(l=n.component_fields.filter((function(n){return n.value.includes(e.target.value)})))||void 0===l?void 0:l.length)>0})).map((function(e){var n={};return $.selected_fields.filter((function(l){var t,i;"Text"!==l.data_type_name&&"Number"!==l.data_type_name||(n=(0,o.Z)((0,o.Z)({},n),{},(0,h.Z)({},l.field_name,null!==(t=null===(i=e.component_fields.find((function(e){return e.field_name===l.field_name})))||void 0===i?void 0:i.value)&&void 0!==t?t:0)))})),n}))),oe(null===B||void 0===B?void 0:B.filter((function(n){var l;return(null===(l=n.component_fields.filter((function(n){return n.value.includes(e.target.value)})))||void 0===l?void 0:l.length)>0})))):0==(null===(l=e.target.value)||void 0===l?void 0:l.length)&&(te([]),oe([]))}})),ge.createElement(he.Z,{className:ye.Z.mobileTable,style:{width:"100%"},columns:g.tq?[null!==(U=null===$||void 0===$?void 0:$.name)&&void 0!==U?U:"Item"]:(0,t.Z)(se),list:V.map((function(e,n){var l,o,i,d,a,u,r,s,v,c="".concat(null===(l=e.component_fields.find((function(e){return"Name"===e.field_name})))||void 0===l?void 0:l.value),p="".concat(null===(o=e.component_fields.find((function(e){return"Range"===e.field_name})))||void 0===o?void 0:o.value),m="".concat(null===(i=e.component_fields.find((function(e){return"Application"===e.field_name})))||void 0===i?void 0:i.value),f=null===(d=e.component_fields.find((function(e){return"Link"===e.data_type_name&&"Picture"!==e.field_name})))||void 0===d?void 0:d.value,_=null===(a=e.component_fields.find((function(e){return"Link"===e.data_type_name&&"Picture"===e.field_name})))||void 0===a?void 0:a.value,y=null===ne||void 0===ne||null===(u=ne.misc_info)||void 0===u?void 0:u.templatesData.find((function(e){return"Battery Order Template"===e.name})).config.find((function(e){return e.label===(null===$||void 0===$?void 0:$.options.key)})),h=null===R||void 0===R||null===(r=R.items)||void 0===r?void 0:r.find((function(e){return e[y.key]===J[n][null===$||void 0===$?void 0:$.options.key]})),g=h?+h.quantity:0,b=h?+h.alt_value:0,E={};return se.filter((function(n){var l,o;E[n]=ge.createElement("div",{className:ye.Z.templateInformation},"".concat(null!==(l=null===(o=e.component_fields.find((function(e){return e.field_name===n})))||void 0===o?void 0:o.value)&&void 0!==l?l:""))})),E[null!==(s=null===$||void 0===$?void 0:$.name)&&void 0!==s?s:"Item"]=ge.createElement("div",null,ge.createElement("div",{style:{display:"flex"}},ge.createElement("div",{style:{display:"",width:"70%"}},ge.createElement("div",{className:ye.Z.templateInformation},c)),ge.createElement("input",{autoComplete:"off",className:ye.Z.templateInput,style:{border:"1px solid var(--app-color-gray-light)",width:"30%",height:"30px"},placeholder:g,onChange:function(e){+e.target.value>-1&&(J[n][ae]=+e.target.value)},onBlur:function(){te((0,t.Z)(J)),me(e,n,0)}}))),E.Quantity=F?ge.createElement("div",{className:ye.Z.templateAddBox},ge.createElement(x.zx,{clear:!0,className:ye.Z.templatePlus,clicked:function(){g>0&&(J[n][ae]=g-1,J[n][ue]=b-1,te((0,t.Z)(J)),me(e,n,0))}},"-"),ge.createElement("input",{autoComplete:"off",className:ye.Z.templateInput,placeholder:h?h.quantity:0,onChange:function(e){+e.target.value>-1&&(J[n][ae]=+e.target.value,J[n][ue]=+e.target.value)},onBlur:function(){te((0,t.Z)(J)),me(e,n,0)}}),ge.createElement(x.zx,{clear:!0,className:ye.Z.templatePlus,clicked:function(){J[n][ae]=g+1,J[n][ue]=b+1,te((0,t.Z)(J)),me(e,n,0)}},"+")):ge.createElement("div",{className:ye.Z.templateInput},h?h.quantity:0),E.Action=ge.createElement(x.zx,{title:(null===(v=q.filter((function(e){return e.component_id===c})))||void 0===v?void 0:v.length)>0?"Remove from Favorites":"Add to Favorites",clicked:function(){var e;(null===(e=q.filter((function(e){return e.component_id===c})))||void 0===e?void 0:e.length)>0?(0,C.Ni)(q.find((function(e){return e.component_id===c})).id).subscribe({next:function(){pe(q.filter((function(e){return e.component_id!==c})))}}):(0,C.Ic)(W.id,c,"components").subscribe({})},titleStyle:{fontSize:"12px"},style:{width:"200px",height:"30px"}}),E.Info=ge.createElement("img",{alt:"lg",src:_,className:ye.Z.templatePicture,onClick:function(){return window.open(f,"_blank")}}),E.Name=ge.createElement("div",{className:ye.Z.templateInformation},c),E.Application=ge.createElement("div",{className:ye.Z.templateInformation},m),E.Range=ge.createElement("div",{className:ye.Z.templateInformation},p),E.Actual=ge.createElement("div",{className:ye.Z.templateAddBox,style:{padding:"0 10px 0 10px",border:F?"0":"1px solid var(--app-color-gray-lighter)"}},ge.createElement("input",{disabled:F,autoComplete:"off",className:ye.Z.templateInput,placeholder:b,onChange:function(e){+e.target.value>-1&&(J[n][ue]=+e.target.value,J[n][ae]=g)},onBlur:function(){te((0,t.Z)(J)),me(e,n,0)}})),E}))}),0===(null===V||void 0===V?void 0:V.length)&&ge.createElement("p",{style:{fontSize:g.tq?"16px":""}},"Please select an item"),ge.createElement(x.zx,{light:!0,title:ee?"Hide Favorites":"Show Favorites",clicked:function(){le(!ee),!1===ee?pe(q):(te([]),oe([]))},style:{width:"180px",display:g.tq?"none":""}}))),g.tq&&ge.createElement("div",{className:ye.Z.dropdownContainer},ge.createElement(x.rk,{items:ve.Z(ce.Z("value"))(B.map((function(e){var n=e.component_fields.find((function(e){var n;return e.field_name===(null===H||void 0===H||null===(n=H.options)||void 0===n?void 0:n.filters[0])}));return{label:null===n||void 0===n?void 0:n.value,value:null===n||void 0===n?void 0:n.value,component:e}}))),onChange:function(e){var n,l,t;le(!1),te([]),ie((0,h.Z)({},null===H||void 0===H||null===(n=H.options)||void 0===n?void 0:n.filters[0],e.value)),oe([]),G(!1),setTimeout((function(){return G(!0)}),10),oe(null===B||void 0===B?void 0:B.filter((function(n){var l;return(null===(l=n.component_fields.filter((function(n){return n.value===e.value})))||void 0===l?void 0:l.length)>0}))),L({action:_._U.setModuleNewStepComponents,value:null!==(l=null===(t=R.currentStep)||void 0===t?void 0:t.component_blueprints)&&void 0!==l?l:[]}),te(null===B||void 0===B?void 0:B.filter((function(n){var l;return(null===(l=n.component_fields.filter((function(n){return n.value===e.value})))||void 0===l?void 0:l.length)>0})).map((function(e){var n={};return $.selected_fields.filter((function(l){var t,i;"Text"!==l.data_type_name&&"Number"!==l.data_type_name||(n=(0,o.Z)((0,o.Z)({},n),{},(0,h.Z)({},l.field_name,null!==(t=null===(i=e.component_fields.find((function(e){return e.field_name===l.field_name})))||void 0===i?void 0:i.value)&&void 0!==t?t:0)))})),n})))},style:{fontSize:"16px"},moliclassname:ye.Z.componentsSelectMenuOverlayListItem})),ge.createElement("br",null)))},xe=function(e){var n,l,d,a,u,r,s,v,c,p,m,y,b,E,C,w,Z,S,k,I,P,N,T,D=(0,_.pQ)(),z=(0,i.Z)(D,2),U=z[0],A=z[1],O=e.creating,R=e.showSecond,L=e.listItems,W=e.orderItems,q=e.setShowSecond,F=e.components,B=e.template,Y=e.component,H=e.showFavorites,j=e.begunModule,V=e.setShowFavorites,J=e.setListItems,G=e.setOrderItems,Q=e.setSelectedItems,X=e.selectedItems,$=Y.selected_fields.find((function(e){return"Record"===e.data_type_name})),ee=F.filter((function(e){var n;return(null===(n=e.component_fields.filter((function(e){var n;return e.component_blueprint_id===(null===$||void 0===$||null===(n=$.options)||void 0===n?void 0:n.component_id)})))||void 0===n?void 0:n.length)>0})),ne=function(e,n,l,i,d,a){var u;if("Number"===n)return O?ge.createElement("input",{autoComplete:"off",type:"number",className:ye.Z.templateIIInput,style:{border:"1px solid var(--app-color-gray-light)",width:"50%",height:"30px"},placeholder:null!==e&&void 0!==e?e:"0",onChange:function(e){+e.target.value>-1&&(W[l][d]=+e.target.value,W[l][a]=+e.target.value)},onBlur:function(){G((0,t.Z)(W)),function(e,n,l){var t,i,d,a,u=e.component_fields.find((function(e){var n;return e.field_name===(null===B||void 0===B||null===(n=B.key)||void 0===n?void 0:n.label)})),r=null===U||void 0===U||null===(t=U.items)||void 0===t?void 0:t.find((function(e){var n;return e[null===B||void 0===B||null===(n=B.key)||void 0===n?void 0:n.key]===u.value}));if(void 0===r){if(void 0==+(null===(i=W[n])||void 0===i?void 0:i.quantity)||+(null===(d=W[n])||void 0===d?void 0:d.quantity)>0){var s={};null===B||void 0===B||B.slist.filter((function(e){var l,t,i;s=(0,o.Z)((0,o.Z)({},s),{},(i={},(0,h.Z)(i,e.key,null!==(l=W[n][e.key])&&void 0!==l?l:""),(0,h.Z)(i,"id",(0,f.mR)()),(0,h.Z)(i,"options",null!==(t=null===e||void 0===e?void 0:e.options)&&void 0!==t?t:{}),i))})),A({action:_._U.addModuleItems,value:s})}}else 0==+(null===(a=W[n])||void 0===a?void 0:a.quantity)?A({action:_._U.removeModuleItems,value:r}):(null===B||void 0===B||B.slist.filter((function(e){r[e.key]=W[n][e.key]})),A({action:_._U.updateModuleItems,value:r}))}(i,l)}}):ge.createElement("div",{className:ye.Z.templateInput},null!==(u=e.value)&&void 0!==u?u:"0");if("Action"===n)return ge.createElement("div",null);if("Link"===n){var r="".concat(e);return null!==r&&void 0!==r&&r.includes(".jpg")||null!==r&&void 0!==r&&r.includes(".png")||null!==r&&void 0!==r&&r.includes(".jpeg")?ge.createElement("img",{alt:"lg",src:r,className:ye.Z.templateIIPicture}):ge.createElement("p",{className:ye.Z.templateURL,onClick:function(){return window.open(r,"_blank")}},"View")}return"Info"===n||"Text"===n?ge.createElement("div",{className:ye.Z.templateInformation,style:{textAlign:"center"}},null!==e&&void 0!==e?e:""):ge.createElement("div",null,null!==e&&void 0!==e?e:"")};return ge.createElement("div",{style:{width:"100%",justifyContent:"center"}},ge.createElement("div",{style:{margin:"auto",width:"inherit"}},ge.createElement("div",{style:{width:"inherit"}},ge.createElement("p",null,null!==(n=null===B||void 0===B||null===(l=B.config)||void 0===l||null===(d=l.find((function(e){return"tlist"===e.key})))||void 0===d?void 0:d.label)&&void 0!==n?n:"ORDERS:"),ge.createElement(he.Z,{className:ye.Z.itemsTable_ii,style:{width:(null===B||void 0===B||null===(a=B.tlist)||void 0===a?void 0:a.length)>4?"100%":"70%"},highlights:"var(--app-color-gray-lighter)",columns:g.tq?null===B||void 0===B?void 0:B.tlist.filter((function(e){var n;return"Number"===e.value||e.key===(null===B||void 0===B||null===(n=B.key)||void 0===n?void 0:n.key)||"Info"===e.value||"Text"===e.value})).map((function(e){return e.label})):null===B||void 0===B||null===(u=B.tlist)||void 0===u?void 0:u.map((function(e){return e.label})),footer:["Items ".concat(null===U||void 0===U||null===(r=U.items)||void 0===r?void 0:r.length),"".concat(K.Z((function(e,n){var l;return null!==(l=+e+ +n.quantity)&&void 0!==l?l:0}),0,null!==(s=null===U||void 0===U?void 0:U.items)&&void 0!==s?s:[]))],list:null===U||void 0===U||null===(v=U.items)||void 0===v?void 0:v.map((function(e){var n={id:e.id};return null===B||void 0===B||B.tlist.filter((function(l){n=(0,o.Z)((0,o.Z)({},n),{},(0,h.Z)({},l.label,e[l.key]))})),n})),onListItemClick:function(e){G(null===ee||void 0===ee?void 0:ee.filter((function(n){var l;return(null===(l=n.component_fields.filter((function(n){var l;return n.value===e[null===B||void 0===B||null===(l=B.key)||void 0===l?void 0:l.label]})))||void 0===l?void 0:l.length)>0})).map((function(e){var n={};return null===B||void 0===B||B.slist.filter((function(l){var t,i,d,a,u;n=(0,o.Z)((0,o.Z)({},n),{},(u={},(0,h.Z)(u,l.label,null!==(t=null===(i=e.component_fields.find((function(e){return e.field_name===l.label})))||void 0===i?void 0:i.value)&&void 0!==t?t:0),(0,h.Z)(u,l.key,null!==(d=null===(a=e.component_fields.find((function(e){return e.field_name===l.label})))||void 0===a?void 0:a.value)&&void 0!==d?d:0),u))})),n}))),J(null===ee||void 0===ee?void 0:ee.filter((function(n){var l;return(null===(l=n.component_fields.filter((function(n){var l;return n.value===e[null===B||void 0===B||null===(l=B.key)||void 0===l?void 0:l.label]})))||void 0===l?void 0:l.length)>0})))}}),ge.createElement("br",null),ge.createElement("div",{style:{width:"100%",display:g.tq?"":H?"none":"flex",flexDirection:"row",justifyContent:"center",fontSize:"18px"}},(null===$||void 0===$||null===(c=$.options)||void 0===c||null===(p=c.filters)||void 0===p?void 0:p.length)>0&&ge.createElement("div",{className:ye.Z.dropdownContainer,style:{border:"1px solid var(--app-color-gray-dark)",width:g.tq?"100%":"25%"}},ge.createElement(x.rk,{items:ee?ve.Z(ce.Z("value"))(ee.map((function(e){var n=e.component_fields.find((function(e){var n;return e.field_name===(null===$||void 0===$||null===(n=$.options)||void 0===n?void 0:n.filters[0])}));return{label:null===n||void 0===n?void 0:n.value,value:null===n||void 0===n?void 0:n.value,component:e}}))):[],onChange:function(e){var n,l,t;V(!1),G([]),Q((0,h.Z)({},null===$||void 0===$||null===(n=$.options)||void 0===n?void 0:n.filters[0],e.value)),J([]),q(!1),setTimeout((function(){return q(!0)}),10),J(null===ee||void 0===ee?void 0:ee.filter((function(n){var l;return(null===(l=n.component_fields.filter((function(n){return n.value===e.value})))||void 0===l?void 0:l.length)>0}))),A({action:_._U.setModuleNewStepComponents,value:null!==(l=null===(t=U.currentStep)||void 0===t?void 0:t.component_blueprints)&&void 0!==l?l:[]}),G(null===ee||void 0===ee?void 0:ee.filter((function(n){var l;return(null===(l=n.component_fields.filter((function(n){return n.value===e.value})))||void 0===l?void 0:l.length)>0})).map((function(e){var n={};return null===B||void 0===B||B.slist.filter((function(l){var t,i,d,a=null!==(t=null===(i=e.component_fields.find((function(e){return e.field_name===l.label})))||void 0===i?void 0:i.value)&&void 0!==t?t:"";n=(0,o.Z)((0,o.Z)({},n),{},(d={},(0,h.Z)(d,l.label,a),(0,h.Z)(d,l.key,a),d))})),n})))},placeholder:null===$||void 0===$||null===(m=$.options)||void 0===m?void 0:m.filters[0],moliclassname:ye.Z.componentsSelectMenuOverlayListItem,style:{fontSize:"16px"},className:ye.Z.currencyInput})),(null===$||void 0===$||null===(y=$.options)||void 0===y||null===(b=y.filters)||void 0===b?void 0:b.length)>1&&!g.tq&&R&&ge.createElement("div",{className:ye.Z.dropdownContainer,style:{marginLeft:"10px",border:"1px solid var(--app-color-gray-dark)",width:"25%"}},ge.createElement(x.rk,{items:X[null===$||void 0===$||null===(E=$.options)||void 0===E?void 0:E.filters[0]]?ve.Z(ce.Z("value"))(ee.map((function(e){var n=e.component_fields.find((function(e){var n;return e.field_name===(null===$||void 0===$||null===(n=$.options)||void 0===n?void 0:n.filters[1])}));return{label:null===n||void 0===n?void 0:n.value,value:null===n||void 0===n?void 0:n.value,component:e}})).filter((function(e){return e.component.component_fields.filter((function(e){var n,l;return e.value===X[null===$||void 0===$||null===(n=$.options)||void 0===n?void 0:n.filters[0]]&&e.field_name===(null===$||void 0===$||null===(l=$.options)||void 0===l?void 0:l.filters[0])})).length>0}))):[],onChange:function(e){var n,l,t;V(!1),A({action:_._U.setModuleNewStepComponents,value:null!==(n=null===(l=U.currentStep)||void 0===l?void 0:l.component_blueprints)&&void 0!==n?n:[]}),Q((0,o.Z)((0,o.Z)({},X),{},(0,h.Z)({},null===$||void 0===$||null===(t=$.options)||void 0===t?void 0:t.filters[1],e.value))),G(null===ee||void 0===ee?void 0:ee.filter((function(n){var l;return(null===(l=n.component_fields.filter((function(n){return n.value===e.value})))||void 0===l?void 0:l.length)>0})).filter((function(e){var n;return(null===(n=e.component_fields.filter((function(e){var n;return e.value===X[null===$||void 0===$||null===(n=$.options)||void 0===n?void 0:n.filters[0]]})))||void 0===n?void 0:n.length)>0})).map((function(e){var n={};return null===B||void 0===B||B.slist.filter((function(l){var t,i,d,a=null!==(t=null===(i=e.component_fields.find((function(e){return e.field_name===l.label})))||void 0===i?void 0:i.value)&&void 0!==t?t:0;n=(0,o.Z)((0,o.Z)({},n),{},(d={},(0,h.Z)(d,l.label,a),(0,h.Z)(d,l.key,a),d))})),n}))),J(null===ee||void 0===ee?void 0:ee.filter((function(n){var l;return(null===(l=n.component_fields.filter((function(n){return n.value===e.value})))||void 0===l?void 0:l.length)>0})).filter((function(e){var n;return(null===(n=e.component_fields.filter((function(e){var n;return e.value===X[null===$||void 0===$||null===(n=$.options)||void 0===n?void 0:n.filters[0]]})))||void 0===n?void 0:n.length)>0})))},placeholder:null===$||void 0===$||null===(C=$.options)||void 0===C?void 0:C.filters[1],style:{fontSize:"16px"},moliclassname:ye.Z.componentsSelectMenuOverlayListItem}))),ge.createElement("div",{className:ye.Z.searchContainer,style:{display:H?"none":"",width:g.tq?"100%":"400px"}},ge.createElement(M.Oaj,null),ge.createElement("input",{placeholder:"Search",className:ye.Z.searchInput,onChange:function(e){var n,l;(null===(n=e.target.value)||void 0===n?void 0:n.length)>1?(J(null===ee||void 0===ee?void 0:ee.filter((function(n){var l;return(null===(l=n.component_fields.filter((function(n){return n.value.includes(e.target.value)})))||void 0===l?void 0:l.length)>0}))),G(null===ee||void 0===ee?void 0:ee.filter((function(n){var l;return(null===(l=n.component_fields.filter((function(n){return n.value.includes(e.target.value)})))||void 0===l?void 0:l.length)>0})).map((function(e){var n={};return null===B||void 0===B||B.slist.filter((function(l){var t,i,d,a=null!==(t=null===(i=e.component_fields.find((function(e){return e.field_name===l.label})))||void 0===i?void 0:i.value)&&void 0!==t?t:"";n=(0,o.Z)((0,o.Z)({},n),{},(d={},(0,h.Z)(d,l.label,a),(0,h.Z)(d,l.key,a),d))})),n})))):0==(null===(l=e.target.value)||void 0===l?void 0:l.length)&&(G([]),J([]))}})),ge.createElement(he.Z,{className:ye.Z.mobileTable_ii,style:{width:g.tq||(null===B||void 0===B||null===(w=B.slist)||void 0===w?void 0:w.length)>4?"100%":"70%"},tableHostSimple:ye.Z.tableHostSimple,columns:g.tq?null===B||void 0===B?void 0:B.slist.filter((function(e){var n;return"Number"===e.value||e.key===(null===B||void 0===B||null===(n=B.key)||void 0===n?void 0:n.key)})).map((function(e){return e.label})):(null===(Z=j.processModule.module.options)||void 0===Z||null===(S=Z.computes)||void 0===S?void 0:S.length)>0?[].concat((0,t.Z)(null!==(k=null===B||void 0===B?void 0:B.slist.map((function(e){return e.label})))&&void 0!==k?k:[]),(0,t.Z)(null!==(I=null===(P=j.processModule.module.options)||void 0===P||null===(N=P.computes)||void 0===N?void 0:N.map((function(e){var n,l=null===(n=F.filter((function(n){return n.module_id===e.module_id})))||void 0===n?void 0:n.find((function(n){return n.component_fields.filter((function(n){return n.procedure_step_blueprint_field_id===e.field_id})).length>0}));return(null===l||void 0===l?void 0:l.component_fields.find((function(n){return n.procedure_step_blueprint_field_id===e.field_id}))).field_name})))&&void 0!==I?I:[])):(0,t.Z)(null!==(T=null===B||void 0===B?void 0:B.slist.map((function(e){return e.label})))&&void 0!==T?T:[]),list:L.map((function(e,n){var l,o,t,i,d,a={};null===B||void 0===B||null===(l=B.slist)||void 0===l||l.filter((function(l){var o,t;a[l.label]=ne("".concat(null!==(o=null===(t=e.component_fields.find((function(e){return e.field_name===l.label})))||void 0===t?void 0:t.value)&&void 0!==o?o:""),l.value,n,e,l.key,l.label)}));var u,r,s=null!==(o=null===U||void 0===U||null===(t=U.items)||void 0===t?void 0:t.find((function(e){var l,o;return e[null===B||void 0===B||null===(l=B.key)||void 0===l?void 0:l.key]===W[n][null===B||void 0===B||null===(o=B.key)||void 0===o?void 0:o.key]})))&&void 0!==o?o:void 0;(void 0!==s&&Object.keys(s).filter((function(l){var o,t=null===B||void 0===B||null===(o=B.slist)||void 0===o?void 0:o.find((function(e){return e.key===l}));t&&(a[t.label]=ne(s[l],t.value,n,e,t.key,t.label))})),(null===(i=j.processModule.module.options)||void 0===i||null===(d=i.computes)||void 0===d?void 0:d.length)>0)&&(null===(u=j.processModule.module.options)||void 0===u||null===(r=u.computes)||void 0===r||r.map((function(n){var l,o=null===F||void 0===F||null===(l=F.filter((function(e){return e.module_id===n.module_id})))||void 0===l?void 0:l.find((function(n){return n.component_fields.filter((function(n){var l,o;return n.value===(null!==(l=null===(o=e.component_fields.find((function(e){var n;return e.field_name===(null===B||void 0===B||null===(n=B.key)||void 0===n?void 0:n.label)})))||void 0===o?void 0:o.value)&&void 0!==l?l:"#$")})).length>0})),t=null===o||void 0===o?void 0:o.component_fields.find((function(e){return e.procedure_step_blueprint_field_id===n.field_id}));t&&(a[t.field_name]=null===t||void 0===t?void 0:t.value)})));return a}))}),0===(null===L||void 0===L?void 0:L.length)&&ge.createElement("p",null,"No Items Selected"))),ge.createElement("br",null))},Ee=l(6341),Ce=l(32086),we=l(8284),Ze=(l(68140),l(60940),(0,d.memo)((function(e){var n,l,o,t,a=e.component,u=e.allComponents,r=e.components,s=e.favorites,v=void 0===s?[]:s,c=e.user,p=e.companyData,m=e.selectedComponent,f=e.templateName,_=e.begunModule,h=e.nextButtonClicked,g=e.isMandatoryError,b=e.index,x=e.component_blueprint,E=e.setIsMandatoryError,C=e.editMode,w=e.blueprints,Z=e.allModules,M=e.authenticatedUser,S=e.companyUsersArray,k=e.companyPositionsArray,I=e.products,P=(0,d.useState)({}),N=(0,i.Z)(P,2),T=N[0],D=N[1],z=(0,d.useState)([]),U=(0,i.Z)(z,2),A=U[0],O=U[1],R=(0,d.useState)([]),L=(0,i.Z)(R,2),W=L[0],q=L[1],F=(0,d.useState)([]),Y=(0,i.Z)(F,2),H=Y[0],j=Y[1],V=(0,d.useState)(null!==(n=+localStorage.getItem("timer"))&&void 0!==n?n:0),J=(0,i.Z)(V,2),G=J[0],Q=J[1],K=(0,d.useState)(null===a||void 0===a||null===(l=a.selected_fields)||void 0===l?void 0:l.filter((function(e){return"Record"===e.data_type_name}))),X=(0,i.Z)(K,2),$=X[0],ee=(X[1],(0,d.useState)(!1)),ne=(0,i.Z)(ee,2),le=ne[0],oe=ne[1],te=(0,d.useState)(),ue=(0,i.Z)(te,2),re=ue[0],se=ue[1],ve=(0,d.useState)(),ce=(0,i.Z)(ve,2),pe=ce[0],me=ce[1],fe=(0,d.useState)(!1),ye=(0,i.Z)(fe,2),he=ye[0],ge=ye[1],Ce=a.selected_fields.find((function(e){return"Filters"===e.data_type_name||"Record"===e.data_type_name})),we=r.filter((function(e){return e.component_fields.filter((function(e){var n;return e.component_blueprint_id===(null===Ce||void 0===Ce||null===(n=Ce.options)||void 0===n?void 0:n.component_id)})).length>0})),Ze=(null===m||void 0===m||null===(o=m.created_by)||void 0===o?void 0:o.id)===c.id||void 0===(null===m||void 0===m?void 0:m.created_by),Me=null===p||void 0===p||null===(t=p.misc_info)||void 0===t?void 0:t.templatesData.find((function(e){return e.name===f}));return"Scoresheet Template"===f?d.createElement(Ee.tF,{showSecond:re,listItems:W,orderItems:A,selectedComponent:m,action:pe,setAction:me,setShowSecond:se,components:r,records:$,template:Me,component:a,allComponents:u,generalArray:H,showFavorites:le,setGeneralArray:j,setTimer:Q,timer:G,index:b,begunModule:_,companyData:p,setShowFavorites:oe,loading:he,setLoading:ge,setListItems:q,setOrderItems:O,setSelectedItems:D,selectedItems:T}):"Meets Template"===f?d.createElement("div",{style:{width:"100%"}}):"Club Template"===f?d.createElement(B,{allModules:Z,components:r,begunModule:_,authenticatedUser:M,companyUsersArray:S}):"Sports Facility Template"===f?d.createElement("div",null,e.children):"Battery Order Template"===f?d.createElement(be,{showSecond:re,listItems:W,orderItems:A,selectedComponent:m,action:pe,setAction:me,setShowSecond:se,components:r,records:$,template:Me,component:a,allComponents:u,generalArray:H,showFavorites:le,setGeneralArray:j,setTimer:Q,timer:G,index:b,begunModule:_,companyData:p,setShowFavorites:oe,loading:he,setLoading:ge,setListItems:q,setOrderItems:O,setSelectedItems:D,selectedItems:T,templateName:f,items:we,field:Ce,user:c,favorites:v,creating:Ze}):"Order Template"===f?d.createElement(xe,{showSecond:re,listItems:W,orderItems:A,selectedComponent:m,action:pe,setAction:me,setShowSecond:se,components:r,records:$,template:Me,component:a,allComponents:u,generalArray:H,showFavorites:le,setGeneralArray:j,setTimer:Q,timer:G,index:b,begunModule:_,companyData:p,setShowFavorites:oe,loading:he,setLoading:ge,setListItems:q,setOrderItems:O,setSelectedItems:D,selectedItems:T,templateName:f,items:we,field:Ce,user:c,favorites:v,creating:Ze}):"Timesheet Template"===f?null!==m&&void 0!==m&&m.id?d.createElement(ie,{selectedComponent:m,component_blueprint:x,title:f}):d.createElement("div",null):"Leaves Template"===f?null!==m&&void 0!==m&&m.id?d.createElement(de,{selectedComponent:m,component_blueprint:x,title:f}):d.createElement("div",null):"Routes Template"===f?d.createElement(_e,{component:a,selectedComponent:m,component_blueprint:x,title:f},d.createElement(y.Z,{editMode:C,nextButtonClicked:h,isMandatoryError:g,blueprintIndex:b,setIsMandatoryError:E,blueprints:w,component:x,companyData:p,components:r,allModules:Z,products:I,authenticatedUser:M,selectedComponent:m,companyUsersArray:S,companyPositionsArray:k,begunModule:_})):"KPI Template"===f?null!==m&&void 0!==m&&m.id?d.createElement(ae,{selectedComponent:m,component_blueprint:x,title:f},d.createElement(y.Z,{editMode:C,nextButtonClicked:h,isMandatoryError:g,blueprintIndex:b,setIsMandatoryError:E,blueprints:w,component:x,companyData:p,components:r,allModules:Z,products:I,authenticatedUser:M,selectedComponent:m,companyUsersArray:S,companyPositionsArray:k,begunModule:_})):d.createElement("div",null):d.createElement("div",{style:{width:"100%"}},d.createElement(y.Z,{editMode:C,nextButtonClicked:h,isMandatoryError:g,blueprintIndex:b,setIsMandatoryError:E,blueprints:w,component:x,companyData:p,components:r,allModules:Z,products:I,authenticatedUser:M,selectedComponent:m,companyUsersArray:S,companyPositionsArray:k,begunModule:_}))}))),Me=(0,m.$j)((function(e){var n=e.authReducer.authenticatedUser,l=e.flowReducer;return{authenticatedUser:n,favorites:l.favorites,begunModule:l.begunModule}}))((function(e){var n,l,v=e.component,m=e.blueprintIndex,y=e.setIsMandatoryError,h=e.companyData,g=e.components,b=e.favorites,x=e.products,E=e.authenticatedUser,C=e.begunModule,w=e.selectedComponent,Z=e.setSelectedComponent,M=e.templateName,S=e.editMode,k=e.blueprints,I=e.allModules,P=e.companyUsersArray,N=e.companyPositionsArray,T=e.nextButtonClicked,D=e.isMandatoryError,z=e.index,U=e.component_blueprint,A=(0,_.pQ)(),O=(0,i.Z)(A,2),R=O[0],L=O[1],W=(0,d.useState)(r),q=(0,i.Z)(W,1)[0],F=(0,d.useState)(""),B=(0,i.Z)(F,2),Y=B[0],H=B[1],j=(0,d.useRef)(null),V=null===(n=R.currentStep)||void 0===n||null===(l=n.component_blueprints)||void 0===l?void 0:l.findIndex((function(e){return e.id===(null===v||void 0===v?void 0:v.id)})),J=function(){var e;null!==v&&void 0!==v&&null!==(e=v.selected_fields)&&void 0!==e&&e.some((function(e){var n;return!0===e.mandatory&&!0===e.visible&&(!e.value||(null===e||void 0===e||null===(n=e.value)||void 0===n?void 0:n.length)<1)}))?y(!0):y(!1)},G=function(e){var n=R.components.find((function(e){return e.selected_fields.filter((function(e){return"Formula"===e.data_type_name})).length>0}));if(void 0!==n){var l=n.selected_fields.find((function(e){return"Formula"===e.data_type_name})),i=(0,f.LV)(l.options,v.selected_fields.filter((function(e){return l.options.list.includes(e.field_name)})),[].concat((0,t.Z)(R.components),[e]));l.value="".concat(i.toString())}else{var d=R.currentStep.component_blueprints.find((function(e){return e.selected_fields.filter((function(e){return"Formula"===e.data_type_name})).length>0}));if(void 0!==d){var a=d.selected_fields.find((function(e){return"Formula"===e.data_type_name})),u=(0,f.LV)(a.options,v.selected_fields.filter((function(e){return a.options.list.includes(e.field_name)})),[].concat((0,t.Z)(R.components),[e]));a.value="".concat(u.toString());var r=JSON.parse(JSON.stringify((0,o.Z)((0,o.Z)({},d),{},{temp_id:(0,f.mR)(),selected_fields:d.selected_fields})));L({action:_._U.addModuleComponents,value:r})}}},Q=function(e,n){var l,o,i,d=(0,t.Z)(null!==(l=null===(o=R.currentStep)||void 0===o?void 0:o.component_blueprints)&&void 0!==l?l:[]),a=null===(i=d[V])||void 0===i?void 0:i.selected_fields[n];"Number"===(null===a||void 0===a?void 0:a.data_type_name)?Number(+e)?a.value=e:""===e&&(a.value=""):a.value=e,a.value&&a.mandatory&&(a.errors=""),J(),L({action:_._U.setComponentBlueprints,value:d}),L({action:_._U.setModuleNewStepComponents,value:d})},K=(0,d.useCallback)((function(e,n,l){var o,i,d,a=(0,t.Z)(null!==(o=null===(i=R.currentStep)||void 0===i?void 0:i.component_blueprints)&&void 0!==o?o:[]),u=null===(d=a[V])||void 0===d?void 0:d.selected_fields[n];u.options.country_code=null===e||void 0===e?void 0:e.countryCode,u.options.country_name=null===e||void 0===e?void 0:e.name,u.options.country_prefix="+".concat(null===e||void 0===e?void 0:e.dialCode),L({action:_._U.setComponentBlueprints,value:a}),L({action:_._U.setModuleNewStepComponents,value:a}),Q(l,n)}),[]),X=(0,d.useCallback)((function(e,n){var l,o,i,d=(0,t.Z)(null!==(l=null===(o=R.currentStep)||void 0===o?void 0:o.component_blueprints)&&void 0!==l?l:[]),a=null===(i=d[V])||void 0===i?void 0:i.selected_fields[n];a.options.currency_type=null===e||void 0===e?void 0:e.label,a.options.currency_value=null===e||void 0===e?void 0:e.value,a.options.symbol=null===e||void 0===e?void 0:e.symbol,L({action:_._U.setComponentBlueprints,value:d}),L({action:_._U.setModuleNewStepComponents,value:d})}),[]);return(0,d.useEffect)((function(){var e;L({action:_._U.setModuleNewStepComponents,value:null===(e=R.currentStep)||void 0===e?void 0:e.component_blueprints})}),[R.currentStep]),d.createElement("div",{id:"accordion",className:a,key:m},d.createElement("div",{className:c()(u,q),"app-variant-has-error":Y?"error":""},d.createElement("div",{ref:j,style:{maxHeight:q===r?"":"0px",display:"flex"},className:s},d.createElement(Ze,{templateName:M,component:v,handleInputChange:Q,handlePrefixChange:K,handleCurrencyChange:X,checkIfAreMandatoryErrored:J,handleCheckbox:function(e,n){var l,o,i,d=(0,t.Z)(null!==(l=null===(o=R.currentStep)||void 0===o?void 0:o.component_blueprints)&&void 0!==l?l:[]),a=null===(i=d[V])||void 0===i?void 0:i.selected_fields[n];a.value=e,a.value&&a.mandatory&&(a.errors=""),L({action:_._U.setComponentBlueprints,value:d}),L({action:_._U.setModuleNewStepComponents,value:d}),J()},isInherited:!1,indexInContextArray:V,handleLocationChange:function(e,n){var l,o,i,d=(0,t.Z)(null!==(l=null===(o=R.currentStep)||void 0===o?void 0:o.component_blueprints)&&void 0!==l?l:[]);(null===(i=d[V])||void 0===i?void 0:i.selected_fields[n]).value="".concat(e.lat,", ").concat(e.lng),L({action:_._U.setComponentBlueprints,value:d}),L({action:_._U.setModuleNewStepComponents,value:d})},processTaskContext:R,setTaskProcessContext:L,companyData:h,components:function(){var e,n,l=null===(e=R.components.find((function(e){return e.selected_fields.filter((function(e){var n,l;return"Global"===e.data_type_name&&1==e.visible&&e.field_name===(null===(n=v.selected_fields.find((function(e){return("Filters"===e.data_type_name||"Record"===e.data_type_name)&&1==e.visible})))||void 0===n||null===(l=n.options)||void 0===l?void 0:l.global)})).length>0})))||void 0===e||null===(n=e.selected_fields.find((function(e){return"Global"===e.data_type_name})))||void 0===n?void 0:n.value;return l?g.filter((function(e){return e.component_fields.filter((function(e){var n,o,t;return(null===e||void 0===e||null===(n=e.value)||void 0===n?void 0:n.toUpperCase())===(null===l||void 0===l?void 0:l.toUpperCase())&&e.field_name===(null===(o=v.selected_fields.find((function(e){return"Filters"===e.data_type_name||"Record"===e.data_type_name})))||void 0===o||null===(t=o.options)||void 0===t?void 0:t.global)})).length>0})):g}(),products:x,saveButtonAction:function(){var e=JSON.parse(JSON.stringify((0,o.Z)((0,o.Z)({},v),{},{temp_id:(0,f.mR)(),selected_fields:v.selected_fields})));G(e),L({action:_._U.addModuleComponents,value:e}),H(""),v.selected_fields.map((function(e,n){Q("",n)})),L({action:_._U.setModuleNewStepComponents,value:(0,t.Z)(Ce.Z((function(e){return e.selected_fields.filter((function(e){return""===e.value})).length>0}),(0,t.Z)(Ce.Z(we.Z("id",v.id))(R.newStepComponents))))})},updateFormula:G,favorites:b,user:E,begunModule:C,selectedComponent:w,setSelectedComponent:Z,allComponents:g,nextButtonClicked:T,isMandatoryError:D,index:z,component_blueprint:U,setIsMandatoryError:y,editMode:S,blueprints:k,allModules:I,authenticatedUser:E,companyUsersArray:P,companyPositionsArray:N}))),Y&&(null===Y||void 0===Y?void 0:Y.message)&&d.createElement(p.Z,{message:Y.message}))})),Se=d.forwardRef((function(e,n){var l,o,t,a,u,r,s,v=e.begunModule,c=e.goto,p=e.companyData,m=e.selectedComponent,f=e.setSelectedComponent,_=(e.companyUsersArray,e.companyPositionsArray,e.components),y=void 0===_?[]:_,h=e.step,g=e.print,b=void 0!==g&&g,x=(0,d.useState)(0),E=(0,i.Z)(x,2),C=E[0],w=E[1],Z=(0,d.useState)(),M=(0,i.Z)(Z,2),S=M[0],k=M[1],I=(0,d.useState)(),P=(0,i.Z)(I,2),N=P[0],T=P[1],D=(0,d.useState)([]),z=(0,i.Z)(D,2),U=z[0],A=z[1],O=(0,d.useState)([]),R=(0,i.Z)(O,2),L=R[0],W=R[1],B=(0,d.useState)([]),Y=(0,i.Z)(B,2),j=Y[0],V=Y[1],J=null===v||void 0===v||null===(l=v.processModule)||void 0===l||null===(o=l.completeSteps)||void 0===o||null===(t=o.find((function(e){var n;return(null===e||void 0===e||null===(n=e.component_blueprints)||void 0===n?void 0:n.filter((function(e){return e.selected_fields.filter((function(e){return"Template"===e.data_type_name})).length>0})).length)>0})))||void 0===t||null===(a=t.component_blueprints.find((function(e){return e.selected_fields.find((function(e){return"Template"===e.data_type_name&&1==e.visible}))})))||void 0===a||null===(u=a.selected_fields.find((function(e){return"Template"===e.data_type_name&&1==e.visible})))||void 0===u?void 0:u.field_name,G=null===p||void 0===p||null===(r=p.misc_info)||void 0===r?void 0:r.templatesData.find((function(e){return e.name===J})),Q=(0,d.useState)(null===m||void 0===m||null===(s=m.component_fields)||void 0===s?void 0:s.filter((function(e){return"Record"===e.data_type_name}))),K=(0,i.Z)(Q,2),X=K[0],$=K[1];return"Scoresheet Template"===J?d.createElement(Ee.mr,{setRecords:$,selectedComponent:m,template:G,setListItems:W,components:y,setOrderItems:A,setSelectedIndex:k,records:X,listItems:L,orderItems:U,begunModule:v,selectedTabIndex:C,setSelectedTabIndex:w,selectedItems:N,setSelectedItems:T,selectedIndex:S,generalArray:j,setGeneralArray:V,print:b}):"Sports Facility Template"===J?d.createElement(H,{selectedComponent:m,setSelectedComponent:f},e.children):"Player Profile Template"===J?d.createElement(Ee.yX,{selectedComponent:m,template:G,components:y,setListItems:W,begunModule:v,listItems:L}):"League Template"===J?d.createElement(Ee.Dr,{selectedComponent:m,template:G,components:y}):"Club Template"===J?d.createElement(q,{title:m.title,selectedComponent:m,setSelectedComponent:f,step:h,template:G,goto:c},e.children):"Meets Template"===J?d.createElement(F,{selectedComponent:m,begunModule:v,goto:c},e.children):d.createElement("div",null,e.children,e.payments,e.creator,e.shares)}))},85508:function(e,n,l){l.r(n),l.d(n,{default:function(){return H},navigateToTransaction:function(){return j}});var o=l(4942),t=l(93433),i=l(1413),d=l(29439),a=l(67861),u=l(23280),r=l(40694),s=l(88374),v=l(93389),c=l(6073),p=l(89293),m=l(88827),f=l(10103),_=l(11577),y=l(1542),h=l(10904),g=l(88550),b=l(73500),x=l(39518),E=l(50981),C=l.n(E),w=l(43984),Z=l(52902),M=l(12075),S=l(63124),k=l(87424),I=l(27658),P=l(75105),N=l(91605),T=l(30994),D=l(57650),z=l(29304),U=l(87453),A=l(12308),O=l(9969),R=l(51481),L=l(34665),W=l(44408),q=l(23910),F={host:"DashboardMobile_host__FXUjc",dashboardPanel:"DashboardMobile_dashboardPanel__lXz07",headerContainer:"DashboardMobile_headerContainer__JAcuY",title:"DashboardMobile_title__UJq7q",modalTitle:"DashboardMobile_modalTitle__yR3Zx",singleButton:"DashboardMobile_singleButton__h-dk5",fieldRowContainer:"DashboardMobile_fieldRowContainer__VvOwp",fieldTypeInput:"DashboardMobile_fieldTypeInput__Qmlee",dashboardCard:"DashboardMobile_dashboardCard__uJUtM",componentCard:"DashboardMobile_componentCard__9UsrE",componentCardv2:"DashboardMobile_componentCardv2__EqNmf",imageCard:"DashboardMobile_imageCard__J6I0d",searchContainer:"DashboardMobile_searchContainer__nrcHL",searchInput:"DashboardMobile_searchInput__GQHtE",ongoingtx:"DashboardMobile_ongoingtx__tEDSh",dropdownSelectComponent:"DashboardMobile_dropdownSelectComponent__RUoXR",dropdownSelectMenuOverlayList:"DashboardMobile_dropdownSelectMenuOverlayList__T2zDR",dropdownSelectMenuOverlayListItem:"DashboardMobile_dropdownSelectMenuOverlayListItem__twu8t",dropdownInput:"DashboardMobile_dropdownInput__CB8Ta",dropdownClearControlsClassName:"DashboardMobile_dropdownClearControlsClassName__TMP-7",listContainer:"DashboardMobile_listContainer__ASOGR",dropdownListContainer:"DashboardMobile_dropdownListContainer__J4smE",dropDownButtonContainer:"DashboardMobile_dropDownButtonContainer__oeCll",searchResults:"DashboardMobile_searchResults__RB3VY",pageContainer:"DashboardMobile_pageContainer__ep2wY",emulatedFlexGap:"DashboardMobile_emulatedFlexGap__mHKc9",popup:"DashboardMobile_popup__wqxbT",profilepopup:"DashboardMobile_profilepopup__0SibL",userCardContainerTop:"DashboardMobile_userCardContainerTop__bT3XW",userCardInnerContainer:"DashboardMobile_userCardInnerContainer__u0yVs",avatarUrlImg:"DashboardMobile_avatarUrlImg__1MY4w",center:"DashboardMobile_center__wR7QQ",moduleTitle:"DashboardMobile_moduleTitle__itg2E",filtersContainer:"DashboardMobile_filtersContainer__Mz0UE",wallet:"DashboardMobile_wallet__QzTMZ",userPanelRows:"DashboardMobile_userPanelRows__XQVNr",actionsContainer:"DashboardMobile_actionsContainer__65lpT",appsTitle:"DashboardMobile_appsTitle__a80ai",stepTitle:"DashboardMobile_stepTitle__FV3ye",stepSubTitle:"DashboardMobile_stepSubTitle__s2cY7",listContainerAll:"DashboardMobile_listContainerAll__ZrR1O",listButton:"DashboardMobile_listButton__zpevX"},B=(l(143),l(60940),l(56120),l(37704),l(72666),l(68623),l(3863),l(95361),l(36832),l(32588)),Y=l(66918),H=(0,x.$j)((function(e){var n=e.flowReducer,l=n.begunModule,o=n.allTasks,t=n.allCompletedTasks,i=n.allCompletedTasksPaginated,d=n.companyProcesses,a=n.allModules,u=n.components,r=n.companyData,s=n.companyUsersArray,v=n.blueprints,c=n.payable,p=n.lastUpdates,m=n.companyPositionsArray,f=e.sessionReducer,_=f.user,y=f.authenticated;return{begunModule:l,allTasks:o,allCompletedTasks:t,allCompletedTasksPaginated:i,companyProcesses:d,allModules:a,components:u,companyData:r,companyUsersArray:s,user:_,authenticatedUser:e.authReducer.authenticatedUser,authenticated:y,blueprints:v,payable:c,lastUpdates:p,companyPositionsArray:m}}),(function(e){return{onSetSelectedProcess:function(n){return e((0,s.Xu)(n))}}}))((function(e){var n,l,H,V,J,G,Q,K,X,$,ee,ne,le,oe,te,ie,de,ae,ue,re,se,ve,ce,pe,me,fe,_e,ye,he,ge;(0,D.z2)();var be=e.authenticated,xe=e.authenticatedUser,Ee=e.user,Ce=e.companyProcesses,we=e.allModules,Ze=e.components,Me=e.companyData,Se=e.begunModule,ke=e.blueprints,Ie=e.payable,Pe=e.companyUsersArray,Ne=e.lastUpdates,Te=e.allTasks,De=e.companyPositionsArray,ze=(0,a.useState)(!1),Ue=(0,d.Z)(ze,2),Ae=Ue[0],Oe=Ue[1],Re=(0,a.useState)({}),Le=(0,d.Z)(Re,2),We=Le[0],qe=Le[1],Fe=(0,a.useState)(!1),Be=(0,d.Z)(Fe,2),Ye=Be[0],He=Be[1],je=(0,a.useState)(!1),Ve=(0,d.Z)(je,2),Je=Ve[0],Ge=Ve[1],Qe=(0,a.useState)(!1),Ke=(0,d.Z)(Qe,2),Xe=Ke[0],$e=Ke[1],en=(0,a.useState)(!1),nn=(0,d.Z)(en,2),ln=nn[0],on=nn[1],tn=(0,a.useState)(),dn=(0,d.Z)(tn,2),an=dn[0],un=dn[1],rn=(0,a.useState)(!1),sn=(0,d.Z)(rn,2),vn=(sn[0],sn[1]),cn=(0,a.useState)({}),pn=(0,d.Z)(cn,2),mn=pn[0],fn=pn[1],_n=(0,a.useState)(!1),yn=(0,d.Z)(_n,2),hn=yn[0],gn=yn[1],bn=(0,a.useState)({}),xn=(0,d.Z)(bn,2),En=(xn[0],xn[1]),Cn=(0,a.useState)(!1),wn=(0,d.Z)(Cn,2),Zn=wn[0],Mn=wn[1],Sn=(0,a.useState)(-1),kn=(0,d.Z)(Sn,2),In=kn[0],Pn=kn[1],Nn=(0,a.useState)([]),Tn=(0,d.Z)(Nn,2),Dn=Tn[0],zn=Tn[1],Un=(0,a.useState)(!1),An=(0,d.Z)(Un,2),On=An[0],Rn=An[1],Ln=(0,a.useState)(!1),Wn=(0,d.Z)(Ln,2),qn=Wn[0],Fn=Wn[1],Bn=(0,a.useState)(!1),Yn=(0,d.Z)(Bn,2),Hn=(Yn[0],Yn[1],(0,g.pQ)()),jn=(0,d.Z)(Hn,2),Vn=jn[0],Jn=jn[1],Gn=(0,a.useState)(!(null===Se||void 0===Se||null===(n=Se.processModule)||void 0===n||null===(l=n.module)||void 0===l||!l.id)&&(null===Ee||void 0===Ee||null===(H=Ee.positions)||void 0===H||null===(V=H.filter((function(e){var n,l,o,t;return(null===Se||void 0===Se||null===(n=Se.processModule)||void 0===n||null===(l=n.module)||void 0===l||null===(o=l.options)||void 0===o||null===(t=o.processors)||void 0===t?void 0:t.indexOf(e.id))>-1})))||void 0===V?void 0:V.length)>0),Qn=(0,d.Z)(Gn,2),Kn=Qn[0],Xn=Qn[1],$n=(0,x.I0)(),el=((0,u.s0)(),(0,u.UO)()),nl=el.paymentID,ll=el.walletID;document.title="Dashboard | ".concat(p.iC," Mobile");var ol=(0,a.useCallback)((function(e,n,l){var o=function(o){var t,d,a,u,r,v,_,h,b,x,C,w,Z,M,S,k,I,N=o.steps.filter((function(e){var n,l,t,i,d,a;return void 0==(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.showStepAll)||1==(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.showStepAll)||0==(null===e||void 0===e||null===(t=e.options)||void 0===t?void 0:t.showStepAll)&&(null===e||void 0===e||null===(i=e.options)||void 0===i||null===(d=i.showOnly)||void 0===d?void 0:d.filter((function(e){return xe.positions.map((function(e){return e.id})).indexOf(e)>-1})).length)>0||(null===e||void 0===e||null===(a=e.options)||void 0===a?void 0:a.showStepAuthor)&&(null===xe||void 0===xe?void 0:xe.id)===(null===o||void 0===o?void 0:o.user_id)})).map((function(e,n){return(0,i.Z)((0,i.Z)({},e),{},{rank:n+1})}));(m.h.dispatch((0,s.q4)(o)),m.h.dispatch((0,s.an)([o],p.Qc)),m.h.dispatch((0,s.q4)((0,i.Z)((0,i.Z)({},o),{},{completeSteps:o.steps,steps:N,stepIndex:l?0:(null===o||void 0===o||null===(t=o.steps)||void 0===t?void 0:t.length)>0?(null===o||void 0===o||null===(d=o.steps[0])||void 0===d||null===(a=d.component_blueprints)||void 0===a?void 0:a.filter((function(e){var n;return 1==(null===(n=e.options)||void 0===n?void 0:n.asModuleList)})).length)>0?1:0:1,module_id:n.id,module:e.find((function(e){return e.id===n.id})),isUpdating:!1}))),Jn({action:g._U.setCurrentStep,value:null===o||void 0===o?void 0:o.steps[l?0:(null===o||void 0===o||null===(u=o.steps)||void 0===u?void 0:u.length)>0?(null===o||void 0===o||null===(r=o.steps[0])||void 0===r||null===(v=r.component_blueprints)||void 0===v?void 0:v.filter((function(e){var n;return 1==(null===(n=e.options)||void 0===n?void 0:n.asModuleList)})).length)>0?1:0:1]}),Jn({action:g._U.setModuleItems,value:We.component_items}),Jn({action:g._U.setModuleNewStepComponents,value:[]}),Jn({action:g._U.setComponents,value:[]}),(null===Se||void 0===Se||null===(_=Se.processModule)||void 0===_||null===(h=_.steps)||void 0===h?void 0:h.length)>0&&(null===Se||void 0===Se||null===(b=Se.processModule)||void 0===b||null===(x=b.steps)||void 0===x||x.filter((function(e){var n;return null===e||void 0===e||null===(n=e.component_blueprints)||void 0===n?void 0:n.filter((function(e){return e.selected_fields.filter((function(e){return e.value=void 0}))}))}))),(0,y.vC)(n,p.Qc,p.M4,1,!1).pipe((0,f.q)(1)).subscribe({next:function(e){var l;Oe(!1),n.lastUpdate=0,n.count=null!==(l=null===e||void 0===e?void 0:e.total)&&void 0!==l?l:0,(0,c.OQ)(!0,!1).pipe((0,f.q)(1)).subscribe({complete:function(){(0,c.ew)().pipe((0,f.q)(1)).subscribe({})}})}}),null===n||void 0===n||null===(C=n.options)||void 0===C||null===(w=C.supporting)||void 0===w||w.filter((function(e,l){var o,t;(0,y.vC)({id:e,name:null!==(o="".concat(null===we||void 0===we||null===(t=we.find((function(n){return n.id===e})))||void 0===t?void 0:t.name).concat(l))&&void 0!==o?o:"".concat(null===n||void 0===n?void 0:n.name).concat(l)},p.Qc,p.R6,1).pipe((0,f.q)(1)).subscribe({next:function(o){var t,i;Ne.componentsByModule[null!==(t="".concat(null===we||void 0===we||null===(i=we.find((function(n){return n.id===e})))||void 0===i?void 0:i.name).concat(l))&&void 0!==t?t:"".concat(null===n||void 0===n?void 0:n.name).concat(l)]=(0,E.now)()}})})),(null===n||void 0===n||null===(Z=n.options)||void 0===Z||null===(M=Z.positions)||void 0===M?void 0:M.length)>0)&&(0,P.n0)(null===n||void 0===n||null===(k=n.options)||void 0===k?void 0:k.positions,5*(null===n||void 0===n||null===(I=n.options)||void 0===I?void 0:I.positions.length)).pipe((0,f.q)(1)).subscribe({});if(null!==n&&void 0!==n&&null!==(S=n.options)&&void 0!==S&&S.single){var T=localStorage.getItem(n.id);dl(o,T?JSON.parse(T):Ze.find((function(e){return e.module_id===n.id})))}};Ce.find((function(e){return e.id===n.procedure.id}))?o(Ce.find((function(e){return e.id===n.procedure.id}))):(Oe(!0),(0,v.zJ)(n.procedure.id).pipe((0,_.P)()).subscribe({next:function(e){Oe(!1),o(e)},error:function(e){}}))}),[Se]);(0,a.useEffect)((function(){$n((0,s.aV)())}),[]),(0,a.useEffect)((function(){history.pushState(null,null,location.href),window.onpopstate=function(e){history.go(1)},$n((0,s.tR)(!1)),$n((0,s.IW)(!1))}),[Xe]),(0,a.useEffect)((function(){if(be){if("trial_ended"!==(null===Me||void 0===Me?void 0:Me.status)&&"inactive"!==(null===Me||void 0===Me?void 0:Me.status)&&(null===we||void 0===we?void 0:we.length)>0){var e=null===we||void 0===we?void 0:we.filter((function(e){var n;return!0===(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.asMobileApp)}));if(1===(null===e||void 0===e?void 0:e.length)){var n,l,o=(null===Ee||void 0===Ee||null===(n=Ee.positions)||void 0===n||null===(l=n.filter((function(n){var l,o,t;return(null===(l=e[0])||void 0===l||null===(o=l.options)||void 0===o||null===(t=o.processors)||void 0===t?void 0:t.indexOf(n.id))>-1})))||void 0===l?void 0:l.length)>0;Xn(o),ol(we,e[0],o)}else if((null===e||void 0===e?void 0:e.length)>0){var t,i,d,a,u=xe.positions.find((function(e){return"1"===e.standards})),r=u&&e.find((function(e){return e.name===u.name})),v=(null===Ee||void 0===Ee||null===(t=Ee.positions)||void 0===t||null===(i=t.filter((function(n){var l,o,t;return(null===(l=e[0])||void 0===l||null===(o=l.options)||void 0===o||null===(t=o.processors)||void 0===t?void 0:t.indexOf(n.id))>-1})))||void 0===i?void 0:i.length)>0;if(r)v=(null===Ee||void 0===Ee||null===(d=Ee.positions)||void 0===d||null===(a=d.filter((function(e){var n,l;return(null===r||void 0===r||null===(n=r.options)||void 0===n||null===(l=n.processors)||void 0===l?void 0:l.indexOf(e.id))>-1})))||void 0===a?void 0:a.length)>0,ol(we,r,v);else ol(we,e[0],v);Xn(v),gn(!0)}}""===(null===Ee||void 0===Ee?void 0:Ee.id)&&($n((0,w.ci)()),$n((0,s.mb)())),"geolocation"in navigator&&navigator.geolocation.getCurrentPosition((function(e){m.h.dispatch((0,s.Rb)({latitude:e.coords.latitude,longitude:e.coords.longitude}))}))}}),[be,we]),(0,a.useEffect)((function(){we.length>0&&we.filter((function(e){var n;return void 0===Ce.find((function(n){var l;return n.id===(null===e||void 0===e||null===(l=e.procedure)||void 0===l?void 0:l.id)}))&&(0,v.zJ)(null===e||void 0===e||null===(n=e.procedure)||void 0===n?void 0:n.id).pipe((0,_.P)()).subscribe({next:function(){return window.scrollTo({top:-10})}})})),we.length>0&&we.filter((function(e){var n;return(C()((0,E.now)()).diff(C()(null!==(n=Ne.componentsByModule[e.name])&&void 0!==n?n:(0,E.now)()),"minutes")>10||void 0===Ne.componentsByModule[e.name]||0===Ze.filter((function(n){return n.module_id===e.id})).length)&&(0,y.vC)(e,p.Qc,p.Zp,1,!1).pipe((0,f.q)(1)).subscribe({next:function(n){Ne.componentsByModule[e.name]=(0,E.now)(),window.scrollTo({top:-10})}})}))}),[we]),(0,a.useEffect)((function(){be&&((null===Ie||void 0===Ie?void 0:Ie.length)>0&&void 0!==ll&&void 0===nl&&Ie.find((function(e){return e.user_id===(null===xe||void 0===xe?void 0:xe.id)&&e.paymentID===ll}))&&(m.h.dispatch((0,s.Wy)(Ie.filter((function(e){return e.paymentID!==ll})))),(0,P.IC)().pipe((0,_.P)()).subscribe({next:function(e){var n;xe.wallet=null===e||void 0===e?void 0:e.wallet,xe.options=null===e||void 0===e?void 0:e.options,xe.departments=null===e||void 0===e?void 0:e.departments,xe.positions=null===e||void 0===e?void 0:e.positions,xe.pinned_modules=null===e||void 0===e?void 0:e.pinned_modules,null===L.Fc||void 0===L.Fc||null===(n=L.Fc.saveUser)||void 0===n||n.call(L.Fc,xe).then((function(){}))}}),on(!1),$e(!1),Mn(!0)))}),[ll,be]);var tl=(0,a.useCallback)((function(e){var n,l,o,t,d,u,v;return a.createElement("div",{className:"tabbar-section"},e.children,a.createElement("div",{className:"mobile-nav"},a.createElement(r.Z,{clear:!0,loading:Ae,clicked:function(){var e,n,l;m.h.dispatch((0,s.q4)((0,i.Z)((0,i.Z)({},Se.processModule),{},{stepIndex:Kn||null!==(e=Se.processModule)&&void 0!==e&&null!==(n=e.module)&&void 0!==n&&null!==(l=n.options)&&void 0!==l&&l.single?0:1,isUpdating:!1}))),we.filter((function(e){var n;return!0===(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.asMobileApp)})).length>1&&gn(!0),$e(!1),on(!1)}},a.createElement("div",{style:{color:"var(--app-color-gray-dark)"}},a.createElement(M.G,{icon:Z.J9Y,className:"tabbar-icon"}),a.createElement("div",{style:{fontSize:"10px",height:"14px"}},"Home")))),(null===Ee||void 0===Ee||null===(n=Ee.ui_permissions)||void 0===n?void 0:n.find((function(e){return"view-dashboard-task"===e})))&&a.createElement("div",{className:"mobile-nav"},a.createElement(r.Z,{clear:!0,clicked:function(){on(!0),$e(!1)}},a.createElement("div",{style:{color:"var(--app-color-gray-dark)"}},a.createElement(M.G,{icon:Z.fT7,className:"tabbar-icon"}),a.createElement("div",{style:{fontSize:"10px",height:"14px"}},"Tasks")))),!(null!==Se&&void 0!==Se&&null!==(l=Se.processModule)&&void 0!==l&&null!==(o=l.module)&&void 0!==o&&null!==(t=o.options)&&void 0!==t&&t.single)&&a.createElement("div",{className:"mobile-nav"},a.createElement(r.Z,{clear:!0,clicked:function(){m.h.dispatch((0,s.q4)((0,i.Z)((0,i.Z)({},Se.processModule),{},{stepIndex:0,isUpdating:!1}))),Ge(!0),gn(!1),setTimeout((function(){return Ge(!1)})),fn({}),vn(!0),$e(!1),on(!1)}},a.createElement("div",{style:{color:"var(--app-color-gray-dark)"}},a.createElement(M.G,{icon:Z.Zrf,className:"tabbar-icon"}),a.createElement("br",null),a.createElement("div",{style:{fontSize:"10px",height:"14px"}},null!==(d=null===(u=Se.processModule)||void 0===u||null===(v=u.module)||void 0===v?void 0:v.name)&&void 0!==d?d:"Transactions")))),a.createElement("div",{className:"mobile-nav"},a.createElement(r.Z,{clear:!0,clicked:function(){$e(!0),on(!1)}},a.createElement("div",{style:{color:"var(--app-color-gray-dark)"}},a.createElement(M.G,{icon:Z.ILF,className:"tabbar-icon"}),a.createElement("div",{style:{fontSize:"10px",height:"14px"}},"Profile")))))}),[qn,Ae,Vn,Ze]),il=(0,a.useCallback)((function(e){var n,l,o,t,i,d,u,s=e.dark,v=void 0===s||s,c=function(){Fn(!qn)};return a.createElement("div",{className:"navbar-section",style:{backgroundColor:v?null!==Me&&void 0!==Me&&null!==(n=Me.company_standards)&&void 0!==n&&null!==(l=n.themeJ)&&void 0!==l&&l.backgroundColorr?null===Me||void 0===Me||null===(o=Me.company_standards)||void 0===o||null===(t=o.themeJ)||void 0===t?void 0:t.backgroundColor:"var(--app-color-gray-dark)":"white"}},a.createElement("div",{className:"mobile-nav"},a.createElement(r.Z,{style:{marginLeft:"10px",height:"30px"},clear:!0,clicked:function(){var e,n;Oe(!1),(null===Vn||void 0===Vn||null===(e=Vn.components)||void 0===e?void 0:e.length)>0||(null===Vn||void 0===Vn||null===(n=Vn.newStepComponents)||void 0===n?void 0:n.length)>0?En({open:!0,handler:c}):c(),c()}},a.createElement(M.G,{icon:Z.Ljc,className:"hamb-icon"}))),a.createElement("div",{className:F.moduleTitle},null!==Me&&void 0!==Me&&null!==(i=Me.company_standards)&&void 0!==i&&null!==(d=i.themeJ)&&void 0!==d&&d.title?a.createElement(a.Fragment,null,a.createElement("div",{style:{width:"100%",justifyContent:"center",display:"flex"}},(0,p.lh)("16px",v?"white":"var(--app-color-gray-dark)","bold")),a.createElement("div",{style:{width:"100%",fontSize:"9px",fontWeight:"bold",color:v?"white":"black",justifyContent:"center",display:"flex"}},"".concat((null!==(u=Me.display_name)&&void 0!==u?u:"").toUpperCase()).concat(Kn?"*":"")," ")):a.createElement("div",{style:{width:"100%",justifyContent:"center",display:"flex"}},(0,p.lh)("18px",v?"white":"var(--app-color-gray-dark)","bold"))),a.createElement("div",{className:F.userCardContainerTop},a.createElement(U.ZP,null,a.createElement(z.T$,null))),a.createElement("div",{className:"mobile-navbar ".concat(qn?"open-nav":""),style:{width:"100%",backgroundColor:"transparent"}},a.createElement("div",{className:"mobile-navbar ".concat(qn?"open-nav":""),style:{height:"inherit",width:"80%",boxShadow:"0px 2px 20px 5px rgba(0, 0, 0, 0.1)"}},a.createElement("div",{onClick:c,className:"mobile-navbar-close"},a.createElement(M.G,{icon:Z.QQm,className:"hamb-icon",style:{color:"var(--app-color-gray)",width:"25px",height:"25px"}})),a.createElement("ul",{className:"mobile-navbar-links"},a.createElement("li",null,a.createElement("a",{style:{fontFamily:"Montserrat, serif"},onClick:function(){on(!1),$e(!0),c()}},"PROFILE")),(null===we||void 0===we?void 0:we.find((function(e){var n;return null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.credits})))&&a.createElement("li",null,a.createElement("a",{style:{fontFamily:"Montserrat, serif"},onClick:function(){(0,P.IC)().pipe((0,_.P)()).subscribe({next:function(e){var n;xe.wallet=null===e||void 0===e?void 0:e.wallet,xe.options=null===e||void 0===e?void 0:e.options,xe.departments=null===e||void 0===e?void 0:e.departments,xe.positions=null===e||void 0===e?void 0:e.positions,xe.pinned_modules=null===e||void 0===e?void 0:e.pinned_modules,null===L.Fc||void 0===L.Fc||null===(n=L.Fc.saveUser)||void 0===n||n.call(L.Fc,xe).then((function(){}))}}),on(!1),$e(!1),Mn(!0),c()}},"WALLET")),a.createElement("li",null,a.createElement("a",{style:{fontFamily:"Montserrat, serif"},onClick:function(){He(!0),$e(!1),c()}},"LOGOUT"))))))}),[qn,Ae,Vn,Ze]),dl=function(e,n){var l,o;if(n){var d=[],a=0;(null===e||void 0===e||null===(l=e.steps)||void 0===l?void 0:l.length)>0&&(null===e||void 0===e||null===(o=e.steps)||void 0===o||o.filter((function(e){var n;return null===e||void 0===e||null===(n=e.component_blueprints)||void 0===n?void 0:n.filter((function(e){return e.selected_fields.filter((function(e){return e.value=void 0}))}))}))),Y.uniqWith(Y.eqProps("group"))(n.component_fields).map((function(e){d=[].concat((0,t.Z)(d),[{id:e.component_blueprint_id,temp_id:e.id,selected_fields:Y.filter(Y.propEq("group",e.group))(n.component_fields)}])})),e.steps.filter((function(e){e.component_blueprints.filter((function(l){l.selected_fields.filter((function(l){var o=n.component_fields.find((function(e){return e.field_name===l.field_name}));if("Status"===l.data_type_name&&void 0!==status&&(a=+e.rank-1),void 0!=o)l.value=o.value;else if("Record"===l.data_type_name){var t=n.component_fields.find((function(e){return e.field_name===l.options.name}));void 0!=t&&(l.value=t.value)}}))}))})),Jn({action:g._U.setComponents,value:d}),Jn({action:g._U.setModuleItems,value:n.component_items}),m.h.dispatch((0,s.q4)((0,i.Z)((0,i.Z)({},e),{},{steps:e.steps,stepIndex:a,module_id:n.module_id,module:we.find((function(e){return e.id===n.module_id})),isUpdating:!0,selectedComponent:n}))),qe(n)}},al=function(e){return Y.sortWith([Y.descend(Y.prop("created_date"))])(Ze.filter((function(n){return n.module_id===(null===e||void 0===e?void 0:e.id)}))).filter((function(e){var n;return!("Closed"===(null===e||void 0===e?void 0:e.status)||"Cancelled"===(null===e||void 0===e?void 0:e.status)||"Expired"===(null===e||void 0===e?void 0:e.status)||"None"===(null===e||void 0===e?void 0:e.status)||(null===e||void 0===e||!e.payments)&&(null===e||void 0===e||null===(n=e.created_by)||void 0===n?void 0:n.id)!==(null===xe||void 0===xe?void 0:xe.id)&&null!==e&&void 0!==e&&e.component_fields.find((function(e){return"Payments"===e.data_type_name&&"Credit Card"===e.value})))})).filter((function(n){var l,o,t,i;return!((null===(l=e.options)||void 0===l?void 0:l.activeFor)>0&&C()((0,E.now)()).diff(C()(n.created_date),"minutes")>+(null===(o=e.options)||void 0===o?void 0:o.activeFor))||!("New"===n.status||"Unassigned"===n.status)||(null===(t=n.assigned_to)||void 0===t?void 0:t.id)||(null===n||void 0===n||null===(i=n.payments)||void 0===i?void 0:i.id)})).map((function(n,l){var o;return a.createElement("div",{key:l,className:F.componentCardv2,style:{display:"flex",fontWeight:"normal",userSelect:"none"},"app-color-variant":"".concat(l%5+1),onClick:function(){j(Ce,qe,vn,Me,n,Jn,xe,Se,Ee,we,Ge,Pe,e)}},a.createElement("div",{style:{width:"100%",fontSize:(null===n||void 0===n||null===(o=n.title)||void 0===o?void 0:o.length)>18?"14px":"16px",ffontWeight:"normal",padding:"10px"}},null!==n&&void 0!==n&&n.status?"".concat(n.title," (").concat(null===n||void 0===n?void 0:n.status,")"):n.title))}))},ul=(0,a.memo)((function(){var e,n,l;return a.createElement("div",{style:{padding:"20px 5px"}},a.createElement("div",{style:{display:"flex",textAlign:"left"}},a.createElement("p",{className:F.stepTitle},"My Tasks"),a.createElement(r.Z,{light:!0,clicked:function(){Oe(!0),(0,R.km)(Ee.id,!0).pipe((0,f.q)(1)).subscribe({complete:function(){return Oe(!1)}})},icon:a.createElement("img",{src:O.Fdh})}),a.createElement(r.Z,{light:!0,style:{display:null!==Ee&&void 0!==Ee&&null!==(e=Ee.ui_permissions)&&void 0!==e&&e.find((function(e){return"view-dashboard-task"===e}))?"":"none"},clicked:function(){un(!0)},icon:a.createElement("img",{src:O.IHx})})),a.createElement("div",{className:F.stepSubTitle},"Your tasks related to ".concat(null===Se||void 0===Se||null===(n=Se.processModule)||void 0===n||null===(l=n.module)||void 0===l?void 0:l.name)),a.createElement(A.default,{title:"",card:!0,className:F.listContainer,isReport:!1,"app-variant-is-mobile":"true",columns:["Name","Status","Due"],list:Te.filter((function(e){return"Done"!==e.status})).map((function(e){var n,l,t,i,d,a,u,r,s,v,c;return c={Name:e.name,Description:e.description,Status:null!==(n=e.status)&&void 0!==n?n:"New",Due:C()(null===(l=e.add_info)||void 0===l?void 0:l.end).format("DD MMMM h:mm a")},(0,o.Z)(c,"Created By","".concat(null!==(t=null===(i=e.creator)||void 0===i?void 0:i.first_name)&&void 0!==t?t:""," ").concat(null!==(d=null===(a=e.creator)||void 0===a?void 0:a.last_name)&&void 0!==d?d:"")),(0,o.Z)(c,"Assigned To","".concat(null!==(u=null===(r=e.assignee)||void 0===r?void 0:r.first_name)&&void 0!==u?u:""," ").concat(null!==(s=null===(v=e.assignee)||void 0===v?void 0:v.last_name)&&void 0!==s?s:"")),(0,o.Z)(c,"task",e),c})),onListItemClick:function(e){un(e.task)}}))}));return a.createElement(a.Fragment,null,a.createElement("div",{className:F.center,style:{flexDirection:"column",alignItems:"center"}},a.createElement("div",{style:{position:"fixed",top:"0",zIndex:"20",width:"100%"}},(void 0==(null===Se||void 0===Se||null===(J=Se.processModule)||void 0===J?void 0:J.stepIndex)||(null===Se||void 0===Se||null===(G=Se.processModule)||void 0===G?void 0:G.stepIndex)<2)&&we.length>0&&!Xe&&!ln&&function(e){var n=e?al(e):[];return(null===n||void 0===n?void 0:n.length)>0&&a.createElement("div",{className:F.center,style:{height:(null===n||void 0===n?void 0:n.length)>0?"":"0px",width:"100%",minWidth:"360px",backgroundColor:"var(--app-color-gray-lightest)",flexDirection:"column"}},a.createElement(q.tq,{slidesPerView:1,centeredSlides:!0,spaceBetween:10,initialSlide:0,pagination:{clickable:!0,dynamicBullets:!0},modules:[W.pt,W.tl],className:"mySwiper"},(null===n||void 0===n?void 0:n.length)>0&&n.map((function(e,n){return a.createElement(q.o5,{key:n},e)}))))}(null!==(Q=null===Se||void 0===Se||null===(K=Se.processModule)||void 0===K?void 0:K.module)&&void 0!==Q?Q:null===we||void 0===we?void 0:we.find((function(e){var n;return!0===(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.asMobileApp)}))),void 0==(null===Se||void 0===Se||null===(X=Se.processModule)||void 0===X?void 0:X.stepIndex)||(null===Se||void 0===Se||null===($=Se.processModule)||void 0===$?void 0:$.stepIndex)<2?we.length>0&&a.createElement(il,{dark:!1,ddark:0===al(null===Se||void 0===Se||null===(ee=Se.processModule)||void 0===ee?void 0:ee.module).length||Xe||ln}):a.createElement("div",null)),a.createElement("div",{style:{minHeight:Ze.find((function(e){var n,l;return e.module_id===(null===Se||void 0===Se||null===(n=Se.processModule)||void 0===n||null===(l=n.module)||void 0===l?void 0:l.id)&&"None"!==e.status}))?"100px":"60px"}}),0!==(null===Se||void 0===Se||null===(ne=Se.processModule)||void 0===ne?void 0:ne.stepIndex)&&0===(null===we||void 0===we?void 0:we.length)&&a.createElement("div",{style:{display:"flex",margin:"auto",width:"100%",height:"500px",alignContent:"center",alignItems:"center",justifyItems:"center",justifyContent:"center"}},(0,p.lh)("30px")),(void 0==(null===Se||void 0===Se||null===(le=Se.processModule)||void 0===le?void 0:le.stepIndex)||(null===Se||void 0===Se||null===(oe=Se.processModule)||void 0===oe?void 0:oe.stepIndex)<2)&&we.length>0&&!Xe&&!ln&&hn&&function(e){var n=we.length>0?function(){var e=we.find((function(e){var n;return 1==(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.asGraphical)}));return void 0===e?[]:Y.sortWith([Y.descend(Y.prop("created_date"))])(Ze.filter((function(n){return n.module_id===e.id}))).filter((function(e){var n;return(null===(n=e.component_fields)||void 0===n?void 0:n.filter((function(e){var n;return"Status"===e.data_type_name&&!(e.value===(null===(n=Me.misc_info)||void 0===n?void 0:n.lock)||"Closed"===e.value||"Cancelled"===e.value)})).length)>0})).map((function(e,n){var l,o,t,i,d=e.component_fields.find((function(e){return"Link"===e.data_type_name}));return a.createElement("div",{key:n,className:F.imageCard},d&&((null===(l="".concat(null===d||void 0===d?void 0:d.value))||void 0===l?void 0:l.includes("jpg"))||(null===(o="".concat(null===d||void 0===d?void 0:d.value))||void 0===o?void 0:o.includes("jpeg"))||(null===(t="".concat(null===d||void 0===d?void 0:d.value))||void 0===t?void 0:t.includes("png"))||(null===d||void 0===d||null===(i=d.options)||void 0===i?void 0:i.image))&&a.createElement("img",{alt:"lg",src:null===d||void 0===d?void 0:d.value,style:{objectFit:"fill",height:"160px"}}))}))}():[],l=e?function(e){return Y.sortWith([Y.descend(Y.prop("created_date"))])(Ze.filter((function(n){return n.module_id===e.id}))).filter((function(e){return"None"===(null===e||void 0===e?void 0:e.status)})).filter((function(n){var l,o,t,i;return!((null===(l=e.options)||void 0===l?void 0:l.activeFor)>0&&C()((0,E.now)()).diff(C()(n.created_date),"minutes")>+(null===(o=e.options)||void 0===o?void 0:o.activeFor))||!("New"===n.status||"Unassigned"===n.status)||(null===(t=n.assigned_to)||void 0===t?void 0:t.id)||(null===n||void 0===n||null===(i=n.payments)||void 0===i?void 0:i.id)})).map((function(n,l){var o,t,i,d,u,r=n.component_fields.find((function(e){return"Value Button"===e.data_type_name&&(null===e||void 0===e?void 0:e.value)})),s=null===(o=Se.processModule.completeSteps[0].component_blueprints)||void 0===o||null===(t=o.find((function(e){var n,l,o;return 1==e.options.asModuleList&&(xe.positions.filter((function(n){var l,o;return null===(l=e.options)||void 0===l||null===(o=l.showOnly)||void 0===o?void 0:o.includes(n.id)})).length>0||0==(null===(n=e.options)||void 0===n||null===(l=n.showOnly)||void 0===l?void 0:l.length)||void 0===(null===(o=e.options)||void 0===o?void 0:o.showOnly))})))||void 0===t||null===(i=t.selected_fields)||void 0===i?void 0:i.map((function(e){return e.field_name}));return a.createElement("div",{key:l,className:F.componentCard,style:{display:"flex",border:"0.6px solid var(--app-color-gray-lighter)",fontWeight:"normal",alignItems:"flex-start",padding:"30px 10px",height:"200px",userSelect:"none"},"app-color-variant":"".concat(l%5+1),onClick:function(){j(Ce,qe,vn,Me,n,Jn,xe,Se,Ee,we,Ge,Pe,e)}},a.createElement("div",{style:{width:r?"80%":"100%",fontFamily:"var(--app-text-mobile-font)",spadding:"10px",textAlign:"left"}},s.map((function(e,l){var o,t=n.component_fields.find((function(n){return n.field_name===e}));return"Positions"===(null===t||void 0===t?void 0:t.data_type_name)?a.createElement("div",{key:l,style:{fontSize:0==l?"15px":"10px",fontWeight:0==l?"bold":""}},"".concat(null===(o=De.find((function(e){return(null===e||void 0===e?void 0:e.value)===(null===t||void 0===t?void 0:t.value)})))||void 0===o?void 0:o.label)):a.createElement("div",{key:l,style:{fontSize:0==l?"14px":"10px",fontWeight:0==l?"bold":"",margin:"2px 0"}},null===t||void 0===t?void 0:t.value)})),a.createElement("div",{style:{fontSize:"10px",fontWeight:"bold",width:"100%"}},null===e||void 0===e?void 0:e.name)),r&&a.createElement("div",{style:{width:"20%",display:"flex",justifyContent:"center",paddingTop:"30px"}},a.createElement("img",{alt:"lg",onError:function(e){return e.target.src=null===Me||void 0===Me?void 0:Me.logo},src:null!==(d=null===(u=r.options)||void 0===u?void 0:u.image)&&void 0!==d?d:null===Me||void 0===Me?void 0:Me.logo,className:F.avatarUrlImg})))}))}(e):[];return a.createElement("div",{className:F.center,style:{display:(null===n||void 0===n?void 0:n.length)>0||(null===l||void 0===l?void 0:l.length)>0?"":"none",width:"100%",minWidth:"360px",backgroundColor:"var(--app-color-gray-lightest)",flexDirection:"column",marginTop:"5px"}},a.createElement(q.tq,{slidesPerView:"auto",centeredSlides:!0,spaceBetween:6,initialSlide:1,pagination:{clickable:!0,dynamicBullets:!0},modules:[W.pt,W.tl],className:"mySwiper"},(null===l||void 0===l?void 0:l.length)>0&&l.map((function(e,n){return a.createElement(q.o5,{key:n,className:F.swiperslide},e)})),(null===n||void 0===n?void 0:n.length)>0&&n.map((function(e,n){return a.createElement(q.o5,{key:n,className:F.swiperslide},e)}))))}(null!==(te=null===Se||void 0===Se||null===(ie=Se.processModule)||void 0===ie?void 0:ie.module)&&void 0!==te?te:null===we||void 0===we?void 0:we.find((function(e){var n;return!0===(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.asMobileApp)}))),(null===Se||void 0===Se||null===(de=Se.processModule)||void 0===de?void 0:de.stepIndex)<2&&hn&&!Xe&&!ln&&function(){var e=we.filter((function(e){var n;return!0===(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.asMobileApp)}));return a.createElement("div",{style:{width:"100%",minWidth:"360px",backgroundColor:"var(--app-color-gray-lightest)",flexDirection:"column",marginTop:"10px"}},a.createElement(q.tq,{slidesPerView:2,spaceBetween:0,initialSlide:0,pagination:{clickable:!0,dynamicBullets:!0},modules:[W.pt,W.tl],className:"mySwiper"},e.map((function(e,n){var l;return a.createElement(q.o5,{key:n},a.createElement("div",{style:{padding:"10px",userSelect:"none"}},a.createElement(B.Z,{photo:null===(l=e.options)||void 0===l?void 0:l.background,height:"20vh",width:b.tq?"20vh":"",email:null===e||void 0===e?void 0:e.name,cardClicked:function(){var n,l,o=(null===Ee||void 0===Ee||null===(n=Ee.positions)||void 0===n||null===(l=n.filter((function(n){var l,o;return(null===e||void 0===e||null===(l=e.options)||void 0===l||null===(o=l.processors)||void 0===o?void 0:o.indexOf(n.id))>-1})))||void 0===l?void 0:l.length)>0;Xn(o),ol(we,e,o),gn(!0),$e(!1),on(!1)}})))}))))}(null!==(ae=null===Se||void 0===Se||null===(ue=Se.processModule)||void 0===ue?void 0:ue.module)&&void 0!==ae||(null===we||void 0===we||we.find((function(e){var n;return!0===(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.asMobileApp)})))),!(Xe||ln)&&a.createElement("div",{className:F.host,style:{display:"inactive"===Me.status?"none":"",width:"100%"}},a.createElement("div",{className:F.dashboardPanel,style:{display:"flex",margin:"0px 0 0 0"}},(null===Se||void 0===Se||null===(re=Se.processModule)||void 0===re||null===(se=re.steps)||void 0===se?void 0:se.length)>0&&ke.length>0&&!Je?a.createElement(S.ZP,{isProcessorOnly:Kn,paymentID:nl,navigateTo:mn,selectedComponent:null!==We&&void 0!==We?We:{},setSelectedComponent:qe,selectedProcess:Se.processModule,onCancel:function(){vn(!1),Ge(!0),setTimeout((function(){return Ge(!1)}))}}):a.createElement(h.$j,{type:"BallTriangle",color:"black",height:40,width:"40px"}))),Xe&&a.createElement("div",{style:{width:"100%",padding:"0 40px"}},a.createElement(N.default,null)),ln&&a.createElement("div",{style:{width:"100%",padding:"0 10px"}},a.createElement(ul,null)),(void 0==(null===Se||void 0===Se||null===(ve=Se.processModule)||void 0===ve?void 0:ve.stepIndex)||(null===Se||void 0===Se||null===(ce=Se.processModule)||void 0===ce?void 0:ce.stepIndex)<2)&&we.length>0&&a.createElement("div",{style:{display:"flex",position:"fixed",bottom:"0",width:"100%"}},a.createElement(tl,null)),Zn&&a.createElement(h.U7,{hasCloseIcon:!0,isOpen:Zn,onClose:function(){Mn(!1),Pn(-1)},backdropColor:!0,blured:!1,scrollable:!0,shadowedContainerStyle:{width:"100%"}},a.createElement("div",{className:F.userPanelRows,style:{height:"auto",minHeight:"540px",marginTop:"20px",display:In>0?"none":""}},a.createElement(N.LabeledContainer,{label:"Billing & Payments"}),a.createElement("div",{className:F.wallet},a.createElement("div",{style:{color:"white",fontSize:"14px"}},"Reward Points:"),a.createElement("div",{style:{color:"white",fontSize:"20px",fontWeight:"bold",margin:"5px 0 20px"}},null!==(pe=null===Ee||void 0===Ee||null===(me=Ee.options)||void 0===me||null===(fe=me.points)||void 0===fe?void 0:fe.toFixed(2))&&void 0!==pe?pe:"0.00"," Pts"),a.createElement("div",{style:{color:"white",fontSize:"14px"}},"Payments Wallet:"),a.createElement("div",{style:{color:"white",fontSize:"20px",fontWeight:"bold",margin:"5px 0 80px"}},"Php ",null!==(_e=null===xe||void 0===xe||null===(ye=xe.wallet)||void 0===ye?void 0:ye.toFixed(2))&&void 0!==_e?_e:"0.00"),a.createElement("div",{className:F.actionsContainer},a.createElement(r.Z,{clear:!0,title:"Top Up",clicked:function(){return Pn(0)},style:{backgroundColor:"var(--app-color-blue)",color:"white",width:"140px",display:In>-1?"none":""}})),a.createElement("div",{style:{width:"inherit",display:-1===In?"none":""}},a.createElement("div",{style:{color:"white"},onClick:function(){return Pn(-1)}},"Select your denomination:"),a.createElement(r.Z,{light:!0,title:"Php 500.00",clicked:function(){return Pn(500)},style:{width:"100%"}}),a.createElement(r.Z,{light:!0,title:"Php 1000.00",clicked:function(){return Pn(1e3)},style:{width:"100%"}}),a.createElement(r.Z,{light:!0,title:"Php 2000.00",clicked:function(){return Pn(2e3)},style:{width:"100%"}}),a.createElement(r.Z,{light:!0,title:"Php 3000.00",clicked:function(){return Pn(3e3)},style:{width:"100%"}}))),a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},a.createElement(r.Z,{loading:Ae,light:!0,titleStyle:{fontWeight:"normal"},title:On?"Hide":"Show Recent Payments",style:{marginRight:"40px"},clicked:function(){On?Rn(!1):(Oe(!0),(0,I.GP)().pipe((0,_.P)()).subscribe({next:function(e){Oe(!1),Rn(!0),zn(e.data)},error:function(){}}))}})),a.createElement("div",{style:{display:On?"":"none",padding:"20px 0px",fontFamily:"var(--app-text-mobile-font)"}},a.createElement("p",{style:{fontFamily:"var(--app-text-mobile-font)",fontWeight:"bold"}},"Recent Payments:"),a.createElement("br",null),a.createElement("br",null),a.createElement(A.default,{title:"",card:!0,className:F.listContainer,isReport:!1,"app-variant-is-mobile":"true",columns:["Date","ID","Source","Amount"],list:Dn.map((function(e){var n,l;return{Date:"".concat(C()(e.starts_at).format("YY MMM DD h:mm a")),ID:"".concat(null===(n=e.stripe_id)||void 0===n?void 0:n.substring(0,15)),Source:"".concat(e.stripe_status),Amount:"".concat(null===(l=+e.stripe_price)||void 0===l?void 0:l.toFixed(2))}}))}))),In>0?a.createElement(k.default,{label:" ",withBack:!1,paymentPath:"wallet",onClose:function(){return Mn(!1)},companyData:Me,subscriptionInfo:{user_id:xe.id,ref:xe.id,plan_price:In,currency:"PHP",description:"Credits",plan:"Wallet",total:In,billable_users:[Ee],duration:0,dlabel:"Flowhero",id:(0,p.mR)()},onError:function(){return Mn(!1)}}):a.createElement(a.Fragment,null,a.createElement("p",{style:{fontSize:"10px"}},""!==T.lw?"Payments by":""),a.createElement("img",{src:"https://files.readme.io/7586db8-small-paymongo_api_white.png",style:{backgroundColor:"black",height:"30px",width:"140px"}}))),an&&a.createElement(S.pz,{modalVisible:an,heading:"Task for ".concat(null===Se||void 0===Se||null===(he=Se.processModule)||void 0===he||null===(ge=he.module)||void 0===ge?void 0:ge.name),task:!0===an?{}:an,isProcess:!0,blured:!0,shadowedContainerStyle:{width:"100%"},onClose:function(){return un(!1)},isEdit:!0!==an,labels:{valueL:"Value"}}),Ye&&a.createElement(h.P9,{openModal:Ye,setOpenModal:He,slug:null===Me||void 0===Me?void 0:Me.slug})))})),j=function(e,n,l,o,d,a,u,r,v,c,f,y,h){!function(){var b,x,E,C,w,Z,M,S,k,I,N,T,D,z,U,A,O,R,L,W,q,F,B,H,j,V,J=e.find((function(e){return e.id===h.procedure.id}));n(d),l(!0),o.start=!0;var G=[];(null===J||void 0===J||null===(b=J.steps)||void 0===b?void 0:b.length)>0&&(null===J||void 0===J||null===(x=J.steps)||void 0===x||x.filter((function(e){var n;return null===e||void 0===e||null===(n=e.component_blueprints)||void 0===n?void 0:n.filter((function(e){return e.selected_fields.filter((function(e){return e.value=void 0}))}))}))),Y.uniqWith(Y.eqProps("group"))(d.component_fields).map((function(e){G=[].concat((0,t.Z)(G),[{id:e.component_blueprint_id,temp_id:e.id,selected_fields:Y.filter(Y.propEq("group",e.group))(d.component_fields)}])})),J.steps.filter((function(e){e.component_blueprints.filter((function(e){e.selected_fields.filter((function(e){var n,l=null===(n=d.component_fields)||void 0===n?void 0:n.find((function(n){return n.field_name===e.field_name}));if(void 0!=l)e.value=l.value,e.group=l.group;else if("Record"===e.data_type_name){var o,t=null===(o=d.component_fields)||void 0===o?void 0:o.find((function(n){return n.field_name===e.options.name}));void 0!=t&&(e.value=t.value,e.group=t.group)}}))}))})),a({action:g._U.setComponents,value:G}),a({action:g._U.setModuleItems,value:JSON.parse(JSON.stringify(d.component_items))});var Q,K,X,$=J.steps.filter((function(e){var n,l,o,t,i,d;return void 0==(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.showStepAll)||1==(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.showStepAll)||0==(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.showStepAll)&&(null===e||void 0===e||null===(t=e.options)||void 0===t||null===(i=t.showOnly)||void 0===i?void 0:i.filter((function(e){return u.positions.map((function(e){return e.id})).indexOf(e)>-1})).length)>0||(null===e||void 0===e||null===(d=e.options)||void 0===d?void 0:d.showStepAuthor)&&(null===u||void 0===u?void 0:u.id)===(null===J||void 0===J?void 0:J.user_id)})).map((function(e,n){return(0,i.Z)((0,i.Z)({},e),{},{rank:n+1})})),ee=(null===r||void 0===r||null===(E=r.processModule)||void 0===E||null===(C=E.steps)||void 0===C?void 0:C.length)>0?null===r||void 0===r||null===(w=r.processModule)||void 0===w||null===(Z=w.steps)||void 0===Z||null===(M=Z.find((function(e){return(null===e||void 0===e?void 0:e.component_blueprints.filter((function(e){return e.selected_fields.filter((function(e){return"Status"===e.data_type_name})).length>0})).length)>0})))||void 0===M||null===(S=M.component_blueprints)||void 0===S||null===(k=S.find((function(e){return e.selected_fields.filter((function(e){return"Status"===e.data_type_name})).length>0})))||void 0===k||null===(I=k.options)||void 0===I?void 0:I.showOnly:[],ne=(null===r||void 0===r||null===(N=r.processModule)||void 0===N||null===(T=N.steps)||void 0===T?void 0:T.length)>0?null===r||void 0===r||null===(D=r.processModule)||void 0===D||null===(z=D.steps)||void 0===z||null===(U=z.find((function(e){return(null===e||void 0===e?void 0:e.component_blueprints.filter((function(e){return e.selected_fields.filter((function(e){return"Action Button"===e.data_type_name})).length>0})).length)>0})))||void 0===U||null===(A=U.component_blueprints.find((function(e){var n;return(null===(n=e.selected_fields.filter((function(e){return"Action Button"===e.data_type_name})))||void 0===n?void 0:n.length)>0})))||void 0===A||null===(O=A.options)||void 0===O?void 0:O.showOnly:[],le=void 0===d.status&&((null===v||void 0===v?void 0:v.id)===(null===J||void 0===J?void 0:J.user_id)||(null===ee||void 0===ee?void 0:ee.filter((function(e){var n;return(null===u||void 0===u||null===(n=u.positions)||void 0===n?void 0:n.map((function(e){return e.id})).indexOf(e))>-1})).length)>0)||(void 0===d.status||"New"===d.status||"None"===d.status)&&(null===d||void 0===d||null===(R=d.created_by)||void 0===R?void 0:R.id)===(null===u||void 0===u?void 0:u.id)||void 0!==d.status&&!("Closed"===d.status||d.status===(null===o||void 0===o||null===(L=o.misc_info)||void 0===L?void 0:L.lock))&&(null===ee||void 0===ee?void 0:ee.filter((function(e){var n;return(null===u||void 0===u||null===(n=u.positions)||void 0===n?void 0:n.map((function(e){return e.id})).indexOf(e))>-1})).length)>0&&(1!=(null===c||void 0===c||null===(W=c.find((function(e){return e.id===d.module_id})))||void 0===W||null===(q=W.options)||void 0===q?void 0:q.strict)||(null===d||void 0===d||null===(F=d.created_by)||void 0===F?void 0:F.id)!==(null===v||void 0===v?void 0:v.id))||!1===(null===d||void 0===d?void 0:d.is_complete)&&(null===d||void 0===d||null===(B=d.created_by)||void 0===B?void 0:B.id)===(null===v||void 0===v?void 0:v.id),oe=(0,p.cQ)(d.status,ne,d,v,r,o),te=null!==(H=null===(j=d.component_fields.find((function(e){return"Action Button"===e.data_type_name})))||void 0===j?void 0:j.value)&&void 0!==H?H:"";(m.h.dispatch((0,s.q4)((0,i.Z)((0,i.Z)({},J),{},{completeSteps:J.steps,steps:$,stepIndex:1==le&&d.created_by.id===u.id&&te||(!le||d.created_by.id!==u.id&&J.user_id!==u.id)&&(!oe||te!==u.id&&J.user_id!==u.id)?0:1,canEdit:!(1==le&&d.created_by.id===u.id&&te||(!le||d.created_by.id!==u.id&&J.user_id!==u.id)&&(!oe||te!==u.id&&J.user_id!==u.id)),status:d.status,back_array:$.length>0?[$[0].id]:[],module_id:d.module_id,module:null===c||void 0===c?void 0:c.find((function(e){return e.id===d.module_id})),isUpdating:!0,selectedComponent:d,showDetail:!0}))),f(!0),null!==d&&void 0!==d&&null!==(V=d.assigned_to)&&void 0!==V&&V.id&&!y.find((function(e){var n;return e.id===(null===d||void 0===d||null===(n=d.assigned_to)||void 0===n?void 0:n.id)})))?(0,P.VG)(y.find((function(e){var n;return e.id===(null===(n=d.created_by)||void 0===n?void 0:n.id)}))?[null===d||void 0===d||null===(Q=d.assigned_to)||void 0===Q?void 0:Q.id]:[null===d||void 0===d||null===(K=d.assigned_to)||void 0===K?void 0:K.id,null===d||void 0===d||null===(X=d.created_by)||void 0===X?void 0:X.id]).pipe((0,_.P)()).subscribe({next:function(e){m.h.dispatch((0,s.NY)(y.concat(e))),setTimeout((function(){f(!1),window.scrollTo({top:0,behavior:"smooth"})}))}}):setTimeout((function(){f(!1),window.scrollTo({top:0,behavior:"smooth"})}))}()}},51330:function(e,n,l){var o=l(1413),t=l(93433),i=l(29439),d=l(67861),a=l(48963),u=l(47144),r=l.n(u),s=l(27436),v=l(10904),c=l(88550),p=l(30490),m=l(89293),f=l(12075),_=l(52902),y=l(73500);n.Z=function(e){var n,l,u,h,g,b,x,E,C,w,Z,M,S,k,I,P,N,T,D,z,U,A=e.component,O=e.blueprintIndex,R=e.nextButtonClicked,L=e.setIsMandatoryError,W=e.authenticatedUser,q=e.begunModule,F=e.selectedComponent,B=e.editMode,Y=e.shouldDisplay,H=void 0===Y?(!1===(null===A||void 0===A||null===(n=A.options)||void 0===n?void 0:n.useCustomTemplate)||void 0===(null===A||void 0===A||null===(l=A.options)||void 0===l?void 0:l.useCustomTemplate))&&(void 0===(null===A||void 0===A||null===(u=A.options)||void 0===u?void 0:u.showOnly)||(!((null===A||void 0===A||null===(h=A.options)||void 0===h||null===(g=h.showOnly)||void 0===g?void 0:g.length)>0)||(null===A||void 0===A||null===(b=A.options)||void 0===b||null===(x=b.showOnly)||void 0===x?void 0:x.filter((function(e){var n;return(null===W||void 0===W||null===(n=W.positions)||void 0===n?void 0:n.filter((function(n){return n.id===e})).length)>0})).length)>0)):Y,j=e.isEnabled,V=void 0===j?void 0===(null===F||void 0===F?void 0:F.id)||((null===F||void 0===F||null===(E=F.created_by)||void 0===E?void 0:E.id)===W.id||(void 0===(null===q||void 0===q||null===(C=q.processModule)||void 0===C||null===(w=C.module)||void 0===w||null===(Z=w.options)||void 0===Z?void 0:Z.strict)||0==(null===q||void 0===q||null===(M=q.processModule)||void 0===M||null===(S=M.module)||void 0===S||null===(k=S.options)||void 0===k?void 0:k.strict)||void 0!==(null===A||void 0===A||null===(I=A.options)||void 0===I?void 0:I.showOnly)&&((null===A||void 0===A||null===(P=A.options)||void 0===P||null===(N=P.showOnly)||void 0===N?void 0:N.length)>0&&(null===A||void 0===A||null===(T=A.options)||void 0===T||null===(D=T.showOnly)||void 0===D?void 0:D.filter((function(e){var n;return(null===W||void 0===W||null===(n=W.positions)||void 0===n?void 0:n.filter((function(n){return n.id===e})).length)>0})).length)>0))):j,J=(0,c.pQ)(),G=(0,i.Z)(J,2),Q=G[0],K=G[1],X=(0,d.useState)(a.Z.active),$=(0,i.Z)(X,1)[0],ee=(0,d.useState)(!1),ne=(0,i.Z)(ee,2),le=ne[0],oe=ne[1],te=(0,d.useState)(""),ie=(0,i.Z)(te,1)[0],de=(0,d.useRef)(null),ae=null===(z=Q.currentStep)||void 0===z?void 0:z.component_blueprints.findIndex((function(e){return e.id===(null===A||void 0===A?void 0:A.id)}));(0,d.useEffect)((function(){ue()}),[R]);var ue=function(){var e;null!==A&&void 0!==A&&null!==(e=A.selected_fields)&&void 0!==e&&e.some((function(e){var n;return!0===e.mandatory&&!0===e.visible&&"output"!==e.data_type&&(!e.value||(null===e||void 0===e||null===(n=e.value)||void 0===n?void 0:n.length)<1)}))?L(!0):L(!1)},re=function(e,n){var l,o,i,d=(0,t.Z)(null!==(l=null===(o=Q.currentStep)||void 0===o?void 0:o.component_blueprints)&&void 0!==l?l:[]),a=null===(i=d[ae])||void 0===i?void 0:i.selected_fields[n];"Number"===(null===a||void 0===a?void 0:a.data_type_name)?Number(+e)?a.value=e:""===e&&(a.value=""):null!==a&&void 0!==a&&a.data_type_name&&(a.value=e),null!==a&&void 0!==a&&a.value&&a.mandatory&&(a.errors=""),ue(),K({action:c._U.setComponentBlueprints,value:d}),K({action:c._U.setModuleNewStepComponents,value:d})},se=(0,d.useCallback)((function(e,n,l){var o,i,d,a=(0,t.Z)(null!==(o=null===(i=Q.currentStep)||void 0===i?void 0:i.component_blueprints)&&void 0!==o?o:[]),u=null===(d=a[ae])||void 0===d?void 0:d.selected_fields[n];u.options.country_code=null===e||void 0===e?void 0:e.countryCode,u.options.country_name=null===e||void 0===e?void 0:e.name,u.options.country_prefix="+".concat(null===e||void 0===e?void 0:e.dialCode),K({action:c._U.setComponentBlueprints,value:a}),K({action:c._U.setModuleNewStepComponents,value:a}),re(l,n)}),[Q]),ve=(0,d.useCallback)((function(e,n){var l,o,i,d=(0,t.Z)(null!==(l=null===(o=Q.currentStep)||void 0===o?void 0:o.component_blueprints)&&void 0!==l?l:[]),a=null===(i=d[ae])||void 0===i?void 0:i.selected_fields[n];a.options.currency_type=null===e||void 0===e?void 0:e.label,a.options.currency_value=null===e||void 0===e?void 0:e.value,a.options.symbol=null===e||void 0===e?void 0:e.symbol,K({action:c._U.setComponentBlueprints,value:d}),K({action:c._U.setModuleNewStepComponents,value:d})}),[Q]);return d.createElement("div",{id:"accordion",className:a.Z.section,key:O,style:{display:H?"":"none",pointerEvents:V?"":"none"}},d.createElement("div",{className:r()(a.Z.accordionContainer,$),"app-variant-has-error":ie?"error":"",style:{border:y.tq?"0":"",padding:y.tq?"0":"",margin:y.tq?"0":""}},d.createElement("p",{className:a.Z.title},null===A||void 0===A?void 0:A.name),d.createElement("div",{ref:de,style:{maxHeight:$===a.Z.active?"":"0px",display:"flex"},className:a.Z.content},d.createElement(p.g,{component:A,selectedComponent:F,handleInputChange:re,handlePrefixChange:se,handleCurrencyChange:ve,checkIfAreMandatoryErrored:ue,handleCheckbox:function(e,n){var l,o,i,d=(0,t.Z)(null!==(l=null===(o=Q.currentStep)||void 0===o?void 0:o.component_blueprints)&&void 0!==l?l:[]),a=null===(i=d[ae])||void 0===i?void 0:i.selected_fields[n];a&&(a.value=e,null!==a&&void 0!==a&&a.value&&a.mandatory&&(a.errors=""),K({action:c._U.setComponentBlueprints,value:d}),K({action:c._U.setModuleNewStepComponents,value:d}),ue())},isInherited:!1,indexInContextArray:ae,handleLocationChange:function(e,n){var l,o,i,d=(0,t.Z)(null!==(l=null===(o=Q.currentStep)||void 0===o?void 0:o.component_blueprints)&&void 0!==l?l:[]);(null===(i=d[ae])||void 0===i?void 0:i.selected_fields[n]).value="".concat(e.lat,", ").concat(e.lng),K({action:c._U.setComponentBlueprints,value:d}),K({action:c._U.setModuleNewStepComponents,value:d})},processTaskContext:Q,setTaskProcessContext:K,editMode:B,setShowEdit:oe,showEdit:le})),d.createElement("div",{style:{paddingLeft:"10px",display:"flex"}},le&&(null===le||void 0===le?void 0:le.item_code)&&d.createElement(v.zx,{light:!0,clicked:function(){var e,n={};A.selected_fields.map((function(e){var l,t,i;if("Formula"===e.data_type_name){var d,a,u,r,s=(0,m.LV)(e.options,A.selected_fields.filter((function(n){return e.options.list.includes(n.field_name)})),Q.components,null!==(d=Q.items)&&void 0!==d?d:[],null!==(a=null===Q||void 0===Q?void 0:Q.newStepComponents)&&void 0!==a?a:[]);if(null!==e&&void 0!==e&&null!==(u=e.options)&&void 0!==u&&u.mapToItem)n[null===e||void 0===e||null===(r=e.options)||void 0===r?void 0:r.mapToItem]="".concat(null!==s&&void 0!==s?s:"");return(0,o.Z)((0,o.Z)({},e),{},{value:"".concat(null!==s&&void 0!==s?s:"")})}null!==e&&void 0!==e&&null!==(l=e.options)&&void 0!==l&&l.mapToItem&&(n[null===e||void 0===e||null===(t=e.options)||void 0===t?void 0:t.mapToItem]="".concat(null!==(i=null===e||void 0===e?void 0:e.value)&&void 0!==i?i:""));return e}));var l=null===(e=Q.items)||void 0===e?void 0:e.find((function(e){return e.id===(null===le||void 0===le?void 0:le.id)}));K(void 0===l?{action:c._U.addModuleItems,value:(0,o.Z)((0,o.Z)({},n),{},{id:(0,m.mR)()})}:{action:c._U.updateModuleItems,value:(0,o.Z)((0,o.Z)({},l),n)}),oe(!1),A.selected_fields.map((function(e,n){re("",n)}))}},d.createElement(f.G,{icon:_.r6l,style:{width:"20px",height:"20px"}})),le&&!(null!==le&&void 0!==le&&le.item_code)&&d.createElement(v.zx,{clicked:function(){K({action:c._U.removeModuleComponents,value:le.temp_id}),oe(!1)}},d.createElement(f.G,{icon:_.$aW,style:{width:"20px",height:"20px"}})),le&&(null===le||void 0===le?void 0:le.item_code)&&d.createElement(v.zx,{light:!0,clicked:function(){le.item_code&&(le.alt_value||le.quantity||le.total)?K({action:c._U.removeModuleItems,value:le}):K({action:c._U.removeModuleComponents,value:le.temp_id}),oe(!1),A.selected_fields.map((function(e,n){re("",n)}))}},d.createElement(f.G,{icon:_.$aW,style:{width:"20px",height:"20px"}})))),ie&&(null===ie||void 0===ie||null===(U=ie.errors)||void 0===U?void 0:U.title)&&d.createElement(s.Z,{message:ie.errors.title}),ie&&(null===ie||void 0===ie?void 0:ie.message)&&d.createElement(s.Z,{message:ie.message}))}},63124:function(e,n,l){l.d(n,{pz:function(){return nn},ZP:function(){return tn}});var o=l(87462),t=l(45987),i=l(4942),d=l(93433),a=l(1413),u=l(29439),r=l(67861),s=l(39518),v=l(11577),c=l(10103),p=l(65019),m=l(88550),f=l(88827),_=l(88374),y=l(10904),h=l(73500),g=l(6073),b=l(43984),x=l(23280),E=l(59401),C=l(9969),w=l(93389),Z=l(34710),M=l(49119),S=l(12308),k=l(41131),I=l(27436),P=l(63864),N=l(60534),T=l(63077),D=l(79492),z=l.n(D),U=l(89293),A=l(4358),O=l(1542),R=(l(83381),l(66918)),L=l(49523),W=l(25403),q=l(4292),F=l(9204),B=l(32086),Y=l(53431),H=l(68218),j=l(84634),V=l(35606),J=l(79544),G=l(98032),Q=l(62169),K=l(13397),X=l(88346),$=l(8284),ee=l(74369),ne=l(3616),le=l(90421),oe=l(7538),te=l(77802),ie=l(97606),de=(l(67055),l(71901),l(50981)),ae=l.n(de),ue=l(87424),re=l(27658),se=l(52902),ve=l(12075),ce=l(44408),pe=l(23910),me=(l(56120),l(37704),l(72666),l(68623),l(3863),l(95361),{ProcessModuleContainer:"ProcessModule_ProcessModuleContainer__FsiP8",modalLabelHeader:"ProcessModule_modalLabelHeader__RSEXx",processStepHost:"ProcessModule_processStepHost__jnVYj",processModuleContainer:"ProcessModule_processModuleContainer__T-efO",renderComponentContainer:"ProcessModule_renderComponentContainer__MQMoJ",accordionModuleContainer:"ProcessModule_accordionModuleContainer__QQQn5",detailContainer:"ProcessModule_detailContainer__yrECc",leftCardMargin:"ProcessModule_leftCardMargin__+5cc+",centeredCardMargin:"ProcessModule_centeredCardMargin__8ns+o",centeredSpinner:"ProcessModule_centeredSpinner__T1+25",emptyElementsSection:"ProcessModule_emptyElementsSection__LP79x",stepCounter:"ProcessModule_stepCounter__BLQiH",clockIcon:"ProcessModule_clockIcon__Iq90d",stepTitle:"ProcessModule_stepTitle__92AhY",stepGuidanceSmaller:"ProcessModule_stepGuidanceSmaller__fbek+",stepTitleSmaller:"ProcessModule_stepTitleSmaller__o-RAS",stepGuidance:"ProcessModule_stepGuidance__VN9ID",inputContainer:"ProcessModule_inputContainer__ov5HE",selectInput:"ProcessModule_selectInput__gIlsq",multiselectWithSearch:"ProcessModule_multiselectWithSearch__HPDWF",smoMultiselectParent:"ProcessModule_smoMultiselectParent__XMpxu",selectMenuItem:"ProcessModule_selectMenuItem__D9YuM",inputClassName:"ProcessModule_inputClassName__FaizJ",toggleMenuInputButton:"ProcessModule_toggleMenuInputButton__u2LB6",goToNextStep:"ProcessModule_goToNextStep__5FEFk",nextStepsContainer:"ProcessModule_nextStepsContainer__0lDZ4",nextStepImageContainer:"ProcessModule_nextStepImageContainer__ESZoP",nextStepWrapper:"ProcessModule_nextStepWrapper__8aQAo",tasksTableHost:"ProcessModule_tasksTableHost__jF7kU",headerContainer:"ProcessModule_headerContainer__B9M39",content:"ProcessModule_content__TwxRx","react-grid-layout":"ProcessModule_react-grid-layout__kuSHy",layoutJSON:"ProcessModule_layoutJSON__swsUL",columns:"ProcessModule_columns__74Ypn","react-grid-item":"ProcessModule_react-grid-item__SV1zr","react-grid-placeholder":"ProcessModule_react-grid-placeholder__RsO19",resizing:"ProcessModule_resizing__lsJHw",static:"ProcessModule_static__fjtpd",text:"ProcessModule_text__JRaDx",minMax:"ProcessModule_minMax__n6Nqc",add:"ProcessModule_add__73-R8","react-grid-dragHandleExample":"ProcessModule_react-grid-dragHandleExample__ifaCX",cssTransforms:"ProcessModule_cssTransforms__Tj9J0","react-draggable-dragging":"ProcessModule_react-draggable-dragging__df7gg","react-resizable-handle":"ProcessModule_react-resizable-handle__HFiOI",singleButton:"ProcessModule_singleButton__VBAVx",menuRightButtons:"ProcessModule_menuRightButtons__YMGk1",menuButtons:"ProcessModule_menuButtons__t3peI",menuAccordionButtons:"ProcessModule_menuAccordionButtons__IwPeb",detailLabel:"ProcessModule_detailLabel__ujv54",subLabel:"ProcessModule_subLabel__ljjWe",modalHeaderTitle:"ProcessModule_modalHeaderTitle__20ZkP",p:"ProcessModule_p__fq5W3",itemsTable:"ProcessModule_itemsTable__Lhi8m",sharesTable:"ProcessModule_sharesTable__0LY0Q",peoplePositionsSelect:"ProcessModule_peoplePositionsSelect__3PUST",peoplePositionsSelectInput:"ProcessModule_peoplePositionsSelectInput__uW3vb",peoplePositionsSelectMenuOverlay:"ProcessModule_peoplePositionsSelectMenuOverlay__7WF9K",peoplePositionsSelectMenuOverlayItem:"ProcessModule_peoplePositionsSelectMenuOverlayItem__thx5T",deleteText:"ProcessModule_deleteText__LHcJR",deleteButton:"ProcessModule_deleteButton__Vd-mb",searchContainer:"ProcessModule_searchContainer__7U0ti",searchInput:"ProcessModule_searchInput__21v+N",emailInput:"ProcessModule_emailInput__OSseh",actionsContainer:"ProcessModule_actionsContainer__dN4VO",detailButton:"ProcessModule_detailButton__hsMZQ",detailButtonTitleContainer:"ProcessModule_detailButtonTitleContainer__9vGQV",fetchingLatestP:"ProcessModule_fetchingLatestP__w43Ah",modalTitle:"ProcessModule_modalTitle__ZzDzz",modalSubTitle:"ProcessModule_modalSubTitle__iCPup",dropdownSelectComponent:"ProcessModule_dropdownSelectComponent__fwabj",dropdownSelectComponentL:"ProcessModule_dropdownSelectComponentL__UjHu+",dropdownSelectOperation:"ProcessModule_dropdownSelectOperation__Z0sof",dropdownSelectReport:"ProcessModule_dropdownSelectReport__VhkMx",cardTitle:"ProcessModule_cardTitle__5UI1u",customButton:"ProcessModule_customButton__EmZ3f",fieldRowContainer:"ProcessModule_fieldRowContainer__w-2m5",templateInformation:"ProcessModule_templateInformation__diTyj",emulatedFlexGap:"ProcessModule_emulatedFlexGap__0zLFx",selectAndMultiselectHost:"ProcessModule_selectAndMultiselectHost__heH79",selectAndMultiselectHostTiles:"ProcessModule_selectAndMultiselectHostTiles__iC2AB",section:"ProcessModule_section__wECKG",accordionContainer:"ProcessModule_accordionContainer__ivI1e",active:"ProcessModule_active__krZBG",title:"ProcessModule_title__ePgXX",customTitleInput:"ProcessModule_customTitleInput__ONvpq",icon:"ProcessModule_icon__OW9E6",loaderContainer:"ProcessModule_loaderContainer__zN3G3",host:"ProcessModule_host__95lCJ",iconsContainer:"ProcessModule_iconsContainer__ktO+d",rotate:"ProcessModule_rotate__gwBr5",fieldTypeInput:"ProcessModule_fieldTypeInput__+x8RA",fieldMapInput:"ProcessModule_fieldMapInput__TyyrY",fieldTypeDate:"ProcessModule_fieldTypeDate__yjKi1",labelInput:"ProcessModule_labelInput__HMbSI",accordion:"ProcessModule_accordion__Er3uD",regularAccordion:"ProcessModule_regularAccordion__FpzQa",singleInputContainer:"ProcessModule_singleInputContainer__jGXcH",dateInputContainer:"ProcessModule_dateInputContainer__gXUmg",inputContainerClassName:"ProcessModule_inputContainerClassName__T8Rwy",phoneIInput:"ProcessModule_phoneIInput__DrOHj",currencySelectContainer:"ProcessModule_currencySelectContainer__w+Q8U",currencySymbol:"ProcessModule_currencySymbol__hnqlD",currencySelectComponent:"ProcessModule_currencySelectComponent__DiSZQ",currencySelectMenuOverlayList:"ProcessModule_currencySelectMenuOverlayList__eWmgR",currencySelectMenuOverlayListItem:"ProcessModule_currencySelectMenuOverlayListItem__HJNGm",currencySearchInput:"ProcessModule_currencySearchInput__QNuK3",currencyClearControlsClassName:"ProcessModule_currencyClearControlsClassName__cQ2JL",currencyInputContainerClassName:"ProcessModule_currencyInputContainerClassName__jjeME",currencyInput:"ProcessModule_currencyInput__ockL5",peopleContainer:"ProcessModule_peopleContainer__qhRGZ",peopleBooleansOptions:"ProcessModule_peopleBooleansOptions__1QKZY",peoplePositionSelectContainer:"ProcessModule_peoplePositionSelectContainer__Dek6h",unfocusableWrapper:"ProcessModule_unfocusableWrapper__lYnko",menuOverlayList:"ProcessModule_menuOverlayList__stXtG",menuOverlayListItem:"ProcessModule_menuOverlayListItem__q5Cp8",menuOverlayListItemInput:"ProcessModule_menuOverlayListItemInput__mGtmf",menuOverlayListItemInputContainerClassName:"ProcessModule_menuOverlayListItemInputContainerClassName__c2qiO",openSelectWithSearchHost:"ProcessModule_openSelectWithSearchHost__GVLkU",openSelectWithSearch:"ProcessModule_openSelectWithSearch__zQUZm",dropdownClassContainer:"ProcessModule_dropdownClassContainer__4rFl4",dropdownHeightClassContainer:"ProcessModule_dropdownHeightClassContainer__6Rqku",fieldTypeTextarea:"ProcessModule_fieldTypeTextarea__9rSMB",fullLengthTextarea:"ProcessModule_fullLengthTextarea__eYuTp",filtersContainer:"ProcessModule_filtersContainer__ZXr-v",filtersContainerII:"ProcessModule_filtersContainerII__7cIxb",customMenuOverlayListItemCheckboxCheckedMark:"ProcessModule_customMenuOverlayListItemCheckboxCheckedMark__vi6VV",customMenuOverlayListItemNormalCheckedMark:"ProcessModule_customMenuOverlayListItemNormalCheckedMark__U5+ho",checkbox:"ProcessModule_checkbox__iHQvz",listContainer:"ProcessModule_listContainer__gwweI",tableHostMobile:"ProcessModule_tableHostMobile__j-DPP",tableHostSimple:"ProcessModule_tableHostSimple__Vct0M",action:"ProcessModule_action__iCvd1",mobileTable_ii:"ProcessModule_mobileTable_ii__vrooR",centerDiv:"ProcessModule_centerDiv__DT2hU",calendar:"ProcessModule_calendar__dkHMo",multiselectComponent:"ProcessModule_multiselectComponent__nKtu7",multiselectComponentNoBorder:"ProcessModule_multiselectComponentNoBorder__E-5tg",infoTitle:"ProcessModule_infoTitle__ZuUto",mappopup:"ProcessModule_mappopup__jQF6G",popup:"ProcessModule_popup__UhrxE",ratingsDiv:"ProcessModule_ratingsDiv__CRzxP",slider:"ProcessModule_slider__Le7zs",ratingsInput:"ProcessModule_ratingsInput__TJzIX",swiperslide:"ProcessModule_swiperslide__rHvXl",dashboardCard:"ProcessModule_dashboardCard__8GAEl",buttonsContainer:"ProcessModule_buttonsContainer__IZ5YN"}),fe=l(58535),_e=l(9825),ye=l.n(_e),he=l(79633),ge=l(94667),be=l(47144),xe=l.n(be),Ee=l(75105),Ce=l(66180),we=l.n(Ce),Ze=l(29960),Me=l(13721),Se=l(20777),ke=l(91426),Ie=l(48630),Pe=l(32588),Ne=(l(68140),l(27426)),Te=l(51481),De=l(31266),ze=l(84952),Ue=l(30519),Ae=l(32562),Oe=l(41757);e=l.hmd(e);var Re=l(456),Le=["height","start","onClick"],We=["height","start","onClick"],qe=["height","start","onClick"],Fe=(0,r.memo)((function(e){var n,l,o,t,i,d=e.step,s=e.isMandatoryError,c=e.nextButtonClicked,p=e.setIsMandatoryError,m=e.begunModule,f=e.companyData,_=e.components,h=e.isEditing,g=e.companyUsersArray,b=e.products,x=e.selectedComponent,E=e.goToNextStep,C=e.authenticatedUser,Z=(e.setIsCompleted,e.companyPositionsArray),S=e.blueprints,I=e.allModules,N=e.editMode,T=e.isProcessorOnly,D=((0,M.WidthProvider)(M.Responsive),(0,r.useState)(null===(n=null===x||void 0===x?void 0:x.is_complete)||void 0===n||n)),z=((0,u.Z)(D,1)[0],[]),U=(null===d||void 0===d||null===(l=d.component_blueprints)||void 0===l?void 0:l.length)>0?null===d||void 0===d?void 0:d.component_blueprints.map((function(e,n){var l=e.selected_fields.find((function(e){return"Template"===e.data_type_name&&1==e.visible})),o=e.selected_fields.find((function(e){return"Video"===e.data_type_name&&1==e.visible}));return l?r.createElement("div",{key:n,style:{padding:"0px"}},r.createElement(k.ZP,{templateName:l.field_name,nextButtonClicked:c,isMandatoryError:s,blueprintIndex:n,setIsMandatoryError:p,component:e,companyData:f,components:_,products:b,selectedComponent:x})):e.selected_fields.filter((function(e){return 1==e.visible})).length>0?r.createElement("div",{key:n,className:me.renderComponentContainer},r.createElement(Ye,{editMode:N,nextButtonClicked:c,isMandatoryError:s,blueprintIndex:n,setIsMandatoryError:p,blueprints:S,component:e,companyData:f,components:_,allModules:I,products:b,authenticatedUser:C,selectedComponent:x,companyUsersArray:g,companyPositionsArray:Z,begunModule:m,isProcessorOnly:T}),(null===x||void 0===x?void 0:x.id)&&(null===o||void 0===o?void 0:o.value)&&ae()(null===o||void 0===o?void 0:o.value)<=(0,de.now)()&&(0,de.now)()<ae()(null===o||void 0===o?void 0:o.value).add("minutes",10)&&r.createElement(Ye,{editMode:N,nextButtonClicked:c,isMandatoryError:s,blueprintIndex:n,setIsMandatoryError:p,blueprints:S,component:(0,a.Z)((0,a.Z)({},e),{},{name:"Video Call",selected_fields:[(0,a.Z)((0,a.Z)({},o),{},{options:(0,a.Z)((0,a.Z)({},o.options),{},{start:!0})})]}),companyData:f,components:_,allModules:I,products:b,authenticatedUser:C,selectedComponent:x,companyUsersArray:g,companyPositionsArray:Z,begunModule:m,shouldDisplay:!0,isEnabled:!0})):r.createElement("div",{key:n,className:me.emptyElementsSection})})):r.createElement("div",{className:me.emptyElementsSection}),A=(0,r.useState)({currentBreakpoint:"lg",compactType:"vertical",mounted:!1,layouts:{lg:d.options.layout},editing:h}),O=(0,u.Z)(A,2),R=O[0],L=O[1];return r.createElement("div",{style:{width:"inherit"}},r.createElement(y.j3,{permissions:[y.po.processes.create]},r.createElement("button",{onClick:function(){z=R.layouts.lg.map((function(e){return(0,a.Z)((0,a.Z)({},e),{},{static:!1})})),L((0,a.Z)((0,a.Z)({},R),{},{layouts:{lg:z},editing:!R.editing}))},hidden:!R.editing},"Edit Layout"),r.createElement("button",{onClick:function(){var e=z.map((function(e){return(0,a.Z)((0,a.Z)({},e),{},{static:!0})}));(0,w.T5)({options:(0,a.Z)((0,a.Z)({},d.options),{},{layout:e})},d.id,!0).pipe((0,v.P)()).subscribe({next:function(n){L((0,a.Z)((0,a.Z)({},R),{},{layouts:{lg:e},editing:!R.editing}))},error:function(e){L((0,a.Z)((0,a.Z)({},R),{},{layouts:{lg:d.options.layout},editing:!R.editing}))}})},hidden:!R.editing},"Save Layout")),U,(null===(o=m.processModule.module)||void 0===o?void 0:o.options.forSpecificUsers)&&(null===d||void 0===d?void 0:d.is_end)&&r.createElement("div",{style:{height:"100px"}}),(null===d||void 0===d||null===(t=d.pathway_steps)||void 0===t?void 0:t.length)>0&&function(){var e=d.pathway_steps.map((function(e){return{label:"".concat(e.name),value:e.id}})),n=g.map((function(e){return{label:"".concat(e.first_name," ").concat(e.last_name),value:e.id}}));return r.createElement("div",{className:me.emptyElementsSection,style:{width:"60%",padding:"20px 20px 20px 20px",height:"".concat(n.length*n.length>4?70:200,"px")}},r.createElement(P.Z,{visible:!0,mandatory:!1,items:e,onChange:function(e){E(e)},placeholder:"Continue to this step..."}))}(),(null===d||void 0===d||null===(i=d.pathway_processes)||void 0===i?void 0:i.length)>0&&function(){var e=d.pathway_processes.map((function(e){return{label:"".concat(e.name),value:e.id}})),n=g.map((function(e){return{label:"".concat(e.first_name," ").concat(e.last_name),value:e.id}}));return r.createElement("div",{className:me.emptyElementsSection,style:{width:"60%",padding:"20px 20px 20px 20px",height:"".concat(n.length*n.length>4?70:200,"px")}},r.createElement(P.Z,{visible:!0,mandatory:!1,items:e,onChange:function(){},placeholder:"Continue to this process..."}))}(),e.children)})),Be=r.forwardRef((function(e,n){var l,o,t,s,v,c,p,m,f,_,y,g=e.begunModule,b=e.allModules,x=e.companyData,E=e.setSelectedComponent,C=e.selectedComponent,w=e.companyUsersArray,Z=e.companyPositionsArray,M=e.print,I=e.components,P=void 0===I?[]:I,N=(e.user,e.bypassCustom),T=void 0!==N&&N,D=e.goto,z=(0,r.useState)([]),U=(0,u.Z)(z,2),A=U[0],O=U[1],R=null===g||void 0===g||null===(l=g.processModule)||void 0===l||null===(o=l.completeSteps)||void 0===o?void 0:o.find((function(e){var n;return(null===(n=e.component_blueprints)||void 0===n?void 0:n.filter((function(e){return e.selected_fields.filter((function(e){return"Template"===e.data_type_name})).length>0})).length)>0&&0==T}));(0,r.useEffect)((function(){var l,o,t,i=[];if(H.Z(j.Z("group"))(null!==(l=null===C||void 0===C?void 0:C.component_fields)&&void 0!==l?l:[]).map((function(e){i=[].concat((0,d.Z)(i),[{id:e.component_blueprint_id,selected_fields:X.Z($.Z("group",e.group))(C.component_fields)}])})),(null===g||void 0===g||null===(o=g.processModule)||void 0===o||null===(t=o.completeSteps)||void 0===t?void 0:t.length)>0){var u=[r.createElement("div",{key:0,style:{display:null!==e&&void 0!==e&&e.noHeader?"none":""}},M&&r.createElement("p",{className:me.detailLabel},x.display_name)),R?r.createElement("div",{key:1}):L()];if(g.processModule.completeSteps.map((function(e){e.component_blueprints.filter((function(e){var n,l;return 0==(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.asModuleList)||void 0==(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.asModuleList)})).map((function(n,l){var o,t,s,v,c,p,m=null!==(o=null===C||void 0===C||null===(t=C.component_fields)||void 0===t?void 0:t.filter((function(e){return e.component_blueprint_id===n.id})))&&void 0!==o?o:[],f=!(null===m||void 0===m||!m.find((function(e){return!(""===e.value||void 0===e.value||null===e.value)})));(null===m||void 0===m?void 0:m.length)>0&&(null===(s=n.selected_fields)||void 0===s?void 0:s.filter((function(e){return 1==e.visible})).length)>0&&(null!==n.options?!1!==n.options.allowMultipleInputs&&void 0!==n.options.allowMultipleInputs&&null!==n.options.allowMultipleInputs||(u=[].concat((0,d.Z)(u),[r.createElement("div",{key:u.length,style:{display:f?"":"none"}},r.createElement(Ke,{step:e,isInherited:!1,nextButtonClicked:function(){},isMandatoryError:!1,stepId:e.id,blueprintIndex:l,setIsMandatoryError:function(){},component:(0,a.Z)((0,a.Z)({},n),{},{created_date:C.created_date,values:null!==(v=null===(c=i.find((function(e){return e.id===n.id})))||void 0===c?void 0:c.selected_fields)&&void 0!==v?v:[]}),begunModule:g,allModules:b,companyData:x,components:i,allComponents:P,companyUsersArray:w,status:null===C||void 0===C?void 0:C.status,selectedComponent:C}))])):u=[].concat((0,d.Z)(u),[r.createElement("div",{key:u.length},r.createElement(Ke,{step:e,isInherited:!1,nextButtonClicked:function(){},isMandatoryError:!1,stepId:e.id,blueprintIndex:l,setIsMandatoryError:function(){},component:(0,a.Z)((0,a.Z)({},n),{},{created_date:C.created_date,values:null===(p=i.find((function(e){return e.id===n.id})))||void 0===p?void 0:p.selected_fields}),begunModule:g,allModules:b,companyData:x,components:i,allComponents:P,companyUsersArray:w,status:null===C||void 0===C?void 0:C.status,selectedComponent:C}))]))}))})),R)return void O(r.createElement(k.C6,{ref:n,begunModule:g,allModules:b,companyData:x,components:P,selectedComponent:C,setSelectedComponent:E,companyUsersArray:w,companyPositionsArray:Z,goto:D},u,r.createElement(en,{component:C}),r.createElement($e,{component:C})));O([].concat((0,d.Z)(u),[r.createElement(en,{component:C,key:u.length+1}),r.createElement($e,{component:C,key:u.length+2})]))}}),[C]);var L=function(){var e,n,l,o,t,d,u,s,v,c,p,m,f,_,y,b,E=null===g||void 0===g||null===(e=g.processModule)||void 0===e||null===(n=e.completeSteps)||void 0===n?void 0:n.find((function(e){return e.component_blueprints.filter((function(e){var n;return(null===(n=e.selected_fields)||void 0===n?void 0:n.filter((function(e){var n;return"item_code"===(null===(n=e.options)||void 0===n?void 0:n.mapToItem)||"Transactions Field"===e.data_type_name||"Template"===e.data_type_name})).length)>0})).length>0})),w=null!==(l=null!==(o=null!==(t=null===E||void 0===E||null===(d=E.component_blueprints)||void 0===d?void 0:d.find((function(e){var n;return(null===(n=e.selected_fields)||void 0===n?void 0:n.filter((function(e){var n;return"item_code"===(null===(n=e.options)||void 0===n?void 0:n.mapToItem)})).length)>0})))&&void 0!==t?t:null===E||void 0===E||null===(u=E.component_blueprints)||void 0===u?void 0:u.find((function(e){var n;return(null===(n=e.selected_fields)||void 0===n?void 0:n.filter((function(e){return"Transactions Field"===e.data_type_name})).length)>0})))&&void 0!==o?o:null===E||void 0===E||null===(s=E.component_blueprints)||void 0===s?void 0:s.find((function(e){var n;return(null===(n=e.selected_fields)||void 0===n?void 0:n.filter((function(e){return"Template"===e.data_type_name})).length)>0})))&&void 0!==l?l:void 0,Z=w?null===(v=w.selected_fields)||void 0===v||null===(c=v.find((function(e){return"Template"===e.data_type_name})))||void 0===c?void 0:c.field_name:"",M=null===x||void 0===x||null===(p=x.misc_info)||void 0===p||null===(m=p.templatesData)||void 0===m?void 0:m.find((function(e){return e.name===Z})),k=M?(null===M||void 0===M||null===(f=M.tlist)||void 0===f?void 0:f.length)>0?null===M||void 0===M?void 0:M.tlist:null===(_=M.config)||void 0===_?void 0:_.filter((function(e){return"Text"===e.value||"Number"===e.value||"Connector"===e.value})):w?w.selected_fields.filter((function(e){var n,l,o;return 1==e.visible&&!(""===(null===(n=e.options)||void 0===n?void 0:n.mapToItem)||void 0==(null===(l=e.options)||void 0===l?void 0:l.mapToItem)||null==(null===(o=e.options)||void 0===o?void 0:o.mapToItem))})):[];return(null===C||void 0===C||null===(y=C.component_items)||void 0===y?void 0:y.length)>0&&r.createElement("div",{className:me.accordionContainer,style:{border:h.tq?"0":"",marginTop:"10px",padding:h.tq?"10px":"",backgroundColor:"var(--app-color-gray-lightest)"}},r.createElement(S.default,{modern:!0,className:me.listContainer,isReport:!1,"app-variant-is-mobile":"true",title:"Items",columns:k?k.map((function(e){return M?e.label:e.field_name})):["Product ID","Quantity","Price"],list:null===C||void 0===C||null===(b=C.component_items)||void 0===b?void 0:b.map((function(e){var n,l,o,t,d,u,s,v,c,p,m,f,_,y,h,g,b,x,E,C,w,Z,S,I,P,N,T,D,z;if((null===M||void 0===M||null===(n=M.tlist)||void 0===n?void 0:n.length)>0){var U={};return M.tlist.filter((function(n){U=(0,a.Z)((0,a.Z)({},U),{},(0,i.Z)({},null===n||void 0===n?void 0:n.label,e[null===n||void 0===n?void 0:n.key]))})),U}var A=e.item_code,O=e.quantity,R=null!==(l=e.alt_value)&&void 0!==l?l:0,L=null!==(o=e.value)&&void 0!==o?o:0,W=null!==(t=e.total)&&void 0!==t?t:0;return void 0!=M?(h={},(0,i.Z)(h,null!==(d=null===(u=M.config.find((function(e){return"item_code"===e.key})))||void 0===u?void 0:u.label)&&void 0!==d?d:"Item Code",r.createElement("div",{className:me.templateInformation},A)),(0,i.Z)(h,null!==(s=null===(v=M.config.find((function(e){return"value"===e.key})))||void 0===v?void 0:v.label)&&void 0!==s?s:"Price",r.createElement("div",{className:me.templateInformation},L)),(0,i.Z)(h,null!==(c=null===(p=M.config.find((function(e){return"total"===e.key})))||void 0===p?void 0:p.label)&&void 0!==c?c:"Total",r.createElement("div",{className:me.templateInformation},W)),(0,i.Z)(h,null!==(m=null===(f=M.config.find((function(e){return"quantity"===e.key})))||void 0===f?void 0:f.label)&&void 0!==m?m:"Quantity",r.createElement("div",{className:me.templateInformation},O)),(0,i.Z)(h,null!==(_=null===(y=M.config.find((function(e){return"alt_value"===e.key})))||void 0===y?void 0:y.label)&&void 0!==_?_:"Discount",r.createElement("div",{className:me.templateInformation},R)),(0,i.Z)(h,"id",e.id),h):null!==k&&void 0!==k&&k.find((function(e){var n,l,o,t,i;return"item_code"===(null===(n=e.options)||void 0===n?void 0:n.mapToItem)||"value"===(null===(l=e.options)||void 0===l?void 0:l.mapToItem)||"total"===(null===(o=e.options)||void 0===o?void 0:o.mapToItem)||"quantity"===(null===(t=e.options)||void 0===t?void 0:t.mapToItem)||"alt_value"===(null===(i=e.options)||void 0===i?void 0:i.mapToItem)}))?(D={},(0,i.Z)(D,null!==(g=null===(b=k.find((function(e){var n;return"item_code"===(null===(n=e.options)||void 0===n?void 0:n.mapToItem)})))||void 0===b?void 0:b.field_name)&&void 0!==g?g:"Product ID",r.createElement("div",{className:me.templateInformation},A)),(0,i.Z)(D,null!==(x=null===(E=k.find((function(e){var n;return"value"===(null===(n=e.options)||void 0===n?void 0:n.mapToItem)})))||void 0===E?void 0:E.field_name)&&void 0!==x?x:"Price",r.createElement("div",{className:me.templateInformation},L)),(0,i.Z)(D,null!==(C=null===(w=k.find((function(e){var n;return"total"===(null===(n=e.options)||void 0===n?void 0:n.mapToItem)})))||void 0===w?void 0:w.field_name)&&void 0!==C?C:"Total",r.createElement("div",{className:me.templateInformation},W)),(0,i.Z)(D,null!==(Z=null===(S=k.find((function(e){var n;return"quantity"===(null===(n=e.options)||void 0===n?void 0:n.mapToItem)})))||void 0===S?void 0:S.field_name)&&void 0!==Z?Z:"Quantity",r.createElement("div",{className:me.templateInformation},O)),(0,i.Z)(D,null!==(I=null===(P=k.find((function(e){var n;return"alt_value"===(null===(n=e.options)||void 0===n?void 0:n.mapToItem)})))||void 0===P?void 0:P.field_name)&&void 0!==I?I:"Discount",r.createElement("div",{className:me.templateInformation},R)),(0,i.Z)(D,null!==(N=null===(T=k.find((function(e){var n;return"alt_value"===(null===(n=e.options)||void 0===n?void 0:n.mapToItem)})))||void 0===T?void 0:T.field_name)&&void 0!==N?N:"Actual",r.createElement("div",{className:me.templateInformation},R)),(0,i.Z)(D,"id",e.id),D):(z={},(0,i.Z)(z,"Product ID",A),(0,i.Z)(z,"Quantity",O),(0,i.Z)(z,"Price",L),z)})),onListItemClick:function(e){}}))},W=r.createElement("div",{style:{display:h.tq?"none":""}},((null===C||void 0===C||null===(t=C.shared_users)||void 0===t?void 0:t.length)>0||(null===C||void 0===C||null===(s=C.shared_positions)||void 0===s?void 0:s.length)>0)&&r.createElement("div",{className:me.accordionContainer},r.createElement("p",{className:me.cardTitle},"Shares"),r.createElement("div",{style:{display:"flex"}},(null===C||void 0===C||null===(v=C.shared_positions)||void 0===v?void 0:v.length)>0&&r.createElement(S.default,{className:me.sharesTable,columns:["Position"],list:null===C||void 0===C||null===(c=C.shared_positions)||void 0===c?void 0:c.map((function(e){var n,l=Z.find((function(n){return n.value===e.id}));return(0,i.Z)({},"Position",null!==(n=null===l||void 0===l?void 0:l.label)&&void 0!==n?n:"")}))}),(null===C||void 0===C||null===(p=C.shared_users)||void 0===p?void 0:p.length)>0&&r.createElement(S.default,{className:me.sharesTable,columns:["User"],list:null===C||void 0===C||null===(m=C.shared_users)||void 0===m?void 0:m.map((function(e){var n=w.find((function(n){return n.id===e.id}));return(0,i.Z)({},"User","".concat(null===n||void 0===n?void 0:n.first_name," ").concat(null===n||void 0===n?void 0:n.last_name))}))}))));return r.createElement("div",{ref:n,style:{userSelect:"none",padding:M?"50px 120px 50px 100px":"50px 10px 10px 10px",alignSelf:"center",width:"100%"}},A,(null===g||void 0===g||null===(f=g.processModule)||void 0===f||null===(_=f.module)||void 0===_||null===(y=_.options)||void 0===y?void 0:y.forSpecificUsers)&&W)})),Ye=function(e){var n,l,o,t,i,s,v,c,p,f,_,g,b,x,E,w,Z,M,S,k,P,N,T,D=e.allModules,z=e.component,A=e.blueprintIndex,O=e.nextButtonClicked,R=e.setIsMandatoryError,L=e.companyUsersArray,W=e.companyData,q=e.components,F=e.products,Y=e.authenticatedUser,H=e.begunModule,j=e.blueprints,V=e.selectedComponent,J=e.companyPositionsArray,G=e.editMode,Q=e.isProcessorOnly,K=e.shouldDisplay,X=void 0===K?(!1===(null===z||void 0===z||null===(n=z.options)||void 0===n?void 0:n.useCustomTemplate)||void 0===(null===z||void 0===z||null===(l=z.options)||void 0===l?void 0:l.useCustomTemplate))&&(void 0===(null===z||void 0===z||null===(o=z.options)||void 0===o?void 0:o.showOnly)||(!((null===z||void 0===z||null===(t=z.options)||void 0===t||null===(i=t.showOnly)||void 0===i?void 0:i.length)>0)||(null===z||void 0===z||null===(s=z.options)||void 0===s||null===(v=s.showOnly)||void 0===v?void 0:v.filter((function(e){var n;return(null===Y||void 0===Y||null===(n=Y.positions)||void 0===n?void 0:n.filter((function(n){return n.id===e})).length)>0})).length)>0)):K,ee=e.isEnabled,ne=void 0===ee?void 0===(null===V||void 0===V?void 0:V.id)||((null===V||void 0===V||null===(c=V.created_by)||void 0===c?void 0:c.id)===Y.id||(void 0===(null===H||void 0===H||null===(p=H.processModule)||void 0===p||null===(f=p.module)||void 0===f||null===(_=f.options)||void 0===_?void 0:_.strict)||0==(null===H||void 0===H||null===(g=H.processModule)||void 0===g||null===(b=g.module)||void 0===b||null===(x=b.options)||void 0===x?void 0:x.strict)||void 0!==(null===z||void 0===z||null===(E=z.options)||void 0===E?void 0:E.showOnly)&&((null===z||void 0===z||null===(w=z.options)||void 0===w||null===(Z=w.showOnly)||void 0===Z?void 0:Z.length)>0&&(null===z||void 0===z||null===(M=z.options)||void 0===M||null===(S=M.showOnly)||void 0===S?void 0:S.filter((function(e){var n;return(null===Y||void 0===Y||null===(n=Y.positions)||void 0===n?void 0:n.filter((function(n){return n.id===e})).length)>0})).length)>0))):ee,le=(0,m.pQ)(),oe=(0,u.Z)(le,2),te=oe[0],ie=oe[1],de=(0,r.useState)(me.active),ae=(0,u.Z)(de,2),ue=ae[0],re=(ae[1],(0,r.useState)(!1)),se=(0,u.Z)(re,2),ve=se[0],ce=se[1],pe=(0,r.useState)(""),fe=(0,u.Z)(pe,2),_e=fe[0],ye=fe[1],he=(0,r.useRef)(null),ge=null===(k=te.currentStep)||void 0===k?void 0:k.component_blueprints.findIndex((function(e){return e.id===z.id}));(0,r.useEffect)((function(){be()}),[O]);var be=function(){var e;null!==z&&void 0!==z&&null!==(e=z.selected_fields)&&void 0!==e&&e.some((function(e){var n;return!0===e.mandatory&&!0===e.visible&&(!e.value||(null===e||void 0===e||null===(n=e.value)||void 0===n?void 0:n.length)<1)}))?R(!0):R(!1)},Ee=(0,r.useCallback)((function(){var e,n,l,o=(0,d.Z)(null!==(e=null===(n=te.currentStep)||void 0===n?void 0:n.component_blueprints)&&void 0!==e?e:[]),t=null===(l=o[ge])||void 0===l?void 0:l.selected_fields;be(),o[ge].selected_fields=null===t||void 0===t?void 0:t.map((function(e){return(0,a.Z)((0,a.Z)({},e),{},{errors:!0!==e.mandatory||e.value?"":"Field is mandatory"})})),ie({action:m._U.setComponentBlueprints,value:o}),ie({action:m._U.setModuleNewStepComponents,value:o})}),[te.currentStep]),Ce=function(e,n){var l,o,t,i=(0,d.Z)(null!==(l=null===(o=te.currentStep)||void 0===o?void 0:o.component_blueprints)&&void 0!==l?l:[]),a=null===(t=i[ge])||void 0===t?void 0:t.selected_fields[n];"Number"===(null===a||void 0===a?void 0:a.data_type_name)?Number(+e)?a.value=e:""===e&&(a.value=""):null!==a&&void 0!==a&&a.data_type_name&&(a.value=e),null!==a&&void 0!==a&&a.value&&a.mandatory&&(a.errors=""),be(),ie({action:m._U.setComponentBlueprints,value:i}),ie({action:m._U.setModuleNewStepComponents,value:i})},we=(0,r.useCallback)((function(e,n,l){var o,t,i,a=(0,d.Z)(null!==(o=null===(t=te.currentStep)||void 0===t?void 0:t.component_blueprints)&&void 0!==o?o:[]),u=null===(i=a[ge])||void 0===i?void 0:i.selected_fields[n];u.options.country_code=null===e||void 0===e?void 0:e.countryCode,u.options.country_name=null===e||void 0===e?void 0:e.name,u.options.country_prefix="+".concat(null===e||void 0===e?void 0:e.dialCode),ie({action:m._U.setComponentBlueprints,value:a}),ie({action:m._U.setModuleNewStepComponents,value:a}),Ce(l,n)}),[te]),Ze=(0,r.useCallback)((function(e,n){var l,o,t,i=(0,d.Z)(null!==(l=null===(o=te.currentStep)||void 0===o?void 0:o.component_blueprints)&&void 0!==l?l:[]),a=null===(t=i[ge])||void 0===t?void 0:t.selected_fields[n];a.options.currency_type=null===e||void 0===e?void 0:e.label,a.options.currency_value=null===e||void 0===e?void 0:e.value,a.options.symbol=null===e||void 0===e?void 0:e.symbol,ie({action:m._U.setComponentBlueprints,value:i}),ie({action:m._U.setModuleNewStepComponents,value:i})}),[te]),Me=z.selected_fields.filter((function(e){return"Transaction List"===e.data_type_name||"Step List"===e.data_type_name||"Pin"===e.data_type_name})).length>0;return r.createElement("div",{id:"accordion",className:me.accordionModuleContainer,key:A,style:{width:Me?"100%":"",border:Q&&ne?"4px solid var(--app-color-gray-lighter)":Me?"0":"",boxShadow:h.tq?Me?"0 var(--app-color-white-lightest)":"":1==(null===C.Nbs||void 0===C.Nbs||null===(P=C.Nbs.options)||void 0===P?void 0:P.popup)?"0 var(--app-color-white-lightest)":"",display:X?"":"none",pointerEvents:ne?"":"none"}},r.createElement("div",{className:xe()(me.accordionContainer,ue),"app-variant-has-error":_e?"error":"",style:{border:h.tq?"0":"",padding:h.tq?"0":"",margin:h.tq?"0":""}},r.createElement("div",{ref:he,style:{maxHeight:ue===me.active?"":"0px",display:"flex"},className:me.content},r.createElement(Ve,{blueprints:j,component:z,selectedComponent:V,handleInputChange:Ce,handlePrefixChange:we,handleCurrencyChange:Ze,checkIfAreMandatoryErrored:be,handleCheckbox:function(e,n){var l,o,t,i=(0,d.Z)(null!==(l=null===(o=te.currentStep)||void 0===o?void 0:o.component_blueprints)&&void 0!==l?l:[]),a=null===(t=i[ge])||void 0===t?void 0:t.selected_fields[n];a&&(a.value=e,null!==a&&void 0!==a&&a.value&&a.mandatory&&(a.errors=""),ie({action:m._U.setComponentBlueprints,value:i}),ie({action:m._U.setModuleNewStepComponents,value:i}),be())},isInherited:!1,indexInContextArray:ge,handleLocationChange:function(e,n){var l,o,t,i=(0,d.Z)(null!==(l=null===(o=te.currentStep)||void 0===o?void 0:o.component_blueprints)&&void 0!==l?l:[]);(null===(t=i[ge])||void 0===t?void 0:t.selected_fields[n]).value="".concat(e.lat,", ").concat(e.lng),ie({action:m._U.setComponentBlueprints,value:i}),ie({action:m._U.setModuleNewStepComponents,value:i})},processTaskContext:te,begunModule:H,setTaskProcessContext:ie,companyData:W,companyUsersArray:L,companyPositionsArray:J,components:q,products:F,allModules:D,editMode:G})),r.createElement("div",{style:{paddingLeft:"10px"}},r.createElement("div",{onClick:function(){var e;if(Ee(),null===z||void 0===z||null===(e=z.selected_fields)||void 0===e||!e.some((function(e){var n;return!0===e.mandatory&&!0===e.visible&&(!e.value||(null===e||void 0===e||null===(n=e.value)||void 0===n?void 0:n.length)<1)}))){var n={},l=z.selected_fields.map((function(e){var l,o;if("Formula"===e.data_type_name){var t,i,d,u,r=(0,U.LV)(e.options,z.selected_fields.filter((function(n){return e.options.list.includes(n.field_name)})),te.components,null!==(t=te.items)&&void 0!==t?t:[],null!==(i=null===te||void 0===te?void 0:te.newStepComponents)&&void 0!==i?i:[]);if(null!==e&&void 0!==e&&null!==(d=e.options)&&void 0!==d&&d.mapToItem)n[null===e||void 0===e||null===(u=e.options)||void 0===u?void 0:u.mapToItem]="".concat(r);return(0,a.Z)((0,a.Z)({},e),{},{value:"".concat(r)})}null!==e&&void 0!==e&&null!==(l=e.options)&&void 0!==l&&l.mapToItem&&(n[null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.mapToItem]="".concat(null===e||void 0===e?void 0:e.value));return e}));if(Object.keys(n).length>0){var o,t=null===(o=te.items)||void 0===o?void 0:o.find((function(e){return e.item_code===n.item_code}));void 0===t?ie({action:m._U.addModuleItems,value:(0,a.Z)((0,a.Z)({},n),{},{id:(0,U.mR)()})}):0==n.quantity?ie({action:m._U.removeModuleItems,value:t}):ie({action:m._U.updateModuleItems,value:(0,a.Z)((0,a.Z)({},t),n)})}else{var i=JSON.parse(JSON.stringify((0,a.Z)((0,a.Z)({},z),{},{temp_id:(0,U.mR)(),selected_fields:l})));ie({action:m._U.addModuleComponents,value:i})}ce(!1),ye(""),z.selected_fields.map((function(e,n){Ce("",n)})),ie({action:m._U.setModuleNewStepComponents,value:(0,d.Z)(B.Z((function(e){return e.selected_fields.filter((function(e){return""===e.value})).length>0}),(0,d.Z)(B.Z($.Z("id",z.id))(te.newStepComponents))))})}},className:me.iconsContainer,style:{display:null===(null===z||void 0===z?void 0:z.options)?"none":!0===(null===z||void 0===z||null===(N=z.options)||void 0===N?void 0:N.allowMultipleInputs)?"":"none"}},ve?r.createElement("div",{className:me.loaderContainer},r.createElement(Se.Z,{type:h.G6?"Watch":"Puff",color:"var(--app-color-gray-dark)",secondaryColor:"gray",radius:32,height:32,width:"32px"})):r.createElement(y.zx,{light:!0},r.createElement(C.mm_,null))))),_e&&(null===_e||void 0===_e||null===(T=_e.errors)||void 0===T?void 0:T.title)&&r.createElement(I.Z,{message:_e.errors.title}),_e&&(null===_e||void 0===_e?void 0:_e.message)&&r.createElement(I.Z,{message:_e.message}))};function He(e){return null!==e&&void 0!==e&&e.country_prefix?null===e||void 0===e?void 0:e.country_prefix:null!==e&&void 0!==e&&e.currency_value?(null===e||void 0===e?void 0:e.currency_value)+" ":""}var je=function(e,n,l,o,t){var i,a,u,r=null===(u=(0,d.Z)(null!==(i=null===(a=t.currentStep)||void 0===a?void 0:a.component_blueprints)&&void 0!==i?i:[])[l])||void 0===u?void 0:u.selected_fields[o];switch(e){case"Link":!function(e){var n;try{n=new URL(e)}catch(l){return!1}return"http:"===n.protocol||"https:"===n.protocol}(n)?r.errors="This field should contain a link!":r.errors="";break;case"E-mail":case"Email":new RegExp(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/).test(n)?r.errors="":r.errors="This field should contain an valid email address!";break;case"Phone":new RegExp(/^[+]?[(]?[0-9]{3}[)]?[-\s.]?[0-9]{3}[-\s.]?[0-9]{4,6}$/im).test(n)?r.errors="":r.errors="This field should contain an valid phone number!";break;case"Email Recipient":new RegExp(/^([a-z0-9!#$%&'*+/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*)(([, ]+[a-z0-9!#$%&'*+/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])\.([a-z0-9]([a-z0-9-]*[a-z0-9]))*)?)*$/).test(n)?r.errors="":r.errors="This field should contain an valid email address!"}},Ve=(0,r.memo)((function(e){var n,l,p,f,_,g=e.component,b=e.selectedComponent,x=e.handleInputChange,E=e.indexInContextArray,w=e.handleCheckbox,M=e.processTaskContext,k=e.setTaskProcessContext,I=e.isInherited,T=e.checkIfAreMandatoryErrored,D=e.handlePrefixChange,z=e.handleCurrencyChange,O=e.handleLocationChange,R=e.companyData,F=e.components,Y=e.begunModule,Q=e.blueprints,K=e.companyUsersArray,X=e.companyPositionsArray,$=e.allModules,ie=e.editMode,ue=(0,r.useState)(K.map((function(e){return{label:e.first_name+" "+e.last_name,value:e.id,user:e}}))),re=(0,u.Z)(ue,2),_e=re[0],be=re[1],xe=(0,s.v9)((function(e){return e.authReducer})),Ce=xe.authenticatedUser,Se=(0,s.v9)((function(e){return e.sessionReducer})),Oe=Se.user,Re=(0,s.v9)((function(e){return e.flowReducer})),Fe=Re.currentLocation,Be=Re.allTasks,Ye=(0,r.useState)(!1),Ve=(0,u.Z)(Ye,2),Ge=Ve[0],Ke=Ve[1],Xe=(0,r.useState)(new Date),$e=(0,u.Z)(Xe,2),en=$e[0],ln=$e[1],on=(0,r.useState)([new Date,new Date(ae()().add(7,"days"))]),tn=(0,u.Z)(on,2),dn=tn[0],an=tn[1],un=(0,u.Z)(dn,2),rn=un[0],sn=un[1],vn=(0,r.useState)(""),cn=(0,u.Z)(vn,2),pn=cn[0],mn=cn[1],fn=(0,r.useState)([{label:"",value:""}]),_n=(0,u.Z)(fn,2),yn=_n[0],hn=_n[1],gn=(0,r.useState)(!0),bn=(0,u.Z)(gn,2),xn=bn[0],En=bn[1],Cn=(0,r.useState)(!0),wn=(0,u.Z)(Cn,2),Zn=wn[0],Mn=wn[1],Sn=(0,r.useState)({source:!1,destination:!1}),kn=(0,u.Z)(Sn,2),In=kn[0],Pn=kn[1],Nn=(0,r.useState)("50px"),Tn=(0,u.Z)(Nn,2),Dn=Tn[0],zn=Tn[1],Un=(0,r.useState)(Array(12).fill("")),An=(0,u.Z)(Un,2),On=An[0],Rn=An[1],Ln=(0,r.useState)({candidates:[]}),Wn=(0,u.Z)(Ln,2),qn=Wn[0],Fn=Wn[1],Bn=(0,r.useState)(!1),Yn=(0,u.Z)(Bn,2),Hn=Yn[0],jn=Yn[1],Vn=(0,r.useState)({}),Jn=(0,u.Z)(Vn,2),Gn=Jn[0],Qn=Jn[1],Kn=(0,r.useState)("day"),Xn=(0,u.Z)(Kn,2),$n=Xn[0],el=Xn[1],nl=(0,r.useState)({}),ll=(0,u.Z)(nl,2),ol=ll[0],tl=ll[1],il=((0,r.useRef)(),(0,r.useState)(!1)),dl=(0,u.Z)(il,2),al=dl[0],ul=dl[1],rl=function(){ul(!al)},sl=function(e,n){ln(e),x(e,n)},vl=(0,r.useCallback)((function(e){void 0!==e&&(0==_e.length?Ke(!0):Ke(!1),(0,Ee.n0)(e).pipe((0,v.P)()).subscribe({next:function(e){be(e),Ke(!1)}}))}),[]),cl=(0,r.useCallback)((function(){0==X.length?Ke(!0):Ke(!1),(0,Z.hj)().pipe((0,v.P)(1)).subscribe({})}),[]),pl=(0,r.useCallback)((function(e){var n;if(0!=(null===e||void 0===e||null===(n=e.analyze)||void 0===n?void 0:n.length)&&void 0!=(null===e||void 0===e?void 0:e.analyze)){var l={role:"user",parts:[{text:e.analyze}]};1==(null===e||void 0===e?void 0:e.current)?l.parts=[].concat((0,d.Z)(l.parts),[{text:JSON.stringify({table:"Transaction",data:(0,a.Z)((0,a.Z)((0,a.Z)({},M.components.map((function(e){var n={};return e.selected_fields.filter((function(e){return n=(0,a.Z)((0,a.Z)({},n),{},(0,i.Z)({},e.field_name,e.value))})),n}))),M.newStepComponents.map((function(e){var n={};return e.selected_fields.filter((function(e){return n=(0,a.Z)((0,a.Z)({},n),{},(0,i.Z)({},e.field_name,e.value))})),n}))),{},{items:M.items.map((function(e){return{item:e.item_code,quantity:+e.quantity,value:e.value}}))})})}]):(void 0!==e.module_id&&(l.parts=[].concat((0,d.Z)(l.parts),[{text:JSON.stringify({table:$.find((function(n){return n.id===e.module_id})).name,data:F.filter((function(n){return n.module_id===e.module_id})).map((function(e){var n,l={};return e.component_fields.filter((function(e){return l=(0,a.Z)((0,a.Z)({},l),{},(0,i.Z)({},e.field_name,e.value))})),(0,a.Z)((0,a.Z)({},l),{},{created_date:e.created_date,created_by:null===(n=e.created_by)||void 0===n?void 0:n.id,items:null===e||void 0===e?void 0:e.component_items.map((function(e){return{item:e.item_code,quantity:+e.quantity,value:e.value}}))})}))})}])),void 0!==e.module2_id&&(l.parts=[].concat((0,d.Z)(l.parts),[{text:JSON.stringify({table:$.find((function(n){return n.id===e.module2_id})).name,data:F.filter((function(n){return n.module_id===e.module2_id})).map((function(e){var n,l={};return e.component_fields.filter((function(e){return l=(0,a.Z)((0,a.Z)({},l),{},(0,i.Z)({},e.field_name,e.value))})),(0,a.Z)((0,a.Z)({},l),{},{created_date:e.created_date,created_by:null===(n=e.created_by)||void 0===n?void 0:n.id,items:null===e||void 0===e?void 0:e.component_items.map((function(e){return{item:e.item_code,quantity:+e.quantity,value:e.value}}))})}))})}])),void 0!==e.module3_id&&(l.parts=[].concat((0,d.Z)(l.parts),[{text:JSON.stringify({table:$.find((function(n){return n.id===e.module3_id})).name,data:F.filter((function(n){return n.module_id===e.module3_id})).map((function(e){var n,l={};return e.component_fields.filter((function(e){return l=(0,a.Z)((0,a.Z)({},l),{},(0,i.Z)({},e.field_name,e.value))})),(0,a.Z)((0,a.Z)({},l),{},{created_date:e.created_date,created_by:null===(n=e.created_by)||void 0===n?void 0:n.id,items:null===e||void 0===e?void 0:e.component_items.map((function(e){return{item:e.item_code,quantity:+e.quantity,value:e.value}}))})}))})}]))),Fn({candidates:[]}),Ke(!0),(0,ge.hd)(JSON.stringify(l)).pipe((0,v.P)()).subscribe({next:function(e){Ke(!1),Fn(e)},error:function(e){Fn({candidates:[{content:{parts:[{text:JSON.stringify(e)}]}}]}),Ke(!1)}})}else Fn({candidates:[{content:{parts:[{text:"Enter a question that I could answer"}]}}]})}),[]),ml=function(e){var n;return null===M||void 0===M||null===(n=M.items)||void 0===n?void 0:n.map((function(n){var l={};return Object.keys(e.map).map((function(o){var t;l=(0,a.Z)((0,a.Z)({},l),{},(t={},(0,i.Z)(t,e.map[o],n[o]),(0,i.Z)(t,"item",n),t))})),l}))},fl=function(e){var n=e.field_name;return g.selected_fields.findIndex((function(e){return e.field_name===n}))},_l=function(e){var n=g.selected_fields.filter((function(e){return"Info"===e.data_type_name})),l=F.find((function(n){return n.id===e}));n.map((function(n){var o;null===n||void 0===n||null===(o=n.options)||void 0===o||o.list.map((function(o){var t,i,d=null===(t=l.component_fields)||void 0===t?void 0:t.find((function(e){return e.field_name===o})),a=fl({field_name:o});-1!=a&&(null===(i=l.component_fields)||void 0===i?void 0:i.length)>0&&(g.selected_fields[a].value=d?d.value:"",n.value=e)}))})),g.selected_fields.filter((function(e){return"Global"===e.data_type_name&&1==e.visible})).map((function(e){var n,o,t=null===(n=l.component_fields)||void 0===n?void 0:n.find((function(n){return n.field_name===e.field_name})),i=fl({field_name:e.field_name});-1!=i&&(null===(o=l.component_fields)||void 0===o?void 0:o.length)>0&&t&&(g.selected_fields[i].value=null===t||void 0===t?void 0:t.value)}))},yl=function(e){var n,l,o,t,i,d,a,u=null===(n=Y.processModule.module)||void 0===n||null===(l=n.options)||void 0===l?void 0:l.global;u||(u=null===(o=M.components.find((function(n){return n.selected_fields.filter((function(n){var l,o;return"Global"===n.data_type_name&&1==n.visible&&n.field_name===(null===(l=g.selected_fields.find((function(n){return n.data_type_name===e&&1==n.visible})))||void 0===l||null===(o=l.options)||void 0===o?void 0:o.global)})).length>0})))||void 0===o||null===(t=o.selected_fields.find((function(e){return"Global"===e.data_type_name})))||void 0===t?void 0:t.value);u||(u=null===(i=L.Z(W.Z("component_blueprints"),q.Z)(Y.processModule.completeSteps).find((function(n){return n.selected_fields.filter((function(n){var l,o;return n.field_name===(null===(l=g.selected_fields.find((function(n){return n.data_type_name===e&&1==n.visible})))||void 0===l||null===(o=l.options)||void 0===o?void 0:o.global)&&"Value"===n.data_type_name})).length>0})))||void 0===i||null===(d=i.selected_fields.find((function(e){return"Value"===e.data_type_name})))||void 0===d||null===(a=d.options)||void 0===a?void 0:a.value);return u?F.filter((function(n){return n.component_fields.filter((function(n){var l,o;return n.value===u&&n.field_name===(null===(l=g.selected_fields.find((function(n){return n.data_type_name===e})))||void 0===l||null===(o=l.options)||void 0===o?void 0:o.global)})).length>0})):F},hl=(null===g||void 0===g||null===(n=g.selected_fields)||void 0===n?void 0:n.length)>0&&(null===g||void 0===g||null===(l=g.selected_fields)||void 0===l?void 0:l.sort((function(e,n){return e.index-n.index})).map((function(e,n){var l,s,p,f,_,$,ue,re,ge,xe,Se,Re,Ye,Ve,Xe,$e,on,tn,dn,un,vn,cn,fn,_n,gn,bn,Cn,wn,Sn,kn,Nn,Tn,Un,An,Ln,Wn,Bn,Yn,Vn,Jn,Kn,Xn,nl,ll,il,dl,ul,hl,gl,bl,xl,El,Cl,wl,Zl,Ml,Sl,kl,Il,Pl="";if((null===e||void 0===e||null===(l=e.options)||void 0===l||null===(s=l.fieldToMatch)||void 0===s?void 0:s.length)>0){var Nl,Tl,Dl,zl,Ul,Al,Ol,Rl,Ll,Wl,ql,Fl,Bl,Yl,Hl,jl,Vl,Jl,Gl,Ql,Kl,Xl,$l,eo,no=g.selected_fields.find((function(n){var l;return n.field_name===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.fieldToMatch)}));if(no&&(null===e||void 0===e||null===(Nl=e.options)||void 0===Nl||null===(Tl=Nl.valueToMatch)||void 0===Tl?void 0:Tl.length)>0&&(null===e||void 0===e||null===(Dl=e.options)||void 0===Dl||null===(zl=Dl.actionToPerform)||void 0===zl?void 0:zl.length)>0&&(null===e||void 0===e||null===(Ul=e.options)||void 0===Ul||null===(Al=Ul.initialState)||void 0===Al?void 0:Al.length)>0)if(null!==e&&void 0!==e&&null!==(Ll=e.options)&&void 0!==Ll&&null!==(Wl=Ll.valueToMatch)&&void 0!==Wl&&Wl.split(",").includes(null===no||void 0===no?void 0:no.value))"hide"===(null===e||void 0===e||null===(ql=e.options)||void 0===ql?void 0:ql.actionToPerform)?e.visible=!1:"visible"===(null===e||void 0===e||null===(Fl=e.options)||void 0===Fl?void 0:Fl.actionToPerform)?e.visible=!0:"mandatory"===(null===e||void 0===e||null===(Bl=e.options)||void 0===Bl?void 0:Bl.actionToPerform)?(e.mandatory=!0,e.visible=!0):"optional"===(null===e||void 0===e||null===(Yl=e.options)||void 0===Yl?void 0:Yl.actionToPerform)?(e.mandatory=!1,e.visible=!0):"visman"===(null===e||void 0===e||null===(Hl=e.options)||void 0===Hl?void 0:Hl.actionToPerform)?(e.mandatory=!0,e.visible=!0):"disable"===(null===e||void 0===e||null===(jl=e.options)||void 0===jl?void 0:jl.actionToPerform)&&(Pl="none");else"hidden"===(null===e||void 0===e||null===(Vl=e.options)||void 0===Vl?void 0:Vl.initialState)?e.visible=!1:"visible"===(null===e||void 0===e||null===(Jl=e.options)||void 0===Jl?void 0:Jl.initialState)?e.visible=!0:"mandatory"===(null===e||void 0===e||null===(Gl=e.options)||void 0===Gl?void 0:Gl.initialState)?(e.mandatory=!0,e.visible=!0):"optional"===(null===e||void 0===e||null===(Ql=e.options)||void 0===Ql?void 0:Ql.initialState)?(e.mandatory=!1,e.visible=!0):"visman"===(null===e||void 0===e||null===(Kl=e.options)||void 0===Kl?void 0:Kl.actionToPerform)?(e.mandatory=!0,e.visible=!0):"disable"===(null===e||void 0===e||null===(Xl=e.options)||void 0===Xl?void 0:Xl.actionToPerform)&&(Pl="none");if(no&&(null===e||void 0===e||null===(Ol=e.options)||void 0===Ol||null===(Rl=Ol.valueToMatch2)||void 0===Rl?void 0:Rl.length)>0)if(null!==e&&void 0!==e&&null!==($l=e.options)&&void 0!==$l&&null!==(eo=$l.valueToMatch2)&&void 0!==eo&&eo.split(",").includes(null===no||void 0===no?void 0:no.value)){var lo,oo,to,io,ao,uo,ro,so,vo,co,po,mo;if((null===e||void 0===e||null===(lo=e.options)||void 0===lo||null===(oo=lo.value)||void 0===oo?void 0:oo.length)>0)if("Text"===(null===e||void 0===e?void 0:e.data_type_name))e.value=null===e||void 0===e||null===(ao=e.options)||void 0===ao?void 0:ao.value;else if("Date"===(null===e||void 0===e?void 0:e.data_type_name)){var fo,_o,yo,ho,go,bo;if(0==(null===e||void 0===e||null===(fo=e.value)||void 0===fo?void 0:fo.length)||void 0==(null===e||void 0===e?void 0:e.value))"today"===(null===e||void 0===e||null===(_o=e.options)||void 0===_o?void 0:_o.value)?e.value=new Date(ae()((0,de.now)())):"tomorrow"===(null===e||void 0===e||null===(yo=e.options)||void 0===yo?void 0:yo.value)?e.value=new Date(ae()((0,de.now)()).add(1,"days")):"week"===(null===e||void 0===e||null===(ho=e.options)||void 0===ho?void 0:ho.value)?e.value=new Date(ae()((0,de.now)()).add(1,"weeks")):"month"===(null===e||void 0===e||null===(go=e.options)||void 0===go?void 0:go.value)&&(e.value=new Date(ae()((0,de.now)()).add(1,"months"))),"none"===(null===e||void 0===e||null===(bo=e.options)||void 0===bo?void 0:bo.value)&&(e.value=void 0)}if((null===e||void 0===e||null===(to=e.options)||void 0===to||null===(io=to.actionToPerform2)||void 0===io?void 0:io.length)>0)"hide"===(null===e||void 0===e||null===(uo=e.options)||void 0===uo?void 0:uo.actionToPerform2)?e.visible=!1:"visible"===(null===e||void 0===e||null===(ro=e.options)||void 0===ro?void 0:ro.actionToPerform2)?e.visible=!0:"mandatory"===(null===e||void 0===e||null===(so=e.options)||void 0===so?void 0:so.actionToPerform2)?(e.mandatory=!0,e.visible=!0):"optional"===(null===e||void 0===e||null===(vo=e.options)||void 0===vo?void 0:vo.actionToPerform2)?(e.mandatory=!1,e.visible=!0):"visman"===(null===e||void 0===e||null===(co=e.options)||void 0===co?void 0:co.actionToPerform2)?(e.mandatory=!0,e.visible=!0):"disable"===(null===e||void 0===e||null===(po=e.options)||void 0===po?void 0:po.actionToPerform2)?Pl="none":"enable"===(null===e||void 0===e||null===(mo=e.options)||void 0===mo?void 0:mo.actionToPerform2)&&(Pl="")}}if("Record"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(p=e.options)||void 0===p||null===(f=p.component_id)||void 0===f?void 0:f.length)>0){var xo,Eo,Co,wo,Zo,Mo,So,ko,Io,Po,No,To,Do,zo,Uo,Ao,Oo,Ro,Lo,Wo,qo,Fo,Bo,Yo,Ho,jo,Vo,Jo,Go,Qo,Ko,Xo,$o,et,nt,lt,ot,tt,it,dt,at,ut,rt=(null!==e&&void 0!==e&&null!==(xo=e.options)&&void 0!==xo&&xo.global?yl(null===e||void 0===e?void 0:e.data_type_name):F).filter((function(n){var l;return n.component_fields.filter((function(n){var l;return n.component_blueprint_id===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.component_id)})).length>0||n.module_id===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.module_id)})),st=rt.map((function(n){var l,o,t,d,a="";return null===e||void 0===e||null===(l=e.options)||void 0===l||null===(o=l.names)||void 0===o||o.map((function(e){var l,o;return a=""===a?null===(l=n.component_fields.find((function(n){return n.field_name===e})))||void 0===l?void 0:l.value:"".concat(a," ").concat(null===(o=n.component_fields.find((function(n){return n.field_name===e})))||void 0===o?void 0:o.value)})),(0,i.Z)({label:""===a?n.title:a,value:n.id,component:n},null===e||void 0===e||null===(t=e.options)||void 0===t?void 0:t.output,null===(d=n.component_fields.find((function(n){var l;return n.field_name===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.output)})))||void 0===d?void 0:d.value)}));if((null===e||void 0===e||null===(Eo=e.options)||void 0===Eo||null===(Co=Eo.filters)||void 0===Co?void 0:Co.length)>0){if((null===rt||void 0===rt?void 0:rt.length)>0)if(e.value){if(ut=rt.find((function(n){return n.component_fields.find((function(n){var l;return n.field_name===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.output)&&n.value===e.value}))}))){var vt,ct,pt;_l(null===(vt=ut)||void 0===vt?void 0:vt.id);var mt=(0,d.Z)(null!==(ct=null===(pt=M.currentStep)||void 0===pt?void 0:pt.component_blueprints)&&void 0!==ct?ct:[]);mt&&(M.newStepComponents=mt)}}else if(1==st.length&&(ut=rt[0])){var ft,_t,yt;_l(null===(ft=ut)||void 0===ft?void 0:ft.id);var ht=(0,d.Z)(null!==(_t=null===(yt=M.currentStep)||void 0===yt?void 0:yt.component_blueprints)&&void 0!==_t?_t:[]);ht&&(M.newStepComponents=ht)}if(1==st.length||e.value){var gt,bt,xt,Et;if((null===e||void 0===e||null===(gt=e.options)||void 0===gt?void 0:gt.filters.length)>0)yn[null===e||void 0===e||null===(xt=e.options)||void 0===xt?void 0:xt.filters[0]]=H.Z(j.Z("value"))(rt.map((function(n){var l=null===n||void 0===n?void 0:n.component_fields.find((function(n){var l;return n.field_name===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.filters[1])}));return{label:null===l||void 0===l?void 0:l.value,value:null===l||void 0===l?void 0:l.value,component:n}})).filter((function(n){var l;return(null===(l=n.component)||void 0===l?void 0:l.component_fields.filter((function(n){var l,o;return n.value===(null===(l=ut)||void 0===l||null===(o=l.component_fields.find((function(n){var l;return n.field_name===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.filters[0])})))||void 0===o?void 0:o.value)})).length)>0})));if((null===e||void 0===e||null===(bt=e.options)||void 0===bt?void 0:bt.filters.length)>1)yn[null===e||void 0===e||null===(Et=e.options)||void 0===Et?void 0:Et.filters[1]]=H.Z(j.Z("value"))(rt.map((function(n){var l=n.component_fields.find((function(n){var l;return n.field_name===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.filters[2])}));return{label:null===l||void 0===l?void 0:l.value,value:null===l||void 0===l?void 0:l.value,component:n}})).filter((function(n){var l;return(null===(l=n.component)||void 0===l?void 0:l.component_fields.filter((function(n){var l,o;return n.value===(null===(l=ut)||void 0===l||null===(o=l.component_fields.find((function(n){var l;return n.field_name===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.filters[1])})))||void 0===o?void 0:o.value)})).length)>0})))}}else if(st.length>0)if(e.value){if(ut=null===st||void 0===st?void 0:st.find((function(n){var l;return n[null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.output]===e.value}))){var Ct,wt;_l(ut.value);var Zt=(0,d.Z)(null!==(Ct=null===(wt=M.currentStep)||void 0===wt?void 0:wt.component_blueprints)&&void 0!==Ct?Ct:[]);Zt&&(M.newStepComponents=Zt)}}else if(1==st.length&&1==(null===e||void 0===e?void 0:e.mandatory)&&(ut=st[0])){var Mt,St;_l(ut.value);var kt=(0,d.Z)(null!==(Mt=null===(St=M.currentStep)||void 0===St?void 0:St.component_blueprints)&&void 0!==Mt?Mt:[]);kt&&(M.newStepComponents=kt)}return!ut&&null!==e&&void 0!==e&&e.value?r.createElement("div",{key:n},"A record ( ".concat(null===e||void 0===e?void 0:e.value," ) was previously selected but not found. Press the refresh button on the upper right side to retrieve the missing record. If record is still not found, please check with your admin.")):(null===e||void 0===e||null===(wo=e.options)||void 0===wo||null===(Zo=wo.filters)||void 0===Zo?void 0:Zo.length)>0?r.createElement("div",{key:n,style:{width:"100%",display:null!==e&&void 0!==e&&e.visible?"":"none",pointerEvents:Pl,border:"1px dashed gray",fontSize:"16px",color:"var(--app-color-gray-dark)",padding:"20px",marginBottom:"10px"}},null===Q||void 0===Q||null===(Mo=Q.find((function(n){var l;return n.id===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.component_id)})))||void 0===Mo?void 0:Mo.name,r.createElement("br",null),r.createElement("br",null),(null===e||void 0===e||null===(So=e.options)||void 0===So||null===(ko=So.filters)||void 0===ko?void 0:ko.length)>0&&r.createElement(P.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-dark)"},className:me.multiselectComponent,visible:null===e||void 0===e?void 0:e.visible,mandatory:1==(null===e||void 0===e||null===(Io=e.options)||void 0===Io||null===(Po=Io.filters)||void 0===Po?void 0:Po.length)&&(null===e||void 0===e?void 0:e.mandatory),items:H.Z(j.Z("value"))(rt.map((function(n){var l=n.component_fields.find((function(n){var l;return n.field_name===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.filters[0])}));return{label:null===l||void 0===l?void 0:l.value,value:null===l||void 0===l?void 0:l.value,component:n}}))),loading:Ge,error:1==(null===e||void 0===e||null===(No=e.options)||void 0===No||null===(To=No.filters)||void 0===To?void 0:To.length)?null===e||void 0===e?void 0:e.errors:"",onChange:function(l){var o,t,d,a,u;(null===e||void 0===e||null===(o=e.options)||void 0===o||null===(t=o.filters)||void 0===t?void 0:t.length)>1?(w(void 0,n),Mn(!1),En(!1),setTimeout((function(){En(!0),Mn(!0)}),10),hn((0,i.Z)({},null===e||void 0===e||null===(d=e.options)||void 0===d?void 0:d.filters[0],H.Z(j.Z("value"))(rt.map((function(n){var o=n.component_fields.find((function(n){var l;return n.field_name===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.filters[1])}));return{label:null===o||void 0===o?void 0:o.value,value:null===o||void 0===o?void 0:o.value,component:n,selected:l}})).filter((function(n){return n.component.component_fields.filter((function(n){var o;return n.value===l&&n.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[0])})).length>0})))))):(zn("50px"),w(null!==(a=rt.find((function(e){return e.value===l}))[null===e||void 0===e||null===(u=e.options)||void 0===u?void 0:u.output])&&void 0!==a?a:null,n),_l(rt.find((function(e){return e.value===l})).component.id))},fieldLabel:null===e||void 0===e||null===(Do=e.options)||void 0===Do?void 0:Do.filters[0],value:ut?null===(zo=ut.component_fields.find((function(n){var l;return n.field_name===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.filters[0])})))||void 0===zo?void 0:zo.value:""}),r.createElement("div",{style:{display:null!==e&&void 0!==e&&e.visible?"":"none",marginBottom:"10px"}},(null===e||void 0===e||null===(Uo=e.options)||void 0===Uo||null===(Ao=Uo.filters)||void 0===Ao?void 0:Ao.length)>1&&xn&&r.createElement(P.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-dark)"},className:me.multiselectComponent,visible:null===e||void 0===e?void 0:e.visible,mandatory:2==(null===e||void 0===e||null===(Oo=e.options)||void 0===Oo||null===(Ro=Oo.filters)||void 0===Ro?void 0:Ro.length)&&(null===e||void 0===e?void 0:e.mandatory),items:null!==(Lo=yn[null===e||void 0===e||null===(Wo=e.options)||void 0===Wo?void 0:Wo.filters[0]])&&void 0!==Lo?Lo:[],loading:Ge,onClicked:function(e){return zn(e?"180px":"50px")},onChange:function(l){var o,t,d,u,r,s,v,c,p;(null===e||void 0===e||null===(o=e.options)||void 0===o||null===(t=o.filters)||void 0===t?void 0:t.length)>2?(Mn(!1),setTimeout((function(){return Mn(!0)}),10),hn((0,a.Z)((0,a.Z)({},yn),{},(0,i.Z)({},null===e||void 0===e||null===(d=e.options)||void 0===d?void 0:d.filters[1],null!==(u=H.Z(j.Z("value"))(rt.map((function(n){var l=n.component_fields.find((function(n){var l;return n.field_name===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.filters[2])}));return{label:null===l||void 0===l?void 0:l.value,value:null===l||void 0===l?void 0:l.value,component:n}})).filter((function(n){return n.component.component_fields.filter((function(n){var o;return n.value===l&&n.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[1])})).length>0})).filter((function(n){return n.component.component_fields.filter((function(n){var l,o;return n.value===yn[null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.filters[0]][0].component.component_fields.find((function(n){var l;return n.field_name===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.filters[0])})).value&&n.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[0])})).length>0}))))&&void 0!==u?u:[])))):(zn("50px"),R.start=!0,w(null!==(r=null===(s=yn[null===e||void 0===e||null===(c=e.options)||void 0===c?void 0:c.filters[0]])||void 0===s||null===(v=s.find((function(e){return e.value===l})))||void 0===v?void 0:v.component.component_fields.find((function(n){var l;return n.field_name===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.output)})).value)&&void 0!==r?r:null,n),_l(yn[null===e||void 0===e||null===(p=e.options)||void 0===p?void 0:p.filters[0]].find((function(e){return e.value===l})).component.id),Mn(!1),En(!1),setTimeout((function(){En(!0),Mn(!0)}),10))},fieldLabel:null===e||void 0===e||null===(qo=e.options)||void 0===qo?void 0:qo.filters[1],value:ut?null===(Fo=ut.component_fields.find((function(n){var l;return n.field_name===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.filters[1])})))||void 0===Fo?void 0:Fo.value:""})),r.createElement("div",{style:{display:null!==e&&void 0!==e&&e.visible?"":"none",marginBottom:"10px"}},(null===e||void 0===e||null===(Bo=e.options)||void 0===Bo||null===(Yo=Bo.filters)||void 0===Yo?void 0:Yo.length)>2&&Zn&&r.createElement(P.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-dark)"},className:me.multiselectComponent,visible:null===e||void 0===e?void 0:e.visible,mandatory:3==(null===e||void 0===e||null===(Ho=e.options)||void 0===Ho||null===(jo=Ho.filters)||void 0===jo?void 0:jo.length)&&(null===e||void 0===e?void 0:e.mandatory),items:null!==(Vo=yn[null===e||void 0===e||null===(Jo=e.options)||void 0===Jo?void 0:Jo.filters[1]])&&void 0!==Vo?Vo:[],loading:Ge,onClicked:function(e){return zn(e?"180px":"50px")},onChange:function(l){var o,t,i,d,a;zn("50px"),R.start=!0,w(null!==(o=null===(t=yn[null===e||void 0===e||null===(d=e.options)||void 0===d?void 0:d.filters[1]])||void 0===t||null===(i=t.find((function(e){return e.value===l})))||void 0===i?void 0:i.component.component_fields.find((function(n){var l;return n.field_name===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.output)})).value)&&void 0!==o?o:null,n),_l(yn[null===e||void 0===e||null===(a=e.options)||void 0===a?void 0:a.filters[1]].find((function(e){return e.value===l})).component.id)},fieldLabel:null===e||void 0===e||null===(Go=e.options)||void 0===Go?void 0:Go.filters[2],value:ut?null===(Qo=ut.component_fields.find((function(n){var l;return n.field_name===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.filters[2])})))||void 0===Qo?void 0:Qo.value:""}))):"Tiles"===(null===e||void 0===e||null===(Ko=e.options)||void 0===Ko?void 0:Ko.selection)?r.createElement(he.Z,{enabled:Pl,width:"100%",style:{border:"0"},editMode:ie,showWidth:function(n){e.field_options=(0,a.Z)((0,a.Z)({},e.field_options),{},{width:"".concat(n,"px")})},key:n,fieldLabel:e.field_name,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:(null===(Xo=e.errors)||void 0===Xo?void 0:Xo.length)>0?"".concat(e.errors,". Try to select again"):"",notes:null===e||void 0===e||null===($o=e.options)||void 0===$o?void 0:$o.notes},r.createElement("div",{style:{width:"100%"}},r.createElement(S.default,{rowStyleSelected:{border:"2px solid black"},initialSelected:st.map((function(n){var l;return n[null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.output]})).indexOf(null===e||void 0===e?void 0:e.value),modern:!0,isReport:!1,className:me.listContainer,"app-variant-is-mobile":"true",columns:null===e||void 0===e||null===(et=e.options)||void 0===et?void 0:et.names,list:st.map((function(e){var n=e;return e.component.component_fields.filter((function(e){n[e.field_name]=e.value})),n})),onListItemClick:function(l){var o,t,i,d,a;l&&(null===e||void 0===e||null===(a=e.options)||void 0===a||a.list.map((function(e){var n,o,t=fl({field_name:e});-1!=t&&(g.selected_fields[t].value=null!==(n=null===(o=l.component.component_fields.find((function(n){return n.field_name===e})))||void 0===o?void 0:o.value)&&void 0!==n?n:"",g.selected_fields[t].disabled=!0)})));rl(),_l(l),w(null!==(o=null===st||void 0===st||null===(t=st.find((function(e){return e.value===l.value})))||void 0===t||null===(i=t.component.component_fields)||void 0===i||null===(d=i.find((function(n){var l;return n.field_name===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.output)})))||void 0===d?void 0:d.value)&&void 0!==o?o:null,n)}}))):r.createElement(he.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-dark)",fontWeight:"regular",paddingLeft:"5px"},enabled:Pl,width:"100%",style:{marginTop:"0px",border:"1px dashed var(--app-color-gray-light)",padding:"5px"},editMode:ie,showWidth:function(n){e.field_options=(0,a.Z)((0,a.Z)({},e.field_options),{},{width:"".concat(n,"px")})},key:n,fieldLabel:Q.find((function(n){var l;return n.id===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.component_id)})).name,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:(null===(nt=e.errors)||void 0===nt?void 0:nt.length)>0?"".concat(e.errors,". Try to select again"):"",notes:null===e||void 0===e||null===(lt=e.options)||void 0===lt?void 0:lt.notes},r.createElement("div",{style:{width:"inherit"}},r.createElement(P.Z,{key:n,visible:null===e||void 0===e?void 0:e.visible,mandatory:null===e||void 0===e?void 0:e.mandatory,items:st,loading:Ge,error:"",className:me.dropdownClassContainer,onClicked:function(e){return zn(e?"100px":"50px")},onChange:function(l){var o,t;R.start=!0,zn("50px"),_l(l),w(null!==(o=null===st||void 0===st?void 0:st.find((function(e){return e.value===l}))[null===e||void 0===e||null===(t=e.options)||void 0===t?void 0:t.output])&&void 0!==o?o:null,n)},selectionType:(null===e||void 0===e||null===(ot=e.options)||void 0===ot?void 0:ot.selection.length)>0?null===e||void 0===e||null===(tt=e.options)||void 0===tt?void 0:tt.selection:null===e||void 0===e||null===(it=e.options)||void 0===it?void 0:it.type,value:null!==(dt=null===(at=ut)||void 0===at?void 0:at.label)&&void 0!==dt?dt:""})))}if("Filters"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(_=e.options)||void 0===_||null===($=_.component_id)||void 0===$?void 0:$.length)>0){var It,Pt,Nt,Tt,Dt,zt,Ut,At,Ot,Rt,Lt,Wt,qt,Ft,Bt,Yt,Ht,jt,Vt,Jt,Gt,Qt,Kt,Xt,$t,ei,ni,li,oi,ti,ii=(null!==e&&void 0!==e&&null!==(It=e.options)&&void 0!==It&&It.global?yl(null===e||void 0===e?void 0:e.data_type_name):F).filter((function(n){return n.component_fields.filter((function(n){var l;return n.component_blueprint_id===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.component_id)})).length>0})),di=ii.map((function(n){var l,o;return(0,i.Z)({label:n.title,value:n.id,component:n},null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.output,null===(o=n.component_fields.find((function(n){var l;return n.field_name===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.output)})))||void 0===o?void 0:o.value)}));if(ii.length>0){if(e.value){if(ti=ii.find((function(n){return n.component_fields.find((function(n){var l;return n.field_name===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.output)&&n.value===e.value}))}))){var ai,ui,ri;_l(null===(ai=ti)||void 0===ai?void 0:ai.id);var si=(0,d.Z)(null!==(ui=null===(ri=M.currentStep)||void 0===ri?void 0:ri.component_blueprints)&&void 0!==ui?ui:[]);si&&(M.newStepComponents=si)}}else if(1==di.length&&1==(null===e||void 0===e?void 0:e.mandatory)&&(ti=ii[0])){var vi,ci,pi;_l(null===(vi=ti)||void 0===vi?void 0:vi.id);var mi=(0,d.Z)(null!==(ci=null===(pi=M.currentStep)||void 0===pi?void 0:pi.component_blueprints)&&void 0!==ci?ci:[]);mi&&(M.newStepComponents=mi)}if(1==di.length||e.value){var fi,_i,yi,hi;if((null===e||void 0===e||null===(fi=e.options)||void 0===fi?void 0:fi.filters.length)>0)yn[null===e||void 0===e||null===(yi=e.options)||void 0===yi?void 0:yi.filters[0]]=H.Z(j.Z("value"))(ii.map((function(n){var l=null===n||void 0===n?void 0:n.component_fields.find((function(n){var l;return n.field_name===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.filters[1])}));return{label:null===l||void 0===l?void 0:l.value,value:null===l||void 0===l?void 0:l.value,component:n}})));if((null===e||void 0===e||null===(_i=e.options)||void 0===_i?void 0:_i.filters.length)>1)yn[null===e||void 0===e||null===(hi=e.options)||void 0===hi?void 0:hi.filters[1]]=H.Z(j.Z("value"))(ii.map((function(n){var l=n.component_fields.find((function(n){var l;return n.field_name===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.filters[2])}));return{label:null===l||void 0===l?void 0:l.value,value:null===l||void 0===l?void 0:l.value,component:n}})))}}return!ti&&null!==e&&void 0!==e&&e.value?r.createElement("div",{key:n},"A record ( ".concat(null===e||void 0===e?void 0:e.value," ) was previously selected but not found. Press the refresh button on the upper right side to retrieve the missing record. If record is still not found, please check with your admin.")):r.createElement("div",{key:n,style:{width:"100%",display:null!==e&&void 0!==e&&e.visible?"":"none",pointerEvents:Pl,border:"1px dashed gray",fontSize:"16px",color:"var(--app-color-gray-dark)",marginBottom:"10px",padding:"20px"}},Q.find((function(n){var l;return n.id===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.component_id)})).name,r.createElement("br",null),r.createElement("br",null),(null===e||void 0===e||null===(Pt=e.options)||void 0===Pt||null===(Nt=Pt.filters)||void 0===Nt?void 0:Nt.length)>0&&r.createElement(P.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-dark)"},className:me.multiselectComponent,visible:null===e||void 0===e?void 0:e.visible,mandatory:1==(null===e||void 0===e||null===(Tt=e.options)||void 0===Tt||null===(Dt=Tt.filters)||void 0===Dt?void 0:Dt.length)&&(null===e||void 0===e?void 0:e.mandatory),items:H.Z(j.Z("value"))(ii.map((function(n){var l=n.component_fields.find((function(n){var l;return n.field_name===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.filters[0])}));return{label:null===l||void 0===l?void 0:l.value,value:null===l||void 0===l?void 0:l.value,component:n}}))),loading:Ge,error:1==(null===e||void 0===e||null===(zt=e.options)||void 0===zt||null===(Ut=zt.filters)||void 0===Ut?void 0:Ut.length)?null===e||void 0===e?void 0:e.errors:"",onChange:function(l){var o,t,d,a,u;(null===e||void 0===e||null===(o=e.options)||void 0===o||null===(t=o.filters)||void 0===t?void 0:t.length)>1?(w(void 0,n),Mn(!1),En(!1),setTimeout((function(){En(!0),Mn(!0)}),10),hn((0,i.Z)({},null===e||void 0===e||null===(d=e.options)||void 0===d?void 0:d.filters[0],H.Z(j.Z("value"))(ii.map((function(n){var o=n.component_fields.find((function(n){var l;return n.field_name===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.filters[1])}));return{label:null===o||void 0===o?void 0:o.value,value:null===o||void 0===o?void 0:o.value,component:n,selected:l}})).filter((function(n){return n.component.component_fields.filter((function(n){var o;return n.value===l&&n.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[0])})).length>0})))))):(zn("50px"),w(null!==(a=ii.find((function(e){return e.value===l}))[null===e||void 0===e||null===(u=e.options)||void 0===u?void 0:u.output])&&void 0!==a?a:null,n),_l(ii.find((function(e){return e.value===l})).component.id))},fieldLabel:null===e||void 0===e||null===(At=e.options)||void 0===At?void 0:At.filters[0],value:ti?null===(Ot=ti.component_fields.find((function(n){var l;return n.field_name===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.filters[0])})))||void 0===Ot?void 0:Ot.value:""}),r.createElement("div",{style:{display:null!==e&&void 0!==e&&e.visible?"":"none",marginBottom:"10px"}},(null===e||void 0===e||null===(Rt=e.options)||void 0===Rt||null===(Lt=Rt.filters)||void 0===Lt?void 0:Lt.length)>1&&xn&&r.createElement(P.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-dark)"},className:me.multiselectComponent,visible:null===e||void 0===e?void 0:e.visible,mandatory:2==(null===e||void 0===e||null===(Wt=e.options)||void 0===Wt||null===(qt=Wt.filters)||void 0===qt?void 0:qt.length)&&(null===e||void 0===e?void 0:e.mandatory),items:null!==(Ft=yn[null===e||void 0===e||null===(Bt=e.options)||void 0===Bt?void 0:Bt.filters[0]])&&void 0!==Ft?Ft:[],loading:Ge,error:2==(null===e||void 0===e||null===(Yt=e.options)||void 0===Yt||null===(Ht=Yt.filters)||void 0===Ht?void 0:Ht.length)?null===e||void 0===e?void 0:e.errors:"",onClicked:function(e){return zn(e?"180px":"50px")},onChange:function(l){var o,t,d,u,r,s,v,c,p;(null===e||void 0===e||null===(o=e.options)||void 0===o||null===(t=o.filters)||void 0===t?void 0:t.length)>2?(Mn(!1),setTimeout((function(){return Mn(!0)}),10),hn((0,a.Z)((0,a.Z)({},yn),{},(0,i.Z)({},null===e||void 0===e||null===(d=e.options)||void 0===d?void 0:d.filters[1],null!==(u=H.Z(j.Z("value"))(ii.map((function(n){var l=n.component_fields.find((function(n){var l;return n.field_name===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.filters[2])}));return{label:null===l||void 0===l?void 0:l.value,value:null===l||void 0===l?void 0:l.value,component:n}})).filter((function(n){return n.component.component_fields.filter((function(n){var o;return n.value===l&&n.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[1])})).length>0})).filter((function(n){return n.component.component_fields.filter((function(n){var l,o;return n.value===yn[null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.filters[0]][0].component.component_fields.find((function(n){var l;return n.field_name===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.filters[0])})).value&&n.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[0])})).length>0}))))&&void 0!==u?u:[])))):(rl(),zn("50px"),R.start=!0,w(null!==(r=null===(s=yn[null===e||void 0===e||null===(c=e.options)||void 0===c?void 0:c.filters[0]])||void 0===s||null===(v=s.find((function(e){return e.value===l})))||void 0===v?void 0:v.component.component_fields.find((function(n){var l;return n.field_name===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.output)})).value)&&void 0!==r?r:null,n),_l(yn[null===e||void 0===e||null===(p=e.options)||void 0===p?void 0:p.filters[0]].find((function(e){return e.value===l})).component.id))},fieldLabel:null===e||void 0===e||null===(jt=e.options)||void 0===jt?void 0:jt.filters[1],value:ti?null===(Vt=ti.component_fields.find((function(n){var l;return n.field_name===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.filters[1])})))||void 0===Vt?void 0:Vt.value:""})),r.createElement("div",{style:{display:null!==e&&void 0!==e&&e.visible?"":"none",marginBottom:"10px"}},(null===e||void 0===e||null===(Jt=e.options)||void 0===Jt||null===(Gt=Jt.filters)||void 0===Gt?void 0:Gt.length)>2&&Zn&&r.createElement(P.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-dark)"},className:me.multiselectComponent,visible:null===e||void 0===e?void 0:e.visible,mandatory:3==(null===e||void 0===e||null===(Qt=e.options)||void 0===Qt||null===(Kt=Qt.filters)||void 0===Kt?void 0:Kt.length)&&(null===e||void 0===e?void 0:e.mandatory),items:null!==(Xt=yn[null===e||void 0===e||null===($t=e.options)||void 0===$t?void 0:$t.filters[1]])&&void 0!==Xt?Xt:[],loading:Ge,error:3==(null===e||void 0===e||null===(ei=e.options)||void 0===ei||null===(ni=ei.filters)||void 0===ni?void 0:ni.length)?null===e||void 0===e?void 0:e.errors:"",onClicked:function(e){return zn(e?"180px":"50px")},onChange:function(l){var o,t,i,d,a;zn("50px"),R.start=!0,w(null!==(o=null===(t=yn[null===e||void 0===e||null===(d=e.options)||void 0===d?void 0:d.filters[1]])||void 0===t||null===(i=t.find((function(e){return e.value===l})))||void 0===i?void 0:i.component.component_fields.find((function(n){var l;return n.field_name===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.output)})).value)&&void 0!==o?o:null,n),_l(yn[null===e||void 0===e||null===(a=e.options)||void 0===a?void 0:a.filters[1]].find((function(e){return e.value===l})).component.id)},fieldLabel:null===e||void 0===e||null===(li=e.options)||void 0===li?void 0:li.filters[2],value:ti?null===(oi=ti.component_fields.find((function(n){var l;return n.field_name===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.filters[2])})))||void 0===oi?void 0:oi.value:""})))}if("Global"===(null===e||void 0===e?void 0:e.data_type_name)||"Connector"===(null===e||void 0===e?void 0:e.data_type_name)||"Emails"===(null===e||void 0===e?void 0:e.data_type_name)||"Template"===(null===e||void 0===e?void 0:e.data_type_name));else if("Action Button"!==(null===e||void 0===e?void 0:e.data_type_name)){var gi,bi,xi,Ei,Ci,wi,Zi,Mi,Si,ki,Ii,Pi,Ni,Ti,Di,zi,Ui,Ai,Oi,Ri,Li,Wi,qi,Fi,Bi,Yi,Hi,ji,Vi,Ji,Gi,Qi,Ki,Xi,$i,ed,nd,ld,od,td,id,dd,ad,ud,rd,sd,vd,cd,pd,md,fd,_d,yd,hd,gd,bd,xd,Ed,Cd,wd,Zd,Md;if("GoogleAI Assistant"===(null===e||void 0===e?void 0:e.data_type_name))return r.createElement("div",{key:n,style:{display:e.visible?"":"none",color:"var(--app-color-gray-dark)",height:"inherit",width:"100%",flexDirection:"column",marginTop:"50px"}},r.createElement(he.Z,{enabled:Pl,width:null!==(gi=null===e||void 0===e||null===(bi=e.field_options)||void 0===bi?void 0:bi.width)&&void 0!==gi?gi:"100%",editMode:ie,showWidth:function(n){e.field_options=(0,a.Z)((0,a.Z)({},e.field_options),{},{width:"".concat(n,"px")})},key:n,fieldLabel:"".concat(null===e||void 0===e||null===(xi=e.options)||void 0===xi?void 0:xi.description),fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors,notes:null===e||void 0===e||null===(Ei=e.options)||void 0===Ei?void 0:Ei.notes},r.createElement("textarea",{className:me.fullLengthTextarea,type:e.data_type,onFocus:function(){},disabled:e.options.fixed,autoComplete:"none",onChange:function(e){x(e.target.value,n)},placeholder:"Enter your question here",value:1==e.options.fixed?null===e||void 0===e||null===(Ci=e.options)||void 0===Ci?void 0:Ci.analyze:e.value})),r.createElement("div",{style:{display:"flex"}},r.createElement(y.zx,{light:!0,loading:Ge,title:"Ask",clicked:function(){0==e.options.fixed&&(e.options.analyze=e.value),pl(e.options)}},r.createElement("img",{src:"https://ai.google/static/images/share.png",height:"90px",width:"140px"})),(null===qn||void 0===qn?void 0:qn.candidates.length)>0&&r.createElement(y.zx,{title:"Clear",clicked:function(){Fn({candidates:[]}),x(void 0,n)}})));if("Chart"===e.data_type_name)return r.createElement(he.Z,{width:"100%",key:n,fieldLabel:e.field_name,fieldIcon:e.icon,editMode:ie,notes:null===e||void 0===e||null===(wi=e.options)||void 0===wi?void 0:wi.notes,isProcess:!0,visible:e.visible,error:e.errors,customIconBgColor:"white"},r.createElement("div",{className:"grid grid-cols-12 gap-4 md:gap-6 2xl:gap-7.5",style:{width:"inherit"}},"Line"===(null===e||void 0===e||null===(Zi=e.options)||void 0===Zi?void 0:Zi.orientation)&&r.createElement(De.Z,{series:[{name:"Product One",data:[23,11,22,27,13,22,37,21,44,22,30,45]},{name:"Product Two",data:[30,25,36,30,45,35,64,52,59,36,39,51]}]}),"Column"===(null===e||void 0===e||null===(Mi=e.options)||void 0===Mi?void 0:Mi.orientation)&&r.createElement(ze.Z,{series:[{name:"Sales",data:[44,55,41,67,22,43,65]},{name:"Revenue",data:[13,23,20,8,13,27,15]}]}),"Donut"===(null===e||void 0===e||null===(Si=e.options)||void 0===Si?void 0:Si.orientation)&&r.createElement(Ue.Z,{series:[65,34,12,56],labels:["Desktop","Tablet","Mobile","AI"]})));if("Info"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(ue=e.options)||void 0===ue||null===(re=ue.list)||void 0===re?void 0:re.length)>0&&(null===e||void 0===e||null===(ge=e.options)||void 0===ge||null===(xe=ge.component_id)||void 0===xe?void 0:xe.length)>0){var Sd,kd,Id,Pd,Nd,Td,Dd,zd,Ud,Ad=F.find((function(n){return n.id===(null===e||void 0===e?void 0:e.value)})),Od={};if(Ad)null===e||void 0===e||null===(Ud=e.options)||void 0===Ud||Ud.list.map((function(e,n){var l,o,t,i;if(0==Ad.component_fields.length)return r.createElement("div",{key:n});var d,a=Ad.component_fields.find((function(n){return n.field_name===e}));"Link"===(null===a||void 0===a?void 0:a.data_type_name)&&(null!==(l="".concat(null===a||void 0===a?void 0:a.value))&&void 0!==l&&l.includes("jpg")||null!==a&&void 0!==a&&null!==(o=a.options)&&void 0!==o&&o.image||null!==(t="".concat(null===a||void 0===a?void 0:a.value))&&void 0!==t&&t.includes("jpeg")||null!==(i="".concat(null===a||void 0===a?void 0:a.value))&&void 0!==i&&i.includes("png"))?Od[e]=r.createElement("div",{key:n,onClick:function(){return window.open(null===a||void 0===a?void 0:a.value,"_blank")}},r.createElement("img",{alt:"lg",src:null===a||void 0===a?void 0:a.value,style:{width:"30px",height:"30px",cursor:"pointer"}})):Od[e]=null!==(d=null===a||void 0===a?void 0:a.value)&&void 0!==d?d:""}));return Ad&&("rows"===(null===e||void 0===e||null===(Sd=e.options)||void 0===Sd?void 0:Sd.orientation)?r.createElement(he.Z,{style:{border:"0"},width:"100%",key:n,fieldLabel:e.field_name,fieldIcon:e.icon,isProcess:!0,visible:!0,mandatory:e.mandatory,error:e.errors,notes:null===e||void 0===e||null===(kd=e.options)||void 0===kd?void 0:kd.notes},r.createElement(N.Z,{className:me.mobileTable_ii,style:{width:"100%"},tableHostSimple:me.tableHostSimple,columns:null!==(Id=null===e||void 0===e||null===(Pd=e.options)||void 0===Pd?void 0:Pd.list)&&void 0!==Id?Id:[],list:[Od]})):r.createElement("div",{style:{width:"inherit"},key:n},Ad&&r.createElement(y.zx,{light:!0,title:"Show Information",style:{width:"100%",backgroundColor:"var(--app-color-blue)",color:"white"},clicked:function(){return rl()}}),rl&&r.createElement(Qe,{title:"Information:",nav:al,openNav:rl},r.createElement("div",{style:{color:"var(--app-color-gray-dark)",height:"inherit",width:"100%",display:null!==e&&void 0!==e&&e.visible?"":"none"}},Object.keys(Od).length>0&&(null===e||void 0===e||null===(Nd=e.options)||void 0===Nd?void 0:Nd.list.map((function(n,l){var o,t,i,d,a,u,s;if(0==Ad.component_fields.length)return r.createElement("div",{key:l});var v=Ad.component_fields.find((function(e){return e.field_name===n}));return l<3?r.createElement("div",{key:l},r.createElement("div",{className:me.actionsContainer,style:{fontSize:(n.length>10||v.value.length,"12px")}},r.createElement("div",null,n,":"),r.createElement("div",{style:{fontWeight:"bold"}},v?v.value:"")),r.createElement("hr",{style:{borderTop:"0.5px solid #D2D2D2"}})):r.createElement("div",{style:{border:"0"},key:l,fieldLabel:n,fieldIcon:e.icon,isProcess:!0,visible:!0,mandatory:e.mandatory,error:e.errors,notes:null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.notes},"Link"===(null===v||void 0===v?void 0:v.data_type_name)&&(null!==(t="".concat(null===v||void 0===v?void 0:v.value))&&void 0!==t&&t.includes("jpg")||null!==(i="".concat(null===v||void 0===v?void 0:v.value))&&void 0!==i&&i.includes("jpeg")||null!==v&&void 0!==v&&null!==(d=v.options)&&void 0!==d&&d.image||null!==(a="".concat(null===v||void 0===v?void 0:v.value))&&void 0!==a&&a.includes("png"))?r.createElement("div",{onClick:function(){return window.open(null===v||void 0===v?void 0:v.value,"_blank")}},r.createElement("img",{alt:"lg",src:null===v||void 0===v?void 0:v.value,style:{width:"50%",height:"100%",cursor:"pointer"}})):null!==e&&void 0!==e&&null!==(u=e.value)&&void 0!==u&&u.includes("pdf")?r.createElement("div",{style:{width:"inherit"},onClick:function(){return window.open(null===v||void 0===v?void 0:v.value,"_blank")}},r.createElement("embed",{src:"".concat(null===v||void 0===v?void 0:v.value,"#toolbar=0&navpanes=0&scrollbar=0&zoom=100%"),width:"100%",height:"1000px"})):(null===v||void 0===v||null===(s=v.value)||void 0===s?void 0:s.length)<50||void 0===v?r.createElement("input",{onBlur:function(n){return je(e.data_type_name,n.target.value,E,l,M)},type:e.data_type,value:v?v.value:"",autoComplete:"none",className:me.fieldTypeInput,name:e.field_name,disabled:!0,style:{border:"1px dashed rgba(234, 231, 231, 0.91)",height:"40px",fontSize:"18px",backgroundColor:"rgba(234, 231, 231, 0.91)"}}):r.createElement("textarea",{className:me.fieldTypeTextarea,type:e.data_type,value:v?v.value:"",onFocus:function(){},autoComplete:"none",onChange:function(e){},disabled:!0,style:{backgroundColor:"rgba(234, 231, 231, 0.91)",height:"auto",fontSize:"18px"}}))}))),!0===(null===g||void 0===g||null===(Td=g.options)||void 0===Td?void 0:Td.allowMultipleInputs)&&(null===(Dd=Y.processModule.module.options)||void 0===Dd||null===(zd=Dd.computes)||void 0===zd?void 0:zd.map((function(n,l){var o,t,i=null===F||void 0===F||null===(o=F.filter((function(e){return e.module_id===n.module_id})))||void 0===o?void 0:o.find((function(n){return n.component_fields.filter((function(n){var l,o;return n.value===(null!==(l=null===(o=Ad.component_fields.find((function(n){var l;return n.field_name===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.key)})))||void 0===o?void 0:o.value)&&void 0!==l?l:"#$")})).length>0})),d=null===i||void 0===i?void 0:i.component_fields.find((function(e){return e.procedure_step_blueprint_field_id===n.field_id}));return r.createElement(he.Z,{style:{display:d?"":"none",border:"0"},key:l,fieldLabel:null===d||void 0===d?void 0:d.field_name,fieldIcon:e.icon,isProcess:!0,visible:!0,mandatory:e.mandatory,error:e.errors,notes:null===e||void 0===e||null===(t=e.options)||void 0===t?void 0:t.notes},r.createElement("input",{onBlur:function(n){return je(e.data_type_name,n.target.value,E,l,M)},type:e.data_type,value:null===d||void 0===d?void 0:d.value,autoComplete:"none",className:me.fieldTypeInput,name:e.field_name,disabled:!0,style:{border:"1px dashed rgba(234, 231, 231, 0.91)",height:"40px",fontSize:"18px",backgroundColor:"rgba(234, 231, 231, 0.91)"}}))}))),r.createElement("br",null),r.createElement(y.zx,{clicked:function(){return rl()},title:"Close",style:{width:"100%",backgroundColor:"orange"}})))))}if("Lookup"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(Se=e.options)||void 0===Se||null===(Re=Se.list)||void 0===Re?void 0:Re.length)>0&&(null===e||void 0===e||null===(Ye=e.options)||void 0===Ye||null===(Ve=Ye.source_id)||void 0===Ve?void 0:Ve.length)>0&&null!==e&&void 0!==e&&null!==(Xe=e.options)&&void 0!==Xe&&null!==($e=Xe.target_id)&&void 0!==$e&&$e.length){var Rd,Ld,Wd,qd,Fd,Bd,Yd,Hd,jd,Vd,Jd,Gd,Qd,Kd,Xd,$d,ea,na,la=function(e,n){var l,o,t,i,d,a,u,r=null===(l=Y.processModule.module)||void 0===l||null===(o=l.options)||void 0===o?void 0:o.global;return r||(r=null===(t=M.components.find((function(n){return n.selected_fields.filter((function(n){return 1==n.visible&&n.field_name===e})).length>0})))||void 0===t||null===(i=t.selected_fields.find((function(n){return n.field_name===e})))||void 0===i?void 0:i.value),r||(r=null===(d=L.Z(W.Z("component_blueprints"),q.Z)(Y.processModule.completeSteps).find((function(n){return n.selected_fields.filter((function(n){return n.field_name===e&&"Value"===n.data_type_name})).length>0})))||void 0===d||null===(a=d.selected_fields.find((function(n){return n.field_name===e})))||void 0===a||null===(u=a.options)||void 0===u?void 0:u.value),r?n.filter((function(n){return n[e]===r})):n}(null===e||void 0===e||null===(Rd=e.options)||void 0===Rd?void 0:Rd.global,function(e,n,l,o,t){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:F,r=u.filter((function(e){var n;return(null===(n=e.component_fields)||void 0===n?void 0:n.filter((function(e){return e.component_blueprint_id===l})).length)>0})),s=[];return u.filter((function(n){return n.component_fields.filter((function(n){return n.component_blueprint_id===e})).length>0})).map((function(e){var l={};o.map((function(n){var o;l[n]=null===(o=e.component_fields.find((function(e){return e.field_name===n})))||void 0===o?void 0:o.value}));var u=e.component_fields.find((function(e){return e.field_name===n}));void 0!==u&&r.filter((function(e){return e.component_fields.filter((function(e){return e.value===u.value&&e.field_name===n})).length>0})).map((function(n){var o,u,r,v=null!==(o=null===(u=n.component_fields.find((function(e){return-1!==i.indexOf(e.field_name)})))||void 0===u?void 0:u.value)&&void 0!==o?o:"",c={};i.length>0&&i.map((function(e){var l=n.component_fields.find((function(n){return n.field_name===e}));l&&(c[e]=l.value)}));var p={};t.length>0&&t.map((function(l){var o=n.component_fields.find((function(e){return e.field_name===l}));if(o)p[l]=o.value;else{var t=e.component_fields.find((function(e){return e.field_name===l}));t&&(p[l]=t.value)}})),s=[].concat((0,d.Z)(s),[(0,a.Z)((0,a.Z)((0,a.Z)({label:v,value:n.id,field:n,grouping:(null===(r=Object.values(l))||void 0===r?void 0:r.length)>0?Object.values(l)[0]:"Fields"},l),p),c)])}))})),s}(null===e||void 0===e||null===(Ld=e.options)||void 0===Ld?void 0:Ld.source_id,null===e||void 0===e||null===(Wd=e.options)||void 0===Wd?void 0:Wd.common_field,null===e||void 0===e||null===(qd=e.options)||void 0===qd?void 0:qd.target_id,null===e||void 0===e||null===(Fd=e.options)||void 0===Fd?void 0:Fd.sourceLabel,null===e||void 0===e||null===(Bd=e.options)||void 0===Bd?void 0:Bd.list,null!==(Yd=null===e||void 0===e||null===(Hd=e.options)||void 0===Hd?void 0:Hd.rlist)&&void 0!==Yd?Yd:[]));return r.createElement(he.Z,{enabled:Pl,width:"100%",style:{border:"Tiles"===(null===e||void 0===e||null===(jd=e.options)||void 0===jd?void 0:jd.selection)?"0":"1px dashed gray"},titleProps:{fontSize:"12px",color:"var(--app-color-gray-dark)",fontWeight:"regular",paddingLeft:"5px"},editMode:ie,showWidth:function(n){e.field_options=(0,a.Z)((0,a.Z)({},e.field_options),{},{width:"".concat(n,"px")})},key:n,fieldLabel:e.field_name,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors,notes:null===e||void 0===e||null===(Vd=e.options)||void 0===Vd?void 0:Vd.notes},r.createElement("div",{id:e.field_name,style:{width:"100%"}},"Dropdown"===(null===e||void 0===e||null===(Jd=e.options)||void 0===Jd?void 0:Jd.selection)?r.createElement(A.yV,{items:la,groupedBy:"grouping",groupname:"grouping",triggerType:"chevron",title:pn,className:me.dropdownClassContainer,inputClassName:me.peoplePositionsSelectInput,molclassname:me.peoplePositionsSelectMenuOverlay,moliclassname:me.peoplePositionsSelectMenuOverlayItem,notags:"true",onChange:function(l){var o;l.length>0&&(null===e||void 0===e||null===(o=e.options)||void 0===o||o.list.map((function(n){var o=fl({field_name:n});if(-1!=o){var t=F.find((function(e){return e.id===l[0].value})),i=t.component_fields.find((function(e){return e.field_name===n}));if(void 0==i){var d=t.component_fields.find((function(n){var l;return n.field_name===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.common_field)})),a=F.find((function(n){return n.component_fields.filter((function(n){var l;return n.value===d.value&&n.component_blueprint_id===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.source_id)})).length>0}));if(void 0!=a){var u=a.component_fields.find((function(e){return e.field_name===n}));void 0!=u?(g.selected_fields[o].value=u.value,g.selected_fields[o].disabled=!0):g.selected_fields[o].value=""}else g.selected_fields[o].value=""}else g.selected_fields[o].value=i.value,g.selected_fields[o].disabled=!0}})),w("".concat(l[0].label,",").concat(l[0].value),n),mn("".concat(l[0].grouping)))}}):"Tiles"===(null===e||void 0===e||null===(Gd=e.options)||void 0===Gd?void 0:Gd.selection)?r.createElement(A.qq,{items:la,columns:null===e||void 0===e||null===(Qd=e.options)||void 0===Qd?void 0:Qd.rlist,columnsG:null===e||void 0===e||null===(Kd=e.options)||void 0===Kd?void 0:Kd.sourceLabel,initialSelected:null===e||void 0===e?void 0:e.value,selectedItems:null!==e&&void 0!==e&&null!==(Xd=e.options)&&void 0!==Xd&&Xd.showAll?la:yn,showAll:1==(null===e||void 0===e||null===($d=e.options)||void 0===$d?void 0:$d.showAll),groupedBy:"grouping",groupname:"grouping",className:me.peoplePositionsSelect,onGroupChange:function(e){hn(la.filter((function(n){return n.grouping===e})))},onChange:function(l){var o;l&&(null===e||void 0===e||null===(o=e.options)||void 0===o||o.list.map((function(n){var o=fl({field_name:n});if(-1!=o){var t=F.find((function(e){return e.id===l.value})),i=t.component_fields.find((function(e){return e.field_name===n}));if(void 0==i){var d=t.component_fields.find((function(n){var l;return n.field_name===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.common_field)})),a=F.find((function(n){return n.component_fields.filter((function(n){var l;return n.value===d.value&&n.component_blueprint_id===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.source_id)})).length>0}));if(void 0!=a){var u=a.component_fields.find((function(e){return e.field_name===n}));void 0!=u?(g.selected_fields[o].value=u.value,g.selected_fields[o].disabled=!0):g.selected_fields[o].value=""}else g.selected_fields[o].value=""}else g.selected_fields[o].value=i.value,g.selected_fields[o].disabled=!0}})),rl(),w("".concat(l.label,",").concat(l.value),n))}}):r.createElement("div",{className:me.openSelectWithSearchHost},r.createElement(ke.Z,{title:null===e||void 0===e||null===(ea=e.options)||void 0===ea?void 0:ea.sourceLabel,triggerType:"eyeglass",className:me.openSelectWithSearch,molclassname:me.menuOverlayList,moliclassname:me.menuOverlayListItem,inputClassName:me.menuOverlayListItemInput,inputContainerClassName:me.menuOverlayListItemInputContainerClassName,items:H.Z(j.Z("grouping"))(la).map((function(e){return{label:e.grouping,value:e.grouping}})),onChange:function(n){document.getElementById(e.field_name).style.height="80px",hn(la.filter((function(e){return e.grouping===n.value})))}}),r.createElement(ke.Z,{title:null===e||void 0===e||null===(na=e.options)||void 0===na?void 0:na.referenceLabel,triggerType:"eyeglass",className:me.openSelectWithSearch,molclassname:me.menuOverlayList,moliclassname:me.menuOverlayListItem,inputClassName:me.menuOverlayListItemInput,inputContainerClassName:me.menuOverlayListItemInputContainerClassName,items:yn,onChange:function(l){var o;(document.getElementById(e.field_name).style.height="80px",l)&&(null===e||void 0===e||null===(o=e.options)||void 0===o||o.list.map((function(n){var o=fl({field_name:n});if(-1!=o){var t=F.find((function(e){return e.id===l.value})),i=t.component_fields.find((function(e){return e.field_name===n}));if(void 0==i){var d=t.component_fields.find((function(n){var l;return n.field_name===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.common_field)})),a=F.find((function(n){return n.component_fields.filter((function(n){var l;return n.value===d.value&&n.component_blueprint_id===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.source_id)})).length>0}));if(void 0!=a){var u=a.component_fields.find((function(e){return e.field_name===n}));void 0!=u?(g.selected_fields[o].value=u.value,g.selected_fields[o].disabled=!0):g.selected_fields[o].value=""}else g.selected_fields[o].value=""}else g.selected_fields[o].value=i.value,g.selected_fields[o].disabled=!0}})),w("".concat(l.label,",").concat(l.value),n))}}))))}if(("Step List"===(null===e||void 0===e?void 0:e.data_type_name)||"Component List"===(null===e||void 0===e?void 0:e.data_type_name))&&(null===e||void 0===e||null===(on=e.options)||void 0===on||null===(tn=on.list)||void 0===tn?void 0:tn.length)>0&&(null===e||void 0===e||null===(dn=e.options)||void 0===dn||null===(un=dn.component_id)||void 0===un?void 0:un.length)>0)return r.createElement("div",{key:n,style:{width:"100%",display:1==e.visible?"":"none"}},r.createElement(S.default,{columns:null===e||void 0===e||null===(ki=e.options)||void 0===ki?void 0:ki.list,list:(Il=null===e||void 0===e?void 0:e.options,M.components.filter((function(e){return e.id===Il.component_id})).map((function(e){var n={};return Il.list.map((function(l){var o,t;n=(0,a.Z)((0,a.Z)({},n),{},(t={},(0,i.Z)(t,l,null===(o=e.selected_fields.find((function(e){return e.field_name===l})))||void 0===o?void 0:o.value),(0,i.Z)(t,"temp_id",e.temp_id),t))})),n}))),onListItemClick:function(e){k({action:m._U.removeModuleComponents,value:e.temp_id})}}));if("Checkbox"===(null===e||void 0===e?void 0:e.data_type_name))return r.createElement(he.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-light)"},enabled:Pl,border:{border:"0",paddingTop:"40px"},notes:null===e||void 0===e||null===(Ii=e.options)||void 0===Ii?void 0:Ii.notes,editMode:ie,width:"100%",showWidth:function(n){e.field_options=(0,a.Z)((0,a.Z)({},e.field_options),{},{width:"".concat(n,"px")})},key:n,visible:e.visible,mandatory:e.mandatory,error:e.errors,customIconBgColor:"white"},r.createElement(Ie.X,{defaultChecked:null!==(Pi=e.value)&&void 0!==Pi&&Pi,checkboxLabel:null===e||void 0===e||null===(Ni=e.options)||void 0===Ni?void 0:Ni.value,onChange:function(e){w(e.target.checked,n)}}));if("YesNo"===(null===e||void 0===e?void 0:e.data_type_name))return r.createElement(he.Z,{enabled:Pl,style:{border:"0.5px dashed gray",padding:"10px"},width:"100%",editMode:ie,key:n,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors},r.createElement("div",{class:"checkbox-wrapper-21"},r.createElement("div",{style:{display:"flex",justifyContent:"space-between",margin:"20px 0px"}},r.createElement("input",{id:"check-23",type:"checkbox",checked:null!==(Ti=null===e||void 0===e?void 0:e.value)&&void 0!==Ti&&Ti,onChange:function(e){return w(e.target.checked,n)},style:{marginRight:"20px"}}),r.createElement("label",null,null!==(Di=null===e||void 0===e||null===(zi=e.options)||void 0===zi?void 0:zi.notes)&&void 0!==Di?Di:e.field_name))));if("Transaction List"===(null===e||void 0===e?void 0:e.data_type_name)&&null!==e&&void 0!==e&&null!==(vn=e.options)&&void 0!==vn&&vn.map){var oa,ta,ia,da={item_code:null,quantity:null,value:null,alt_value:null,total:null},aa=Object.entries(Object.assign(da,e.options.map)).reduce((function(e,n){var l=(0,u.Z)(n,2),o=l[0],t=l[1];return null===t||(e[o]=t),e}),{}),ua=Object.entries(Object.assign(da,e.options.map)).reduce((function(e,n){var l=(0,u.Z)(n,2),o=l[0],t=l[1];return null===t||(e[o]=t),e}),{});return Object.keys(aa).map((function(e){var n;"item_code"===e?ua.item_code="Totals:":"quantity"===e?ua[e]="".concat(ee.Z((function(n,l){var o;return null!==(o=+n+ +l[e])&&void 0!==o?o:0}),0,null!==(n=null===M||void 0===M?void 0:M.items)&&void 0!==n?n:[])):("alt_value"===e||"value"===e||"total"===e)&&(ua[e]="")})),r.createElement("div",{key:n,style:{width:"inherit"}},r.createElement(he.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-light)"},enabled:Pl,width:null!==(oa=null===e||void 0===e||null===(ta=e.field_options)||void 0===ta?void 0:ta.width)&&void 0!==oa?oa:"inherit",editMode:ie,showWidth:function(n){e.field_options=(0,a.Z)((0,a.Z)({},e.field_options),{},{width:"".concat(n,"px")})},style:{border:"0",padding:"0"},key:n,visible:e.visible,notes:null===e||void 0===e||null===(ia=e.options)||void 0===ia?void 0:ia.notes},r.createElement(N.Z,{key:n,style:{width:(Object.values(e.options.map).length,"100%")},title:h.tq?"":e.field_name,tableHostSimple:me.tableHostMobile,columns:Object.values(aa),footer:Object.values(ua),list:ml(e.options),onListItemClick:function(e){k({action:m._U.removeModuleItems,value:e.item})}})))}if("ID"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(cn=e.options)||void 0===cn||null===(fn=cn.id)||void 0===fn?void 0:fn.length)>0){var ra,sa,va=void 0===e.value||null===e.value?"".concat(null===e||void 0===e?void 0:e.options.id).concat(null===(null===R||void 0===R?void 0:R.misc_info)?1:null!==(ra=null===R||void 0===R?void 0:R.misc_info[null===e||void 0===e?void 0:e.field_name])&&void 0!==ra?ra:1):e.value;return e.value=va,M.id=va,r.createElement(he.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-dark)",fontWeight:"regular",paddingLeft:"5px"},width:"100%",style:{marginTop:"0px",border:"1px dashed var(--app-color-gray-light)",padding:"5px"},editMode:ie,showWidth:function(n){e.field_options=(0,a.Z)((0,a.Z)({},e.field_options),{},{width:"".concat(n,"px")})},key:n,fieldLabel:e.field_name,fieldIcon:e.icon,notes:null===e||void 0===e||null===(sa=e.options)||void 0===sa?void 0:sa.notes,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors,customIconBgColor:"white"},r.createElement("div",{className:me.fieldTypeInput,style:{border:"0"}},e.value))}if("Notes"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(_n=e.options)||void 0===_n||null===(gn=_n.value)||void 0===gn?void 0:gn.length)>0)return r.createElement(he.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-dark)",fontWeight:"regular",paddingLeft:"5px"},enabled:Pl,width:"100%",editMode:ie,showWidth:function(n){e.field_options=(0,a.Z)((0,a.Z)({},e.field_options),{},{width:"".concat(n,"px")})},style:{border:"0"},key:n,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:!1,error:e.errors},r.createElement("label",{key:n,className:me.labelInput,style:{display:e.visible?"":"none"}},"".concat(e.field_name,": ").concat(null===e||void 0===e||null===(Ui=e.options)||void 0===Ui?void 0:Ui.value)));if("List Filter"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(bn=e.options)||void 0===bn||null===(Cn=bn.value)||void 0===Cn?void 0:Cn.length)>0)return r.createElement(r.Fragment,null);if("Ratings"===(null===e||void 0===e?void 0:e.data_type_name))return r.createElement(r.Fragment,null);if("Value"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(wn=e.options)||void 0===wn||null===(Sn=wn.module_id)||void 0===Sn?void 0:Sn.length)>0&&(null===e||void 0===e||null===(kn=e.options)||void 0===kn||null===(Nn=kn.component_id)||void 0===Nn?void 0:Nn.length)>0)return r.createElement(he.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-light)"},width:"100%",style:{border:"0"},key:n,fieldLabel:e.field_name,fieldIcon:e.icon,editMode:ie,showWidth:function(n){e.field_options=(0,a.Z)((0,a.Z)({},e.field_options),{},{width:"".concat(n,"px")})},notes:null===e||void 0===e||null===(Ai=e.options)||void 0===Ai?void 0:Ai.notes,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors,customIconBgColor:"white"},r.createElement("input",{value:null===e||void 0===e||null===(Oi=e.options)||void 0===Oi?void 0:Oi.value,className:me.fieldTypeInput,name:e.field_name,disabled:!0}));if("URL"===e.data_type_name)return r.createElement(he.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-light)"},border:{border:"0"},width:"100%",editMode:ie,showWidth:function(n){e.field_options=(0,a.Z)((0,a.Z)({},e.field_options),{},{width:"".concat(n,"px")})},key:n,notes:null===e||void 0===e||null===(Ri=e.options)||void 0===Ri?void 0:Ri.notes,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors,customIconBgColor:"white"},null!==e&&void 0!==e&&null!==(Li=e.options.value)&&void 0!==Li&&Li.includes("jpg")||null!==e&&void 0!==e&&null!==(Wi=e.options.value)&&void 0!==Wi&&Wi.includes("jpeg")||null!==e&&void 0!==e&&null!==(qi=e.options)&&void 0!==qi&&qi.image||null!==e&&void 0!==e&&null!==(Fi=e.options.value)&&void 0!==Fi&&Fi.includes("png")?r.createElement("div",{onClick:function(){return window.open(null===e||void 0===e?void 0:e.options.value,"_blank")}},r.createElement("img",{alt:"lg",src:null===e||void 0===e?void 0:e.options.value,style:{width:"100%",height:"100%",cursor:"pointer"}})):null!==e&&void 0!==e&&null!==(Bi=e.options.value)&&void 0!==Bi&&Bi.includes("pdf")?r.createElement("div",{style:{width:"inherit"},onClick:function(){return window.open(null===e||void 0===e?void 0:e.options.value,"_blank")}},r.createElement("embed",{src:"".concat(null===e||void 0===e?void 0:e.options.value,"#toolbar=0&navpanes=0&scrollbar=0&zoom=100%"),width:"100%",height:"1000px"})):r.createElement("div",{style:{width:"inherit"},onClick:function(){return window.open(null===e||void 0===e?void 0:e.options.value,"_blank")}},r.createElement("textarea",{disabled:!0,onChange:function(){},autoComplete:"none",value:null===(null===e||void 0===e?void 0:e.options.value)?"":null===e||void 0===e?void 0:e.options.value,className:me.fieldTypeInput,style:{height:"auto",width:"inherit",cursor:"pointer"},name:e.field_name})));if("Formula"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(Tn=e.options)||void 0===Tn||null===(Un=Tn.operator)||void 0===Un?void 0:Un.length)>0){var ca,pa,ma,fa,_a,ya=M.newStepComponents.filter((function(e){return null===e.options||(void 0===e.allowMultipleInputs||!1===e.options.allowMultipleInputs)})),ha=(0,U.LV)(null===e||void 0===e?void 0:e.options,g.selected_fields.filter((function(n){return e.options.list.includes(n.field_name)})),[].concat((0,d.Z)(M.components.filter((function(e){return ya.every((function(n){return n.id!==e.id}))}))),(0,d.Z)(B.Z((function(e){return e.selected_fields.filter((function(e){return""===e.value})).length>0}),ya))),null!==(ca=null===M||void 0===M?void 0:M.items)&&void 0!==ca?ca:[],null!==(pa=null===M||void 0===M?void 0:M.newStepComponents)&&void 0!==pa?pa:[]);return void 0!==ha&&0!==ha&&(e.value=ha),"bar"===(null===e||void 0===e||null===(ma=e.options)||void 0===ma?void 0:ma.display)?r.createElement("div",{style:{margin:"20px",display:"flex",height:"30px",width:"100%"}},r.createElement("label",{className:me.fieldTypeInput,style:{width:"20%"}},null===e||void 0===e?void 0:e.field_name),r.createElement("div",{style:{height:"30px",width:"100%",backgroundColor:null===e||void 0===e||null===(fa=e.options)||void 0===fa?void 0:fa.maxC,display:"flex",flexDirection:"column"}},r.createElement("input",{value:ha||0,className:me.fieldTypeInput,name:e.field_name,disabled:!0,style:{color:"transparent",height:"30px",width:"".concat(+ha/+e.options.max*100,"%"),backgroundColor:null===e||void 0===e||null===(_a=e.options)||void 0===_a?void 0:_a.barC}})),r.createElement("label",{className:me.fieldTypeInput,style:{width:"2%"}},"".concat(+ha/+e.options.max*100,"%"))):r.createElement(he.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-dark)",fontWeight:"regular",paddingLeft:"5px"},width:"100%",style:{border:"1px dashed var(--app-color-gray-light)",padding:"5px"},editMode:ie,showWidth:function(n){e.field_options=(0,a.Z)((0,a.Z)({},e.field_options),{},{width:"".concat(n,"px")})},key:n,fieldLabel:e.field_name,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors,customIconBgColor:"white"},r.createElement("div",{style:{flexDirection:"column",width:"inherit"},key:n},r.createElement("input",{value:ha||0,className:me.fieldTypeInput,name:e.field_name,readOnly:!0,style:{border:"0"}}),al&&ha>0&&r.createElement(Qe,{title:"",nav:al,openNav:rl},r.createElement("div",{style:{color:"var(--app-color-gray-dark)",height:"inherit",width:"100%",display:null!==e&&void 0!==e&&e.visible?"":"none"}},r.createElement("div",{key:n},r.createElement("div",{className:me.actionsContainer,style:{fontSize:"20px"}},r.createElement("div",null,e.field_name,":"),r.createElement("div",{style:{fontWeight:"bolder"}},ha)),r.createElement("hr",{style:{borderTop:"0.5px solid #D2D2D2"}})),r.createElement("br",null),r.createElement(y.zx,{clicked:function(){return rl()},title:"Continue",style:{width:"100%"}})))))}if("Dropdown"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(An=e.options)||void 0===An||null===(Ln=An.list)||void 0===Ln?void 0:Ln.length)>0)return r.createElement(he.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-dark)",fontWeight:"regular",paddingLeft:"5px"},enabled:Pl,width:"100%",style:{marginTop:"0px",border:"1px dashed var(--app-color-gray-light)",padding:"5px"},editMode:ie,showWidth:function(n){e.field_options=(0,a.Z)((0,a.Z)({},e.field_options),{},{width:"".concat(n,"px")})},key:n,fieldLabel:e.field_name,notes:null===e||void 0===e||null===(Yi=e.options)||void 0===Yi?void 0:Yi.notes,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors},r.createElement("div",{style:{width:"100%"}},r.createElement(P.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-light)"},key:n,visible:e.visible,mandatory:e.mandatory,items:null===e||void 0===e||null===(Hi=e.options)||void 0===Hi?void 0:Hi.list.map((function(e){return{label:e,value:e}})),className:me.dropdownClassContainer,error:e.errors,onClicked:function(e){return zn(e?"180px":"50px")},onChange:function(e){zn("50px"),w(e,n)},selectionType:null===e||void 0===e||null===(ji=e.options)||void 0===ji?void 0:ji.type,fieldIcon:e.icon,value:void 0===e.value||null===e.value?"":e.value})));if("Payments"===(null===e||void 0===e?void 0:e.data_type_name))return r.createElement(he.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-dark)",fontWeight:"regular",paddingLeft:"5px"},enabled:Pl,width:"100%",style:{marginTop:"0px",border:"1px dashed var(--app-color-gray-light)",padding:"5px"},editMode:ie,showWidth:function(n){e.field_options=(0,a.Z)((0,a.Z)({},e.field_options),{},{width:"".concat(n,"px")})},key:n,fieldLabel:e.field_name,notes:null===e||void 0===e||null===(Vi=e.options)||void 0===Vi?void 0:Vi.notes,fieldIcon:e.icon,isProcess:!0,visible:!0,mandatory:e.mandatory,error:On[n]},r.createElement("div",{style:{width:"100%",pointerEvents:!0===(null===Y||void 0===Y||null===(Ji=Y.processModule)||void 0===Ji?void 0:Ji.isUpdating)?"none":""}},null!==b&&void 0!==b&&null!==(Gi=b.payments)&&void 0!==Gi&&Gi.stripe_id?r.createElement("div",{style:{padding:"10px 5px 10px 5px",width:"100%",border:"0px solid var(--app-color-gray-lighter)"}},"".concat(null===e||void 0===e?void 0:e.value,", ").concat(null===b||void 0===b||null===(ld=b.payments)||void 0===ld?void 0:ld.stripe_id.slice(0,6))):r.createElement(P.Z,{key:n,visible:e.visible,mandatory:e.mandatory,items:!0===(null===(Qi=Y.processModule)||void 0===Qi||null===(Ki=Qi.module)||void 0===Ki||null===(Xi=Ki.options)||void 0===Xi?void 0:Xi.credits)?[].concat((0,d.Z)(null!==($i=null===e||void 0===e||null===(ed=e.options)||void 0===ed?void 0:ed.list.map((function(e){return{label:e,value:e}})))&&void 0!==$i?$i:[]),[{label:"Wallet",value:"Wallet"}]):null===e||void 0===e||null===(nd=e.options)||void 0===nd?void 0:nd.list.map((function(e){return{label:e,value:e}})),className:me.dropdownClassContainer,error:e.errors,onClicked:function(e){return zn(e?"180px":"50px")},onChange:function(l){if(l){var o,t,i,d,a,u,r,s,v,c,p,m,f,_,y,h,g,b,x=null===(o=M.newStepComponents.find((function(n){return n.selected_fields.filter((function(n){var l;return n.field_name===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.paymentField)})).length>0})))||void 0===o||null===(t=o.selected_fields)||void 0===t?void 0:t.find((function(n){var l;return n.field_name===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.paymentField)})),E=null===(i=M.components.find((function(n){return n.selected_fields.filter((function(n){var l;return n.field_name===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.paymentField)})).length>0})))||void 0===i||null===(d=i.selected_fields)||void 0===d?void 0:d.find((function(n){var l;return n.field_name===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.paymentField)})),C=null===(a=M.currentStep)||void 0===a||null===(u=a.component_blueprints)||void 0===u||null===(r=u.find((function(n){var l;return null===n||void 0===n||null===(l=n.selected_fields)||void 0===l?void 0:l.find((function(n){var l;return n.field_name===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.paymentField)}))})))||void 0===r||null===(s=r.selected_fields)||void 0===s?void 0:s.find((function(n){var l;return n.field_name===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.paymentField)}));if(On[n]="",+(null!==(v=null===x||void 0===x?void 0:x.value)&&void 0!==v?v:0)>0)M.total=x.value,M.plan=x.value;else if(+(null!==(c=null===E||void 0===E?void 0:E.value)&&void 0!==c?c:0)>0)M.total=E.value,M.plan=E.value;else{if(!(+(null!==(p=null===C||void 0===C?void 0:C.value)&&void 0!==p?p:0)>0))return On[n]="Please enter a payment amount in the designated field",Rn([]),void setTimeout((function(){return Rn(On)}));M.total=C.value,M.plan=C.value}if(1==(null===(m=Y.processModule)||void 0===m||null===(f=m.module)||void 0===f||null===(_=f.options)||void 0===_?void 0:_.credits)&&"Wallet"===l){if(+(null!==(b=Oe.wallet)&&void 0!==b?b:0)<+M.total)return On[n]="Insufficient wallet balance",Rn([]),void setTimeout((function(){return Rn(On)}))}else if(1==(null===(y=Y.processModule)||void 0===y||null===(h=y.module)||void 0===h||null===(g=h.options)||void 0===g?void 0:g.credits)&&"Points"===l){var Z,S;if(+(null!==(Z=null===(S=Oe.options)||void 0===S?void 0:S.points)&&void 0!==Z?Z:0)<+M.total)return On[n]="Insufficient points balance",Rn([]),void setTimeout((function(){return Rn(On)}))}On[n]="",Rn([]),setTimeout((function(){return Rn(On)})),zn("50px"),w(l,n)}},selectionType:"Dropdown",fieldIcon:e.icon,value:void 0===e.value||null===e.value?"":e.value,placeholder:""})));if("Positions"===(null===e||void 0===e?void 0:e.data_type_name)&&"multiple"===(null===e||void 0===e||null===(Wn=e.options)||void 0===Wn?void 0:Wn.type))return r.createElement(he.Z,{enabled:Pl,style:{height:"".concat((null===e||void 0===e||null===(od=e.value)||void 0===od?void 0:od.split(",").length)>2?"160":"45","px"),marginBottom:"50px"},width:"100%",editMode:ie,key:n,fieldLabel:e.field_name,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors,notes:null===e||void 0===e||null===(td=e.options)||void 0===td?void 0:td.notes},r.createElement("div",{style:{width:"100%",border:"1px solid var(--app-color-gray-dark)"}},r.createElement(P.Z,{onOpen:function(e){zn("50px"===Dn?"180px":"50px")},visible:null===e||void 0===e?void 0:e.visible,mandatory:null===e||void 0===e?void 0:e.mandatory,className:me.dropdownClassContainer,items:X.filter((function(n){var l,o;return null===e||void 0===e||null===(l=e.options)||void 0===l||null===(o=l.position_id)||void 0===o?void 0:o.includes(null===n||void 0===n?void 0:n.value)})),value:e.value,loading:Ge,error:null===e||void 0===e?void 0:e.errors,onChange:function(e){w(e,n)},selectionType:"multiple",fieldIcon:null===e||void 0===e?void 0:e.icon,placeholder:""})));if("Positions"===(null===e||void 0===e?void 0:e.data_type_name)&&null!==e&&void 0!==e&&null!==(Bn=e.options)&&void 0!==Bn&&Bn.calendar){var ga,ba,xa,Ea,Ca,wa,Za,Ma,Sa,ka,Ia,Pa,Na,Ta,Da,za,Ua=JSON.parse(null!==(ga=null===e||void 0===e?void 0:e.value)&&void 0!==ga?ga:JSON.stringify({user:0})),Aa=Be.find((function(e){return e.id===(null===Ua||void 0===Ua?void 0:Ua.task)})),Oa=null===Be||void 0===Be?void 0:Be.filter((function(e){var n,l,o,t;return(null===e||void 0===e||null===(n=e.add_info)||void 0===n?void 0:n.module_id)===(null===(l=Y.processModule)||void 0===l?void 0:l.module_id)&&e.creator.id===(null===Ua||void 0===Ua?void 0:Ua.user)&&!(null!==e&&void 0!==e&&null!==(o=e.assignee)&&void 0!==o&&o.id)&&ae()((0,de.now)()).diff(ae()(null===e||void 0===e||null===(t=e.add_info)||void 0===t?void 0:t.start),"seconds")<0}));return r.createElement(he.Z,{enabled:Pl,style:{marginBottom:"50px"},width:"100%",editMode:ie,key:n,fieldLabel:e.field_name,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors,notes:null===e||void 0===e||null===(ba=e.options)||void 0===ba?void 0:ba.notes},r.createElement("div",{style:{display:"flex",flexDirection:"column",width:"100%"}},r.createElement("div",{style:{width:"100%",border:"1px solid var(--app-color-gray-light)"}},r.createElement(P.Z,{onFocus:function(){return 0==X.length&&cl()},visible:null===e||void 0===e?void 0:e.visible,mandatory:null===e||void 0===e?void 0:e.mandatory,className:"multiple"===(null===e||void 0===e||null===(xa=e.options)||void 0===xa?void 0:xa.type)?me.dropdownHeightClassContainer:me.dropdownClassContainer,value:null===(Ea=X.find((function(e){return e.value===(null===Ua||void 0===Ua?void 0:Ua.pos)})))||void 0===Ea?void 0:Ea.label,loading:Ge,items:X.filter((function(n){var l,o;return null===e||void 0===e||null===(l=e.options)||void 0===l||null===(o=l.position_id)||void 0===o?void 0:o.includes(null===n||void 0===n?void 0:n.value)})),error:null===e||void 0===e?void 0:e.errors,onChange:function(e){e.length>0&&(Ua.pos=void 0,Ua.user=void 0,w(JSON.stringify(Ua),n),(0,Ee.n0)([e]).pipe((0,c.q)(1)).subscribe({next:function(l){be(l),setTimeout((function(){Ua.pos=e,w(JSON.stringify(Ua),n)}),0)}}))},selectionType:null===e||void 0===e||null===(Ca=e.options)||void 0===Ca?void 0:Ca.type,fieldIcon:null===e||void 0===e?void 0:e.icon})),r.createElement("div",{style:{width:"100%"}},0==(null===_e||void 0===_e?void 0:_e.length)&&r.createElement("p",null,"No ".concat(e.field_name," found")),!Aa&&r.createElement(S.default,{initialSelected:null!==e&&void 0!==e&&e.value?_e.filter((function(e){var n,l;return(null===e||void 0===e||null===(n=e.user)||void 0===n||null===(l=n.positions)||void 0===l?void 0:l.filter((function(e){return(null===Ua||void 0===Ua?void 0:Ua.pos)===(null===e||void 0===e?void 0:e.id)})).length)>0})).map((function(e){return e.value})).indexOf(null===Ua||void 0===Ua?void 0:Ua.user):void 0,card:!0,isReport:!1,"app-variant-is-mobile":"true",columns:["Name","Info","About"].concat((0,d.Z)(null!==(wa=null===R||void 0===R||null===(Za=R.misc_info)||void 0===Za?void 0:Za.profile)&&void 0!==wa?wa:["Rate"]),["Location","Photo","Ratings"]),list:_e.filter((function(e){var n,l;return(null===e||void 0===e||null===(n=e.user)||void 0===n||null===(l=n.positions)||void 0===l?void 0:l.filter((function(e){return(null===Ua||void 0===Ua?void 0:Ua.pos)===(null===e||void 0===e?void 0:e.id)})).length)>0})).map((function(e){var n,l,o,t,i,d,u,s,v,c,p,m,f,_=null===e||void 0===e||null===(n=e.user)||void 0===n||null===(l=n.ratings)||void 0===l?void 0:l.map((function(e){return+e.ratings}));return(0,a.Z)((0,a.Z)({},null!==(o=null===(t=e.user)||void 0===t||null===(i=t.options)||void 0===i?void 0:i.add_info)&&void 0!==o?o:{}),{},{Name:"".concat(e.user.first_name," ").concat(e.user.last_name),Location:r.createElement("div",{style:{marginTop:"10px"}},null===(d=e.user)||void 0===d?void 0:d.city),About:null!==(u=null===(s=e.user.options)||void 0===s?void 0:s.info)&&void 0!==u?u:null===(v=e.user)||void 0===v?void 0:v.positions.map((function(e){return e.name})).toString().replace(",",", "),id:e.user.id,Photo:null!==(c=null===(p=e.user)||void 0===p?void 0:p.photo)&&void 0!==c?c:null===Y||void 0===Y||null===(m=Y.processModule.module)||void 0===m||null===(f=m.options)||void 0===f?void 0:f.background,Ratings:(null===_||void 0===_?void 0:_.length)>0&&r.createElement("div",{className:me.simpleNames},Array(Math.round(ne.Z(le.Z,[oe.Z,te.Z])(_))).fill(0).map((function(e,n){return r.createElement(ve.G,{key:n,icon:se.Tab,style:{color:"var(--app-color-blue)"}})})),Array(5-Math.round(ne.Z(le.Z,[oe.Z,te.Z])(_))).fill(0).map((function(e,n){return r.createElement(ve.G,{key:n,icon:se.Tab,style:{color:"lightgray"}})})))})})),onListItemClick:function(e){if(e){var l=_e.find((function(n){return n.value===e.id}));Ua.user=null===l||void 0===l?void 0:l.value,w(JSON.stringify(Ua),n),(0,Te.Mk)(null===l||void 0===l?void 0:l.value,!0).pipe((0,c.q)(1)).subscribe({})}}},(null===Oa||void 0===Oa?void 0:Oa.length)>0&&r.createElement("p",null,"Schedules"),(null===Oa||void 0===Oa?void 0:Oa.length)>0&&r.createElement(pe.tq,{slidesPerView:3,centeredSlides:!0,spaceBetween:5,initialSlide:1,pagination:{clickable:!0,dynamicBullets:!0},modules:[ce.pt,ce.tl],className:"mySwiper",style:{border:"0.8px dashed gray",padding:"5px",height:"200px",display:(null===Oa||void 0===Oa?void 0:Oa.length)>0?"":"none"}},null===Oa||void 0===Oa?void 0:Oa.map((function(e,n){return r.createElement(pe.o5,{key:n+100,className:me.swiperslide},r.createElement("div",{className:me.dashboardCard,onClick:function(){jn(!0),Qn(e)}},r.createElement("div",{style:{fontSize:"10px"}},ae()(new Date(e.add_info.start)).format("h:mm a")),e.add_info.end!==e.add_info.start&&r.createElement("div",{style:{fontSize:"10px"}},ae()(new Date(e.add_info.end)).format("h:mm a")),r.createElement("hr",{style:{border:"0.8px dashed gray"}}),r.createElement("p",{style:{fontSize:"12px",fontWeight:"bold"}},ae()(new Date(e.add_info.start)).format("MMM")),r.createElement("div",{style:{fontSize:"20px",fontWeight:"bold"}},ae()(new Date(e.add_info.start)).format("DD"))))})))),Aa&&r.createElement(S.default,{modern:!0,isReport:!1,"app-variant-is-mobile":"true",columns:["Responsible",null!==(Ma=null===e||void 0===e||null===(Sa=e.options)||void 0===Sa?void 0:Sa.header)&&void 0!==Ma?Ma:"Name",null!==(ka=null===e||void 0===e||null===(Ia=e.options)||void 0===Ia?void 0:Ia.start)&&void 0!==ka?ka:"Date","Photo"],list:[Aa].map((function(n){var l,o,t,d,a,u,r;return r={},(0,i.Z)(r,null!==(l=null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.header)&&void 0!==l?l:"Name",n.name),(0,i.Z)(r,null!==(t=null===e||void 0===e||null===(d=e.options)||void 0===d?void 0:d.start)&&void 0!==t?t:"Date",ae()(new Date(null===(a=n.add_info)||void 0===a?void 0:a.start)).format("MMM DD h:mm a")),(0,i.Z)(r,"Responsible","".concat(n.creator.first_name," ").concat(n.creator.last_name)),(0,i.Z)(r,"Photo",null===(u=n.creator)||void 0===u?void 0:u.photo),r})),onListItemClick:function(e){e&&(jn(!0),Qn(Aa))}}),Hn&&r.createElement(nn,{save:!1,modalVisible:Hn,heading:null!==(Pa=null===e||void 0===e||null===(Na=e.options)||void 0===Na?void 0:Na.header)&&void 0!==Pa?Pa:Gn?"Update Calendar":"Create New Calendar",labels:null===e||void 0===e?void 0:e.options,task:Gn,isProcess:!0,blured:!1,onClose:function(){return jn(!1)},isEdit:!!Gn,statuses:null===e||void 0===e||null===(Ta=e.options)||void 0===Ta?void 0:Ta.list,priority:null===e||void 0===e||null===(Da=e.options)||void 0===Da?void 0:Da.priority,span:null===e||void 0===e||null===(za=e.options)||void 0===za?void 0:za.span,start_date:en,onUpdate:function(l){if(l.creator.id!==(null===Ce||void 0===Ce?void 0:Ce.id)&&(null===l||void 0===l?void 0:l.assignee_id)===(null===Ce||void 0===Ce?void 0:Ce.id)){var o;if(M.assigned_to=l.creator.id,Ua.task=null===l||void 0===l?void 0:l.id,null!==l&&void 0!==l&&null!==(o=l.add_info)&&void 0!==o&&o.value){var t,i,d,a,u,r,s,v,c;Ua.value=null===l||void 0===l||null===(t=l.add_info)||void 0===t?void 0:t.value;var p,m=null===(i=M.components.find((function(n){return n.selected_fields.find((function(n){var l;return n.field_name===(null===(l=e.options)||void 0===l?void 0:l.valueL)}))})))||void 0===i?void 0:i.selected_fields.find((function(n){var l;return n.field_name===(null===(l=e.options)||void 0===l?void 0:l.valueL)}));if(m)m.value=null===l||void 0===l||null===(p=l.add_info)||void 0===p?void 0:p.value;var f,_=null===(d=M.newStepComponents.find((function(n){return n.selected_fields.find((function(n){var l;return n.field_name===(null===(l=e.options)||void 0===l?void 0:l.valueL)}))})))||void 0===d?void 0:d.selected_fields.find((function(n){var l;return n.field_name===(null===(l=e.options)||void 0===l?void 0:l.valueL)}));if(_)_.value=null===l||void 0===l||null===(f=l.add_info)||void 0===f?void 0:f.value;var y,h=null===(a=Y.processModule)||void 0===a||null===(u=a.steps)||void 0===u||null===(r=u.find((function(n){var l;return null===(l=n.component_blueprints)||void 0===l?void 0:l.find((function(n){var l;return null===n||void 0===n||null===(l=n.selected_fields)||void 0===l?void 0:l.find((function(n){var l;return n.field_name===(null===(l=e.options)||void 0===l?void 0:l.valueL)}))}))})))||void 0===r||null===(s=r.component_blueprints)||void 0===s||null===(v=s.find((function(n){var l;return null===n||void 0===n||null===(l=n.selected_fields)||void 0===l?void 0:l.find((function(n){var l;return n.field_name===(null===(l=e.options)||void 0===l?void 0:l.valueL)}))})))||void 0===v||null===(c=v.selected_fields)||void 0===c?void 0:c.find((function(n){var l;return n.field_name===(null===(l=e.options)||void 0===l?void 0:l.valueL)}));if(h)h.value=null===l||void 0===l||null===(y=l.add_info)||void 0===y?void 0:y.value}w(JSON.stringify(Ua),n)}}}))))}if("Positions"===(null===e||void 0===e?void 0:e.data_type_name))return r.createElement(he.Z,{enabled:Pl,titleProps:{fontSize:"12px",color:"var(--app-color-gray-dark)",fontWeight:"regular",paddingLeft:"5px"},style:{marginTop:"0px",border:"1px dashed var(--app-color-gray-light)",padding:"5px"},width:"100%",editMode:ie,key:n,fieldLabel:e.field_name,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors,notes:null===e||void 0===e||null===(id=e.options)||void 0===id?void 0:id.notes},r.createElement("div",{style:{width:"100%",bborder:"1px dashed var(--app-color-gray-light)"}},r.createElement(P.Z,{visible:null===e||void 0===e?void 0:e.visible,mandatory:null===e||void 0===e?void 0:e.mandatory,className:"multiple"===(null===e||void 0===e||null===(dd=e.options)||void 0===dd?void 0:dd.type)?me.dropdownHeightClassContainer:me.dropdownClassContainer,items:X.filter((function(n){var l,o;return null===e||void 0===e||null===(l=e.options)||void 0===l||null===(o=l.position_id)||void 0===o?void 0:o.includes(null===n||void 0===n?void 0:n.value)})),value:null===(ad=X.find((function(n){return n.value===e.value})))||void 0===ad?void 0:ad.label,loading:Ge,error:null===e||void 0===e?void 0:e.errors,onChange:function(l){var o;w(l,n),null!==e&&void 0!==e&&null!==(o=e.options)&&void 0!==o&&o.addToPos&&(0,Ee.Vy)(Ce,(0,a.Z)((0,a.Z)({},null===Ce||void 0===Ce?void 0:Ce.options),{},{selPos:l})).pipe((0,v.P)()).subscribe({next:function(e){(0,Z.aT)(l,null===Ce||void 0===Ce?void 0:Ce.id).subscribe({next:function(){var n;(Ce.options.selPos&&Ce.options.selPos!==l?(0,Z._s)(Ce.options.selPos,null===Ce||void 0===Ce?void 0:Ce.id).subscribe({next:function(){window.scrollTo({top:0,behavior:"smooth"})}}):window.scrollTo({top:0,behavior:"smooth"}),null!==e&&void 0!==e&&e.user)||(Ce.options.selPos=null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.selPos)}})}})},selectionType:null===e||void 0===e||null===(ud=e.options)||void 0===ud?void 0:ud.type,fieldIcon:null===e||void 0===e?void 0:e.icon})));if("Value Button"===(null===e||void 0===e?void 0:e.data_type_name))return r.createElement(he.Z,{width:"100%",editMode:ie,key:n,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors,customIconBgColor:"white"},r.createElement(S.default,{rowStyleSelected:{border:null!==e&&void 0!==e&&e.value?"2px solid black":"1px dashed black"},initialSelected:(null===(rd=e.options)||void 0===rd?void 0:rd.value)===(null===e||void 0===e?void 0:e.value)?0:void 0,modern:!0,isReport:!1,filtersContainer:me.filtersContainerII,"app-variant-is-mobile":"true",columns:["Type","Description","Image"],list:[{Type:null===(sd=e.options)||void 0===sd?void 0:sd.label,Description:null!==(vd=null===e||void 0===e||null===(cd=e.options)||void 0===cd?void 0:cd.notes)&&void 0!==vd?vd:e.field_name,Image:null===(pd=e.options)||void 0===pd?void 0:pd.image}],onListItemClick:function(){var l;null!==e&&void 0!==e&&e.value?x(void 0,n):(null===g||void 0===g||null===(l=g.selected_fields)||void 0===l||l.filter((function(e){return"Value Button"===(null===e||void 0===e?void 0:e.data_type_name)})).map((function(e){e.value=void 0})),x(e.options.value,n))}}));if("Calendar"===(null===e||void 0===e?void 0:e.data_type_name))return r.createElement(he.Z,{enabled:Pl,width:"100%",style:{width:"100%"},editMode:ie,showWidth:function(n){e.field_options=(0,a.Z)((0,a.Z)({},e.field_options),{},{width:"".concat(n,"px")})},key:n,fieldLabel:e.field_name,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors,notes:null===e||void 0===e||null===(md=e.options)||void 0===md?void 0:md.notes},r.createElement("div",{id:e.field_name,style:{width:"inherit",marginBottom:"160px"}},r.createElement(y.zx,{light:!0,clicked:function(){var e,n;Ke(!0),(0,Te.Mk)(null!==(e=null===b||void 0===b||null===(n=b.created_by)||void 0===n?void 0:n.id)&&void 0!==e?e:Ce.id,!0).pipe((0,c.q)(1)).subscribe({next:function(){Ke(!1)}})},loading:Ge,icon:r.createElement("img",{src:C.Fdh})}),!(Hn||Ge)&&r.createElement(fe.Scheduler,{events:Be.length>0?null===Be||void 0===Be||null===(fd=Be.filter((function(e){var n,l;return(null===e||void 0===e||null===(n=e.add_info)||void 0===n?void 0:n.module_id)===(null===(l=Y.processModule)||void 0===l?void 0:l.module_id)})))||void 0===fd?void 0:fd.map((function(e){var n,l;return{event_id:e.id,title:e.description,start:new Date(Date.parse(null===(n=e.add_info)||void 0===n?void 0:n.start)),end:null!==e&&void 0!==e&&e.completed_at?new Date(Date.parse(e.completed_at)):new Date(Date.parse(null===(l=e.add_info)||void 0===l?void 0:l.end)),admin_id:2,color:"#50b500",editable:!1,deletable:!1}})):[],navigation:!0,view:$n,agenda:(null===b||void 0===b||null===(_d=b.created_by)||void 0===_d?void 0:_d.id)!==Ce.id&&!(null===b||void 0===b||null===(yd=b.created_by)||void 0===yd||!yd.id),day:{startHour:0,endHour:24,cellRenderer:function(e){e.height,e.start,e.onClick;var n=!1,l=(0,t.Z)(e,Le);return r.createElement(y.zx,(0,o.Z)({style:{height:"100%",background:"transparent",cursor:"pointer"},clicked:function(){jn(!0),Qn(void 0)},disabled:n},l))}},month:(null===b||void 0===b||null===(hd=b.created_by)||void 0===hd?void 0:hd.id)!==Ce.id&&void 0!==(null===b||void 0===b?void 0:b.created_by)?null:{cellRenderer:function(e){e.height,e.start,e.onClick;var n=!1,l=(0,t.Z)(e,We);return r.createElement(y.zx,(0,o.Z)({style:{height:"100%",background:"transparent",cursor:"pointer"},clicked:function(){jn(!0),Qn(void 0)},disabled:n},l))}},week:(null===b||void 0===b||null===(gd=b.created_by)||void 0===gd?void 0:gd.id)!==Ce.id&&void 0!==(null===b||void 0===b?void 0:b.created_by)?null:{weekDays:[0,1,2,3,4,5],weekStartOn:6,startHour:0,endHour:25,step:60,cellRenderer:function(e){e.height;var n=e.start,l=(e.onClick,!1),i=(0,t.Z)(e,qe);return r.createElement(y.zx,(0,o.Z)({style:{height:"100%",background:"transparent",cursor:"pointer"},clicked:function(){ln(n),jn(!0),Qn(void 0)},disabled:l},i))}},onEventClick:function(e){jn(!0),Qn(null===Be||void 0===Be?void 0:Be.find((function(n){return n.id===e.event_id})))},onViewChange:function(e){return el(e)}}),Hn&&r.createElement(nn,{modalVisible:Hn,heading:null!==e&&void 0!==e&&null!==(bd=e.options)&&void 0!==bd&&bd.title?null===e||void 0===e||null===(xd=e.options)||void 0===xd?void 0:xd.title:Gn?"Update Calendar":"Create New Calendar",task:Gn,isProcess:!0,blured:!1,onClose:function(){return jn(!1)},isEdit:!!Gn,statuses:null===e||void 0===e||null===(Ed=e.options)||void 0===Ed?void 0:Ed.list,priority:null===e||void 0===e||null===(Cd=e.options)||void 0===Cd?void 0:Cd.priority,span:null===e||void 0===e||null===(wd=e.options)||void 0===wd?void 0:wd.span,start_date:en})));if("Video"===(null===e||void 0===e?void 0:e.data_type_name)&&null!==e&&void 0!==e&&null!==(Yn=e.options)&&void 0!==Yn&&Yn.start)return r.createElement(he.Z,{enabled:Pl,width:"100%",editMode:ie,style:{},key:n,fieldLabel:e.field_name,notes:null===e||void 0===e||null===(Zd=e.options)||void 0===Zd?void 0:Zd.notes,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors},r.createElement("div",{style:{width:"100%",height:"auto",border:"1px solid var(--app-color-gray-light)"}},r.createElement("div",{id:"custom-input",style:{cursor:"pointer",display:"flex",justifyContent:"center",width:"100%",alignItems:"stretch",padding:"5px",border:"0px solid var(--app-color-gray-lighter)"}},r.createElement(ve.G,{icon:se.WRo,style:{width:"20px",height:"20px"}}),r.createElement("input",{value:e.value?ae()(e.value).format("DD MMMM YYYY HH:mm"):"",disabled:!0,type:"text",style:{flex:1,marginTop:"auto",marginBottom:"auto",outline:"none",fontFamily:"var(--app-text-main-font)",fontSize:"16px",lineHeight:"20px",color:"#4A4A4A",textAlign:"left",maxWidth:"98%",border:"0px"},onChange:function(e){}})),r.createElement(Ae.Z,{payload:{name:null===b||void 0===b?void 0:b.id}})));if("Video"!==(null===e||void 0===e?void 0:e.data_type_name)||null!==e&&void 0!==e&&null!==(Vn=e.options)&&void 0!==Vn&&Vn.start){if("People"===(null===e||void 0===e?void 0:e.data_type_name)&&null!==e&&void 0!==e&&null!==(Jn=e.options)&&void 0!==Jn&&Jn.calendar){var Ra,La,Wa,qa,Fa,Ba,Ya,Ha,ja,Va,Ja,Ga,Qa,Ka,Xa,$a,eu,nu,lu,ou,tu,iu=JSON.parse(null!==(Ra=null===e||void 0===e?void 0:e.value)&&void 0!==Ra?Ra:JSON.stringify({user:0})),du=Be.find((function(e){return e.id===(null===iu||void 0===iu?void 0:iu.task)})),au=null===Be||void 0===Be?void 0:Be.filter((function(e){var n,l,o,t;return(null===e||void 0===e||null===(n=e.add_info)||void 0===n?void 0:n.module_id)===(null===(l=Y.processModule)||void 0===l?void 0:l.module_id)&&e.creator.id===(null===iu||void 0===iu?void 0:iu.user)&&!(null!==e&&void 0!==e&&null!==(o=e.assignee)&&void 0!==o&&o.id)&&ae()((0,de.now)()).diff(ae()(null===e||void 0===e||null===(t=e.add_info)||void 0===t?void 0:t.start),"seconds")<0}));return r.createElement(he.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-dark)",fontWeight:"regular"},enabled:Pl,width:"100%",editMode:ie,dragEnd:function(n){var l,o=null===(l=document.getElementById(null===g||void 0===g?void 0:g.name))||void 0===l?void 0:l.getBoundingClientRect();document.getElementById(e.field_name).style.position="absolute",document.getElementById(e.field_name).style.top="".concat(n.top-o.top,"px"),document.getElementById(e.field_name).style.left="".concat(n.left-o.left,"px")},key:n,fieldLabel:null===e||void 0===e?void 0:e.field_name,notes:null===e||void 0===e||null===(La=e.options)||void 0===La?void 0:La.notes,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors},r.createElement("div",{style:{width:"100%"}},(null===e||void 0===e||null===(Wa=e.options)||void 0===Wa||null===(qa=Wa.dropdown)||void 0===qa?void 0:qa.length)>0&&r.createElement("div",{style:{width:"100%",border:"0.5px solid var(--app-color-gray-dark)"}},r.createElement(P.Z,{visible:null===e||void 0===e?void 0:e.visible,mandatory:null===e||void 0===e?void 0:e.mandatory,className:me.dropdownClassContainer,items:null===e||void 0===e||null===(Fa=e.options)||void 0===Fa||null===(Ba=Fa.dropdown)||void 0===Ba?void 0:Ba.map((function(e){return{label:e,value:e}})),value:null===iu||void 0===iu?void 0:iu.pos,error:null===e||void 0===e?void 0:e.errors,onChange:function(l){var o,t;l.length>0&&(iu.pos=void 0,iu.user=void 0,w(JSON.stringify(iu),n),be([]),Ke(!0),(0,Ee.FY)(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.position_id,null===e||void 0===e||null===(t=e.options)||void 0===t?void 0:t.filter,l).pipe((0,c.q)(1)).subscribe({next:function(e){Ke(!1),be(e),setTimeout((function(){iu.pos=l,w(JSON.stringify(iu),n)}),0)},error:function(){return Ke(!1)}}))},selectionType:null===e||void 0===e||null===(Ya=e.options)||void 0===Ya?void 0:Ya.type,fieldIcon:null===e||void 0===e?void 0:e.icon})),0==(null===_e||void 0===_e?void 0:_e.length)&&!Ge&&r.createElement("p",null,"No ".concat(e.field_name," found")),0==(null===_e||void 0===_e?void 0:_e.length)&&Ge&&r.createElement("p",null,"Searching for ".concat(e.field_name)),!du&&r.createElement(S.default,{rowStyleSelected:{border:"2px solid var(--app-color-gray-light)"},initialSelected:null!==e&&void 0!==e&&e.value?_e.filter((function(n){var l,o;return(null===n||void 0===n||null===(l=n.user)||void 0===l||null===(o=l.positions)||void 0===o?void 0:o.filter((function(n){var l,o;return null===e||void 0===e||null===(l=e.options)||void 0===l||null===(o=l.position_id)||void 0===o?void 0:o.includes(null===n||void 0===n?void 0:n.id)})).length)>0})).map((function(e){return e.value})).indexOf(null===iu||void 0===iu?void 0:iu.user):void 0,card:!0,isReport:!1,"app-variant-is-mobile":"true",columns:["Name","Info","About"].concat((0,d.Z)(null!==(Ha=null===R||void 0===R||null===(ja=R.misc_info)||void 0===ja?void 0:ja.profile)&&void 0!==Ha?Ha:["Rate"]),["Location","Photo","Ratings"]),list:_e.filter((function(n){var l,o;return(null===n||void 0===n||null===(l=n.user)||void 0===l||null===(o=l.positions)||void 0===o?void 0:o.filter((function(n){var l,o;return null===e||void 0===e||null===(l=e.options)||void 0===l||null===(o=l.position_id)||void 0===o?void 0:o.includes(null===n||void 0===n?void 0:n.id)})).length)>0})).map((function(e){var n,l,o,t,i,d,u,s,v,c,p,m=null===e||void 0===e||null===(n=e.user)||void 0===n||null===(l=n.ratings)||void 0===l?void 0:l.map((function(e){return+e.ratings}));return(0,a.Z)((0,a.Z)({},null!==(o=null===(t=e.user)||void 0===t||null===(i=t.options)||void 0===i?void 0:i.add_info)&&void 0!==o?o:{}),{},{Name:"".concat(e.user.first_name," ").concat(e.user.last_name),Location:r.createElement("div",{style:{marginTop:"10px",fontWeight:"bolder",fontSize:"12px"}},null===(d=e.user)||void 0===d?void 0:d.city),Info:null===(u=e.user.options)||void 0===u?void 0:u.info,id:e.user.id,Photo:null!==(s=null===(v=e.user)||void 0===v?void 0:v.photo)&&void 0!==s?s:null===Y||void 0===Y||null===(c=Y.processModule.module)||void 0===c||null===(p=c.options)||void 0===p?void 0:p.background,Ratings:(null===m||void 0===m?void 0:m.length)>0&&r.createElement("div",{className:me.simpleNames},Array(Math.round(ne.Z(le.Z,[oe.Z,te.Z])(m))).fill(0).map((function(e,n){return r.createElement(ve.G,{key:n,icon:se.Tab,style:{color:"var(--app-color-blue)"}})})),Array(5-Math.round(ne.Z(le.Z,[oe.Z,te.Z])(m))).fill(0).map((function(e,n){return r.createElement(ve.G,{key:n,icon:se.Tab,style:{color:"lightgray"}})})))})})),onListItemClick:function(e){if(e){var l=_e.find((function(n){return n.value===e.id}));iu.user=null===l||void 0===l?void 0:l.value,w(JSON.stringify(iu),n),Ke(!0),(0,Te.Mk)(null===l||void 0===l?void 0:l.value,!0).pipe((0,c.q)(1)).subscribe({next:function(){return Ke(!1)},error:function(){return Ke(!1)}})}}},(null===au||void 0===au?void 0:au.length)>0&&r.createElement("p",null,"Schedules"),(null===au||void 0===au?void 0:au.length)>0&&(null===au||void 0===au?void 0:au.length)>0?r.createElement(pe.tq,{slidesPerView:3,centeredSlides:!0,spaceBetween:10,initialSlide:1,pagination:{clickable:!0,dynamicBullets:!0},modules:[ce.pt,ce.tl],className:"mySwiper",style:{border:"0.8px dashed gray",padding:"5px",height:"200px",display:(null===au||void 0===au?void 0:au.length)>0?"":"none",zIndex:"0"}},null===(Va=V.Z([J.Z(G.Z("due_date"))])(au))||void 0===Va?void 0:Va.map((function(e,n){return r.createElement(pe.o5,{key:n+200,className:me.swiperslide},r.createElement("div",{className:me.dashboardCard,onClick:function(){jn(!0),Qn(e)}},r.createElement("div",{style:{fontSize:"10px"}},ae()(new Date(e.add_info.start)).format("h:mm a")),e.add_info.end!==e.add_info.start&&r.createElement("div",{style:{fontSize:"10px"}},ae()(new Date(e.add_info.end)).format("h:mm a")),r.createElement("hr",{style:{border:"0.8px dashed gray"}}),r.createElement("p",{style:{fontSize:"12px",fontWeight:"bold"}},ae()(new Date(e.add_info.start)).format("MMM")),r.createElement("div",{style:{fontSize:"20px",fontWeight:"bold"}},ae()(new Date(e.add_info.start)).format("DD"))))}))):null!==iu&&void 0!==iu&&iu.user?r.createElement("p",{style:{fontSize:"12px",paddingLeft:"10px"}},Ge?"Searching for Schedules":"No Schedules Found"):r.createElement("div",null)),r.createElement("div",{className:me.centerDiv},!du&&!(null!==e&&void 0!==e&&null!==(Ja=e.options)&&void 0!==Ja&&Ja.dropdown)&&(!(null!==e&&void 0!==e&&e.last_page)||1===(null===e||void 0===e?void 0:e.last_page))&&r.createElement(y.zx,{title:"More",style:{width:"30%"},clicked:function(){var l,o;(0,Ee.Wz)(null===(l=Y.processModule.module)||void 0===l||null===(o=l.options)||void 0===o?void 0:o.positions,5,1).pipe((0,v.P)()).subscribe({next:function(l){e.last_page=null===l||void 0===l?void 0:l.last_page,be(null===l||void 0===l?void 0:l.data),iu.user=void 0,w(JSON.stringify(iu),n)}})}}),!du&&!(null!==e&&void 0!==e&&null!==(Ga=e.options)&&void 0!==Ga&&Ga.dropdown)&&(null===e||void 0===e?void 0:e.last_page)>1&&r.createElement("div",{style:{display:"flex"}},(0,d.Z)(Array(Math.ceil(+(null===e||void 0===e?void 0:e.last_page)))).map((function(l,o){return r.createElement(y.zx,{title:o+1,clear:!0,key:o,style:{width:"40px",display:o<18?"":"none"},titleContainer:me.pageContainer,disabled:o==(null===e||void 0===e?void 0:e.page)-1,clicked:function(){var l,t;e.page=o+1,(0,Ee.Wz)(null===(l=Y.processModule.module)||void 0===l||null===(t=l.options)||void 0===t?void 0:t.positions,5,null===e||void 0===e?void 0:e.page).pipe((0,v.P)()).subscribe({next:function(l){e.last_page=null===l||void 0===l?void 0:l.last_page,be(null===l||void 0===l?void 0:l.data),iu.user=void 0,w(JSON.stringify(iu),n)}})}})})))),du&&r.createElement(S.default,{modern:!0,isReport:!1,"app-variant-is-mobile":"true",columns:["Responsible",null!==(Qa=null===e||void 0===e||null===(Ka=e.options)||void 0===Ka?void 0:Ka.header)&&void 0!==Qa?Qa:"Name",null!==(Xa=null===e||void 0===e||null===($a=e.options)||void 0===$a?void 0:$a.start)&&void 0!==Xa?Xa:"Date","Photo"],list:[du].map((function(n){var l,o,t,d,a,u,r;return r={},(0,i.Z)(r,null!==(l=null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.header)&&void 0!==l?l:"Name",n.name),(0,i.Z)(r,null!==(t=null===e||void 0===e||null===(d=e.options)||void 0===d?void 0:d.start)&&void 0!==t?t:"Date",ae()(new Date(null===(a=n.add_info)||void 0===a?void 0:a.start)).format("MMM DD h:mm a")),(0,i.Z)(r,"Responsible","".concat(n.creator.first_name," ").concat(n.creator.last_name)),(0,i.Z)(r,"Position",""),(0,i.Z)(r,"Photo",null===(u=n.creator)||void 0===u?void 0:u.photo),r})),onListItemClick:function(e){e&&(jn(!0),Qn(du))}}),Hn&&r.createElement(nn,{save:!1,modalVisible:Hn,heading:null!==(eu=null===e||void 0===e||null===(nu=e.options)||void 0===nu?void 0:nu.header)&&void 0!==eu?eu:Gn?"Update Calendar":"Create New Calendar",labels:null===e||void 0===e?void 0:e.options,task:Gn,isProcess:!0,blured:!1,onClose:function(){return jn(!1)},isEdit:!!Gn,statuses:null===e||void 0===e||null===(lu=e.options)||void 0===lu?void 0:lu.list,priority:null===e||void 0===e||null===(ou=e.options)||void 0===ou?void 0:ou.priority,span:null===e||void 0===e||null===(tu=e.options)||void 0===tu?void 0:tu.span,start_date:en,onUpdate:function(l){if(l.creator.id!==(null===Ce||void 0===Ce?void 0:Ce.id)&&(null===l||void 0===l?void 0:l.assignee_id)===(null===Ce||void 0===Ce?void 0:Ce.id)){var o;if(M.assigned_to=l.creator.id,iu.task=null===l||void 0===l?void 0:l.id,null!==l&&void 0!==l&&null!==(o=l.add_info)&&void 0!==o&&o.value){var t,i,d,a,u,r,s,v,c;iu.value=null===l||void 0===l||null===(t=l.add_info)||void 0===t?void 0:t.value;var p,m=null===(i=M.components.find((function(n){return n.selected_fields.find((function(n){var l;return n.field_name===(null===(l=e.options)||void 0===l?void 0:l.valueL)}))})))||void 0===i?void 0:i.selected_fields.find((function(n){var l;return n.field_name===(null===(l=e.options)||void 0===l?void 0:l.valueL)}));if(m)m.value=null===l||void 0===l||null===(p=l.add_info)||void 0===p?void 0:p.value;var f,_=null===(d=M.newStepComponents.find((function(n){return n.selected_fields.find((function(n){var l;return n.field_name===(null===(l=e.options)||void 0===l?void 0:l.valueL)}))})))||void 0===d?void 0:d.selected_fields.find((function(n){var l;return n.field_name===(null===(l=e.options)||void 0===l?void 0:l.valueL)}));if(_)_.value=null===l||void 0===l||null===(f=l.add_info)||void 0===f?void 0:f.value;var y,h=null===(a=Y.processModule)||void 0===a||null===(u=a.steps)||void 0===u||null===(r=u.find((function(n){var l;return null===(l=n.component_blueprints)||void 0===l?void 0:l.find((function(n){var l;return null===n||void 0===n||null===(l=n.selected_fields)||void 0===l?void 0:l.find((function(n){var l;return n.field_name===(null===(l=e.options)||void 0===l?void 0:l.valueL)}))}))})))||void 0===r||null===(s=r.component_blueprints)||void 0===s||null===(v=s.find((function(n){var l;return null===n||void 0===n||null===(l=n.selected_fields)||void 0===l?void 0:l.find((function(n){var l;return n.field_name===(null===(l=e.options)||void 0===l?void 0:l.valueL)}))})))||void 0===v||null===(c=v.selected_fields)||void 0===c?void 0:c.find((function(n){var l;return n.field_name===(null===(l=e.options)||void 0===l?void 0:l.valueL)}));if(h)h.value=null===l||void 0===l||null===(y=l.add_info)||void 0===y?void 0:y.value}w(JSON.stringify(iu),n)}}})))}var uu,ru,su,vu,cu,pu,mu,fu,_u,yu,hu,gu,bu,xu,Eu,Cu,wu,Zu,Mu,Su,ku,Iu,Pu,Nu,Tu,Du,zu,Uu,Au,Ou,Ru,Lu,Wu,qu,Fu,Bu,Yu,Hu,ju,Vu,Ju,Gu,Qu,Ku,Xu,$u,er;if("People"===(null===e||void 0===e?void 0:e.data_type_name)&&(!0===(null===e||void 0===e||null===(Kn=e.options)||void 0===Kn?void 0:Kn.slider)||ol)&&(null===K||void 0===K?void 0:K.length)>0)return r.createElement(he.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-dark)",fontWeight:"regular",paddingLeft:"5px"},enabled:Pl,width:"100%",editMode:ie,showWidth:function(n){e.field_options=(0,a.Z)((0,a.Z)({},e.field_options),{},{width:"".concat(n,"px")})},dragEnd:function(n){var l,o=null===(l=document.getElementById(null===g||void 0===g?void 0:g.name))||void 0===l?void 0:l.getBoundingClientRect();document.getElementById(e.field_name).style.position="absolute",document.getElementById(e.field_name).style.top="".concat(n.top-o.top,"px"),document.getElementById(e.field_name).style.left="".concat(n.left-o.left,"px")},key:n,notes:null===e||void 0===e||null===(uu=e.options)||void 0===uu?void 0:uu.notes,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors},r.createElement(pe.tq,{slidesPerView:1,centeredSlides:!0,spaceBetween:10,initialSlide:0,pagination:{clickable:!0,dynamicBullets:!0},style:{zIndex:0},modules:[ce.pt,ce.tl],className:"mySwiper"},K.filter((function(n){var l;return(null===n||void 0===n||null===(l=n.positions)||void 0===l?void 0:l.filter((function(n){var l,o;return null===e||void 0===e||null===(l=e.options)||void 0===l||null===(o=l.position_id)||void 0===o?void 0:o.includes(null===n||void 0===n?void 0:n.id)})).length)>0})).map((function(l,o){var t,d,u,s,v,c,p,m,f,_,y,h=null===l||void 0===l||null===(t=l.ratings)||void 0===t?void 0:t.map((function(e){return+e.ratings}));return r.createElement(pe.o5,{key:o,className:me.swiperslide},r.createElement("div",{style:{padding:"20px",width:"100%"},onClick:function(){var o;e.open=null===e||void 0===e||!e.open,e.idx=n,null!==e&&void 0!==e&&null!==(o=e.options)&&void 0!==o&&o.skip?tl(e.open):w(null===l||void 0===l?void 0:l.id,n)}},r.createElement(Pe.Z,{photo:null===l||void 0===l?void 0:l.photo,height:null!==e&&void 0!==e&&e.open?"auto":"300px",width:"100%",firstName:"".concat(null===l||void 0===l?void 0:l.first_name),lastName:"".concat(null===l||void 0===l?void 0:l.last_name),position:r.createElement("div",{style:{marginTop:"10px"}},null===l||void 0===l?void 0:l.city),email:null===(d=l.options)||void 0===d?void 0:d.info},(null===h||void 0===h?void 0:h.length)>0&&r.createElement("div",{className:me.simpleNames},Array(Math.round(ne.Z(le.Z,[oe.Z,te.Z])(h))).fill(0).map((function(e,n){return r.createElement(ve.G,{key:n,icon:se.Tab,style:{height:"15px",width:"15px",color:"var(--app-color-blue)"}})})),Array(5-Math.round(ne.Z(le.Z,[oe.Z,te.Z])(h))).fill(0).map((function(e,n){return r.createElement(ve.G,{key:n,icon:se.Tab,style:{height:"15px",width:"15px",color:"lightgray"}})}))),r.createElement("div",{className:me.simpleNames,style:{pointerEvents:"none",padding:"20px 10px 0 10px",color:"gray"}},(null===(u=e.options)||void 0===u?void 0:u.info)&&(null===e||void 0===e?void 0:e.open)&&(null===e||void 0===e?void 0:e.idx)==n&&r.createElement(r.Fragment,null,r.createElement("p",{style:{fontSize:"14px"}},"General Info:"),r.createElement(S.default,{rowStyleSelected:{border:"2px solid var(--app-color-gray-light)"},card:!0,isReport:!1,"app-variant-is-mobile":"true",columns:["First Name","Last Name","Phone","Address","City","Postal","Bio"],list:[l].map((function(e){var n,l,o,t,d,a,u;return u={},(0,i.Z)(u,"First Name","".concat(null!==(n=null===e||void 0===e?void 0:e.first_name)&&void 0!==n?n:"")),(0,i.Z)(u,"Last Name","".concat(null!==(l=null===e||void 0===e?void 0:e.last_name)&&void 0!==l?l:"")),(0,i.Z)(u,"Phone","".concat(null!==(o=null===e||void 0===e?void 0:e.phone)&&void 0!==o?o:"")),(0,i.Z)(u,"Address","".concat(null!==(t=null===e||void 0===e?void 0:e.address)&&void 0!==t?t:"")),(0,i.Z)(u,"City","".concat(null!==(d=null===e||void 0===e?void 0:e.city)&&void 0!==d?d:"")),(0,i.Z)(u,"Postal","".concat(null!==(a=null===e||void 0===e?void 0:e.postal)&&void 0!==a?a:"")),u}))})),(null===(s=e.options)||void 0===s?void 0:s.other)&&(null===e||void 0===e?void 0:e.open)&&(null===e||void 0===e?void 0:e.idx)==n&&Object.keys(null!==(v=null===l||void 0===l||null===(c=l.options)||void 0===c?void 0:c.add_info)&&void 0!==v?v:{}).length>1&&r.createElement(r.Fragment,null,r.createElement("p",{style:{fontSize:"14px"}},"More Info:"),r.createElement(S.default,{rowStyleSelected:{border:"2px solid var(--app-color-gray-light)"},card:!0,isReport:!1,"app-variant-is-mobile":"true",columns:Object.keys(null!==(p=null===l||void 0===l||null===(m=l.options)||void 0===m?void 0:m.add_info)&&void 0!==p?p:{}),list:[l].map((function(e){var n,l;return(0,a.Z)((0,a.Z)({},null!==(n=null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.add_info)&&void 0!==n?n:{}),{},{Rate:""})}))})),(null===(f=e.options)||void 0===f?void 0:f.info)&&(null===e||void 0===e?void 0:e.open)&&(null===l||void 0===l||null===(_=l.ratings)||void 0===_?void 0:_.length)>0&&r.createElement(r.Fragment,null,r.createElement("p",{style:{fontSize:"14px"}},"What other users say:"),r.createElement(S.default,{rowStyleSelected:{border:"2px solid var(--app-color-gray-light)"},card:!0,isReport:!1,columns:["Feedback"],list:null===l||void 0===l||null===(y=l.ratings)||void 0===y?void 0:y.map((function(e,n){return{Feedback:'"'.concat(e.comments,'"')}}))}))))))}))));if("People"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(Xn=e.options)||void 0===Xn||null===(nl=Xn.position_id)||void 0===nl?void 0:nl.length)>0)return r.createElement(he.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-dark)",fontWeight:"regular",paddingLeft:"5px"},enabled:Pl,width:"100%",style:{marginTop:"0px",border:"1px dashed var(--app-color-gray-light)",padding:"5px"},editMode:ie,showWidth:function(n){e.field_options=(0,a.Z)((0,a.Z)({},e.field_options),{},{width:"".concat(n,"px")})},dragEnd:function(n){var l,o=null===(l=document.getElementById(null===g||void 0===g?void 0:g.name))||void 0===l?void 0:l.getBoundingClientRect();document.getElementById(e.field_name).style.position="absolute",document.getElementById(e.field_name).style.top="".concat(n.top-o.top,"px"),document.getElementById(e.field_name).style.left="".concat(n.left-o.left,"px")},key:n,fieldLabel:e.field_name,notes:null===e||void 0===e||null===(ru=e.options)||void 0===ru?void 0:ru.notes,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors},r.createElement("div",{style:{width:"100%"}},r.createElement(P.Z,{onOpen:function(e){zn("50px"===Dn?"180px":"50px")},onFocus:function(){var n;return 0==_e.length&&vl(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.position_id)},visible:null===e||void 0===e?void 0:e.visible,mandatory:null===e||void 0===e?void 0:e.mandatory,titleProps:{fontSize:"12px",color:"var(--app-color-gray-light)"},className:me.dropdownClassContainer,items:_e.filter((function(n){var l,o;return(null===n||void 0===n||null===(l=n.user)||void 0===l||null===(o=l.positions)||void 0===o?void 0:o.filter((function(n){var l,o;return null===e||void 0===e||null===(l=e.options)||void 0===l||null===(o=l.position_id)||void 0===o?void 0:o.includes(null===n||void 0===n?void 0:n.id)})).length)>0})),value:"single"===(null===e||void 0===e||null===(su=e.options)||void 0===su?void 0:su.type)?null===(vu=_e.find((function(n){return n.label===(null===e||void 0===e?void 0:e.value)})))||void 0===vu?void 0:vu.label:e.value,loading:Ge,error:null===e||void 0===e?void 0:e.errors,onChange:function(l){var o;if("single"===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.type)){var t,i,d=_e.find((function(e){return e.value===l}));if(1==(null===e||void 0===e||null===(t=e.options)||void 0===t?void 0:t.email))e.email=null===d||void 0===d||null===(i=d.user)||void 0===i?void 0:i.email;w(null===d||void 0===d?void 0:d.label,n)}else w(l,n);zn("50px")},onClicked:function(e){return zn(e?"180px":"50px")},selectionType:null===e||void 0===e||null===(cu=e.options)||void 0===cu?void 0:cu.type,fieldIcon:null===e||void 0===e?void 0:e.icon})));if("People"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(ll=e.options)||void 0===ll||null===(il=ll.componentF)||void 0===il?void 0:il.length)>0&&(null===e||void 0===e||null===(dl=e.options)||void 0===dl||null===(ul=dl.componentO)||void 0===ul?void 0:ul.length)>0){var nr,lr,or,tr,ir,dr,ar=null===(nr=M.components.find((function(n){return n.selected_fields.filter((function(n){var l;return n.field_name===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.componentF)})).length>0})))||void 0===nr?void 0:nr.selected_fields.find((function(n){var l;return n.field_name===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.componentF)})),ur=F.find((function(n){var l;return n.component_fields.filter((function(e){return e.value===(null===ar||void 0===ar?void 0:ar.value)})).length>0&&n.module_id===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.module_id)})),rr=null===ur||void 0===ur?void 0:ur.component_fields.find((function(n){var l;return n.field_name===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.componentO)}));return r.createElement(he.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-dark)",fontWeight:"regular",paddingLeft:"5px"},enabled:Pl,width:"100%",style:{marginTop:"0px",border:"1px dashed var(--app-color-gray-light)",padding:"5px"},editMode:ie,showWidth:function(n){e.field_options=(0,a.Z)((0,a.Z)({},e.field_options),{},{width:"".concat(n,"px")})},key:n,fieldLabel:e.field_name,notes:null===e||void 0===e||null===(lr=e.options)||void 0===lr?void 0:lr.notes,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors},r.createElement("div",{style:{width:"100%"}},r.createElement(P.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-light)"},onFocus:function(){var n;zn("180px"),0==_e.length&&vl(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.position_id)},visible:null===e||void 0===e?void 0:e.visible,mandatory:null===e||void 0===e?void 0:e.mandatory,className:"multiple"===(null===e||void 0===e||null===(or=e.options)||void 0===or?void 0:or.type)?me.dropdownHeightClassContainer:me.dropdownClassContainer,items:_e.filter((function(e){var n,l;return(null===e||void 0===e||null===(n=e.user)||void 0===n||null===(l=n.positions)||void 0===l?void 0:l.filter((function(e){var n;return null===rr||void 0===rr||null===(n=rr.value)||void 0===n?void 0:n.split(",").includes(null===e||void 0===e?void 0:e.name)})).length)>0})),value:"single"===(null===e||void 0===e||null===(tr=e.options)||void 0===tr?void 0:tr.type)?null===(ir=_e.find((function(n){return n.label===(null===e||void 0===e?void 0:e.value)})))||void 0===ir?void 0:ir.label:e.value,loading:Ge,error:null===e||void 0===e?void 0:e.errors,onChange:function(l){var o;if("single"===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.type)){var t,i,d=_e.find((function(e){return e.value===l}));if(1==(null===e||void 0===e||null===(t=e.options)||void 0===t?void 0:t.email))e.email=null===d||void 0===d||null===(i=d.user)||void 0===i?void 0:i.email;w(null===d||void 0===d?void 0:d.label,n)}else w(l,n);zn("50px")},onClicked:function(e){return zn(e?"180px":"50px")},selectionType:null===e||void 0===e||null===(dr=e.options)||void 0===dr?void 0:dr.type,fieldIcon:null===e||void 0===e?void 0:e.icon,placeholder:"Select user..."})))}if("People"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(hl=e.options)||void 0===hl||null===(gl=hl.componentF)||void 0===gl?void 0:gl.length)>0&&(null===e||void 0===e||null===(bl=e.options)||void 0===bl||null===(xl=bl.componentUO)||void 0===xl?void 0:xl.length)>0){var sr,vr,cr,pr,mr,fr,_r=null===(sr=M.components.find((function(n){return n.selected_fields.filter((function(n){var l;return n.field_name===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.componentF)})).length>0})))||void 0===sr?void 0:sr.selected_fields.find((function(n){var l;return n.field_name===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.componentF)})),yr=F.filter((function(n){var l;return n.module_id===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.module_id)})).find((function(e){return e.component_fields.filter((function(e){return(null===e||void 0===e?void 0:e.value)===(null===_r||void 0===_r?void 0:_r.value)})).length>0})),hr=yr?null===yr||void 0===yr?void 0:yr.component_fields.find((function(n){var l;return n.field_name===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.componentUO)})):"";return r.createElement(he.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-dark)",fontWeight:"regular",paddingLeft:"5px"},enabled:Pl,width:"100%",style:{marginTop:"0px",border:"1px dashed var(--app-color-gray-light)",padding:"5px"},editMode:ie,showWidth:function(n){e.field_options=(0,a.Z)((0,a.Z)({},e.field_options),{},{width:"".concat(n,"px")})},key:n,fieldLabel:e.field_name,notes:null===e||void 0===e||null===(vr=e.options)||void 0===vr?void 0:vr.notes,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors},r.createElement(P.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-light)"},onFocus:function(){var n;return 0==_e.length&&vl(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.position_id)},visible:null===e||void 0===e?void 0:e.visible,mandatory:null===e||void 0===e?void 0:e.mandatory,className:"multiple"===(null===e||void 0===e||null===(cr=e.options)||void 0===cr?void 0:cr.type)?me.dropdownHeightClassContainer:me.dropdownClassContainer,items:_e.filter((function(e){var n;return null===hr||void 0===hr||null===(n=hr.value)||void 0===n?void 0:n.split(",").includes(null===e||void 0===e?void 0:e.label)})),value:"single"===(null===e||void 0===e||null===(pr=e.options)||void 0===pr?void 0:pr.type)?null===(mr=_e.find((function(n){return n.label===(null===e||void 0===e?void 0:e.value)})))||void 0===mr?void 0:mr.label:e.value,loading:Ge,error:null===e||void 0===e?void 0:e.errors,onChange:function(l){var o;if("single"===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.type)){var t,i,d=_e.find((function(e){return e.value===l}));if(1==(null===e||void 0===e||null===(t=e.options)||void 0===t?void 0:t.email))e.email=null===d||void 0===d||null===(i=d.user)||void 0===i?void 0:i.email;w(null===d||void 0===d?void 0:d.label,n)}else w(l,n);zn("50px")},onClicked:function(e){return zn(e?"180px":"50px")},selectionType:null===e||void 0===e||null===(fr=e.options)||void 0===fr?void 0:fr.type,fieldIcon:null===e||void 0===e?void 0:e.icon,placeholder:"Select user..."}))}if("Status"===(null===e||void 0===e?void 0:e.data_type_name)){var gr,br,xr,Er,Cr,wr,Zr,Mr,Sr,kr,Ir,Pr,Nr,Tr,Dr,zr,Ur,Ar=(null===(gr=e.options)||void 0===gr||null===(br=gr.list)||void 0===br?void 0:br.length)>0?null===(xr=e.options)||void 0===xr||null===(Er=xr.list)||void 0===Er?void 0:Er.map((function(e){return{label:e,value:e}})):1==(null===Y||void 0===Y||null===(Cr=Y.processModule)||void 0===Cr||null===(wr=Cr.module)||void 0===wr||null===(Zr=wr.options)||void 0===Zr?void 0:Zr.asGraphical)?[{label:"Show",value:"Show"},{label:"Hide",value:"Hide"}]:(null===R||void 0===R||null===(Mr=R.misc_info)||void 0===Mr||null===(Sr=Mr.status)||void 0===Sr?void 0:Sr.length)>0?null===R||void 0===R||null===(kr=R.misc_info)||void 0===kr?void 0:kr.status:[{label:"Ongoing",value:"Ongoing"},{label:"Pending",value:"Pending"},{label:"Awaiting Payment",value:"Awaiting Payment"},{label:"Awaiting Fulfillment",value:"Awaiting Fulfillment"},{label:"Awaiting Shipment",value:"Awaiting Shipment"},{label:"Awaiting Pickup",value:"Awaiting Pickup"},{label:"Partially Shipped",value:"Partially Shipped"},{label:"Completed",value:"Completed"},{label:"Shipped",value:"Shipped"},{label:"Cancelled",value:"Cancelled"},{label:"Declined",value:"Declined"},{label:"Refunded",value:"Refunded"},{label:"Disputed",value:"Disputed"},{label:"Done",value:"Done"},{label:"Closed (Will lock Edit)",value:"Closed"}];if((null===R||void 0===R||null===(Ir=R.misc_info)||void 0===Ir||null===(Pr=Ir.rules)||void 0===Pr?void 0:Pr.length)>0)null===R||void 0===R||null===(Ur=R.misc_info)||void 0===Ur||Ur.rules.filter((function(e){return"status"===e.type})).filter((function(n){n.valueCondition===e.value&&(Ar="0"===n.allow?Ar.filter((function(l){var o;return n.values.concat(null===(o=e.options)||void 0===o?void 0:o.list).includes(l.value)})):Ar.filter((function(l){var o;return!n.values.concat(null===(o=e.options)||void 0===o?void 0:o.list).includes(l.value)})))}));return null!==Y&&void 0!==Y&&null!==(Nr=Y.processModule)&&void 0!==Nr&&null!==(Tr=Nr.module)&&void 0!==Tr&&null!==(Dr=Tr.options)&&void 0!==Dr&&Dr.canCancel&&(Ar=Ar.concat({label:"Request Cancellation",value:"Cancellation Request"})),r.createElement("div",{key:n,style:{width:"100%",pointerEvents:Pl,marginBottom:"10px",border:"1px dashed var(--app-color-gray-light)",padding:"5px"}},r.createElement(P.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-dark)",fontWeight:"regular",paddingLeft:"5px"},className:me.multiselectComponentNoBorder,style:{border:"0px"},key:n,visible:e.visible,mandatory:e.mandatory,value:null!==(zr=e.value)&&void 0!==zr?zr:"",items:Ar,error:e.errors,onClicked:function(e){return zn(e?"180px":"50px")},onChange:function(e){R.start=!0,zn("50px"),w(e,n);var l=g.selected_fields.find((function(n){return"Date"===n.data_type_name&n.field_name===e}));l&&(l.value=new Date(ae().now()))},fieldIcon:e.icon,fieldLabel:e.field_name}))}if("Profile"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(El=e.options)||void 0===El||null===(Cl=El.type)||void 0===Cl?void 0:Cl.length)>0){var Or,Rr,Lr,Wr=Ce.id;if("creator"!==e.options.type&&"wallet"!==e.options.type||null===b||void 0===b||null===(Or=b.created_by)||void 0===Or||!Or.id)if("creator"!==e.options.type&&"wallet"!==e.options.type||null!==b&&void 0!==b&&null!==(Rr=b.created_by)&&void 0!==Rr&&Rr.id){if("owner"!==e.options.type)return null;var qr;Wr=null!==b&&void 0!==b&&b.options?null===(qr=JSON.parse(null===b||void 0===b?void 0:b.options))||void 0===qr?void 0:qr.owner:""}else Wr=Ce.id;else Wr=b.user_id;return(null===(Lr=Wr)||void 0===Lr?void 0:Lr.length)>0?(null===K||void 0===K?void 0:K.length)>0&&(null===K||void 0===K?void 0:K.filter((function(e){return e.id===Wr})).map((function(n,l){var o,t,i,d;return r.createElement("div",{className:me.centerDiv,key:l},"wallet"===e.options.type?r.createElement(S.default,{modern:!0,columns:["Name","Wallet","Email","Photo"],list:[{Name:"".concat(null===n||void 0===n?void 0:n.first_name," ").concat(null===n||void 0===n?void 0:n.last_name),Wallet:"".concat(null===(o=n.wallet)||void 0===o?void 0:o.toFixed(2)),Email:null===n||void 0===n?void 0:n.email,Photo:n.photo}]}):r.createElement(Pe.Z,{photo:null===n||void 0===n?void 0:n.photo,noPhoto:0==(null===e||void 0===e||null===(t=e.options)||void 0===t?void 0:t.show),firstName:"".concat(null===n||void 0===n?void 0:n.first_name),lastName:"".concat(null===n||void 0===n?void 0:n.last_name),position:null===n||void 0===n||null===(i=n.positions)||void 0===i||null===(d=i.slice(0,1))||void 0===d?void 0:d.map((function(e){return e.name})),email:null===n||void 0===n?void 0:n.email,cardClicked:function(){},width:h.tq?"100%":""}))}))):null}if("Pin"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(wl=e.options)||void 0===wl||null===(Zl=wl.pintype)||void 0===Zl?void 0:Zl.length)>0)return r.createElement(he.Z,{style:{border:"0",width:"100%"},enabled:Pl,key:n,fieldLabel:e.field_name,notes:null===e||void 0===e||null===(pu=e.options)||void 0===pu?void 0:pu.notes,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors},null!==e&&void 0!==e&&null!==(mu=e.options)&&void 0!==mu&&mu.source||null!==(fu=e.options)&&void 0!==fu&&fu.destination?r.createElement("div",{style:{color:"var(--app-color-gray-dark)",height:"inherit",width:"100%",display:null!==e&&void 0!==e&&e.visible?"":"none"}},r.createElement("div",{className:me.filtersContainer,style:{color:"var(--app-color-gray-dark)",height:"inherit",width:"100%",display:null!==e&&void 0!==e&&e.visible?"":"none"}},r.createElement("div",{className:me.actionsContainer,style:{fontSize:"12px"},onClick:function(){Pn({source:!0,destination:!1,field:e,index:n})}},r.createElement("div",{style:{width:"30%",textAlign:"left"}},r.createElement(ve.G,{icon:1==(null===e||void 0===e||null===(_u=e.options)||void 0===_u?void 0:_u.destination)?se.W3K:se.opg,style:{width:"20px",height:"20px",marginRight:"5px",color:"blue"}}),1==(null===e||void 0===e||null===(yu=e.options)||void 0===yu?void 0:yu.destination)?"From":"Pin",":"),r.createElement("div",{style:{width:"70%",textAlign:"left"}},null!==e&&void 0!==e&&e.value?null===(hu=JSON.parse(e.value))||void 0===hu||null===(gu=hu.source)||void 0===gu?void 0:gu.address:"")),1==(null===e||void 0===e||null===(bu=e.options)||void 0===bu?void 0:bu.destination)&&r.createElement("hr",{style:{borderTop:"0.5px solid #D2D2D2"}}),1==(null===e||void 0===e||null===(xu=e.options)||void 0===xu?void 0:xu.destination)&&r.createElement("div",{className:me.actionsContainer,style:{fontSize:"12px"},onClick:function(){Pn({source:!1,destination:!0,field:e,index:n})}},r.createElement("div",{style:{width:"30%",textAlign:"left"}},r.createElement(ve.G,{icon:se.opg,style:{width:"20px",height:"20px",marginRight:"5px",color:"green"}}),"To",":"),r.createElement("div",{style:{width:"70%",textAlign:"left"}},null!==e&&void 0!==e&&e.value?null===(Eu=JSON.parse(e.value))||void 0===Eu||null===(Cu=Eu.destination)||void 0===Cu?void 0:Cu.address:""))),(null===In||void 0===In?void 0:In.source)&&r.createElement(y.U7,{hasCloseIcon:!0,blured:!1,scrollable:!0,isOpen:In.source,shadowedContainerStyle:{width:"100%"},onClose:function(){return Pn({source:!1,destination:!1})}},r.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",marginTop:"30px"}},r.createElement("div",{className:me.title},null!==(wu=null===In||void 0===In||null===(Zu=In.field)||void 0===Zu?void 0:Zu.field_name)&&void 0!==wu?wu:"Origin:"),r.createElement(Ze.Z,{value:null===(Mu=JSON.parse(null!==(Su=null===In||void 0===In||null===(ku=In.field)||void 0===ku?void 0:ku.value)&&void 0!==Su?Su:JSON.stringify({source:{},destination:{}})))||void 0===Mu?void 0:Mu.source,onChange:function(l){var o,t,i,d,a,u,r,s,v,c,p=null!==In&&void 0!==In&&null!==(o=In.field)&&void 0!==o&&o.value?JSON.parse(null===In||void 0===In||null===(t=In.field)||void 0===t?void 0:t.value):{source:{lat:0,lng:0,address:""},destination:{lat:0,lng:0,address:""}};if(p.source.lat=l.geometry.location.lat,p.source.lng=l.geometry.location.lng,p.source.address=l.formatted_address,null!==In&&void 0!==In&&In.field&&(null===(i=e.options)||void 0===i||!i.compute))return x(JSON.stringify(p),In.index),void Pn({source:!1,destination:!1});var m,f,_,y,h,b,E,C,w,Z,S,k,I=null===g||void 0===g||null===(d=g.selected_fields)||void 0===d?void 0:d.find((function(e){var n;return"distance"===(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.mapToItem)}));I||((I=null===(m=M.newStepComponents)||void 0===m||null===(f=m.find((function(e){var n;return(null===(n=e.selected_fields)||void 0===n?void 0:n.filter((function(e){var n;return"distance"===(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.mapToItem)})).length)>0})))||void 0===f||null===(_=f.selected_fields)||void 0===_?void 0:_.find((function(e){var n;return"distance"===(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.mapToItem)})))||(I=null===(y=M.components)||void 0===y||null===(h=y.find((function(e){var n;return(null===(n=e.selected_fields)||void 0===n?void 0:n.filter((function(e){var n;return"distance"===(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.mapToItem)})).length)>0})))||void 0===h||null===(b=h.selected_fields)||void 0===b?void 0:b.find((function(e){var n;return"distance"===(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.mapToItem)})))||(I=null===(E=Y.processModule)||void 0===E||null===(C=E.steps[null!==(S=null===(k=Y.processModule)||void 0===k?void 0:k.stepIndex)&&void 0!==S?S:1].component_blueprints)||void 0===C||null===(w=C.find((function(e){var n;return(null===(n=e.selected_fields)||void 0===n?void 0:n.filter((function(e){var n;return"distance"===(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.mapToItem)})).length)>0})))||void 0===w||null===(Z=w.selected_fields)||void 0===Z?void 0:Z.find((function(e){var n;return"distance"===(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.mapToItem)}))));if(null!==p&&void 0!==p&&p.source&&null!==(a=e.options)&&void 0!==a&&a.compute&&0==(null===(u=e.options)||void 0===u?void 0:u.destination))p.distance=(0,U.Iw)(p.source.lat,p.source.lng,Fe.latitude,Fe.longitude),p.duration=0,I&&(I.value=p.distance,I.disabled=!0),x(JSON.stringify(p),n);else if(null!==(r=p.source)&&void 0!==r&&r.address&&null!==In&&void 0!==In&&null!==(s=In.field.options)&&void 0!==s&&s.compute){var P;null===(P=(0,Ne.Y)(p.source.address,p.destination.address))||void 0===P||P.subscribe({next:function(e){var n;if((null===e||void 0===e||null===(n=e.routes)||void 0===n?void 0:n.length)>0){var l,o,t,i,d,a=e.routes[0];if((null===a||void 0===a||null===(l=a.legs)||void 0===l?void 0:l.length)>0)p.distance=(null===(o=a.legs[0])||void 0===o||null===(t=o.distance)||void 0===t?void 0:t.value)/1e3,p.duration=null===(i=a.legs[0])||void 0===i||null===(d=i.duration)||void 0===d?void 0:d.value,p.steps=a.legs[0].steps,I&&(I.value=p.distance,I.disabled=!0)}},error:function(e){p.distance=(0,U.Iw)(p.source.lat,p.source.lng,p.destination.lat,p.destination.lng),p.duration=0,I&&(I.value=p.distance,I.disabled=!0)}})}else null!==(v=p.source)&&void 0!==v&&v.address&&(p.distance=(0,U.Iw)(p.source.lat,p.source.lng,p.destination.lat,p.destination.lng),p.duration=0,I&&(I.value=p.distance));x(JSON.stringify(p),null!==(c=null===In||void 0===In?void 0:In.index)&&void 0!==c?c:n),Pn({source:!1,destination:!1})},mapkey:null===(Iu=R.misc_info)||void 0===Iu?void 0:Iu.map}))),(null===In||void 0===In?void 0:In.destination)&&r.createElement(y.U7,{hasCloseIcon:!0,blured:!1,scrollable:!0,isOpen:In.destination,shadowedContainerStyle:{width:"100%"},shadowedContainerClassname:me.mappopup,onClose:function(){return Pn({source:!1,destination:!1})}},r.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"}},r.createElement("div",{className:me.title},null!==(Pu=null===In||void 0===In||null===(Nu=In.field)||void 0===Nu?void 0:Nu.field_name)&&void 0!==Pu?Pu:"Destination:"),r.createElement(Ze.Z,{value:null===(Tu=JSON.parse(null!==(Du=null===In||void 0===In||null===(zu=In.field)||void 0===zu?void 0:zu.value)&&void 0!==Du?Du:JSON.stringify({source:{},destination:{}})))||void 0===Tu?void 0:Tu.destination,onChange:function(e){var n,l,o,t,i,d,a,u,r,s,v,c,p,m=null!==In&&void 0!==In&&null!==(n=In.field)&&void 0!==n&&n.value?JSON.parse(null===In||void 0===In||null===(l=In.field)||void 0===l?void 0:l.value):{destination:{lat:0,lng:0,address:""},source:{lat:0,lng:0,address:""}},f=null===g||void 0===g||null===(o=g.selected_fields)||void 0===o?void 0:o.find((function(e){var n;return"distance"===(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.mapToItem)}));f||((f=null===(a=M.newStepComponents)||void 0===a||null===(u=a.find((function(e){var n;return(null===(n=e.selected_fields)||void 0===n?void 0:n.filter((function(e){var n;return"distance"===(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.mapToItem)})).length)>0})))||void 0===u||null===(r=u.selected_fields)||void 0===r?void 0:r.find((function(e){var n;return"distance"===(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.mapToItem)})))||(f=null===(s=M.components)||void 0===s||null===(v=s.find((function(e){var n;return(null===(n=e.selected_fields)||void 0===n?void 0:n.filter((function(e){var n;return"distance"===(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.mapToItem)})).length)>0})))||void 0===v||null===(c=v.selected_fields)||void 0===c?void 0:c.find((function(e){var n;return"distance"===(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.mapToItem)}))));(m.destination.lat=e.geometry.location.lat,m.destination.lng=e.geometry.location.lng,m.destination.address=e.formatted_address,null!==(t=m.destination)&&void 0!==t&&t.address&&null!==In&&void 0!==In&&null!==(i=In.field.options)&&void 0!==i&&i.compute)?null===(p=(0,Ne.Y)(m.source.address,m.destination.address))||void 0===p||p.subscribe({next:function(e){var n;if((null===e||void 0===e||null===(n=e.routes)||void 0===n?void 0:n.length)>0){var l,o,t,i,d,a=e.routes[0];if((null===a||void 0===a||null===(l=a.legs)||void 0===l?void 0:l.length)>0)m.distance=(null===(o=a.legs[0])||void 0===o||null===(t=o.distance)||void 0===t?void 0:t.value)/1e3,m.duration=null===(i=a.legs[0])||void 0===i||null===(d=i.duration)||void 0===d?void 0:d.value,m.steps=a.legs[0].steps,f&&(f.value=m.distance)}},error:function(e){m.distance=(0,U.Iw)(m.source.lat,m.source.lng,m.destination.lat,m.destination.lng),m.duration=0,f&&(f.value=m.distance)}}):null!==(d=m.destination)&&void 0!==d&&d.address&&(m.distance=(0,U.Iw)(m.source.lat,m.source.lng,m.destination.lat,m.destination.lng),m.duration=0,f&&(f.value=m.distance));x(JSON.stringify(m),null===In||void 0===In?void 0:In.index),Pn({source:!1,destination:!1})},mapkey:null===(Uu=R.misc_info)||void 0===Uu?void 0:Uu.map})))):r.createElement(Ze.Z,{key:n,value:null===g||void 0===g?void 0:g.selected_fields[n].value,onLocationChange:function(e){return O(e,n)},mapkey:null===(Au=R.misc_info)||void 0===Au?void 0:Au.map}));if("Map"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(Ml=e.options)||void 0===Ml||null===(Sl=Ml.maptype)||void 0===Sl?void 0:Sl.length)>0)return r.createElement(he.Z,{enabled:Pl,width:"100%",editMode:ie,showWidth:function(n){e.field_options=(0,a.Z)((0,a.Z)({},e.field_options),{},{width:"".concat(n,"px")})},key:n,fieldLabel:e.field_name,notes:null===e||void 0===e||null===(Ou=e.options)||void 0===Ou?void 0:Ou.notes,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors},r.createElement(Me.Z,{key:n,value:null===g||void 0===g?void 0:g.selected_fields[n].value,onLocationChange:function(e){return O(e,n)}}));if("Summary"===(null===e||void 0===e?void 0:e.data_type_name)){var Fr={};return M.components.map((function(e){return e.selected_fields.filter((function(e){return!("Pin"===e.data_type_name||"Lookup"===e.data_type_name||"Record"===e.data_type_name||"Ratings"===e.data_type_name||"People"===e.data_type_name||"Positions"===e.data_type_name||"Notes"===e.data_type_name||"URL"===e.data_type_name)&&1==e.visible})).map((function(e){var n,l;(0,U.gD)(null!==(n=null===e||void 0===e?void 0:e.value)&&void 0!==n?n:"")?Fr[e.field_name]="":Fr[e.field_name]="".concat(null!==(l=null===e||void 0===e?void 0:e.value)&&void 0!==l?l:"")}))})),M.newStepComponents.map((function(e){return e.selected_fields.filter((function(e){return!("Pin"===e.data_type_name||"Lookup"===e.data_type_name||"Record"===e.data_type_name||"Ratings"===e.data_type_name||"People"===e.data_type_name||"Positions"===e.data_type_name||"Notes"===e.data_type_name||"URL"===e.data_type_name)&&1==e.visible})).map((function(e){var n,l;(0,U.gD)(null!==(n=null===e||void 0===e?void 0:e.value)&&void 0!==n?n:"")?Fr[e.field_name]="":Fr[e.field_name]="".concat(null!==(l=null===e||void 0===e?void 0:e.value)&&void 0!==l?l:"")}))})),r.createElement(he.Z,{enabled:Pl,width:"100%",editMode:ie,style:{border:"0"},key:n,fieldLabel:e.field_name,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors},r.createElement("div",{key:n,style:{marginTop:"30px",width:"100%"}},r.createElement(S.default,{modern:!0,columns:Object.keys(Fr),list:[Fr]})))}return"Currency"===(null===e||void 0===e?void 0:e.data_type_name)&&null!==e&&void 0!==e&&null!==(kl=e.options)&&void 0!==kl&&kl.currency_type?r.createElement(he.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-dark)",fontWeight:"regular",paddingLeft:"5px"},style:{border:"1px solid var(--app-color-gray-lighter)"},enabled:Pl,width:"100%",editMode:ie,showWidth:function(n){e.field_options=(0,a.Z)((0,a.Z)({},e.field_options),{},{width:"".concat(n,"px")})},key:n,fieldLabel:e.field_name,notes:null===e||void 0===e||null===(Ru=e.options)||void 0===Ru?void 0:Ru.notes,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors},r.createElement("div",{style:{width:"inherit",display:"flex"}},r.createElement("div",{onClick:function(){return Ke(!Ge)},className:me.currencySymbol},null!==e&&void 0!==e&&null!==(Lu=e.options)&&void 0!==Lu&&Lu.symbol?null===e||void 0===e||null===(Wu=e.options)||void 0===Wu?void 0:Wu.symbol:""," "),Ge&&r.createElement(y.Ld,{items:U.s3,defaultSelectedItem:{label:null===e||void 0===e||null===(qu=e.options)||void 0===qu?void 0:qu.currency_type,value:null===e||void 0===e||null===(Fu=e.options)||void 0===Fu?void 0:Fu.country_code},triggerType:"chevron",className:me.currencySelectComponent,inputClassName:me.currencySearchInput,inputContainerClassName:me.currencyInputContainerClassName,clearControlsClassName:me.currencyClearControlsClassName,molclassname:me.currencySelectMenuOverlayList,moliclassname:me.currencySelectMenuOverlayListItem,onChange:function(e){M.currency=e.value,z(e,n),Ke(!1)}}),!Ge&&r.createElement("input",{type:"number",autoComplete:"off",value:null!==(Bu=g.selected_fields[n].value)&&void 0!==Bu?Bu:0,className:me.currencyInput,onChange:function(e){x(e.target.value,n)}}))):r.createElement(he.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-dark)",fontWeight:"regular",paddingLeft:"5px"},enabled:Pl,width:"100%",style:{marginTop:"0px",border:"1px dashed var(--app-color-gray-light)",padding:"5px"},editMode:ie,showWidth:function(n){e.field_options=(0,a.Z)((0,a.Z)({},e.field_options),{},{width:"".concat(n,"px")})},key:n,fieldLabel:e.field_name,notes:null===e||void 0===e||null===(Yu=e.options)||void 0===Yu?void 0:Yu.notes,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors,customIconBgColor:"white"},"file"===e.data_type?r.createElement(Je,{notes:null===e||void 0===e||null===(Hu=e.options)||void 0===Hu?void 0:Hu.notes,field_id:e.id,value:null===e||void 0===e?void 0:e.value,isInherited:I,checkIfAreMandatoryErrored:T,options:null===e||void 0===e?void 0:e.options,index:n,indexInContextArray:E}):"date"===e.data_type||null!==e&&void 0!==e&&null!==(ju=e.options)&&void 0!==ju&&ju.country_code||null!==e&&void 0!==e&&null!==(Vu=e.options)&&void 0!==Vu&&Vu.currency_type||"Number"===e.data_type_name?r.createElement("div",{style:{width:"inherit"}},"date"===e.data_type?"Range"===(null===e||void 0===e||null===(Ju=e.options)||void 0===Ju?void 0:Ju.type)?r.createElement(y.$m,{inputContainerClassName:me.inputContainerClassName,dateChangeHandler:function(e){return function(e,n){an(e),x(e,n)}(e,n)},startDate:rn,endDate:sn}):null!==e&&void 0!==e&&null!==(Gu=e.options)&&void 0!==Gu&&Gu.time?r.createElement("div",{style:{width:"100%",height:"auto",border:"0"}},r.createElement(ye(),{showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:5,customInput:r.createElement("div",{id:"custom-input",style:{cursor:"pointer",display:"flex",justifyContent:"center",width:"100%",alignItems:"stretch",padding:"5px",border:"0px solid var(--app-color-gray-lighter)"}},r.createElement("input",{value:e.value?ae()(e.value).format("DD MMMM YYYY HH:mm"):"",readOnly:!0,type:"text",style:{flex:1,marginTop:"auto",marginBottom:"auto",outline:"none",fontFamily:"var(--app-text-main-font)",fontSize:"16px",lineHeight:"20px",color:"#4A4A4A",textAlign:"left",maxWidth:"98%",border:"0px"},onChange:function(e){}}),r.createElement(ve.G,{icon:se.WRo,style:{marginLeft:"10px",width:"20px",height:"20px"}})),className:me.singleInputContainer,selected:null!==e&&void 0!==e&&e.value?new Date(ae()(null===e||void 0===e?void 0:e.value)):(0,de.now)(),onChange:function(e){e>(0,de.now)()&&sl(e,n)}})):r.createElement(y.X9,{toggleDP:function(e){return zn(!0===e?"240px":"50px")},value:void 0==e.value?"":ae()(new Date(e.value)).format("Do MMMM YYYY"),dateChangeHandler:function(e){return sl(e,n)},selected:new Date(ae()(en,"YYYY-MM-DD")),iconClassName:me.calendar,inputContainerClassName:me.singleInputContainer,inputStyle:{textAlign:"left",border:"none",height:"auto",fontSize:"16px"},hasCalendarIcon:!0}):null!==e&&void 0!==e&&null!==(Qu=e.options)&&void 0!==Qu&&Qu.country_code?r.createElement("div",{style:{padding:"10px"}},r.createElement(we(),{specialLabel:"",value:g.selected_fields[n].value,country:null===e||void 0===e||null===(Ku=e.options)||void 0===Ku?void 0:Ku.country_code,onChange:function(e,l,o){D(l,n,o.target.value)},inputClass:me.phoneIInput,inputProps:{style:{border:"0"}}})):r.createElement("input",{onBlur:function(l){return je(e.data_type_name,l.target.value,E,n,M)},type:e.data_type,onChange:function(e){x(e.target.value,n)},autoComplete:"none",value:g.selected_fields[n].value?g.selected_fields[n].value:""===He(null===e||void 0===e?void 0:e.options)?"":He(null===e||void 0===e?void 0:e.options),placeholder:"Number"===g.selected_fields[n].data_type_name?"0":"",className:me.fieldTypeInput,style:{border:"0"},name:e.field_name,disabled:null!==(Xu=g.selected_fields[n].disabled)&&void 0!==Xu&&Xu})):"Long Text"===e.data_type_name?r.createElement("textarea",{className:me.fieldTypeTextarea,onBlur:function(l){return je(e.data_type_name,l.target.value,E,n,M)},type:e.data_type,value:g.selected_fields[n].value?g.selected_fields[n].value:""===He(null===e||void 0===e?void 0:e.options)?"":He(null===e||void 0===e?void 0:e.options),onFocus:function(){},disabled:null!==($u=g.selected_fields[n].disabled)&&void 0!==$u&&$u,autoComplete:"none",onChange:function(e){x(e.target.value,n)},placeholder:"Number"===g.selected_fields[n].data_type_name?"0":"",name:e.field_name,style:{border:"0"}}):r.createElement("input",{onBlur:function(l){return je(e.data_type_name,l.target.value,E,n,M)},type:e.data_type,onChange:function(e){x(e.target.value,n)},autoComplete:"none",value:g.selected_fields[n].value?g.selected_fields[n].value:""===He(null===e||void 0===e?void 0:e.options)?"":He(null===e||void 0===e?void 0:e.options),placeholder:"Number"===g.selected_fields[n].data_type_name?"0":"",className:me.fieldTypeInput,name:e.field_name,disabled:null!==(er=g.selected_fields[n].disabled)&&void 0!==er&&er,style:{border:"0"}}))}return r.createElement(he.Z,{enabled:Pl,width:"100%",editMode:ie,style:{},key:n,fieldLabel:e.field_name,notes:null===e||void 0===e||null===(Md=e.options)||void 0===Md?void 0:Md.notes,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors},r.createElement("div",{style:{width:"100%",height:"auto",border:"1px solid var(--app-color-gray-light)"}},r.createElement(ye(),{showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:5,customInput:r.createElement("div",{id:"custom-input",style:{cursor:"pointer",display:"flex",justifyContent:"center",width:"100%",alignItems:"stretch",padding:"5px",border:"0px solid var(--app-color-gray-lighter)"}},r.createElement(ve.G,{icon:se.WRo,style:{marginLeft:"10px",width:"20px",height:"20px"}}),r.createElement("input",{disabled:!0,value:e.value?ae()(e.value).format("DD MMMM YYYY HH:mm"):"",type:"text",style:{flex:1,marginTop:"auto",marginBottom:"auto",outline:"none",fontFamily:"var(--app-text-main-font)",fontSize:"16px",lineHeight:"20px",color:"#4A4A4A",textAlign:"left",width:"80%",border:"0px"},onChange:function(e){}})),className:me.singleInputContainer,selected:null!==e&&void 0!==e&&e.value?new Date(ae()(null===e||void 0===e?void 0:e.value)):(0,de.now)(),onChange:function(e){e>(0,de.now)()&&sl(e,n)}})))}})));return r.createElement("div",{id:null===g||void 0===g?void 0:g.name,className:me.emulatedFlexGap,style:{width:"100%",position:"relative",marginBottom:Dn}},hl,(null===qn||void 0===qn||null===(p=qn.candidates)||void 0===p?void 0:p.length)>0&&r.createElement(he.Z,{width:"80%",fieldLabel:"Response",visible:!0},r.createElement("textarea",{className:me.fullLengthTextarea,type:"text",onFocus:function(){},disabled:!0,value:null===qn||void 0===qn||null===(f=qn.candidates[0])||void 0===f||null===(_=f.content.parts[0])||void 0===_?void 0:_.text})))})),Je=function(e){e.notes;var n,l=e.options,o=e.field_id,t=e.index,i=e.indexInContextArray,a=e.value,s=e.checkIfAreMandatoryErrored,v=(0,r.useState)(),c=(0,u.Z)(v,2),p=c[0],f=c[1],_=(0,r.useState)(!1),y=(0,u.Z)(_,2),b=y[0],x=y[1],E=(0,m.pQ)(),C=(0,u.Z)(E,2),w=C[0],Z=C[1];return r.createElement("div",{style:{width:"inherit",flexDirection:"column",fontSize:"12px"}},r.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",flex:"1 1",overflow:"hidden",fontSize:"14px"}},r.createElement("u",{onClick:function(){var e;null===(e=document.getElementById("file-change-".concat(o)))||void 0===e||e.click()},style:{cursor:"pointer",marginLeft:"2px",wordWrap:"break-word"}},null!==p&&void 0!==p&&p.name||a?"File":"Click to upload file..."),r.createElement("input",{accept:"."+(null===l||void 0===l||null===(n=l.accepted_mimes)||void 0===n?void 0:n.replace(/,/g,",.")),type:"file",onChange:function(){return function(e){var n,l,a=document.getElementById("file-change-".concat(o)).files[0],u=((null===a||void 0===a?void 0:a.size)/1024/1024).toFixed(4),r=(e/1024).toFixed(4);x(!0);var v=(0,d.Z)(null!==(n=null===(l=w.currentStep)||void 0===l?void 0:l.component_blueprints)&&void 0!==n?n:[]);u>r?alert("File is too big!"):(0,g.kf)(a,o).subscribe({next:function(e){f(a),x(!1),v[i].selected_fields[t].value=null===e||void 0===e?void 0:e.file_url,v[i].selected_fields[t].value&&v[i].selected_fields[t].mandatory&&(v[i].selected_fields[t].errors=""),s(),Z({action:m._U.setComponentBlueprints,value:v}),Z({action:m._U.setModuleNewStepComponents,value:v})}})}(null===l||void 0===l?void 0:l.max_file_size)},style:{position:"absolute",visibility:"hidden",width:"0px"},id:"file-change-".concat(o),className:me.fieldTypeInput}),b&&r.createElement(Se.Z,{type:h.G6?"Watch":"Puff",color:"#4A4A4A",secondaryColor:"gray",radius:22,height:22,width:"22px"}),(null===p||void 0===p?void 0:p.type)&&r.createElement(Ge,{fileType:null===p||void 0===p?void 0:p.type})))},Ge=function(e){return"application/pdf"===(null===e||void 0===e?void 0:e.fileType)?r.createElement("img",{alt:"",src:C.edG}):r.createElement("img",{alt:"",src:C.dm0})},Qe=(0,r.memo)((function(e){var n=e.children,l=e.nav,o=e.openNav,t=e.title;return r.createElement(y.U7,{onClose:o,blured:!1,scrollable:!0,isOpen:l,shadowedContainerStyle:{width:"100%",minWidth:"50%",minHeight:"400px"},shadowedContainerClassname:me.popup},r.createElement("div",{style:{width:"inherit",height:"inherit"},onClick:o},t.length>0&&r.createElement("div",{className:me.actionsContainer},r.createElement("p",{className:me.infoTitle},t)),n))})),Ke=function(e){var n,l,o=e.component,t=e.blueprintIndex,i=e.setSelectedComponent,d=e.selectedComponent,a=e.companyData,s=e.components,v=e.allComponents,c=e.companyUsersArray,p=e.user,f=e.status,_=(0,m.pQ)(),y=(0,u.Z)(_,1)[0],g=(0,r.useState)(me.active),b=(0,u.Z)(g,1)[0],x=(0,r.useState)(""),E=(0,u.Z)(x,1)[0],C=null===(n=y.currentStep)||void 0===n?void 0:n.component_blueprints.findIndex((function(e){return e.id===o.id})),w=o.selected_fields.filter((function(e){return"Pin"===e.data_type_name||"Map"===e.data_type_name})).length>0,Z=null===d||void 0===d||null===(l=d.component_fields)||void 0===l?void 0:l.find((function(e){return"Action Button"===e.data_type_name}));return r.createElement("div",{id:"accordion",key:t,className:xe()(me.accordionContainer,b),"app-variant-has-error":E?"error":"",style:h.tq?w?{padding:"0",border:"0"}:{border:"0"}:{}},r.createElement("p",{className:me.cardTitle,style:{fontSize:"16px"}},null===o||void 0===o?void 0:o.name,":"),r.createElement(Xe,{components:s,allComponents:v,component:o,handleInputChange:function(){},handlePrefixChange:function(){},handleCurrencyChange:function(){},checkIfAreMandatoryErrored:!1,handleCheckbox:function(){},isInherited:!1,indexInContextArray:C,handleLocationChange:function(){},processTaskContext:y,companyData:a,companyUsersArray:c,selectedComponent:d,setSelectedComponent:i,hasAction:Z,user:p,status:f}))},Xe=(0,r.memo)((function(e){var n,l,o=e.component,t=e.components,d=e.companyData,c=e.allComponents,p=e.companyUsersArray,m=e.setSelectedComponent,f=e.selectedComponent,_=e.hasAction,b=e.user,x=e.status,E=(0,s.v9)((function(e){return e.flowReducer})),C=E.allTasks,w=E.companyPositionsArray,Z=(0,r.useState)(!1),M=(0,u.Z)(Z,2),k=M[0],I=M[1],P=(0,r.useState)(0),N=(0,u.Z)(P,2),T=N[0],D=N[1],z=(0,r.useState)(!1),U=(0,u.Z)(z,2),A=U[0],O=U[1],L=(0,r.useState)(!1),W=(0,u.Z)(L,2),q=W[0],F=W[1],B=(null===o||void 0===o||null===(n=o.selected_fields)||void 0===n?void 0:n.length)>0&&V.Z([K.Z(G.Z("index"))])(null===o||void 0===o||null===(l=o.selected_fields)||void 0===l?void 0:l.filter((function(e){return!0!==e.value||void 0!==(null===e||void 0===e?void 0:e.value)}))).map((function(e,n){var l,u,s,E;if((null===e||void 0===e||null===(l=e.options)||void 0===l||null===(u=l.list)||void 0===u?void 0:u.length)>0&&(null===e||void 0===e||null===(s=e.options)||void 0===s||null===(E=s.component_id)||void 0===E?void 0:E.length)>0&&("Step List"===(null===e||void 0===e?void 0:e.data_type_name)||"Component List"===(null===e||void 0===e?void 0:e.data_type_name)))return r.createElement("div",{key:n,style:{width:"100%"}},r.createElement(S.default,{modern:!0,columns:e.options.list,list:(ee=e.options,t.filter((function(e){return e.id===ee.component_id})).map((function(e){var n={};return ee.list.map((function(l){n=(0,a.Z)((0,a.Z)({},n),{},(0,i.Z)({},l,e.selected_fields.find((function(e){return e.field_name===l})).value))})),n})))}));if("output"===e.data_type&&"Formula"!==e.data_type_name&&"Item Formula"!==e.data_type_name&&"Record"!==e.data_type_name&&"Filters"!==e.data_type_name)return null;if("Info"===e.data_type_name)return null;if("URL"===e.data_type_name)return null;if("Map"===e.data_type_name)return null;if("Lookup"===e.data_type_name)return null;if("Rewards"===e.data_type_name)return null;if("Summary"===e.data_type_name)return null;if("Ratings"===e.data_type_name)return null;if("ID"===e.data_type_name){var Z,M,P=null!==(Z=null===R||void 0===R?void 0:ie.Z(null===R||void 0===R?void 0:$.Z("field_name",e.field_name))(o.values))&&void 0!==Z?Z:null;return r.createElement("div",{key:n},r.createElement("div",{className:me.actionsContainer,style:{fontSize:"12px"}},r.createElement("div",{style:{fontWeight:"normal",fontSize:"14px"}},e.field_name,":"),r.createElement("div",null,null===P||null===P.value?"":null===P||void 0===P||null===(M=P.value)||void 0===M?void 0:M.split(",")[0])),r.createElement("hr",{style:{borderTop:"0.5px solid #D2D2D2"}}))}var N,z,U,L,W,B,Y,H,j,V,J,G,Q,K,X,ee,ne=null!==(N=null===R||void 0===R?void 0:ie.Z(null===R||void 0===R?void 0:$.Z("field_name",null===e||void 0===e?void 0:e.field_name))(null!==(z=null===f||void 0===f?void 0:f.component_fields)&&void 0!==z?z:[]))&&void 0!==N?N:{},le=null===(U=ne)||void 0===U?void 0:U.value,oe=null===o||void 0===o||null===(L=o.selected_fields)||void 0===L?void 0:L.find((function(e){return"Info"===e.data_type_name}));if(oe){var te,ue,re=c.find((function(e){return(null===e||void 0===e?void 0:e.component_fields.filter((function(e){return e.component_blueprint_id===oe.options.component_id&&e.value===le})).length)>0}));if(re)return null===oe||void 0===oe||null===(te=oe.options)||void 0===te||null===(ue=te.list)||void 0===ue?void 0:ue.map((function(e,n){var l,o,t=null!==(l=null===(o=re.component_fields.find((function(n){return n.field_name===e})))||void 0===o?void 0:o.value)&&void 0!==l?l:"";return r.createElement("div",{key:n},r.createElement("div",{className:me.actionsContainer,style:{fontSize:"12px"}},r.createElement("div",{style:{fontWeight:"normal",fontSize:"14px"}},e,":"),r.createElement("div",null,t)),r.createElement("hr",{style:{borderTop:"0.5px solid #D2D2D2"}}))}))}if("Pin"===e.data_type_name&&(null!==e&&void 0!==e&&e.value||le)){var ce,pe,fe,_e,ye,ge,be,xe,Ee,Ce,we,Ze,Me,Se,ke,Ie,Te,De=JSON.parse(null!==(ce=null===e||void 0===e?void 0:e.value)&&void 0!==ce?ce:le),ze=null===f||void 0===f||null===(pe=f.component_fields)||void 0===pe||null===(fe=pe.find((function(e){return"Status"===e.data_type_name})))||void 0===fe?void 0:fe.value;if(void 0===ne)ne=null===(Te=f.component_fields)||void 0===Te?void 0:Te.find((function(e){return"Pin"===e.data_type_name}));return r.createElement("div",{key:n,style:{display:"",width:"100%"}},q&&r.createElement(Ne.Z,{mapkey:null===(_e=d.misc_info)||void 0===_e?void 0:_e.map,pins:null!==De&&void 0!==De&&De.realtime?null!==De&&void 0!==De&&null!==(ye=De.destination)&&void 0!==ye&&ye.address?[(0,a.Z)((0,a.Z)({},De.destination),{},{type:"destination"}),(0,a.Z)((0,a.Z)({},De.source),{},{type:"source"}),(0,a.Z)((0,a.Z)({},De.realtime),{},{type:"realtime"})]:[(0,a.Z)((0,a.Z)({},De.source),{},{type:"source"}),(0,a.Z)((0,a.Z)({},De.realtime),{},{type:"realtime"})]:null!==De&&void 0!==De&&null!==(ge=De.destination)&&void 0!==ge&&ge.address?[(0,a.Z)((0,a.Z)({},De.destination),{},{type:"destination"}),(0,a.Z)((0,a.Z)({},De.source),{},{type:"source"})]:[(0,a.Z)((0,a.Z)({},De.source),{},{type:"source"})]}),r.createElement("div",{key:n,className:me.filtersContainer,style:{color:"var(--app-color-gray-dark)",height:"inherit",width:"100%",display:null!==e&&void 0!==e&&e.visible?"":"none"}},r.createElement("div",{className:me.actionsContainer,style:{fontSize:"12px"},onClick:function(){return F(!q)}},null!==De&&void 0!==De&&null!==(be=De.destination)&&void 0!==be&&be.address?r.createElement("div",{style:{width:"50px",textAlign:"left",fontWeight:"normal",fontSize:"14px"}},"From:"):r.createElement(ve.G,{icon:se.opg,style:{color:"green",width:"20px",height:"20px"}}),r.createElement("div",{style:{width:"70%",textAlign:"right"}},De.source.address)),(null===De||void 0===De||null===(xe=De.destination)||void 0===xe?void 0:xe.address)&&r.createElement("hr",{style:{borderTop:"0.5px solid #D2D2D2"}}),(null===De||void 0===De||null===(Ee=De.destination)||void 0===Ee?void 0:Ee.address)&&r.createElement("div",{className:me.actionsContainer,style:{fontSize:"12px"}},r.createElement("div",{style:{width:"50px",textAlign:"left",fontWeight:"normal",fontSize:"14px"}},"To",":"),r.createElement("div",{style:{width:"70%",textAlign:"right"}},null===De||void 0===De||null===(Ce=De.destination)||void 0===Ce?void 0:Ce.address))),r.createElement(y.zx,{light:!0,title:0!=T?"Stop Location Updates":null!==e&&void 0!==e&&null!==(we=e.options)&&void 0!==we&&we.realtime?"Send Location Updates":"Update Location",clicked:function(){0===T?navigator.geolocation.getCurrentPosition((function(n){var l,o,t,i;De&&(De.realtime={lat:n.coords.latitude,lng:n.coords.longitude,id:"10"},e.value=JSON.stringify(De),1==(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.realtime)?D(setInterval((function(){I(!0),(0,g.po)({component_id:f.id,index:e.index,value:JSON.stringify(De),group:e.group,component_field_id:ne.id}).subscribe({next:function(e){I(!1)},error:function(){return I(!1)},complete:function(){}})}),+(null!==(o=null===(t=ne)||void 0===t||null===(i=t.options)||void 0===i?void 0:i.interval)&&void 0!==o?o:6e4))):(I(!0),(0,g.po)({component_id:f.id,index:ne.index,value:JSON.stringify(De),group:ne.group,component_field_id:ne.id}).subscribe({next:function(e){I(!1)},error:function(){return I(!1)},complete:function(){}})))})):(window.clearInterval(T),D(0))},loading:k,style:{width:"100%",display:"Closed"===(null===f||void 0===f?void 0:f.sttaus)||"New"===(null===f||void 0===f?void 0:f.sttaus)||(null===f||void 0===f?void 0:f.status)===(null===d||void 0===d||null===(Ze=d.misc_info)||void 0===Ze?void 0:Ze.lock)||"Closed"===ze||"New"===ze||ze===(null===d||void 0===d||null===(Me=d.misc_info)||void 0===Me?void 0:Me.lock)||"Cancelled"===ze?"none":_&&"user"===_.options.action&&(null===_||void 0===_?void 0:_.value)===(null===b||void 0===b?void 0:b.id)?"":"none"}}),q&&r.createElement(y.zx,{light:!0,title:"Refresh location",clicked:function(){I(!0),(0,g.r6)(f.id).pipe((0,v.P)()).subscribe({next:function(e){m(e),I(!1)},error:function(){return I(!1)}})},loading:k,style:{width:"100%",display:"Closed"===(null===f||void 0===f?void 0:f.sttaus)||"New"===(null===f||void 0===f?void 0:f.sttaus)||(null===f||void 0===f?void 0:f.status)===(null===d||void 0===d||null===(Se=d.misc_info)||void 0===Se?void 0:Se.lock)||"Closed"===ze||"New"===ze||ze===(null===d||void 0===d||null===(ke=d.misc_info)||void 0===ke?void 0:ke.lock)||"Cancelled"===ze?"none":_&&"user"===_.options.action&&null!==_&&void 0!==_&&_.value&&(null===f||void 0===f||null===(Ie=f.created_by)||void 0===Ie?void 0:Ie.id)===(null===b||void 0===b?void 0:b.id)?"":"none"}}))}if("Action Button"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(W=e.options)||void 0===W||null===(B=W.action)||void 0===B?void 0:B.length)>0)return null!==e&&void 0!==e&&e.value||le?r.createElement(he.Z,{width:"100%",key:n,style:{flexDirection:"column",border:"0"},isProcess:!0,visible:void 0!==(null===e||void 0===e?void 0:e.value)||e.visible,mandatory:!1,error:e.errors},r.createElement("div",{className:me.centeredDiv,style:{width:"inherit",fontSize:"14px",fontWeight:"normal"}},r.createElement("p",{style:{width:"inherit",fontSize:"12px",fontWeight:"bold"}},null!==e&&void 0!==e&&e.value||le?null!==(V=e.options)&&void 0!==V&&V.notes?null===(J=e.options)||void 0===J?void 0:J.notes:"".concat(e.field_name,":"):"user"===e.options.action?"Not yet assigned":"No status"),"user"===e.options.action&&(null===p||void 0===p?void 0:p.length)>0&&(null===p||void 0===p?void 0:p.filter((function(n){return n.id===(le||(null===e||void 0===e?void 0:e.value))})).map((function(e,n){var l,o,t,i,d,a;return r.createElement("div",{key:n,className:me.filtersContainer,style:{fontSize:"12px"}},r.createElement(Pe.Z,{ratings:(null===e||void 0===e||null===(l=e.ratings)||void 0===l?void 0:l.length)>0?null===e||void 0===e||null===(o=e.ratings)||void 0===o?void 0:o.map((function(e){return+e.ratings})):[],simple:!0,photo:e.photo,firstName:null===e||void 0===e?void 0:e.first_name,lastName:null===e||void 0===e?void 0:e.last_name,email:null===e||void 0===e||null===(t=e.positions)||void 0===t||null===(i=t.slice(0,1))||void 0===i?void 0:i.map((function(e){return e.name})),position:"",cardClicked:function(){return O(!A)},width:"100%"}),A&&r.createElement("div",{style:{padding:"10px"}},r.createElement("h3",null,"User Feedback:"),(null===e||void 0===e||null===(d=e.ratings)||void 0===d?void 0:d.length)>0?null===e||void 0===e||null===(a=e.ratings)||void 0===a?void 0:a.map((function(e,n){return r.createElement("div",{className:me.actionsContainer,key:n,style:{fontSize:"12px",marginBottom:"10px"}},r.createElement("div",{style:{width:"60%",textAlign:"left"}},'"'.concat(e.comments,'"')))})):null))}))))):null;if("Link"===e.data_type_name){var Ue,Oe="".concat(le||(null===e||void 0===e?void 0:e.value));return r.createElement(he.Z,{width:h.tq?"100%":"50%",style:{border:"0"},key:n,fieldIcon:e.icon,isProcess:!0,visible:void 0!==(null===e||void 0===e?void 0:e.value)||e.visible,mandatory:!1,error:e.errors,customIconBgColor:"white"},null!==Oe&&void 0!==Oe&&Oe.includes("jpg")||null!==Oe&&void 0!==Oe&&Oe.includes("jpeg")||null!==e&&void 0!==e&&null!==(Ue=e.options)&&void 0!==Ue&&Ue.image||null!==Oe&&void 0!==Oe&&Oe.includes("png")?r.createElement("div",{className:me.accordionContainer,onClick:function(){return window.open(Oe,"_blank")}},r.createElement("img",{alt:"lg",src:Oe,style:{width:"100%",height:"100%",cursor:"pointer"}})):null!==Oe&&void 0!==Oe&&Oe.includes("pdf")?r.createElement("div",{className:me.accordionContainer,onClick:function(){return window.open(Oe,"_blank")}},r.createElement("embed",{onClick:function(){return window.open(Oe,"_blank")},src:"".concat(Oe,"#toolbar=0&navpanes=0&scrollbar=0"),width:"400px",height:"500px"})):r.createElement("div",{style:{width:"inherit",textDecoration:"underline",textAlign:"center",cursor:"pointer"},onClick:function(){return window.open(le,"_blank")}},"Link"))}if("Checkbox"===e.data_type_name)return r.createElement("div",{key:n},r.createElement("div",{className:me.actionsContainer,style:{fontSize:"12px"}},r.createElement("div",{style:{fontWeight:"normal",fontSize:"14px"}},e.options.value,":"),r.createElement("div",null,void 0===le?!0===(null===e||void 0===e?void 0:e.value)?"Yes":"No":1==le?"Yes":"No")),r.createElement("hr",{style:{borderTop:"0.5px solid #D2D2D2"}}));if("Status"===e.data_type_name)return r.createElement("div",{key:n},r.createElement("div",{className:me.actionsContainer,style:{fontSize:"12px"}},r.createElement("div",{style:{fontWeight:"normal",fontSize:"14px"}},"Status",":"),r.createElement("div",null,null!==(G=null===f||void 0===f?void 0:f.status)&&void 0!==G?G:le)),r.createElement("hr",{style:{borderTop:"0.5px solid #D2D2D2"}}));if("Upload"===e.data_type_name)return r.createElement("div",{key:n},r.createElement("div",{className:me.actionsContainer,style:{fontSize:"12px"}},r.createElement("div",{style:{fontWeight:"normal",fontSize:"14px"}},e.field_name,":"),(le||(null===e||void 0===e?void 0:e.value))&&r.createElement("a",{style:{fontFamily:"var(--app-text-main-font)"},key:n,href:le||(null===e||void 0===e?void 0:e.value),download:"Example-PDF-document",target:"_blank",rel:"noreferrer"},"Download File")),r.createElement("hr",{style:{borderTop:"0.5px solid #D2D2D2"}}));if("Tiles"===(null===e||void 0===e||null===(Y=e.options)||void 0===Y?void 0:Y.selection)){var Re,Le,We=c.find((function(n){return(null===n||void 0===n?void 0:n.component_fields.filter((function(n){return n.component_blueprint_id===e.options.component_id&&n.value===le})).length)>0}));if(We)return r.createElement("div",{key:n,className:me.filtersContainer,style:{color:"var(--app-color-gray-dark)",height:"inherit",width:"100%",display:null!==e&&void 0!==e&&e.visible?"":"none"}},null===e||void 0===e||null===(Re=e.options)||void 0===Re||null===(Le=Re.names)||void 0===Le?void 0:Le.map((function(e,n){var l,o,t,i,d=null!==(l=null===(o=We.component_fields.find((function(n){return n.field_name===e})))||void 0===o?void 0:o.value)&&void 0!==l?l:"";return null!==d&&void 0!==d&&d.includes("jpg")||null!==d&&void 0!==d&&d.includes("jpeg")||null!==d&&void 0!==d&&d.includes("png")?r.createElement("div",{key:n,style:{width:"inherit",display:"flex",justifyContent:"right",marginBottom:"20px"}},r.createElement("img",{alt:"lg",src:d,style:{objectFit:"contain",width:"40px",height:"30px",cursor:"pointer"}})):r.createElement("div",{key:n},r.createElement("div",{className:me.actionsContainer,style:{fontSize:"12px"}},r.createElement("div",{style:{width:"20%",textAlign:"left",fontWeight:"normal",fontSize:"14px"}},e,":"),r.createElement("div",{style:{width:"80%",textAlign:"right"}},null!==(t=null===(i=We.component_fields.find((function(n){return n.field_name===e})))||void 0===i?void 0:i.value)&&void 0!==t?t:"")),r.createElement("hr",{style:{borderTop:"0.5px solid #D2D2D2"}}))})))}if("People"===e.data_type_name)if(e.options.calendar){var qe,Fe,Be=JSON.parse(null!==(qe=le)&&void 0!==qe?qe:null!==(Fe=null===e||void 0===e?void 0:e.value)&&void 0!==Fe?Fe:JSON.stringify({})),Ye=p.find((function(e){return e.id===Be.user}));if(le=Ye?"".concat(Ye.first_name," ").concat(Ye.last_name):"",null!==Be&&void 0!==Be&&Be.task){var He,je=C.find((function(e){return e.id===Be.task}));return r.createElement("div",{key:n,style:{margin:"10px 0 10px 0",display:e.visible&&le?"":"none"}},r.createElement("div",{className:me.actionsContainer,style:{fontSize:"12px"}},r.createElement("div",{style:{fontWeight:"normal",fontSize:"14px"}},e.field_name,":"),r.createElement("div",{style:{display:"flex",flexDirection:"column",textAlign:"right"}},r.createElement("div",null,le),je&&"Closed"!==f.status&&r.createElement("div",null,null===je||void 0===je?void 0:je.name),je&&"Closed"!==f.status&&r.createElement("div",null,ae()(new Date(null===je||void 0===je||null===(He=je.add_info)||void 0===He?void 0:He.start)).format("DD MMM YYYY h:mm a")),(null===je||void 0===je?void 0:je.status)&&"Closed"!==f.status&&r.createElement("div",null,null===je||void 0===je?void 0:je.status))),r.createElement("hr",{style:{borderTop:"0.5px solid #D2D2D2"}}))}}else{var Ve=p.find((function(n){var l;return n.id===(null!==(l=le)&&void 0!==l?l:e.value)}));le=Ve?"".concat(Ve.first_name," ").concat(Ve.last_name):""}return"Video"===e.data_type_name&&x===(null!==(H=null===e||void 0===e||null===(j=e.options)||void 0===j?void 0:j.status)&&void 0!==H?H:"New")&&null!==e&&void 0!==e&&e.value&&ae()(null===e||void 0===e?void 0:e.value)<=(0,de.now)()&&(0,de.now)()<ae()(null===e||void 0===e?void 0:e.value).add("minutes",+(null!==(Q=null===e||void 0===e||null===(K=e.options)||void 0===K?void 0:K.expiry)&&void 0!==Q?Q:30))?r.createElement("div",{key:n,style:{width:"100%",fontSize:"12px",display:"flex",flexDirection:"column",justifyContent:"center"}},r.createElement("div",{style:{fontWeight:"normal",fontSize:"14px"}},e.field_name,":"),r.createElement("div",{style:{width:"100%",fontSize:"12px",display:"flex",flexDirection:"column",justifyContent:"center"}},r.createElement(Ae.Z,{payload:{name:null===f||void 0===f?void 0:f.id}}))):"Positions"===e.data_type_name?r.createElement("div",{key:n,style:{margin:"10px 0 10px 0",display:e.visible&&le?"":"none"}},r.createElement("div",{className:me.actionsContainer,style:{fontSize:"12px"}},r.createElement("div",{style:{fontWeight:"normal",fontSize:"14px"}},e.field_name,":"),r.createElement("div",{style:{textAlign:"right",width:"60%"}},null!==e&&void 0!==e&&e.value?null===(X=w.find((function(n){return n.value===(null===e||void 0===e?void 0:e.value)})))||void 0===X?void 0:X.label:"-")),r.createElement("hr",{style:{borderTop:"0.5px solid #D2D2D2"}})):r.createElement("div",{key:n,style:{margin:"10px 0 10px 0",display:e.visible&&le?"":"none"}},r.createElement("div",{className:me.actionsContainer,style:{fontSize:"12px"}},r.createElement("div",{style:{fontWeight:"normal",fontSize:"14px"}},e.field_name,":"),r.createElement("div",{style:{textAlign:"right",width:"60%"}},null===le||void 0===le?null!==e&&void 0!==e&&e.value?"Date"===e.data_type_name||"Video"===e.data_type_name?"Invalid date"===ae()(new Date(null===e||void 0===e?void 0:e.value)).format("DD MMM YYYY h:mm a")?"":ae()(new Date(null===e||void 0===e?void 0:e.value)).format("DD MMM YYYY h:mm a"):null===e||void 0===e?void 0:e.value:"":"Date"===e.data_type_name||"Video"===e.data_type_name?"Invalid date"===ae()(new Date(le)).format("DD MMM YYYY h:mm a")?"":ae()(new Date(le)).format("DD MMM YYYY h:mm a"):le)),r.createElement("hr",{style:{borderTop:"0.5px solid #D2D2D2"}}))}));return r.createElement("div",{style:{width:"100%",display:k?"none":"",margin:"20px 0"}},B)})),$e=function(e){var n,l,o,t=e.component,i=e.title,d=void 0===i?"Created by":i,a=(0,s.v9)((function(e){return e.flowReducer})),u=a.companyUsersArray.find((function(e){var n;return e.id===(null===(n=t.created_by)||void 0===n?void 0:n.id)}));return r.createElement("div",{className:me.centeredDiv,style:{width:"inherit",fontSize:"14px",marginTop:"20px"}},r.createElement("div",{style:{fontFamily:"var(--app-text-main-font)",fontWeight:"bold",color:"var(--app-color-gray-dark)",paddingLeft:"5px"}},d),r.createElement("div",{className:me.filtersContainer},r.createElement(Pe.Z,{title:"Created by:",simple:!0,photo:null!==(n=null===u||void 0===u?void 0:u.photo)&&void 0!==n?n:"https://s3-symbol-logo.tradingview.com/logo-yazilim--600.png",email:"Document Date: ".concat(ae()(new Date(t.created_date)).format("DD MMM YYYY")),position:"Time: ".concat(ae()(new Date(t.created_date)).format("h:mm a")),firstName:r.createElement("div",{style:{fontWeight:"bold"}},"".concat(null===(l=t.created_by)||void 0===l?void 0:l.first_name," ").concat(null===(o=t.created_by)||void 0===o?void 0:o.last_name)),cardClicked:function(){},width:"100%"})))},en=function(e){var n,l,o,t,i,d,a,u,v,c,p,m,f,_,y=e.component,h=(0,s.v9)((function(e){return e.flowReducer})),g=h.companyData,b=(0,s.v9)((function(e){return e.authReducer})),x=b.authenticatedUser,E=null===y||void 0===y?void 0:y.component_fields.find((function(e){var n;return"Payments"===e.data_type_name&&("Done"===(null===y||void 0===y?void 0:y.status)||"Closed"===(null===y||void 0===y?void 0:y.status))&&(null===y||void 0===y||null===(n=y.created_by)||void 0===n?void 0:n.id)===(null===x||void 0===x?void 0:x.id)})),C=null===y||void 0===y?void 0:y.component_fields.find((function(e){var n;return e.field_name===(null===E||void 0===E||null===(n=E.options)||void 0===n?void 0:n.paymentField)}));return r.createElement("div",{className:me.filtersContainer,style:{display:E?"":"none"}},null!==y&&void 0!==y&&y.payments?r.createElement("div",null,r.createElement("div",{className:me.actionsContainer,style:{fontSize:"12px"}},r.createElement("div",null,"Payments:",":"),r.createElement("div",null,"".concat(null===(n=y.payments)||void 0===n?void 0:n.stripe_product,", ID: ").concat(null===(l=y.payments)||void 0===l?void 0:l.stripe_id.substring(0,5)))),r.createElement("hr",{style:{borderTop:"0.5px solid #D2D2D2"}}),r.createElement("div",{className:me.actionsContainer,style:{fontSize:"12px"}},r.createElement("div",null,"Amount Paid",":"),r.createElement("div",null,"".concat((+(null!==(o=null===(t=y.payments)||void 0===t?void 0:t.stripe_price)&&void 0!==o?o:0)).toFixed(2)))),r.createElement("hr",{style:{borderTop:"0.5px solid #D2D2D2"}}),(null===(i=y.assigned_to)||void 0===i?void 0:i.id)===(null===x||void 0===x?void 0:x.id)&&r.createElement("div",{className:me.actionsContainer,style:{fontSize:"12px"}},r.createElement("div",null,"Transaction Fees",":"),r.createElement("div",null,"".concat((+(null===(d=y.payments)||void 0===d?void 0:d.stripe_price)*(null!==(a=null===g||void 0===g||null===(u=g.misc_info)||void 0===u?void 0:u.rate)&&void 0!==a?a:.2)).toFixed(2))))):r.createElement("div",null,"Cash"===(null===E||void 0===E?void 0:E.value)&&r.createElement("div",{className:me.actionsContainer,style:{fontSize:"12px"}},r.createElement("div",null,"Payments:",":"),r.createElement("div",null,"Cash")),"Cash"===(null===E||void 0===E?void 0:E.value)&&r.createElement("div",{className:me.actionsContainer,style:{fontSize:"12px"}},r.createElement("div",null,"Cash Paid",":"),r.createElement("div",null,"".concat((+(null===C||void 0===C?void 0:C.value)).toFixed(2)))),"Cash"===(null===E||void 0===E?void 0:E.value)&&(null===(v=y.assigned_to)||void 0===v?void 0:v.id)===(null===x||void 0===x?void 0:x.id)&&r.createElement("div",{className:me.actionsContainer,style:{fontSize:"12px"}},r.createElement("div",null,"Deducted from wallet",":"),r.createElement("div",null,"".concat((+(null===C||void 0===C?void 0:C.value)+ +(null===C||void 0===C?void 0:C.value)*(null!==(c=null===g||void 0===g||null===(p=g.misc_info)||void 0===p?void 0:p.rate)&&void 0!==c?c:.2)).toFixed(2)))),"Cash"===(null===E||void 0===E?void 0:E.value)&&(null===(m=y.assigned_to)||void 0===m?void 0:m.id)===(null===x||void 0===x?void 0:x.id)&&r.createElement("div",{className:me.actionsContainer,style:{fontSize:"12px"}},r.createElement("div",null,"Total Fees",":"),r.createElement("div",null,"".concat((+(null===C||void 0===C?void 0:C.value)*(null!==(f=null===g||void 0===g||null===(_=g.misc_info)||void 0===_?void 0:_.rate)&&void 0!==f?f:.2)).toFixed(2)))),"Cash"!==(null===E||void 0===E?void 0:E.value)&&r.createElement("div",{className:me.actionsContainer,style:{fontSize:"12px",fontWeight:"bold"}},r.createElement("div",null,"Payments:",":"),r.createElement("div",{style:{color:"red"}},"Pending"))))},nn=function(e){var n=f.h.getState().flowReducer.companyUsersArray,l=e.isEdit,o=e.modalVisible,t=e.heading,i=e.onClose,d=e.isProcess,a=e.setIsProcessBegin,s=e.task,c=e.priority,p=void 0===c||c,m=e.shadowedContainerStyle,h=e.statuses,g=e.start_date,b=e.span,x=e.labels,E=void 0===x?{}:x,C=e.onUpdate,w=void 0===C?function(){}:C,Z=e.save,M=void 0===Z||Z,S=(0,r.useState)(E),k=(0,u.Z)(S,1)[0],I=(0,r.useState)(d),P=(0,u.Z)(I,1)[0],N=(0,r.useState)(t),T=(0,u.Z)(N,1)[0];return(0,r.useEffect)((function(){var e=[];if(s){var l,o;if(!n.find((function(e){var n;return e.id===(null===s||void 0===s||null===(n=s.creator)||void 0===n?void 0:n.id)})))e=e.concat(null===(l=s.creator)||void 0===l?void 0:l.id);if(!n.find((function(e){var n;return e.id===(null===s||void 0===s||null===(n=s.assignee)||void 0===n?void 0:n.id)})))e=e.concat(null===(o=s.assignee)||void 0===o?void 0:o.id);e.length>0&&(0,Ee.VG)(e).pipe((0,v.P)()).subscribe({next:function(e){f.h.dispatch((0,_.NY)(n.concat(e)))}})}}),[]),r.createElement("div",null,r.createElement(y.U7,{scrollable:!0,shadowedContainerStyle:m||{width:"100%",minHeight:"100vh"},isOpen:o,onClose:function(){},blured:!1},r.createElement("div",null,r.createElement("p",{style:{fontFamily:"var(--app-text-main-font)",fontSize:"20px",fontWeight:"bold",color:"#4A4A4A",marginTop:"50px",marginBottom:"20px",textAlign:"center"}},null!==s&&void 0!==s&&s.completed_at?"Completed Task":T),r.createElement(ln,{labels:k,showPriority:p,statuses:h,task:s,setIsProcessBegin:a,setDisplayModal:i,isProcess:P,isEdit:l,onClose:function(){return i()},start_date:g,span:b,onUpdate:w,save:M}))))};function ln(e){var n,l,o,t,i,s,v,c,p,m,_,h,g,b,x,E,C,w,Z,M,S,k,P,N,D,A,O,R,L,W,q,F,B,Y,H,j,V,J,G,Q,K,X,$,ee,ne,le,oe,te=f.h.getState().flowReducer,ie=te.selectedProcess,de=te.companyUsersArray,ue=te.begunModule,re=te.companyData,ce=f.h.getState().sessionReducer.user,pe=e.isProcess,fe=e.statuses,_e=e.task,ge=e.isEdit,be=e.assigneeId,xe=e.setDisplayModal,Ee=e.onClose,Ce=e.start_date,we=void 0===Ce?(new Date).setDate((new Date).getDate()):Ce,Ze=e.span,Me=void 0===Ze||Ze,Se=e.labels,ke=e.onUpdate,Ie=void 0===ke?function(){}:ke,Pe=e.save,Ne=void 0===Pe||Pe,De=(0,r.useState)(null!==_e&&void 0!==_e&&null!==(n=_e.assignee)&&void 0!==n&&n.id?{assignee_id:null===_e||void 0===_e||null===(l=_e.assignee)||void 0===l?void 0:l.id}:""),ze=(0,u.Z)(De,2),Ue=ze[0],Ae=ze[1],Oe=(0,r.useState)(null!==_e&&void 0!==_e&&null!==(o=_e.process)&&void 0!==o&&o.id?{process:null===_e||void 0===_e||null===(t=_e.process)||void 0===t?void 0:t.id}:""),Re=(0,u.Z)(Oe,2),Le=(Re[0],Re[1]),We=(0,r.useState)((null===_e||void 0===_e?void 0:_e.name)||""),qe=(0,u.Z)(We,2),Fe=qe[0],Be=qe[1],Ye=(0,r.useState)((null===_e||void 0===_e?void 0:_e.status)||""),He=(0,u.Z)(Ye,2),je=He[0],Ve=He[1],Je=(0,r.useState)((null===_e||void 0===_e?void 0:_e.description)||""),Ge=(0,u.Z)(Je,2),Qe=Ge[0],Ke=Ge[1],Xe=(0,r.useState)(null!==_e&&void 0!==_e&&_e.due_date?new Date(null===_e||void 0===_e?void 0:_e.due_date):(new Date).setDate((new Date).getDate())+36e5),$e=(0,u.Z)(Xe,2),en=$e[0],nn=($e[1],(0,r.useState)(null!==_e&&void 0!==_e&&null!==(i=_e.add_info)&&void 0!==i&&i.start?new Date(null===_e||void 0===_e||null===(s=_e.add_info)||void 0===s?void 0:s.start):we)),ln=(0,u.Z)(nn,2),tn=ln[0],dn=ln[1],an=(0,r.useState)(null!==_e&&void 0!==_e&&null!==(v=_e.add_info)&&void 0!==v&&v.end?new Date(null===_e||void 0===_e||null===(c=_e.add_info)||void 0===c?void 0:c.end):we),un=(0,u.Z)(an,2),rn=un[0],sn=un[1],vn=(0,r.useState)(null===_e||void 0===_e||null===(p=_e.add_info)||void 0===p?void 0:p.value),cn=(0,u.Z)(vn,2),pn=cn[0],mn=cn[1],fn=(0,r.useState)(""),_n=(0,u.Z)(fn,2),yn=_n[0],hn=_n[1],gn=(0,r.useState)(!1),bn=(0,u.Z)(gn,2),xn=bn[0],En=bn[1],Cn=(0,r.useState)(!1),wn=(0,u.Z)(Cn,2),Zn=wn[0],Mn=wn[1],Sn=(0,r.useState)(!1),kn=(0,u.Z)(Sn,2),In=kn[0],Pn=kn[1],Nn=(0,r.useState)(!1),Tn=(0,u.Z)(Nn,2),Dn=Tn[0],zn=Tn[1],Un=(0,r.useState)(pe),An=(0,u.Z)(Un,2),On=An[0],Rn=(An[1],(0,r.useState)((null===_e||void 0===_e||null===(m=_e.add_info)||void 0===m?void 0:m.priority)||"")),Ln=(0,u.Z)(Rn,2),Wn=Ln[0],qn=(Ln[1],(null===de||void 0===de?void 0:de.length)>0?ge&&(null===_e||void 0===_e||null===(_=_e.creator)||void 0===_?void 0:_.id)!==ce.id?[{label:ce.first_name+" "+ce.last_name,value:ce.id}]:(null===Se||void 0===Se||null===(h=Se.aList)||void 0===h?void 0:h.length)>0?de.filter((function(e){var n;return(null===e||void 0===e||null===(n=e.positions)||void 0===n?void 0:n.filter((function(e){var n,l;return null===Se||void 0===Se||null===(n=Se.options)||void 0===n||null===(l=n.aList)||void 0===l?void 0:l.includes(null===e||void 0===e?void 0:e.id)})).length)>0})).map((function(e){return{label:e.first_name+" "+e.last_name,value:e.id}})):de.map((function(e){return{label:e.first_name+" "+e.last_name,value:e.id}})):[]);(0,r.useEffect)((function(){return Pn(!0),function(){Pn(!1)}}),[]),(0,r.useEffect)((function(){if(On&&null!==ie&&void 0!==ie&&ie.id&&In){Le({procedure_id:ie.id}),Ke(ie.description)}}),[On,In,ie.description,ie.id]);var Fn=fe?fe.map((function(e){return{label:e,value:e}})):[{label:"Ongoing",value:"Ongoing"},{label:"In Review",value:"In Review"},{label:"Approved",value:"Approved"},{label:"Postponed",value:"Postponed"},{label:"Moved",value:"Moved"},{label:"Cancelled",value:"Cancelled"}];return r.createElement("div",{className:me.newTaskFormHost,style:{padding:"0 20px 0 20px"}},r.createElement(z(),{style:{flex:1}},r.createElement(he.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-dark)",fontWeight:"regular",paddingLeft:"5px"},enabled:void 0===(null===_e||void 0===_e?void 0:_e.id)||(null===_e||void 0===_e||!_e.completed_at)&&ce.id===(null===_e||void 0===_e||null===(g=_e.creator)||void 0===g?void 0:g.id),width:"100%",style:{marginTop:"0px",border:"1px dashed var(--app-color-gray-light)",padding:"5px"},editMode:!1,fieldLabel:null!==(b=null===Se||void 0===Se?void 0:Se.title)&&void 0!==b?b:"Event Name",isProcess:!0,visible:!0,mandatory:!0,error:null===yn||void 0===yn||null===(x=yn.errors)||void 0===x?void 0:x.name},r.createElement("textarea",{className:me.fieldTypeTextarea,type:"text",value:Fe,readOnly:void 0!==(null===_e||void 0===_e?void 0:_e.id)&&(!(null===_e||void 0===_e||!_e.completed_at)||ce.id!==(null===_e||void 0===_e||null===(E=_e.creator)||void 0===E?void 0:E.id)),autoComplete:"none",onChange:function(e){return Be(e.target.value)},placeholder:"",style:{height:"60px",border:"0"}})),r.createElement(he.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-dark)",fontWeight:"regular",paddingLeft:"5px"},enabled:void 0===(null===_e||void 0===_e?void 0:_e.id)||(null===_e||void 0===_e||!_e.completed_at)&&ce.id===(null===_e||void 0===_e||null===(C=_e.creator)||void 0===C?void 0:C.id),width:"100%",style:{marginTop:"0px",border:"1px dashed var(--app-color-gray-light)",padding:"5px"},editMode:!0,fieldLabel:null!==(w=null===Se||void 0===Se?void 0:Se.description)&&void 0!==w?w:"Description",isProcess:!0,visible:(null!==_e&&void 0!==_e&&_e.completed_at,!0),mandatory:!0,error:null===yn||void 0===yn||null===(Z=yn.errors)||void 0===Z?void 0:Z.name},r.createElement("textarea",{className:me.fieldTypeTextarea,style:{border:"0",minHeight:"160px"},readOnly:void 0!==(null===_e||void 0===_e?void 0:_e.id)&&(!(null===_e||void 0===_e||!_e.completed_at)||ce.id!==(null===_e||void 0===_e||null===(M=_e.creator)||void 0===M?void 0:M.id)),required:null===yn||void 0===yn||null===(S=yn.errors)||void 0===S?void 0:S.description,value:Qe,onChange:function(e){return Ke(e.target.value)}})),r.createElement(he.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-dark)",fontWeight:"regular",paddingLeft:"5px"},enabled:void 0===(null===_e||void 0===_e?void 0:_e.id)||(null===_e||void 0===_e||!_e.completed_at)&&ce.id===(null===_e||void 0===_e||null===(k=_e.creator)||void 0===k?void 0:k.id),width:"100%",style:{marginTop:"0px",border:"1px dashed var(--app-color-gray-light)",padding:"5px"},editMode:!1,fieldLabel:null===Se||void 0===Se?void 0:Se.valueL,isProcess:!0,visible:!(null===Se||void 0===Se||!Se.valueL),mandatory:!0},r.createElement("div",null,r.createElement("input",{className:me.fieldTypeInput,style:{border:"0"},readOnly:void 0!==(null===_e||void 0===_e?void 0:_e.id)&&(!(null===_e||void 0===_e||!_e.completed_at)||ce.id!==(null===_e||void 0===_e||null===(P=_e.creator)||void 0===P?void 0:P.id)),value:pn,onChange:function(e){return mn(e.target.value)},onBlur:function(){var e,n,l;null!==ue&&void 0!==ue&&null!==(e=ue.processModule)&&void 0!==e&&null!==(n=e.module)&&void 0!==n&&null!==(l=n.options)&&void 0!==l&&l.credits&&+pn>+(null===ce||void 0===ce?void 0:ce.wallet)&&(mn("0.00"),hn({errors:{value:"You have insufficient funds in your wallet. You currently have ".concat(null===ce||void 0===ce?void 0:ce.wallet,".")}}))}}),yn&&(null===yn||void 0===yn||null===(N=yn.errors)||void 0===N?void 0:N.value)&&r.createElement(I.Z,{message:yn.errors.value,onClick:function(){return hn("")}}))),r.createElement(he.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-dark)",fontWeight:"regular",paddingLeft:"5px"},enabled:void 0===(null===_e||void 0===_e?void 0:_e.id)||(null===_e||void 0===_e||!_e.completed_at)&&ce.id===(null===_e||void 0===_e||null===(D=_e.creator)||void 0===D?void 0:D.id),width:"100%",style:{marginTop:"0px",border:"1px dashed var(--app-color-gray-light)",padding:"5px"},editMode:!1,fieldLabel:null!==(A=null===Se||void 0===Se?void 0:Se.start)&&void 0!==A?A:"Start Date",isProcess:!0,visible:!0,mandatory:!0,error:null===yn||void 0===yn||null===(O=yn.errors)||void 0===O?void 0:O.due_date},r.createElement(ye(),{showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:15,readOnly:void 0!==(null===_e||void 0===_e?void 0:_e.id)&&(!(null===_e||void 0===_e||!_e.completed_at)||ce.id!==(null===_e||void 0===_e||null===(R=_e.creator)||void 0===R?void 0:R.id)),placeholderText:"Start Date",customInput:r.createElement("div",{id:"custom-input",style:{cursor:"pointer",display:"flex",justifyContent:"center",width:"100%",alignItems:"stretch"}},r.createElement("input",{readOnly:!0,value:void 0!==(null===_e||void 0===_e?void 0:_e.id)&&(null!==_e&&void 0!==_e&&_e.completed_at||ce.id!==(null===_e||void 0===_e||null===(L=_e.creator)||void 0===L?void 0:L.id))?"".concat(ae()(tn).format("DD MMMM YYYY HH:mm")):ae()(tn).format("DD MMMM YYYY HH:mm"),type:"text",required:null===yn||void 0===yn||null===(W=yn.errors)||void 0===W?void 0:W.startDate,id:"start-date",style:{flex:1,marginTop:"auto",marginBottom:"auto",outline:"none",border:"none",fontFamily:"var(--app-text-main-font)",fontSize:"16px",fontWeight:"bold",lineHeight:"20px",color:"#4A4A4A",textAlign:(null===tn||void 0===tn?void 0:tn.length)>0?"center":"left",maxWidth:"98%"},placeholder:"Start Date",onChange:function(e){}}),r.createElement(ve.G,{icon:se.WRo,style:{width:"20px",height:"20px"}})),className:me.datePickerWrapper,selected:tn,onChange:function(e){ae()(e).diff(ae()(rn),"minutes")<1?dn(e):(dn(e),sn(e))}})),r.createElement(he.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-dark)",fontWeight:"regular",paddingLeft:"5px"},enabled:void 0===(null===_e||void 0===_e?void 0:_e.id)||(null===_e||void 0===_e||!_e.completed_at)&&ce.id===(null===_e||void 0===_e||null===(q=_e.creator)||void 0===q?void 0:q.id),width:"100%",style:{marginTop:"0px",border:"1px dashed var(--app-color-gray-light)",padding:"5px"},editMode:!1,fieldLabel:null!==(F=null===Se||void 0===Se?void 0:Se.end)&&void 0!==F?F:"End Date",isProcess:!0,visible:!0,mandatory:!0,error:null===yn||void 0===yn||null===(B=yn.errors)||void 0===B?void 0:B.due_date},r.createElement(ye(),{showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:15,readOnly:void 0!==(null===_e||void 0===_e?void 0:_e.id)&&(!(null===_e||void 0===_e||!_e.completed_at)||ce.id!==(null===_e||void 0===_e||null===(Y=_e.creator)||void 0===Y?void 0:Y.id)),placeholderText:"End Date",customInput:r.createElement("div",{id:"custom-input",style:{cursor:"pointer",display:"flex",justifyContent:"center",width:"100%",alignItems:"stretch"}},r.createElement("input",{readOnly:!0,value:ae()(rn).format("DD MMMM YYYY HH:mm"),type:"text",required:null===yn||void 0===yn||null===(H=yn.errors)||void 0===H?void 0:H.endDate,id:"due-date",style:{flex:1,marginTop:"auto",marginBottom:"auto",outline:"none",border:"none",fontFamily:"var(--app-text-main-font)",fontSize:"16px",fontWeight:"bold",lineHeight:"20px",color:"#4A4A4A",textAlign:(null===rn||void 0===rn?void 0:rn.length)>0?"center":"left",maxWidth:"98%"},placeholder:"Due Date",onChange:function(e){}}),r.createElement(ve.G,{icon:se.WRo,style:{width:"20px",height:"20px"}})),className:me.datePickerWrapper,selected:rn,onChange:function(e){ae()(e).diff(ae()(tn),"minutes")>0?!1===Me?ae()(e).format("DD")===ae()(rn).format("DD")?sn(e):sn(rn):sn(e):sn(rn)}})),r.createElement("div",{style:{marginBottom:"10px"}},r.createElement("label",{style:{fontSize:"12px",color:"var(--app-color-gray-dark)",fontWeight:"regular",paddingLeft:"5px"}},null!==(j=null===Se||void 0===Se?void 0:Se.assignee)&&void 0!==j?j:"Assignee",null!==_e&&void 0!==_e&&_e.completed_at?r.createElement("div",null,r.createElement("input",{style:{cursor:"auto"},placeholder:(null===_e||void 0===_e?void 0:_e.assignee.first_name)+" "+(null===_e||void 0===_e?void 0:_e.assignee.last_name),readOnly:!0})):r.createElement(T.ZP,{isSearchable:!1,key:"Assignee",styles:U.X2,defaultInputValue:"",components:{DropdownIndicator:U.ms},placeholder:"",value:qn[qn.findIndex((function(e){return e.value===Ue.assignee_id}))],options:qn.concat([{label:"None",value:""}]),onChange:function(e){e&&Ae((function(n){return(0,a.Z)((0,a.Z)({},n),{},{assignee_id:e.value})}))}})),yn&&(null===yn||void 0===yn||null===(V=yn.errors)||void 0===V?void 0:V.assignee_id)&&r.createElement(I.Z,{message:yn.errors.assignee_id})),((null===_e||void 0===_e?void 0:_e.completed_at)||ce.id===(null===_e||void 0===_e||null===(J=_e.creator)||void 0===J?void 0:J.id))&&r.createElement("div",{style:{marginBottom:"10px"}},r.createElement("label",{style:{fontSize:"12px",color:"var(--app-color-gray-dark)",fontWeight:"regular",paddingLeft:"5px"}},"Status",null!==_e&&void 0!==_e&&_e.completed_at?r.createElement("input",{style:{cursor:"auto"},placeholder:null!==(G=null===_e||void 0===_e?void 0:_e.status)&&void 0!==G?G:"No status set",readOnly:!0}):ce.id===(null===_e||void 0===_e||null===(Q=_e.creator)||void 0===Q?void 0:Q.id)?r.createElement(T.ZP,{onFocus:function(){return hn("")},key:"status",isSearchable:!1,styles:U.X2,defaultInputValue:"",components:{DropdownIndicator:U.ms},placeholder:"",value:Fn.find((function(e){return e.value===je})),options:ce.id===(null===_e||void 0===_e||null===(K=_e.creator)||void 0===K?void 0:K.id)?[].concat((0,d.Z)(Fn),[{label:null===re||void 0===re||null===(X=re.misc_info)||void 0===X?void 0:X.lock,value:null===re||void 0===re||null===($=re.misc_info)||void 0===$?void 0:$.lock},{label:"No status",value:""}]):Fn,onChange:function(e){return Ve(e.value)}}):r.createElement("input",{style:{cursor:"auto"},placeholder:null!==(ee=null===_e||void 0===_e?void 0:_e.status)&&void 0!==ee?ee:"No status set",readOnly:!0})),yn&&(null===yn||void 0===yn||null===(ne=yn.errors)||void 0===ne?void 0:ne.procedure_id)&&r.createElement(I.Z,{message:yn.errors.procedure_id})),yn&&(null===yn||void 0===yn?void 0:yn.message)&&r.createElement(I.Z,{message:yn.message})),null!==_e&&void 0!==_e&&_e.completed_at?r.createElement("div",{className:me.buttonsContainer},r.createElement(y.zx,{clicked:Ee,className:me.saveButton,title:"Close"})):ge?r.createElement("div",{className:me.buttonsContainer},r.createElement(y.zx,{clicked:Ee,className:me.saveButton,title:"Close"}),Ne&&ce.id===(null===(le=_e.creator)||void 0===le?void 0:le.id)&&!(null!==_e&&void 0!==_e&&null!==(oe=_e.assignee)&&void 0!==oe&&oe.id)&&r.createElement(y.zx,{light:!0,clicked:function(){return zn(!0)},className:me.saveButton,title:"Delete"}),Ne&&r.createElement(y.zx,{light:!0,clicked:function(){return function(){var n,l;En(!0);var o=Ue?Ue.assignee_id:be;(0,Te.xJ)({assignee_id:o,name:Fe,description:Qe,due_date:ae()(en).format("YYYY-MM-DD HH:mm"),status:null!==je&&void 0!==je?je:"",add_info:(0,a.Z)((0,a.Z)({},null===e||void 0===e||null===(n=e.task)||void 0===n?void 0:n.add_info),{},{priority:null!==Wn&&void 0!==Wn?Wn:"",start:tn,end:rn,value:pn})},null===e||void 0===e||null===(l=e.task)||void 0===l?void 0:l.id).subscribe({next:function(e){Ie(e),En(!1),xe(!1)},error:function(e){e&&(hn(e.data),En(!1))},complete:function(){}})}()},className:me.saveButton,title:"Update",loading:xn}),!Ne&&r.createElement(y.zx,{title:"Save",light:!0,clicked:function(){var n;Ie((0,a.Z)((0,a.Z)({},null===e||void 0===e?void 0:e.task),{},{assignee_id:Ue?Ue.assignee_id:be,name:Fe,description:Qe,due_date:ae()(en).format("YYYY-MM-DD HH:mm"),status:null!==je&&void 0!==je?je:"",add_info:(0,a.Z)((0,a.Z)({},null===e||void 0===e||null===(n=e.task)||void 0===n?void 0:n.add_info),{},{priority:null!==Wn&&void 0!==Wn?Wn:"",start:tn,end:rn,value:pn})})),xe(!1)},className:me.saveButton})):r.createElement("div",{className:me.buttonsContainer},r.createElement(y.zx,{clicked:Ee,className:me.saveButton,title:"Close"}),r.createElement(y.zx,{light:!0,clicked:function(){return En(!0),void(0,Te.vr)({newAssignee:Ue,taskProcess:null===ue||void 0===ue?void 0:ue.processModule,taskName:Fe,taskDescription:null!==Qe&&void 0!==Qe?Qe:"-",dueDate:ae()(rn).format("YYYY-MM-DD HH:mm"),add_info:{module_id:null===ue||void 0===ue?void 0:ue.processModule.module_id,priority:Wn,start:tn,end:rn,value:pn}}).subscribe({next:function(e){Ee()},error:function(e){e&&(hn(e.data),En(!1))},complete:function(){En(!1),!On&&xe(!1)}})},className:me.saveButton,title:"Save",loading:xn})),Dn&&r.createElement(on,{taskId:_e.id,isOpen:Dn,removeTask:function(e){Mn(!0),(0,Te._5)(e).subscribe({next:function(e){Mn(!1),zn(!1)},error:function(e){Mn(!1)},complete:function(){xe(!1)}})},loading:Zn,onClose:zn}))}var on=function(e){var n=e.isOpen,l=e.onClose,o=e.loading,t=e.removeTask,i=e.taskId;return r.createElement(y.U7,{isOpen:n,onClose:function(){return l(!1)},backdropColor:!0,blured:!0,scrollable:!0,shadowedContainerStyle:{width:"35%"}},r.createElement("div",null,r.createElement("p",{style:{textAlign:"center",fontSize:"20px",color:"#4A4A4A",fontFamily:"var(--app-text-main-font)"}},"Are you sure do you want to delete this task?"),r.createElement(y.zx,{loading:o,clicked:function(){return t(i)},title:"Yes, Delete",style:{fontWeight:"500",marginLeft:"auto",marginRight:"auto"}}),r.createElement("p",{style:{cursor:"pointer",textAlign:"center",fontSize:"16px",fontWeight:600,color:"#4A4A4A",fontFamily:"var(--app-text-main-font)"},onClick:function(){return l(!1)},className:"go-back-text"},"No, Go Back")))},tn=(0,s.$j)((function(e){var n=e.flowReducer,l=n.begunModule,o=n.allModules,t=n.companyData,i=n.components,d=n.rememberPath,a=n.lastUpdates,u=n.companyUsersArray,r=n.products,s=n.transactions,v=n.companyProcesses,c=n.companyPositionsArray,p=n.cart,m=n.blueprints,f=n.payable,_=n.allTasks,y=e.authReducer.authenticatedUser;return{user:e.sessionReducer.user,begunModule:l,allModules:o,companyData:t,components:i,rememberPath:d,lastUpdates:a,companyUsersArray:u,products:r,transactions:s,companyProcesses:v,companyPositionsArray:c,cart:p,blueprints:m,payable:f,authenticatedUser:y,allTasks:_}}),(function(e){return{onSetAuthenticatedUser:function(n){return e((0,b.IF)(n))}}}))((function(e){var n,l,o,t,b,w,M,k,N,T,D,z,R,X,$,ee,ne,le,oe,te,ie,ce,pe,fe,_e,ye,he,ge,be,xe,Ce,we,Ze,Me,Se,ke,Ie,Ne,De,ze,Ue,Ae,Le,We,qe,Ye,He,je,Ve,Je,Ge,Ke,Xe,$e,en,nn,ln,on,tn,dn,an,un,rn,sn,vn,cn,pn,mn,fn,_n,yn,hn,gn,bn,xn,En,Cn,wn,Zn,Mn,Sn,kn=e.navigateTo,In=void 0===kn?{}:kn,Pn=e.begunModule,Nn=e.user,Tn=e.cart,Dn=e.selectedProcess,zn=void 0===Dn?{steps:[]}:Dn,Un=e.allModules,An=e.companyData,On=e.components,Rn=e.onCancel,Ln=void 0===Rn?function(){}:Rn,Wn=e.companyUsersArray,qn=e.products,Fn=e.companyPositionsArray,Bn=e.blueprints,Yn=e.paymentID,Hn=void 0===Yn?"":Yn,jn=e.isEditing,Vn=void 0!==jn&&jn,Jn=e.payable,Gn=e.selectedComponent,Qn=e.setSelectedComponent,Kn=e.isProcessorOnly,Xn=void 0!==Kn&&Kn,$n=e.companyProcesses,el=e.lastUpdates,nl=e.allTasks,ll=(0,s.v9)((function(e){return e.authReducer})),ol=ll.authenticatedUser,tl=(0,r.useState)(!1),il=(0,u.Z)(tl,2),dl=il[0],al=il[1],ul=(0,r.useState)(1),rl=(0,u.Z)(ul,1)[0],sl=(0,r.useState)(!1),vl=(0,u.Z)(sl,2),cl=vl[0],pl=vl[1],ml=(0,r.useState)(!1),fl=(0,u.Z)(ml,2),_l=fl[0],yl=fl[1],hl=(0,r.useState)(""),gl=(0,u.Z)(hl,2),bl=gl[0],xl=gl[1],El=(0,r.useState)(!1),Cl=(0,u.Z)(El,2),wl=Cl[0],Zl=Cl[1],Ml=(0,r.useState)(!1),Sl=(0,u.Z)(Ml,2),kl=Sl[0],Il=Sl[1],Pl=(0,r.useState)(null===(n=null===Gn||void 0===Gn?void 0:Gn.is_complete)||void 0===n||n),Nl=(0,u.Z)(Pl,2),Tl=Nl[0],Dl=Nl[1],zl=(0,r.useState)([]),Ul=(0,u.Z)(zl,2),Al=Ul[0],Ol=Ul[1],Rl=(0,r.useState)([]),Ll=(0,u.Z)(Rl,2),Wl=Ll[0],ql=Ll[1],Fl=(0,r.useState)(!1),Bl=(0,u.Z)(Fl,2),Yl=Bl[0],Hl=Bl[1],jl=(0,r.useState)(!1),Vl=(0,u.Z)(jl,2),Jl=Vl[0],Gl=Vl[1],Ql=(0,r.useState)(!1),Kl=(0,u.Z)(Ql,2),Xl=Kl[0],$l=Kl[1],eo=(0,r.useState)(!1),no=(0,u.Z)(eo,2),lo=no[0],oo=no[1],to=(0,r.useState)(!1),io=(0,u.Z)(to,2),ao=io[0],uo=io[1],ro=(0,r.useState)(!1),so=(0,u.Z)(ro,2),vo=so[0],co=so[1],po=(0,r.useState)(!1),mo=(0,u.Z)(po,2),fo=mo[0],_o=mo[1],yo=(0,r.useState)([]),ho=(0,u.Z)(yo,2),go=ho[0],bo=ho[1],xo=(0,r.useState)([]),Eo=(0,u.Z)(xo,2),Co=Eo[0],wo=Eo[1],Zo=(0,r.useState)([]),Mo=(0,u.Z)(Zo,2),So=Mo[0],ko=Mo[1],Io=(0,r.useState)(!1),Po=(0,u.Z)(Io,2),No=Po[0],To=Po[1],Do=(0,r.useState)(!1),zo=(0,u.Z)(Do,2),Uo=zo[0],Ao=zo[1],Oo=(0,r.useState)(!1),Ro=(0,u.Z)(Oo,2),Lo=Ro[0],Wo=Ro[1],qo=(0,r.useState)(!1),Fo=(0,u.Z)(qo,2),Bo=Fo[0],Yo=Fo[1],Ho=(0,r.useState)(5),jo=(0,u.Z)(Ho,2),Vo=jo[0],Jo=jo[1],Go=(0,r.useState)(0),Qo=(0,u.Z)(Go,2),Ko=Qo[0],Xo=Qo[1],$o=(0,r.useState)(!1),et=(0,u.Z)($o,2),nt=et[0],lt=et[1],ot=(0,r.useState)(!1),tt=(0,u.Z)(ot,2)[1],it=(0,r.useState)(!1),dt=(0,u.Z)(it,2),at=dt[0],ut=dt[1],rt=(0,r.useState)(!1),st=(0,u.Z)(rt,2),vt=st[0],ct=st[1],pt=(0,x.s0)(),mt=(null===zn||void 0===zn||null===(l=zn.steps)||void 0===l?void 0:l.length)>0?null===zn||void 0===zn?void 0:zn.steps[Pn.processModule.stepIndex]:{},ft=(null===zn||void 0===zn||null===(o=zn.steps)||void 0===o?void 0:o.length)>0?null===zn||void 0===zn||null===(t=zn.steps[Pn.processModule.stepIndex])||void 0===t?void 0:t.pathway_steps:[],_t=(null===zn||void 0===zn||null===(b=zn.steps)||void 0===b?void 0:b.length)>0?null===(w=zn.steps[Pn.processModule.stepIndex])||void 0===w?void 0:w.pathway_processes:[],yt=(0,r.useRef)(),ht=(0,r.useRef)(),gt=(0,m.pQ)(),bt=(0,u.Z)(gt,2),xt=bt[0],Et=bt[1];(0,r.useEffect)((function(){var e,n;if(void 0===(null===Pn||void 0===Pn||null===(e=Pn.processModule)||void 0===e?void 0:e.isUpdating)){var l=zn;if(l&&l.steps.length>0){var o,t=(0,a.Z)((0,a.Z)((0,a.Z)({},Pn.processModule),l),{},{steps:l.steps.filter((function(e){var n,o,t,i,d,a;return void 0==(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.showStepAll)||1==(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.showStepAll)||0==(null===e||void 0===e||null===(t=e.options)||void 0===t?void 0:t.showStepAll)&&(null===e||void 0===e||null===(i=e.options)||void 0===i||null===(d=i.showOnly)||void 0===d?void 0:d.filter((function(e){return ol.positions.map((function(e){return e.id})).indexOf(e)>-1})).length)>0||(null===e||void 0===e||null===(a=e.options)||void 0===a?void 0:a.showStepAuthor)&&(null===ol||void 0===ol?void 0:ol.id)===(null===l||void 0===l?void 0:l.user_id)})).map((function(e,n){return(0,a.Z)((0,a.Z)({},e),{},{rank:n+1})}))});f.h.dispatch((0,_.q4)(t)),Et({action:m._U.setCurrentStep,value:t.steps[null!==(o=Pn.processModule.stepIndex)&&void 0!==o?o:0]})}}else if(!0===(null===Pn||void 0===Pn||null===(n=Pn.processModule)||void 0===n?void 0:n.isUpdating)){var i;Et({action:m._U.setCurrentStep,value:Pn.processModule.steps[null!==(i=Pn.processModule.stepIndex)&&void 0!==i?i:0]})}}),[]),(0,r.useEffect)((function(){var e=Wn.filter((function(e){return 0==e.departments.length})).map((function(e){return{label:"".concat(e.first_name," ").concat(e.last_name),value:e.id,department:"General",user:e}}));Wn.filter((function(e){return e.departments.length>0})).filter((function(n){n.departments.filter((function(l){e=[].concat((0,d.Z)(e),[{label:"".concat(n.first_name," ").concat(n.last_name),value:n.id,department:null===l||void 0===l?void 0:l.name,user:n}])}))})),wo(e)}),[Wn]),(0,r.useEffect)((function(){Jn.length>0&&""!==Hn&&Jn.map((function(e,n){var l;al(!0),(0,re.e_)({user_id:ol.id,id:null===e||void 0===e?void 0:e.id,total:-Math.abs(+(null!==(l=null===e||void 0===e?void 0:e.amount)&&void 0!==l?l:0)),product:null===e||void 0===e?void 0:e.product,notes:"Payment",quantity:1}).pipe((0,v.P)()).subscribe({next:function(){if(al(!1),n+1==Jn.length){var e,l,o,t;if(Jn.filter((function(e){return e.paymentID===Hn})).length>0)co((null===Pn||void 0===Pn||null===(e=Pn.processModule)||void 0===e||null===(l=e.module)||void 0===l||null===(o=l.options)||void 0===o||null===(t=o.message)||void 0===t?void 0:t.length)>0);f.h.dispatch((0,_.Wy)([])),St()}}})}))}),[Jn,Hn]),(0,r.useEffect)((function(){var e,n;if((null===Pn||void 0===Pn||null===(e=Pn.processModule)||void 0===e||null===(n=e.steps)||void 0===n?void 0:n.length)>0){var l,o,t={id:""},i=[],d=[];if(F.Z((function(e){e.component_fields.map((function(n){var l,o;e.procedure_id!==(null===Re||void 0===Re?void 0:Re.id)&&(null!==(l=t=$n.find((function(n){return n.id===e.procedure_id})))&&void 0!==l&&l.steps&&(i=L.Z(W.Z("component_blueprints"),q.Z)(null===(o=t)||void 0===o?void 0:o.steps),d=L.Z(W.Z("selected_fields"),q.Z)(i)));var a,u=d.find((function(e){return e.procedure_step_blueprint_field_id===n.procedure_step_blueprint_field_id}));u&&(n.data_type_name=u.data_type_name,n.data_type=u.data_type,n.field_name=u.field_name,n.options=u.options,n.component_blueprint_id=null===(a=i.find((function(e){return e.selected_fields.filter((function(e){return e.procedure_step_blueprint_field_id===n.procedure_step_blueprint_field_id})).length>0})))||void 0===a?void 0:a.id)}))}),On.filter((function(e){return e.component_fields.filter((function(e){return void 0===(null===e||void 0===e?void 0:e.field_name)})).length>0}))),void 0!==(null===In||void 0===In?void 0:In.key))bo(Nt(null===Pn||void 0===Pn||null===(l=Pn.processModule)||void 0===l||null===(o=l.module)||void 0===o?void 0:o.id,On,In.value,In.key));else bo(On.filter((function(e){var n,l;return e.module_id===(null===Pn||void 0===Pn||null===(n=Pn.processModule)||void 0===n||null===(l=n.module)||void 0===l?void 0:l.id)})))}}),[In,Pn,On]);var Ct=(0,r.useCallback)((function(){var e=!1;return mt.component_blueprints.filter((function(e){var n,l;return null===e.options||(!1===(null===(n=e.options)||void 0===n?void 0:n.allowMultipleInputs)||void 0===(null===(l=e.options)||void 0===l?void 0:l.allowMultipleInputs))})).some((function(e){var n;return!0===(null===(n=e.selected_fields)||void 0===n?void 0:n.filter((function(e){return"Profile"!==e.data_type_name&&"ID"!==e.data_type_name&&"Info"!==e.data_type_name&&"Notes"!==e.data_type_name&&"URL"!==e.data_type_name&&"Emails"!==e.data_type_name&&"Template"!==e.data_type_name&&"Global"!==e.data_type_name&&"Chart"!==e.data_type_name&&"Value"!==e.data_type_name})).some((function(e){var n;return!0===e.mandatory&&!0===e.visible&&(!e.value||(null===e||void 0===e||null===(n=e.value)||void 0===n?void 0:n.length)<1)})))}))&&(e=!0),!0===e?(yl(!0),!0):(xl(""),yl(!1),!1)}),[mt]),wt=function(e){var n;Zl(!0),Ct()&&!1===(null===Pn||void 0===Pn||null===(n=Pn.processModule)||void 0===n?void 0:n.isUpdating)?Pt():Mt(e)},Zt=function(e){xt.components=[],xt.items=[],xt.currentStep={},xt.newStepComponents=[],Pn.processModule.steps.filter((function(e){return e.component_blueprints.filter((function(e){return e.selected_fields.filter((function(e){return e.value=void 0}))}))})),f.h.dispatch((0,_.q4)((0,a.Z)((0,a.Z)({},Pn.processModule),{},{isUpdating:!1}))),Il(!1),Zl(!0),Mt(e),An.start=!1,(0,Z.aK)().pipe((0,v.P)()).subscribe({next:function(){}})},Mt=function(e){Zl(!1),yl(!1),pl(!1);var n={};if(void 0===e){if(void 0===(n=Pn.processModule.steps[Pn.processModule.stepIndex+1]))return void f.h.dispatch((0,_.Xc)({show:!0,message:"Misconfigured next step, please contact your administrator",color:"red",bottom:!0}));Et({action:m._U.setCurrentStep,value:n}),f.h.dispatch((0,_.q4)((0,a.Z)((0,a.Z)({},Pn.processModule),{},{stepIndex:Pn.processModule.stepIndex+1})))}else{if(void 0==(n=zn.steps.find((function(n){return n.id===e}))))n=zn.steps[Pn.processModule.stepIndex+1],f.h.dispatch((0,_.q4)((0,a.Z)((0,a.Z)({},Pn.processModule),{},{stepIndex:Pn.processModule.stepIndex+1})));else{var l,o,t=zn.steps[(null===(l=n)||void 0===l?void 0:l.rank)-1];if(void 0===t)return void f.h.dispatch((0,_.Xc)({show:!0,message:"Misconfigured next step, please contact your administrator",color:"red",bottom:!0}));f.h.dispatch((0,_.q4)((0,a.Z)((0,a.Z)({},Pn.processModule),{},{stepIndex:(null===(o=n)||void 0===o?void 0:o.rank)-1})))}Et({action:m._U.setCurrentStep,value:n})}var i=xt.newStepComponents.filter((function(e){return null===e.options||(void 0===e.allowMultipleInputs||!1===e.options.allowMultipleInputs)}));Et({action:m._U.setComponents,value:[].concat((0,d.Z)(xt.components.filter((function(e){return i.every((function(n){return n.id!==e.id}))}))),(0,d.Z)(B.Z((function(e){return e.selected_fields.filter((function(e){return""===e.value})).length>0}),i)))}),Et({action:m._U.setModuleNewStepComponents,value:n.component_blueprints.filter((function(e){return e.selected_fields.filter((function(e){return"Status"===e.data_type_name||"ID"===e.data_type_name||"Value"===e.data_type_name})).length>0}))})},St=function(){var e,n,l,o;Et({action:m._U.setModuleItems,value:[]}),Et({action:m._U.setComponents,value:[]}),Et({action:m._U.addModuleComponents,value:[]}),Et({action:m._U.setModuleNewStepComponents,value:[]}),f.h.dispatch((0,_.q4)((0,a.Z)((0,a.Z)({},null!==(e=null===Pn||void 0===Pn?void 0:Pn.processModule)&&void 0!==e?e:{}),{},{isUpdating:!1})));var t=(null===zn||void 0===zn||null===(n=zn.steps)||void 0===n?void 0:n.length)>0&&!((null===zn||void 0===zn||null===(l=zn.steps[0])||void 0===l||null===(o=l.component_blueprints)||void 0===o?void 0:o.filter((function(e){var n;return 1==(null===(n=e.options)||void 0===n?void 0:n.asModuleList)})).length)>0);Zt(Xn||t?Pn.processModule.steps[0].id:Pn.processModule.steps[1].id)},kt=function(){var e,n,l,o,t,i,u,r,s,c,p,m,y,h;if(Ct())return xl("Fill up all the required fields"),window.scrollTo({top:0,behavior:"smooth"}),void pl(!1);var b,x=xt.newStepComponents.filter((function(e){var n,l;return null===e.options||(!1===(null===(n=e.options)||void 0===n?void 0:n.allowMultipleInputs)||void 0===(null===(l=e.options)||void 0===l?void 0:l.allowMultipleInputs))})),E=[].concat((0,d.Z)(xt.components.filter((function(e){return x.every((function(n){return n.id!==e.id}))}))),(0,d.Z)(B.Z((function(e){return e.selected_fields.filter((function(e){return""===e.value})).length>0}),x))),C=[],w=[],Z="",M="",S=!1,k="None",I={x:0},P=[],N=null===Gn||void 0===Gn?void 0:Gn.status,T={},D=null!==Pn&&void 0!==Pn&&null!==(e=Pn.processModule)&&void 0!==e&&e.isUpdating?(null!==(n=Y.Z(Math.max,W.Z("group",H.Z(j.Z("group"))(null!==(l=null===Gn||void 0===Gn?void 0:Gn.component_fields)&&void 0!==l?l:[]))))&&void 0!==n?n:-1)+1:0;E.map((function(e,n){var l,o,t,i,u,r,s=n,v=null===(l=e.selected_fields.filter((function(e){return"Record"===e.data_type_name||"Filters"===e.data_type_name})))||void 0===l?void 0:l.find((function(e){return+(null===e||void 0===e?void 0:e.group)>=0}));v&&null!==Pn&&void 0!==Pn&&null!==(o=Pn.processModule)&&void 0!==o&&o.isUpdating?s=v.group:null!==Pn&&void 0!==Pn&&null!==(t=Pn.processModule)&&void 0!==t&&t.isUpdating&&(s=D,D++),e.selected_fields.filter((function(e){return("Record"===e.data_type_name||"Filters"===e.data_type_name)&&!0===e.visible})).map((function(e,n){var l;if(null!==e.value&&void 0!==e.value&&1!=(null===(l=e.options)||void 0===l?void 0:l.skip)){var o,t;w=[].concat((0,d.Z)(w),[(0,a.Z)((0,a.Z)({},e),{},{index:n,group:s})]),Z=e.value,T[e.field_name]=e.value;var i=null===(o=On.find((function(n){return n.component_fields.filter((function(n){var l;return n.component_blueprint_id===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.component_id)&&(null===n||void 0===n?void 0:n.value)===Z})).length>0})))||void 0===o||null===(t=o.component_fields.find((function(e){return"Email Recipient"===e.data_type_name})))||void 0===t?void 0:t.value;i&&(b=i)}}));var c=null===(i=e.selected_fields.filter((function(e){return!("Record"===e.data_type_name||"Filters"===e.data_type_name)})))||void 0===i?void 0:i.find((function(e){return+(null===e||void 0===e?void 0:e.group)>=0}));c&&null!==Pn&&void 0!==Pn&&null!==(u=Pn.processModule)&&void 0!==u&&u.isUpdating?s=c.group:null!==Pn&&void 0!==Pn&&null!==(r=Pn.processModule)&&void 0!==r&&r.isUpdating&&(s=D,D++),e.selected_fields.filter((function(e){return!("Record"===e.data_type_name||"Filters"===e.data_type_name)})).map((function(e,n){var l,o,t,i;if(null!==e.value&&void 0!==e.value&&1!=(null===(l=e.options)||void 0===l?void 0:l.skip)){if(T[e.field_name]=e.value,"ID"===(null===e||void 0===e?void 0:e.data_type_name))null!==Pn&&void 0!==Pn&&null!==(t=Pn.processModule)&&void 0!==t&&t.isUpdating?w=[].concat((0,d.Z)(w),[(0,a.Z)((0,a.Z)({},e),{},{index:n,group:s})]):(w=[].concat((0,d.Z)(w),[(0,a.Z)((0,a.Z)({},e),{},{index:n,group:s,value:"".concat(null===e||void 0===e?void 0:e.options.id).concat(null===(null===An||void 0===An?void 0:An.misc_info)?1:null!==(i=null===An||void 0===An?void 0:An.misc_info[null===e||void 0===e?void 0:e.field_name])&&void 0!==i?i:1)})]),C=[].concat((0,d.Z)(C),["".concat(e.field_name)]));else if("Value"===(null===e||void 0===e?void 0:e.data_type_name)){var u;w=[].concat((0,d.Z)(w),[(0,a.Z)((0,a.Z)({},e),{},{index:n,value:null===e||void 0===e||null===(u=e.options)||void 0===u?void 0:u.value,group:s})])}else if("Email Recipient"===(null===e||void 0===e?void 0:e.data_type_name))w=[].concat((0,d.Z)(w),[(0,a.Z)((0,a.Z)({},e),{},{index:n,value:e.value.replace(/ /g,""),group:s})]);else if("Product Lookup"===e.data_type_name)w=(0,d.Z)(w);else if("Status"===e.data_type_name&&"Draft"===e.value&&1==Tl)S=!0,w=[].concat((0,d.Z)(w),[(0,a.Z)((0,a.Z)({},e),{},{index:n,value:"New",group:s})]),k="New";else if("Status"===e.data_type_name)w=[].concat((0,d.Z)(w),[(0,a.Z)((0,a.Z)({},e),{},{index:n,value:null===e||void 0===e?void 0:e.value,group:s})]),k=null===e||void 0===e?void 0:e.value;else if("Positions"===e.data_type_name&&!0===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.share))w=[].concat((0,d.Z)(w),[(0,a.Z)((0,a.Z)({},e),{},{index:n,value:null===e||void 0===e?void 0:e.value,group:s})]),P=[null===e||void 0===e?void 0:e.value];else if("Pin"===e.data_type_name)w=[].concat((0,d.Z)(w),[(0,a.Z)((0,a.Z)({},e),{},{index:n,value:null===e||void 0===e?void 0:e.value,group:s})]);else if("Formula"===e.data_type_name){var r,v=null!==Pn&&void 0!==Pn&&null!==(r=Pn.processModule)&&void 0!==r&&r.isUpdating?(0,U.LV)(null===e||void 0===e?void 0:e.options,Gn.component_fields.filter((function(n){var l;return null===(l=e.options)||void 0===l?void 0:l.list.includes(n.field_name)})),E,xt.items):e.value;w=[].concat((0,d.Z)(w),[(0,a.Z)((0,a.Z)({},e),{},{index:n,value:v.toString(),group:s})])}else if("output"!==e.data_type){var c,p,m,f,_;if("People"===e.data_type_name)if(!0===(null===(_=e.options)||void 0===_?void 0:_.email)){var y,h,g=null===(y=Co.find((function(n){return n.label===(null===e||void 0===e?void 0:e.value)})))||void 0===y||null===(h=y.user)||void 0===h?void 0:h.email;M=g?M.concat(M.length>0?",".concat(g):g):M,e.email=void 0}"email"===(null===e||void 0===e||null===(c=e.options)||void 0===c?void 0:c.actionToPerform2)&&null!==e&&void 0!==e&&null!==(p=e.options)&&void 0!==p&&null!==(m=p.valueToMatch2)&&void 0!==m&&null!==(f=m.split(","))&&void 0!==f&&f.includes(null===e||void 0===e?void 0:e.value)&&b&&(S=!0,M=M.concat(M.length>0?",".concat(b):b)),w=[].concat((0,d.Z)(w),[(0,a.Z)((0,a.Z)({},e),{},{index:n,group:s})])}}else if("Status"===(null===e||void 0===e?void 0:e.data_type_name))1==Tl?(w=[].concat((0,d.Z)(w),[(0,a.Z)((0,a.Z)({},e),{},{index:n,value:"New",group:s})]),k="New"):(w=[].concat((0,d.Z)(w),[(0,a.Z)((0,a.Z)({},e),{},{index:n,value:"Draft",group:s})]),k="Draft"),T[e.field_name]=e.value;else if("Action Button"===(null===e||void 0===e?void 0:e.data_type_name)){var x,Z,I;w=(0,d.Z)(w),T[e.field_name]=e.value,"status"===(null===e||void 0===e||null===(x=e.options)||void 0===x?void 0:x.action)?k=e.value:"user"!==(null===(Z=e.options)||void 0===Z?void 0:Z.action)&&"creator"!==(null===(I=e.options)||void 0===I?void 0:I.action)||(Gn.assigned_to=null===e||void 0===e?void 0:e.value)}}))}));var z,A,O,R,L,q,F,V,J,G,Q,K,X,$,ee,ne,le,oe,te,ie,de,ue,se,ve,ce,pe="";if((null===(o=Pn.processModule)||void 0===o||null===(t=o.module)||void 0===t||null===(i=t.options)||void 0===i||null===(u=i.title)||void 0===u?void 0:u.length)>0){var me,fe,_e,ye,he,ge,be,xe,Ce,we,Ze,Me,Se,ke;if(null===(me=Pn.processModule)||void 0===me||null===(fe=me.module)||void 0===fe||null===(_e=fe.options)||void 0===_e||null===(ye=_e.title)||void 0===ye||ye.map((function(e){if("Info"!==e){var n,l,o,t,i=w.find((function(n){return n.field_name===e}));if("Date"===(null===i||void 0===i?void 0:i.data_type_name)||"Calendar"===(null===i||void 0===i?void 0:i.data_type_name))pe=""===pe?"".concat(ae()(null===i||void 0===i?void 0:i.value).format("DD MMMM YYYY")):"".concat(null!==(n=pe)&&void 0!==n?n:"","  ").concat(ae()(null===i||void 0===i?void 0:i.value).format("DD MMMM YYYY HH:mm"));else pe=""===pe?"".concat(null!==(l=null===i||void 0===i?void 0:i.value)&&void 0!==l?l:""):"".concat(null!==(o=pe)&&void 0!==o?o:"","  ").concat(null!==(t=null===i||void 0===i?void 0:i.value)&&void 0!==t?t:"")}else{var d,a=null===(d=Pn.processModule)||void 0===d?void 0:d.completeSteps.find((function(e){var n;return(null===(n=e.component_blueprints.filter((function(e){var n;return(null===(n=e.selected_fields.filter((function(e){return"Info"===e.data_type_name})))||void 0===n?void 0:n.length)>0})))||void 0===n?void 0:n.length)>0}));if(void 0!==a){var u,r,s,v,c,p,m,f,_,y=null===(u=a.component_blueprints)||void 0===u||null===(r=u.find((function(e){var n;return(null===(n=e.selected_fields.filter((function(e){return"Info"===e.data_type_name})))||void 0===n?void 0:n.length)>0})).selected_fields)||void 0===r?void 0:r.find((function(e){return"Info"===e.data_type_name})),h=On.find((function(e){var n;return(null===(n=e.component_fields.filter((function(e){return e.component_blueprint_id===y.options.component_id&&e.value===T[y.field_name]})))||void 0===n?void 0:n.length)>0}));if(h)if((null===y||void 0===y||null===(s=y.options)||void 0===s||null===(v=s.list)||void 0===v?void 0:v.length)>0)pe=""===pe?"".concat(null!==(c=null===(p=h.component_fields.find((function(e){var n;return e.field_name===(null===y||void 0===y||null===(n=y.options)||void 0===n?void 0:n.list[0])})))||void 0===p?void 0:p.value)&&void 0!==c?c:""):"".concat(null!==(m=pe)&&void 0!==m?m:"","  ").concat(null!==(f=null===(_=h.component_fields.find((function(e){var n;return e.field_name===(null===y||void 0===y||null===(n=y.options)||void 0===n?void 0:n.list[0])})))||void 0===_?void 0:_.value)&&void 0!==f?f:"")}}})),null!==(he=Pn.processModule)&&void 0!==he&&null!==(ge=he.module)&&void 0!==ge&&null!==(be=ge.options)&&void 0!==be&&be.title.find((function(e){return"UUID"===e})))pe="".concat(null!==Pn&&void 0!==Pn&&null!==(Ze=Pn.processModule)&&void 0!==Ze&&Ze.isUpdating?Gn.id:(0,U.mR)());if(null!==(xe=Pn.processModule)&&void 0!==xe&&null!==(Ce=xe.module)&&void 0!==Ce&&null!==(we=Ce.options)&&void 0!==we&&we.title.find((function(e){return"Module Name"===e})))pe=" ".concat(null===(Me=Pn.processModule)||void 0===Me||null===(Se=Me.module)||void 0===Se?void 0:Se.name," - ").concat(null!==(ke=pe)&&void 0!==ke?ke:"")}else{var Ie;pe=null!==Pn&&void 0!==Pn&&null!==(Ie=Pn.processModule)&&void 0!==Ie&&Ie.isUpdating?Gn.id:(0,U.mR)()}if(!0===(null===(r=Pn.processModule)||void 0===r||null===(s=r.module)||void 0===s||null===(c=s.options)||void 0===c?void 0:c.emailOutputs)){var Pe,Ne,De,ze,Ue,Ae=Pn.processModule.steps.find((function(e){var n;return(null===(n=e.component_blueprints.filter((function(e){var n;return(null===(n=e.selected_fields.filter((function(e){return"Info"===e.data_type_name&&1==e.options.email})))||void 0===n?void 0:n.length)>0})))||void 0===n?void 0:n.length)>0}));if(void 0!==Ae){var Oe,Re,Le=null===(Oe=Ae.component_blueprints)||void 0===Oe||null===(Re=Oe.find((function(e){var n;return(null===(n=e.selected_fields.filter((function(e){var n;return"Info"===e.data_type_name&&1==(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.email)})))||void 0===n?void 0:n.length)>0})).selected_fields)||void 0===Re?void 0:Re.find((function(e){var n;return"Info"===e.data_type_name&&!0===(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.email)})),We=On.find((function(e){var n;return(null===(n=e.component_fields.filter((function(e){return e.component_blueprint_id===Le.options.component_id&&e.value===Z})))||void 0===n?void 0:n.length)>0}));We&&(A=Le.id,z=We.id)}if(void 0!==(Ae=Pn.processModule.steps.find((function(e){var n;return!0===e.is_end&&(null===(n=e.component_blueprints.filter((function(e){var n;return(null===(n=e.selected_fields.filter((function(e){return"Emails"===e.data_type_name})))||void 0===n?void 0:n.length)>0})))||void 0===n?void 0:n.length)>0}))))(null===(De=Ae.component_blueprints)||void 0===De?void 0:De.find((function(e){var n;return(null===(n=e.selected_fields.filter((function(e){return"Emails"===e.data_type_name})))||void 0===n?void 0:n.length)>0}))).selected_fields.filter((function(e){return"Emails"===e.data_type_name})).filter((function(e){var n;w.find((function(n){return n.value===e.options.valueToMatch&&n.field_name===e.options.fieldToMatch}))&&(b&&(O=e,S=!0,!0===(null===(n=e.options)||void 0===n?void 0:n.copyEmailRecip)&&(M=M.concat(M.length>0?",".concat(b):b))))}));if(M=""===M?[]:null!==(Pe=M.split(","))&&void 0!==Pe?Pe:[],So.length>0||M.length>0)M=null!==Pn&&void 0!==Pn&&null!==(ze=Pn.processModule)&&void 0!==ze&&ze.isUpdating?!0===S?[].concat((0,d.Z)(So),(0,d.Z)(M)):(0,d.Z)(So):[].concat((0,d.Z)(So),(0,d.Z)(M));if(M.length>0&&(I={emailTo:M}),A&&z&&(I=(0,a.Z)((0,a.Z)({},I),{},{info:A,target:z})),(null===(Ne=O)||void 0===Ne?void 0:Ne.id.length)>0)I=(0,a.Z)((0,a.Z)({},I),{},{template:null===(Ue=O)||void 0===Ue?void 0:Ue.id})}if(!0===(null===(p=Pn.processModule)||void 0===p||null===(m=p.module)||void 0===m||null===(y=m.options)||void 0===y?void 0:y.rewards)&&N!==k){var qe,Fe,Be,Ye,He,je,Ve=Pn.processModule.steps.find((function(e){var n;return(null===(n=e.component_blueprints.filter((function(e){var n;return(null===(n=e.selected_fields.filter((function(e){return"Rewards"===e.data_type_name})))||void 0===n?void 0:n.length)>0})))||void 0===n?void 0:n.length)>0}));if(void 0!==Ve)if((R=null===(qe=Ve.component_blueprints)||void 0===qe||null===(Fe=qe.find((function(e){var n;return(null===(n=e.selected_fields.filter((function(e){return"Rewards"===e.data_type_name})))||void 0===n?void 0:n.length)>0})).selected_fields)||void 0===Fe?void 0:Fe.find((function(e){return"Rewards"===e.data_type_name}))).options.status===k)ol.options.rewards=+(null!==(Be=null===ol||void 0===ol||null===(Ye=ol.options)||void 0===Ye?void 0:Ye.rewards)&&void 0!==Be?Be:0)+ +(null===(He=R)||void 0===He||null===(je=He.options)||void 0===je?void 0:je.points)}(null===(h=w)||void 0===h?void 0:h.length)>0?(al(!0),null!==Pn&&void 0!==Pn&&null!==(L=Pn.processModule)&&void 0!==L&&L.isUpdating?(Gn.options=I,Gn.status=k,null!==xt&&void 0!==xt&&xt.assigned_to&&(Gn.assigned_to={id:null===xt||void 0===xt?void 0:xt.assigned_to}),(0,g.KL)((0,a.Z)((0,a.Z)({},Gn),{},{selected_fields:(0,d.Z)(w),component_items:xt.items}),Gn.id,null===Gn||void 0===Gn||null===(q=Gn.shared_users)||void 0===q?void 0:q.map((function(e){return null===e||void 0===e?void 0:e.id})),pe,Tl,(null===(F=Pn.processModule)||void 0===F||null===(V=F.module)||void 0===V||null===(J=V.options)||void 0===J||null===(G=J.shares)||void 0===G?void 0:G.length)>0?[].concat((0,d.Z)(null!==(Q=null===(K=Pn.processModule)||void 0===K||null===(X=K.module)||void 0===X||null===($=X.options)||void 0===$?void 0:$.shares)&&void 0!==Q?Q:[]),(0,d.Z)(P)):[].concat((0,d.Z)(null!==(ee=null===Gn||void 0===Gn||null===(ne=Gn.shared_positions)||void 0===ne?void 0:ne.map((function(e){return null===e||void 0===e?void 0:e.id})))&&void 0!==ee?ee:[]),(0,d.Z)(P))).subscribe({next:function(e){var n,l,o,t,i,d,u,r;if(null!==(n=Pn.processModule)&&void 0!==n&&null!==(l=n.module)&&void 0!==l&&null!==(o=l.options)&&void 0!==o&&o.single)return localStorage.setItem(null===(d=Pn.processModule)||void 0===d?void 0:d.module.id,JSON.stringify(null===e||void 0===e?void 0:e.data)),void Mt(null===(u=Pn.processModule)||void 0===u||null===(r=u.steps[0])||void 0===r?void 0:r.id);var s=w.find((function(e){var n;return"People"===e.data_type_name&&!0===(null===(n=e.options)||void 0===n?void 0:n.calendar)}));if(s){var c,p,m=JSON.parse(null!==(c=null===s||void 0===s?void 0:s.value)&&void 0!==c?c:{task:0}),f=nl.find((function(e){return e.id===(null===m||void 0===m?void 0:m.task)}));if(f)(0,Te.xJ)((0,a.Z)((0,a.Z)({},f),{},{assignee_id:null===e||void 0===e||null===(p=e.data.created_by)||void 0===p?void 0:p.id}),null===f||void 0===f?void 0:f.id).pipe((0,v.P)()).subscribe({})}var _,y=w.find((function(e){return"Payments"===e.data_type_name})),h=w.find((function(e){var n;return e.field_name===(null===y||void 0===y||null===(n=y.options)||void 0===n?void 0:n.paymentField)}));if(!y||null!==e&&void 0!==e&&null!==(t=e.data.payments)&&void 0!==t&&t.stripe_id||"Cash"===(null===y||void 0===y?void 0:y.value)||"Wallet"===(null===y||void 0===y?void 0:y.value)||"Points"===(null===y||void 0===y?void 0:y.value)||ol.id!==(null===Gn||void 0===Gn||null===(i=Gn.created_by)||void 0===i?void 0:i.id))if(y){var g,b;if(h&&"Cash"!==(null===y||void 0===y?void 0:y.value)&&k===(null===(g=An.misc_info)||void 0===g?void 0:g.lock)&&ol.id===(null===Gn||void 0===Gn||null===(b=Gn.assigned_to)||void 0===b?void 0:b.id)&&N!==k){var x,E,C=+(null===h||void 0===h?void 0:h.value)-+(null===h||void 0===h?void 0:h.value)*+(null!==(x=null===An||void 0===An||null===(E=An.misc_info)||void 0===E?void 0:E.rate)&&void 0!==x?x:.2);(0,re.e_)({user_id:ol.id,id:(0,U.mR)(),total:C,product:"CR-".concat(pe),notes:"Wallet",quantity:1}).pipe((0,v.P)()).subscribe({next:function(){var e;ol.wallet=+(+(null!==(e=null===Nn||void 0===Nn?void 0:Nn.wallet)&&void 0!==e?e:0)+C),al(!1),St(),Ut(),window.scrollTo({top:0,behavior:"smooth"})}})}else R?(0,Ee.Vy)(ol,null===ol||void 0===ol?void 0:ol.options).pipe((0,v.P)()).subscribe({next:function(){St(),Ut(),window.scrollTo({top:0,behavior:"smooth"})}}):(St(),Ut(),window.scrollTo({top:0,behavior:"smooth"})),al(!1)}else al(!1),St(),Ut(),window.scrollTo({top:0,behavior:"smooth"});else xt.total=+(null===h||void 0===h?void 0:h.value),xt.plan=+(null===h||void 0===h?void 0:h.value),xt.id=null===e||void 0===e||null===(_=e.data)||void 0===_?void 0:_.title,al(!1),Ao(!0)}})):(0,g.LM)({id:E[0].id,selected_fields:(0,d.Z)(w),component_items:xt.items,options:I,status:k,assigned_to:null!==(le=null===xt||void 0===xt?void 0:xt.assigned_to)&&void 0!==le?le:""},"",Pn.processModule.module_id,Al,pe,Tl,(null===(oe=Pn.processModule)||void 0===oe||null===(te=oe.module)||void 0===te||null===(ie=te.options)||void 0===ie||null===(de=ie.shares)||void 0===de?void 0:de.length)>0?[].concat((0,d.Z)(null!==(ue=null===(se=Pn.processModule)||void 0===se||null===(ve=se.module)||void 0===ve||null===(ce=ve.options)||void 0===ce?void 0:ce.shares)&&void 0!==ue?ue:[]),(0,d.Z)(P)):[].concat((0,d.Z)(Wl),(0,d.Z)(P))).subscribe({next:function(e){var n,l,o,t,i,d,u;if(null!==(n=Pn.processModule)&&void 0!==n&&null!==(l=n.module)&&void 0!==l&&null!==(o=l.options)&&void 0!==o&&o.single)return localStorage.setItem(null===(i=Pn.processModule)||void 0===i?void 0:i.module.id,JSON.stringify(e)),void Mt(null===(d=Pn.processModule)||void 0===d||null===(u=d.steps[0])||void 0===u?void 0:u.id);(null===(t=C)||void 0===t?void 0:t.length)>0&&It(C);var r=w.find((function(e){var n;return"People"===e.data_type_name&&!0===(null===(n=e.options)||void 0===n?void 0:n.calendar)}));if(r){var s,c,p,m=JSON.parse(null!==(s=null===r||void 0===r?void 0:r.value)&&void 0!==s?s:{task:0}),y=nl.find((function(e){return e.id===(null===m||void 0===m?void 0:m.task)}));if(y)(0,Te.xJ)((0,a.Z)((0,a.Z)({},y),{},{assignee_id:null!==(c=null===e||void 0===e||null===(p=e.created_by)||void 0===p?void 0:p.id)&&void 0!==c?c:ol.id}),null===y||void 0===y?void 0:y.id).pipe((0,v.P)()).subscribe({})}if(Pn.processModule.selectedComponent=e,w.filter((function(e){return!("Cash"===(null===e||void 0===e?void 0:e.value)||"Wallet"===(null===e||void 0===e?void 0:e.value)||"Points"===(null===e||void 0===e?void 0:e.value))&&"Payments"===e.data_type_name})).length>0)al(!1),Ao(!0);else if(w.filter((function(e){return("Wallet"===(null===e||void 0===e?void 0:e.value)||"Points"===(null===e||void 0===e?void 0:e.value))&&"Payments"===e.data_type_name})).length>0){var h,b=w.find((function(e){return"Payments"===e.data_type_name}));(0,re.e_)({user_id:ol.id,id:null!==(h=null===e||void 0===e?void 0:e.id)&&void 0!==h?h:(0,U.mR)(),total:-xt.total,product:"DB-".concat(pe),notes:"Wallet",quantity:1}).pipe((0,v.P)()).subscribe({next:function(){var n,l;(0,Ee.Vy)(ol,(0,a.Z)((0,a.Z)({},null===ol||void 0===ol?void 0:ol.options),{},{points:+(+(null!==(n=null===Nn||void 0===Nn||null===(l=Nn.options)||void 0===l?void 0:l.points)&&void 0!==n?n:0)-("Points"===(null===b||void 0===b?void 0:b.value)?+xt.total:0))})).pipe((0,v.P)()).subscribe({next:function(n){var l,o,t,i,d,a,u,r,s,c;(al(!1),ol.options=n.options,null!==Pn&&void 0!==Pn&&null!==(l=Pn.processModule)&&void 0!==l&&null!==(o=l.steps)&&void 0!==o&&o.find((function(e){return e.component_blueprints.filter((function(e){return e.selected_fields.filter((function(e){return"Action Button"===e.data_type_name&&("user"===e.options.action||"creator"===e.options.action)})).length>0})).length>0})))?(_o((null===Pn||void 0===Pn||null===(t=Pn.processModule)||void 0===t||null===(i=t.module)||void 0===i||null===(d=i.options)||void 0===d||null===(a=d.message)||void 0===a?void 0:a.length)>0&&1==e.is_complete),Xo(setInterval((function(){(0,g.r6)(e.id).pipe((0,v.P)()).subscribe({next:function(e){var n;null!==e&&void 0!==e&&null!==(n=e.component_fields)&&void 0!==n&&n.find((function(e){return"Action Button"===e.data_type_name&&(null===e||void 0===e?void 0:e.value)}))&&(Qn(e),window.clearInterval(Ko))},error:function(){window.clearInterval(Ko)}})}),15e3))):co((null===Pn||void 0===Pn||null===(u=Pn.processModule)||void 0===u||null===(r=u.module)||void 0===r||null===(s=r.options)||void 0===s||null===(c=s.message)||void 0===c?void 0:c.length)>0&&1==e.is_complete);f.h.dispatch((0,_.RV)({})),Ut(),St()}})}})}else{var x,E,Z,M,S,k,I,P,N,T;if(al(!1),null!==Pn&&void 0!==Pn&&null!==(x=Pn.processModule)&&void 0!==x&&null!==(E=x.steps)&&void 0!==E&&E.find((function(e){return e.component_blueprints.filter((function(e){return e.selected_fields.filter((function(e){return"Action Button"===e.data_type_name&&("user"===e.options.action||"creator"===e.options.action)})).length>0})).length>0})))_o((null===Pn||void 0===Pn||null===(Z=Pn.processModule)||void 0===Z||null===(M=Z.module)||void 0===M||null===(S=M.options)||void 0===S||null===(k=S.message)||void 0===k?void 0:k.length)>0&&1==e.is_complete),Xo(setInterval((function(){(0,g.r6)(e.id).pipe((0,v.P)()).subscribe({next:function(e){var n;null!==e&&void 0!==e&&null!==(n=e.component_fields)&&void 0!==n&&n.find((function(e){return"Action Button"===e.data_type_name&&(null===e||void 0===e?void 0:e.value)}))&&(Qn(e),window.clearInterval(Ko))},error:function(){window.clearInterval(Ko)}})}),15e3));else co((null===Pn||void 0===Pn||null===(I=Pn.processModule)||void 0===I||null===(P=I.module)||void 0===P||null===(N=P.options)||void 0===N||null===(T=N.message)||void 0===T?void 0:T.length)>0&&1==e.is_complete);f.h.dispatch((0,_.RV)({})),Ut(),St()}},error:function(e){var n,l,o,t;null!==e&&void 0!==e&&e.data&&(null!==C&&It(C),co((null===Pn||void 0===Pn||null===(n=Pn.processModule)||void 0===n||null===(l=n.module)||void 0===l||null===(o=l.options)||void 0===o||null===(t=o.message)||void 0===t?void 0:t.length)>0&&1==(null===e||void 0===e?void 0:e.data.is_complete)),f.h.dispatch((0,_.RV)({})),St())}})):(f.h.dispatch((0,_.Xc)({show:!0,message:"There are no items to be saved",color:"red"})),window.scrollTo({top:0,behavior:"smooth"}))},It=function(e){if((null===e||void 0===e?void 0:e.length)>0){var n,l=null!==(n=An.misc_info)&&void 0!==n?n:{};e.filter((function(e){var n;l[e]=+(null!==(n=l[e])&&void 0!==n?n:1)+1})),al(!0),(0,Z.x5)({misc_info:l}).pipe((0,v.P)()).subscribe({})}},Pt=function(){xl("Fill up all the required fields"),window.scrollTo({top:0,behavior:"smooth"}),pl(!1)},Nt=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],l=arguments.length>2?arguments[2]:void 0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,t=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],i=n.filter((function(n){return n.module_id===e})).filter((function(e){var n;return t.length>0?t.includes(e.id):""===l?e:e.title.includes(l)||(null===(n=e.component_fields.filter((function(e){var n,t,i,d,a;return"Record"===e.data_type_name?null===(n=On.find((function(n){var l;return(null===(l=n.component_fields.filter((function(n){return n.field_name===e.options.output&&n.component_blueprint_id===e.options.component_id&&n.value===(null===e||void 0===e?void 0:e.value)})))||void 0===l?void 0:l.length)>0})))||void 0===n?void 0:n.component_fields.find((function(n){var l;return null===(l=e.options)||void 0===l?void 0:l.names.includes(n.field_name)})).value.includes(l):void 0!==o?("date"===e.data_type?null===(t=ae()(new Date(null===e||void 0===e?void 0:e.value)))||void 0===t?void 0:t.format("DD MMM YYYY").includes(l):null===e||void 0===e||null===(i=e.value)||void 0===i?void 0:i.includes(l))&&e.field_name===o:"date"===e.data_type?null===(d=ae()(new Date(null===e||void 0===e?void 0:e.value)))||void 0===d?void 0:d.format("DD MMM YYYY").includes(l):null===e||void 0===e||null===(a=e.value)||void 0===a?void 0:a.includes(l)})))||void 0===n?void 0:n.length)>0}));return i},Tt=function(e){var n,l,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:go,t=V.Z([J.Z(G.Z("created_date"))])(o.filter((function(e){return e.created_by.id===(null===ol||void 0===ol?void 0:ol.id)?e:"Expired"!==e.status}))).map((function(n){var l,o,t,d,u,r,s,v,c,p,m={};e.list.map((function(e){var l=n.component_fields.find((function(n){return n.field_name===e}));if(void 0!=l)if("People"===l.data_type_name)m=(0,a.Z)((0,a.Z)({},m),{},(0,i.Z)({},e,l.value));else if("Positions"===l.data_type_name)m=(0,a.Z)((0,a.Z)({},m),{},(0,i.Z)({},e,Fn.find((function(e){return e.value===l.value})).label));else if("Date"===l.data_type_name){var o,t=new Date(null===l||void 0===l||null===(o=l.value)||void 0===o?void 0:o.split(",")[0]);m=(0,a.Z)((0,a.Z)({},m),{},(0,i.Z)({},e,ae()(t).format("DD MMM YYYY")))}else if("Record"===l.data_type_name||"Component"===l.data_type_name){var d;m=(0,a.Z)((0,a.Z)({},m),{},(0,i.Z)({},e,h.tq?"".concat(null===l||void 0===l?void 0:l.value.slice(0,40)):"".concat(null===l||void 0===l?void 0:l.value))),null===(d=On.find((function(e){var n;return(null===(n=e.component_fields.filter((function(e){return e.field_name===l.options.output&&e.component_blueprint_id===l.options.component_id&&e.value===(null===l||void 0===l?void 0:l.value)})))||void 0===n?void 0:n.length)>0})))||void 0===d||d.component_fields.filter((function(e){m=(0,a.Z)((0,a.Z)({},m),{},(0,i.Z)({},e.field_name,h.tq?e.value.slice(0,40):e.value))}))}else if("Filters"===l.data_type_name){var u;m=(0,a.Z)((0,a.Z)({},m),{},(0,i.Z)({},e,h.tq?"".concat(null===l||void 0===l?void 0:l.value.slice(0,30)):"".concat(null===l||void 0===l?void 0:l.value))),null===(u=On.find((function(e){var n;return(null===(n=e.component_fields.filter((function(e){return e.field_name===l.options.output&&e.component_blueprint_id===l.options.component_id&&e.value===(null===l||void 0===l?void 0:l.value)})))||void 0===n?void 0:n.length)>0})))||void 0===u||u.component_fields.filter((function(e){m=(0,a.Z)((0,a.Z)({},m),{},(0,i.Z)({},e.field_name,h.tq?e.value.slice(0,40):e.value))}))}else if("Status"===l.data_type_name){var r,s,v,c,p,f;if(0==n.is_complete)m=(0,a.Z)((0,a.Z)({},m),{},(0,i.Z)({},e,"Draft"));else if(!((null===(r=Pn.processModule.module)||void 0===r||null===(s=r.options)||void 0===s?void 0:s.activeFor)>0&&ae()((0,de.now)()).diff(ae()(n.created_date),"minutes")>+(null===(v=Pn.processModule.module)||void 0===v||null===(c=v.options)||void 0===c?void 0:c.activeFor))||"New"!==n.status&&"Unassigned"!==n.status||null!==(p=n.assigned_to)&&void 0!==p&&p.id)m=(0,a.Z)((0,a.Z)({},m),{},(0,i.Z)({},e,"".concat(null!==(f=null===n||void 0===n?void 0:n.status)&&void 0!==f?f:null===l||void 0===l?void 0:l.value)));else m=(0,a.Z)((0,a.Z)({},m),{},(0,i.Z)({},e,"Expired"))}else{var _,y;m=(0,a.Z)((0,a.Z)({},m),{},(0,i.Z)({},e,h.tq?null===l||void 0===l||null===(_=l.value)||void 0===_?void 0:_.slice(0,40).split(",")[0]:null===l||void 0===l||null===(y=l.value)||void 0===y?void 0:y.split(",")[0]))}})),(null===n||void 0===n||null===(l=n.component_items)||void 0===l?void 0:l.length)>0&&(m=(0,a.Z)((0,a.Z)({},m),{},(0,i.Z)({},"Total Qty",n.component_items.reduce((function(e,n){return e+ +n.quantity}),0)))),(null===n||void 0===n||null===(o=n.shared_positions)||void 0===o?void 0:o.length)>0&&(m=(0,a.Z)((0,a.Z)({},m),{},{Shares:null===n||void 0===n?void 0:n.shared_positions.map((function(e){var n;return null===(n=Fn.find((function(n){return n.value===e.id})))||void 0===n?void 0:n.label})).toString()}));var f=new Date(n.created_date);return m=(0,a.Z)((0,a.Z)({},m),{},(c={id:n.id},(0,i.Z)(c,"Created By","".concat(null===n||void 0===n||null===(t=n.created_by)||void 0===t?void 0:t.first_name," ").concat(null===n||void 0===n||null===(d=n.created_by)||void 0===d?void 0:d.last_name)),(0,i.Z)(c,"Created Date",ae()(f).format("DD MMM YYYY")),(0,i.Z)(c,"Assigned To","".concat(null!==(u=null===n||void 0===n||null===(r=n.assigned_to)||void 0===r?void 0:r.first_name)&&void 0!==u?u:""," ").concat(null!==(s=null===n||void 0===n||null===(v=n.assigned_to)||void 0===v?void 0:v.last_name)&&void 0!==s?s:"")),(0,i.Z)(c,"Title",n.title),(0,i.Z)(c,"items",n.component_items),(0,i.Z)(c,"Status",n.status),(0,i.Z)(c,Pn.processModule.module.name,n.title),c)),null===e||void 0===e||null===(p=e.reports)||void 0===p||p.filter((function(e){return"Formula"===e.data_type_name})).map((function(e){var l=(0,U.LV)(e.options,e.options.list.map((function(e){var n;return{value:null!==(n=m[e])&&void 0!==n?n:0}})),On.filter((function(e){var n,l;return e.module_id===(null===Pn||void 0===Pn||null===(n=Pn.processModule)||void 0===n||null===(l=n.module)||void 0===l?void 0:l.id)})),null===n||void 0===n?void 0:n.component_items);m=(0,a.Z)((0,a.Z)({},m),{},(0,i.Z)({},e.field_name,"".concat(l)))})),m}));null===e||void 0===e||null===(n=e.reports)||void 0===n||n.filter((function(e){return"List Filter"===e.data_type_name})).map((function(e){t=t.filter((function(n){var l,o;return n[null===(l=e.options)||void 0===l?void 0:l.field]===(null===(o=e.options)||void 0===o?void 0:o.value)}))}));var u=null===e||void 0===e||null===(l=e.reports)||void 0===l?void 0:l.find((function(e){return"Transaction List"===e.data_type_name}));if(u){var r=[];t.map((function(e){e.items.filter((function(n){var l=(0,a.Z)({},e);Object.keys(u.options.map).map((function(e){l[u.options.map[e]]=n[e]})),r=[].concat((0,d.Z)(r),[l])})),delete e.items})),t=r}return t},Dt=null===Gn||void 0===Gn||null===(M=Gn.component_fields)||void 0===M||null===(k=M.find((function(e){return"Status"===e.data_type_name})))||void 0===k?void 0:k.value,zt=(null===Pn||void 0===Pn||null===(N=Pn.processModule)||void 0===N||null===(T=N.steps)||void 0===T?void 0:T.length)>0?null===Pn||void 0===Pn||null===(D=Pn.processModule)||void 0===D||null===(z=D.steps)||void 0===z||null===(R=z.find((function(e){return(null===e||void 0===e?void 0:e.component_blueprints.filter((function(e){return e.selected_fields.filter((function(e){return"Action Button"===e.data_type_name})).length>0})).length)>0})))||void 0===R||null===(X=R.component_blueprints.find((function(e){var n;return(null===(n=e.selected_fields.filter((function(e){return"Action Button"===e.data_type_name})))||void 0===n?void 0:n.length)>0})))||void 0===X||null===($=X.options)||void 0===$?void 0:$.showOnly:[],Ut=function(){var e,n,l,o;Qn({}),Et({action:m._U.setModuleItems,value:Gn.component_items}),Et({action:m._U.setModuleNewStepComponents,value:[]}),Et({action:m._U.setComponents,value:[]}),(null===Pn||void 0===Pn||null===(e=Pn.processModule)||void 0===e||null===(n=e.steps)||void 0===n?void 0:n.length)>0&&(null===Pn||void 0===Pn||null===(l=Pn.processModule)||void 0===l||null===(o=l.steps)||void 0===o||o.filter((function(e){var n;return null===e||void 0===e||null===(n=e.component_blueprints)||void 0===n?void 0:n.filter((function(e){return e.selected_fields.filter((function(e){return e.value=void 0}))}))}))),f.h.dispatch((0,_.q4)((0,a.Z)((0,a.Z)({},Pn.processModule),{},{selectedComponent:{id:""},stepIndex:Xn||Rt?0:1,isUpdating:!1})))},At=!!Array.isArray(null===Pn||void 0===Pn||null===(ee=Pn.processModule)||void 0===ee?void 0:ee.steps)&&(null===Pn||void 0===Pn||null===(ne=Pn.processModule)||void 0===ne||null===(le=ne.steps)||void 0===le||null===(oe=le.find((function(e){var n;return(null===e||void 0===e||null===(n=e.component_blueprints)||void 0===n?void 0:n.filter((function(e){return e.selected_fields.filter((function(e){return"Ratings"===e.data_type_name})).length>0})).length)>0})))||void 0===oe||null===(te=oe.component_blueprints)||void 0===te||null===(ie=te.find((function(e){var n;return(null===(n=e.selected_fields.filter((function(e){return"Ratings"===e.data_type_name})))||void 0===n?void 0:n.length)>0})))||void 0===ie||null===(ce=ie.selected_fields)||void 0===ce?void 0:ce.find((function(e){return"Ratings"===e.data_type_name}))),Ot=null===Wn||void 0===Wn?void 0:Wn.find((function(e){var n,l,o,t;return e.id===(null===Pn||void 0===Pn||null===(n=Pn.processModule)||void 0===n||null===(l=n.selectedComponent)||void 0===l||null===(o=l.component_fields)||void 0===o||null===(t=o.find((function(e){var n;return e.field_name===(null===At||void 0===At||null===(n=At.options)||void 0===n?void 0:n.field)})))||void 0===t?void 0:t.value)})),Rt=(null===zn||void 0===zn||null===(pe=zn.steps)||void 0===pe?void 0:pe.length)>0&&!((null===zn||void 0===zn||null===(fe=zn.steps[0])||void 0===fe||null===(_e=fe.component_blueprints)||void 0===_e?void 0:_e.filter((function(e){var n;return 1==(null===(n=e.options)||void 0===n?void 0:n.asModuleList)})).length)>0),Lt=function(){var e,n,l,o,t,i;return r.createElement("div",{ref:ht,className:me.menuAccordionButtons},(0==Rt&&Pn.processModule.stepIndex>1||1==Rt&&Pn.processModule.stepIndex>0||(null===Gn||void 0===Gn?void 0:Gn.title))&&r.createElement(y.zx,{title:"Cancel",light:!0,style:{width:"100%",display:null!==(e=Pn.processModule.module.options)&&void 0!==e&&e.single?"none":""},clicked:function(){xt.components.length>0||xt.newStepComponents.length>0?ut(!0):(Pn.processModule.back_array=[],Mt(Rt?zn.steps[0].id:zn.steps[1].id),To(!1),Ut(),Ln())}}),(0==Rt&&Pn.processModule.stepIndex>1||1==Rt&&Pn.processModule.stepIndex>0)&&r.createElement(y.zx,{title:"Back",light:!0,style:{width:"100%"},clicked:function(){var e,n,l;if(1==Pn.processModule.stepIndex&&bo(On.filter((function(e){var n,l;return e.module_id===(null===Pn||void 0===Pn||null===(n=Pn.processModule)||void 0===n||null===(l=n.module)||void 0===l?void 0:l.id)}))),1==(null===mt||void 0===mt||null===(e=mt.options)||void 0===e?void 0:e.deleteOnBack)&&mt.component_blueprints.filter((function(e){return e.selected_fields.filter((function(e){return"output"!==e.data_type})).map((function(e){e.value=void 0}))})),(null===Pn||void 0===Pn||null===(n=Pn.processModule)||void 0===n||null===(l=n.back_array)||void 0===l?void 0:l.length)>0){var o,t=null===Pn||void 0===Pn||null===(o=Pn.processModule)||void 0===o?void 0:o.back_array.pop();t&&Mt(t)}else{var i;Mt(null===(i=Pn.processModule.steps[Pn.processModule.stepIndex-1])||void 0===i?void 0:i.id)}}}),!0===(null===mt||void 0===mt?void 0:mt.is_end)?r.createElement(y.zx,{disabled:!1===(null===An||void 0===An?void 0:An.start),title:1==(null===Pn||void 0===Pn||null===(n=Pn.processModule)||void 0===n?void 0:n.isUpdating)?"Update":Tl&&null!==(l=null===Pn||void 0===Pn||null===(o=Pn.processModule)||void 0===o||null===(t=o.module)||void 0===t||null===(i=t.options)||void 0===i?void 0:i.save)&&void 0!==l?l:"Save",loading:dl,style:{width:"100%",display:xt.components.length>0||xt.newStepComponents.length>0?"":"none"},clicked:function(){var e,n,l,o,t,i;return No?xl("Saving is not allowed in Edit Mode"):1==(null===Pn||void 0===Pn||null===(e=Pn.processModule)||void 0===e||null===(n=e.module)||void 0===n||null===(l=n.options)||void 0===l?void 0:l.emailOutputs)&&1==(null===Pn||void 0===Pn||null===(o=Pn.processModule)||void 0===o||null===(t=o.module)||void 0===t||null===(i=t.options)||void 0===i?void 0:i.selectiveEmail)&&Tl?$l(!0):kt()}}):r.createElement(y.zx,{disabled:!1===(null===An||void 0===An?void 0:An.start),title:"Next",style:{width:"100%"},clicked:function(){var e,n,l,o,t,i,d,a,u;Array.isArray(null===Pn||void 0===Pn||null===(e=Pn.processModule)||void 0===e?void 0:e.back_array)||(Pn.processModule.back_array=[]),null===Pn||void 0===Pn||null===(n=Pn.processModule)||void 0===n||n.back_array.push(null===xt||void 0===xt||null===(l=xt.currentStep)||void 0===l?void 0:l.id);var r,s,v,c,p,m=null===(o=mt.component_blueprints.find((function(e){return e.selected_fields.filter((function(e){var n,l;return"Dropdown"===e.data_type_name&&(null===(n=e.options)||void 0===n?void 0:n.jump1)&&"decision"===(null===(l=e.options)||void 0===l?void 0:l.type)})).length>0})))||void 0===o||null===(t=o.selected_fields)||void 0===t?void 0:t.find((function(e){var n;return"Dropdown"===e.data_type_name&&(null===(n=e.options)||void 0===n?void 0:n.jump1)})),y=null===(i=mt.component_blueprints.find((function(e){return e.selected_fields.filter((function(e){var n;return"Value Button"===e.data_type_name&&(null===(n=e.options)||void 0===n?void 0:n.jump1)})).length>0})))||void 0===i||null===(d=i.selected_fields)||void 0===d?void 0:d.filter((function(e){var n;return"Value Button"===e.data_type_name&&(null===(n=e.options)||void 0===n?void 0:n.jump1)}));if(null!==m&&void 0!==m&&null!==(a=m.options)&&void 0!==a&&a.jump1&&null!==m&&void 0!==m&&null!==(u=m.options)&&void 0!==u&&u.jump2)if(0==(null===m||void 0===m||null===(r=m.options)||void 0===r?void 0:r.list.indexOf(null===m||void 0===m?void 0:m.value)))wt(null===(v=$n.find((function(e){var n;return e.id===(null===m||void 0===m||null===(n=m.options)||void 0===n?void 0:n.process)})))||void 0===v||null===(c=v.steps)||void 0===c||null===(p=c.find((function(e){return e.id===(null===m||void 0===m?void 0:m.options.jump1)})))||void 0===p?void 0:p.id);else if(1==(null===m||void 0===m||null===(s=m.options)||void 0===s?void 0:s.list.indexOf(null===m||void 0===m?void 0:m.value))){var h,g,b;wt(null===(h=$n.find((function(e){var n;return e.id===(null===m||void 0===m||null===(n=m.options)||void 0===n?void 0:n.process)})))||void 0===h||null===(g=h.steps)||void 0===g||null===(b=g.find((function(e){return e.id===(null===m||void 0===m?void 0:m.options.jump2)})))||void 0===b?void 0:b.id)}else{var x,E;null===Pn||void 0===Pn||null===(x=Pn.processModule)||void 0===x||null===(E=x.back_array)||void 0===E||E.pop(),f.h.dispatch((0,_.Xc)({show:!0,message:"Please select a value for ".concat(null===m||void 0===m?void 0:m.field_name),color:"red",bottom:!1})),window.scrollTo({top:0,behavior:"smooth"})}else if((null===y||void 0===y?void 0:y.length)>0){var C,w,Z,M,S,k=y.filter((function(e){return void 0!==e.value}));if(1==k.length)wt(null===(C=$n.find((function(e){var n,l;return e.id===(null===(n=k[0])||void 0===n||null===(l=n.options)||void 0===l?void 0:l.process)})))||void 0===C||null===(w=C.steps)||void 0===w||null===(Z=w.find((function(e){var n;return e.id===(null===(n=k[0])||void 0===n?void 0:n.options.jump1)})))||void 0===Z?void 0:Z.id);else null===Pn||void 0===Pn||null===(M=Pn.processModule)||void 0===M||null===(S=M.back_array)||void 0===S||S.pop(),f.h.dispatch((0,_.Xc)({show:!0,message:"A selection is required",color:"red",bottom:!1})),window.scrollTo({top:0,behavior:"smooth"})}else if((null===mt||void 0===mt?void 0:mt.next_steps.length)>1||ft.length>1||_t.length>1)pl(!cl);else if(1===mt.next_steps.length){var I;wt(null===mt||void 0===mt||null===(I=mt.next_steps[0])||void 0===I?void 0:I.id)}else{var P;wt(null===(P=zn.steps[zn.steps.findIndex((function(e){return e.id===mt.id}))+1])||void 0===P?void 0:P.id)}}}),cl&&r.createElement("div",{className:me.goToNextStep},null===mt||void 0===mt?void 0:mt.next_steps.map((function(e,n){return r.createElement("div",{key:n,onClick:function(){return wt(e.id)},className:me.nextStepsContainer},r.createElement("div",{className:me.nextStepImageContainer},r.createElement(ve.G,{icon:se.d63})),r.createElement("p",null,null===e||void 0===e?void 0:e.name))})),null===ft||void 0===ft?void 0:ft.map((function(e,n){return r.createElement("div",{key:n,onClick:function(){return wt(e.id)},className:me.nextStepsContainer},r.createElement("div",{className:me.nextStepImageContainer},r.createElement(ve.G,{icon:se.t3U})),r.createElement("p",null,null===e||void 0===e?void 0:e.name))})),null===_t||void 0===_t?void 0:_t.map((function(e,n){return r.createElement("div",{key:n,onClick:function(){return function(e){f.h.dispatch((0,_.pU)(e)),pl(!1)}(e)},className:me.nextStepsContainer},r.createElement("div",{className:me.nextStepImageContainer},r.createElement(ve.G,{icon:se.t3U})),r.createElement("p",null,null===e||void 0===e?void 0:e.name))}))))};return r.createElement(p.LN,null,r.createElement(E.sM,null,r.createElement("div",{className:me.processStepHost,style:{backgroundColor:h.tq?"":!0===(null===mt||void 0===mt||null===(ye=mt.options)||void 0===ye?void 0:ye.popup)?"var(--app-color-white-lightest)":""}},r.createElement("div",{className:me.leftCardMargin,"app-variant-is-mobile":h.tq?"true":"false"},r.createElement("div",{style:{display:"flex",justifyContent:"space-between",width:"100%"}},r.createElement("p",{className:me.stepTitle},null===mt||void 0===mt?void 0:mt.name),(0==Pn.processModule.stepIndex||1==Pn.processModule.stepIndex)&&r.createElement(y.zx,{light:!0,clicked:function(){al(!0);var e=Un.find((function(e){return e.id===Pn.processModule.module_id}));el.componentsByModule[e.name]=0,(0,O.vC)(e,U.Qc,1e3,1).pipe((0,c.q)(1)).subscribe({next:function(n){var l,o=null!==n&&void 0!==n&&n.data?null===n||void 0===n?void 0:n.data:n;f.h.dispatch((0,_.mK)(Q.Z(G.Z("created_date"),[].concat((0,d.Z)(On.filter((function(e){return e.module_id!==Pn.processModule.module_id}))),(0,d.Z)(o))),U.KI)),al(!1),e.lastUpdate=(0,de.now)(),e.count=null!==(l=null===n||void 0===n?void 0:n.total)&&void 0!==l?l:0},complete:function(){},error:function(){return al(!1)}})},icon:r.createElement("img",{src:C.Fdh}),loading:dl})),!Xn&&(null===mt||void 0===mt||null===(he=mt.guidance)||void 0===he?void 0:he.length)>0&&r.createElement("label",{className:me.stepGuidanceSmaller},null===mt||void 0===mt?void 0:mt.guidance),bl&&(_l||No)&&r.createElement(I.Z,{message:bl,onClick:function(){return xl("")}}),1===rl&&void 0===(null===mt||void 0===mt?void 0:mt.component_blueprints)?r.createElement("div",{className:me.centeredSpinner}):(null===mt||void 0===mt||null===(ge=mt.component_blueprints)||void 0===ge?void 0:ge.filter((function(e){var n;return 1==(null===(n=e.options)||void 0===n?void 0:n.asModuleList)})).length)>0?null===mt||void 0===mt||null===(be=mt.component_blueprints)||void 0===be?void 0:be.filter((function(e){var n,l,o;return 1==e.options.asModuleList&&(ol.positions.filter((function(n){var l,o;return null===(l=e.options)||void 0===l||null===(o=l.showOnly)||void 0===o?void 0:o.includes(n.id)})).length>0||0==(null===(n=e.options)||void 0===n||null===(l=n.showOnly)||void 0===l?void 0:l.length)||void 0===(null===(o=e.options)||void 0===o?void 0:o.showOnly))})).map((function(e,n){var l,o,t;return r.createElement("div",{key:n,style:{width:"100%",padding:"0 10px 0 10px"}},r.createElement(S.default,{card:!0,className:me.listContainer,isReport:!1,"app-variant-is-mobile":"true",columns:(0,d.Z)(new Set((null!==(l=null===(o=e.selected_fields.find((function(e){return 1==e.visible&&"Info"===e.data_type_name})))||void 0===o||null===(t=o.options)||void 0===t?void 0:t.list)&&void 0!==l?l:[]).concat(V.Z([K.Z(G.Z("index"))])(e.selected_fields.filter((function(e){return 1==e.visible&&"Info"!==e.data_type_name}))).map((function(e){return e.field_name}))))).splice(0,3),list:Tt({list:e.selected_fields.filter((function(e){return 1==e.visible||"Info"===e.data_type_name})).map((function(e){var n,l;return"Info"===e.data_type_name&&null!==(n=null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.key)&&void 0!==n?n:e.field_name}))}),onListItemClick:function(e){(null===e||void 0===e?void 0:e.id)===(null===nt||void 0===nt?void 0:nt.id)?lt(!1):lt(e)}},nt&&r.createElement("div",{style:{backgroundColor:"white"}},r.createElement(Be,{ref:yt,begunModule:Pn,allModules:Un,companyData:An,components:On,selectedComponent:go.find((function(e){return e.id===(null===nt||void 0===nt?void 0:nt.id)})),setSelectedComponent:Qn,companyUsersArray:Wn,print:Yl,step:C.Nbs,companyPositionsArray:Fn,user:Nn,goto:!1}))))})):1===rl&&void 0===mt.component_blueprints?r.createElement(r.Fragment,null,"No components in step"):r.createElement("div",{className:me.processModuleContainer,"app-variant-is-mobile":h.tq?"true":"false"},r.createElement(y.U7,{blured:!1,scrollable:!1,isOpen:!h.tq&&(null!==(xe=null===mt||void 0===mt||null===(Ce=mt.options)||void 0===Ce?void 0:Ce.popup)&&void 0!==xe&&xe),shadowedContainerStyle:{width:"100%",minWidth:"50%"}},r.createElement(Fe,{nextButtonClicked:wl,step:mt,setIsMandatoryError:yl,isMandatoryError:_l,begunModule:Pn,companyData:An,blueprints:Bn,components:On,products:qn,authenticatedUser:ol,isEditing:Vn,companyUsersArray:Wn,usersArray:Co,setUsers:Ol,setPositions:ql,setIsCompleted:Dl,selectedComponent:Gn,goToNextStep:Mt,companyPositionsArray:Fn,cart:Tn,allModules:Un,editMode:No},r.createElement("div",{className:me.menuRightButtons}),Lt())),(!0!==(null===mt||void 0===mt||null===(we=mt.options)||void 0===we?void 0:we.popup)||h.tq)&&r.createElement(Fe,{nextButtonClicked:wl,step:mt,setIsMandatoryError:yl,isMandatoryError:_l,begunModule:Pn,companyData:An,blueprints:Bn,components:On,products:qn,authenticatedUser:ol,isEditing:Vn,companyUsersArray:Wn,usersArray:Co,setUsers:Ol,setPositions:ql,setIsCompleted:Dl,selectedComponent:Gn,goToNextStep:Mt,companyPositionsArray:Fn,cart:Tn,allModules:Un,editMode:No,isProcessorOnly:Xn},Lt())),at&&r.createElement(Oe.Z,{openModal:at,setOpenModal:ut,dialogHandler:function(){Pn.processModule.back_array=[],Mt(Rt?zn.steps[0].id:zn.steps[1].id),To(!1),Ut(),Ln()},title:"You have unsaved items. Are you sure you want to cancel?",proceedTitle:"Yes",cancelTitle:"No, return back",loading:dl}),Jl&&r.createElement(y.U7,{isOpen:g.v7,onClose:function(){},backdropColor:!0,blured:!0,scrollable:!0,shadowedContainerStyle:{width:"100%"}},r.createElement("div",null,r.createElement("p",{className:me.deleteText},"Are you sure you want to delete ".concat(Gn.title,"?")),r.createElement("div",{style:{display:"flex",justifyContent:"center"}},r.createElement(y.zx,{title:"Delete",clicked:function(){uo(!0),(0,g.v7)(Gn.id).pipe((0,v.P)()).subscribe({next:function(){uo(!1),Il(!1),Gl(!1)},complete:function(){},error:function(){uo(!1),Gl(!1)}})},loading:ao}),r.createElement(y.zx,{title:"No",light:!0,clicked:function(){return Gl(!1)}})))),lo&&r.createElement(y.U7,{isOpen:lo,onClose:function(){},backdropColor:!0,blured:!1,scrollable:!0,shadowedContainerStyle:{width:"100%"}},r.createElement("div",null,r.createElement("p",{className:me.deleteText},"Cannot delete ".concat(Gn.title,". Some transactions and master data are using this item")),r.createElement("div",{style:{display:"flex",justifyContent:"center"}},r.createElement(y.zx,{title:"Close",light:!0,clicked:function(){return oo(!1)}}))))),vt&&r.createElement(Oe.Z,{openModal:vt,setOpenModal:ct,dialogHandler:function(){Ao(!1),ct(!1),f.h.dispatch((0,_.q4)((0,a.Z)((0,a.Z)({},Pn.processModule),{},{stepIndex:0,isUpdating:!1})))},title:"No payments made. Do you want to pay later?",proceedTitle:"Yes",cancelTitle:"No, return back"}),Uo&&r.createElement(y.U7,{hasCloseIcon:!0,isOpen:Uo,onClose:function(){return ct(!0)},backdropColor:!0,blured:!1,scrollable:!0,shadowedContainerStyle:{width:"100%"}},r.createElement(ue.default,{label:" ",withBack:!1,paymentPath:"begin-mobile",onClose:function(){return Ao(!1)},companyData:An,subscriptionInfo:{user_id:ol.id,ref:xt.id,plan_price:null!==(Ze=null===xt||void 0===xt?void 0:xt.plan)&&void 0!==Ze?Ze:0,currency:null!==(Me=null===xt||void 0===xt?void 0:xt.currency)&&void 0!==Me?Me:"PHP",plan:"CC-".concat(xt.id),total:null!==(Se=+(null===xt||void 0===xt?void 0:xt.total))&&void 0!==Se?Se:0,billable_users:[ol],duration:0,dlabel:xt.id,id:null===Pn||void 0===Pn||null===(ke=Pn.processModule)||void 0===ke||null===(Ie=ke.selectedComponent)||void 0===Ie?void 0:Ie.id},onError:function(e){tt(!0),xl(e),yl(!0),Ao(!1),f.h.dispatch((0,_.q4)((0,a.Z)((0,a.Z)({},Pn.processModule),{},{stepIndex:0,isUpdating:!1})))}})),Xl&&r.createElement(y.U7,{isOpen:Xl,onClose:function(){return $l(!1)},backdropColor:!0,blured:!0,scrollable:!0,shadowedContainerStyle:{width:"100%"}},r.createElement("div",null,r.createElement(y.jL,{ungrouped:!0,title:"nonmanager"===ol.user_type?"Type an email address to send copy of this transaction (optional)":"Select users to email this transaction (Optional)",columned:!0,withAckButton:!1},"nonmanager"===ol.user_type?r.createElement("input",{placeholder:"Use comma, no space, for multiple email addresses",className:me.emailInput,onChange:function(e){new RegExp(/^([a-z0-9!#$%&'*+/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*)(([, ]+[a-z0-9!#$%&'*+/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])\.([a-z0-9]([a-z0-9-]*[a-z0-9]))*)?)*$/).test(e.target.value)&&ko(e.target.value.split(","))}}):r.createElement(A.Cm,{id:"Users",tagEmplacement:"inlined",searchable:!1,items:Co.filter((function(e){var n;return e.department===(null===(n=ol.departments[0])||void 0===n?void 0:n.name)})),groupedBy:"department",groupname:"department",triggerType:"chevron",initialSelectedValues:[],className:me.peoplePositionsSelect,inputClassName:me.peoplePositionsSelectInput,molclassname:me.peoplePositionsSelectMenuOverlay,moliclassname:me.peoplePositionsSelectMenuOverlayItem,onChange:function(e){e.length>0?ko(null===e||void 0===e?void 0:e.map((function(e){return null===e||void 0===e?void 0:e.user.email}))):ko([])}})),r.createElement("div",{style:{display:"flex",justifyContent:"center"}},r.createElement(y.zx,{title:"Back",light:!0,clicked:function(){return $l(!1)}}),r.createElement(y.zx,{disabled:!1===(null===An||void 0===An?void 0:An.start),title:null!==Pn&&void 0!==Pn&&null!==(Ne=Pn.processModule)&&void 0!==Ne&&Ne.isUpdating?"Update":Tl&&null!==(De=null===Pn||void 0===Pn||null===(ze=Pn.processModule)||void 0===ze||null===(Ue=ze.module)||void 0===Ue||null===(Ae=Ue.options)||void 0===Ae?void 0:Ae.save)&&void 0!==De?De:"Save",loading:dl,style:{width:"160px",marginLeft:"0px"},clicked:function(){$l(!1),kt()}})))),r.createElement(y.U7,{hasCloseIcon:!0,blured:!0,scrollable:!0,isOpen:(kl||!0===(null===Pn||void 0===Pn||null===(Le=Pn.processModule)||void 0===Le?void 0:Le.showDetail))&&void 0!==(null===Gn||void 0===Gn?void 0:Gn.title),shadowedContainerStyle:{padding:"0 20px 20px 20px",width:"100%"},sshadowedContainerClassname:me.popup,onClose:function(){Il(!1),Hl(!1),f.h.dispatch((0,_.q4)((0,a.Z)((0,a.Z)({},Pn.processModule),{},{showDetail:!1}))),Xn?Ut():(bo(On.filter((function(e){var n,l;return e.module_id===(null===Pn||void 0===Pn||null===(n=Pn.processModule)||void 0===n||null===(l=n.module)||void 0===l?void 0:l.id)}))),Mt(Rt?zn.steps[0].id:zn.steps[1].id),To(!1),Ut(),Ln())}},r.createElement(Be,{ref:yt,begunModule:Pn,allModules:Un,companyData:An,components:On,selectedComponent:Gn,setSelectedComponent:Qn,companyUsersArray:Wn,print:Yl,step:C.Nbs,companyPositionsArray:Fn,user:Nn,goto:!0}),r.createElement("div",{className:me.emulatedFlexGap,style:{width:"100%"}},(null===Gn||void 0===Gn||null===(We=Gn.component_fields)||void 0===We?void 0:We.length)>0&&r.createElement(r.Fragment,null,(0,U.cQ)(Dt,zt,Gn,ol,Pn,An)&&(null===Pn||void 0===Pn||null===(qe=Pn.processModule)||void 0===qe||null===(Ye=qe.steps)||void 0===Ye||null===(He=Ye.find((function(e){return e.component_blueprints.filter((function(e){return e.selected_fields.filter((function(e){return"Action Button"===e.data_type_name})).length>0})).length>0})))||void 0===He||null===(je=He.component_blueprints.find((function(e){return e.selected_fields.filter((function(e){return"Action Button"===e.data_type_name})).length>0})))||void 0===je?void 0:je.selected_fields.filter((function(e){return"Action Button"===e.data_type_name})).map((function(e,n){var l,o,t,i;if("status"===e.options.action){var d,u,s,c,p,m,h,b,x,E=(null===An||void 0===An||null===(d=An.misc_info)||void 0===d||null===(u=d.status)||void 0===u?void 0:u.length)>0?null===An||void 0===An||null===(s=An.misc_info)||void 0===s?void 0:s.status:[{label:"Ongoing",value:"Ongoing"},{label:"Pending",value:"Pending"},{label:"Awaiting Payment",value:"Awaiting Payment"},{label:"Awaiting Fulfillment",value:"Awaiting Fulfillment"},{label:"Awaiting Shipment",value:"Awaiting Shipment"},{label:"Awaiting Pickup",value:"Awaiting Pickup"},{label:"Partially Shipped",value:"Partially Shipped"},{label:"Completed",value:"Completed"},{label:"Shipped",value:"Shipped"},{label:"Cancelled",value:"Cancelled"},{label:"Declined",value:"Declined"},{label:"Refunded",value:"Refunded"},{label:"Disputed",value:"Disputed"},{label:"Done",value:"Done"},{label:"Closed (Will lock Edit)",value:"Closed"}];if((null===An||void 0===An||null===(c=An.misc_info)||void 0===c||null===(p=c.rules)||void 0===p?void 0:p.length)>0)null===An||void 0===An||null===(x=An.misc_info)||void 0===x||x.rules.filter((function(e){return"status"===e.type})).filter((function(n){n.valueCondition===e.value&&(E="0"===n.allow?E.filter((function(e){return n.values.includes(e.value)})):E.filter((function(e){return!n.values.includes(e.value)})))}));return r.createElement("div",{key:n,style:{width:"100%",display:"user"===e.options.action&&null!==(m=Gn.component_fields)&&void 0!==m&&null!==(h=m.find((function(n){return n.procedure_step_blueprint_field_id===e.procedure_step_blueprint_field_id})))&&void 0!==h&&h.value?"none":""}},r.createElement(P.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-light)"},className:me.multiselectComponent,key:n,visible:e.visible,mandatory:e.mandatory,value:null!==(b=e.value)&&void 0!==b?b:"",items:E,error:e.errors,onChange:function(n){var l,o,t,i;if(null!==(l=Pn.processModule)&&void 0!==l&&null!==(o=l.module)&&void 0!==o&&null!==(t=o.options)&&void 0!==t&&t.credits&&(n===(null===(i=An.options)||void 0===i?void 0:i.lock)||"Closed"===n)){var d,u,r,s,c,p,m,y,h,b,x=null===Pn||void 0===Pn||null===(d=Pn.processModule)||void 0===d||null===(u=d.steps)||void 0===u||null===(r=u.find((function(e){return e.component_blueprints.filter((function(e){return e.selected_fields.filter((function(e){return"Payments"===e.data_type_name})).length>0})).length>0})))||void 0===r||null===(s=r.component_blueprints.find((function(e){return e.selected_fields.filter((function(e){return"Payments"===e.data_type_name})).length>0})))||void 0===s?void 0:s.selected_fields.find((function(e){return"Payments"===e.data_type_name})),E=null===(c=xt.newStepComponents.concat(xt.components).find((function(e){return e.selected_fields.filter((function(e){var n;return e.field_name===(null===x||void 0===x||null===(n=x.options)||void 0===n?void 0:n.paymentField)})).length>0})))||void 0===c||null===(p=c.selected_fields)||void 0===p?void 0:p.find((function(e){var n;return e.field_name===(null===x||void 0===x||null===(n=x.options)||void 0===n?void 0:n.paymentField)})),C=0;if(null===(m=Pn.processModule)||void 0===m||null===(y=m.selectedComponent.payments)||void 0===y||!y.stripe_id)return Il(!1),Pn.processModule.showDetail=!1,void f.h.dispatch((0,_.Xc)({show:!0,message:"Check support payment docs",color:"red",spinner:!1,bottom:!0}));if(!(+(null!==(h=null===E||void 0===E?void 0:E.value)&&void 0!==h?h:0)>0))return void f.h.dispatch((0,_.Xc)({show:!0,message:"No amount found",color:"red",spinner:!1,bottom:!0}));C=+(null!==(b=null===E||void 0===E?void 0:E.value)&&void 0!==b?b:0),"Cash"!==(null===x||void 0===x?void 0:x.value)&&(0,re.e_)({user_id:ol.id,id:(0,U.mR)(),total:C,product:"CR-".concat(null===Gn||void 0===Gn?void 0:Gn.title),notes:"Wallet",quantity:1}).pipe((0,v.P)()).subscribe({next:function(){var e;Nn.wallet=+(+(null!==(e=null===Nn||void 0===Nn?void 0:Nn.wallet)&&void 0!==e?e:0)+C)}})}An.start=!0,al(!0),(0,g.C0)({component_id:Gn.id,index:0,group:99,value:n,procedure_step_blueprint_field_id:e.procedure_step_blueprint_field_id}).subscribe({next:function(e){(0,g.zK)(null===Gn||void 0===Gn?void 0:Gn.id,n).subscribe({next:function(e){al(!1),Il(!1),f.h.dispatch((0,_.q4)((0,a.Z)((0,a.Z)({},Pn.processModule),{},{showDetail:!1})))}})},error:function(){},complete:function(){}})},fieldIcon:e.icon,fieldLabel:e.field_name,placeholder:"Select status..."}))}return r.createElement("div",{key:n,style:{width:"100%",display:null!==Gn&&void 0!==Gn&&Gn.payments||null===Gn||void 0===Gn||!Gn.component_fields.find((function(e){return"Payments"===e.data_type_name&&"Credit Card"===e.value}))?"":"none"}},r.createElement(y.zx,{light:!0,title:e.field_name,loading:dl,clicked:function(){if("user"===e.options.action||"creator"===e.options.action){var n,l,o,t,i,d,u,r,s;if(1==(null===(n=Pn.processModule)||void 0===n||null===(l=n.module)||void 0===l||null===(o=l.options)||void 0===o?void 0:o.activeFor)&&ae()((0,de.now)()).diff(ae()(Gn.created_date),"minutes")>+(null===(t=Pn.processModule)||void 0===t||null===(i=t.module)||void 0===i||null===(d=i.options)||void 0===d?void 0:d.activeFor))return void f.h.dispatch((0,_.Xc)({show:!0,message:"This transaction has already expired.",color:"red",spinner:!1,bottom:!0}));var c="user"===e.options.action?ol:Wn.find((function(e){var n;return e.id===(null===(n=Gn.created_by)||void 0===n?void 0:n.id)}));if(null!==(u=Pn.processModule)&&void 0!==u&&null!==(r=u.module)&&void 0!==r&&null!==(s=r.options)&&void 0!==s&&s.credits){var p,m,y,h,b,x,E,C,w,Z,M=null===Pn||void 0===Pn||null===(p=Pn.processModule)||void 0===p||null===(m=p.steps)||void 0===m||null===(y=m.find((function(e){return e.component_blueprints.filter((function(e){return e.selected_fields.filter((function(e){return"Payments"===e.data_type_name})).length>0})).length>0})))||void 0===y||null===(h=y.component_blueprints.find((function(e){return e.selected_fields.filter((function(e){return"Payments"===e.data_type_name})).length>0})))||void 0===h?void 0:h.selected_fields.find((function(e){return"Payments"===e.data_type_name}));if("Credit Card"===(null===M||void 0===M?void 0:M.value)&&(null===Gn||void 0===Gn||!Gn.payments))return f.h.dispatch((0,_.Xc)({show:!0,message:"This ",color:"red",spinner:!1,bottom:!0})),Pn.processModule.showDetail=!1,void Il(!1);var S=null===(b=xt.newStepComponents.concat(xt.components).find((function(e){return e.selected_fields.filter((function(e){var n;return e.field_name===(null===M||void 0===M||null===(n=M.options)||void 0===n?void 0:n.paymentField)})).length>0})))||void 0===b||null===(x=b.selected_fields)||void 0===x?void 0:x.find((function(e){var n;return e.field_name===(null===M||void 0===M||null===(n=M.options)||void 0===n?void 0:n.paymentField)})),k=0;if(void 0===(null===c||void 0===c?void 0:c.wallet)||0===(null===c||void 0===c?void 0:c.wallet))return f.h.dispatch((0,_.Xc)({show:!0,message:"You need to setup funds for your wallet",color:"red",spinner:!1,bottom:!0})),Pn.processModule.showDetail=!1,void Il(!1);if(+(null!==(E=null===S||void 0===S?void 0:S.value)&&void 0!==E?E:0)>0&&"Cash"===(null===M||void 0===M?void 0:M.value)){var I,P,N,T,D;if((null!==(I=+(null===c||void 0===c?void 0:c.wallet))&&void 0!==I?I:0)<+(null===S||void 0===S?void 0:S.value)+ +(null===S||void 0===S?void 0:S.value)*+(null!==(P=null===(N=An.misc_info)||void 0===N?void 0:N.rate)&&void 0!==P?P:.2))return f.h.dispatch((0,_.Xc)({show:!0,message:"Insufficient funds in wallet",color:"red",spinner:!1,bottom:!0})),Pn.processModule.showDetail=!1,void Il(!1);k=null!==S&&void 0!==S&&S.value?+(null===S||void 0===S?void 0:S.value)+ +(null===S||void 0===S?void 0:S.value)*+(null!==(T=null===(D=An.misc_info)||void 0===D?void 0:D.rate)&&void 0!==T?T:.2):0}else if(!("Wallet"===(null===M||void 0===M?void 0:M.value)||"Points"===(null===M||void 0===M?void 0:M.value)||null!==(C=Pn.processModule)&&void 0!==C&&null!==(w=C.selectedComponent)&&void 0!==w&&null!==(Z=w.payments)&&void 0!==Z&&Z.stripe_id))return Il(!1),Pn.processModule.showDetail=!1,void f.h.dispatch((0,_.Xc)({show:!0,message:"Check support payment docs",color:"red",spinner:!1,bottom:!0}));"Cash"===(null===M||void 0===M?void 0:M.value)&&(0,re.e_)({user_id:ol.id,id:(0,U.mR)(),total:-k,product:"DB-".concat(null===Gn||void 0===Gn?void 0:Gn.title),notes:"Wallet",quantity:1}).pipe((0,v.P)()).subscribe({next:function(){var e;return c.wallet=+(+(null!==(e=null===c||void 0===c?void 0:c.wallet)&&void 0!==e?e:0)-k)},error:function(){return f.h.dispatch((0,_.Xc)({show:!0,message:"Purchase error encountered",color:"red",spinner:!1,bottom:!0}))}})}al(!0),(0,g.C0)({component_id:Gn.id,index:0,group:99,value:c.id,procedure_step_blueprint_field_id:e.procedure_step_blueprint_field_id}).subscribe({next:function(e){(0,g.dn)(Gn.id,c.id).subscribe({next:function(e){al(!1),Il(!1),f.h.dispatch((0,_.q4)((0,a.Z)((0,a.Z)({},Pn.processModule),{},{showDetail:!1})))}})},error:function(){},complete:function(){}})}else"status"===e.options.action||"date"===e.options.action||e.options.action,al(!1)},style:{backgroundColor:"green",color:"white",width:"100%",display:"user"===e.options.action&&null!==(l=Gn.component_fields)&&void 0!==l&&null!==(o=l.find((function(n){return n.procedure_step_blueprint_field_id===e.procedure_step_blueprint_field_id})))&&void 0!==o&&o.value?"none":""}}),r.createElement(y.zx,{title:"Decline",light:!0,loading:dl,clicked:function(){var e,n;al(!0);var l=Gn.component_fields.find((function(e){var n;return"People"===e.data_type_name&&!0===(null===(n=e.options)||void 0===n?void 0:n.calendar)}));(0,g.KL)((0,a.Z)((0,a.Z)({},Gn),{},{selected_fields:l?Gn.component_fields.filter((function(e){return e.id!==l.id})):Gn.component_fields,assigned_to:{id:""},status:"Unassigned"}),Gn.id,null===(e=Gn.shared_users)||void 0===e?void 0:e.map((function(e){return null===e||void 0===e?void 0:e.id})),Gn.title,Gn.is_complete,null===(n=Gn.shared_positions)||void 0===n?void 0:n.map((function(e){return null===e||void 0===e?void 0:e.id}))).subscribe({error:function(e){f.h.dispatch((0,_.Xc)({show:!0,message:"Errors found",color:"red"}))},next:function(e){f.h.dispatch((0,_.aT)(Gn.id)),al(!1),Il(!1),f.h.dispatch((0,_.q4)((0,a.Z)((0,a.Z)({},Pn.processModule),{},{showDetail:!1})))}})},style:{backgroundColor:"red",color:"white",width:"100%",display:"user"===e.options.action&&null!==(t=Gn.component_fields)&&void 0!==t&&null!==(i=t.find((function(n){return n.procedure_step_blueprint_field_id===e.procedure_step_blueprint_field_id})))&&void 0!==i&&i.value?"none":""}}))})))),!(null!==Pn&&void 0!==Pn&&null!==(Ve=Pn.processModule)&&void 0!==Ve&&Ve.canEdit)&&("Closed"===(null===Pn||void 0===Pn||null===(Je=Pn.processModule)||void 0===Je?void 0:Je.status)||(null===Pn||void 0===Pn||null===(Ge=Pn.processModule)||void 0===Ge?void 0:Ge.status)===(null===An||void 0===An||null===(Ke=An.misc_info)||void 0===Ke?void 0:Ke.lock))&&(null===Pn||void 0===Pn||null===(Xe=Pn.processModule.selectedComponent)||void 0===Xe||null===($e=Xe.created_by)||void 0===$e?void 0:$e.id)===ol.id&&(null===Pn||void 0===Pn||null===(en=Pn.processModule)||void 0===en||null===(nn=en.steps)||void 0===nn?void 0:nn.find((function(e){return e.component_blueprints.filter((function(e){return e.selected_fields.filter((function(e){return"Ratings"===e.data_type_name})).length>0}))})))&&!(null!==Pn&&void 0!==Pn&&null!==(ln=Pn.processModule.selectedComponent)&&void 0!==ln&&ln.component_fields.find((function(e){return"Ratings"===e.data_type_name})))&&Ot&&r.createElement(y.zx,{clear:!0,title:"Rate",style:{backgroundColor:"orange",color:"white",width:"100%"},clicked:function(){Wo(!0)}}),(null===(on=Pn.processModule)||void 0===on?void 0:on.canEdit)&&r.createElement(y.zx,{title:Pn.processModule.canEdit?"Edit":"Close",style:{width:"100%"},clicked:function(){Il(!1),Hl(!1),f.h.dispatch((0,_.q4)((0,a.Z)((0,a.Z)({},Pn.processModule),{},{showDetail:!1}))),Pn.processModule.canEdit||(Xn?Ut():(bo(On.filter((function(e){var n,l;return e.module_id===(null===Pn||void 0===Pn||null===(n=Pn.processModule)||void 0===n||null===(l=n.module)||void 0===l?void 0:l.id)}))),Mt(Rt?zn.steps[0].id:zn.steps[1].id),To(!1),Ut(),Ln())),window.scrollTo({top:Pn.processModule.canEdit?1e3:0,behavior:"smooth"})}}),(null===Pn||void 0===Pn||null===(tn=Pn.processModule)||void 0===tn||null===(dn=tn.module)||void 0===dn||null===(an=dn.options)||void 0===an?void 0:an.canCancel)&&("New"===Gn.status||"Unassigned"===Gn.status)&&!(null!==(un=Gn.assigned_to)&&void 0!==un&&un.id)&&r.createElement(y.zx,{loading:dl,title:"Cancel Transaction",style:{backgroundColor:"red",color:"white",width:"100%"},clear:!0,clicked:function(){al(!0),(0,g.tE)(null===Gn||void 0===Gn?void 0:Gn.id,"Cancelled").pipe((0,v.P)()).subscribe({next:function(e){var n;if(al(!1),null!==e&&void 0!==e&&null!==(n=e.data.payments)&&void 0!==n&&n.stripe_id){var l,o=Math.abs(+(null===e||void 0===e||null===(l=e.data.payments)||void 0===l?void 0:l.stripe_price));(0,re.e_)({user_id:ol.id,id:(0,U.mR)(),total:o,product:"RF-".concat(Gn.title),notes:"Wallet",quantity:1}).pipe((0,v.P)()).subscribe({next:function(){var e;ol.wallet=+(+(null!==(e=null===Nn||void 0===Nn?void 0:Nn.wallet)&&void 0!==e?e:0)+o),al(!1),Il(!1),Hl(!1),f.h.dispatch((0,_.q4)((0,a.Z)((0,a.Z)({},Pn.processModule),{},{showDetail:!1}))),window.scrollTo({top:0,behavior:"smooth"})}})}else al(!1),Il(!1),Hl(!1),f.h.dispatch((0,_.q4)((0,a.Z)((0,a.Z)({},Pn.processModule),{},{showDetail:!1}))),window.scrollTo({top:0,behavior:"smooth"})}})}}),(null===Pn||void 0===Pn||null===(rn=Pn.processModule)||void 0===rn||null===(sn=rn.module)||void 0===sn||null===(vn=sn.options)||void 0===vn?void 0:vn.canCancel)&&"Cancellation Request"===(null===Gn||void 0===Gn?void 0:Gn.status)&&(null===ol||void 0===ol?void 0:ol.id)===(null===Gn||void 0===Gn||null===(cn=Gn.created_by)||void 0===cn?void 0:cn.id)&&r.createElement(y.zx,{loading:dl,title:"Allow Cancellation",style:{backgroundColor:"red",color:"white",width:"100%"},clear:!0,clicked:function(){var e;if(al(!0),null!==(e=Gn.payments)&&void 0!==e&&e.stripe_id){var n,l,o=Math.abs(null!==(n=+(null===Gn||void 0===Gn||null===(l=Gn.payments)||void 0===l?void 0:l.stripe_price))&&void 0!==n?n:0);(0,re.e_)({user_id:ol.id,id:(0,U.mR)(),total:o,product:"RF-".concat(Gn.title),notes:"Wallet",quantity:1}).pipe((0,v.P)()).subscribe({next:function(){var e;ol.wallet=+(+(null!==(e=null===Nn||void 0===Nn?void 0:Nn.wallet)&&void 0!==e?e:0)+o),(0,g.tE)(null===Gn||void 0===Gn?void 0:Gn.id,"Cancelled").pipe((0,v.P)()).subscribe({next:function(e){al(!1),Il(!1),Hl(!1),f.h.dispatch((0,_.q4)((0,a.Z)((0,a.Z)({},Pn.processModule),{},{showDetail:!1}))),window.scrollTo({top:0,behavior:"smooth"})}})}})}else(0,g.tE)(null===Gn||void 0===Gn?void 0:Gn.id,"Refund").pipe((0,v.P)()).subscribe({next:function(e){al(!1),Il(!1),Hl(!1),f.h.dispatch((0,_.q4)((0,a.Z)((0,a.Z)({},Pn.processModule),{},{showDetail:!1}))),window.scrollTo({top:0,behavior:"smooth"})}})}}),(null===Pn||void 0===Pn||null===(pn=Pn.processModule)||void 0===pn||null===(mn=pn.module)||void 0===mn||null===(fn=mn.options)||void 0===fn?void 0:fn.canCancel)&&"Refund"===Gn.status&&(null===ol||void 0===ol?void 0:ol.id)===(null===(_n=Gn.assigned_to)||void 0===_n?void 0:_n.id)&&r.createElement(y.zx,{loading:dl,title:"Refund",style:{backgroundColor:"red",color:"white",width:"100%"},clear:!0,clicked:function(){var e=Gn.component_fields.find((function(e){var n;return"Payments"===e.data_type_name&&"Refund"===Gn.status&&(null===(n=Gn.assigned_to)||void 0===n?void 0:n.id)===(null===ol||void 0===ol?void 0:ol.id)})),n=Gn.component_fields.find((function(n){var l;return n.field_name===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.paymentField)}));if(n){var l,o,t;al(!0);var i=Math.abs(null!==(l=+(null===n||void 0===n?void 0:n.value))&&void 0!==l?l:0)+ +(null===n||void 0===n?void 0:n.value)*+(null!==(o=null===(t=An.misc_info)||void 0===t?void 0:t.rate)&&void 0!==o?o:.2);(0,re.e_)({user_id:ol.id,id:(0,U.mR)(),total:i,product:"RF-".concat(Gn.title),notes:"Wallet",quantity:1}).pipe((0,v.P)()).subscribe({next:function(){var e;ol.wallet=+(+(null!==(e=null===Nn||void 0===Nn?void 0:Nn.wallet)&&void 0!==e?e:0)+i),(0,g.tE)(null===Gn||void 0===Gn?void 0:Gn.id,"Cancelled").pipe((0,v.P)()).subscribe({next:function(e){al(!1),Il(!1),Hl(!1),St(),Ut(),window.scrollTo({top:0,behavior:"smooth"})}})}})}else al(!1),Il(!1),Hl(!1),f.h.dispatch((0,_.q4)((0,a.Z)((0,a.Z)({},Pn.processModule),{},{showDetail:!1}))),window.scrollTo({top:0,behavior:"smooth"})}}))),Bo&&r.createElement(y.U7,{hasCloseIcon:!0,blured:!0,scrollable:!0,isOpen:Bo,shadowedContainerStyle:{borderTopLeftRadius:"30px",borderTopRightRadius:"30px",padding:"20px",width:"100%"},sshadowedContainerClassname:me.popup,onClose:function(){Yo(!1)}},r.createElement(Be,{ref:yt,begunModule:Pn,allModules:Un,companyData:An,components:On,setSelectedComponent:Qn,selectedComponent:Gn,companyUsersArray:Wn,print:Yl,step:C.Nbs,companyPositionsArray:Fn,user:Nn,goto:!0}),r.createElement("div",{className:me.emulatedFlexGap,style:{width:"100%"}},r.createElement(y.zx,{title:"Close",style:{width:"100%"},clicked:function(){Yo(!1)}}))),Lo&&r.createElement(y.U7,{isOpen:Lo,hasCloseIcon:!0,onClose:function(){return Wo(!1)},backdropColor:!0,blured:!1,scrollable:!0,shadowedContainerStyle:{width:"100%",height:"auto"}},r.createElement("div",{className:me.ratingsDiv},r.createElement("h3",null,"Rate your experience"),r.createElement("h5",null,"Ratings and reviews of users are visible to everyone"),r.createElement(Pe.Z,{photo:null===Ot||void 0===Ot?void 0:Ot.photo,firstName:null===Ot||void 0===Ot?void 0:Ot.first_name,lastName:null===Ot||void 0===Ot?void 0:Ot.last_name,email:null===Ot||void 0===Ot?void 0:Ot.email,position:null===Ot||void 0===Ot?void 0:Ot.phone,cardClicked:function(){},width:"100%"}),r.createElement("div",{className:me.slider},r.createElement(y.zx,{clear:!0,clicked:function(){return Jo(1)}},r.createElement(ve.G,{icon:se.Tab,style:{color:Vo<1?"lightgray":"black",height:"30px",width:"30px"}})),r.createElement(y.zx,{clear:!0,clicked:function(){return Jo(2)}},r.createElement(ve.G,{icon:se.Tab,style:{color:Vo<2?"lightgray":"black",height:"30px",width:"30px"}})),r.createElement(y.zx,{clear:!0,clicked:function(){return Jo(3)}},r.createElement(ve.G,{icon:se.Tab,style:{color:Vo<3?"lightgray":"black",height:"30px",width:"30px"}})),r.createElement(y.zx,{clear:!0,clicked:function(){return Jo(4)}},r.createElement(ve.G,{icon:se.Tab,style:{color:Vo<4?"lightgray":"black",height:"30px",width:"30px"}})),r.createElement(y.zx,{clear:!0,clicked:function(){return Jo(5)}},r.createElement(ve.G,{icon:se.Tab,style:{color:Vo<5?"lightgray":"black",height:"30px",width:"30px"}}))),"Comments:",r.createElement("textarea",{type:"text",autoComplete:"none",className:me.ratingsInput,name:"Comments",id:"Comments",style:{padding:"0 10px 0 10px",fontSize:"16px",backgroundColor:"rgba(234, 231, 231, 0.91)",marginBottom:"30px"}}),r.createElement(y.zx,{title:"Rate",clicked:function(){var e,n,l,o,t=null===Pn||void 0===Pn||null===(e=Pn.processModule)||void 0===e||null===(n=e.steps)||void 0===n||null===(l=n.find((function(e){return e.component_blueprints.filter((function(e){return e.selected_fields.filter((function(e){return"Ratings"===e.data_type_name})).length>0})).length>0})))||void 0===l||null===(o=l.component_blueprints.find((function(e){return e.selected_fields.filter((function(e){return"Ratings"===e.data_type_name})).length>0})).selected_fields)||void 0===o?void 0:o.find((function(e){return"Ratings"===e.data_type_name}));Ot&&(al(!0),(0,g.C0)({component_id:Gn.id,index:0,gropup:100,value:"".concat(document.getElementById("Comments").value,",").concat(Vo),procedure_step_blueprint_field_id:t.procedure_step_blueprint_field_id}).subscribe({next:function(){(0,g.zK)(Gn.id,"Closed").subscribe({next:function(e){(0,Ee.DV)(Ot,{ratings:Vo,comments:document.getElementById("Comments").value,component_id:Gn.id}).pipe((0,v.P)()).subscribe({next:function(e){al(!1),Wo(!1),f.h.dispatch((0,_.q4)((0,a.Z)((0,a.Z)({},Pn.processModule),{},{showDetail:!1}))),Qn((0,a.Z)((0,a.Z)({},Gn),{},{status:"Closed"}))},error:function(e){al(!1),Wo(!1),f.h.dispatch((0,_.q4)((0,a.Z)((0,a.Z)({},Pn.processModule),{},{showDetail:!1}))),Ut()}})}})}}))}}))),fo&&r.createElement(Qe,{title:"",nav:fo,openNav:function(){window.clearInterval(Ko),Hn?pt("/"):_o(!1)}},r.createElement("div",{style:{color:"var(--app-color-gray-dark)",height:"inherit",width:"100%"}},r.createElement("div",null,r.createElement("div",{style:{textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center",padding:"0 20px 20px 20px"}},!(null!==Gn&&void 0!==Gn&&Gn.assigned_to)&&r.createElement(y.$j,{type:"BallTriangle",color:"black",height:30,width:"30px"}),r.createElement("p",{className:me.modalSubTitle},null!==Gn&&void 0!==Gn&&Gn.assigned_to?"Your transaction has been assigned to:":"Waiting for ".concat(null!==(yn=null===Gn||void 0===Gn?void 0:Gn.title)&&void 0!==yn?yn:"transaction"," to be assigned")),null!==Gn&&void 0!==Gn&&Gn.assigned_to||"Unassigned"!==(null===Gn||void 0===Gn?void 0:Gn.status)?(null===Gn||void 0===Gn?void 0:Gn.assigned_to)&&r.createElement(Pe.Z,{photo:null===Gn||void 0===Gn||null===(hn=Gn.assigned_to)||void 0===hn?void 0:hn.photo,height:"150px",width:h.tq?"100%":"80%",firstName:"".concat(null===Gn||void 0===Gn||null===(gn=Gn.assigned_to)||void 0===gn?void 0:gn.first_name," ").concat(null===Gn||void 0===Gn||null===(bn=Gn.assigned_to)||void 0===bn?void 0:bn.last_name),email:null!==(xn=null===Gn||void 0===Gn||null===(En=Gn.assigned_to)||void 0===En?void 0:En.phone)&&void 0!==xn?xn:""}):r.createElement(Pe.Z,{noPhoto:!0,height:"150px",width:h.tq?"100%":"80%",firstName:"Unassigned",email:"Please close and select another provider"})),r.createElement("hr",{style:{borderTop:"0.5px solid #D2D2D2"}})),r.createElement("br",null),r.createElement(y.zx,{clicked:function(){window.clearInterval(Ko),_o(!1)},title:"Hide",style:{width:"100%"},loading:dl}))),vo&&r.createElement(y.U7,{isOpen:vo,hasCloseIcon:!0,onClose:function(){return Hn?pt("/"):co(!1)},backdropColor:!0,blured:!1,scrollable:!0,shadowedContainerStyle:{width:"100%",height:"auto"}},r.createElement("div",{style:{textAlign:"center",padding:"20px"}},r.createElement("p",{className:me.modalTitle},null===(Cn=Pn.processModule.module)||void 0===Cn?void 0:Cn.name),r.createElement("p",{className:me.modalSubTitle},null!==(wn=null===Pn||void 0===Pn||null===(Zn=Pn.processModule)||void 0===Zn||null===(Mn=Zn.module)||void 0===Mn||null===(Sn=Mn.options)||void 0===Sn?void 0:Sn.message)&&void 0!==wn?wn:"Transaction saved"))))))}))},59401:function(e,n,l){l.d(n,{sM:function(){return r}});var o=l(29439),t=l(1413),i=l(92957),d="SET_SELECTED_COMPONENT",a=(0,i.Z)((function(e,n){var l=n.action,o=n.value;return l===d?(0,t.Z)((0,t.Z)({},e),{},{selectedComponent:o}):(0,t.Z)({},e)}),{selectedComponent:[]}),u=(0,o.Z)(a,2),r=(u[0],u[1])},143:function(){}}]);
//# sourceMappingURL=9811.75422891.chunk.js.map