"use strict";(self.webpackChunkflowhero=self.webpackChunkflowhero||[]).push([[681],{96681:function(e,t,l){l.r(t),l.d(t,{default:function(){return I}});var n=l(74165),a=l(15861),o=l(29439),i=l(50981),r=l.n(i),d=(l(34665),l(38826)),u=l(84658),s=l(2464),c=l(59141),v=l(67861),m=l(39518),p=l(23280),f=(l(18316),l(79492)),g=l.n(f),y=(l(82162),l(41771),l(88827)),h=l(88374),x=l(71982),E=l(57417),b=l(89293),C=l(96189),w=l(40694),S=l(67861),Z=l(66918),I=(0,m.$j)((function(e){var t=e.authReducer.sessionSettings;return{onBoardingCompleted:e.flowReducer.onBoardingCompleted,sessionSettings:t}}),(function(e){return{onSetOnBoardingVisible:function(t){return e((0,x.DJ)(t))},onSetOnBoardingComplete:function(t){return e((0,h.fj)(t))},onToggleModalVisibility:function(t){return e((0,x.$6)(t))}}}))((function(e){var t,l=(0,p.s0)(),i=((0,m.I0)(),(0,p.UO)().hash),f=(0,v.useRef)(),x=(0,v.useRef)(),I=(0,v.useState)(""),N=(0,o.Z)(I,2),k=N[0],T=N[1],D=(0,v.useState)(""),j=(0,o.Z)(D,2),A=j[0],Y=j[1],z=(0,v.useState)(""),B=(0,o.Z)(z,2),H=B[0],P=B[1],M=(0,v.useState)(""),_=(0,o.Z)(M,2),R=_[0],O=_[1],L=(0,v.useState)(""),V=(0,o.Z)(L,2),q=V[0],K=V[1],U=(0,v.useState)("Asia/Hong_Kong"),$=(0,o.Z)(U,2),F=$[0],J=$[1],W=(0,v.useState)(""),X=(0,o.Z)(W,2),G=X[0],Q=X[1],ee=(0,v.useState)(!1),te=(0,o.Z)(ee,2),le=te[0],ne=te[1],ae=(0,v.useState)(!1),oe=(0,o.Z)(ae,2),ie=oe[0],re=oe[1],de=(0,v.useState)(""),ue=(0,o.Z)(de,2),se=ue[0],ce=ue[1],ve=(0,v.useState)(!1),me=(0,o.Z)(ve,2),pe=(me[0],me[1],(0,v.useState)(!0)),fe=(0,o.Z)(pe,2),ge=fe[0],ye=fe[1],he=e.onToggleModalVisibility,xe=e.onSetOnBoardingComplete,Ee=e.authenticated;(0,v.useEffect)((function(){if(xe(!1),he({}),(null===i||void 0===i?void 0:i.length)>0){if(Ee)return ye(!1),void ce("You are currently logged in as another user. Please logout this user and accept the invitation again");var e=(0,E.s7)(i).subscribe({next:function(e){var t,l,n,a,o;re(!1),K(null!==(t=null!==(l=null===e||void 0===e||null===(n=e.user)||void 0===n?void 0:n.first_name)&&void 0!==l?l:"  "+(null===e||void 0===e||null===(a=e.user)||void 0===a?void 0:a.last_name))&&void 0!==t?t:" "),T(null===e||void 0===e?void 0:e.email),O(null!==(o=null===e||void 0===e?void 0:e.id)&&void 0!==o?o:"")},error:function(e){K("Error"),ye(!1),ce("Not a valid invitation, could have expired or incorrect. Please contact your admin")}});return function(){(0,b.zK)(e)}}}),[i]);var be=(0,v.useCallback)((function(e){var t,o,i;if(e.preventDefault(),e.stopPropagation(),f.current.validateAll(),0===(null===x||void 0===x||null===(t=x.current)||void 0===t||null===(o=t.context)||void 0===o||null===(i=o._errors)||void 0===i?void 0:i.length)){re(!0);var d={email:k,password:G,username:H,invitation_id:R,timezone:F,phone:A,validity:"".concat(r()().add(3,"days").format("YYYY-MM-DD HH:mm:ss"))};(0,E.f0)(d).subscribe({next:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:re(!1),ce({success:"You have successfully registered your account. You may now use your credentials in the login page. Thank you"}),y.h.dispatch((0,h.Xc)({noTimeout:!0,show:!0,message:"You have successfully registered your account. Close this message and enter your credentials when the login page appears",color:"var(--app-color-blue)",spinner:!1,bottom:!0,action:function(){(0,E.iC)(),l("/login")}}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),error:function(e){var t,l,n,a,o,i,r,d,u,s,c,v,m,p,f,g,y;if((null===e||void 0===e||null===(t=e.data)||void 0===t||null===(l=t.errors)||void 0===l||null===(n=l.email)||void 0===n?void 0:n.length)>0)ce(null===e||void 0===e||null===(g=e.data)||void 0===g||null===(y=g.errors)||void 0===y?void 0:y.email[0]);else if((null===e||void 0===e||null===(a=e.data)||void 0===a||null===(o=a.errors)||void 0===o||null===(i=o.username)||void 0===i?void 0:i.length)>0){var h,x;ce(null===e||void 0===e||null===(h=e.data)||void 0===h||null===(x=h.errors)||void 0===x?void 0:x.username[0])}else if((null===e||void 0===e||null===(r=e.data)||void 0===r||null===(d=r.errors)||void 0===d||null===(u=d.password)||void 0===u?void 0:u.length)>0){var E,b;ce(null===e||void 0===e||null===(E=e.data)||void 0===E||null===(b=E.errors)||void 0===b?void 0:b.password[0])}else if((null===e||void 0===e||null===(s=e.data)||void 0===s||null===(c=s.errors)||void 0===c||null===(v=c.timezone)||void 0===v?void 0:v.length)>0){var C,w;ce(null===e||void 0===e||null===(C=e.data)||void 0===C||null===(w=C.errors)||void 0===w?void 0:w.timezone[0])}else if((null===e||void 0===e||null===(m=e.data)||void 0===m||null===(p=m.errors)||void 0===p||null===(f=p.invitation_id)||void 0===f?void 0:f.length)>0){var S,Z;ce(null===e||void 0===e||null===(S=e.data)||void 0===S||null===(Z=S.errors)||void 0===Z?void 0:Z.invitation_id[0])}else ce("InvitationAccepted");re(!1)},complete:function(){}})}else re(!1)}),[k,G,R,F]),Ce=(0,s.Z)({"@global":{".MuiOutlinedInput-root":{"& fieldset":{borderColor:"var(--app-color-gray-lighter)"},"&:hover fieldset":{borderColor:"var(--app-color-gray-lighter)!important"},"&.Mui-focused fieldset":{borderColor:"var(--app-color-gray-lighter)!important"}}}})((function(){return null}));return S.createElement("div",{className:"main-container",style:{position:"relative",backgroundColor:"white",display:""===q?"none":"flex",flex:1,width:"100%",height:"100vh",justifyContent:"space-evenly",alignItems:"stretch",overflowY:"auto"}},S.createElement("div",{className:"first-container"},S.createElement("div",{style:{display:"flex",width:"100%",flexDirection:"column",justifyContent:"flex-start",alignItems:"center"}},ge?S.createElement("div",{style:{alignSelf:"flex-start",display:"flex",flexDirection:"column",justifyContent:"space-evenly",alignItems:"center"}},S.createElement("div",{style:{alignSelf:"flex-start",display:"flex",flex:0,flexDirection:"column",justifyContent:"space-evenly",alignItems:"center"}},S.createElement("h1",{style:{padding:0,color:"#4A4A4A",fontSize:"28px",fontWeight:500,letterSpacing:0,lineHeight:"40px"}},"Superadmin"===q?"The request to create your company/or user account has been approved by ".concat(b.iC):"You've been invited by ","Superadmin"!==q&&S.createElement("span",null,S.createElement("i",null,q)," to ".concat(b.iC)))),"Superadmin"===q&&S.createElement("div",{style:{display:"flex",width:"100%",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",margin:"30px 0 0 0 "}},S.createElement("p",{style:{fontFamily:"var(--app-text-main-font)",fontSize:"1em",lineHeight:"1.5em",color:"var(--app-color-gray-light)"}},"Please provide the details below to finalize the company")),S.createElement("div",{style:{paddingTop:"30px",alignSelf:"flex-start"}},S.createElement(g(),{ref:f},S.createElement("p",{className:"labelTextStyle"},"Account Email:"),S.createElement(c.Z,{id:"my-input",type:"text",variant:"outlined",name:"name",className:"input-style",placeholder:"Company Email",value:k,onChange:function(e){var t=e.target.value;T(t)}}),null!==se&&void 0!==se&&se.email?S.createElement("div",{className:"form-group"},S.createElement("div",{style:{color:"#721c24",backgroundColor:"#f8d7da",borderColor:"#f5c6cb"}},null===se||void 0===se?void 0:se.email)):null,S.createElement("br",null),S.createElement("br",null),S.createElement(c.Z,{id:"my-input",type:"text",variant:"outlined",name:"username",className:"input-style",placeholder:"Desired Username",value:H,onChange:function(e){P(e.target.value)}}),null!==se&&void 0!==se&&se.username?S.createElement("div",{className:"form-group"},S.createElement("div",{style:{color:"#721c24",backgroundColor:"#f8d7da",borderColor:"#f5c6cb"}},null===se||void 0===se?void 0:se.username)):null,S.createElement("br",null),S.createElement("br",null),S.createElement(c.Z,{id:"my-input",type:"text",variant:"outlined",name:"mobile",className:"input-style",placeholder:"Mobile Number",value:A,onChange:function(e){Y(e.target.value)}}),S.createElement("br",null),S.createElement("br",null),S.createElement("p",{className:"labelTextStyle"},"Account Password:"),S.createElement("label",{style:{display:"inline-flex",alignItems:"center"}},S.createElement(Ce,null),S.createElement(d.Z,{id:"my-input",className:"input-style",type:le?"text":"password",name:"password",placeholder:"Password",value:G,onChange:function(e){var t=e.target.value;Q(t)},endAdornment:S.createElement(u.Z,{className:"showHideButton",onClick:function(){return ne(!le)},position:"end"},le?"Hide":"Show")})),null!==se&&void 0!==se&&se.password?S.createElement("div",{className:"form-group"},S.createElement("div",{className:"alert alert-danger",role:"alert"},null===se||void 0===se?void 0:se.password)):null,S.createElement("br",null),S.createElement("br",null),S.createElement("p",{className:"labelTextStyle"},"Timezone:"),S.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"stretch",width:"100%"}},S.createElement(C.Ld,{items:b.LY,defaultSelectedItem:Z.find(Z.propEq("value",F))(b.LY),triggerType:"chevron",placeholder:"Select timezone...",onChange:function(e){J(null===e||void 0===e?void 0:e.value)}})),S.createElement("br",null),S.createElement("br",null),S.createElement("div",{style:{display:"flex",width:"100%",flex:0,justifyContent:"flex-start",alignItems:"center",maxHeight:"30px"}},S.createElement(w.Z,{disabled:ie,loading:ie,clicked:be,title:"Super"===q?"Create Company":"Accept Invitation",style:{margin:"0",display:(null===H||void 0===H?void 0:H.length)>6?"":"none"}})),se&&S.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-evenly",alignItems:"center",fontSize:"1em",width:"90%",marginTop:"30px",borderRadius:"3px",color:"#721c24",backgroundColor:"#f8d7da",borderColor:"#f5c6cb",padding:"2px"},role:"alert"},"InvitationAccepted"===se?S.createElement("div",null,"Already accepted the invitation, click ",S.createElement("a",{href:"/"},"here")," to login."):se))),S.createElement("div",{style:{display:"flex",width:"100%",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",margin:"30px 0 0 0 "}},S.createElement("p",null,"".concat("Superadmin"===q?"By creating the company":"By accepting",", you agree with ").concat(b.iC)," ",S.createElement("a",{href:"https://www.flowhero.app/#/legal"},"Terms and Conditions")," and ",S.createElement("a",{href:"https://www.flowhero.app/#/legal"},"Privacy Policy")))):S.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-evenly",alignItems:"center",fontSize:"1em",width:"90%",marginTop:"30px",borderRadius:"3px",color:null!==se&&void 0!==se&&se.success?"gray":"#721c24",backgroundColor:null!==se&&void 0!==se&&se.success?"transparent":"#f8d7da",borderColor:"#f5c6cb",padding:"2px"},role:"alert"},null!==(t=null===se||void 0===se?void 0:se.success)&&void 0!==t?t:se))))}))}}]);
//# sourceMappingURL=681.67f3312c.chunk.js.map