"use strict";(self.webpackChunkflowhero=self.webpackChunkflowhero||[]).push([[6681],{96681:function(e,t,l){l.r(t),l.d(t,{default:function(){return I}});var n=l(29439),i=l(50981),a=l.n(i),o=(l(34665),l(38826)),r=l(84658),d=l(2464),s=l(59141),c=l(67861),u=l(39518),p=l(23280),m=(l(18316),l(79492)),v=l.n(m),f=l(85692),g=l(88827),y=l(88374),x=l(71982),h=l(57417),E=l(89293),b=l(14170),C=l(40694),w=l(67861),S=l(66918),I=(0,u.$j)((function(e){var t=e.authReducer.sessionSettings;return{onBoardingCompleted:e.flowReducer.onBoardingCompleted,sessionSettings:t}}),(function(e){return{onSetOnBoardingVisible:function(t){return e((0,x.DJ)(t))},onSetOnBoardingComplete:function(t){return e((0,y.fj)(t))},onToggleModalVisibility:function(t){return e((0,x.$6)(t))}}}))((function(e){var t,l=(0,p.s0)(),i=((0,u.I0)(),(0,p.UO)().hash),m=(0,c.useRef)(),x=((0,c.useRef)(),(0,c.useState)("")),I=(0,n.Z)(x,2),Z=I[0],k=I[1],A=(0,c.useState)(""),D=(0,n.Z)(A,2),N=D[0],j=D[1],z=(0,c.useState)(""),F=(0,n.Z)(z,2),H=F[0],T=F[1],B=(0,c.useState)(""),P=(0,n.Z)(B,2),Y=P[0],M=P[1],O=(0,c.useState)(""),R=(0,n.Z)(O,2),_=R[0],L=R[1],V=(0,c.useState)("Asia/Hong_Kong"),q=(0,n.Z)(V,2),K=q[0],U=q[1],W=(0,c.useState)(""),$=(0,n.Z)(W,2),J=$[0],X=$[1],G=(0,c.useState)(!1),Q=(0,n.Z)(G,2),ee=Q[0],te=Q[1],le=(0,c.useState)(!1),ne=(0,n.Z)(le,2),ie=ne[0],ae=ne[1],oe=(0,c.useState)(""),re=(0,n.Z)(oe,2),de=re[0],se=re[1],ce=(0,c.useState)(!1),ue=(0,n.Z)(ce,2),pe=ue[0],me=ue[1],ve=(0,c.useState)(!0),fe=(0,n.Z)(ve,2),ge=fe[0],ye=fe[1],xe=e.onToggleModalVisibility,he=e.onSetOnBoardingComplete,Ee=e.authenticated;(0,c.useEffect)((function(){if(he(!1),xe({}),(null===i||void 0===i?void 0:i.length)>0){if(Ee)return ye(!1),void se("You are currently logged in as another user. Please logout this user and accept the invitation again");var e=(0,h.s7)(i).subscribe({next:function(e){var t,l,n,i,a;ae(!1),L(null!==(t=null!==(l=null===e||void 0===e||null===(n=e.user)||void 0===n?void 0:n.first_name)&&void 0!==l?l:"  "+(null===e||void 0===e||null===(i=e.user)||void 0===i?void 0:i.last_name))&&void 0!==t?t:" "),k(null===e||void 0===e?void 0:e.email),M(null!==(a=null===e||void 0===e?void 0:e.id)&&void 0!==a?a:"")},error:function(e){L("Error"),ye(!1),se("Not a valid invitation, could have expired or incorrect. Please contact your admin")}});return function(){(0,E.zK)(e)}}}),[i]);var be=(0,c.useCallback)((function(e){e.preventDefault(),e.stopPropagation(),m.current.validateAll(),ae(!0);var t={email:Z,password:J,username:H,invitation_id:Y,timezone:K,phone:N,validity:"".concat(a()().add(30,"days").format("YYYY-MM-DD HH:mm:ss"))};(0,h.f0)(t).subscribe({next:function(){ae(!1),g.h.dispatch((0,y.Xc)({noTimeout:!0,show:!0,message:"You have successfully registered your account. Close this message and enter your credentials when the login page appears",color:"var(--app-color-blue)",spinner:!1,bottom:!0,action:function(){(0,h.iC)(),l("/login")}}))},error:function(e){var t,l,n,i,a,o,r,d,s,c,u,p,m,v,f,g,y;if((null===e||void 0===e||null===(t=e.data)||void 0===t||null===(l=t.errors)||void 0===l||null===(n=l.email)||void 0===n?void 0:n.length)>0)se(null===e||void 0===e||null===(g=e.data)||void 0===g||null===(y=g.errors)||void 0===y?void 0:y.email[0]);else if((null===e||void 0===e||null===(i=e.data)||void 0===i||null===(a=i.errors)||void 0===a||null===(o=a.username)||void 0===o?void 0:o.length)>0){var x,h;se(null===e||void 0===e||null===(x=e.data)||void 0===x||null===(h=x.errors)||void 0===h?void 0:h.username[0])}else if((null===e||void 0===e||null===(r=e.data)||void 0===r||null===(d=r.errors)||void 0===d||null===(s=d.password)||void 0===s?void 0:s.length)>0){var E,b;se(null===e||void 0===e||null===(E=e.data)||void 0===E||null===(b=E.errors)||void 0===b?void 0:b.password[0])}else if((null===e||void 0===e||null===(c=e.data)||void 0===c||null===(u=c.errors)||void 0===u||null===(p=u.timezone)||void 0===p?void 0:p.length)>0){var C,w;se(null===e||void 0===e||null===(C=e.data)||void 0===C||null===(w=C.errors)||void 0===w?void 0:w.timezone[0])}else if((null===e||void 0===e||null===(m=e.data)||void 0===m||null===(v=m.errors)||void 0===v||null===(f=v.invitation_id)||void 0===f?void 0:f.length)>0){var S,I;se(null===e||void 0===e||null===(S=e.data)||void 0===S||null===(I=S.errors)||void 0===I?void 0:I.invitation_id[0])}else se("InvitationAccepted");ae(!1)},complete:function(){}})}),[Z,J,Y,K,H]),Ce=function(){e.onSetOnBoardingVisible(!1),e.onSetOnBoardingComplete(!0),l("/help-center")},we=(0,d.Z)({"@global":{".MuiOutlinedInput-root":{"& fieldset":{borderColor:"var(--app-color-gray-lighter)"},"&:hover fieldset":{borderColor:"var(--app-color-gray-lighter)!important"},"&.Mui-focused fieldset":{borderColor:"var(--app-color-gray-lighter)!important"}}}})((function(){return null}));return w.createElement("div",{className:"main-container",style:{position:"relative",backgroundColor:"white",display:""===_?"none":"flex",flex:1,width:"100%",height:"100vh",justifyContent:"space-evenly",alignItems:"stretch",overflowY:"auto"}},w.createElement("div",{className:"first-container"},w.createElement("div",{style:{display:"flex",width:"100%",flexDirection:"column",justifyContent:"flex-start",alignItems:"center"}},ge?w.createElement("div",{style:{alignSelf:"flex-start",display:"flex",flexDirection:"column",justifyContent:"space-evenly",alignItems:"center"}},w.createElement("div",{style:{alignSelf:"flex-start",display:"flex",flex:0,flexDirection:"column",justifyContent:"space-evenly",alignItems:"center"}},w.createElement("h1",{style:{padding:0,color:"#4A4A4A",fontSize:"28px",fontWeight:500,letterSpacing:0,lineHeight:"40px"}},"Superadmin"===_?"The request to create your company/or user account has been approved by ".concat(E.iC):"You've been invited by ","Superadmin"!==_&&w.createElement("span",null,w.createElement("i",null,_)," to ".concat(E.iC)))),"Superadmin"===_&&w.createElement("div",{style:{display:"flex",width:"100%",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",margin:"30px 0 0 0 "}},w.createElement("p",{style:{fontFamily:"var(--app-text-main-font)",fontSize:"1em",lineHeight:"1.5em",color:"var(--app-color-gray-light)"}},"Please provide the details below to finalize the company")),w.createElement("div",{style:{paddingTop:"30px",alignSelf:"flex-start"}},w.createElement(v(),{ref:m},w.createElement("p",{className:"labelTextStyle"},"Account Email:"),w.createElement(s.Z,{id:"my-input",type:"text",variant:"outlined",name:"name",className:"input-style",placeholder:"Company Email",value:Z,onChange:function(e){var t=e.target.value;k(t)}}),null!==de&&void 0!==de&&de.email?w.createElement("div",{className:"form-group"},w.createElement("div",{style:{color:"#721c24",backgroundColor:"#f8d7da",borderColor:"#f5c6cb"}},null===de||void 0===de?void 0:de.email)):null,w.createElement("br",null),w.createElement("br",null),w.createElement(s.Z,{id:"my-input",type:"text",variant:"outlined",name:"username",className:"input-style",placeholder:"Desired Username",value:H,onChange:function(e){T(e.target.value)}}),null!==de&&void 0!==de&&de.username?w.createElement("div",{className:"form-group"},w.createElement("div",{style:{color:"#721c24",backgroundColor:"#f8d7da",borderColor:"#f5c6cb"}},null===de||void 0===de?void 0:de.username)):null,w.createElement("br",null),w.createElement("br",null),w.createElement(s.Z,{id:"my-input",type:"text",variant:"outlined",name:"mobile",className:"input-style",placeholder:"Mobile Number",value:N,onChange:function(e){j(e.target.value)}}),w.createElement("br",null),w.createElement("br",null),w.createElement("p",{className:"labelTextStyle"},"Account Password:"),w.createElement("label",{style:{display:"inline-flex",alignItems:"center"}},w.createElement(we,null),w.createElement(o.Z,{id:"my-input",className:"input-style",type:ee?"text":"password",name:"password",placeholder:"Password",value:J,onChange:function(e){var t=e.target.value;X(t)},endAdornment:w.createElement(r.Z,{className:"showHideButton",onClick:function(){return te(!ee)},position:"end"},ee?"Hide":"Show")})),null!==de&&void 0!==de&&de.password?w.createElement("div",{className:"form-group"},w.createElement("div",{className:"alert alert-danger",role:"alert"},null===de||void 0===de?void 0:de.password)):null,w.createElement("br",null),w.createElement("br",null),w.createElement("p",{className:"labelTextStyle"},"Timezone:"),w.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"stretch",width:"100%"}},w.createElement(b.Ld,{items:E.LY,defaultSelectedItem:S.find(S.propEq("value",K))(E.LY),triggerType:"chevron",placeholder:"Select timezone...",onChange:function(e){U(null===e||void 0===e?void 0:e.value)}})),w.createElement("br",null),w.createElement("br",null),w.createElement("div",{style:{display:"flex",width:"100%",flex:0,justifyContent:"flex-start",alignItems:"center",maxHeight:"30px"}},w.createElement(C.Z,{disabled:ie,loading:ie,clicked:be,title:"Super"===_?"Create Company":"Accept Invitation",style:{margin:"0",display:(null===H||void 0===H?void 0:H.length)>6?"":"none"}})),de&&w.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-evenly",alignItems:"center",fontSize:"1em",width:"90%",marginTop:"30px",borderRadius:"3px",color:"#721c24",backgroundColor:"#f8d7da",borderColor:"#f5c6cb",padding:"2px"},role:"alert"},"InvitationAccepted"===de?w.createElement("div",null,"Already accepted the invitation, click ",w.createElement("a",{href:"/"},"here")," to login."):de))),w.createElement("div",{style:{display:"flex",width:"100%",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",margin:"30px 0 0 0 "}},w.createElement("p",null,"".concat("Superadmin"===_?"By creating the company":"By accepting",", you agree with ").concat(E.iC)," ",w.createElement("a",{href:"https://www.flowhero.app/#/legal"},"Terms and Conditions")," and ",w.createElement("a",{href:"https://www.flowhero.app/#/legal"},"Privacy Policy")))):w.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-evenly",alignItems:"center",fontSize:"1em",width:"90%",marginTop:"30px",borderRadius:"3px",color:null!==de&&void 0!==de&&de.success?"gray":"#721c24",backgroundColor:null!==de&&void 0!==de&&de.success?"transparent":"#f8d7da",borderColor:"#f5c6cb",padding:"2px"},role:"alert"},null!==(t=null===de||void 0===de?void 0:de.success)&&void 0!==t?t:de))),w.createElement("div",{className:"second-container",onClick:function(e){e.preventDefault(),e.stopPropagation(),me(!1)}}),pe&&w.createElement("div",{style:{width:"300px",flex:1,flexWrap:"wrap",padding:"12px 30px 0px 10px",zIndex:101,position:"absolute",bottom:"0px",right:"50px",display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center",borderRadius:"8px 8px 0 0",backgroundColor:" #FFFFFF",boxShadow:"0 0 40px 0 rgba(0, 0, 0, 0.1)"}},w.createElement("div",{style:{display:"flex",flex:1,flexDirection:"row",justifyContent:"space-evenly",alignItems:"center",height:"54px",width:"149px"}},w.createElement("img",{src:f.Py,style:{height:"24px",width:"24px"},alt:"need-help-icon"}),w.createElement("p",{style:{color:" #4A4A4A",fontFamily:" var(--app-text-main-font)",fontSize:"16px",lineHeight:"22px"}},"Need help?")),w.createElement("div",{style:{display:" flex",flex:1,flexDirection:"row",justifyContent:"space-evenly",alignItems:"center"}},w.createElement("p",{style:{textAlign:"left",color:" #4A4A4A",fontFamily:" var(--app-text-main-font)",fontSize:"16px",lineHeight:"24px"}},"Before requesting to speak to one of our colleagues, we encourage you to explore our ",w.createElement("span",{onClick:Ce,style:{textDecoration:"underline",cursor:"pointer"}},"Help Center")," to find your solution.")),w.createElement("div",{style:{margin:"20px 10px",display:"flex",width:"100%",flex:0,justifyContent:"center",alignItems:"center",maxHeight:"30px"}},w.createElement(C.Z,{disabled:ie,loading:ie,clicked:Ce,title:"Help Center",style:{margin:"10px",width:"100%"}})),w.createElement("div",{style:{margin:"20px 10px",display:"flex",width:"100%",flex:0,justifyContent:"center",alignItems:"center",maxHeight:"30px"}},w.createElement(C.Z,{disabled:ie,loading:ie,clicked:function(){alert("Live Chat")},title:"Live Chat",style:{margin:"10px",width:"100%",backgroundColor:"#FFFFFF"},titleStyle:{color:"var(--app-color-gray-light)",fontSize:"16px"}}))))}))}}]);
//# sourceMappingURL=6681.4fee38c9.chunk.js.map