(self.webpackChunkflowhero=self.webpackChunkflowhero||[]).push([[378],{32422:function(e,n,t){"use strict";t.d(n,{rr:function(){return Ve},ZP:function(){return We}});var o=t(4942),l=t(1413),i=t(93433),d=t(29439),a=t(67861),u={processStepHost:"ModuleStep_processStepHost__fdU12",listContainer:"ModuleStep_listContainer__+T0XF",detailContainer:"ModuleStep_detailContainer__EFIwE",centeredCardMargin:"ModuleStep_centeredCardMargin__eYosE",centeredSpinner:"ModuleStep_centeredSpinner__sOFdo",emptyElementsSection:"ModuleStep_emptyElementsSection__ehjx-",stepCounter:"ModuleStep_stepCounter__mD22I",clockIcon:"ModuleStep_clockIcon__TY0er",stepTitle:"ModuleStep_stepTitle__f9SxJ",stepTitleSmaller:"ModuleStep_stepTitleSmaller__Ng9ym",stepGuidance:"ModuleStep_stepGuidance__aWqq0",stepGuidanceSmaller:"ModuleStep_stepGuidanceSmaller__IKIF+",inputContainer:"ModuleStep_inputContainer__s9qZ2",selectInput:"ModuleStep_selectInput__LcokN",multiselectWithSearch:"ModuleStep_multiselectWithSearch__qMOzq",smoMultiselectParent:"ModuleStep_smoMultiselectParent__Pweb-",selectMenuItem:"ModuleStep_selectMenuItem__i73KN",inputClassName:"ModuleStep_inputClassName__VI3pY",toggleMenuInputButton:"ModuleStep_toggleMenuInputButton__gcFHY",goToNextStep:"ModuleStep_goToNextStep__ePl+k",nextStepsContainer:"ModuleStep_nextStepsContainer__zcpA0",nextStepImageContainer:"ModuleStep_nextStepImageContainer__55MGd",nextStepWrapper:"ModuleStep_nextStepWrapper__ZtiNA",tasksTableHost:"ModuleStep_tasksTableHost__AZ6rT",headerContainer:"ModuleStep_headerContainer__4kozo",content:"ModuleStep_content__ClnRX","react-grid-layout":"ModuleStep_react-grid-layout__21OCf",layoutJSON:"ModuleStep_layoutJSON__tFPI9",columns:"ModuleStep_columns__dPw3m","react-grid-item":"ModuleStep_react-grid-item__tFcr7","react-grid-placeholder":"ModuleStep_react-grid-placeholder__canbf",resizing:"ModuleStep_resizing__xUUDG",static:"ModuleStep_static__IPrAy",text:"ModuleStep_text__MzRSh",minMax:"ModuleStep_minMax__SkZxD",add:"ModuleStep_add__aOZYV","react-grid-dragHandleExample":"ModuleStep_react-grid-dragHandleExample__iEu5W",cssTransforms:"ModuleStep_cssTransforms__aN9IT","react-draggable-dragging":"ModuleStep_react-draggable-dragging__epzS0","react-resizable-handle":"ModuleStep_react-resizable-handle__XaFka",singleButton:"ModuleStep_singleButton__+BXaC",menuRightButtons:"ModuleStep_menuRightButtons__r-OPw",menuButtons:"ModuleStep_menuButtons__TsY6r",menuAccordionButtons:"ModuleStep_menuAccordionButtons__4QNWj",detailLabel:"ModuleStep_detailLabel__hVTU1",subLabel:"ModuleStep_subLabel__6PFJJ",modalHeaderTitle:"ModuleStep_modalHeaderTitle__hDlRr",p:"ModuleStep_p__njhI7",accordionContainer:"ModuleStep_accordionContainer__oW7nH",itemsTable:"ModuleStep_itemsTable__ttZKV",sharesTable:"ModuleStep_sharesTable__Gy1CG",peoplePositionsSelect:"ModuleStep_peoplePositionsSelect__jXRrK",peoplePositionsSelectInput:"ModuleStep_peoplePositionsSelectInput__NSg8e",peoplePositionsSelectMenuOverlay:"ModuleStep_peoplePositionsSelectMenuOverlay__S0xqm",peoplePositionsSelectMenuOverlayItem:"ModuleStep_peoplePositionsSelectMenuOverlayItem__Vuo-D",deleteText:"ModuleStep_deleteText__XIVyR",deleteButton:"ModuleStep_deleteButton__PhwaV",searchContainer:"ModuleStep_searchContainer__s1Y37",searchInput:"ModuleStep_searchInput__XukKm",emailInput:"ModuleStep_emailInput__sTwU9",actionsContainer:"ModuleStep_actionsContainer__jWMeW",detailButton:"ModuleStep_detailButton__w7F3v",detailButtonTitleContainer:"ModuleStep_detailButtonTitleContainer__8ffTu",fetchingLatestP:"ModuleStep_fetchingLatestP__gnf89",modalTitle:"ModuleStep_modalTitle__T4SaB",modalSubTitle:"ModuleStep_modalSubTitle__SIFKS",dropdownSelectComponent:"ModuleStep_dropdownSelectComponent__L66Sz",dropdownSelectComponentL:"ModuleStep_dropdownSelectComponentL__wOEsz",dropdownSelectOperation:"ModuleStep_dropdownSelectOperation__DEwuW",dropdownSelectReport:"ModuleStep_dropdownSelectReport__g2+2D",cardTitle:"ModuleStep_cardTitle__h24lD",customButton:"ModuleStep_customButton__sVkp5",fieldTypeInput:"ModuleStep_fieldTypeInput__q1+bw",fieldRowContainer:"ModuleStep_fieldRowContainer__5hIbd",templateInformation:"ModuleStep_templateInformation__UjdWL",emulatedFlexGap:"ModuleStep_emulatedFlexGap__yE15Q","mobile-navbar":"ModuleStep_mobile-navbar__P0z8E","mobile-navbar-close":"ModuleStep_mobile-navbar-close__5fZ-y","hamb-icon":"ModuleStep_hamb-icon__lSxYR","open-nav":"ModuleStep_open-nav__39a-n",description:"ModuleStep_description__GUBFo",tableHostSimple:"ModuleStep_tableHostSimple__VmM5x",imageCard:"ModuleStep_imageCard__HGrB9"},r=t(41771),s=t(71302),c=t(39518),v=t(96189),p=t(6073),m=t(93389),f=t(66284),_=t(34710),y=t(88827),h=t(88374),g=t(11577),b=t(10103),M=t(88550),Z=t(49119),E="StaticAccordionModule_section__E+rSn",S="StaticAccordionModule_accordionContainer__6xeqD",C="StaticAccordionModule_active__39RQh",w="StaticAccordionModule_icon__Uc3dg",x="StaticAccordionModule_content__-a1q1",k="StaticAccordionModule_fieldTypeInput__78Qbk",I="StaticAccordionModule_fieldTypeTextarea__RF3xI",N="StaticAccordionModule_emulatedFlexGap__F5FQC",P="StaticAccordionModule_cardTitle__lJnSQ",D="StaticAccordionModule_filtersContainer__oSB5G",T="StaticAccordionModule_actionsContainer__WXbu6",q=t(79633),A=(t(20777),t(73500)),U=t(47144),O=t.n(U),R=t(27436),B=(t(68140),t(12308)),F=t(35606),L=t(13397),j=t(98032),Y=t(50981),z=t.n(Y),V=t(43077),W=t(35307),X=t(12075),G=t(52902),H=(0,a.memo)((function(e){var n,t,i=e.component,d=e.components,u=e.companyData,r=e.allComponents,s=e.companyUsersArray,p=e.selectedComponent,m=(0,c.v9)((function(e){return e.flowReducer})),f=m.allModules,_=m.allTasks,y=m.companyPositionsArray,h=(null===i||void 0===i||null===(n=i.selected_fields)||void 0===n?void 0:n.length)>0&&F.Z([L.Z(j.Z("index"))])(null===i||void 0===i||null===(t=i.selected_fields)||void 0===t?void 0:t.filter((function(e){return!0!==e.value||void 0!==(null===e||void 0===e?void 0:e.value)}))).map((function(e,n){var t,c,m,h,g,b,M=null===(t=p.component_fields.find((function(n){return n.field_name===(null===e||void 0===e?void 0:e.field_name)&&n.data_type_name===(null===e||void 0===e?void 0:e.data_type_name)})))||void 0===t?void 0:t.value;if((null===e||void 0===e||null===(c=e.options)||void 0===c||null===(m=c.list)||void 0===m?void 0:m.length)>0&&(null===e||void 0===e||null===(h=e.options)||void 0===h||null===(g=h.component_id)||void 0===g?void 0:g.length)>0&&("Step List"===(null===e||void 0===e?void 0:e.data_type_name)||"Component List"===(null===e||void 0===e?void 0:e.data_type_name)))return a.createElement("div",{key:n,style:{width:"100%"}},a.createElement(B.default,{columns:e.options.list,list:(de=e.options,d.filter((function(e){return e.id===de.component_id})).map((function(e){var n={};return de.list.map((function(t){n=(0,l.Z)((0,l.Z)({},n),{},(0,o.Z)({},t,e.selected_fields.find((function(e){return e.field_name===t})).value))})),n})))}));if("output"===e.data_type&&"Formula"!==e.data_type_name&&"Record"!==e.data_type_name&&"Filters"!==e.data_type_name)return null;if("Info"===e.data_type_name)return null;if("URL"===e.data_type_name)return null;if("Ratings"===e.data_type_name)return null;if("Rewards"===e.data_type_name)return null;if("Map"===e.data_type_name)return null;if("Lookup"===e.data_type_name)return null;if("Calendar"===e.data_type_name)return null;if("Summary"===e.data_type_name)return null;if("ID"===e.data_type_name)return a.createElement(q.Z,{key:n,width:A.tq?"100%":"50%",fieldLabel:e.field_name,style:{border:"0"},fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:!1,error:e.errors,customIconBgColor:"white"},a.createElement("input",{pointerEvents:"none",type:e.data_type,onChange:function(){},autoComplete:"none",value:null!==(b=M)&&void 0!==b?b:null===e||void 0===e?void 0:e.value,className:k,name:e.field_name}));var Z,E,C,w,x,N,P,U,O,R,F,L,j,H,Q,J,K,$,ee,ne,te,oe,le,ie,de,ae=null===i||void 0===i||null===(Z=i.selected_fields)||void 0===Z?void 0:Z.find((function(e){return"Info"===e.data_type_name}));if(ae){var ue,re,se=r.find((function(e){return(null===e||void 0===e?void 0:e.component_fields.filter((function(e){return e.component_blueprint_id===ae.options.component_id&&e.value===M})).length)>0}));if(se)return null===ae||void 0===ae||null===(ue=ae.options)||void 0===ue||null===(re=ue.list)||void 0===re?void 0:re.map((function(t,o){var l,i,d=null!==(l=null===(i=se.component_fields.find((function(e){return e.field_name===t})))||void 0===i?void 0:i.value)&&void 0!==l?l:"";return null!==d&&void 0!==d&&d.includes("jpg")||null!==d&&void 0!==d&&d.includes("jpeg")||null!==d&&void 0!==d&&d.includes("png")?a.createElement(q.Z,{width:A.tq?"100%":"50%",style:{border:"0"},key:n,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:!1,error:e.errors,customIconBgColor:"white"},a.createElement("div",{className:S,onClick:function(){return window.open(M,"_blank")}},a.createElement("img",{alt:"lg",onError:function(e){return e.target.src="https://i.quotev.com/b2gtjqawaaaa.jpg"},src:d,style:{width:"100%",height:"100%",cursor:"pointer"}}))):a.createElement(q.Z,{width:A.tq?"100%":"50%",key:o,style:{border:"0"},fieldLabel:t,fieldIcon:e.icon,isProcess:!0,visible:void 0!==(null===e||void 0===e?void 0:e.value)||e.visible,mandatory:!1,error:e.errors},d.length>55?a.createElement("textarea",{className:I,type:e.data_type,value:d,onFocus:function(){},autoComplete:"none",onChange:function(e){},disabled:!0,style:{backgroundColor:"rgba(234, 231, 231, 0.91)",height:"auto",padding:"10px"}}):a.createElement("input",{pointerEvents:"none",autoComplete:"none",value:d,disabled:!0,className:k,name:e.field_name}))}))}if("Pin"===e.data_type_name&&M){var ce,ve,pe,me,fe,_e,ye,he=JSON.parse(M);return a.createElement("div",{key:n,style:{display:"",width:"100%"}},a.createElement(V.Z,{mapkey:null===(ce=u.misc_info)||void 0===ce?void 0:ce.map,pins:null!==he&&void 0!==he&&he.realtime?null!==he&&void 0!==he&&null!==(ve=he.destination)&&void 0!==ve&&ve.address?[(0,l.Z)((0,l.Z)({},he.destination),{},{type:"destination"}),(0,l.Z)((0,l.Z)({},he.source),{},{type:"source"}),(0,l.Z)((0,l.Z)({},he.realtime),{},{type:"realtime"})]:[(0,l.Z)((0,l.Z)({},he.source),{},{type:"source"}),(0,l.Z)((0,l.Z)({},he.realtime),{},{type:"realtime"})]:null!==he&&void 0!==he&&null!==(pe=he.destination)&&void 0!==pe&&pe.address?[(0,l.Z)((0,l.Z)({},he.destination),{},{type:"destination"}),(0,l.Z)((0,l.Z)({},he.source),{},{type:"source"})]:[(0,l.Z)((0,l.Z)({},he.source),{},{type:"source"})]}),a.createElement("div",{key:n,className:D,style:{color:"var(--app-color-gray-dark)",height:"inherit",width:"100%",display:null!==e&&void 0!==e&&e.visible?"":"none"}},a.createElement("div",{className:T,style:{fontSize:"12px"}},null!==he&&void 0!==he&&null!==(me=he.destination)&&void 0!==me&&me.address?a.createElement("div",{style:{width:"100px"}},"From",":"):a.createElement(X.G,{icon:G.opg,style:{color:"green"}}),a.createElement("div",null,he.source.address)),(null===he||void 0===he||null===(fe=he.destination)||void 0===fe?void 0:fe.address)&&a.createElement("hr",{style:{borderTop:"0.5px solid #D2D2D2"}}),(null===he||void 0===he||null===(_e=he.destination)||void 0===_e?void 0:_e.address)&&a.createElement("div",{className:T,style:{fontSize:"12px"}},a.createElement("div",{style:{width:"100px"}},"To",":"),a.createElement("div",null,null===he||void 0===he||null===(ye=he.destination)||void 0===ye?void 0:ye.address))))}if("Action Button"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(E=e.options)||void 0===E||null===(C=E.action)||void 0===C?void 0:C.length)>0){var ge,be,Me,Ze=null===s||void 0===s?void 0:s.find((function(e){return e.id===M}));return a.createElement(q.Z,{width:A.tq?"100%":"50%",key:n,style:{border:"0"},isProcess:!0,fieldLabel:null!==(ge=e.options)&&void 0!==ge&&ge.notes?null===(be=e.options)||void 0===be?void 0:be.notes:e.field_name,visible:e.visible,mandatory:!1,error:e.errors},"user"===e.options.action&&a.createElement("input",{key:n,pointerEvents:"none",onChange:function(){},autoComplete:"none",value:Ze?"".concat(null===Ze||void 0===Ze?void 0:Ze.first_name," ").concat(null===Ze||void 0===Ze?void 0:Ze.last_name):null!==(Me=null===e||void 0===e?void 0:e.value)&&void 0!==Me?Me:"-",className:k,name:e.field_name}))}if("Link"===e.data_type_name)return a.createElement(q.Z,{width:A.tq?"100%":"50%",style:{border:"0"},key:n,fieldIcon:e.icon,isProcess:!0,visible:void 0!==(null===e||void 0===e?void 0:e.value)||e.visible,mandatory:!1,error:e.errors,customIconBgColor:"white"},null!==(O=M)&&void 0!==O&&O.includes("jpg")||null!==(R=M)&&void 0!==R&&R.includes("jpeg")||null!==(F=M)&&void 0!==F&&F.includes("png")||null!==e&&void 0!==e&&null!==(L=e.options)&&void 0!==L&&L.image?a.createElement("div",{className:S,onClick:function(){return window.open(M,"_blank")}},a.createElement("img",{alt:"lg",onError:function(e){return e.target.src="https://i.quotev.com/b2gtjqawaaaa.jpg"},src:null!==(j=M)&&void 0!==j?j:"https://i.quotev.com/b2gtjqawaaaa.jpg",style:{width:"100%",height:"100%",cursor:"pointer"}})):null!==(H=M)&&void 0!==H&&H.includes("pdf")?a.createElement("div",{className:S,onClick:function(){return window.open(M,"_blank")}},a.createElement("embed",{onClick:function(){return window.open(M,"_blank")},src:"".concat(M,"#toolbar=0&navpanes=0&scrollbar=0"),width:"400px",height:"500px"})):a.createElement("div",{style:{width:"inherit",textDecoration:"underline",textAlign:"center",cursor:"pointer"},onClick:function(){return window.open(M,"_blank")}},"Link"));if("Freehand"===e.data_type_name)return a.createElement(q.Z,{width:A.tq?"100%":"50%",style:{border:"0"},key:n,fieldIcon:e.icon,isProcess:!0,visible:void 0!==(null===e||void 0===e?void 0:e.value)||e.visible,mandatory:!1,error:e.errors,customIconBgColor:"white"},a.createElement("div",{className:S,onClick:function(){return window.open(M,"_blank")}},a.createElement("img",{alt:"lg",onError:function(e){return e.target.src="https://i.quotev.com/b2gtjqawaaaa.jpg"},src:null!==(Q=M)&&void 0!==Q?Q:"https://i.quotev.com/b2gtjqawaaaa.jpg",style:{width:"100%",height:"100%",cursor:"pointer"}})));if("Checkbox"===e.data_type_name)return a.createElement(q.Z,{width:A.tq?"100%":"50%",key:n,style:{border:"0"},fieldLabel:e.options.value,fieldIcon:e.icon,isProcess:!0,visible:void 0!==(null===e||void 0===e?void 0:e.value)||e.visible,mandatory:!1,error:e.errors,customIconBgColor:"white"},a.createElement("input",{pointerEvents:"none",onChange:function(){},autoComplete:"none",value:void 0===M?"":1==M?"Yes":"No",className:k,name:e.field_name}));if("YesNo"===e.data_type_name)return a.createElement(q.Z,{width:A.tq?"100%":"50%",key:n,style:{border:"0.5px dashed gray",padding:"10px"},fieldIcon:e.icon,isProcess:!0,visible:void 0!==(null===e||void 0===e?void 0:e.value)||e.visible,mandatory:!1,error:e.errors,customIconBgColor:"white"},a.createElement("div",{style:{display:"flex",justifyContent:"space-between",margin:"20px 0px"}},a.createElement("input",{id:"check-23",type:"checkbox",readOnly:!0,checked:!!M}),a.createElement("label",null,e.field_name)));if("Upload"===e.data_type_name)return a.createElement(q.Z,{key:n,fieldLabel:e.field_name,fieldIcon:e.icon,isProcess:!0,visible:void 0!==M||(null===(J=M)||void 0===J?void 0:J.length)>0,mandatory:!1,error:e.errors,customIconBgColor:"white",style:{border:"0",marginRight:"10px"}},a.createElement("a",{key:n,href:M,download:"Example-PDF-document",target:"_blank",rel:"noreferrer"},a.createElement(v.zx,{clear:!0,title:"Download File"})));if("Status"===e.data_type_name)return a.createElement(q.Z,{width:A.tq?"100%":"50%",key:n,style:{border:"0"},fieldLabel:e.field_name,fieldIcon:e.icon,isProcess:!0,visible:void 0!==(null===e||void 0===e?void 0:e.value)||e.visible,mandatory:!1,error:e.errors,customIconBgColor:"white"},a.createElement("input",{pointerEvents:"none",onChange:function(){},autoComplete:"none",value:null!==(K=null===p||void 0===p?void 0:p.status)&&void 0!==K?K:null!==($=null===e||void 0===e?void 0:e.value)&&void 0!==$?$:M,className:k,name:e.field_name}));if("Dropdown"===e.data_type_name&&"modules"===e.options&&(M=null===(ee=f.find((function(e){return e.id===M})))||void 0===ee?void 0:ee.name),"Positions"===e.data_type_name&&(M=null===y||void 0===y||null===(ne=y.find((function(e){return e.value===M})))||void 0===ne?void 0:ne.label),"People"===e.data_type_name)if(e.options.calendar){var Ee,Se,Ce=JSON.parse(null!==(Ee=M)&&void 0!==Ee?Ee:null!==(Se=null===e||void 0===e?void 0:e.value)&&void 0!==Se?Se:JSON.stringify({})),we=s.find((function(e){return e.id===(null===Ce||void 0===Ce?void 0:Ce.user)}));if(M=we?"".concat(we.first_name," ").concat(we.last_name):"",null!==Ce&&void 0!==Ce&&Ce.task){var xe,ke=_.find((function(e){return e.id===Ce.task}));return a.createElement(q.Z,{width:A.tq?"100%":"50%",key:n,style:{border:"0"},fieldLabel:e.field_name,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:!1,error:e.errors},a.createElement("div",{style:{display:"flex",flexDirection:"column",width:"inherit"}},a.createElement("input",{pointerEvents:"none",autoComplete:"none",value:M,disabled:!0,className:k,name:e.field_name}),ke&&a.createElement("input",{pointerEvents:"none",autoComplete:"none",value:null===ke||void 0===ke?void 0:ke.name,disabled:!0,className:k,name:e.field_name}),ke&&a.createElement("input",{pointerEvents:"none",autoComplete:"none",value:z()(new Date(null===ke||void 0===ke||null===(xe=ke.add_info)||void 0===xe?void 0:xe.start)).format("DD MMM YYYY h:mm a"),disabled:!0,className:k,name:e.field_name}),(null===ke||void 0===ke?void 0:ke.status)&&a.createElement("input",{pointerEvents:"none",autoComplete:"none",value:null===ke||void 0===ke?void 0:ke.status,disabled:!0,className:k,name:e.field_name})))}}else if(!M){var Ie=s.find((function(n){return n.id===e.value}));M=Ie?"".concat(Ie.first_name," ").concat(Ie.last_name):""}return"Video"===e.data_type_name&&(null===p||void 0===p?void 0:p.status)===(null!==(w=null===e||void 0===e||null===(x=e.options)||void 0===x?void 0:x.status)&&void 0!==w?w:"New")&&(null!==e&&void 0!==e&&e.value||M)&&z()(null!==(te=null===e||void 0===e?void 0:e.value)&&void 0!==te?te:M)<=(0,Y.now)()&&(0,Y.now)()<z()(null!==(oe=null===e||void 0===e?void 0:e.value)&&void 0!==oe?oe:M).add("minutes",+(null!==(le=null===e||void 0===e||null===(ie=e.options)||void 0===ie?void 0:ie.expiry)&&void 0!==le?le:30))?a.createElement(q.Z,{width:"100%",key:n,style:{border:"1px dashed gray"},fieldLabel:e.field_name,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:!1,error:e.errors},a.createElement("div",{className:T,style:{display:"flex",justifyContent:"center",fontSize:"12px"}},a.createElement(W.Z,{payload:{name:p.id}}))):a.createElement(q.Z,{width:A.tq?"100%":"50%",key:n,style:{border:"0"},fieldLabel:e.field_name,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:!1,error:e.errors},(null===(N=M)||void 0===N?void 0:N.length)>55?a.createElement("textarea",{className:I,style:{padding:"10px",height:"20vh"},pointerEvents:"none",onFocus:function(){},required:!0,value:null===M||void 0===M?"":"Date"===e.data_type_name||"Video"===e.data_type_name?z()(new Date(M)).format("DD MMM YYYY"):M,onChange:function(e){}}):a.createElement("input",{pointerEvents:"none",onChange:function(){},autoComplete:"none",value:null===M||void 0===M?"":"Dropdown"===e.data_type_name&&"modules"===(null===(P=e.options)||void 0===P?void 0:P.type)?null===(U=f.find((function(n){return n.id===e.value})))||void 0===U?void 0:U.name:"Date"===e.data_type_name||"Video"===e.data_type_name?"Invalid date"===z()(new Date(M)).format("DD MMM YYYY")?"":z()(new Date(M)).format("DD MMM YYYY h:mm a"):M,className:k,name:e.field_name}))}));return a.createElement("div",{className:N,style:{width:A.tq?"100%":""}},h)})),Q=function(e){var n,t,o=e.component,l=e.blueprintIndex,i=(e.isMandatoryError,e.nextButtonClicked,e.companyData),u=e.components,r=e.allComponents,s=e.companyUsersArray,c=e.selectedComponent,v=(0,M.pQ)(),p=(0,d.Z)(v,1)[0],m=(0,a.useState)(C),f=(0,d.Z)(m,2),_=f[0],y=(f[1],(0,a.useState)("0px")),h=((0,d.Z)(y,2)[1],(0,a.useState)(w)),g=(0,d.Z)(h,2),b=(g[0],g[1],(0,a.useState)(!1)),Z=((0,d.Z)(b,1)[0],(0,a.useState)("")),k=(0,d.Z)(Z,1)[0],I=(0,a.useRef)(null),N=null===(n=p.currentStep)||void 0===n?void 0:n.component_blueprints.findIndex((function(e){return e.id===o.id})),D=o.selected_fields.filter((function(e){return"Pin"===e.data_type_name||"Map"===e.data_type_name})).length>0;return a.createElement("div",{id:"accordion",className:E,key:l},a.createElement("div",{className:O()(S,_),"app-variant-has-error":k?"error":"",style:A.tq?D?{padding:"0",border:"0"}:{border:"0"}:{}},!(D&&A.tq)&&a.createElement("p",{className:P},null===o||void 0===o?void 0:o.name),a.createElement("div",{ref:I,style:{maxHeight:_===C?"":"0px",display:"flex"},className:x},a.createElement(H,{components:u,allComponents:r,component:o,handleInputChange:function(){},handlePrefixChange:function(){},handleCurrencyChange:function(){},checkIfAreMandatoryErrored:!1,handleCheckbox:function(){},isInherited:!1,indexInContextArray:N,handleLocationChange:function(){},processTaskContext:p,companyData:i,companyUsersArray:s,selectedComponent:c}))),k&&(null===k||void 0===k||null===(t=k.errors)||void 0===t?void 0:t.title)&&a.createElement(R.Z,{message:k.errors.title}),k&&(null===k||void 0===k?void 0:k.message)&&a.createElement(R.Z,{message:k.message}))},J=function(e){var n,t,o=(0,a.useState)(!1),l=(0,d.Z)(o,2),i=l[0],u=l[1],r=e.component;return a.createElement("div",{className:S,style:{border:A.tq?"0":""}},a.createElement("div",{className:N,style:{width:(A.tq,"100%")},onClick:function(){return u(!i)}},a.createElement(q.Z,{width:A.tq?"100%":"50%",fieldLabel:"Created By",style:{border:"0"},isProcess:!0,visible:!0},a.createElement("input",{pointerEvents:"none",onChange:function(){},autoComplete:"none",value:"".concat(null===(n=r.created_by)||void 0===n?void 0:n.first_name," ").concat(null===(t=r.created_by)||void 0===t?void 0:t.last_name),className:k})),a.createElement(q.Z,{width:A.tq?"100%":"50%",fieldLabel:"Created Date",style:{border:"0"},isProcess:!0,visible:!0},a.createElement("input",{pointerEvents:"none",onChange:function(){},autoComplete:"none",value:z()(new Date(r.created_date)).format("DD MMM YYYY h:mm a"),className:k,name:"Created Date"})),a.createElement(q.Z,{width:A.tq?"100%":"50%",fieldLabel:"Transaction ID",style:{border:"0"},isProcess:!0,visible:i},a.createElement("input",{pointerEvents:"none",onChange:function(){},autoComplete:"none",value:r.id,className:k,name:"CID"}))))},K=function(e){var n,t,o,l=e.component;return a.createElement("div",{className:S,style:{border:A.tq?"0":"",display:l.payments?"":"none"}},a.createElement("div",{className:N,style:{width:(A.tq,"100%")}},a.createElement(q.Z,{width:A.tq?"100%":"50%",fieldLabel:"Payments",style:{border:"0"},isProcess:!0,visible:!0},a.createElement("input",{pointerEvents:"none",onChange:function(){},autoComplete:"none",value:"".concat(null===(n=l.payments)||void 0===n?void 0:n.stripe_product,", ID: ").concat(null===(t=l.payments)||void 0===t?void 0:t.stripe_id.substring(0,13)),className:k})),a.createElement(q.Z,{width:A.tq?"100%":"50%",fieldLabel:"Amount Paid",style:{border:"0"},isProcess:!0,visible:!0},a.createElement("input",{pointerEvents:"none",onChange:function(){},autoComplete:"none",value:"".concat(null===(o=l.payments)||void 0===o?void 0:o.stripe_price),className:k}))))},$=t(18775),ee=t(48963),ne=function(e){var n,t=e.component,o=e.isMandatoryError,l=e.nextButtonClicked,i=e.setIsMandatoryError,u=(0,M.pQ)(),s=(0,d.Z)(u,1)[0],c=(0,a.useState)(""),v=(0,d.Z)(c,1)[0],p=(0,a.useRef)(null);(0,a.useEffect)((function(){m()}),[l]);var m=function(){var e;null!==t&&void 0!==t&&null!==(e=t.selected_fields)&&void 0!==e&&e.some((function(e){var n;return!0===e.mandatory&&!0===e.visible&&(!e.value||(null===e||void 0===e||null===(n=e.value)||void 0===n?void 0:n.length)<1)}))?i(!0):i(!1)},f=function(e,n){var t,o;0==n?s.newProduct={name:e,product_code:null===s||void 0===s||null===(t=s.newProduct)||void 0===t?void 0:t.product_code}:s.newProduct={product_code:e,name:null===s||void 0===s||null===(o=s.newProduct)||void 0===o?void 0:o.name}};return a.createElement("div",{id:"accordion",className:ee.Z.section},a.createElement("div",{className:O()(ee.Z.accordionContainer,!0),"app-variant-has-error":v?"error":""},a.createElement("div",{style:{display:"flex"}},a.createElement("p",{className:ee.Z.title,style:{color:o&&l?"var(--app-color-error)":""}},"New Product Details")),a.createElement("div",{ref:p,style:{maxHeight:"",display:"flex",padding:"0px 0px 20px 0px"},className:ee.Z.content},a.createElement(q.Z,{fieldIcon:r.MQR,fieldLabel:"Product Name",isProcess:!0,visible:!0,mandatory:!0,customIconBgColor:"white"},a.createElement("div",{className:ee.Z.fieldRowContainer},a.createElement("input",{type:"text",onChange:function(e){f(e.target.value,0)},autoComplete:"none",className:ee.Z.fieldTypeInput,name:"field.field_name"}))),a.createElement("div",{style:{width:"10px"}}),a.createElement(q.Z,{fieldIcon:r.MQR,fieldLabel:"Product Code",isProcess:!0,visible:!0,mandatory:!0,customIconBgColor:"white"},a.createElement("div",{className:ee.Z.fieldRowContainer},a.createElement("input",{type:"text",onChange:function(e){f(e.target.value,1)},autoComplete:"none",className:ee.Z.fieldTypeInput,name:"field.field_name"}))))),v&&(null===v||void 0===v||null===(n=v.errors)||void 0===n?void 0:n.title)&&a.createElement(R.Z,{message:v.errors.title}),v&&(null===v||void 0===v?void 0:v.message)&&a.createElement(R.Z,{message:v.message}))},te=t(85828),oe=t(40694),le=t(81330),ie=t.n(le),de=t(63864),ae="GeneralCard_userCard__0SOp0",ue="GeneralCard_userCardContainer__wJA5U",re="GeneralCard_userCardBottomContainer__0WoR6",se="GeneralCard_fullName__QizQf",ce="GeneralCard_position__3X6Ea",ve="GeneralCard_email__U8cda",pe=function(e){var n=e.cardClicked,t=e.title,o=e.subtitle,l=e.children,i=e.description,d=e.customClass,u=void 0===d?ae:d,r=e.customStyle;return a.createElement("div",{className:u,onClick:n,style:r},a.createElement("div",{className:ue},a.createElement("div",{className:re},a.createElement("p",{className:se},t),a.createElement("p",{className:ve},i),a.createElement("p",{className:ce},o),l)))},me=t(99554),fe=t(60534),_e=t(89293),ye=t(29937),he=t(4358),ge=t(1542),be=t(49523),Me=t(25403),Ze=t(4292),Ee=t(9204),Se=t(32086),Ce=t(53431),we=t(68218),xe=t(84634),ke=t(79544),Ie=t(62169),Ne=t(88346),Pe=t(8284),De=t(74369),Te=(t(67055),t(71901),t(95007)),qe=t(87424),Ae=t(23280),Ue=t(27658),Oe=t(75105),Re=t(51481),Be=t(41757),Fe=t(44408),Le=t(23910);t(60940),t(56120),t(37704),t(72666),t(68623),t(3863),t(95361);e=t.hmd(e);var je=t(456);var Ye=(0,a.memo)((function(e){var n,t,o,i,r,s,c,p,f=e.step,_=e.isMandatoryError,y=e.nextButtonClicked,h=e.setIsMandatoryError,b=e.begunModule,M=e.companyData,E=e.components,S=e.isEditing,C=e.companyUsersArray,w=e.setUsers,x=e.setPositions,k=void 0===x?function(){}:x,I=e.products,N=e.selectedComponent,P=e.goToNextStep,D=e.authenticatedUser,T=e.setIsCompleted,q=e.companyPositionsArray,A=(e.cart,e.blueprints),U=e.allModules,O=e.usersArray,R=e.editMode,B=((0,Z.WidthProvider)(Z.Responsive),(0,a.useState)(null===(n=null===N||void 0===N?void 0:N.is_complete)||void 0===n||n)),F=(0,d.Z)(B,1)[0],L=[],j=(null===f||void 0===f||null===(t=f.component_blueprints)||void 0===t?void 0:t.length)>0?null===f||void 0===f?void 0:f.component_blueprints.map((function(e,n){var t=e.selected_fields.find((function(e){return"Template"===e.data_type_name&&1==e.visible})),o=e.selected_fields.find((function(e){return"Video"===e.data_type_name&&1==e.visible}));return t?a.createElement("div",{key:n},a.createElement(te.ZP,{templateName:t.field_name,nextButtonClicked:y,isMandatoryError:_,blueprintIndex:n,setIsMandatoryError:h,component:e,companyData:M,components:E,products:I,selectedComponent:N,component_blueprint:e,editMode:R,blueprints:A,allModules:U,authenticatedUser:D,companyUsersArray:C,companyPositionsArray:q,begunModule:b})):e.selected_fields.filter((function(e){return 1==e.visible})).length>0?a.createElement("div",{key:n,style:{margin:"30px 0 0 0"}},a.createElement($.Z,{editMode:R,nextButtonClicked:y,isMandatoryError:_,blueprintIndex:n,setIsMandatoryError:h,blueprints:A,component:e,companyData:M,components:E,allModules:U,products:I,authenticatedUser:D,selectedComponent:N,companyUsersArray:C,companyPositionsArray:q,begunModule:b}),(null===N||void 0===N?void 0:N.id)&&(null===o||void 0===o?void 0:o.value)&&z()(null===o||void 0===o?void 0:o.value)<=(0,Y.now)()&&(0,Y.now)()<z()(null===o||void 0===o?void 0:o.value).add("minutes",10)&&a.createElement($.Z,{editMode:R,nextButtonClicked:y,isMandatoryError:_,blueprintIndex:n,setIsMandatoryError:h,blueprints:A,component:(0,l.Z)((0,l.Z)({},e),{},{name:"Video Call",selected_fields:[(0,l.Z)((0,l.Z)({},o),{},{options:(0,l.Z)((0,l.Z)({},o.options),{},{start:!0})})]}),companyData:M,components:E,allModules:U,products:I,authenticatedUser:D,selectedComponent:N,companyUsersArray:C,companyPositionsArray:q,begunModule:b,shouldDisplay:!0,isEnabled:!0})):a.createElement("div",{key:n,className:u.emptyElementsSection})})):a.createElement("div",{className:u.emptyElementsSection}),V=(0,a.useState)({currentBreakpoint:"lg",compactType:"vertical",mounted:!1,layouts:{lg:f.options.layout},editing:S}),W=(0,d.Z)(V,2),X=W[0],G=W[1];return a.createElement("div",null,a.createElement(v.j3,{permissions:[v.po.processes.create]},a.createElement("button",{onClick:function(){L=X.layouts.lg.map((function(e){return(0,l.Z)((0,l.Z)({},e),{},{static:!1})})),G((0,l.Z)((0,l.Z)({},X),{},{layouts:{lg:L},editing:!X.editing}))},hidden:!X.editing},"Edit Layout"),a.createElement("button",{onClick:function(){var e=L.map((function(e){return(0,l.Z)((0,l.Z)({},e),{},{static:!0})}));(0,m.T5)({options:(0,l.Z)((0,l.Z)({},f.options),{},{layout:e})},f.id,!0).pipe((0,g.P)()).subscribe({next:function(n){G((0,l.Z)((0,l.Z)({},X),{},{layouts:{lg:e},editing:!X.editing}))},error:function(e){G((0,l.Z)((0,l.Z)({},X),{},{layouts:{lg:f.options.layout},editing:!X.editing}))}})},hidden:!X.editing},"Save Layout")),j,"product"===(null===(o=b.processModule.module)||void 0===o?void 0:o.options.outputTo)&&(null===f||void 0===f?void 0:f.is_end)&&a.createElement(ne,{nextButtonClicked:y,isMandatoryError:_,setIsMandatoryError:h,component:{}}),(null===(i=b.processModule.module)||void 0===i?void 0:i.options.forSpecificUsers)&&(null===f||void 0===f?void 0:f.is_end)&&function(){var e;return a.createElement(v.jL,{ungrouped:!0,ttitle:"Select users to share this item:",columned:!0,withAckButton:!1},a.createElement("p",{style:{color:"var(--app-text-mobile-font), serif",fontSize:"16px"}},"Select users to share this item:"),a.createElement(he.Cm,{style:{width:"50%"},id:"Users",tagEmplacement:"inlined",searchable:!1,items:O,groupedBy:"department",groupname:"department",triggerType:"chevron",initialSelectedValues:null===N||void 0===N||null===(e=N.shared_users)||void 0===e?void 0:e.map((function(e){return O.find((function(n){return n.value===e.id}))})),className:u.peoplePositionsSelect,inputClassName:u.peoplePositionsSelectInput,molclassname:u.peoplePositionsSelectMenuOverlay,moliclassname:u.peoplePositionsSelectMenuOverlayItem,onChange:function(e){e.length>0?(w(null===e||void 0===e?void 0:e.map((function(e){return null===e||void 0===e?void 0:e.value}))),null!==N&&void 0!==N&&N.id&&(N.shared_users=null===e||void 0===e?void 0:e.map((function(e){return{id:null===e||void 0===e?void 0:e.value}})))):w([])}}))}(),(null===(r=b.processModule.module)||void 0===r?void 0:r.options.forSpecificUsers)&&(null===f||void 0===f?void 0:f.is_end)&&function(){var e;return a.createElement(v.jL,{ungrouped:!0,columned:!0,withAckButton:!1},a.createElement("p",{style:{color:"var(--app-text-mobile-font), serif",fontSize:"16px"}},"Select positions to share this item:"),a.createElement(he.Cm,{style:{width:"50%"},id:"Positions",tagEmplacement:"inlined",searchable:!1,items:q,groupedBy:"department",groupname:"department",triggerType:"chevron",initialSelectedValues:null===N||void 0===N||null===(e=N.shared_positions)||void 0===e?void 0:e.map((function(e){return q.find((function(n){return n.value===e.id}))})),className:u.peoplePositionsSelect,inputClassName:u.peoplePositionsSelectInput,molclassname:u.peoplePositionsSelectMenuOverlay,moliclassname:u.peoplePositionsSelectMenuOverlayItem,onChange:function(e){e.length>0?(k(null===e||void 0===e?void 0:e.map((function(e){return null===e||void 0===e?void 0:e.value}))),null!==N&&void 0!==N&&N.id&&(N.shared_positions=null===e||void 0===e?void 0:e.map((function(e){return{id:null===e||void 0===e?void 0:e.value}})))):k([])}}))}(),(null===(s=b.processModule.module)||void 0===s?void 0:s.options.forSpecificUsers)&&(null===f||void 0===f?void 0:f.is_end)&&a.createElement("div",{style:{height:"200px"}}),(null===f||void 0===f?void 0:f.is_end)&&(void 0===(null===N||void 0===N?void 0:N.is_complete)||0==(null===N||void 0===N?void 0:N.is_complete))&&a.createElement("div",{className:u.emptyElementsSection,style:{width:"260px",padding:"0px 0px 0px 20px"}},a.createElement(v.pd,{id:"draft",title:"Save as draft?",ungrouped:!0,withAckButton:!1,style:{margin:"20px 2.5% 10px 5px",width:"auto",display:""},value:!F,toggleSelected:function(e){T(!e)}})),(null===f||void 0===f||null===(c=f.pathway_steps)||void 0===c?void 0:c.length)>0&&function(){var e=f.pathway_steps.map((function(e){return{label:"".concat(e.name),value:e.id}})),n=C.map((function(e){return{label:"".concat(e.first_name," ").concat(e.last_name),value:e.id}}));return a.createElement("div",{className:u.emptyElementsSection,style:{width:"60%",padding:"20px 20px 20px 20px",height:"".concat(n.length*n.length>4?70:200,"px")}},a.createElement(de.Z,{visible:!0,mandatory:!1,items:e,onChange:function(e){P(e)},placeholder:"Continue to this step..."}))}(),(null===f||void 0===f||null===(p=f.pathway_processes)||void 0===p?void 0:p.length)>0&&function(){var e=f.pathway_processes.map((function(e){return{label:"".concat(e.name),value:e.id}})),n=C.map((function(e){return{label:"".concat(e.first_name," ").concat(e.last_name),value:e.id}}));return a.createElement("div",{className:u.emptyElementsSection,style:{width:"60%",padding:"20px 20px 20px 20px",height:"".concat(n.length*n.length>4?70:200,"px")}},a.createElement(de.Z,{visible:!0,mandatory:!1,items:e,onChange:function(){},placeholder:"Continue to this process..."}))}(),e.children)})),ze=function(e){var n,t,l,i,d,r,s=e.selectedComponent,c=e.companyPositionsArray,v=e.companyUsersArray;return a.createElement("div",null,((null===s||void 0===s||null===(n=s.shared_users)||void 0===n?void 0:n.length)>0||(null===s||void 0===s||null===(t=s.shared_positions)||void 0===t?void 0:t.length)>0)&&a.createElement("div",{className:u.accordionContainer},a.createElement("p",{className:u.cardTitle},"Shares"),a.createElement("div",{style:{display:"flex"}},(null===s||void 0===s||null===(l=s.shared_positions)||void 0===l?void 0:l.length)>0&&a.createElement(B.default,{className:u.sharesTable,columns:["Position"],list:null===s||void 0===s||null===(i=s.shared_positions)||void 0===i?void 0:i.map((function(e){var n=null===c||void 0===c?void 0:c.find((function(n){return n.value===e.id}));return(0,o.Z)({},"Position",null===n||void 0===n?void 0:n.label)}))}),(null===s||void 0===s||null===(d=s.shared_users)||void 0===d?void 0:d.length)>0&&a.createElement(B.default,{className:u.sharesTable,columns:["User"],list:null===s||void 0===s||null===(r=s.shared_users)||void 0===r?void 0:r.map((function(e){var n=null===v||void 0===v?void 0:v.find((function(n){return n.id===e.id}));return(0,o.Z)({},"User","".concat(null===n||void 0===n?void 0:n.first_name," ").concat(null===n||void 0===n?void 0:n.last_name))}))}))))},Ve=a.forwardRef((function(e,n){var t=e.begunModule,r=e.allModules,s=e.companyData,c=e.selectedComponent,v=e.companyUsersArray,p=e.companyPositionsArray,m=e.print,f=e.components,_=void 0===f?[]:f,y=e.bypassCustom,h=void 0!==y&&y,g=(0,a.useState)([]),b=(0,d.Z)(g,2),M=b[0],Z=b[1],E=function(){var e,n,i,d,r,v,p,m,f,_,y,h,g,b,M,Z,E,S,C,w,x,k,I=null===t||void 0===t||null===(e=t.processModule)||void 0===e||null===(n=e.steps)||void 0===n?void 0:n.find((function(e){return e.component_blueprints.filter((function(e){var n;return(null===(n=e.selected_fields)||void 0===n?void 0:n.filter((function(e){var n;return"item_code"===(null===(n=e.options)||void 0===n?void 0:n.mapToItem)||"Transactions Field"===e.data_type_name||"Template"===e.data_type_name})).length)>0})).length>0})),N=null!==(i=null!==(d=null!==(r=null===I||void 0===I||null===(v=I.component_blueprints)||void 0===v?void 0:v.find((function(e){var n;return(null===(n=e.selected_fields)||void 0===n?void 0:n.filter((function(e){var n;return"item_code"===(null===(n=e.options)||void 0===n?void 0:n.mapToItem)})).length)>0})))&&void 0!==r?r:null===I||void 0===I||null===(p=I.component_blueprints)||void 0===p?void 0:p.find((function(e){var n;return(null===(n=e.selected_fields)||void 0===n?void 0:n.filter((function(e){return"Transactions Field"===e.data_type_name})).length)>0})))&&void 0!==d?d:null===I||void 0===I||null===(m=I.component_blueprints)||void 0===m?void 0:m.find((function(e){var n;return(null===(n=e.selected_fields)||void 0===n?void 0:n.filter((function(e){return"Template"===e.data_type_name})).length)>0})))&&void 0!==i?i:void 0,P=N?null===(f=N.selected_fields)||void 0===f||null===(_=f.find((function(e){return"Template"===e.data_type_name})))||void 0===_?void 0:_.field_name:"",D=null===s||void 0===s||null===(y=s.misc_info)||void 0===y||null===(h=y.templatesData)||void 0===h?void 0:h.find((function(e){return e.name===P})),T=D?(null===D||void 0===D||null===(g=D.tlist)||void 0===g?void 0:g.length)>0?null===D||void 0===D?void 0:D.tlist:null===(b=D.config)||void 0===b?void 0:b.filter((function(e){return"Text"===e.value||"Number"===e.value||"Connector"===e.value})):N?N.selected_fields.filter((function(e){var n,t,o;return 1==e.visible&&1==e.mandatory&&!(""===(null===(n=e.options)||void 0===n?void 0:n.mapToItem)||void 0==(null===(t=e.options)||void 0===t?void 0:t.mapToItem)||null==(null===(o=e.options)||void 0===o?void 0:o.mapToItem))})):[];return(null===c||void 0===c||null===(M=c.component_items)||void 0===M?void 0:M.length)>0&&T&&(null===T||void 0===T?void 0:T.length)>0&&a.createElement(te.ij,{key:1,templateName:P},a.createElement("div",{className:u.accordionContainer,style:{border:A.tq?"0":"",padding:A.tq?"0":"50px"},key:1},a.createElement("p",{className:u.cardTitle},"Items"),a.createElement(fe.Z,{className:u.itemsTable,tableHostSimple:u.tableHostSimple,tableStyle:{minWidth:A.tq?"100px":"730px",width:A.tq?"100%":""},columns:T?T.map((function(e){return D?e.label:e.field_name})):["Product ID","Quantity","Price"],footer:T?(null===c||void 0===c||null===(Z=c.component_items)||void 0===Z?void 0:Z.length)>0?isNaN(+(null===(E=c.component_items[0])||void 0===E?void 0:E.quantity))||isNaN(+(null===(S=c.component_items[0])||void 0===S?void 0:S.value))||isNaN(+(null===(C=c.component_items[0])||void 0===C?void 0:C.alt_value))?void 0:T.map((function(e){var n,t,o;return D?"item_code"===e.key?"Totals":"".concat(De.Z((function(n,t){var o;return null!==(o=+n+ +t[e.key])&&void 0!==o?o:0}),0,null!==(n=c.component_items)&&void 0!==n?n:[])):"item_code"===(null===(t=e.options)||void 0===t?void 0:t.mapToItem)?"Totals":"".concat(De.Z((function(n,t){var o,l;return null!==(o=+n+ +t[null===(l=e.options)||void 0===l?void 0:l.mapToItem])&&void 0!==o?o:0}),0,null!==(o=c.component_items)&&void 0!==o?o:[]))})):void 0:["Totals","".concat(De.Z((function(e,n){var t;return null!==(t=+e+ +n.quantity)&&void 0!==t?t:0}),0,null!==(w=c.component_items)&&void 0!==w?w:[])),"".concat(De.Z((function(e,n){var t;return null!==(t=+e+ +n.value)&&void 0!==t?t:0}),0,null!==(x=c.component_items)&&void 0!==x?x:[]))],list:null===c||void 0===c||null===(k=c.component_items)||void 0===k?void 0:k.map((function(e){var n,t,i,d,r,s,c,v,p,m,f,_,y,h,g,b,M,Z,E,S,C,w,x,k,I,N,P,q,A;if((null===D||void 0===D||null===(n=D.tlist)||void 0===n?void 0:n.length)>0){var U={};return D.tlist.filter((function(n){U=(0,l.Z)((0,l.Z)({},U),{},(0,o.Z)({},null===n||void 0===n?void 0:n.label,e[null===n||void 0===n?void 0:n.key]))})),U}var O=e.item_code,R=e.quantity,B=null!==(t=e.alt_value)&&void 0!==t?t:0,F=null!==(i=e.value)&&void 0!==i?i:0,L=null!==(d=e.total)&&void 0!==d?d:0;return void 0!=D?(g={},(0,o.Z)(g,null!==(r=null===(s=D.config.find((function(e){return"item_code"===e.key})))||void 0===s?void 0:s.label)&&void 0!==r?r:"Item Code",a.createElement("div",{className:u.templateInformation},O)),(0,o.Z)(g,null!==(c=null===(v=D.config.find((function(e){return"value"===e.key})))||void 0===v?void 0:v.label)&&void 0!==c?c:"Price",a.createElement("div",{className:u.templateInformation},F)),(0,o.Z)(g,null!==(p=null===(m=D.config.find((function(e){return"total"===e.key})))||void 0===m?void 0:m.label)&&void 0!==p?p:"Total",a.createElement("div",{className:u.templateInformation},L)),(0,o.Z)(g,null!==(f=null===(_=D.config.find((function(e){return"quantity"===e.key})))||void 0===_?void 0:_.label)&&void 0!==f?f:"Quantity",a.createElement("div",{className:u.templateInformation},R)),(0,o.Z)(g,null!==(y=null===(h=D.config.find((function(e){return"alt_value"===e.key})))||void 0===h?void 0:h.label)&&void 0!==y?y:"Discount",a.createElement("div",{className:u.templateInformation},B)),(0,o.Z)(g,"id",e.id),g):null!==T&&void 0!==T&&T.find((function(e){var n,t,o,l,i;return"item_code"===(null===(n=e.options)||void 0===n?void 0:n.mapToItem)||"value"===(null===(t=e.options)||void 0===t?void 0:t.mapToItem)||"total"===(null===(o=e.options)||void 0===o?void 0:o.mapToItem)||"quantity"===(null===(l=e.options)||void 0===l?void 0:l.mapToItem)||"alt_value"===(null===(i=e.options)||void 0===i?void 0:i.mapToItem)}))?(q={},(0,o.Z)(q,null!==(b=null===(M=T.find((function(e){var n;return"item_code"===(null===(n=e.options)||void 0===n?void 0:n.mapToItem)})))||void 0===M?void 0:M.field_name)&&void 0!==b?b:"Product ID",a.createElement("div",{className:u.templateInformation},O)),(0,o.Z)(q,null!==(Z=null===(E=T.find((function(e){var n;return"value"===(null===(n=e.options)||void 0===n?void 0:n.mapToItem)})))||void 0===E?void 0:E.field_name)&&void 0!==Z?Z:"Price",a.createElement("div",{className:u.templateInformation},F)),(0,o.Z)(q,null!==(S=null===(C=T.find((function(e){var n;return"total"===(null===(n=e.options)||void 0===n?void 0:n.mapToItem)})))||void 0===C?void 0:C.field_name)&&void 0!==S?S:"Total",a.createElement("div",{className:u.templateInformation},L)),(0,o.Z)(q,null!==(w=null===(x=T.find((function(e){var n;return"quantity"===(null===(n=e.options)||void 0===n?void 0:n.mapToItem)})))||void 0===x?void 0:x.field_name)&&void 0!==w?w:"Quantity",a.createElement("div",{className:u.templateInformation},R)),(0,o.Z)(q,null!==(k=null===(I=T.find((function(e){var n;return"alt_value"===(null===(n=e.options)||void 0===n?void 0:n.mapToItem)})))||void 0===I?void 0:I.field_name)&&void 0!==k?k:"Discount",a.createElement("div",{className:u.templateInformation},B)),(0,o.Z)(q,null!==(N=null===(P=T.find((function(e){var n;return"alt_value"===(null===(n=e.options)||void 0===n?void 0:n.mapToItem)})))||void 0===P?void 0:P.field_name)&&void 0!==N?N:"Actual",a.createElement("div",{className:u.templateInformation},B)),(0,o.Z)(q,"id",e.id),q):(A={},(0,o.Z)(A,"Product ID",O),(0,o.Z)(A,"Quantity",R),(0,o.Z)(A,"Price",F),A)}))})))};return(0,a.useEffect)((function(){var o,d,f,y=[];if(we.Z(xe.Z("group"))(null!==(o=null===c||void 0===c?void 0:c.component_fields)&&void 0!==o?o:[]).map((function(e){y=[].concat((0,i.Z)(y),[{id:e.component_blueprint_id,selected_fields:Ne.Z(Pe.Z("group",e.group))(c.component_fields)}])})),(null===t||void 0===t||null===(d=t.processModule)||void 0===d||null===(f=d.completeSteps)||void 0===f?void 0:f.length)>0){var g,b,M,S,C,w,x,k,I,N,P,D=[a.createElement("div",{key:0,style:{display:null!==e&&void 0!==e&&e.noHeader?"none":"",height:"auto"}},m&&a.createElement("img",{alt:"lg",onError:function(e){return e.target.src="https://i.quotev.com/b2gtjqawaaaa.jpg"},src:null!==(g=null===s||void 0===s?void 0:s.logo)&&void 0!==g?g:"https://i.quotev.com/b2gtjqawaaaa.jpg"}),m&&a.createElement("p",{className:u.detailLabel,style:{fontSize:"26px"}},null===t||void 0===t||null===(b=t.processModule)||void 0===b||null===(M=b.module)||void 0===M?void 0:M.name)),E()];if(t.processModule.completeSteps.map((function(e){e.component_blueprints.filter((function(e){var n,t;return 0==(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.asModuleList)||void 0==(null===e||void 0===e||null===(t=e.options)||void 0===t?void 0:t.asModuleList)})).map((function(n,o){var d,u,p,m,f,h,g=null!==(d=null===c||void 0===c||null===(u=c.component_fields)||void 0===u?void 0:u.filter((function(e){return e.component_blueprint_id===n.id})))&&void 0!==d?d:[],b=!(null===g||void 0===g||!g.find((function(e){return!(""===e.value||void 0===e.value||null===e.value)})));(null===g||void 0===g?void 0:g.length)>0&&(null===(p=n.selected_fields)||void 0===p?void 0:p.filter((function(e){return 1==e.visible})).length)>0&&(null!==n.options?!1!==n.options.allowMultipleInputs&&void 0!==n.options.allowMultipleInputs&&null!==n.options.allowMultipleInputs||(D=[].concat((0,i.Z)(D),[a.createElement("div",{key:D.length,style:{display:b?"":"none"}},a.createElement(Q,{step:e,isInherited:!1,nextButtonClicked:function(){},isMandatoryError:!1,stepId:e.id,blueprintIndex:o,setIsMandatoryError:function(){},component:(0,l.Z)((0,l.Z)({},n),{},{created_date:c.created_date,values:null!==(m=null===(f=y.find((function(e){return e.id===n.id})))||void 0===f?void 0:f.selected_fields)&&void 0!==m?m:[]}),begunModule:t,allModules:r,companyData:s,components:y,allComponents:_,companyUsersArray:v,selectedComponent:c}))])):D=[].concat((0,i.Z)(D),[a.createElement("div",{key:D.length},a.createElement(Q,{step:e,isInherited:!1,nextButtonClicked:function(){},isMandatoryError:!1,stepId:e.id,blueprintIndex:o,setIsMandatoryError:function(){},component:(0,l.Z)((0,l.Z)({},n),{},{created_date:c.created_date,values:null===(h=y.find((function(e){return e.id===n.id})))||void 0===h?void 0:h.selected_fields}),begunModule:t,allModules:r,companyData:s,components:y,allComponents:_,companyUsersArray:v,selectedComponent:c}))]))}))})),null!==t&&void 0!==t&&null!==(S=t.processModule)&&void 0!==S&&null!==(C=S.completeSteps)&&void 0!==C&&C.find((function(e){var n;return(null===(n=e.component_blueprints)||void 0===n?void 0:n.filter((function(e){return e.selected_fields.filter((function(e){return"Template"===e.data_type_name})).length>0})).length)>0&&0==h})))Z(a.createElement(te.C6,{ref:n,print:m,begunModule:t,allModules:r,companyData:s,components:_,selectedComponent:c,companyUsersArray:v,companyPositionsArray:p,payments:a.createElement(K,{component:c}),creator:a.createElement(J,{component:c}),shares:(null===t||void 0===t||null===(w=t.processModule)||void 0===w||null===(x=w.module)||void 0===x||null===(k=x.options)||void 0===k?void 0:k.forSpecificUsers)&&a.createElement(ze,{key:D.length+3,selectedComponent:c,companyUsersArray:v,companyPositionsArray:p})},D));else Z([].concat((0,i.Z)(D),[a.createElement(K,{component:c,key:D.length+1}),a.createElement(J,{component:c,key:D.length+2}),(null===t||void 0===t||null===(I=t.processModule)||void 0===I||null===(N=I.module)||void 0===N||null===(P=N.options)||void 0===P?void 0:P.forSpecificUsers)&&a.createElement(ze,{key:D.length+3,selectedComponent:c,companyUsersArray:v,companyPositionsArray:p})]))}}),[c,m]),a.createElement("div",{ref:n,style:{padding:m?"50px 0px 50px 0px":"",alignSelf:"center",width:"100%"}},M)})),We=(0,c.$j)((function(e){var n=e.flowReducer,t=n.begunModule,o=n.allModules,l=n.companyData,i=n.components,d=n.rememberPath,a=n.lastUpdates,u=n.companyUsersArray,r=n.products,s=n.transactions,c=n.companyProcesses,v=n.companyPositionsArray,p=n.cart,m=n.blueprints,f=n.allTasks,_=n.axiosAbort;return{begunModule:t,allModules:o,companyData:l,components:i,rememberPath:d,lastUpdates:a,companyUsersArray:u,products:r,transactions:s,companyProcesses:c,authenticatedUser:e.authReducer.authenticatedUser,companyPositionsArray:v,cart:p,blueprints:m,allTasks:f,axiosAbort:_}}),(function(e){return{onSetSelectedProcess:function(n){return e((0,h.Xu)(n))}}}))((function(n){var t,c,m,Z,E,S,C,w,x,k,I,N,P,D,T,q,U,O,V,W,H,Q,J,K,$,ee,ne,te,le,ae,ue,re,se,ce,ve,fe,De,ze,We,Xe,Ge,He,Qe,Je,Ke,$e,en,nn,tn,on,ln,dn,an,un,rn,sn,cn,vn,pn,mn,fn,_n,yn,hn,gn,bn,Mn,Zn,En,Sn,Cn,wn,xn,kn,In,Nn,Pn,Dn,Tn,qn,An,Un,On,Rn,Bn,Fn,Ln,jn,Yn,zn,Vn,Wn,Xn=n.navigateTo,Gn=n.begunModule,Hn=n.allModules,Qn=n.companyData,Jn=n.components,Kn=n.isEditing,$n=n.lastUpdates,et=n.companyUsersArray,nt=n.products,tt=n.onSetSelectedProcess,ot=n.children,lt=n.authenticatedUser,it=n.companyPositionsArray,dt=n.cart,at=n.blueprints,ut=n.paymentID,rt=n.companyProcesses,st=n.allTasks,ct=(n.axiosAbort,(0,a.useState)(1)),vt=(0,d.Z)(ct,1)[0],pt=(0,a.useState)(!1),mt=(0,d.Z)(pt,2),ft=mt[0],_t=mt[1],yt=(0,a.useState)(!1),ht=(0,d.Z)(yt,2),gt=ht[0],bt=ht[1],Mt=(0,a.useState)(""),Zt=(0,d.Z)(Mt,2),Et=Zt[0],St=Zt[1],Ct=(0,a.useState)(!1),wt=(0,d.Z)(Ct,2),xt=wt[0],kt=wt[1],It=(0,M.pQ)(),Nt=(0,d.Z)(It,2),Pt=Nt[0],Dt=Nt[1],Tt=(0,a.useState)(!1),qt=(0,d.Z)(Tt,2),At=qt[0],Ut=qt[1],Ot=(0,a.useState)(1==(null===Gn||void 0===Gn||null===(t=Gn.processModule)||void 0===t?void 0:t.isUpdating)),Rt=(0,d.Z)(Ot,2),Bt=Rt[0],Ft=Rt[1],Lt=(0,a.useState)(null!==(c=null===Gn||void 0===Gn||null===(m=Gn.processModule)||void 0===m?void 0:m.selectedComponent)&&void 0!==c?c:{}),jt=(0,d.Z)(Lt,2),Yt=jt[0],zt=jt[1],Vt=(0,a.useState)(null===(Z=null===Yt||void 0===Yt?void 0:Yt.is_complete)||void 0===Z||Z),Wt=(0,d.Z)(Vt,2),Xt=Wt[0],Gt=Wt[1],Ht=(0,a.useState)([]),Qt=(0,d.Z)(Ht,2),Jt=Qt[0],Kt=Qt[1],$t=(0,a.useState)([]),eo=(0,d.Z)($t,2),no=eo[0],to=eo[1],oo=(0,a.useState)(!1),lo=(0,d.Z)(oo,2),io=lo[0],ao=lo[1],uo=(0,a.useState)(!1),ro=(0,d.Z)(uo,2),so=ro[0],co=ro[1],vo=(0,a.useState)(!1),po=(0,d.Z)(vo,2),mo=po[0],fo=po[1],_o=(0,a.useState)(!1),yo=(0,d.Z)(_o,2),ho=yo[0],go=yo[1],bo=(0,a.useState)(!1),Mo=(0,d.Z)(bo,2),Zo=Mo[0],Eo=Mo[1],So=(0,a.useState)(!1),Co=(0,d.Z)(So,2),wo=Co[0],xo=Co[1],ko=(0,a.useState)(!1),Io=(0,d.Z)(ko,2),No=Io[0],Po=Io[1],Do=(0,a.useState)(!1),To=(0,d.Z)(Do,2),qo=To[0],Ao=To[1],Uo=(0,a.useState)(!1),Oo=(0,d.Z)(Uo,2),Ro=Oo[0],Bo=Oo[1],Fo=(0,a.useState)([]),Lo=(0,d.Z)(Fo,2),jo=Lo[0],Yo=Lo[1],zo=(0,a.useState)([]),Vo=(0,d.Z)(zo,2),Wo=Vo[0],Xo=Vo[1],Go=(0,a.useState)([]),Ho=(0,d.Z)(Go,2),Qo=Ho[0],Jo=Ho[1],Ko=(0,a.useState)({list:[],operator:"AND"}),$o=(0,d.Z)(Ko,2),el=$o[0],nl=$o[1],tl=(0,a.useState)([]),ol=(0,d.Z)(tl,2),ll=ol[0],il=ol[1],dl=(0,a.useState)([]),al=(0,d.Z)(dl,2),ul=al[0],rl=al[1],sl=(0,a.useState)(!1),cl=(0,d.Z)(sl,2),vl=cl[0],pl=cl[1],ml=(0,a.useState)(!1),fl=(0,d.Z)(ml,2),_l=fl[0],yl=fl[1],hl=(0,a.useState)(!1),gl=(0,d.Z)(hl,2),bl=gl[0],Ml=gl[1],Zl=(0,a.useState)(!1),El=(0,d.Z)(Zl,2),Sl=El[0],Cl=El[1],wl=(0,a.useState)("false"!==localStorage.getItem("showAds")&&(null!==(E=z()(+localStorage.getItem("showAdsDate")).format("DD MMM YYYY")!==z()((0,Y.now)()).format("DD MMM YYYY"))&&void 0!==E&&E)),xl=(0,d.Z)(wl,2),kl=xl[0],Il=xl[1],Nl=(0,a.useState)(1),Pl=(0,d.Z)(Nl,2),Dl=(Pl[0],Pl[1],(0,Ae.s0)()),Tl=(null===Gn||void 0===Gn||null===(S=Gn.processModule)||void 0===S||null===(C=S.steps)||void 0===C?void 0:C.length)>0?null===Gn||void 0===Gn||null===(w=Gn.processModule)||void 0===w?void 0:w.steps[Gn.processModule.stepIndex]:{},ql=(null===Gn||void 0===Gn||null===(x=Gn.processModule)||void 0===x||null===(k=x.steps)||void 0===k?void 0:k.length)>0?null===(I=Gn.processModule.steps[Gn.processModule.stepIndex])||void 0===I?void 0:I.pathway_steps:[],Al=(null===Gn||void 0===Gn||null===(N=Gn.processModule)||void 0===N||null===(P=N.steps)||void 0===P?void 0:P.length)>0?null===(D=Gn.processModule.steps[Gn.processModule.stepIndex])||void 0===D?void 0:D.pathway_processes:[],Ul=(0,a.useRef)();(0,a.useEffect)((function(){var e=et.filter((function(e){return 0==e.departments.length})).map((function(e){return{label:"".concat(e.first_name," ").concat(e.last_name),value:e.id,department:"General",user:e}}));et.filter((function(e){return e.departments.length>0})).filter((function(n){n.departments.filter((function(t){e=[].concat((0,i.Z)(e),[{label:"".concat(n.first_name," ").concat(n.last_name),value:n.id,department:null===t||void 0===t?void 0:t.name,user:n}])}))})),il(e)}),[et]),(0,a.useEffect)((function(){var e,n;if((null===Gn||void 0===Gn||null===(e=Gn.processModule)||void 0===e||null===(n=e.steps)||void 0===n?void 0:n.length)>0&&!Ro){var t,o;nl({list:[],operator:"AND"}),void 0!==(null===Xn||void 0===Xn?void 0:Xn.key)?Yo(Vl(null===Gn||void 0===Gn||null===(t=Gn.processModule)||void 0===t||null===(o=t.module)||void 0===o?void 0:o.id,Jn,Xn.value,Xn.key)):Yo(Jn.filter((function(e){var n,t;return e.module_id===(null===Gn||void 0===Gn||null===(n=Gn.processModule)||void 0===n||null===(t=n.module)||void 0===t?void 0:t.id)})));var l={id:""},i=[],d=[];Ee.Z((function(e){e.component_fields.map((function(n){var t,o;e.procedure_id!==(null===je||void 0===je?void 0:je.id)&&(null!==(t=l=rt.find((function(n){return n.id===e.procedure_id})))&&void 0!==t&&t.steps&&(i=be.Z(Me.Z("component_blueprints"),Ze.Z)(null===(o=l)||void 0===o?void 0:o.steps),d=be.Z(Me.Z("selected_fields"),Ze.Z)(i)));var a,u=d.find((function(e){return e.procedure_step_blueprint_field_id===n.procedure_step_blueprint_field_id}));u&&(n.data_type_name=u.data_type_name,n.data_type=u.data_type,n.field_name=u.field_name,n.options=u.options,n.component_blueprint_id=null===(a=i.find((function(e){return e.selected_fields.filter((function(e){return e.procedure_step_blueprint_field_id===n.procedure_step_blueprint_field_id})).length>0})))||void 0===a?void 0:a.id)}))}),Jn.filter((function(e){var n;return(null!==(n=null===e||void 0===e?void 0:e.component_fields)&&void 0!==n?n:[]).filter((function(e){return void 0===(null===e||void 0===e?void 0:e.field_name)})).length>0})))}}),[null===Gn||void 0===Gn||null===(T=Gn.processModule)||void 0===T?void 0:T.steps,Jn]),(0,a.useEffect)((function(){if(ut){var e,n=null===(e=Yt.component_fields)||void 0===e?void 0:e.find((function(e){return"Payments"===e.data_type_name}));if(n){var t,o,l,i,d,a=null===(t=Yt.component_fields)||void 0===t?void 0:t.find((function(e){return e.field_name===n.options.paymentField}));if(a)co(!0),(0,Ue.e_)({user_id:lt.id,id:Yt.id,total:null!==(o=+(null===a||void 0===a?void 0:a.value))&&void 0!==o?o:0,product:"CR-".concat(null!==(l=null===Yt||void 0===Yt?void 0:Yt.title)&&void 0!==l?l:null===Gn||void 0===Gn||null===(i=Gn.processModule)||void 0===i||null===(d=i.module)||void 0===d?void 0:d.name),notes:"E-Payment",quantity:1}).pipe((0,g.P)()).subscribe({next:function(){var e,n,t,o;co(!1),Ao((null===Gn||void 0===Gn||null===(e=Gn.processModule)||void 0===e||null===(n=e.module)||void 0===n||null===(t=n.options)||void 0===t||null===(o=t.message)||void 0===o?void 0:o.length)>0)}})}}}),[ut]),(0,a.useEffect)((function(){var e,n,t,o;(null===Gn||void 0===Gn||null===(e=Gn.processModule)||void 0===e||null===(n=e.steps)||void 0===n?void 0:n.length)>0&&!Ro&&(void 0!==Xn.key||""!==Xn.key)&&Yo(Vl(null===Gn||void 0===Gn||null===(t=Gn.processModule)||void 0===t||null===(o=t.module)||void 0===o?void 0:o.id,Jn,Xn.value))}),[Xn]),(0,a.useEffect)((function(){localStorage.getItem("transaction")&&!At&&localStorage.getItem("transaction")===Yt.id&&Ml(!0)}),[Yt,At]);var Ol=(0,a.useCallback)((function(){var e=!1;return Tl.component_blueprints.filter((function(e){var n,t;return null===e.options||(!1===(null===(n=e.options)||void 0===n?void 0:n.allowMultipleInputs)||void 0===(null===(t=e.options)||void 0===t?void 0:t.allowMultipleInputs))})).some((function(e){var n;return!0===(null===(n=e.selected_fields)||void 0===n?void 0:n.filter((function(e){return"Profile"!==e.data_type_name&&"ID"!==e.data_type_name&&"Info"!==e.data_type_name&&"Notes"!==e.data_type_name&&"URL"!==e.data_type_name&&"Emails"!==e.data_type_name&&"Template"!==e.data_type_name&&"Global"!==e.data_type_name&&"Chart"!==e.data_type_name&&"Value"!==e.data_type_name})).some((function(e){var n;return!0===e.mandatory&&!0===e.visible&&(!e.value||(null===e||void 0===e||null===(n=e.value)||void 0===n?void 0:n.length)<1)})))}))&&(e=!0),!0===e?(bt(!0),!0):(St(""),bt(!1),!1)}),[Tl]),Rl=function(e){kt(!0),Ol()&&!1===Bt?zl():Fl(e)},Bl=function(e){Pt.components=[],Pt.items=[],Pt.currentStep={},Pt.newStepComponents=[],Gn.processModule.steps.filter((function(e){return e.component_blueprints.filter((function(e){return e.selected_fields.filter((function(e){return e.value=void 0}))}))})),Gn.processModule.isUpdating=!1,Ft(!1),Ut(!1),kt(!0),Fl(e),Qn.start=!1,(0,_.aK)().pipe((0,g.P)()).subscribe({next:function(){}})},Fl=function(e){kt(!1),bt(!1),_t(!1);var n={};if(void 0===e){if(void 0===(n=Gn.processModule.steps[Gn.processModule.stepIndex+1]))return void y.h.dispatch((0,h.Xc)({show:!0,message:"Misconfigured next step, please contact your administrator",color:"red",bottom:!0}));Dt({action:M._U.setCurrentStep,value:n}),y.h.dispatch((0,h.q4)((0,l.Z)((0,l.Z)({},Gn.processModule),{},{stepIndex:Gn.processModule.stepIndex+1})))}else{if(void 0==(n=Gn.processModule.steps.find((function(n){return n.id===e}))))n=Gn.processModule.steps[Gn.processModule.stepIndex+1],y.h.dispatch((0,h.q4)((0,l.Z)((0,l.Z)({},Gn.processModule),{},{stepIndex:Gn.processModule.stepIndex+1})));else{var t,o,d=Gn.processModule.steps[(null===(t=n)||void 0===t?void 0:t.rank)-1];if(void 0===d)return void y.h.dispatch((0,h.Xc)({show:!0,message:"Misconfigured next step, please contact your administrator",color:"red",bottom:!0}));y.h.dispatch((0,h.q4)((0,l.Z)((0,l.Z)({},Gn.processModule),{},{stepIndex:(null===(o=n)||void 0===o?void 0:o.rank)-1})))}Dt({action:M._U.setCurrentStep,value:n})}var a=Pt.newStepComponents.filter((function(e){return null===e.options||(void 0===e.allowMultipleInputs||!1===e.options.allowMultipleInputs)}));Dt({action:M._U.setComponents,value:[].concat((0,i.Z)(Pt.components.filter((function(e){return a.every((function(n){return n.id!==e.id}))}))),(0,i.Z)(Se.Z((function(e){return e.selected_fields.filter((function(e){return""===e.value})).length>0}),a)))}),Dt({action:M._U.setModuleNewStepComponents,value:n.component_blueprints.filter((function(e){return e.selected_fields.filter((function(e){return"Status"===e.data_type_name||"ID"===e.data_type_name||"Value"===e.data_type_name})).length>0}))})},Ll=function(){Dt({action:M._U.setModuleItems,value:[]}),Dt({action:M._U.setComponents,value:[]}),Dt({action:M._U.addModuleComponents,value:[]}),Dt({action:M._U.setModuleNewStepComponents,value:[]}),Bl(Gn.processModule.steps[0].id)},jl=function(){var e,n,t,o,d,a,u,r,s,c,v,m,_,b,M,Z;if(Ol())return St("Fill up all the required fields"),window.scrollTo({top:0,behavior:"smooth"}),void _t(!1);var E,S,C=Pt.newStepComponents.filter((function(e){var n,t;return null===e.options||(!1===(null===(n=e.options)||void 0===n?void 0:n.allowMultipleInputs)||void 0===(null===(t=e.options)||void 0===t?void 0:t.allowMultipleInputs))})),w=[].concat((0,i.Z)(Pt.components.filter((function(e){return C.every((function(n){return n.id!==e.id}))}))),(0,i.Z)(Se.Z((function(e){return e.selected_fields.filter((function(e){return""===e.value})).length>0}),C))),x=[],k=[],I="",N="",P=!1,D=Bt?null===Yt||void 0===Yt?void 0:Yt.status:"None",T=[],q=null===Yt||void 0===Yt?void 0:Yt.status,A={},U=Bt?(null!==(e=Ce.Z(Math.max,Me.Z("group",we.Z(xe.Z("group"))(null!==(n=null===Yt||void 0===Yt?void 0:Yt.component_fields)&&void 0!==n?n:[]))))&&void 0!==e?e:-1)+1:0;w.map((function(e,n){var t,o,d=n,a=null===(t=e.selected_fields.filter((function(e){return"Record"===e.data_type_name||"Filters"===e.data_type_name})))||void 0===t?void 0:t.find((function(e){return+(null===e||void 0===e?void 0:e.group)>=0}));a&&Bt?d=a.group:Bt&&(d=U,U++),e.selected_fields.filter((function(e){return"Record"===e.data_type_name||"Filters"===e.data_type_name})).map((function(e,n){var t;if(null!==e.value&&void 0!==e.value&&1!=(null===(t=e.options)||void 0===t?void 0:t.skip)){var o,a;k=[].concat((0,i.Z)(k),[(0,l.Z)((0,l.Z)({},e),{},{index:n,group:d})]),I=e.value,A[e.field_name]=e.value;var u=null===(o=Jn.find((function(n){return n.component_fields.filter((function(n){var t;return n.component_blueprint_id===(null===e||void 0===e||null===(t=e.options)||void 0===t?void 0:t.component_id)&&(null===n||void 0===n?void 0:n.value)===I})).length>0})))||void 0===o||null===(a=o.component_fields.find((function(e){return"Email Recipient"===e.data_type_name})))||void 0===a?void 0:a.value;u&&(E=u)}}));var u=null===(o=e.selected_fields.filter((function(e){return!("Record"===e.data_type_name||"Filters"===e.data_type_name)})))||void 0===o?void 0:o.find((function(e){return+(null===e||void 0===e?void 0:e.group)>=0}));u&&Bt?d=u.group:Bt&&(d=U,U++),e.selected_fields.filter((function(e){return!("Record"===e.data_type_name||"Filters"===e.data_type_name)})).map((function(e,n){var t,o,a,u;if(null!==e.value&&void 0!==e.value&&1!=(null===(t=e.options)||void 0===t?void 0:t.skip)){if(A[e.field_name]=e.value,"ID"===(null===e||void 0===e?void 0:e.data_type_name))null!==Gn&&void 0!==Gn&&null!==(a=Gn.processModule)&&void 0!==a&&a.isUpdating?k=[].concat((0,i.Z)(k),[(0,l.Z)((0,l.Z)({},e),{},{index:n,group:d})]):(k=[].concat((0,i.Z)(k),[(0,l.Z)((0,l.Z)({},e),{},{index:n,group:d,value:"".concat(null===e||void 0===e?void 0:e.options.id).concat(null===(null===Qn||void 0===Qn?void 0:Qn.misc_info)?1:null!==(u=null===Qn||void 0===Qn?void 0:Qn.misc_info[null===e||void 0===e?void 0:e.field_name])&&void 0!==u?u:1)})]),x=[].concat((0,i.Z)(x),["".concat(e.field_name)]));else if("Value"===(null===e||void 0===e?void 0:e.data_type_name)){var r;k=[].concat((0,i.Z)(k),[(0,l.Z)((0,l.Z)({},e),{},{index:n,value:null===e||void 0===e||null===(r=e.options)||void 0===r?void 0:r.value,group:d})])}else if("Email Recipient"===(null===e||void 0===e?void 0:e.data_type_name))k=[].concat((0,i.Z)(k),[(0,l.Z)((0,l.Z)({},e),{},{index:n,value:e.value.replace(/ /g,""),group:d})]);else if("Product Lookup"===e.data_type_name)k=(0,i.Z)(k);else if("Status"===e.data_type_name&&"Draft"===e.value&&1==Xt)P=!0,k=[].concat((0,i.Z)(k),[(0,l.Z)((0,l.Z)({},e),{},{index:n,value:"New",group:d})]),D="New";else if("Status"===e.data_type_name)k=[].concat((0,i.Z)(k),[(0,l.Z)((0,l.Z)({},e),{},{index:n,value:null===e||void 0===e?void 0:e.value,group:d})]),D=null===e||void 0===e?void 0:e.value;else if("Positions"===e.data_type_name&&!0===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.share))k=[].concat((0,i.Z)(k),[(0,l.Z)((0,l.Z)({},e),{},{index:n,value:null===e||void 0===e?void 0:e.value,group:d})]),T=[null===e||void 0===e?void 0:e.value];else if("Formula"===e.data_type_name){var s,c=null!==Gn&&void 0!==Gn&&null!==(s=Gn.processModule)&&void 0!==s&&s.isUpdating?(0,_e.LV)(null===e||void 0===e?void 0:e.options,Yt.component_fields.filter((function(n){var t;return null===(t=e.options)||void 0===t?void 0:t.list.includes(n.field_name)})),w,Pt.items):e.value;k=[].concat((0,i.Z)(k),[(0,l.Z)((0,l.Z)({},e),{},{index:n,value:c.toString(),group:d})])}else if("output"!==e.data_type){var v,p,m,f;if("People"===e.data_type_name){var _,y,h,g;if(!0===(null===(_=e.options)||void 0===_?void 0:_.email)){var b,M,Z=null===(b=ll.find((function(n){return n.label===(null===e||void 0===e?void 0:e.value)})))||void 0===b||null===(M=b.user)||void 0===M?void 0:M.email;N=Z?N.concat(N.length>0?",".concat(Z):Z):N,e.email=void 0}if(!0===(null===(y=e.options)||void 0===y?void 0:y.assign))S=null===(h=ll.find((function(n){return n.label===(null===e||void 0===e?void 0:e.value)})))||void 0===h||null===(g=h.user)||void 0===g?void 0:g.id,Bt&&(Yt.assigned_to={id:S})}"email"===(null===e||void 0===e||null===(v=e.options)||void 0===v?void 0:v.actionToPerform2)&&null!==e&&void 0!==e&&null!==(p=e.options)&&void 0!==p&&null!==(m=p.valueToMatch2)&&void 0!==m&&null!==(f=m.split(","))&&void 0!==f&&f.includes(null===e||void 0===e?void 0:e.value)&&E&&(P=!0,N=N.concat(N.length>0?",".concat(E):E)),k=[].concat((0,i.Z)(k),[(0,l.Z)((0,l.Z)({},e),{},{index:n,group:d})])}}else if("Status"===(null===e||void 0===e?void 0:e.data_type_name))1==Xt?(k=[].concat((0,i.Z)(k),[(0,l.Z)((0,l.Z)({},e),{},{index:n,value:"New",group:d})]),D="New"):(k=[].concat((0,i.Z)(k),[(0,l.Z)((0,l.Z)({},e),{},{index:n,value:"Draft",group:d})]),D="Draft"),A[e.field_name]=e.value;else if("Action Button"===(null===e||void 0===e?void 0:e.data_type_name)){var C,I,q;k=(0,i.Z)(k),A[e.field_name]=e.value,"status"===(null===e||void 0===e||null===(C=e.options)||void 0===C?void 0:C.action)?D=e.value:"user"!==(null===(I=e.options)||void 0===I?void 0:I.action)&&"creator"!==(null===(q=e.options)||void 0===q?void 0:q.action)||(Yt.assigned_to=null===e||void 0===e?void 0:e.value)}}))}));var O,R,B,F,L,j,Y,z,V,W,X,G,H,Q,J,K,$="";(null===(t=Gn.processModule)||void 0===t||null===(o=t.module)||void 0===o||null===(d=o.options)||void 0===d||null===(a=d.title)||void 0===a?void 0:a.length)>0?(null===(O=Gn.processModule)||void 0===O||null===(R=O.module)||void 0===R||null===(B=R.options)||void 0===B||null===(F=B.title)||void 0===F||F.map((function(e){if("Info"!==e){var n,t,o,l,i;$=""===$?"".concat(null!==(n=null===(t=k.find((function(n){return n.field_name===e})))||void 0===t?void 0:t.value)&&void 0!==n?n:""):"".concat(null!==(o=$)&&void 0!==o?o:"","  ").concat(null!==(l=null===(i=k.find((function(n){return n.field_name===e})))||void 0===i?void 0:i.value)&&void 0!==l?l:"")}else{var d=Gn.processModule.steps.find((function(e){var n;return(null===(n=e.component_blueprints.filter((function(e){var n;return(null===(n=e.selected_fields.filter((function(e){return"Info"===e.data_type_name})))||void 0===n?void 0:n.length)>0})))||void 0===n?void 0:n.length)>0}));if(void 0!==d){var a,u,r,s,c,v,p,m,f,_=null===(a=d.component_blueprints)||void 0===a||null===(u=a.find((function(e){var n;return(null===(n=e.selected_fields.filter((function(e){return"Info"===e.data_type_name})))||void 0===n?void 0:n.length)>0})).selected_fields)||void 0===u?void 0:u.find((function(e){return"Info"===e.data_type_name})),y=Jn.find((function(e){var n;return(null===(n=e.component_fields.filter((function(e){var n;return e.component_blueprint_id===_.options.component_id&&(e.value===A[_.field_name]||e.value===A[null===(n=_.options)||void 0===n?void 0:n.key])})))||void 0===n?void 0:n.length)>0}));if(y)if((null===_||void 0===_||null===(r=_.options)||void 0===r||null===(s=r.list)||void 0===s?void 0:s.length)>0)$=""===$?"".concat(null!==(c=null===(v=y.component_fields.find((function(e){var n;return e.field_name===(null===_||void 0===_||null===(n=_.options)||void 0===n?void 0:n.list[0])})))||void 0===v?void 0:v.value)&&void 0!==c?c:""):"".concat(null!==(p=$)&&void 0!==p?p:"","  ").concat(null!==(m=null===(f=y.component_fields.find((function(e){var n;return e.field_name===(null===_||void 0===_||null===(n=_.options)||void 0===n?void 0:n.list[0])})))||void 0===f?void 0:f.value)&&void 0!==m?m:"")}}})),null!==(L=Gn.processModule)&&void 0!==L&&null!==(j=L.module)&&void 0!==j&&null!==(Y=j.options)&&void 0!==Y&&Y.title.find((function(e){return"UUID"===e}))&&($="".concat(Bt?Yt.id:(0,_e.mR)())),null!==(z=Gn.processModule)&&void 0!==z&&null!==(V=z.module)&&void 0!==V&&null!==(W=V.options)&&void 0!==W&&W.title.find((function(e){return"Module Name"===e}))&&($=" ".concat(null===(X=Gn.processModule)||void 0===X||null===(G=X.module)||void 0===G?void 0:G.name," - ").concat(null!==(H=$)&&void 0!==H?H:""))):$=Bt?Yt.id:(0,_e.mR)();var ee,ne,te,oe,le,ie,de,ae,ue,re,se,ce,ve,pe,me,fe,ye,he,ge,be,Ze,Ee,ke,Ie,Ne,Pe={};if(!0===(null===(u=Gn.processModule)||void 0===u||null===(r=u.module)||void 0===r||null===(s=r.options)||void 0===s?void 0:s.emailOutputs)){var De,Te,qe,Ae,Be=Gn.processModule.steps.find((function(e){var n;return(null===(n=e.component_blueprints.filter((function(e){var n;return(null===(n=e.selected_fields.filter((function(e){return"Info"===e.data_type_name&&1==e.options.email})))||void 0===n?void 0:n.length)>0})))||void 0===n?void 0:n.length)>0}));if(void 0!==Be){var Fe,Le,je=null===(Fe=Be.component_blueprints)||void 0===Fe||null===(Le=Fe.find((function(e){var n;return(null===(n=e.selected_fields.filter((function(e){var n;return"Info"===e.data_type_name&&1==(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.email)})))||void 0===n?void 0:n.length)>0})).selected_fields)||void 0===Le?void 0:Le.find((function(e){var n;return"Info"===e.data_type_name&&!0===(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.email)})),Ye=Jn.find((function(e){var n;return(null===(n=e.component_fields.filter((function(e){return e.component_blueprint_id===je.options.component_id&&e.value===I})))||void 0===n?void 0:n.length)>0}));Ye&&(J=je.id,Q=Ye.id)}if(void 0!==(Be=Gn.processModule.steps.find((function(e){var n;return!0===e.is_end&&(null===(n=e.component_blueprints.filter((function(e){var n;return(null===(n=e.selected_fields.filter((function(e){return"Emails"===e.data_type_name})))||void 0===n?void 0:n.length)>0})))||void 0===n?void 0:n.length)>0}))))(null===(qe=Be.component_blueprints)||void 0===qe?void 0:qe.find((function(e){var n;return(null===(n=e.selected_fields.filter((function(e){return"Emails"===e.data_type_name})))||void 0===n?void 0:n.length)>0}))).selected_fields.filter((function(e){return"Emails"===e.data_type_name})).filter((function(e){var n;k.find((function(n){return n.value===e.options.valueToMatch&&n.field_name===e.options.fieldToMatch}))&&(E&&(K=e,P=!0,!0===(null===(n=e.options)||void 0===n?void 0:n.copyEmailRecip)&&(N=N.concat(N.length>0?",".concat(E):E))))}));if(N=null!==(De=N.split(","))&&void 0!==De?De:[],(ul.length>0||N.length>0)&&(N=Bt?!0===P?[].concat((0,i.Z)(ul),(0,i.Z)(N)):(0,i.Z)(ul):[].concat((0,i.Z)(ul),(0,i.Z)(N))),N.length>0&&(Pe={emailTo:N}),J&&Q&&(Pe=(0,l.Z)((0,l.Z)({},Pe),{},{info:J,target:Q})),(null===(Te=K)||void 0===Te?void 0:Te.id.length)>0)Pe=(0,l.Z)((0,l.Z)({},Pe),{},{template:null===(Ae=K)||void 0===Ae?void 0:Ae.id})}if(!0===(null===(c=Gn.processModule)||void 0===c||null===(v=c.module)||void 0===v||null===(m=v.options)||void 0===m?void 0:m.rewards)&&q!==D){var ze,Ve,We,Xe,Ge,He,Qe=Gn.processModule.steps.find((function(e){var n;return(null===(n=e.component_blueprints.filter((function(e){var n;return(null===(n=e.selected_fields.filter((function(e){return"Rewards"===e.data_type_name})))||void 0===n?void 0:n.length)>0})))||void 0===n?void 0:n.length)>0}));if(void 0!==Qe)if((ee=null===(ze=Qe.component_blueprints)||void 0===ze||null===(Ve=ze.find((function(e){var n;return(null===(n=e.selected_fields.filter((function(e){return"Rewards"===e.data_type_name})))||void 0===n?void 0:n.length)>0})).selected_fields)||void 0===Ve?void 0:Ve.find((function(e){return"Rewards"===e.data_type_name}))).options.status===D)lt.options.rewards=+(null!==(We=null===lt||void 0===lt||null===(Xe=lt.options)||void 0===Xe?void 0:Xe.rewards)&&void 0!==We?We:0)+ +(null===(Ge=ee)||void 0===Ge||null===(He=Ge.options)||void 0===He?void 0:He.points)}"product"!==(null===(_=Gn.processModule)||void 0===_||null===(b=_.module)||void 0===b||null===(M=b.options)||void 0===M?void 0:M.outputTo)||Bt||null!==Pt&&void 0!==Pt&&null!==(ne=Pt.newProduct)&&void 0!==ne&&ne.name&&null!==Pt&&void 0!==Pt&&null!==(te=Pt.newProduct)&&void 0!==te&&te.product_code&&(0,f.ry)(null===Pt||void 0===Pt||null===(oe=Pt.newProduct)||void 0===oe?void 0:oe.name,null===Pt||void 0===Pt||null===(le=Pt.newProduct)||void 0===le?void 0:le.product_code).subscribe({error:function(e){},next:function(){co(!0),y.h.dispatch((0,h.C2)((0,l.Z)((0,l.Z)({},$n),{},{products:0})))},complete:function(){}});(null===(Z=k)||void 0===Z?void 0:Z.length)>0?(co(!0),Bt?(Yt.options=Pe,Yt.status=D,null!==Pt&&void 0!==Pt&&Pt.assigned_to&&(Yt.assigned_to={id:null===Pt||void 0===Pt?void 0:Pt.assigned_to}),(0,p.KL)((0,l.Z)((0,l.Z)({},Yt),{},{selected_fields:(0,i.Z)(k),component_items:Pt.items}),Yt.id,null===Yt||void 0===Yt||null===(ie=Yt.shared_users)||void 0===ie?void 0:ie.map((function(e){return null===e||void 0===e?void 0:e.id})),$,Xt,(null===(de=Gn.processModule)||void 0===de||null===(ae=de.module)||void 0===ae||null===(ue=ae.options)||void 0===ue||null===(re=ue.shares)||void 0===re?void 0:re.length)>0?[].concat((0,i.Z)(null!==(se=null===(ce=Gn.processModule)||void 0===ce||null===(ve=ce.module)||void 0===ve||null===(pe=ve.options)||void 0===pe?void 0:pe.shares)&&void 0!==se?se:[]),(0,i.Z)(T)):[].concat((0,i.Z)(null!==(me=null===Yt||void 0===Yt||null===(fe=Yt.shared_positions)||void 0===fe?void 0:fe.map((function(e){return null===e||void 0===e?void 0:e.id})))&&void 0!==me?me:[]),(0,i.Z)(T))).subscribe({error:function(e){y.h.dispatch((0,h.Xc)({show:!0,message:"Errors found",color:"red"}))},next:function(e){var n,t,o,i,d,a;if(null!==(n=Gn.processModule)&&void 0!==n&&null!==(t=n.module)&&void 0!==t&&null!==(o=t.options)&&void 0!==o&&o.single)return localStorage.setItem(null===(d=Gn.processModule)||void 0===d?void 0:d.module.id,JSON.stringify(null===e||void 0===e?void 0:e.data)),void Fl(null===(a=Gn.processModule.steps[0])||void 0===a?void 0:a.id);var u=k.find((function(e){var n;return"People"===e.data_type_name&&!0===(null===(n=e.options)||void 0===n?void 0:n.calendar)}));if(u){var r,s,c,v=JSON.parse(null!==(r=null===u||void 0===u?void 0:u.value)&&void 0!==r?r:{task:0}),p=st.find((function(e){return e.id===(null===v||void 0===v?void 0:v.task)}));if(p)(0,Re.xJ)((0,l.Z)((0,l.Z)({},p),{},{assignee_id:null===e||void 0===e||null===(s=e.data)||void 0===s||null===(c=s.created_by)||void 0===c?void 0:c.id}),null===p||void 0===p?void 0:p.id).pipe((0,g.P)()).subscribe({})}var m=k.find((function(e){return"Payments"===e.data_type_name})),f=k.find((function(e){var n;return e.field_name===(null===m||void 0===m||null===(n=m.options)||void 0===n?void 0:n.paymentField)}));if(!m||null!==e&&void 0!==e&&null!==(i=e.data.payments)&&void 0!==i&&i.stripe_id||"Cash"===(null===m||void 0===m?void 0:m.value)||"Wallet"===(null===m||void 0===m?void 0:m.value)||"Points"===(null===m||void 0===m?void 0:m.value))if(m){var _,b;if(f&&"Cash"!==(null===m||void 0===m?void 0:m.value)&&D===(null===(_=Qn.misc_info)||void 0===_?void 0:_.lock)&&lt.id===(null===Yt||void 0===Yt||null===(b=Yt.assigned_to)||void 0===b?void 0:b.id)&&q!==D){var M,Z,E=+(null===f||void 0===f?void 0:f.value)-+(null===f||void 0===f?void 0:f.value)*+(null!==(M=null===Qn||void 0===Qn||null===(Z=Qn.misc_info)||void 0===Z?void 0:Z.rate)&&void 0!==M?M:.2);(0,Ue.e_)({user_id:lt.id,id:(0,_e.mR)(),total:E,product:"CR-".concat($),notes:"Wallet",quantity:1}).pipe((0,g.P)()).subscribe({next:function(){var e;lt.wallet=+(+(null!==(e=null===lt||void 0===lt?void 0:lt.wallet)&&void 0!==e?e:0)+E),Ll()}})}else ee?(0,Oe.Vy)(lt,null===lt||void 0===lt?void 0:lt.options).pipe((0,g.P)()).subscribe({next:function(){Ll()},error:function(){return y.h.dispatch((0,h.Xc)({show:!0,message:"Errors found",color:"red"}))}}):Ll()}else Ll();else Pt.total=+(null===f||void 0===f?void 0:f.value),Pt.plan=+(null===f||void 0===f?void 0:f.value),yl(!0),co(!1)},complete:function(){co(!1)}})):(0,p.LM)({id:w[0].id,selected_fields:(0,i.Z)(k),component_items:Pt.items,options:Pe,status:D,assigned_to:null!==(ye=null===Pt||void 0===Pt?void 0:Pt.assigned_to)&&void 0!==ye?ye:S},"",Gn.processModule.module_id,Jt,$,Xt,(null===(he=Gn.processModule)||void 0===he||null===(ge=he.module)||void 0===ge||null===(be=ge.options)||void 0===be||null===(Ze=be.shares)||void 0===Ze?void 0:Ze.length)>0?[].concat((0,i.Z)(null!==(Ee=null===(ke=Gn.processModule)||void 0===ke||null===(Ie=ke.module)||void 0===Ie||null===(Ne=Ie.options)||void 0===Ne?void 0:Ne.shares)&&void 0!==Ee?Ee:[]),(0,i.Z)(T)):[].concat((0,i.Z)(no),(0,i.Z)(T))).subscribe({next:function(e){var n,t,o,i,d;if(null!==(n=Gn.processModule)&&void 0!==n&&null!==(t=n.module)&&void 0!==t&&null!==(o=t.options)&&void 0!==o&&o.single)return localStorage.setItem(null===(i=Gn.processModule)||void 0===i?void 0:i.module.id,JSON.stringify(e)),void Fl(null===(d=Gn.processModule.steps[0])||void 0===d?void 0:d.id);x.length>0&&Yl(x),Gn.processModule.selectedComponent=e;var a=k.find((function(e){var n;return"People"===e.data_type_name&&!0===(null===(n=e.options)||void 0===n?void 0:n.calendar)}));if(a){var u,r,s=JSON.parse(null!==(u=null===a||void 0===a?void 0:a.value)&&void 0!==u?u:{task:0}),c=st.find((function(e){return e.id===(null===s||void 0===s?void 0:s.task)}));if(c)(0,Re.xJ)((0,l.Z)((0,l.Z)({},c),{},{assignee_id:null===e||void 0===e||null===(r=e.created_by)||void 0===r?void 0:r.id}),null===c||void 0===c?void 0:c.id).pipe((0,g.P)()).subscribe({})}if(k.filter((function(e){return!("Cash"===(null===e||void 0===e?void 0:e.value)||"Wallet"===(null===e||void 0===e?void 0:e.value)||"Points"===(null===e||void 0===e?void 0:e.value))&&"Payments"===e.data_type_name})).length>0)co(!1),yl(!0);else if(k.filter((function(e){return("Wallet"===(null===e||void 0===e?void 0:e.value)||"Points"===(null===e||void 0===e?void 0:e.value))&&"Payments"===e.data_type_name})).length>0){var v,p=k.find((function(e){return"Payments"===e.data_type_name}));(0,Ue.e_)({user_id:lt.id,id:(0,_e.mR)(),total:-Pt.total,product:"DB-".concat($),notes:null!==(v=null===p||void 0===p?void 0:p.value)&&void 0!==v?v:"Wallet",quantity:1}).pipe((0,g.P)()).subscribe({next:function(){var n,t;(0,Oe.Vy)(lt,(0,l.Z)((0,l.Z)({},null===lt||void 0===lt?void 0:lt.options),{},{points:+(+(null!==(n=null===lt||void 0===lt||null===(t=lt.options)||void 0===t?void 0:t.points)&&void 0!==n?n:0)-("Points"===(null===p||void 0===p?void 0:p.value)?+Pt.total:0))})).pipe((0,g.P)()).subscribe({next:function(n){var t,o,l,i;lt.options=n.options,Ao((null===Gn||void 0===Gn||null===(t=Gn.processModule)||void 0===t||null===(o=t.module)||void 0===o||null===(l=o.options)||void 0===l||null===(i=l.message)||void 0===i?void 0:i.length)>0&&1==e.is_complete),y.h.dispatch((0,h.RV)({})),Ll()}})}})}else{var m,f,_,b;co(!1),Ao((null===Gn||void 0===Gn||null===(m=Gn.processModule)||void 0===m||null===(f=m.module)||void 0===f||null===(_=f.options)||void 0===_||null===(b=_.message)||void 0===b?void 0:b.length)>0&&1==e.is_complete),y.h.dispatch((0,h.RV)({})),Ll()}},error:function(e){var n,t,o,l;null!==e&&void 0!==e&&e.data&&(y.h.dispatch((0,h.Xc)({show:!0,message:"Errors found",color:"red"})),null!==x&&Yl(x),Ao((null===Gn||void 0===Gn||null===(n=Gn.processModule)||void 0===n||null===(t=n.module)||void 0===t||null===(o=t.options)||void 0===o||null===(l=o.message)||void 0===l?void 0:l.length)>0&&1==(null===e||void 0===e?void 0:e.data.is_complete)),y.h.dispatch((0,h.RV)({})),Ll())},complete:function(){co(!1)}})):(y.h.dispatch((0,h.Xc)({show:!0,message:"There are no items to be saved",color:"red"})),window.scrollTo({top:0,behavior:"smooth"}))},Yl=function(e){if((null===e||void 0===e?void 0:e.length)>0){var n,t=null!==(n=Qn.misc_info)&&void 0!==n?n:{};e.filter((function(e){var n;t[e]=+(null!==(n=t[e])&&void 0!==n?n:1)+1})),co(!0),(0,_.x5)({misc_info:t}).pipe((0,g.P)()).subscribe({})}},zl=function(){St("Fill up all the required fields"),window.scrollTo({top:0,behavior:"smooth"}),_t(!1)},Vl=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=arguments.length>2?arguments[2]:void 0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],i=n.filter((function(n){return n.module_id===e})).filter((function(e){var n,i;return l.length>0?l.includes(e.id):""===t?e:(null===(n=e.title)||void 0===n?void 0:n.toUpperCase().includes(null===t||void 0===t?void 0:t.toUpperCase()))||(null===(i=e.component_fields.filter((function(e){var n,l,i,d,a,u;return"Record"===e.data_type_name?null===(n=Jn.find((function(n){var t;return(null===(t=n.component_fields.filter((function(n){return n.field_name===e.options.output&&n.component_blueprint_id===e.options.component_id&&n.value===(null===e||void 0===e?void 0:e.value)})))||void 0===t?void 0:t.length)>0})))||void 0===n||null===(l=n.component_fields.find((function(n){var t;return null===(t=e.options)||void 0===t?void 0:t.names.includes(n.field_name)})).value)||void 0===l?void 0:l.toUpperCase().includes(null===t||void 0===t?void 0:t.toUpperCase()):void 0!==o?("date"===e.data_type?null===(i=z()(new Date(null===e||void 0===e?void 0:e.value)))||void 0===i?void 0:i.format("DD MMM YYYY").includes(t):null===e||void 0===e||null===(d=e.value)||void 0===d?void 0:d.includes(t))&&e.field_name===o:"date"===e.data_type?null===(a=z()(new Date(null===e||void 0===e?void 0:e.value)))||void 0===a?void 0:a.format("DD MMM YYYY").includes(t):null===e||void 0===e||null===(u=e.value)||void 0===u?void 0:u.toUpperCase().includes(null===t||void 0===t?void 0:t.toUpperCase())})))||void 0===i?void 0:i.length)>0}));return i},Wl=function(e){var n,t,d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:jo,a=F.Z([ke.Z(j.Z("created_date"))])(d.filter((function(e){return e.created_by.id===(null===lt||void 0===lt?void 0:lt.id)?e:"Expired"!==e.status}))).map((function(n){var t,i,d,a,u,r,s,c,v,p,m={};e.list.map((function(e){var t=n.component_fields.find((function(n){return n.field_name===e}));if(void 0!=t)if("People"===t.data_type_name)m=(0,l.Z)((0,l.Z)({},m),{},(0,o.Z)({},e,t.value));else if("Positions"===t.data_type_name){var i,d;m=(0,l.Z)((0,l.Z)({},m),{},(0,o.Z)({},e,null!==(i=null===(d=it.find((function(e){return e.value===t.value})))||void 0===d?void 0:d.label)&&void 0!==i?i:""))}else if("Date"===t.data_type_name){var a,u=new Date(null===t||void 0===t||null===(a=t.value)||void 0===a?void 0:a.split(",")[0]);m=(0,l.Z)((0,l.Z)({},m),{},(0,o.Z)({},e,z()(u).format("DD MMM YYYY")))}else if("Record"===t.data_type_name||"Component"===t.data_type_name){var r;m=(0,l.Z)((0,l.Z)({},m),{},(0,o.Z)({},e,A.tq?"".concat(null===t||void 0===t?void 0:t.value.slice(1,20)):"".concat(null===t||void 0===t?void 0:t.value))),null===(r=Jn.find((function(e){var n;return(null===(n=e.component_fields.filter((function(e){return e.field_name===t.options.output&&e.component_blueprint_id===t.options.component_id&&e.value===(null===t||void 0===t?void 0:t.value)})))||void 0===n?void 0:n.length)>0})))||void 0===r||r.component_fields.filter((function(e){m=(0,l.Z)((0,l.Z)({},m),{},(0,o.Z)({},e.field_name,A.tq?e.value.slice(1,20):e.value))}))}else if("Filters"===t.data_type_name){var s;m=(0,l.Z)((0,l.Z)({},m),{},(0,o.Z)({},e,A.tq?"".concat(null===t||void 0===t?void 0:t.value.slice(1,20)):"".concat(null===t||void 0===t?void 0:t.value))),null===(s=Jn.find((function(e){var n;return(null===(n=e.component_fields.filter((function(e){return e.field_name===t.options.output&&e.component_blueprint_id===t.options.component_id&&e.value===(null===t||void 0===t?void 0:t.value)})))||void 0===n?void 0:n.length)>0})))||void 0===s||s.component_fields.filter((function(e){m=(0,l.Z)((0,l.Z)({},m),{},(0,o.Z)({},e.field_name,A.tq?e.value.slice(1,20):e.value))}))}else if("Status"===t.data_type_name){var c;if(0==n.is_complete)m=(0,l.Z)((0,l.Z)({},m),{},(0,o.Z)({},e,"Draft"));else m=(0,l.Z)((0,l.Z)({},m),{},(0,o.Z)({},e,"".concat(null!==(c=null===n||void 0===n?void 0:n.status)&&void 0!==c?c:null===t||void 0===t?void 0:t.value)))}else{var v,p;m=(0,l.Z)((0,l.Z)({},m),{},(0,o.Z)({},e,A.tq?null===t||void 0===t||null===(v=t.value)||void 0===v?void 0:v.slice(1,20).split(",")[0]:null===t||void 0===t||null===(p=t.value)||void 0===p?void 0:p.split(",")[0]))}})),(null===n||void 0===n||null===(t=n.component_items)||void 0===t?void 0:t.length)>0&&(m=(0,l.Z)((0,l.Z)({},m),{},(0,o.Z)({},"Total Qty",n.component_items.reduce((function(e,n){return e+ +n.quantity}),0)))),(null===n||void 0===n||null===(i=n.shared_positions)||void 0===i?void 0:i.length)>0&&(m=(0,l.Z)((0,l.Z)({},m),{},{Shares:null===n||void 0===n?void 0:n.shared_positions.map((function(e){var n;return null===(n=it.find((function(n){return n.value===e.id})))||void 0===n?void 0:n.label})).toString()}));var f=new Date(n.created_date);return m=(0,l.Z)((0,l.Z)({},m),{},(v={id:n.id},(0,o.Z)(v,"Created By","".concat(null===n||void 0===n||null===(d=n.created_by)||void 0===d?void 0:d.first_name," ").concat(null===n||void 0===n||null===(a=n.created_by)||void 0===a?void 0:a.last_name)),(0,o.Z)(v,"Created Date",z()(f).format("DD MMM YYYY")),(0,o.Z)(v,"Assigned To","".concat(null!==(u=null===n||void 0===n||null===(r=n.assigned_to)||void 0===r?void 0:r.first_name)&&void 0!==u?u:""," ").concat(null!==(s=null===n||void 0===n||null===(c=n.assigned_to)||void 0===c?void 0:c.last_name)&&void 0!==s?s:"")),(0,o.Z)(v,"Status",0==n.is_complete?"Draft":null===n||void 0===n?void 0:n.status),(0,o.Z)(v,"Title",n.title),(0,o.Z)(v,"items",n.component_items),(0,o.Z)(v,Gn.processModule.module.name,n.title),v)),null===e||void 0===e||null===(p=e.reports)||void 0===p||p.filter((function(e){return"Formula"===e.data_type_name})).map((function(e){var t=(0,_e.LV)(e.options,e.options.list.map((function(e){var n;return{value:null!==(n=m[e])&&void 0!==n?n:0}})),Jn.filter((function(e){var n,t;return e.module_id===(null===Gn||void 0===Gn||null===(n=Gn.processModule)||void 0===n||null===(t=n.module)||void 0===t?void 0:t.id)})),null===n||void 0===n?void 0:n.component_items);m=(0,l.Z)((0,l.Z)({},m),{},(0,o.Z)({},e.field_name,"".concat(t)))})),m}));null===e||void 0===e||null===(n=e.reports)||void 0===n||n.filter((function(e){return"List Filter"===e.data_type_name})).map((function(e){a=a.filter((function(n){var t,o;return n[null===(t=e.options)||void 0===t?void 0:t.field]===(null===(o=e.options)||void 0===o?void 0:o.value)}))}));var u=null===e||void 0===e||null===(t=e.reports)||void 0===t?void 0:t.find((function(e){return"Transaction List"===e.data_type_name}));if(u){var r=[];a.map((function(e){e.items.filter((function(n){var t=(0,l.Z)({},e);Object.keys(u.options.map).map((function(e){t[u.options.map[e]]=n[e]})),r=[].concat((0,i.Z)(r),[t])})),delete e.items})),a=r}return a},Xl=function(){return(0,i.Z)(new Set(Wo.filter((function(e){return void 0!==e.Status})).map((function(e){return e.Status})))).map((function(e){return{label:e,value:e}}))},Gl=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Wo,t=JSON.parse(JSON.stringify(n));e.filter((function(e,o){"status"===e.type?t="OR"===el.operator?[].concat((0,i.Z)(0==o?[]:t),(0,i.Z)(n.filter((function(n){return n.Status===e.value})))):t.filter((function(n){return n.Status===e.value})):"user"===e.type?t="OR"===el.operator?[].concat((0,i.Z)(0==o?[]:t),(0,i.Z)(n.filter((function(n){return n["Created By"]===e.label})))):t.filter((function(n){return n["Created By"]===e.label})):"fields"===e.type&&(t="OR"===el.operator?[].concat((0,i.Z)(0==o?[]:t),(0,i.Z)(n.filter((function(n){return n[e.filter]===e.value})))):t.filter((function(n){return n[e.filter]===e.value})))})),Xo(t)},Hl=function(){var e;return a.createElement("div",{style:{display:""}},a.createElement(de.Z,{value:null!==(e=el.operator)&&void 0!==e?e:"AND",className:u.dropdownSelectOperation,items:[{label:"AND",value:"AND"},{label:"OR",value:"OR"}],onChange:function(e){nl((0,l.Z)((0,l.Z)({},el),{},{operator:e}))}}))},Ql=function(){return a.createElement("div",{style:{alignSelf:"flex-end",display:Tl.component_blueprints.filter((function(e){var n;return 1==(null===(n=e.options)||void 0===n?void 0:n.asReport)})).length>0?"flex":"none"}},a.createElement(oe.Z,{light:!0,clicked:function(){Ro?(nl({list:[],operator:"AND"}),Yo(Jn.filter((function(e){var n,t;return e.module_id===(null===Gn||void 0===Gn||null===(n=Gn.processModule)||void 0===n||null===(t=n.module)||void 0===t?void 0:t.id)})))):Yo([]),Jo([]),Bo(!Ro)},style:Ro?{height:"36px"}:{},icon:a.createElement("img",{src:Ro?r.hFT:s.aRA})}),1==Ro&&a.createElement(a.Fragment,null,a.createElement(de.Z,{className:u.dropdownSelectReport,items:Tl.component_blueprints.filter((function(e){var n,t,o;return 1==(null===(n=e.options)||void 0===n?void 0:n.asReport)&&(void 0===(null===(t=e.options)||void 0===t?void 0:t.showOnly)||0==(null===(o=e.options)||void 0===o?void 0:o.showOnly.length)||lt.positions.filter((function(n){var t,o;return null===(t=e.options)||void 0===t||null===(o=t.showOnly)||void 0===o?void 0:o.includes(n.id)})).length>0)})).map((function(e){return{label:null===e||void 0===e?void 0:e.name,value:e.id,blueprint:e}})),visible:!0,onChange:function(e){var n,t;Yo(Jn.filter((function(e){var n,t;return e.module_id===(null===Gn||void 0===Gn||null===(n=Gn.processModule)||void 0===n||null===(t=n.module)||void 0===t?void 0:t.id)})));var o=[];F.Z([L.Z(j.Z("index"))])(Tl.component_blueprints.find((function(n){return n.id===e})).selected_fields.filter((function(e){return 1==e.visible}))).map((function(e){o=[].concat((0,i.Z)(o),[e.field_name]),"Info"===e.data_type_name?e.options.list.map((function(e){return o=[].concat((0,i.Z)(o),[e])})):"Transaction List"===e.data_type_name&&Object.values(e.options.map).map((function(e){return o=[].concat((0,i.Z)(o),[e])}))})),nl({list:(0,i.Z)(new Set(o)),title:null===(n=Tl.component_blueprints.find((function(n){return n.id===e})))||void 0===n?void 0:n.name,reports:F.Z([ke.Z(j.Z("index"))])(Tl.component_blueprints.find((function(n){return n.id===e})).selected_fields).map((function(e){return{field_name:e.field_name,data_type_name:e.data_type_name,options:e.options}})),operator:"AND"}),Xo(Wl({list:(0,i.Z)(new Set(o)),title:null===(t=Tl.component_blueprints.find((function(n){return n.id===e})))||void 0===t?void 0:t.name,reports:F.Z([ke.Z(j.Z("index"))])(Tl.component_blueprints.find((function(n){return n.id===e})).selected_fields).map((function(e){return{field_name:e.field_name,data_type_name:e.data_type_name,options:e.options}})),operator:"AND"},Jn.filter((function(e){var n,t;return e.module_id===(null===Gn||void 0===Gn||null===(n=Gn.processModule)||void 0===n||null===(t=n.module)||void 0===t?void 0:t.id)}))))},placeholder:"Reports"})))},Jl=function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.keys(n[0]),l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null===(e=Gn.processModule.module)||void 0===e?void 0:e.name;return a.createElement(oe.Z,{light:!0,title:(null===el||void 0===el?void 0:el.title)&&"Export as file",clicked:function(){var e,d,a,u=Ro?t:1==(null===(e=Gn.processModule.module)||void 0===e||null===(d=e.options)||void 0===d?void 0:d.isMaster)?[].concat((0,i.Z)(t),["Shares","Title"]):t,r=Te.utils.book_new(),s=Te.utils.json_to_sheet([]);Te.utils.sheet_add_aoa(s,[u]),Te.utils.sheet_add_json(s,n.map((function(e){return Object.assign.apply(Object,[{}].concat((0,i.Z)(u.map((function(n){return(0,o.Z)({},n,e[n])})))))})),{origin:"A2",skipHeader:!0}),Te.utils.book_append_sheet(r,s,"".concat(null===(a=Gn.processModule.module)||void 0===a?void 0:a.name)),(0,Te.writeFile)(r,"".concat(l).concat((0,Y.now)(),".xlsx"))},cicon:a.createElement("img",{src:s.so})},a.createElement("img",{src:s.so}))},Kl=null===Yt||void 0===Yt||null===(q=Yt.component_fields)||void 0===q||null===(U=q.find((function(e){return"Status"===e.data_type_name})))||void 0===U?void 0:U.value,$l=[];null===Gn||void 0===Gn||null===(O=Gn.processModule)||void 0===O||null===(V=O.steps)||void 0===V||V.filter((function(e){return null===e||void 0===e?void 0:e.component_blueprints.filter((function(e){var n,t;return(null===(n=e.options)||void 0===n||null===(t=n.showOnly)||void 0===t?void 0:t.length)>0}))})).filter((function(e){e.component_blueprints.filter((function(e){var n,t;return(null===(n=e.options)||void 0===n||null===(t=n.showOnly)||void 0===t?void 0:t.length)>0})).filter((function(e){e.options.showOnly.filter((function(e){$l=[].concat((0,i.Z)($l),[e])}))}))}));var ei=(null===Gn||void 0===Gn||null===(W=Gn.processModule)||void 0===W||null===(H=W.steps)||void 0===H?void 0:H.length)>0?null===Gn||void 0===Gn||null===(Q=Gn.processModule)||void 0===Q||null===(J=Q.steps)||void 0===J||null===(K=J.find((function(e){return(null===e||void 0===e?void 0:e.component_blueprints.filter((function(e){return e.selected_fields.filter((function(e){return"Freehand"===e.data_type_name})).length>0})).length)>0})))||void 0===K||null===($=K.component_blueprints.find((function(e){var n;return(null===(n=e.selected_fields.filter((function(e){return"Freehand"===e.data_type_name})))||void 0===n?void 0:n.length)>0})))||void 0===$||null===(ee=$.options)||void 0===ee?void 0:ee.showOnly:void 0,ni=(null===Gn||void 0===Gn||null===(ne=Gn.processModule)||void 0===ne||null===(te=ne.steps)||void 0===te?void 0:te.length)>0?null===Gn||void 0===Gn||null===(le=Gn.processModule)||void 0===le||null===(ae=le.steps)||void 0===ae||null===(ue=ae.find((function(e){return(null===e||void 0===e?void 0:e.component_blueprints.filter((function(e){return e.selected_fields.filter((function(e){return"Action Button"===e.data_type_name})).length>0})).length)>0})))||void 0===ue||null===(re=ue.component_blueprints.find((function(e){var n;return(null===(n=e.selected_fields.filter((function(e){return"Action Button"===e.data_type_name})))||void 0===n?void 0:n.length)>0})))||void 0===re||null===(se=re.options)||void 0===se?void 0:se.showOnly:void 0,ti=function(){var e,n,t,o;return a.createElement("div",{className:u.menuAccordionButtons},Gn.processModule.stepIndex>0&&a.createElement(oe.Z,{title:"Cancel",light:!0,clicked:function(){Pt.components.length>0||Pt.newStepComponents.length>0?Cl(!0):(Gn.processModule.back_array=[],Yo(Jn.filter((function(e){var n,t;return e.module_id===(null===Gn||void 0===Gn||null===(n=Gn.processModule)||void 0===n||null===(t=n.module)||void 0===t?void 0:t.id)}))),Fl(Gn.processModule.steps[0].id),pl(!1))}}),Gn.processModule.stepIndex>0&&a.createElement(oe.Z,{title:"Back",light:!0,style:{width:"80px"},clicked:function(){var e,n,t;if(1==Gn.processModule.stepIndex&&Yo(Jn.filter((function(e){var n,t;return e.module_id===(null===Gn||void 0===Gn||null===(n=Gn.processModule)||void 0===n||null===(t=n.module)||void 0===t?void 0:t.id)}))),1==(null===Tl||void 0===Tl||null===(e=Tl.options)||void 0===e?void 0:e.deleteOnBack)&&Tl.component_blueprints.filter((function(e){return e.selected_fields.filter((function(e){return"output"!==e.data_type})).map((function(e){e.value=void 0}))})),(null===Gn||void 0===Gn||null===(n=Gn.processModule)||void 0===n||null===(t=n.back_array)||void 0===t?void 0:t.length)>0){var o,l=null===Gn||void 0===Gn||null===(o=Gn.processModule)||void 0===o?void 0:o.back_array.pop();l&&Fl(l)}else{var i;Fl(null===(i=Gn.processModule.steps[Gn.processModule.stepIndex-1])||void 0===i?void 0:i.id)}}}),!0===(null===Tl||void 0===Tl?void 0:Tl.is_end)?a.createElement(oe.Z,{disabled:!1===(null===Qn||void 0===Qn?void 0:Qn.start),title:Bt?"Update":Xt&&null!==(e=null===Gn||void 0===Gn||null===(n=Gn.processModule)||void 0===n||null===(t=n.module)||void 0===t||null===(o=t.options)||void 0===o?void 0:o.save)&&void 0!==e?e:"Save",loading:so,style:{width:"160px",marginLeft:"0px",display:Pt.components.length>0||Pt.newStepComponents.length>0?"":"none"},clicked:function(){var e,n,t,o,l,i;return vl?St("Saving is not allowed in Edit Mode"):1==(null===Gn||void 0===Gn||null===(e=Gn.processModule)||void 0===e||null===(n=e.module)||void 0===n||null===(t=n.options)||void 0===t?void 0:t.emailOutputs)&&1==(null===Gn||void 0===Gn||null===(o=Gn.processModule)||void 0===o||null===(l=o.module)||void 0===l||null===(i=l.options)||void 0===i?void 0:i.selectiveEmail)&&Xt?Eo(!0):jl()}}):a.createElement(oe.Z,{disabled:!1===(null===Qn||void 0===Qn?void 0:Qn.start),title:"Next",style:{width:"80px"},clicked:function(){var e,n,t,o,l,i,d,a,u;Array.isArray(null===Gn||void 0===Gn||null===(e=Gn.processModule)||void 0===e?void 0:e.back_array)||(Gn.processModule.back_array=[]),null===Gn||void 0===Gn||null===(n=Gn.processModule)||void 0===n||n.back_array.push(null===Pt||void 0===Pt||null===(t=Pt.currentStep)||void 0===t?void 0:t.id);var r,s,c,v,p,m=null===(o=Tl.component_blueprints.find((function(e){return e.selected_fields.filter((function(e){var n,t;return"Dropdown"===e.data_type_name&&(null===(n=e.options)||void 0===n?void 0:n.jump1)&&"decision"===(null===(t=e.options)||void 0===t?void 0:t.type)})).length>0})))||void 0===o||null===(l=o.selected_fields)||void 0===l?void 0:l.find((function(e){var n;return"Dropdown"===e.data_type_name&&(null===(n=e.options)||void 0===n?void 0:n.jump1)})),f=null===(i=Tl.component_blueprints.find((function(e){return e.selected_fields.filter((function(e){var n;return"Value Button"===e.data_type_name&&(null===(n=e.options)||void 0===n?void 0:n.jump1)})).length>0})))||void 0===i||null===(d=i.selected_fields)||void 0===d?void 0:d.filter((function(e){var n;return"Value Button"===e.data_type_name&&(null===(n=e.options)||void 0===n?void 0:n.jump1)}));if(null!==m&&void 0!==m&&null!==(a=m.options)&&void 0!==a&&a.jump1&&null!==m&&void 0!==m&&null!==(u=m.options)&&void 0!==u&&u.jump2)if(0==(null===m||void 0===m||null===(r=m.options)||void 0===r?void 0:r.list.indexOf(null===m||void 0===m?void 0:m.value)))Rl(null===(c=rt.find((function(e){var n;return e.id===(null===m||void 0===m||null===(n=m.options)||void 0===n?void 0:n.process)})))||void 0===c||null===(v=c.steps)||void 0===v||null===(p=v.find((function(e){return e.id===(null===m||void 0===m?void 0:m.options.jump1)})))||void 0===p?void 0:p.id);else if(1==(null===m||void 0===m||null===(s=m.options)||void 0===s?void 0:s.list.indexOf(null===m||void 0===m?void 0:m.value))){var _,g,b;Rl(null===(_=rt.find((function(e){var n;return e.id===(null===m||void 0===m||null===(n=m.options)||void 0===n?void 0:n.process)})))||void 0===_||null===(g=_.steps)||void 0===g||null===(b=g.find((function(e){return e.id===(null===m||void 0===m?void 0:m.options.jump2)})))||void 0===b?void 0:b.id)}else{var M;null===Gn||void 0===Gn||null===(M=Gn.processModule)||void 0===M||M.back_array.pop(),y.h.dispatch((0,h.Xc)({show:!0,message:"Please select a value for ".concat(null===m||void 0===m?void 0:m.field_name),color:"red",bottom:!1}))}else if((null===f||void 0===f?void 0:f.length)>0){var Z,E,S,C,w,x=f.filter((function(e){return void 0!==e.value}));if(1==x.length)Rl(null===(Z=rt.find((function(e){var n,t;return e.id===(null===(n=x[0])||void 0===n||null===(t=n.options)||void 0===t?void 0:t.process)})))||void 0===Z||null===(E=Z.steps)||void 0===E||null===(S=E.find((function(e){var n;return e.id===(null===(n=x[0])||void 0===n?void 0:n.options.jump1)})))||void 0===S?void 0:S.id);else null===Gn||void 0===Gn||null===(C=Gn.processModule)||void 0===C||null===(w=C.back_array)||void 0===w||w.pop(),y.h.dispatch((0,h.Xc)({show:!0,message:"A selection is required",color:"red",bottom:!1})),window.scrollTo({top:0,behavior:"smooth"})}else if((null===Tl||void 0===Tl?void 0:Tl.next_steps.length)>1||ql.length>1||Al.length>1)_t(!ft);else if(1===Tl.next_steps.length){var k;Rl(null===Tl||void 0===Tl||null===(k=Tl.next_steps[0])||void 0===k?void 0:k.id)}else{var I;Rl(null===(I=Gn.processModule.steps[Gn.processModule.steps.findIndex((function(e){return e.id===Tl.id}))+1])||void 0===I?void 0:I.id)}}}),ft&&a.createElement("div",{className:u.goToNextStep},null===Tl||void 0===Tl?void 0:Tl.next_steps.map((function(e,n){return a.createElement("div",{key:n,onClick:function(){return Rl(e.id)},className:u.nextStepsContainer},a.createElement("div",{className:u.nextStepImageContainer},a.createElement("img",{alt:"",src:r.c6V})),a.createElement("p",null,null===e||void 0===e?void 0:e.name))})),null===ql||void 0===ql?void 0:ql.map((function(e,n){return a.createElement("div",{key:n,onClick:function(){return Rl(e.id)},className:u.nextStepsContainer},a.createElement("div",{className:u.nextStepImageContainer},a.createElement("img",{alt:"",src:r.th9})),a.createElement("p",null,null===e||void 0===e?void 0:e.name))})),null===Al||void 0===Al?void 0:Al.map((function(e,n){return a.createElement("div",{key:n,onClick:function(){return function(e){y.h.dispatch((0,h.pU)(e)),_t(!1)}(e)},className:u.nextStepsContainer},a.createElement("div",{className:u.nextStepImageContainer},a.createElement("img",{alt:"",src:r.IR8})),a.createElement("p",null,null===e||void 0===e?void 0:e.name))}))))};return a.createElement("div",{className:u.processStepHost,style:{backgroundColor:A.tq?"":!0===(null===Tl||void 0===Tl||null===(ce=Tl.options)||void 0===ce?void 0:ce.popup)?"var(--app-color-white-lightest)":""}},a.createElement("div",{className:u.centeredCardMargin,"app-variant-is-mobile":A.tq?"true":"false"},1==(null===Tl||void 0===Tl?void 0:Tl.rank)&&a.createElement(pe,{title:null===Gn||void 0===Gn||null===(ve=Gn.processModule)||void 0===ve||null===(fe=ve.module)||void 0===fe?void 0:fe.name,subtitle:A.tq?"":null===Gn||void 0===Gn||null===(De=Gn.processModule)||void 0===De?void 0:De.description,customStyle:{width:A.tq?"100%":"94%",minWidth:A.tq?"100px":"94%"},cardClicked:function(){tt(null===Gn||void 0===Gn?void 0:Gn.processModule),fo(!mo)}})),mo&&1==(null===Tl||void 0===Tl?void 0:Tl.rank)&&a.createElement("div",{className:u.centeredCardMargin,"app-variant-is-mobile":A.tq?"true":"false"},a.createElement(pe,{description:"Steps:",customStyle:{width:A.tq?"100%":"94%",minWidth:A.tq?"100px":"94%"}},a.createElement(ye.FZ,null,a.createElement(me.Z,null)))),ot,a.createElement("div",{className:u.centeredCardMargin,"app-variant-is-mobile":A.tq?"true":"false"},1===vt&&void 0===(null===Tl||void 0===Tl?void 0:Tl.component_blueprints)?a.createElement("div",{className:u.centeredSpinner},a.createElement(v.$j,{size:80,type:"ThreeDots"})):(null===Tl||void 0===Tl||null===(ze=Tl.component_blueprints)||void 0===ze?void 0:ze.filter((function(e){var n;return 1==(null===(n=e.options)||void 0===n?void 0:n.asModuleList)})).length)>0?null===Tl||void 0===Tl||null===(We=Tl.component_blueprints)||void 0===We?void 0:We.filter((function(e){var n,t,o;return 1==e.options.asModuleList&&(lt.positions.filter((function(n){var t,o;return null===(t=e.options)||void 0===t||null===(o=t.showOnly)||void 0===o?void 0:o.includes(n.id)})).length>0||0==(null===(n=e.options)||void 0===n||null===(t=n.showOnly)||void 0===t?void 0:t.length)||void 0===(null===(o=e.options)||void 0===o?void 0:o.showOnly))})).map((function(e,n){var t;return a.createElement(a.Fragment,{key:n},a.createElement(B.default,{className:u.listContainer,isReport:Ro,"app-variant-is-mobile":A.tq?"true":"false",title:Ro?"Reports":null===Tl||void 0===Tl?void 0:Tl.name,columns:(null===(t=Jn.filter((function(e){var n,t;return e.module_id===(null===Gn||void 0===Gn||null===(n=Gn.processModule)||void 0===n||null===(t=n.module)||void 0===t?void 0:t.id)})))||void 0===t?void 0:t.filter((function(e){var n;return 0===(null===(n=e.component_fields)||void 0===n?void 0:n.length)})).length)>0||A.tq?[Gn.processModule.module.name]:(0,i.Z)(new Set(e.selected_fields.filter((function(e){return 1==e.visible&&"Info"===e.data_type_name})).map((function(e){var n;return null===(n=e.options)||void 0===n?void 0:n.list})).flat().concat(Ro?el.list:F.Z([L.Z(j.Z("index"))])(e.selected_fields.filter((function(e){return 1==e.visible&&"Info"!==e.data_type_name}))).map((function(e){return e.field_name}))))),list:Ro?Wo:Wl({list:e.selected_fields.filter((function(e){return"Info"===e.data_type_name})).map((function(e){var n,t;return null!==(n=null===e||void 0===e||null===(t=e.options)||void 0===t?void 0:t.key)&&void 0!==n?n:e.field_name})).concat(e.selected_fields.filter((function(e){return 1==e.visible})).map((function(e){return e.field_name})))}),addClicked:function(){Bl(),zt({})},onListItemClick:function(e){var n,t;if(!Ro){var o,l,i,d=Jn.find((function(n){return n.id===e.id}));if(0===(null===(n=d.component_fields)||void 0===n?void 0:n.length))return co(!0),void(0,p.r6)(d.id).pipe((0,g.P)()).subscribe({next:function(e){zt(e),Gt(e.is_complete),Ut(!0),ao(!1),co(!1)},error:function(){}});if(zt(d),Gt(d.is_complete),ao(!1),null!==d&&void 0!==d&&null!==(t=d.assigned_to)&&void 0!==t&&t.id&&!et.find((function(e){var n;return e.id===(null===d||void 0===d||null===(n=d.assigned_to)||void 0===n?void 0:n.id)})))(0,Oe.VG)(et.find((function(e){var n;return e.id===(null===(n=d.created_by)||void 0===n?void 0:n.id)}))?[null===d||void 0===d||null===(o=d.assigned_to)||void 0===o?void 0:o.id]:[null===d||void 0===d||null===(l=d.assigned_to)||void 0===l?void 0:l.id,null===d||void 0===d||null===(i=d.created_by)||void 0===i?void 0:i.id]).pipe((0,g.P)()).subscribe({next:function(e){y.h.dispatch((0,h.NY)(et.concat(e))),Ut(!0)}});else Ut(!0)}},pages:Gn.processModule.module.count,onPageClicked:function(e){var n=Jn.filter((function(e){return e.module_id===Gn.processModule.module.id}));if(12345===e){var t;n.length<(null===(t=Gn.processModule.module)||void 0===t?void 0:t.count)&&(0,ge.vC)(Gn.processModule.module,_e.Qc,999999,1).pipe((0,b.q)(1)).subscribe({next:function(e){var n;co(!1),Gn.processModule.module.lastUpdate=0,Gn.processModule.module.count=null!==(n=null===e||void 0===e?void 0:e.total)&&void 0!==n?n:0}})}else{var o,l,i=Math.ceil((null!==(o=Gn.processModule.module)&&void 0!==o&&o.count?+(null===(l=Gn.processModule.module)||void 0===l?void 0:l.count):n.length)/_e.ZP);A.tq&&i>7&&(i=7);var d=Math.ceil(n.length/_e.ZP),a=e;a>d&&(co(!0),$n.componentsByModule[Gn.processModule.module.name]=0,(0,ge.vC)(Gn.processModule.module,_e.Qc,a-d<=1?_e.ZP:_e.ZP*a,a-d<=1?a:1).pipe((0,b.q)(1)).subscribe({next:function(e){var n;co(!1),$n.componentsByModule[Gn.processModule.module.name]=(0,Y.now)(),Gn.processModule.module.lastUpdate=0,Gn.processModule.module.count=null!==(n=null===e||void 0===e?void 0:e.total)&&void 0!==n?n:0}}))}}},a.createElement("div",null,a.createElement("div",{style:{display:"flex"}},Qo.length>0&&a.createElement(oe.Z,{title:"Show all",clicked:function(){Yo(Jn.filter((function(e){var n,t;return e.module_id===(null===Gn||void 0===Gn||null===(n=Gn.processModule)||void 0===n||null===(t=n.module)||void 0===t?void 0:t.id)}))),nl((0,l.Z)((0,l.Z)({},el),{},{filter:void 0})),Xo(Wl((0,l.Z)((0,l.Z)({},el),{},{filter:void 0})))},style:{height:"30px",width:"140px"}}),Qo.map((function(e,n){return a.createElement(oe.Z,{className:u.customButton,icon:a.createElement("img",{src:r.C7j,style:{height:"16px",width:"16px"}}),clicked:function(){Jo(Qo.filter((function(n){return n.value!==e.value}))),Gl(Qo.filter((function(n){return n.value!==e.value})),Wl((0,l.Z)((0,l.Z)({},el),{},{filter:void 0})))},key:n,style:{height:"30px",width:"inherit"}},"".concat(0==n?"":e.operator," ").concat(e.label))})),Qo.length>0&&a.createElement(oe.Z,{title:"Apply",style:{height:"30px",width:"160px"},clicked:function(){Gl(Qo,Wl((0,l.Z)((0,l.Z)({},el),{},{filter:void 0})))},light:!0})),Ro&&a.createElement("div",{style:{display:"flex"}},Hl(),Xl().length>0&&a.createElement(de.Z,{className:u.dropdownSelectComponent,items:Xl(),onChange:function(e){Qo.map((function(e){return e.label})).includes(e)||Jo([].concat((0,i.Z)(Qo),[{label:e,value:e,type:"status",operator:el.operator}]))},placeholder:"Status"}),Ro&&a.createElement(de.Z,{className:u.dropdownSelectComponent,items:el.list.map((function(e){return{label:e,value:e}})),onChange:function(e){nl((0,l.Z)((0,l.Z)({},el),{},{filter:void 0})),setTimeout((function(){return nl((0,l.Z)((0,l.Z)({},el),{},{filter:e}))}),10)},placeholder:"Filter by fields"}),1==Ro&&void 0!==(null===el||void 0===el?void 0:el.filter)&&a.createElement(de.Z,{className:u.dropdownSelectComponentL,items:(0,i.Z)(new Set(Wl(el).map((function(e){return e[el.filter]})))).map((function(e){return{label:e,value:e}})),onChange:function(e){Qo.map((function(e){return e.value})).includes(e)||Jo([].concat((0,i.Z)(Qo),[{label:"".concat(el.filter,": ").concat(e),value:e,type:"fields",filter:el.filter,operator:el.operator}]))},placeholder:"Field value"}),1==Ro&&a.createElement(de.Z,{className:u.dropdownSelectComponent,items:et.map((function(e){return{label:"".concat(e.first_name," ").concat(e.last_name),value:e.id}})),onChange:function(e){if(!Qo.map((function(e){return e.label})).includes(e)){var n=et.find((function(n){return n.id===e}));Jo([].concat((0,i.Z)(Qo),[{label:"".concat(n.first_name," ").concat(n.last_name),value:e,type:"user",operator:el.operator}]))}},placeholder:"Created by"}))),a.createElement("div",{className:u.actionsContainer},!(null!==el&&void 0!==el&&el.title)&&Ro&&a.createElement("label",{style:{padding:"20px 0px 20px 5px",fontSize:"12px"}},"OR"===el.operator?"Selecting OR will select all instances of selected value":"Selecting AND will only include instances of selected value"),Ro?(null===el||void 0===el?void 0:el.title)&&Jl(Wo,el.list,el.title):a.createElement("div",{className:u.searchContainer},a.createElement(X.G,{icon:G.wn1,style:{width:"25px",height:"25px",padding:"5px"}}),a.createElement("input",{placeholder:"Search",className:u.searchInput,onChange:function(e){var n,t,o;if("deleteContentBackward"===e.nativeEvent.inputType)Yo(Vl(null===Gn||void 0===Gn||null===(t=Gn.processModule)||void 0===t||null===(o=t.module)||void 0===o?void 0:o.id,Jn,e.target.value));else if((null===(n=e.target.value)||void 0===n?void 0:n.length)>0){var l,i;Yo(Vl(null===Gn||void 0===Gn||null===(l=Gn.processModule)||void 0===l||null===(i=l.module)||void 0===i?void 0:i.id,jo,e.target.value))}else 0==e.target.value.length&&Yo(Jn.filter((function(e){var n,t;return e.module_id===(null===Gn||void 0===Gn||null===(n=Gn.processModule)||void 0===n||null===(t=n.module)||void 0===t?void 0:t.id)})))}})),Ro&&Ql(),a.createElement("div",{style:{display:Ro?"none":"flex",alignSelf:"flex-end"}},!("trial_ended"===Qn.status||"inactive"===Qn.status)&&function(){var e,n,t;return a.createElement(oe.Z,{light:!0,style:{display:1!=(null===Gn||void 0===Gn||null===(e=Gn.processModule)||void 0===e||null===(n=e.module)||void 0===n||null===(t=n.options)||void 0===t?void 0:t.readOnly)||"manager"===lt.user_type||"admin"===lt.user_type?"":"none"},clicked:function(){Bl(),zt({})},icon:a.createElement("img",{src:r.IHx})})}(),!A.tq&&Ql(),!A.tq&&Jl(Wl({list:e.selected_fields.filter((function(e){return 1==e.visible})).map((function(e){return e.field_name}))}),e.selected_fields.filter((function(e){return 1==e.visible})).map((function(e){return e.field_name}))),a.createElement(oe.Z,{light:!0,clicked:function(){co(!0);var e=Hn.find((function(e){return e.id===Gn.processModule.module_id}));$n.componentsByModule[e.name]=0,(0,ge.vC)(e,_e.Qc,_e.R6,1).pipe((0,b.q)(1)).subscribe({next:function(n){var t,o,l,d,a=null!==n&&void 0!==n&&n.data?null===n||void 0===n?void 0:n.data:n;y.h.dispatch((0,h.mK)(Ie.Z(j.Z("created_date"),[].concat((0,i.Z)(Jn.filter((function(e){return e.module_id!==Gn.processModule.module_id}))),(0,i.Z)(a))),_e.KI,at.map((function(e){return e.fields})).flat(1))),$n.componentsByModule[e.name]=(0,Y.now)(),e.lastUpdate=(0,Y.now)(),e.count=null!==(t=null===n||void 0===n?void 0:n.total)&&void 0!==t?t:0,co(!1),null===(o=Gn.processModule.module)||void 0===o||null===(l=o.options)||void 0===l||null===(d=l.supporting)||void 0===d||d.filter((function(n,t){var o,l;co(!0),(0,ge.vC)({id:n,name:null!==(o="".concat(null===Hn||void 0===Hn||null===(l=Hn.find((function(e){return e.id===n})))||void 0===l?void 0:l.name).concat(t))&&void 0!==o?o:"".concat(null===e||void 0===e?void 0:e.name).concat(t)},_e.Qc,_e.R6,1).pipe((0,b.q)(1)).subscribe({next:function(e){var n,o,l;(null===(n=Gn.processModule.module)||void 0===n||null===(o=n.options)||void 0===o||null===(l=o.supporting)||void 0===l?void 0:l.length)==t+1&&co(!1)},error:function(){return co(!1)}})}))},complete:function(){},error:function(){return co(!1)}})},icon:a.createElement("img",{src:r.Fdh}),loading:so})))))})):a.createElement("div",{className:u.listContainer,"app-variant-is-mobile":A.tq?"true":"false",style:{boxShadow:A.tq?"":1==(null===Tl||void 0===Tl||null===(Xe=Tl.options)||void 0===Xe?void 0:Xe.popup)?"0 var(--app-color-white-lightest)":""}},a.createElement("div",{style:{display:"flex",justifyContent:"space-between",width:"100%"}},a.createElement("p",{className:u.stepTitleSmaller},null===Tl||void 0===Tl?void 0:Tl.name),a.createElement(oe.Z,{clear:!0,clicked:function(){var n,t,o;co(!0),null===(n=Gn.processModule.module)||void 0===n||null===(t=n.options)||void 0===t||null===(o=t.supporting)||void 0===o||o.filter((function(n,t){var o,l,i;co(!0),(0,ge.vC)({id:n,name:null!==(o="".concat(null===Hn||void 0===Hn||null===(l=Hn.find((function(e){return e.id===n})))||void 0===l?void 0:l.name).concat(t))&&void 0!==o?o:"".concat(null===(i=e)||void 0===i?void 0:i.name).concat(t)},_e.Qc,_e.R6,1).pipe((0,b.q)(1)).subscribe({next:function(e){var n,o,l,i;(null===(n=Gn.processModule.module)||void 0===n||null===(o=n.options)||void 0===o||null===(l=o.supporting)||void 0===l?void 0:l.length)==t+1&&(co(!1),Fl(null===(i=Gn.processModule.steps[Gn.processModule.stepIndex-1])||void 0===i?void 0:i.id))},error:function(){return co(!1)}})}))},icon:a.createElement("img",{src:r.Fdh}),loading:so})),a.createElement("br",null),a.createElement("label",{className:u.stepGuidanceSmaller},null===Tl||void 0===Tl?void 0:Tl.guidance),Et&&a.createElement(R.Z,{message:Et,onClick:function(){return St("")}}),a.createElement(v.U7,{blured:!1,scrollable:!1,isOpen:!A.tq&&(null!==(Ge=null===Tl||void 0===Tl||null===(He=Tl.options)||void 0===He?void 0:He.popup)&&void 0!==Ge&&Ge),shadowedContainerStyle:{width:A.tq?"100%":"70%",minWidth:"50%"}},a.createElement(Ye,{nextButtonClicked:xt,step:Tl,setIsMandatoryError:bt,isMandatoryError:gt,begunModule:Gn,companyData:Qn,blueprints:at,components:Jn,products:nt,authenticatedUser:lt,isEditing:Kn,companyUsersArray:et,usersArray:ll,setUsers:Kt,setPositions:to,setIsCompleted:Gt,selectedComponent:Yt,goToNextStep:Fl,companyPositionsArray:it,cart:dt,allModules:Hn,editMode:vl},a.createElement("div",{className:u.menuRightButtons}),ti())),(!0!==(null===Tl||void 0===Tl||null===(Qe=Tl.options)||void 0===Qe?void 0:Qe.popup)||A.tq)&&a.createElement(Ye,{nextButtonClicked:xt,step:Tl,setIsMandatoryError:bt,isMandatoryError:gt,begunModule:Gn,companyData:Qn,blueprints:at,components:Jn,products:nt,authenticatedUser:lt,isEditing:Kn,companyUsersArray:et,usersArray:ll,setUsers:Kt,setPositions:to,setIsCompleted:Gt,selectedComponent:Yt,goToNextStep:Fl,companyPositionsArray:it,cart:dt,allModules:Hn,editMode:vl},a.createElement("div",{className:u.menuRightButtons}),ti())),(null===Gn||void 0===Gn||null===(Je=Gn.processModule)||void 0===Je||null===(Ke=Je.module)||void 0===Ke||null===($e=Ke.options)||void 0===$e?void 0:$e.ads)&&kl&&0==(null===Tl||void 0===Tl||null===(en=Tl.component_blueprints)||void 0===en?void 0:en.filter((function(e){var n;return 1==(null===(n=e.options)||void 0===n?void 0:n.asModuleList)})).length)&&a.createElement("div",{style:{textAlign:"center"}},function(e){if(e){var n=F.Z([ke.Z(j.Z("created_date"))])(Jn.filter((function(n){return n.module_id===e.id}))).filter((function(e){var n;return(null===(n=e.component_fields)||void 0===n?void 0:n.filter((function(e){var n;return"Status"===e.data_type_name&&!(e.value===(null===(n=Qn.misc_info)||void 0===n?void 0:n.lock)||"Closed"===e.value||"Cancelled"===e.value||"Hide"===e.value)})).length)>0})).map((function(e,n){var t,o,l,i,d=e.component_fields.find((function(e){var n,t,o;return"Link"===e.data_type_name&&((null!==(n=null===e||void 0===e?void 0:e.value)&&void 0!==n?n:"").includes("jpg")||(null!==(t=null===e||void 0===e?void 0:e.value)&&void 0!==t?t:"").includes("png")||(null!==(o=null===e||void 0===e?void 0:e.value)&&void 0!==o?o:"").includes("pdf"))}));return a.createElement("div",{key:n,className:u.imageCard,onClick:function(){}},d&&(null!==(t="".concat(null===d||void 0===d?void 0:d.value))&&void 0!==t&&t.includes("jpg")||null!==(o="".concat(null===d||void 0===d?void 0:d.value))&&void 0!==o&&o.includes("jpeg")||null!==(l="".concat(null===d||void 0===d?void 0:d.value))&&void 0!==l&&l.includes("png")||null!==(i="".concat(null===d||void 0===d?void 0:d.value))&&void 0!==i&&i.includes("pdf"))&&null!==d&&void 0!==d&&d.value.includes("pdf")?a.createElement("embed",{src:"".concat(null===d||void 0===d?void 0:d.value,"#toolbar=0&navpanes=0&scrollbar=0&zoom=100%"),width:"1000px",height:"1000px"}):a.createElement("img",{alt:"lg",src:null===d||void 0===d?void 0:d.value,style:{objectFit:"contain",height:"100vh",borderRadius:"5px"}}))}));return(null===n||void 0===n?void 0:n.length)>0&&a.createElement(v.U7,{isOpen:kl,onClose:function(){localStorage.setItem("showAdsDate",(0,Y.now)()),Il(!1)},backdropColor:!0,blured:!1,scrollable:!0,shadowedContainerStyle:{width:"60%",minWidth:"600px",backgroundColor:"var(--app-color-gray-lightest)"}},a.createElement("div",{className:u.center,style:{display:(null===n||void 0===n?void 0:n.length)>0?"":"none",flexDirection:"column"}},(null===n||void 0===n?void 0:n.length)>1?a.createElement(Le.tq,{slidesPerView:"auto",centeredSlides:!0,spaceBetween:200,initialSlide:1,pagination:{clickable:!0,dynamicBullets:!0},autoplay:{delay:1e4,disableOnInteraction:!0},modules:[Fe.pt,Fe.tl],className:"mySwiper"},(null===n||void 0===n?void 0:n.length)>0&&n.map((function(e,n){return a.createElement(Le.o5,{key:n,className:u.swiperslide},e)}))):n),a.createElement(v.pd,{title:"Do not show popup again?",style:{margin:"0px 20% 20px 20%",width:"auto",backgroundColor:"var(--app-color-gray-lightest)",padding:"10px 50px 10px 50px"},value:!kl,toggleSelected:function(e){localStorage.setItem("showAdsDate",(0,Y.now)()),localStorage.setItem("showAds",!e),Il(!1)}}))}return a.createElement(a.Fragment,null)}(Hn.find((function(e){var n,t,o;return e.id===(null===Gn||void 0===Gn||null===(n=Gn.processModule)||void 0===n||null===(t=n.module)||void 0===t||null===(o=t.options)||void 0===o?void 0:o.ads)})))),Sl&&a.createElement(Be.Z,{openModal:Sl,setOpenModal:Cl,dialogHandler:function(){Gn.processModule.back_array=[],Yo(Jn.filter((function(e){var n,t;return e.module_id===(null===Gn||void 0===Gn||null===(n=Gn.processModule)||void 0===n||null===(t=n.module)||void 0===t?void 0:t.id)}))),Fl(Gn.processModule.steps[0].id),pl(!1),Cl(!1)},title:"There are unsaved items, are you sure you want to cancel?",proceedTitle:"Yes",cancelTitle:"No, return back",loading:so}),bl&&Gn.processModule.stepIndex>0&&a.createElement(v.U7,{isOpen:bl,onClose:function(){return Ml(!1)},backdropColor:!0,blured:!0,scrollable:!0,shadowedContainerStyle:{width:A.tq?"100%":"40%"}},a.createElement("div",{style:{padding:"30px"}},a.createElement("p",{className:u.deleteText},"There were unsaved data for ".concat(Yt.title,". Do you want to restore them?")),a.createElement("div",{style:{display:"flex",justifyContent:"center"}},a.createElement(oe.Z,{title:"Yes, restore",clicked:function(){y.h.dispatch((0,h.Xc)({show:!0,message:"Reverting to saved data from the cache. Press Save to permanently save these records. Cancel to revert back",color:"red",spinner:!1,bottom:!0})),Pt.items=JSON.parse(localStorage.getItem("items")),Pt.newStepComponents=JSON.parse(localStorage.getItem("newStepComponents")),localStorage.removeItem("transaction"),Ml(!1)}}),a.createElement(oe.Z,{title:"No, use the current data as is",light:!0,clicked:function(){localStorage.removeItem("transaction"),Ml(!1)}})))),ho&&a.createElement(v.U7,{isOpen:p.v7,onClose:function(){},backdropColor:!0,blured:!0,scrollable:!0,shadowedContainerStyle:{width:A.tq?"100%":"20%"}},a.createElement("div",null,a.createElement("p",{className:u.deleteText},"Are you sure you want to delete ".concat(Yt.title,"?")),a.createElement("div",{style:{display:"flex",justifyContent:"center"}},a.createElement(oe.Z,{title:"Delete",clicked:function(){Po(!0),(0,p.v7)(Yt.id).pipe((0,g.P)()).subscribe({next:function(){Po(!1),Ut(!1),go(!1)},complete:function(){},error:function(){Po(!1),go(!1)}})},loading:No}),a.createElement(oe.Z,{title:"No",light:!0,clicked:function(){return go(!1)}})))),wo&&a.createElement(v.U7,{isOpen:wo,onClose:function(){},backdropColor:!0,blured:!1,scrollable:!0,shadowedContainerStyle:{width:A.tq?"100%":"20%"}},a.createElement("div",null,a.createElement("p",{className:u.deleteText},"Cannot delete ".concat(Yt.title,". Some transactions and master data are using this item")),a.createElement("div",{style:{display:"flex",justifyContent:"center"}},a.createElement(oe.Z,{title:"Close",light:!0,clicked:function(){return xo(!1)}}))))),_l&&a.createElement(v.U7,{isOpen:_l,onClose:function(){},backdropColor:!0,blured:!1,scrollable:!0,shadowedContainerStyle:{width:A.tq?"100%":"80%"}},a.createElement(qe.default,{hasCloseIcon:!0,label:null===Gn||void 0===Gn||null===(nn=Gn.processModule)||void 0===nn||null===(tn=nn.module)||void 0===tn?void 0:tn.name,withBack:!1,paymentPath:"begin-module",onClose:function(){return yl(!1)},companyData:Qn,subscriptionInfo:{user_id:lt.id,ref:Pt.id,plan_price:null!==(on=null===Pt||void 0===Pt?void 0:Pt.plan)&&void 0!==on?on:0,currency:null!==(ln=null===Pt||void 0===Pt?void 0:Pt.currency)&&void 0!==ln?ln:"PHP",plan:"CC-".concat(Pt.id),total:null!==(dn=+(null===Pt||void 0===Pt?void 0:Pt.total))&&void 0!==dn?dn:0,billable_users:[lt],duration:0,dlabel:Pt.id},onError:function(e){St(e),bt(!0),yl(!1),y.h.dispatch((0,h.Xc)({show:!0,message:"Transaction was created but the selected payment mode encountered an issue. Please select another payment option. You may also manually attach your proof of payment",color:"red",bottom:!0})),y.h.dispatch((0,h.RV)({})),Ll()}})),Zo&&a.createElement(v.U7,{isOpen:Zo,onClose:function(){return Eo(!1)},backdropColor:!0,blured:!0,scrollable:!0,shadowedContainerStyle:{width:A.tq?"100%":"15%"}},a.createElement("div",null,a.createElement(v.jL,{ungrouped:!0,title:"nonmanager"===lt.user_type?"Type an email address to send copy of this transaction (optional)":"Select users to email this transaction (Optional)",columned:!0,withAckButton:!1},"nonmanager"===lt.user_type?a.createElement("input",{placeholder:"Use comma, no space, for multiple email addresses",className:u.emailInput,onChange:function(e){new RegExp(/^([a-z0-9!#$%&'*+/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*)(([, ]+[a-z0-9!#$%&'*+/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])\.([a-z0-9]([a-z0-9-]*[a-z0-9]))*)?)*$/).test(e.target.value)&&rl(e.target.value.split(","))}}):a.createElement(he.Cm,{id:"Users",tagEmplacement:"inlined",searchable:!1,items:ll.filter((function(e){var n;return e.department===(null===(n=lt.departments[0])||void 0===n?void 0:n.name)})),groupedBy:"department",groupname:"department",triggerType:"chevron",initialSelectedValues:[],className:u.peoplePositionsSelect,inputClassName:u.peoplePositionsSelectInput,molclassname:u.peoplePositionsSelectMenuOverlay,moliclassname:u.peoplePositionsSelectMenuOverlayItem,onChange:function(e){e.length>0?rl(null===e||void 0===e?void 0:e.map((function(e){return null===e||void 0===e?void 0:e.user.email}))):rl([])}})),a.createElement("div",{style:{display:"flex",justifyContent:"center"}},a.createElement(oe.Z,{title:"Back",light:!0,clicked:function(){return Eo(!1)}}),a.createElement(oe.Z,{disabled:!1===(null===Qn||void 0===Qn?void 0:Qn.start),title:Bt?"Update":Xt&&null!==(an=null===Gn||void 0===Gn||null===(un=Gn.processModule)||void 0===un||null===(rn=un.module)||void 0===rn||null===(sn=rn.options)||void 0===sn?void 0:sn.save)&&void 0!==an?an:"Save",loading:so,style:{width:"160px",marginLeft:"0px"},clicked:function(){Eo(!1),jl()}})))),At&&a.createElement(v.U7,{isOpen:At,onClose:function(){return Ut(!1)},hasCloseIcon:!!A.tq||0==(null===Yt||void 0===Yt||null===(cn=Yt.component_fields)||void 0===cn?void 0:cn.length),backdropColor:!0,blured:!1,scrollable:!0,shadowedContainerStyle:{width:A.tq||io?"100%":"50%",height:"auto",minWidth:A.tq?"100%":"1000px"}},a.createElement("div",{"app-variant-is-mobile":A.tq?"true":"false",style:{display:"flex",justifyContent:"center",flexDirection:"column"}},a.createElement(Ve,{ref:Ul,begunModule:Gn,allModules:Hn,companyData:Qn,components:Jn,selectedComponent:Yt,companyUsersArray:et,print:io,step:r.Nbs,companyPositionsArray:it}),(null===Yt||void 0===Yt||null===(vn=Yt.component_fields)||void 0===vn?void 0:vn.length)>0&&a.createElement("div",{style:{width:(A.tq,"100%"),display:"flex",flexDirection:A.tq?"column":"row",justifyContent:"center"}},a.createElement(oe.Z,{title:"Close",style:{width:A.tq?"100%":"100px"},clicked:function(){Ut(!1),ao(!1)}}),(null===Yt||void 0===Yt||null===(pn=Yt.component_fields)||void 0===pn?void 0:pn.length)>0&&a.createElement(a.Fragment,null,(0,_e.cQ)(Kl,ni,Yt,lt,Gn,Qn)&&(null===Gn||void 0===Gn||null===(mn=Gn.processModule)||void 0===mn||null===(fn=mn.steps)||void 0===fn||null===(_n=fn.find((function(e){return e.component_blueprints.filter((function(e){return e.selected_fields.filter((function(e){return"Action Button"===e.data_type_name})).length>0})).length>0})))||void 0===_n||null===(yn=_n.component_blueprints.find((function(e){return e.selected_fields.filter((function(e){return"Action Button"===e.data_type_name})).length>0})))||void 0===yn?void 0:yn.selected_fields.filter((function(e){return"Action Button"===e.data_type_name})).map((function(e,n){var t,o,i,d;if("status"===e.options.action){var r,s,c,v,m,f,_,b,M,Z=(null===Qn||void 0===Qn||null===(r=Qn.misc_info)||void 0===r||null===(s=r.status)||void 0===s?void 0:s.length)>0?null===Qn||void 0===Qn||null===(c=Qn.misc_info)||void 0===c?void 0:c.status:[{label:"Ongoing",value:"Ongoing"},{label:"Pending",value:"Pending"},{label:"Awaiting Payment",value:"Awaiting Payment"},{label:"Awaiting Fulfillment",value:"Awaiting Fulfillment"},{label:"Awaiting Shipment",value:"Awaiting Shipment"},{label:"Awaiting Pickup",value:"Awaiting Pickup"},{label:"Partially Shipped",value:"Partially Shipped"},{label:"Completed",value:"Completed"},{label:"Shipped",value:"Shipped"},{label:"Cancelled",value:"Cancelled"},{label:"Declined",value:"Declined"},{label:"Refunded",value:"Refunded"},{label:"Disputed",value:"Disputed"},{label:"Done",value:"Done"},{label:"Closed (Will lock Edit)",value:"Closed"}];if((null===Qn||void 0===Qn||null===(v=Qn.misc_info)||void 0===v||null===(m=v.rules)||void 0===m?void 0:m.length)>0)null===Qn||void 0===Qn||null===(M=Qn.misc_info)||void 0===M||M.rules.filter((function(e){return"status"===e.type})).filter((function(n){n.valueCondition===e.value&&(Z="0"===n.allow?Z.filter((function(e){return n.values.includes(e.value)})):Z.filter((function(e){return!n.values.includes(e.value)})))}));return a.createElement("div",{key:n,style:{width:"100%",display:"user"===e.options.action&&null!==(f=Yt.component_fields)&&void 0!==f&&null!==(_=f.find((function(n){return n.procedure_step_blueprint_field_id===e.procedure_step_blueprint_field_id})))&&void 0!==_&&_.value?"none":""}},a.createElement(de.Z,{titleProps:{fontSize:"16px",color:"var(--app-color-gray-light)"},className:u.multiselectComponent,key:n,visible:e.visible,mandatory:e.mandatory,value:null!==(b=e.value)&&void 0!==b?b:"",items:Z,error:e.errors,onChange:function(n){var t,o,i,d;if(null!==(t=Gn.processModule)&&void 0!==t&&null!==(o=t.module)&&void 0!==o&&null!==(i=o.options)&&void 0!==i&&i.credits&&(n===(null===(d=Qn.options)||void 0===d?void 0:d.lock)||"Closed"===n)){var a,u,r,s,c,v,m,f,_,b,M=null===Gn||void 0===Gn||null===(a=Gn.processModule)||void 0===a||null===(u=a.steps)||void 0===u||null===(r=u.find((function(e){return e.component_blueprints.filter((function(e){return e.selected_fields.filter((function(e){return"Payments"===e.data_type_name})).length>0})).length>0})))||void 0===r||null===(s=r.component_blueprints.find((function(e){return e.selected_fields.filter((function(e){return"Payments"===e.data_type_name})).length>0})))||void 0===s?void 0:s.selected_fields.find((function(e){return"Payments"===e.data_type_name})),Z=null===(c=Pt.newStepComponents.concat(Pt.components).find((function(e){return e.selected_fields.filter((function(e){var n;return e.field_name===(null===M||void 0===M||null===(n=M.options)||void 0===n?void 0:n.paymentField)})).length>0})))||void 0===c||null===(v=c.selected_fields)||void 0===v?void 0:v.find((function(e){var n;return e.field_name===(null===M||void 0===M||null===(n=M.options)||void 0===n?void 0:n.paymentField)})),E=0;if(null===(m=Gn.processModule)||void 0===m||null===(f=m.selectedComponent.payments)||void 0===f||!f.stripe_id)return Ut(!1),Gn.processModule.showDetail=!1,void y.h.dispatch((0,h.Xc)({show:!0,message:"Check support payment docs",color:"red",spinner:!1,bottom:!0}));if(!(+(null!==(_=null===Z||void 0===Z?void 0:Z.value)&&void 0!==_?_:0)>0))return void y.h.dispatch((0,h.Xc)({show:!0,message:"No amount found",color:"red",spinner:!1,bottom:!0}));E=+(null!==(b=null===Z||void 0===Z?void 0:Z.value)&&void 0!==b?b:0),"Cash"!==(null===M||void 0===M?void 0:M.value)&&(0,Ue.e_)({user_id:lt.id,id:(0,_e.mR)(),total:E,product:"CR-".concat(null===Yt||void 0===Yt?void 0:Yt.title),notes:"Wallet",quantity:1}).pipe((0,g.P)()).subscribe({next:function(){var e;lt.wallet=+(+(null!==(e=null===lt||void 0===lt?void 0:lt.wallet)&&void 0!==e?e:0)+E)}})}Qn.start=!0,co(!0),(0,p.C0)({component_id:Yt.id,index:0,group:99,value:n,procedure_step_blueprint_field_id:e.procedure_step_blueprint_field_id}).subscribe({next:function(e){co(!1),Ut(!1),y.h.dispatch((0,h.q4)((0,l.Z)((0,l.Z)({},Gn.processModule),{},{showDetail:!1})))},error:function(){},complete:function(){}})},fieldIcon:e.icon,fieldLabel:e.field_name,placeholder:"Select status..."}))}return a.createElement("div",{key:n,style:{display:"flex",flexDirection:A.tq?"column":"row"}},a.createElement(oe.Z,{light:!0,title:e.field_name,loading:so,clicked:function(){if("user"===e.options.action||"creator"===e.options.action){var n,t,o,i="user"===e.options.action?lt:et.find((function(e){var n;return e.id===(null===(n=Yt.created_by)||void 0===n?void 0:n.id)}));if(null!==(n=Gn.processModule)&&void 0!==n&&null!==(t=n.module)&&void 0!==t&&null!==(o=t.options)&&void 0!==o&&o.credits){var d,a,u,r,s,c,v,m,f,_=null===(d=Yt.component_fields)||void 0===d?void 0:d.find((function(e){return"Payments"===e.data_type_name&&(null===e||void 0===e?void 0:e.value)})),b=null===(a=Pt.newStepComponents.concat(Pt.components).find((function(e){return e.selected_fields.filter((function(e){var n;return e.field_name===(null===_||void 0===_||null===(n=_.options)||void 0===n?void 0:n.paymentField)})).length>0})))||void 0===a||null===(u=a.selected_fields)||void 0===u?void 0:u.find((function(e){var n;return e.field_name===(null===_||void 0===_||null===(n=_.options)||void 0===n?void 0:n.paymentField)}));if(!b)b=null===(f=Yt.component_fields)||void 0===f?void 0:f.find((function(e){var n;return e.field_name===(null===_||void 0===_||null===(n=_.options)||void 0===n?void 0:n.paymentField)}));var M=0;if(void 0===(null===i||void 0===i?void 0:i.wallet)||0===(null===i||void 0===i?void 0:i.wallet))return y.h.dispatch((0,h.Xc)({show:!0,message:"You need to setup funds for your wallet",color:"red",spinner:!1,bottom:!0})),Gn.processModule.showDetail=!1,void Ut(!1);if(+(null!==(r=null===(s=b)||void 0===s?void 0:s.value)&&void 0!==r?r:0)>0&&"Cash"===(null===_||void 0===_?void 0:_.value)){var Z,E,S,C;if((null!==(Z=+(null===i||void 0===i?void 0:i.wallet))&&void 0!==Z?Z:0)<+(null===(E=b)||void 0===E?void 0:E.value))return y.h.dispatch((0,h.Xc)({show:!0,message:"Insufficient funds in wallet",color:"red",spinner:!1,bottom:!0})),Gn.processModule.showDetail=!1,void Ut(!1);M=null!==(S=null===(C=b)||void 0===C?void 0:C.value)&&void 0!==S?S:0}else if(null===(c=Gn.processModule)||void 0===c||null===(v=c.selectedComponent)||void 0===v||null===(m=v.payments)||void 0===m||!m.stripe_id)return Ut(!1),Gn.processModule.showDetail=!1,void y.h.dispatch((0,h.Xc)({show:!0,message:"Check support payment docs",color:"red",spinner:!1,bottom:!0}));"Cash"===(null===_||void 0===_?void 0:_.value)&&(0,Ue.e_)({user_id:lt.id,id:(0,_e.mR)(),total:-M,product:"DB-".concat(null===Yt||void 0===Yt?void 0:Yt.title),notes:"Wallet",quantity:1}).pipe((0,g.P)()).subscribe({next:function(){var e;return i.wallet=+(+(null!==(e=null===i||void 0===i?void 0:i.wallet)&&void 0!==e?e:0)-M)},error:function(){return y.h.dispatch((0,h.Xc)({show:!0,message:"Purchase error encountered",color:"red",spinner:!1,bottom:!0}))}})}co(!0),(0,p.C0)({component_id:Yt.id,index:0,group:99,value:i.id,procedure_step_blueprint_field_id:e.procedure_step_blueprint_field_id}).subscribe({next:function(e){(0,p.dn)(Yt.id,i.id).subscribe({next:function(e){co(!1),Ut(!1),y.h.dispatch((0,h.q4)((0,l.Z)((0,l.Z)({},Gn.processModule),{},{showDetail:!1})))}})},error:function(){},complete:function(){}})}else"status"===e.options.action||"date"===e.options.action||e.options.action,co(!1)},style:{backgroundColor:"green",color:"white",width:A.tq?"100%":"100px",display:"user"===e.options.action&&null!==(t=Yt.component_fields)&&void 0!==t&&null!==(o=t.find((function(n){return n.procedure_step_blueprint_field_id===e.procedure_step_blueprint_field_id})))&&void 0!==o&&o.value?"none":""}}),a.createElement(oe.Z,{title:"Decline",light:!0,loading:so,clicked:function(){var e,n;Ft(!0),co(!0);var t=Yt.component_fields.find((function(e){var n;return"People"===e.data_type_name&&!0===(null===(n=e.options)||void 0===n?void 0:n.calendar)}));(0,p.KL)((0,l.Z)((0,l.Z)({},Yt),{},{selected_fields:t?Yt.component_fields.filter((function(e){return e.id!==t.id})):Yt.component_fields,assigned_to:{id:""}}),Yt.id,null===(e=Yt.shared_users)||void 0===e?void 0:e.map((function(e){return null===e||void 0===e?void 0:e.id})),Yt.title,Yt.is_complete,null===(n=Yt.shared_positions)||void 0===n?void 0:n.map((function(e){return null===e||void 0===e?void 0:e.id}))).subscribe({error:function(e){y.h.dispatch((0,h.Xc)({show:!0,message:"Errors found",color:"red"}))},next:function(e){y.h.dispatch((0,h.aT)(Yt.id)),co(!1),Ut(!1),y.h.dispatch((0,h.q4)((0,l.Z)((0,l.Z)({},Gn.processModule),{},{showDetail:!1})))}})},style:{backgroundColor:"red",color:"white",width:A.tq?"100%":"100px",display:"user"===e.options.action&&null!==(i=Yt.component_fields)&&void 0!==i&&null!==(d=i.find((function(n){return n.procedure_step_blueprint_field_id===e.procedure_step_blueprint_field_id})))&&void 0!==d&&d.value?"none":""}}))})))),!io&&a.createElement(oe.Z,{title:"Print",style:{width:"100px",display:A.tq?"none":""},light:!0,clicked:function(){ao(!0)}}),io&&a.createElement(ie(),{trigger:function(){return a.createElement("button",{className:u.singleButton},"Print Now")},content:function(){return Ul.current}}),(void 0===Kl&&((null===(hn=$l)||void 0===hn?void 0:hn.filter((function(e){return lt.positions.map((function(e){return e.id})).indexOf(e)>-1})).length)>0||(null===ei||void 0===ei?void 0:ei.filter((function(e){return lt.positions.map((function(e){return e.id})).indexOf(e)>-1})).length)>0)||(void 0===Kl||"New"===Kl||"Show"===Kl)&&((null===Yt||void 0===Yt||null===(gn=Yt.created_by)||void 0===gn?void 0:gn.id)===(null===lt||void 0===lt?void 0:lt.id)||(null===Yt||void 0===Yt||null===(bn=Yt.assigned_to)||void 0===bn?void 0:bn.id)===(null===lt||void 0===lt?void 0:lt.id))||void 0!==Kl&&!("Hide"===Kl||"Closed"===Kl||Kl===(null===Qn||void 0===Qn||null===(Mn=Qn.misc_info)||void 0===Mn?void 0:Mn.lock)||"Cancelled"===Kl)&&((null===(Zn=$l)||void 0===Zn?void 0:Zn.filter((function(e){return lt.positions.map((function(e){return e.id})).indexOf(e)>-1})).length)>0||(null===ei||void 0===ei?void 0:ei.filter((function(e){return lt.positions.map((function(e){return e.id})).indexOf(e)>-1})).length)>0)&&(1!=(null===Gn||void 0===Gn||null===(En=Gn.processModule)||void 0===En||null===(Sn=En.module)||void 0===Sn||null===(Cn=Sn.options)||void 0===Cn?void 0:Cn.strict)||(null===Yt||void 0===Yt||null===(wn=Yt.created_by)||void 0===wn?void 0:wn.id)!==(null===lt||void 0===lt?void 0:lt.id))||!1===(null===Yt||void 0===Yt?void 0:Yt.is_complete)&&(null===Yt||void 0===Yt||null===(xn=Yt.created_by)||void 0===xn?void 0:xn.id)===(null===lt||void 0===lt?void 0:lt.id))&&a.createElement(a.Fragment,null,a.createElement(oe.Z,{title:"Edit",style:{backgroundColor:A.tq?"var(--app-color-blue)":"",color:A.tq?"white":"",width:A.tq?"100%":"100px",display:"trial_ended"===Qn.status||"inactive"===Qn.status?"none":0===(null===(kn=Yt.component_fields)||void 0===kn?void 0:kn.filter((function(e){return"Action Button"===e.data_type_name&&"user"===e.options.action})).length)||0===(null===(In=Yt.component_fields)||void 0===In?void 0:In.filter((function(e){return"Action Button"===e.data_type_name&&"user"===e.options.action&&void 0===e.value})).length)&&((null===(Nn=Yt.component_fields)||void 0===Nn?void 0:Nn.filter((function(e){return"Action Button"===e.data_type_name&&"user"===e.options.action&&e.value===(null===lt||void 0===lt?void 0:lt.id)})).length)>0||(null===Yt||void 0===Yt||null===(Pn=Yt.assigned_to)||void 0===Pn?void 0:Pn.id)===(null===lt||void 0===lt?void 0:lt.id))?"":"none"},light:!0,clicked:function(){var e,n,t,o,l;Ut(!1),Ft(!0),Gn.processModule.isUpdating=!0,(null===Gn||void 0===Gn||null===(e=Gn.processModule)||void 0===e||null===(n=e.steps)||void 0===n?void 0:n.length)>0&&(null===Gn||void 0===Gn||null===(t=Gn.processModule)||void 0===t||null===(o=t.steps)||void 0===o||o.filter((function(e){var n;return null===e||void 0===e||null===(n=e.component_blueprints)||void 0===n?void 0:n.filter((function(e){return e.selected_fields.filter((function(e){return e.value=void 0}))}))})));var d=[];we.Z(xe.Z("group"))(null!==(l=null===Yt||void 0===Yt?void 0:Yt.component_fields)&&void 0!==l?l:[]).map((function(e){d=[].concat((0,i.Z)(d),[{id:e.component_blueprint_id,temp_id:e.id,selected_fields:Ne.Z(Pe.Z("group",e.group))(Yt.component_fields)}])})),Gn.processModule.steps.filter((function(e){e.component_blueprints.filter((function(e){var n,t,o,l,i,d;return(0==(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.asDashboard)||!(null!==e&&void 0!==e&&null!==(t=e.options)&&void 0!==t&&t.asDashboard))&&(0==(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.asReport)||!(null!==e&&void 0!==e&&null!==(l=e.options)&&void 0!==l&&l.asReport))&&(0==(null===e||void 0===e||null===(i=e.options)||void 0===i?void 0:i.asModuleList)||!(null!==e&&void 0!==e&&null!==(d=e.options)&&void 0!==d&&d.asModuleList))})).filter((function(e){e.selected_fields.filter((function(e){var n=Yt.component_fields.find((function(n){return n.field_name===e.field_name}));if(void 0!=n)e.value=n.value,e.group=n.group;else if("Record"===e.data_type_name){var t=Yt.component_fields.find((function(n){return n.field_name===e.options.name}));void 0!=t&&(e.value=t.value,e.value=t.group)}}))}))})),Pt.components=d,Pt.items=JSON.parse(JSON.stringify(Yt.component_items)),Pt.newStepComponents=[],Qn.start=!0,Fl()}}),(null===Gn||void 0===Gn||null===(Dn=Gn.processModule)||void 0===Dn||null===(Tn=Dn.module)||void 0===Tn||null===(qn=Tn.options)||void 0===qn?void 0:qn.canCancel)&&"New"===Yt.status&&!(null!==(An=Yt.assigned_to)&&void 0!==An&&An.id)&&a.createElement(oe.Z,{title:"Cancel",style:{backgroundColor:"red",color:"white",width:A.tq?"100%":"100px"},clear:!0,clicked:function(){(0,p.tE)(null===Yt||void 0===Yt?void 0:Yt.id,"Cancelled").pipe((0,g.P)()).subscribe({next:function(e){}})}})),(null===Gn||void 0===Gn||null===(Un=Gn.processModule)||void 0===Un||null===(On=Un.module)||void 0===On||null===(Rn=On.options)||void 0===Rn?void 0:Rn.canCancel)&&("New"===Yt.status||"Unassigned"===Yt.status)&&!(null!==(Bn=Yt.assigned_to)&&void 0!==Bn&&Bn.id)&&a.createElement(oe.Z,{loading:so,title:"Cancel Transaction",style:{backgroundColor:"red",color:"white",width:"100%"},clear:!0,clicked:function(){co(!0),(0,p.tE)(null===Yt||void 0===Yt?void 0:Yt.id,"Cancelled").pipe((0,g.P)()).subscribe({next:function(e){var n;if(co(!1),null!==e&&void 0!==e&&null!==(n=e.data.payments)&&void 0!==n&&n.stripe_id){var t,o=Math.abs(+(null===e||void 0===e||null===(t=e.data.payments)||void 0===t?void 0:t.stripe_price));(0,Ue.e_)({user_id:lt.id,id:(0,_e.mR)(),total:o,product:"RF-".concat(Yt.title),notes:"Wallet",quantity:1}).pipe((0,g.P)()).subscribe({next:function(){var e;lt.wallet=+(+(null!==(e=null===lt||void 0===lt?void 0:lt.wallet)&&void 0!==e?e:0)+o),co(!1),Ut(!1)}})}else co(!1),Ut(!1),ao(!1)}})}}),!0===(null===(Fn=Gn.processModule.module)||void 0===Fn?void 0:Fn.options.copyOutputs)&&(null===Yt||void 0===Yt||null===(Ln=Yt.created_by)||void 0===Ln?void 0:Ln.id)===lt.id&&a.createElement(oe.Z,{title:"Duplicate",style:{width:A.tq?"100%":"",backgroundColor:A.tq?"var(--app-color-blue)":"",color:A.tq?"white":""},light:!0,clicked:function(){var e;Ut(!1),Bl();var n=[];we.Z(xe.Z("group"))(null!==(e=null===Yt||void 0===Yt?void 0:Yt.component_fields)&&void 0!==e?e:[]).map((function(e){n=[].concat((0,i.Z)(n),[{id:e.component_blueprint_id,temp_id:e.id,selected_fields:Ne.Z(Pe.Z("group",e.group))(Yt.component_fields)}])})),Gn.processModule.steps.filter((function(e){e.component_blueprints.filter((function(e){e.selected_fields.filter((function(e){var n=Yt.component_fields.find((function(n){return n.procedure_step_blueprint_field_id===e.procedure_step_blueprint_field_id}));if(void 0!=n)"ID"===e.data_type_name||"Status"===e.data_type_name?e.value=void 0:e.value=n.value;else if("Record"===e.data_type_name){var t=Yt.component_fields.find((function(n){return n.field_name===e.options.name}));void 0!=t&&(e.value=t.value)}}))}))})),Dt({action:M._U.addModuleComponents,value:n}),Dt({action:M._U.setModuleItems,value:Yt.component_items}),Ft(!1),Gn.processModule.isUpdating=!1,zt({})}}),!0===(null===lt||void 0===lt?void 0:lt.is_admin)&&a.createElement(oe.Z,{title:"Delete",style:{width:A.tq?"100%":"100px",backgroundColor:A.tq?"red":"",color:A.tq?"white":""},light:!0,clicked:function(){var e,n,t;if(!0===(null===Gn||void 0===Gn||null===(e=Gn.processModule)||void 0===e||null===(n=e.module)||void 0===n||null===(t=n.options)||void 0===t?void 0:t.isMaster)){var o=Jn.filter((function(e){return e.module_id!==Yt.module_id})).filter((function(e){return-1!=Hn.filter((function(e){var n;return!0===(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.isMaster)})).map((function(e){return e.id})).indexOf(e.module_id)})),l=Jn.filter((function(e){return-1!=Hn.filter((function(e){var n;return 1!=(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.isMaster)})).map((function(e){return e.id})).indexOf(e.module_id)})),i=o.filter((function(e){return e.component_fields.filter((function(e){return-1!=Yt.component_fields.map((function(e){return e.value})).indexOf(e.value)})).length>0})).length>0||l.filter((function(e){return e.component_items.filter((function(e){return-1!=Yt.component_fields.map((function(e){return e.value})).indexOf(e.item_code)})).length>0})).length>0||l.filter((function(e){return e.component_fields.filter((function(e){return"output"!==e.data_type&&-1!=Yt.component_fields.map((function(e){return e.value})).indexOf(e.value)})).length>0})).length>0;xo(i),go(!i)}else go(!0)}})))),qo&&a.createElement(v.U7,{isOpen:qo,hasCloseIcon:!0,onClose:function(){return ut?Dl("/"):Ao(!1)},backdropColor:!0,blured:!1,scrollable:!0,shadowedContainerStyle:{width:A.tq?"100%":"30%",height:"auto"}},a.createElement("div",{style:{textAlign:"center",padding:"20px"}},a.createElement("p",{className:u.modalTitle},null===(jn=Gn.processModule.module)||void 0===jn?void 0:jn.name),a.createElement("p",{className:u.modalSubTitle},null!==(Yn=null===Gn||void 0===Gn||null===(zn=Gn.processModule)||void 0===zn||null===(Vn=zn.module)||void 0===Vn||null===(Wn=Vn.options)||void 0===Wn?void 0:Wn.message)&&void 0!==Yn?Yn:"Transaction saved"))))}))},55382:function(){},72095:function(){},61219:function(){}}]);
//# sourceMappingURL=378.a10a5cc3.chunk.js.map