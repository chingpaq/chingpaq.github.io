"use strict";(self.webpackChunkflowhero=self.webpackChunkflowhero||[]).push([[9974],{40317:function(e,t,n){n.r(t),n.d(t,{default:function(){return D},randomisedColor:function(){return U}});var i=n(93433),o=n(29439),a=n(67861),l=n(39518),r=n(23280),s=n(11577),c=n(10103),m=n(41771),u=n(71982),d=n(75105),p=n(10904),v=n(32588),f=n(40694),y=n(71871),g=n(63789),h=n(1413),x=(n(83381),n(73500)),_=n(79492),C=n.n(_),E=n(70847),Z=n(88374),S=n(34710),b=n(89293),I=n(67861),N=n(66918),w=(0,l.$j)((function(e){var t=e.flowReducer;return{inviteColleguesList:t.inviteColleguesList,companyPositionsArray:t.companyPositionsArray,companyData:t.companyData,companyUsersArray:t.companyUsersArray}}),(function(e){return{onSetInviteColleguesList:function(t){return e((0,Z.vj)(t))},onTutorialModalOpen:function(t){return e((0,u.ay)(t))}}}))((function(e){var t,n,i,r,s,m,u=e.closeButtonAction,v=e.onContinueButtonAction,f=e.onCancel,y=e.inviteColleguesList,g=e.companyPositionsArray,_=e.companyUsersArray,w=(0,a.useState)({companyEmail:"",firstName:"",lastName:"",position:"",position_id:""}),A=(0,o.Z)(w,2),k=A[0],T=A[1],F=(0,a.useState)({companyEmail:"",firstName:"",lastName:"",position:""}),U=(0,o.Z)(F,2),D=U[0],j=U[1],B=(0,a.useState)("Hongkong"),P=(0,o.Z)(B,2),H=P[0],M=P[1],z=(0,a.useState)(""),L=(0,o.Z)(z,2),W=L[0],O=L[1],V=(0,a.useState)(!1),X=(0,o.Z)(V,2),R=X[0],Y=X[1],q=(0,a.useState)(!1),J=(0,o.Z)(q,2),$=J[0],G=J[1],Q=(0,l.I0)();(0,a.useEffect)((function(){}),[y]),(0,a.useEffect)((function(){(0,S.hj)().subscribe({})}),[]);var K=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};e&&(j((0,h.Z)((0,h.Z)({},W),{},{companyEmail:""})),G(!0),(0,d.fu)({email:e}).pipe((0,c.q)(1)).subscribe({next:function(e){j((0,h.Z)((0,h.Z)({},W),{},{companyEmail:"Email already exists and being used. Please choose another email"})),G(!1)},error:function(e){G(!1),t()}}))},ee=(0,a.useCallback)((function(){var e,t,n;if(_.filter((function(e){return e.email===k.companyEmail})).length>0)j((function(e){return(0,h.Z)((0,h.Z)({},e),{},{companyEmail:"Email already exists and being used."})}));else{j({companyEmail:"",firstName:"",lastName:"",position:""}),O("");var i=!0;if((0,E.isEmail)(k.companyEmail)||(i=!1,j((function(e){return(0,h.Z)((0,h.Z)({},e),{},{companyEmail:"Invalid Company email"})}))),(null===(e=k.firstName)||void 0===e?void 0:e.length)<2&&(i=!1,j((function(e){return(0,h.Z)((0,h.Z)({},e),{},{firstName:"Invalid First name"})}))),(null===(t=k.lastName)||void 0===t?void 0:t.length)<2&&(i=!1,j((function(e){return(0,h.Z)((0,h.Z)({},e),{},{lastName:"Invalid Last name"})}))),(null===(n=k.position)||void 0===n?void 0:n.length)<2&&(i=!1,j((function(e){return(0,h.Z)((0,h.Z)({},e),{},{position:"Position id is not considered valid"})}))),i){var o={email:k.companyEmail,first_name:k.firstName,last_name:k.lastName,position_id:k.position_id};G(!0),(0,S.x7)(o).subscribe({next:function(e){Q((0,Z.Xc)({show:!0,message:"You have successfully created an invitation to ".concat(k.firstName," "),top:"0"})),v()},error:function(e){var t,n,i,o,a,l,r,s,c;e&&j({companyEmail:(null===e||void 0===e||null===(n=e.data)||void 0===n||null===(i=n.errors)||void 0===i?void 0:i.email)||"",firstName:(null===e||void 0===e||null===(o=e.data)||void 0===o||null===(a=o.errors)||void 0===a?void 0:a.first_name)||"",lastName:(null===e||void 0===e||null===(l=e.data)||void 0===l||null===(r=l.errors)||void 0===r?void 0:r.last_name)||"",position:(null===e||void 0===e||null===(s=e.data)||void 0===s||null===(c=s.errors)||void 0===c?void 0:c.position_id)||""});O("status ".concat(null===e||void 0===e?void 0:e.status,": ").concat(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)),G(!1)},complete:function(){return G(!1)}})}}}),[k]),te=function(){_.filter((function(e){return e.email===k.companyEmail})).length>0?j((function(e){return(0,h.Z)((0,h.Z)({},e),{},{companyEmail:"Email already exists"})})):_.filter((function(e){return e.username===k.username})).length>0?j((function(e){return(0,h.Z)((0,h.Z)({},e),{},{username:"Username already exists"})})):(Y(!0),(0,d.r4)({email:k.companyEmail,username:k.username,first_name:k.firstName,last_name:k.lastName,timezone:H,position_id:[k.position_id]}).subscribe({next:function(e){Q((0,Z.Xc)({show:!0,message:"You have successfully created ".concat(k.firstName,'. Default password is "P@ssw0rd"'),top:"0"})),v()},error:function(e){var t,n,i,o,a,l,r,s,c,m;e&&j({companyEmail:(null===e||void 0===e||null===(n=e.data)||void 0===n||null===(i=n.errors)||void 0===i?void 0:i.email)||"",firstName:(null===e||void 0===e||null===(o=e.data)||void 0===o||null===(a=o.errors)||void 0===a?void 0:a.first_name)||"",lastName:(null===e||void 0===e||null===(l=e.data)||void 0===l||null===(r=l.errors)||void 0===r?void 0:r.last_name)||"",position:(null===e||void 0===e||null===(s=e.data)||void 0===s||null===(c=s.errors)||void 0===c?void 0:c.position_id)||"",username:(null===e||void 0===e||null===(m=e.data)||void 0===m?void 0:m.errors.username)||""});O("status ".concat(null===e||void 0===e?void 0:e.status,": ").concat(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)),Y(!1)},complete:function(){return Y(!1)}}))};return I.createElement("div",{style:{width:"inherit",minWidth:"300px"}},I.createElement(p.U7,{scrollable:!0,shadowedContainerStyle:{width:x.tq?"100%":"30%",minWidth:"450px"},isOpen:e.modalVisible,modalClosed:f,blured:e.blured},I.createElement("div",{style:{position:"relative",display:"flex",height:"96%",flexDirection:"column",justifyContent:"flex-start",alignItems:"stretch",margin:"2% 10% 2% 10%"}},I.createElement("div",{style:{margin:"0px 0 0px 0",alignSelf:"stretch",display:"flex",flexDirection:"row",width:"100%",justifyContent:e.headingCentered?"center":"flex-start",alignItems:e.headingCentered?"center":"stretch"}},e.headingImage&&I.createElement("img",{alt:"",src:e.headingImage,style:{alignSelf:"center",height:"30px",width:"32px"}}),I.createElement("h1",{style:{color:"#4A4A4A",fontFamily:"var(--app-text-main-font)",fontSize:"2em",lineHeight:"2em",margin:"0",padding:"0 0 0 10px",textAlign:"center",width:"100%"}},"Add Users")),I.createElement("div",{className:"subheadingContainer_IX"},I.createElement("p",{className:"subheading_IX"},"Fill the email, name and position of the user you\u2019d like to add. For invites, user will need to accept via email sent")),I.createElement("div",{style:{minHeight:"500px",display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"stretch"}},I.createElement(C(),null,I.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-evenly",alignItems:"center"}},I.createElement("div",{style:{marginRight:"10px",width:"100%",height:"100%",flex:1,display:"flex",flexDirection:"column",justifyContent:"space-evenly",alignItems:"center",boxSizing:"border-box",minHeight:"480px",minWidth:"351px",backgroundColor:"#FFFFFF"}},I.createElement("div",{style:{margin:"10px 0px 0 0",dispay:"flex",width:"100%",flexDirection:"column",justifyContent:"space-evenly",alignItems:"center"}},I.createElement("input",{type:"text",name:"comapny-name",className:"inputStyle_IX",placeholder:"Email",value:k.companyEmail,onChange:function(e){T((function(t){return(0,h.Z)((0,h.Z)({},t),{},{companyEmail:e.target.value})}))},onFocus:function(){j((function(e){return(0,h.Z)((0,h.Z)({},e),{},{companyEmail:""})}))}}),(null===D||void 0===D||null===(t=D.companyEmail)||void 0===t?void 0:t.length)>0&&I.createElement("p",{style:{margin:"1px 0 1px 2px ",fontFamily:"var(--app-text-main-font)",fontSize:"14px",color:"var(--app-color-error)"}},null===D||void 0===D?void 0:D.companyEmail)),(null===D||void 0===D||null===(n=D.username)||void 0===n?void 0:n.length)>0&&I.createElement("div",{style:{margin:"10px 0px 0 0",dispay:"flex",width:"100%",flexDirection:"column",justifyContent:"space-evenly",alignItems:"center"}},I.createElement("input",{type:"text",name:"user-name",className:"inputStyle_IX",placeholder:"Username",value:k.username,onChange:function(e){T((function(t){return(0,h.Z)((0,h.Z)({},t),{},{username:e.target.value})}))}}),(null===D||void 0===D||null===(i=D.username)||void 0===i?void 0:i.length)>0&&I.createElement("p",{style:{margin:"1px 0 1px 2px ",fontFamily:"var(--app-text-main-font)",fontSize:"14px",color:"var(--app-color-error)"}},null===D||void 0===D?void 0:D.username)),I.createElement("div",{style:{margin:"10px 0px 0 0",dispay:"flex",width:"100%",flexDirection:"column",justifyContent:"space-evenly",alignItems:"center"}},I.createElement(p.Ld,{triggerType:"chevron",molclassname:"menuOverlayList_IX",moliclassname:"menuOverlayListItem_IX",title:"",placeholder:"Position",onChange:function(e){e&&T((function(t){return(0,h.Z)((0,h.Z)({},t),{},{position:e.label,position_id:e.value})}))},items:g}),(null===D||void 0===D||null===(r=D.position)||void 0===r?void 0:r.length)>0&&I.createElement("p",{style:{margin:"1px 0 1px 2px ",fontFamily:"var(--app-text-main-font)",fontSize:"14px",color:"var(--app-color-error)"}},null===D||void 0===D?void 0:D.position)),I.createElement("div",{style:{margin:"10px 0px 0 0",dispay:"flex",width:"100%",flexDirection:"column",justifyContent:"space-evenly",alignItems:"center"}},I.createElement("input",{type:"text",name:"first-name",className:"inputStyle_IX",placeholder:"First Name",value:k.firstName,onChange:function(e){T((function(t){return(0,h.Z)((0,h.Z)({},t),{},{firstName:e.target.value})}))},onFocus:function(){j((function(e){return(0,h.Z)((0,h.Z)({},e),{},{firstName:""})}))}}),(null===D||void 0===D||null===(s=D.firstName)||void 0===s?void 0:s.length)>0&&I.createElement("p",{style:{margin:"1px 0 1px 2px ",fontFamily:"var(--app-text-main-font)",fontSize:"14px",color:"var(--app-color-error)"}},null===D||void 0===D?void 0:D.firstName)),I.createElement("div",{style:{margin:"10px 0px 0 0",dispay:"flex",width:"100%",flexDirection:"column",justifyContent:"space-evenly",alignItems:"center"}},I.createElement("input",{type:"text",name:"last-name",className:"inputStyle_IX",placeholder:"Last Name",value:k.lastName,onChange:function(e){T((function(t){return(0,h.Z)((0,h.Z)({},t),{},{lastName:e.target.value})}))},onFocus:function(){j((function(e){return(0,h.Z)((0,h.Z)({},e),{},{lastName:""})}))}}),(null===D||void 0===D||null===(m=D.lastName)||void 0===m?void 0:m.length)>0&&I.createElement("p",{style:{margin:"1px 0 1px 2px ",fontFamily:"var(--app-text-main-font)",fontSize:"14px",color:"var(--app-color-error)"}},null===D||void 0===D?void 0:D.lastName)),I.createElement("div",{style:{margin:"10px 0px 0 0",dispay:"flex",width:"100%",flexDirection:"column",justifyContent:"space-evenly",alignItems:"center"}},I.createElement(p.Ld,{inputStyle:{pointerEvents:"none"},items:b.LY,defaultSelectedItem:N.find(N.propEq("value",H))(b.LY),triggerType:"chevron",placeholder:"Select timezone",onChange:function(e){M(null===e||void 0===e?void 0:e.value)}}))))),I.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",alignSelf:"center"}},I.createElement(p.zx,{title:"Close",clicked:u,style:{width:"100px"}}),I.createElement(p.zx,{title:"Invite User",light:!0,disabled:!1,loading:$,clicked:function(){K(k.companyEmail,ee)},style:{width:"140px"}}),I.createElement(p.zx,{title:"Create User",light:!0,disabled:!1,loading:R,clicked:function(){return K(k.companyEmail,te)},style:{width:"140px"}}))))))})),A=n(61616);document.title="Users | ".concat(b.iC);n(66918),n(84813);var k,T,F=String((k=10,T=245,k=Math.ceil(k),T=Math.floor(T),Math.floor(Math.random()*(T-k))+k)),U={color:"rgb(".concat(F,",").concat(F,",").concat(F,")")||0},D=(0,l.$j)((function(e){var t=e.authReducer.authenticatedUser.position,n=e.sessionReducer.user,i=e.flowReducer;return{companyData:i.companyData,companyPositionsArray:i.companyPositionsArray,position:t,allTasks:i.allTasks,allCompletedTasks:i.allCompletedTasks,allCompletedTasksPaginated:i.allCompletedTasksPaginated,user:n,companyUsersArray:i.companyUsersArray}}),(function(e){return{onSetOnBoardingVisible:function(t){return e((0,u.DJ)(t))},onToggleModalVisibility:function(t){return e((0,u.$6)(t))}}}))((function(e){var t=(0,r.TH)(),n=e.user,u=e.onToggleModalVisibility,h=e.onSetOnBoardingVisible,x=e.companyUsersArray,_=e.profile,C=void 0!==_&&_,E=e.companyData,S=(0,a.useState)(!1),b=(0,o.Z)(S,2),I=b[0],N=b[1],k=(0,a.useState)(x),T=(0,o.Z)(k,2),F=T[0],U=T[1],D=(0,a.useState)([]),j=(0,o.Z)(D,2),B=(j[0],j[1]),P=(0,a.useState)(!1),H=(0,o.Z)(P,2),M=H[0],z=H[1],L=(0,a.useState)(!1),W=(0,o.Z)(L,2),O=W[0],V=W[1],X=(0,a.useState)(!1),R=(0,o.Z)(X,2),Y=R[0],q=R[1],J=(0,a.useState)(""),$=(0,o.Z)(J,2),G=$[0],Q=($[1],(0,a.useState)([])),K=(0,o.Z)(Q,2),ee=(K[0],K[1]),te=(0,a.useState)({filterActive:!1,departments_filteredIds:[],positions_filteredIds:[]}),ne=(0,o.Z)(te,2),ie=ne[0],oe=(ne[1],(0,a.useState)(!1)),ae=(0,o.Z)(oe,2),le=(ae[0],ae[1],(0,a.useState)(!1)),re=(0,o.Z)(le,2),se=re[0],ce=re[1],me=(0,l.I0)(),ue=(0,r.s0)();(0,a.useEffect)((function(){N(!0),(0,d.pH)().pipe((0,s.P)()).subscribe({next:function(e){B(e)}}),me((0,Z.IW)(!C)),0==x.length&&(ce(!0),(0,d.AW)().pipe((0,c.q)(1)).subscribe({next:function(e){0===e.length?(z(!0),ce(!1)):(U((0,i.Z)(e)),ce(!1))},error:function(e){ce(!1)},complete:function(){ce(!1)}}))}),[]),(0,a.useEffect)((function(){var e=null===F||void 0===F?void 0:F.find((function(e){return e.id==new URLSearchParams(null===t||void 0===t?void 0:t.search).get("userId")}));e&&de(e)}),[null===t||void 0===t?void 0:t.search,F]),(0,a.useEffect)((function(){if(ie.filterActive){var e=[].concat((0,i.Z)(ie.departments_filteredIds),(0,i.Z)(ie.positions_filteredIds));(null===e||void 0===e?void 0:e.length)>0&&ee((0,i.Z)(e))}}),[ie]);var de=function(e){ue("/user-profile",{state:{user:e}})},pe=function(){q(!0)};return a.createElement("div",{className:y.Z.usersHost},a.createElement("div",{style:{margin:"100px 0 0 0"}},a.createElement(A.Z,{headerTitle:C?"My Profile":"Users",targetProcessing:!1})),I&&a.createElement("span",{className:y.Z.loadingIndicator},a.createElement(p.$j,{type:"BallTriangle",color:"var(--app-color-gray-dark)",height:30,width:"".concat(30,"px")})),a.createElement("br",null),a.createElement("div",{style:{display:C?"none":"flex"}},"free"===(null===E||void 0===E?void 0:E.status)&&(null===x||void 0===x?void 0:x.length)<3&&a.createElement(f.Z,{title:"Add Users",clicked:pe,style:{width:"150px"}}),"on_trial"===(null===E||void 0===E?void 0:E.status)&&(null===x||void 0===x?void 0:x.length)<5&&a.createElement(f.Z,{title:"Add Users",clicked:pe,style:{width:"150px"}}),"active"===(null===E||void 0===E?void 0:E.status)&&a.createElement(f.Z,{title:"Add Users",clicked:pe,style:{width:"150px"}}),a.createElement(f.Z,{light:!0,clicked:function(){ce(!0),(0,d.AW)(!0).pipe((0,c.q)(1)).subscribe({next:function(e){0===e.length?(z(!0),ce(!1)):(U((0,i.Z)(e)),ce(!1))},error:function(e){ce(!1)},complete:function(){ce(!1)}})},icon:a.createElement("img",{src:m.Fdh}),loading:se})),a.createElement("br",null),M?a.createElement("div",{className:y.Z.noTeamMembers},a.createElement("img",{src:m.tfg,alt:""}),a.createElement("p",null,"There are currently no team members."),a.createElement(f.Z,{title:"Add Users",clicked:function(){u({eightModalVisible:!0,hideSkipBtn:!0}),h(!0),window.scrollTo(0,0)}})):a.createElement("div",{className:y.Z.colleaguesSection},a.createElement("div",{className:y.Z.rightSideContainer},C?a.createElement("div",{style:{padding:"10px"}},a.createElement(v.Z,{photo:n.photo,firstName:null===n||void 0===n?void 0:n.first_name,lastName:null===n||void 0===n?void 0:n.last_name,position:null===n||void 0===n?void 0:n.phone,email:null===n||void 0===n?void 0:n.email,cardClicked:function(){}})):(null===F||void 0===F?void 0:F.length)>0&&(null===F||void 0===F?void 0:F.map((function(e,t){var n,i;return a.createElement("div",{key:t,style:{padding:"10px"}},a.createElement(v.Z,{photo:e.photo,firstName:null===e||void 0===e?void 0:e.first_name,lastName:null===e||void 0===e?void 0:e.last_name,position:null===e||void 0===e||null===(n=e.positions)||void 0===n||null===(i=n.slice(0,1))||void 0===i?void 0:i.map((function(e){return e.name})),email:null===e||void 0===e?void 0:e.email,cardClicked:function(){return de(e)}}))}))))),O&&a.createElement(g.Z,{isVisible:O,activeItem:G,handleClose:function(){V(!1)},isAdmin:n.is_admin}),Y&&a.createElement(w,{hasTutorial:!0,modalVisible:Y,closeButtonAction:function(){return q(!1)},backButtonAction:function(){return q(!1)},shadowedContainerStyle:{minWidth:"1110px",minHeight:"725px"},modalWrapperStyle:{minWidth:"1110px",minHeight:"725px"},onContinueButtonAction:function(){q(!1)},onCancel:function(){return q(!1)}}))}))},71871:function(e,t){t.Z={companyHost:"Company_companyHost__1GYT8",usersHost:"Company_usersHost__p8GWh",bottomText:"Company_bottomText__zDv3N",topText:"Company_topText__vAlwF",textSection:"Company_textSection__DAJA1",noColleaguesBackground:"Company_noColleaguesBackground__g-5lD",noColleaguesContainer:"Company_noColleaguesContainer__J7xsh",noColleaguesInnerContainer:"Company_noColleaguesInnerContainer__Yk6up",noColleaguesSection:"Company_noColleaguesSection__M4I8S",bottomOrgTextContainer:"Company_bottomOrgTextContainer__qI5VQ",orgChartContainer:"Company_orgChartContainer__PyWaw",orgChartSection:"Company_orgChartSection__6rgj1",noTeamMembers:"Company_noTeamMembers__gl1Rb",colleaguesSection:"Company_colleaguesSection__FXaYO",leftSideContainer:"Company_leftSideContainer__opyjV",rightSideContainer:"Company_rightSideContainer__5J8j0",loadingIndicator:"Company_loadingIndicator__PkUK1",filterButton:"Company_filterButton__Q2REB",filterButtonIcon:"Company_filterButtonIcon__wBrgi",resetFilterButton:"Company_resetFilterButton__-4+z3",resetFilterButtonIcon:"Company_resetFilterButtonIcon__7RFA1",navbarSection:"Company_navbarSection__81sPj",logoUrlImg:"Company_logoUrlImg__GrM4O",logoUrlImgM:"Company_logoUrlImgM__PwIpA",banner:"Company_banner__+lHF-",banner2:"Company_banner2__joTvv",companyHome:"Company_companyHome__-zveT",centerDiv:"Company_centerDiv__tWVJO"}}}]);
//# sourceMappingURL=9974.91249c48.chunk.js.map