"use strict";(self.webpackChunkflowhero=self.webpackChunkflowhero||[]).push([[9974],{40317:(e,t,i)=>{i.r(t),i.d(t,{default:()=>D,randomisedColor:()=>F});var l=i(67861),a=i(39518),n=i(23280),o=i(11577),s=i(10103),r=i(85692),d=i(71982),m=i(75105),c=i(48929),p=i(32588),u=i(40694),v=i(71871),y=i(63789),f=i(1413),g=(i(83381),i(73500)),h=i(79492),x=i.n(h),E=i(70847),C=i(88374),N=i(34710),Z=i(49465),S=i(67861);const b=i(66918),I=(0,a.$j)(e=>{const{inviteColleguesList:t,companyPositionsArray:i,companyData:l,companyUsersArray:a}=e.flowReducer;return{inviteColleguesList:t,companyPositionsArray:i,companyData:l,companyUsersArray:a}},e=>({onSetInviteColleguesList:t=>e((0,C.vj)(t)),onTutorialModalOpen:t=>e((0,d.ay)(t))}))(e=>{var t,i,n,o,r,d,p;const{closeButtonAction:u,onContinueButtonAction:v,onCancel:y,inviteColleguesList:h,companyPositionsArray:I,companyUsersArray:w}=e,[_,A]=(0,l.useState)({companyEmail:"",firstName:"",lastName:"",position:"",position_id:""}),[k,F]=(0,l.useState)({companyEmail:"",firstName:"",lastName:"",position:""}),[D,U]=(0,l.useState)("Hongkong"),[z,j]=(0,l.useState)(""),[P,T]=(0,l.useState)(!1),[L,X]=(0,l.useState)(!1),H=(0,a.I0)();(0,l.useEffect)(()=>{},[h]),(0,l.useEffect)(()=>{(0,N.hj)().subscribe({})},[]);const W=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>{};e&&(F((0,f.Z)((0,f.Z)({},z),{},{companyEmail:""})),X(!0),(0,m.fu)({email:e}).pipe((0,s.q)(1)).subscribe({next:e=>{F((0,f.Z)((0,f.Z)({},z),{},{companyEmail:"Email already exists and being used. Please choose another email"})),X(!1)},error:e=>{X(!1),t()}}))},B=(0,l.useCallback)(()=>{var e,t,i;if(w.filter(e=>e.email===_.companyEmail).length>0)F(e=>(0,f.Z)((0,f.Z)({},e),{},{companyEmail:"Email already exists and being used."}));else{F({companyEmail:"",firstName:"",lastName:"",position:""}),j("");var l=!0;if((0,E.isEmail)(_.companyEmail)||(l=!1,F(e=>(0,f.Z)((0,f.Z)({},e),{},{companyEmail:"Invalid Company email"}))),(null===(e=_.firstName)||void 0===e?void 0:e.length)<2&&(l=!1,F(e=>(0,f.Z)((0,f.Z)({},e),{},{firstName:"Invalid First name"}))),(null===(t=_.lastName)||void 0===t?void 0:t.length)<2&&(l=!1,F(e=>(0,f.Z)((0,f.Z)({},e),{},{lastName:"Invalid Last name"}))),(null===(i=_.position)||void 0===i?void 0:i.length)<2&&(l=!1,F(e=>(0,f.Z)((0,f.Z)({},e),{},{position:"Position id is not considered valid"}))),l){const e={email:_.companyEmail,first_name:_.firstName,last_name:_.lastName,position_id:_.position_id};X(!0),(0,N.x7)(e).subscribe({next:e=>{H((0,C.Xc)({show:!0,message:"You have successfully created an invitation to ".concat(_.firstName," "),top:"0"})),v()},error:e=>{var t,i,l,a,n,o,s,r,d;e&&F({companyEmail:(null===e||void 0===e||null===(i=e.data)||void 0===i||null===(l=i.errors)||void 0===l?void 0:l.email)||"",firstName:(null===e||void 0===e||null===(a=e.data)||void 0===a||null===(n=a.errors)||void 0===n?void 0:n.first_name)||"",lastName:(null===e||void 0===e||null===(o=e.data)||void 0===o||null===(s=o.errors)||void 0===s?void 0:s.last_name)||"",position:(null===e||void 0===e||null===(r=e.data)||void 0===r||null===(d=r.errors)||void 0===d?void 0:d.position_id)||""});j("status ".concat(null===e||void 0===e?void 0:e.status,": ").concat(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)),X(!1)},complete:()=>X(!1)})}}},[_]),M=()=>{w.filter(e=>e.email===_.companyEmail).length>0?F(e=>(0,f.Z)((0,f.Z)({},e),{},{companyEmail:"Email already exists"})):w.filter(e=>e.username===_.username).length>0?F(e=>(0,f.Z)((0,f.Z)({},e),{},{username:"Username already exists"})):(T(!0),(0,m.r4)({email:_.companyEmail,username:_.username,first_name:_.firstName,last_name:_.lastName,timezone:D,position_id:[_.position_id]}).subscribe({next:e=>{H((0,C.Xc)({show:!0,message:"You have successfully created ".concat(_.firstName,'. Default password is "P@ssw0rd"'),top:"0"})),v()},error:e=>{var t,i,l,a,n,o,s,r,d,m,c;e&&F({companyEmail:(null===e||void 0===e||null===(i=e.data)||void 0===i||null===(l=i.errors)||void 0===l?void 0:l.email)||"",firstName:(null===e||void 0===e||null===(a=e.data)||void 0===a||null===(n=a.errors)||void 0===n?void 0:n.first_name)||"",lastName:(null===e||void 0===e||null===(o=e.data)||void 0===o||null===(s=o.errors)||void 0===s?void 0:s.last_name)||"",position:(null===e||void 0===e||null===(r=e.data)||void 0===r||null===(d=r.errors)||void 0===d?void 0:d.position_id)||"",username:(null===e||void 0===e||null===(m=e.data)||void 0===m?void 0:m.errors.username)||"",timezone:(null===e||void 0===e||null===(c=e.data)||void 0===c?void 0:c.errors.timezone)||""});j("status ".concat(null===e||void 0===e?void 0:e.status,": ").concat(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)),T(!1)},complete:()=>T(!1)}))};return S.createElement("div",{style:{width:"inherit",minWidth:"300px"}},S.createElement(c.U7,{scrollable:!0,shadowedContainerStyle:{width:g.tq?"100%":"30%",minWidth:"450px"},isOpen:e.modalVisible,modalClosed:y,blured:e.blured},S.createElement("div",{style:{position:"relative",display:"flex",height:"96%",flexDirection:"column",justifyContent:"flex-start",alignItems:"stretch",margin:"2% 10% 2% 10%"}},S.createElement("div",{style:{margin:"0px 0 0px 0",alignSelf:"stretch",display:"flex",flexDirection:"row",width:"100%",justifyContent:e.headingCentered?"center":"flex-start",alignItems:e.headingCentered?"center":"stretch"}},e.headingImage&&S.createElement("img",{alt:"",src:e.headingImage,style:{alignSelf:"center",height:"30px",width:"32px"}}),S.createElement("h1",{style:{color:"#4A4A4A",fontFamily:"var(--app-text-main-font)",fontSize:"2em",lineHeight:"2em",margin:"0",padding:"0 0 0 10px",textAlign:"center",width:"100%"}},"Add Users")),S.createElement("div",{className:"subheadingContainer_IX"},S.createElement("p",{className:"subheading_IX"},"Fill the email, name and position of the user you\u2019d like to add. For invites, user will need to accept via email sent")),S.createElement("div",{style:{minHeight:"500px",display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"stretch"}},S.createElement(x(),null,S.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-evenly",alignItems:"center"}},S.createElement("div",{style:{marginRight:"10px",width:"100%",height:"100%",flex:1,display:"flex",flexDirection:"column",justifyContent:"space-evenly",alignItems:"center",boxSizing:"border-box",minHeight:"480px",minWidth:"351px",backgroundColor:"#FFFFFF"}},S.createElement("div",{style:{margin:"10px 0px 0 0",dispay:"flex",width:"100%",flexDirection:"column",justifyContent:"space-evenly",alignItems:"center"}},S.createElement("input",{type:"text",name:"comapny-name",className:"inputStyle_IX",placeholder:"Email",value:_.companyEmail,onChange:e=>{A(t=>(0,f.Z)((0,f.Z)({},t),{},{companyEmail:e.target.value}))},onFocus:()=>{F(e=>(0,f.Z)((0,f.Z)({},e),{},{companyEmail:""}))}}),(null===k||void 0===k||null===(t=k.companyEmail)||void 0===t?void 0:t.length)>0&&S.createElement("p",{style:{margin:"1px 0 1px 2px ",fontFamily:"var(--app-text-main-font)",fontSize:"14px",color:"var(--app-color-error)"}},null===k||void 0===k?void 0:k.companyEmail)),(null===k||void 0===k||null===(i=k.username)||void 0===i?void 0:i.length)>0&&S.createElement("div",{style:{margin:"10px 0px 0 0",dispay:"flex",width:"100%",flexDirection:"column",justifyContent:"space-evenly",alignItems:"center"}},S.createElement("input",{type:"text",name:"user-name",className:"inputStyle_IX",placeholder:"Username",value:_.username,onChange:e=>{A(t=>(0,f.Z)((0,f.Z)({},t),{},{username:e.target.value}))}}),(null===k||void 0===k||null===(n=k.username)||void 0===n?void 0:n.length)>0&&S.createElement("p",{style:{margin:"1px 0 1px 2px ",fontFamily:"var(--app-text-main-font)",fontSize:"14px",color:"var(--app-color-error)"}},null===k||void 0===k?void 0:k.username)),S.createElement("div",{style:{margin:"10px 0px 0 0",dispay:"flex",width:"100%",flexDirection:"column",justifyContent:"space-evenly",alignItems:"center"}},S.createElement(c.Ld,{triggerType:"chevron",molclassname:"menuOverlayList_IX",moliclassname:"menuOverlayListItem_IX",title:"",placeholder:"Position",onChange:e=>{e&&A(t=>(0,f.Z)((0,f.Z)({},t),{},{position:e.label,position_id:e.value}))},items:I}),(null===k||void 0===k||null===(o=k.position)||void 0===o?void 0:o.length)>0&&S.createElement("p",{style:{margin:"1px 0 1px 2px ",fontFamily:"var(--app-text-main-font)",fontSize:"14px",color:"var(--app-color-error)"}},null===k||void 0===k?void 0:k.position)),S.createElement("div",{style:{margin:"10px 0px 0 0",dispay:"flex",width:"100%",flexDirection:"column",justifyContent:"space-evenly",alignItems:"center"}},S.createElement("input",{type:"text",name:"first-name",className:"inputStyle_IX",placeholder:"First Name",value:_.firstName,onChange:e=>{A(t=>(0,f.Z)((0,f.Z)({},t),{},{firstName:e.target.value}))},onFocus:()=>{F(e=>(0,f.Z)((0,f.Z)({},e),{},{firstName:""}))}}),(null===k||void 0===k||null===(r=k.firstName)||void 0===r?void 0:r.length)>0&&S.createElement("p",{style:{margin:"1px 0 1px 2px ",fontFamily:"var(--app-text-main-font)",fontSize:"14px",color:"var(--app-color-error)"}},null===k||void 0===k?void 0:k.firstName)),S.createElement("div",{style:{margin:"10px 0px 0 0",dispay:"flex",width:"100%",flexDirection:"column",justifyContent:"space-evenly",alignItems:"center"}},S.createElement("input",{type:"text",name:"last-name",className:"inputStyle_IX",placeholder:"Last Name",value:_.lastName,onChange:e=>{A(t=>(0,f.Z)((0,f.Z)({},t),{},{lastName:e.target.value}))},onFocus:()=>{F(e=>(0,f.Z)((0,f.Z)({},e),{},{lastName:""}))}}),(null===k||void 0===k||null===(d=k.lastName)||void 0===d?void 0:d.length)>0&&S.createElement("p",{style:{margin:"1px 0 1px 2px ",fontFamily:"var(--app-text-main-font)",fontSize:"14px",color:"var(--app-color-error)"}},null===k||void 0===k?void 0:k.lastName)),S.createElement("div",{style:{margin:"10px 0px 0 0",dispay:"flex",width:"100%",flexDirection:"column",justifyContent:"space-evenly",alignItems:"center"}},S.createElement(c.Ld,{inputStyle:{pointerEvents:"none"},items:Z.LY,defaultSelectedItem:b.find(b.propEq("value",D))(Z.LY),triggerType:"chevron",placeholder:"Select timezone",onChange:e=>{U(null===e||void 0===e?void 0:e.value)}}),(null===k||void 0===k||null===(p=k.timezone)||void 0===p?void 0:p.length)>0&&S.createElement("p",{style:{margin:"1px 0 1px 2px ",fontFamily:"var(--app-text-main-font)",fontSize:"14px",color:"var(--app-color-error)"}},null===k||void 0===k?void 0:k.timezone))))),S.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",alignSelf:"center"}},S.createElement(c.zx,{title:"Close",clicked:u,style:{width:"100px"}}),S.createElement(c.zx,{title:"Invite User",light:!0,disabled:!1,loading:L,clicked:()=>{W(_.companyEmail,B)},style:{width:"140px"}}),S.createElement(c.zx,{title:"Create User",light:!0,disabled:!1,loading:P,clicked:()=>W(_.companyEmail,M),style:{width:"140px"}}))))))});var w=i(61616);document.title="Users | ".concat(Z.iC);i(66918),i(84813);const _=String((A=10,k=245,A=Math.ceil(A),k=Math.floor(k),Math.floor(Math.random()*(k-A))+A));var A,k;const F={color:"rgb(".concat(_,",").concat(_,",").concat(_,")")||0},D=(0,a.$j)(e=>{const{authenticatedUser:{position:t}}=e.authReducer,{user:i}=e.sessionReducer,{companyData:l,companyPositionsArray:a,allTasks:n,allCompletedTasks:o,allCompletedTasksPaginated:s,companyUsersArray:r}=e.flowReducer;return{companyData:l,companyPositionsArray:a,position:t,allTasks:n,allCompletedTasks:o,allCompletedTasksPaginated:s,user:i,companyUsersArray:r}},e=>({onSetOnBoardingVisible:t=>e((0,d.DJ)(t)),onToggleModalVisibility:t=>e((0,d.$6)(t))}))(e=>{const t=(0,n.TH)(),{user:i,companyUsersArray:d,profile:f=!1,companyData:g}=e,[h,x]=(0,l.useState)(!1),[E,N]=(0,l.useState)(d),[Z,S]=(0,l.useState)([]),[b,_]=(0,l.useState)(!1),[A,k]=(0,l.useState)(!1),[F,D]=(0,l.useState)(""),[U,z]=(0,l.useState)([]),[j,P]=(0,l.useState)({filterActive:!1,departments_filteredIds:[],positions_filteredIds:[]}),[T,L]=(0,l.useState)(!1),X=(0,a.I0)(),H=(0,n.s0)();(0,l.useEffect)(()=>{x(!0),(0,m.pH)().pipe((0,o.P)()).subscribe({next:e=>{S(e)}}),X((0,C.IW)(!f)),0==d.length&&(L(!0),(0,m.AW)().pipe((0,s.q)(1)).subscribe({next:e=>{0===e.length||N([...e]),L(!1)},error:e=>{L(!1)},complete:()=>{L(!1)}}))},[]),(0,l.useEffect)(()=>{const e=null===E||void 0===E?void 0:E.find(e=>e.id==new URLSearchParams(null===t||void 0===t?void 0:t.search).get("userId"));e&&W(e)},[null===t||void 0===t?void 0:t.search,E]),(0,l.useEffect)(()=>{if(j.filterActive){const e=[...j.departments_filteredIds,...j.positions_filteredIds];(null===e||void 0===e?void 0:e.length)>0&&z([...e])}},[j]);const W=e=>{H("/user-profile",{state:{user:e}})},B=()=>{k(!0)};return l.createElement("div",{className:v.Z.usersHost},l.createElement("div",{style:{margin:"100px 0 0 0"}},l.createElement(w.Z,{headerTitle:f?"My Profile":"Users",targetProcessing:!1})),h&&l.createElement("span",{className:v.Z.loadingIndicator},l.createElement(c.$j,{type:"BallTriangle",color:"var(--app-color-gray-dark)",height:30,width:"".concat(30,"px")})),l.createElement("br",null),l.createElement("div",{style:{display:f?"none":"flex"}},("free"===(null===g||void 0===g?void 0:g.status)||"on_trial"===(null===g||void 0===g?void 0:g.status))&&(null===d||void 0===d?void 0:d.length)<=3&&l.createElement(u.Z,{title:"Add Users",clicked:B,style:{width:"150px"}}),"active"===(null===g||void 0===g?void 0:g.status)&&l.createElement(u.Z,{title:"Add Users",clicked:B,style:{width:"150px"}}),l.createElement(u.Z,{light:!0,clicked:()=>{L(!0),(0,m.AW)(!0).pipe((0,s.q)(1)).subscribe({next:e=>{0===e.length||N([...e]),L(!1)},error:e=>{L(!1)},complete:()=>{L(!1)}})},icon:l.createElement("img",{src:r.Fd}),loading:T})),l.createElement("br",null),l.createElement("div",{className:v.Z.colleaguesSection},l.createElement("div",{className:v.Z.rightSideContainer},f?l.createElement("div",{style:{padding:"10px"}},l.createElement(p.Z,{photo:i.photo,firstName:null===i||void 0===i?void 0:i.first_name,lastName:null===i||void 0===i?void 0:i.last_name,position:null===i||void 0===i?void 0:i.phone,email:null===i||void 0===i?void 0:i.email,cardClicked:()=>{}})):(null===d||void 0===d?void 0:d.length)>0&&(null===d||void 0===d?void 0:d.map((e,t)=>{var i,a;return l.createElement("div",{key:t,style:{padding:"10px"}},l.createElement(p.Z,{photo:e.photo,firstName:null===e||void 0===e?void 0:e.first_name,lastName:null===e||void 0===e?void 0:e.last_name,position:null===e||void 0===e||null===(i=e.positions)||void 0===i||null===(a=i.slice(0,1))||void 0===a?void 0:a.map(e=>e.name),email:null===e||void 0===e?void 0:e.email,cardClicked:()=>W(e)}))})))),b&&l.createElement(y.Z,{isVisible:b,activeItem:F,handleClose:()=>{_(!1)},isAdmin:i.is_admin}),A&&l.createElement(I,{hasTutorial:!0,modalVisible:A,closeButtonAction:()=>k(!1),backButtonAction:()=>k(!1),shadowedContainerStyle:{minWidth:"1110px",minHeight:"725px"},modalWrapperStyle:{minWidth:"1110px",minHeight:"725px"},onContinueButtonAction:()=>{k(!1)},onCancel:()=>k(!1)}))})}}]);
//# sourceMappingURL=9974.5119c6df.chunk.js.map