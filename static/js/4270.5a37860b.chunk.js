"use strict";(self.webpackChunkflowhero=self.webpackChunkflowhero||[]).push([[4270],{63789:function(e,t,a){a.d(t,{Z:function(){return M}});var n=a(29439),l=a(14170),o=a(89293),r="UserOverviewModal_topContainer__SfY2a",s="UserOverviewModal_avatarContainer__qWrM5",i="UserOverviewModal_name__i+epl",d="UserOverviewModal_position__8Heb9",c=a(1413),u=a(67861),m="PageSubtitle_host__1jvVf",v="PageSubtitle_pageSubtitleHost__vDvTj",p="PageSubtitle_pageSubtitleChild__s3-5p",f=function(e){var t=e.subtitleImage,a=e.subtitleText,n=e.style,l=e.smallerSubtitle;return u.createElement("div",{className:m},u.createElement("div",{className:v,style:(0,c.Z)({},n)},t&&u.createElement("img",{src:t,className:"grey-svg-image-filter",alt:""}),u.createElement("p",null,a)),l&&u.createElement("div",{className:p},u.createElement("p",null,l)))},h=a(50981),g=a.n(h),_=a(51481),k=a(10103),E=a(11577),y=(a(72864),a(87462)),T=a(90369),b=a(62589),S="TasksTable_tasksTableHost__msAp6";var w=function(e){var t=e.historyData,a=e.currentPage,o=e.lastPage,r=e.setPage,s=e.loading,i=e.setLoading,d=e.columns,c=e.data,m=(0,u.useState)(!1),v=(0,n.Z)(m,2),p=v[0],f=v[1],h=(0,u.useState)(""),g=(0,n.Z)(h,2),_=g[0],k=g[1],E=(0,u.useState)(""),w=(0,n.Z)(E,2),Z=w[0],C=w[1],M=(0,u.useState)(""),x=(0,n.Z)(M,2),N=x[0],Y=x[1],D=(0,u.useState)(""),P=(0,n.Z)(D,2),A=P[0],H=P[1],O=(0,u.useState)(""),R=(0,n.Z)(O,2),I=R[0],U=R[1],B=(0,u.useState)(""),W=(0,n.Z)(B,2),L=W[0],j=W[1],q=(0,u.useState)(""),z=(0,n.Z)(q,2),F=z[0],V=z[1],J=(0,u.useState)(""),G=(0,n.Z)(J,2),X=G[0],Q=G[1],$=(0,T.useTable)({columns:d,data:c}),K=$.getTableProps,ee=$.getTableBodyProps,te=$.headerGroups,ae=$.rows,ne=$.prepareRow;return u.createElement("div",{className:S},u.createElement("table",K(),u.createElement("thead",null,te.map((function(e,t){return u.createElement("tr",(0,y.Z)({key:t},e.getHeaderGroupProps(),{className:"header-row"}),e.headers.map((function(e,t){return u.createElement("th",(0,y.Z)({key:t},e.getHeaderProps()),e.render("Header"))})))}))),u.createElement("tbody",ee(),ae.map((function(e,a){return ne(e),u.createElement("tr",(0,y.Z)({key:a},e.getRowProps(),{onClick:function(){return e=t[a],Q(e),f(!p),k(e.taskName),C(e.createdAt),Y(e.completedOn),H(e.duration),U(e.taskCreator),j(e.taskAssignee),void V(null===e||void 0===e?void 0:e.process);var e},style:{cursor:"pointer"}}),e.cells.map((function(e,t){return u.createElement("td",(0,y.Z)({key:t},e.getCellProps()),e.render("Cell"))})))})))),0==c.length&&u.createElement("p",null,"No Tasks Found"),u.createElement("div",{style:{textAlign:"center",marginTop:"20px",paddingBottom:"50px"}},a!==o&&c.length>0&&u.createElement(l.nw,{loadMorePressed:function(){i(!s),r(a+1)},apiRequest:s})),u.createElement(b.Z,{openedTask:X,createdAt:Z,taskName:_,completedOn:N,duration:A,taskCreator:I,taskAssignee:L,process:F,modalVisible:p,modalClosed:function(){return f(!p)},hasTutorial:!0,blured:!0,childrenWrapperStyle:{alignItems:"center"},onCancel:function(){return f(!p)}}))},Z=a(23280),C=a(73500),M=function(e){var t,a,c,m,v=e.isVisible,p=e.activeItem,h=e.handleClose,y=(e.isAdmin,p.first_name),T=p.last_name,b=p.id,S=(0,u.useState)([]),M=(0,n.Z)(S,2),x=M[0],N=M[1],Y=(0,u.useState)([]),D=(0,n.Z)(Y,2),P=D[0],A=D[1],H=(0,u.useState)([]),O=(0,n.Z)(H,2),R=O[0],I=O[1],U=(0,u.useState)(!1),B=(0,n.Z)(U,2),W=(B[0],B[1]),L=(0,u.useState)(!1),j=(0,n.Z)(L,2),q=j[0],z=j[1],F=(0,u.useState)({laterTasks:[],todayTasks:[],overdueTasks:[]}),V=(0,n.Z)(F,2),J=(V[0],V[1]),G=(0,u.useState)(1),X=(0,n.Z)(G,2),Q=X[0],$=X[1],K=(null===P||void 0===P?void 0:P.meta)||{},ee=K.current_page,te=K.from,ae=P.data&&(null===P||void 0===P||null===(t=P.data)||void 0===t?void 0:t.map((function(e){return e}))),ne=function(e){return W(e)},le=function(e){return z(e)};(0,Z.s0)();(0,u.useEffect)((function(){return se()}),[P.data]),(0,u.useEffect)((function(){return oe()}),[x]),(0,u.useEffect)((function(){ne(!0),(0,_.km)(b,!0).pipe((0,k.q)(1)).subscribe({next:function(e){N(e),ne(!1)},error:function(){ne(!1)},complete:function(){ne(!1)}})}),[]),(0,u.useEffect)((function(){le(!0),(0,_.qp)(Q,b,!0).pipe((0,E.P)()).subscribe({next:function(e){A(e),le(!1)}})}),[Q]);var oe=(0,u.useCallback)((function(){var e=[],t=[],a=[];0!==(null===x||void 0===x?void 0:x.length)&&(x.map((function(n){var l=g()(new Date).format("YYYY-MM-DD");return g()(n.due_date,"YYYY-MM-DD").isSame(l)?t.push(n):g()(n.due_date,"YYYY-MM-DD").isAfter(l)?a.push(n):e.push(n)})),J({laterTasks:a,todayTasks:t,overdueTasks:e}))}),[x]),re=u.useMemo((function(){return[{Header:function(){return u.createElement("span",null,"Task Name")},accessor:"taskName"},{Header:function(){return u.createElement("span",null,"Completed On")},accessor:"completedOn"}]}),[]),se=(0,u.useCallback)((function(){var e,t,a=[];0!==(null===P||void 0===P||null===(e=P.data)||void 0===e?void 0:e.length)&&(null===P||void 0===P||null===(t=P.data)||void 0===t||t.map((function(e){var t;return a.push({taskName:e.name,process:null===e||void 0===e||null===(t=e.process)||void 0===t?void 0:t.name,completedOn:g()(e.completed_at).format("DD of MMMM YYYY hh:mm"),duration:e.duration})})),I(a))}),[P]);return u.createElement(l.U7,{isOpen:v,modalWrapperStyle:{margin:0},shadowedContainerStyle:{width:C.tq?"100%":"50%"},onClose:function(){return h()},scrollable:!0,blured:!0},u.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},u.createElement(l.zx,{title:"Close",clicked:h,style:{width:"100px"}})),u.createElement("div",{style:{padding:"20px"}},u.createElement("div",{style:{display:"flex",flexDirection:"column"}},u.createElement("div",{className:r},u.createElement("div",{className:s},(null===p||void 0===p||null===(a=p.photo)||void 0===a?void 0:a.length)>0&&u.createElement("img",{alt:"lg",src:(0,o.oY)(p.photo)}))),u.createElement("div",{style:{padding:"30px"}},u.createElement("p",{className:i},y+" "+T),(null===p||void 0===p||null===(c=p.positions)||void 0===c?void 0:c.length)>0&&(null===p||void 0===p||null===(m=p.positions)||void 0===m?void 0:m.map((function(e,t){return u.createElement("div",{key:t},u.createElement("p",{className:d},null===e||void 0===e?void 0:e.name))}))))),u.createElement("div",{style:{display:"flex",flexDirection:"column"}},u.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",padding:"5px",paddingLeft:"5px"}},u.createElement(f,{subtitleText:"Tasks History"})),q?u.createElement(l.$j,{type:"BallTriangle",color:"var(--app-color-gray-light)",height:30,width:"".concat(30,"px")}):u.createElement(w,{loading:q,currentPage:ee,lastPage:te,setLoading:z,historyData:ae,page:Q,setPage:$,columns:re,data:R}))))}},62589:function(e,t,a){a.d(t,{Z:function(){return _}});var n=a(1413),l=a(67861),o=(a(83381),a(39518)),r=a(88374),s=a(14170),i="InfoTaskModal_savedDescription__4uzvj",d="InfoTaskModal_contentWrapper__gt+iR",c="InfoTaskModal_contentContainer__DoP5Z",u="InfoTaskModal_content__42cL+",m="InfoTaskModal_backIconContainer__eM6Vt",v="InfoTaskModal_fieldHistoryTitle__z8Foi",p=a(50981),f=a.n(p),h=a(73500);var g=function(e){var t=e.title,a=e.content;return l.createElement("div",null,l.createElement("p",{className:v},t),l.createElement("p",{className:i},a),e.children)},_=(0,o.$j)((function(e){var t=e.flowReducer;return{inviteColleguesList:t.inviteColleguesList,companyData:t.companyData}}),(function(e){return{onSetCompanyDataField:function(t){return e((0,r.QK)(t))}}}))((function(e){var t=e.modalVisible,a=e.childrenWrapperStyle,o=e.modalClosed,r=e.openedTask,i=r.name,v=r.created_at,p=r.completed_on,_=r.duration,k=(r.process,r.creator),E=r.assignee;return r.components,t?l.createElement("div",null,l.createElement(s.U7,{backdropStyle:{height:"900px"},marginTop:"500px",onClose:o,shadowedContainerStyle:{width:h.tq?"100%":"40%"},position:"fixed",scrollable:!0,backdropColor:!0,blured:!0,width:"90%",isOpen:t},l.createElement("div",{className:m},l.createElement(s.zx,{title:"Close",clicked:o})),l.createElement("div",{className:d,style:(0,n.Z)({},a)},l.createElement("div",{className:c},l.createElement("div",{className:u},l.createElement(g,{title:"Task Name",content:i}),l.createElement(g,{title:"Task Created On",content:f()(v).format("DD of MMMM YYYY hh:mm")}),l.createElement(g,{title:"Completed On",content:f()(p).format("DD of MMMM YYYY hh:mm")}),l.createElement(g,{title:"Time on this Task",content:_}),l.createElement(g,{title:"Task Creator",content:k.first_name+" "+k.last_name}),l.createElement(g,{title:"Assignee",content:E.first_name+" "+E.last_name})))))):null}))},72864:function(e,t,a){a.d(t,{Z:function(){return u}});var n=a(50981),l=a.n(n),o=a(67861),r=a(85692),s=a(14170),i="TaskCard_task-card__8sPmS",d="TaskCard_task-card-container__rHG31",c="TaskCard_clickLabel__A3ARk";var u=function(e){var t=e.task,a=e.openModal,n=void 0===a?function(){}:a,u=e.setTaskToEdit,m=void 0===u?function(){}:u,v=e.clicked,p=void 0===v?function(){}:v,f=e.isEditable,h=e.priority,g=t.name,_=(t.process,t.status);return t.add_info,o.createElement("div",{className:i},t.completed_at?o.createElement("div",{className:d,style:{flex:1},onClick:function(){n(),m()}},o.createElement("p",{className:c,style:{fontWeight:"bold",color:void 0!==h?"green":""}},"".concat(g)),o.createElement("p",{className:c},l()(t.completed_at).format("DD of MMMM YYYY"))):o.createElement("div",{className:d,style:{fontWeight:"bold",color:"var(--app-color-gray-dark)"}},o.createElement(s.XZ,{label:"".concat(void 0!==h?"".concat(h):""," ").concat(g," ").concat(null!==_?"  (".concat(_,")"):""),onChange:p}),f&&o.createElement("img",{alt:"",style:{cursor:"pointer"},src:r.eP,onClick:function(){n(),m()}})))}},61616:function(e,t,a){a.d(t,{Z:function(){return i}});var n="HeaderTopBar_headerTopBar__D+HJ9",l="HeaderTopBar_headerTopBarContainer__1jgza",o="HeaderTopBar_loadingContainer__UcfwW",r=a(93572),s=a(67861),i=function(e){var t=e.hasHeaderImg,a=e.headerTitle,i=e.headerImgSrc,d=e.targetProcessing;return s.createElement("div",{className:n},s.createElement("div",{className:l},t&&s.createElement("img",{alt:"",src:i}),s.createElement("p",null,a),d&&s.createElement("span",{className:o},s.createElement(r.Z,{type:"Watch",color:"var(--app-color-gray-light)",height:15,width:"".concat(30,"px")}))))}},51481:function(e,t,a){a.d(t,{Mk:function(){return m},_5:function(){return f},km:function(){return v},qp:function(){return p},vr:function(){return h},xJ:function(){return g},yW:function(){return u}});var n=a(1413),l=a(50981),o=a.n(l),r=a(95256),s=a(88374),i=a(88827),d=a(30994),c=a(96332),u=function(e){var t=i.h.getState().authReducer.sessionSettings.last_access_token,a=(0,n.Z)((0,n.Z)({},d.ns.tasks.getTaskById(t,e)),{},{handlerEnabled:!0});return new r.y((function(e){(0,c.b)(a).then((function(t){var a,n;200===(null===t||void 0===t?void 0:t.status)&&null!==t&&void 0!==t&&t.data&&null!==t&&void 0!==t&&null!==(a=t.data)&&void 0!==a&&a.data&&(e.next(null===t||void 0===t||null===(n=t.data)||void 0===n?void 0:n.data),e.complete())})).catch((function(t){e.error(t)}))}))},m=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=i.h.getState().authReducer.sessionSettings.last_access_token,u=i.h.getState().flowReducer,m=u.lastUpdates,v=u.allTasks,p=u.axiosAbort,f=(0,n.Z)((0,n.Z)({},d.ns.tasks.getAllTasksCreatedByUser(a,e)),{},{handlerEnabled:!0,signal:p.signal});return new r.y((function(e){t||o()((0,l.now)()).diff(o()(m.tasks),"minutes")>10||0===v.length?(0,c.b)(f).then((function(t){var a;if(200===(null===t||void 0===t?void 0:t.status)&&null!==t&&void 0!==t&&t.data&&null!==t&&void 0!==t&&null!==(a=t.data)&&void 0!==a&&a.data){var n,l=null===t||void 0===t||null===(n=t.data)||void 0===n?void 0:n.data;i.h.dispatch((0,s.rh)(l)),e.next(l),e.complete()}})).catch((function(t){e.error(t)})):e.complete()}))},v=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=i.h.getState().authReducer.sessionSettings.last_access_token,u=i.h.getState().flowReducer,m=u.lastUpdates,v=u.allTasks,p=u.axiosAbort,f=(0,n.Z)((0,n.Z)({},d.ns.tasks.getAllTasks(a,e)),{},{handlerEnabled:!0,signal:p.signal});return new r.y((function(e){t||o()((0,l.now)()).diff(o()(m.tasks),"minutes")>10||0===v.length?(0,c.b)(f).then((function(t){var a;if(200===(null===t||void 0===t?void 0:t.status)&&null!==t&&void 0!==t&&t.data&&null!==t&&void 0!==t&&null!==(a=t.data)&&void 0!==a&&a.data){var o,r=null===t||void 0===t||null===(o=t.data)||void 0===o?void 0:o.data;i.h.dispatch((0,s.rh)(r)),i.h.dispatch((0,s.C2)((0,n.Z)((0,n.Z)({},m),{},{tasks:(0,l.now)()}))),e.next(r),e.complete()}})).catch((function(t){e.error(t)})):e.complete()}))},p=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],u=i.h.getState().authReducer.sessionSettings.last_access_token,m=(0,n.Z)((0,n.Z)({},d.ns.tasks.getAllCompletedTasks(u,e,t)),{},{handlerEnabled:!0}),v=i.h.getState().flowReducer,p=v.lastUpdates,f=v.allCompletedTasks;return new r.y((function(t){a||o()((0,l.now)()).diff(o()(p.allCompletedTasks),"minutes")>10||0===f.data.length?(0,c.b)(m).then((function(a){var n;if(200===(null===a||void 0===a?void 0:a.status)&&null!==a&&void 0!==a&&a.data&&null!==a&&void 0!==a&&null!==(n=a.data)&&void 0!==n&&n.data){var l=null===a||void 0===a?void 0:a.data;i.h.dispatch((0,s.cL)(l,e)),t.next(l),t.complete()}})).catch((function(e){t.error(e)})):t.complete()}))},f=function(e){var t=i.h.getState().authReducer.sessionSettings.last_access_token,a=new FormData,l=(0,n.Z)({},d.ns.tasks.deleteTask(t,e)),o=(0,n.Z)((0,n.Z)({},l),{},{headers:(0,n.Z)({},l.headers),data:a,handlerEnabled:!0});return new r.y((function(t){return(0,c.b)(o).then((function(a){200===(null===a||void 0===a?void 0:a.status)&&null!==a&&void 0!==a&&a.data&&(i.h.dispatch((0,s.Xc)({show:!0,message:"You have successfully deleted the task",color:"red"})),i.h.dispatch((0,s.OQ)(e)),t.next(a.data),t.complete())})).catch((function(e){t.error(e)}))}))},h=function(e){var t,a,l=i.h.getState().authReducer.sessionSettings.last_access_token,o=new FormData;o.append("name",e.taskName),o.append("description",e.taskDescription),o.append("due_date",e.dueDate),null!==e&&void 0!==e&&null!==(t=e.newAssignee)&&void 0!==t&&t.assignee_id&&o.append("assignee_id",e.newAssignee.assignee_id),e.taskProcess&&o.append("procedure_id",null===(a=e.taskProcess)||void 0===a?void 0:a.id),e.add_info&&o.append("add_info",JSON.stringify(e.add_info));var u=(0,n.Z)((0,n.Z)({},d.ns.tasks.createTask(l)),{},{data:o,handlerEnabled:!0});return new r.y((function(e){return(0,c.b)(u).then((function(t){var a;if(null!==t&&void 0!==t&&t.data&&null!==t&&void 0!==t&&null!==(a=t.data)&&void 0!==a&&a.data){var n,l=null===t||void 0===t||null===(n=t.data)||void 0===n?void 0:n.data;i.h.dispatch((0,s.Pb)(l)),i.h.dispatch((0,s.Xc)({show:!0,message:"You have successfully created a new task"})),e.next(l),e.complete()}})).catch((function(t){e.error(t)}))}))},g=function(e,t){var a,l=i.h.getState().authReducer.sessionSettings.last_access_token,o={name:e.name,description:e.description,due_date:e.due_date,assignee_id:e.assignee_id,status:null!==(a=null===e||void 0===e?void 0:e.status)&&void 0!==a?a:""};e.add_info&&(o.add_info=JSON.stringify(e.add_info));var u=(0,n.Z)((0,n.Z)({},d.ns.tasks.editTask(l,t)),{},{data:o,forwardAllErrors:!0});return new r.y((function(e){return(0,c.b)(u).then((function(t){var a;if(null!==t&&void 0!==t&&t.data&&null!==t&&void 0!==t&&null!==(a=t.data)&&void 0!==a&&a.data){var n,l=null===t||void 0===t||null===(n=t.data)||void 0===n?void 0:n.data;i.h.dispatch((0,s.eT)(l)),e.next(l),e.complete()}})).catch((function(t){e.error(t)}))}))}}}]);
//# sourceMappingURL=4270.5a37860b.chunk.js.map