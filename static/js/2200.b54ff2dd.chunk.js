"use strict";(self.webpackChunkflowhero=self.webpackChunkflowhero||[]).push([[2200],{82200:function(e,t,n){n.r(t),n.d(t,{default:function(){return ee}});var o=n(87462),i=n(1413),l=n(29439),r=n(67861),d="BeginModule_headerContainer__6l-gP",s="BeginModule_modalLabelHeader__EVne0",a="BeginModule_modalLabel__WZVSY",u="BeginModule_modalButtons__bAjdy",c="BeginModule_importArea__2hmJ7",p="BeginModule_importText__YhRY+",v=n(39518),f=n(10103),m=n(11577),h=n(65019),g=n(88550),x=n(93389);var y,w,b,E,_,k,M,S,Z=function(e,t){void 0===e&&(e=!0);var n=(0,r.useCallback)((function(n){if("function"!==typeof e||e())return n.preventDefault(),t&&(n.returnValue=t),t}),[e,t]);(0,r.useEffect)((function(){if(e)return function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];e&&e.addEventListener&&e.addEventListener.apply(e,t)}(window,"beforeunload",n),function(){return function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];e&&e.removeEventListener&&e.removeEventListener.apply(e,t)}(window,"beforeunload",n)}}),[e,n])},C=n(88827),I=n(88374),P=n(32422),U=n(10904),A=n(73500),q=n(1542),z=n(6073),O=n(43984),L=n(75105),D=n(34665),N=n(23280),B=n(59401),R=n(29118),T=(n(41771),n(30168)),Y=n(43745),j=Y.ZP.div(y||(y=(0,T.Z)(["\n\twidth: 100%;\n\t\n\tmargin: 0 auto;\n\tpadding: 0 16px;\n\tpadding 0 8% 0 8%;\n"]))),G=Y.ZP.div(w||(w=(0,T.Z)(["\n\tdisplay: flex;\n\tjustify-content: space-between;\n\tposition: relative;\n\tmargin-top: 40px;\n\t:before {\n\t\tcontent: '';\n\t\tposition: absolute;\n\t\tbackground: var(--app-color-gray-lighter);\n\t\theight: 4px;\n\t\twidth: 100%;\n\t\ttop: 50%;\n\t\ttransform: translateY(-50%);\n\t\topacity: 0.3;\n\t\tleft: 0;\n\t}\n\t:after {\n\t\tcontent: '';\n\t\tposition: absolute;\n\t\tbackground: #4a154b;\n\t\theight: 4px;\n\t\twidth: ",";\n\t\ttop: 50%;\n\t\ttransition: 0.4s ease;\n\t\ttransform: translateY(-50%);\n\t\tleft: 0;\n\t}\n"])),(function(e){return e.width})),V=Y.ZP.div(b||(b=(0,T.Z)(["\n\tposition: relative;\n\tz-index: 1;\n"]))),$=Y.ZP.div(E||(E=(0,T.Z)(["\n\twidth: 40px;\n\theight: 40px;\n\tborder-radius: 50%;\n\tbackground-color: #ffffff;\n\tborder: 3px solid ",";\n\ttransition: 0.4s ease;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n"])),(function(e){return"completed"===e.step?"black":"var(--app-color-gray-dark)"})),F=Y.ZP.span(_||(_=(0,T.Z)(["\n\tfont-size: 19px;\n\tcolor: var(--app-color-gray-dark);\n\t@media (max-width: 600px) {\n\t\tfont-size: 16px;\n\t}\n"]))),J=Y.ZP.div(k||(k=(0,T.Z)(["\n\tposition: absolute;\n\twidth: 300px;\n\ttop: 66px;\n\tleft: 50%;\n\ttransform: translate(-50%, -50%);\n"]))),W=Y.ZP.span(M||(M=(0,T.Z)(["\n\tfont-size: 10px;\n\tcolor: var(--app-color-gray-dark);\n\n\t@media (max-width: 800px) {\n\t\tfont-size: 16px;\n\t}\n\t@media (max-width: 600px) {\n\t\tfont-size: 8px;\n\t}\n"]))),X=Y.ZP.div(S||(S=(0,T.Z)(["\n\tfont-size: 26px;\n\tfont-weight: 600;\n\tcolor: #4a154b;\n\t-ms-transform: scaleX(-1) rotate(-46deg); /* IE 9 */\n\t-webkit-transform: scaleX(-1) rotate(-46deg); /* Chrome, Safari, Opera */\n\ttransform: scaleX(-1) rotate(-46deg);\n"]))),H=function(e){var t=e.steps,n=e.activeStep,o=void 0===n?1:n,i=t.length,l="".concat(100/(i-1)*(o-1),"%");return r.createElement(j,null,r.createElement(G,{width:l},t.map((function(e){var t=e.rank,n=e.name;return r.createElement(V,{key:t-1},r.createElement($,{step:o>=t-1?"completed":"incomplete"},o>t-1?r.createElement(X,null,"L"):r.createElement(F,null,t-1)),r.createElement(J,null,r.createElement(W,{key:t-1},n)))}))))},K=n(52902),Q=n(12075),ee=(0,v.$j)((function(e){var t=e.flowReducer,n=t.begunModule,o=t.companyProcesses,i=t.cart;return{begunModule:n,user:e.sessionReducer.user,companyProcesses:o,cart:i}}),(function(e){return{onSetAuthenticatedUser:function(t){return e((0,O.IF)(t))}}}))((function(e){var t,n,v,y,w,b,E,_,k,M,S,O,T,Y,j,G,V,$,F,J,W=e.begunModule,X=e.user,ee=e.companyProcesses,te=e.cart,ne=(0,r.useState)(""),oe=(0,l.Z)(ne,2),ie=oe[0],le=oe[1],re=(0,r.useState)(!1),de=(0,l.Z)(re,2),se=de[0],ae=de[1],ue=(0,r.useState)(!1),ce=(0,l.Z)(ue,2),pe=ce[0],ve=ce[1],fe=(0,g.pQ)(),me=(0,l.Z)(fe,2),he=me[0],ge=me[1],xe=(0,r.useState)(!1),ye=(0,l.Z)(xe,2),we=ye[0],be=ye[1],Ee=(0,r.useState)(!1),_e=(0,l.Z)(Ee,2),ke=_e[0],Me=_e[1],Se=(0,N.UO)(),Ze=Se.moduleID,Ce=Se.paymentID,Ie=(0,N.TH)(),Pe=(0,r.useCallback)((function(e){e.forEach((function(e){var t;if(-1!==["xls","xlsx","csv"].indexOf(null===e||void 0===e||null===(t=e.name)||void 0===t?void 0:t.toString().split(".")[1])){var n=new FileReader;n.onabort=function(){},n.onerror=function(){},n.onload=function(e){},n.readAsBinaryString(e),n.onloadend=function(t){var n,o;Me(!0),(0,q._)(e,null===W||void 0===W||null===(n=W.processModule)||void 0===n||null===(o=n.module)||void 0===o?void 0:o.id).subscribe({next:function(){Me(!1),(0,z.OQ)(!1,!0).pipe((0,f.q)(1)).subscribe({})},complete:function(){Me(!1)},error:function(e){Me(!1)}})}}}))}),[null===W||void 0===W||null===(t=W.processModule)||void 0===t?void 0:t.module]),Ue=(0,R.uI)({onDrop:Pe}),Ae=Ue.getRootProps,qe=Ue.getInputProps,ze=Ue.isDragActive,Oe=(0,N.s0)();(0,r.useEffect)((function(){var e,t;if(void 0===(null===W||void 0===W||null===(e=W.processModule)||void 0===e?void 0:e.isUpdating)){var n=ee.find((function(e){return e.id===W.processModule.id}));if(n&&n.steps.length>0){var o,l=(0,i.Z)((0,i.Z)((0,i.Z)({},W.processModule),n),{},{completeSteps:n.steps,steps:n.steps.filter((function(e){var t,o,i,l,r,d;return void 0==(null===e||void 0===e||null===(t=e.options)||void 0===t?void 0:t.showStepAll)||1==(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.showStepAll)||0==(null===e||void 0===e||null===(i=e.options)||void 0===i?void 0:i.showStepAll)&&(null===e||void 0===e||null===(l=e.options)||void 0===l||null===(r=l.showOnly)||void 0===r?void 0:r.filter((function(e){return X.positions.map((function(e){return e.id})).indexOf(e)>-1})).length)>0||(null===e||void 0===e||null===(d=e.options)||void 0===d?void 0:d.showStepAuthor)&&(null===X||void 0===X?void 0:X.id)===(null===n||void 0===n?void 0:n.user_id)})).map((function(e,t){return(0,i.Z)((0,i.Z)({},e),{},{rank:t+1})}))});C.h.dispatch((0,I.q4)(l)),ge({action:g._U.setCurrentStep,value:l.steps[null!==(o=W.processModule.stepIndex)&&void 0!==o?o:0]})}else(0,x.zJ)(W.processModule.id).pipe((0,m.P)()).subscribe({next:function(e){var t,n=(0,i.Z)((0,i.Z)((0,i.Z)({},W.processModule),e),{},{completeSteps:e.steps,steps:e.steps.filter((function(t){var n,o,i,l,r,d;return void 0==(null===t||void 0===t||null===(n=t.options)||void 0===n?void 0:n.showStepAll)||1==(null===t||void 0===t||null===(o=t.options)||void 0===o?void 0:o.showStepAll)||0==(null===t||void 0===t||null===(i=t.options)||void 0===i?void 0:i.showStepAll)&&(null===t||void 0===t||null===(l=t.options)||void 0===l||null===(r=l.showOnly)||void 0===r?void 0:r.filter((function(e){return X.positions.map((function(e){return e.id})).indexOf(e)>-1})).length)>0||(null===t||void 0===t||null===(d=t.options)||void 0===d?void 0:d.showStepAuthor)&&(null===X||void 0===X?void 0:X.id)===(null===e||void 0===e?void 0:e.user_id)}))});C.h.dispatch((0,I.q4)(n)),ge({action:g._U.setCurrentStep,value:n.steps[null!==(t=W.processModule.stepIndex)&&void 0!==t?t:0]})},error:function(e){}})}else if(!0===(null===W||void 0===W||null===(t=W.processModule)||void 0===t?void 0:t.isUpdating)){var r;ge({action:g._U.setCurrentStep,value:W.processModule.steps[null!==(r=W.processModule.stepIndex)&&void 0!==r?r:0]})}if(Ze){var d=new URLSearchParams(null===Ie||void 0===Ie?void 0:Ie.search);le({key:d.get("key"),value:d.get("value")})}}),[]);return Z(!0,"Are you sure want to leave this "),r.createElement(h.LN,null,r.createElement(B.sM,null,r.createElement("div",{className:d},r.createElement("div",null),!A.tq&&(null===he||void 0===he||null===(n=he.currentStep)||void 0===n?void 0:n.rank)>1&&(null===(v=W.processModule.steps)||void 0===v?void 0:v.length)>2&&r.createElement("div",{className:s,style:{width:(null===(y=W.processModule.steps)||void 0===y?void 0:y.length)>4?"100%":"50%",paddingBottom:"20px"}},r.createElement(H,{steps:null===(w=W.processModule)||void 0===w||null===(b=w.steps)||void 0===b?void 0:b.slice(1),activeStep:null!==(E=(null===he||void 0===he||null===(_=he.currentStep)||void 0===_?void 0:_.rank)-1)&&void 0!==E?E:0})),r.createElement("div",{style:{display:"flex",minWidth:"100px"}},r.createElement(U.j3,{permissions:[U.po.blueprints.process.create]},!0===(null===W||void 0===W||null===(k=W.processModule)||void 0===k||null===(M=k.module)||void 0===M||null===(S=M.options)||void 0===S?void 0:S.allowImport)&&1==(null===he||void 0===he||null===(O=he.currentStep)||void 0===O?void 0:O.rank)&&r.createElement(U.zx,{title:A.tq?"":we?"Hide Import":"Import",style:{marginLeft:"0px"},clicked:function(){return be(!we)}},!we&&r.createElement(Q.G,{icon:K.cf$,style:{margin:"0 10px",width:"20px",height:"20px"}}))),r.createElement(U.zx,{title:A.tq?"":(null===X||void 0===X||null===(T=X.pinned_modules)||void 0===T?void 0:T.filter((function(e){return e.id===W.processModule.module_id})).length)>0?"Unpin":"Pin",loading:pe,style:{marginLeft:"0px",display:(null===he||void 0===he||null===(Y=he.currentStep)||void 0===Y?void 0:Y.rank)>1?"none":""},clicked:function(){var e;ve(!0),(null===X||void 0===X||null===(e=X.pinned_modules)||void 0===e?void 0:e.filter((function(e){return e.id===W.processModule.module_id})).length)>0?(0,q.Ev)(W.processModule.module_id).pipe((0,m.P)()).subscribe({next:function(){(0,L.IC)().pipe((0,m.P)()).subscribe({next:function(e){D.Fc.saveUser((0,i.Z)({},e)),ve(!1)}})}}):(0,q.tq)(W.processModule.module_id).pipe((0,m.P)()).subscribe({next:function(){(0,L.IC)().pipe((0,m.P)()).subscribe({next:function(e){D.Fc.saveUser((0,i.Z)({},e)),ve(!1),C.h.dispatch((0,I.IW)(!0)),Oe("/dashboard")}})}})}},r.createElement(Q.G,{icon:(null===X||void 0===X||null===(j=X.pinned_modules)||void 0===j?void 0:j.filter((function(e){return e.id===W.processModule.module_id})).length)>0?K.KUK:K.Lad,style:{margin:"0 10px",width:"20px",height:"20px"}})),r.createElement(U.zx,{title:!A.tq&&"Close",style:{marginLeft:"0px",display:(null===he||void 0===he||null===(G=he.currentStep)||void 0===G?void 0:G.rank)>1?"none":""},clicked:function(){var e,t,n;(setTimeout((function(){C.h.dispatch((0,I.IW)(!0)),C.h.dispatch((0,I.Xc)({show:!1,message:""}))}),10),(null===he||void 0===he||null===(e=he.items)||void 0===e?void 0:e.length)>0)?!0!==(null===(t=W.processModule.module)||void 0===t||null===(n=t.options)||void 0===n?void 0:n.saveCart)||!1!==W.processModule.isUpdating&&void 0!==W.processModule.isUpdating?(Oe("/dashboard"),C.h.dispatch((0,I.q4)(""))):ae(!0):(Oe("/dashboard"),C.h.dispatch((0,I.q4)("")))}},A.tq&&r.createElement(Q.G,{icon:K.YIN,style:{margin:"0 10px",width:"20px",height:"20px"}})))),we&&r.createElement("div",{className:c},r.createElement("div",Ae(),r.createElement("input",(0,o.Z)({},qe(),{style:{display:"none",alignContent:"center",outline:"none"}})),ze?r.createElement("div",{className:p},r.createElement(Q.G,{icon:K.cf$,style:{backgroundColor:"black",margin:"0 10px",width:"20px",height:"20px"}}),r.createElement("p",null,"Drop the files here ...")):r.createElement("div",{className:p},!ke&&r.createElement(Q.G,{icon:K.cf$,style:{color:"black",margin:"0 10px",width:"20px",height:"20px"}}),r.createElement("p",null,ke?r.createElement(U.$j,{size:80,type:"ThreeDots"}):"Click or drag your file here to begin import. (ex .csv)")))),r.createElement(P.ZP,{navigateTo:ie,isEditing:!1,paymentID:Ce}),r.createElement(U.U7,{id:"pending-component-modal",blured:!0,scrollable:!1,isOpen:se,shadowedContainerStyle:{width:A.tq?"100%":"30%"}},r.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"}},r.createElement("p",{className:s},"Are you working on a transaction?"),r.createElement("div",{className:a},"You can press ".concat((null===te||void 0===te||null===(V=te.items)||void 0===V?void 0:V.length)>0?"'Update Cart'":"'Add to Cart'"," to save any transaction you are working on without submitting it. You can resume it by clicking the cart icon on the menu bar. ").concat((null===te||void 0===te||null===($=te.items)||void 0===$?void 0:$.length)>0?"Pressing 'Empty Cart' will clear previous contents of your cart, and exit":"")),r.createElement("div",{className:u},r.createElement(U.zx,{title:"Close only",style:{width:"120px"},clicked:function(){ge({action:g._U.clearOngoingTransaction}),window.history.back(),C.h.dispatch((0,I.q4)(""))}}),r.createElement(U.zx,{title:(null===te||void 0===te||null===(F=te.items)||void 0===F?void 0:F.length)>0?"Update Cart":"Add to Cart",light:!0,style:{width:"130px"},clicked:function(){var e,t,n,o;he.components.filter((function(e){return e.selected_fields.filter((function(e){return"ID"===e.data_type_name})).forEach((function(e){return e.value=void 0}))})),he.newStepComponents.filter((function(e){return e.selected_fields.filter((function(e){return"ID"===e.data_type_name})).forEach((function(e){return e.value=void 0}))})),(null===W||void 0===W||null===(e=W.processModule)||void 0===e||null===(t=e.steps)||void 0===t?void 0:t.length)>0&&(null===W||void 0===W||null===(n=W.processModule)||void 0===n||null===(o=n.steps)||void 0===o||o.filter((function(e){var t;return null===e||void 0===e||null===(t=e.component_blueprints)||void 0===t?void 0:t.filter((function(e){return e.selected_fields.filter((function(e){return"ID"===e.data_type_name})).filter((function(e){return e.value=void 0}))}))})));var l=JSON.parse(JSON.stringify({components:he.components,newStepComponents:he.newStepComponents,items:he.items,begunModule:(0,i.Z)((0,i.Z)({},W.processModule),{},{stepIndex:1})}));C.h.dispatch((0,I.RV)(l)),ge({action:g._U.clearOngoingTransaction}),window.history.back(),C.h.dispatch((0,I.q4)(""))}}),r.createElement(U.zx,{title:"Empty Cart",light:!0,style:{width:"120px",display:(null===te||void 0===te||null===(J=te.items)||void 0===J?void 0:J.length)>0?"":"none"},clicked:function(){C.h.dispatch((0,I.RV)({})),ge({action:g._U.clearOngoingTransaction}),window.history.back(),C.h.dispatch((0,I.q4)(""))}}))))))}))}}]);
//# sourceMappingURL=2200.b54ff2dd.chunk.js.map