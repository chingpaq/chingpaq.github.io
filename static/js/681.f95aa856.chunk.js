"use strict";(self.webpackChunkflowhero=self.webpackChunkflowhero||[]).push([[681],{96681:function(e,t,l){l.r(t),l.d(t,{default:function(){return k}});var n=l(29439),i=l(50981),o=l.n(i),a=(l(34665),l(38826)),r=l(84658),d=l(2464),s=l(59141),c=l(67861),u=l(39518),p=l(23280),m=l(18316),v=l.n(m),f=l(79492),g=l.n(f),y=(l(82162),l(41771)),x=l(88827),h=l(88374),E=l(71982),b=l(57417),C=l(89293),w=l(96189),S=l(40694),I=l(67861),Z=l(66918),k=(0,u.$j)((function(e){var t=e.authReducer.sessionSettings;return{onBoardingCompleted:e.flowReducer.onBoardingCompleted,sessionSettings:t}}),(function(e){return{onSetOnBoardingVisible:function(t){return e((0,E.DJ)(t))},onSetOnBoardingComplete:function(t){return e((0,h.fj)(t))},onToggleModalVisibility:function(t){return e((0,E.$6)(t))}}}))((function(e){var t,l=(0,p.s0)(),i=((0,u.I0)(),(0,p.UO)().hash),m=(0,c.useRef)(),f=(0,c.useRef)(),E=(0,c.useState)(""),k=(0,n.Z)(E,2),A=k[0],D=k[1],N=(0,c.useState)(""),j=(0,n.Z)(N,2),z=j[0],F=j[1],H=(0,c.useState)(""),T=(0,n.Z)(H,2),B=T[0],P=T[1],Y=(0,c.useState)(""),M=(0,n.Z)(Y,2),O=M[0],R=M[1],_=(0,c.useState)(""),L=(0,n.Z)(_,2),V=L[0],q=L[1],K=(0,c.useState)("Asia/Hong_Kong"),U=(0,n.Z)(K,2),W=U[0],$=U[1],J=(0,c.useState)(""),X=(0,n.Z)(J,2),G=X[0],Q=X[1],ee=(0,c.useState)(!1),te=(0,n.Z)(ee,2),le=te[0],ne=te[1],ie=(0,c.useState)(!1),oe=(0,n.Z)(ie,2),ae=oe[0],re=oe[1],de=(0,c.useState)(""),se=(0,n.Z)(de,2),ce=se[0],ue=se[1],pe=(0,c.useState)(!1),me=(0,n.Z)(pe,2),ve=me[0],fe=me[1],ge=(0,c.useState)(!0),ye=(0,n.Z)(ge,2),xe=ye[0],he=ye[1],Ee=e.onToggleModalVisibility,be=e.onSetOnBoardingComplete,Ce=e.authenticated;(0,c.useEffect)((function(){if(be(!1),Ee({}),(null===i||void 0===i?void 0:i.length)>0){if(Ce)return he(!1),void ue("You are currently logged in as another user. Please logout this user and accept the invitation again");var e=(0,b.s7)(i).subscribe({next:function(e){var t,l,n,i,o;re(!1),q(null!==(t=null!==(l=null===e||void 0===e||null===(n=e.user)||void 0===n?void 0:n.first_name)&&void 0!==l?l:"  "+(null===e||void 0===e||null===(i=e.user)||void 0===i?void 0:i.last_name))&&void 0!==t?t:" "),D(null===e||void 0===e?void 0:e.email),R(null!==(o=null===e||void 0===e?void 0:e.id)&&void 0!==o?o:"")},error:function(e){q("Error"),he(!1),ue("Not a valid invitation, could have expired or incorrect. Please contact your admin")}});return function(){(0,C.zK)(e)}}}),[i]);var we=(0,c.useCallback)((function(e){var t,n,i;if(e.preventDefault(),e.stopPropagation(),m.current.validateAll(),0===(null===f||void 0===f||null===(t=f.current)||void 0===t||null===(n=t.context)||void 0===n||null===(i=n._errors)||void 0===i?void 0:i.length)){re(!0);var a={email:A,password:G,username:B,invitation_id:O,timezone:W,phone:z,validity:"".concat(o()().add(3,"days").format("YYYY-MM-DD HH:mm:ss"))};(0,b.f0)(a).subscribe({next:function(){re(!1),x.h.dispatch((0,h.Xc)({noTimeout:!0,show:!0,message:"You have successfully registered your account. Close this message and enter your credentials when the login page appears",color:"var(--app-color-blue)",spinner:!1,bottom:!0,action:function(){(0,b.iC)(),l("/login")}}))},error:function(e){var t,l,n,i,o,a,r,d,s,c,u,p,m,v,f,g,y;if((null===e||void 0===e||null===(t=e.data)||void 0===t||null===(l=t.errors)||void 0===l||null===(n=l.email)||void 0===n?void 0:n.length)>0)ue(null===e||void 0===e||null===(g=e.data)||void 0===g||null===(y=g.errors)||void 0===y?void 0:y.email[0]);else if((null===e||void 0===e||null===(i=e.data)||void 0===i||null===(o=i.errors)||void 0===o||null===(a=o.username)||void 0===a?void 0:a.length)>0){var x,h;ue(null===e||void 0===e||null===(x=e.data)||void 0===x||null===(h=x.errors)||void 0===h?void 0:h.username[0])}else if((null===e||void 0===e||null===(r=e.data)||void 0===r||null===(d=r.errors)||void 0===d||null===(s=d.password)||void 0===s?void 0:s.length)>0){var E,b;ue(null===e||void 0===e||null===(E=e.data)||void 0===E||null===(b=E.errors)||void 0===b?void 0:b.password[0])}else if((null===e||void 0===e||null===(c=e.data)||void 0===c||null===(u=c.errors)||void 0===u||null===(p=u.timezone)||void 0===p?void 0:p.length)>0){var C,w;ue(null===e||void 0===e||null===(C=e.data)||void 0===C||null===(w=C.errors)||void 0===w?void 0:w.timezone[0])}else if((null===e||void 0===e||null===(m=e.data)||void 0===m||null===(v=m.errors)||void 0===v||null===(f=v.invitation_id)||void 0===f?void 0:f.length)>0){var S,I;ue(null===e||void 0===e||null===(S=e.data)||void 0===S||null===(I=S.errors)||void 0===I?void 0:I.invitation_id[0])}else ue("InvitationAccepted");re(!1)},complete:function(){}})}else re(!1)}),[A,G,O,W,B]),Se=function(){e.onSetOnBoardingVisible(!1),e.onSetOnBoardingComplete(!0),l("/help-center")},Ie=(0,d.Z)({"@global":{".MuiOutlinedInput-root":{"& fieldset":{borderColor:"var(--app-color-gray-lighter)"},"&:hover fieldset":{borderColor:"var(--app-color-gray-lighter)!important"},"&.Mui-focused fieldset":{borderColor:"var(--app-color-gray-lighter)!important"}}}})((function(){return null}));return I.createElement("div",{className:"main-container",style:{position:"relative",backgroundColor:"white",display:""===V?"none":"flex",flex:1,width:"100%",height:"100vh",justifyContent:"space-evenly",alignItems:"stretch",overflowY:"auto"}},I.createElement("div",{className:"first-container"},I.createElement("div",{style:{display:"flex",width:"100%",flexDirection:"column",justifyContent:"flex-start",alignItems:"center"}},xe?I.createElement("div",{style:{alignSelf:"flex-start",display:"flex",flexDirection:"column",justifyContent:"space-evenly",alignItems:"center"}},I.createElement("div",{style:{alignSelf:"flex-start",display:"flex",flex:0,flexDirection:"column",justifyContent:"space-evenly",alignItems:"center"}},I.createElement("h1",{style:{padding:0,color:"#4A4A4A",fontSize:"28px",fontWeight:500,letterSpacing:0,lineHeight:"40px"}},"Superadmin"===V?"The request to create your company/or user account has been approved by ".concat(C.iC):"You've been invited by ","Superadmin"!==V&&I.createElement("span",null,I.createElement("i",null,V)," to ".concat(C.iC)))),"Superadmin"===V&&I.createElement("div",{style:{display:"flex",width:"100%",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",margin:"30px 0 0 0 "}},I.createElement("p",{style:{fontFamily:"var(--app-text-main-font)",fontSize:"1em",lineHeight:"1.5em",color:"var(--app-color-gray-light)"}},"Please provide the details below to finalize the company")),I.createElement("div",{style:{paddingTop:"30px",alignSelf:"flex-start"}},I.createElement(g(),{ref:m},I.createElement("p",{className:"labelTextStyle"},"Account Email:"),I.createElement(s.Z,{id:"my-input",type:"text",variant:"outlined",name:"name",className:"input-style",placeholder:"Company Email",value:A,onChange:function(e){var t=e.target.value;D(t)}}),null!==ce&&void 0!==ce&&ce.email?I.createElement("div",{className:"form-group"},I.createElement("div",{style:{color:"#721c24",backgroundColor:"#f8d7da",borderColor:"#f5c6cb"}},null===ce||void 0===ce?void 0:ce.email)):null,I.createElement("br",null),I.createElement("br",null),I.createElement(s.Z,{id:"my-input",type:"text",variant:"outlined",name:"username",className:"input-style",placeholder:"Desired Username",value:B,onChange:function(e){P(e.target.value)}}),null!==ce&&void 0!==ce&&ce.username?I.createElement("div",{className:"form-group"},I.createElement("div",{style:{color:"#721c24",backgroundColor:"#f8d7da",borderColor:"#f5c6cb"}},null===ce||void 0===ce?void 0:ce.username)):null,I.createElement("br",null),I.createElement("br",null),I.createElement(s.Z,{id:"my-input",type:"text",variant:"outlined",name:"mobile",className:"input-style",placeholder:"Mobile Number",value:z,onChange:function(e){F(e.target.value)}}),I.createElement("br",null),I.createElement("br",null),I.createElement("p",{className:"labelTextStyle"},"Account Password:"),I.createElement("label",{style:{display:"inline-flex",alignItems:"center"}},I.createElement(Ie,null),I.createElement(a.Z,{id:"my-input",className:"input-style",type:le?"text":"password",name:"password",placeholder:"Password",value:G,onChange:function(e){var t=e.target.value;Q(t)},endAdornment:I.createElement(r.Z,{className:"showHideButton",onClick:function(){return ne(!le)},position:"end"},le?"Hide":"Show")})),null!==ce&&void 0!==ce&&ce.password?I.createElement("div",{className:"form-group"},I.createElement("div",{className:"alert alert-danger",role:"alert"},null===ce||void 0===ce?void 0:ce.password)):null,I.createElement("br",null),I.createElement("br",null),I.createElement("p",{className:"labelTextStyle"},"Timezone:"),I.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"stretch",width:"100%"}},I.createElement(w.Ld,{items:C.LY,defaultSelectedItem:Z.find(Z.propEq("value",W))(C.LY),triggerType:"chevron",placeholder:"Select timezone...",onChange:function(e){$(null===e||void 0===e?void 0:e.value)}})),I.createElement("br",null),I.createElement("br",null),I.createElement("div",{style:{display:"flex",width:"100%",flex:0,justifyContent:"flex-start",alignItems:"center",maxHeight:"30px"}},I.createElement(S.Z,{disabled:ae,loading:ae,clicked:we,title:"Super"===V?"Create Company":"Accept Invitation",style:{margin:"0",display:(null===B||void 0===B?void 0:B.length)>6?"":"none"}})),ce&&I.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-evenly",alignItems:"center",fontSize:"1em",width:"90%",marginTop:"30px",borderRadius:"3px",color:"#721c24",backgroundColor:"#f8d7da",borderColor:"#f5c6cb",padding:"2px"},role:"alert"},"InvitationAccepted"===ce?I.createElement("div",null,"Already accepted the invitation, click ",I.createElement("a",{href:"/"},"here")," to login."):ce),I.createElement(v(),{style:{display:"none"},ref:f}))),I.createElement("div",{style:{display:"flex",width:"100%",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",margin:"30px 0 0 0 "}},I.createElement("p",null,"".concat("Superadmin"===V?"By creating the company":"By accepting",", you agree with ").concat(C.iC)," ",I.createElement("a",{href:"https://www.flowhero.app/#/legal"},"Terms and Conditions")," and ",I.createElement("a",{href:"https://www.flowhero.app/#/legal"},"Privacy Policy")))):I.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-evenly",alignItems:"center",fontSize:"1em",width:"90%",marginTop:"30px",borderRadius:"3px",color:null!==ce&&void 0!==ce&&ce.success?"gray":"#721c24",backgroundColor:null!==ce&&void 0!==ce&&ce.success?"transparent":"#f8d7da",borderColor:"#f5c6cb",padding:"2px"},role:"alert"},null!==(t=null===ce||void 0===ce?void 0:ce.success)&&void 0!==t?t:ce))),I.createElement("div",{className:"second-container",onClick:function(e){e.preventDefault(),e.stopPropagation(),fe(!1)}}),ve&&I.createElement("div",{style:{width:"300px",flex:1,flexWrap:"wrap",padding:"12px 30px 0px 10px",zIndex:101,position:"absolute",bottom:"0px",right:"50px",display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center",borderRadius:"8px 8px 0 0",backgroundColor:" #FFFFFF",boxShadow:"0 0 40px 0 rgba(0, 0, 0, 0.1)"}},I.createElement("div",{style:{display:"flex",flex:1,flexDirection:"row",justifyContent:"space-evenly",alignItems:"center",height:"54px",width:"149px"}},I.createElement("img",{src:y.Pys,style:{height:"24px",width:"24px"},alt:"need-help-icon"}),I.createElement("p",{style:{color:" #4A4A4A",fontFamily:" var(--app-text-main-font)",fontSize:"16px",lineHeight:"22px"}},"Need help?")),I.createElement("div",{style:{display:" flex",flex:1,flexDirection:"row",justifyContent:"space-evenly",alignItems:"center"}},I.createElement("p",{style:{textAlign:"left",color:" #4A4A4A",fontFamily:" var(--app-text-main-font)",fontSize:"16px",lineHeight:"24px"}},"Before requesting to speak to one of our colleagues, we encourage you to explore our ",I.createElement("span",{onClick:Se,style:{textDecoration:"underline",cursor:"pointer"}},"Help Center")," to find your solution.")),I.createElement("div",{style:{margin:"20px 10px",display:"flex",width:"100%",flex:0,justifyContent:"center",alignItems:"center",maxHeight:"30px"}},I.createElement(S.Z,{disabled:ae,loading:ae,clicked:Se,title:"Help Center",style:{margin:"10px",width:"100%"}})),I.createElement("div",{style:{margin:"20px 10px",display:"flex",width:"100%",flex:0,justifyContent:"center",alignItems:"center",maxHeight:"30px"}},I.createElement(S.Z,{disabled:ae,loading:ae,clicked:function(){alert("Live Chat")},title:"Live Chat",style:{margin:"10px",width:"100%",backgroundColor:"#FFFFFF"},titleStyle:{color:"var(--app-color-gray-light)",fontSize:"16px"}}))))}))}}]);
//# sourceMappingURL=681.f95aa856.chunk.js.map