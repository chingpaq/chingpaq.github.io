"use strict";(self.webpackChunkflowhero=self.webpackChunkflowhero||[]).push([[4270],{63789:(e,t,a)=>{a.d(t,{Z:()=>x});var n=a(14170),l=a(49465);const s="UserOverviewModal_topContainer__SfY2a",o="UserOverviewModal_avatarContainer__qWrM5",r="UserOverviewModal_name__i+epl",d="UserOverviewModal_position__8Heb9";var i=a(1413),c=a(67861);const u="PageSubtitle_host__1jvVf",m="PageSubtitle_pageSubtitleHost__vDvTj",p="PageSubtitle_pageSubtitleChild__s3-5p",v=e=>{const{subtitleImage:t,subtitleText:a,style:n,smallerSubtitle:l}=e;return c.createElement("div",{className:u},c.createElement("div",{className:m,style:(0,i.Z)({},n)},t&&c.createElement("img",{src:t,className:"grey-svg-image-filter",alt:""}),c.createElement("p",null,a)),l&&c.createElement("div",{className:p},c.createElement("p",null,l)))};var h=a(50981),g=a.n(h),_=a(51481),k=a(10103),f=a(11577),E=(a(72864),a(87462)),y=a(90369),T=a(62589);const b="TasksTable_tasksTableHost__msAp6";const S=function(e){const{historyData:t,currentPage:a,lastPage:l,setPage:s,loading:o,setLoading:r,columns:d,data:i}=e,[u,m]=(0,c.useState)(!1),[p,v]=(0,c.useState)(""),[h,g]=(0,c.useState)(""),[_,k]=(0,c.useState)(""),[f,S]=(0,c.useState)(""),[w,C]=(0,c.useState)(""),[x,M]=(0,c.useState)(""),[N,D]=(0,c.useState)(""),[Y,Z]=(0,c.useState)(""),{getTableProps:P,getTableBodyProps:A,headerGroups:H,rows:O,prepareRow:R}=(0,y.useTable)({columns:d,data:i});return c.createElement("div",{className:b},c.createElement("table",P(),c.createElement("thead",null,H.map((e,t)=>c.createElement("tr",(0,E.Z)({key:t},e.getHeaderGroupProps(),{className:"header-row"}),e.headers.map((e,t)=>c.createElement("th",(0,E.Z)({key:t},e.getHeaderProps()),e.render("Header")))))),c.createElement("tbody",A(),O.map((e,a)=>(R(e),c.createElement("tr",(0,E.Z)({key:a},e.getRowProps(),{onClick:()=>{return e=t[a],Z(e),m(!u),v(e.taskName),g(e.createdAt),k(e.completedOn),S(e.duration),C(e.taskCreator),M(e.taskAssignee),void D(null===e||void 0===e?void 0:e.process);var e},style:{cursor:"pointer"}}),e.cells.map((e,t)=>c.createElement("td",(0,E.Z)({key:t},e.getCellProps()),e.render("Cell")))))))),0==i.length&&c.createElement("p",null,"No Tasks Found"),c.createElement("div",{style:{textAlign:"center",marginTop:"20px",paddingBottom:"50px"}},a!==l&&i.length>0&&c.createElement(n.nw,{loadMorePressed:()=>{r(!o),s(a+1)},apiRequest:o})),c.createElement(T.Z,{openedTask:Y,createdAt:h,taskName:p,completedOn:_,duration:f,taskCreator:w,taskAssignee:x,process:N,modalVisible:u,modalClosed:()=>m(!u),hasTutorial:!0,blured:!0,childrenWrapperStyle:{alignItems:"center"},onCancel:()=>m(!u)}))};var w=a(23280),C=a(73500);const x=e=>{var t,a,i,u;const{isVisible:m,activeItem:p,handleClose:h,isAdmin:E}=e,{first_name:y,last_name:T,id:b}=p,[x,M]=(0,c.useState)([]),[N,D]=(0,c.useState)([]),[Y,Z]=(0,c.useState)([]),[P,A]=(0,c.useState)(!1),[H,O]=(0,c.useState)(!1),[R,I]=(0,c.useState)({laterTasks:[],todayTasks:[],overdueTasks:[]}),[U,B]=(0,c.useState)(1),{current_page:W,from:L}=(null===N||void 0===N?void 0:N.meta)||{},j=N.data&&(null===N||void 0===N||null===(t=N.data)||void 0===t?void 0:t.map(e=>e)),q=e=>A(e),z=e=>O(e);(0,w.s0)();(0,c.useEffect)(()=>V(),[N.data]),(0,c.useEffect)(()=>F(),[x]),(0,c.useEffect)(()=>{q(!0),(0,_.km)(b,!0).pipe((0,k.q)(1)).subscribe({next:e=>{M(e),q(!1)},error:()=>{q(!1)},complete:()=>{q(!1)}})},[]),(0,c.useEffect)(()=>{z(!0),(0,_.qp)(U,b,!0).pipe((0,f.P)()).subscribe({next:e=>{D(e),z(!1)}})},[U]);const F=(0,c.useCallback)(()=>{const e=[],t=[],a=[];if(0===(null===x||void 0===x?void 0:x.length))return;x.map(n=>{const l=g()(new Date).format("YYYY-MM-DD");return g()(n.due_date,"YYYY-MM-DD").isSame(l)?t.push(n):g()(n.due_date,"YYYY-MM-DD").isAfter(l)?a.push(n):e.push(n)});I({laterTasks:a,todayTasks:t,overdueTasks:e})},[x]);const J=c.useMemo(()=>[{Header:()=>c.createElement("span",null,"Task Name"),accessor:"taskName"},{Header:()=>c.createElement("span",null,"Completed On"),accessor:"completedOn"}],[]),V=(0,c.useCallback)(()=>{var e,t;const a=[];0!==(null===N||void 0===N||null===(e=N.data)||void 0===e?void 0:e.length)&&(null===N||void 0===N||null===(t=N.data)||void 0===t||t.map(e=>{var t;return a.push({taskName:e.name,process:null===e||void 0===e||null===(t=e.process)||void 0===t?void 0:t.name,completedOn:g()(e.completed_at).format("DD of MMMM YYYY hh:mm"),duration:e.duration})}),Z(a))},[N]);return c.createElement(n.U7,{isOpen:m,modalWrapperStyle:{margin:0},shadowedContainerStyle:{width:C.tq?"100%":"50%"},onClose:()=>h(),scrollable:!0,blured:!0},c.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},c.createElement(n.zx,{title:"Close",clicked:h,style:{width:"100px"}})),c.createElement("div",{style:{padding:"20px"}},c.createElement("div",{style:{display:"flex",flexDirection:"column"}},c.createElement("div",{className:s},c.createElement("div",{className:o},(null===p||void 0===p||null===(a=p.photo)||void 0===a?void 0:a.length)>0&&c.createElement("img",{alt:"lg",src:(0,l.oY)(p.photo)}))),c.createElement("div",{style:{padding:"30px"}},c.createElement("p",{className:r},y+" "+T),(null===p||void 0===p||null===(i=p.positions)||void 0===i?void 0:i.length)>0&&(null===p||void 0===p||null===(u=p.positions)||void 0===u?void 0:u.map((e,t)=>c.createElement("div",{key:t},c.createElement("p",{className:d},null===e||void 0===e?void 0:e.name)))))),c.createElement("div",{style:{display:"flex",flexDirection:"column"}},c.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",padding:"5px",paddingLeft:"5px"}},c.createElement(v,{subtitleText:"Tasks History"})),H?c.createElement(n.$j,{type:"BallTriangle",color:"var(--app-color-gray-light)",height:30,width:"".concat(30,"px")}):c.createElement(S,{loading:H,currentPage:W,lastPage:L,setLoading:O,historyData:j,page:U,setPage:B,columns:J,data:Y}))))}},62589:(e,t,a)=>{a.d(t,{Z:()=>k});var n=a(1413),l=a(67861),s=(a(83381),a(39518)),o=a(88374),r=a(14170);const d="InfoTaskModal_savedDescription__4uzvj",i="InfoTaskModal_contentWrapper__gt+iR",c="InfoTaskModal_contentContainer__DoP5Z",u="InfoTaskModal_content__42cL+",m="InfoTaskModal_backIconContainer__eM6Vt",p="InfoTaskModal_fieldHistoryTitle__z8Foi";var v=a(50981),h=a.n(v),g=a(73500);const _=e=>{const{title:t,content:a}=e;return l.createElement("div",null,l.createElement("p",{className:p},t),l.createElement("p",{className:d},a),e.children)},k=(0,s.$j)(e=>{const{inviteColleguesList:t,companyData:a}=e.flowReducer;return{inviteColleguesList:t,companyData:a}},e=>({onSetCompanyDataField:t=>e((0,o.QK)(t))}))(function(e){const{modalVisible:t,childrenWrapperStyle:a,modalClosed:s,openedTask:o}=e,{name:d,created_at:p,completed_on:v,duration:k,process:f,creator:E,assignee:y,components:T}=o;return t?l.createElement("div",null,l.createElement(r.U7,{backdropStyle:{height:"900px"},marginTop:"500px",onClose:s,shadowedContainerStyle:{width:g.tq?"100%":"40%"},position:"fixed",scrollable:!0,backdropColor:!0,blured:!0,width:"90%",isOpen:t},l.createElement("div",{className:m},l.createElement(r.zx,{title:"Close",clicked:s})),l.createElement("div",{className:i,style:(0,n.Z)({},a)},l.createElement("div",{className:c},l.createElement("div",{className:u},l.createElement(_,{title:"Task Name",content:d}),l.createElement(_,{title:"Task Created On",content:h()(p).format("DD of MMMM YYYY hh:mm")}),l.createElement(_,{title:"Completed On",content:h()(v).format("DD of MMMM YYYY hh:mm")}),l.createElement(_,{title:"Time on this Task",content:k}),l.createElement(_,{title:"Task Creator",content:E.first_name+" "+E.last_name}),l.createElement(_,{title:"Assignee",content:y.first_name+" "+y.last_name})))))):null})},72864:(e,t,a)=>{a.d(t,{Z:()=>u});var n=a(50981),l=a.n(n),s=a(67861),o=a(85692),r=a(14170);const d="TaskCard_task-card__8sPmS",i="TaskCard_task-card-container__rHG31",c="TaskCard_clickLabel__A3ARk";const u=function(e){const{task:t,openModal:a=()=>{},setTaskToEdit:n=()=>{},clicked:u=()=>{},isEditable:m,priority:p}=e,{name:v,process:h,status:g,add_info:_}=t;return s.createElement("div",{className:d},t.completed_at?s.createElement("div",{className:i,style:{flex:1},onClick:()=>{a(),n()}},s.createElement("p",{className:c,style:{fontWeight:"bold",color:void 0!==p?"green":""}},"".concat(v)),s.createElement("p",{className:c},l()(t.completed_at).format("DD of MMMM YYYY"))):s.createElement("div",{className:i,style:{fontWeight:"bold",color:"var(--app-color-gray-dark)",padding:"10px"}},s.createElement(r.XZ,{llabel:"".concat(void 0!==p?"".concat(p):""," ").concat(v," ").concat(null!==g?"  (".concat(g,")"):""),onChange:u}),s.createElement("div",{style:{padding:"7px",textJustify:"left",width:"100%",cursor:"pointer"},onClick:()=>{a(),n()}},"".concat(void 0!==p?"".concat(p):""," ").concat(v," ").concat(null!==g?"  (".concat(g,")"):"")),m&&s.createElement("img",{alt:"",style:{cursor:"pointer"},src:o.eP,onClick:()=>{a(),n()}})))}},61616:(e,t,a)=>{a.d(t,{Z:()=>d});const n="HeaderTopBar_headerTopBar__D+HJ9",l="HeaderTopBar_headerTopBarContainer__1jgza",s="HeaderTopBar_loadingContainer__UcfwW";var o=a(93572),r=a(67861);const d=e=>{const{hasHeaderImg:t,headerTitle:a,headerImgSrc:d,targetProcessing:i}=e;return r.createElement("div",{className:n},r.createElement("div",{className:l},t&&r.createElement("img",{alt:"",src:d}),r.createElement("p",null,a),i&&r.createElement("span",{className:s},r.createElement(o.Z,{type:"Watch",color:"var(--app-color-gray-light)",height:15,width:"".concat(30,"px")}))))}},51481:(e,t,a)=>{a.d(t,{Mk:()=>m,_5:()=>h,km:()=>p,qp:()=>v,vr:()=>g,xJ:()=>_,yW:()=>u});var n=a(1413),l=a(50981),s=a.n(l),o=a(95256),r=a(88374),d=a(88827),i=a(30994),c=a(96332);const u=e=>{const{sessionSettings:{last_access_token:t}}=d.h.getState().authReducer,a=(0,n.Z)((0,n.Z)({},i.ns.tasks.getTaskById(t,e)),{},{handlerEnabled:!0});return new o.y(e=>{(0,c.b)(a).then(t=>{var a,n;200===(null===t||void 0===t?void 0:t.status)&&null!==t&&void 0!==t&&t.data&&null!==t&&void 0!==t&&null!==(a=t.data)&&void 0!==a&&a.data&&(e.next(null===t||void 0===t||null===(n=t.data)||void 0===n?void 0:n.data),e.complete())}).catch(t=>{e.error(t)})})},m=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{sessionSettings:{last_access_token:a}}=d.h.getState().authReducer,{lastUpdates:u,allTasks:m,axiosAbort:p}=d.h.getState().flowReducer,v=(0,n.Z)((0,n.Z)({},i.ns.tasks.getAllTasksCreatedByUser(a,e)),{},{handlerEnabled:!0,signal:p.signal});return new o.y(e=>{t||s()((0,l.now)()).diff(s()(u.tasks),"minutes")>10||0===m.length?(0,c.b)(v).then(t=>{var a;if(200===(null===t||void 0===t?void 0:t.status)&&null!==t&&void 0!==t&&t.data&&null!==t&&void 0!==t&&null!==(a=t.data)&&void 0!==a&&a.data){var n;const a=null===t||void 0===t||null===(n=t.data)||void 0===n?void 0:n.data;d.h.dispatch((0,r.rh)(a)),e.next(a),e.complete()}}).catch(t=>{e.error(t)}):e.complete()})},p=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{sessionSettings:{last_access_token:a}}=d.h.getState().authReducer,{lastUpdates:u,allTasks:m,axiosAbort:p}=d.h.getState().flowReducer,v=(0,n.Z)((0,n.Z)({},i.ns.tasks.getAllTasks(a,e)),{},{handlerEnabled:!0,signal:p.signal});return new o.y(e=>{t||s()((0,l.now)()).diff(s()(u.tasks),"minutes")>10||0===m.length?(0,c.b)(v).then(t=>{var a;if(200===(null===t||void 0===t?void 0:t.status)&&null!==t&&void 0!==t&&t.data&&null!==t&&void 0!==t&&null!==(a=t.data)&&void 0!==a&&a.data){var s;const a=null===t||void 0===t||null===(s=t.data)||void 0===s?void 0:s.data;d.h.dispatch((0,r.rh)(a)),d.h.dispatch((0,r.C2)((0,n.Z)((0,n.Z)({},u),{},{tasks:(0,l.now)()}))),e.next(a),e.complete()}}).catch(t=>{e.error(t)}):e.complete()})},v=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{sessionSettings:{last_access_token:u}}=d.h.getState().authReducer,m=(0,n.Z)((0,n.Z)({},i.ns.tasks.getAllCompletedTasks(u,e,t)),{},{handlerEnabled:!0}),{lastUpdates:p,allCompletedTasks:v}=d.h.getState().flowReducer;return new o.y(t=>{a||s()((0,l.now)()).diff(s()(p.allCompletedTasks),"minutes")>10||0===v.data.length?(0,c.b)(m).then(a=>{var n;if(200===(null===a||void 0===a?void 0:a.status)&&null!==a&&void 0!==a&&a.data&&null!==a&&void 0!==a&&null!==(n=a.data)&&void 0!==n&&n.data){const n=null===a||void 0===a?void 0:a.data;d.h.dispatch((0,r.cL)(n,e)),t.next(n),t.complete()}}).catch(e=>{t.error(e)}):t.complete()})},h=e=>{const{sessionSettings:{last_access_token:t}}=d.h.getState().authReducer,a=new FormData,l=(0,n.Z)({},i.ns.tasks.deleteTask(t,e)),s=(0,n.Z)((0,n.Z)({},l),{},{headers:(0,n.Z)({},l.headers),data:a,handlerEnabled:!0});return new o.y(t=>(0,c.b)(s).then(a=>{200===(null===a||void 0===a?void 0:a.status)&&null!==a&&void 0!==a&&a.data&&(d.h.dispatch((0,r.Xc)({show:!0,message:"You have successfully deleted the task",color:"red"})),d.h.dispatch((0,r.OQ)(e)),t.next(a.data),t.complete())}).catch(e=>{t.error(e)}))},g=e=>{var t,a;const{sessionSettings:{last_access_token:l}}=d.h.getState().authReducer,s=new FormData;s.append("name",e.taskName),s.append("description",e.taskDescription),s.append("due_date",e.dueDate),null!==e&&void 0!==e&&null!==(t=e.newAssignee)&&void 0!==t&&t.assignee_id&&s.append("assignee_id",e.newAssignee.assignee_id),e.taskProcess&&s.append("procedure_id",null===(a=e.taskProcess)||void 0===a?void 0:a.id),e.add_info&&s.append("add_info",JSON.stringify(e.add_info));const u=(0,n.Z)((0,n.Z)({},i.ns.tasks.createTask(l)),{},{data:s,handlerEnabled:!0});return new o.y(e=>(0,c.b)(u).then(t=>{var a;if(null!==t&&void 0!==t&&t.data&&null!==t&&void 0!==t&&null!==(a=t.data)&&void 0!==a&&a.data){var n;const a=null===t||void 0===t||null===(n=t.data)||void 0===n?void 0:n.data;d.h.dispatch((0,r.Pb)(a)),d.h.dispatch((0,r.Xc)({show:!0,message:"You have successfully created a new task"})),e.next(a),e.complete()}}).catch(t=>{e.error(t)}))},_=(e,t)=>{var a;const{sessionSettings:{last_access_token:l}}=d.h.getState().authReducer,s={name:e.name,description:e.description,due_date:e.dueDate,assignee_id:e.assignee_id,status:null!==(a=null===e||void 0===e?void 0:e.status)&&void 0!==a?a:""};e.add_info&&(s.add_info=JSON.stringify(e.add_info));const u=(0,n.Z)((0,n.Z)({},i.ns.tasks.editTask(l,t)),{},{data:s,forwardAllErrors:!0});return new o.y(e=>(0,c.b)(u).then(t=>{var a;if(null!==t&&void 0!==t&&t.data&&null!==t&&void 0!==t&&null!==(a=t.data)&&void 0!==a&&a.data){var n;const a=null===t||void 0===t||null===(n=t.data)||void 0===n?void 0:n.data;d.h.dispatch((0,r.eT)(a)),e.next(a),e.complete()}}).catch(t=>{e.error(t)}))}}}]);
//# sourceMappingURL=4270.d0a13aee.chunk.js.map