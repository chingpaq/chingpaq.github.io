"use strict";(self.webpackChunkflowhero=self.webpackChunkflowhero||[]).push([[200],{82200:function(e,t,n){n.r(t),n.d(t,{default:function(){return Q}});var o=n(1413),i=n(29439),l=n(67861),r="BeginModule_headerContainer__6l-gP",d="BeginModule_modalLabelHeader__EVne0",s="BeginModule_modalLabel__WZVSY",a="BeginModule_modalButtons__bAjdy",u="BeginModule_importArea__2hmJ7",c="BeginModule_importText__YhRY+",p=n(39518),v=n(10103),f=n(11577),m=n(65019),h=n(88550),g=n(93389);var x,y,w,b,E,_,k,S,M=function(e,t){void 0===e&&(e=!0);var n=(0,l.useCallback)((function(n){if("function"!==typeof e||e())return n.preventDefault(),t&&(n.returnValue=t),t}),[e,t]);(0,l.useEffect)((function(){if(e)return function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];e&&e.addEventListener&&e.addEventListener.apply(e,t)}(window,"beforeunload",n),function(){return function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];e&&e.removeEventListener&&e.removeEventListener.apply(e,t)}(window,"beforeunload",n)}}),[e,n])},Z=n(88827),C=n(88374),I=n(32422),P=n(10904),U=n(73500),A=n(1542),z=n(6073),q=n(43984),O=n(75105),L=n(34665),D=n(23280),N=n(59401),B=n(29118),R=n(30168),T=n(43745),Y=T.ZP.div(x||(x=(0,R.Z)(["\n\twidth: 100%;\n\t\n\tmargin: 0 auto;\n\tpadding: 0 16px;\n\tpadding 0 8% 0 8%;\n"]))),j=T.ZP.div(y||(y=(0,R.Z)(["\n\tdisplay: flex;\n\tjustify-content: space-between;\n\tposition: relative;\n\tmargin-top: 40px;\n\t:before {\n\t\tcontent: '';\n\t\tposition: absolute;\n\t\tbackground: var(--app-color-gray-lighter);\n\t\theight: 4px;\n\t\twidth: 100%;\n\t\ttop: 50%;\n\t\ttransform: translateY(-50%);\n\t\topacity: 0.3;\n\t\tleft: 0;\n\t}\n\t:after {\n\t\tcontent: '';\n\t\tposition: absolute;\n\t\tbackground: #4a154b;\n\t\theight: 4px;\n\t\twidth: ",";\n\t\ttop: 50%;\n\t\ttransition: 0.4s ease;\n\t\ttransform: translateY(-50%);\n\t\tleft: 0;\n\t}\n"])),(function(e){return e.width})),W=T.ZP.div(w||(w=(0,R.Z)(["\n\tposition: relative;\n\tz-index: 1;\n"]))),G=T.ZP.div(b||(b=(0,R.Z)(["\n\twidth: 40px;\n\theight: 40px;\n\tborder-radius: 50%;\n\tbackground-color: #ffffff;\n\tborder: 3px solid ",";\n\ttransition: 0.4s ease;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n"])),(function(e){return"completed"===e.step?"black":"var(--app-color-gray-dark)"})),V=T.ZP.span(E||(E=(0,R.Z)(["\n\tfont-size: 19px;\n\tcolor: var(--app-color-gray-dark);\n\t@media (max-width: 600px) {\n\t\tfont-size: 16px;\n\t}\n"]))),$=T.ZP.div(_||(_=(0,R.Z)(["\n\tposition: absolute;\n\twidth: 300px;\n\ttop: 66px;\n\tleft: 50%;\n\ttransform: translate(-50%, -50%);\n"]))),F=T.ZP.span(k||(k=(0,R.Z)(["\n\tfont-size: 10px;\n\tcolor: var(--app-color-gray-dark);\n\n\t@media (max-width: 800px) {\n\t\tfont-size: 16px;\n\t}\n\t@media (max-width: 600px) {\n\t\tfont-size: 8px;\n\t}\n"]))),J=T.ZP.div(S||(S=(0,R.Z)(["\n\tfont-size: 26px;\n\tfont-weight: 600;\n\tcolor: #4a154b;\n\t-ms-transform: scaleX(-1) rotate(-46deg); /* IE 9 */\n\t-webkit-transform: scaleX(-1) rotate(-46deg); /* Chrome, Safari, Opera */\n\ttransform: scaleX(-1) rotate(-46deg);\n"]))),X=function(e){var t=e.steps,n=e.activeStep,o=void 0===n?1:n,i=t.length,r="".concat(100/(i-1)*(o-1),"%");return l.createElement(Y,null,l.createElement(j,{width:r},t.map((function(e){var t=e.rank,n=e.name;return l.createElement(W,{key:t-1},l.createElement(G,{step:o>=t-1?"completed":"incomplete"},o>t-1?l.createElement(J,null,"L"):l.createElement(V,null,t-1)),l.createElement($,null,l.createElement(F,{key:t-1},n)))}))))},H=n(52902),K=n(12075),Q=(n(85692),(0,p.$j)((function(e){var t=e.flowReducer,n=t.begunModule,o=t.companyProcesses,i=t.cart;return{begunModule:n,user:e.sessionReducer.user,companyProcesses:o,cart:i}}),(function(e){return{onSetAuthenticatedUser:function(t){return e((0,q.IF)(t))}}}))((function(e){var t,n,p,x,y,w,b,E,_,k,S,q,R,T,Y,j,W,G,V,$=e.begunModule,F=e.user,J=e.companyProcesses,Q=e.cart,ee=(0,l.useState)(""),te=(0,i.Z)(ee,2),ne=te[0],oe=te[1],ie=(0,l.useState)(!1),le=(0,i.Z)(ie,2),re=le[0],de=le[1],se=(0,l.useState)(!1),ae=(0,i.Z)(se,2),ue=ae[0],ce=ae[1],pe=(0,h.pQ)(),ve=(0,i.Z)(pe,2),fe=ve[0],me=ve[1],he=(0,l.useState)(!1),ge=(0,i.Z)(he,2),xe=ge[0],ye=ge[1],we=(0,l.useState)(!1),be=(0,i.Z)(we,2),Ee=be[0],_e=be[1],ke=(0,D.UO)(),Se=ke.moduleID,Me=ke.paymentID,Ze=(0,D.TH)(),Ce=(0,l.useCallback)((function(e){e.forEach((function(e){var t;if(-1!==["xls","xlsx","csv"].indexOf(null===e||void 0===e||null===(t=e.name)||void 0===t?void 0:t.toString().split(".")[1])){var n=new FileReader;n.onabort=function(){},n.onerror=function(){},n.onload=function(e){},n.readAsBinaryString(e),n.onloadend=function(t){var n,o;_e(!0),(0,A._)(e,null===$||void 0===$||null===(n=$.processModule)||void 0===n||null===(o=n.module)||void 0===o?void 0:o.id).subscribe({next:function(){_e(!1),(0,z.OQ)(!1,!0).pipe((0,v.q)(1)).subscribe({})},complete:function(){_e(!1)},error:function(e){_e(!1)}})}}}))}),[null===$||void 0===$||null===(t=$.processModule)||void 0===t?void 0:t.module]),Ie=(0,B.uI)({onDrop:Ce}),Pe=Ie.getRootProps,Ue=(Ie.getInputProps,Ie.isDragActive),Ae=(0,D.s0)();(0,l.useEffect)((function(){var e,t;if(void 0===(null===$||void 0===$||null===(e=$.processModule)||void 0===e?void 0:e.isUpdating)){var n=J.find((function(e){return e.id===$.processModule.id}));if(n&&n.steps.length>0){var i,l=(0,o.Z)((0,o.Z)((0,o.Z)({},$.processModule),n),{},{completeSteps:n.steps,steps:n.steps.filter((function(e){var t,o,i,l,r,d;return void 0==(null===e||void 0===e||null===(t=e.options)||void 0===t?void 0:t.showStepAll)||1==(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.showStepAll)||0==(null===e||void 0===e||null===(i=e.options)||void 0===i?void 0:i.showStepAll)&&(null===e||void 0===e||null===(l=e.options)||void 0===l||null===(r=l.showOnly)||void 0===r?void 0:r.filter((function(e){return F.positions.map((function(e){return e.id})).indexOf(e)>-1})).length)>0||(null===e||void 0===e||null===(d=e.options)||void 0===d?void 0:d.showStepAuthor)&&(null===F||void 0===F?void 0:F.id)===(null===n||void 0===n?void 0:n.user_id)})).map((function(e,t){return(0,o.Z)((0,o.Z)({},e),{},{rank:t+1})}))});Z.h.dispatch((0,C.q4)(l)),me({action:h._U.setCurrentStep,value:l.steps[null!==(i=$.processModule.stepIndex)&&void 0!==i?i:0]})}else(0,g.zJ)($.processModule.id).pipe((0,f.P)()).subscribe({next:function(e){var t,n=(0,o.Z)((0,o.Z)((0,o.Z)({},$.processModule),e),{},{completeSteps:e.steps,steps:e.steps.filter((function(t){var n,o,i,l,r,d;return void 0==(null===t||void 0===t||null===(n=t.options)||void 0===n?void 0:n.showStepAll)||1==(null===t||void 0===t||null===(o=t.options)||void 0===o?void 0:o.showStepAll)||0==(null===t||void 0===t||null===(i=t.options)||void 0===i?void 0:i.showStepAll)&&(null===t||void 0===t||null===(l=t.options)||void 0===l||null===(r=l.showOnly)||void 0===r?void 0:r.filter((function(e){return F.positions.map((function(e){return e.id})).indexOf(e)>-1})).length)>0||(null===t||void 0===t||null===(d=t.options)||void 0===d?void 0:d.showStepAuthor)&&(null===F||void 0===F?void 0:F.id)===(null===e||void 0===e?void 0:e.user_id)}))});Z.h.dispatch((0,C.q4)(n)),me({action:h._U.setCurrentStep,value:n.steps[null!==(t=$.processModule.stepIndex)&&void 0!==t?t:0]})},error:function(e){}})}else if(!0===(null===$||void 0===$||null===(t=$.processModule)||void 0===t?void 0:t.isUpdating)){var r;me({action:h._U.setCurrentStep,value:$.processModule.steps[null!==(r=$.processModule.stepIndex)&&void 0!==r?r:0]})}if(Se){var d=new URLSearchParams(null===Ze||void 0===Ze?void 0:Ze.search);oe({key:d.get("key"),value:d.get("value")})}}),[]);return M(!0,"Are you sure want to leave this "),l.createElement(m.LN,null,l.createElement(N.sM,null,l.createElement("div",{className:r},l.createElement("div",null),!U.tq&&(null===fe||void 0===fe||null===(n=fe.currentStep)||void 0===n?void 0:n.rank)>1&&(null===(p=$.processModule.steps)||void 0===p?void 0:p.length)>2&&l.createElement("div",{className:d,style:{width:(null===(x=$.processModule.steps)||void 0===x?void 0:x.length)>4?"100%":"50%",paddingBottom:"20px"}},l.createElement(X,{steps:null===(y=$.processModule)||void 0===y||null===(w=y.steps)||void 0===w?void 0:w.slice(1),activeStep:null!==(b=(null===fe||void 0===fe||null===(E=fe.currentStep)||void 0===E?void 0:E.rank)-1)&&void 0!==b?b:0})),l.createElement("div",{style:{display:"flex"}},l.createElement(P.j3,{permissions:[P.po.blueprints.process.create]},!0===(null===$||void 0===$||null===(_=$.processModule)||void 0===_||null===(k=_.module)||void 0===k||null===(S=k.options)||void 0===S?void 0:S.allowImport)&&1==(null===fe||void 0===fe||null===(q=fe.currentStep)||void 0===q?void 0:q.rank)&&l.createElement(P.zx,{titleStyle:{fontWeight:"normal"},title:U.tq?"":xe?"Hide Import":"Import",style:{marginLeft:"0px"},clicked:function(){return ye(!xe)}},!xe&&l.createElement(K.G,{icon:H.cf$,style:{margin:"0px",width:"20px",height:"20px"}}))),l.createElement(P.zx,{titleStyle:{fontWeight:"normal"},title:"",loading:ue,style:{marginLeft:"0px",display:(null===fe||void 0===fe||null===(R=fe.currentStep)||void 0===R?void 0:R.rank)>1?"none":""},clicked:function(){var e;fe.items=[],ce(!0),(null===F||void 0===F||null===(e=F.pinned_modules)||void 0===e?void 0:e.filter((function(e){return e.id===$.processModule.module_id})).length)>0?(0,A.Ev)($.processModule.module_id).pipe((0,f.P)()).subscribe({next:function(){(0,O.IC)().pipe((0,f.P)()).subscribe({next:function(e){L.Fc.saveUser((0,o.Z)({},e)),ce(!1)}})}}):(0,A.tq)($.processModule.module_id).pipe((0,f.P)()).subscribe({next:function(){(0,O.IC)().pipe((0,f.P)()).subscribe({next:function(e){L.Fc.saveUser((0,o.Z)({},e)),ce(!1),Z.h.dispatch((0,C.IW)(!0)),Ae("/dashboard")}})}})}},l.createElement(K.G,{icon:(null===F||void 0===F||null===(T=F.pinned_modules)||void 0===T?void 0:T.filter((function(e){return e.id===$.processModule.module_id})).length)>0?H.KUK:H.Lad,style:{margin:"0 0px",width:"20px",height:"20px"}})),l.createElement(P.zx,{titleStyle:{fontWeight:"normal"},title:!U.tq&&"Close",style:{marginLeft:"0px",display:(null===fe||void 0===fe||null===(Y=fe.currentStep)||void 0===Y?void 0:Y.rank)>1?"none":""},clicked:function(){var e,t,n;(setTimeout((function(){Z.h.dispatch((0,C.IW)(!0)),Z.h.dispatch((0,C.Xc)({show:!1,message:""}))}),10),(null===fe||void 0===fe||null===(e=fe.items)||void 0===e?void 0:e.length)>0)?!0!==(null===(t=$.processModule.module)||void 0===t||null===(n=t.options)||void 0===n?void 0:n.saveCart)||!1!==$.processModule.isUpdating&&void 0!==$.processModule.isUpdating?(fe.items=[],Ae("/dashboard"),Z.h.dispatch((0,C.q4)(""))):de(!0):(Ae("/dashboard"),Z.h.dispatch((0,C.q4)("")))}},U.tq&&l.createElement(K.G,{icon:H.YIN,style:{margin:"0 0px",width:"20px",height:"20px"}})))),xe&&l.createElement("div",{className:u},l.createElement("div",Pe(),Ue?l.createElement("div",{className:c},l.createElement(K.G,{icon:H.cf$,style:{backgroundColor:"black",margin:"0 10px",width:"20px",height:"20px"}}),l.createElement("p",null,"Drop the files here ...")):l.createElement("div",{className:c},!Ee&&l.createElement(K.G,{icon:H.cf$,style:{color:"black",margin:"0 10px",width:"20px",height:"20px"}}),l.createElement("p",null,Ee?l.createElement(P.$j,{size:80,type:"ThreeDots"}):"Click or drag your file here to begin import. (ex .csv)")))),l.createElement(I.ZP,{navigateTo:ne,isEditing:!1,paymentID:Me}),l.createElement(P.U7,{id:"pending-component-modal",blured:!0,scrollable:!1,isOpen:re,shadowedContainerStyle:{width:U.tq?"100%":"30%"}},l.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"}},l.createElement("p",{className:d},"Are you working on a transaction?"),l.createElement("div",{className:s},"You can press ".concat((null===Q||void 0===Q||null===(j=Q.items)||void 0===j?void 0:j.length)>0?"'Update Cart'":"'Add to Cart'"," to save any transaction you are working on without submitting it. You can resume it by clicking the cart icon on the menu bar. ").concat((null===Q||void 0===Q||null===(W=Q.items)||void 0===W?void 0:W.length)>0?"Pressing 'Empty Cart' will clear previous contents of your cart, and exit":"")),l.createElement("div",{className:a},l.createElement(P.zx,{title:"Close only",style:{width:"120px"},clicked:function(){me({action:h._U.clearOngoingTransaction}),window.history.back(),Z.h.dispatch((0,C.q4)(""))}}),l.createElement(P.zx,{title:(null===Q||void 0===Q||null===(G=Q.items)||void 0===G?void 0:G.length)>0?"Update Cart":"Add to Cart",light:!0,style:{width:"130px"},clicked:function(){var e,t,n,i;fe.components.filter((function(e){return e.selected_fields.filter((function(e){return"ID"===e.data_type_name})).forEach((function(e){return e.value=void 0}))})),fe.newStepComponents.filter((function(e){return e.selected_fields.filter((function(e){return"ID"===e.data_type_name})).forEach((function(e){return e.value=void 0}))})),(null===$||void 0===$||null===(e=$.processModule)||void 0===e||null===(t=e.steps)||void 0===t?void 0:t.length)>0&&(null===$||void 0===$||null===(n=$.processModule)||void 0===n||null===(i=n.steps)||void 0===i||i.filter((function(e){var t;return null===e||void 0===e||null===(t=e.component_blueprints)||void 0===t?void 0:t.filter((function(e){return e.selected_fields.filter((function(e){return"ID"===e.data_type_name})).filter((function(e){return e.value=void 0}))}))})));var l=JSON.parse(JSON.stringify({components:fe.components,newStepComponents:fe.newStepComponents,items:fe.items,begunModule:(0,o.Z)((0,o.Z)({},$.processModule),{},{stepIndex:1})}));Z.h.dispatch((0,C.RV)(l)),me({action:h._U.clearOngoingTransaction}),window.history.back(),Z.h.dispatch((0,C.q4)(""))}}),l.createElement(P.zx,{title:"Empty Cart",light:!0,style:{width:"120px",display:(null===Q||void 0===Q||null===(V=Q.items)||void 0===V?void 0:V.length)>0?"":"none"},clicked:function(){Z.h.dispatch((0,C.RV)({})),me({action:h._U.clearOngoingTransaction}),window.history.back(),Z.h.dispatch((0,C.q4)(""))}}))))))})))}}]);
//# sourceMappingURL=200.3eab2e8d.chunk.js.map