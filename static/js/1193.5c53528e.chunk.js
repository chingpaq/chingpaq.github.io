"use strict";(self.webpackChunkflowhero=self.webpackChunkflowhero||[]).push([[1193],{1193:(e,n,a)=>{a.r(n),a.d(n,{default:()=>g});var o=a(1413),t=a(50981),i=a.n(t),s=a(67861),d=a(39518),l=a(11577),r=(a(60940),a(10103)),m=a(43984),u=a(88374),y=a(71982),p=a(75105),c=a(34710),v=a(49465),_=a(48929);const f="CompanySettings_host__BUW5K";const g=(0,d.$j)(e=>{const{authenticatedUser:{position:n}}=e.authReducer,{companyData:a,companyPositionsArray:o,companyUsersArray:t}=e.flowReducer;return{companyData:a,companyPositionsArray:o,position:n,companyUsersArray:t}},e=>({onSetCompanyDataField:n=>e((0,u.QK)(n)),onSetAuthenticatedUserPosition:n=>e((0,m.IF)(n)),onTutorialModalOpen:n=>e((0,y.ay)(n))}))(function(e){var n,a,t;const{companyUsersArray:d,companyData:m,position:u}=e,[,y]=(0,s.useState)(!0),[,g]=(0,s.useState)([...null!==(n=d.map(e=>{var n;return{id:e.id,first_name:e.first_name,last_name:e.last_name,email:e.email,position:"".concat(null===(n=e.positions)||void 0===n?void 0:n.map(e=>e.name).join(", ")),is_admin:e.is_admin,photo:e.photo,timezone:e.timezone}}))&&void 0!==n?n:[]]),{name:h,founding_date:Y,employees_no:D,industry:Z}=m,[b,C]=(0,s.useState)({name:(null===m||void 0===m||null===(a=m.name)||void 0===a?void 0:a.length)>2,display_name:(null===m||void 0===m||null===(t=m.display_name)||void 0===t?void 0:t.length)>2,founding_date:i()(m.founding_date,"YYYY-MM-DD").diff(i()().format("YYYY-MM-DD"))<0,employees_no:v.rT.some(e=>e.value===m.employees_no),industry:null===v.No||void 0===v.No?void 0:v.No.some(e=>e.label==m.industry)}),[S]=(0,s.useState)(""),[M,A]=(0,s.useState)({name:"",display_name:"",founding_date:"",employees_no:"",industry:""});(0,s.useEffect)(()=>{(0,p.AW)().pipe((0,r.q)(1)).subscribe({next:e=>{g([...null!==e&&void 0!==e?e:[]])},error:e=>{S(e.data)},complete:()=>{}})},[]);const N=(0,s.useCallback)(()=>{var e,n,a,t,s;A({name:"",display_name:"",founding_date:"",employees_no:"",industry:"",misc_info:""});let d=!1;return(null===m||void 0===m||null===(e=m.name)||void 0===e?void 0:e.length)<2&&(A(e=>(0,o.Z)((0,o.Z)({},e),{},{name:"Company name must have at least 2 characters"})),d=!0),(null===m||void 0===m||null===(n=m.display_name)||void 0===n?void 0:n.length)<2&&(A(e=>(0,o.Z)((0,o.Z)({},e),{},{display_name:"Company display name must have at least 2 characters"})),d=!0),i()(m.founding_date,"YYYY-MM-DD").diff(i()().format("YYYY-MM-DD"))>0&&(A(e=>(0,o.Z)((0,o.Z)({},e),{},{founding_date:"Company's founding date is not a valid date"})),d=!0),((null===m||void 0===m||null===(a=m.employees_no)||void 0===a?void 0:a.toString().length)<3||!v.rT.some(e=>e.value===m.employees_no))&&(A(e=>(0,o.Z)((0,o.Z)({},e),{},{employees_no:"Employees' number is not valid. \nStored value (".concat(null===m||void 0===m?void 0:m.employees_no,") is not matching any selectable range")})),d=!0),((null===m||void 0===m||null===(t=m.industry)||void 0===t?void 0:t.length)<3||null===v.No||void 0===v.No||!v.No.some(e=>e.label==m.industry))&&(A(e=>(0,o.Z)((0,o.Z)({},e),{},{industry:"Industry field entry is not valid"})),d=!0),(null===m||void 0===m||null===(s=m.name)||void 0===s?void 0:s.length)>0&&((null===h||void 0===h?void 0:h.length)>0?y(!1):y(!0)),d},[m,Y,D,Z,b]);return(0,s.useEffect)(()=>{b.industry&&N()},[m,u]),s.createElement("div",{id:"company-settings",className:f},s.createElement(_.o4,{datePickerRC:!0,feValidation:(0,o.Z)({},M),sendCompanyDetails:e=>{(0,c.sy)(e).pipe((0,l.P)()).subscribe({error:e=>{const n={name:"",display_name:"",founding_date:"",employees_no:"",industry:""};e.data.errors.name&&(n.name=e.data.errors.name[0]),e.data.errors.display_name&&(n.display_name=e.data.errors.display_name[0]),e.data.errors.founding_date&&(n.founding_date=e.data.errors.founding_date[0]),e.data.errors.employees_no&&(n.employees_no=e.data.errors.employees_no[0]),e.data.errors.industry&&(n.industry=e.data.errors.industry[0]),A(e=>(0,o.Z)((0,o.Z)({},e),n))}})},setElementsTouched:C}))})},60940:()=>{}}]);
//# sourceMappingURL=1193.5c53528e.chunk.js.map