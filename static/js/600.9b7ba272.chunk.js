"use strict";(self.webpackChunkflowhero=self.webpackChunkflowhero||[]).push([[600],{82600:function(e,n,t){t.r(n),t.d(n,{default:function(){return ne}});var l=t(70885),o=t(67861),i=t(39518),d=t(11577),a=t(13845),s=t(95242),r=t(29937),u=t(88374),c=(t(34710),t(93389)),p=t(89293),v=t(20086),m=t(85718),f=t(88207),h=t(1413),y=t(42982),C=t(87546),_=t(35606),g=t(13397),Z=t(98032),E=(t(66596),t(41771)),S=t(6073),b=t(4358),w=t(16613),x=t(30426),P=t(73500),N=t(27436),k=t(88827),B=t(63077),L=t(13290),I=t(67861),F=(0,o.memo)((function(e){var n,t,i,d,s,r,c,f,E,F,A,M=e.visible,Y=e.onUpdate,z=e.onClose,j=e.hasTutorial,D=e.allModules,O=e.blueprints,R=e.componentTypes,X=e.components,W=e.products,U=e.companyData,H=e.companyProcesses,V=(0,a.aL)(),K=(0,l.Z)(V,2),$=K[0],G=K[1],J=(0,o.useState)(!1),Q=(0,l.Z)(J,2),ee=Q[0],ne=Q[1],te=(0,o.useState)(!1),le=(0,l.Z)(te,2),oe=le[0],ie=le[1],de=(0,o.useState)(!1),ae=(0,l.Z)(de,2),se=ae[0],re=ae[1],ue=(0,o.useState)(!1),ce=(0,l.Z)(ue,2),pe=ce[0],ve=ce[1],me=(0,o.useState)(!1),fe=(0,l.Z)(me,2),he=fe[0],ye=fe[1],Ce=(0,o.useState)(!1),_e=(0,l.Z)(Ce,2),ge=_e[0],Ze=_e[1],Ee=(0,o.useState)({name:"",fields:"",components:""}),Se=(0,l.Z)(Ee,2),be=(Se[0],Se[1]),we=(0,o.useState)(!1),xe=(0,l.Z)(we,2),Pe=xe[0],Ne=xe[1],ke=(0,o.useState)(""),Be=(0,l.Z)(ke,2),Le=Be[0],Ie=Be[1],Fe=(0,o.useState)(!0),Te=(0,l.Z)(Fe,2),qe=Te[0],Ae=Te[1],Me=(0,o.useState)(!1),Ye=(0,l.Z)(Me,2),ze=Ye[0],je=Ye[1],De=(0,o.useState)(""),Oe=(0,l.Z)(De,2),Re=Oe[0],Xe=Oe[1];(0,o.useEffect)((function(){Ie(""),G({type:a.qY.setAllBlueprintsComponents,value:O})}),[$.selectedBlueprintComponent.fields]);var We=function(){be({name:"",components:""}),Ie("")},Ue=(0,o.useCallback)((function(e){(0,S._u)(e.id,e).subscribe({next:function(){re(!1),k.h.dispatch((0,u.Xc)({show:!0,message:"You have successfully updated ".concat(e.name)})),null===Y||void 0===Y||Y(!0),null===z||void 0===z||z(!0)},error:function(e){var n,t,l,o,i,d,a,s,r;null!==e&&void 0!==e&&null!==(n=e.data)&&void 0!==n&&n.errors&&be({name:null===e||void 0===e||null===(t=e.data)||void 0===t||null===(l=t.errors)||void 0===l||null===(o=l.name)||void 0===o?void 0:o.join("; "),components:null===e||void 0===e||null===(i=e.data)||void 0===i||null===(d=i.errors)||void 0===d||null===(a=d.components)||void 0===a?void 0:a.join("; ")});null!==e&&void 0!==e&&e.data&&Ie(null!==(s=null===e||void 0===e||null===(r=e.data)||void 0===r?void 0:r.message)&&void 0!==s?s:null===e||void 0===e?void 0:e.data);re(!1)}})}),[z]),He=(0,o.useCallback)((function(e){(0,S.Bp)(e).subscribe({next:function(n){k.h.dispatch((0,u.Xc)({show:!0,message:"You have successfully created ".concat(e.name)})),re(!1),null===Y||void 0===Y||Y(!0),null===z||void 0===z||z(!0)},error:function(e){var n,t,l,o,i,d,a,s,r;null!==e&&void 0!==e&&null!==(n=e.data)&&void 0!==n&&n.errors&&be({name:null===e||void 0===e||null===(t=e.data)||void 0===t||null===(l=t.errors)||void 0===l||null===(o=l.name)||void 0===o?void 0:o.join("; "),components:null===e||void 0===e||null===(i=e.data)||void 0===i||null===(d=i.errors)||void 0===d||null===(a=d.components)||void 0===a?void 0:a.join("; ")});null!==e&&void 0!==e&&e.data&&Ie(null!==(s=null===e||void 0===e||null===(r=e.data)||void 0===r?void 0:r.message)&&void 0!==s?s:null===e||void 0===e?void 0:e.data);re(!1)}})}),[z]),Ve=(0,o.useCallback)((function(){var e,n,t=$.validation,l=t.name,o=t.fields;if(l||(null===o||void 0===o?void 0:o.length)>0||(null===(e=$.selectedBlueprintComponent.fields)||void 0===e?void 0:e.length)<1){var i,d,a,s,r,u,c,p,v="";if((null===(i=$.selectedBlueprintComponent.fields)||void 0===i?void 0:i.length)<1&&(v="Component must have at least one field"),(null===o||void 0===o?void 0:o.length)>0&&(v="Check options of red fields"),null!==$&&void 0!==$&&null!==(d=$.selectedBlueprintComponent)&&void 0!==d&&null!==(a=d.fields)&&void 0!==a&&a.some((function(e){var n,t;return 0==(null===e||void 0===e||null===(n=e.options)||void 0===n||null===(t=n.list)||void 0===t?void 0:t.length)}))&&(v="Element's option list must have at least one entry"),null!==$&&void 0!==$&&null!==(s=$.selectedBlueprintComponent)&&void 0!==s&&null!==(r=s.fields)&&void 0!==r&&r.some((function(e){var n,t;return 0==(null===e||void 0===e||null===(n=e.options)||void 0===n||null===(t=n.type)||void 0===t?void 0:t.length)}))&&(v="Element's option type is mandatory"),null!==$&&void 0!==$&&null!==(u=$.selectedBlueprintComponent)&&void 0!==u&&null!==(c=u.fields)&&void 0!==c&&c.some((function(e){var n;return 0==(null===e||void 0===e||null===(n=e.value)||void 0===n?void 0:n.length)}))&&(v="Name is mandatory for each element"),be({name:l?"Add a component name":"",fields:v}),(null===(p=v)||void 0===p?void 0:p.length)>0){var m,f,_=document.querySelectorAll('[app-field-row-has-error="error"]');if(_)if((null===_||void 0===_?void 0:_.length)>0)null===(m=(0,y.Z)(_))||void 0===m||null===(f=m.reverse()[(null===_||void 0===_?void 0:_.length)-1])||void 0===f||f.scrollIntoView({block:"start",behavior:"smooth"})}(null===o||void 0===o?void 0:o.length)>0&&Ne(!0)}else{re(!0),We();var g={components:$.selectedBlueprintComponent.components,fields:$.selectedBlueprintComponent.fields.map((function(e){var n;return(null===(n=e.id)||void 0===n?void 0:n.length)>12?(0,h.Z)({},e):C.Z("id")(e)})),name:$.selectedBlueprintComponent.name};(null===(n=$.selectedBlueprintComponent.id)||void 0===n?void 0:n.length)>0?Ue((0,h.Z)((0,h.Z)({},g),{},{id:$.selectedBlueprintComponent.id})):He(g)}}),[$.selectedBlueprintComponent.components,$.selectedBlueprintComponent.fields,$.selectedBlueprintComponent.id,$.selectedBlueprintComponent.name,$.validation,He,Ue]),Ke=function(e){G({type:a.qY.setSelectedBlueprintComponentName,value:e})};return I.createElement(I.Fragment,null,I.createElement(v.U7,{id:"edit-component-modal",blured:!0,scrollable:!1,isOpen:M,shadowedContainerStyle:{width:P.tq?"100%":"30%"}},j?I.createElement(x.Q3,{setShowTutorial:ne}):null,I.createElement("div",{className:w.Z.host},I.createElement("div",{className:w.Z.title},I.createElement("p",null,qe?"New Component":"Edit Component")),I.createElement(x.Pz,null,I.createElement(v.Lb,{title:"Select Component to Edit"}),I.createElement(B.ZP,{onFocus:function(){},isSearchable:!1,key:"Component",styles:m.X2,placeholder:"Select a component to edit instead...",components:{DropdownIndicator:p.ms},options:_.Z([g.Z(Z.Z("name"))])(O).map((function(e){return{label:null===e||void 0===e?void 0:e.name,value:null===e||void 0===e?void 0:e.id}})),onChange:function(e){G({type:a.qY.setSelectedBlueprintComponent,value:O.find((function(n){return n.id===e.value}))}),Ae(!1)}}),qe&&I.createElement("div",null,I.createElement(v.Lb,{title:"Name"}),I.createElement("input",{type:"text",name:"element-name",value:null===(n=$.selectedBlueprintComponent)||void 0===n?void 0:n.name,onChange:function(e){Ke(e.target.value)},onClick:function(){},className:w.Z.elementTextInput})),ze&&I.createElement("div",null,I.createElement(v.Lb,{title:"Name"}),I.createElement("input",{type:"text",name:"element-name",value:null===(t=$.selectedBlueprintComponent)||void 0===t?void 0:t.name,onChange:function(e){Ke(e.target.value)},onClick:function(){},className:w.Z.elementTextInput})),I.createElement("br",null),!ze&&I.createElement("div",{style:{display:"flex",flexDirection:"column",width:"100%",maxHeight:"100%",border:"0px solid var(--app-color-gray-lighter)"}},I.createElement(v.Lb,{title:"Fields Selection"}),I.createElement("div",{className:w.Z.fieldRow},I.createElement(b.yV,{placeholder:"Click and select field to add ...",items:R?[].concat((0,y.Z)(_.Z([g.Z(Z.Z("name"))])(R).map((function(e){return{label:e.name,value:e.id,type:0==e.io_type?"Output":"Input"}}))),(0,y.Z)(null!==U&&void 0!==U&&null!==(i=U.misc_info)&&void 0!==i&&i.templates?U.misc_info.templates.map((function(e){return{label:e,value:e,type:"Templates"}})):[])):[],initialSelectedValues:[],groupedBy:"type",groupname:"type",inputStyle:{blank:!0},className:w.Z.peoplePositionsSelect,inputClassName:w.Z.peoplePositionsSelectInput,molclassname:w.Z.peoplePositionsSelectMenuOverlay,moliclassname:w.Z.peoplePositionsSelectMenuOverlayItem,onChange:function(e){if(e.length>0){var n=[e[0]];0==(n=(0,L.p)(e,U,R)).length&&(Xe(""),n=[e[0]]),n.map((function(e){var n,t,l,o,i,d,s,r,u,c,v,m,f,y,C,_,g,Z,E,S,b,w,x,P,N,k,B,L,I,F,T=R.find((function(n){return n.id===e.value})),q={field_type:(0,h.Z)({},T)};("number"===(null===T||void 0===T||null===(n=T.name)||void 0===n?void 0:n.toLowerCase())&&(q={field_type:(0,h.Z)({},T),options:{type:"numeric"}}),"phone"===(null===T||void 0===T||null===(t=T.name)||void 0===t?void 0:t.toLowerCase())&&(q={field_type:(0,h.Z)({},T),options:{country_prefix:"+44",country_code:"gb",country_name:"United Kingdom"}}),"currency"===(null===T||void 0===T||null===(l=T.name)||void 0===l?void 0:l.toLowerCase())&&(q={field_type:(0,h.Z)({},T),options:{currency_type:"British Pound Sterling",currency_value:"GBP",symbol:"\xa3"}}),"upload"===(null===T||void 0===T||null===(o=T.name)||void 0===o?void 0:o.toLowerCase())&&(q={field_type:(0,h.Z)({},T),options:{accepted_mimes:p.cH.map((function(e){var n;return null===(n=e.value)||void 0===n?void 0:n.replaceAll(".","")})).join(","),max_file_size:51200}}),"people"===(null===T||void 0===T||null===(i=T.name)||void 0===i?void 0:i.toLowerCase())&&(q={field_type:(0,h.Z)({},T),options:{position_id:[],type:"single"}}),"date"===(null===T||void 0===T||null===(d=T.name)||void 0===d?void 0:d.toLowerCase())&&(q={field_type:(0,h.Z)({},T),options:{type:"single"}}),"dropdown"===(null===T||void 0===T||null===(s=T.name)||void 0===s?void 0:s.toLowerCase())&&(q={field_type:(0,h.Z)({},T),options:{list:[],type:"single"}}),"pin"===(null===T||void 0===T||null===(r=T.name)||void 0===r?void 0:r.toLowerCase())&&(q={field_type:(0,h.Z)({},T),options:{pintype:"single"}}),"component"===(null===T||void 0===T||null===(u=T.name)||void 0===u?void 0:u.toLowerCase())&&(q={field_type:(0,h.Z)({},T),options:{component_id:[],type:"single",selection:""}}),"list filter"===(null===T||void 0===T||null===(c=T.name)||void 0===c?void 0:c.toLowerCase())&&(q={field_type:(0,h.Z)({},T),options:{field:"",value:""}}),"id"===(null===T||void 0===T||null===(v=T.name)||void 0===v?void 0:v.toLowerCase())&&(q={field_type:(0,h.Z)({},T),options:{id:"",value:0}}),"list"===(null===T||void 0===T||null===(m=T.name)||void 0===m?void 0:m.toLowerCase())&&(q={field_type:(0,h.Z)({},T),options:{module_id:"",list:[]}}),"module list"===(null===T||void 0===T||null===(f=T.name)||void 0===f?void 0:f.toLowerCase())&&(q={field_type:(0,h.Z)({},T),options:{module_id:"",list:[]}}),"step list"===(null===T||void 0===T||null===(y=T.name)||void 0===y?void 0:y.toLowerCase())&&(q={field_type:(0,h.Z)({},T),options:{component_id:"",list:[]}}),"component list"===(null===T||void 0===T||null===(C=T.name)||void 0===C?void 0:C.toLowerCase())&&(q={field_type:(0,h.Z)({},T),options:{component_id:"",list:[]}}),"transaction list"===(null===T||void 0===T||null===(_=T.name)||void 0===_?void 0:_.toLowerCase())&&(q={field_type:(0,h.Z)({},T),options:{module_id:""}}),"lookup"===(null===T||void 0===T||null===(g=T.name)||void 0===g?void 0:g.toLowerCase())&&(q={field_type:(0,h.Z)({},T),options:{source_id:"",target_id:"",common_field:"",list:[],selection:""}}),"connectors"===(null===T||void 0===T||null===(Z=T.name)||void 0===Z?void 0:Z.toLowerCase())&&(q={field_type:(0,h.Z)({},T),options:{component1_id:"",component2_id:"",common_field_12:"",component3_id:"",common_field_23:"",outputs:""}}),"map"===(null===T||void 0===T||null===(E=T.name)||void 0===E?void 0:E.toLowerCase())&&(q={field_type:(0,h.Z)({},T),options:{maptype:"region"}}),"formula"===(null===T||void 0===T||null===(S=T.name)||void 0===S?void 0:S.toLowerCase())&&(q={field_type:(0,h.Z)({},T),options:{operator:"",list:[]}}),"emails"===(null===T||void 0===T||null===(b=T.name)||void 0===b?void 0:b.toLowerCase())&&(q={field_type:(0,h.Z)({},T),options:{subject:"",message:""}}),"product"===(null===T||void 0===T||null===(w=T.name)||void 0===w?void 0:w.toLowerCase())&&(q={field_type:(0,h.Z)({},T),options:{list:[]}}),"product lookup"===(null===T||void 0===T||null===(x=T.name)||void 0===x?void 0:x.toLowerCase())&&(q={field_type:(0,h.Z)({},T),options:{selection:"",component_id:"",list:[]}}),"filters"===(null===T||void 0===T||null===(P=T.name)||void 0===P?void 0:P.toLowerCase())&&(q={field_type:(0,h.Z)({},T),options:{component_id:"",list:[],filters:[]}}),"info"===(null===T||void 0===T||null===(N=T.name)||void 0===N?void 0:N.toLowerCase())&&(q={field_type:(0,h.Z)({},T),options:{component_id:"",list:[]}}),"value"===(null===T||void 0===T||null===(k=T.name)||void 0===k?void 0:k.toLowerCase())&&(q={field_type:(0,h.Z)({},T),options:{module_id:"",component_id:"",value:""}}),"notes"===(null===T||void 0===T||null===(B=T.name)||void 0===B?void 0:B.toLowerCase())&&(q={field_type:(0,h.Z)({},T),options:{value:""}}),"url"===(null===T||void 0===T||null===(L=T.name)||void 0===L?void 0:L.toLowerCase())&&(q={field_type:(0,h.Z)({},T),options:{type:"image"}}),(null===$||void 0===$||null===(I=$.selectedBlueprintComponent)||void 0===I?void 0:I.fields.length)<12)?(We(),G({type:a.qY.setSelectedBlueprintComponentNewField,value:(0,h.Z)((0,h.Z)({},q),{},{label:null!==(F=e.label)&&void 0!==F?F:""})})):Ie("You can only add a maximum of 12 fields per component. ")}))}}})),I.createElement("br",null),I.createElement("div",{className:w.Z.selectedFieldsContainer},qe?"Selected Fields:":"Available Fields:"),I.createElement("div",{style:{display:"flex",flexDirection:"column"}},null===$||void 0===$||null===(d=$.selectedBlueprintComponent)||void 0===d||null===(s=d.fields)||void 0===s?void 0:s.map((function(e,n){return I.createElement(q,{key:n,id:e.id,settingsClicked:function(){var n;G({type:a.qY.setSelectedFieldFromSelectedBlueprintComponent,value:(0,h.Z)((0,h.Z)({},e),{},{index:null===e||void 0===e||null===(n=e.field_type)||void 0===n?void 0:n.index})}),ie(!0)},renderError:Pe,hasSettingsBtn:!0},I.createElement(T,e))}))),I.createElement("p",{className:w.Z.selectedFieldsContainer},0==(null===$||void 0===$||null===(r=$.selectedBlueprintComponent)||void 0===r||null===(c=r.fields)||void 0===c?void 0:c.length)?"No fields available. Select and add by clicking above":"You can add a maximum of 12 fields per component. "),I.createElement("br",null)),(null===Le||void 0===Le?void 0:Le.length)>0&&I.createElement(N.Z,{message:Le,onClick:function(){return Ie("")}}),(null===Re||void 0===Re?void 0:Re.length)>0&&I.createElement(N.Z,{withError:!1,extraClassName:w.Z.warningContainer,message:Re,onClick:function(){return Xe("")}})),I.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",paddingTop:"10px"}},I.createElement(v.zx,{title:"Close",clicked:function(){return z()},style:{width:"100px",display:ze?"none":""}}),I.createElement(v.zx,{disabled:!((null===$||void 0===$||null===(f=$.selectedBlueprintComponent)||void 0===f?void 0:f.fields.length)>0&&null!==(E=$.selectedBlueprintComponent)&&void 0!==E&&E.name),light:!0,title:qe?"Save":"Update",loading:se,clicked:Ve,style:{width:"100px",display:(null===$||void 0===$||null===(F=$.selectedBlueprintComponent)||void 0===F?void 0:F.fields.length)>0&&null!==(A=$.selectedBlueprintComponent)&&void 0!==A&&A.name?"":"none"}}),!qe&&I.createElement(v.j3,{permissions:[v.po.blueprints.components.delete]},I.createElement(v.zx,{light:!0,title:ze?"Back":"Rename",clicked:function(){return je(!ze)},style:{width:"100px"}})),!qe&&!ze&&I.createElement(I.Fragment,null,I.createElement(v.j3,{permissions:[v.po.blueprints.components.delete]},I.createElement(v.zx,{light:!0,title:"New",clicked:function(){Ae(!0),G({type:a.qY.resetsetSelectedBlueprintComponent})},style:{width:"100px"}}),0===X.filter((function(e){return e.component_fields.filter((function(e){var n;return e.component_blueprint_id===(null===(n=$.selectedBlueprintComponent)||void 0===n?void 0:n.id)})).length>0})).length&&I.createElement(v.zx,{light:!0,title:"Delete",loading:pe,clicked:function(){ve(!0),(0,S.bp)($.selectedBlueprintComponent.id).subscribe({next:function(){k.h.dispatch((0,u.Xc)({show:!0,message:"You have successfully deleted ".concat($.selectedBlueprintComponent.name),color:"red"})),null===Y||void 0===Y||Y(!0)},complete:function(){ve(!1),null===z||void 0===z||z(!0)}})}})))))),oe&&I.createElement(x.js,{onClose:function(){G({type:a.qY.setSelectedFieldFromSelectedBlueprintComponent,value:null}),ye(!1),Ze(!1),ie(!1)},isOpen:oe,modalStyle:{maxWidth:"500px",minWidth:"422px"},leftControlAction:function(e){return function(e){Ze(!0),G({type:a.qY.removeSelectedFieldFromSelectedBlueprintComponent,value:{id:e}}),Ze(!1),ie(!1)}(e)},leftControlLoading:ge,centralControlAction:function(e){ye(!0),G({type:a.qY.setSelectedBlueprintComponentSpecificField,value:e}),ye(!1),ie(!1)},centralControlLoading:he,allModules:D,blueprints:O,components:X,companyProcesses:H,products:W,selectedFields:$.selectedBlueprintComponent.fields}),ee&&I.createElement(v.Ts,{onClick:function(){return ne(!1)},url:"https://www.youtube.com/watch?v=xV-bOHvfbPQ"}))})),T=function(e){var n,t,o=e.id,i=e.value,d=e.field_type,s=(0,a.aL)(),r=(0,l.Z)(s,2)[1];switch(null===d||void 0===d?void 0:d.data_type){case"file":case"date":return I.createElement("input",{type:"input",placeholder:null===d||void 0===d?void 0:d.name,className:w.Z.fieldTypeInput,value:i,name:null===d||void 0===d?void 0:d.name,onChange:function(e){r({type:a.qY.setSelectedBlueprintComponentSpecificField,value:{id:o,value:e.target.value}})}});case"text":return I.createElement("input",{type:null===d||void 0===d?void 0:d.data_type,placeholder:"Input name for "+(null===d||void 0===d?void 0:d.name),className:w.Z.fieldTypeInput,value:i,name:null===d||void 0===d?void 0:d.name,onChange:function(e){var n=e.target.value;r({type:a.qY.setSelectedBlueprintComponentSpecificField,value:{id:o,value:n}})}});case"output":return I.createElement("input",{type:null===d||void 0===d?void 0:d.data_type,placeholder:"Insert value for "+(null===d||void 0===d||null===(n=d.name)||void 0===n?void 0:n.toLowerCase())+" element...",className:w.Z.fieldTypeInput,value:i,name:null===d||void 0===d?void 0:d.name,readOnly:"Template"===(null===d||void 0===d?void 0:d.name),onChange:function(e){var n=e.target.value;r({type:a.qY.setSelectedBlueprintComponentSpecificField,value:{id:o,value:n}})}});default:return I.createElement("input",{type:null===d||void 0===d?void 0:d.data_type,placeholder:"Insert value for "+(null===d||void 0===d||null===(t=d.name)||void 0===t?void 0:t.toLowerCase())+" element...",className:w.Z.fieldTypeInput,value:i,name:null===d||void 0===d?void 0:d.name,onChange:function(e){var n=e.target.value;r({type:a.qY.setSelectedBlueprintComponentSpecificField,value:{id:o,value:n}})}})}},q=function(e){var n=e.id,t=e.renderError,i=e.fieldIcon,d=e.children,s=e.hasSettingsBtn,r=e.settingsClicked,u=(0,a.aL)(),c=(0,l.Z)(u,1)[0],p=(0,o.useState)(!1),v=(0,l.Z)(p,2),m=v[0],f=v[1],h=(0,o.useCallback)((function(){var e;return f(t&&(null===(e=c.validation.fields)||void 0===e?void 0:e.some((function(e){return(null===e||void 0===e?void 0:e.toString())===(null===n||void 0===n?void 0:n.toString())}))))}),[t,c.validation.fields,n]);return(0,o.useEffect)((function(){h()}),[t,n,c.validation.fields,h]),I.createElement("div",{className:w.Z.fieldRow,"app-field-row-has-error":m?"error":""},I.createElement("div",{className:w.Z.fieldRowContent},i&&I.createElement("div",{className:w.Z.fieldRowImage},I.createElement("img",{src:i,alt:""})),d),s&&I.createElement("button",{className:w.Z.fieldRowControls,onClick:function(){return r()}},I.createElement(E.vdN,null)))},A=(0,i.$j)((function(e){var n=e.flowReducer;return{blueprints:n.blueprints,allStatutes:n.allStatutes,selectedBlueprintComponent:n.selectedBlueprintComponent,allModules:n.allModules,componentTypes:n.componentTypes,components:n.components,products:n.products,companyData:n.companyData,companyProcesses:n.companyProcesses}}),(function(e){return{onSetSelectedProStep:function(n){return e((0,u.Sc)(n))}}}))(F),M="ProcessInfo_host__+oaqg",Y="ProcessInfo_control__tSGLd",z="ProcessInfo_processNameContainer__EsIer",j="ProcessInfo_deleteModalContainer__zJS6K",D="ProcessInfo_deleteModalTextContainer__23irp",O="ProcessInfo_deteteModalText__fp5WW",R="ProcessInfo_deleteModalButtonContainer__dBunM",X="ProcessInfo_paragraphNameContainer__qBr8V",W="ProcessInfo_paragraphDescriptionContainer__1YFKM",U=t(5980),H=t(19304),V=t(23280),K=t(67861),$=function(e){var n,t=(0,V.s0)(),i=(e.onClose,e.selectedProcess),s=e.onResetSelectedProStep,h=e.blueprints,y=e.allModules,C=e.companyProcesses,_=(0,o.useState)(!1),g=(0,l.Z)(_,2)[1],Z=(0,o.useState)(!1),E=(0,l.Z)(Z,2),b=E[0],w=E[1],x=(0,o.useState)(!1),N=(0,l.Z)(x,2),B=N[0],L=N[1],I=(0,o.useState)(!1),F=(0,l.Z)(I,2),T=F[0],q=F[1],$=(0,o.useState)(!1),ne=(0,l.Z)($,2),te=ne[0],le=ne[1],oe=(0,o.useState)(!1),ie=(0,l.Z)(oe,2),de=ie[0],ae=ie[1],se=(0,o.useState)(!1),re=(0,l.Z)(se,2),ue=re[0],ce=re[1],pe=(0,a.aL)(),ve=(0,l.Z)(pe,2)[1],me=(0,r._M)(),fe=(0,l.Z)(me,2),he=fe[0],ye=fe[1],Ce=(0,o.useState)(!1),_e=(0,l.Z)(Ce,2),ge=_e[0],Ze=_e[1],Ee=function(){1==ue&&((0,c.zJ)(i.id).pipe((0,d.P)()).subscribe({}),(0,S.d7)(p.KI,p.RI).pipe((0,d.P)()).subscribe({})),k.h.dispatch((0,u.IW)(!0)),k.h.dispatch((0,u.Xc)({show:!1,message:""})),t("/dashboard")};return(0,o.useEffect)((function(){var e,n,t,l,o;""!==(null===i||void 0===i?void 0:i.name)&&((null===i||void 0===i||null===(e=i.steps)||void 0===e?void 0:e.length)>0||(null===i||void 0===i?void 0:i.steps)>0||(null===he||void 0===he||null===(n=he.steps)||void 0===n?void 0:n.length)>0)?0===(null===(t=y.filter((function(e){return e.procedure.id===(null===i||void 0===i?void 0:i.id)})))||void 0===t?void 0:t.length)?k.h.dispatch((0,u.Xc)({show:!0,message:"You can now create modules. Modules are pages where your users can interact with the processes and components you created. This is where transactions are created."})):(null===(l=y.filter((function(e){return e.procedure.id===(null===i||void 0===i?void 0:i.id)})))||void 0===l?void 0:l.length)>0&&1==(null===i||void 0===i||null===(o=i.steps)||void 0===o?void 0:o.length)&&k.h.dispatch((0,u.Xc)({show:!0,message:"To edit your step, click the box of your target step. The edit step modal will appear. There you can edit and update your step."})):""!==(null===i||void 0===i?void 0:i.name)&&(null===h||void 0===h?void 0:h.length)>0?k.h.dispatch((0,u.Xc)({show:!0,message:"Add steps to define your process. In these steps, you can attach components that will serve as input and output for your process. Click the Step button above.",action:function(){ye({type:r.Cb.addNewStep,value:i.id}),w(!0)}})):""===(null===i||void 0===i?void 0:i.name)&&(null===h||void 0===h?void 0:h.length)>0?(k.h.dispatch((0,u.Xc)({show:!0,message:"To begin building your Process, click Process button, enter name, description and save. You can also build components before creating your process."})),L(!0)):0===(null===h||void 0===h?void 0:h.length)&&""===(null===i||void 0===i?void 0:i.name)&&k.h.dispatch((0,u.Xc)({show:!0,message:"To begin buiding your Process, start by creating blueprint components. Components are field data that you can use to gather information on your steps",action:function(){le(!0)}}))}),[y,i,h]),K.createElement(K.Fragment,null,K.createElement("div",{className:M},K.createElement("div",{style:P.tq?{padding:"0 0 0 10px",position:"fixed",bottom:"0"}:{padding:"0 0 0 10px"}},K.createElement(v.zx,{title:"Close",clicked:function(){return Ee()}})),K.createElement("div",{style:P.tq?{display:"flex"}:{position:"fixed",right:"0",top:"0",display:"flex",flexDirection:"row",padding:"0 10px 0 0px"}},K.createElement(Q,{onAddNewProcess:function(){L(!0)}}),""!==(null===i||void 0===i?void 0:i.name)&&(null===he||void 0===he||null===(n=he.steps)||void 0===n?void 0:n.length)>0&&""!==(null===i||void 0===i?void 0:i.name)&&K.createElement(ee,{onAddNewModule:function(){ae(!0)}}),""!==(null===i||void 0===i?void 0:i.name)&&(null===h||void 0===h?void 0:h.length)>0&&K.createElement(G,{processID:i.id,selectedProcessName:i.name,onOpenAddNewStep:function(){var e;""!=(null===i||void 0===i?void 0:i.name)&&(null===i||void 0===i||null===(e=i.id)||void 0===e?void 0:e.length)>0?(s(),w(!0)):g((function(e){return!e}))}}),K.createElement(J,{onAddNewComponent:function(){ve({type:a.qY.resetsetSelectedBlueprintComponent}),le(!0)}}),0===y.filter((function(e){return e.procedure.id===(null===i||void 0===i?void 0:i.id)})).length&&""!==(null===i||void 0===i?void 0:i.name)&&K.createElement(v.j3,{permissions:[v.po.blueprints.process.delete]},K.createElement(v.zx,{light:!0,title:"Delete",clicked:function(){return q(!0)}}),K.createElement("span",{className:Y}))),(null===h||void 0===h?void 0:h.length)>0&&K.createElement("div",{className:z},K.createElement("div",{className:X,onClick:function(){return L(!0)}},K.createElement("p",null,null===i||void 0===i?void 0:i.name)),K.createElement("div",{className:W,onClick:function(){return L(!0)}},K.createElement("p",null,null===i||void 0===i?void 0:i.description))),K.createElement(U.Z,{onEditStep:function(){return w(!0)},onEditStepEnded:b})),b&&K.createElement(H.Z,{visible:b,onClose:function(e){ce(e),s(),w(!1)}}),T&&K.createElement(v.U7,{isOpen:T,onClose:function(){return q(!1)},backdropColor:!0,blured:!0,shadowedContainerStyle:{width:P.tq?"100%":"30%",height:"160px"}},K.createElement("div",{className:j},K.createElement("div",{className:D},K.createElement("p",{className:O},"Are you sure you want to delete this process?")),K.createElement("div",{className:R},K.createElement(v.zx,{title:"Delete",clicked:function(){return function(){var e;!(null!==i&&void 0!==i&&null!==(e=i.id)&&void 0!==e&&e.length)>0||(Ze(!0),(0,c.vo)(null===i||void 0===i?void 0:i.id).pipe((0,d.P)()).subscribe({next:function(e){q(!1),Ze(!1),ce(!0),Ee()},error:function(e){Ze(!1),q(!1)}}))}()},loading:ge}),K.createElement(v.zx,{light:!0,title:"No, Go back",clicked:function(){return q(!1)}})))),te&&K.createElement(A,{visible:te,onClose:function(e){ce(e),le(!1)},onUpdate:function(e){k.h.dispatch((0,u.an)(C.filter((function(e){return e.id!==i.id})),1))}}),de&&K.createElement(m.ZP,{onClose:function(){return ae(!1)},isOpen:de,modalStyle:{maxWidth:"500px"},selectedProcessId:null===i||void 0===i?void 0:i.id}),B&&K.createElement(f.Z,{onCreate:function(){L(!1),w(!0)},onClose:function(){return L(!1)},isOpen:B,modalStyle:{maxWidth:"500px"},selectedProcessId:null===i||void 0===i?void 0:i.id,selectedProcess:i,shadowedContainerStyle:{width:P.tq?"100%":"30%"}}))},G=function(e){var n=e.processID,t=e.selectedProcessName,o=e.onOpenAddNewStep,i=(0,r._M)(),d=(0,l.Z)(i,2)[1];return K.createElement(v.zx,{light:!0,title:"Step",clicked:function(){(null===t||void 0===t?void 0:t.length)>0&&d({type:r.Cb.addNewStep,value:n}),o&&o()}})},J=function(e){var n=e.onAddNewComponent;return K.createElement(v.zx,{light:!0,title:"Component",clicked:n})},Q=function(e){var n=e.onAddNewProcess;return K.createElement(v.zx,{light:!0,title:"Process",clicked:n})},ee=function(e){var n=e.onAddNewModule;return K.createElement(v.zx,{light:!0,title:"Module",clicked:n})},ne=(0,i.$j)((function(e){var n=e.flowReducer;return{selectedProcess:n.selectedProcess,blueprints:n.blueprints,allModules:n.allModules,companyProcesses:n.companyProcesses}}),(function(e){return{onSetSelectedProStep:function(n){return e((0,u.Sc)(n))},onResetSelectedProStep:function(){return e((0,u.wv)())}}}))((function(e){return K.createElement(s.jm,null,K.createElement(r.FZ,null,K.createElement(r.s_,null,K.createElement(a.ij,null,K.createElement(a.Xr,null,K.createElement($,e))))))}))},5980:function(e,n,t){t.d(n,{Z:function(){return L}});var l=t(1413),o=t(70885),i=t(67861),d=t(39518),a=t(11577),s=t(93389),r=t(88374),u="ProcessStepsChart_host__Ubvna",c="ProcessStepsChart_target__lLbWe",p="ProcessStepsChart_startContainer__1AZuF",v="ProcessStepsChart_placeholderContainer__HI-Ue",m="ProcessStepsChart_paragraph__D9Hr2",f="ProcessStepsChart_tree__uqAbd",h="ProcessStepsChart_step__1kNXi",y=t(89293),C=t(29937),_=t(71265),g=t(20086),Z=t(28550),E=t(88846),S=t(62169),b=t(84634),w=t(9204),x=t(30401),P=t(62498),N=t(80121),k=t(19194),B=t(67861),L=(0,d.$j)((function(e){var n=e.flowReducer;return{selectedProcess:n.selectedProcess,companyProcesses:n.companyProcesses}}),(function(e){return{onSetSelectedProStep:function(n){return e((0,r.Sc)(n))}}}))((function(e){var n=(0,_.Z)(),t=e.selectedProcess,d=e.onEditStep,r=e.companyProcesses,L=(0,C._M)(),I=(0,o.Z)(L,2),F=I[0],T=I[1],q=(0,i.useState)(!1),A=(0,o.Z)(q,2),M=A[0],Y=A[1];(0,i.useEffect)((function(){if(""!==t.name&&""!==t.id){var e=r.find((function(e){return e.id===t.id}));if(e&&(null===e||void 0===e?void 0:e.steps.length)>0){var l=E.Z(S.Z(b.Z("rank")),w.Z(x.Z(P.Z("component_blueprints"),w.Z((function(e){return Z.Z("_uuid",(0,y.mR)(),e)})))))(e.steps);T({type:C.Cb.setAllSteps,value:l})}else Y(!0),(0,s.zJ)(t.id).pipe((0,a.P)()).subscribe({next:function(e){var t;if((null===e||void 0===e||null===(t=e.steps)||void 0===t?void 0:t.length)>0){var l=E.Z(S.Z(b.Z("rank")),w.Z(x.Z(P.Z("component_blueprints"),w.Z((function(e){return Z.Z("_uuid",(0,y.mR)(),e)})))))(e.steps);T({type:C.Cb.setAllSteps,value:l}),n()&&Y(!1)}else Y(!1)},error:function(e){n()&&Y(!1)}})}}),[t]);var z=function e(t){var o,i,r,u=t.step;return B.createElement(k.O,{label:B.createElement("div",{className:c,style:{display:""},onClick:function(){var e;T({type:C.Cb.setSelectedStep,value:(0,l.Z)((0,l.Z)({},u),{},{parent_steps:w.Z(N.Z(["id","name","rank"]))(null!==(e=null===u||void 0===u?void 0:u.parent_steps)&&void 0!==e?e:[])})}),d()}},B.createElement("div",{className:p},B.createElement("div",{className:h,"app-card-type":"start"},B.createElement("p",{className:m},null===u||void 0===u?void 0:u.name))))},(null===u||void 0===u?void 0:u.next_steps)&&(null===u||void 0===u||null===(o=u.next_steps)||void 0===o?void 0:o.map((function(n,t){return B.createElement(e,{key:t,step:null===F||void 0===F?void 0:F.steps.find((function(e){return e.id===n.id}))})}))),(null===u||void 0===u?void 0:u.pathway_steps)&&(null===u||void 0===u||null===(i=u.pathway_steps)||void 0===i?void 0:i.map((function(e,n){return B.createElement(k.O,{key:n,label:B.createElement("div",{className:f},e.name)})}))),(null===u||void 0===u?void 0:u.pathway_processes)&&(null===u||void 0===u||null===(r=u.pathway_processes)||void 0===r?void 0:r.map((function(e,t){return B.createElement(k.O,{key:t,label:B.createElement("div",{className:f,onClick:function(){Y(!0),(0,s.hI)({processId:e.id}).pipe((0,a.P)()).subscribe({next:function(e){var t=E.Z(S.Z(b.Z("rank")),w.Z(x.Z(P.Z("component_blueprints"),w.Z((function(e){return Z.Z("_uuid",(0,y.mR)(),e)})))))(e);T({type:C.Cb.setAllSteps,value:t}),n()&&Y(!1)},error:function(e){n()&&Y(!1)}})}},"Process: ".concat(e.name))})}))),!0===(null===u||void 0===u?void 0:u.is_end)&&B.createElement(k.O,{label:B.createElement("div",{className:f},"End Step")}))};return B.createElement("div",null,M&&""!==t.name&&""!==t.id&&B.createElement("div",{className:v,style:{display:""}},B.createElement(g.$j,{size:80,type:"ThreeDots"})),B.createElement("div",{className:u,"app-is-preview":"false",style:{display:(null===F||void 0===F?void 0:F.steps.length)>0?"":"none"}},!M&&(null===F||void 0===F?void 0:F.steps.length)>0&&B.createElement(k.m,{lineWidth:"2px",lineColor:"green",lineBorderRadius:"10px",label:B.createElement("div",{className:f,style:{display:(null===F||void 0===F?void 0:F.steps.length)>0?"":"none"}},"Start of Process")},(null===F||void 0===F?void 0:F.steps.length)>0&&B.createElement(z,{step:null===F||void 0===F?void 0:F.steps.find((function(e){return 1===e.rank}))}))))}))}}]);
//# sourceMappingURL=600.9b7ba272.chunk.js.map