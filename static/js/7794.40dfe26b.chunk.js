"use strict";(self.webpackChunkflowhero=self.webpackChunkflowhero||[]).push([[7794,1193],{27794:(e,a,n)=>{n.r(a),n.d(a,{default:()=>O});var t=n(39518),o=n(71982),r=n(71871),s=n(1413),i=n(67861),d=n(23280),l=n(11577),m=n(34710),c=n(14170);const p={host:"CompanyCards_host__HOUay",buttonStyle:"CompanyCards_buttonStyle__qwBmN",borderedCardHost:"CompanyCards_borderedCardHost__vy296",borderedCardContainer:"CompanyCards_borderedCardContainer__5uZRq",unBorderedCardOrgChartHost:"CompanyCards_unBorderedCardOrgChartHost__TLL6X",unBorderedCardLoadingContainer:"CompanyCards_unBorderedCardLoadingContainer__x9P0N",bottomStatisticsOrgChartHost:"CompanyCards_bottomStatisticsOrgChartHost__LHIwN",bottomStatisticsOrgChart:"CompanyCards_bottomStatisticsOrgChart__cX6mK",unBorderedCardOverviewHost:"CompanyCards_unBorderedCardOverviewHost__NAxVU",companyOverviewRow:"CompanyCards_companyOverviewRow__thvn+",companyOverviewNameContainer:"CompanyCards_companyOverviewNameContainer__JPHQ2",companyOverviewNameText:"CompanyCards_companyOverviewNameText__pjVPv",companyOverviewLogoContainer:"CompanyCards_companyOverviewLogoContainer__niIPu",companyOverviewLogo:"CompanyCards_companyOverviewLogo__MBzPL",companyOverviewLogoFallback:"CompanyCards_companyOverviewLogoFallback__7l-OU",companyOverviewLabeledContainer:"CompanyCards_companyOverviewLabeledContainer__GbYpX",companyOverviewLabel:"CompanyCards_companyOverviewLabel__j8xFA",companyOverviewDataContainer:"CompanyCards_companyOverviewDataContainer__d0pcD",companyOverviewData:"CompanyCards_companyOverviewData__6Hc+-",labeledContainerLabel:"CompanyCards_labeledContainerLabel__Y5rmE"};n(48862);var y=n(88374),u=n(88827),_=n(73500),v=n(67861);const C=e=>{const a=(0,d.s0)(),[n,t]=(0,i.useState)(!1);function o(){u.h.dispatch((0,y.IW)(!1)),t(!1),a("/chart")}(0,i.useEffect)(()=>{t(!0),(0,m.on)().pipe((0,l.P)()).subscribe({complete:()=>t(!1)})},[]);const{initVersion:r}=e;return r?v.createElement(g,{label:""},v.createElement("div",{className:p.borderedCardHost},v.createElement("div",{className:p.borderedCardContainer},v.createElement("p",null,"Begin setting up your Company by creating departments and positions."),v.createElement(c.zx,{light:!0,loading:n,title:"Start Setup",clicked:()=>o()})))):!_.tq&&v.createElement("div",null,v.createElement(c.zx,{title:"View Roles and Departments",clicked:()=>o(),style:{}}))},g=e=>{const{label:a,children:n}=e;return v.createElement("div",{className:p.labeledContainerHost},v.createElement("p",{className:p.labeledContainerLabel},a),n)},h=e=>{const{companyData:a}=e,[n,t]=(0,i.useState)(a);return(0,i.useEffect)(()=>{(0,m.aK)().pipe((0,l.P)()).subscribe({next:e=>{t((0,s.Z)({},e))}})},[]),v.createElement("div",{className:p.host},v.createElement(C,{initVersion:0==n.departments_count}))};var f=n(1193),b=n(61616),w=n(49465),E=(n(23940),n(67861));const O=(0,t.$j)(e=>{const{authenticatedUser:{position:a},authenticatedUser:n}=e.authReducer,{user:t}=e.sessionReducer,{companyData:o,companyPositionsArray:r,allTasks:s,allCompletedTasks:i,allCompletedTasksPaginated:d,companyUsersArray:l}=e.flowReducer;return{companyData:o,companyPositionsArray:r,position:a,allTasks:s,allCompletedTasks:i,allCompletedTasksPaginated:d,user:t,companyUsersArray:l,authenticatedUser:n}},e=>({onSetOnBoardingVisible:a=>e((0,o.DJ)(a)),onToggleModalVisibility:a=>e((0,o.$6)(a))}))(e=>{const{companyData:a,authenticatedUser:n}=e,o=(0,t.I0)();return document.title="Company | ".concat(w.iC),(0,i.useEffect)(()=>{o((0,y.tR)(!1)),o((0,y.IW)(!0))},[]),E.createElement("div",{className:r.Z.companyHost},E.createElement("div",{style:{display:"flex",flexDirection:"column",margin:_.tq?"100px 0 0 0":"200px 0 0 0"}},E.createElement(b.Z,{headerTitle:"Company",targetProcessing:!1}),!0===n.is_admin&&E.createElement(c.j3,{permissions:[c.po.company.orgChart.update]},E.createElement(h,{companyData:a}))),E.createElement(f.default,null))})},1193:(e,a,n)=>{n.r(a),n.d(a,{default:()=>g});var t=n(1413),o=n(50981),r=n.n(o),s=n(67861),i=n(39518),d=n(11577),l=(n(60940),n(10103)),m=n(43984),c=n(88374),p=n(71982),y=n(75105),u=n(34710),_=n(49465),v=n(14170);const C="CompanySettings_host__BUW5K";const g=(0,i.$j)(e=>{const{authenticatedUser:{position:a}}=e.authReducer,{companyData:n,companyPositionsArray:t,companyUsersArray:o}=e.flowReducer;return{companyData:n,companyPositionsArray:t,position:a,companyUsersArray:o}},e=>({onSetCompanyDataField:a=>e((0,c.QK)(a)),onSetAuthenticatedUserPosition:a=>e((0,m.IF)(a)),onTutorialModalOpen:a=>e((0,p.ay)(a))}))(function(e){var a,n,o;const{companyUsersArray:i,companyData:m,position:c}=e,[,p]=(0,s.useState)(!0),[,g]=(0,s.useState)([...null!==(a=i.map(e=>{var a;return{id:e.id,first_name:e.first_name,last_name:e.last_name,email:e.email,position:"".concat(null===(a=e.positions)||void 0===a?void 0:a.map(e=>e.name).join(", ")),is_admin:e.is_admin,photo:e.photo,timezone:e.timezone}}))&&void 0!==a?a:[]]),{name:h,founding_date:f,employees_no:b,industry:w}=m,[E,O]=(0,s.useState)({name:(null===m||void 0===m||null===(n=m.name)||void 0===n?void 0:n.length)>2,display_name:(null===m||void 0===m||null===(o=m.display_name)||void 0===o?void 0:o.length)>2,founding_date:r()(m.founding_date,"YYYY-MM-DD").diff(r()().format("YYYY-MM-DD"))<0,employees_no:_.rT.some(e=>e.value===m.employees_no),industry:null===_.No||void 0===_.No?void 0:_.No.some(e=>e.label==m.industry)}),[D]=(0,s.useState)(""),[N,S]=(0,s.useState)({name:"",display_name:"",founding_date:"",employees_no:"",industry:""});(0,s.useEffect)(()=>{(0,y.AW)().pipe((0,l.q)(1)).subscribe({next:e=>{g([...null!==e&&void 0!==e?e:[]])},error:e=>{D(e.data)},complete:()=>{}})},[]);const T=(0,s.useCallback)(()=>{var e,a,n,o,s;S({name:"",display_name:"",founding_date:"",employees_no:"",industry:"",misc_info:""});let i=!1;return(null===m||void 0===m||null===(e=m.name)||void 0===e?void 0:e.length)<2&&(S(e=>(0,t.Z)((0,t.Z)({},e),{},{name:"Company name must have at least 2 characters"})),i=!0),(null===m||void 0===m||null===(a=m.display_name)||void 0===a?void 0:a.length)<2&&(S(e=>(0,t.Z)((0,t.Z)({},e),{},{display_name:"Company display name must have at least 2 characters"})),i=!0),r()(m.founding_date,"YYYY-MM-DD").diff(r()().format("YYYY-MM-DD"))>0&&(S(e=>(0,t.Z)((0,t.Z)({},e),{},{founding_date:"Company's founding date is not a valid date"})),i=!0),((null===m||void 0===m||null===(n=m.employees_no)||void 0===n?void 0:n.toString().length)<3||!_.rT.some(e=>e.value===m.employees_no))&&(S(e=>(0,t.Z)((0,t.Z)({},e),{},{employees_no:"Employees' number is not valid. \nStored value (".concat(null===m||void 0===m?void 0:m.employees_no,") is not matching any selectable range")})),i=!0),((null===m||void 0===m||null===(o=m.industry)||void 0===o?void 0:o.length)<3||null===_.No||void 0===_.No||!_.No.some(e=>e.label==m.industry))&&(S(e=>(0,t.Z)((0,t.Z)({},e),{},{industry:"Industry field entry is not valid"})),i=!0),(null===m||void 0===m||null===(s=m.name)||void 0===s?void 0:s.length)>0&&((null===h||void 0===h?void 0:h.length)>0?p(!1):p(!0)),i},[m,f,b,w,E]);return(0,s.useEffect)(()=>{E.industry&&T()},[m,c]),s.createElement("div",{id:"company-settings",className:C},s.createElement(v.o4,{datePickerRC:!0,feValidation:(0,t.Z)({},N),sendCompanyDetails:e=>{(0,u.sy)(e).pipe((0,d.P)()).subscribe({error:e=>{const a={name:"",display_name:"",founding_date:"",employees_no:"",industry:""};e.data.errors.name&&(a.name=e.data.errors.name[0]),e.data.errors.display_name&&(a.display_name=e.data.errors.display_name[0]),e.data.errors.founding_date&&(a.founding_date=e.data.errors.founding_date[0]),e.data.errors.employees_no&&(a.employees_no=e.data.errors.employees_no[0]),e.data.errors.industry&&(a.industry=e.data.errors.industry[0]),S(e=>(0,t.Z)((0,t.Z)({},e),a))}})},setElementsTouched:O}))})},61616:(e,a,n)=>{n.d(a,{Z:()=>d});const t="HeaderTopBar_headerTopBar__D+HJ9",o="HeaderTopBar_headerTopBarContainer__1jgza",r="HeaderTopBar_loadingContainer__UcfwW";var s=n(93572),i=n(67861);const d=e=>{const{hasHeaderImg:a,headerTitle:n,headerImgSrc:d,targetProcessing:l}=e;return i.createElement("div",{className:t},i.createElement("div",{className:o},a&&i.createElement("img",{alt:"",src:d}),i.createElement("p",null,n),l&&i.createElement("span",{className:r},i.createElement(s.Z,{type:"Watch",color:"var(--app-color-gray-light)",height:15,width:"".concat(30,"px")}))))}},60940:()=>{}}]);
//# sourceMappingURL=7794.40dfe26b.chunk.js.map