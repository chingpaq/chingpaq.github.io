"use strict";(self.webpackChunkflowhero=self.webpackChunkflowhero||[]).push([[400],{32422:function(e,n,o){o.d(n,{rr:function(){return Je},ZP:function(){return He}});var t=o(4942),l=o(1413),i=o(93433),d=o(29439),a=o(67861),u={processStepHost:"ModuleStep_processStepHost__fdU12",listContainer:"ModuleStep_listContainer__+T0XF",listContainerMob:"ModuleStep_listContainerMob__7T+-i",detailContainer:"ModuleStep_detailContainer__EFIwE",centeredCardMargin:"ModuleStep_centeredCardMargin__eYosE",centeredSpinner:"ModuleStep_centeredSpinner__sOFdo",emptyElementsSection:"ModuleStep_emptyElementsSection__ehjx-",stepCounter:"ModuleStep_stepCounter__mD22I",clockIcon:"ModuleStep_clockIcon__TY0er",stepTitle:"ModuleStep_stepTitle__f9SxJ",stepTitleSmaller:"ModuleStep_stepTitleSmaller__Ng9ym",stepGuidance:"ModuleStep_stepGuidance__aWqq0",stepGuidanceSmaller:"ModuleStep_stepGuidanceSmaller__IKIF+",inputContainer:"ModuleStep_inputContainer__s9qZ2",selectInput:"ModuleStep_selectInput__LcokN",multiselectWithSearch:"ModuleStep_multiselectWithSearch__qMOzq",smoMultiselectParent:"ModuleStep_smoMultiselectParent__Pweb-",selectMenuItem:"ModuleStep_selectMenuItem__i73KN",inputClassName:"ModuleStep_inputClassName__VI3pY",toggleMenuInputButton:"ModuleStep_toggleMenuInputButton__gcFHY",goToNextStep:"ModuleStep_goToNextStep__ePl+k",nextStepsContainer:"ModuleStep_nextStepsContainer__zcpA0",nextStepImageContainer:"ModuleStep_nextStepImageContainer__55MGd",nextStepWrapper:"ModuleStep_nextStepWrapper__ZtiNA",headerContainer:"ModuleStep_headerContainer__4kozo",content:"ModuleStep_content__ClnRX","react-grid-layout":"ModuleStep_react-grid-layout__21OCf",layoutJSON:"ModuleStep_layoutJSON__tFPI9",columns:"ModuleStep_columns__dPw3m","react-grid-item":"ModuleStep_react-grid-item__tFcr7","react-grid-placeholder":"ModuleStep_react-grid-placeholder__canbf",resizing:"ModuleStep_resizing__xUUDG",static:"ModuleStep_static__IPrAy",text:"ModuleStep_text__MzRSh",minMax:"ModuleStep_minMax__SkZxD",add:"ModuleStep_add__aOZYV","react-grid-dragHandleExample":"ModuleStep_react-grid-dragHandleExample__iEu5W",cssTransforms:"ModuleStep_cssTransforms__aN9IT","react-draggable-dragging":"ModuleStep_react-draggable-dragging__epzS0","react-resizable-handle":"ModuleStep_react-resizable-handle__XaFka",singleButton:"ModuleStep_singleButton__+BXaC",menuRightButtons:"ModuleStep_menuRightButtons__r-OPw",menuButtons:"ModuleStep_menuButtons__TsY6r",menuAccordionButtons:"ModuleStep_menuAccordionButtons__4QNWj",detailLabel:"ModuleStep_detailLabel__hVTU1",subLabel:"ModuleStep_subLabel__6PFJJ",modalHeaderTitle:"ModuleStep_modalHeaderTitle__hDlRr",p:"ModuleStep_p__njhI7",accordionContainer:"ModuleStep_accordionContainer__oW7nH",itemsTable:"ModuleStep_itemsTable__ttZKV",sharesTable:"ModuleStep_sharesTable__Gy1CG",peoplePositionsSelect:"ModuleStep_peoplePositionsSelect__jXRrK",peoplePositionsSelectInput:"ModuleStep_peoplePositionsSelectInput__NSg8e",peoplePositionsSelectMenuOverlay:"ModuleStep_peoplePositionsSelectMenuOverlay__S0xqm",peoplePositionsSelectMenuOverlayItem:"ModuleStep_peoplePositionsSelectMenuOverlayItem__Vuo-D",deleteText:"ModuleStep_deleteText__XIVyR",deleteButton:"ModuleStep_deleteButton__PhwaV",searchContainer:"ModuleStep_searchContainer__s1Y37",searchInput:"ModuleStep_searchInput__XukKm",emailInput:"ModuleStep_emailInput__sTwU9",actionsContainer:"ModuleStep_actionsContainer__jWMeW",detailButton:"ModuleStep_detailButton__w7F3v",detailButtonTitleContainer:"ModuleStep_detailButtonTitleContainer__8ffTu",fetchingLatestP:"ModuleStep_fetchingLatestP__gnf89",modalTitle:"ModuleStep_modalTitle__T4SaB",modalSubTitle:"ModuleStep_modalSubTitle__SIFKS",dropdownSelectComponent:"ModuleStep_dropdownSelectComponent__L66Sz",dropdownSelectComponentL:"ModuleStep_dropdownSelectComponentL__wOEsz",dropdownSelectOperation:"ModuleStep_dropdownSelectOperation__DEwuW",dropdownSelectReport:"ModuleStep_dropdownSelectReport__g2+2D",cardTitle:"ModuleStep_cardTitle__h24lD",customButton:"ModuleStep_customButton__sVkp5",fieldTypeInput:"ModuleStep_fieldTypeInput__q1+bw",fieldRowContainer:"ModuleStep_fieldRowContainer__5hIbd",templateInformation:"ModuleStep_templateInformation__UjdWL",emulatedFlexGap:"ModuleStep_emulatedFlexGap__yE15Q","mobile-navbar":"ModuleStep_mobile-navbar__P0z8E","mobile-navbar-close":"ModuleStep_mobile-navbar-close__5fZ-y","hamb-icon":"ModuleStep_hamb-icon__lSxYR","open-nav":"ModuleStep_open-nav__39a-n",description:"ModuleStep_description__GUBFo",tableHostSimple:"ModuleStep_tableHostSimple__VmM5x",imageCard:"ModuleStep_imageCard__HGrB9",imageLogoPrint:"ModuleStep_imageLogoPrint__I5-r0",title:"ModuleStep_title__whugX",statusBox:"ModuleStep_statusBox__qcpUN"},r=o(85692),s=o(39518),c=o(10904),v=o(6073),p=o(93389),m=o(34710),f=o(88827),_=o(88374),y=o(11577),h=o(10103),g=o(88550),b=o(49119),M="StaticAccordionModule_section__E+rSn",E="StaticAccordionModule_accordionContainer__6xeqD",Z="StaticAccordionModule_active__39RQh",C="StaticAccordionModule_iconsContainer__YbQ+l",S="StaticAccordionModule_content__-a1q1",w="StaticAccordionModule_fieldTypeInput__78Qbk",x="StaticAccordionModule_fieldTypeTextarea__RF3xI",k="StaticAccordionModule_emulatedFlexGap__F5FQC",I="StaticAccordionModule_cardTitle__lJnSQ",D="StaticAccordionModule_filtersContainer__oSB5G",N="StaticAccordionModule_actionsContainer__WXbu6",P="StaticAccordionModule_avatarContentContainer__Kd+Dg",T="StaticAccordionModule_avatarUrlImg__6oG4I",O="StaticAccordionModule_itemsContainerMob__+BERB",q=o(48963),U=o(79633),A=o(73500),Y=o(47144),R=o.n(Y),B=o(27436),L=(o(68140),o(12308)),j=o(35606),F=o(13397),z=o(98032),V=o(97606),W=o(8284),G=o(4292),X=o(25403),J=o(74369),H=o(50981),Q=o.n(H),K=o(27426),$=o(32562),ee=o(12075),ne=o(52902),oe=o(89293),te=o(60534),le=(o(41756),o(16207),o(23280)),ie=(0,a.memo)((function(e){var n,o,i=e.component,u=e.components,r=e.companyData,m=e.allComponents,h=e.companyUsersArray,b=e.selectedComponent,M=e.setIsOpen,Z=(0,s.v9)((function(e){return e.flowReducer})),S=Z.allModules,I=Z.allTasks,P=Z.companyPositionsArray,T=Z.map,O=(0,g.pQ)(),q=(0,d.Z)(O,2),Y=q[0],R=q[1],B=(0,a.useState)(!1),J=(0,d.Z)(B,2),te=J[0],ie=J[1],de=(0,le.s0)(),ae=(null===i||void 0===i||null===(n=i.selected_fields)||void 0===n?void 0:n.length)>0&&j.Z([F.Z(z.Z("index"))])(null===i||void 0===i||null===(o=i.selected_fields)||void 0===o?void 0:o.filter((function(e){return!0!==e.value||void 0!==(null===e||void 0===e?void 0:e.value)||"Transaction List"===(null===e||void 0===e?void 0:e.data_type_name)}))).map((function(e,n){var o,d,s,Z,k,O,q=null===(o=b.component_fields.find((function(n){return n.field_name===(null===e||void 0===e?void 0:e.field_name)&&n.data_type_name===(null===e||void 0===e?void 0:e.data_type_name)})))||void 0===o?void 0:o.value;if((null===e||void 0===e||null===(d=e.options)||void 0===d||null===(s=d.list)||void 0===s?void 0:s.length)>0&&(null===e||void 0===e||null===(Z=e.options)||void 0===Z||null===(k=Z.component_id)||void 0===k?void 0:k.length)>0&&("Step List"===(null===e||void 0===e?void 0:e.data_type_name)||"Component List"===(null===e||void 0===e?void 0:e.data_type_name)))return a.createElement("div",{key:n,style:{width:"100%"}},a.createElement(L.default,{columns:e.options.list,list:(Ae=e.options,u.filter((function(e){return e.id===Ae.component_id})).map((function(e){return null===Ae||void 0===Ae?void 0:Ae.list.reduce((function(n,o){return(0,l.Z)((0,l.Z)({},n),{},(0,t.Z)({},o,e.selected_fields.find((function(e){return e.field_name===o})).value))}),{})})))}));if("output"===e.data_type&&"Formula"!==e.data_type_name&&"Item Formula"!==e.data_type_name&&"Record"!==e.data_type_name&&"Filters"!==e.data_type_name)return null;if("Info"===e.data_type_name)return null;if("Transaction List"===e.data_type_name)return null;if("URL"===e.data_type_name)return null;if("Ratings"===e.data_type_name)return null;if("Rewards"===e.data_type_name)return null;if("Map"===e.data_type_name){var B,j,F,z=JSON.parse(q||(null!==(B=null===e||void 0===e?void 0:e.value)&&void 0!==B?B:"{}"));if(null!==z&&void 0!==z&&null!==(j=z.routes)&&void 0!==j&&j.DRIVE)T.routes={DRIVE:z.routes.DRIVE},T.pins=null!==(F=null===z||void 0===z?void 0:z.pins)&&void 0!==F?F:[];else null!==z&&void 0!==z&&z.pins&&(T.pins=null===z||void 0===z?void 0:z.pins,T.routes={DRIVE:[]});return a.createElement("div",{key:n})}if("Lookup"===e.data_type_name)return null;if("Calendar"===e.data_type_name)return null;if("Summary"===e.data_type_name)return null;if("ID"===e.data_type_name)return a.createElement(U.D,{key:n,width:A.tq?"100%":"48%",fieldLabel:e.field_name,style:{border:"0"},fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:!1,error:e.errors,customIconBgColor:"white",enabled:!1},a.createElement("input",{readOnly:!0,style:{pointerEvents:"none"},type:e.data_type,onChange:function(){},autoComplete:"none",value:null!==(O=q)&&void 0!==O?O:null===e||void 0===e?void 0:e.value,className:w,name:e.field_name}));var J,le,ae,ue,re,se,ce,ve,pe,me,fe,_e,ye,he,ge,be,Me,Ee,Ze,Ce,Se,we,xe,ke,Ie,De,Ne,Pe,Te,Oe,qe,Ue,Ae,Ye=null===i||void 0===i||null===(J=i.selected_fields)||void 0===J?void 0:J.find((function(e){return"Info"===e.data_type_name&&!0===e.visible}));if(Ye){var Re,Be,Le=m.find((function(e){return(null===e||void 0===e?void 0:e.component_fields.filter((function(e){return e.component_blueprint_id===Ye.options.component_id&&e.value===q})).length)>0}));if(Le)return null===Ye||void 0===Ye||null===(Re=Ye.options)||void 0===Re||null===(Be=Re.list)||void 0===Be?void 0:Be.map((function(n,o){var t,l,i=null!==(t=null===(l=Le.component_fields.find((function(e){return e.field_name===n})))||void 0===l?void 0:l.value)&&void 0!==t?t:"";return null!==i&&void 0!==i&&i.includes("jpg")||null!==i&&void 0!==i&&i.includes("jpeg")||null!==i&&void 0!==i&&i.includes("png")?a.createElement(U.D,{width:A.tq?"100%":"48%",style:{border:"0"},key:100+o,isProcess:!0,visible:e.visible,mandatory:!1,error:e.errors,fieldLabel:"Additional Information",customIconBgColor:"white"},a.createElement("div",{className:E,onClick:function(){return window.open(q,"_blank")},style:{backgroundColor:"transparent",border:"none"}},a.createElement("img",{alt:"lg",onError:function(e){return e.target.src="https://i.quotev.com/b2gtjqawaaaa.jpg"},src:i,style:{width:"100%",height:"100%",cursor:"pointer"}}))):a.createElement(U.D,{enabled:!1,width:A.tq?"100%":"48%",key:100+o,style:{border:"0"},fieldLabel:n,fieldIcon:e.icon,isProcess:!0,visible:void 0!==(null===e||void 0===e?void 0:e.value)||e.visible,mandatory:!1,error:e.errors},i.length>55?a.createElement("textarea",{className:x,type:e.data_type,value:i,onFocus:function(){},autoComplete:"none",onChange:function(e){},readOnly:!0,style:{backgroundColor:"rgba(234, 231, 231, 0.91)",height:"auto",padding:"10px"}}):a.createElement("input",{readOnly:!0,style:{pointerEvents:"none"},autoComplete:"none",value:i,className:w,name:e.field_name}))}))}if("Pin"===e.data_type_name&&q){var je,Fe,ze,Ve,We,Ge,Xe,Je,He=JSON.parse(q);return a.createElement(U.D,{enabled:!1,width:A.tq?"100%":"92%",key:n,style:{border:"0"},fieldLabel:e.field_name,visible:void 0!==(null===e||void 0===e?void 0:e.value)||e.visible,mandatory:!1,error:e.errors},a.createElement("div",{style:{width:"inherit",pointerEvents:"none"}},a.createElement(K.Z,{mapkey:null===(je=r.misc_info)||void 0===je?void 0:je.map,pins:null!==He&&void 0!==He&&He.realtime?null!==He&&void 0!==He&&null!==(Fe=He.destination)&&void 0!==Fe&&Fe.address?[(0,l.Z)((0,l.Z)({},He.destination),{},{type:"destination"}),(0,l.Z)((0,l.Z)({},He.source),{},{type:"source"}),(0,l.Z)((0,l.Z)({},He.realtime),{},{type:"realtime"})]:[(0,l.Z)((0,l.Z)({},He.source),{},{type:"source"}),(0,l.Z)((0,l.Z)({},He.realtime),{},{type:"realtime"})]:null!==He&&void 0!==He&&null!==(ze=He.destination)&&void 0!==ze&&ze.address?[(0,l.Z)((0,l.Z)({},He.destination),{},{type:"destination"}),(0,l.Z)((0,l.Z)({},He.source),{},{type:"source"})]:[(0,l.Z)((0,l.Z)({},He.source),{},{type:"source"})]}),a.createElement("div",{className:D,style:{color:"var(--app-color-gray-dark)",height:"inherit",width:"100%",display:null!==e&&void 0!==e&&e.visible?"":"none"}},a.createElement("div",{className:N,style:{fontSize:"12px"}},(null===He||void 0===He||null===(Ve=He.destination)||void 0===Ve?void 0:Ve.address)&&a.createElement("div",{style:{width:"100px",fontWeight:"bold",fontSize:"14px"}},"From",":"),a.createElement("div",{style:{fontWeight:"bold"}},He.source.address),!(null!==He&&void 0!==He&&null!==(We=He.destination)&&void 0!==We&&We.address)&&a.createElement(ee.G,{icon:ne.opg,style:{color:"green",height:"20px",width:"20px"}})),(null===He||void 0===He||null===(Ge=He.destination)||void 0===Ge?void 0:Ge.address)&&a.createElement("hr",{style:{borderTop:"0.5px solid #D2D2D2"}}),(null===He||void 0===He||null===(Xe=He.destination)||void 0===Xe?void 0:Xe.address)&&a.createElement("div",{className:N,style:{fontSize:"12px"}},a.createElement("div",{style:{width:"100px",fontWeight:"bold"}},"To",":"),a.createElement("div",{style:{fontWeight:"bold"}},null===He||void 0===He||null===(Je=He.destination)||void 0===Je?void 0:Je.address)))))}if("Action Button"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(le=e.options)||void 0===le||null===(ae=le.action)||void 0===ae?void 0:ae.length)>0){var Qe,Ke,$e,en=null===h||void 0===h?void 0:h.find((function(e){return e.id===q}));return a.createElement(U.D,{width:A.tq?"100%":"48%",key:n,style:{border:"0"},isProcess:!0,fieldLabel:null!==(Qe=e.options)&&void 0!==Qe&&Qe.notes?null===(Ke=e.options)||void 0===Ke?void 0:Ke.notes:e.field_name,enabled:!1,visible:e.visible,mandatory:!1,error:e.errors},"user"===e.options.action&&a.createElement("input",{style:{pointerEvents:"none"},onChange:function(){},autoComplete:"none",value:en?"".concat(null===en||void 0===en?void 0:en.first_name," ").concat(null===en||void 0===en?void 0:en.last_name):null!==($e=null===e||void 0===e?void 0:e.value)&&void 0!==$e?$e:"",className:w,name:e.field_name}))}if("Link"===e.data_type_name)return a.createElement(U.D,{width:A.tq?"100%":"48%",style:{border:"0"},key:n,fieldIcon:e.icon,isProcess:!0,visible:void 0!==(null===e||void 0===e?void 0:e.value)||e.visible,mandatory:!1,error:e.errors,customIconBgColor:"white"},null!==(ge=q)&&void 0!==ge&&ge.includes("jpg")||null!==(be=q)&&void 0!==be&&be.includes("jpeg")||null!==(Me=q)&&void 0!==Me&&Me.includes("png")||null!==e&&void 0!==e&&null!==(Ee=e.options)&&void 0!==Ee&&Ee.image?a.createElement("img",{alt:"lg",onError:function(e){return e.target.src="https://i.quotev.com/b2gtjqawaaaa.jpg"},src:null!==(Ze=q)&&void 0!==Ze?Ze:"https://i.quotev.com/b2gtjqawaaaa.jpg",style:{width:"100%",height:"100%",cursor:"pointer"}}):null!==(Ce=q)&&void 0!==Ce&&Ce.includes("pdf")?a.createElement("div",{className:E,onClick:function(){return window.open(q,"_blank")}},a.createElement("embed",{onClick:function(){return window.open(q,"_blank")},src:"".concat(q,"#toolbar=0&navpanes=0&scrollbar=0"),width:"400px",height:"500px"})):a.createElement("div",{style:{width:"inherit",textDecoration:"underline",textAlign:"center",cursor:"pointer"},onClick:function(){return window.open(q,"_blank")}},"Link"));if("Freehand"===e.data_type_name)return a.createElement(U.D,{width:A.tq?"100%":"48%",style:{border:"0"},key:n,fieldIcon:e.icon,isProcess:!0,visible:void 0!==(null===e||void 0===e?void 0:e.value)||e.visible,mandatory:!1,error:e.errors,customIconBgColor:"white"},a.createElement("div",{className:E,onClick:function(){return window.open(q,"_blank")}},a.createElement("img",{alt:"lg",onError:function(e){return e.target.src="https://i.quotev.com/b2gtjqawaaaa.jpg"},src:null!==(Se=q)&&void 0!==Se?Se:"https://i.quotev.com/b2gtjqawaaaa.jpg",style:{width:"100%",height:"100%",cursor:"pointer"}})));if("Checkbox"===e.data_type_name)return a.createElement(U.D,{width:A.tq?"100%":"48%",key:n,style:{border:"0"},fieldLabel:null!==(we=e.options.value)&&void 0!==we?we:e.field_name,fieldIcon:e.icon,isProcess:!0,visible:void 0!==(null===e||void 0===e?void 0:e.value)||e.visible,mandatory:!1,error:e.errors,customIconBgColor:"white",enabled:!1},a.createElement("input",{style:{pointerEvents:"none"},onChange:function(){},autoComplete:"none",value:void 0===q?"":1==q?"Yes":"No",className:w,name:e.field_name}));if("YesNo"===e.data_type_name)return a.createElement(U.D,{width:A.tq?"100%":"48%",key:n,style:{border:"0.5px dashed gray",padding:"10px"},fieldIcon:e.icon,isProcess:!0,visible:void 0!==(null===e||void 0===e?void 0:e.value)||e.visible,mandatory:!1,error:e.errors,customIconBgColor:"white",enabled:!1},a.createElement("div",{style:{display:"flex",justifyContent:"space-between",margin:"20px 0px"}},a.createElement("input",{id:"check-23",type:"checkbox",readOnly:!0,checked:!!q}),a.createElement("label",null,e.field_name)));if("Upload"===e.data_type_name)return a.createElement(U.D,{key:n,fieldLabel:e.field_name,fieldIcon:e.icon,isProcess:!0,visible:void 0!==q||(null===(xe=q)||void 0===xe?void 0:xe.length)>0,mandatory:!1,error:e.errors,customIconBgColor:"white",style:{border:"0",marginRight:"10px"}},a.createElement("a",{key:n,href:q,download:"Example-PDF-document",target:"_blank",rel:"noreferrer"},a.createElement(c.zx,{clear:!0,title:"Download File"})));if("Status"===e.data_type_name)return a.createElement(U.D,{width:A.tq?"100%":"48%",key:n,style:{border:"0"},fieldLabel:e.field_name,fieldIcon:e.icon,isProcess:!0,visible:void 0!==(null===e||void 0===e?void 0:e.value)||e.visible,mandatory:!1,error:e.errors,customIconBgColor:"white",enabled:!1},a.createElement("input",{readOnly:!0,style:{pointerEvents:"none"},onChange:function(){},autoComplete:"none",value:null!==(ke=null===b||void 0===b?void 0:b.status)&&void 0!==ke?ke:null!==(Ie=null!==(De=null===e||void 0===e?void 0:e.value)&&void 0!==De?De:q)&&void 0!==Ie?Ie:"",className:w,name:e.field_name}));if("Dropdown"===e.data_type_name&&"modules"===e.options&&(q=null===(Ne=S.find((function(e){return e.id===q})))||void 0===Ne?void 0:Ne.name),"Positions"===e.data_type_name&&(q=null===P||void 0===P||null===(Pe=P.find((function(e){return e.value===q})))||void 0===Pe?void 0:Pe.label),"People"===e.data_type_name)if(e.options.calendar){var nn,on={};try{var tn,ln;on=JSON.parse(null!==(tn=q)&&void 0!==tn?tn:null!==(ln=null===e||void 0===e?void 0:e.value)&&void 0!==ln?ln:JSON.stringify({}))}catch(mn){}var dn=h.find((function(e){var n;return e.id===(null===(n=on)||void 0===n?void 0:n.user)}));if(q=dn?"".concat(dn.first_name," ").concat(dn.last_name):"",null!==(nn=on)&&void 0!==nn&&nn.task){var an,un=I.find((function(e){return e.id===on.task}));return a.createElement(U.D,{enabled:!1,width:A.tq?"100%":"48%",key:n,style:{border:"0"},fieldLabel:e.field_name,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:!1,error:e.errors},a.createElement("div",{style:{display:"flex",flexDirection:"column",width:"inherit"}},a.createElement("input",{style:{pointerEvents:"none"},autoComplete:"none",value:q,readOnly:!0,className:w,name:e.field_name}),un&&a.createElement("input",{style:{pointerEvents:"none"},autoComplete:"none",value:null===un||void 0===un?void 0:un.name,readOnly:!0,className:w,name:e.field_name}),un&&a.createElement("input",{style:{pointerEvents:"none"},autoComplete:"none",value:Q()(new Date(null===un||void 0===un||null===(an=un.add_info)||void 0===an?void 0:an.start)).format("DD MMM YYYY h:mm a"),readOnly:!0,className:w,name:e.field_name}),(null===un||void 0===un?void 0:un.status)&&a.createElement("input",{style:{pointerEvents:"none"},autoComplete:"none",value:null===un||void 0===un?void 0:un.status,readOnly:!0,className:w,name:e.field_name})))}}else if(!q){var rn=h.find((function(n){return n.id===e.value}));q=rn?"".concat(rn.first_name," ").concat(rn.last_name):""}if("Video"===e.data_type_name&&(null===b||void 0===b?void 0:b.status)===(null!==(ue=null===e||void 0===e||null===(re=e.options)||void 0===re?void 0:re.status)&&void 0!==ue?ue:"New")&&(null!==e&&void 0!==e&&e.value||q)&&Q()(null!==(Te=null===e||void 0===e?void 0:e.value)&&void 0!==Te?Te:q)<=(0,H.now)()&&(0,H.now)()<Q()(null!==(Oe=null===e||void 0===e?void 0:e.value)&&void 0!==Oe?Oe:q).add("minutes",+(null!==(qe=null===e||void 0===e||null===(Ue=e.options)||void 0===Ue?void 0:Ue.expiry)&&void 0!==qe?qe:30)))return a.createElement(U.D,{width:"100%",key:n,style:{border:"1px dashed gray"},fieldLabel:e.field_name,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:!1,error:e.errors},a.createElement("div",{className:N,style:{display:"flex",justifyContent:"center",fontSize:"12px"}},a.createElement($.Z,{payload:{name:b.id}})));if("Module"===e.data_type_name&&null!==e&&void 0!==e&&null!==(se=e.options)&&void 0!==se&&se.detail){var sn=S.find((function(n){return n.id===e.options.module_id}));return a.createElement("div",{className:C,style:{display:"flex",alignContent:"space-between",justifyContent:"center",width:"100%",margin:"40px 0"}},a.createElement(c.zx,{style:{backgroundColor:"var(--app-color-blue)"},title:null===e||void 0===e?void 0:e.field_name,message:"Preparing ".concat(sn.name," entry..."),loading:te,clicked:function(){ie(!0),(0,p.zJ)(sn.procedure.id).pipe((0,y.P)()).subscribe({next:function(n){var o;if(null!==e&&void 0!==e&&null!==(o=e.options)&&void 0!==o&&o.cmp){var i,d,a,u,r=null===n||void 0===n||null===(i=n.steps)||void 0===i?void 0:i.find((function(e){return e.component_blueprints.filter((function(e){var n,o;return(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.allowMultipleInputs)&&(null===(o=e.selected_fields)||void 0===o?void 0:o.find((function(e){return"Transaction List"===e.data_type_name})))})).length>0})),s=null===r||void 0===r||null===(d=r.component_blueprints)||void 0===d?void 0:d.find((function(e){var n;return(null===(n=e.selected_fields)||void 0===n?void 0:n.filter((function(e){return"Transaction List"===e.data_type_name&&!0===e.visible})).length)>0})),c=null===s||void 0===s||null===(a=s.selected_fields)||void 0===a?void 0:a.filter((function(e){var n;return null===(n=e.options)||void 0===n?void 0:n.mapToItem})).reduce((function(e,n){var o,i=V.Z(W.Z("field_name",n.field_name),G.Z(X.Z("selected_fields",Y.components.concat(Y.newStepComponents))));return i&&(null===i||void 0===i?void 0:i.data_type_name)===n.data_type_name?(0,l.Z)((0,l.Z)({},e),{},(0,t.Z)({},null===(o=n.options)||void 0===o?void 0:o.mapToItem,i.value)):e}),{});if(Object.values(c).length>0)(0,v.r6)(null===e||void 0===e||null===(u=e.options)||void 0===u?void 0:u.cmp).pipe((0,y.P)()).subscribe({next:function(n){var o,t;(0,v.np)((0,l.Z)((0,l.Z)({},c),{},{index:null===(o=n.component_items)||void 0===o?void 0:o.length,id:(0,oe.mR)()}),null===e||void 0===e||null===(t=e.options)||void 0===t?void 0:t.cmp).pipe((0,y.P)()).subscribe({next:function(e){ie(!1),f.h.dispatch((0,_.Xc)({show:!0,message:"Success, an item was added."})),M(!1)},error:function(){}})},error:function(){}});else ie(!1)}else ie(!1),Y.components=[],Y.newStepsComponent=[],e.options.fields.filter((function(e){var o,t,l=null===(o=b.component_fields.find((function(n){return n.field_name===e})))||void 0===o?void 0:o.value;null===(t=n.steps)||void 0===t||t.forEach((function(n){var o;null===n||void 0===n||null===(o=n.component_blueprints)||void 0===o||o.filter((function(e){var n;return!(null!==(n=e.options)&&void 0!==n&&n.asModuleList)})).forEach((function(n){var o=n.selected_fields.find((function(n){return n.field_name===e&&1==n.visible}));o&&(o.value=l)})),n.component_blueprints.find((function(n){return n.selected_fields.filter((function(n){return n.field_name===e})).length>0}))&&R({action:g._U.addNewComponent,value:n.component_blueprints.filter((function(n){return n.selected_fields.filter((function(n){return n.field_name===e})).length>0}))})}))})),f.h.dispatch((0,_.q4)((0,l.Z)((0,l.Z)({},n),{},{completeSteps:n.steps,steps:n.steps,stepIndex:1,module_id:e.options.module_id,module:S.find((function(n){return n.id===e.options.module_id}))}))),R({action:g._U.setCurrentStep,value:n.steps[1]}),R({action:g._U.setModuleItems,value:[]}),M(!1),f.h.dispatch((0,_.IW)(!1)),de("/begin-module")}})}}))}if("Module"===e.data_type_name)return null;if("Details"===e.data_type_name&&null!==e&&void 0!==e&&null!==(ce=e.options)&&void 0!==ce&&ce.key&&(null===(ve=e.options)||void 0===ve||null===(pe=ve.fields)||void 0===pe?void 0:pe.length)>0){var cn,vn,pn=m.find((function(n){return n.module_id===e.options.module_id&&n.component_fields.find((function(n){var o,t;return n.field_name===e.options.key&&n.value===(null===b||void 0===b||null===(o=b.component_fields)||void 0===o||null===(t=o.find((function(n){return n.field_name===e.options.key&&n.value})))||void 0===t?void 0:t.value)}))}));q=null===pn||void 0===pn||null===(cn=pn.component_fields)||void 0===cn||null===(vn=cn.find((function(n){var o;return n.field_name===(null===(o=e.options)||void 0===o?void 0:o.fields[0])})))||void 0===vn?void 0:vn.value}return"Clock"===e.data_type_name&&(q=Q()(new Date(+q)).format("DD MMM YYYY h:mm a")),"Long Text"===e.data_type_name&&null!==(me=e.options)&&void 0!==me&&me.rich?null:a.createElement(U.D,{enabled:!1,width:A.tq?"100%":"48%",key:n,style:{border:"0"},fieldLabel:e.field_name,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:!1,error:e.errors},(null===(fe=q)||void 0===fe?void 0:fe.length)>50&&!A.tq||(null===(_e=q)||void 0===_e?void 0:_e.length)>20&&A.tq&&"Date"!==e.data_type_name?a.createElement("textarea",{readOnly:!0,className:x,style:{padding:"10px",pointerEvents:"none"},onFocus:function(){},required:!0,value:null===q||void 0===q?"":"Date"===e.data_type_name||"Video"===e.data_type_name?Q()(new Date(q)).format("DD MMM YYYY"):q,onChange:function(e){}}):a.createElement("input",{readOnly:!0,style:{pointerEvents:"none"},onChange:function(){},autoComplete:"none",value:null===q||void 0===q?"":"Dropdown"===e.data_type_name&&"modules"===(null===(ye=e.options)||void 0===ye?void 0:ye.type)?null===(he=S.find((function(n){return n.id===e.value})))||void 0===he?void 0:he.name:"Date"===e.data_type_name||"Video"===e.data_type_name?"Invalid date"===Q()(new Date(q)).format("DD MMM YYYY")?"":Q()(new Date(q)).format("DD MMM YYYY h:mm a"):q,className:w,name:e.field_name}))}));return a.createElement("div",{className:k,style:{width:A.tq?"100%":""}},ae)})),de=function(e){var n,o,t,l,i=e.component,u=e.blueprintIndex,r=e.companyData,c=e.components,v=e.allComponents,p=e.companyUsersArray,m=e.selectedComponent,f=e.setIsOpen,_=(0,g.pQ)(),y=(0,d.Z)(_,2),h=y[0],b=(y[1],(0,s.v9)((function(e){return e.authReducer})).authenticatedUser),C=(0,a.useState)(Z),w=(0,d.Z)(C,1)[0],x=(0,a.useState)(""),k=(0,d.Z)(x,1)[0],D=(0,a.useRef)(null),N=null===(n=h.currentStep)||void 0===n?void 0:n.component_blueprints.findIndex((function(e){return e.id===i.id})),P=i.selected_fields.filter((function(e){return"Pin"===e.data_type_name||"Map"===e.data_type_name})).length>0;return a.createElement("div",{id:"accordion",className:M,key:u,style:{display:void 0===(null===(o=i.options)||void 0===o?void 0:o.showOnly)||0==(null===(t=i.options)||void 0===t?void 0:t.showOnly.length)||b.positions.filter((function(e){var n,o;return null===(n=i.options)||void 0===n||null===(o=n.showOnly)||void 0===o?void 0:o.includes(e.id)})).length>0?"":"none"}},a.createElement("div",{className:R()(E,w),"app-variant-has-error":k?"error":""},!(P&&A.tq)&&a.createElement("p",{className:I},null===i||void 0===i?void 0:i.name),a.createElement("div",{ref:D,style:{maxHeight:w===Z?"":"0px",display:"flex"},className:S},a.createElement(ie,{components:c,allComponents:v,component:i,handleInputChange:function(){},handlePrefixChange:function(){},handleCurrencyChange:function(){},checkIfAreMandatoryErrored:!1,handleCheckbox:function(){},isInherited:!1,indexInContextArray:N,handleLocationChange:function(){},processTaskContext:h,companyData:r,companyUsersArray:p,selectedComponent:m,setIsOpen:f}))),k&&(null===k||void 0===k||null===(l=k.errors)||void 0===l?void 0:l.title)&&a.createElement(B.Z,{message:k.errors.title}),k&&(null===k||void 0===k?void 0:k.message)&&a.createElement(B.Z,{message:k.message}))},ae=function(e){var n,o,t=(0,a.useState)(!1),l=(0,d.Z)(t,2),i=l[0],u=l[1],r=e.component;return a.createElement("div",{className:E},a.createElement("div",{className:k,style:{width:(A.tq,"100%")}},a.createElement(U.D,{width:A.tq?"100%":"48%",fieldLabel:"Created By",style:{border:"0"},isProcess:!0,visible:!0},a.createElement("input",{onClick:function(){return u(!i)},readOnly:!0,onChange:function(){},autoComplete:"none",value:"".concat(null===(n=r.created_by)||void 0===n?void 0:n.first_name," ").concat(null===(o=r.created_by)||void 0===o?void 0:o.last_name),className:w})),a.createElement(U.D,{width:A.tq?"100%":"48%",fieldLabel:"Created Date",style:{border:"0"},isProcess:!0,visible:!0},a.createElement("input",{style:{pointerEvents:"none"},onChange:function(){},autoComplete:"none",value:Q()(new Date(r.created_date)).format("DD MMM YYYY h:mm a"),className:w,name:"Created Date"})),a.createElement(U.D,{width:A.tq?"100%":"48%",fieldLabel:"Transaction ID",style:{border:"0"},isProcess:!0,visible:i},a.createElement("input",{onChange:function(){},autoComplete:"none",value:r.id,className:w,name:"CID"})),a.createElement(U.D,{width:A.tq?"100%":"48%",fieldLabel:"Transaction Title",style:{border:"0"},isProcess:!0,visible:i},a.createElement("input",{onChange:function(){},autoComplete:"none",value:r.title,className:w,name:"CID"}))))},ue=function(e){var n,o,t,l=e.component;return a.createElement("div",{className:E,style:{display:l.payments?"":"none"}},a.createElement("div",{className:k,style:{width:(A.tq,"100%")}},a.createElement(U.D,{width:A.tq?"100%":"48%",fieldLabel:"Payments",style:{border:"0"},isProcess:!0,visible:!0},a.createElement("input",{style:{pointerEvents:"none"},onChange:function(){},autoComplete:"none",value:"".concat(null===(n=l.payments)||void 0===n?void 0:n.stripe_product,", ID: ").concat(null===(o=l.payments)||void 0===o?void 0:o.stripe_id.substring(0,13)),className:w})),a.createElement(U.D,{width:A.tq?"100%":"48%",fieldLabel:"Amount Paid",style:{border:"0"},isProcess:!0,visible:!0},a.createElement("input",{style:{pointerEvents:"none"},onChange:function(){},autoComplete:"none",value:"".concat(null===(t=l.payments)||void 0===t?void 0:t.stripe_price),className:w}))))},re=function(e){var n,o,t,i,u,r,s,c=e.field,v=e.selectedComponent,p=e.companyUsersArray,m=e.component,f=function(e){var n,o,t,l,i,d,u,r,s,c,v,f,_,y,h,g,b,M=e.field,E=(e.index,e.item);if("People"===(null===M||void 0===M?void 0:M.data_type_name)&&(null===M||void 0===M||null===(n=M.options)||void 0===n||null===(o=n.position_id)||void 0===o?void 0:o.length)>0){var Z=p.find((function(e){return(null===M||void 0===M?void 0:M.value)==="".concat(e.first_name," ").concat(e.last_name)}));return a.createElement("div",{style:{display:"flex",justifyContent:"center"}},Z&&a.createElement("div",{className:P},a.createElement("img",{alt:"lg",src:null===Z||void 0===Z?void 0:Z.photo,className:T})))}if("Link"===(null===M||void 0===M?void 0:M.data_type_name)||"URL"===(null===M||void 0===M?void 0:M.data_type_name))return null!==M&&void 0!==M&&null!==(s=M.value)&&void 0!==s&&s.includes("jpg")||null!==M&&void 0!==M&&null!==(c=M.value)&&void 0!==c&&c.includes("jpeg")||null!==M&&void 0!==M&&null!==(v=M.value)&&void 0!==v&&v.includes("png")?a.createElement("div",{style:{display:"flex",justifyContent:"center"}},a.createElement("div",{className:P},a.createElement("img",{alt:"lg",src:null===M||void 0===M?void 0:M.value,className:T}))):a.createElement("div",null,null===M||void 0===M?void 0:M.value);if("date"===M.data_type||null!==M&&void 0!==M&&null!==(t=M.options)&&void 0!==t&&t.country_code||null!==M&&void 0!==M&&null!==(l=M.options)&&void 0!==l&&l.currency_type||"Number"===M.data_type_name||"Clock"===M.data_type_name)return"bar"===(null===M||void 0===M||null===(f=M.options)||void 0===f?void 0:f.display)?a.createElement("div",{className:w,style:{paddingLeft:"0px",border:"none",height:"auto"}},a.createElement("div",{style:{height:"10px",width:"100%",backgroundColor:null===M||void 0===M||null===(_=M.options)||void 0===_?void 0:_.maxC,display:"flex",flexDirection:"row",border:"none"}},a.createElement("input",{defaultValue:"",className:w,name:M.field_name,style:{color:"transparent",border:"none",height:"10px",width:"".concat(+(null===M||void 0===M?void 0:M.value)/+M.options.max*100,"%"),backgroundColor:null!==M&&void 0!==M&&M.value?"0"===(null===M||void 0===M?void 0:M.value)?"transparent":null===M||void 0===M||null===(y=M.options)||void 0===y?void 0:y.barC:"transparent"}}))):a.createElement("div",{style:{backgroundColor:null!==M&&void 0!==M&&null!==(h=M.options)&&void 0!==h&&h.valueC?null===M||void 0===M||null===(g=M.options)||void 0===g?void 0:g.valueC:""}},"date"===(null===M||void 0===M?void 0:M.data_type)||"Clock"===(null===M||void 0===M?void 0:M.data_type_name)?Q()(M.value).format(null!==M&&void 0!==M&&null!==(b=M.options)&&void 0!==b&&b.time?"DD MMMM YYYY HH:mm":"DD MMMM YYYY"):null===M||void 0===M?void 0:M.value);if("Item Formula"===(null===M||void 0===M?void 0:M.data_type_name)&&(null===M||void 0===M||null===(i=M.options)||void 0===i||null===(d=i.operator)||void 0===d?void 0:d.length)>0){var C,S,x=(0,oe.LV)(null===M||void 0===M?void 0:M.options,m.selected_fields.filter((function(e){return M.options.list.includes(e.field_name)&&e.options.mapToItem})),[],[],E,!0);return a.createElement("div",{style:{backgroundColor:null!==M&&void 0!==M&&null!==(C=M.options)&&void 0!==C&&C.valueC?null===M||void 0===M||null===(S=M.options)||void 0===S?void 0:S.valueC:""}},x)}return a.createElement("div",{style:{backgroundColor:null!==M&&void 0!==M&&null!==(u=M.options)&&void 0!==u&&u.valueC?null===M||void 0===M||null===(r=M.options)||void 0===r?void 0:r.valueC:""}},null===M||void 0===M?void 0:M.value)},_={item_code:null,quantity:null,value:null,alt_value:null,total:null},y=Object.entries(Object.assign(_,null===c||void 0===c?void 0:c.options.map)).reduce((function(e,n){var o=(0,d.Z)(n,2),t=o[0],l=o[1];return null===l||(e[t]=l),e}),{}),h=Object.entries(Object.assign(_,null===c||void 0===c?void 0:c.options.map)).reduce((function(e,n){var o=(0,d.Z)(n,2),t=o[0],l=o[1];return null===l||(e[t]=l),e}),{});Object.keys(y).map((function(e){var n;"item_code"===e?h.item_code="Totals:":"quantity"===e?h[e]="".concat(J.Z((function(n,o){var t;return null!==(t=+n+ +o[e])&&void 0!==t?t:0}),0,null!==(n=null===v||void 0===v?void 0:v.component_items)&&void 0!==n?n:[])):("alt_value"===e||"value"===e||"total"===e)&&(h[e]="")}));var g=null!==c&&void 0!==c&&null!==(n=c.options)&&void 0!==n&&n.group?null!==(o=null===m||void 0===m||null===(t=m.selected_fields)||void 0===t||null===(i=t.find((function(e){var n,o;return(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.mapToItem)===(null===c||void 0===c||null===(o=c.options)||void 0===o?void 0:o.groupL)&&"Dropdown"===e.data_type_name})))||void 0===i||null===(u=i.options)||void 0===u?void 0:u.list)&&void 0!==o?o:[]:null!==c&&void 0!==c&&null!==(r=c.options)&&void 0!==r&&r.type?[null===c||void 0===c||null===(s=c.options)||void 0===s?void 0:s.type]:[void 0];return a.createElement("div",{style:{width:"100%",border:"1px dashed gray",borderRadius:"10px",padding:"16px",fontFamily:"var(--app-text-main-font)",margin:"20px 0",display:v.component_items.length>0?"":"none"}},a.createElement("p",{style:{fontSize:"20px",fontFamily:"var(--app-text-main-font)",fontWeight:"bold",color:"var(--app-color-gray-dark)"}},c.field_name),null===g||void 0===g?void 0:g.map((function(e,n){var o,t,i,d,u,r,s,p=null===(o=j.Z([F.Z(z.Z("index"))])(null!==(t=null===v||void 0===v||null===(i=v.component_items)||void 0===i?void 0:i.filter((function(n){var o;return n[null===c||void 0===c||null===(o=c.options)||void 0===o?void 0:o.groupL]===e||n.type===e})))&&void 0!==t?t:[]))||void 0===o?void 0:o.map((function(e,n){var o;e.index=n;var t={index:n};return null===m||void 0===m||null===(o=m.selected_fields)||void 0===o||o.filter((function(e){var n;return null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.mapToItem})).map((function(o){var i,d=(0,oe.sO)(e[o.options.mapToItem])?JSON.parse(null!==(i=e[o.options.mapToItem])&&void 0!==i?i:"{}")[o.field_name]:e[o.options.mapToItem];t[o.field_name]=a.createElement(f,{index:n,item:e,field:(0,l.Z)((0,l.Z)({},o),{},{visible:!0,value:null!==d&&void 0!==d?d:""})})})),t}));return a.createElement(a.Fragment,null,p.length>0&&a.createElement(te.Z,{key:n,withColumns:0!==p.length,style:{width:"100%",marginBottom:"20px"},tableHostSimple:A.tq?O:q.Z.itemsContainer_ii,layeredColumns:null===(d=j.Z([F.Z(z.Z("index"))])(null===m||void 0===m?void 0:m.selected_fields))||void 0===d?void 0:d.filter((function(e){var n;return null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.mapToItem})).map((function(e){var n,o;return null!==(n=e.options)&&void 0!==n&&n.group?{label:null===(o=e.options)||void 0===o?void 0:o.group,subColumns:[{label:e.field_name}]}:{label:e.field_name}})).slice(0,A.tq?3:8),list:p,footer:p.length>0&&null!==(u=c.options)&&void 0!==u&&u.footer?null===m||void 0===m||null===(r=m.selected_fields)||void 0===r?void 0:r.filter((function(e){var n;return null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.mapToItem})).map((function(e,n){var o,t;return null!==e&&void 0!==e&&null!==(o=e.options)&&void 0!==o&&o.footer?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0,o=arguments.length>2?arguments[2]:void 0;return 0==(null===e||void 0===e?void 0:e.length)?0:e.reduce((function(e,t){var l,i,d,a,u,r,s,c,v;if(null===t[null===n||void 0===n||null===(l=n.options)||void 0===l?void 0:l.mapToItem]||""===t[null===n||void 0===n||null===(i=n.options)||void 0===i?void 0:i.mapToItem])return e;var p=null!==(d=null!==o&&void 0!==o&&null!==(a=o.options)&&void 0!==a&&a.simple?JSON.parse(null!==(u=t[null===n||void 0===n||null===(r=n.options)||void 0===r?void 0:r.mapToItem])&&void 0!==u?u:"{}")[null===n||void 0===n?void 0:n.field_name]:t[null===n||void 0===n||null===(s=n.options)||void 0===s?void 0:s.mapToItem])&&void 0!==d?d:0;return"itemsum"===(null===n||void 0===n||null===(c=n.options)||void 0===c?void 0:c.footer)?e+ +(""===p?0:"".concat(p)):"itemdiff"===(null===n||void 0===n||null===(v=n.options)||void 0===v?void 0:v.footer)?e-+(""===p?0:"".concat(p)):0}),0)}(null!==c&&void 0!==c&&null!==(t=c.options)&&void 0!==t&&t.type?null===v||void 0===v?void 0:v.component_items.filter((function(e){var n;return e.type===(null===c||void 0===c||null===(n=c.options)||void 0===n?void 0:n.type)})):null===v||void 0===v?void 0:v.component_items,e,c):0===n?"Totals:":""})):[]},(null===c||void 0===c||null===(s=c.options)||void 0===s?void 0:s.group)&&a.createElement("p",{style:{fontSize:"16px",fontFamily:"var(--app-text-main-font)",fontWeight:"bold",color:"var(--app-color-gray-dark)"}},e)))})))},se=o(51330),ce=function(e){var n,o=e.component,t=e.isMandatoryError,l=e.nextButtonClicked,i=e.setIsMandatoryError,u=(0,g.pQ)(),s=(0,d.Z)(u,1)[0],c=(0,a.useState)(""),v=(0,d.Z)(c,1)[0],p=(0,a.useRef)(null);(0,a.useEffect)((function(){m()}),[l]);var m=function(){var e;null!==o&&void 0!==o&&null!==(e=o.selected_fields)&&void 0!==e&&e.some((function(e){var n;return!0===e.mandatory&&!0===e.visible&&(!e.value||(null===e||void 0===e||null===(n=e.value)||void 0===n?void 0:n.length)<1)}))?i(!0):i(!1)},f=function(e,n){var o,t;0==n?s.newProduct={name:e,product_code:null===s||void 0===s||null===(o=s.newProduct)||void 0===o?void 0:o.product_code}:s.newProduct={product_code:e,name:null===s||void 0===s||null===(t=s.newProduct)||void 0===t?void 0:t.name}};return a.createElement("div",{id:"accordion",className:q.Z.section},a.createElement("div",{className:R()(q.Z.accordionContainer,!0),"app-variant-has-error":v?"error":""},a.createElement("div",{style:{display:"flex"}},a.createElement("p",{className:q.Z.title,style:{color:t&&l?"var(--app-color-error)":""}},"New Product Details")),a.createElement("div",{ref:p,style:{maxHeight:"",display:"flex",padding:"0px 0px 20px 0px"},className:q.Z.content},a.createElement(U.Z,{fieldIcon:r.MQ,fieldLabel:"Product Name",isProcess:!0,visible:!0,mandatory:!0,customIconBgColor:"white"},a.createElement("div",{className:q.Z.fieldRowContainer},a.createElement("input",{type:"text",onChange:function(e){f(e.target.value,0)},autoComplete:"none",className:q.Z.fieldTypeInput,name:"field.field_name"}))),a.createElement("div",{style:{width:"10px"}}),a.createElement(U.Z,{fieldIcon:r.MQ,fieldLabel:"Product Code",isProcess:!0,visible:!0,mandatory:!0,customIconBgColor:"white"},a.createElement("div",{className:q.Z.fieldRowContainer},a.createElement("input",{type:"text",onChange:function(e){f(e.target.value,1)},autoComplete:"none",className:q.Z.fieldTypeInput,name:"field.field_name"}))))),v&&(null===v||void 0===v||null===(n=v.errors)||void 0===n?void 0:n.title)&&a.createElement(B.Z,{message:v.errors.title}),v&&(null===v||void 0===v?void 0:v.message)&&a.createElement(B.Z,{message:v.message}))},ve=o(41131),pe=o(40694),me=o(81330),fe=o.n(me),_e=o(63864),ye="GeneralCard_userCard__0SOp0",he="GeneralCard_userCardContainer__wJA5U",ge="GeneralCard_userCardBottomContainer__0WoR6",be="GeneralCard_fullName__QizQf",Me="GeneralCard_position__3X6Ea",Ee="GeneralCard_email__U8cda",Ze=function(e){var n=e.cardClicked,o=e.title,t=e.subtitle,l=e.children,i=e.description,d=e.customClass,u=void 0===d?ye:d,r=e.customStyle;return a.createElement("div",{className:u,onClick:n,style:r},a.createElement("div",{className:he},a.createElement("div",{className:ge},a.createElement("p",{className:be},o),a.createElement("p",{className:Ee},i),a.createElement("p",{className:Me},t),l)))},Ce=o(60761),Se=o(29937),we=o(4358),xe=o(1542),ke=o(49523),Ie=o(9204),De=o(32086),Ne=o(53431),Pe=o(68218),Te=o(84634),Oe=o(79544),qe=o(62169),Ue=o(88346),Ae=(o(67055),o(71901),o(95007)),Ye=o(87424),Re=o(27658),Be=o(75105),Le=o(51481),je=o(41757),Fe=o(44408),ze=o(23910),Ve=o(46415);o(60940),o(56120),o(37704),o(72666),o(68623),o(3863),o(95361);e=o.hmd(e);var We=o(456);var Ge=(0,a.memo)((function(e){var n,o,t,i,r,s,v,m,f,_,h,g,M=e.step,E=e.isMandatoryError,Z=e.nextButtonClicked,C=e.setIsMandatoryError,S=e.begunModule,w=e.companyData,x=e.components,k=e.isEditing,I=e.companyUsersArray,D=e.setUsers,N=e.setPositions,P=void 0===N?function(){}:N,T=e.products,O=e.selectedComponent,q=e.goToNextStep,U=e.authenticatedUser,Y=e.setIsCompleted,R=e.companyPositionsArray,B=(e.cart,e.blueprints),L=e.allModules,j=e.usersArray,F=e.editMode,z=((0,b.WidthProvider)(b.Responsive),(0,a.useState)(null===(n=null===O||void 0===O?void 0:O.is_complete)||void 0===n||n)),V=(0,d.Z)(z,1)[0],W=[],G=a.createElement(Ve.mQ,{style:{width:"100%",marginTop:"50px",minHeight:"30vh"}},a.createElement(Ve.td,null,null===M||void 0===M?void 0:M.component_blueprints.filter((function(e){return e.selected_fields.filter((function(n){var o,t;return 1==n.visible&&"Emails"!==n.data_type_name&&(void 0===(null===(o=e.options)||void 0===o?void 0:o.showOnly)||0==(null===(t=e.options)||void 0===t?void 0:t.showOnly.length)||U.positions.filter((function(n){var o,t;return null===(o=e.options)||void 0===o||null===(t=o.showOnly)||void 0===t?void 0:t.includes(n.id)})).length>0)})).length>0})).map((function(e,n){var o;return a.createElement(Ve.OK,{key:n},a.createElement("div",{style:{padding:"10px 0",fontSize:"16px",fontWeight:"bold",fontFamily:"var(--app-text-main-font)",transform:"scaleY(1.1)",color:"var(--app-color-gray-dark)"}},null===e||void 0===e||null===(o=e.name)||void 0===o?void 0:o.toUpperCase()))}))),(null===M||void 0===M||null===(o=M.component_blueprints)||void 0===o?void 0:o.length)>0?null===M||void 0===M?void 0:M.component_blueprints.filter((function(e){return e.selected_fields.filter((function(n){var o,t;return 1==n.visible&&"Emails"!==n.data_type_name&&(void 0===(null===(o=e.options)||void 0===o?void 0:o.showOnly)||0==(null===(t=e.options)||void 0===t?void 0:t.showOnly.length)||U.positions.filter((function(n){var o,t;return null===(o=e.options)||void 0===o||null===(t=o.showOnly)||void 0===t?void 0:t.includes(n.id)})).length>0)})).length>0})).map((function(e,n){var o=e.selected_fields.find((function(e){return"Template"===e.data_type_name&&1==e.visible})),t=e.selected_fields.find((function(e){return"Video"===e.data_type_name&&1==e.visible}));return o?a.createElement(Ve.x4,{key:n},a.createElement(ve.ZP,{templateName:o.field_name,nextButtonClicked:Z,isMandatoryError:E,blueprintIndex:n,setIsMandatoryError:C,component:e,companyData:w,components:x,products:T,selectedComponent:O,component_blueprint:e,editMode:F,blueprints:B,allModules:L,authenticatedUser:U,companyUsersArray:I,companyPositionsArray:R,begunModule:S})):e.selected_fields.filter((function(e){return 1==e.visible})).length>0?a.createElement(Ve.x4,{key:n,style:{margin:"30px 0 0 0"}},a.createElement(se.Z,{editMode:F,nextButtonClicked:Z,isMandatoryError:E,blueprintIndex:n,setIsMandatoryError:C,blueprints:B,component:e,companyData:w,components:x,allModules:L,products:T,authenticatedUser:U,selectedComponent:O,companyUsersArray:I,companyPositionsArray:R,begunModule:S}),(null===O||void 0===O?void 0:O.id)&&(null===t||void 0===t?void 0:t.value)&&Q()(null===t||void 0===t?void 0:t.value)<=(0,H.now)()&&(0,H.now)()<Q()(null===t||void 0===t?void 0:t.value).add("minutes",10)&&a.createElement(se.Z,{editMode:F,nextButtonClicked:Z,isMandatoryError:E,blueprintIndex:n,setIsMandatoryError:C,blueprints:B,component:(0,l.Z)((0,l.Z)({},e),{},{name:"Video Call",selected_fields:[(0,l.Z)((0,l.Z)({},t),{},{options:(0,l.Z)((0,l.Z)({},t.options),{},{start:!0})})]}),companyData:w,components:x,allModules:L,products:T,authenticatedUser:U,selectedComponent:O,companyUsersArray:I,companyPositionsArray:R,begunModule:S,shouldDisplay:!0,isEnabled:!0})):a.createElement(Ve.x4,null)})):a.createElement(Ve.x4,null)),X=(null===M||void 0===M||null===(t=M.component_blueprints)||void 0===t?void 0:t.length)>0?null===M||void 0===M?void 0:M.component_blueprints.map((function(e,n){var o=e.selected_fields.find((function(e){return"Template"===e.data_type_name&&1==e.visible})),t=e.selected_fields.find((function(e){return"Video"===e.data_type_name&&1==e.visible}));return o?a.createElement("div",{key:n},a.createElement(ve.ZP,{templateName:o.field_name,nextButtonClicked:Z,isMandatoryError:E,blueprintIndex:n,setIsMandatoryError:C,component:e,companyData:w,components:x,products:T,selectedComponent:O,component_blueprint:e,editMode:F,blueprints:B,allModules:L,authenticatedUser:U,companyUsersArray:I,companyPositionsArray:R,begunModule:S})):e.selected_fields.filter((function(e){return 1==e.visible})).length>0?a.createElement("div",{key:n,style:{margin:"30px 0 0 0"}},a.createElement(se.Z,{editMode:F,nextButtonClicked:Z,isMandatoryError:E,blueprintIndex:n,setIsMandatoryError:C,blueprints:B,component:e,companyData:w,components:x,allModules:L,products:T,authenticatedUser:U,selectedComponent:O,companyUsersArray:I,companyPositionsArray:R,begunModule:S}),(null===O||void 0===O?void 0:O.id)&&(null===t||void 0===t?void 0:t.value)&&Q()(null===t||void 0===t?void 0:t.value)<=(0,H.now)()&&(0,H.now)()<Q()(null===t||void 0===t?void 0:t.value).add("minutes",10)&&a.createElement(se.Z,{editMode:F,nextButtonClicked:Z,isMandatoryError:E,blueprintIndex:n,setIsMandatoryError:C,blueprints:B,component:(0,l.Z)((0,l.Z)({},e),{},{name:"Video Call",selected_fields:[(0,l.Z)((0,l.Z)({},t),{},{options:(0,l.Z)((0,l.Z)({},t.options),{},{start:!0})})]}),companyData:w,components:x,allModules:L,products:T,authenticatedUser:U,selectedComponent:O,companyUsersArray:I,companyPositionsArray:R,begunModule:S,shouldDisplay:!0,isEnabled:!0})):a.createElement(a.Fragment,null)})):a.createElement(a.Fragment,null),J=(0,a.useState)({currentBreakpoint:"lg",compactType:"vertical",mounted:!1,layouts:{lg:M.options.layout},editing:k}),K=(0,d.Z)(J,2),$=K[0],ee=K[1];return a.createElement("div",null,a.createElement(c.j3,{permissions:[c.po.processes.create]},a.createElement("button",{onClick:function(){W=$.layouts.lg.map((function(e){return(0,l.Z)((0,l.Z)({},e),{},{static:!1})})),ee((0,l.Z)((0,l.Z)({},$),{},{layouts:{lg:W},editing:!$.editing}))},hidden:!$.editing},"Edit Layout"),a.createElement("button",{onClick:function(){var e=W.map((function(e){return(0,l.Z)((0,l.Z)({},e),{},{static:!0})}));(0,p.T5)({options:(0,l.Z)((0,l.Z)({},M.options),{},{layout:e})},M.id,!0).pipe((0,y.P)()).subscribe({next:function(n){ee((0,l.Z)((0,l.Z)({},$),{},{layouts:{lg:e},editing:!$.editing}))},error:function(e){ee((0,l.Z)((0,l.Z)({},$),{},{layouts:{lg:M.options.layout},editing:!$.editing}))}})},hidden:!$.editing},"Save Layout")),null!==M&&void 0!==M&&null!==(i=M.options)&&void 0!==i&&i.tabbed&&!A.tq||null!==M&&void 0!==M&&null!==(r=M.options)&&void 0!==r&&r.tabbed&&(null===M||void 0===M?void 0:M.component_blueprints.filter((function(e){return e.selected_fields.filter((function(n){var o,t;return 1==n.visible&&"Emails"!==n.data_type_name&&(void 0===(null===(o=e.options)||void 0===o?void 0:o.showOnly)||0==(null===(t=e.options)||void 0===t?void 0:t.showOnly.length)||U.positions.filter((function(n){var o,t;return null===(o=e.options)||void 0===o||null===(t=o.showOnly)||void 0===t?void 0:t.includes(n.id)})).length>0)})).length>0})).length)<3?G:X,"product"===(null===(s=S.processModule.module)||void 0===s?void 0:s.options.outputTo)&&(null===M||void 0===M?void 0:M.is_end)&&a.createElement(ce,{nextButtonClicked:Z,isMandatoryError:E,setIsMandatoryError:C,component:{}}),((null===O||void 0===O||null===(v=O.created_by)||void 0===v?void 0:v.id)===U.id||(null===(m=S.processModule)||void 0===m?void 0:m.user_id)===U.id)&&(null===(f=S.processModule.module)||void 0===f?void 0:f.options.forSpecificUsers)&&(null===M||void 0===M?void 0:M.is_end)&&a.createElement("div",{style:{border:"1px dashed var(--app-color-gray-lighter)",marginTop:"100px",borderRadius:"8px 8px 0 0"}},a.createElement("p",{className:u.title},"Shares"),function(){var e;return a.createElement(c.jL,{ungrouped:!0,ttitle:"Select users to share this item:",columned:!0,withAckButton:!1},a.createElement("p",{style:{fontFamily:"var(--app-text-main-font)",fontSize:"16px",fontWeight:"bold",color:"var(--app-color-gray-dark)"}},"Select users to share this item:"),a.createElement(we.Cm,{style:{width:"50%"},id:"Users",tagEmplacement:"inlined",searchable:!1,items:j,groupedBy:"department",groupname:"department",triggerType:"chevron",initialSelectedValues:null===O||void 0===O||null===(e=O.shared_users)||void 0===e?void 0:e.map((function(e){return j.find((function(n){return n.value===e.id}))})),className:u.peoplePositionsSelect,inputClassName:u.peoplePositionsSelectInput,molclassname:u.peoplePositionsSelectMenuOverlay,moliclassname:u.peoplePositionsSelectMenuOverlayItem,onChange:function(e){e.length>0?(D(null===e||void 0===e?void 0:e.map((function(e){return null===e||void 0===e?void 0:e.value}))),null!==O&&void 0!==O&&O.id&&(O.shared_users=null===e||void 0===e?void 0:e.map((function(e){return{id:null===e||void 0===e?void 0:e.value}})))):D([])}}))}(),function(){var e;return a.createElement(c.jL,{ungrouped:!0,columned:!0,withAckButton:!1},a.createElement("p",{style:{fontFamily:"var(--app-text-main-font)",fontSize:"16px",fontWeight:"bold",color:"var(--app-color-gray-dark)"}},"Select positions to share this item:"),a.createElement(we.Cm,{style:{width:"50%"},id:"Positions",tagEmplacement:"inlined",searchable:!1,items:R,groupedBy:"department",groupname:"department",triggerType:"chevron",initialSelectedValues:null===O||void 0===O||null===(e=O.shared_positions)||void 0===e?void 0:e.map((function(e){return R.find((function(n){return n.value===e.id}))})),className:u.peoplePositionsSelect,inputClassName:u.peoplePositionsSelectInput,molclassname:u.peoplePositionsSelectMenuOverlay,moliclassname:u.peoplePositionsSelectMenuOverlayItem,onChange:function(e){e.length>0?(P(null===e||void 0===e?void 0:e.map((function(e){return null===e||void 0===e?void 0:e.value}))),null!==O&&void 0!==O&&O.id&&(O.shared_positions=null===e||void 0===e?void 0:e.map((function(e){return{id:null===e||void 0===e?void 0:e.value}})))):P([])}}))}()),(null===(_=S.processModule.module)||void 0===_?void 0:_.options.forSpecificUsers)&&(null===M||void 0===M?void 0:M.is_end)&&a.createElement("div",{style:{height:"200px"}}),(null===M||void 0===M?void 0:M.is_end)&&(void 0===(null===O||void 0===O?void 0:O.is_complete)||0==(null===O||void 0===O?void 0:O.is_complete))&&function(){var e,n,o;return a.createElement("div",{className:u.emptyElementsSection,style:{width:"260px",padding:"0px 0px 0px 20px"}},a.createElement(c.pd,{id:"draft",title:"Save as draft?",ungrouped:!0,withAckButton:!1,style:{margin:"20px 2.5% 10px 5px",width:"auto",display:null!==S&&void 0!==S&&null!==(e=S.processModule)&&void 0!==e&&null!==(n=e.module)&&void 0!==n&&null!==(o=n.options)&&void 0!==o&&o.nosave?"none":""},value:!V,toggleSelected:function(e){Y(!e)}}))}(),(null===M||void 0===M||null===(h=M.pathway_steps)||void 0===h?void 0:h.length)>0&&function(){var e=M.pathway_steps.map((function(e){return{label:"".concat(e.name),value:e.id}})),n=I.map((function(e){return{label:"".concat(e.first_name," ").concat(e.last_name),value:e.id}}));return a.createElement("div",{className:u.emptyElementsSection,style:{width:"60%",padding:"20px 20px 20px 20px",height:"".concat(n.length*n.length>4?70:200,"px")}},a.createElement(_e.Z,{visible:!0,mandatory:!1,items:e,onChange:function(e){q(e)},placeholder:"Continue to this step..."}))}(),(null===M||void 0===M||null===(g=M.pathway_processes)||void 0===g?void 0:g.length)>0&&function(){var e=M.pathway_processes.map((function(e){return{label:"".concat(e.name),value:e.id}})),n=I.map((function(e){return{label:"".concat(e.first_name," ").concat(e.last_name),value:e.id}}));return a.createElement("div",{className:u.emptyElementsSection,style:{width:"60%",padding:"20px 20px 20px 20px",height:"".concat(n.length*n.length>4?70:200,"px")}},a.createElement(_e.Z,{visible:!0,mandatory:!1,items:e,onChange:function(){},placeholder:"Continue to this process..."}))}(),e.children)})),Xe=function(e){var n,o,l,i,d,r,s=e.selectedComponent,c=e.companyPositionsArray,v=e.companyUsersArray;return a.createElement("div",{style:{width:"100%"}},((null===s||void 0===s||null===(n=s.shared_users)||void 0===n?void 0:n.length)>0||(null===s||void 0===s||null===(o=s.shared_positions)||void 0===o?void 0:o.length)>0)&&a.createElement("div",{className:u.accordionContainer},a.createElement("p",{className:u.cardTitle},"Shares"),a.createElement("div",{style:{display:"flex"}},a.createElement(U.D,{width:A.tq?"100%":"45%",fieldLabel:"Positions",style:{border:"0"},visible:!0,mandatory:!1,customIconBgColor:"white",enabled:!1},(null===s||void 0===s||null===(l=s.shared_positions)||void 0===l?void 0:l.length)>0&&a.createElement(L.default,{withColumns:!1,className:u.sharesTable,columns:["Position"],list:null===s||void 0===s||null===(i=s.shared_positions)||void 0===i?void 0:i.map((function(e){var n=null===c||void 0===c?void 0:c.find((function(n){return n.value===e.id}));return(0,t.Z)({},"Position",null===n||void 0===n?void 0:n.label)}))})),a.createElement(U.D,{width:A.tq?"100%":"45%",fieldLabel:"Users",style:{border:"0"},visible:!0,mandatory:!1,customIconBgColor:"white",enabled:!1},(null===s||void 0===s||null===(d=s.shared_users)||void 0===d?void 0:d.length)>0&&a.createElement(L.default,{withColumns:!1,className:u.sharesTable,columns:["User"],list:null===s||void 0===s||null===(r=s.shared_users)||void 0===r?void 0:r.map((function(e){var n=null===v||void 0===v?void 0:v.find((function(n){return n.id===e.id}));return(0,t.Z)({},"User","".concat(null===n||void 0===n?void 0:n.first_name," ").concat(null===n||void 0===n?void 0:n.last_name))}))})))))},Je=a.forwardRef((function(e,n){var o=e.begunModule,t=e.allModules,r=e.companyData,s=e.selectedComponent,c=e.companyUsersArray,v=e.companyPositionsArray,p=e.print,m=e.components,f=void 0===m?[]:m,_=e.bypassCustom,y=void 0!==_&&_,h=e.authenticatedUser,g=e.setIsOpen,b=void 0===g?function(){}:g,M=(0,a.useState)([]),E=(0,d.Z)(M,2),Z=E[0],C=E[1],S=function(){var e,n,t,i,d,u,v,p,m,f,_=null===o||void 0===o||null===(e=o.processModule)||void 0===e||null===(n=e.steps)||void 0===n||null===(t=n.find((function(e){return e.component_blueprints.filter((function(e){var n;return null===(n=e.selected_fields)||void 0===n?void 0:n.find((function(e){return"Template"===e.data_type_name}))})).length>0})))||void 0===t||null===(i=t.component_blueprints)||void 0===i||null===(d=i.find((function(e){var n;return(null===(n=e.selected_fields)||void 0===n?void 0:n.filter((function(e){return"Template"===e.data_type_name&&!0===e.visible})).length)>0})))||void 0===d||null===(u=d.selected_fields)||void 0===u?void 0:u.find((function(e){return"Template"===e.data_type_name})),y=null===o||void 0===o||null===(v=o.processModule)||void 0===v||null===(p=v.steps)||void 0===p?void 0:p.find((function(e){return e.component_blueprints.filter((function(e){var n,o;return(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.allowMultipleInputs)&&(null===(o=e.selected_fields)||void 0===o?void 0:o.find((function(e){return"Transaction List"===e.data_type_name})))})).length>0})),g=null===y||void 0===y||null===(m=y.component_blueprints)||void 0===m?void 0:m.find((function(e){var n;return(null===(n=e.selected_fields)||void 0===n?void 0:n.filter((function(e){return"Transaction List"===e.data_type_name&&!0===e.visible})).length)>0}));return a.createElement(ve.ij,{selectedComponent:s,templateName:null===_||void 0===_?void 0:_.field_name,component_blueprint:g,template:_,companyUsersArray:c,begunModule:o,companyData:r,authenticatedUser:h},g&&a.createElement(re,{key:0,field:null===(f=g.selected_fields)||void 0===f?void 0:f.find((function(e){return"Transaction List"===e.data_type_name})),selectedComponent:s,companyUsersArray:c,component:(0,l.Z)((0,l.Z)({},g),{},{created_date:s.created_date,values:[]})}))};return(0,a.useEffect)((function(){var d,m,_,g=[];if(Pe.Z(Te.Z("group"))(null!==(d=null===s||void 0===s?void 0:s.component_fields)&&void 0!==d?d:[]).map((function(e){g=[].concat((0,i.Z)(g),[{id:e.component_blueprint_id,selected_fields:Ue.Z(W.Z("group",e.group))(s.component_fields)}])})),(null===o||void 0===o||null===(m=o.processModule)||void 0===m||null===(_=m.completeSteps)||void 0===_?void 0:_.length)>0){var M,E,Z,w,x,k,I,D,N,P,T,O=[a.createElement("div",{key:0,style:{display:null!==e&&void 0!==e&&e.noHeader?"none":"",height:"auto",padding:"20px"}},p&&(null!==r&&void 0!==r&&r.logo?a.createElement("img",{className:u.imageLogoPrint,alt:"lg",onError:function(e){return e.target.src="https://i.quotev.com/b2gtjqawaaaa.jpg"},src:null!==(M=null===r||void 0===r?void 0:r.logo)&&void 0!==M?M:"https://i.quotev.com/b2gtjqawaaaa.jpg"}):a.createElement("div",{style:{padding:"20px"}},(0,oe.lh)("30px","var(--app-color-gray-dark)","bold"),a.createElement("div",{style:{fontSize:"12px",fontWeight:"normal",fontFamily:"var(--app-text-main-font)"}},null===r||void 0===r||null===(E=r.display_name)||void 0===E?void 0:E.toUpperCase())))),S()];if(o.processModule.completeSteps.map((function(e){e.component_blueprints.filter((function(e){var n,o;return 0==(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.asModuleList)||void 0==(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.asModuleList)})).map((function(n,d){var u,v,p,m,_,y,h=null!==(u=null===s||void 0===s||null===(v=s.component_fields)||void 0===v?void 0:v.filter((function(e){return e.component_blueprint_id===n.id})))&&void 0!==u?u:[];null===h||void 0===h||h.find((function(e){return!(""===e.value||void 0===e.value||null===e.value)}));(null===h||void 0===h?void 0:h.length)>0&&(null===(p=n.selected_fields)||void 0===p?void 0:p.filter((function(e){return 1==e.visible})).length)>0&&(O=null!==n.options?[].concat((0,i.Z)(O),[a.createElement("div",{key:O.length,style:{display:""}},a.createElement(de,{setIsOpen:b,step:e,isInherited:!1,nextButtonClicked:function(){},isMandatoryError:!1,stepId:e.id,blueprintIndex:d,setIsMandatoryError:function(){},component:(0,l.Z)((0,l.Z)({},n),{},{created_date:s.created_date,values:null!==(m=null===(_=g.find((function(e){return e.id===n.id})))||void 0===_?void 0:_.selected_fields)&&void 0!==m?m:[]}),begunModule:o,allModules:t,companyData:r,components:g,allComponents:f,companyUsersArray:c,selectedComponent:s}))]):[].concat((0,i.Z)(O),[a.createElement("div",{key:O.length},a.createElement(de,{setIsOpen:b,step:e,isInherited:!1,nextButtonClicked:function(){},isMandatoryError:!1,stepId:e.id,blueprintIndex:d,setIsMandatoryError:function(){},component:(0,l.Z)((0,l.Z)({},n),{},{created_date:s.created_date,values:null===(y=g.find((function(e){return e.id===n.id})))||void 0===y?void 0:y.selected_fields}),begunModule:o,allModules:t,companyData:r,components:g,allComponents:f,companyUsersArray:c,selectedComponent:s}))]))}))})),null!==o&&void 0!==o&&null!==(Z=o.processModule)&&void 0!==Z&&null!==(w=Z.completeSteps)&&void 0!==w&&w.find((function(e){var n;return(null===(n=e.component_blueprints)||void 0===n?void 0:n.filter((function(e){return e.selected_fields.filter((function(e){return"Template"===e.data_type_name})).length>0})).length)>0&&0==y})))C(a.createElement(ve.C6,{ref:n,print:p,begunModule:o,allModules:t,companyData:r,components:f,selectedComponent:s,companyUsersArray:c,companyPositionsArray:v,payments:a.createElement(ue,{component:s}),creator:a.createElement(ae,{component:s}),shares:(null===o||void 0===o||null===(x=o.processModule)||void 0===x||null===(k=x.module)||void 0===k||null===(I=k.options)||void 0===I?void 0:I.forSpecificUsers)&&a.createElement(Xe,{key:O.length+3,selectedComponent:s,companyUsersArray:c,companyPositionsArray:v})},O));else C([].concat((0,i.Z)(O),[a.createElement(ue,{component:s,key:O.length+1}),(null===o||void 0===o||null===(D=o.processModule)||void 0===D||null===(N=D.module)||void 0===N||null===(P=N.options)||void 0===P?void 0:P.forSpecificUsers)&&(null===h||void 0===h?void 0:h.id)===(null===(T=s.created_by)||void 0===T?void 0:T.id)&&a.createElement(Xe,{key:O.length+2,selectedComponent:s,companyUsersArray:c,companyPositionsArray:v}),a.createElement(ae,{component:s,key:O.length+3})]))}}),[s,p]),a.createElement("div",{ref:n,style:{padding:p?"50px 0px 50px 0px":"",alignSelf:"center",width:"100%"}},Z)})),He=(0,s.$j)((function(e){var n=e.flowReducer,o=n.begunModule,t=n.allModules,l=n.companyData,i=n.components,d=n.rememberPath,a=n.lastUpdates,u=n.companyUsersArray,r=n.products,s=n.transactions,c=n.companyProcesses,v=n.companyPositionsArray,p=n.cart,m=n.blueprints,f=n.allTasks,_=n.axiosAbort;return{begunModule:o,allModules:t,companyData:l,components:i,rememberPath:d,lastUpdates:a,companyUsersArray:u,products:r,transactions:s,companyProcesses:c,authenticatedUser:e.authReducer.authenticatedUser,companyPositionsArray:v,cart:p,blueprints:m,allTasks:f,axiosAbort:_}}),(function(e){return{onSetSelectedProcess:function(n){return e((0,_.Xu)(n))}}}))((function(n){var o,s,b,M,E,Z,C,S,w,x,k,I,D,N,P,T,O,q,U,Y,R,V,J,K,$,te,ie,de,ae,ue,re,se,ce,me,ye,he,ge,be,Me,Ee,Ve,Xe,He,Qe,Ke,$e,en,nn,on,tn,ln,dn,an,un,rn,sn,cn,vn,pn,mn,fn,_n,yn,hn,gn,bn,Mn,En,Zn,Cn,Sn,wn,xn,kn,In,Dn,Nn,Pn,Tn,On,qn,Un,An,Yn,Rn,Bn,Ln,jn,Fn,zn=n.navigateTo,Vn=n.begunModule,Wn=n.allModules,Gn=n.companyData,Xn=n.components,Jn=n.isEditing,Hn=n.lastUpdates,Qn=n.companyUsersArray,Kn=n.products,$n=n.onSetSelectedProcess,eo=n.children,no=n.authenticatedUser,oo=n.companyPositionsArray,to=n.cart,lo=n.blueprints,io=n.paymentID,ao=n.companyProcesses,uo=n.allTasks,ro=(n.axiosAbort,(0,a.useState)(1)),so=(0,d.Z)(ro,1)[0],co=(0,a.useState)(!1),vo=(0,d.Z)(co,2),po=vo[0],mo=vo[1],fo=(0,a.useState)(!1),_o=(0,d.Z)(fo,2),yo=_o[0],ho=_o[1],go=(0,a.useState)(""),bo=(0,d.Z)(go,2),Mo=bo[0],Eo=bo[1],Zo=(0,a.useState)(!1),Co=(0,d.Z)(Zo,2),So=Co[0],wo=Co[1],xo=(0,g.pQ)(),ko=(0,d.Z)(xo,2),Io=ko[0],Do=ko[1],No=(0,a.useState)(!1),Po=(0,d.Z)(No,2),To=Po[0],Oo=Po[1],qo=(0,a.useState)(1==(null===Vn||void 0===Vn||null===(o=Vn.processModule)||void 0===o?void 0:o.isUpdating)),Uo=(0,d.Z)(qo,2),Ao=Uo[0],Yo=Uo[1],Ro=(0,a.useState)(null!==(s=null===Vn||void 0===Vn||null===(b=Vn.processModule)||void 0===b?void 0:b.selectedComponent)&&void 0!==s?s:{}),Bo=(0,d.Z)(Ro,2),Lo=Bo[0],jo=Bo[1],Fo=(0,a.useState)(null===(M=null===Lo||void 0===Lo?void 0:Lo.is_complete)||void 0===M||M),zo=(0,d.Z)(Fo,2),Vo=zo[0],Wo=zo[1],Go=(0,a.useState)([]),Xo=(0,d.Z)(Go,2),Jo=Xo[0],Ho=Xo[1],Qo=(0,a.useState)([]),Ko=(0,d.Z)(Qo,2),$o=Ko[0],et=Ko[1],nt=(0,a.useState)(!1),ot=(0,d.Z)(nt,2),tt=ot[0],lt=ot[1],it=(0,a.useState)(!1),dt=(0,d.Z)(it,2),at=dt[0],ut=dt[1],rt=(0,a.useState)(!1),st=(0,d.Z)(rt,2),ct=st[0],vt=st[1],pt=(0,a.useState)(!1),mt=(0,d.Z)(pt,2),ft=mt[0],_t=mt[1],yt=(0,a.useState)(!1),ht=(0,d.Z)(yt,2),gt=ht[0],bt=ht[1],Mt=(0,a.useState)(!1),Et=(0,d.Z)(Mt,2),Zt=Et[0],Ct=Et[1],St=(0,a.useState)(!1),wt=(0,d.Z)(St,2),xt=wt[0],kt=wt[1],It=(0,a.useState)(!1),Dt=(0,d.Z)(It,2),Nt=Dt[0],Pt=Dt[1],Tt=(0,a.useState)(!1),Ot=(0,d.Z)(Tt,2),qt=Ot[0],Ut=Ot[1],At=(0,a.useState)(!1),Yt=(0,d.Z)(At,2),Rt=Yt[0],Bt=Yt[1],Lt=(0,a.useState)([]),jt=(0,d.Z)(Lt,2),Ft=jt[0],zt=jt[1],Vt=(0,a.useState)([]),Wt=(0,d.Z)(Vt,2),Gt=Wt[0],Xt=Wt[1],Jt=(0,a.useState)([]),Ht=(0,d.Z)(Jt,2),Qt=Ht[0],Kt=Ht[1],$t=(0,a.useState)({list:[],operator:"AND"}),el=(0,d.Z)($t,2),nl=el[0],ol=el[1],tl=(0,a.useState)([]),ll=(0,d.Z)(tl,2),il=ll[0],dl=ll[1],al=(0,a.useState)([]),ul=(0,d.Z)(al,2),rl=ul[0],sl=ul[1],cl=(0,a.useState)(!1),vl=(0,d.Z)(cl,2),pl=vl[0],ml=vl[1],fl=(0,a.useState)(!1),_l=(0,d.Z)(fl,2),yl=_l[0],hl=_l[1],gl=(0,a.useState)(!1),bl=(0,d.Z)(gl,2),Ml=bl[0],El=bl[1],Zl=(0,a.useState)(!1),Cl=(0,d.Z)(Zl,2),Sl=Cl[0],wl=Cl[1],xl=(0,a.useState)("false"!==localStorage.getItem("showAds")&&(null!==(E=Q()(+localStorage.getItem("showAdsDate")).format("DD MMM YYYY")!==Q()((0,H.now)()).format("DD MMM YYYY"))&&void 0!==E&&E)),kl=(0,d.Z)(xl,2),Il=kl[0],Dl=kl[1],Nl=(0,a.useState)(1),Pl=(0,d.Z)(Nl,2),Tl=(Pl[0],Pl[1],(0,le.s0)()),Ol=(null===Vn||void 0===Vn||null===(Z=Vn.processModule)||void 0===Z||null===(C=Z.steps)||void 0===C?void 0:C.length)>0?null===Vn||void 0===Vn||null===(S=Vn.processModule)||void 0===S?void 0:S.steps[Vn.processModule.stepIndex]:{},ql=(null===Vn||void 0===Vn||null===(w=Vn.processModule)||void 0===w||null===(x=w.steps)||void 0===x?void 0:x.length)>0?null===(k=Vn.processModule.steps[Vn.processModule.stepIndex])||void 0===k?void 0:k.pathway_steps:[],Ul=(null===Vn||void 0===Vn||null===(I=Vn.processModule)||void 0===I||null===(D=I.steps)||void 0===D?void 0:D.length)>0?null===(N=Vn.processModule.steps[Vn.processModule.stepIndex])||void 0===N?void 0:N.pathway_processes:[],Al=(0,a.useRef)();(0,a.useEffect)((function(){var e=Qn.filter((function(e){return 0==e.departments.length})).map((function(e){return{label:"".concat(e.first_name," ").concat(e.last_name),value:e.id,department:"General",user:e}}));Qn.filter((function(e){return e.departments.length>0})).filter((function(n){n.departments.filter((function(o){e=[].concat((0,i.Z)(e),[{label:"".concat(n.first_name," ").concat(n.last_name),value:n.id,department:null===o||void 0===o?void 0:o.name,user:n}])}))})),dl(e)}),[Qn]),(0,a.useEffect)((function(){var e,n;if((null===Vn||void 0===Vn||null===(e=Vn.processModule)||void 0===e||null===(n=e.steps)||void 0===n?void 0:n.length)>0&&!Rt){var o,t;ol({list:[],operator:"AND"}),void 0!==(null===zn||void 0===zn?void 0:zn.key)?zt(Wl(null===Vn||void 0===Vn||null===(o=Vn.processModule)||void 0===o||null===(t=o.module)||void 0===t?void 0:t.id,Xn,zn.value,zn.key)):zt(Xn.filter((function(e){var n,o;return e.module_id===(null===Vn||void 0===Vn||null===(n=Vn.processModule)||void 0===n||null===(o=n.module)||void 0===o?void 0:o.id)})));var l={id:""},i=[],d=[];Ie.Z((function(e){e.component_fields.map((function(n){var o,t;e.procedure_id!==(null===We||void 0===We?void 0:We.id)&&(null!==(o=l=ao.find((function(n){return n.id===e.procedure_id})))&&void 0!==o&&o.steps&&(i=ke.Z(X.Z("component_blueprints"),G.Z)(null===(t=l)||void 0===t?void 0:t.steps),d=ke.Z(X.Z("selected_fields"),G.Z)(i)));var a,u=d.find((function(e){return e.procedure_step_blueprint_field_id===n.procedure_step_blueprint_field_id}));u&&(n.data_type_name=u.data_type_name,n.data_type=u.data_type,n.field_name=u.field_name,n.options=u.options,n.component_blueprint_id=null===(a=i.find((function(e){return e.selected_fields.filter((function(e){return e.procedure_step_blueprint_field_id===n.procedure_step_blueprint_field_id})).length>0})))||void 0===a?void 0:a.id)}))}),Xn.filter((function(e){var n;return(null!==(n=null===e||void 0===e?void 0:e.component_fields)&&void 0!==n?n:[]).filter((function(e){return void 0===(null===e||void 0===e?void 0:e.field_name)})).length>0})))}}),[null===Vn||void 0===Vn||null===(P=Vn.processModule)||void 0===P?void 0:P.steps,Xn]),(0,a.useEffect)((function(){if(io){var e,n=null===(e=Lo.component_fields)||void 0===e?void 0:e.find((function(e){return"Payments"===e.data_type_name}));if(n){var o,t,l,i,d,a=null===(o=Lo.component_fields)||void 0===o?void 0:o.find((function(e){return e.field_name===n.options.paymentField}));if(a)ut(!0),(0,Re.e_)({user_id:no.id,id:Lo.id,total:null!==(t=+(null===a||void 0===a?void 0:a.value))&&void 0!==t?t:0,product:"CR-".concat(null!==(l=null===Lo||void 0===Lo?void 0:Lo.title)&&void 0!==l?l:null===Vn||void 0===Vn||null===(i=Vn.processModule)||void 0===i||null===(d=i.module)||void 0===d?void 0:d.name),notes:"E-Payment",quantity:1}).pipe((0,y.P)()).subscribe({next:function(){var e,n,o,t;ut(!1),Ut((null===Vn||void 0===Vn||null===(e=Vn.processModule)||void 0===e||null===(n=e.module)||void 0===n||null===(o=n.options)||void 0===o||null===(t=o.message)||void 0===t?void 0:t.length)>0)}})}}}),[io]),(0,a.useEffect)((function(){var e,n,o,t;(null===Vn||void 0===Vn||null===(e=Vn.processModule)||void 0===e||null===(n=e.steps)||void 0===n?void 0:n.length)>0&&!Rt&&(void 0!==zn.key||""!==zn.key)&&zt(Wl(null===Vn||void 0===Vn||null===(o=Vn.processModule)||void 0===o||null===(t=o.module)||void 0===t?void 0:t.id,Xn,zn.value))}),[zn]),(0,a.useEffect)((function(){var e,n,o,t,l;null!==Vn&&void 0!==Vn&&null!==(e=Vn.processModule)&&void 0!==e&&null!==(n=e.selectedComponent)&&void 0!==n&&n.id&&Lo.id!==(null===Vn||void 0===Vn||null===(o=Vn.processModule)||void 0===o||null===(t=o.selectedComponent)||void 0===t?void 0:t.id)&&jo(null===Vn||void 0===Vn||null===(l=Vn.processModule)||void 0===l?void 0:l.selectedComponent)}),[null===Vn||void 0===Vn||null===(T=Vn.processModule)||void 0===T?void 0:T.selectedComponent]),(0,a.useEffect)((function(){localStorage.getItem("transaction")&&!To&&localStorage.getItem("transaction")===Lo.id&&El(!0)}),[Lo,To]);var Yl=(0,a.useCallback)((function(){var e=!1;return Ol.component_blueprints.filter((function(e){var n,o;return null===e.options||(!1===(null===(n=e.options)||void 0===n?void 0:n.allowMultipleInputs)||void 0===(null===(o=e.options)||void 0===o?void 0:o.allowMultipleInputs))})).some((function(e){var n;return!0===(null===(n=e.selected_fields)||void 0===n?void 0:n.filter((function(e){return"Summary"!==e.data_type_name&&"Profile"!==e.data_type_name&&"ID"!==e.data_type_name&&"Info"!==e.data_type_name&&"Notes"!==e.data_type_name&&"URL"!==e.data_type_name&&"Emails"!==e.data_type_name&&"Template"!==e.data_type_name&&"Global"!==e.data_type_name&&"Chart"!==e.data_type_name&&"Value"!==e.data_type_name})).some((function(e){var n;return!0===e.mandatory&&!0===e.visible&&(!e.value||(null===e||void 0===e||null===(n=e.value)||void 0===n?void 0:n.length)<1)})))}))&&(console.log("with manadatory errors",Ol.component_blueprints),e=!0),!0===e?(ho(!0),!0):(Eo(""),ho(!1),!1)}),[Ol]),Rl=function(e){wo(!0),Yl()&&!1===Ao?Vl():Ll(e)},Bl=function(e){Io.components=[],Io.items=[],Io.currentStep={},Io.newStepComponents=[],Vn.processModule.steps.filter((function(e){return e.component_blueprints.filter((function(e){return e.selected_fields.filter((function(e){return e.value=void 0}))}))})),Vn.processModule.isUpdating=!1,f.h.dispatch((0,_.wM)({routes:{},pins:""})),Yo(!1),Oo(!1),wo(!0),Ll(e),Gn.start=!1,(0,m.aK)().pipe((0,y.P)()).subscribe({next:function(){}})},Ll=function(e){wo(!1),ho(!1),mo(!1);var n={};if(void 0===e){if(void 0===(n=Vn.processModule.steps[Vn.processModule.stepIndex+1]))return void f.h.dispatch((0,_.Xc)({show:!0,message:"Misconfigured next step, please contact your administrator",color:"red",bottom:!0}));Do({action:g._U.setCurrentStep,value:n}),f.h.dispatch((0,_.q4)((0,l.Z)((0,l.Z)({},Vn.processModule),{},{stepIndex:Vn.processModule.stepIndex+1})))}else{if(void 0==(n=Vn.processModule.steps.find((function(n){return n.id===e}))))n=Vn.processModule.steps[Vn.processModule.stepIndex+1],f.h.dispatch((0,_.q4)((0,l.Z)((0,l.Z)({},Vn.processModule),{},{stepIndex:Vn.processModule.stepIndex+1})));else{var o,t,d=Vn.processModule.steps[(null===(o=n)||void 0===o?void 0:o.rank)-1];if(void 0===d)return void f.h.dispatch((0,_.Xc)({show:!0,message:"Misconfigured next step, please contact your administrator",color:"red",bottom:!0}));f.h.dispatch((0,_.q4)((0,l.Z)((0,l.Z)({},Vn.processModule),{},{stepIndex:(null===(t=n)||void 0===t?void 0:t.rank)-1})))}Do({action:g._U.setCurrentStep,value:n})}var a=Io.newStepComponents.filter((function(e){return null===e.options||(void 0===e.allowMultipleInputs||!1===e.options.allowMultipleInputs)}));Do({action:g._U.setComponents,value:[].concat((0,i.Z)(Io.components.filter((function(e){return a.every((function(n){return n.id!==e.id}))}))),(0,i.Z)(De.Z((function(e){return e.selected_fields.filter((function(e){return""===e.value})).length>0}),a)))}),Do({action:g._U.setModuleNewStepComponents,value:n.component_blueprints.filter((function(e){return e.selected_fields.filter((function(e){return"Status"===e.data_type_name||"ID"===e.data_type_name||"Value"===e.data_type_name})).length>0}))})},jl=function(){Do({action:g._U.setModuleItems,value:[]}),Do({action:g._U.setComponents,value:[]}),Do({action:g._U.addModuleComponents,value:[]}),Do({action:g._U.setModuleNewStepComponents,value:[]}),Bl(Vn.processModule.steps[0].id)},Fl=function(){var e,n,o,t,d,a,u,r,s,c,p,m,h;if(Yl())return Eo("Fill up all the required fields"),window.scrollTo({top:0,behavior:"smooth"}),void mo(!1);var g,b,M=Io.newStepComponents,E=[].concat((0,i.Z)(Io.components.filter((function(e){return M.every((function(n){return n.id!==e.id}))}))),(0,i.Z)(De.Z((function(e){return e.selected_fields.filter((function(e){return""===e.value})).length>0}),M))),Z=[],C=[],S="",w="",x=!1,k=Ao?null===Lo||void 0===Lo?void 0:Lo.status:"None",I=[],D=null===Lo||void 0===Lo?void 0:Lo.status,N={},P=Ao?(null!==(e=Ne.Z(Math.max,X.Z("group",Pe.Z(Te.Z("group"))(null!==(n=null===Lo||void 0===Lo?void 0:Lo.component_fields)&&void 0!==n?n:[]))))&&void 0!==e?e:-1)+1:0;E.map((function(e,n){var o,t,d=n,a=null===(o=e.selected_fields.filter((function(e){return"Record"===e.data_type_name||"Filters"===e.data_type_name})))||void 0===o?void 0:o.find((function(e){return+(null===e||void 0===e?void 0:e.group)>=0}));a&&Ao?d=a.group:Ao&&(d=P,P++),e.selected_fields.filter((function(e){return("Record"===e.data_type_name||"Filters"===e.data_type_name)&&!0===e.visible})).map((function(e,n){var o;if(null!==e.value&&void 0!==e.value&&1!=(null===(o=e.options)||void 0===o?void 0:o.skip)){var t,a;C=[].concat((0,i.Z)(C),[(0,l.Z)((0,l.Z)({},e),{},{index:n,group:d})]),S=e.value,N[e.field_name]=e.value;var u=null===(t=Xn.find((function(n){return n.component_fields.filter((function(n){var o;return n.component_blueprint_id===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.component_id)&&(null===n||void 0===n?void 0:n.value)===S})).length>0})))||void 0===t||null===(a=t.component_fields.find((function(e){return"Email Recipient"===e.data_type_name})))||void 0===a?void 0:a.value;u&&(g=u)}}));var u=null===(t=e.selected_fields.filter((function(e){return!("Record"===e.data_type_name||"Filters"===e.data_type_name)})))||void 0===t?void 0:t.find((function(e){return+(null===e||void 0===e?void 0:e.group)>=0}));u&&Ao?d=u.group:Ao&&(d=P,P++),e.selected_fields.filter((function(e){return!("Record"===e.data_type_name||"Filters"===e.data_type_name||"Module"===e.data_type_name)})).map((function(e,n){var o,t,a,u;if(null!==e.value&&void 0!==e.value&&1!=(null===(o=e.options)||void 0===o?void 0:o.skip)){if(N[e.field_name]=e.value,"ID"===(null===e||void 0===e?void 0:e.data_type_name))null!==Vn&&void 0!==Vn&&null!==(a=Vn.processModule)&&void 0!==a&&a.isUpdating?C=[].concat((0,i.Z)(C),[(0,l.Z)((0,l.Z)({},e),{},{index:n,group:d})]):(C=[].concat((0,i.Z)(C),[(0,l.Z)((0,l.Z)({},e),{},{index:n,group:d,value:"".concat(null===e||void 0===e?void 0:e.options.id).concat(null===(null===Gn||void 0===Gn?void 0:Gn.misc_info)?1:null!==(u=null===Gn||void 0===Gn?void 0:Gn.misc_info[null===e||void 0===e?void 0:e.field_name])&&void 0!==u?u:1)})]),Z=[].concat((0,i.Z)(Z),["".concat(e.field_name)]));else if("Value"===(null===e||void 0===e?void 0:e.data_type_name)){var r;C=[].concat((0,i.Z)(C),[(0,l.Z)((0,l.Z)({},e),{},{index:n,value:null===e||void 0===e||null===(r=e.options)||void 0===r?void 0:r.value,group:d})])}else if("Email Recipient"===(null===e||void 0===e?void 0:e.data_type_name))C=[].concat((0,i.Z)(C),[(0,l.Z)((0,l.Z)({},e),{},{index:n,value:e.value.replace(/ /g,""),group:d})]);else if("Product Lookup"===e.data_type_name)C=(0,i.Z)(C);else if("Status"===e.data_type_name&&"Draft"===e.value&&1==Vo)x=!0,C=[].concat((0,i.Z)(C),[(0,l.Z)((0,l.Z)({},e),{},{index:n,value:"New",group:d})]),k="New";else if("Status"===e.data_type_name)C=[].concat((0,i.Z)(C),[(0,l.Z)((0,l.Z)({},e),{},{index:n,value:null===e||void 0===e?void 0:e.value,group:d})]),k=null===e||void 0===e?void 0:e.value;else if("Positions"===e.data_type_name&&!0===(null===e||void 0===e||null===(t=e.options)||void 0===t?void 0:t.share))C=[].concat((0,i.Z)(C),[(0,l.Z)((0,l.Z)({},e),{},{index:n,value:null===e||void 0===e?void 0:e.value,group:d})]),I=[null===e||void 0===e?void 0:e.value];else if("Formula"===e.data_type_name){var s,c=null!==Vn&&void 0!==Vn&&null!==(s=Vn.processModule)&&void 0!==s&&s.isUpdating?(0,oe.LV)(null===e||void 0===e?void 0:e.options,Lo.component_fields.filter((function(n){var o;return null===(o=e.options)||void 0===o?void 0:o.list.includes(n.field_name)})),E,Io.items):e.value;C=[].concat((0,i.Z)(C),[(0,l.Z)((0,l.Z)({},e),{},{index:n,value:c.toString(),group:d})])}else if("output"!==e.data_type){var v,p,m,f;if("People"===e.data_type_name){var _,y,h,M;if(!0===(null===(_=e.options)||void 0===_?void 0:_.email)){var S,D,P=null===(S=il.find((function(n){return n.label===(null===e||void 0===e?void 0:e.value)})))||void 0===S||null===(D=S.user)||void 0===D?void 0:D.email;w=P?w.concat(w.length>0?",".concat(P):P):w,e.email=void 0}if(!0===(null===(y=e.options)||void 0===y?void 0:y.assign))b=null===(h=il.find((function(n){return n.label===(null===e||void 0===e?void 0:e.value)})))||void 0===h||null===(M=h.user)||void 0===M?void 0:M.id,Ao&&(Lo.assigned_to={id:b})}"email"===(null===e||void 0===e||null===(v=e.options)||void 0===v?void 0:v.actionToPerform2)&&null!==e&&void 0!==e&&null!==(p=e.options)&&void 0!==p&&null!==(m=p.valueToMatch2)&&void 0!==m&&null!==(f=m.split(","))&&void 0!==f&&f.includes(null===e||void 0===e?void 0:e.value)&&g&&(x=!0,w=w.concat(w.length>0?",".concat(g):g)),C=[].concat((0,i.Z)(C),[(0,l.Z)((0,l.Z)({},e),{},{index:n,group:d})])}}else if("Status"===(null===e||void 0===e?void 0:e.data_type_name))1==Vo?(C=[].concat((0,i.Z)(C),[(0,l.Z)((0,l.Z)({},e),{},{index:n,value:"New",group:d})]),k="New"):(C=[].concat((0,i.Z)(C),[(0,l.Z)((0,l.Z)({},e),{},{index:n,value:"Draft",group:d})]),k="Draft"),N[e.field_name]=e.value;else if("Action Button"===(null===e||void 0===e?void 0:e.data_type_name)){var T,O,q;C=(0,i.Z)(C),N[e.field_name]=e.value,"status"===(null===e||void 0===e||null===(T=e.options)||void 0===T?void 0:T.action)?k=e.value:"user"!==(null===(O=e.options)||void 0===O?void 0:O.action)&&"creator"!==(null===(q=e.options)||void 0===q?void 0:q.action)||(Lo.assigned_to=null===e||void 0===e?void 0:e.value)}}))}));var T,O,q,U="";if((null===(o=Vn.processModule)||void 0===o||null===(t=o.module)||void 0===t||null===(d=t.options)||void 0===d||null===(a=d.title)||void 0===a?void 0:a.length)>0){var A,Y,R,B,L,j,F,z,V,W,G,J,H,K,$;if(null===(A=Vn.processModule)||void 0===A||null===(Y=A.module)||void 0===Y||null===(R=Y.options)||void 0===R||null===(B=R.title)||void 0===B||B.map((function(e){if("Info"!==e){var n,o,t,l,i=C.find((function(n){return n.field_name===e}));if("Date"===(null===i||void 0===i?void 0:i.data_type_name)||"Calendar"===(null===i||void 0===i?void 0:i.data_type_name))U=""===U?"".concat(Q()(null===i||void 0===i?void 0:i.value).format("DD MMMM YYYY")):"".concat(null!==(n=U)&&void 0!==n?n:"","  ").concat(Q()(null===i||void 0===i?void 0:i.value).format("DD MMMM YYYY"));else U=""===U?"".concat(null!==(o=null===i||void 0===i?void 0:i.value)&&void 0!==o?o:""):"".concat(null!==(t=U)&&void 0!==t?t:"","  ").concat(null!==(l=null===i||void 0===i?void 0:i.value)&&void 0!==l?l:"")}else{var d=Vn.processModule.steps.find((function(e){var n;return(null===(n=e.component_blueprints.filter((function(e){var n;return(null===(n=e.selected_fields.filter((function(e){return"Info"===e.data_type_name})))||void 0===n?void 0:n.length)>0})))||void 0===n?void 0:n.length)>0}));if(void 0!==d){var a,u,r,s,c,v,p,m,f,_=null===(a=d.component_blueprints)||void 0===a||null===(u=a.find((function(e){var n;return(null===(n=e.selected_fields.filter((function(e){return"Info"===e.data_type_name})))||void 0===n?void 0:n.length)>0})).selected_fields)||void 0===u?void 0:u.find((function(e){return"Info"===e.data_type_name})),y=Xn.find((function(e){var n;return(null===(n=e.component_fields.filter((function(e){var n;return e.component_blueprint_id===_.options.component_id&&(e.value===N[_.field_name]||e.value===N[null===(n=_.options)||void 0===n?void 0:n.key])})))||void 0===n?void 0:n.length)>0}));if(y)if((null===_||void 0===_||null===(r=_.options)||void 0===r||null===(s=r.list)||void 0===s?void 0:s.length)>0)U=""===U?"".concat(null!==(c=null===(v=y.component_fields.find((function(e){var n;return e.field_name===(null===_||void 0===_||null===(n=_.options)||void 0===n?void 0:n.list[0])})))||void 0===v?void 0:v.value)&&void 0!==c?c:""):"".concat(null!==(p=U)&&void 0!==p?p:"","  ").concat(null!==(m=null===(f=y.component_fields.find((function(e){var n;return e.field_name===(null===_||void 0===_||null===(n=_.options)||void 0===n?void 0:n.list[0])})))||void 0===f?void 0:f.value)&&void 0!==m?m:"")}}})),null!==(L=Vn.processModule)&&void 0!==L&&null!==(j=L.module)&&void 0!==j&&null!==(F=j.options)&&void 0!==F&&F.title.find((function(e){return"UUID"===e})))U="".concat(null===(G=Vn.processModule)||void 0===G||null===(J=G.module)||void 0===J?void 0:J.name," #").concat(Ao?Lo.id.replace(/\D/g,"").slice(-5):(0,oe.mR)().replace(/\D/g,"").slice(-5));if(null!==(z=Vn.processModule)&&void 0!==z&&null!==(V=z.module)&&void 0!==V&&null!==(W=V.options)&&void 0!==W&&W.title.find((function(e){return"Module Name"===e})))U=" ".concat(null===(H=Vn.processModule)||void 0===H||null===(K=H.module)||void 0===K?void 0:K.name," - ").concat(null!==($=U)&&void 0!==$?$:"")}else{var ee,ne;U="".concat(null===(ee=Vn.processModule)||void 0===ee||null===(ne=ee.module)||void 0===ne?void 0:ne.name," #").concat(Ao?Lo.id.replace(/\D/g,"").slice(-5):(0,oe.mR)().replace(/\D/g,"").slice(-5))}var te,le,ie,de,ae,ue,re,se,ce,ve,pe,me,fe,_e,ye,he,ge,be,Me,Ee,Ze,Ce={};if(!0===(null===(u=Vn.processModule)||void 0===u||null===(r=u.module)||void 0===r||null===(s=r.options)||void 0===s?void 0:s.emailOutputs)){var Se,we,xe,ke,Ie=Vn.processModule.steps.find((function(e){var n;return(null===(n=e.component_blueprints.filter((function(e){var n;return(null===(n=e.selected_fields.filter((function(e){return"Info"===e.data_type_name&&1==e.options.email})))||void 0===n?void 0:n.length)>0})))||void 0===n?void 0:n.length)>0}));if(void 0!==Ie){var Oe,qe,Ue=null===(Oe=Ie.component_blueprints)||void 0===Oe||null===(qe=Oe.find((function(e){var n;return(null===(n=e.selected_fields.filter((function(e){var n;return"Info"===e.data_type_name&&1==(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.email)})))||void 0===n?void 0:n.length)>0})).selected_fields)||void 0===qe?void 0:qe.find((function(e){var n;return"Info"===e.data_type_name&&!0===(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.email)})),Ae=Xn.find((function(e){var n;return(null===(n=e.component_fields.filter((function(e){return e.component_blueprint_id===Ue.options.component_id&&e.value===S})))||void 0===n?void 0:n.length)>0}));Ae&&(O=Ue.id,T=Ae.id)}if(void 0!==(Ie=Vn.processModule.steps.find((function(e){var n;return!0===e.is_end&&(null===(n=e.component_blueprints.filter((function(e){var n;return(null===(n=e.selected_fields.filter((function(e){return"Emails"===e.data_type_name})))||void 0===n?void 0:n.length)>0})))||void 0===n?void 0:n.length)>0}))))(null===(xe=Ie.component_blueprints)||void 0===xe?void 0:xe.find((function(e){var n;return(null===(n=e.selected_fields.filter((function(e){return"Emails"===e.data_type_name})))||void 0===n?void 0:n.length)>0}))).selected_fields.filter((function(e){return"Emails"===e.data_type_name})).filter((function(e){var n;C.find((function(n){return n.value===e.options.valueToMatch&&n.field_name===e.options.fieldToMatch}))&&(g&&(q=e,x=!0,!0===(null===(n=e.options)||void 0===n?void 0:n.copyEmailRecip)&&(w=w.concat(w.length>0?",".concat(g):g))))}));if(w=""===w?[]:null!==(Se=w.split(","))&&void 0!==Se?Se:[],(rl.length>0||w.length>0)&&(w=Ao?!0===x?[].concat((0,i.Z)(rl),(0,i.Z)(w)):(0,i.Z)(rl):[].concat((0,i.Z)(rl),(0,i.Z)(w))),w.length>0&&(Ce={emailTo:w}),O&&T&&(Ce=(0,l.Z)((0,l.Z)({},Ce),{},{info:O,target:T})),(null===(we=q)||void 0===we?void 0:we.id.length)>0)Ce=(0,l.Z)((0,l.Z)({},Ce),{},{template:null===(ke=q)||void 0===ke?void 0:ke.id})}if(!0===(null===(c=Vn.processModule)||void 0===c||null===(p=c.module)||void 0===p||null===(m=p.options)||void 0===m?void 0:m.rewards)&&D!==k){var Ye,je,Fe,ze,Ve,We,Ge=Vn.processModule.steps.find((function(e){var n;return(null===(n=e.component_blueprints.filter((function(e){var n;return(null===(n=e.selected_fields.filter((function(e){return"Rewards"===e.data_type_name})))||void 0===n?void 0:n.length)>0})))||void 0===n?void 0:n.length)>0}));if(void 0!==Ge)if((te=null===(Ye=Ge.component_blueprints)||void 0===Ye||null===(je=Ye.find((function(e){var n;return(null===(n=e.selected_fields.filter((function(e){return"Rewards"===e.data_type_name})))||void 0===n?void 0:n.length)>0})).selected_fields)||void 0===je?void 0:je.find((function(e){return"Rewards"===e.data_type_name}))).options.status===k)no.options.rewards=+(null!==(Fe=null===no||void 0===no||null===(ze=no.options)||void 0===ze?void 0:ze.rewards)&&void 0!==Fe?Fe:0)+ +(null===(Ve=te)||void 0===Ve||null===(We=Ve.options)||void 0===We?void 0:We.points)}(null===(h=C)||void 0===h?void 0:h.length)>0?(ut(!0),Ao?(Lo.options=Ce,Lo.status=k,null!==Io&&void 0!==Io&&Io.assigned_to&&(Lo.assigned_to={id:null===Io||void 0===Io?void 0:Io.assigned_to}),(0,v.KL)((0,l.Z)((0,l.Z)({},Lo),{},{selected_fields:(0,i.Z)(C),component_items:Io.items}),Lo.id,null===Lo||void 0===Lo||null===(le=Lo.shared_users)||void 0===le?void 0:le.map((function(e){return null===e||void 0===e?void 0:e.id})),U,Vo,(null===(ie=Vn.processModule)||void 0===ie||null===(de=ie.module)||void 0===de||null===(ae=de.options)||void 0===ae||null===(ue=ae.shares)||void 0===ue?void 0:ue.length)>0?[].concat((0,i.Z)(null!==(re=null===(se=Vn.processModule)||void 0===se||null===(ce=se.module)||void 0===ce||null===(ve=ce.options)||void 0===ve?void 0:ve.shares)&&void 0!==re?re:[]),(0,i.Z)(I)):[].concat((0,i.Z)(null!==(pe=null===Lo||void 0===Lo||null===(me=Lo.shared_positions)||void 0===me?void 0:me.map((function(e){return null===e||void 0===e?void 0:e.id})))&&void 0!==pe?pe:[]),(0,i.Z)(I))).subscribe({error:function(e){f.h.dispatch((0,_.Xc)({show:!0,message:"Errors found",color:"red"}))},next:function(e){var n,o,t,i,d,a;if(null!==(n=Vn.processModule)&&void 0!==n&&null!==(o=n.module)&&void 0!==o&&null!==(t=o.options)&&void 0!==t&&t.single)return localStorage.setItem(null===(d=Vn.processModule)||void 0===d?void 0:d.module.id,JSON.stringify(null===e||void 0===e?void 0:e.data)),void Ll(null===(a=Vn.processModule.steps[0])||void 0===a?void 0:a.id);var u=C.find((function(e){var n;return"People"===e.data_type_name&&!0===(null===(n=e.options)||void 0===n?void 0:n.calendar)}));if(u){var r,s,c,v=JSON.parse(null!==(r=null===u||void 0===u?void 0:u.value)&&void 0!==r?r:{task:0}),p=uo.find((function(e){return e.id===(null===v||void 0===v?void 0:v.task)}));if(p)(0,Le.xJ)((0,l.Z)((0,l.Z)({},p),{},{assignee_id:null===e||void 0===e||null===(s=e.data)||void 0===s||null===(c=s.created_by)||void 0===c?void 0:c.id}),null===p||void 0===p?void 0:p.id).pipe((0,y.P)()).subscribe({})}var m=C.find((function(e){return"Payments"===e.data_type_name})),h=C.find((function(e){var n;return e.field_name===(null===m||void 0===m||null===(n=m.options)||void 0===n?void 0:n.paymentField)}));if(!m||null!==e&&void 0!==e&&null!==(i=e.data.payments)&&void 0!==i&&i.stripe_id||"Cash"===(null===m||void 0===m?void 0:m.value)||"Wallet"===(null===m||void 0===m?void 0:m.value)||"Points"===(null===m||void 0===m?void 0:m.value))if(m){var g,b;if(h&&"Cash"!==(null===m||void 0===m?void 0:m.value)&&k===(null===(g=Gn.misc_info)||void 0===g?void 0:g.lock)&&no.id===(null===Lo||void 0===Lo||null===(b=Lo.assigned_to)||void 0===b?void 0:b.id)&&D!==k){var M,E,Z=+(null===h||void 0===h?void 0:h.value)-+(null===h||void 0===h?void 0:h.value)*+(null!==(M=null===Gn||void 0===Gn||null===(E=Gn.misc_info)||void 0===E?void 0:E.rate)&&void 0!==M?M:.2);(0,Re.e_)({user_id:no.id,id:(0,oe.mR)(),total:Z,product:"CR-".concat(U),notes:"Wallet",quantity:1}).pipe((0,y.P)()).subscribe({next:function(){var e;no.wallet=+(+(null!==(e=null===no||void 0===no?void 0:no.wallet)&&void 0!==e?e:0)+Z),jl()}})}else te?(0,Be.Vy)(no,null===no||void 0===no?void 0:no.options).pipe((0,y.P)()).subscribe({next:function(){jl()},error:function(){return f.h.dispatch((0,_.Xc)({show:!0,message:"Errors found",color:"red"}))}}):jl()}else jl();else Io.total=+(null===h||void 0===h?void 0:h.value),Io.plan=+(null===h||void 0===h?void 0:h.value),hl(!0),ut(!1)},complete:function(){ut(!1)}})):(0,v.LM)({id:E[0].id,selected_fields:(0,i.Z)(C),component_items:Io.items,options:Ce,status:k,assigned_to:null!==(fe=null===Io||void 0===Io?void 0:Io.assigned_to)&&void 0!==fe?fe:b},"",Vn.processModule.module_id,Jo,U,Vo,(null===(_e=Vn.processModule)||void 0===_e||null===(ye=_e.module)||void 0===ye||null===(he=ye.options)||void 0===he||null===(ge=he.shares)||void 0===ge?void 0:ge.length)>0?[].concat((0,i.Z)(null!==(be=null===(Me=Vn.processModule)||void 0===Me||null===(Ee=Me.module)||void 0===Ee||null===(Ze=Ee.options)||void 0===Ze?void 0:Ze.shares)&&void 0!==be?be:[]),(0,i.Z)(I)):[].concat((0,i.Z)($o),(0,i.Z)(I))).subscribe({next:function(e){var n,o,t,i,d;if(Io.id=null===e||void 0===e?void 0:e.id,null!==(n=Vn.processModule)&&void 0!==n&&null!==(o=n.module)&&void 0!==o&&null!==(t=o.options)&&void 0!==t&&t.single)return localStorage.setItem(null===(i=Vn.processModule)||void 0===i?void 0:i.module.id,JSON.stringify(e)),void Ll(null===(d=Vn.processModule.steps[0])||void 0===d?void 0:d.id);Z.length>0&&zl(Z),Vn.processModule.selectedComponent=e;var a=C.find((function(e){var n;return"People"===e.data_type_name&&!0===(null===(n=e.options)||void 0===n?void 0:n.calendar)}));if(a){var u,r,s=JSON.parse(null!==(u=null===a||void 0===a?void 0:a.value)&&void 0!==u?u:{task:0}),c=uo.find((function(e){return e.id===(null===s||void 0===s?void 0:s.task)}));if(c)(0,Le.xJ)((0,l.Z)((0,l.Z)({},c),{},{assignee_id:null===e||void 0===e||null===(r=e.created_by)||void 0===r?void 0:r.id}),null===c||void 0===c?void 0:c.id).pipe((0,y.P)()).subscribe({})}if(C.filter((function(e){return!("Cash"===(null===e||void 0===e?void 0:e.value)||"Wallet"===(null===e||void 0===e?void 0:e.value)||"Points"===(null===e||void 0===e?void 0:e.value))&&"Payments"===e.data_type_name})).length>0)ut(!1),hl(!0);else if(C.filter((function(e){return("Wallet"===(null===e||void 0===e?void 0:e.value)||"Points"===(null===e||void 0===e?void 0:e.value))&&"Payments"===e.data_type_name})).length>0){var v,p=C.find((function(e){return"Payments"===e.data_type_name}));(0,Re.e_)({user_id:no.id,id:(0,oe.mR)(),total:-Io.total,product:"DB-".concat(U),notes:null!==(v=null===p||void 0===p?void 0:p.value)&&void 0!==v?v:"Wallet",quantity:1}).pipe((0,y.P)()).subscribe({next:function(){var n,o;(0,Be.Vy)(no,(0,l.Z)((0,l.Z)({},null===no||void 0===no?void 0:no.options),{},{points:+(+(null!==(n=null===no||void 0===no||null===(o=no.options)||void 0===o?void 0:o.points)&&void 0!==n?n:0)-("Points"===(null===p||void 0===p?void 0:p.value)?+Io.total:0))})).pipe((0,y.P)()).subscribe({next:function(n){var o,t,l,i;no.options=n.options,Ut((null===Vn||void 0===Vn||null===(o=Vn.processModule)||void 0===o||null===(t=o.module)||void 0===t||null===(l=t.options)||void 0===l||null===(i=l.message)||void 0===i?void 0:i.length)>0&&1==e.is_complete),f.h.dispatch((0,_.RV)({})),jl()}})}})}else{var m,h,g,b;ut(!1),Ut((null===Vn||void 0===Vn||null===(m=Vn.processModule)||void 0===m||null===(h=m.module)||void 0===h||null===(g=h.options)||void 0===g||null===(b=g.message)||void 0===b?void 0:b.length)>0&&1==e.is_complete),f.h.dispatch((0,_.RV)({})),jl()}},error:function(e){var n,o,t,l;null!==e&&void 0!==e&&e.data&&(f.h.dispatch((0,_.Xc)({show:!0,message:"Errors found",color:"red"})),null!==Z&&zl(Z),Ut((null===Vn||void 0===Vn||null===(n=Vn.processModule)||void 0===n||null===(o=n.module)||void 0===o||null===(t=o.options)||void 0===t||null===(l=t.message)||void 0===l?void 0:l.length)>0&&1==(null===e||void 0===e?void 0:e.data.is_complete)),f.h.dispatch((0,_.RV)({})),jl())},complete:function(){ut(!1)}})):(f.h.dispatch((0,_.Xc)({show:!0,message:"There are no items to be saved",color:"red"})),window.scrollTo({top:0,behavior:"smooth"}))},zl=function(e){if((null===e||void 0===e?void 0:e.length)>0){var n,o=null!==(n=Gn.misc_info)&&void 0!==n?n:{};e.filter((function(e){var n;o[e]=+(null!==(n=o[e])&&void 0!==n?n:1)+1})),ut(!0),(0,m.x5)({misc_info:o}).pipe((0,y.P)()).subscribe({})}},Vl=function(){Eo("Fill up all the required fields"),window.scrollTo({top:0,behavior:"smooth"}),mo(!1)},Wl=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o=arguments.length>2?arguments[2]:void 0,t=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],i=n.filter((function(n){return n.module_id===e})).filter((function(e){var n,i;return l.length>0?l.includes(e.id):""===o?e:(null===(n=e.title)||void 0===n?void 0:n.toUpperCase().includes(null===o||void 0===o?void 0:o.toUpperCase()))||(null===(i=e.component_fields.filter((function(e){var n,l,i,d,a,u;return"Record"===e.data_type_name?null===(n=Xn.find((function(n){var o;return(null===(o=n.component_fields.filter((function(n){return n.field_name===e.options.output&&n.component_blueprint_id===e.options.component_id&&n.value===(null===e||void 0===e?void 0:e.value)})))||void 0===o?void 0:o.length)>0})))||void 0===n||null===(l=n.component_fields.find((function(n){var o;return null===(o=e.options)||void 0===o?void 0:o.names.includes(n.field_name)})).value)||void 0===l?void 0:l.toUpperCase().includes(null===o||void 0===o?void 0:o.toUpperCase()):void 0!==t?("date"===e.data_type?null===(i=Q()(new Date(null===e||void 0===e?void 0:e.value)))||void 0===i?void 0:i.format("DD MMM YYYY").includes(o):null===e||void 0===e||null===(d=e.value)||void 0===d?void 0:d.includes(o))&&e.field_name===t:"date"===e.data_type?null===(a=Q()(new Date(null===e||void 0===e?void 0:e.value)))||void 0===a?void 0:a.format("DD MMM YYYY").includes(o):null===e||void 0===e||null===(u=e.value)||void 0===u?void 0:u.toUpperCase().includes(null===o||void 0===o?void 0:o.toUpperCase())})))||void 0===i?void 0:i.length)>0}));return i},Gl=function(e){var n,o,d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ft,r=j.Z([Oe.Z(z.Z("created_date"))])(d.filter((function(e){return e.created_by.id===(null===no||void 0===no?void 0:no.id)?e:"Expired"!==e.status}))).map((function(n){var o,i,d,r,s,c,v,p,m,f,_,y,h,g,b,M,E,Z={};e.list.map((function(e){var o=n.component_fields.find((function(n){return n.field_name===e}));if(void 0!=o)if("People"===o.data_type_name)Z=(0,l.Z)((0,l.Z)({},Z),{},(0,t.Z)({},e,o.value));else if("Positions"===o.data_type_name){var i,d;Z=(0,l.Z)((0,l.Z)({},Z),{},(0,t.Z)({},e,null!==(i=null===(d=oo.find((function(e){return e.value===o.value})))||void 0===d?void 0:d.label)&&void 0!==i?i:""))}else if("Date"===o.data_type_name){var a,u=new Date(null===o||void 0===o||null===(a=o.value)||void 0===a?void 0:a.split(",")[0]);Z=(0,l.Z)((0,l.Z)({},Z),{},(0,t.Z)({},e,Q()(u).format("DD MMM YYYY")))}else if("Filters"===o.data_type_name){var r;Z=(0,l.Z)((0,l.Z)({},Z),{},(0,t.Z)({},e,A.tq?"".concat(null===o||void 0===o?void 0:o.value.slice(1,20)):"".concat(null===o||void 0===o?void 0:o.value))),null===(r=Xn.find((function(e){var n;return(null===(n=e.component_fields.filter((function(e){return e.field_name===o.options.output&&e.component_blueprint_id===o.options.component_id&&e.value===(null===o||void 0===o?void 0:o.value)})))||void 0===n?void 0:n.length)>0})))||void 0===r||r.component_fields.filter((function(e){Z=(0,l.Z)((0,l.Z)({},Z),{},(0,t.Z)({},e.field_name,A.tq?e.value.slice(1,20):e.value))}))}else if("Status"===o.data_type_name){var s;if(0==n.is_complete)Z=(0,l.Z)((0,l.Z)({},Z),{},(0,t.Z)({},e,"Draft"));else Z=(0,l.Z)((0,l.Z)({},Z),{},(0,t.Z)({},e,"".concat(null!==(s=null===n||void 0===n?void 0:n.status)&&void 0!==s?s:null===o||void 0===o?void 0:o.value)))}else{var c,v;Z=(0,l.Z)((0,l.Z)({},Z),{},(0,t.Z)({},e,A.tq?null===o||void 0===o||null===(c=o.value)||void 0===c?void 0:c.slice(1,20).split(",")[0]:null===o||void 0===o||null===(v=o.value)||void 0===v?void 0:v.split(",")[0]))}})),null===e||void 0===e||null===(o=e.com)||void 0===o||null===(i=o.selected_fields)||void 0===i||null===(d=i.filter((function(e){return"Details"===e.data_type_name})))||void 0===d||d.forEach((function(e){var n,o,t=Z[e.options.key],l=Xn.find((function(n){return n.module_id===e.options.module_id&&n.component_fields.find((function(n){return n.field_name===e.options.key&&n.value===t}))}));Z[e.field_name]=null===(n=e.options)||void 0===n||null===(o=n.fields.map((function(e){var n,o;return null===l||void 0===l||null===(n=l.component_fields)||void 0===n||null===(o=n.find((function(n){return n.field_name===e})))||void 0===o?void 0:o.value})))||void 0===o?void 0:o.join(" ")})),(null===n||void 0===n||null===(r=n.component_items)||void 0===r?void 0:r.length)>0&&(Z=(0,l.Z)((0,l.Z)({},Z),{},(0,t.Z)({},"Total Qty",n.component_items.reduce((function(e,n){return e+ +n.quantity}),0)))),(null===n||void 0===n||null===(s=n.shared_positions)||void 0===s?void 0:s.length)>0&&(Z=(0,l.Z)((0,l.Z)({},Z),{},{Shares:null===n||void 0===n?void 0:n.shared_positions.map((function(e){var n;return null===(n=oo.find((function(n){return n.value===e.id})))||void 0===n?void 0:n.label})).toString()}));var C=new Date(n.created_date);return Z=(0,l.Z)((0,l.Z)({},Z),{},(M={id:n.id},(0,t.Z)(M,"Created By","".concat(null===n||void 0===n||null===(c=n.created_by)||void 0===c?void 0:c.first_name," ").concat(null===n||void 0===n||null===(v=n.created_by)||void 0===v?void 0:v.last_name)),(0,t.Z)(M,"Created Date",Q()(C).format("DD MMM YYYY")),(0,t.Z)(M,"Assigned To","".concat(null!==(p=null===n||void 0===n||null===(m=n.assigned_to)||void 0===m?void 0:m.first_name)&&void 0!==p?p:""," ").concat(null!==(f=null===n||void 0===n||null===(_=n.assigned_to)||void 0===_?void 0:_.last_name)&&void 0!==f?f:"")),(0,t.Z)(M,"Status",a.createElement("div",{className:u.statusBox,style:{display:(null!==n&&void 0!==n&&n.status,""),backgroundColor:null!==(y=null===(h=oe.MO.find((function(e){return e.value===(null===n||void 0===n?void 0:n.status)})))||void 0===h?void 0:h.color)&&void 0!==y?y:null!==n&&void 0!==n&&n.status?oe.p:" brown",height:"26px"}},0==n.is_complete?"DRAFT":null!==(g=null===n||void 0===n||null===(b=n.status)||void 0===b?void 0:b.toUpperCase())&&void 0!==g?g:"NONE")),(0,t.Z)(M,"Title",n.title),(0,t.Z)(M,"items",n.component_items),(0,t.Z)(M,Vn.processModule.module.name,n.title),M)),null===e||void 0===e||null===(E=e.reports)||void 0===E||E.filter((function(e){return"Formula"===e.data_type_name})).map((function(e){var o=(0,oe.LV)(e.options,e.options.list.map((function(e){var n;return{value:null!==(n=Z[e])&&void 0!==n?n:0}})),Xn.filter((function(e){var n,o;return e.module_id===(null===Vn||void 0===Vn||null===(n=Vn.processModule)||void 0===n||null===(o=n.module)||void 0===o?void 0:o.id)})),null===n||void 0===n?void 0:n.component_items);Z=(0,l.Z)((0,l.Z)({},Z),{},(0,t.Z)({},e.field_name,"".concat(o)))})),Z}));null===e||void 0===e||null===(n=e.reports)||void 0===n||n.filter((function(e){return"List Filter"===e.data_type_name})).map((function(e){r=r.filter((function(n){var o,t;return n[null===(o=e.options)||void 0===o?void 0:o.field]===(null===(t=e.options)||void 0===t?void 0:t.value)}))}));var s=null===e||void 0===e||null===(o=e.reports)||void 0===o?void 0:o.find((function(e){return"Transaction List"===e.data_type_name}));if(s){var c=[];r.map((function(e){e.items.filter((function(n){var o=(0,l.Z)({},e);Object.keys(s.options.map).map((function(e){o[s.options.map[e]]=n[e]})),c=[].concat((0,i.Z)(c),[o])})),delete e.items})),r=c}return r},Xl=function(){var e,n,o;return a.createElement(pe.Z,{light:!0,style:{display:1!=(null===Vn||void 0===Vn||null===(e=Vn.processModule)||void 0===e||null===(n=e.module)||void 0===n||null===(o=n.options)||void 0===o?void 0:o.readOnly)||"manager"===no.user_type||"admin"===no.user_type?"":"none"},clicked:function(){Bl(),jo({})},icon:a.createElement("img",{src:r.IH})})},Jl=function(){return(0,i.Z)(new Set(Gt.filter((function(e){return void 0!==e.Status})).map((function(e){return e.Status})))).map((function(e){return{label:e,value:e}}))},Hl=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Gt,o=JSON.parse(JSON.stringify(n));e.filter((function(e,t){"status"===e.type?o="OR"===nl.operator?[].concat((0,i.Z)(0==t?[]:o),(0,i.Z)(n.filter((function(n){return n.Status===e.value})))):o.filter((function(n){return n.Status===e.value})):"user"===e.type?o="OR"===nl.operator?[].concat((0,i.Z)(0==t?[]:o),(0,i.Z)(n.filter((function(n){return n["Created By"]===e.label})))):o.filter((function(n){return n["Created By"]===e.label})):"fields"===e.type&&(o="OR"===nl.operator?[].concat((0,i.Z)(0==t?[]:o),(0,i.Z)(n.filter((function(n){return n[e.filter]===e.value})))):o.filter((function(n){return n[e.filter]===e.value})))})),Xt(o)},Ql=function(){var e;return a.createElement("div",{style:{display:""}},a.createElement(_e.Z,{value:null!==(e=nl.operator)&&void 0!==e?e:"AND",className:u.dropdownSelectOperation,items:[{label:"AND",value:"AND"},{label:"OR",value:"OR"}],onChange:function(e){ol((0,l.Z)((0,l.Z)({},nl),{},{operator:e}))}}))},Kl=function(){return a.createElement("div",{style:{alignSelf:"flex-end",display:Ol.component_blueprints.filter((function(e){var n;return 1==(null===(n=e.options)||void 0===n?void 0:n.asReport)})).length>0?"flex":"none"}},a.createElement(pe.Z,{light:!0,clicked:function(){Rt?(ol({list:[],operator:"AND"}),zt(Xn.filter((function(e){var n,o;return e.module_id===(null===Vn||void 0===Vn||null===(n=Vn.processModule)||void 0===n||null===(o=n.module)||void 0===o?void 0:o.id)})))):zt([]),Kt([]),Bt(!Rt)},style:Rt?{height:"36px"}:{}},Rt?a.createElement(ee.G,{icon:ne.g82,style:{width:"25px",height:"25px"}}):a.createElement("img",{src:r.aR})),1==Rt&&a.createElement(a.Fragment,null,a.createElement(_e.Z,{className:u.dropdownSelectReport,items:Ol.component_blueprints.filter((function(e){var n,o,t;return 1==(null===(n=e.options)||void 0===n?void 0:n.asReport)&&(void 0===(null===(o=e.options)||void 0===o?void 0:o.showOnly)||0==(null===(t=e.options)||void 0===t?void 0:t.showOnly.length)||no.positions.filter((function(n){var o,t;return null===(o=e.options)||void 0===o||null===(t=o.showOnly)||void 0===t?void 0:t.includes(n.id)})).length>0)})).map((function(e){return{label:null===e||void 0===e?void 0:e.name,value:e.id,blueprint:e}})),visible:!0,onChange:function(e){var n,o;zt(Xn.filter((function(e){var n,o;return e.module_id===(null===Vn||void 0===Vn||null===(n=Vn.processModule)||void 0===n||null===(o=n.module)||void 0===o?void 0:o.id)})));var t=[];j.Z([F.Z(z.Z("index"))])(Ol.component_blueprints.find((function(n){return n.id===e})).selected_fields.filter((function(e){return 1==e.visible}))).map((function(e){t=[].concat((0,i.Z)(t),[e.field_name]),"Info"===e.data_type_name?e.options.list.map((function(e){return t=[].concat((0,i.Z)(t),[e])})):"Transaction List"===e.data_type_name&&Object.values(e.options.map).map((function(e){return t=[].concat((0,i.Z)(t),[e])}))})),ol({list:(0,i.Z)(new Set(t)),title:null===(n=Ol.component_blueprints.find((function(n){return n.id===e})))||void 0===n?void 0:n.name,reports:j.Z([Oe.Z(z.Z("index"))])(Ol.component_blueprints.find((function(n){return n.id===e})).selected_fields).map((function(e){return{field_name:e.field_name,data_type_name:e.data_type_name,options:e.options}})),operator:"AND"}),Xt(Gl({list:(0,i.Z)(new Set(t)),title:null===(o=Ol.component_blueprints.find((function(n){return n.id===e})))||void 0===o?void 0:o.name,reports:j.Z([Oe.Z(z.Z("index"))])(Ol.component_blueprints.find((function(n){return n.id===e})).selected_fields).map((function(e){return{field_name:e.field_name,data_type_name:e.data_type_name,options:e.options}})),operator:"AND"},Xn.filter((function(e){var n,o;return e.module_id===(null===Vn||void 0===Vn||null===(n=Vn.processModule)||void 0===n||null===(o=n.module)||void 0===o?void 0:o.id)}))))},placeholder:"Reports"})))},$l=function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.keys(n[0]),l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null===(e=Vn.processModule.module)||void 0===e?void 0:e.name;return a.createElement(pe.Z,{light:!0,title:(null===nl||void 0===nl?void 0:nl.title)&&"Export as file",clicked:function(){var e,d,a,u=Rt?o:1==(null===(e=Vn.processModule.module)||void 0===e||null===(d=e.options)||void 0===d?void 0:d.isMaster)?[].concat((0,i.Z)(o),["Shares","Title"]):o,r=Ae.utils.book_new(),s=Ae.utils.json_to_sheet([]);Ae.utils.sheet_add_aoa(s,[u]),Ae.utils.sheet_add_json(s,n.map((function(e){return Object.assign.apply(Object,[{}].concat((0,i.Z)(u.map((function(n){return(0,t.Z)({},n,e[n])})))))})),{origin:"A2",skipHeader:!0}),Ae.utils.book_append_sheet(r,s,"".concat(null===(a=Vn.processModule.module)||void 0===a?void 0:a.name)),(0,Ae.writeFile)(r,"".concat(l).concat((0,H.now)(),".xlsx"))}},a.createElement("img",{src:r.so}))},ei=null===Lo||void 0===Lo||null===(O=Lo.component_fields)||void 0===O?void 0:O.find((function(e){return"Status"===e.data_type_name})),ni=[];null===Vn||void 0===Vn||null===(q=Vn.processModule)||void 0===q||null===(U=q.steps)||void 0===U||U.filter((function(e){return null===e||void 0===e?void 0:e.component_blueprints.filter((function(e){var n,o;return(null===(n=e.options)||void 0===n||null===(o=n.showOnly)||void 0===o?void 0:o.length)>0}))})).filter((function(e){e.component_blueprints.filter((function(e){var n,o;return(null===(n=e.options)||void 0===n||null===(o=n.showOnly)||void 0===o?void 0:o.length)>0})).filter((function(e){e.options.showOnly.filter((function(e){ni=[].concat((0,i.Z)(ni),[e])}))}))}));var oi=(null===Vn||void 0===Vn||null===(Y=Vn.processModule)||void 0===Y||null===(R=Y.steps)||void 0===R?void 0:R.length)>0?null===Vn||void 0===Vn||null===(V=Vn.processModule)||void 0===V||null===(J=V.steps)||void 0===J||null===(K=J.find((function(e){return(null===e||void 0===e?void 0:e.component_blueprints.filter((function(e){return e.selected_fields.filter((function(e){return"Freehand"===e.data_type_name})).length>0})).length)>0})))||void 0===K||null===($=K.component_blueprints.find((function(e){var n;return(null===(n=e.selected_fields.filter((function(e){return"Freehand"===e.data_type_name})))||void 0===n?void 0:n.length)>0})))||void 0===$||null===(te=$.options)||void 0===te?void 0:te.showOnly:void 0,ti=(null===Vn||void 0===Vn||null===(ie=Vn.processModule)||void 0===ie||null===(de=ie.steps)||void 0===de?void 0:de.length)>0?null===Vn||void 0===Vn||null===(ae=Vn.processModule)||void 0===ae||null===(ue=ae.steps)||void 0===ue||null===(re=ue.find((function(e){return(null===e||void 0===e?void 0:e.component_blueprints.filter((function(e){return e.selected_fields.filter((function(e){return"Action Button"===e.data_type_name})).length>0})).length)>0})))||void 0===re||null===(se=re.component_blueprints.find((function(e){var n;return(null===(n=e.selected_fields.filter((function(e){return"Action Button"===e.data_type_name})))||void 0===n?void 0:n.length)>0})))||void 0===se||null===(ce=se.options)||void 0===ce?void 0:ce.showOnly:void 0,li=!tt&&(void 0===(null===Lo||void 0===Lo?void 0:Lo.status)&&((null===(me=ni)||void 0===me?void 0:me.filter((function(e){return no.positions.map((function(e){return e.id})).indexOf(e)>-1})).length)>0||(null===oi||void 0===oi?void 0:oi.filter((function(e){return no.positions.map((function(e){return e.id})).indexOf(e)>-1})).length)>0)||(void 0===(null===Lo||void 0===Lo?void 0:Lo.status)||"New"===(null===Lo||void 0===Lo?void 0:Lo.status)||"Show"===(null===Lo||void 0===Lo?void 0:Lo.status)||"None"===(null===Lo||void 0===Lo?void 0:Lo.status)||null===(null===Lo||void 0===Lo?void 0:Lo.status))&&((null===Lo||void 0===Lo||null===(ye=Lo.created_by)||void 0===ye?void 0:ye.id)===(null===no||void 0===no?void 0:no.id)||(null===Lo||void 0===Lo||null===(he=Lo.assigned_to)||void 0===he?void 0:he.id)===(null===no||void 0===no?void 0:no.id))||void 0!==(null===Lo||void 0===Lo?void 0:Lo.status)&&!("Hide"===(null===Lo||void 0===Lo?void 0:Lo.status)||"Closed"===(null===Lo||void 0===Lo?void 0:Lo.status)||(null===Lo||void 0===Lo?void 0:Lo.status)===(null===Gn||void 0===Gn||null===(ge=Gn.misc_info)||void 0===ge?void 0:ge.lock)||"Cancelled"===(null===Lo||void 0===Lo?void 0:Lo.status))&&((null===(be=ni)||void 0===be?void 0:be.filter((function(e){return no.positions.map((function(e){return e.id})).indexOf(e)>-1})).length)>0||(null===oi||void 0===oi?void 0:oi.filter((function(e){return no.positions.map((function(e){return e.id})).indexOf(e)>-1})).length)>0)&&(1!=(null===Vn||void 0===Vn||null===(Me=Vn.processModule)||void 0===Me||null===(Ee=Me.module)||void 0===Ee||null===(Ve=Ee.options)||void 0===Ve?void 0:Ve.strict)||(null===Lo||void 0===Lo||null===(Xe=Lo.created_by)||void 0===Xe?void 0:Xe.id)!==(null===no||void 0===no?void 0:no.id))||(!1===(null===Lo||void 0===Lo?void 0:Lo.is_complete)||(null===ei||void 0===ei||null===(He=ei.options)||void 0===He?void 0:He.control))&&(null===Lo||void 0===Lo||null===(Qe=Lo.created_by)||void 0===Qe?void 0:Qe.id)===(null===no||void 0===no?void 0:no.id)),ii="trial_ended"===Gn.status||"inactive"===Gn.status?"none":0===(null===(Ke=Lo.component_fields)||void 0===Ke?void 0:Ke.filter((function(e){return"Action Button"===e.data_type_name&&"user"===e.options.action})).length)||0===(null===($e=Lo.component_fields)||void 0===$e?void 0:$e.filter((function(e){return"Action Button"===e.data_type_name&&"user"===e.options.action&&void 0===e.value})).length)&&((null===(en=Lo.component_fields)||void 0===en?void 0:en.filter((function(e){return"Action Button"===e.data_type_name&&"user"===e.options.action&&e.value===(null===no||void 0===no?void 0:no.id)})).length)>0||(null===Lo||void 0===Lo||null===(nn=Lo.assigned_to)||void 0===nn?void 0:nn.id)===(null===no||void 0===no?void 0:no.id))?"":"none",di=(A.tq?[]:[a.createElement(pe.Z,{key:0,title:!A.tq&&"Close",icon:A.tq&&a.createElement(ee.G,{icon:ne.QQm,style:{ccolor:"var(--app-color-gray)",width:"20px",height:"20px"}}),style:{width:"100%"},clicked:function(){!tt&&Oo(!1),lt(!1)}})]).concat(!tt&&(null===Lo||void 0===Lo||null===(on=Lo.component_fields)||void 0===on?void 0:on.length)>0&&(0,oe.cQ)(null===Lo||void 0===Lo?void 0:Lo.status,ti,Lo,no,Vn,Gn)?null===Vn||void 0===Vn||null===(tn=Vn.processModule)||void 0===tn||null===(ln=tn.steps)||void 0===ln||null===(dn=ln.find((function(e){return e.component_blueprints.filter((function(e){return e.selected_fields.filter((function(e){return"Action Button"===e.data_type_name})).length>0})).length>0})))||void 0===dn||null===(an=dn.component_blueprints.find((function(e){return e.selected_fields.filter((function(e){return"Action Button"===e.data_type_name})).length>0})))||void 0===an?void 0:an.selected_fields.filter((function(e){return"Action Button"===e.data_type_name})).map((function(e,n){var o,t,i,d;if("status"===e.options.action){var r,s,c,p,m,h,g,b,M,E=(null===Gn||void 0===Gn||null===(r=Gn.misc_info)||void 0===r||null===(s=r.status)||void 0===s?void 0:s.length)>0?null===Gn||void 0===Gn||null===(c=Gn.misc_info)||void 0===c?void 0:c.status:oe.MO;if((null===Gn||void 0===Gn||null===(p=Gn.misc_info)||void 0===p||null===(m=p.rules)||void 0===m?void 0:m.length)>0)null===Gn||void 0===Gn||null===(M=Gn.misc_info)||void 0===M||M.rules.filter((function(e){return"status"===e.type})).filter((function(n){n.valueCondition===e.value&&(E="0"===n.allow?E.filter((function(e){return n.values.includes(e.value)})):E.filter((function(e){return!n.values.includes(e.value)})))}));return a.createElement("div",{key:n,style:{width:"100%",display:"user"===e.options.action&&null!==(h=Lo.component_fields)&&void 0!==h&&null!==(g=h.find((function(n){return n.procedure_step_blueprint_field_id===e.procedure_step_blueprint_field_id})))&&void 0!==g&&g.value?"none":""}},a.createElement(_e.Z,{titleProps:{fontSize:"16px",color:"var(--app-color-gray-light)"},className:u.multiselectComponent,key:n,visible:e.visible,mandatory:e.mandatory,value:null!==(b=e.value)&&void 0!==b?b:"",items:E,error:e.errors,onChange:function(n){var o,t,i,d;if(null!==(o=Vn.processModule)&&void 0!==o&&null!==(t=o.module)&&void 0!==t&&null!==(i=t.options)&&void 0!==i&&i.credits&&(n===(null===(d=Gn.options)||void 0===d?void 0:d.lock)||"Closed"===n)){var a,u,r,s,c,p,m,h,g,b,M=null===Vn||void 0===Vn||null===(a=Vn.processModule)||void 0===a||null===(u=a.steps)||void 0===u||null===(r=u.find((function(e){return e.component_blueprints.filter((function(e){return e.selected_fields.filter((function(e){return"Payments"===e.data_type_name})).length>0})).length>0})))||void 0===r||null===(s=r.component_blueprints.find((function(e){return e.selected_fields.filter((function(e){return"Payments"===e.data_type_name})).length>0})))||void 0===s?void 0:s.selected_fields.find((function(e){return"Payments"===e.data_type_name})),E=null===(c=Io.newStepComponents.concat(Io.components).find((function(e){return e.selected_fields.filter((function(e){var n;return e.field_name===(null===M||void 0===M||null===(n=M.options)||void 0===n?void 0:n.paymentField)})).length>0})))||void 0===c||null===(p=c.selected_fields)||void 0===p?void 0:p.find((function(e){var n;return e.field_name===(null===M||void 0===M||null===(n=M.options)||void 0===n?void 0:n.paymentField)})),Z=0;if(null===(m=Vn.processModule)||void 0===m||null===(h=m.selectedComponent.payments)||void 0===h||!h.stripe_id)return Oo(!1),Vn.processModule.showDetail=!1,void f.h.dispatch((0,_.Xc)({show:!0,message:"Check support payment docs",color:"red",spinner:!1,bottom:!0}));if(!(+(null!==(g=null===E||void 0===E?void 0:E.value)&&void 0!==g?g:0)>0))return void f.h.dispatch((0,_.Xc)({show:!0,message:"No amount found",color:"red",spinner:!1,bottom:!0}));Z=+(null!==(b=null===E||void 0===E?void 0:E.value)&&void 0!==b?b:0),"Cash"!==(null===M||void 0===M?void 0:M.value)&&(0,Re.e_)({user_id:no.id,id:(0,oe.mR)(),total:Z,product:"CR-".concat(null===Lo||void 0===Lo?void 0:Lo.title),notes:"Wallet",quantity:1}).pipe((0,y.P)()).subscribe({next:function(){var e;no.wallet=+(+(null!==(e=null===no||void 0===no?void 0:no.wallet)&&void 0!==e?e:0)+Z)}})}Gn.start=!0,ut(!0),(0,v.C0)({component_id:Lo.id,index:0,group:99,value:n,procedure_step_blueprint_field_id:e.procedure_step_blueprint_field_id}).subscribe({next:function(e){ut(!1),Oo(!1),f.h.dispatch((0,_.q4)((0,l.Z)((0,l.Z)({},Vn.processModule),{},{showDetail:!1})))},error:function(){},complete:function(){}})},fieldIcon:e.icon,fieldLabel:e.field_name,placeholder:"Select status..."}))}return a.createElement(a.Fragment,null,a.createElement(pe.Z,{light:!0,title:e.field_name,loading:at,clicked:function(){if("user"===e.options.action||"creator"===e.options.action){var n,o,t,i="user"===e.options.action?no:Qn.find((function(e){var n;return e.id===(null===(n=Lo.created_by)||void 0===n?void 0:n.id)}));if(null!==(n=Vn.processModule)&&void 0!==n&&null!==(o=n.module)&&void 0!==o&&null!==(t=o.options)&&void 0!==t&&t.credits){var d,a,u,r,s,c,p,m,h,g=null===(d=Lo.component_fields)||void 0===d?void 0:d.find((function(e){return"Payments"===e.data_type_name&&(null===e||void 0===e?void 0:e.value)})),b=null===(a=Io.newStepComponents.concat(Io.components).find((function(e){return e.selected_fields.filter((function(e){var n;return e.field_name===(null===g||void 0===g||null===(n=g.options)||void 0===n?void 0:n.paymentField)})).length>0})))||void 0===a||null===(u=a.selected_fields)||void 0===u?void 0:u.find((function(e){var n;return e.field_name===(null===g||void 0===g||null===(n=g.options)||void 0===n?void 0:n.paymentField)}));if(!b)b=null===(h=Lo.component_fields)||void 0===h?void 0:h.find((function(e){var n;return e.field_name===(null===g||void 0===g||null===(n=g.options)||void 0===n?void 0:n.paymentField)}));var M=0;if(void 0===(null===i||void 0===i?void 0:i.wallet)||0===(null===i||void 0===i?void 0:i.wallet))return f.h.dispatch((0,_.Xc)({show:!0,message:"You need to setup funds for your wallet",color:"red",spinner:!1,bottom:!0})),Vn.processModule.showDetail=!1,void Oo(!1);if(+(null!==(r=null===(s=b)||void 0===s?void 0:s.value)&&void 0!==r?r:0)>0&&"Cash"===(null===g||void 0===g?void 0:g.value)){var E,Z,C,S;if((null!==(E=+(null===i||void 0===i?void 0:i.wallet))&&void 0!==E?E:0)<+(null===(Z=b)||void 0===Z?void 0:Z.value))return f.h.dispatch((0,_.Xc)({show:!0,message:"Insufficient funds in wallet",color:"red",spinner:!1,bottom:!0})),Vn.processModule.showDetail=!1,void Oo(!1);M=null!==(C=null===(S=b)||void 0===S?void 0:S.value)&&void 0!==C?C:0}else if(null===(c=Vn.processModule)||void 0===c||null===(p=c.selectedComponent)||void 0===p||null===(m=p.payments)||void 0===m||!m.stripe_id)return Oo(!1),Vn.processModule.showDetail=!1,void f.h.dispatch((0,_.Xc)({show:!0,message:"Check support payment docs",color:"red",spinner:!1,bottom:!0}));"Cash"===(null===g||void 0===g?void 0:g.value)&&(0,Re.e_)({user_id:no.id,id:(0,oe.mR)(),total:-M,product:"DB-".concat(null===Lo||void 0===Lo?void 0:Lo.title),notes:"Wallet",quantity:1}).pipe((0,y.P)()).subscribe({next:function(){var e;return i.wallet=+(+(null!==(e=null===i||void 0===i?void 0:i.wallet)&&void 0!==e?e:0)-M)},error:function(){return f.h.dispatch((0,_.Xc)({show:!0,message:"Purchase error encountered",color:"red",spinner:!1,bottom:!0}))}})}ut(!0),(0,v.C0)({component_id:Lo.id,index:0,group:99,value:i.id,procedure_step_blueprint_field_id:e.procedure_step_blueprint_field_id}).subscribe({next:function(e){(0,v.dn)(Lo.id,i.id).subscribe({next:function(e){ut(!1),Oo(!1),f.h.dispatch((0,_.q4)((0,l.Z)((0,l.Z)({},Vn.processModule),{},{showDetail:!1})))}})},error:function(){},complete:function(){}})}else"status"===e.options.action||"date"===e.options.action||e.options.action,ut(!1)},style:{backgroundColor:"green",color:"white",width:"100%",display:"user"===e.options.action&&null!==(o=Lo.component_fields)&&void 0!==o&&null!==(t=o.find((function(n){return n.procedure_step_blueprint_field_id===e.procedure_step_blueprint_field_id})))&&void 0!==t&&t.value?"none":""}}),a.createElement(pe.Z,{title:"Decline",light:!0,loading:at,clicked:function(){var e,n;Yo(!0),ut(!0);var o=Lo.component_fields.find((function(e){var n;return"People"===e.data_type_name&&!0===(null===(n=e.options)||void 0===n?void 0:n.calendar)}));(0,v.KL)((0,l.Z)((0,l.Z)({},Lo),{},{selected_fields:o?Lo.component_fields.filter((function(e){return e.id!==o.id})):Lo.component_fields,assigned_to:{id:""}}),Lo.id,null===(e=Lo.shared_users)||void 0===e?void 0:e.map((function(e){return null===e||void 0===e?void 0:e.id})),Lo.title,Lo.is_complete,null===(n=Lo.shared_positions)||void 0===n?void 0:n.map((function(e){return null===e||void 0===e?void 0:e.id}))).subscribe({error:function(e){f.h.dispatch((0,_.Xc)({show:!0,message:"Errors found",color:"red"}))},next:function(e){f.h.dispatch((0,_.aT)(Lo.id)),ut(!1),Oo(!1),f.h.dispatch((0,_.q4)((0,l.Z)((0,l.Z)({},Vn.processModule),{},{showDetail:!1})))}})},style:{backgroundColor:"red",color:"white",width:"100%",display:"user"===e.options.action&&null!==(i=Lo.component_fields)&&void 0!==i&&null!==(d=i.find((function(n){return n.procedure_step_blueprint_field_id===e.procedure_step_blueprint_field_id})))&&void 0!==d&&d.value?"none":""}}))})):[]).concat(tt?[]:[a.createElement(pe.Z,{light:!A.tq,key:3,title:!A.tq&&"Print",icon:A.tq&&a.createElement(ee.G,{icon:ne.wf8,style:{width:"20px",height:"20px"}}),style:{width:"100%",backgroundColor:A.tq?"green":"lightgray",display:A.tq?"none":""},clicked:function(){lt(!0)}})]).concat(tt?[a.createElement(fe(),{key:4,trigger:function(){return a.createElement("button",{style:{width:"100%",display:A.tq?"none":""},className:u.singleButton},a.createElement(ee.G,{icon:ne.wf8}))},content:function(){return Al.current}})]:[]).concat(li&&!ii?[a.createElement(pe.Z,{light:!A.tq,key:5,title:!A.tq&&"Edit",icon:A.tq&&a.createElement(ee.G,{icon:ne.Xcf,style:{width:"20px",height:"20px"}}),style:{backgroundColor:A.tq?"var(--app-color-blue)":"lightgray",width:"100%"},clicked:function(){var e,n,o,t,l,d;Oo(!1),Yo(!0),Vn.processModule.isUpdating=!0,(null===Vn||void 0===Vn||null===(e=Vn.processModule)||void 0===e||null===(n=e.steps)||void 0===n?void 0:n.length)>0&&(null===Vn||void 0===Vn||null===(o=Vn.processModule)||void 0===o||null===(t=o.steps)||void 0===t||t.filter((function(e){var n;return null===e||void 0===e||null===(n=e.component_blueprints)||void 0===n?void 0:n.filter((function(e){return e.selected_fields.filter((function(e){return e.value=void 0}))}))})));var a=[];Pe.Z(Te.Z("group"))(null!==(l=null===Lo||void 0===Lo?void 0:Lo.component_fields)&&void 0!==l?l:[]).map((function(e){a=[].concat((0,i.Z)(a),[{id:e.component_blueprint_id,temp_id:e.id,selected_fields:Ue.Z(W.Z("group",e.group))(Lo.component_fields)}])})),Vn.processModule.steps.filter((function(e){e.component_blueprints.filter((function(e){var n,o,t,l,i,d;return(0==(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.asDashboard)||!(null!==e&&void 0!==e&&null!==(o=e.options)&&void 0!==o&&o.asDashboard))&&(0==(null===e||void 0===e||null===(t=e.options)||void 0===t?void 0:t.asReport)||!(null!==e&&void 0!==e&&null!==(l=e.options)&&void 0!==l&&l.asReport))&&(0==(null===e||void 0===e||null===(i=e.options)||void 0===i?void 0:i.asModuleList)||!(null!==e&&void 0!==e&&null!==(d=e.options)&&void 0!==d&&d.asModuleList))})).filter((function(e){e.selected_fields.filter((function(e){var n,o=null===(n=Lo.component_fields)||void 0===n?void 0:n.find((function(n){return n.field_name===e.field_name}));if(void 0!=o)e.value=o.value,e.group=o.group;else if("Record"===e.data_type_name){var t,l=null===(t=Lo.component_fields)||void 0===t?void 0:t.find((function(n){return n.field_name===e.options.name}));void 0!=l&&(e.value=l.value,e.value=l.group)}}))}))})),Io.components=a,Io.items=JSON.parse(JSON.stringify(null!==(d=null===Lo||void 0===Lo?void 0:Lo.component_items)&&void 0!==d?d:[])),Io.newStepComponents=[],Gn.start=!0,Ll()}})]:[]).concat(!li||null===Vn||void 0===Vn||null===(un=Vn.processModule)||void 0===un||null===(rn=un.module)||void 0===rn||null===(sn=rn.options)||void 0===sn||!sn.canCancel||"New"!==Lo.status||null!==(cn=Lo.assigned_to)&&void 0!==cn&&cn.id?[]:[a.createElement(pe.Z,{key:6,title:"Cancel",style:{backgroundColor:"red",color:"white",width:"100%"},clear:!0,clicked:function(){(0,v.tE)(null===Lo||void 0===Lo?void 0:Lo.id,"Cancelled").pipe((0,y.P)()).subscribe({next:function(e){}})}})]).concat(tt||null===Vn||void 0===Vn||null===(vn=Vn.processModule)||void 0===vn||null===(pn=vn.module)||void 0===pn||null===(mn=pn.options)||void 0===mn||!mn.canCancel||"New"!==Lo.status&&"Unassigned"!==Lo.status||null!==(fn=Lo.assigned_to)&&void 0!==fn&&fn.id?[]:[a.createElement(pe.Z,{key:7,loading:at,title:"Cancel Transaction",style:{backgroundColor:"red",color:"white",width:"100%"},clear:!0,clicked:function(){ut(!0),(0,v.tE)(null===Lo||void 0===Lo?void 0:Lo.id,"Cancelled").pipe((0,y.P)()).subscribe({next:function(e){var n;if(ut(!1),null!==e&&void 0!==e&&null!==(n=e.data.payments)&&void 0!==n&&n.stripe_id){var o,t=Math.abs(+(null===e||void 0===e||null===(o=e.data.payments)||void 0===o?void 0:o.stripe_price));(0,Re.e_)({user_id:no.id,id:(0,oe.mR)(),total:t,product:"RF-".concat(Lo.title),notes:"Wallet",quantity:1}).pipe((0,y.P)()).subscribe({next:function(){var e;no.wallet=+(+(null!==(e=null===no||void 0===no?void 0:no.wallet)&&void 0!==e?e:0)+t),ut(!1),Oo(!1)}})}else ut(!1),Oo(!1),lt(!1)}})}})]).concat(tt||!0!==(null===(_n=Vn.processModule.module)||void 0===_n?void 0:_n.options.copyOutputs)||(null===Lo||void 0===Lo||null===(yn=Lo.created_by)||void 0===yn?void 0:yn.id)!==no.id?[]:[a.createElement(pe.Z,{key:8,light:!A.tq,title:!A.tq&&"Copy",icon:A.tq&&a.createElement(ee.G,{icon:ne.kZ_,style:{width:"20px",height:"20px"}}),style:{width:"100%",backgroundColor:A.tq?"orange":"lightgray",display:A.tq?"none":""},clicked:function(){bt(!0)}})]).concat((null===Lo||void 0===Lo||null===(hn=Lo.created_by)||void 0===hn?void 0:hn.id)===no.id&&(null===Lo||void 0===Lo||null===(gn=Lo.component_items)||void 0===gn?void 0:gn.length)>0&&!A.tq?[function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.keys(n[0]),l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null===(e=Vn.processModule.module)||void 0===e?void 0:e.name;return a.createElement(pe.Z,{light:!A.tq,title:!A.tq&&"Export",icon:A.tq&&a.createElement("img",{src:r.so}),style:{width:"100%",backgroundColor:"lightgray"},clicked:function(){var e,d,a,u=null===Vn||void 0===Vn||null===(e=Vn.processModule)||void 0===e||null===(d=e.steps)||void 0===d?void 0:d.find((function(e){return e.component_blueprints.filter((function(e){var n,o;return(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.allowMultipleInputs)&&(null===(o=e.selected_fields)||void 0===o?void 0:o.find((function(e){return"Transaction List"===e.data_type_name})))})).length>0})),r=null===u||void 0===u||null===(a=u.component_blueprints)||void 0===a?void 0:a.find((function(e){var n;return(null===(n=e.selected_fields)||void 0===n?void 0:n.filter((function(e){return"Transaction List"===e.data_type_name&&!0===e.visible})).length)>0}));if(r){var s,c,v,p,m=null===Vn||void 0===Vn||null===(s=Vn.processModule)||void 0===s||null===(c=s.steps)||void 0===c||null===(v=c.find((function(e){return e.component_blueprints.filter((function(e){var n;return null===(n=e.selected_fields)||void 0===n?void 0:n.find((function(e){return"Template"===e.data_type_name}))})).length>0})))||void 0===v||null===(p=v.component_blueprints)||void 0===p?void 0:p.find((function(e){var n;return(null===(n=e.selected_fields)||void 0===n?void 0:n.filter((function(e){return"Template"===e.data_type_name&&!0===e.visible})).length)>0}));(0,ve._G)(Lo,r,m,o,n,Vn,l)}else{var f,_=o,y=Ae.utils.book_new(),h=Ae.utils.json_to_sheet([]);Ae.utils.sheet_add_json(h,n.map((function(e){return Object.assign.apply(Object,[{}].concat((0,i.Z)(_.map((function(n){return(0,t.Z)({},n,e[n])})))))})),{origin:"A2",skipHeader:!0}),Ae.utils.book_append_sheet(y,h,"".concat(null===(f=Vn.processModule.module)||void 0===f?void 0:f.name)),(0,Ae.writeFile)(y,"".concat(l).concat((0,H.now)(),".xlsx"))}}})}(Lo.component_items,["item_code","quantity","value","alt_value"])]:[]).concat(tt||!0!==(null===no||void 0===no?void 0:no.is_admin)||A.tq||"Closed"===(null===Lo||void 0===Lo?void 0:Lo.status)?[]:[a.createElement(pe.Z,{key:11,icon:A.tq&&a.createElement(ee.G,{icon:ne.$aW,style:{width:"20px",height:"20px"}}),title:!A.tq&&"Delete",style:{width:"100%",backgroundColor:"#F71534"},clicked:function(){var e,n,o;if(!0===(null===Vn||void 0===Vn||null===(e=Vn.processModule)||void 0===e||null===(n=e.module)||void 0===n||null===(o=n.options)||void 0===o?void 0:o.isMaster)){var t=Xn.filter((function(e){return e.module_id!==Lo.module_id})).filter((function(e){return-1!=Wn.filter((function(e){var n;return!0===(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.isMaster)})).map((function(e){return e.id})).indexOf(e.module_id)})),l=Xn.filter((function(e){return-1!=Wn.filter((function(e){var n;return 1!=(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.isMaster)})).map((function(e){return e.id})).indexOf(e.module_id)})),i=t.filter((function(e){return e.component_fields.filter((function(e){return-1!=Lo.component_fields.map((function(e){return e.value})).indexOf(e.value)})).length>0})).length>0||l.filter((function(e){return e.component_items.filter((function(e){return-1!=Lo.component_fields.map((function(e){return e.value})).indexOf(e.item_code)})).length>0})).length>0||l.filter((function(e){return e.component_fields.filter((function(e){return"output"!==e.data_type&&-1!=Lo.component_fields.map((function(e){return e.value})).indexOf(e.value)})).length>0})).length>0;kt(i),_t(!i)}else _t(!0)}})]);return a.createElement("div",{className:u.processStepHost},a.createElement("div",{className:u.centeredCardMargin,"app-variant-is-mobile":A.tq?"true":"false"},1==(null===Ol||void 0===Ol?void 0:Ol.rank)&&a.createElement(Ze,{title:null===Vn||void 0===Vn||null===(bn=Vn.processModule)||void 0===bn||null===(Mn=bn.module)||void 0===Mn?void 0:Mn.name,subtitle:A.tq?"":null===Vn||void 0===Vn||null===(En=Vn.processModule)||void 0===En?void 0:En.description,customStyle:{width:A.tq?"100%":"94%",minWidth:A.tq?"100px":"94%"},cardClicked:function(){$n(null===Vn||void 0===Vn?void 0:Vn.processModule),vt(!ct),ct||(0,p.zJ)(null===Vn||void 0===Vn?void 0:Vn.processModule.id).pipe((0,y.P)()).subscribe({next:function(e){f.h.dispatch((0,_.Xu)(e)),f.h.dispatch((0,_.an)([].concat((0,i.Z)(ao.filter((function(n){return n.id!==e.id}))),[e]),1)),(0,v.d7)(oe.KI,oe.RI).pipe((0,y.P)()).subscribe({})}})}})),ct&&1==(null===Ol||void 0===Ol?void 0:Ol.rank)&&a.createElement("div",{className:u.centeredCardMargin,"app-variant-is-mobile":A.tq?"true":"false"},a.createElement(Ze,{description:"Steps:",customStyle:{width:A.tq?"100%":"94%",minWidth:A.tq?"100px":"94%"}},a.createElement(Se.FZ,null,a.createElement(Ce.Z,null)))),eo,a.createElement("div",{className:u.centeredCardMargin,"app-variant-is-mobile":A.tq?"true":"false"},1===so&&void 0===(null===Ol||void 0===Ol?void 0:Ol.component_blueprints)?a.createElement("div",{className:u.centeredSpinner},a.createElement(c.$j,{size:80,type:"ThreeDots"})):(null===Ol||void 0===Ol||null===(Zn=Ol.component_blueprints)||void 0===Zn?void 0:Zn.filter((function(e){var n;return 1==(null===(n=e.options)||void 0===n?void 0:n.asModuleList)})).length)>0?null===Ol||void 0===Ol||null===(Cn=Ol.component_blueprints)||void 0===Cn?void 0:Cn.filter((function(e){var n,o,t;return 1==e.options.asModuleList&&(no.positions.filter((function(n){var o,t;return null===(o=e.options)||void 0===o||null===(t=o.showOnly)||void 0===t?void 0:t.includes(n.id)})).length>0||0==(null===(n=e.options)||void 0===n||null===(o=n.showOnly)||void 0===o?void 0:o.length)||void 0===(null===(t=e.options)||void 0===t?void 0:t.showOnly))})).map((function(e,n){var o;return a.createElement(a.Fragment,{key:n},a.createElement(L.default,{className:A.tq?u.listContainerMob:u.listContainer,isReport:Rt,title:Rt?"Reports":null===Ol||void 0===Ol?void 0:Ol.name,columns:(null===(o=Xn.filter((function(e){var n,o;return e.module_id===(null===Vn||void 0===Vn||null===(n=Vn.processModule)||void 0===n||null===(o=n.module)||void 0===o?void 0:o.id)})))||void 0===o?void 0:o.filter((function(e){var n;return 0===(null===(n=e.component_fields)||void 0===n?void 0:n.length)})).length)>0||A.tq?[Vn.processModule.module.name]:(0,i.Z)(new Set(Rt?nl.list:j.Z([F.Z(z.Z("index"))])(e.selected_fields.filter((function(e){return 1==e.visible}))).map((function(e){var n;return"Info"===e.data_type_name?null===(n=e.options)||void 0===n?void 0:n.list:e.field_name})).flat())).slice(0,A.tq?2:18),list:Rt?Gt:Gl({com:e,list:e.selected_fields.filter((function(e){return"Info"===e.data_type_name})).map((function(e){var n,o;return null!==(n=null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.key)&&void 0!==n?n:e.field_name})).concat(e.selected_fields.filter((function(e){return 1==e.visible})).map((function(e){return e.field_name})))}),addClicked:function(){Bl(),jo({})},onListItemClick:function(e){var n,o;if(!Rt){var t,l,d,a,u=Xn.find((function(n){return n.id===e.id}));if(0===(null===(n=u.component_fields)||void 0===n?void 0:n.length))return ut(!0),void(0,v.r6)(u.id).pipe((0,y.P)()).subscribe({next:function(e){jo(e),Wo(e.is_complete),Oo(!0),lt(!1),ut(!1)},error:function(){}});if(jo(u),Wo(u.is_complete),lt(!1),null!==u&&void 0!==u&&null!==(o=u.assigned_to)&&void 0!==o&&o.id&&!Qn.find((function(e){var n;return e.id===(null===u||void 0===u||null===(n=u.assigned_to)||void 0===n?void 0:n.id)})))(0,Be.VG)(Qn.find((function(e){var n;return e.id===(null===(n=u.created_by)||void 0===n?void 0:n.id)}))?[null===u||void 0===u||null===(t=u.assigned_to)||void 0===t?void 0:t.id]:[null===u||void 0===u||null===(l=u.assigned_to)||void 0===l?void 0:l.id,null===u||void 0===u||null===(d=u.created_by)||void 0===d?void 0:d.id]).pipe((0,y.P)()).subscribe({next:function(e){f.h.dispatch((0,_.NY)(Qn.concat(e))),Oo(!0)}});else if(Vn.processModule.user_id!==no.id&&null!==(a=Vn.processModule.module.options)&&void 0!==a&&a.skipDetail){var r,s,c,p,m,h;Oo(!1),Yo(!0),Vn.processModule.isUpdating=!0,(null===Vn||void 0===Vn||null===(r=Vn.processModule)||void 0===r||null===(s=r.steps)||void 0===s?void 0:s.length)>0&&(null===Vn||void 0===Vn||null===(c=Vn.processModule)||void 0===c||null===(p=c.steps)||void 0===p||p.filter((function(e){var n;return null===e||void 0===e||null===(n=e.component_blueprints)||void 0===n?void 0:n.filter((function(e){return e.selected_fields.filter((function(e){return e.value=void 0}))}))})));var g=[];Pe.Z(Te.Z("group"))(null!==(m=null===u||void 0===u?void 0:u.component_fields)&&void 0!==m?m:[]).map((function(e){g=[].concat((0,i.Z)(g),[{id:e.component_blueprint_id,temp_id:e.id,selected_fields:Ue.Z(W.Z("group",e.group))(u.component_fields)}])})),Vn.processModule.steps.filter((function(e){e.component_blueprints.filter((function(e){var n,o,t,l,i,d;return(0==(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.asDashboard)||!(null!==e&&void 0!==e&&null!==(o=e.options)&&void 0!==o&&o.asDashboard))&&(0==(null===e||void 0===e||null===(t=e.options)||void 0===t?void 0:t.asReport)||!(null!==e&&void 0!==e&&null!==(l=e.options)&&void 0!==l&&l.asReport))&&(0==(null===e||void 0===e||null===(i=e.options)||void 0===i?void 0:i.asModuleList)||!(null!==e&&void 0!==e&&null!==(d=e.options)&&void 0!==d&&d.asModuleList))})).filter((function(e){e.selected_fields.filter((function(e){var n=u.component_fields.find((function(n){return n.field_name===e.field_name}));if(void 0!=n)e.value=n.value,e.group=n.group;else if("Record"===e.data_type_name){var o=u.component_fields.find((function(n){return n.field_name===e.options.name}));void 0!=o&&(e.value=o.value,e.value=o.group)}}))}))})),Io.components=g,Io.items=JSON.parse(JSON.stringify(null!==(h=null===u||void 0===u?void 0:u.component_items)&&void 0!==h?h:[])),Io.newStepComponents=[],Gn.start=!0,Ll()}else Oo(!0)}},pages:Vn.processModule.module.count,onPageClicked:function(e){var n=Xn.filter((function(e){return e.module_id===Vn.processModule.module.id}));if(12345===e){var o;n.length<(null===(o=Vn.processModule.module)||void 0===o?void 0:o.count)&&(0,xe.vC)(Vn.processModule.module,oe.Qc,999999,1).pipe((0,h.q)(1)).subscribe({next:function(e){var n;ut(!1),Vn.processModule.module.lastUpdate=0,Vn.processModule.module.count=null!==(n=null===e||void 0===e?void 0:e.total)&&void 0!==n?n:0}})}else{var t,l,i=Math.ceil((null!==(t=Vn.processModule.module)&&void 0!==t&&t.count?+(null===(l=Vn.processModule.module)||void 0===l?void 0:l.count):n.length)/oe.ZP);A.tq&&i>7&&(i=7);var d=Math.ceil(n.length/oe.ZP),a=e;a>d&&(ut(!0),Hn.componentsByModule[Vn.processModule.module.name]=0,(0,xe.vC)(Vn.processModule.module,oe.Qc,a-d<=1?oe.ZP:oe.ZP*a,a-d<=1?a:1).pipe((0,h.q)(1)).subscribe({next:function(e){var n;ut(!1),Hn.componentsByModule[Vn.processModule.module.name]=(0,H.now)(),Vn.processModule.module.lastUpdate=0,Vn.processModule.module.count=null!==(n=null===e||void 0===e?void 0:e.total)&&void 0!==n?n:0}}))}}},a.createElement("div",null,a.createElement("div",{style:{display:"flex"}},Qt.length>0&&a.createElement(pe.Z,{title:"Show all",clicked:function(){zt(Xn.filter((function(e){var n,o;return e.module_id===(null===Vn||void 0===Vn||null===(n=Vn.processModule)||void 0===n||null===(o=n.module)||void 0===o?void 0:o.id)}))),ol((0,l.Z)((0,l.Z)({},nl),{},{filter:void 0})),Xt(Gl((0,l.Z)((0,l.Z)({},nl),{},{filter:void 0})))},style:{height:"30px",width:"140px"}}),Qt.map((function(e,n){return a.createElement(pe.Z,{className:u.customButton,icon:a.createElement("img",{src:r.C7,style:{height:"16px",width:"16px"}}),clicked:function(){Kt(Qt.filter((function(n){return n.value!==e.value}))),Hl(Qt.filter((function(n){return n.value!==e.value})),Gl((0,l.Z)((0,l.Z)({},nl),{},{filter:void 0})))},key:n,style:{height:"30px",width:"inherit"}},"".concat(0==n?"":e.operator," ").concat(e.label))})),Qt.length>0&&a.createElement(pe.Z,{title:"Apply",style:{height:"30px",width:"160px"},clicked:function(){Hl(Qt,Gl((0,l.Z)((0,l.Z)({},nl),{},{filter:void 0})))},light:!0})),Rt&&a.createElement("div",{style:{display:"flex"}},Ql(),Jl().length>0&&a.createElement(_e.Z,{className:u.dropdownSelectComponent,items:Jl(),onChange:function(e){Qt.map((function(e){return e.label})).includes(e)||Kt([].concat((0,i.Z)(Qt),[{label:e,value:e,type:"status",operator:nl.operator}]))},placeholder:"Status"}),Rt&&a.createElement(_e.Z,{className:u.dropdownSelectComponent,items:nl.list.map((function(e){return{label:e,value:e}})),onChange:function(e){ol((0,l.Z)((0,l.Z)({},nl),{},{filter:void 0})),setTimeout((function(){return ol((0,l.Z)((0,l.Z)({},nl),{},{filter:e}))}),10)},placeholder:"Filter by fields"}),1==Rt&&void 0!==(null===nl||void 0===nl?void 0:nl.filter)&&a.createElement(_e.Z,{className:u.dropdownSelectComponentL,items:(0,i.Z)(new Set(Gl(nl).map((function(e){return e[nl.filter]})))).map((function(e){return{label:e,value:e}})),onChange:function(e){Qt.map((function(e){return e.value})).includes(e)||Kt([].concat((0,i.Z)(Qt),[{label:"".concat(nl.filter,": ").concat(e),value:e,type:"fields",filter:nl.filter,operator:nl.operator}]))},placeholder:"Field value"}),1==Rt&&a.createElement(_e.Z,{className:u.dropdownSelectComponent,items:Qn.map((function(e){return{label:"".concat(e.first_name," ").concat(e.last_name),value:e.id}})),onChange:function(e){if(!Qt.map((function(e){return e.label})).includes(e)){var n=Qn.find((function(n){return n.id===e}));Kt([].concat((0,i.Z)(Qt),[{label:"".concat(n.first_name," ").concat(n.last_name),value:e,type:"user",operator:nl.operator}]))}},placeholder:"Created by"}))),a.createElement("div",{className:u.actionsContainer},!(null!==nl&&void 0!==nl&&nl.title)&&Rt&&a.createElement("label",{style:{padding:"20px 0px 20px 5px",fontSize:"12px"}},"OR"===nl.operator?"Selecting OR will select all instances of selected value":"Selecting AND will only include instances of selected value"),Rt?(null===nl||void 0===nl?void 0:nl.title)&&$l(Gt,nl.list,nl.title):a.createElement("div",{className:u.searchContainer},a.createElement(ee.G,{icon:ne.wn1,style:{width:"25px",height:"25px",padding:"5px"}}),a.createElement("input",{placeholder:"Search",className:u.searchInput,onChange:function(e){var n,o,t;if("deleteContentBackward"===e.nativeEvent.inputType)zt(Wl(null===Vn||void 0===Vn||null===(o=Vn.processModule)||void 0===o||null===(t=o.module)||void 0===t?void 0:t.id,Xn,e.target.value));else if((null===(n=e.target.value)||void 0===n?void 0:n.length)>0){var l,i;zt(Wl(null===Vn||void 0===Vn||null===(l=Vn.processModule)||void 0===l||null===(i=l.module)||void 0===i?void 0:i.id,Ft,e.target.value))}else 0==e.target.value.length&&zt(Xn.filter((function(e){var n,o;return e.module_id===(null===Vn||void 0===Vn||null===(n=Vn.processModule)||void 0===n||null===(o=n.module)||void 0===o?void 0:o.id)})))}})),Rt&&Kl(),a.createElement("div",{style:{display:Rt?"none":"flex",alignSelf:"flex-end"}},!("trial_ended"===Gn.status||"inactive"===Gn.status||"free"===Gn.status||"on_trial"===Gn.status)&&Xl(),"on_trial"===Gn.status&&Xn.filter((function(e){return e.module_id===Vn.processModule.module.id&&Q()(new Date(e.created_date)).format("DDMMYYYY")===Q()(new Date).format("DDMMYYYY")})).length<5&&Xl(),"free"===Gn.status&&Xn.filter((function(e){return Q()(new Date(e.created_date)).format("DDMMYYYY")===Q()(new Date).format("DDMMYYYY")})).length<3&&Xl(),!A.tq&&Kl(),!A.tq&&$l(Gl({list:e.selected_fields.filter((function(e){return 1==e.visible})).map((function(e){return e.field_name}))}),e.selected_fields.filter((function(e){return 1==e.visible})).map((function(e){return e.field_name}))),a.createElement(pe.Z,{light:!0,clicked:function(){ut(!0);var e=Wn.find((function(e){return e.id===Vn.processModule.module_id}));Hn.componentsByModule[e.name]=0,(0,xe.vC)(e,oe.Qc,oe.R6,1).pipe((0,h.q)(1)).subscribe({next:function(n){var o,t=null!==n&&void 0!==n&&n.data?null===n||void 0===n?void 0:n.data:n;f.h.dispatch((0,_.mK)(qe.Z(z.Z("created_date"),[].concat((0,i.Z)(Xn.filter((function(e){return e.module_id!==Vn.processModule.module_id}))),(0,i.Z)(t))),oe.KI,lo.map((function(e){return e.fields})).flat(1))),Hn.componentsByModule[e.name]=(0,H.now)(),e.lastUpdate=(0,H.now)(),e.count=null!==(o=null===n||void 0===n?void 0:n.total)&&void 0!==o?o:0,ut(!1)},complete:function(){},error:function(){return ut(!1)}})},icon:a.createElement("img",{src:r.Fd}),loading:at,message:"Fetching ".concat(Vn.processModule.module.name,"...")})))))})):a.createElement("div",{className:u.listContainer,"app-variant-is-mobile":A.tq?"true":"false"},a.createElement("div",{style:{display:"flex",justifyContent:"space-between",width:"100%"}},a.createElement("p",{className:u.stepTitleSmaller},null===Ol||void 0===Ol?void 0:Ol.name),a.createElement(pe.Z,{clear:!0,clicked:function(){var n,o,t;ut(!0),null===(n=Vn.processModule.module)||void 0===n||null===(o=n.options)||void 0===o||null===(t=o.supporting)||void 0===t||t.filter((function(n,o){var t,l,i;ut(!0),(0,xe.vC)({id:n,name:null!==(t="".concat(null===Wn||void 0===Wn||null===(l=Wn.find((function(e){return e.id===n})))||void 0===l?void 0:l.name).concat(o))&&void 0!==t?t:"".concat(null===(i=e)||void 0===i?void 0:i.name).concat(o)},oe.Qc,oe.R6,1).pipe((0,h.q)(1)).subscribe({next:function(e){var n,t,l,i;(null===(n=Vn.processModule.module)||void 0===n||null===(t=n.options)||void 0===t||null===(l=t.supporting)||void 0===l?void 0:l.length)==o+1&&(ut(!1),Ll(null===(i=Vn.processModule.steps[Vn.processModule.stepIndex-1])||void 0===i?void 0:i.id))},error:function(){return ut(!1)}})}))},icon:a.createElement("img",{src:r.Fd}),loading:at})),a.createElement("br",null),a.createElement("label",{className:u.stepGuidanceSmaller},null===Ol||void 0===Ol?void 0:Ol.guidance),Mo&&a.createElement(B.Z,{message:Mo,onClick:function(){return Eo("")}}),a.createElement(Ge,{nextButtonClicked:So,step:Ol,setIsMandatoryError:ho,isMandatoryError:yo,begunModule:Vn,companyData:Gn,blueprints:lo,components:Xn,products:Kn,authenticatedUser:no,isEditing:Jn,companyUsersArray:Qn,usersArray:il,setUsers:Ho,setPositions:et,setIsCompleted:Wo,selectedComponent:Lo,goToNextStep:Ll,companyPositionsArray:oo,cart:to,allModules:Wn,editMode:pl},a.createElement("div",{className:u.menuRightButtons}),function(){var e,n,o,t,l,i,d;return a.createElement("div",{className:u.menuAccordionButtons},Vn.processModule.stepIndex>0&&a.createElement(pe.Z,{title:"Cancel",light:!0,clicked:function(){Io.components.length>0||Io.newStepComponents.length>0?wl(!0):(Vn.processModule.back_array=[],zt(Xn.filter((function(e){var n,o;return e.module_id===(null===Vn||void 0===Vn||null===(n=Vn.processModule)||void 0===n||null===(o=n.module)||void 0===o?void 0:o.id)}))),Ll(Vn.processModule.steps[0].id),ml(!1))}}),Vn.processModule.stepIndex>0&&a.createElement(pe.Z,{title:"Back",light:!0,style:{width:"80px"},clicked:function(){var e,n,o;if(1==Vn.processModule.stepIndex&&zt(Xn.filter((function(e){var n,o;return e.module_id===(null===Vn||void 0===Vn||null===(n=Vn.processModule)||void 0===n||null===(o=n.module)||void 0===o?void 0:o.id)}))),1==(null===Ol||void 0===Ol||null===(e=Ol.options)||void 0===e?void 0:e.deleteOnBack)&&Ol.component_blueprints.filter((function(e){return e.selected_fields.filter((function(e){return"output"!==e.data_type})).map((function(e){e.value=void 0}))})),(null===Vn||void 0===Vn||null===(n=Vn.processModule)||void 0===n||null===(o=n.back_array)||void 0===o?void 0:o.length)>0){var t,l=null===Vn||void 0===Vn||null===(t=Vn.processModule)||void 0===t?void 0:t.back_array.pop();l&&Ll(l)}else{var i;Ll(null===(i=Vn.processModule.steps[Vn.processModule.stepIndex-1])||void 0===i?void 0:i.id)}}}),!0===(null===Ol||void 0===Ol?void 0:Ol.is_end)?a.createElement(pe.Z,{disabled:!1===(null===Gn||void 0===Gn?void 0:Gn.start),title:Ao?"Update":Vo&&null!==(e=null===Vn||void 0===Vn||null===(n=Vn.processModule)||void 0===n||null===(o=n.module)||void 0===o||null===(t=o.options)||void 0===t?void 0:t.save)&&void 0!==e?e:"Save",loading:at,style:{marginLeft:"0px",display:null!==Vn&&void 0!==Vn&&null!==(l=Vn.processModule)&&void 0!==l&&null!==(i=l.module)&&void 0!==i&&null!==(d=i.options)&&void 0!==d&&d.nosave?"none":Io.components.length>0||Io.newStepComponents.length>0?"":"none"},clicked:function(){var e,n,o,t,l,i;return pl?Eo("Saving is not allowed in Edit Mode"):1==(null===Vn||void 0===Vn||null===(e=Vn.processModule)||void 0===e||null===(n=e.module)||void 0===n||null===(o=n.options)||void 0===o?void 0:o.emailOutputs)&&1==(null===Vn||void 0===Vn||null===(t=Vn.processModule)||void 0===t||null===(l=t.module)||void 0===l||null===(i=l.options)||void 0===i?void 0:i.selectiveEmail)&&Vo?Ct(!0):Fl()}}):a.createElement(pe.Z,{disabled:!1===(null===Gn||void 0===Gn?void 0:Gn.start),title:"Next",style:{width:"80px"},clicked:function(){var e,n,o,t,l,i,d,a,u;Array.isArray(null===Vn||void 0===Vn||null===(e=Vn.processModule)||void 0===e?void 0:e.back_array)||(Vn.processModule.back_array=[]),null===Vn||void 0===Vn||null===(n=Vn.processModule)||void 0===n||n.back_array.push(null===Io||void 0===Io||null===(o=Io.currentStep)||void 0===o?void 0:o.id);var r,s,c,v,p,m=null===(t=Ol.component_blueprints.find((function(e){return e.selected_fields.filter((function(e){var n,o;return"Dropdown"===e.data_type_name&&(null===(n=e.options)||void 0===n?void 0:n.jump1)&&"decision"===(null===(o=e.options)||void 0===o?void 0:o.type)})).length>0})))||void 0===t||null===(l=t.selected_fields)||void 0===l?void 0:l.find((function(e){var n;return"Dropdown"===e.data_type_name&&(null===(n=e.options)||void 0===n?void 0:n.jump1)})),y=null===(i=Ol.component_blueprints.find((function(e){return e.selected_fields.filter((function(e){var n;return"Value Button"===e.data_type_name&&(null===(n=e.options)||void 0===n?void 0:n.jump1)})).length>0})))||void 0===i||null===(d=i.selected_fields)||void 0===d?void 0:d.filter((function(e){var n;return"Value Button"===e.data_type_name&&(null===(n=e.options)||void 0===n?void 0:n.jump1)}));if(null!==m&&void 0!==m&&null!==(a=m.options)&&void 0!==a&&a.jump1&&null!==m&&void 0!==m&&null!==(u=m.options)&&void 0!==u&&u.jump2)if(0==(null===m||void 0===m||null===(r=m.options)||void 0===r?void 0:r.list.indexOf(null===m||void 0===m?void 0:m.value)))Rl(null===(c=ao.find((function(e){var n;return e.id===(null===m||void 0===m||null===(n=m.options)||void 0===n?void 0:n.process)})))||void 0===c||null===(v=c.steps)||void 0===v||null===(p=v.find((function(e){return e.id===(null===m||void 0===m?void 0:m.options.jump1)})))||void 0===p?void 0:p.id);else if(1==(null===m||void 0===m||null===(s=m.options)||void 0===s?void 0:s.list.indexOf(null===m||void 0===m?void 0:m.value))){var h,g,b;Rl(null===(h=ao.find((function(e){var n;return e.id===(null===m||void 0===m||null===(n=m.options)||void 0===n?void 0:n.process)})))||void 0===h||null===(g=h.steps)||void 0===g||null===(b=g.find((function(e){return e.id===(null===m||void 0===m?void 0:m.options.jump2)})))||void 0===b?void 0:b.id)}else{var M;null===Vn||void 0===Vn||null===(M=Vn.processModule)||void 0===M||M.back_array.pop(),f.h.dispatch((0,_.Xc)({show:!0,message:"Please select a value for ".concat(null===m||void 0===m?void 0:m.field_name),color:"red",bottom:!1}))}else if((null===y||void 0===y?void 0:y.length)>0){var E,Z,C,S,w,x=y.filter((function(e){return void 0!==e.value}));if(1==x.length)Rl(null===(E=ao.find((function(e){var n,o;return e.id===(null===(n=x[0])||void 0===n||null===(o=n.options)||void 0===o?void 0:o.process)})))||void 0===E||null===(Z=E.steps)||void 0===Z||null===(C=Z.find((function(e){var n;return e.id===(null===(n=x[0])||void 0===n?void 0:n.options.jump1)})))||void 0===C?void 0:C.id);else null===Vn||void 0===Vn||null===(S=Vn.processModule)||void 0===S||null===(w=S.back_array)||void 0===w||w.pop(),f.h.dispatch((0,_.Xc)({show:!0,message:"A selection is required",color:"red",bottom:!1})),window.scrollTo({top:0,behavior:"smooth"})}else if((null===Ol||void 0===Ol?void 0:Ol.next_steps.length)>1||ql.length>1||Ul.length>1)mo(!po);else if(1===Ol.next_steps.length){var k;Rl(null===Ol||void 0===Ol||null===(k=Ol.next_steps[0])||void 0===k?void 0:k.id)}else{var I;Rl(null===(I=Vn.processModule.steps[Vn.processModule.steps.findIndex((function(e){return e.id===Ol.id}))+1])||void 0===I?void 0:I.id)}}}),po&&a.createElement("div",{className:u.goToNextStep},null===Ol||void 0===Ol?void 0:Ol.next_steps.map((function(e,n){return a.createElement("div",{key:n,onClick:function(){return Rl(e.id)},className:u.nextStepsContainer},a.createElement("div",{className:u.nextStepImageContainer},a.createElement("img",{alt:"",src:r.c6})),a.createElement("p",null,null===e||void 0===e?void 0:e.name))})),null===ql||void 0===ql?void 0:ql.map((function(e,n){return a.createElement("div",{key:n,onClick:function(){return Rl(e.id)},className:u.nextStepsContainer},a.createElement("div",{className:u.nextStepImageContainer},a.createElement("img",{alt:"",src:r.th})),a.createElement("p",null,null===e||void 0===e?void 0:e.name))})),null===Ul||void 0===Ul?void 0:Ul.map((function(e,n){return a.createElement("div",{key:n,onClick:function(){return function(e){f.h.dispatch((0,_.pU)(e)),mo(!1)}(e)},className:u.nextStepsContainer},a.createElement("div",{className:u.nextStepImageContainer},a.createElement("img",{alt:"",src:r.IR})),a.createElement("p",null,null===e||void 0===e?void 0:e.name))}))))}())),(null===Vn||void 0===Vn||null===(Sn=Vn.processModule)||void 0===Sn||null===(wn=Sn.module)||void 0===wn||null===(xn=wn.options)||void 0===xn?void 0:xn.ads)&&Il&&0==(null===Ol||void 0===Ol||null===(kn=Ol.component_blueprints)||void 0===kn?void 0:kn.filter((function(e){var n;return 1==(null===(n=e.options)||void 0===n?void 0:n.asModuleList)})).length)&&a.createElement("div",{style:{textAlign:"center"}},function(e){if(e){var n=j.Z([Oe.Z(z.Z("created_date"))])(Xn.filter((function(n){return n.module_id===e.id}))).filter((function(e){var n;return(null===(n=e.component_fields)||void 0===n?void 0:n.filter((function(e){var n;return"Status"===e.data_type_name&&!(e.value===(null===(n=Gn.misc_info)||void 0===n?void 0:n.lock)||"Closed"===e.value||"Cancelled"===e.value||"Hide"===e.value)})).length)>0})).map((function(e,n){var o,t,l,i,d=e.component_fields.find((function(e){var n,o,t;return"Link"===e.data_type_name&&((null!==(n=null===e||void 0===e?void 0:e.value)&&void 0!==n?n:"").includes("jpg")||(null!==(o=null===e||void 0===e?void 0:e.value)&&void 0!==o?o:"").includes("png")||(null!==(t=null===e||void 0===e?void 0:e.value)&&void 0!==t?t:"").includes("pdf"))}));return a.createElement("div",{key:n,className:u.imageCard,onClick:function(){}},d&&(null!==(o="".concat(null===d||void 0===d?void 0:d.value))&&void 0!==o&&o.includes("jpg")||null!==(t="".concat(null===d||void 0===d?void 0:d.value))&&void 0!==t&&t.includes("jpeg")||null!==(l="".concat(null===d||void 0===d?void 0:d.value))&&void 0!==l&&l.includes("png")||null!==(i="".concat(null===d||void 0===d?void 0:d.value))&&void 0!==i&&i.includes("pdf"))&&null!==d&&void 0!==d&&d.value.includes("pdf")?a.createElement("embed",{src:"".concat(null===d||void 0===d?void 0:d.value,"#toolbar=0&navpanes=0&scrollbar=0&zoom=100%"),width:"1000px",height:"1000px"}):a.createElement("img",{alt:"lg",src:null===d||void 0===d?void 0:d.value,style:{objectFit:"contain",height:"100vh",borderRadius:"5px"}}))}));return(null===n||void 0===n?void 0:n.length)>0&&a.createElement(c.U7,{isOpen:Il,onClose:function(){localStorage.setItem("showAdsDate",(0,H.now)()),Dl(!1)},backdropColor:!0,blured:!1,scrollable:!0,shadowedContainerStyle:{width:"60%",minWidth:"600px",backgroundColor:"var(--app-color-gray-lightest)"}},a.createElement("div",{className:u.center,style:{display:(null===n||void 0===n?void 0:n.length)>0?"":"none",flexDirection:"column"}},(null===n||void 0===n?void 0:n.length)>1?a.createElement(ze.tq,{slidesPerView:"auto",centeredSlides:!0,spaceBetween:200,initialSlide:1,pagination:{clickable:!0,dynamicBullets:!0},autoplay:{delay:1e4,disableOnInteraction:!0},modules:[Fe.pt,Fe.tl],className:"mySwiper"},(null===n||void 0===n?void 0:n.length)>0&&n.map((function(e,n){return a.createElement(ze.o5,{key:n,className:u.swiperslide},e)}))):n),a.createElement(c.pd,{title:"Do not show popup again?",style:{margin:"0px 20% 20px 20%",width:"auto",backgroundColor:"var(--app-color-gray-lightest)",padding:"10px 50px 10px 50px"},value:!Il,toggleSelected:function(e){localStorage.setItem("showAdsDate",(0,H.now)()),localStorage.setItem("showAds",!e),Dl(!1)}}))}return a.createElement(a.Fragment,null)}(Wn.find((function(e){var n,o,t;return e.id===(null===Vn||void 0===Vn||null===(n=Vn.processModule)||void 0===n||null===(o=n.module)||void 0===o||null===(t=o.options)||void 0===t?void 0:t.ads)})))),Sl&&a.createElement(je.Z,{openModal:Sl,setOpenModal:wl,dialogHandler:function(){Vn.processModule.back_array=[],zt(Xn.filter((function(e){var n,o;return e.module_id===(null===Vn||void 0===Vn||null===(n=Vn.processModule)||void 0===n||null===(o=n.module)||void 0===o?void 0:o.id)}))),Ll(Vn.processModule.steps[0].id),ml(!1),wl(!1)},title:"You have unsaved items. Are you sure you want to cancel?",proceedTitle:"Yes",cancelTitle:"No, return back",loading:at}),Ml&&Vn.processModule.stepIndex>0&&a.createElement(c.U7,{isOpen:Ml,onClose:function(){return El(!1)},backdropColor:!0,blured:!0,scrollable:!0,shadowedContainerStyle:{width:A.tq?"100%":"40%"}},a.createElement("div",{style:{padding:"30px"}},a.createElement("p",{className:u.deleteText},"There were unsaved data for ".concat(Lo.title,". Do you want to restore them?")),a.createElement("div",{style:{display:"flex",justifyContent:"center"}},a.createElement(pe.Z,{title:"Yes, restore",clicked:function(){f.h.dispatch((0,_.Xc)({show:!0,message:"Reverting to saved data from the cache. Press Save to permanently save these records. Cancel to revert back",color:"red",spinner:!1,bottom:!0})),Io.items=JSON.parse(localStorage.getItem("items")),Io.newStepComponents=JSON.parse(localStorage.getItem("newStepComponents")),localStorage.removeItem("transaction"),El(!1)}}),a.createElement(pe.Z,{title:"No, use the current data as is",light:!0,clicked:function(){localStorage.removeItem("transaction"),El(!1)}})))),ft&&a.createElement(c.U7,{isOpen:v.v7,onClose:function(){},backdropColor:!0,blured:!0,scrollable:!0,shadowedContainerStyle:{width:A.tq?"100%":"20%"}},a.createElement("div",null,a.createElement("p",{className:u.deleteText},"Are you sure you want to delete ".concat(Lo.title,"?")),a.createElement("div",{style:{display:"flex",justifyContent:"center"}},a.createElement(pe.Z,{title:"Yes, delete",style:{backgroundColor:"red"},clicked:function(){Pt(!0),(0,v.v7)(Lo.id).pipe((0,y.P)()).subscribe({next:function(){Pt(!1),Oo(!1),_t(!1)},complete:function(){},error:function(){Pt(!1),_t(!1)}})},loading:Nt}),a.createElement(pe.Z,{title:"No",light:!0,clicked:function(){return _t(!1)}})))),gt&&a.createElement(c.U7,{isOpen:gt,onClose:function(){},backdropColor:!0,blured:!0,scrollable:!0,shadowedContainerStyle:{width:A.tq?"100%":"20%"}},a.createElement("div",null,a.createElement("p",{className:u.deleteText},"Are you sure you want to copy ".concat(Lo.title,"? This will create a new copy")),a.createElement("div",{style:{display:"flex",justifyContent:"center"}},a.createElement(pe.Z,{title:"Yes, copy",clicked:function(){var e;Oo(!1),bt(!1),Bl();var n=[];Pe.Z(Te.Z("group"))(null!==(e=null===Lo||void 0===Lo?void 0:Lo.component_fields)&&void 0!==e?e:[]).map((function(e){n=[].concat((0,i.Z)(n),[{id:e.component_blueprint_id,temp_id:e.id,selected_fields:Ue.Z(W.Z("group",e.group))(Lo.component_fields)}])})),Vn.processModule.steps.filter((function(e){e.component_blueprints.filter((function(e){e.selected_fields.filter((function(e){var n,o=null===(n=Lo.component_fields)||void 0===n?void 0:n.find((function(n){return n.procedure_step_blueprint_field_id===e.procedure_step_blueprint_field_id}));if(void 0!=o)"ID"===e.data_type_name||"Status"===e.data_type_name?e.value=void 0:e.value=o.value;else if("Record"===e.data_type_name){var t,l=null===(t=Lo.component_fields)||void 0===t?void 0:t.find((function(n){return n.field_name===e.options.name}));void 0!=l&&(e.value=l.value)}}))}))})),Do({action:g._U.addModuleComponents,value:n}),Do({action:g._U.setModuleItems,value:Lo.component_items}),Yo(!1),Vn.processModule.isUpdating=!1,jo({})}}),a.createElement(pe.Z,{title:"No",light:!0,clicked:function(){return bt(!1)}})))),xt&&a.createElement(c.U7,{isOpen:xt,onClose:function(){},backdropColor:!0,blured:!1,scrollable:!0,shadowedContainerStyle:{width:A.tq?"100%":"20%"}},a.createElement("div",null,a.createElement("p",{className:u.deleteText},"Cannot delete ".concat(Lo.title,". Some transactions and master data are using this item")),a.createElement("div",{style:{display:"flex",justifyContent:"center"}},a.createElement(pe.Z,{title:"Close",light:!0,clicked:function(){return kt(!1)}}))))),yl&&a.createElement(c.U7,{isOpen:yl,onClose:function(){},backdropColor:!0,blured:!1,scrollable:!0,shadowedContainerStyle:{width:A.tq?"100%":"80%"}},a.createElement(Ye.default,{hasCloseIcon:!0,label:null===Vn||void 0===Vn||null===(In=Vn.processModule)||void 0===In||null===(Dn=In.module)||void 0===Dn?void 0:Dn.name,withBack:!1,paymentPath:"begin-module",onClose:function(){return hl(!1)},companyData:Gn,subscriptionInfo:{user_id:no.id,ref:Io.id,plan_price:null!==(Nn=null===Io||void 0===Io?void 0:Io.plan)&&void 0!==Nn?Nn:0,currency:null!==(Pn=null===Io||void 0===Io?void 0:Io.currency)&&void 0!==Pn?Pn:"PHP",plan:"CC-".concat(Io.id),total:null!==(Tn=+(null===Io||void 0===Io?void 0:Io.total))&&void 0!==Tn?Tn:0,billable_users:[no],duration:0,dlabel:Io.id},onError:function(e){Eo(e),ho(!0),hl(!1),f.h.dispatch((0,_.Xc)({show:!0,message:"Transaction was created but the selected payment mode encountered an issue. Please select another payment option. You may also manually attach your proof of payment",color:"red",bottom:!0})),f.h.dispatch((0,_.RV)({})),jl()}})),Zt&&a.createElement(c.U7,{isOpen:Zt,onClose:function(){return Ct(!1)},backdropColor:!0,blured:!0,scrollable:!0,shadowedContainerStyle:{width:A.tq?"100%":"15%"}},a.createElement("div",null,a.createElement(c.jL,{ungrouped:!0,title:"nonmanager"===no.user_type?"Type an email address to send copy of this transaction (optional)":"Select users to email this transaction (Optional)",columned:!0,withAckButton:!1},"nonmanager"===no.user_type?a.createElement("input",{placeholder:"Use comma, no space, for multiple email addresses",className:u.emailInput,onChange:function(e){new RegExp(/^([a-z0-9!#$%&'*+/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*)(([, ]+[a-z0-9!#$%&'*+/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])\.([a-z0-9]([a-z0-9-]*[a-z0-9]))*)?)*$/).test(e.target.value)&&sl(e.target.value.split(","))}}):a.createElement(we.Cm,{id:"Users",tagEmplacement:"inlined",searchable:!1,items:il.filter((function(e){var n;return e.department===(null===(n=no.departments[0])||void 0===n?void 0:n.name)})),groupedBy:"department",groupname:"department",triggerType:"chevron",initialSelectedValues:[],className:u.peoplePositionsSelect,inputClassName:u.peoplePositionsSelectInput,molclassname:u.peoplePositionsSelectMenuOverlay,moliclassname:u.peoplePositionsSelectMenuOverlayItem,onChange:function(e){e.length>0?sl(null===e||void 0===e?void 0:e.map((function(e){return null===e||void 0===e?void 0:e.user.email}))):sl([])}})),a.createElement("div",{style:{display:"flex",justifyContent:"center"}},a.createElement(pe.Z,{title:"Back",light:!0,clicked:function(){return Ct(!1)}}),a.createElement(pe.Z,{disabled:!1===(null===Gn||void 0===Gn?void 0:Gn.start),title:Ao?"Update":Vo&&null!==(On=null===Vn||void 0===Vn||null===(qn=Vn.processModule)||void 0===qn||null===(Un=qn.module)||void 0===Un||null===(An=Un.options)||void 0===An?void 0:An.save)&&void 0!==On?On:"Save",loading:at,style:{marginLeft:"0px"},clicked:function(){Ct(!1),Fl()}})))),To&&a.createElement(c.U7,{isOpen:To,onClose:function(){return Oo(!1)},hasCloseIcon:!!A.tq,backdropColor:!0,blured:!1,scrollable:!0,shadowedContainerStyle:{width:A.tq||tt?"100%":"50%",height:"auto",minWidth:A.tq?"100%":"1000px"}},a.createElement("div",{"app-variant-is-mobile":A.tq?"true":"false",style:{display:"flex",justifyContent:"center",flexDirection:"column"}},a.createElement(Je,{ref:Al,begunModule:Vn,allModules:Wn,companyData:Gn,components:Xn,selectedComponent:Lo,companyUsersArray:Qn,print:tt,step:r.Nb,companyPositionsArray:oo,authenticatedUser:no,setIsOpen:Oo}),(null===Lo||void 0===Lo||null===(Yn=Lo.component_fields)||void 0===Yn?void 0:Yn.length)>0&&a.createElement("div",{style:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"center",padding:tt?"0 30%":(null===di||void 0===di?void 0:di.length)>4?"":"0 25%"}},di))),qt&&a.createElement(c.U7,{isOpen:qt,hasCloseIcon:!0,onClose:function(){return io?Tl("/"):Ut(!1)},backdropColor:!0,blured:!1,scrollable:!0,shadowedContainerStyle:{width:A.tq?"100%":"30%",height:"auto"}},a.createElement("div",{style:{textAlign:"center",padding:"0 20px"}},a.createElement("p",{className:u.modalTitle},null===(Rn=Vn.processModule.module)||void 0===Rn?void 0:Rn.name),a.createElement("p",{className:u.modalSubTitle},null!==(Bn=null===Vn||void 0===Vn||null===(Ln=Vn.processModule)||void 0===Ln||null===(jn=Ln.module)||void 0===jn||null===(Fn=jn.options)||void 0===Fn?void 0:Fn.message)&&void 0!==Bn?Bn:"Transaction saved"))))}))}}]);
//# sourceMappingURL=400.a58bea20.chunk.js.map