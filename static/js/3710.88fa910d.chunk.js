(self.webpackChunkflowhero=self.webpackChunkflowhero||[]).push([[3710,7905],{48630:(e,l,o)=>{"use strict";o.d(l,{X:()=>h});var i=o(87462),t=o(45987),n=o(67861),d=o(64468);const a="Checkbox_host__MtZZg",r="Checkbox_checkmarkContainer__7m7hu",s="Checkbox_input__fK+n4",v="Checkbox_checkboxControl__TezWV",u="Checkbox_checkboxControlIcon__5qzo9",c="Checkbox_checkboxLabel__lacXH",p="Checkbox_checkboxDisabled__Qo2Ag";var m=o(85692),f=o(47144),_=o.n(f);const y=["checkboxLabel","hasMandatoryIndicator","disabled","errormessage"];const h=(0,n.forwardRef)((e,l)=>{const{checkboxLabel:o,hasMandatoryIndicator:f,disabled:h,errormessage:g}=e,b=(0,t.Z)(e,y);return n.createElement(d.__,{hasMandatoryIndicator:f,className:_()(a,{[p]:h}),"app-checkbox-error":g&&(null===g||void 0===g?void 0:g.length)>0?"error":"false"},n.createElement("span",{className:_()(r)},n.createElement("input",(0,i.Z)({ref:l,className:_()(s),type:"checkbox",disabled:h},b)),n.createElement("span",{className:_()(v)},n.createElement(m.MK,{className:_()(u)}))),n.createElement("span",{className:_()(c)},o))})},41131:(e,l,o)=>{"use strict";o.d(l,{C6:()=>De,ij:()=>Pe,_G:()=>Oe,HR:()=>Le,ZP:()=>Te,ev:()=>Ae});var i=o(1413),t=o(67861);const n="CustomTemplateModule_section__S+Ga8",d="CustomTemplateModule_accordionContainer__Eooxm",a="CustomTemplateModule_active__x9Y6U",r="CustomTemplateModule_content__3auE3",s="CustomTemplateModule_itemsDetail__9ldd4";var v=o(47144),u=o.n(v),c=o(27436),p=o(39518),m=o(49465),f=o(88550),_=o(51330),y=o(73500),h=o(46415),g=o(14170);const b={mobilepopup:"CustomSportsClub_mobilepopup__efO50",mobilepopupopen:"CustomSportsClub_mobilepopupopen__R9HZu",mobilePopupActionContainer:"CustomSportsClub_mobilePopupActionContainer__9+kzH",filtersContainer:"CustomSportsClub_filtersContainer__GwQ7c",centerDiv:"CustomSportsClub_centerDiv__oTWCq",fieldInput:"CustomSportsClub_fieldInput__ZHED4"};var x=o(6073),E=o(12308),C=o(11577),w=o(85692),M=o(12075),S=o(52902),k=o(32588),Z=o(50981),I=o.n(Z),N=o(88827),T=o(88374),D=o(93389),P=o(58535),A=o(17951),O=o(63864),L=o(27658),z=o(9825),R=o.n(z);const U=(0,p.$j)(e=>{const{authenticatedUser:{position:l},authenticatedUser:o}=e.authReducer,{user:i}=e.sessionReducer,{begunModule:t,allModules:n,companyData:d,companyUsersArray:a,companyPositionsArray:r,components:s,companyProcesses:v}=e.flowReducer;return{begunModule:t,allModules:n,companyData:d,companyUsersArray:a,companyPositionsArray:r,components:s,authenticatedUser:o,user:i,companyProcesses:v}})(e=>{var l,o,n,d,a,r,s,v,u,c,p,_,Z,P,O,L,z,R,U,F,W,B,Y,H,V,j,G,J,K;const{begunModule:Q,allModules:X,companyData:$,companyUsersArray:ee,goto:le,components:oe,authenticatedUser:ie,user:te,companyProcesses:ne,template:de}=e,{title:ae,selectedComponent:re,setSelectedComponent:se,step:ve}=e,[ue,ce]=(0,t.useState)(!1),[pe,me]=(0,t.useState)((null===(l=re.shared_users)||void 0===l||null===(o=l.filter(e=>(null===e||void 0===e?void 0:e.id)===(null===ie||void 0===ie?void 0:ie.id)))||void 0===o?void 0:o.length)>0),[fe,_e]=(0,t.useState)((null===(n=re.component_items)||void 0===n||null===(d=n.filter(e=>{var l,o;return(null===e||void 0===e?void 0:e.value)===(null===ie||void 0===ie?void 0:ie.id)&&"Join"===(null===e||void 0===e?void 0:e.type)&&(null===e||void 0===e?void 0:e.item_code)===(null===Q||void 0===Q||null===(l=Q.processModule)||void 0===l||null===(o=l.module)||void 0===o?void 0:o.id)}))||void 0===d?void 0:d.length)>0),[ye,he]=(0,t.useState)(!1),[ge,be]=(0,t.useState)(!1),[xe,Ee]=(0,t.useState)(!1),[Ce,we]=(0,t.useState)(!1),[Me,Se]=(0,f.pQ)(),ke=(null===ie||void 0===ie?void 0:ie.id)===(null===re||void 0===re||null===(a=re.created_by)||void 0===a?void 0:a.id),Ze=1===(null===re||void 0===re||null===(r=re.component_items)||void 0===r?void 0:r.filter(e=>"Moderator"===e.type&&(null===e||void 0===e?void 0:e.value)===(null===ie||void 0===ie?void 0:ie.id)).length),Ie=ke||Ze,Ne=null!==(s=re.component_fields.find(e=>"Private"===e.field_name))&&void 0!==s&&s,Te=null!==(v=null===(u=re.component_fields.find(e=>"My Community"===e.field_name))||void 0===u?void 0:u.value)&&void 0!==v?v:"Metro Manila",De=null===(c=re.component_fields.find(e=>"Club Description"===e.field_name))||void 0===c?void 0:c.value,Pe="Yes"===(null===(p=re.component_fields.find(e=>"Basketball"===e.field_name))||void 0===p?void 0:p.value)?"Basketball":"Yes"===(null===(_=re.component_fields.find(e=>"Pickleball"===e.field_name))||void 0===_?void 0:_.value)?"Pickleball":"All Sports",Ae=null===X||void 0===X?void 0:X.find(e=>"Meets"===(null===e||void 0===e?void 0:e.name));return t.createElement("div",null,t.createElement("div",{style:{fontFamily:"var(--app-text-mobile-font)",fontSize:y.tq?"18px":"20px",fontWeight:"bold",marginTop:y.tq?"":"50px"}},null===ae||void 0===ae?void 0:ae.toUpperCase()),t.createElement("div",{style:{fontFamily:"var(--app-text-mobile-font)",fontSize:"12px",marginTop:"5px"}},"".concat(Ne?"Private":"Public"," \u25e6 ").concat(Pe," \u25e6 ").concat(Te)),De&&t.createElement("div",{style:{fontFamily:"var(--app-text-mobile-font)",fontSize:"13px",margin:"40px 0"}},"".concat(De)),pe&&!Ie&&t.createElement("p",{style:{fontFamily:"var(--app-text-mobile-font)",fontSize:"14px",fontWeight:"bold",marginTop:"30px"}},"You are a member of this club"),Ie&&t.createElement("p",{style:{fontFamily:"var(--app-text-mobile-font)",fontSize:"14px",fontWeight:"bold",marginTop:"30px"}},Ze?"You are a moderator of this club":"You are the admin of this club"),t.createElement(h.mQ,{style:{width:"100%",fontSize:y.tq?"16px":"20px",marginTop:"20px"}},t.createElement(h.td,{style:{fontFamily:"var(--app-text-mobile-font)",fontSsize:y.tq?"14px":"16px"}},Ie&&t.createElement(h.OK,null,"DETAILS"),t.createElement(h.OK,null,"MEMBERS"),Ae&&t.createElement(h.OK,null,"MEETS")),Ie&&t.createElement(h.x4,{id:"DETAILS"},t.createElement("div",{style:{width:"100%",minHeight:"50vh",overflow:"auto"}},e.children)),t.createElement(h.x4,{id:"MEMBERS"},t.createElement("div",{style:{width:"100%",minHeight:"100vh",overflow:"auto",ppadding:y.tq?"":"0 30%"}},t.createElement("div",{className:b.centeredDiv,style:{justifyContent:"left",width:y.tq?"inherit":"100%",fontSize:"14px",marginTop:"20px"}},t.createElement("div",{style:{fontFamily:"var(--app-text-main-font)",fontWeight:"bold",color:"var(--app-color-gray-dark)",paddingLeft:"5px"}},"Club Admin"),t.createElement("div",{className:b.filtersContainer},t.createElement(k.Z,{simple:!0,photo:null!==(Z=null===re||void 0===re||null===(P=re.created_by)||void 0===P?void 0:P.photo)&&void 0!==Z?Z:"https://s3-symbol-logo.tradingview.com/logo-yazilim--600.png",email:"Founded club: ".concat(I()(new Date(re.created_date)).format("DD MMM YYYY")),position:null!==(O=null===ie||void 0===ie||null===(L=ie.options)||void 0===L?void 0:L.info)&&void 0!==O?O:"",firstName:t.createElement("div",{style:{fontWeight:"bold"}},"".concat(null===re||void 0===re||null===(z=re.created_by)||void 0===z?void 0:z.first_name," ").concat(null===re||void 0===re||null===(R=re.created_by)||void 0===R?void 0:R.last_name)),cardClicked:()=>{},width:"100%"}))),(null===re||void 0===re||null===(U=re.shared_users)||void 0===U?void 0:U.length)>0&&t.createElement(t.Fragment,null,t.createElement("p",{style:{fontSize:"14px",fontFamily:"var(--app-text-main-font)",fontWeight:"bold",color:"var(--app-color-gray-dark)",paddingLeft:"5px"}},"Members ( ".concat(null===re||void 0===re||null===(F=re.shared_users)||void 0===F?void 0:F.length," )")),t.createElement(E.default,{className:b.sharesTable,withColumns:!1,modern:!0,columns:["User","Photo","Bio","Pay"],list:null===re||void 0===re||null===(W=re.shared_users)||void 0===W?void 0:W.map(e=>{var l;const o=ee.find(l=>l.id===e.id),n=null===re||void 0===re||null===(l=re.component_items)||void 0===l?void 0:l.find(e=>"Moderator"===e.type&&(null===e||void 0===e?void 0:e.value)===(null===o||void 0===o?void 0:o.id));var d,a,r;return o?{User:t.createElement("div",{style:{fontWeight:"bold"}},"".concat(null===o||void 0===o?void 0:o.first_name," ").concat(null===o||void 0===o?void 0:o.last_name)),Photo:null!==(d=null===o||void 0===o?void 0:o.photo)&&void 0!==d?d:null===$||void 0===$?void 0:$.logo,Bio:null!==(a=null===o||void 0===o||null===(r=o.options)||void 0===r?void 0:r.info)&&void 0!==a?a:"",Pay:ke?t.createElement("div",{style:{display:"flex",justifyContent:"space-between",width:"100%"}},n?t.createElement(g.zx,{title:"Remove as Moderator",clicked:()=>{var e,l,t;ce(!0),(0,x.KL)((0,i.Z)((0,i.Z)({},re),{},{component_items:null===re||void 0===re||null===(e=re.component_items)||void 0===e?void 0:e.filter(e=>!("Moderator"===e.type&&(null===e||void 0===e?void 0:e.value)===(null===o||void 0===o?void 0:o.id)))}),re.id,null===(l=re.shared_users)||void 0===l?void 0:l.map(e=>e.id),re.title,null===re||void 0===re?void 0:re.is_complete,null===re||void 0===re||null===(t=re.shared_positions)||void 0===t?void 0:t.map(e=>null===e||void 0===e?void 0:e.id)).subscribe({next:e=>{se(null===e||void 0===e?void 0:e.data),ce(!1)},error:()=>ce(!1)})},style:{width:"100%"},titleStyle:{fontSize:"10px"}}):t.createElement(g.zx,{title:"Add as Moderator",clicked:()=>{var e,l,i;ce(!0),(0,x.np)({index:null===re||void 0===re||null===(e=re.component_items)||void 0===e?void 0:e.length,item_code:null===Q||void 0===Q||null===(l=Q.processModule)||void 0===l||null===(i=l.module)||void 0===i?void 0:i.id,type:"Moderator",value:null===o||void 0===o?void 0:o.id},re.id).subscribe({next:e=>{se(null===e||void 0===e?void 0:e.data),ce(!1)},error:()=>ce(!1)})},style:{width:"100%"},titleStyle:{fontSize:"10px"}}),t.createElement(g.zx,{icon:t.createElement(M.G,{icon:S.$aW,style:{width:"15px",height:"15px"}}),clicked:()=>{var e;ce(!0),(0,x.KL)((0,i.Z)((0,i.Z)({},re),{},{component_items:re.component_items.filter(e=>e.value!==(null===o||void 0===o?void 0:o.id))}),re.id,re.shared_users.filter(e=>e.id!==(null===o||void 0===o?void 0:o.id)).map(e=>e.id),ae,null===re||void 0===re?void 0:re.is_complete,null===re||void 0===re||null===(e=re.shared_positions)||void 0===e?void 0:e.map(e=>null===e||void 0===e?void 0:e.id)).subscribe({next:e=>{var l;re.shared_users=null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.shared_users,se(re),me(!1),ce(!1)},error:()=>ce(!1)})},style:{width:"50px",backgroundColor:"red",color:"white"},titleStyle:{fontSize:"10px"},loading:ue})):t.createElement("div",{style:{fontWeight:"bold"}}," ",n?"Club Moderator":""," ")}:{User:null===e||void 0===e?void 0:e.id}})})),Ie&&(null===re||void 0===re||null===(B=re.component_items)||void 0===B?void 0:B.filter(e=>"Invite"===e.type).length)>0&&t.createElement(t.Fragment,null,t.createElement("p",{style:{fontSize:"14px",fontFamily:"var(--app-text-main-font)",fontWeight:"bold",color:"var(--app-color-gray-dark)",paddingLeft:"5px"}},"Invited ( ".concat(null===re||void 0===re||null===(Y=re.component_items)||void 0===Y?void 0:Y.filter(e=>"Invite"===e.type).length," )")),t.createElement(E.default,{className:b.sharesTable,withColumns:!1,modern:!0,columns:["User","Photo","Bio"],list:null===re||void 0===re||null===(H=re.component_items)||void 0===H||null===(V=H.filter(e=>"Invite"===e.type))||void 0===V?void 0:V.map(e=>{var l,o,i;const t=ee.find(l=>l.id===e.value);return{User:"".concat(null===t||void 0===t?void 0:t.first_name," ").concat(null===t||void 0===t?void 0:t.last_name),Photo:null!==(l=null===t||void 0===t?void 0:t.photo)&&void 0!==l?l:null===$||void 0===$?void 0:$.logo,Bio:null!==(o=null===t||void 0===t||null===(i=t.options)||void 0===i?void 0:i.info)&&void 0!==o?o:""}})})),Ie&&(null===re||void 0===re||null===(j=re.component_items)||void 0===j?void 0:j.filter(e=>"Join"===e.type).length)>0&&t.createElement(t.Fragment,null,t.createElement("p",{style:{fontSize:"14px",fontFamily:"var(--app-text-main-font)",fontWeight:"bold",color:"var(--app-color-gray-dark)",paddingLeft:"5px"}},"Requests to Join ( ".concat(null===re||void 0===re||null===(G=re.component_items)||void 0===G?void 0:G.filter(e=>"Join"===e.type).length," )")),t.createElement(E.default,{className:b.sharesTable,withColumns:!1,modern:!0,columns:["User","Photo","Requests"],list:null===re||void 0===re||null===(J=re.component_items)||void 0===J||null===(K=J.filter(e=>"Join"===e.type))||void 0===K?void 0:K.map(e=>{const l=ee.find(l=>l.id===e.value);var o,n,d;return l?{User:t.createElement("div",{style:{fontWeight:"bold"}},"".concat(null===l||void 0===l?void 0:l.first_name," ").concat(null===l||void 0===l?void 0:l.last_name)),Photo:null!==(o=null===l||void 0===l?void 0:l.photo)&&void 0!==o?o:null===$||void 0===$?void 0:$.logo,Requests:Ie?null!==re&&void 0!==re&&null!==(n=re.component_items)&&void 0!==n&&n.find(e=>"Payments"===e.type&&(null===e||void 0===e?void 0:e.value)===(null===l||void 0===l?void 0:l.id))?"Paid":t.createElement("div",{style:{display:"flex",justifyContent:"space-between",width:"100%"}},t.createElement("p",{style:{width:"50%"}},null===l||void 0===l||null===(d=l.options)||void 0===d?void 0:d.info),t.createElement(g.zx,{title:"Accept",clicked:()=>{var o,t,n;ce(!0),(0,x.KL)((0,i.Z)((0,i.Z)({},re),{},{component_items:re.component_items.filter(l=>l.id!==e.id)}),re.id,[...null!==(o=null===(t=re.shared_users)||void 0===t?void 0:t.map(e=>e.id))&&void 0!==o?o:[],null===l||void 0===l?void 0:l.id],re.title,null===re||void 0===re?void 0:re.is_complete,null===re||void 0===re||null===(n=re.shared_positions)||void 0===n?void 0:n.map(e=>null===e||void 0===e?void 0:e.id)).subscribe({next:e=>{ce(!1),se(null===e||void 0===e?void 0:e.data)},error:()=>ce(!1)})},style:{width:"100%",backgroundColor:"blue"},titleStyle:{fontSize:"10px"},loading:ue}),t.createElement(g.zx,{title:"Decline",clicked:()=>{var l,o;ce(!0),(0,x.KL)((0,i.Z)((0,i.Z)({},re),{},{component_items:re.component_items.filter(l=>l.id!==e.id)}),re.id,null===(l=re.shared_users)||void 0===l?void 0:l.map(e=>e.id),re.title,null===re||void 0===re?void 0:re.is_complete,null===re||void 0===re||null===(o=re.shared_positions)||void 0===o?void 0:o.map(e=>null===e||void 0===e?void 0:e.id)).subscribe({next:e=>{se(null===e||void 0===e?void 0:e.data),ce(!1)},error:()=>ce(!1)})},style:{width:"100%",backgroundColor:"red"},titleStyle:{fontSize:"10px"},loading:ue})):""}:{User:null===e||void 0===e?void 0:e.id}})})),!(pe||fe||Ie)&&Ne&&t.createElement(g.zx,{title:"Request to Join Club",clicked:()=>{var e,l,o;ce(!0),(0,x.np)({index:null===re||void 0===re||null===(e=re.component_items)||void 0===e?void 0:e.length,item_code:null===Q||void 0===Q||null===(l=Q.processModule)||void 0===l||null===(o=l.module)||void 0===o?void 0:o.id,type:"Join",value:null===ie||void 0===ie?void 0:ie.id},re.id).subscribe({next:()=>{_e(!0),ce(!1)},error:()=>ce(!1)})},style:{width:"100%",backgroundColor:"green"},loading:ue}),!(pe||Ie)&&!Ne&&t.createElement(g.zx,{title:"Join Club",clicked:()=>{var e,l,o;ce(!0),(0,x.KL)((0,i.Z)((0,i.Z)({},re),{},{component_items:re.component_items.filter(e=>("Invite"===e.type||"Join"===e.type)&&e.value!==ie.id)}),re.id,[...null!==(e=null===(l=re.shared_users)||void 0===l?void 0:l.map(e=>e.id))&&void 0!==e?e:[],null===ie||void 0===ie?void 0:ie.id],ae,null===re||void 0===re?void 0:re.is_complete,null===re||void 0===re||null===(o=re.shared_positions)||void 0===o?void 0:o.map(e=>null===e||void 0===e?void 0:e.id)).subscribe({next:e=>{var l;re.shared_users=null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.shared_users,me(!0),ce(!1)},error:()=>ce(!1)})},style:{width:"100%",backgroundColor:"blue"},loading:ue}),Ie&&t.createElement(g.zx,{title:"Invite People",clicked:()=>{be(!0)},style:{width:"100%",backgroundColor:"green"},loading:ue}),pe&&!Ie&&t.createElement(g.zx,{title:"Leave Club",clicked:()=>{var e;ce(!0),(0,x.KL)((0,i.Z)((0,i.Z)({},re),{},{component_items:re.component_items.filter(e=>e.value!==(null===ie||void 0===ie?void 0:ie.id))}),re.id,re.shared_users.filter(e=>e.id!==(null===ie||void 0===ie?void 0:ie.id)).map(e=>e.id),ae,null===re||void 0===re?void 0:re.is_complete,null===re||void 0===re||null===(e=re.shared_positions)||void 0===e?void 0:e.map(e=>null===e||void 0===e?void 0:e.id)).subscribe({next:e=>{var l;re.shared_users=null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.shared_users,se(re),me(!1),ce(!1)},error:()=>ce(!1)})},style:{width:y.tq?"100%":"300px",backgroundColor:"red"},loading:ue}))),Ae&&t.createElement(h.x4,{id:"MEETS"},t.createElement("div",{style:{width:"100%",minHeight:"60vh",overflow:"auto",zIndex:"-1"}},t.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end"}},t.createElement(g.zx,{light:!0,style:{display:Ie?"":"none"},clicked:()=>{he(!0)},icon:t.createElement("img",{src:w.IH})})),!ye&&t.createElement(q,{events:oe.filter(e=>"Expired"!==e.status&&e.module_id===(null===Ae||void 0===Ae?void 0:Ae.id)),isAdmin:Ie,onEventClick:e=>{const l=oe.find(l=>l.id===(null===e||void 0===e?void 0:e.event_id));le&&(0,A.navigateToTransaction)(ne,se,Ee,$,l,Se,ie,Q,te,X,we,ee,Ae)}})))),t.createElement("div",{className:ge?b.mobilepopupopen:b.mobilepopup,style:{display:ge?"":"none"}},t.createElement("div",{style:{width:"100%",height:"50vh",backgroundColor:"white",opacity:"0.9"},onClick:()=>be(!1)}),t.createElement("div",{className:b.mobilePopupActionContainer,style:{padding:"20px"}},t.createElement("p",{style:{fontSize:"14px",fontFamily:"var(--app-text-main-font)",fontWeight:"bold",color:"var(--app-color-gray-dark)",paddingLeft:"5px"}},"Invite"),t.createElement(E.default,{className:b.sharesTable,withColumns:!1,modern:!0,columns:["User","Photo","Bio"],list:ee.filter(e=>{var l,o,i;return!(null!==re&&void 0!==re&&null!==(l=re.shared_users)&&void 0!==l&&null!==(o=l.map(e=>e.id))&&void 0!==o&&o.includes(e.id)||null!==re&&void 0!==re&&null!==(i=re.component_items.filter(e=>"Invite"===e.type).map(e=>e.value))&&void 0!==i&&i.includes(e.id))}).map(e=>{var l,o,i;return{User:"".concat(null===e||void 0===e?void 0:e.first_name," ").concat(null===e||void 0===e?void 0:e.last_name),Photo:null!==(l=null===e||void 0===e?void 0:e.photo)&&void 0!==l?l:null===$||void 0===$?void 0:$.logo,Bio:null!==(o=null===e||void 0===e||null===(i=e.options)||void 0===i?void 0:i.info)&&void 0!==o?o:"",id:e.id}}),onListItemClick:e=>{var l,o,i;ce(!0),(0,x.np)({index:null===re||void 0===re||null===(l=re.component_items)||void 0===l?void 0:l.length,item_code:null===Q||void 0===Q||null===(o=Q.processModule)||void 0===o||null===(i=o.module)||void 0===i?void 0:i.id,type:"Invite",value:null===e||void 0===e?void 0:e.id},re.id).subscribe({next:()=>{ce(!1)},error:()=>ce(!1)})}}))),t.createElement("div",{className:ye?b.mobilepopupopen:b.mobilepopup,style:{display:ye?"":"none"}},t.createElement("div",{style:{width:"100%",height:"50vh",backgroundColor:"white",opacity:"0.9"},onClick:()=>he(!1)}),t.createElement("div",{className:b.mobilePopupActionContainer},t.createElement(g.zx,{title:"Create one-off meet",style:{width:"100%"},clicked:()=>{const e=e=>{var l,o,t,n,d,a;const r=e.steps.filter(l=>{var o,i,t,n,d,a;return void 0==(null===l||void 0===l||null===(o=l.options)||void 0===o?void 0:o.showStepAll)||1==(null===l||void 0===l||null===(i=l.options)||void 0===i?void 0:i.showStepAll)||0==(null===l||void 0===l||null===(t=l.options)||void 0===t?void 0:t.showStepAll)&&(null===l||void 0===l||null===(n=l.options)||void 0===n||null===(d=n.showOnly)||void 0===d?void 0:d.filter(e=>ie.positions.map(e=>e.id).indexOf(e)>-1).length)>0||(null===l||void 0===l||null===(a=l.options)||void 0===a?void 0:a.showStepAuthor)&&(null===ie||void 0===ie?void 0:ie.id)===(null===e||void 0===e?void 0:e.user_id)}).map((e,l)=>(0,i.Z)((0,i.Z)({},e),{},{rank:l+1}));N.h.dispatch((0,T.q4)(e)),N.h.dispatch((0,T.an)([e],m.Qc)),N.h.dispatch((0,T.q4)((0,i.Z)((0,i.Z)({},e),{},{completeSteps:e.steps,steps:r,stepIndex:2,module_id:Ae.id,module:Ae,isUpdating:!1}))),Se({action:f._U.setCurrentStep,value:null===e||void 0===e?void 0:e.steps[2]}),Se({action:f._U.setModuleItems,value:re.component_items}),Se({action:f._U.setModuleNewStepComponents,value:[]}),Se({action:f._U.setComponents,value:[]});const s=[...null!==(l=null===(o=r[2])||void 0===o?void 0:o.component_blueprints)&&void 0!==l?l:[]];if((null===s||void 0===s?void 0:s.length)>0){var v,u;let e=null===(v=s.find(e=>e.selected_fields.find(e=>"Club"===e.field_name)))||void 0===v?void 0:v.selected_fields.find(e=>"Club"===e.field_name);e&&(e.value=ae),e=null===(u=s.find(e=>e.selected_fields.find(e=>"Sport"===e.field_name)))||void 0===u?void 0:u.selected_fields.find(e=>"Sport"===e.field_name),e&&(e.value=Pe),Se({action:f._U.setComponentBlueprints,value:s}),Se({action:f._U.setModuleNewStepComponents,value:s})}(null===Q||void 0===Q||null===(t=Q.processModule)||void 0===t||null===(n=t.steps)||void 0===n?void 0:n.length)>0&&(null===Q||void 0===Q||null===(d=Q.processModule)||void 0===d||null===(a=d.steps)||void 0===a||a.filter(e=>{var l;return null===e||void 0===e||null===(l=e.component_blueprints)||void 0===l?void 0:l.filter(e=>e.selected_fields.filter(e=>e.value=void 0))}))};ne.find(e=>e.id===Ae.procedure.id)?(e(ne.find(e=>e.id===Ae.procedure.id)),he(!1)):(ce(!0),(0,D.zJ)(Ae.procedure.id).pipe((0,C.P)()).subscribe({next:l=>{ce(!1),e(l),he(!1)},error:e=>{}}))}}))))}),F=e=>{var l,o,n,d,a,r,s,v,u,c,f,_,N,T,D,P,A,z,U,F,W,q,B,Y,H,V,j,G,J,K,Q,X,$,ee,le,oe,ie,te,ne,de;const{selectedComponent:ae,begunModule:re,goto:se}=e,{companyData:ve,companyUsersArray:ue,components:ce}=(0,p.v9)(e=>e.flowReducer),{authenticatedUser:pe}=(0,p.v9)(e=>e.authReducer),[me,fe]=(0,t.useState)(!1),[_e,ye]=(0,t.useState)((null===ae||void 0===ae||null===(l=ae.shared_users)||void 0===l||null===(o=l.filter(e=>(null===e||void 0===e?void 0:e.id)===(null===pe||void 0===pe?void 0:pe.id)))||void 0===o?void 0:o.length)>0),[he,ge]=(0,t.useState)((null===ae||void 0===ae||null===(n=ae.component_items)||void 0===n||null===(d=n.filter(e=>{var l,o;return(null===e||void 0===e?void 0:e.value)===(null===pe||void 0===pe?void 0:pe.id)&&("Request"===(null===e||void 0===e?void 0:e.type)||"Waitlist"===(null===e||void 0===e?void 0:e.type))&&(null===e||void 0===e?void 0:e.item_code)===(null===re||void 0===re||null===(l=re.processModule)||void 0===l||null===(o=l.module)||void 0===o?void 0:o.id)}))||void 0===d?void 0:d.length)>0),[be]=(0,t.useState)(null===ae||void 0===ae?void 0:ae.component_fields.find(e=>"Status"===e.field_name)),[xe,Ee]=(0,t.useState)(null===ae||void 0===ae||null===(a=ae.component_items)||void 0===a?void 0:a.find(e=>"Payments"===e.type&&(null===e||void 0===e?void 0:e.value)===(null===pe||void 0===pe?void 0:pe.id))),[Ce,we]=(0,t.useState)(""),[Me,Se]=(0,t.useState)(!1),[ke,Ze]=(0,t.useState)({type:"Match"}),[Ie,Ne]=(0,t.useState)(),Te=(null===pe||void 0===pe?void 0:pe.id)===(null===ae||void 0===ae||null===(r=ae.created_by)||void 0===r?void 0:r.id),De=(null===ae||void 0===ae||null===(s=ae.component_fields.find(e=>"Sport"===e.field_name))||void 0===s||s.value,null===ae||void 0===ae||null===(v=ae.component_fields.find(e=>"Type"===e.field_name))||void 0===v||v.value,null===ae||void 0===ae||null===(u=ae.component_fields.find(e=>"Notes"===e.field_name))||void 0===u||u.value,null===ae||void 0===ae?void 0:ae.component_fields.find(e=>"Club"===e.field_name)),Pe=ce.find(e=>{var l;return e.module_id===(null===De||void 0===De||null===(l=De.options)||void 0===l?void 0:l.module_id)&&(null===e||void 0===e?void 0:e.component_fields.find(e=>e.value===(null===De||void 0===De?void 0:De.value)))}),Ae=(null===Pe||void 0===Pe||Pe.component_fields.find(e=>"Value Button"===e.data_type_name&&(null===e||void 0===e?void 0:e.value)),c=null===Pe||void 0===Pe||null===(f=Pe.component_fields.find(e=>"My Community"===e.field_name))||void 0===f?void 0:f.value,null!==(_=null===ae||void 0===ae?void 0:ae.component_fields.find(e=>"Private"===e.field_name))&&void 0!==_&&_),Oe="".concat(I()(new Date(null===ae||void 0===ae||null===(N=ae.component_fields.find(e=>"Meet Date"===e.field_name))||void 0===N?void 0:N.value)).format("DD MMM YYYY hh:mm A")),Le=null===ae||void 0===ae?void 0:ae.component_fields.find(e=>"Fee"===e.field_name),ze=()=>t.createElement("div",null,!(_e||Te)&&!Ae&&!("Closed"===(null===ae||void 0===ae?void 0:ae.status)||"Done"===(null===ae||void 0===ae?void 0:ae.status)||"Cancelled"===(null===ae||void 0===ae?void 0:ae.status)||"Expired"===(null===ae||void 0===ae?void 0:ae.status))&&t.createElement(g.zx,{title:"Join Meet",clicked:()=>{var e,l,o;fe(!0),(0,x.KL)((0,i.Z)((0,i.Z)({},ae),{},{component_items:ae.component_items.filter(e=>e.value!==pe.id&&"Unavailable"===e.type)}),ae.id,[...null!==(e=null===(l=ae.shared_users)||void 0===l?void 0:l.map(e=>e.id))&&void 0!==e?e:[],null===pe||void 0===pe?void 0:pe.id],null===ae||void 0===ae?void 0:ae.title,null===ae||void 0===ae?void 0:ae.is_complete,null===ae||void 0===ae||null===(o=ae.shared_positions)||void 0===o?void 0:o.map(e=>null===e||void 0===e?void 0:e.id)).subscribe({next:e=>{var l;ae.shared_users=null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.shared_users,ye(!0),fe(!1)},error:()=>fe(!1)})},style:{width:y.tq?"100%":"300px",backgroundColor:"green"},loading:me}),!_e&&Te&&!("Closed"===(null===ae||void 0===ae?void 0:ae.status)||"Done"===(null===ae||void 0===ae?void 0:ae.status)||"Cancelled"===(null===ae||void 0===ae?void 0:ae.status)||"Expired"===(null===ae||void 0===ae?void 0:ae.status))&&t.createElement(g.zx,{title:"Participate as Player",clicked:()=>{var e,l,o;fe(!0),(0,x.KL)((0,i.Z)((0,i.Z)({},ae),{},{component_items:ae.component_items.filter(e=>e.value!==pe.id&&"Unavailable"===e.type)}),ae.id,[...null!==(e=null===(l=ae.shared_users)||void 0===l?void 0:l.map(e=>e.id))&&void 0!==e?e:[],null===pe||void 0===pe?void 0:pe.id],null===ae||void 0===ae?void 0:ae.title,null===ae||void 0===ae?void 0:ae.is_complete,null===ae||void 0===ae||null===(o=ae.shared_positions)||void 0===o?void 0:o.map(e=>null===e||void 0===e?void 0:e.id)).subscribe({next:e=>{var l;ae.shared_users=null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.shared_users,ye(!0),fe(!1)},error:()=>fe(!1)})},style:{width:y.tq?"100%":"300px",backgroundColor:"green"},loading:me}),_e&&Le&&!Te&&!xe&&t.createElement(g.zx,{disabled:+(null===pe||void 0===pe?void 0:pe.wallet)<+(null===Le||void 0===Le?void 0:Le.value),title:"Pay ".concat(null===Le||void 0===Le?void 0:Le.field_name),clicked:()=>{+(null===pe||void 0===pe?void 0:pe.wallet)>+(null===Le||void 0===Le?void 0:Le.value)?(fe(!0),(0,L.e_)({user_id:pe.id,id:(0,m.mR)(),total:-+(null===Le||void 0===Le?void 0:Le.value),product:"PY-".concat(null===ae||void 0===ae?void 0:ae.id),notes:"Wallet",quantity:1}).pipe((0,C.P)()).subscribe({next:()=>{var e,l,o,i,t;pe.wallet=+(+(null!==(e=null===pe||void 0===pe?void 0:pe.wallet)&&void 0!==e?e:0)-+(null===Le||void 0===Le?void 0:Le.value)),(0,x.np)({index:null===ae||void 0===ae||null===(l=ae.component_items)||void 0===l?void 0:l.length,item_code:null===re||void 0===re||null===(o=re.processModule)||void 0===o||null===(i=o.module)||void 0===i?void 0:i.id,type:"Payments",value:null===pe||void 0===pe?void 0:pe.id,alt_value:null===ae||void 0===ae||null===(t=ae.created_by)||void 0===t?void 0:t.id,total:null===Le||void 0===Le?void 0:Le.value},ae.id).subscribe({next:e=>{var l,o;Ee(null===e||void 0===e||null===(l=e.component_items)||void 0===l?void 0:l.find(e=>"Payments"===e.type&&(null===e||void 0===e?void 0:e.value)===(null===pe||void 0===pe?void 0:pe.id))),(0,L.e_)({user_id:null===ae||void 0===ae||null===(o=ae.created_by)||void 0===o?void 0:o.id,id:(0,m.mR)(),total:+(null===Le||void 0===Le?void 0:Le.value),product:"CR-".concat(null===ae||void 0===ae?void 0:ae.id),notes:"Wallet",quantity:1}).pipe((0,C.P)()).subscribe({next:()=>fe(!1),error:()=>fe(!1)})},error:()=>fe(!1)})}})):we("Insufficient wallet balance. ( Available: ".concat(null===pe||void 0===pe?void 0:pe.wallet,")"))},style:{width:y.tq?"100%":"300px",backgroundColor:"green"},loading:me}),Ce&&t.createElement("p",{style:{fontFamily:"var(--app-text-mobile-font)",fontSize:"14px",fontWeight:"bold"},onClick:()=>we("")},Ce),_e&&!Te&&!("Closed"===(null===ae||void 0===ae?void 0:ae.status)||"Done"===(null===ae||void 0===ae?void 0:ae.status)||"Cancelled"===(null===ae||void 0===ae?void 0:ae.status)||"Expired"===(null===ae||void 0===ae?void 0:ae.status))&&t.createElement(g.zx,{title:"Cant Join",clicked:()=>{var e,l,o,t,n,d,a;fe(!0),(0,x.KL)((0,i.Z)((0,i.Z)({},ae),{},{component_items:[...null!==(e=null===ae||void 0===ae?void 0:ae.component_items)&&void 0!==e?e:[],{index:null===ae||void 0===ae||null===(l=ae.component_items)||void 0===l?void 0:l.length,item_code:null===re||void 0===re||null===(o=re.processModule)||void 0===o||null===(t=o.module)||void 0===t?void 0:t.id,type:"Unavailable",value:null===pe||void 0===pe?void 0:pe.id}]}),ae.id,null===(n=ae.shared_users)||void 0===n||null===(d=n.filter(e=>e.id!==(null===pe||void 0===pe?void 0:pe.id)))||void 0===d?void 0:d.map(e=>e.id),null===ae||void 0===ae?void 0:ae.title,null===ae||void 0===ae?void 0:ae.is_complete,null===ae||void 0===ae||null===(a=ae.shared_positions)||void 0===a?void 0:a.map(e=>null===e||void 0===e?void 0:e.id)).subscribe({next:e=>{var l,o;ae.shared_users=null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.shared_users,ae.component_items=null===e||void 0===e||null===(o=e.data)||void 0===o?void 0:o.component_items,ye(!1),fe(!1)},error:()=>fe(!1)})},style:{width:y.tq?"100%":"300px"},loading:me}),!(_e||Te)&&!he&&Ae&&!("Closed"===(null===ae||void 0===ae?void 0:ae.status)||"Done"===(null===ae||void 0===ae?void 0:ae.status)||"Cancelled"===(null===ae||void 0===ae?void 0:ae.status)||"Expired"===(null===ae||void 0===ae?void 0:ae.status))&&t.createElement(g.zx,{title:"Request to Join Meet",clicked:()=>{var e,l,o;fe(!0),(0,x.np)({index:null===ae||void 0===ae||null===(e=ae.component_items)||void 0===e?void 0:e.length,item_code:null===re||void 0===re||null===(l=re.processModule)||void 0===l||null===(o=l.module)||void 0===o?void 0:o.id,type:"Request",value:null===pe||void 0===pe?void 0:pe.id},ae.id).subscribe({next:()=>{ge(!0),fe(!1)},error:()=>fe(!1)})},style:{width:y.tq?"100%":"300px",backgroundColor:"var(--app-color-blue)"},loading:me})),Re=()=>{var e,l,o,n,d;const a=[...ue,pe].find(e=>e.id===ke.value),r=[...ue,pe].find(e=>e.id===ke.alt_value),s=JSON.parse(ke.item_code);return t.createElement("div",{className:b.mobilePopupActionContainer},t.createElement("div",{style:{fontFamily:"var(--app-text-mobile-font)",fontSize:"18px",fontWeight:"bold"}},null===s||void 0===s?void 0:s.round),t.createElement("div",{style:{fontFamily:"var(--app-text-mobile-font)",fontSize:"12px",marginTop:"5px"}},"Date: ".concat(I()(null===s||void 0===s?void 0:s.date).format("DD MMMM YYYY HH:mm"))),t.createElement("div",{style:{fontFamily:"var(--app-text-mobile-font)",fontSize:"12px",marginTop:"5px"}},"Venue: ".concat(null===s||void 0===s?void 0:s.court)),t.createElement("hr",null),t.createElement("div",{style:{display:"flex",justifyContent:"space-between",width:"100%"}},t.createElement("p",{style:{fontSize:"14px",fontFamily:"var(--app-text-main-font)",fontWeight:"bold",marginRight:"20px",width:"50%"}},"".concat(null!==(e=null===a||void 0===a?void 0:a.first_name)&&void 0!==e?e:"Player"," ").concat(null!==(l=null===a||void 0===a?void 0:a.last_name)&&void 0!==l?l:"1")),t.createElement("p",{style:{textAlign:"right",fontSize:"14px",fontFamily:"var(--app-text-main-font)",fontWeight:"bold",marginRight:"20px",width:"50%"}},"".concat(null!==(o=null===r||void 0===r?void 0:r.first_name)&&void 0!==o?o:"Player"," ").concat(null!==(n=null===r||void 0===r?void 0:r.last_name)&&void 0!==n?n:"2"))),null===s||void 0===s||null===(d=s.matches)||void 0===d?void 0:d.map((e,l)=>t.createElement("div",{key:l,style:{display:"flex",justifyContent:"space-between",width:"100%"}},t.createElement("input",{defaultValue:null===e||void 0===e?void 0:e.p1,style:{textAlign:"center",width:"50px",height:"50px",margin:"10px"},onChange:l=>{e.p1=l.target.value,ke.item_code=JSON.stringify(s)}}),t.createElement("p",{style:{fontSize:"14px",fontFamily:"var(--app-text-main-font)"}},"SET ",e.set),t.createElement("input",{defaultValue:null===e||void 0===e?void 0:e.p2,style:{textAlign:"center",width:"50px",height:"50px",margin:"10px"},onChange:l=>{e.p2=l.target.value,ke.item_code=JSON.stringify(s)}}))),t.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},(Te||a.id===pe.id||r.id===pe.id)&&t.createElement(g.zx,{light:!0,style:{display:"",backgroundColor:"rgb(246,244,236)"},clicked:()=>{fe(!0),(0,x.np)(ke,ae.id).subscribe({next:e=>{ae.component_items=e.data.component_items,fe(!1),Se(!1)},error:()=>fe(!1)})},title:"UPDATE",loading:me}),(Te||a.id===pe.id||r.id===pe.id)&&t.createElement(g.zx,{light:!0,style:{display:"",backgroundColor:"rgb(246,244,236)"},clicked:()=>{var e;s.matches.push({p1:0,p2:0,set:(null===s||void 0===s||null===(e=s.matches)||void 0===e?void 0:e.length)+1}),Ze((0,i.Z)((0,i.Z)({},ke),{},{item_code:JSON.stringify(s)}))},title:"ADD SET"})))};return t.createElement("div",null,t.createElement("div",{style:{fontFamily:"var(--app-text-mobile-font)",fontSize:y.tq?"18px":"20px",fontWeight:"bold",marginTop:y.tq?"":"50px"}},null===ae||void 0===ae||null===(T=ae.title)||void 0===T?void 0:T.toUpperCase()),t.createElement("div",{style:{fontFamily:"var(--app-text-mobile-font)",fontSize:"12px",marginTop:"5px"}},Oe),t.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},_e&&!Te&&t.createElement("p",{style:{fontFamily:"var(--app-text-mobile-font)",fontSize:"14px",fontWeight:"bold",marginTop:"30px"}},"You are a participant of this meet"),Te&&t.createElement("p",{style:{fontFamily:"var(--app-text-mobile-font)",fontSize:"14px",fontWeight:"bold",marginTop:"30px"}},"You are the organizer of this meet"),!Te&&Le&&t.createElement("p",{style:{fontFamily:"var(--app-text-mobile-font)",fontSize:"14px",fontWeight:"bold",marginTop:"30px"}},xe?"PAID":"FEE (".concat(null===Le||void 0===Le?void 0:Le.value,")"))),t.createElement(h.mQ,{style:{width:"100%",fontSize:y.tq?"16px":"20px",marginTop:"20px"}},t.createElement(h.td,{style:{fontFamily:"var(--app-text-mobile-font)",fontSize:y.tq?"14px":"16px"}},t.createElement(h.OK,null,"DETAILS"),t.createElement(h.OK,null,"PARTICIPANTS"),!("New"===ae.status||"None"===ae.status||"Reopen"===ae.status)&&t.createElement(h.OK,null,"GAMES")),t.createElement(h.x4,{id:"DETAILS"},t.createElement("div",{style:{width:"100%",minHeight:"60vh",overflow:"auto"}},t.createElement("div",{className:b.centeredDiv,style:{width:"inherit",fontSize:"14px",marginTop:"20px"}},e.children,Te&&"Expired"!==(null===ae||void 0===ae?void 0:ae.status)&&t.createElement("div",{style:{width:"100%",display:""}},t.createElement(O.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-light)"},className:b.multiselectComponent,visible:!0,mandatory:!1,value:null===be||void 0===be?void 0:be.value,items:null===be||void 0===be||null===(D=be.options)||void 0===D||null===(P=D.list)||void 0===P?void 0:P.map(e=>({label:e,value:e})),onChange:e=>{var l,o;ae.status=e,be.value=e,fe(!0),(0,x.KL)(ae,ae.id,null===(l=ae.shared_users)||void 0===l?void 0:l.map(e=>e.id),null===ae||void 0===ae?void 0:ae.title,null===ae||void 0===ae?void 0:ae.is_complete,null===ae||void 0===ae||null===(o=ae.shared_positions)||void 0===o?void 0:o.map(e=>null===e||void 0===e?void 0:e.id)).subscribe({next:e=>{fe(!1)},error:()=>fe(!1)})},fieldLabel:"Status",placeholder:"Select status..."}))))),t.createElement(h.x4,{id:"PARTICIPANTS"},t.createElement("div",{style:{justifyContent:"left",width:y.tq?"100%":"60%",minHeight:"50vh",overflow:"auto",ppadding:y.tq?"":"0 30%"}},!Te&&t.createElement("p",{style:{fontSize:"14px",fontFamily:"var(--app-text-main-font)",fontWeight:"bold",color:"var(--app-color-gray-dark)",paddingLeft:"5px"}},"Organizer"),!Te&&t.createElement("div",{className:b.filtersContainer},t.createElement(k.Z,{simple:!0,photo:null!==(A=null===pe||void 0===pe?void 0:pe.photo)&&void 0!==A?A:"https://s3-symbol-logo.tradingview.com/logo-yazilim--600.png",email:"",position:null!==(z=null===pe||void 0===pe||null===(U=pe.options)||void 0===U?void 0:U.info)&&void 0!==z?z:"",firstName:t.createElement("div",{style:{fontWeight:"bold"}},"".concat(null===ae||void 0===ae||null===(F=ae.created_by)||void 0===F?void 0:F.first_name," ").concat(null===ae||void 0===ae||null===(W=ae.created_by)||void 0===W?void 0:W.last_name)),cardClicked:()=>{},width:"100%"})),(null===ae||void 0===ae||null===(q=ae.shared_users)||void 0===q?void 0:q.length)>0&&t.createElement(t.Fragment,null,t.createElement("p",{style:{fontSize:"14px",fontFamily:"var(--app-text-main-font)",fontWeight:"bold",color:"var(--app-color-gray-dark)",paddingLeft:"5px"}},"Participants ( ".concat(null===ae||void 0===ae||null===(B=ae.shared_users)||void 0===B?void 0:B.length," )")),t.createElement(E.default,{className:b.sharesTable,withColumns:!1,modern:!0,columns:["User","Photo","Bio","Pay"],list:null===ae||void 0===ae||null===(Y=ae.shared_users)||void 0===Y?void 0:Y.map(e=>{var l,o,i,n;const d=ue.find(l=>l.id===e.id);return d?{User:t.createElement("div",{style:{fontWeight:"bold"}},"".concat(null===d||void 0===d?void 0:d.first_name," ").concat(null===d||void 0===d?void 0:d.last_name)),Photo:null!==(l=null===d||void 0===d?void 0:d.photo)&&void 0!==l?l:null===ve||void 0===ve?void 0:ve.logo,Bio:null!==(o=null===d||void 0===d||null===(i=d.options)||void 0===i?void 0:i.info)&&void 0!==o?o:"",Pay:Le&&Te?null!==ae&&void 0!==ae&&null!==(n=ae.component_items)&&void 0!==n&&n.find(e=>"Payments"===e.type&&(null===e||void 0===e?void 0:e.value)===(null===d||void 0===d?void 0:d.id))?"Paid":t.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},t.createElement("p",{style:{fontFamily:"var(--app-text-mobile-font)",fontSize:"14px",fontWeight:"bold"}},"Unpaid"),t.createElement(g.zx,{title:"Remove",clicked:()=>{var e,l;fe(!0),(0,x.KL)(ae,ae.id,null===(e=ae.shared_users)||void 0===e?void 0:e.filter(e=>e.id!==(null===d||void 0===d?void 0:d.id)).map(e=>e.id),null===ae||void 0===ae?void 0:ae.title,null===ae||void 0===ae?void 0:ae.is_complete,null===ae||void 0===ae||null===(l=ae.shared_positions)||void 0===l?void 0:l.map(e=>null===e||void 0===e?void 0:e.id)).subscribe({next:e=>{var l;ae.component_items=null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.component_items,ye(!1),fe(!1)},error:()=>fe(!1)})},style:{width:"100px"},loading:me})):""}:{User:null===e||void 0===e?void 0:e.id}})})),Te&&(null===ae||void 0===ae||null===(H=ae.component_items)||void 0===H?void 0:H.filter(e=>"Unavailable"===e.type).length)>0&&t.createElement(t.Fragment,null,t.createElement("p",{style:{fontSize:"14px",fontFamily:"var(--app-text-main-font)",fontWeight:"bold",color:"var(--app-color-gray-dark)",paddingLeft:"5px"}},"Unavailable ( ".concat(null===ae||void 0===ae||null===(V=ae.component_items)||void 0===V?void 0:V.filter(e=>"Unavailable"===e.type).length," )")),t.createElement(E.default,{className:b.sharesTable,withColumns:!1,modern:!0,columns:["User","Photo","Bio"],list:null===ae||void 0===ae||null===(j=ae.component_items)||void 0===j||null===(G=j.filter(e=>"Unavailable"===e.type))||void 0===G?void 0:G.map(e=>{var l,o,i;const t=ue.find(l=>l.id===e.value);return{User:"".concat(null===t||void 0===t?void 0:t.first_name," ").concat(null===t||void 0===t?void 0:t.last_name),Photo:null!==(l=null===t||void 0===t?void 0:t.photo)&&void 0!==l?l:null===ve||void 0===ve?void 0:ve.logo,Bio:null!==(o=null===t||void 0===t||null===(i=t.options)||void 0===i?void 0:i.info)&&void 0!==o?o:""}})})),Te&&(null===ae||void 0===ae||null===(J=ae.component_items)||void 0===J?void 0:J.filter(e=>"Request"===e.type||"Waitlist"===e.type).length)>0&&t.createElement(t.Fragment,null,t.createElement("p",{style:{fontSize:"14px",fontFamily:"var(--app-text-main-font)",fontWeight:"bold",color:"var(--app-color-gray-dark)",paddingLeft:"5px"}},"Request to Join ( ".concat(null===ae||void 0===ae||null===(K=ae.component_items)||void 0===K?void 0:K.filter(e=>"Request"===e.type||"Waitlist"===e.type).length," )")),null===ae||void 0===ae||null===(Q=ae.component_items)||void 0===Q||null===(X=Q.filter(e=>"Request"===e.type||"Waitlist"===e.type))||void 0===X?void 0:X.map((e,l)=>{const o=ue.find(l=>l.id===e.value);return t.createElement("div",{key:l,style:{display:"flex"},className:b.filtersContainer},t.createElement("p",{style:{fontSize:"14px",fontFamily:"var(--app-text-main-font)",width:"200px",marginRight:"20px"}},"".concat(null===o||void 0===o?void 0:o.first_name," ").concat(null===o||void 0===o?void 0:o.last_name)),t.createElement(g.zx,{title:"Approve",clicked:()=>{var e,l,t;fe(!0),(0,x.KL)((0,i.Z)((0,i.Z)({},ae),{},{component_items:ae.component_items.filter(e=>e.value!==o.id&&("Request"===e.type||"Waitlist"===e.type))}),ae.id,[...null!==(e=null===(l=ae.shared_users)||void 0===l?void 0:l.map(e=>e.id))&&void 0!==e?e:[],null===o||void 0===o?void 0:o.id],null===ae||void 0===ae?void 0:ae.title,null===ae||void 0===ae?void 0:ae.is_complete,null===ae||void 0===ae||null===(t=ae.shared_positions)||void 0===t?void 0:t.map(e=>null===e||void 0===e?void 0:e.id)).subscribe({next:e=>{var l,o;ae.shared_users=null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.shared_users,ae.component_items=null===e||void 0===e||null===(o=e.data)||void 0===o?void 0:o.component_items,fe(!1)},error:()=>fe(!1)})},style:{width:"100px",backgroundColor:"green",fontSize:"10px"},titleStyle:{fontSize:"10px"},loading:me}),t.createElement(g.zx,{title:"Decline",clicked:()=>{var e,l;fe(!0),(0,x.KL)((0,i.Z)((0,i.Z)({},ae),{},{component_items:ae.component_items.filter(e=>e.value!==o.id&&("Request"===e.type||"Waitlist"===e.type))}),ae.id,null===(e=ae.shared_users)||void 0===e?void 0:e.map(e=>e.id),null===ae||void 0===ae?void 0:ae.title,null===ae||void 0===ae?void 0:ae.is_complete,null===ae||void 0===ae||null===(l=ae.shared_positions)||void 0===l?void 0:l.map(e=>null===e||void 0===e?void 0:e.id)).subscribe({next:e=>{var l;ae.component_items=null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.component_items,ye(!1),fe(!1)},error:()=>fe(!1)})},style:{width:"100px"},titleStyle:{fontSize:"10px"},loading:me}),"Request"===e.type?t.createElement(g.zx,{title:"Waitlist",clicked:()=>{fe(!0),(0,x.np)((0,i.Z)((0,i.Z)({},e),{},{type:"Waitlist"}),ae.id).subscribe({next:l=>{e.type="Waitlist",fe(!1)},error:()=>fe(!1)})},style:{width:"100px",backgroundColor:"orange"},titleStyle:{fontSize:"10px"},loading:me}):t.createElement("p",{style:{fontSize:"16px",fontFamily:"var(--app-text-main-font)",fontWeight:"bold"}},"Waitlisted"))})),he&&t.createElement(t.Fragment,null,t.createElement("p",{style:{fontSize:"14px",fontFamily:"var(--app-text-main-font)",fontWeight:"bold",color:"var(--app-color-gray-dark)",paddingLeft:"5px"}},(null===($=ae.component_items)||void 0===$||null===(ee=$.filter(e=>{var l,o;return(null===e||void 0===e?void 0:e.value)===(null===pe||void 0===pe?void 0:pe.id)&&"Request"===(null===e||void 0===e?void 0:e.type)&&(null===e||void 0===e?void 0:e.item_code)===(null===re||void 0===re||null===(l=re.processModule)||void 0===l||null===(o=l.module)||void 0===o?void 0:o.id)}))||void 0===ee?void 0:ee.length)>0?"Pending Request":"Waitlisted"),t.createElement("div",{className:b.filtersContainer},t.createElement(k.Z,{simple:!0,photo:null!==(le=null===pe||void 0===pe?void 0:pe.photo)&&void 0!==le?le:"https://s3-symbol-logo.tradingview.com/logo-yazilim--600.png",email:"",position:null!==(oe=null===pe||void 0===pe||null===(ie=pe.options)||void 0===ie?void 0:ie.info)&&void 0!==oe?oe:"",firstName:t.createElement("div",{style:{fontWeight:"bold"}},"".concat(null===pe||void 0===pe?void 0:pe.first_name," ").concat(null===pe||void 0===pe?void 0:pe.last_name)),cardClicked:()=>{},width:"100%"}))),t.createElement(ze,null))),!("New"===ae.status||"None"===ae.status||"Reopen"===ae.status)&&t.createElement(h.x4,{id:"GAMES"},t.createElement("div",{style:{width:"100%",minHeight:"50vh",overflow:"auto",padding:y.tq?"":"0 30%"}},se&&Te&&t.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end"}},t.createElement(g.zx,{light:!0,style:{display:""},clicked:()=>{Se(!0),Ze({type:"Match"})},icon:t.createElement("img",{src:w.IH})})),t.createElement("p",{style:{fontSize:"14px",fontFamily:"var(--app-text-main-font)",fontWeight:"bold",color:"var(--app-color-gray-dark)",paddingLeft:"5px"}},"Matches ( ".concat(null===ae||void 0===ae||null===(te=ae.component_items)||void 0===te?void 0:te.filter(e=>"Match"===e.type).length," )")),null===ae||void 0===ae||null===(ne=ae.component_items)||void 0===ne||null===(de=ne.filter(e=>"Match"===e.type))||void 0===de?void 0:de.map((e,l)=>{var o,i,n,d;const a=[...ue,pe].find(l=>l.id===e.value),r=[...ue,pe].find(l=>l.id===e.alt_value),s=JSON.parse(e.item_code),v=s.matches.map(e=>"  ".concat(e.p1,"-").concat(e.p2,"  ")).toString();return t.createElement("div",{key:l,className:b.filtersContainer,onClick:()=>{se&&(Ze(e),Se(!0))}},t.createElement("div",{style:{display:"flex",width:"100%",justifyContent:"space-between"}},t.createElement("div",{style:{fontSize:"14px",fontFamily:"var(--app-text-main-font)",fontWeight:"bold",marginRight:"20px"}},"".concat(null===s||void 0===s?void 0:s.round)),t.createElement("div",{style:{fontSize:"14px",fontFamily:"var(--app-text-main-font)",fontWeight:"bold",marginRight:"20px"}},"".concat(v))),t.createElement("hr",{style:{border:"0.5px solid var(--app-color-gray-light)"}}),t.createElement("div",{style:{display:"flex",marginTop:"5px",width:"100%",justifyContent:"space-between"}},t.createElement("div",{style:{fontSize:"14px",fontFamily:"var(--app-text-main-font)",fontWeight:"bold",marginRight:"20px"}},"".concat(null!==(o=null===r||void 0===r?void 0:r.first_name)&&void 0!==o?o:"Player"," ").concat(null!==(i=null===r||void 0===r?void 0:r.last_name)&&void 0!==i?i:"1")),t.createElement("div",{style:{fontSize:"14px",fontFamily:"var(--app-text-main-font)",fontWeight:"bold",marginRight:"20px"}},"".concat(null!==(n=null===a||void 0===a?void 0:a.first_name)&&void 0!==n?n:"Player"," ").concat(null!==(d=null===a||void 0===a?void 0:a.last_name)&&void 0!==d?d:"2"))))})),t.createElement("div",{className:Me?b.mobilepopupopen:b.mobilepopup,style:{display:Me?"":"none"}},t.createElement("div",{style:{width:"100%",height:"20vh",backgroundColor:"white",opacity:"0.9"},onClick:()=>Se(!1)}),null!==ke&&void 0!==ke&&ke.id?t.createElement(Re,null):t.createElement("div",{className:b.mobilePopupActionContainer},t.createElement(O.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-light)"},className:b.multiselectComponent,visible:!0,mandatory:!1,items:ae.shared_users.map((e,l)=>{const o=ue.find(l=>l.id===e.id);return o?{label:"".concat(null===o||void 0===o?void 0:o.first_name," ").concat(null===o||void 0===o?void 0:o.last_name),value:e.id}:{label:"Player ".concat(l+1),value:l}}),onChange:e=>{Ze((0,i.Z)((0,i.Z)({},ke),{},{value:e}))},fieldLabel:"Player 1",placeholder:"Select player 1"}),t.createElement(O.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-light)"},className:b.multiselectComponent,visible:!0,mandatory:!1,items:ae.shared_users.map(e=>{const l=ue.find(l=>l.id===e.id);return{label:"".concat(l.first_name," ").concat(l.last_name),value:e.id}}),onChange:e=>{Ze((0,i.Z)((0,i.Z)({},ke),{},{alt_value:e}))},fieldLabel:"Player 2",placeholder:"Select player 2"}),t.createElement(O.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-light)"},className:b.multiselectComponent,visible:!0,mandatory:!1,items:[{label:"Round 1",value:"Round 1"},{label:"Round 2",value:"Round 2"},{label:"Round 3",value:"Round 3"},{label:"Round 4",value:"Round 4"},{label:"Round 5",value:"Round 5"},{label:"Round 6",value:"Round 6"},{label:"Round 7",value:"Round 7"},{label:"Round 8",value:"Round 8"},{label:"Round 9",value:"Round 9"}],onChange:e=>{var l;const o=JSON.parse(null!==(l=null===ke||void 0===ke?void 0:ke.item_code)&&void 0!==l?l:"{}");o.round=e,o.matches=[{p1:0,p2:0,set:1}],Ze((0,i.Z)((0,i.Z)({},ke),{},{item_code:JSON.stringify(o)}))},fieldLabel:"Round",placeholder:"Select Round"}),t.createElement("label",{className:b.fieldLabel,style:{color:"var(--app-color-gray-light",fontSize:"12px",marginTop:"10px"}},"Date and Time"),t.createElement("div",{className:b.filtersContainer,style:{height:"60px",border:"2px solid var(--app-color-gray-lighter)",padding:"10px",marginTop:"10px"}},t.createElement(R(),{showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:5,customInput:t.createElement("div",{id:"custom-input",style:{cursor:"pointer",display:"flex",justifyContent:"center",width:"100%",alignItems:"stretch",padding:"5px",border:"0px solid var(--app-color-gray-lighter)",backgroundColor:"rgb(246,244,236)"}},t.createElement(M.G,{icon:S.WRo,style:{marginLeft:"10px",width:"14px",height:"14px"}}),t.createElement("input",{value:Ie?I()(Ie).format("DD MMMM YYYY HH:mm"):"",disabled:!0,type:"text",style:{flex:1,outline:"none",fontFamily:"var(--app-text-main-font)",fontSize:"16px",fontWeight:"bold",lineHeight:"20px",color:"#4A4A4A",textAlign:"left",maxWidth:"98%",border:"0px",backgroundColor:"rgb(246,244,236)"},onChange:e=>{}})),className:b.singleInputContainer,selected:Ie?new Date(I()(Ie)):(0,Z.now)(),onChange:e=>{if(e>(0,Z.now)()){var l;Ne(e);const o=JSON.parse(null!==(l=null===ke||void 0===ke?void 0:ke.item_code)&&void 0!==l?l:"{}");o.date=e,o.matches=[{p1:0,p2:0,set:1}],Ze((0,i.Z)((0,i.Z)({},ke),{},{item_code:JSON.stringify(o)}))}}})),t.createElement(O.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-light)"},className:b.multiselectComponent,visible:!0,mandatory:!1,items:[{label:"Court 1",value:"Court 1"},{label:"Court 2",value:"Court 2"},{label:"Court 3",value:"Court 3"},{label:"Court 4",value:"Court 4"},{label:"Court 5",value:"Court 5"},{label:"Court 6",value:"Court 6"},{label:"Court 7",value:"Court 7"},{label:"Court 8",value:"Court 8"},{label:"Court 9",value:"Court 9"}],onChange:e=>{var l;const o=JSON.parse(null!==(l=null===ke||void 0===ke?void 0:ke.item_code)&&void 0!==l?l:"{}");o.court=e,o.matches=[{p1:0,p2:0,set:1}],Ze((0,i.Z)((0,i.Z)({},ke),{},{item_code:JSON.stringify(o)}))},fieldLabel:"Court",placeholder:"Select Court"}),(null===ke||void 0===ke?void 0:ke.value)&&(null===ke||void 0===ke?void 0:ke.alt_value)&&(null===ke||void 0===ke?void 0:ke.item_code)&&t.createElement(g.zx,{title:"Create match",style:{width:"100%"},clicked:()=>{var e;fe(!0),(0,x.np)((0,i.Z)((0,i.Z)({},ke),{},{index:null===ae||void 0===ae||null===(e=ae.component_items)||void 0===e?void 0:e.length}),ae.id).subscribe({next:e=>{ae.component_items=e.data.component_items,fe(!1),Se(!1)},error:()=>fe(!1)})},loading:me}))))))},W=e=>{const{begunModule:l,authenticatedUser:o,user:n,template:d}=e,{companyData:a,companyUsersArray:r,components:s,companyPositionsArray:v,allModules:u,companyProcesses:c}=(0,p.v9)(e=>e.flowReducer),[m,f]=(0,t.useState)(!1),_=s.filter(e=>e.module_id===l.processModule.module_id&&e.component_items.find(e=>"Invite"===e.type&&e.value===o.id)).map(e=>(0,i.Z)((0,i.Z)({},e.component_items.find(e=>"Invite"===e.type&&e.value===o.id)),{},{club:e}));return t.createElement("div",{style:{width:"100%",padding:"0 20px",fontFamily:"var(--app-text-main-font)"}},null===_||void 0===_?void 0:_.map((e,l)=>t.createElement("div",{className:b.filtersContainer,key:l,style:{border:"0"}},t.createElement(k.Z,{photo:"https://s3-symbol-logo.tradingview.com/logo-yazilim--600.png",firstName:t.createElement("div",{style:{fontWeight:"bold"}},"".concat(e.club.title)),position:"has invited you to join their club",email:"",ccardClicked:()=>{var l,t,n,d,a;f(!0),(0,x.KL)((0,i.Z)((0,i.Z)({},e.club),{},{component_items:e.club.component_items.filter(l=>l.id!==e.id)}),e.club.id,[...null!==(l=null===(t=e.club.shared_users)||void 0===t?void 0:t.map(e=>e.id))&&void 0!==l?l:[],null===o||void 0===o?void 0:o.id],e.club.title,null===(n=e.club)||void 0===n?void 0:n.is_complete,null===e||void 0===e||null===(d=e.club)||void 0===d||null===(a=d.shared_positions)||void 0===a?void 0:a.map(e=>null===e||void 0===e?void 0:e.id)).subscribe({next:l=>{var o;e.club.shared_users=null===l||void 0===l||null===(o=l.data)||void 0===o?void 0:o.shared_users,f(!1)},error:()=>f(!1)})},width:"100%"},t.createElement("div",{style:{display:"flex",justifyContent:"space-evenly"}},t.createElement(g.zx,{title:"Accept",clicked:()=>{var l,t,n,d,a;f(!0),(0,x.KL)((0,i.Z)((0,i.Z)({},e.club),{},{component_items:e.club.component_items.filter(l=>l.id!==e.id)}),e.club.id,[...null!==(l=null===(t=e.club.shared_users)||void 0===t?void 0:t.map(e=>e.id))&&void 0!==l?l:[],null===o||void 0===o?void 0:o.id],e.club.title,null===(n=e.club)||void 0===n?void 0:n.is_complete,null===e||void 0===e||null===(d=e.club)||void 0===d||null===(a=d.shared_positions)||void 0===a?void 0:a.map(e=>null===e||void 0===e?void 0:e.id)).subscribe({next:l=>{var o;e.club.shared_users=null===l||void 0===l||null===(o=l.data)||void 0===o?void 0:o.shared_users,f(!1)},error:()=>f(!1)})},style:{width:"80px",backgroundColor:"blue"},titleStyle:{fontSize:"12px"},loading:m}),t.createElement(g.zx,{title:"Decline",clicked:()=>{var l,o,t,n;f(!0),(0,x.KL)((0,i.Z)((0,i.Z)({},e.club),{},{component_items:e.club.component_items.filter(l=>l.id!==e.id)}),e.club.id,null===(l=e.club.shared_users)||void 0===l?void 0:l.map(e=>e.id),e.club.title,null===(o=e.club)||void 0===o?void 0:o.is_complete,null===e||void 0===e||null===(t=e.club)||void 0===t||null===(n=t.shared_positions)||void 0===n?void 0:n.map(e=>null===e||void 0===e?void 0:e.id)).subscribe({next:e=>{f(!1)},error:()=>f(!1)})},style:{width:"80px",backgroundColor:"red"},titleStyle:{fontSize:"12px"},loading:m}))))))},q=e=>{const{events:l,onEventClick:o,isAdmin:i=!0}=e,[n,d]=(0,t.useState)("day");return t.createElement(P.Scheduler,{style:{fontFamily:"var(--app-text-main-font)",fontSize:"30px"},events:null===l||void 0===l?void 0:l.map(e=>{var l,o;const i=null===(l=e.component_fields.find(e=>"Meet Date"===e.field_name&&"Date"===e.data_type_name))||void 0===l?void 0:l.value,t=null===(o=e.component_fields.find(e=>"Ends"===e.field_name&&"Date"===e.data_type_name))||void 0===o?void 0:o.value;return{event_id:e.id,title:e.title,start:new Date(Date.parse(i)),end:new Date(Date.parse(t)),admin_id:e.id,editable:!1,deletable:!1}}),agenda:!0,navigation:i,alwaysShowAgendaDays:!1,view:n,onEventClick:o,onViewChange:e=>d(e)})},B=e=>{var l,o,n,d,a,r,s;const{selectedComponent:v,begunModule:u,goto:c,setSelectedComponent:_}=e,{companyData:k,companyUsersArray:Z,components:I,allModules:P,companyProcesses:z}=(0,p.v9)(e=>e.flowReducer),{authenticatedUser:R}=(0,p.v9)(e=>e.authReducer),[U,F]=(0,t.useState)(!1),[,W]=(0,t.useState)(!1),[,B]=(0,f.pQ)(),[Y,H]=(0,t.useState)(null===v||void 0===v||null===(l=v.component_items)||void 0===l?void 0:l.find(e=>"Payments"===e.type&&(null===e||void 0===e?void 0:e.value)===(null===R||void 0===R?void 0:R.id))),[V,j]=(0,t.useState)(""),[G,J]=(0,t.useState)(!1),[K,Q]=(0,t.useState)(!1),[X,$]=(0,t.useState)([]),[ee,le]=(0,t.useState)({type:"Service"}),oe=(null===R||void 0===R?void 0:R.id)===(null===v||void 0===v||null===(o=v.created_by)||void 0===o?void 0:o.id),ie=(null===v||void 0===v||v.component_fields.find(e=>"Club"===e.field_name),null===P||void 0===P?void 0:P.find(e=>"Meets"===(null===e||void 0===e?void 0:e.name)));return t.createElement("div",null,t.createElement("div",{style:{fontFamily:"var(--app-text-mobile-font)",fontSize:y.tq?"18px":"20px",fontWeight:"bold",marginTop:y.tq?"":"50px"}},null===v||void 0===v||null===(n=v.title)||void 0===n?void 0:n.toUpperCase()),t.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},oe&&t.createElement("p",{style:{fontFamily:"var(--app-text-mobile-font)",fontSize:"14px",fontWeight:"bold",marginTop:"30px"}},"You are the admin of this facility")),t.createElement(h.mQ,{style:{width:"100%",fontSize:y.tq?"12px":"20px",marginTop:"20px"},onSelect:e=>{3==e&&(0,L.GP)().pipe((0,C.P)()).subscribe({next:e=>{$(e.data)},error:()=>{}})}},t.createElement(h.td,{style:{fontFamily:"var(--app-text-mobile-font)",fontSize:(y.tq,"16px")}},t.createElement(h.OK,null,"ACTIVITIES"),t.createElement(h.OK,null,"SERVICES"),t.createElement(h.OK,null,"PURCHASES")),t.createElement(h.x4,{id:"ACTIVITIES"},t.createElement("div",{style:{width:"100%",minHeight:"60vh",overflow:"auto",zIndex:"-1"}},t.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end"}},t.createElement(g.zx,{light:!0,style:{display:oe?"":"none"},clicked:()=>{const e=e=>{var l,o,t,n,d,a;const r=e.steps.filter(l=>{var o,i,t,n,d,a;return void 0==(null===l||void 0===l||null===(o=l.options)||void 0===o?void 0:o.showStepAll)||1==(null===l||void 0===l||null===(i=l.options)||void 0===i?void 0:i.showStepAll)||0==(null===l||void 0===l||null===(t=l.options)||void 0===t?void 0:t.showStepAll)&&(null===l||void 0===l||null===(n=l.options)||void 0===n||null===(d=n.showOnly)||void 0===d?void 0:d.filter(e=>R.positions.map(e=>e.id).indexOf(e)>-1).length)>0||(null===l||void 0===l||null===(a=l.options)||void 0===a?void 0:a.showStepAuthor)&&(null===R||void 0===R?void 0:R.id)===(null===e||void 0===e?void 0:e.user_id)}).map((e,l)=>(0,i.Z)((0,i.Z)({},e),{},{rank:l+1}));N.h.dispatch((0,T.q4)(e)),N.h.dispatch((0,T.an)([e],m.Qc)),N.h.dispatch((0,T.q4)((0,i.Z)((0,i.Z)({},e),{},{completeSteps:e.steps,steps:r,stepIndex:2,module_id:ie.id,module:ie,isUpdating:!1}))),B({action:f._U.setCurrentStep,value:null===e||void 0===e?void 0:e.steps[2]}),B({action:f._U.setModuleItems,value:v.component_items}),B({action:f._U.setModuleNewStepComponents,value:[]}),B({action:f._U.setComponents,value:[]});const s=[...null!==(l=null===(o=r[2])||void 0===o?void 0:o.component_blueprints)&&void 0!==l?l:[]];if((null===s||void 0===s?void 0:s.length)>0){var c;const e=null===(c=s.find(e=>e.selected_fields.find(e=>"Sport"===e.field_name)))||void 0===c?void 0:c.selected_fields.find(e=>"Sport"===e.field_name);e&&(e.value="Basketball"),B({action:f._U.setComponentBlueprints,value:s}),B({action:f._U.setModuleNewStepComponents,value:s})}(null===u||void 0===u||null===(t=u.processModule)||void 0===t||null===(n=t.steps)||void 0===n?void 0:n.length)>0&&(null===u||void 0===u||null===(d=u.processModule)||void 0===d||null===(a=d.steps)||void 0===a||a.filter(e=>{var l;return null===e||void 0===e||null===(l=e.component_blueprints)||void 0===l?void 0:l.filter(e=>e.selected_fields.filter(e=>e.value=void 0))}))};z.find(e=>e.id===ie.procedure.id)?e(z.find(e=>e.id===ie.procedure.id)):(F(!0),(0,D.zJ)(ie.procedure.id).pipe((0,C.P)()).subscribe({next:l=>{F(!1),e(l)},error:e=>{}}))},icon:t.createElement("img",{src:w.IH})})),t.createElement(q,{events:I.filter(e=>"Expired"!==e.status&&e.module_id===(null===ie||void 0===ie?void 0:ie.id)),isAdmin:oe,onEventClick:e=>{const l=I.find(l=>l.id===(null===e||void 0===e?void 0:e.event_id));c&&(0,A.navigateToTransaction)(z,_,Q,k,l,B,R,u,R,P,W,Z,ie)}}))),t.createElement(h.x4,{id:"SERVICES"},t.createElement("div",{style:{width:"100%",minHeight:"60vh",overflow:"auto",padding:y.tq?"":"0 30%"}},t.createElement("div",{className:b.centeredDiv,style:{width:"inherit",fontSize:"14px",marginTop:"20px"}},oe&&t.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end"}},t.createElement(g.zx,{light:!0,style:{display:""},clicked:()=>{J(!0),le({type:"Service"})},icon:t.createElement("img",{src:w.IH,loading:U})})),(null===v||void 0===v||null===(d=v.component_items)||void 0===d?void 0:d.filter(e=>"Service"===e.type).length)>0&&t.createElement(t.Fragment,null,t.createElement("p",{style:{fontSize:"14px",fontFamily:"var(--app-text-main-font)",fontWeight:"bold",color:"var(--app-color-gray-dark)",paddingLeft:"5px"}},"Merchandise and Services"),V&&t.createElement("p",{style:{fontFamily:"var(--app-text-mobile-font)",color:"green",fontSize:"14px",fontWeight:"bold"},onClick:()=>j("")},V),t.createElement(E.default,{className:b.sharesTable,withColumns:!1,modern:!0,columns:["value","description","quantity","item_code","photo","controls"],list:null===v||void 0===v||null===(a=v.component_items)||void 0===a||null===(r=a.filter(e=>"Service"===e.type))||void 0===r?void 0:r.map((e,l)=>{var o;return e.qty=null!==(o=null===e||void 0===e?void 0:e.qty)&&void 0!==o?o:1,{item_code:null===e||void 0===e?void 0:e.item_code,value:null===e||void 0===e?void 0:e.value,quantity:null===e||void 0===e?void 0:e.total,description:null===e||void 0===e?void 0:e.alt_value,photo:null===e||void 0===e?void 0:e.quantity,controls:t.createElement("div",{style:{display:"flex",justifyContent:"left",justifyItems:"center",alignContent:"center",alignItems:"center"}},!oe&&t.createElement(g.zx,{light:!0,title:"Purchase",disabled:void 0===(null===R||void 0===R?void 0:R.wallet)||(null===R||void 0===R?void 0:R.wallet)<+(null===e||void 0===e?void 0:e.total),clicked:()=>{F(!0),(0,L.e_)({user_id:R.id,id:(0,m.mR)(),total:-+(null===e||void 0===e?void 0:e.total)*(null===e||void 0===e?void 0:e.qty),product:"".concat(null===e||void 0===e?void 0:e.alt_value),notes:"Purchases",quantity:null===e||void 0===e?void 0:e.qty}).pipe((0,C.P)()).subscribe({next:()=>{var l;R.wallet=+(+(null!==(l=null===R||void 0===R?void 0:R.wallet)&&void 0!==l?l:0)+Y),F(!1),j("You have bought ".concat(e.qty,"x ").concat(null===e||void 0===e?void 0:e.alt_value,". You may claim the item/s")),window.scrollTo({top:0,behavior:"smooth"})},error:()=>F(!1)})},loading:0===l&&U}),!oe&&t.createElement("input",{type:"number",defaultValue:null===e||void 0===e?void 0:e.qty,style:{textAlign:"center",width:"50px",height:"40px",margin:"0 10px 0 0",fontFamily:"var(--app-text-main-font)",fontSize:"16px"},onChange:l=>{e.qty=+l.target.value}}),oe&&t.createElement(g.zx,{light:!0,icon:t.createElement(M.G,{icon:S.$aW,style:{width:"20px",height:"16px"}}),disabled:void 0===(null===R||void 0===R?void 0:R.wallet)||(null===R||void 0===R?void 0:R.wallet)<+(null===e||void 0===e?void 0:e.total),clicked:()=>{var l,o,t;F(!0),(0,x.KL)((0,i.Z)((0,i.Z)({},v),{},{component_items:null===v||void 0===v||null===(l=v.component_items)||void 0===l?void 0:l.filter(l=>(null===l||void 0===l?void 0:l.id)!==(null===e||void 0===e?void 0:e.id))}),v.id,null===(o=v.shared_users)||void 0===o?void 0:o.map(e=>e.id),v.title,null===v||void 0===v?void 0:v.is_complete,null===v||void 0===v||null===(t=v.shared_positions)||void 0===t?void 0:t.map(e=>null===e||void 0===e?void 0:e.id)).subscribe({next:e=>{_(null===e||void 0===e?void 0:e.data),F(!1)},error:()=>F(!1)})}}))}})})),t.createElement("p",{style:{fontSize:"14px",fontFamily:"var(--app-text-main-font)",color:"var(--app-color-gray-dark)",paddingLeft:"5px"}},"Note: Some products and services here may require credits to be available in your app wallet")))),t.createElement(h.x4,{id:"PURCHASES"},t.createElement("div",{style:{width:"100%",minHeight:"60vh",overflow:"auto",padding:y.tq?"":"0 25%"}},V&&t.createElement("p",{style:{fontFamily:"var(--app-text-mobile-font)",color:"green",fontSize:"14px",fontWeight:"bold"},onClick:()=>j("")},V),t.createElement(E.default,{className:b.sharesTable,modern:!0,columns:["Item","Cost","Quantity","Sold To"].concat(oe?["Options"]:[]),list:null===X||void 0===X||null===(s=X.filter(e=>"Purchases"===e.stripe_status&&(oe?e.user_id!==(null===R||void 0===R?void 0:R.id):e.user_id===(null===R||void 0===R?void 0:R.id))))||void 0===s?void 0:s.map((e,l)=>{var o;return{Item:e.stripe_product,Cost:Math.abs(+(null===e||void 0===e?void 0:e.stripe_price)),Quantity:null===e||void 0===e?void 0:e.quantity,"Sold To":null===(o=Z.find(l=>l.id===(null===e||void 0===e?void 0:e.user_id)))||void 0===o?void 0:o.first_name,Options:X.find(l=>l.stripe_id===e.id)?null:t.createElement("div",{style:{display:"flex",justifyContent:"left",justifyItems:"center",alignContent:"center",alignItems:"center"}},oe&&t.createElement(g.zx,{light:!0,title:"Release",disabled:void 0===(null===R||void 0===R?void 0:R.wallet)||(null===R||void 0===R?void 0:R.wallet)<+(null===e||void 0===e?void 0:e.total),clicked:()=>{F(!0),(0,L.e_)({user_id:R.id,id:null===e||void 0===e?void 0:e.id,total:-+(null===e||void 0===e?void 0:e.stripe_price),product:"".concat(null===e||void 0===e?void 0:e.stripe_product),notes:"Purchases",quantity:null===e||void 0===e?void 0:e.quantity}).pipe((0,C.P)()).subscribe({next:l=>{var o;$([...X,l]),R.wallet=+(+(null!==(o=null===R||void 0===R?void 0:R.wallet)&&void 0!==o?o:0)+ +(null===l||void 0===l?void 0:l.stripe_price)),j("You have sold ".concat(e.qty,"x ").concat(null===e||void 0===e?void 0:e.stripe_product)),F(!1),window.scrollTo({top:0,behavior:"smooth"})},error:()=>F(!1)})},loading:0===l&&U}))}})})))),t.createElement("div",{style:{width:"100%",minHeight:"60vh",overflow:"auto"}},t.createElement("div",{className:b.centeredDiv,style:{width:"inherit",fontSize:"14px",marginTop:"20px"}},t.createElement("p",{style:{color:"var(--app-color-gray-dark)"}},"MORE INFO:"),e.children)),t.createElement("div",{className:G?b.mobilepopupopen:b.mobilepopup,style:{display:G?"":"none"}},t.createElement("div",{style:{width:"100%",height:"20vh",backgroundColor:"white",opacity:"0.9"},onClick:()=>J(!1)}),t.createElement("div",{className:b.mobilePopupActionContainer},t.createElement(O.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-light)"},className:b.multiselectComponent,visible:!0,mandatory:!1,items:[{label:"Court Rental",value:"Court Rental"},{label:"Equipment Rental",value:"Equipment Rental"},{label:"Food",value:"Food"},{label:"Others",value:"Others"}],onChange:e=>{le((0,i.Z)((0,i.Z)({},ee),{},{item_code:e}))},fieldLabel:"Service Type",placeholder:"Select Service"}),t.createElement("label",{className:b.fieldLabel,style:{color:"var(--app-color-gray-light",fontSize:"12px",marginTop:"10px"}},"Name"),t.createElement("input",{type:"text",className:b.fieldInput,onChange:e=>{le((0,i.Z)((0,i.Z)({},ee),{},{value:e.target.value}))}}),t.createElement("label",{className:b.fieldLabel,style:{color:"var(--app-color-gray-light",fontSize:"12px",marginTop:"10px"}},"Description"),t.createElement("input",{type:"text",className:b.fieldInput,onChange:e=>{le((0,i.Z)((0,i.Z)({},ee),{},{alt_value:e.target.value}))}}),t.createElement("label",{className:b.fieldLabel,style:{color:"var(--app-color-gray-light",fontSize:"12px",marginTop:"10px"}},"Photo"),t.createElement("input",{type:"text",className:b.fieldInput,onChange:e=>{le((0,i.Z)((0,i.Z)({},ee),{},{quantity:e.target.value}))}}),t.createElement("label",{className:b.fieldLabel,style:{color:"var(--app-color-gray-light",fontSize:"12px",marginTop:"10px"}},"Price"),t.createElement("input",{type:"number",className:b.fieldInput,onChange:e=>{le((0,i.Z)((0,i.Z)({},ee),{},{total:e.target.value}))}}),(null===ee||void 0===ee?void 0:ee.value)&&(null===ee||void 0===ee?void 0:ee.alt_value)&&(null===ee||void 0===ee?void 0:ee.item_code)&&t.createElement(g.zx,{title:"Add service",style:{width:"100%"},clicked:()=>{var e;F(!0),(0,x.np)((0,i.Z)((0,i.Z)({},ee),{},{index:null===v||void 0===v||null===(e=v.component_items)||void 0===e?void 0:e.length}),v.id).subscribe({next:e=>{v.component_items=e.data.component_items,F(!1),J(!1)},error:()=>F(!1)})},loading:U}))))};var Y=o(35606),H=o(79544),V=o(98032),j=o(74369),G=o(13397),J=o(85841),K=o(22781),Q=o(3295),X=o(12892),$=o(7924),ee=o(41756),le=o.n(ee);o(16207);const oe="CustomGeneric_accordionContainer__sELnZ";var ie=o(48963);const te={itemsTable:"CustomHR_itemsTable__HAV5Z",inputValue:"CustomHR_inputValue__OSYPp",multiselectComponent:"CustomHR_multiselectComponent__m25o5",dropdownComponent:"CustomHR_dropdownComponent__l2dQs",dropdownComponent_ii:"CustomHR_dropdownComponent_ii__pPeh5",title:"CustomHR_title__qfol-",subtitle:"CustomHR_subtitle__yCda9",timer:"CustomHR_timer__iWj0M",centerDiv:"CustomHR_centerDiv__Yvw6F",avatarUrlImg:"CustomHR_avatarUrlImg__k-p8m"};var ne=o(60534),de=o(75105),ae=o(10103);(0,p.$j)(e=>{const{authenticatedUser:{position:l},authenticatedUser:o}=e.authReducer,{user:i}=e.sessionReducer,{begunModule:t,allModules:n,companyData:d,companyUsersArray:a,companyPositionsArray:r,components:s,companyProcesses:v}=e.flowReducer;return{begunModule:t,allModules:n,companyData:d,companyUsersArray:a,companyPositionsArray:r,components:s,authenticatedUser:o,user:i,companyProcesses:v}})(e=>{const{title:l}=e;return t.createElement("div",{className:oe},t.createElement("div",{style:{fontFamily:"var(--app-text-mobile-font)",fontSize:y.tq?"18px":"20px",fontWeight:"bold",marginTop:y.tq?"":"50px"}},l))});const re=e=>{var l,o,i,n,d;const{selectedComponent:a,component_blueprint:r,isUpdating:s=!0}=e,{components:v}=(0,p.v9)(e=>e.flowReducer),[u,c]=(0,t.useState)("month"),[_,b]=(0,t.useState)((0,J.v)(new Date,{weekStartsOn:1})),[x,E]=(0,t.useState)((0,K.z)(_,{weekStartsOn:1})),[,C]=(0,f.pQ)(),k=new Date,[N,T]=(0,t.useState)(a.component_items.filter(e=>(0,Q.WU)(e.value,"MM/yyyy")===(0,Q.WU)(k,"MM/yyyy"))),D=e=>{var l;const{type:o,itm:i,edit:n=!0}=e;return t.createElement(t.Fragment,null,("Start Time"===o||"all"===o)&&n&&t.createElement(P,{showTimeSelect:!0,value:i.value,style:{width:"100%",border:"1px solid black",fontSize:"14px"},handleDate:e=>{i.value=e,null!==i&&void 0!==i&&i.alt_value&&null!==i&&void 0!==i&&i.value&&(i.total=(I()(new Date(i.alt_value),"DD/MM/YYYY").diff(I()(new Date(i.value),"DD/MM/YYYY"),"minutes")/60).toFixed(2),C({action:f._U.setModuleItems,value:[...a.component_items.filter(e=>e.id!==i.id),i]})),T([...N.filter(e=>e.id!==i.id),i])}}),("End Time"===o||"all"===o)&&n&&t.createElement(P,{showTimeSelect:!0,value:i.alt_value,style:{width:"100%",border:"1px solid black",fontSize:"14px"},handleDate:e=>{i.alt_value=e,null!==i&&void 0!==i&&i.alt_value&&null!==i&&void 0!==i&&i.value&&(i.total=(I()(new Date(i.alt_value),"DD/MM/YYYY").diff(I()(new Date(i.value),"DD/MM/YYYY"),"minutes")/60).toFixed(2),C({action:f._U.setModuleItems,value:[...a.component_items.filter(e=>e.id!==i.id),i]})),T([...N.filter(e=>e.id!==i.id),i])}}),("Duration"===o||"all"===o)&&n&&t.createElement("input",{defaultValue:null!==(l=null===i||void 0===i?void 0:i.total)&&void 0!==l?l:0,type:"number",className:te.inputValue,style:{fontWeight:"bold",fontSize:"14px",border:"0.3px dashed gray",height:"45px",width:"100%",margin:"20px 0",paddingLeft:"10px"},onBlur:e=>{i.total!==e.target.value&&(i.total=e.target.value,C({action:f._U.setModuleItems,value:[...a.component_items.filter(e=>e.id!==i.id),i]}))}}),("Work Details"===o||"all"===o)&&n&&t.createElement("input",{defaultValue:i.item_code,className:te.inputValue,style:{fontWeight:"bold",fontSize:"14px",border:"0.3px dashed gray",height:"48px",width:(y.tq,"100%"),minWidth:"300px",paddingLeft:"10px"},onBlur:e=>{i.item_code!==e.target.value&&(i.item_code=e.target.value,C({action:f._U.setModuleItems,value:[...a.component_items.filter(e=>e.id!==i.id),i]}))}}),("Project"===o||"all"===o)&&n&&t.createElement("div",{style:{border:null!==e&&void 0!==e&&e.disabled?"none":"0.3px dashed gray",minWidth:y.tq?"":"200px",padding:"6px 0"}},t.createElement(O.Z,{value:null===i||void 0===i?void 0:i.quantity,titleProps:{fontSize:"14px",color:"var(--app-color-gray-light)"},className:te.dropdownComponent,visible:!0,mandatory:!1,items:v.filter(e=>{var l;return e.component_fields.filter(e=>{var l;return e.component_blueprint_id===(null===A||void 0===A||null===(l=A.options)||void 0===l?void 0:l.component_id)}).length>0||e.module_id===(null===A||void 0===A||null===(l=A.options)||void 0===l?void 0:l.module_id)}).map(e=>{var l,o;let i="";return null===A||void 0===A||null===(l=A.options)||void 0===l||null===(o=l.names)||void 0===o||o.map(l=>{var o,t;return i=""===i?null===(o=e.component_fields.find(e=>e.field_name===l))||void 0===o?void 0:o.value:"".concat(i," ").concat(null===(t=e.component_fields.find(e=>e.field_name===l))||void 0===t?void 0:t.value)}),i=""!==i&&i?i:e.title,{label:i,value:i}}),onChange:e=>{i.quantity=e,i.alt_value||(i.alt_value=new Date),i.value||(i.value=new Date),C({action:f._U.setModuleItems,value:[...a.component_items.filter(e=>e.id!==i.id),i]})}},t.createElement("input",{value:null===i||void 0===i?void 0:i.quantity,className:te.inputValue,style:{fontWeight:"bold",fontSize:"14px"},readOnly:!0}))),("Actions"===o||"all"===o)&&t.createElement("div",{style:{display:"flex",justifyContent:"space-evenly",width:"50px"}},t.createElement(M.G,{icon:S.$aW,onClick:()=>{C({action:f._U.setModuleItems,value:N.filter(e=>e.id!==i.id)}),T(N.filter(e=>e.id!==i.id))}})),!n&&t.createElement("input",{value:"Duration"===o?null===i||void 0===i?void 0:i.total:"Start Time"===o?i.value?I()(i.value).format("DD MMMM YYYY HH:mm"):"":"End Time"===o?i.value?I()(i.alt_value).format("DD MMMM YYYY HH:mm"):"":"Project"===o?null===i||void 0===i?void 0:i.quantity:"Work Details"===o?null===i||void 0===i?void 0:i.item_code:"",className:te.inputValue,style:{color:"black",fontWeight:"bold",fontSize:"14px",border:"0px dashed gray",padding:"24px 5px",width:"100%"},readOnly:!0}))},P=e=>{var l,o;return t.createElement("div",{style:{width:"100%",padding:"6px 10px",border:null!==e&&void 0!==e&&e.disabled?"0px dashed gray":"0.3px dashed var(--app-color-gray-light)",alignContent:"center"}},t.createElement(R(),{selected:null!==e&&void 0!==e&&e.value?new Date(null===e||void 0===e?void 0:e.value):new Date,showTimeSelect:null!==(l=e.showTimeSelect)&&void 0!==l&&l,timeFormat:"HH:mm",timeIntervals:15,customInput:t.createElement("div",{style:{cursor:"pointer",display:"flex",justifyContent:"center",width:"100%",alignItems:"stretch",padding:"5px 0",border:"0px solid var(--app-color-gray-lighter)"}},t.createElement("input",{value:e.value?I()(e.value).format(null!==(o=e.format)&&void 0!==o?o:"DD MMMM YYYY HH:mm"):"",className:te.inputValue,type:"text",style:{flex:1,marginTop:"auto",marginBottom:"auto",outline:"none",fontFamily:"var(--app-text-main-font)",fontSize:"14px",fontWeight:"bold",lineHeight:"20px",color:"#4A4A4A",textAlign:"left",maxWidth:"98%",border:"0px"},onChange:e=>{}}),t.createElement(M.G,{icon:S.WRo,style:{margin:"0 10px",width:"14px",height:"14px"}})),className:te.singleInputContainer,onChange:l=>{e.handleDate(l)}}))},A=null===r||void 0===r||null===(l=r.selected_fields)||void 0===l?void 0:l.find(e=>"Record"===e.data_type_name&&"Project"===e.field_name);return t.createElement("div",{className:oe},A?t.createElement("div",{style:{fontFamily:"var(--app-text-mobile-font)",fontSize:y.tq?"18px":"20px",fontWeight:"normal",marginTop:y.tq?"":"50px",padding:"20px"}},e.children,t.createElement(h.mQ,{style:{width:"100%",fontSize:y.tq?"16px":"20px",marginTop:"20px"},onSelect:e=>{1===e?(T(a.component_items),b((0,J.v)(new Date,{weekStartsOn:1})),E((0,K.z)(new Date,{weekStartsOn:1})),c("week")):(T(a.component_items),c("all"))}},t.createElement(h.td,{style:{fontFamily:"var(--app-text-mobile-font)",fontSize:"18px",fontWeight:"bold"}},t.createElement(h.OK,null,t.createElement("p",null,"BY TIME")),t.createElement(h.OK,null,t.createElement("p",null,"BY PROJECT"))),t.createElement(h.x4,{id:"TIMESHEETS"},t.createElement("div",{style:{width:"100%",overflow:"auto"}},t.createElement("div",{style:{display:"flex",justifyContent:"space-between",width:"100%",padding:"20px"}},s&&t.createElement(g.zx,{light:!0,style:{display:""},clicked:()=>{var e,l;c(!1),setTimeout(()=>c("today"),1);const o=new Date;T([...a.component_items.filter(e=>(0,Q.WU)(e.value,"d/MM/yyyy")===(0,Q.WU)(o,"d/MM/yyyy")),{index:null!==(e=null===(l=a.component_items)||void 0===l?void 0:l.length)&&void 0!==e?e:0,item_code:"",value:(0,Z.now)(),alt_value:"",total:0,quantity:"",id:(0,m.mR)()}])},icon:t.createElement("img",{src:w.IH})}),u&&t.createElement("div",{style:{display:"flex"}},t.createElement(O.Z,{value:null===(o=[{label:"All",value:"all"},{label:"Today",value:"today"},{label:"This Week",value:"week"},{label:"This Month",value:"month"},{label:"Select Month",value:"select"},{label:"Custom Date",value:"custom"}].find(e=>e.value===u))||void 0===o?void 0:o.label,className:y.tq?"":te.multiselectComponent,visible:!0,mandatory:!1,items:[{label:"All",value:"all"},{label:"Today",value:"today"},{label:"This Week",value:"week"},{label:"This Month",value:"month"},{label:"Select Month",value:"select"},{label:"Custom Date",value:"custom"}],onChange:e=>{"week"===e?T(function(e){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"d/MM/yyyy",o=arguments.length>2?arguments[2]:void 0;const i=null!==o&&void 0!==o?o:new Date,t=(0,K.z)(i,{weekStartsOn:1}),n=(0,X.D)({start:t,end:i}).map(e=>(0,Q.WU)(e,l));return e.filter(e=>n.includes("".concat((0,Q.WU)(e.value,l))))}(a.component_items)):"today"===e?T(a.component_items.filter(e=>(0,Q.WU)(e.value,"d/MM/yyyy")===(0,Q.WU)(k,"d/MM/yyyy"))):"month"===e?T(a.component_items.filter(e=>(0,Q.WU)(e.value,"MM/yyyy")===(0,Q.WU)(k,"MM/yyyy"))):"custom"===e?(b(k),T(a.component_items.filter(e=>(0,Q.WU)(e.value,"d/MM/yyyy")===(0,Q.WU)(new Date,"d/MM/yyyy")))):"all"===e&&T(a.component_items),c(e)}}),"select"===u&&t.createElement(O.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-light)"},className:y.tq?"":te.multiselectComponent,visible:!0,mandatory:!1,items:[{label:"January",value:"01"},{label:"February",value:"02"},{label:"March",value:"03"},{label:"April",value:"04"},{label:"May",value:"05"},{label:"June",value:"06"},{label:"July",value:"07"},{label:"August",value:"08"},{label:"September",value:"09"},{label:"October",value:"10"},{label:"November",value:"11"},{label:"December",value:"12"}],onChange:e=>{T(a.component_items.filter(l=>(0,Q.WU)(l.value,"MM")===e))}}),"custom"===u&&t.createElement("div",{style:{display:"flex",hheight:"50px",alignItems:"center",width:"300px"}},t.createElement(P,{value:_,style:{width:"100%",border:"1px solid black"},format:"DD MMMM YYYY",handleDate:e=>{b(e),T(a.component_items.filter(l=>(0,Q.WU)(l.value,"d/MM/yyyy")===(0,Q.WU)(e,"d/MM/yyyy")))}})))),null!==a&&void 0!==a&&a.id?t.createElement(ne.Z,{style:{width:"100%"},tableHostSimple:ie.Z.itemsContainer_ii,columns:s?["Start Time","End Time","Work Details","Project","Duration","Actions"]:["Start Time","End Time","Work Details","Project","Duration"],list:null===(i=Y.Z([H.Z(V.Z("value"))])(N.filter(e=>null!==e.alt_value)))||void 0===i?void 0:i.map(e=>({All:t.createElement(D,{itm:e,type:"all"}),"Start Time":t.createElement(D,{itm:e,type:"Start Time",edit:s}),"End Time":t.createElement(D,{itm:e,type:"End Time",edit:s}),Duration:t.createElement(D,{itm:e,type:"Duration",edit:s}),"Work Details":t.createElement(D,{itm:e,type:"Work Details",edit:s}),Project:t.createElement(D,{itm:e,type:"Project",edit:s}),Actions:t.createElement(D,{itm:e,type:"Actions",edit:s}),id:e.id})),footer:[t.createElement("br",{key:0}),t.createElement("br",{key:1}),t.createElement("br",{key:2}),t.createElement("input",{key:4,readOnly:!0,className:te.inputValue,style:{fontWeight:"bold",padding:"20px 0 20px 10px"},defaultValue:"Totals:"}),t.createElement("input",{key:4,readOnly:!0,className:te.inputValue,style:{fontWeight:"bold",padding:"20px 0"},defaultValue:"".concat(j.Z((e,l)=>+e+ +l.total,0,null!==(n=N.filter(e=>null!==e.item_code&&null!==e.alt_value))&&void 0!==n?n:[]).toFixed(2))})].concat(s?[t.createElement("br",{key:5})]:[])}):e.children)),t.createElement(h.x4,{id:"BY PROJECT"},t.createElement("div",{style:{width:"100%",overflow:"auto"}},t.createElement("div",{style:{display:"flex",justifyContent:"flex-end",width:"100%",padding:"20px"}},t.createElement("div",{style:{display:"flex",height:"50px",alignItems:"center",width:"auto"}},t.createElement(O.Z,{value:null===(d=[{label:"This Week",value:"week"},{label:"This Month",value:"month"},{label:"Select Month",value:"select"},{label:"Custom Date",value:"custom"}].find(e=>e.value===u))||void 0===d?void 0:d.label,className:te.multiselectComponent,visible:!0,mandatory:!1,items:[{label:"This Week",value:"week"},{label:"This Month",value:"month"},{label:"Select Month",value:"select"},{label:"Custom Date",value:"custom"}],onChange:e=>{if("week"===e){const e=(0,J.v)(new Date,{weekStartsOn:1});b(e),E((0,K.z)(e,{weekStartsOn:1}))}c(e)}}),"select"===u&&t.createElement(O.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-light)"},className:y.tq?"":te.multiselectComponent,visible:!0,mandatory:!1,items:[{label:"January",value:"00"},{label:"February",value:"01"},{label:"March",value:"02"},{label:"April",value:"03"},{label:"May",value:"04"},{label:"June",value:"05"},{label:"July",value:"06"},{label:"August",value:"07"},{label:"September",value:"08"},{label:"October",value:"09"},{label:"November",value:"10"},{label:"December",value:"11"}],onChange:e=>{const l=(0,Q.WU)(new Date,"yyyy"),o=new Date(l,+e,1),i=(0,$.V)(o);b(i),E(o)}}),"custom"===u&&t.createElement("div",{style:{display:"flex",height:"50px",alignItems:"center",width:"300px"}},t.createElement(P,{value:_,style:{width:"100%",border:"1px solid black"},format:"DD MMMM YYYY",handleDate:e=>{const l=(0,J.v)(e,{weekStartsOn:1});b(l),E((0,K.z)(l,{weekStartsOn:1}))}})))),null!==a&&void 0!==a&&a.id?t.createElement(ne.Z,{style:{width:"100%"},tableHostSimple:ie.Z.itemsContainer_ii,columns:["Project"].concat("select"===u?["".concat((0,Q.WU)(x,"MMM"))]:"month"===u?["".concat((0,Q.WU)(new Date,"MMM"))]:(0,X.D)({start:x,end:_}).map(e=>(0,Q.WU)(e,"E MMM d"))),list:v.filter(e=>{var l;return e.component_fields.filter(e=>{var l;return e.component_blueprint_id===(null===A||void 0===A||null===(l=A.options)||void 0===l?void 0:l.component_id)}).length>0||e.module_id===(null===A||void 0===A||null===(l=A.options)||void 0===l?void 0:l.module_id)}).map(e=>{var l,o;let i="";null===A||void 0===A||null===(l=A.options)||void 0===l||null===(o=l.names)||void 0===o||o.map(l=>{var o,t;return i=""===i?null===(o=e.component_fields.find(e=>e.field_name===l))||void 0===o?void 0:o.value:"".concat(i," ").concat(null===(t=e.component_fields.find(e=>e.field_name===l))||void 0===t?void 0:t.value)}),i=""!==i&&i?i:e.title;const n={Project:t.createElement("input",{defaultValue:i,className:te.inputValue,style:{fontSize:s?"15px":"14px",fontWeight:"bold",width:y.tq?"100%":"300px",height:"40px",margin:"10px 0"},readOnly:!0})};return"month"===u?n["".concat((0,Q.WU)(new Date,"MMM"))]=t.createElement("input",{defaultValue:N.filter(e=>e.quantity===i&&"".concat((0,Q.WU)(e.value,"MMM"))==="".concat((0,Q.WU)(new Date,"MMM"))).map(e=>null===e||void 0===e?void 0:e.total).reduce((e,l)=>e+ +l,0),className:te.inputValue,style:{fontSize:s?"15px":"14px",fontWeight:"bold",height:"40px",textAlign:"left",margin:"10px 0"},readOnly:!0}):"select"===u?n["".concat((0,Q.WU)(x,"MMM"))]=t.createElement("input",{defaultValue:N.filter(e=>e.quantity===i&&"".concat((0,Q.WU)(e.value,"MMM"))==="".concat((0,Q.WU)(x,"MMM"))).map(e=>null===e||void 0===e?void 0:e.total).reduce((e,l)=>e+ +l,0),className:te.inputValue,style:{fontSize:s?"15px":"14px",fontWeight:"bold",height:"40px",textAlign:"left",margin:"10px 0"},readOnly:!0}):(0,X.D)({start:x,end:_}).map(e=>n["".concat((0,Q.WU)(e,"E MMM d"))]=t.createElement("input",{defaultValue:N.filter(l=>l.quantity===i&&"".concat((0,Q.WU)(l.value,"E MMM d"))==="".concat((0,Q.WU)(e,"E MMM d"))).map(e=>null===e||void 0===e?void 0:e.total).reduce((e,l)=>e+ +l,0),className:te.inputValue,style:{fontSize:s?"15px":"14px",fontWeight:"bold",width:"150px",height:"40px",textAlign:"left",margin:"10px 0",border:s?"0.5px dashed black":"none"},onBlur:l=>{const o=N.find(l=>l.quantity===i&&null===l.item_code&&"".concat((0,Q.WU)(null===l||void 0===l?void 0:l.value,"E MMM d"))==="".concat((0,Q.WU)(e,"E MMM d")));if(o)o.total=l.target.value,C({action:f._U.updateModuleItems,value:o}),T([...N.filter(e=>e.id!==o.id),o]);else{const o={value:I()(e).format("YYYY-MM-DD HH:mm:ss"),total:l.target.value,quantity:i,id:(0,m.mR)()};C({action:f._U.addModuleItems,value:o}),T([...N,o])}}})),n})}):e.children)))):t.createElement("p",null,"This custom template requires a Transaction List component"))},se=e=>{var l,o,i,n,d,a,r;const{selectedComponent:s,begunModule:v,goto:u,component_blueprint:c,isUpdating:_=!0}=e,{companyData:b,companyUsersArray:E,components:C}=(0,p.v9)(e=>e.flowReducer),{authenticatedUser:k}=(0,p.v9)(e=>e.authReducer),[Z,N]=(0,t.useState)(!1),[T,D]=(0,t.useState)((null===s||void 0===s||null===(l=s.component_items)||void 0===l?void 0:l.filter(e=>!(null!==e&&void 0!==e&&e.quantity)).length)>0?null===s||void 0===s||null===(o=s.component_items)||void 0===o?void 0:o.filter(e=>!(null!==e&&void 0!==e&&e.quantity)):null===s||void 0===s?void 0:s.component_items),[P,A]=(0,t.useState)((null===s||void 0===s||null===(i=s.component_items)||void 0===i?void 0:i.filter(e=>!(null!==e&&void 0!==e&&e.quantity)).length)>0?"forapproval":"all"),[L,z]=(0,t.useState)((0,J.v)(new Date,{weekStartsOn:1})),[U,F]=(0,t.useState)((0,K.z)(L,{weekStartsOn:1})),[W,q]=(0,f.pQ)(),B=e=>{var l,o,i,n;return t.createElement("div",{style:{width:"100%",margin:"30px 0",border:null!==e&&void 0!==e&&e.disabled?"0px dashed gray":"0.5px dashed gray",alignContent:"center",padding:"8px 0"}},null!==e&&void 0!==e&&e.disabled?t.createElement("div",{style:{fontSize:"14px",fontWeight:"bold",border:"0px dashed gray"}},e.value?I()(e.value).format(null!==(l=e.format)&&void 0!==l?l:"DD MMMM YYYY HH:mm"):""):t.createElement(R(),{disabled:null!==(o=null===e||void 0===e?void 0:e.disabled)&&void 0!==o&&o,selected:null!==e&&void 0!==e&&e.value?new Date(null===e||void 0===e?void 0:e.value):new Date,showTimeSelect:null!==(i=e.showTimeSelect)&&void 0!==i&&i,timeFormat:"HH:mm",timeIntervals:15,customInput:t.createElement("div",{style:{cursor:"pointer",display:"flex",justifyContent:"center",width:"100%",alignItems:"stretch",padding:"5px",border:"0px solid var(--app-color-gray-lighter)"}},t.createElement("input",{value:e.value?I()(e.value).format(null!==(n=e.format)&&void 0!==n?n:"DD MMMM YYYY HH:mm"):"",className:te.inputValue,type:"text",style:{flex:1,marginTop:"auto",marginBottom:"auto",outline:"none",fontFamily:"var(--app-text-main-font)",fontSize:"14px",lineHeight:"20px",color:"#4A4A4A",textAlign:"left",maxWidth:"98%",border:"0px",fontWeight:"bold"},onChange:e=>{}}),t.createElement(M.G,{icon:S.WRo,style:{margin:"0 10px",width:"14px",height:"14px"}})),className:te.singleInputContainer,onChange:l=>{e.handleDate(l)}}))},G=null===c||void 0===c||null===(n=c.selected_fields)||void 0===n?void 0:n.find(e=>"Dropdown"===e.data_type_name&&"Type"===e.field_name);return t.createElement("div",{className:oe},G?t.createElement("div",{style:{fontFamily:"var(--app-text-mobile-font)",fontSize:y.tq?"18px":"20px",fontWeight:"normal",marginTop:y.tq?"":"50px",padding:"20px"}},e.children,t.createElement(h.mQ,{style:{width:"100%",fontSize:y.tq?"16px":"20px",marginTop:"20px"}},t.createElement(h.td,{style:{fontFamily:"var(--app-text-mobile-font)",fontSize:"22px"}},t.createElement(h.OK,null,"Leaves"),t.createElement(h.OK,{onChange:()=>{D(s.component_items),A("all")}},"Balances")),t.createElement(h.x4,{id:"LEAVES"},t.createElement("div",{style:{width:"100%",overflow:"auto"}},t.createElement("div",{style:{display:"flex",justifyContent:"space-between",width:"100%",padding:"20px"}},_&&t.createElement(g.zx,{light:!0,style:{display:""},clicked:()=>{var e;D([...T,{index:null!==(e=null===T||void 0===T?void 0:T.length)&&void 0!==e?e:0,item_code:"",value:"",alt_value:"",total:0,quantity:"",id:(0,m.mR)()}])},icon:t.createElement("img",{src:w.IH})}),t.createElement("div",{style:{display:"flex"}},t.createElement(O.Z,{value:null===(d=[{label:"All",value:"all"},{label:"For Approval",value:"forapproval"},{label:"Approved",value:"approved"},{label:"Disapproved",value:"disapproved"},{label:"Select Month",value:"select"}].find(e=>e.value===P))||void 0===d?void 0:d.label,className:y.tq?"":te.multiselectComponent,visible:!0,mandatory:!1,items:[{label:"All",value:"all"},{label:"For Approval",value:"forapproval"},{label:"Approved",value:"approved"},{label:"Disapproved",value:"disapproved"},{label:"Select Month",value:"select"}],onChange:e=>{"forapproval"===e?D(s.component_items.filter(e=>!(null!==e&&void 0!==e&&e.quantity))):"approved"===e?D(s.component_items.filter(e=>1===+e.quantity)):"disapproved"===e?D(s.component_items.filter(e=>9===+e.quantity)):"custom"===e?(z(new Date),D(s.component_items.filter(e=>(0,Q.WU)(e.value,"d/MM/yyyy")===(0,Q.WU)(new Date,"d/MM/yyyy")))):"all"===e&&D(s.component_items),A(e)}}),"select"===P&&t.createElement(O.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-light)"},className:y.tq?"":te.multiselectComponent,visible:!0,mandatory:!1,items:[{label:"January",value:"01"},{label:"February",value:"02"},{label:"March",value:"03"},{label:"April",value:"04"},{label:"May",value:"05"},{label:"June",value:"06"},{label:"July",value:"07"},{label:"August",value:"08"},{label:"September",value:"09"},{label:"October",value:"10"},{label:"November",value:"11"},{label:"December",value:"12"}],onChange:e=>{D(s.component_items.filter(l=>(0,Q.WU)(l.value,"MM")===e))}}),"custom"===P&&t.createElement("div",{style:{display:"flex",height:"50px",alignItems:"center",width:"300px"}},t.createElement(B,{value:L,style:{width:"100%",border:"1px solid black"},format:"DD MMMM YYYY",handleDate:e=>{z(e),D(s.component_items.filter(l=>(0,Q.WU)(l.value,"d/MM/yyyy")===(0,Q.WU)(e,"d/MM/yyyy")))}})))),null!==s&&void 0!==s&&s.id?t.createElement(ne.Z,{style:{width:"100%"},tableHostSimple:ie.Z.itemsContainer_ii,layeredColumns:[{label:"Date From"},{label:"Date To"},{label:"Details"},{label:"Type"},{label:"Duration"},{label:"Status"},{label:"Actions"}],list:null===(a=Y.Z([H.Z(V.Z("index"))])(T))||void 0===a?void 0:a.map((l,o)=>{var i,n,d;const a=1===+l.quantity||9===+l.quantity;return{"Date From":t.createElement(B,{disabled:a||!_,showTimeSelect:!0,value:l.value,style:{width:"100%",border:"1px solid black"},handleDate:e=>{l.value=e,null!==l&&void 0!==l&&l.alt_value&&null!==l&&void 0!==l&&l.value&&(l.total=(I()(new Date(l.alt_value),"DD/MM/YYYY").diff(I()(new Date(l.value),"DD/MM/YYYY"),"minutes")/60).toFixed(2),document.getElementById("Duration".concat(o)).value=l.total,q({action:f._U.setModuleItems,value:[...s.component_items.filter(e=>e.id!==l.id),l]})),D([...T.filter(e=>e.id!==l.id),l])}}),"Date To":t.createElement(B,{disabled:a||!_,showTimeSelect:!0,value:l.alt_value,style:{width:"100%",border:"1px solid black"},handleDate:e=>{l.alt_value=e,null!==l&&void 0!==l&&l.alt_value&&null!==l&&void 0!==l&&l.value&&(l.total=(I()(new Date(l.alt_value),"DD/MM/YYYY").diff(I()(new Date(l.value),"DD/MM/YYYY"),"minutes")/60).toFixed(2),document.getElementById("Duration".concat(o)).value=l.total,q({action:f._U.setModuleItems,value:[...s.component_items.filter(e=>e.id!==l.id),l]})),D([...T.filter(e=>e.id!==l.id),l])}}),Duration:a||!_?t.createElement("div",{style:{fontSize:"14px",fontWeight:"bold"}},null!==(i=null===l||void 0===l?void 0:l.total)&&void 0!==i?i:0):t.createElement("input",{disabled:1===+l.quantity||9===+l.quantity,defaultValue:null!==(n=null===l||void 0===l?void 0:l.total)&&void 0!==n?n:0,id:"Duration".concat(o),className:te.inputValue,style:{fontWeight:"bold",border:"0.5px dashed gray",height:"50px",width:"100%"},onBlur:e=>{l.total!==e.target.value&&(l.total=e.target.value,q({action:f._U.setModuleItems,value:[...s.component_items.filter(e=>e.id!==l.id),l]})),D([...T.filter(e=>e.id!==l.id),l])}}),Details:a||!_?t.createElement("div",{style:{fontSize:"14px",fontWeight:"bold"}},null===l||void 0===l?void 0:l.item_code):t.createElement("input",{defaultValue:l.item_code,disabled:1===+l.quantity||9===+l.quantity,className:te.inputValue,style:{fontWeight:"bold",border:"0.5px dashed gray",height:y.tq?"100px":"50px",width:y.tq?"100%":"300px"},onBlur:e=>{l.item_code!==e.target.value&&(l.item_code=e.target.value,q({action:f._U.setModuleItems,value:[...s.component_items.filter(e=>e.id!==l.id),l]}))}}),Status:t.createElement("div",{style:{fontSize:_?"15px":"14px",fontWeight:"bold"}},1===+l.quantity?"Approved":9===+l.quantity?"Disapproved":"For Approval"),Type:a||!_?t.createElement("div",{style:{fontSize:"14px",fontWeight:"bold"}},null===l||void 0===l?void 0:l.type):t.createElement("div",{style:{border:null!==e&&void 0!==e&&e.disabled?"0px dashed gray":"0.5px dashed gray",width:y.tq?"100%":"240px",pointerEvents:1===+l.quantity||9===+l.quantity?"none":"",padding:"9px 0"}},t.createElement(O.Z,{value:null===l||void 0===l?void 0:l.type,titleProps:{fontSize:"14px",color:"var(--app-color-gray-light)"},className:te.dropdownComponent,visible:!0,mandatory:!1,items:null===(d=G.options)||void 0===d?void 0:d.list.map(e=>({label:e,value:e})),onChange:e=>{l.type=e,q({action:f._U.setModuleItems,value:[...s.component_items.filter(e=>e.id!==l.id),l]})}},t.createElement("input",{value:null===l||void 0===l?void 0:l.type,className:te.inputValue,style:{fontWeight:"bold",border:"0px dashed gray",paddingLeft:"10px"},readOnly:!0}))),Actions:t.createElement("div",{style:{display:"flex",justifyContent:"space-evenly",paddingTop:"10px",minWidth:"50px"}},k.id===s.created_by.id&&t.createElement(M.G,{icon:S.u8Q,onClick:()=>{l.quantity=1,q({action:f._U.setModuleItems,value:[...s.component_items.filter(e=>e.id!==l.id),l]}),D([...T.filter(e=>e.id!==l.id),l]),null!==s&&void 0!==s&&s.id&&(0,x.np)(l,s.id).subscribe({})},style:{color:1===+l.quantity?"var(--app-color-gray-lightest)":"green",cursor:"pointer",pointerEvents:1===+l.quantity?"none":""}}),k.id===s.created_by.id&&t.createElement(M.G,{icon:S.QWY,onClick:()=>{l.quantity=9,q({action:f._U.setModuleItems,value:[...s.component_items.filter(e=>e.id!==l.id),l]}),D([...T.filter(e=>e.id!==l.id),l]),null!==s&&void 0!==s&&s.id&&(0,x.np)(l,s.id).subscribe({})},style:{color:9===+l.quantity?"var(--app-color-gray-lightest)":"red",cursor:"pointer",pointerEvents:9===+l.quantity?"none":""}}),t.createElement(M.G,{icon:S.$aW,onClick:()=>{q({action:f._U.setModuleItems,value:T.filter(e=>e.id!==l.id)}),D(T.filter(e=>e.id!==l.id))},style:{color:0!==+l.quantity?"var(--app-color-gray-lightest)":"black",cursor:"pointer",pointerEvents:0!==+l.quantity?"none":""}})),id:l.id}})}):e.children)),t.createElement(h.x4,{id:"BALANCES"},t.createElement("div",{style:{width:"100%",overflow:"auto"}},null!==s&&void 0!==s&&s.id?t.createElement(ne.Z,{style:{width:"100%"},tableHostSimple:ie.Z.itemsContainer_ii,modern:!!y.tq,layeredColumns:[{label:"Type"},{label:"Allocated"},{label:"For Approval"},{label:"Availed"},{label:"Balance"}],list:null===(r=G.options)||void 0===r?void 0:r.list.map(e=>{var l,o,i,n,d,a,r;return{Type:t.createElement("input",{className:te.inputValue,defaultValue:e,style:{fontWeight:"bold",fontSize:_?"15px":"14px",height:"40px",width:"100%"},readOnly:!0}),Allocated:t.createElement("input",{className:te.inputValue,defaultValue:null!==(l=null===(o=s.component_fields.find(l=>l.field_name===e))||void 0===o?void 0:o.value)&&void 0!==l?l:"0",style:{fontWeight:"bold",fontSize:_?"15px":"14px",height:"40px",width:"100%"},readOnly:!0}),"For Approval":t.createElement("input",{className:te.inputValue,defaultValue:"".concat(j.Z((e,l)=>+e+ +l.total,0,null!==(i=s.component_items.filter(l=>l.type===e&&0===+l.quantity))&&void 0!==i?i:[]).toFixed(2)),style:{fontWeight:"bold",fontSize:_?"15px":"14px",height:"40px",width:"100%"},readOnly:!0}),Availed:t.createElement("input",{className:te.inputValue,defaultValue:"".concat(j.Z((e,l)=>+e+ +l.total,0,null!==(n=s.component_items.filter(l=>l.type===e&&1===+l.quantity))&&void 0!==n?n:[]).toFixed(2)),style:{fontWeight:"bold",fontSize:_?"15px":"14px",height:"40px",width:"100%"},readOnly:!0}),Balance:t.createElement("input",{className:te.inputValue,defaultValue:"".concat((+(null!==(d=null===(a=s.component_fields.find(l=>l.field_name===e))||void 0===a?void 0:a.value)&&void 0!==d?d:0)-j.Z((e,l)=>+e+ +l.total,0,null!==(r=s.component_items.filter(l=>l.type===e&&1===+l.quantity))&&void 0!==r?r:[])).toFixed(2)),style:{fontWeight:"bold",fontSize:_?"15px":"14px",height:"40px",width:"100%"},readOnly:!0})}})}):e.children)))):t.createElement("p",null,"Note: This custom template requires a Transaction List component"))},ve=e=>{var l,o,n,d,a,r,s;const{selectedComponent:v,begunModule:u,goto:c,component_blueprint:_,isUpdating:b=!0}=e,{authenticatedUser:x}=(0,p.v9)(e=>e.authReducer),[C,k]=(0,t.useState)(!1),[Z,I]=(0,t.useState)((null===v||void 0===v||null===(l=v.component_items)||void 0===l?void 0:l.length)>0?v.component_items:[{item_code:"",value:"",alt_value:"",type:"goal",id:(0,m.mR)()}]),[N,T]=(0,t.useState)("goal"),[D,P]=(0,f.pQ)(),A={clipboard:{matchers:[]},toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],["link","image","video","formula"],[{header:[1,2,3,4,5,6,!1]}],[{list:"ordered"},{list:"bullet"},{list:"check"}],[{size:["small",!1,"large","huge"]}]]},L=["header","font","bold","italic","underline","strike","blockquote","list","bullet","indent","link","image"],z=()=>t.createElement(g.zx,{light:!0,style:{display:""},clicked:()=>{var e;I([...Z,{index:null!==(e=null===Z||void 0===Z?void 0:Z.length)&&void 0!==e?e:0,type:N,item_code:"",value:"",alt_value:"",total:"",quantity:"",id:(0,m.mR)()}])},icon:t.createElement("img",{src:w.IH})}),R=e=>{var l;return t.createElement(le(),{modules:null!==e&&void 0!==e&&e.showToolbar?A:(0,i.Z)((0,i.Z)({},A),{},{toolbar:!1}),style:{fontFamily:"var(--app-text-main-font)",minHeight:"200px"},readOnly:null!==(l=null===e||void 0===e?void 0:e.readOnly)&&void 0!==l&&l,formats:L,defaultValue:null===e||void 0===e?void 0:e.value,onChange:null===e||void 0===e?void 0:e.onChange,onBlur:null===e||void 0===e?void 0:e.onBlur,theme:"snow"})},U=null===_||void 0===_||null===(o=_.selected_fields)||void 0===o?void 0:o.find(e=>"Dropdown"===e.data_type_name&&"Goal"===e.field_name),F=null===_||void 0===_||null===(n=_.selected_fields)||void 0===n?void 0:n.find(e=>"Dropdown"===e.data_type_name&&"KPI"===e.field_name);return t.createElement("div",{className:oe},U&&F?t.createElement("div",{style:{fontFamily:"var(--app-text-mobile-font)",fontSize:y.tq?"18px":"20px",fontWeight:"bold",marginTop:y.tq?"":"50px",padding:"20px"}},e.children,t.createElement(h.mQ,{style:{width:"100%",fontSize:y.tq?"16px":"20px",marginTop:"20px"},onSelect:e=>{T(1===e?"kpi":"goal")}},t.createElement(h.td,{style:{fontFamily:"var(--app-text-mobile-font)",fontSize:y.tq?"14px":"16px"}},t.createElement(h.OK,null,t.createElement("p",null,"TARGET GOALS")),t.createElement(h.OK,null,t.createElement("p",null,"KEY PERFORMANCE INDICATORS"))),t.createElement(h.x4,{id:"TARGET GOALS"},t.createElement("div",{style:{width:"100%",overflow:"auto"}},v.created_by.id===x.id&&t.createElement("div",{style:{display:"flex",justifyContent:"left"}},b&&z()),null!==v&&void 0!==v&&v.id&&v.created_by.id===x.id?t.createElement(E.default,{modern:!!y.tq,columns:["Goal","Description","Result","Employee Comment"].concat(b?["Actions"]:[]),list:null===(d=Y.Z([G.Z(V.Z("value"))])(Z.filter(e=>"goal"===e.type)))||void 0===d?void 0:d.map((e,l)=>{var o,i,n,d;return{Goal:t.createElement("div",{style:{pointerEvents:b?"":"none"}},t.createElement("div",{style:{border:"0.5px dashed gray",minWidth:y.tq?"":"300px",width:"auto"}},t.createElement(O.Z,{value:null===e||void 0===e?void 0:e.item_code,className:te.dropdownComponent,visible:!0,mandatory:!1,items:null===(o=U.options)||void 0===o?void 0:o.list.map(e=>({label:e,value:e})),onChange:l=>{e.item_code=l,P({action:f._U.setModuleItems,value:[...v.component_items.filter(l=>l.id!==e.id),e]})}})),t.createElement("textarea",{defaultValue:e.value,className:te.inputValue,style:{fontWeight:"bold",fontSize:"16px",border:"0.5px dashed gray",minHeight:"150px",width:"100%",paddingLeft:"20px",marginTop:"10px"},placeholder:"Goal Item",onBlur:l=>{e.value!==l.target.value&&(e.value=l.target.value,P({action:f._U.setModuleItems,value:[...v.component_items.filter(l=>l.id!==e.id),e]}))}})),Description:t.createElement("div",{style:{border:"0.5px dashed gray",width:"auto",pointerEvents:b?"":"none"}},t.createElement(R,{showToolbar:!(y.tq||!b),value:null!==(i=null===e||void 0===e?void 0:e.alt_value)&&void 0!==i?i:"",onBlur:()=>{P({action:f._U.setModuleItems,value:[...v.component_items.filter(l=>l.id!==e.id),e]})},onChange:l=>{e.alt_value=l}})),Result:t.createElement("div",{style:{border:"0.5px dashed gray",width:"auto",pointerEvents:b?"":"none"}},t.createElement(R,{showToolbar:!(y.tq||!b),value:null!==(n=null===e||void 0===e?void 0:e.quantity)&&void 0!==n?n:"",onBlur:()=>{P({action:f._U.setModuleItems,value:[...v.component_items.filter(l=>l.id!==e.id),e]})},onChange:l=>{e.quantity=l}})),"Employee Comment":t.createElement("div",{style:{border:"0px dashed gray",pointerEvents:b?"":"none"}},t.createElement(R,{value:null!==(d=null===e||void 0===e?void 0:e.total)&&void 0!==d?d:"",readOnly:!0,showToolbar:!1})),Actions:t.createElement("div",{style:{display:"flex",justifyContent:"space-evenly"}},t.createElement(M.G,{icon:S.$aW,onClick:()=>{P({action:f._U.setModuleItems,value:Z.filter(l=>l.id!==e.id)}),I(Z.filter(l=>l.id!==e.id))},style:{cursor:"pointer",width:"30px"}})),id:e.id}})}):t.createElement("br",null),null!==v&&void 0!==v&&v.id&&v.assigned_to.id===x.id?t.createElement(E.default,{modern:!0,className:te.itemsTable,columns:["Goal","Goal Item","Description","Result","Comments"],list:null===(a=Y.Z([G.Z(V.Z("type"))])(Z.filter(e=>"goal"===e.type)))||void 0===a?void 0:a.map((e,l)=>{var o,i;return{Goal:t.createElement("input",{defaultValue:e.item_code,className:te.inputValue,style:{border:"0.5px dashed gray",padding:"10px",margin:"10px",fontWeight:"bold",fontSize:"16px",width:"100%"},readOnly:!0}),"Goal Item":t.createElement("div",{style:{width:"auto"}},t.createElement("textarea",{defaultValue:e.value,className:te.inputValue,style:{border:"0.5px dashed gray",height:"auto",minHeight:"100px",width:"100%",padding:"10px",margin:"10px",fontWeight:"bold",fontSize:"16px"},readOnly:!0})),Description:t.createElement("div",{style:{border:"0.5px dashed gray",width:"auto"}},t.createElement(R,{value:null!==(o=null===e||void 0===e?void 0:e.alt_value)&&void 0!==o?o:"",readOnly:!0,showToolbar:!1})),Owner:t.createElement("div",{style:{border:"0.5px dashed gray",width:"auto"}},t.createElement("textarea",{defaultValue:e.quantity,className:te.inputValue,style:{fontWeight:"bolder",border:"1px dashed gray",minHeight:"50px",width:"100%",paddingLeft:"10px",margin:"10px"},disabled:!0})),Comments:t.createElement("div",{style:{border:"0.5px dashed gray"}},t.createElement(R,{showToolbar:!y.tq,value:null!==(i=null===e||void 0===e?void 0:e.total)&&void 0!==i?i:"",onBlur:()=>{P({action:f._U.setModuleItems,value:[...v.component_items.filter(l=>l.id!==e.id),e]})},onChange:l=>{e.total=l}})),id:e.id}})}):t.createElement("br",null))),t.createElement(h.x4,{id:"KPI"},t.createElement("div",{style:{width:"100%",overflow:"auto"}},v.created_by.id===x.id&&t.createElement("div",{style:{display:"flex",justifyContent:"left"}},b&&z()),null!==v&&void 0!==v&&v.id&&v.created_by.id===x.id?t.createElement(E.default,{modern:!!y.tq,className:te.itemsTable,columns:["KPI","KPI Elements","Owner","Comments"].concat(b?["Actions"]:[]),list:null===(r=Y.Z([G.Z(V.Z("value"))])(Z.filter(e=>"kpi"===e.type)))||void 0===r?void 0:r.map((e,l)=>{var o,i,n,d;return{KPI:t.createElement("div",{style:{pointerEvents:b?"":"none"}},t.createElement("div",{style:{border:"0.5px dashed gray",minWidth:y.tq?"":"300px",width:"auto"}},t.createElement(O.Z,{value:null===e||void 0===e?void 0:e.item_code,className:te.dropdownComponent,visible:!0,mandatory:!1,items:null===(o=F.options)||void 0===o?void 0:o.list.map(e=>({label:e,value:e})),onChange:l=>{e.item_code=l,P({action:f._U.setModuleItems,value:[...v.component_items.filter(l=>l.id!==e.id),e]})}})),t.createElement("textarea",{defaultValue:e.value,className:te.inputValue,style:{fontWeight:"bold",fontSize:"16px",border:"0.5px dashed gray",minHeight:"150px",width:"100%",paddingLeft:"20px",marginTop:"10px"},placeholder:"KPI Item",onBlur:l=>{e.value!==l.target.value&&(e.value=l.target.value,P({action:f._U.setModuleItems,value:[...v.component_items.filter(l=>l.id!==e.id),e]}))}})),"KPI Elements":t.createElement("div",{style:{border:"0.5px dashed gray",width:"auto",pointerEvents:b?"":"none"}},t.createElement(R,{showToolbar:!(y.tq||!b),value:null!==(i=null===e||void 0===e?void 0:e.alt_value)&&void 0!==i?i:"",onBlur:l=>{P({action:f._U.setModuleItems,value:[...v.component_items.filter(l=>l.id!==e.id),e]})},onChange:l=>{e.alt_value=l}})),Owner:t.createElement("div",{style:{border:"0.5px dashed gray",width:"auto",pointerEvents:b?"":"none"}},t.createElement(R,{showToolbar:!(y.tq||!b),value:null!==(n=null===e||void 0===e?void 0:e.quantity)&&void 0!==n?n:"",onBlur:l=>{P({action:f._U.setModuleItems,value:[...v.component_items.filter(l=>l.id!==e.id),e]})},onChange:l=>{e.quantity=l}})),Comments:t.createElement("div",{style:{border:"0.5px dashed gray",pointerEvents:b?"":"none"}},t.createElement(R,{showToolbar:!(y.tq||!b),value:null!==(d=null===e||void 0===e?void 0:e.total)&&void 0!==d?d:"",onBlur:l=>{P({action:f._U.setModuleItems,value:[...v.component_items.filter(l=>l.id!==e.id),e]})},onChange:l=>{e.total=l}})),Actions:t.createElement("div",{style:{display:"flex",justifyContent:"space-evenly"}},t.createElement(M.G,{icon:S.$aW,onClick:()=>{P({action:f._U.setModuleItems,value:Z.filter(l=>l.id!==e.id)}),I(Z.filter(l=>l.id!==e.id))},style:{cursor:"pointer"}})),id:e.id}})}):t.createElement("br",null),null!==v&&void 0!==v&&v.id&&v.assigned_to.id===x.id?t.createElement(E.default,{modern:!0,className:te.itemsTable,columns:["KPI","KPI Item","KPI Element","Result","Owner"],list:null===(s=Y.Z([G.Z(V.Z("type"))])(Z.filter(e=>"kpi"===e.type)))||void 0===s?void 0:s.map((e,l)=>{var o,i,n;return{KPI:t.createElement("input",{defaultValue:e.item_code,className:te.inputValue,style:{fontWeight:"bold",border:"0.5px dashed gray",padding:"10px",minHeight:"50px",margin:"10px",fontSize:"16px",width:"100%"},readOnly:!0}),"KPI Item":t.createElement("div",{style:{width:"auto"}},t.createElement("textarea",{defaultValue:e.value,className:te.inputValue,style:{border:"0.5px dashed gray",height:"auto",minHeight:"100px",width:"100%",paddingLeft:"10px",margin:"10px",fontWeight:"bold",fontSize:"16px"},readOnly:!0})),"KPI Element":t.createElement("div",{style:{border:"0.5px dashed gray",width:"auto"}},t.createElement(R,{value:null!==(o=null===e||void 0===e?void 0:e.alt_value)&&void 0!==o?o:"",readOnly:!0,showToolbar:!1})),Owner:t.createElement("div",{style:{border:"0.5px dashed gray",width:"auto"}},t.createElement(R,{value:null!==(i=null===e||void 0===e?void 0:e.quantity)&&void 0!==i?i:"",readOnly:!0,showToolbar:!1})),Comments:t.createElement("div",{style:{border:"0px dashed gray",width:"auto"}},t.createElement(R,{value:null!==(n=null===e||void 0===e?void 0:e.total)&&void 0!==n?n:"",readOnly:!0,showToolbar:!1})),id:e.id}})}):t.createElement("br",null))))):t.createElement("p",null,"Note: This custom template requires a Transaction List component"))},ue=e=>{var l,o,n;const{selectedComponent:d,authenticatedUser:a,component_blueprint:r,isUpdating:s=!0}=e,{companyUsersArray:v}=(0,p.v9)(e=>e.flowReducer),[u,c]=(0,f.pQ)(),[m,_]=(0,t.useState)(I()()),[h,b]=(0,t.useState)(),[E,C]=(0,t.useState)(),[k,Z]=(0,t.useState)(),[N,T]=(0,t.useState)(""),[D,P]=(0,t.useState)(!1),[A,L]=(0,t.useState)(v);(0,t.useEffect)(()=>{const e=setInterval(()=>{_(I()())},1e3);return()=>{window.clearInterval(e)}},[]),(0,t.useEffect)(()=>{v.length<2&&(0,de.AW)(!0).pipe((0,ae.q)(1)).subscribe({next:e=>{L([]),setTimeout(()=>L([...e,a]),10)}})},[]);const z=null===r||void 0===r||null===(l=r.selected_fields)||void 0===l?void 0:l.find(e=>"People"===e.data_type_name&&"Employee"===e.field_name);return t.createElement("div",{className:oe},h&&(null===k||void 0===k?void 0:k.id)&&t.createElement(g.U7,{hasCloseIcon:!0,isOpen:!!h,onClose:()=>{C(void 0),b(void 0)},shadowedContainerStyle:{border:"5px black",backgroundColor:"",width:y.tq?"100%":"200px"}},t.createElement("p",{className:te.title},"Enter ID:"),t.createElement("input",{id:"Log Password",type:"password",style:{fontWeight:"bold",border:"2px solid gray",height:"50px",fontSize:"20px"},onChange:e=>C("")}),E&&t.createElement("p",null,E),t.createElement(g.zx,{title:"LOG",clicked:()=>{document.getElementById("Log Password").value===k.id.replace(/\D/g,"").slice(-5)?(P(!0),(0,x.KL)((0,i.Z)((0,i.Z)({},d),{},{component_items:[...u.items,h]})).subscribe({error:e=>{P(!1),b(void 0)},next:()=>{P(!1),c({action:f._U.addModuleItems,value:h}),b(void 0)}}),C(void 0)):C("Incorrect ID entered")}})),t.createElement("div",{style:{fontFamily:"var(--app-text-mobile-font)",fontSize:y.tq?"18px":"20px",fontWeight:"bold",display:null!==d&&void 0!==d&&d.id?"":"none",padding:"10px"}},e.children,z?t.createElement("div",{className:te.centerDiv,style:{width:"100%",height:"auto",display:"flex",flexDirection:y.tq?"column":"row",alignItems:"flex-start"}},t.createElement("div",{style:{width:y.tq?"100%":"30%",padding:"20px"}},t.createElement("div",{id:"date_header"},"".concat(m.format("DD MMMM YYYY dddd"))),t.createElement("label",{className:te.timer,id:"timer_count",style:{fontSize:s||y.tq?"":"40px"}},m.format("HH:mm:ss")),t.createElement("div",{className:te.centerDiv,style:{width:"100%"}},(null===k||void 0===k?void 0:k.photo)&&t.createElement("img",{src:null===k||void 0===k?void 0:k.photo,className:te.avatarUrlImg}),v.length>0&&A.length>0&&t.createElement(t.Fragment,null,t.createElement("p",{style:{fontSize:"20p"}},null===z||void 0===z?void 0:z.field_name),t.createElement("div",{style:{display:"flex",border:"1px dashed gray",width:"100%"}},t.createElement(O.Z,{className:te.dropdownComponent,visible:!0,mandatory:!1,items:v.filter(e=>{var l;return(null===e||void 0===e||null===(l=e.positions)||void 0===l?void 0:l.filter(e=>{var l,o;return null===z||void 0===z||null===(l=z.options)||void 0===l||null===(o=l.position_id)||void 0===o?void 0:o.includes(null===e||void 0===e?void 0:e.id)}).length)>0}).map(e=>({label:"".concat(e.first_name," ").concat(e.last_name),value:e.id,user:e})),onChange:e=>{var l;Z(v.find(l=>l.id===e)),0===(null===u||void 0===u||null===(l=u.items)||void 0===l?void 0:l.length)&&d.component_items.length>0&&c({action:f._U.setModuleItems,value:d.component_items})}}),v.length<3&&t.createElement(g.zx,{clear:!0,icon:t.createElement("img",{src:w.Fd,style:{width:"20px",height:"20px"}}),style:{width:"30px",height:"20px"},clicked:()=>{P(!0),(0,de.AW)(!0).pipe((0,ae.q)(1)).subscribe({next:e=>{P(!1),L([]),setTimeout(()=>L([...e,a]),10)}})},loading:D}))),t.createElement("p",{style:{fontSize:"20p"}},"Remarks (Optional)"),t.createElement("input",{className:te.inputValue,style:{fontWeight:"bold",border:"1px dashed gray",height:"40px",width:"100%"},onBlur:e=>{T(e.target.value)}}),(null===d||void 0===d?void 0:d.id)&&t.createElement(t.Fragment,null,t.createElement("div",{style:{width:"100%",padding:"8px"}},t.createElement(g.zx,{style:{width:"100%",height:"16vh",backgroundColor:"green",margin:"0px",padding:"0"},loading:D,clicked:()=>{if(null!==k&&void 0!==k&&k.id){const o=Y.Z([H.Z(V.Z("index"))])(null===u||void 0===u?void 0:u.items).find(e=>e.quantity===k.id);let t={};var e,l;if(null!==o&&void 0!==o&&o.alt_value||null!==o&&void 0!==o&&o.value)t={index:null===u||void 0===u||null===(e=u.items)||void 0===e?void 0:e.length,item_code:"".concat(k.first_name," ").concat(k.last_name),quantity:k.id,value:null!==o&&void 0!==o&&o.value?"":new Date,alt_value:null!==o&&void 0!==o&&o.alt_value?"":new Date,total:N};else t={index:null===u||void 0===u||null===(l=u.items)||void 0===l?void 0:l.length,item_code:"".concat(k.first_name," ").concat(k.last_name),quantity:k.id,value:new Date,alt_value:"",total:N};(null===a||void 0===a?void 0:a.id)===k.id?(P(!0),(0,x.KL)((0,i.Z)((0,i.Z)({},d),{},{component_items:[...u.items,t]})).subscribe({error:e=>{P(!1),b(void 0)},next:()=>{P(!1),c({action:f._U.addModuleItems,value:t}),b(void 0)}})):b(t)}}},t.createElement("div",{className:te.centerDiv,style:{width:"inherit",display:"flex",flexDirection:"column",alignContent:"center"}},t.createElement(M.G,{icon:S.Ual,style:{width:"50px",height:"50px"}}),t.createElement("p",null,"Clock In / Out")))),t.createElement("div",{style:{display:"flex",width:"100%"}},t.createElement(g.zx,{style:{width:"100%",height:"16vh",backgroundColor:"orange",margin:"5px",padding:"0"},clicked:()=>{if(null!==k&&void 0!==k&&k.id){var e;let l={index:null===u||void 0===u||null===(e=u.items)||void 0===e?void 0:e.length,item_code:"".concat(k.first_name," ").concat(k.last_name),quantity:k.id,value:new Date,alt_value:"",total:N};(null===a||void 0===a?void 0:a.id)===k.id?(P(!0),(0,x.KL)((0,i.Z)((0,i.Z)({},d),{},{component_items:[...u.items,l]})).subscribe({error:e=>{P(!1),b(void 0)},next:()=>{P(!1),c({action:f._U.addModuleItems,value:l}),b(void 0)}})):b(l)}}},t.createElement("div",{className:te.centerDiv,style:{width:"inherit",display:"flex",flexDirection:"column",alignContent:"center"}},t.createElement(M.G,{icon:S.uF7,style:{width:"50px",height:"50px"}}),t.createElement("p",null,"Clock In"))),t.createElement(g.zx,{style:{width:"100%",height:"16vh",backgroundColor:"blue",margin:"5px",padding:"0"},clicked:()=>{if(null!==k&&void 0!==k&&k.id){var e;let l={index:null===u||void 0===u||null===(e=u.items)||void 0===e?void 0:e.length,item_code:"".concat(k.first_name," ").concat(k.last_name),quantity:k.id,alt_value:new Date,value:"",total:N};(null===a||void 0===a?void 0:a.id)===k.id?(P(!0),(0,x.KL)((0,i.Z)((0,i.Z)({},d),{},{component_items:[...u.items,l]})).subscribe({error:e=>{P(!1),b(void 0)},next:()=>{P(!1),c({action:f._U.addModuleItems,value:l}),b(void 0)}})):b(l)}}},t.createElement("div",{className:te.centerDiv,style:{width:"inherit",display:"flex",flexDirection:"column",alignContent:"center"}},t.createElement(M.G,{icon:S.f8k,style:{width:"50px",height:"50px"}}),t.createElement("p",null,"Clock Out"))))))),k&&t.createElement("div",{style:{width:y.tq?"100%":"70%",margin:"0 10px"}},t.createElement(ne.Z,{style:{width:"100%"},tableHostSimple:ie.Z.itemsContainer_ii,columns:y.tq?["Time In","Time Out"]:(s?["Employee"]:[]).concat(["Time In","Time Out","Remarks"]),list:null!==u&&void 0!==u&&u.items?null===(o=Y.Z([H.Z(V.Z("index"))])(null===u||void 0===u||null===(n=u.items)||void 0===n?void 0:n.filter(e=>e.quantity===(null===k||void 0===k?void 0:k.id))))||void 0===o?void 0:o.map((l,o)=>{var i,n;return{Employee:t.createElement("div",{style:{padding:"20px 0"}},l.item_code),"Time In":t.createElement("div",{style:{padding:"20px 0"}},null!==l&&void 0!==l&&l.value?I()(l.value).format(null!==(i=e.format)&&void 0!==i?i:"DD MMMM YYYY HH:mm"):""),"Time Out":t.createElement("div",{style:{padding:"20px 0"}},null!==l&&void 0!==l&&l.alt_value?I()(l.alt_value).format(null!==(n=e.format)&&void 0!==n?n:"DD MMMM YYYY HH:mm"):""),Remarks:t.createElement("div",{style:{padding:"20px 0"}},l.total)}}):[]}))):t.createElement("p",null,"Note: This custom template requires a People component named Employee")))},ce={itemsTable:"CustomRoutes_itemsTable__9GNyT",inputValue:"CustomRoutes_inputValue__mE20S",multiselectComponent:"CustomRoutes_multiselectComponent__JWLpx",dropdownComponent:"CustomRoutes_dropdownComponent__1P3Wa",dropdownComponent_ii:"CustomRoutes_dropdownComponent_ii__5Cecx",title:"CustomRoutes_title__yxO4J",subtitle:"CustomRoutes_subtitle__aarjQ",dropdownContainer:"CustomRoutes_dropdownContainer__LcpSg",currencyInput:"CustomRoutes_currencyInput__Axdwe",tmiClassName:"CustomRoutes_tmiClassName__k+Nse",templateNotes:"CustomRoutes_templateNotes__ZU+Al"};var pe=o(68218),me=o(84634),fe=o(60179),_e=o(37390),ye=o(11217);o(11712);const he=(0,p.$j)(e=>{const{authenticatedUser:{position:l},authenticatedUser:o}=e.authReducer,{user:i}=e.sessionReducer,{begunModule:t,allModules:n,companyData:d,companyUsersArray:a,companyPositionsArray:r,components:s,companyProcesses:v}=e.flowReducer;return{begunModule:t,allModules:n,companyData:d,companyUsersArray:a,companyPositionsArray:r,components:s,authenticatedUser:o,user:i,companyProcesses:v}})(e=>{var l,o,n,d,a,r,s,v,u,c,_,h,b,x,C,w,k,N,D,P,A,L,z,R,U,F,W,q,B,Y,H,V,j;const{components:G,component:J}=e,{selectedComponent:K,children:Q}=e,X=(0,p.I0)(),{companyData:$,map:ee}=(0,p.v9)(e=>e.flowReducer),[le,ie]=(0,f.pQ)(),[te,ne]=(0,t.useState)({}),[de,ae]=(0,t.useState)([]),[re,se]=(0,t.useState)(),[ve,ue]=(0,t.useState)(),[he,ge]=(0,t.useState)(!1),[be,xe]=(0,t.useState)(!0),[Ee,Ce]=(0,t.useState)(le.items.length>0),we=J.selected_fields.find(e=>{var l;return"item_code"===(null===(l=e.options)||void 0===l?void 0:l.mapToItem)&&"Record"===e.data_type_name&&"Customer"===e.field_name}),Me=J.selected_fields.find(e=>{var l;return"alt_value"===(null===(l=e.options)||void 0===l?void 0:l.mapToItem)&&"Dropdown"===e.data_type_name&&"Status"===e.field_name}),Se=J.selected_fields.find(e=>"Map"===e.data_type_name),ke=G.filter(e=>e.component_fields.filter(e=>{var l;return e.component_blueprint_id===(null===we||void 0===we||null===(l=we.options)||void 0===l?void 0:l.component_id)}).length>0),[Ze,Ie]=(0,t.useState)(null===ke||void 0===ke?void 0:ke.filter(e=>!le.items.map(e=>e.item_code).includes(e.title)&&e.component_fields.find(e=>"Pin"===e.data_type_name&&e.value))),[Ne]=(0,t.useState)(J.selected_fields.find(e=>{var l;return"Pin"===e.data_type_name&&!0===(null===(l=e.options)||void 0===l?void 0:l.destination)})),[Te]=(0,t.useState)(null===(l=le.newStepComponents.find(e=>e.selected_fields.find(e=>"Number"===e.data_type_name&&"Stopover"===e.field_name)))||void 0===l?void 0:l.selected_fields.find(e=>"Number"===e.data_type_name&&"Stopover"===e.field_name)),De=(0,t.useMemo)(()=>[{Header:"View",columns:[{Header:"View",accessor:"view"}]}],[]),Pe=null===(o=le.currentStep)||void 0===o?void 0:o.component_blueprints.findIndex(e=>e.id===(null===J||void 0===J?void 0:J.id)),Ae=(e,l)=>{var o,i,t;const n=[...null!==(o=null===(i=le.currentStep)||void 0===i?void 0:i.component_blueprints)&&void 0!==o?o:[]],d=null===(t=n[Pe])||void 0===t?void 0:t.selected_fields[l];"Number"===(null===d||void 0===d?void 0:d.data_type_name)?Number(+e)?d.value=e:""===e&&(d.value=""):null!==d&&void 0!==d&&d.data_type_name&&(d.value=e),null!==d&&void 0!==d&&d.value&&d.mandatory&&(d.errors=""),ie({action:f._U.setComponentBlueprints,value:n}),ie({action:f._U.setModuleNewStepComponents,value:n})};return t.createElement("div",{className:oe},t.createElement("div",{style:{display:"flex",width:"100%",flexDirection:y.tq?"column":"row"}},t.createElement("div",{style:{width:y.tq?"100%":"20%",padding:"140px 10px 0 10px"}},t.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},!0===(null===Ne||void 0===Ne?void 0:Ne.visible)&&t.createElement("div",null,"Route:"),le.items.length>0&&t.createElement(M.G,{icon:S.XTR,onClick:()=>{ie({action:f._U.setModuleItems,value:[]}),X((0,T.wM)({routes:{},pins:""}))},style:{cursor:"pointer"}})),le.items.length>0?t.createElement(fe.zx,null,!0===(null===Ne||void 0===Ne?void 0:Ne.visible)&&t.createElement("div",{style:{border:"1px dashed gray",padding:"5px",cursor:"pointer"},onClick:()=>{var e;const l=JSON.parse(null!==(e=null===Ne||void 0===Ne?void 0:Ne.value)&&void 0!==e?e:"{}");var o,i;null!==l&&void 0!==l&&l.source&&(X((0,T.wM)({pins:[{position:{lat:null===l||void 0===l||null===(o=l.source)||void 0===o?void 0:o.lat,lng:null===l||void 0===l||null===(i=l.source)||void 0===i?void 0:i.lng},type:"OriginMarker"}]})),X((0,T.wM)({zoom:17})))}},t.createElement("p",null,"Start"),t.createElement("p",{style:{fontSize:"12px"}},"".concat(null!==(n=null===(d=JSON.parse(null!==(r=null===Ne||void 0===Ne?void 0:Ne.value)&&void 0!==r?r:"{}"))||void 0===d||null===(a=d.source)||void 0===a?void 0:a.address)&&void 0!==n?n:"Please set start"))),t.createElement(fe.iA,{columns:De,data:null===le||void 0===le?void 0:le.items.map((e,l)=>{var o,i,n,d,a,r,s,v,u;const c=JSON.parse(null!==(o=null===e||void 0===e?void 0:e.quantity)&&void 0!==o?o:"{}"),p=JSON.parse(null!==(i=e[null===Me||void 0===Me||null===(n=Me.options)||void 0===n?void 0:n.mapToItem])&&void 0!==i?i:"{}"),m=JSON.parse(null!==(d=null===e||void 0===e?void 0:e.value)&&void 0!==d?d:"{}");return{id:e.id,view:t.createElement("div",{style:{border:e.isOpen?"1px dashed blue":"1px dashed gray",padding:"5px 5px 10px 5px"}},e.isOpen&&t.createElement("div",{style:{display:"flex",justifyContent:"right"}},t.createElement(M.G,{icon:S.$aW,onClick:()=>{ie({action:f._U.removeModuleItems,value:e})},style:{cursor:"pointer"}})),t.createElement("p",{style:{cursor:"pointer"},onClick:()=>{var l;if(e.isOpen=!(null!==(l=null===e||void 0===e?void 0:e.isOpen)&&void 0!==l&&l),ie({action:f._U.setModuleItems,value:le.items}),e.isOpen){var o,i;X((0,T.wM)({pins:[{position:{lat:null===m||void 0===m||null===(o=m.source)||void 0===o?void 0:o.lat,lng:null===m||void 0===m||null===(i=m.source)||void 0===i?void 0:i.lng},type:"Pin"}]})),X((0,T.wM)({zoom:17}))}else{if(null!==Ne&&void 0!==Ne&&Ne.value){var t,n,d,a,r,s;const e=JSON.parse(null!==(t=null===Ne||void 0===Ne?void 0:Ne.value)&&void 0!==t?t:"{}");X((0,T.wM)({pins:[{position:{lat:null===e||void 0===e||null===(n=e.source)||void 0===n?void 0:n.lat,lng:null===e||void 0===e||null===(d=e.source)||void 0===d?void 0:d.lng},type:"OriginMarker"},{position:{lat:null===e||void 0===e||null===(a=e.destination)||void 0===a?void 0:a.lat,lng:null===e||void 0===e||null===(r=e.destination)||void 0===r?void 0:r.lng},type:"DestinationMarker"}].concat(null===le||void 0===le||null===(s=le.items)||void 0===s?void 0:s.map(e=>{var l,o,i;const t=JSON.parse(null!==(l=e.value)&&void 0!==l?l:"{}");return{position:{lat:null===t||void 0===t||null===(o=t.source)||void 0===o?void 0:o.lat,lng:null===t||void 0===t||null===(i=t.source)||void 0===i?void 0:i.lng},type:"Pin"}}))}))}else{var v;X((0,T.wM)({pins:null===le||void 0===le||null===(v=le.items)||void 0===v?void 0:v.map(e=>{var l,o,i;const t=JSON.parse(null!==(l=e.value)&&void 0!==l?l:"{}");return{position:{lat:null===t||void 0===t||null===(o=t.source)||void 0===o?void 0:o.lat,lng:null===t||void 0===t||null===(i=t.source)||void 0===i?void 0:i.lng},type:"Pin"}})}))}Ce(!1),X((0,T.wM)({zoom:null}))}}},t.createElement("span",{style:{fontSize:"12px"}},"".concat(l+1,". ")),"".concat(e.item_code)),t.createElement("p",{style:{fontSize:"14px"}},"".concat(null===m||void 0===m||null===(a=m.source)||void 0===a?void 0:a.address)),e.isOpen&&t.createElement("div",null,Object.keys(c).map((e,l)=>t.createElement("p",{style:{fontSize:"12px"},key:l},"".concat(e,": ").concat(I()(c[e]).format("DD MMMM YYYY HH:mm")))),t.createElement("p",null,"Notes"),t.createElement("textarea",{defaultValue:null===p||void 0===p?void 0:p.notes,className:ce.templateNotes,onChange:e=>p.notes=e.target.value}),t.createElement("p",null,"Status"),Me&&t.createElement(O.Z,{visible:!0,items:null===Me||void 0===Me||null===(r=Me.options)||void 0===r?void 0:r.list.map(e=>({label:e,value:e})),className:ce.dropdownClassContainer,onChange:l=>{var o,i;p.status=l,e[null===Me||void 0===Me||null===(o=Me.options)||void 0===o?void 0:o.mapToItem]=JSON.stringify(p),c[l]=(0,Z.now)(),e.quantity=JSON.stringify(c),null!==Se&&void 0!==Se&&null!==(i=Se.options)&&void 0!==i&&i.realtime&&null!==K&&void 0!==K&&K.id?navigator.geolocation.getCurrentPosition(o=>{const i={},t={lat:o.coords.latitude,lng:o.coords.longitude,id:"10"};i[l]=t,e.total=JSON.stringify(i),ie({action:f._U.setModuleItems,value:le.items}),K.lat=o.coords.latitude,K.lng=o.coords.longitude}):ie({action:f._U.setModuleItems,value:le.items})},selectionType:null===Me||void 0===Me||null===(s=Me.options)||void 0===s?void 0:s.type,backgroundColor:null!==Me&&void 0!==Me&&null!==(v=Me.options)&&void 0!==v&&v.valueC&&null!==Me&&void 0!==Me&&Me.value?null===Me||void 0===Me||null===(u=Me.options)||void 0===u?void 0:u.valueC:"",value:void 0===(null===p||void 0===p?void 0:p.status)||null===(null===p||void 0===p?void 0:p.status)?"":null===p||void 0===p?void 0:p.status}))),item:e}}),onhandleDragEnd:e=>{xe(!1),ge(!0),setTimeout(()=>ge(!1),10),ie({action:f._U.setModuleItems,value:e.map((e,l)=>(0,i.Z)((0,i.Z)({},e.item),{},{index:l}))})}}),!0===(null===Ne||void 0===Ne?void 0:Ne.visible)&&t.createElement("div",{style:{border:"1px dashed gray",marginTop:"10px",cursor:"pointer"},onClick:()=>{var e;const l=JSON.parse(null!==(e=null===Ne||void 0===Ne?void 0:Ne.value)&&void 0!==e?e:"{}");var o,i;null!==l&&void 0!==l&&l.destination&&(X((0,T.wM)({pins:[{position:{lat:null===l||void 0===l||null===(o=l.destination)||void 0===o?void 0:o.lat,lng:null===l||void 0===l||null===(i=l.destination)||void 0===i?void 0:i.lng},type:"DestinationMarker"}]})),X((0,T.wM)({zoom:17})))}},t.createElement("p",null,"End"),t.createElement("p",{style:{fontSize:"12px"}},"".concat(null!==(s=null===(v=JSON.parse(null!==(c=null===Ne||void 0===Ne?void 0:Ne.value)&&void 0!==c?c:"{}"))||void 0===v||null===(u=v.destination)||void 0===u?void 0:u.address)&&void 0!==s?s:"Please set end")))):t.createElement("div",null,t.createElement("p",{style:{fontSize:"14px"}},"None found."),t.createElement("p",{style:{fontSize:"14px"}},"Add using filters below. Click Add to Route or Add All to Route to add pin/s. Set a starting and end point. When done press Generate Route. You can also set Optimize Route Order to No and drag pins manually.")),(null===ee||void 0===ee||null===(_=ee.routes)||void 0===_||null===(h=_.DRIVE)||void 0===h?void 0:h.length)>0&&(null===le||void 0===le||null===(b=le.items)||void 0===b?void 0:b.length)>0&&t.createElement("div",{style:{margin:"40px 0"}},t.createElement("p",{style:{fontSize:"12px"}},"Route Distance: ".concat(+(null===ee||void 0===ee||null===(x=ee.routes)||void 0===x||null===(C=x.DRIVE[0])||void 0===C?void 0:C.distanceMeters)/1e3," km")),t.createElement("p",{style:{fontSize:"12px"}},"No of Stopover: ".concat(le.items.length," ")),t.createElement("p",{style:{fontSize:"12px"}},"Time per Stopover: ".concat(+(null===Te||void 0===Te?void 0:Te.value)/60," min")),t.createElement("p",{style:{fontSize:"12px"}},"Total Duration: ".concat(((+(null===ee||void 0===ee||null===(w=ee.routes)||void 0===w||null===(k=w.DRIVE[0])||void 0===k||null===(N=k.duration)||void 0===N?void 0:N.replace("s",""))+ +(null===Te||void 0===Te?void 0:Te.value)*le.items.length)/3600).toFixed(2)," hr"))),(null===le||void 0===le||null===(D=le.items)||void 0===D?void 0:D.length)>1&&(null===Ne||void 0===Ne?void 0:Ne.value)&&t.createElement("div",null,!he&&t.createElement(g.pd,{id:"optimizeWaypointOrder?",title:"Optimize Route Order",ungrouped:!0,withAckButton:!1,value:be,style:{margin:"20px 0px 20px 0px",width:"auto"},toggleSelected:e=>{xe(!!e)}}),t.createElement(g.zx,{title:"Generate Routes",style:{width:"100%",backgroundColor:"darkblue",textAlign:"left",marginTop:"50px"},clicked:async()=>{if(null!==Ne&&void 0!==Ne&&Ne.value){var e,l,o,t,n;const C={},w=JSON.parse(null!==(e=null===Ne||void 0===Ne?void 0:Ne.value)&&void 0!==e?e:"{}"),M=await(0,ye.s)({origin:{location:{latLng:{latitude:w.source.lat,longitude:w.source.lng}}},destination:{location:{latLng:{latitude:w.destination.lat,longitude:w.destination.lng}}},intermediates:null===le||void 0===le||null===(l=le.items)||void 0===l?void 0:l.map(e=>{var l,o,i;const t=JSON.parse(null!==(l=e.value)&&void 0!==l?l:"{}");return{location:{latLng:{latitude:null===t||void 0===t||null===(o=t.source)||void 0===o?void 0:o.lat,longitude:null===t||void 0===t||null===(i=t.source)||void 0===i?void 0:i.lng}}}}),computeAlternativeRoutes:"false",optimizeWaypointOrder:be?"true":"false",travelMode:_e.jk[0],routingPreference:"traffic_aware",extraComputations:["TRAFFIC_ON_POLYLINE"]},null===$||void 0===$||null===(o=$.misc_info)||void 0===o?void 0:o.map);var d,a,r;if(null!==M&&void 0!==M&&null!==(t=M.routes)&&void 0!==t&&t.DRIVE)if(null!==M&&void 0!==M&&null!==(d=M.routes)&&void 0!==d&&null!==(a=d.DRIVE[0])&&void 0!==a&&a.legs)null===M||void 0===M||(null===(r=M.routes)||void 0===r||delete r.DRIVE[0].legs);if(C[_e.jk[0]]=[],(null===M||void 0===M||null===(n=M.routes)||void 0===n?void 0:n.length)>0){var s,v,u,c,p,m,_,y,h,g,b,x,E;if(null!==(s=M.routes[0])&&void 0!==s&&s.optimizedIntermediateWaypointIndex)ie({action:f._U.setModuleItems,value:null===(x=M.routes[0])||void 0===x||null===(E=x.optimizedIntermediateWaypointIndex)||void 0===E?void 0:E.map((e,l)=>(0,i.Z)((0,i.Z)({},le.items[+e]),{},{index:l}))});C[_e.jk[0]]=[null===M||void 0===M?void 0:M.routes[0]],X((0,T.wM)({routes:C,pins:[{position:{lat:null===w||void 0===w||null===(v=w.source)||void 0===v?void 0:v.lat,lng:null===w||void 0===w||null===(u=w.source)||void 0===u?void 0:u.lng},type:"OriginMarker"},{position:{lat:null===w||void 0===w||null===(c=w.destination)||void 0===c?void 0:c.lat,lng:null===w||void 0===w||null===(p=w.destination)||void 0===p?void 0:p.lng},type:"DestinationMarker"}].concat(null===le||void 0===le||null===(m=le.items)||void 0===m?void 0:m.map(e=>{var l,o,i;const t=JSON.parse(null!==(l=e.value)&&void 0!==l?l:"{}");return{position:{lat:null===t||void 0===t||null===(o=t.source)||void 0===o?void 0:o.lat,lng:null===t||void 0===t||null===(i=t.source)||void 0===i?void 0:i.lng},type:"Pin"}}))})),Ae(JSON.stringify((0,i.Z)((0,i.Z)({},ee),{},{routes:{[_e.jk[0]]:[null===M||void 0===M?void 0:M.routes[0]]},pins:[{position:{lat:null===w||void 0===w||null===(_=w.source)||void 0===_?void 0:_.lat,lng:null===w||void 0===w||null===(y=w.source)||void 0===y?void 0:y.lng},type:"OriginMarker"},{position:{lat:null===w||void 0===w||null===(h=w.destination)||void 0===h?void 0:h.lat,lng:null===w||void 0===w||null===(g=w.destination)||void 0===g?void 0:g.lng},type:"DestinationMarker"}].concat(null===le||void 0===le||null===(b=le.items)||void 0===b?void 0:b.map(e=>{var l,o,i;const t=JSON.parse(null!==(l=e.value)&&void 0!==l?l:"{}");return{position:{lat:null===t||void 0===t||null===(o=t.source)||void 0===o?void 0:o.lat,lng:null===t||void 0===t||null===(i=t.source)||void 0===i?void 0:i.lng},type:"Pin"}}))})),Se.index)}}}})),(null===le||void 0===le||null===(P=le.items)||void 0===P?void 0:P.length)>1&&!0===!(null!==Ne&&void 0!==Ne&&Ne.visible)&&t.createElement("div",null,t.createElement(g.zx,{title:"Save Map",loading:he,style:{width:"100%",backgroundColor:"darkblue",textAlign:"left",marginTop:"50px"},clicked:()=>{var e;Ae(JSON.stringify((0,i.Z)((0,i.Z)({},ee),{},{pins:null===le||void 0===le||null===(e=le.items)||void 0===e?void 0:e.map(e=>{var l,o,i;const t=JSON.parse(null!==(l=e.value)&&void 0!==l?l:"{}");return{position:{lat:null===t||void 0===t||null===(o=t.source)||void 0===o?void 0:o.lat,lng:null===t||void 0===t||null===(i=t.source)||void 0===i?void 0:i.lng},type:"Pin"}})})),Se.index),ge(!0),setTimeout(()=>ge(!1),1e3)}}))),t.createElement("div",{style:{width:y.tq?"100%":"80%"}},t.createElement("div",{style:{display:"flex",justifyContent:"right",padding:"20px 5px 10px 10px"}},t.createElement(M.G,{icon:Ee?S.byT:S.tAh,onClick:()=>{Ce(!Ee),X((0,T.wM)({zoom:null}))},style:{cursor:"pointer"}})),t.createElement("div",{style:{height:"auto",width:"100%",pointerEvents:Ee?"none":""}},Q))),t.createElement("div",{style:{display:"flex",flexDirection:y.tq?"column":"row",width:"100%",padding:"20px"}},t.createElement("div",{style:{width:"20%",padding:"20px 10px 0 10px"}},t.createElement("div",{style:{disabled:!0,width:"250px",display:"flex",flexDirection:"column",marginRight:"0px",mmarginTop:"".concat(280+60*(null!==(A=null===le||void 0===le||null===(L=le.items)||void 0===L?void 0:L.length)&&void 0!==A?A:1),"px"),fontSize:"18px"}},"Filters:",(null===we||void 0===we||null===(z=we.options)||void 0===z||null===(R=z.filters)||void 0===R?void 0:R.length)>0&&t.createElement("div",{className:ce.dropdownContainer},t.createElement(g.rk,{items:ke?pe.Z(me.Z("value"))(ke.map(e=>{const l=e.component_fields.find(e=>{var l;return e.field_name===(null===we||void 0===we||null===(l=we.options)||void 0===l?void 0:l.filters[0])});return{label:null===l||void 0===l?void 0:l.value,value:null===l||void 0===l?void 0:l.value,component:e}})):[],onChange:e=>{var l,o,i,t;ae([]),ne({[null===we||void 0===we||null===(l=we.options)||void 0===l?void 0:l.filters[0]]:e.value}),Ie([]),ue(!1),se(!1),setTimeout(()=>se(!0),10),Ie(null===ke||void 0===ke||null===(o=ke.filter(e=>!le.items.map(e=>e.item_code).includes(e.title)&&e.component_fields.find(e=>"Pin"===e.data_type_name&&e.value)))||void 0===o?void 0:o.filter(l=>{var o;return(null===(o=l.component_fields.filter(l=>l.value===e.value))||void 0===o?void 0:o.length)>0})),ie({action:f._U.setModuleNewStepComponents,value:null!==(i=null===(t=le.currentStep)||void 0===t?void 0:t.component_blueprints)&&void 0!==i?i:[]})},placeholder:null===we||void 0===we||null===(U=we.options)||void 0===U?void 0:U.filters[0],moliclassname:ce.componentsSelectMenuOverlayListItem,className:ce.currencyInput,tmiClassName:ce.tmiClassName})),t.createElement("div",{style:{height:"10px"}}),(null===we||void 0===we||null===(F=we.options)||void 0===F||null===(W=F.filters)||void 0===W?void 0:W.length)>1&&!y.tq&&re&&t.createElement("div",{className:ce.dropdownContainer},t.createElement(g.rk,{items:te[null===we||void 0===we||null===(q=we.options)||void 0===q?void 0:q.filters[0]]?pe.Z(me.Z("value"))(ke.map(e=>{const l=e.component_fields.find(e=>{var l;return e.field_name===(null===we||void 0===we||null===(l=we.options)||void 0===l?void 0:l.filters[1])});return{label:null===l||void 0===l?void 0:l.value,value:null===l||void 0===l?void 0:l.value,component:e}}).filter(e=>e.component.component_fields.filter(e=>{var l,o;return e.value===te[null===we||void 0===we||null===(l=we.options)||void 0===l?void 0:l.filters[0]]&&e.field_name===(null===we||void 0===we||null===(o=we.options)||void 0===o?void 0:o.filters[0])}).length>0)):[],onChange:e=>{var l,o,t,n;ue(!1),setTimeout(()=>ue(!0),10),ie({action:f._U.setModuleNewStepComponents,value:null!==(l=null===(o=le.currentStep)||void 0===o?void 0:o.component_blueprints)&&void 0!==l?l:[]}),ne((0,i.Z)((0,i.Z)({},te),{},{[null===we||void 0===we||null===(t=we.options)||void 0===t?void 0:t.filters[1]]:e.value})),Ie(null===ke||void 0===ke||null===(n=ke.filter(e=>!le.items.map(e=>e.item_code).includes(e.title)&&e.component_fields.find(e=>"Pin"===e.data_type_name&&e.value)))||void 0===n?void 0:n.filter(l=>{var o;return(null===(o=l.component_fields.filter(l=>l.value===e.value))||void 0===o?void 0:o.length)>0}).filter(e=>{var l;return(null===(l=e.component_fields.filter(e=>{var l;return e.value===te[null===we||void 0===we||null===(l=we.options)||void 0===l?void 0:l.filters[0]]}))||void 0===l?void 0:l.length)>0}))},placeholder:null===we||void 0===we||null===(B=we.options)||void 0===B?void 0:B.filters[1],style:{fontSize:"16px"},moliclassname:ce.componentsSelectMenuOverlayListItem,tmiClassName:ce.tmiClassName})),t.createElement("div",{style:{height:"10px"}}),(null===we||void 0===we||null===(Y=we.options)||void 0===Y||null===(H=Y.filters)||void 0===H?void 0:H.length)>2&&!y.tq&&ve&&t.createElement("div",{className:ce.dropdownContainer},t.createElement(g.rk,{items:te[null===we||void 0===we||null===(V=we.options)||void 0===V?void 0:V.filters[1]]?pe.Z(me.Z("value"))(Ze.map(e=>{const l=e.component_fields.find(e=>{var l;return e.field_name===(null===we||void 0===we||null===(l=we.options)||void 0===l?void 0:l.filters[2])});return{label:null===l||void 0===l?void 0:l.value,value:null===l||void 0===l?void 0:l.value,component:e}}).filter(e=>e.component.component_fields.filter(e=>{var l,o;return e.value===te[null===we||void 0===we||null===(l=we.options)||void 0===l?void 0:l.filters[1]]&&e.field_name===(null===we||void 0===we||null===(o=we.options)||void 0===o?void 0:o.filters[1])}).length>0)):[],onChange:e=>{var l,o,t,n;ie({action:f._U.setModuleNewStepComponents,value:null!==(l=null===(o=le.currentStep)||void 0===o?void 0:o.component_blueprints)&&void 0!==l?l:[]}),ne((0,i.Z)((0,i.Z)({},te),{},{[null===we||void 0===we||null===(t=we.options)||void 0===t?void 0:t.filters[1]]:e.value})),Ie(null===ke||void 0===ke||null===(n=ke.filter(e=>!le.items.map(e=>e.item_code).includes(e.title)&&e.component_fields.find(e=>"Pin"===e.data_type_name&&e.value)))||void 0===n?void 0:n.filter(l=>{var o;return(null===(o=l.component_fields.filter(l=>l.value===e.value))||void 0===o?void 0:o.length)>0}).filter(e=>{var l;return(null===(l=e.component_fields.filter(e=>{var l;return e.value===te[null===we||void 0===we||null===(l=we.options)||void 0===l?void 0:l.filters[0]]}))||void 0===l?void 0:l.length)>0}))},placeholder:null===we||void 0===we||null===(j=we.options)||void 0===j?void 0:j.filters[2],style:{fontSize:"16px"},moliclassname:ce.componentsSelectMenuOverlayListItem,tmiClassName:ce.tmiClassName})))),t.createElement("div",{style:{width:y.tq?"100%":"80%"}},t.createElement(E.default,{className:ce.itemsTable,modern:!!y.tq,columns:["Name","Address","Action"],list:null===Ze||void 0===Ze?void 0:Ze.map(e=>{var l,o;const i=null===(l=e.component_fields.find(e=>"Pin"===e.data_type_name))||void 0===l?void 0:l.value,n=JSON.parse(null!==i&&void 0!==i?i:"{}");return{id:e.id,location:null===n||void 0===n?void 0:n.source,Name:t.createElement("div",{style:{textAlign:"left",padding:"10px",cursor:"pointer"}},e.title),Action:t.createElement(g.zx,{title:!0===(null===Ne||void 0===Ne?void 0:Ne.visible)?"Add to Route":"Add to Map",clicked:()=>{var l,o;const t={id:(0,m.mR)(),item_code:e.title,value:i,alt_value:"{}",quantity:"{}",total:"{}",isOpen:!0};ie({action:f._U.addModuleItems,value:t}),Ie(Ze.filter(l=>l.id!==e.id)),X((0,T.wM)({pins:[{position:{lat:null===n||void 0===n||null===(l=n.source)||void 0===l?void 0:l.lat,lng:null===n||void 0===n||null===(o=n.source)||void 0===o?void 0:o.lng}}]}))},titleStyle:{fontSize:"12px"},style:{height:"30px",width:"140px"}}),Address:t.createElement("div",{style:{textAlign:"left",padding:"10px"}},null===(o=n.source)||void 0===o?void 0:o.address)}}),onListItemClick:e=>{var l,o;X((0,T.wM)({pins:[{position:{lat:null===(l=e.location)||void 0===l?void 0:l.lat,lng:null===(o=e.location)||void 0===o?void 0:o.lng},type:"Pin"}]}))}}),Ze.length>1&&t.createElement("div",{style:{display:"flex",justifyContent:"right",padding:"20px 5px 0 10px"}},t.createElement(g.zx,{title:!0===(null===Ne||void 0===Ne?void 0:Ne.visible)?"Add All to Route":"Add All to Map",style:{height:"30px",width:"140px",backgroundColor:"darkgreen"},titleStyle:{fontSize:"12px"},clicked:()=>{const e=Ze.map(e=>{var l;const o=null===(l=e.component_fields.find(e=>"Pin"===e.data_type_name))||void 0===l?void 0:l.value;return{id:(0,m.mR)(),item_code:e.title,value:o,alt_value:"{}",quantity:"{}",total:"{}"}});X((0,T.wM)({pins:null===e||void 0===e?void 0:e.map(e=>{var l,o,i;const t=JSON.parse(null!==(l=e.value)&&void 0!==l?l:"{}");return{position:{lat:null===t||void 0===t||null===(o=t.source)||void 0===o?void 0:o.lat,lng:null===t||void 0===t||null===(i=t.source)||void 0===i?void 0:i.lng},type:"Pin"}})})),ie({action:f._U.setModuleItems,value:[...le.items,...e]}),Ie([])}})))))});var ge=o(67598),be=o(67861);const xe=e=>{var l,o,t,n,d,a,r,s,v,u,c,p,_,h,b,E,C,M,S,k,Z,I,N,T,D;const[P,A]=(0,f.pQ)(),{user:O,favorites:L,creating:z,items:R,templateName:U,field:F,showSecond:W,listItems:q,orderItems:B,setShowSecond:Y,components:H,template:V,component:G,showFavorites:J,companyData:K,setShowFavorites:Q,setListItems:X,setOrderItems:$,setSelectedItems:ee,selectedItems:le}=e,oe=null!==(l=null===V||void 0===V||null===(o=V.config.find(e=>"quantity"===e.key))||void 0===o?void 0:o.label)&&void 0!==l?l:"Quantity",te=null!==(t=null===V||void 0===V||null===(n=V.config.find(e=>"alt_value"===e.key))||void 0===n?void 0:n.label)&&void 0!==t?t:"Actual",de=null!==(d=null===V||void 0===V||null===(a=V.config.find(e=>"item_code"===e.key))||void 0===a?void 0:a.label)&&void 0!==d?d:"Product ID",ae=null!==(r=null===V||void 0===V?void 0:V.list)&&void 0!==r?r:[],re=e=>{var l;let o=[];e.filter(e=>{const l=null===R||void 0===R?void 0:R.find(l=>{var o;return(null===(o=l.component_fields.filter(l=>l.value===e.component_id))||void 0===o?void 0:o.length)>0});l&&(o=[...o,l])}),X(o),$(null===(l=o)||void 0===l?void 0:l.map(e=>{let l={};return G.selected_fields.filter(o=>{var t,n;"Text"!==o.data_type_name&&"Number"!==o.data_type_name||(l=(0,i.Z)((0,i.Z)({},l),{},{[o.field_name]:null!==(t=null===(n=e.component_fields.find(e=>e.field_name===o.field_name))||void 0===n?void 0:n.value)&&void 0!==t?t:0}))}),l}))},se=(e,l,o)=>{var i;const t=e.component_fields.find(e=>{var l;return e.field_name===(null===G||void 0===G||null===(l=G.options)||void 0===l?void 0:l.key)}),n=null===P||void 0===P||null===(i=P.items)||void 0===i?void 0:i.find(e=>e.item_code===t.value);if(void 0===n){var d,a,r;const e={alt_value:null!==(d=B[l][te])&&void 0!==d?d:0,quantity:null!==(a=B[l][oe])&&void 0!==a?a:0,item_code:t.value,id:(0,m.mR)(),value:null!==(r=parseFloat(o*+B[l][oe]).toFixed(2))&&void 0!==r?r:0};A({action:f._U.addModuleItems,value:e})}else{var s;if(0==+B[l][oe])A({action:f._U.removeModuleItems,value:n});else n.quantity=B[l][oe],n.alt_value=B[l][te],n.value=null!==(s=parseFloat(o*+B[l][oe]).toFixed(2))&&void 0!==s?s:0,A({action:f._U.updateModuleItems,value:n})}};return be.createElement("div",{style:{width:"100%",justifyContent:"center"}},be.createElement("div",null,be.createElement("div",{style:{display:"flex",flexDirection:"row",marginTop:"50px",width:"100%"}},be.createElement("div",{style:{disabled:!0,width:"250px",display:y.tq?"none":"flex",flexDirection:"column",marginRight:"20px",marginTop:"".concat(280+60*(null!==(s=null===P||void 0===P||null===(v=P.items)||void 0===v?void 0:v.length)&&void 0!==s?s:1),"px"),fontSize:"18px"}},"Filters:",(null===F||void 0===F||null===(u=F.options)||void 0===u||null===(c=u.filters)||void 0===c?void 0:c.length)>0&&be.createElement("div",{className:ge.Z.dropdownContainer},be.createElement(g.rk,{items:R?pe.Z(me.Z("value"))(R.map(e=>{const l=e.component_fields.find(e=>{var l;return e.field_name===(null===F||void 0===F||null===(l=F.options)||void 0===l?void 0:l.filters[0])});return{label:null===l||void 0===l?void 0:l.value,value:null===l||void 0===l?void 0:l.value,component:e}})):[],onChange:e=>{var l,o,t;Q(!1),$([]),ee({[null===F||void 0===F||null===(l=F.options)||void 0===l?void 0:l.filters[0]]:e.value}),X([]),Y(!1),setTimeout(()=>Y(!0),10),X(null===R||void 0===R?void 0:R.filter(l=>{var o;return(null===(o=l.component_fields.filter(l=>l.value===e.value))||void 0===o?void 0:o.length)>0})),A({action:f._U.setModuleNewStepComponents,value:null!==(o=null===(t=P.currentStep)||void 0===t?void 0:t.component_blueprints)&&void 0!==o?o:[]}),$(null===R||void 0===R?void 0:R.filter(l=>{var o;return(null===(o=l.component_fields.filter(l=>l.value===e.value))||void 0===o?void 0:o.length)>0}).map(e=>{let l={};return G.selected_fields.filter(o=>{var t,n;"Text"!==o.data_type_name&&"Number"!==o.data_type_name||(l=(0,i.Z)((0,i.Z)({},l),{},{[o.field_name]:null!==(t=null===(n=e.component_fields.find(e=>e.field_name===o.field_name))||void 0===n?void 0:n.value)&&void 0!==t?t:0}))}),l}))},placeholder:null===F||void 0===F||null===(p=F.options)||void 0===p?void 0:p.filters[0],moliclassname:ge.Z.componentsSelectMenuOverlayListItem,className:ge.Z.currencyInput})),be.createElement("div",{style:{height:"10px"}}),(null===F||void 0===F||null===(_=F.options)||void 0===_||null===(h=_.filters)||void 0===h?void 0:h.length)>1&&!y.tq&&W&&be.createElement("div",{className:ge.Z.dropdownContainer},be.createElement(g.rk,{items:le[null===F||void 0===F||null===(b=F.options)||void 0===b?void 0:b.filters[0]]?pe.Z(me.Z("value"))(R.map(e=>{const l=e.component_fields.find(e=>{var l;return e.field_name===(null===F||void 0===F||null===(l=F.options)||void 0===l?void 0:l.filters[1])});return{label:null===l||void 0===l?void 0:l.value,value:null===l||void 0===l?void 0:l.value,component:e}}).filter(e=>e.component.component_fields.filter(e=>{var l,o;return e.value===le[null===F||void 0===F||null===(l=F.options)||void 0===l?void 0:l.filters[0]]&&e.field_name===(null===F||void 0===F||null===(o=F.options)||void 0===o?void 0:o.filters[0])}).length>0)):[],onChange:e=>{var l,o,t;Q(!1),A({action:f._U.setModuleNewStepComponents,value:null!==(l=null===(o=P.currentStep)||void 0===o?void 0:o.component_blueprints)&&void 0!==l?l:[]}),ee((0,i.Z)((0,i.Z)({},le),{},{[null===F||void 0===F||null===(t=F.options)||void 0===t?void 0:t.filters[1]]:e.value})),$(null===R||void 0===R?void 0:R.filter(l=>{var o;return(null===(o=l.component_fields.filter(l=>l.value===e.value))||void 0===o?void 0:o.length)>0}).filter(e=>{var l;return(null===(l=e.component_fields.filter(e=>{var l;return e.value===le[null===F||void 0===F||null===(l=F.options)||void 0===l?void 0:l.filters[0]]}))||void 0===l?void 0:l.length)>0}).map(e=>{let l={};return G.selected_fields.filter(o=>{var t,n;"Text"!==o.data_type_name&&"Number"!==o.data_type_name||(l=(0,i.Z)((0,i.Z)({},l),{},{[o.field_name]:null!==(t=null===(n=e.component_fields.find(e=>e.field_name===o.field_name))||void 0===n?void 0:n.value)&&void 0!==t?t:0}))}),l})),X(null===R||void 0===R?void 0:R.filter(l=>{var o;return(null===(o=l.component_fields.filter(l=>l.value===e.value))||void 0===o?void 0:o.length)>0}).filter(e=>{var l;return(null===(l=e.component_fields.filter(e=>{var l;return e.value===le[null===F||void 0===F||null===(l=F.options)||void 0===l?void 0:l.filters[0]]}))||void 0===l?void 0:l.length)>0}))},placeholder:null===F||void 0===F||null===(E=F.options)||void 0===E?void 0:E.filters[1],style:{fontSize:"16px"},moliclassname:ge.Z.componentsSelectMenuOverlayListItem}))),be.createElement("div",{style:{display:"flex",flexDirection:"column",width:y.tq?"100%":"80%"}},be.createElement("p",null,"Orders"),be.createElement(ne.Z,{tableHostSimple:ie.Z.itemsContainer_ii,style:{width:"100%"},highlights:"var(--app-color-gray-lighter)",columns:y.tq?null===K||void 0===K||null===(C=K.misc_info)||void 0===C||null===(M=C.templatesData.find(e=>e.name===U).config)||void 0===M?void 0:M.filter(e=>"Text"===e.value||"Number"===e.value||"Connector"===e.value).map(e=>e.label).slice(0,2):null===K||void 0===K||null===(S=K.misc_info)||void 0===S||null===(k=S.templatesData.find(e=>e.name===U).config)||void 0===k?void 0:k.filter(e=>"Text"===e.value||"Number"===e.value||"Connector"===e.value).map(e=>e.label),footer:y.tq?["Totals",be.createElement("div",{className:ge.Z.templateInformation,key:1,style:{padding:"20px 5px"}},"".concat(j.Z((e,l)=>{var o;return null!==(o=+e+ +l.quantity)&&void 0!==o?o:0},0,null!==(Z=null===P||void 0===P?void 0:P.items)&&void 0!==Z?Z:[])))]:["Totals:",be.createElement("div",{key:1,className:ge.Z.templateInformation,style:{padding:"20px 5px"}},"".concat(j.Z((e,l)=>{var o;return null!==(o=+e+ +l.quantity)&&void 0!==o?o:0},0,null!==(I=null===P||void 0===P?void 0:P.items)&&void 0!==I?I:[]))),be.createElement("div",{key:2,className:ge.Z.templateInformation,style:{padding:"20px 5px"}},"".concat(j.Z((e,l)=>{var o;return+e+(isNaN(+l.alt_value)?0:null!==(o=+l.alt_value)&&void 0!==o?o:0)},0,null!==(N=null===P||void 0===P?void 0:P.items)&&void 0!==N?N:[])))],list:null===P||void 0===P||null===(T=P.items)||void 0===T?void 0:T.map(e=>{var l,o;const i=e.item_code,t=null!==(l=e.quantity)&&void 0!==l?l:0,n=null!==(o=e.alt_value)&&void 0!==o?o:0;return{List:be.createElement("div",{className:ge.Z.templateInformation,style:{display:"flex",flex:"1"}},be.createElement("div",{style:{width:"40%"}},i),be.createElement("div",{style:{width:"20%"}},t)),[null===G||void 0===G?void 0:G.options.key]:be.createElement("div",{className:ge.Z.templateInformation},be.createElement("span",null,i)),Quantity:be.createElement("div",{className:ge.Z.templateInformation,style:{padding:"20px 5px"}},be.createElement("span",null,t)),Actual:be.createElement("div",{className:ge.Z.templateInformation},be.createElement("span",null,n)),id:e.id,code:i}}),onListItemClick:e=>{$(null===R||void 0===R?void 0:R.filter(l=>{var o;return(null===(o=l.component_fields.filter(l=>l.value===e.code))||void 0===o?void 0:o.length)>0}).map(e=>{var l;let o={};G.selected_fields.filter(l=>{var t,n;"Text"!==l.data_type_name&&"Number"!==l.data_type_name||(o=(0,i.Z)((0,i.Z)({},o),{},{[l.field_name]:null!==(t=null===(n=e.component_fields.find(e=>e.field_name===l.field_name))||void 0===n?void 0:n.value)&&void 0!==t?t:0}))});const t=null===P||void 0===P||null===(l=P.items)||void 0===l?void 0:l.find(e=>e.item_code===o[de]);return o[te]=t.alt_value,o[oe]=t.quantity,o})),X(null===H||void 0===H?void 0:H.filter(l=>{var o;return(null===(o=l.component_fields.filter(l=>l.value===e.code))||void 0===o?void 0:o.length)>0}))}}),be.createElement("br",null),be.createElement("div",{className:ge.Z.searchContainer,style:{display:J?"none":""}},be.createElement(w.O,null),be.createElement("input",{placeholder:"Search",className:ge.Z.searchInput,onChange:e=>{var l,o,t;(null===(l=e.target.value)||void 0===l?void 0:l.length)>1?($(null===(t=H.filter(e=>e.component_fields.filter(e=>e.component_blueprint_id===F.options.component_id).length>0))||void 0===t?void 0:t.filter(l=>{var o;return(null===(o=l.component_fields.filter(l=>l.value.includes(e.target.value)))||void 0===o?void 0:o.length)>0}).map(e=>{let l={};return G.selected_fields.filter(o=>{var t,n;"Text"!==o.data_type_name&&"Number"!==o.data_type_name||(l=(0,i.Z)((0,i.Z)({},l),{},{[o.field_name]:null!==(t=null===(n=e.component_fields.find(e=>e.field_name===o.field_name))||void 0===n?void 0:n.value)&&void 0!==t?t:0}))}),l})),X(null===R||void 0===R?void 0:R.filter(l=>{var o;return(null===(o=l.component_fields.filter(l=>l.value.includes(e.target.value)))||void 0===o?void 0:o.length)>0}))):0==(null===(o=e.target.value)||void 0===o?void 0:o.length)&&($([]),X([]))}})),be.createElement(ne.Z,{tableHostSimple:ie.Z.itemsContainer_ii,style:{width:"100%"},columns:y.tq?[null!==(D=null===G||void 0===G?void 0:G.name)&&void 0!==D?D:"Item"]:[...ae],list:q.map((e,l)=>{var o,i,t,n,d,a,r,s,v;const u="".concat(null===(o=e.component_fields.find(e=>"Name"===e.field_name))||void 0===o?void 0:o.value),c="".concat(null===(i=e.component_fields.find(e=>"Range"===e.field_name))||void 0===i?void 0:i.value),p="".concat(null===(t=e.component_fields.find(e=>"Application"===e.field_name))||void 0===t?void 0:t.value),m=null===(n=e.component_fields.find(e=>"Link"===e.data_type_name&&"Picture"!==e.field_name))||void 0===n?void 0:n.value,f=null===(d=e.component_fields.find(e=>"Link"===e.data_type_name&&"Picture"===e.field_name))||void 0===d?void 0:d.value,_=null===K||void 0===K||null===(a=K.misc_info)||void 0===a?void 0:a.templatesData.find(e=>"Battery Order Template"===e.name).config.find(e=>e.label===(null===G||void 0===G?void 0:G.options.key)),y=null===P||void 0===P||null===(r=P.items)||void 0===r?void 0:r.find(e=>e[_.key]===B[l][null===G||void 0===G?void 0:G.options.key]),h=y?+y.quantity:0,b=y?+y.alt_value:0;let E={};return ae.filter(l=>{var o,i;E[l]=be.createElement("div",{className:ge.Z.templateInformation},"".concat(null!==(o=null===(i=e.component_fields.find(e=>e.field_name===l))||void 0===i?void 0:i.value)&&void 0!==o?o:""))}),E[null!==(s=null===G||void 0===G?void 0:G.name)&&void 0!==s?s:"Item"]=be.createElement("div",null,be.createElement("div",{style:{display:"flex"}},be.createElement("div",{style:{display:"",width:"70%"}},be.createElement("div",{className:ge.Z.templateInformation},u)),be.createElement("input",{autoComplete:"off",className:ge.Z.templateInput,style:{border:"1px solid var(--app-color-gray-light)",width:"30%",height:"30px"},placeholder:h,onChange:e=>{+e.target.value>-1&&(B[l][oe]=+e.target.value)},onBlur:()=>{$([...B]),se(e,l,0)}}))),E.Quantity=z?be.createElement("div",{className:ge.Z.templateAddBox},be.createElement(g.zx,{clear:!0,className:ge.Z.templatePlus,clicked:()=>{h>0&&(B[l][oe]=h-1,B[l][te]=b-1,$([...B]),se(e,l,0))}},"-"),be.createElement("input",{autoComplete:"off",className:ge.Z.templateInput,placeholder:y?y.quantity:0,onChange:e=>{+e.target.value>-1&&(B[l][oe]=+e.target.value,B[l][te]=+e.target.value)},onBlur:()=>{$([...B]),se(e,l,0)}}),be.createElement(g.zx,{clear:!0,className:ge.Z.templatePlus,clicked:()=>{B[l][oe]=h+1,B[l][te]=b+1,$([...B]),se(e,l,0)}},"+")):be.createElement("div",{className:ge.Z.templateInput},y?y.quantity:0),E.Action=be.createElement(g.zx,{title:(null===(v=L.filter(e=>e.component_id===u))||void 0===v?void 0:v.length)>0?"Remove from Favorites":"Add to Favorites",clicked:()=>{var e;(null===(e=L.filter(e=>e.component_id===u))||void 0===e?void 0:e.length)>0?(0,x.Ni)(L.find(e=>e.component_id===u).id).subscribe({next:()=>{re(L.filter(e=>e.component_id!==u))}}):(0,x.Ic)(O.id,u,"components").subscribe({})},titleStyle:{fontSize:"12px"},style:{width:"200px",height:"30px"}}),E.Info=be.createElement("img",{alt:"lg",src:f,className:ge.Z.templatePicture,onClick:()=>window.open(m,"_blank")}),E.Name=be.createElement("div",{className:ge.Z.templateInformation},u),E.Application=be.createElement("div",{className:ge.Z.templateInformation},p),E.Range=be.createElement("div",{className:ge.Z.templateInformation},c),E.Actual=be.createElement("div",{className:ge.Z.templateAddBox,style:{padding:"0 10px 0 10px",border:z?"0":"1px solid var(--app-color-gray-lighter)"}},be.createElement("input",{disabled:z,autoComplete:"off",className:ge.Z.templateInput,placeholder:b,onChange:e=>{+e.target.value>-1&&(B[l][te]=+e.target.value,B[l][oe]=h)},onBlur:()=>{$([...B]),se(e,l,0)}})),E})}),0===(null===q||void 0===q?void 0:q.length)&&be.createElement("p",{style:{fontSize:y.tq?"16px":""}},"Please select an item"),be.createElement(g.zx,{light:!0,title:J?"Hide Favorites":"Show Favorites",clicked:()=>{Q(!J),!1===J?re(L):($([]),X([]))},style:{width:"180px",display:y.tq?"none":""}}))),y.tq&&be.createElement("div",{className:ge.Z.dropdownContainer},be.createElement(g.rk,{items:pe.Z(me.Z("value"))(R.map(e=>{const l=e.component_fields.find(e=>{var l;return e.field_name===(null===F||void 0===F||null===(l=F.options)||void 0===l?void 0:l.filters[0])});return{label:null===l||void 0===l?void 0:l.value,value:null===l||void 0===l?void 0:l.value,component:e}})),onChange:e=>{var l,o,t;Q(!1),$([]),ee({[null===F||void 0===F||null===(l=F.options)||void 0===l?void 0:l.filters[0]]:e.value}),X([]),Y(!1),setTimeout(()=>Y(!0),10),X(null===R||void 0===R?void 0:R.filter(l=>{var o;return(null===(o=l.component_fields.filter(l=>l.value===e.value))||void 0===o?void 0:o.length)>0})),A({action:f._U.setModuleNewStepComponents,value:null!==(o=null===(t=P.currentStep)||void 0===t?void 0:t.component_blueprints)&&void 0!==o?o:[]}),$(null===R||void 0===R?void 0:R.filter(l=>{var o;return(null===(o=l.component_fields.filter(l=>l.value===e.value))||void 0===o?void 0:o.length)>0}).map(e=>{let l={};return G.selected_fields.filter(o=>{var t,n;"Text"!==o.data_type_name&&"Number"!==o.data_type_name||(l=(0,i.Z)((0,i.Z)({},l),{},{[o.field_name]:null!==(t=null===(n=e.component_fields.find(e=>e.field_name===o.field_name))||void 0===n?void 0:n.value)&&void 0!==t?t:0}))}),l}))},style:{fontSize:"16px"},moliclassname:ge.Z.componentsSelectMenuOverlayListItem})),be.createElement("br",null)))},Ee=e=>{var l,o,t,n,d,a,r,s,v,u,c,p,_,h,b,x,E,C,M,S,k,Z,I;const[N,T]=(0,f.pQ)(),{creating:D,showSecond:P,listItems:A,orderItems:O,setShowSecond:L,components:z,template:R,component:U,showFavorites:F,begunModule:W,setShowFavorites:q,setListItems:B,setOrderItems:Y,setSelectedItems:H,selectedItems:V}=e,G=U.selected_fields.find(e=>"Record"===e.data_type_name),J=z.filter(e=>{var l;return(null===(l=e.component_fields.filter(e=>{var l;return e.component_blueprint_id===(null===G||void 0===G||null===(l=G.options)||void 0===l?void 0:l.component_id)}))||void 0===l?void 0:l.length)>0}),K=(e,l,o,t,n,d)=>{var a;if("Number"===l)return D?be.createElement("input",{autoComplete:"off",type:"number",className:ge.Z.templateIIInput,style:{border:"1px solid var(--app-color-gray-light)",width:"50%",height:"30px"},placeholder:null!==e&&void 0!==e?e:"0",onChange:e=>{+e.target.value>-1&&(O[o][n]=+e.target.value,O[o][d]=+e.target.value)},onBlur:()=>{Y([...O]),((e,l)=>{var o;const t=e.component_fields.find(e=>{var l;return e.field_name===(null===R||void 0===R||null===(l=R.key)||void 0===l?void 0:l.label)}),n=null===N||void 0===N||null===(o=N.items)||void 0===o?void 0:o.find(e=>{var l;return e[null===R||void 0===R||null===(l=R.key)||void 0===l?void 0:l.key]===t.value});var d,a,r;if(void 0===n){if(void 0==+(null===(d=O[l])||void 0===d?void 0:d.quantity)||+(null===(a=O[l])||void 0===a?void 0:a.quantity)>0){let e={};null===R||void 0===R||R.slist.filter(o=>{var t,n;e=(0,i.Z)((0,i.Z)({},e),{},{[o.key]:null!==(t=O[l][o.key])&&void 0!==t?t:"",id:(0,m.mR)(),options:null!==(n=null===o||void 0===o?void 0:o.options)&&void 0!==n?n:{}})}),T({action:f._U.addModuleItems,value:e})}}else 0==+(null===(r=O[l])||void 0===r?void 0:r.quantity)?T({action:f._U.removeModuleItems,value:n}):(null===R||void 0===R||R.slist.filter(e=>{n[e.key]=O[l][e.key]}),T({action:f._U.updateModuleItems,value:n}))})(t,o)}}):be.createElement("div",{className:ge.Z.templateInput},null!==(a=e.value)&&void 0!==a?a:"0");if("Action"===l)return be.createElement("div",null);if("Link"===l){const l="".concat(e);return null!==l&&void 0!==l&&l.includes(".jpg")||null!==l&&void 0!==l&&l.includes(".png")||null!==l&&void 0!==l&&l.includes(".jpeg")?be.createElement("img",{alt:"lg",src:l,className:ge.Z.templateIIPicture}):be.createElement("p",{className:ge.Z.templateURL,onClick:()=>window.open(l,"_blank")},"View")}return"Info"===l||"Text"===l?be.createElement("div",{className:ge.Z.templateInformation,style:{textAlign:"center"}},null!==e&&void 0!==e?e:""):be.createElement("div",null,null!==e&&void 0!==e?e:"")};return be.createElement("div",{style:{width:"100%",justifyContent:"center"}},be.createElement("div",{style:{margin:"auto",width:"inherit"}},be.createElement("div",{style:{width:"inherit"}},be.createElement("p",null,null!==(l=null===R||void 0===R||null===(o=R.config)||void 0===o||null===(t=o.find(e=>"tlist"===e.key))||void 0===t?void 0:t.label)&&void 0!==l?l:"ORDERS:"),be.createElement(ne.Z,{className:ge.Z.itemsTable_ii,style:{width:(null===R||void 0===R||null===(n=R.tlist)||void 0===n?void 0:n.length)>4?"100%":"70%"},highlights:"var(--app-color-gray-lighter)",columns:y.tq?null===R||void 0===R?void 0:R.tlist.filter(e=>{var l;return"Number"===e.value||e.key===(null===R||void 0===R||null===(l=R.key)||void 0===l?void 0:l.key)||"Info"===e.value||"Text"===e.value}).map(e=>e.label):null===R||void 0===R||null===(d=R.tlist)||void 0===d?void 0:d.map(e=>e.label),footer:["Items ".concat(null===N||void 0===N||null===(a=N.items)||void 0===a?void 0:a.length),"".concat(j.Z((e,l)=>{var o;return null!==(o=+e+ +l.quantity)&&void 0!==o?o:0},0,null!==(r=null===N||void 0===N?void 0:N.items)&&void 0!==r?r:[]))],list:null===N||void 0===N||null===(s=N.items)||void 0===s?void 0:s.map(e=>{let l={id:e.id};return null===R||void 0===R||R.tlist.filter(o=>{l=(0,i.Z)((0,i.Z)({},l),{},{[o.label]:e[o.key]})}),l}),onListItemClick:e=>{Y(null===J||void 0===J?void 0:J.filter(l=>{var o;return(null===(o=l.component_fields.filter(l=>{var o;return l.value===e[null===R||void 0===R||null===(o=R.key)||void 0===o?void 0:o.label]}))||void 0===o?void 0:o.length)>0}).map(e=>{let l={};return null===R||void 0===R||R.slist.filter(o=>{var t,n,d,a;l=(0,i.Z)((0,i.Z)({},l),{},{[o.label]:null!==(t=null===(n=e.component_fields.find(e=>e.field_name===o.label))||void 0===n?void 0:n.value)&&void 0!==t?t:0,[o.key]:null!==(d=null===(a=e.component_fields.find(e=>e.field_name===o.label))||void 0===a?void 0:a.value)&&void 0!==d?d:0})}),l})),B(null===J||void 0===J?void 0:J.filter(l=>{var o;return(null===(o=l.component_fields.filter(l=>{var o;return l.value===e[null===R||void 0===R||null===(o=R.key)||void 0===o?void 0:o.label]}))||void 0===o?void 0:o.length)>0}))}}),be.createElement("br",null),be.createElement("div",{style:{width:"100%",display:y.tq?"":F?"none":"flex",flexDirection:"row",justifyContent:"center",fontSize:"18px"}},(null===G||void 0===G||null===(v=G.options)||void 0===v||null===(u=v.filters)||void 0===u?void 0:u.length)>0&&be.createElement("div",{className:ge.Z.dropdownContainer,style:{border:"1px solid var(--app-color-gray-dark)",width:y.tq?"100%":"25%"}},be.createElement(g.rk,{items:J?pe.Z(me.Z("value"))(J.map(e=>{const l=e.component_fields.find(e=>{var l;return e.field_name===(null===G||void 0===G||null===(l=G.options)||void 0===l?void 0:l.filters[0])});return{label:null===l||void 0===l?void 0:l.value,value:null===l||void 0===l?void 0:l.value,component:e}})):[],onChange:e=>{var l,o,t;q(!1),Y([]),H({[null===G||void 0===G||null===(l=G.options)||void 0===l?void 0:l.filters[0]]:e.value}),B([]),L(!1),setTimeout(()=>L(!0),10),B(null===J||void 0===J?void 0:J.filter(l=>{var o;return(null===(o=l.component_fields.filter(l=>l.value===e.value))||void 0===o?void 0:o.length)>0})),T({action:f._U.setModuleNewStepComponents,value:null!==(o=null===(t=N.currentStep)||void 0===t?void 0:t.component_blueprints)&&void 0!==o?o:[]}),Y(null===J||void 0===J?void 0:J.filter(l=>{var o;return(null===(o=l.component_fields.filter(l=>l.value===e.value))||void 0===o?void 0:o.length)>0}).map(e=>{let l={};return null===R||void 0===R||R.slist.filter(o=>{var t,n;const d=null!==(t=null===(n=e.component_fields.find(e=>e.field_name===o.label))||void 0===n?void 0:n.value)&&void 0!==t?t:"";l=(0,i.Z)((0,i.Z)({},l),{},{[o.label]:d,[o.key]:d})}),l}))},placeholder:null===G||void 0===G||null===(c=G.options)||void 0===c?void 0:c.filters[0],moliclassname:ge.Z.componentsSelectMenuOverlayListItem,style:{fontSize:"16px"},className:ge.Z.currencyInput})),(null===G||void 0===G||null===(p=G.options)||void 0===p||null===(_=p.filters)||void 0===_?void 0:_.length)>1&&!y.tq&&P&&be.createElement("div",{className:ge.Z.dropdownContainer,style:{marginLeft:"10px",border:"1px solid var(--app-color-gray-dark)",width:"25%"}},be.createElement(g.rk,{items:V[null===G||void 0===G||null===(h=G.options)||void 0===h?void 0:h.filters[0]]?pe.Z(me.Z("value"))(J.map(e=>{const l=e.component_fields.find(e=>{var l;return e.field_name===(null===G||void 0===G||null===(l=G.options)||void 0===l?void 0:l.filters[1])});return{label:null===l||void 0===l?void 0:l.value,value:null===l||void 0===l?void 0:l.value,component:e}}).filter(e=>e.component.component_fields.filter(e=>{var l,o;return e.value===V[null===G||void 0===G||null===(l=G.options)||void 0===l?void 0:l.filters[0]]&&e.field_name===(null===G||void 0===G||null===(o=G.options)||void 0===o?void 0:o.filters[0])}).length>0)):[],onChange:e=>{var l,o,t;q(!1),T({action:f._U.setModuleNewStepComponents,value:null!==(l=null===(o=N.currentStep)||void 0===o?void 0:o.component_blueprints)&&void 0!==l?l:[]}),H((0,i.Z)((0,i.Z)({},V),{},{[null===G||void 0===G||null===(t=G.options)||void 0===t?void 0:t.filters[1]]:e.value})),Y(null===J||void 0===J?void 0:J.filter(l=>{var o;return(null===(o=l.component_fields.filter(l=>l.value===e.value))||void 0===o?void 0:o.length)>0}).filter(e=>{var l;return(null===(l=e.component_fields.filter(e=>{var l;return e.value===V[null===G||void 0===G||null===(l=G.options)||void 0===l?void 0:l.filters[0]]}))||void 0===l?void 0:l.length)>0}).map(e=>{let l={};return null===R||void 0===R||R.slist.filter(o=>{var t,n;const d=null!==(t=null===(n=e.component_fields.find(e=>e.field_name===o.label))||void 0===n?void 0:n.value)&&void 0!==t?t:0;l=(0,i.Z)((0,i.Z)({},l),{},{[o.label]:d,[o.key]:d})}),l})),B(null===J||void 0===J?void 0:J.filter(l=>{var o;return(null===(o=l.component_fields.filter(l=>l.value===e.value))||void 0===o?void 0:o.length)>0}).filter(e=>{var l;return(null===(l=e.component_fields.filter(e=>{var l;return e.value===V[null===G||void 0===G||null===(l=G.options)||void 0===l?void 0:l.filters[0]]}))||void 0===l?void 0:l.length)>0}))},placeholder:null===G||void 0===G||null===(b=G.options)||void 0===b?void 0:b.filters[1],style:{fontSize:"16px"},moliclassname:ge.Z.componentsSelectMenuOverlayListItem}))),be.createElement("div",{className:ge.Z.searchContainer,style:{display:F?"none":"",width:y.tq?"100%":"400px"}},be.createElement(w.O,null),be.createElement("input",{placeholder:"Search",className:ge.Z.searchInput,onChange:e=>{var l,o;(null===(l=e.target.value)||void 0===l?void 0:l.length)>1?(B(null===J||void 0===J?void 0:J.filter(l=>{var o;return(null===(o=l.component_fields.filter(l=>l.value.includes(e.target.value)))||void 0===o?void 0:o.length)>0})),Y(null===J||void 0===J?void 0:J.filter(l=>{var o;return(null===(o=l.component_fields.filter(l=>l.value.includes(e.target.value)))||void 0===o?void 0:o.length)>0}).map(e=>{let l={};return null===R||void 0===R||R.slist.filter(o=>{var t,n;const d=null!==(t=null===(n=e.component_fields.find(e=>e.field_name===o.label))||void 0===n?void 0:n.value)&&void 0!==t?t:"";l=(0,i.Z)((0,i.Z)({},l),{},{[o.label]:d,[o.key]:d})}),l}))):0==(null===(o=e.target.value)||void 0===o?void 0:o.length)&&(Y([]),B([]))}})),be.createElement(ne.Z,{className:ge.Z.mobileTable_ii,style:{width:y.tq||(null===R||void 0===R||null===(x=R.slist)||void 0===x?void 0:x.length)>4?"100%":"70%"},tableHostSimple:ge.Z.tableHostSimple,columns:y.tq?null===R||void 0===R?void 0:R.slist.filter(e=>{var l;return"Number"===e.value||e.key===(null===R||void 0===R||null===(l=R.key)||void 0===l?void 0:l.key)}).map(e=>e.label):(null===(E=W.processModule.module.options)||void 0===E||null===(C=E.computes)||void 0===C?void 0:C.length)>0?[...null!==(M=null===R||void 0===R?void 0:R.slist.map(e=>e.label))&&void 0!==M?M:[],...null!==(S=null===(k=W.processModule.module.options)||void 0===k||null===(Z=k.computes)||void 0===Z?void 0:Z.map(e=>{var l;const o=null===(l=z.filter(l=>l.module_id===e.module_id))||void 0===l?void 0:l.find(l=>l.component_fields.filter(l=>l.procedure_step_blueprint_field_id===e.field_id).length>0);return(null===o||void 0===o?void 0:o.component_fields.find(l=>l.procedure_step_blueprint_field_id===e.field_id)).field_name}))&&void 0!==S?S:[]]:[...null!==(I=null===R||void 0===R?void 0:R.slist.map(e=>e.label))&&void 0!==I?I:[]],list:A.map((e,l)=>{var o,i,t,n,d;let a={};null===R||void 0===R||null===(o=R.slist)||void 0===o||o.filter(o=>{var i,t;a[o.label]=K("".concat(null!==(i=null===(t=e.component_fields.find(e=>e.field_name===o.label))||void 0===t?void 0:t.value)&&void 0!==i?i:""),o.value,l,e,o.key,o.label)});const r=null!==(i=null===N||void 0===N||null===(t=N.items)||void 0===t?void 0:t.find(e=>{var o,i;return e[null===R||void 0===R||null===(o=R.key)||void 0===o?void 0:o.key]===O[l][null===R||void 0===R||null===(i=R.key)||void 0===i?void 0:i.key]}))&&void 0!==i?i:void 0;var s,v;(void 0!==r&&Object.keys(r).filter(o=>{var i;const t=null===R||void 0===R||null===(i=R.slist)||void 0===i?void 0:i.find(e=>e.key===o);t&&(a[t.label]=K(r[o],t.value,l,e,t.key,t.label))}),(null===(n=W.processModule.module.options)||void 0===n||null===(d=n.computes)||void 0===d?void 0:d.length)>0)&&(null===(s=W.processModule.module.options)||void 0===s||null===(v=s.computes)||void 0===v||v.map(l=>{var o;const i=null===z||void 0===z||null===(o=z.filter(e=>e.module_id===l.module_id))||void 0===o?void 0:o.find(l=>l.component_fields.filter(l=>{var o,i;return l.value===(null!==(o=null===(i=e.component_fields.find(e=>{var l;return e.field_name===(null===R||void 0===R||null===(l=R.key)||void 0===l?void 0:l.label)}))||void 0===i?void 0:i.value)&&void 0!==o?o:"#$")}).length>0),t=null===i||void 0===i?void 0:i.component_fields.find(e=>e.procedure_step_blueprint_field_id===l.field_id);t&&(a[t.field_name]=null===t||void 0===t?void 0:t.value)}));return a})}),0===(null===A||void 0===A?void 0:A.length)&&be.createElement("p",null,"No Items Selected"))),be.createElement("br",null))};var Ce=o(6341),we=o(32086),Me=o(8284),Se=o(9204),ke=o(4292),Ze=o(25403),Ie=(o(68140),o(60940),o(95007));const Ne=(0,t.memo)(e=>{var l,o,i,n;const{component:d,allComponents:a,components:r,favorites:s=[],user:v,companyData:u,selectedComponent:c,templateName:p,begunModule:m}=e,{nextButtonClicked:f,isMandatoryError:y,index:h,component_blueprint:g,setIsMandatoryError:b,editMode:x,blueprints:E,allModules:C,authenticatedUser:w,companyUsersArray:M,companyPositionsArray:S,products:k}=e,[Z,I]=(0,t.useState)({}),[N,T]=(0,t.useState)([]),[D,P]=(0,t.useState)([]),[A,O]=(0,t.useState)([]),[L,z]=(0,t.useState)(null!==(l=+localStorage.getItem("timer"))&&void 0!==l?l:0),[R,U]=(0,t.useState)(null===d||void 0===d||null===(o=d.selected_fields)||void 0===o?void 0:o.filter(e=>"Record"===e.data_type_name)),[F,q]=(0,t.useState)(!1),[B,Y]=(0,t.useState)(),[H,V]=(0,t.useState)(),[j,G]=(0,t.useState)(!1),J=d.selected_fields.find(e=>"Filters"===e.data_type_name||"Record"===e.data_type_name),K=r.filter(e=>e.component_fields.filter(e=>{var l;return e.component_blueprint_id===(null===J||void 0===J||null===(l=J.options)||void 0===l?void 0:l.component_id)}).length>0),Q=(null===c||void 0===c||null===(i=c.created_by)||void 0===i?void 0:i.id)===v.id||void 0===(null===c||void 0===c?void 0:c.created_by),X=null===u||void 0===u||null===(n=u.misc_info)||void 0===n?void 0:n.templatesData.find(e=>e.name===p);return"Scoresheet Template"===p?null!==c&&void 0!==c&&c.id?t.createElement(Ce.tF,{showSecond:B,listItems:D,orderItems:N,selectedComponent:c,action:H,setAction:V,setShowSecond:Y,components:r,records:R,template:X,component:d,allComponents:a,generalArray:A,showFavorites:F,setGeneralArray:O,setTimer:z,timer:L,index:h,begunModule:m,companyData:u,setShowFavorites:q,loading:j,setLoading:G,setListItems:P,setOrderItems:T,setSelectedItems:I,selectedItems:Z}):t.createElement("p",null,"Need to save this transaction first before the scoresheet is made available"):"Meets Template"===p?t.createElement("div",{style:{width:"100%"}}):"Club Template"===p?t.createElement(W,{allModules:C,components:r,begunModule:m,authenticatedUser:w,companyUsersArray:M}):"Sports Facility Template"===p?t.createElement("div",null,e.children):"Battery Order Template"===p?t.createElement(xe,{showSecond:B,listItems:D,orderItems:N,selectedComponent:c,action:H,setAction:V,setShowSecond:Y,components:r,records:R,template:X,component:d,allComponents:a,generalArray:A,showFavorites:F,setGeneralArray:O,setTimer:z,timer:L,index:h,begunModule:m,companyData:u,setShowFavorites:q,loading:j,setLoading:G,setListItems:P,setOrderItems:T,setSelectedItems:I,selectedItems:Z,templateName:p,items:K,field:J,user:v,favorites:s,creating:Q}):"Order Template"===p?t.createElement(Ee,{showSecond:B,listItems:D,orderItems:N,selectedComponent:c,action:H,setAction:V,setShowSecond:Y,components:r,records:R,template:X,component:d,allComponents:a,generalArray:A,showFavorites:F,setGeneralArray:O,setTimer:z,timer:L,index:h,begunModule:m,companyData:u,setShowFavorites:q,loading:j,setLoading:G,setListItems:P,setOrderItems:T,setSelectedItems:I,selectedItems:Z,templateName:p,items:K,field:J,user:v,favorites:s,creating:Q}):"Routes Template"===p?t.createElement(he,{component:d,selectedComponent:c,component_blueprint:g,title:p},t.createElement(_.Z,{editMode:x,nextButtonClicked:f,isMandatoryError:y,blueprintIndex:h,setIsMandatoryError:b,blueprints:E,component:g,companyData:u,components:r,allModules:C,products:k,authenticatedUser:w,selectedComponent:c,companyUsersArray:M,companyPositionsArray:S,begunModule:m})):"Timesheet Template"===p?null!==c&&void 0!==c&&c.id?t.createElement(re,{selectedComponent:c,component_blueprint:g,title:p}):t.createElement("div",null):"Leaves Template"===p?null!==c&&void 0!==c&&c.id?t.createElement(se,{selectedComponent:c,component_blueprint:g,title:p}):t.createElement("div",null):"KPI Template"===p?null!==c&&void 0!==c&&c.id?t.createElement(ve,{selectedComponent:c,component_blueprint:g,title:p}):t.createElement("div",null):"Clock In Template"===p?(window.clearInterval(+localStorage.getItem("timer")),t.createElement(ue,{template:X,companyUsersArray:M,selectedComponent:c,component_blueprint:g,begunModule:m,companyData:u,authenticatedUser:w,title:p})):t.createElement("div",{style:{width:"100%"}},t.createElement(_.Z,{editMode:x,nextButtonClicked:f,isMandatoryError:y,blueprintIndex:h,setIsMandatoryError:b,blueprints:E,component:g,companyData:u,components:r,allModules:C,products:k,authenticatedUser:w,selectedComponent:c,companyUsersArray:M,companyPositionsArray:S,begunModule:m}))}),Te=(0,p.$j)(e=>{const{authenticatedUser:l}=e.authReducer,{favorites:o,begunModule:i}=e.flowReducer;return{authenticatedUser:l,favorites:o,begunModule:i}})(e=>{var l,o;const{component:s,blueprintIndex:v,setIsMandatoryError:p,companyData:_,components:y,favorites:h,products:g,authenticatedUser:b,begunModule:x,selectedComponent:E,setSelectedComponent:C,templateName:w}=e,{editMode:M,blueprints:S,allModules:k,companyUsersArray:Z,companyPositionsArray:I,nextButtonClicked:N,isMandatoryError:T,index:D,component_blueprint:P}=e,[A,O]=(0,f.pQ)(),[L]=(0,t.useState)(a),[z,R]=(0,t.useState)(""),U=(0,t.useRef)(null),F=null===(l=A.currentStep)||void 0===l||null===(o=l.component_blueprints)||void 0===o?void 0:o.findIndex(e=>e.id===(null===s||void 0===s?void 0:s.id)),W=()=>{var e;null!==s&&void 0!==s&&null!==(e=s.selected_fields)&&void 0!==e&&e.some(e=>{var l;return!0===e.mandatory&&!0===e.visible&&(!e.value||(null===e||void 0===e||null===(l=e.value)||void 0===l?void 0:l.length)<1)})?p(!0):p(!1)},q=e=>{const l=A.components.find(e=>e.selected_fields.filter(e=>"Formula"===e.data_type_name).length>0);if(void 0!==l){const o=l.selected_fields.find(e=>"Formula"===e.data_type_name),i=(0,m.LV)(o.options,s.selected_fields.filter(e=>o.options.list.includes(e.field_name)),[...A.components,e]);o.value="".concat(i.toString())}else{const l=A.currentStep.component_blueprints.find(e=>e.selected_fields.filter(e=>"Formula"===e.data_type_name).length>0);if(void 0!==l){const o=l.selected_fields.find(e=>"Formula"===e.data_type_name),t=(0,m.LV)(o.options,s.selected_fields.filter(e=>o.options.list.includes(e.field_name)),[...A.components,e]);o.value="".concat(t.toString());const n=JSON.parse(JSON.stringify((0,i.Z)((0,i.Z)({},l),{},{temp_id:(0,m.mR)(),selected_fields:l.selected_fields})));O({action:f._U.addModuleComponents,value:n})}}},B=(e,l)=>{var o,i,t;const n=[...null!==(o=null===(i=A.currentStep)||void 0===i?void 0:i.component_blueprints)&&void 0!==o?o:[]],d=null===(t=n[F])||void 0===t?void 0:t.selected_fields[l];"Number"===(null===d||void 0===d?void 0:d.data_type_name)?Number(+e)?d.value=e:""===e&&(d.value=""):d.value=e,d.value&&d.mandatory&&(d.errors=""),W(),O({action:f._U.setComponentBlueprints,value:n}),O({action:f._U.setModuleNewStepComponents,value:n})},Y=(0,t.useCallback)((e,l,o)=>{var i,t,n;const d=[...null!==(i=null===(t=A.currentStep)||void 0===t?void 0:t.component_blueprints)&&void 0!==i?i:[]],a=null===(n=d[F])||void 0===n?void 0:n.selected_fields[l];a.options.country_code=null===e||void 0===e?void 0:e.countryCode,a.options.country_name=null===e||void 0===e?void 0:e.name,a.options.country_prefix="+".concat(null===e||void 0===e?void 0:e.dialCode),O({action:f._U.setComponentBlueprints,value:d}),O({action:f._U.setModuleNewStepComponents,value:d}),B(o,l)},[]),H=(0,t.useCallback)((e,l)=>{var o,i,t;const n=[...null!==(o=null===(i=A.currentStep)||void 0===i?void 0:i.component_blueprints)&&void 0!==o?o:[]],d=null===(t=n[F])||void 0===t?void 0:t.selected_fields[l];d.options.currency_type=null===e||void 0===e?void 0:e.label,d.options.currency_value=null===e||void 0===e?void 0:e.value,d.options.symbol=null===e||void 0===e?void 0:e.symbol,O({action:f._U.setComponentBlueprints,value:n}),O({action:f._U.setModuleNewStepComponents,value:n})},[]);return(0,t.useEffect)(()=>{var e;O({action:f._U.setModuleNewStepComponents,value:null===(e=A.currentStep)||void 0===e?void 0:e.component_blueprints})},[A.currentStep]),t.createElement("div",{id:"accordion",className:n,key:v},t.createElement("div",{className:u()(d,L),"app-variant-has-error":z?"error":""},t.createElement("div",{ref:U,style:{maxHeight:L===a?"":"0px",display:"flex"},className:r},t.createElement(Ne,{templateName:w,component:s,handleInputChange:B,handlePrefixChange:Y,handleCurrencyChange:H,checkIfAreMandatoryErrored:W,handleCheckbox:(e,l)=>{var o,i,t;const n=[...null!==(o=null===(i=A.currentStep)||void 0===i?void 0:i.component_blueprints)&&void 0!==o?o:[]],d=null===(t=n[F])||void 0===t?void 0:t.selected_fields[l];d.value=e,d.value&&d.mandatory&&(d.errors=""),O({action:f._U.setComponentBlueprints,value:n}),O({action:f._U.setModuleNewStepComponents,value:n}),W()},isInherited:!1,indexInContextArray:F,handleLocationChange:(e,l)=>{var o,i,t;const n=[...null!==(o=null===(i=A.currentStep)||void 0===i?void 0:i.component_blueprints)&&void 0!==o?o:[]];(null===(t=n[F])||void 0===t?void 0:t.selected_fields[l]).value="".concat(e.lat,", ").concat(e.lng),O({action:f._U.setComponentBlueprints,value:n}),O({action:f._U.setModuleNewStepComponents,value:n})},processTaskContext:A,setTaskProcessContext:O,companyData:_,components:(()=>{var e,l;const o=null===(e=A.components.find(e=>e.selected_fields.filter(e=>{var l,o;return"Global"===e.data_type_name&&1==e.visible&&e.field_name===(null===(l=s.selected_fields.find(e=>("Filters"===e.data_type_name||"Record"===e.data_type_name)&&1==e.visible))||void 0===l||null===(o=l.options)||void 0===o?void 0:o.global)}).length>0))||void 0===e||null===(l=e.selected_fields.find(e=>"Global"===e.data_type_name))||void 0===l?void 0:l.value;return o?y.filter(e=>e.component_fields.filter(e=>{var l,i,t;return(null===e||void 0===e||null===(l=e.value)||void 0===l?void 0:l.toUpperCase())===(null===o||void 0===o?void 0:o.toUpperCase())&&e.field_name===(null===(i=s.selected_fields.find(e=>"Filters"===e.data_type_name||"Record"===e.data_type_name))||void 0===i||null===(t=i.options)||void 0===t?void 0:t.global)}).length>0):y})(),products:g,saveButtonAction:()=>{const e=JSON.parse(JSON.stringify((0,i.Z)((0,i.Z)({},s),{},{temp_id:(0,m.mR)(),selected_fields:s.selected_fields})));q(e),O({action:f._U.addModuleComponents,value:e}),R(""),s.selected_fields.map((e,l)=>{B("",l)}),O({action:f._U.setModuleNewStepComponents,value:[...we.Z(e=>e.selected_fields.filter(e=>""===e.value).length>0,[...we.Z(Me.Z("id",s.id))(A.newStepComponents)])]})},updateFormula:q,favorites:h,user:b,begunModule:x,selectedComponent:E,setSelectedComponent:C,allComponents:y,nextButtonClicked:N,isMandatoryError:T,index:D,component_blueprint:P,setIsMandatoryError:p,editMode:M,blueprints:S,allModules:k,authenticatedUser:b,companyUsersArray:Z,companyPositionsArray:I}))),z&&(null===z||void 0===z?void 0:z.message)&&t.createElement(c.Z,{message:z.message}))}),De=t.forwardRef((e,l)=>{var o,i,n,d,a,r,s;const{begunModule:v,goto:u,companyData:c,selectedComponent:p,setSelectedComponent:m,companyUsersArray:f,companyPositionsArray:_,components:y=[],step:h,print:g=!1}=e,[b,x]=(0,t.useState)(0),[E,C]=(0,t.useState)(),[w,M]=(0,t.useState)(),[S,k]=(0,t.useState)([]),[Z,I]=(0,t.useState)([]),[N,T]=(0,t.useState)([]),D=null===v||void 0===v||null===(o=v.processModule)||void 0===o||null===(i=o.completeSteps)||void 0===i||null===(n=i.find(e=>{var l;return(null===e||void 0===e||null===(l=e.component_blueprints)||void 0===l?void 0:l.filter(e=>e.selected_fields.filter(e=>"Template"===e.data_type_name).length>0).length)>0}))||void 0===n||null===(d=n.component_blueprints.find(e=>e.selected_fields.find(e=>"Template"===e.data_type_name&&1==e.visible)))||void 0===d||null===(a=d.selected_fields.find(e=>"Template"===e.data_type_name&&1==e.visible))||void 0===a?void 0:a.field_name,P=null===c||void 0===c||null===(r=c.misc_info)||void 0===r?void 0:r.templatesData.find(e=>e.name===D),[A,O]=(0,t.useState)(null===p||void 0===p||null===(s=p.component_fields)||void 0===s?void 0:s.filter(e=>"Record"===e.data_type_name));return"Scoresheet Template"===D?t.createElement(Ce.mr,{setRecords:O,selectedComponent:p,template:P,setListItems:I,components:y,setOrderItems:k,setSelectedIndex:C,records:A,listItems:Z,orderItems:S,begunModule:v,selectedTabIndex:b,setSelectedTabIndex:x,selectedItems:w,setSelectedItems:M,selectedIndex:E,generalArray:N,setGeneralArray:T,print:g}):"Sports Facility Template"===D?t.createElement(B,{selectedComponent:p,setSelectedComponent:m},e.children):"Player Profile Template"===D?t.createElement(Ce.yX,{selectedComponent:p,template:P,components:y,setListItems:I,begunModule:v,listItems:Z}):"League Template"===D?t.createElement(Ce.Dr,{selectedComponent:p,template:P,components:y}):"Club Template"===D?t.createElement(U,{title:p.title,selectedComponent:p,setSelectedComponent:m,step:h,template:P,goto:u},e.children):"Meets Template"===D?t.createElement(F,{selectedComponent:p,begunModule:v,goto:u},e.children):"Clock In Template"===D||"Jobs Create Template"===D?t.createElement("div",null,e.children):t.createElement("div",null,e.children,e.payments,e.creator,e.shares)}),Pe=e=>{const{templateName:l,selectedComponent:o,component_blueprint:i,template:n,companyUsersArray:d,begunModule:a,companyData:r,authenticatedUser:v}=e;var u,c,p,m;return"Timesheet Template"===l?t.createElement("div",{className:s},(null===o||void 0===o?void 0:o.id)&&t.createElement(re,{selectedComponent:o,component_blueprint:i,title:l,isUpdating:!1},t.createElement("div",{style:{margin:"0 0 50px 0",fontSize:"20px",fontFamily:"var(--app-text-main-font)",fontWeight:"bold",color:"var(--app-color-gray-dark)"}},null===(u=a.processModule.module)||void 0===u?void 0:u.name))):"Leaves Template"===l?null!==o&&void 0!==o&&o.id?t.createElement("div",{className:s},t.createElement(se,{selectedComponent:o,component_blueprint:i,title:l,isUpdating:!1},t.createElement("div",{style:{margin:"0 0 50px 0",fontSize:"20px",fontFamily:"var(--app-text-main-font)",fontWeight:"bold",color:"var(--app-color-gray-dark)"}},null===(c=a.processModule.module)||void 0===c?void 0:c.name))):t.createElement("div",null):"KPI Template"===l?t.createElement("div",{className:s},t.createElement(ve,{selectedComponent:o,component_blueprint:i,title:l,isUpdating:!1},t.createElement("div",{style:{margin:"0 0 50px 0",fontSize:"20px",fontFamily:"var(--app-text-main-font)",fontWeight:"bold",color:"var(--app-color-gray-dark)"}},null===(p=a.processModule.module)||void 0===p?void 0:p.name))):"Clock In Template"===l?t.createElement("div",{className:s},t.createElement(ue,{template:n,companyUsersArray:d,selectedComponent:o,component_blueprint:i,begunModule:a,companyData:r,authenticatedUser:v,title:l,isUpdating:!1},t.createElement("div",{style:{margin:"0 0 50px 0",fontSize:"20px",fontFamily:"var(--app-text-main-font)",fontWeight:"bold",color:"var(--app-color-gray-dark)"}},null===(m=a.processModule.module)||void 0===m?void 0:m.name))):t.createElement("div",null,e.children)},Ae=e=>"Scoresheet Template"===e?"100%":"Club Template"===e?"40%":"60%",Oe=function(e,l,o){var i,t,n,d,a;let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4?arguments[4]:void 0,v=arguments.length>5?arguments[5]:void 0;const u=Ie.utils.book_new(),c=Ie.utils.json_to_sheet([]),p=Ie.utils.json_to_sheet([]);let f=[];if(null!==l&&void 0!==l&&null!==(i=l.selected_fields)&&void 0!==i&&null!==(t=i.find(e=>"Transaction List"===e.data_type_name))&&void 0!==t&&null!==(n=t.options)&&void 0!==n&&n.simple){const e=l.selected_fields.filter(e=>{var l;return null===(l=e.options)||void 0===l?void 0:l.mapToItem}).map(e=>e.field_name);f=s.map(l=>{const o={};return r.forEach(e=>{if((0,m.sO)(l[e])){const i=JSON.parse(l[e]);Object.keys(null!==i&&void 0!==i?i:[]).forEach(e=>o[e]=i[e])}}),Object.assign({},...e.map(e=>({[e]:o[e]})))})}else{var _;const e=null===l||void 0===l||null===(_=l.selected_fields)||void 0===_?void 0:_.filter(e=>{var l;return null===(l=e.options)||void 0===l?void 0:l.mapToItem}).map(e=>e.options.mapToItem);f=s.map(l=>Object.assign({},...e.map(e=>({[e]:l[e]}))))}var y;(Ie.utils.sheet_add_aoa(c,[l.selected_fields.filter(e=>{var l;return null===(l=e.options)||void 0===l?void 0:l.mapToItem}).map(e=>e.field_name)]),Ie.utils.sheet_add_json(c,f,{origin:"A2",skipHeader:!0}),(null===e||void 0===e||null===(d=e.component_fields)||void 0===d?void 0:d.length)>0)&&(Ie.utils.sheet_add_json(p,null===e||void 0===e||null===(y=e.component_fields)||void 0===y?void 0:y.filter(e=>null===e||void 0===e?void 0:e.value).map(e=>({item_code:e.field_name,value:null===e||void 0===e?void 0:e.value})),{origin:"A2",skipHeader:!0}),Ie.utils.book_append_sheet(u,p,"Information"));return Ie.utils.book_append_sheet(u,c,"".concat(null===(a=v.processModule.module)||void 0===a?void 0:a.name)),(0,Ie.writeFile)(u,"".concat(null===e||void 0===e?void 0:e.title).concat((0,Z.now)(),".xlsx")),0},Le=(e,l,o)=>{var t;if(null!==l&&void 0!==l&&null!==(t=l.reports)&&void 0!==t&&t.find(e=>"Poll Report Template"===(null===e||void 0===e?void 0:e.field_name)&&"Template"===(null===e||void 0===e?void 0:e.data_type_name))){return[...Y.Z([G.Z(V.Z("index"))])(Se.Z(e=>e,[...new Set(Se.Z(e=>e,ke.Z(Ze.Z("selected_fields",ke.Z(Ze.Z("component_blueprints",o.processModule.completeSteps))))))]))].filter(e=>{var l;return("Radio"===e.data_type_name||"Dropdown"===e.data_type_name)&&(null===e||void 0===e?void 0:e.visible)&&(null===(l=e.options)||void 0===l?void 0:l.list)}).reduce((e,l)=>{var o,i;return e.concat(null===(o=l.options)||void 0===o||null===(i=o.list)||void 0===i?void 0:i.map(e=>({key:l.field_name,value:e})))},[]).map(t=>l.reports.filter(e=>"Template"!==e.data_type_name).reduce((l,n)=>{var d,a,r,s,v;return"item_code"===(null===n||void 0===n||null===(d=n.options)||void 0===d?void 0:d.mapToItem)?(0,i.Z)((0,i.Z)({},l),{},{[n.field_name]:t.value}):"value"===(null===(a=n.options)||void 0===a?void 0:a.mapToItem)?(0,i.Z)((0,i.Z)({},l),{},{[n.field_name]:t.key}):(0,i.Z)((0,i.Z)({},l),{},{[n.field_name]:(null!==o&&void 0!==o&&null!==(r=o.processModule)&&void 0!==r&&null!==(s=r.module)&&void 0!==s&&null!==(v=s.options)&&void 0!==v&&v.lock?e.filter(e=>{var l,i,t;return e.Status===(null===o||void 0===o||null===(l=o.processModule)||void 0===l||null===(i=l.module)||void 0===i||null===(t=i.options)||void 0===t?void 0:t.lock)}):e).filter(e=>(e[t.key]?e[t.key]:"").split(",").includes(t.value)).length})},{}))}return e}},17951:(e,l,o)=>{"use strict";o.r(l),o.d(l,{default:()=>yl,navigateToTransaction:()=>hl});var i=o(1413),t=o(67861),n=o(23280),d=o(40694),a=o(88374),r=o(93389),s=o(6073),v=o(49465),u=o(88827),c=o(10103),p=o(11577),m=o(1542),f=o(14170),_=o(88550),y=o(73500),h=o(39518),g=o(50981),b=o.n(g),x=o(43984),E=o(52902),C=o(12075),w=o(87462),M=o(45987),S=o(65019),k=o(59401),Z=o(85692),I=o(34710),N=o(49119),T=o(12308),D=o(41131),P=o(27436),A=o(63864),O=o(60534),L=o(63077),z=o(79492),R=o.n(z),U=o(4358),F=(o(83381),o(66918)),W=o(49523),q=o(25403),B=o(4292),Y=o(9204),H=o(32086),V=o(53431),j=o(68218),G=o(84634),J=o(35606),K=o(79544),Q=o(98032),X=o(62169),$=o(88346),ee=o(8284),le=o(97606),oe=o(13397),ie=o(3616),te=o(90421),ne=o(7538),de=o(77802),ae=(o(67055),o(71901),o(87424)),re=o(27658),se=o(44408),ve=o(23910),ue=(o(56120),o(37704),o(72666),o(68623),o(3863),o(95361),o(46415));o(60940);const ce={ProcessModuleContainer:"ProcessModule_ProcessModuleContainer__FsiP8",modalLabelHeader:"ProcessModule_modalLabelHeader__RSEXx",processStepHost:"ProcessModule_processStepHost__jnVYj",saveButton:"ProcessModule_saveButton__GOKiK",processModuleContainer:"ProcessModule_processModuleContainer__T-efO",renderComponentContainer:"ProcessModule_renderComponentContainer__MQMoJ",accordionModuleContainer:"ProcessModule_accordionModuleContainer__QQQn5",detailContainer:"ProcessModule_detailContainer__yrECc",leftCardMargin:"ProcessModule_leftCardMargin__+5cc+",centeredCardMargin:"ProcessModule_centeredCardMargin__8ns+o",centeredSpinner:"ProcessModule_centeredSpinner__T1+25",emptyElementsSection:"ProcessModule_emptyElementsSection__LP79x",stepCounter:"ProcessModule_stepCounter__BLQiH",clockIcon:"ProcessModule_clockIcon__Iq90d",stepTitle:"ProcessModule_stepTitle__92AhY",stepGuidanceSmaller:"ProcessModule_stepGuidanceSmaller__fbek+",stepTitleSmaller:"ProcessModule_stepTitleSmaller__o-RAS",stepGuidance:"ProcessModule_stepGuidance__VN9ID",inputContainer:"ProcessModule_inputContainer__ov5HE",selectInput:"ProcessModule_selectInput__gIlsq",multiselectWithSearch:"ProcessModule_multiselectWithSearch__HPDWF",smoMultiselectParent:"ProcessModule_smoMultiselectParent__XMpxu",selectMenuItem:"ProcessModule_selectMenuItem__D9YuM",inputClassName:"ProcessModule_inputClassName__FaizJ",toggleMenuInputButton:"ProcessModule_toggleMenuInputButton__u2LB6",goToNextStep:"ProcessModule_goToNextStep__5FEFk",nextStepsContainer:"ProcessModule_nextStepsContainer__0lDZ4",nextStepImageContainer:"ProcessModule_nextStepImageContainer__ESZoP",nextStepWrapper:"ProcessModule_nextStepWrapper__8aQAo",tasksTableHost:"ProcessModule_tasksTableHost__jF7kU",headerContainer:"ProcessModule_headerContainer__B9M39",content:"ProcessModule_content__TwxRx","react-grid-layout":"ProcessModule_react-grid-layout__kuSHy",layoutJSON:"ProcessModule_layoutJSON__swsUL",columns:"ProcessModule_columns__74Ypn","react-grid-item":"ProcessModule_react-grid-item__SV1zr","react-grid-placeholder":"ProcessModule_react-grid-placeholder__RsO19",resizing:"ProcessModule_resizing__lsJHw",static:"ProcessModule_static__fjtpd",text:"ProcessModule_text__JRaDx",minMax:"ProcessModule_minMax__n6Nqc",add:"ProcessModule_add__73-R8","react-grid-dragHandleExample":"ProcessModule_react-grid-dragHandleExample__ifaCX",cssTransforms:"ProcessModule_cssTransforms__Tj9J0","react-draggable-dragging":"ProcessModule_react-draggable-dragging__df7gg","react-resizable-handle":"ProcessModule_react-resizable-handle__HFiOI",singleButton:"ProcessModule_singleButton__VBAVx",menuRightButtons:"ProcessModule_menuRightButtons__YMGk1",menuButtons:"ProcessModule_menuButtons__t3peI",menuAccordionButtons:"ProcessModule_menuAccordionButtons__IwPeb",detailLabel:"ProcessModule_detailLabel__ujv54",subLabel:"ProcessModule_subLabel__ljjWe",modalHeaderTitle:"ProcessModule_modalHeaderTitle__20ZkP",p:"ProcessModule_p__fq5W3",itemsTable:"ProcessModule_itemsTable__Lhi8m",sharesTable:"ProcessModule_sharesTable__0LY0Q",peoplePositionsSelect:"ProcessModule_peoplePositionsSelect__3PUST",peoplePositionsSelectInput:"ProcessModule_peoplePositionsSelectInput__uW3vb",peoplePositionsSelectMenuOverlay:"ProcessModule_peoplePositionsSelectMenuOverlay__7WF9K",peoplePositionsSelectMenuOverlayItem:"ProcessModule_peoplePositionsSelectMenuOverlayItem__thx5T",deleteText:"ProcessModule_deleteText__LHcJR",deleteButton:"ProcessModule_deleteButton__Vd-mb",searchContainer:"ProcessModule_searchContainer__7U0ti",searchInput:"ProcessModule_searchInput__21v+N",emailInput:"ProcessModule_emailInput__OSseh",actionsContainer:"ProcessModule_actionsContainer__dN4VO",detailButton:"ProcessModule_detailButton__hsMZQ",detailButtonTitleContainer:"ProcessModule_detailButtonTitleContainer__9vGQV",fetchingLatestP:"ProcessModule_fetchingLatestP__w43Ah",modalTitle:"ProcessModule_modalTitle__ZzDzz",modalSubTitle:"ProcessModule_modalSubTitle__iCPup",dropdownSelectComponent:"ProcessModule_dropdownSelectComponent__fwabj",dropdownSelectComponentL:"ProcessModule_dropdownSelectComponentL__UjHu+",dropdownSelectOperation:"ProcessModule_dropdownSelectOperation__Z0sof",dropdownSelectReport:"ProcessModule_dropdownSelectReport__VhkMx",cardTitle:"ProcessModule_cardTitle__5UI1u",customButton:"ProcessModule_customButton__EmZ3f",fieldRowContainer:"ProcessModule_fieldRowContainer__w-2m5",templateInformation:"ProcessModule_templateInformation__diTyj",emulatedFlexGap:"ProcessModule_emulatedFlexGap__0zLFx",selectAndMultiselectHost:"ProcessModule_selectAndMultiselectHost__heH79",selectAndMultiselectHostTiles:"ProcessModule_selectAndMultiselectHostTiles__iC2AB",section:"ProcessModule_section__wECKG",accordionContainer:"ProcessModule_accordionContainer__ivI1e",active:"ProcessModule_active__krZBG",title:"ProcessModule_title__ePgXX",customTitleInput:"ProcessModule_customTitleInput__ONvpq",icon:"ProcessModule_icon__OW9E6",loaderContainer:"ProcessModule_loaderContainer__zN3G3",host:"ProcessModule_host__95lCJ",iconsContainer:"ProcessModule_iconsContainer__ktO+d",rotate:"ProcessModule_rotate__gwBr5",fieldTypeInput:"ProcessModule_fieldTypeInput__+x8RA",fieldMapInput:"ProcessModule_fieldMapInput__TyyrY",fieldTypeDate:"ProcessModule_fieldTypeDate__yjKi1",labelInput:"ProcessModule_labelInput__HMbSI",accordion:"ProcessModule_accordion__Er3uD",regularAccordion:"ProcessModule_regularAccordion__FpzQa",singleInputContainer:"ProcessModule_singleInputContainer__jGXcH",dateInputContainer:"ProcessModule_dateInputContainer__gXUmg",inputContainerClassName:"ProcessModule_inputContainerClassName__T8Rwy",phoneIInput:"ProcessModule_phoneIInput__DrOHj",currencySelectContainer:"ProcessModule_currencySelectContainer__w+Q8U",currencySymbol:"ProcessModule_currencySymbol__hnqlD",currencySelectComponent:"ProcessModule_currencySelectComponent__DiSZQ",currencySelectMenuOverlayList:"ProcessModule_currencySelectMenuOverlayList__eWmgR",currencySelectMenuOverlayListItem:"ProcessModule_currencySelectMenuOverlayListItem__HJNGm",currencySearchInput:"ProcessModule_currencySearchInput__QNuK3",currencyClearControlsClassName:"ProcessModule_currencyClearControlsClassName__cQ2JL",currencyInputContainerClassName:"ProcessModule_currencyInputContainerClassName__jjeME",currencyInput:"ProcessModule_currencyInput__ockL5",peopleContainer:"ProcessModule_peopleContainer__qhRGZ",peopleBooleansOptions:"ProcessModule_peopleBooleansOptions__1QKZY",peoplePositionSelectContainer:"ProcessModule_peoplePositionSelectContainer__Dek6h",unfocusableWrapper:"ProcessModule_unfocusableWrapper__lYnko",menuOverlayList:"ProcessModule_menuOverlayList__stXtG",menuOverlayListItem:"ProcessModule_menuOverlayListItem__q5Cp8",menuOverlayListItemInput:"ProcessModule_menuOverlayListItemInput__mGtmf",menuOverlayListItemInputContainerClassName:"ProcessModule_menuOverlayListItemInputContainerClassName__c2qiO",openSelectWithSearchHost:"ProcessModule_openSelectWithSearchHost__GVLkU",openSelectWithSearch:"ProcessModule_openSelectWithSearch__zQUZm",dropdownClassContainer:"ProcessModule_dropdownClassContainer__4rFl4",dropdownHeightClassContainer:"ProcessModule_dropdownHeightClassContainer__6Rqku",fieldTypeTextarea:"ProcessModule_fieldTypeTextarea__9rSMB",fullLengthTextarea:"ProcessModule_fullLengthTextarea__eYuTp",filtersContainer:"ProcessModule_filtersContainer__ZXr-v",filtersContainerII:"ProcessModule_filtersContainerII__7cIxb",customMenuOverlayListItemCheckboxCheckedMark:"ProcessModule_customMenuOverlayListItemCheckboxCheckedMark__vi6VV",customMenuOverlayListItemNormalCheckedMark:"ProcessModule_customMenuOverlayListItemNormalCheckedMark__U5+ho",checkbox:"ProcessModule_checkbox__iHQvz",listContainer:"ProcessModule_listContainer__gwweI",tableHostMobile:"ProcessModule_tableHostMobile__j-DPP",tableHostSimple:"ProcessModule_tableHostSimple__Vct0M",action:"ProcessModule_action__iCvd1",mobileTable_ii:"ProcessModule_mobileTable_ii__vrooR",centerDiv:"ProcessModule_centerDiv__DT2hU",calendar:"ProcessModule_calendar__dkHMo",multiselectComponent:"ProcessModule_multiselectComponent__nKtu7",multiselectComponentNoBorder:"ProcessModule_multiselectComponentNoBorder__E-5tg",infoTitle:"ProcessModule_infoTitle__ZuUto",mappopup:"ProcessModule_mappopup__jQF6G",popup:"ProcessModule_popup__UhrxE",ratingsDiv:"ProcessModule_ratingsDiv__CRzxP",slider:"ProcessModule_slider__Le7zs",ratingsInput:"ProcessModule_ratingsInput__TJzIX",swiperslide:"ProcessModule_swiperslide__rHvXl",dashboardCard:"ProcessModule_dashboardCard__8GAEl",buttonsContainer:"ProcessModule_buttonsContainer__IZ5YN"};var pe=o(58535),me=o(9825),fe=o.n(me),_e=o(79633),ye=o(94667),he=o(47144),ge=o.n(he),be=o(75105),xe=o(66180),Ee=o.n(xe),Ce=o(29960),we=o(81235),Me=o(84878),Se=o(13845),ke=o(67861);const Ze=o(66918),Ie={selectProcess:{id:"selectedProcess",title:"Select Workflow",tooltipText:"Select target process for this map",defaultHighlighted:!0,withAckButton:!1,useContext:Se.fG},selectBlueprint:{id:"selectedComponentBlueprint",title:"Select source of map pins",tooltipText:"Select target source pins for this map",defaultHighlighted:!0,withAckButton:!1,useContext:Se.fG},selectComponent:{id:"selectedComponent",title:"Select Component",tooltipText:"Select target component for this map",defaultHighlighted:!0,withAckButton:!1,useContext:Se.fG},selectFields:{id:"selectedFields",title:"Filter by",tooltipText:"Select target filter for this map",defaultHighlighted:!0,withAckButton:!1,useContext:Se.fG},selectItem:{id:"selectedItem",title:"Select Item",tooltipText:"Select target item for this map",defaultHighlighted:!0,withAckButton:!1,useContext:Se.fG},selectRoutingMethod:{id:"selectedRouting",title:"Select Routing",tooltipText:"Select target routing method for this map",defaultHighlighted:!0,withAckButton:!1,useContext:Se.fG}},Ne=(0,h.$j)(e=>{const{companyProcesses:l}=e.flowReducer;return{companyProcesses:l}})(e=>{const{companyProcesses:l,mapkey:o="",zoom:n=11}=e,[d,a]=(0,t.useState)({name:"",icon:"",fields:"",components:""}),[r,v]=(0,t.useState)([]),[u,c]=(0,t.useState)([]),[m,_]=(0,t.useState)([]),[y,h]=(0,t.useState)([]),[g,b]=(0,t.useState)([]),[x,E]=(0,t.useState)([]),[C,M]=(0,t.useState)({value:"",blueprint:{}}),[S,k]=(0,t.useState)({value:"",process:{}}),[Z,I]=(0,t.useState)({value:"",field:{}}),[N,T]=(0,t.useState)({value:"",item:{}}),[D,P]=(0,t.useState)([]),A=(null===l||void 0===l?void 0:l.length)>0?l.map(e=>({label:e.name,value:e.id})):[],O=e=>{let{text:l,tooltip:o}=e;return ke.createElement("div",{className:Me.Z.circle},ke.createElement("span",{className:Me.Z.circleText,title:o},l))};(0,t.useEffect)(()=>{z()},[]);const L=(0,t.useCallback)((e,l)=>{const o=e.filter(e=>e.component.component_fields.filter(e=>e.value===l.value).length>0);let i=[];return o.map(e=>{const l=e.component.component_fields.find(e=>"Pin"===e.field_name);if(void 0!=l&&l.value){const o=Ze.split(",",l.value);i.push({id:e.id,title:e.label,lat:+o[0],lng:+o[1]})}}),{components:o,pins:i}}),z=(0,t.useCallback)(()=>{(0,s.d7)().pipe((0,p.P)()).pipe((0,p.P)()).subscribe({next:e=>{const l=e.data.length>0?Ze.sortBy(Ze.prop("name"),e.data.filter(e=>e.fields.filter(e=>"Pin"===e.name).length>0)):[];c(l.map(e=>({label:e.name,value:e.id,blueprint:e})))},error:e=>{}})});return ke.createElement("div",{style:{height:"auto",width:"100%",padding:"20px"}},ke.createElement(Se.ij,null,ke.createElement("div",{style:{height:"80vh",width:"100%"}},ke.createElement(we.ZP,{bootstrapURLKeys:{key:"",language:"en",region:"US"},center:{lat:-33.8149597,lng:150.9171779},defaultZoom:n,distanceToMouse:(e,l)=>{if(e&&l)return Math.sqrt((e.x-l.x)*(e.x-l.x)+(e.y-l.y)*(e.y-l.y))}},D.map(e=>{let{lat:l,lng:o,id:i,title:t}=e;return ke.createElement(O,{key:i,lat:l,lng:o,tooltip:t})}))),ke.createElement("br",null),ke.createElement("div",{style:{minWidth:"50%"}},ke.createElement(f.n2,(0,w.Z)({},Ie.selectBlueprint,{value:C.value,placeholder:"Select blueprint...",sectionError:d.icon,onOpenChanged:()=>{}}),ke.createElement(f.rk,{items:u,defaultSelected:"",className:Me.Z.selectComponent,molclassname:Me.Z.selectMenuOverlayList,moliclassname:Me.Z.selectMenuOverlayListItem,placeholder:"Select blueprint...",onChange:e=>{const l=e.blueprint.fields.filter(e=>"Pin"!=e.name);M({value:e.label,blueprint:e.blueprint}),h([...l.map(e=>({label:e.value,value:e.id,field:e}))]),P([]),I({value:"",field:{}}),T({value:"",item:{}}),k({value:"",process:{}});let o=[];r.map(e=>{const l=e.component.component_fields.find(e=>"Pin"===e.field_name);if(void 0!=l&&l.value){const i=Ze.split(",",l.value);o.push({id:e.id,title:e.label,lat:+i[0],lng:+i[1]})}}),P([...o])}})),ke.createElement(f.n2,(0,w.Z)({},Ie.selectFields,{value:Z.value,placeholder:"Select field...",sectionError:d.icon,onOpenChanged:()=>{}}),ke.createElement(f.rk,{items:y,iconValue:!0,defaultSelected:"",className:Me.Z.selectComponent,molclassname:Me.Z.selectMenuOverlayList,moliclassname:Me.Z.selectMenuOverlayListItem,placeholder:"Select field...",onChange:e=>{I({value:e.label,field:e.field});const l=r.filter(l=>l.component.component_fields.filter(l=>l.component_blueprint_id===e.field.component_blueprint_id).length>0);let o=[];l.map(l=>{const i=l.component.component_fields.find(l=>l.field_name===e.label);void 0!=i&&("People"===i.data_type_name||"Record"===i.data_type_name?o.push({label:i.value.split(",")[0],value:i.value,id:i.id,component:l.component}):o.push({label:i.value,value:i.value,id:i.id,component:l.component}))}),b([...new Map(o.map(e=>[e.label,e])).values()]),_(l),P([]),T({value:"",item:{}}),k({value:"",process:{}})}})),ke.createElement(f.n2,(0,w.Z)({},Ie.selectItem,{value:N.value,placeholder:"Select item...",sectionError:d.icon,onOpenChanged:()=>{}}),ke.createElement(f.rk,{items:g,iconValue:!0,defaultSelected:"",className:Me.Z.selectComponent,molclassname:Me.Z.selectMenuOverlayList,moliclassname:Me.Z.selectMenuOverlayListItem,placeholder:"Select item...",onChange:e=>{const l=L(m,e);T({value:e.label,id:e.id,item:e}),E(A.filter(e=>[...l.components.map(e=>e.component.procedure_id)].some(l=>e.value===l))),P([...l.pins]),k({value:"",process:{}})}})),ke.createElement(f.n2,(0,w.Z)({},Ie.selectProcess,{value:S.value,placeholder:"Select workflow...",sectionError:d.icon,onOpenChanged:()=>{a(e=>(0,i.Z)((0,i.Z)({},e),{},{icon:""}))}}),ke.createElement(f.rk,{items:x,iconValue:!0,defaultSelected:"",className:Me.Z.selectComponent,molclassname:Me.Z.selectMenuOverlayList,moliclassname:Me.Z.selectMenuOverlayListItem,placeholder:"Select workflow...",onChange:e=>{const l=L(m.filter(l=>l.component.procedure_id===e.value),{value:N.item.value});k({id:e.value,value:e.label}),P([...l.pins])}})),ke.createElement(f.n2,(0,w.Z)({},Ie.selectRoutingMethod,{placeholder:"Select routing method...",sectionError:d.icon,onOpenChanged:()=>{}}),ke.createElement(f.rk,{items:[{label:"By Manual Routing",value:"Method 1"},{label:"Automated - by distance",value:"Method 2"},{label:"By sales visit time",value:"Method 3"}],iconValue:!0,defaultSelected:"",className:Me.Z.selectComponent,molclassname:Me.Z.selectMenuOverlayList,moliclassname:Me.Z.selectMenuOverlayListItem,placeholder:"Select routing method...",onChange:()=>{}})))))});var Te=o(20777),De=o(91426),Pe=o(48630),Ae=o(32588),Oe=(o(68140),o(27426)),Le=o(51481),ze=o(31266),Re=o(84952),Ue=o(30519),Fe=o(32562),We=o(41757),qe=o(456);const Be=["height","start","onClick"],Ye=["height","start","onClick"],He=["height","start","onClick"],Ve=(0,t.memo)(e=>{var l,o,n,d,a,s,v;const{step:u,isMandatoryError:c,nextButtonClicked:m,setIsMandatoryError:_,begunModule:y,companyData:h,components:x,isEditing:E,companyUsersArray:C,products:w,selectedComponent:M,goToNextStep:S,authenticatedUser:k,setIsCompleted:Z,companyPositionsArray:I,blueprints:T,allModules:P,editMode:O,isProcessorOnly:L}=e,[z]=((0,N.WidthProvider)(N.Responsive),(0,t.useState)(null===(l=null===M||void 0===M?void 0:M.is_complete)||void 0===l||l));let R=[];const U=(null===u||void 0===u||null===(o=u.component_blueprints)||void 0===o?void 0:o.length)>0?null===u||void 0===u?void 0:u.component_blueprints.map((e,l)=>{const o=e.selected_fields.find(e=>"Template"===e.data_type_name&&1==e.visible),n=e.selected_fields.find(e=>"Video"===e.data_type_name&&1==e.visible);return o?t.createElement("div",{key:l,style:{padding:"0px"}},t.createElement(D.ZP,{templateName:o.field_name,nextButtonClicked:m,isMandatoryError:c,blueprintIndex:l,setIsMandatoryError:_,component:e,companyData:h,components:x,products:w,selectedComponent:M})):e.selected_fields.filter(e=>1==e.visible).length>0?t.createElement("div",{key:l,className:ce.renderComponentContainer},t.createElement(Ge,{editMode:O,nextButtonClicked:m,isMandatoryError:c,blueprintIndex:l,setIsMandatoryError:_,blueprints:T,component:e,companyData:h,components:x,allModules:P,products:w,authenticatedUser:k,selectedComponent:M,companyUsersArray:C,companyPositionsArray:I,begunModule:y,isProcessorOnly:L}),(null===M||void 0===M?void 0:M.id)&&(null===n||void 0===n?void 0:n.value)&&b()(null===n||void 0===n?void 0:n.value)<=(0,g.now)()&&(0,g.now)()<b()(null===n||void 0===n?void 0:n.value).add("minutes",10)&&t.createElement(Ge,{editMode:O,nextButtonClicked:m,isMandatoryError:c,blueprintIndex:l,setIsMandatoryError:_,blueprints:T,component:(0,i.Z)((0,i.Z)({},e),{},{name:"Video Call",selected_fields:[(0,i.Z)((0,i.Z)({},n),{},{options:(0,i.Z)((0,i.Z)({},n.options),{},{start:!0})})]}),companyData:h,components:x,allModules:P,products:w,authenticatedUser:k,selectedComponent:M,companyUsersArray:C,companyPositionsArray:I,begunModule:y,shouldDisplay:!0,isEnabled:!0})):t.createElement("div",{key:l,className:ce.emptyElementsSection})}):t.createElement("div",{className:ce.emptyElementsSection}),F=t.createElement(ue.mQ,{style:{width:"100%",marginTop:"50px",minHeight:"30vh"}},t.createElement(ue.td,null,null===u||void 0===u?void 0:u.component_blueprints.filter(e=>e.selected_fields.filter(l=>{var o,i;return 1==l.visible&&"Emails"!==l.data_type_name&&(void 0===(null===(o=e.options)||void 0===o?void 0:o.showOnly)||0==(null===(i=e.options)||void 0===i?void 0:i.showOnly.length)||k.positions.filter(l=>{var o,i;return null===(o=e.options)||void 0===o||null===(i=o.showOnly)||void 0===i?void 0:i.includes(l.id)}).length>0)}).length>0).map((e,l)=>t.createElement(ue.OK,{key:l},t.createElement("div",{style:{padding:"5px 0",fontSize:"18px",color:"var(--app-color-gray-dark)",fontWeight:"normal",fontFamily:"var(--app-text-font-mobile)",transform:"scaleY(1.1)"}},e.name)))),(null===u||void 0===u||null===(n=u.component_blueprints)||void 0===n?void 0:n.length)>0?null===u||void 0===u?void 0:u.component_blueprints.filter(e=>e.selected_fields.filter(l=>{var o,i;return 1==l.visible&&"Emails"!==l.data_type_name&&(void 0===(null===(o=e.options)||void 0===o?void 0:o.showOnly)||0==(null===(i=e.options)||void 0===i?void 0:i.showOnly.length)||k.positions.filter(l=>{var o,i;return null===(o=e.options)||void 0===o||null===(i=o.showOnly)||void 0===i?void 0:i.includes(l.id)}).length>0)}).length>0).map((e,l)=>{const o=e.selected_fields.find(e=>"Template"===e.data_type_name&&1==e.visible),n=e.selected_fields.find(e=>"Video"===e.data_type_name&&1==e.visible);return o?t.createElement(ue.x4,{key:l},t.createElement(D.ZP,{templateName:o.field_name,nextButtonClicked:m,isMandatoryError:c,blueprintIndex:l,setIsMandatoryError:_,component:e,companyData:h,components:x,products:w,selectedComponent:M,component_blueprint:e,editMode:O,blueprints:T,allModules:P,authenticatedUser:k,companyUsersArray:C,companyPositionsArray:I,begunModule:y})):e.selected_fields.filter(e=>1==e.visible).length>0?t.createElement(ue.x4,{key:l,style:{margin:"30px 0 0 0",padding:"30px 3px"}},t.createElement(Ge,{editMode:O,nextButtonClicked:m,isMandatoryError:c,blueprintIndex:l,setIsMandatoryError:_,blueprints:T,component:e,companyData:h,components:x,allModules:P,products:w,authenticatedUser:k,selectedComponent:M,companyUsersArray:C,companyPositionsArray:I,begunModule:y}),(null===M||void 0===M?void 0:M.id)&&(null===n||void 0===n?void 0:n.value)&&b()(null===n||void 0===n?void 0:n.value)<=(0,g.now)()&&(0,g.now)()<b()(null===n||void 0===n?void 0:n.value).add("minutes",10)&&t.createElement(Ge,{editMode:O,nextButtonClicked:m,isMandatoryError:c,blueprintIndex:l,setIsMandatoryError:_,blueprints:T,component:(0,i.Z)((0,i.Z)({},e),{},{name:"Video Call",selected_fields:[(0,i.Z)((0,i.Z)({},n),{},{options:(0,i.Z)((0,i.Z)({},n.options),{},{start:!0})})]}),companyData:h,components:x,allModules:P,products:w,authenticatedUser:k,selectedComponent:M,companyUsersArray:C,companyPositionsArray:I,begunModule:y,shouldDisplay:!0,isEnabled:!0})):t.createElement(ue.x4,null)}):t.createElement(ue.x4,null)),[W,q]=(0,t.useState)({currentBreakpoint:"lg",compactType:"vertical",mounted:!1,layouts:{lg:u.options.layout},editing:E});return t.createElement("div",{style:{width:"inherit"}},t.createElement(f.j3,{permissions:[f.po.processes.create]},t.createElement("button",{onClick:()=>{R=W.layouts.lg.map(e=>(0,i.Z)((0,i.Z)({},e),{},{static:!1})),q((0,i.Z)((0,i.Z)({},W),{},{layouts:{lg:R},editing:!W.editing}))},hidden:!W.editing},"Edit Layout"),t.createElement("button",{onClick:()=>{const e=R.map(e=>(0,i.Z)((0,i.Z)({},e),{},{static:!0}));(0,r.T5)({options:(0,i.Z)((0,i.Z)({},u.options),{},{layout:e})},u.id,!0).pipe((0,p.P)()).subscribe({next:l=>{q((0,i.Z)((0,i.Z)({},W),{},{layouts:{lg:e},editing:!W.editing}))},error:e=>{q((0,i.Z)((0,i.Z)({},W),{},{layouts:{lg:u.options.layout},editing:!W.editing}))},complete:()=>{}})},hidden:!W.editing},"Save Layout")),null!==u&&void 0!==u&&null!==(d=u.options)&&void 0!==d&&d.tabbed?F:U,(null===(a=y.processModule.module)||void 0===a?void 0:a.options.forSpecificUsers)&&(null===u||void 0===u?void 0:u.is_end)&&t.createElement("div",{style:{height:"100px"}}),(null===u||void 0===u||null===(s=u.pathway_steps)||void 0===s?void 0:s.length)>0&&(()=>{const e=u.pathway_steps.map(e=>({label:"".concat(e.name),value:e.id})),l=C.map(e=>({label:"".concat(e.first_name," ").concat(e.last_name),value:e.id}));return t.createElement("div",{className:ce.emptyElementsSection,style:{width:"60%",padding:"20px 20px 20px 20px",height:"".concat(l.length*l.length>4?70:200,"px")}},t.createElement(A.Z,{visible:!0,mandatory:!1,items:e,onChange:e=>{S(e)},placeholder:"Continue to this step..."}))})(),(null===u||void 0===u||null===(v=u.pathway_processes)||void 0===v?void 0:v.length)>0&&(()=>{const e=u.pathway_processes.map(e=>({label:"".concat(e.name),value:e.id})),l=C.map(e=>({label:"".concat(e.first_name," ").concat(e.last_name),value:e.id}));return t.createElement("div",{className:ce.emptyElementsSection,style:{width:"60%",padding:"20px 20px 20px 20px",height:"".concat(l.length*l.length>4?70:200,"px")}},t.createElement(A.Z,{visible:!0,mandatory:!1,items:e,onChange:()=>{},placeholder:"Continue to this process..."}))})(),e.children)}),je=t.forwardRef((e,l)=>{var o,n,d,a,r,s,u,c,p,m,f;const{begunModule:_,allModules:h,companyData:g,setSelectedComponent:b,selectedComponent:x,companyUsersArray:E,companyPositionsArray:C,print:w,components:M=[],user:S,bypassCustom:k=!1,goto:Z}=e,[I,N]=(0,t.useState)([]),P=null===_||void 0===_||null===(o=_.processModule)||void 0===o||null===(n=o.completeSteps)||void 0===n?void 0:n.find(e=>{var l;return(null===(l=e.component_blueprints)||void 0===l?void 0:l.filter(e=>e.selected_fields.filter(e=>"Template"===e.data_type_name).length>0).length)>0&&0==k});(0,t.useEffect)(()=>{var o,n,d;let a=[];if(j.Z(G.Z("group"))(null!==(o=null===x||void 0===x?void 0:x.component_fields)&&void 0!==o?o:[]).map(e=>{a=[...a,{id:e.component_blueprint_id,selected_fields:$.Z(ee.Z("group",e.group))(x.component_fields)}]}),(null===_||void 0===_||null===(n=_.processModule)||void 0===n||null===(d=n.completeSteps)||void 0===d?void 0:d.length)>0){let o=[t.createElement("div",{key:0,style:{display:null!==e&&void 0!==e&&e.noHeader?"none":""}},w&&t.createElement("p",{className:ce.detailLabel},g.display_name)),P?t.createElement("div",{key:1}):A()];var r,s,v,u,c,p;if(_.processModule.completeSteps.map(e=>{e.component_blueprints.filter(e=>{var l,o;return 0==(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.asModuleList)||void 0==(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.asModuleList)}).map((l,n)=>{var d,r,s;const v=null!==(d=null===x||void 0===x||null===(r=x.component_fields)||void 0===r?void 0:r.filter(e=>e.component_blueprint_id===l.id))&&void 0!==d?d:[],u=!(null===v||void 0===v||!v.find(e=>!(""===e.value||void 0===e.value||null===e.value)));var c,p,m;(null===v||void 0===v?void 0:v.length)>0&&(null===(s=l.selected_fields)||void 0===s?void 0:s.filter(e=>1==e.visible).length)>0&&(null!==l.options?!1!==l.options.allowMultipleInputs&&void 0!==l.options.allowMultipleInputs&&null!==l.options.allowMultipleInputs||(o=[...o,t.createElement("div",{key:o.length,style:{display:u?"":"none"}},t.createElement(ll,{step:e,isInherited:!1,nextButtonClicked:()=>{},isMandatoryError:!1,stepId:e.id,blueprintIndex:n,setIsMandatoryError:()=>{},component:(0,i.Z)((0,i.Z)({},l),{},{created_date:x.created_date,values:null!==(c=null===(p=a.find(e=>e.id===l.id))||void 0===p?void 0:p.selected_fields)&&void 0!==c?c:[]}),begunModule:_,allModules:h,companyData:g,components:a,allComponents:M,companyUsersArray:E,status:null===x||void 0===x?void 0:x.status,selectedComponent:x}))]):o=[...o,t.createElement("div",{key:o.length},t.createElement(ll,{step:e,isInherited:!1,nextButtonClicked:()=>{},isMandatoryError:!1,stepId:e.id,blueprintIndex:n,setIsMandatoryError:()=>{},component:(0,i.Z)((0,i.Z)({},l),{},{created_date:x.created_date,values:null===(m=a.find(e=>e.id===l.id))||void 0===m?void 0:m.selected_fields}),begunModule:_,allModules:h,companyData:g,components:a,allComponents:M,companyUsersArray:E,status:null===x||void 0===x?void 0:x.status,selectedComponent:x}))])})}),P)return void N(t.createElement(D.C6,{ref:l,begunModule:_,allModules:h,companyData:g,components:M,selectedComponent:x,setSelectedComponent:b,companyUsersArray:E,companyPositionsArray:C,goto:Z},o,t.createElement(tl,{component:x}),t.createElement(il,{component:x,show:null===_||void 0===_||null===(r=_.processModule)||void 0===r||null===(s=r.module)||void 0===s||null===(v=s.options)||void 0===v?void 0:v.anonymous})));N([...o,t.createElement(tl,{component:x,key:o.length+1}),t.createElement(il,{component:x,key:o.length+2,show:null===_||void 0===_||null===(u=_.processModule)||void 0===u||null===(c=u.module)||void 0===c||null===(p=c.options)||void 0===p?void 0:p.anonymous})])}},[x]);const A=()=>{var e,l,o,n,d,a,r,s,u,c,p,m,f,h,b,E,C,w;const M=null===_||void 0===_||null===(e=_.processModule)||void 0===e||null===(l=e.completeSteps)||void 0===l?void 0:l.find(e=>e.component_blueprints.filter(e=>{var l;return(null===(l=e.selected_fields)||void 0===l?void 0:l.filter(e=>{var l;return"item_code"===(null===(l=e.options)||void 0===l?void 0:l.mapToItem)||"Transactions Field"===e.data_type_name||"Template"===e.data_type_name||"Transaction List"===e.data_type_name}).length)>0}).length>0),S=null!==(o=null!==(n=null!==(d=null!==(a=null===M||void 0===M||null===(r=M.component_blueprints)||void 0===r?void 0:r.find(e=>{var l;return(null===(l=e.selected_fields)||void 0===l?void 0:l.filter(e=>"Transaction List"===e.data_type_name).length)>0}))&&void 0!==a?a:null===M||void 0===M||null===(s=M.component_blueprints)||void 0===s?void 0:s.find(e=>{var l;return(null===(l=e.selected_fields)||void 0===l?void 0:l.filter(e=>{var l;return"item_code"===(null===(l=e.options)||void 0===l?void 0:l.mapToItem)}).length)>0}))&&void 0!==d?d:null===M||void 0===M||null===(u=M.component_blueprints)||void 0===u?void 0:u.find(e=>{var l;return(null===(l=e.selected_fields)||void 0===l?void 0:l.filter(e=>"Transactions Field"===e.data_type_name).length)>0}))&&void 0!==n?n:null===M||void 0===M||null===(c=M.component_blueprints)||void 0===c?void 0:c.find(e=>{var l;return(null===(l=e.selected_fields)||void 0===l?void 0:l.filter(e=>"Template"===e.data_type_name).length)>0}))&&void 0!==o?o:void 0,k=S?null===(p=S.selected_fields)||void 0===p||null===(m=p.find(e=>"Template"===e.data_type_name))||void 0===m?void 0:m.field_name:"",Z=null===g||void 0===g||null===(f=g.misc_info)||void 0===f||null===(h=f.templatesData)||void 0===h?void 0:h.find(e=>e.name===k),I=Z?(null===Z||void 0===Z||null===(b=Z.tlist)||void 0===b?void 0:b.length)>0?null===Z||void 0===Z?void 0:Z.tlist:null===(E=Z.config)||void 0===E?void 0:E.filter(e=>"Text"===e.value||"Number"===e.value||"Connector"===e.value):S?S.selected_fields.filter(e=>{var l,o,i;return!(""===(null===(l=e.options)||void 0===l?void 0:l.mapToItem)||void 0==(null===(o=e.options)||void 0===o?void 0:o.mapToItem)||null==(null===(i=e.options)||void 0===i?void 0:i.mapToItem))}):[];return(null===x||void 0===x||null===(C=x.component_items)||void 0===C?void 0:C.length)>0&&t.createElement("div",{className:ce.accordionContainer,style:{border:y.tq?"0":"",marginTop:"10px",padding:y.tq?"10px":"",backgroundColor:"var(--app-color-gray-lightest)"}},t.createElement(T.default,{modern:!0,className:ce.listContainer,isReport:!1,"app-variant-is-mobile":"true",title:"Items",columns:I?I.map(e=>Z?e.label:e.field_name):["Product ID","Quantity","Price"],list:null===x||void 0===x||null===(w=x.component_items)||void 0===w?void 0:w.map(e=>{var l,o,n,d,a,r,s,u,c,p,m,f,_,y,h,g,b,x,E,C,w,M,S,k,N,T;if((null===Z||void 0===Z||null===(l=Z.tlist)||void 0===l?void 0:l.length)>0){let l={};return Z.tlist.filter(o=>{l=(0,i.Z)((0,i.Z)({},l),{},{[null===o||void 0===o?void 0:o.label]:e[null===o||void 0===o?void 0:o.key]})}),l}const D=e.item_code,P=e.quantity,A=null!==(o=e.alt_value)&&void 0!==o?o:0,O=null!==(n=e.value)&&void 0!==n?n:0,L=null!==(d=e.total)&&void 0!==d?d:0;let z={};return(0,v.sO)(e.item_code)&&(z=(0,i.Z)((0,i.Z)({},z),JSON.parse(e.item_code))),(0,v.sO)(e.quantity)&&(z=(0,i.Z)((0,i.Z)({},z),JSON.parse(e.quantity))),(0,v.sO)(e.alt_value)&&(z=(0,i.Z)((0,i.Z)({},z),JSON.parse(e.alt_value))),(0,v.sO)(e.value)&&(z=(0,i.Z)((0,i.Z)({},z),JSON.parse(e.value))),(0,v.sO)(e.total)&&(z=(0,i.Z)((0,i.Z)({},z),JSON.parse(e.total))),void 0!=Z?(0,i.Z)({[null!==(a=null===(r=Z.config.find(e=>"item_code"===e.key))||void 0===r?void 0:r.label)&&void 0!==a?a:"Item Code"]:t.createElement("div",{className:ce.templateInformation},D),[null!==(s=null===(u=Z.config.find(e=>"value"===e.key))||void 0===u?void 0:u.label)&&void 0!==s?s:"Price"]:t.createElement("div",{className:ce.templateInformation},O),[null!==(c=null===(p=Z.config.find(e=>"total"===e.key))||void 0===p?void 0:p.label)&&void 0!==c?c:"Total"]:t.createElement("div",{className:ce.templateInformation},L),[null!==(m=null===(f=Z.config.find(e=>"quantity"===e.key))||void 0===f?void 0:f.label)&&void 0!==m?m:"Quantity"]:t.createElement("div",{className:ce.templateInformation},P),[null!==(_=null===(y=Z.config.find(e=>"alt_value"===e.key))||void 0===y?void 0:y.label)&&void 0!==_?_:"Discount"]:t.createElement("div",{className:ce.templateInformation},A),id:e.id},z):null!==I&&void 0!==I&&I.find(e=>{var l,o,i,t,n;return"item_code"===(null===(l=e.options)||void 0===l?void 0:l.mapToItem)||"value"===(null===(o=e.options)||void 0===o?void 0:o.mapToItem)||"total"===(null===(i=e.options)||void 0===i?void 0:i.mapToItem)||"quantity"===(null===(t=e.options)||void 0===t?void 0:t.mapToItem)||"alt_value"===(null===(n=e.options)||void 0===n?void 0:n.mapToItem)})?(0,i.Z)({[null!==(h=null===(g=I.find(e=>{var l;return"item_code"===(null===(l=e.options)||void 0===l?void 0:l.mapToItem)}))||void 0===g?void 0:g.field_name)&&void 0!==h?h:"Product ID"]:t.createElement("div",{className:ce.templateInformation},D),[null!==(b=null===(x=I.find(e=>{var l;return"value"===(null===(l=e.options)||void 0===l?void 0:l.mapToItem)}))||void 0===x?void 0:x.field_name)&&void 0!==b?b:"Price"]:t.createElement("div",{className:ce.templateInformation},O),[null!==(E=null===(C=I.find(e=>{var l;return"total"===(null===(l=e.options)||void 0===l?void 0:l.mapToItem)}))||void 0===C?void 0:C.field_name)&&void 0!==E?E:"Total"]:t.createElement("div",{className:ce.templateInformation},L),[null!==(w=null===(M=I.find(e=>{var l;return"quantity"===(null===(l=e.options)||void 0===l?void 0:l.mapToItem)}))||void 0===M?void 0:M.field_name)&&void 0!==w?w:"Quantity"]:t.createElement("div",{className:ce.templateInformation},P),[null!==(S=null===(k=I.find(e=>{var l;return"alt_value"===(null===(l=e.options)||void 0===l?void 0:l.mapToItem)}))||void 0===k?void 0:k.field_name)&&void 0!==S?S:"Discount"]:t.createElement("div",{className:ce.templateInformation},A),[null!==(N=null===(T=I.find(e=>{var l;return"alt_value"===(null===(l=e.options)||void 0===l?void 0:l.mapToItem)}))||void 0===T?void 0:T.field_name)&&void 0!==N?N:"Actual"]:t.createElement("div",{className:ce.templateInformation},A),id:e.id},z):{"Product ID":D,Quantity:P,Price:O}}),onListItemClick:e=>{}}))},O=t.createElement("div",{style:{display:y.tq?"none":""}},((null===x||void 0===x||null===(d=x.shared_users)||void 0===d?void 0:d.length)>0||(null===x||void 0===x||null===(a=x.shared_positions)||void 0===a?void 0:a.length)>0)&&t.createElement("div",{className:ce.accordionContainer},t.createElement("p",{className:ce.cardTitle},"Shares"),t.createElement("div",{style:{display:"flex"}},(null===x||void 0===x||null===(r=x.shared_positions)||void 0===r?void 0:r.length)>0&&t.createElement(T.default,{className:ce.sharesTable,columns:["Position"],list:null===x||void 0===x||null===(s=x.shared_positions)||void 0===s?void 0:s.map(e=>{var l;const o=C.find(l=>l.value===e.id);return{Position:null!==(l=null===o||void 0===o?void 0:o.label)&&void 0!==l?l:""}})}),(null===x||void 0===x||null===(u=x.shared_users)||void 0===u?void 0:u.length)>0&&t.createElement(T.default,{className:ce.sharesTable,columns:["User"],list:null===x||void 0===x||null===(c=x.shared_users)||void 0===c?void 0:c.map(e=>{const l=E.find(l=>l.id===e.id);return{User:"".concat(null===l||void 0===l?void 0:l.first_name," ").concat(null===l||void 0===l?void 0:l.last_name)}})}))));return t.createElement("div",{ref:l,style:{userSelect:"none",padding:w?"50px 120px 50px 100px":"50px 10px 10px 10px",alignSelf:"center",width:"100%"}},I,(null===_||void 0===_||null===(p=_.processModule)||void 0===p||null===(m=p.module)||void 0===m||null===(f=m.options)||void 0===f?void 0:f.forSpecificUsers)&&O)}),Ge=e=>{var l,o,n,d,a,r,s,u,c,p,m,h,g,x,E,C,w,M,S,k,I,N,T;const{allModules:D,component:A,blueprintIndex:O,nextButtonClicked:L,setIsMandatoryError:z,companyUsersArray:R,companyData:U,components:F,products:W,authenticatedUser:q,begunModule:B,blueprints:Y,selectedComponent:V,companyPositionsArray:j,editMode:G,isProcessorOnly:J,shouldDisplay:K=(!1===(null===A||void 0===A||null===(l=A.options)||void 0===l?void 0:l.useCustomTemplate)||void 0===(null===A||void 0===A||null===(o=A.options)||void 0===o?void 0:o.useCustomTemplate))&&(void 0===(null===A||void 0===A||null===(n=A.options)||void 0===n?void 0:n.showOnly)||(!((null===A||void 0===A||null===(d=A.options)||void 0===d||null===(a=d.showOnly)||void 0===a?void 0:a.length)>0)||(null===A||void 0===A||null===(r=A.options)||void 0===r||null===(s=r.showOnly)||void 0===s?void 0:s.filter(e=>{var l;return(null===q||void 0===q||null===(l=q.positions)||void 0===l?void 0:l.filter(l=>l.id===e).length)>0}).length)>0)),isEnabled:Q=void 0===(null===V||void 0===V?void 0:V.id)||((null===V||void 0===V||null===(u=V.created_by)||void 0===u?void 0:u.id)===q.id||(void 0===(null===B||void 0===B||null===(c=B.processModule)||void 0===c||null===(p=c.module)||void 0===p||null===(m=p.options)||void 0===m?void 0:m.strict)||0==(null===B||void 0===B||null===(h=B.processModule)||void 0===h||null===(g=h.module)||void 0===g||null===(x=g.options)||void 0===x?void 0:x.strict)||void 0!==(null===A||void 0===A||null===(E=A.options)||void 0===E?void 0:E.showOnly)&&((null===A||void 0===A||null===(C=A.options)||void 0===C||null===(w=C.showOnly)||void 0===w?void 0:w.length)>0&&(null===A||void 0===A||null===(M=A.options)||void 0===M||null===(S=M.showOnly)||void 0===S?void 0:S.filter(e=>{var l;return(null===q||void 0===q||null===(l=q.positions)||void 0===l?void 0:l.filter(l=>l.id===e).length)>0}).length)>0)))}=e,[X,$]=(0,_.pQ)(),[le,oe]=(0,t.useState)(ce.active),[ie,te]=(0,t.useState)(!1),[ne,de]=(0,t.useState)(""),[ae,re]=(0,t.useState)(b()()),se=(0,t.useRef)(null),ve=null===(k=X.currentStep)||void 0===k?void 0:k.component_blueprints.findIndex(e=>e.id===A.id);(0,t.useEffect)(()=>{ue()},[L]),(0,t.useEffect)(()=>{if(null!==A&&void 0!==A&&A.selected_fields.find(e=>"Clock"===e.data_type_name&&!0===e.visible)){const e=setInterval(()=>{re(b()())},1e3);return()=>{window.clearInterval(e)}}},[]);const ue=()=>{var e;null!==A&&void 0!==A&&null!==(e=A.selected_fields)&&void 0!==e&&e.some(e=>{var l;return!0===e.mandatory&&!0===e.visible&&(!e.value||(null===e||void 0===e||null===(l=e.value)||void 0===l?void 0:l.length)<1)})?z(!0):z(!1)},pe=(0,t.useCallback)(()=>{var e,l,o;const t=[...null!==(e=null===(l=X.currentStep)||void 0===l?void 0:l.component_blueprints)&&void 0!==e?e:[]],n=null===(o=t[ve])||void 0===o?void 0:o.selected_fields;ue(),t[ve].selected_fields=null===n||void 0===n?void 0:n.map(e=>(0,i.Z)((0,i.Z)({},e),{},{errors:!0!==e.mandatory||e.value?"":"Field is mandatory"})),$({action:_._U.setComponentBlueprints,value:t}),$({action:_._U.setModuleNewStepComponents,value:t})},[X.currentStep]),me=(e,l)=>{var o,i,t;const n=[...null!==(o=null===(i=X.currentStep)||void 0===i?void 0:i.component_blueprints)&&void 0!==o?o:[]],d=null===(t=n[ve])||void 0===t?void 0:t.selected_fields[l];"Number"===(null===d||void 0===d?void 0:d.data_type_name)?Number(+e)?d.value=e:""===e&&(d.value=""):null!==d&&void 0!==d&&d.data_type_name&&(d.value=e),null!==d&&void 0!==d&&d.value&&d.mandatory&&(d.errors=""),ue(),$({action:_._U.setComponentBlueprints,value:n}),$({action:_._U.setModuleNewStepComponents,value:n})},fe=(0,t.useCallback)((e,l,o)=>{var i,t,n;const d=[...null!==(i=null===(t=X.currentStep)||void 0===t?void 0:t.component_blueprints)&&void 0!==i?i:[]],a=null===(n=d[ve])||void 0===n?void 0:n.selected_fields[l];a.options.country_code=null===e||void 0===e?void 0:e.countryCode,a.options.country_name=null===e||void 0===e?void 0:e.name,a.options.country_prefix="+".concat(null===e||void 0===e?void 0:e.dialCode),$({action:_._U.setComponentBlueprints,value:d}),$({action:_._U.setModuleNewStepComponents,value:d}),me(o,l)},[X]),_e=(0,t.useCallback)((e,l)=>{var o,i,t;const n=[...null!==(o=null===(i=X.currentStep)||void 0===i?void 0:i.component_blueprints)&&void 0!==o?o:[]],d=null===(t=n[ve])||void 0===t?void 0:t.selected_fields[l];d.options.currency_type=null===e||void 0===e?void 0:e.label,d.options.currency_value=null===e||void 0===e?void 0:e.value,d.options.symbol=null===e||void 0===e?void 0:e.symbol,$({action:_._U.setComponentBlueprints,value:n}),$({action:_._U.setModuleNewStepComponents,value:n})},[X]);return t.createElement("div",{id:"accordion",className:ce.accordionModuleContainer,key:O,style:{width:"100%",border:J&&Q?"4px solid var(--app-color-gray-lighter)":"0",boxShadow:y.tq||1==(null===Z.Nb||void 0===Z.Nb||null===(I=Z.Nb.options)||void 0===I?void 0:I.popup)?"0 var(--app-color-white-lightest)":"",display:K?"":"none",pointerEvents:Q?"":"none"}},t.createElement("div",{className:ge()(ce.accordionContainer,le),"app-variant-has-error":ne?"error":"",style:{border:y.tq?"0":"",padding:y.tq?"0":"",margin:y.tq?"0":""}},t.createElement("div",{ref:se,style:{maxHeight:le===ce.active?"":"0px",display:"flex"},className:ce.content},t.createElement(Qe,{blueprints:Y,component:A,selectedComponent:V,handleInputChange:me,handlePrefixChange:fe,handleCurrencyChange:_e,checkIfAreMandatoryErrored:ue,handleCheckbox:(e,l)=>{var o,i,t;const n=[...null!==(o=null===(i=X.currentStep)||void 0===i?void 0:i.component_blueprints)&&void 0!==o?o:[]],d=null===(t=n[ve])||void 0===t?void 0:t.selected_fields[l];d&&(d.value=e,null!==d&&void 0!==d&&d.value&&d.mandatory&&(d.errors=""),$({action:_._U.setComponentBlueprints,value:n}),$({action:_._U.setModuleNewStepComponents,value:n}),ue())},isInherited:!1,indexInContextArray:ve,handleLocationChange:(e,l)=>{var o,i,t;const n=[...null!==(o=null===(i=X.currentStep)||void 0===i?void 0:i.component_blueprints)&&void 0!==o?o:[]];(null===(t=n[ve])||void 0===t?void 0:t.selected_fields[l]).value="".concat(e.lat,", ").concat(e.lng),$({action:_._U.setComponentBlueprints,value:n}),$({action:_._U.setModuleNewStepComponents,value:n})},processTaskContext:X,begunModule:B,setTaskProcessContext:$,companyData:U,companyUsersArray:R,companyPositionsArray:j,components:F,products:W,allModules:D,editMode:G,clock:ae})),t.createElement("div",{style:{paddingLeft:"10px"}},t.createElement("div",{onClick:()=>{var e;if(pe(),null!==A&&void 0!==A&&null!==(e=A.selected_fields)&&void 0!==e&&e.some(e=>{var l;return!0===e.mandatory&&!0===e.visible&&(!e.value||(null===e||void 0===e||null===(l=e.value)||void 0===l?void 0:l.length)<1)}))return;const l={},o=A.selected_fields.map(e=>{var o,t;if("Formula"===e.data_type_name){var n,d,a;const o=(0,v.LV)(e.options,A.selected_fields.filter(l=>e.options.list.includes(l.field_name)),X.components,null!==(n=X.items)&&void 0!==n?n:[],null!==(d=null===X||void 0===X?void 0:X.newStepComponents)&&void 0!==d?d:[]);var r;if(null!==e&&void 0!==e&&null!==(a=e.options)&&void 0!==a&&a.mapToItem)l[null===e||void 0===e||null===(r=e.options)||void 0===r?void 0:r.mapToItem]="".concat(o);return(0,i.Z)((0,i.Z)({},e),{},{value:"".concat(o)})}null!==e&&void 0!==e&&null!==(o=e.options)&&void 0!==o&&o.mapToItem&&(l[null===e||void 0===e||null===(t=e.options)||void 0===t?void 0:t.mapToItem]="".concat(null===e||void 0===e?void 0:e.value));return e});if(Object.keys(l).length>0){var t;const e=null===(t=X.items)||void 0===t?void 0:t.find(e=>e.item_code===l.item_code);void 0===e?$({action:_._U.addModuleItems,value:(0,i.Z)((0,i.Z)({},l),{},{id:(0,v.mR)()})}):0==l.quantity?$({action:_._U.removeModuleItems,value:e}):$({action:_._U.updateModuleItems,value:(0,i.Z)((0,i.Z)({},e),l)})}else{const e=JSON.parse(JSON.stringify((0,i.Z)((0,i.Z)({},A),{},{temp_id:(0,v.mR)(),selected_fields:o})));$({action:_._U.addModuleComponents,value:e})}te(!1),de(""),A.selected_fields.map((e,l)=>{me("",l)}),$({action:_._U.setModuleNewStepComponents,value:[...H.Z(e=>e.selected_fields.filter(e=>""===e.value).length>0,[...H.Z(ee.Z("id",A.id))(X.newStepComponents)])]})},className:ce.iconsContainer,style:{display:null===(null===A||void 0===A?void 0:A.options)?"none":!0===(null===A||void 0===A||null===(N=A.options)||void 0===N?void 0:N.allowMultipleInputs)?"":"none"}},ie?t.createElement("div",{className:ce.loaderContainer},t.createElement(Te.Z,{type:y.G6?"Watch":"Puff",color:"var(--app-color-gray-dark)",secondaryColor:"gray",radius:32,height:32,width:"32px"})):t.createElement(f.zx,{light:!0},t.createElement(Z.mm,null))))),ne&&(null===ne||void 0===ne||null===(T=ne.errors)||void 0===T?void 0:T.title)&&t.createElement(P.Z,{message:ne.errors.title}),ne&&(null===ne||void 0===ne?void 0:ne.message)&&t.createElement(P.Z,{message:ne.message}))};function Je(e){return null!==e&&void 0!==e&&e.country_prefix?null===e||void 0===e?void 0:e.country_prefix:null!==e&&void 0!==e&&e.currency_value?(null===e||void 0===e?void 0:e.currency_value)+" ":""}const Ke=(e,l,o,i,t)=>{var n,d,a;const r=null===(a=[...null!==(n=null===(d=t.currentStep)||void 0===d?void 0:d.component_blueprints)&&void 0!==n?n:[]][o])||void 0===a?void 0:a.selected_fields[i];switch(e){case"Link":!function(e){let l;try{l=new URL(e)}catch(o){return!1}return"http:"===l.protocol||"https:"===l.protocol}(l)?r.errors="This field should contain a link!":r.errors="";break;case"E-mail":case"Email":new RegExp(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/).test(l)?r.errors="":r.errors="This field should contain an valid email address!";break;case"Phone":new RegExp(/^[+]?[(]?[0-9]{3}[)]?[-\s.]?[0-9]{3}[-\s.]?[0-9]{4,6}$/im).test(l)?r.errors="":r.errors="This field should contain an valid phone number!";break;case"Email Recipient":new RegExp(/^([a-z0-9!#$%&'*+/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*)(([, ]+[a-z0-9!#$%&'*+/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])\.([a-z0-9]([a-z0-9-]*[a-z0-9]))*)?)*$/).test(l)?r.errors="":r.errors="This field should contain an valid email address!"}},Qe=(0,t.memo)(e=>{var l,o,n,d,x;const{component:S,selectedComponent:k,handleInputChange:N,indexInContextArray:D,handleCheckbox:P,processTaskContext:L,setTaskProcessContext:z,isInherited:R,checkIfAreMandatoryErrored:F,handlePrefixChange:Y,handleCurrencyChange:V,handleLocationChange:X,companyData:$,components:ae,begunModule:re,blueprints:ue,companyUsersArray:me,companyPositionsArray:he,allModules:ge,editMode:xe,clock:we}=e,[Me,Se]=(0,t.useState)(me.map(e=>({label:e.first_name+" "+e.last_name,value:e.id,user:e}))),{authenticatedUser:ke}=(0,h.v9)(e=>e.authReducer),{user:Ze}=(0,h.v9)(e=>e.sessionReducer),{currentLocation:Ie,allTasks:Te,companyProcesses:We}=(0,h.v9)(e=>e.flowReducer),[qe,Ve]=(0,t.useState)(!1),[je,Ge]=(0,t.useState)(new Date),[Qe,$e]=(0,t.useState)([new Date,new Date(b()().add(7,"days"))]),[ll,ol]=Qe,[il,tl]=(0,t.useState)(""),[dl,al]=(0,t.useState)([{label:"",value:""}]),[rl,sl]=(0,t.useState)(!0),[vl,ul]=(0,t.useState)(!0),[cl,pl]=(0,t.useState)({source:!1,destination:!1}),[ml,fl]=(0,t.useState)("50px"),[_l,yl]=(0,t.useState)(Array(12).fill("")),[hl,gl]=(0,t.useState)({candidates:[]}),[bl,xl]=(0,t.useState)(!1),[El,Cl]=(0,t.useState)({}),[wl,Ml]=(0,t.useState)("day"),[Sl,kl]=(0,t.useState)({}),[Zl,Il]=((0,t.useRef)(),(0,t.useState)(!1)),Nl=()=>{Il(!Zl)},Tl=(e,l)=>{$e(e),N(e,l)},Dl=(e,l)=>{Ge(e),N(e,l)},Pl=(0,t.useCallback)(e=>{void 0!==e&&(0==Me.length?Ve(!0):Ve(!1),(0,be.n0)(e).pipe((0,p.P)()).subscribe({next:e=>{Se(e),Ve(!1)}}))},[]),Al=(0,t.useCallback)(()=>{0==he.length?Ve(!0):Ve(!1),(0,I.hj)().pipe((0,p.P)(1)).subscribe({})},[]),Ol=(0,t.useCallback)(e=>{var l;if(0==(null===e||void 0===e||null===(l=e.analyze)||void 0===l?void 0:l.length)||void 0==(null===e||void 0===e?void 0:e.analyze))return void gl({candidates:[{content:{parts:[{text:"Enter a question that I could answer"}]}}]});let o={role:"user",parts:[{text:e.analyze}]};1==(null===e||void 0===e?void 0:e.current)?o.parts=[...o.parts,{text:JSON.stringify({table:"Transaction",data:(0,i.Z)((0,i.Z)((0,i.Z)({},L.components.map(e=>{let l={};return e.selected_fields.filter(e=>l=(0,i.Z)((0,i.Z)({},l),{},{[e.field_name]:e.value})),l})),L.newStepComponents.map(e=>{let l={};return e.selected_fields.filter(e=>l=(0,i.Z)((0,i.Z)({},l),{},{[e.field_name]:e.value})),l})),{},{items:L.items.map(e=>({item:e.item_code,quantity:+e.quantity,value:e.value}))})})}]:(void 0!==e.module_id&&(o.parts=[...o.parts,{text:JSON.stringify({table:ge.find(l=>l.id===e.module_id).name,data:ae.filter(l=>l.module_id===e.module_id).map(e=>{var l;let o={};return e.component_fields.filter(e=>o=(0,i.Z)((0,i.Z)({},o),{},{[e.field_name]:e.value})),(0,i.Z)((0,i.Z)({},o),{},{created_date:e.created_date,created_by:null===(l=e.created_by)||void 0===l?void 0:l.id,items:null===e||void 0===e?void 0:e.component_items.map(e=>({item:e.item_code,quantity:+e.quantity,value:e.value}))})})})}]),void 0!==e.module2_id&&(o.parts=[...o.parts,{text:JSON.stringify({table:ge.find(l=>l.id===e.module2_id).name,data:ae.filter(l=>l.module_id===e.module2_id).map(e=>{var l;let o={};return e.component_fields.filter(e=>o=(0,i.Z)((0,i.Z)({},o),{},{[e.field_name]:e.value})),(0,i.Z)((0,i.Z)({},o),{},{created_date:e.created_date,created_by:null===(l=e.created_by)||void 0===l?void 0:l.id,items:null===e||void 0===e?void 0:e.component_items.map(e=>({item:e.item_code,quantity:+e.quantity,value:e.value}))})})})}]),void 0!==e.module3_id&&(o.parts=[...o.parts,{text:JSON.stringify({table:ge.find(l=>l.id===e.module3_id).name,data:ae.filter(l=>l.module_id===e.module3_id).map(e=>{var l;let o={};return e.component_fields.filter(e=>o=(0,i.Z)((0,i.Z)({},o),{},{[e.field_name]:e.value})),(0,i.Z)((0,i.Z)({},o),{},{created_date:e.created_date,created_by:null===(l=e.created_by)||void 0===l?void 0:l.id,items:null===e||void 0===e?void 0:e.component_items.map(e=>({item:e.item_code,quantity:+e.quantity,value:e.value}))})})})}])),gl({candidates:[]}),Ve(!0),(0,ye.hd)(JSON.stringify(o)).pipe((0,p.P)()).subscribe({next:e=>{Ve(!1),gl(e)},error:e=>{gl({candidates:[{content:{parts:[{text:JSON.stringify(e)}]}}]}),Ve(!1)}})},[]),Ll=e=>{const{field_name:l}=e;return S.selected_fields.findIndex(e=>e.field_name===l)},zl=e=>{const l=S.selected_fields.filter(e=>"Info"===e.data_type_name),o=ae.find(l=>l.id===e);l.map(l=>{var i;null===l||void 0===l||null===(i=l.options)||void 0===i||i.list.map(i=>{var t,n;const d=null===(t=o.component_fields)||void 0===t?void 0:t.find(e=>e.field_name===i),a=Ll({field_name:i});-1!=a&&(null===(n=o.component_fields)||void 0===n?void 0:n.length)>0&&(S.selected_fields[a].value=d?d.value:"",l.value=e)})});S.selected_fields.filter(e=>"Global"===e.data_type_name&&1==e.visible).map(e=>{var l,i;const t=null===(l=o.component_fields)||void 0===l?void 0:l.find(l=>l.field_name===e.field_name),n=Ll({field_name:e.field_name});-1!=n&&(null===(i=o.component_fields)||void 0===i?void 0:i.length)>0&&t&&(S.selected_fields[n].value=null===t||void 0===t?void 0:t.value)})},Rl=e=>{var l,o;let i=null===(l=re.processModule.module)||void 0===l||null===(o=l.options)||void 0===o?void 0:o.global;var t,n,d,a,r;i||(i=null===(t=L.components.find(l=>l.selected_fields.filter(l=>{var o,i;return"Global"===l.data_type_name&&1==l.visible&&l.field_name===(null===(o=S.selected_fields.find(l=>l.data_type_name===e&&1==l.visible))||void 0===o||null===(i=o.options)||void 0===i?void 0:i.global)}).length>0))||void 0===t||null===(n=t.selected_fields.find(e=>"Global"===e.data_type_name))||void 0===n?void 0:n.value);i||(i=null===(d=W.Z(q.Z("component_blueprints"),B.Z)(re.processModule.completeSteps).find(l=>l.selected_fields.filter(l=>{var o,i;return l.field_name===(null===(o=S.selected_fields.find(l=>l.data_type_name===e&&1==l.visible))||void 0===o||null===(i=o.options)||void 0===i?void 0:i.global)&&"Value"===l.data_type_name}).length>0))||void 0===d||null===(a=d.selected_fields.find(e=>"Value"===e.data_type_name))||void 0===a||null===(r=a.options)||void 0===r?void 0:r.value);return i?ae.filter(l=>l.component_fields.filter(l=>{var o,t;return l.value===i&&l.field_name===(null===(o=S.selected_fields.find(l=>l.data_type_name===e))||void 0===o||null===(t=o.options)||void 0===t?void 0:t.global)}).length>0):ae},Ul=e=>{var l,o,i,n,d,a,r,s,u,c,p,m,_,y,h,g,x,w,M,k,Z,I,T;const{field:O,enabled:z,index:U,isItem:W=!1,handleItem:q,withLabel:B=!0,edit:Y=!0,item:V}=e;var j,G,J,K,Q,X,ee,le,oe,ie,te,ne,de,re,se,ve,ue,pe,me,_e,ye,he,ge,be,xe,Ee,Ce,we,Se,ke,Ze,Ie,Ne,Te,De,Pe,Ae;if("Dropdown"===(null===O||void 0===O?void 0:O.data_type_name)&&(null===O||void 0===O||null===(l=O.options)||void 0===l||null===(o=l.list)||void 0===o?void 0:o.length)>0)return Y?t.createElement("div",{style:{width:"100%",border:"1px solid var(--app-color-gray-light)"}},t.createElement(A.Z,{key:U,visible:O.visible,mandatory:O.mandatory,items:null===O||void 0===O||null===(j=O.options)||void 0===j?void 0:j.list.map(e=>({label:e,value:e})),className:ce.dropdownClassContainer,error:O.errors,onChange:e=>{W?q(e,U):P(e,U)},selectionType:null===O||void 0===O||null===(G=O.options)||void 0===G?void 0:G.type,max:+(null!==(J=null===O||void 0===O||null===(K=O.options)||void 0===K?void 0:K.max)&&void 0!==J?J:0),fieldIcon:O.icon,backgroundColor:null!==O&&void 0!==O&&null!==(Q=O.options)&&void 0!==Q&&Q.valueC&&null!==O&&void 0!==O&&O.value?null===O||void 0===O||null===(X=O.options)||void 0===X?void 0:X.valueC:"",value:void 0===O.value||null===O.value?"":O.value})):t.createElement("div",null,null===O||void 0===O?void 0:O.value);if("Radio"===(null===O||void 0===O?void 0:O.data_type_name)&&(null===O||void 0===O||null===(i=O.options)||void 0===i||null===(n=i.list)||void 0===n?void 0:n.length)>0)return t.createElement("div",{style:{width:"100%",border:"0px solid var(--app-color-gray-light)",padding:"20px",fontSize:"16px"}},null===O||void 0===O||null===(ee=O.options)||void 0===ee?void 0:ee.list.map(e=>t.createElement(t.Fragment,null,t.createElement("input",{style:{margin:"0 10px"},type:"radio",id:e,name:O.field_name,value:e,checked:(null===O||void 0===O?void 0:O.value)===e,onChange:e=>{var l,o;W?q(null===(l=e.target)||void 0===l?void 0:l.value,U):P(null===(o=e.target)||void 0===o?void 0:o.value,U)}}),t.createElement("label",{for:e},e))));if("Checkbox"===(null===O||void 0===O?void 0:O.data_type_name))return Y?t.createElement("input",{type:"checkbox",defaultChecked:null!==(le=O.value)&&void 0!==le&&le,onChange:e=>{W?q(e.target.checked,U):P(e.target.checked,U)}}):t.createElement("input",{type:"checkbox",checked:null!==(oe=O.value)&&void 0!==oe&&oe,readOnly:!0});if("Formula"===(null===O||void 0===O?void 0:O.data_type_name)&&(null===O||void 0===O||null===(d=O.options)||void 0===d||null===(a=d.operator)||void 0===a?void 0:a.length)>0){var Oe,Le,ze,Re,Ue;const e=L.newStepComponents.filter(e=>null===e.options||(void 0===e.allowMultipleInputs||!1===e.options.allowMultipleInputs)),l=(0,v.LV)(null===O||void 0===O?void 0:O.options,S.selected_fields.filter(e=>O.options.list.includes(e.field_name)&&!e.options.mapToItem),[...L.components.filter(l=>e.every(e=>e.id!==l.id)),...H.Z(e=>e.selected_fields.filter(e=>""===(null===e||void 0===e?void 0:e.value)).length>0,e)],null!==(Oe=null===L||void 0===L?void 0:L.items)&&void 0!==Oe?Oe:[],null!==(Le=null===L||void 0===L?void 0:L.newStepComponents)&&void 0!==Le?Le:[]);return void 0!==l&&(O.value=l),"bar"===(null===O||void 0===O||null===(ze=O.options)||void 0===ze?void 0:ze.display)?t.createElement("div",{style:{margin:"20px",display:"flex",height:"30px",width:"100%"}},t.createElement("label",{className:ce.fieldTypeInput,style:{width:"20%"}},null===O||void 0===O?void 0:O.field_name),t.createElement("div",{style:{height:"20px",width:"80%",backgroundColor:null===O||void 0===O||null===(Re=O.options)||void 0===Re?void 0:Re.maxC,display:"flex",flexDirection:"column"}},t.createElement("input",{value:l||0,className:ce.fieldTypeInput,name:O.field_name,disabled:!0,style:{color:"transparent",height:"20px",width:"".concat(+l/+O.options.max*100,"%"),backgroundColor:null===O||void 0===O||null===(Ue=O.options)||void 0===Ue?void 0:Ue.barC}}))):l||""}if("Item Formula"===(null===O||void 0===O?void 0:O.data_type_name)&&(null===O||void 0===O||null===(r=O.options)||void 0===r||null===(s=r.operator)||void 0===s?void 0:s.length)>0){var Fe,We,Be;const e=(0,v.LV)(null===O||void 0===O?void 0:O.options,S.selected_fields.filter(e=>O.options.list.includes(e.field_name)&&e.options.mapToItem),[],[],V,!0);return"bar"===(null===O||void 0===O||null===(Fe=O.options)||void 0===Fe?void 0:Fe.display)?t.createElement("div",{style:{margin:"20px",display:"flex",height:"30px",width:"100%"}},t.createElement("label",{className:ce.fieldTypeInput,style:{width:"20%"}},null===O||void 0===O?void 0:O.field_name),t.createElement("div",{style:{height:"20px",width:"100%",backgroundColor:null===O||void 0===O||null===(We=O.options)||void 0===We?void 0:We.maxC,display:"flex",flexDirection:"column"}},t.createElement("input",{value:e||0,className:ce.fieldTypeInput,name:O.field_name,disabled:!0,style:{color:"transparent",height:"20px",width:"".concat(+e/+O.options.max*100,"%"),backgroundColor:null===O||void 0===O||null===(Be=O.options)||void 0===Be?void 0:Be.barC}}))):e||""}if("Record"===(null===O||void 0===O?void 0:O.data_type_name)&&(null===O||void 0===O||null===(u=O.options)||void 0===u||null===(c=u.component_id)||void 0===c?void 0:c.length)>0){var Ye,He,Ve,Ge,Ke,Qe,$e,el,il,tl,nl;const e=(null!==O&&void 0!==O&&null!==(Ye=O.options)&&void 0!==Ye&&Ye.global?Rl(null===O||void 0===O?void 0:O.data_type_name):ae).filter(e=>{var l;return e.component_fields.filter(e=>{var l;return e.component_blueprint_id===(null===O||void 0===O||null===(l=O.options)||void 0===l?void 0:l.component_id)}).length>0||e.module_id===(null===O||void 0===O||null===(l=O.options)||void 0===l?void 0:l.module_id)}).map(e=>{var l,o,i,t;let n="";return null===O||void 0===O||null===(l=O.options)||void 0===l||null===(o=l.names)||void 0===o||o.map(l=>{var o,i;return n=""===n?null===(o=e.component_fields.find(e=>e.field_name===l))||void 0===o?void 0:o.value:"".concat(n," ").concat(null===(i=e.component_fields.find(e=>e.field_name===l))||void 0===i?void 0:i.value)}),{label:""===n?e.title:n,value:e.id,component:e,[null===O||void 0===O||null===(i=O.options)||void 0===i?void 0:i.output]:null===(t=e.component_fields.find(e=>{var l;return e.field_name===(null===O||void 0===O||null===(l=O.options)||void 0===l?void 0:l.output)}))||void 0===t?void 0:t.value}});let l;if(e.length>0)if(O.value){if(l=null===e||void 0===e?void 0:e.find(e=>{var l;return e[null===O||void 0===O||null===(l=O.options)||void 0===l?void 0:l.output]===O.value}),l){var dl,al;zl(l.value);const e=[...null!==(dl=null===(al=L.currentStep)||void 0===al?void 0:al.component_blueprints)&&void 0!==dl?dl:[]];e&&(L.newStepComponents=e)}}else if(1==e.length&&1==(null===O||void 0===O?void 0:O.mandatory)&&(l=e[0],l)){var rl,sl;zl(l.value);const e=[...null!==(rl=null===(sl=L.currentStep)||void 0===sl?void 0:sl.component_blueprints)&&void 0!==rl?rl:[]];e&&(L.newStepComponents=e)}return Y?t.createElement("div",{style:{width:"inherit",border:"1px solid gray",minWidth:"300px"}},t.createElement(A.Z,{key:U,visible:null===O||void 0===O?void 0:O.visible,mandatory:null===O||void 0===O?void 0:O.mandatory,items:e,loading:qe,error:"",className:ce.dropdownClassContainer,onChange:l=>{var o,i,t,n,d,a;l&&(null===O||void 0===O||null===(d=O.options)||void 0===d||null===(a=d.list)||void 0===a||a.map(o=>{const i=Ll({field_name:o});var t,n;-1!=i&&(S.selected_fields[i].value=null!==(t=null===(n=e.find(e=>e.value===l).component.component_fields.find(e=>e.field_name===o))||void 0===n?void 0:n.value)&&void 0!==t?t:"",S.selected_fields[i].disabled=!0)}));$.start=!0,zl(l),W?q(null!==(o=null===e||void 0===e?void 0:e.find(e=>e.value===l)[null===O||void 0===O||null===(i=O.options)||void 0===i?void 0:i.output])&&void 0!==o?o:null,U):P(null!==(t=null===e||void 0===e?void 0:e.find(e=>e.value===l)[null===O||void 0===O||null===(n=O.options)||void 0===n?void 0:n.output])&&void 0!==t?t:null,U)},selectionType:(null===O||void 0===O||null===(He=O.options)||void 0===He?void 0:He.selection.length)>0?null===O||void 0===O||null===(Ve=O.options)||void 0===Ve?void 0:Ve.selection:null===O||void 0===O||null===(Ge=O.options)||void 0===Ge?void 0:Ge.type,backgroundColor:null!==O&&void 0!==O&&null!==(Ke=O.options)&&void 0!==Ke&&Ke.valueC&&null!==O&&void 0!==O&&O.value?null===O||void 0===O||null===(Qe=O.options)||void 0===Qe?void 0:Qe.valueC:"",value:null!==($e=null===(el=l)||void 0===el?void 0:el.label)&&void 0!==$e?$e:""})):t.createElement("div",{style:{backgroundColor:null!==O&&void 0!==O&&null!==(il=O.options)&&void 0!==il&&il.valueC?null===O||void 0===O||null===(tl=O.options)||void 0===tl?void 0:tl.valueC:""}},null===(nl=l)||void 0===nl?void 0:nl.label)}if("People"===(null===O||void 0===O?void 0:O.data_type_name)&&(null===O||void 0===O||null===(p=O.options)||void 0===p||null===(m=p.position_id)||void 0===m?void 0:m.length)>0){var vl,ul,cl,pl,ml,fl;const e=Me.find(e=>e.label===(null===O||void 0===O?void 0:O.value));return t.createElement("div",{style:{display:"flex",justifyContent:"center"}},Y&&t.createElement("div",{style:{width:"300px",border:"1px solid var(--app-color-gray-light)",height:"38px"}},t.createElement(A.Z,{onFocus:()=>{var e;return 0==Me.length&&Pl(null===O||void 0===O||null===(e=O.options)||void 0===e?void 0:e.position_id)},visible:!0,mandatory:null===O||void 0===O?void 0:O.mandatory,className:ce.dropdownClassContainer,items:Me.filter(e=>{var l,o;return(null===e||void 0===e||null===(l=e.user)||void 0===l||null===(o=l.positions)||void 0===o?void 0:o.filter(e=>{var l,o;return null===O||void 0===O||null===(l=O.options)||void 0===l||null===(o=l.position_id)||void 0===o?void 0:o.includes(null===e||void 0===e?void 0:e.id)}).length)>0}),value:"single"===(null===O||void 0===O||null===(vl=O.options)||void 0===vl?void 0:vl.type)?null===(ul=Me.find(e=>{var l,o;return e.label===(null!==O&&void 0!==O&&null!==(l=O.options)&&void 0!==l&&l.mapToItem?null===O||void 0===O?void 0:O.value:null===(o=S.selected_fields[U])||void 0===o?void 0:o.value)}))||void 0===ul?void 0:ul.label:null!==O&&void 0!==O&&null!==(cl=O.options)&&void 0!==cl&&cl.mapToItem?null===O||void 0===O?void 0:O.value:null===(pl=S.selected_fields[U])||void 0===pl?void 0:pl.value,loading:qe,error:null===O||void 0===O?void 0:O.errors,onChange:e=>{var l;if("single"===(null===O||void 0===O||null===(l=O.options)||void 0===l?void 0:l.type)){const l=Me.find(l=>l.value===e);W?q(null===l||void 0===l?void 0:l.label,U):P(null===l||void 0===l?void 0:l.label,U)}else W?q(e,U):P(e,U)},selectionType:null===O||void 0===O||null===(ml=O.options)||void 0===ml?void 0:ml.type,fieldIcon:null===O||void 0===O?void 0:O.icon})),e&&t.createElement("div",{className:ce.avatarContentContainer},t.createElement("img",{alt:"lg",src:null===e||void 0===e||null===(fl=e.user)||void 0===fl?void 0:fl.photo,className:ce.avatarUrlImg})))}return"file"===O.data_type?t.createElement(Xe,{field_id:O.id,value:null===O||void 0===O?void 0:O.value,isInherited:R,checkIfAreMandatoryErrored:F,options:null===O||void 0===O?void 0:O.options,index:U,indexInContextArray:D}):"date"===O.data_type||null!==O&&void 0!==O&&null!==(_=O.options)&&void 0!==_&&_.country_code||null!==O&&void 0!==O&&null!==(y=O.options)&&void 0!==y&&y.currency_type||"Number"===O.data_type_name?Y||"bar"===(null===O||void 0===O||null===(ie=O.options)||void 0===ie?void 0:ie.display)?t.createElement("div",{className:ce.fieldTypeInput,style:{paddingLeft:Y?"":"0px",border:Y?"1px solid var(--app-color-gray-light)":"none",height:"auto"}},"date"===O.data_type?"Range"===(null===O||void 0===O||null===(te=O.options)||void 0===te?void 0:te.type)?t.createElement(f.$m,{inputContainerClassName:ce.inputContainerClassName,dateChangeHandler:e=>Tl(e,U),startDate:ll,endDate:ol}):null!==O&&void 0!==O&&null!==(ne=O.options)&&void 0!==ne&&ne.time?t.createElement("div",{style:{width:"100%",height:"auto",border:"0"}},t.createElement(fe(),{selected:null!==O&&void 0!==O&&O.value?new Date(null===O||void 0===O?void 0:O.value):new Date,showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:15,customInput:t.createElement("div",{style:{cursor:"pointer",display:"flex",justifyContent:"center",width:"100%",alignItems:"stretch",padding:"5px 0",border:"0px solid var(--app-color-gray-lighter)"}},t.createElement("input",{value:O.value?b()(O.value).format("DD MMMM YYYY HH:mm"):"",className:ce.inputValue,type:"text",style:{flex:1,marginTop:"auto",marginBottom:"auto",outline:"none",fontFamily:"var(--app-text-main-font)",fontSize:"14px",fontWeight:"bold",lineHeight:"20px",color:"#4A4A4A",textAlign:"left",maxWidth:"98%",border:"0px"},onChange:e=>{}}),t.createElement(C.G,{icon:E.WRo,style:{margin:"0 10px",width:"14px",height:"14px"}})),className:ce.singleInputContainer,onChange:e=>{q(e,U)}})):t.createElement(f.X9,{value:null!==O&&void 0!==O&&O.value?b()(new Date(null===O||void 0===O?void 0:O.value)).format("Do MMMM YYYY"):"",dateChangeHandler:e=>{W?q(e,U):Dl(e,U)},selected:new Date(b()(je,"YYYY-MM-DD")),iconClassName:ce.calendar,inputContainerClassName:ce.singleInputContainer,inputStyle:{textAlign:"left",border:"none",fontSize:"16px",margin:"0px 0 0px"},hasCalendarIcon:!0}):Y&&t.createElement("input",{type:O.data_type,onBlur:e=>{W?q(e.target.value,U):N(e.target.value,U)},id:O.field_name,autoComplete:"none",defaultValue:null===O||void 0===O?void 0:O.value,className:ce.fieldTypeInput,name:O.field_name,style:{height:"33px",backgroundColor:null!==O&&void 0!==O&&null!==(de=O.options)&&void 0!==de&&de.valueC?null===O||void 0===O||null===(re=O.options)||void 0===re?void 0:re.valueC:"",minWidth:W?"100px":"",border:"0px"},disabled:null!==(se=null===O||void 0===O?void 0:O.disabled)&&void 0!==se&&se}),"bar"===(null===O||void 0===O||null===(ve=O.options)||void 0===ve?void 0:ve.display)&&"Number"===(null===O||void 0===O?void 0:O.data_type_name)&&t.createElement("div",{style:{height:Y?"5px":"20px",border:"none",width:"100%",backgroundColor:null===O||void 0===O||null===(ue=O.options)||void 0===ue?void 0:ue.maxC,display:"flex",flexDirection:"row"}},t.createElement("input",{value:"",className:ce.fieldTypeInput,name:O.field_name,style:{color:"transparent",border:"0px",height:Y?"5px":"20px",width:"".concat(+(null===O||void 0===O?void 0:O.value)/+O.options.max*100,"%"),backgroundColor:null!==O&&void 0!==O&&O.value?"0"===(null===O||void 0===O?void 0:O.value)?"transparent":null===O||void 0===O||null===(pe=O.options)||void 0===pe?void 0:pe.barC:"transparent"},disabled:!0}))):t.createElement("div",{style:{backgroundColor:null!==O&&void 0!==O&&null!==(me=O.options)&&void 0!==me&&me.valueC?null===O||void 0===O||null===(_e=O.options)||void 0===_e?void 0:_e.valueC:"",minWidth:W?"200px":""}},"date"===(null===O||void 0===O?void 0:O.data_type)?null!==O&&void 0!==O&&O.value?b()(null===O||void 0===O?void 0:O.value).format(null!==O&&void 0!==O&&null!==(ye=O.options)&&void 0!==ye&&ye.time?"DD MMMM YYYY HH:mm":"DD MMMM YYYY"):"":null===O||void 0===O?void 0:O.value):"Long Text"===O.data_type_name?Y?t.createElement("textarea",{className:ce.fieldTypeTextarea,style:{minWidth:W?"300px":"",border:"0px solid var(--app-color-gray-light)"},type:O.data_type,defaultValue:null!==O&&void 0!==O&&null!==(he=O.options)&&void 0!==he&&he.mapToItem?null===O||void 0===O?void 0:O.value:null!==(ge=S.selected_fields[U])&&void 0!==ge&&ge.value?null===(be=S.selected_fields[U])||void 0===be?void 0:be.value:""===Je(null===O||void 0===O?void 0:O.options)?"":Je(null===O||void 0===O?void 0:O.options),onFocus:()=>{},disabled:null!==(xe=null===(Ee=S.selected_fields[U])||void 0===Ee?void 0:Ee.disabled)&&void 0!==xe&&xe,autoComplete:"none",onBlur:e=>{W?q(e.target.value,U):N(e.target.value,U)},name:O.field_name}):t.createElement("div",{style:{backgroundColor:null!==O&&void 0!==O&&null!==(Ce=O.options)&&void 0!==Ce&&Ce.valueC?null===O||void 0===O||null===(we=O.options)||void 0===we?void 0:we.valueC:"",minWidth:W?"300px":""}},null===O||void 0===O?void 0:O.value):"Link"===O.data_type_name?Y?t.createElement("div",{style:{width:"inherit",display:"flex",flexDirection:"column"}},t.createElement("input",{type:O.data_type,onBlur:e=>{W?q(e.target.value,U):N(e.target.value,U)},autoComplete:"none",defaultValue:null!==O&&void 0!==O&&null!==(Se=O.options)&&void 0!==Se&&Se.mapToItem?null===O||void 0===O?void 0:O.value:null!==(ke=S.selected_fields[U])&&void 0!==ke&&ke.value?null===(Ze=S.selected_fields[U])||void 0===Ze?void 0:Ze.value:""===Je(null===O||void 0===O?void 0:O.options)?"":Je(null===O||void 0===O?void 0:O.options),className:ce.fieldTypeInput,style:{border:"0px solid var(--app-color-gray-light)"},name:O.field_name,disabled:null!==(Ie=null===(Ne=S.selected_fields[U])||void 0===Ne?void 0:Ne.disabled)&&void 0!==Ie&&Ie})):((null===O||void 0===O||null===(Te=O.value)||void 0===Te?void 0:Te.includes("jpg"))||(null===O||void 0===O||null===(De=O.value)||void 0===De?void 0:De.includes("jpeg"))||(null===O||void 0===O||null===(Pe=O.options)||void 0===Pe?void 0:Pe.image)||(null===O||void 0===O||null===(Ae=O.value)||void 0===Ae?void 0:Ae.includes("png")))&&t.createElement("img",{className:ce.avatarUrlImg,alt:"lg",onError:e=>e.target.src="https://i.quotev.com/b2gtjqawaaaa.jpg",src:null===O||void 0===O?void 0:O.value}):Y?t.createElement("input",{type:O.data_type,onBlur:e=>{W?q(e.target.value,U):N(e.target.value,U)},autoComplete:"none",defaultValue:null!==O&&void 0!==O&&null!==(h=O.options)&&void 0!==h&&h.mapToItem?null===O||void 0===O?void 0:O.value:null!==(g=S.selected_fields[U])&&void 0!==g&&g.value?null===(x=S.selected_fields[U])||void 0===x?void 0:x.value:""===Je(null===O||void 0===O?void 0:O.options)?"":Je(null===O||void 0===O?void 0:O.options),className:ce.fieldTypeInput,style:{minWidth:W?"300px":"",border:"0px solid var(--app-color-gray-light)",backgroundColor:null!==O&&void 0!==O&&null!==(w=O.options)&&void 0!==w&&w.valueC?null===O||void 0===O||null===(M=O.options)||void 0===M?void 0:M.valueC:""},name:O.field_name,disabled:null!==(k=null===(Z=S.selected_fields[U])||void 0===Z?void 0:Z.disabled)&&void 0!==k&&k}):t.createElement("div",{style:{backgroundColor:null!==O&&void 0!==O&&null!==(I=O.options)&&void 0!==I&&I.valueC?null===O||void 0===O||null===(T=O.options)||void 0===T?void 0:T.valueC:"",minWidth:W?"200px":""}},null===O||void 0===O?void 0:O.value)},Fl=(null===S||void 0===S||null===(l=S.selected_fields)||void 0===l?void 0:l.length)>0&&(null===S||void 0===S||null===(o=S.selected_fields)||void 0===o?void 0:o.sort((e,l)=>e.index-l.index).map((e,l)=>{var o,n,d,h,x,ye,Qe,$e,Il,Fl,Wl,ql,Bl,Yl,Hl,Vl,jl,Gl,Jl,Kl,Ql,Xl,$l,eo,lo,oo,io,to,no,ao,ro,so,vo,uo,co,po,mo,fo,_o,yo,ho,go,bo,xo,Eo,Co,wo,Mo,So,ko,Zo,Io,No,To,Do,Po,Ao,Oo,Lo,zo,Ro,Uo,Fo;let Wo="";if((null===e||void 0===e||null===(o=e.options)||void 0===o||null===(n=o.fieldToMatch)||void 0===n?void 0:n.length)>0){var qo,Bo,Yo,Ho,Vo,jo,Go,Jo;const l=S.selected_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.fieldToMatch)});var Ko,Qo,Xo,$o,ei,li,oi,ii,ti,ni,di,ai,ri,si,vi,ui;if(l&&(null===e||void 0===e||null===(qo=e.options)||void 0===qo||null===(Bo=qo.valueToMatch)||void 0===Bo?void 0:Bo.length)>0&&(null===e||void 0===e||null===(Yo=e.options)||void 0===Yo||null===(Ho=Yo.actionToPerform)||void 0===Ho?void 0:Ho.length)>0&&(null===e||void 0===e||null===(Vo=e.options)||void 0===Vo||null===(jo=Vo.initialState)||void 0===jo?void 0:jo.length)>0)if(null!==e&&void 0!==e&&null!==(Ko=e.options)&&void 0!==Ko&&null!==(Qo=Ko.valueToMatch)&&void 0!==Qo&&Qo.split(",").includes(null===l||void 0===l?void 0:l.value))"hide"===(null===e||void 0===e||null===(Xo=e.options)||void 0===Xo?void 0:Xo.actionToPerform)?e.visible=!1:"visible"===(null===e||void 0===e||null===($o=e.options)||void 0===$o?void 0:$o.actionToPerform)?e.visible=!0:"mandatory"===(null===e||void 0===e||null===(ei=e.options)||void 0===ei?void 0:ei.actionToPerform)?(e.mandatory=!0,e.visible=!0):"optional"===(null===e||void 0===e||null===(li=e.options)||void 0===li?void 0:li.actionToPerform)?(e.mandatory=!1,e.visible=!0):"visman"===(null===e||void 0===e||null===(oi=e.options)||void 0===oi?void 0:oi.actionToPerform)?(e.mandatory=!0,e.visible=!0):"disable"===(null===e||void 0===e||null===(ii=e.options)||void 0===ii?void 0:ii.actionToPerform)&&(Wo="none");else"hidden"===(null===e||void 0===e||null===(ti=e.options)||void 0===ti?void 0:ti.initialState)?e.visible=!1:"visible"===(null===e||void 0===e||null===(ni=e.options)||void 0===ni?void 0:ni.initialState)?e.visible=!0:"mandatory"===(null===e||void 0===e||null===(di=e.options)||void 0===di?void 0:di.initialState)?(e.mandatory=!0,e.visible=!0):"optional"===(null===e||void 0===e||null===(ai=e.options)||void 0===ai?void 0:ai.initialState)?(e.mandatory=!1,e.visible=!0):"visman"===(null===e||void 0===e||null===(ri=e.options)||void 0===ri?void 0:ri.actionToPerform)?(e.mandatory=!0,e.visible=!0):"disable"===(null===e||void 0===e||null===(si=e.options)||void 0===si?void 0:si.actionToPerform)&&(Wo="none");if(l&&(null===e||void 0===e||null===(Go=e.options)||void 0===Go||null===(Jo=Go.valueToMatch2)||void 0===Jo?void 0:Jo.length)>0)if(null!==e&&void 0!==e&&null!==(vi=e.options)&&void 0!==vi&&null!==(ui=vi.valueToMatch2)&&void 0!==ui&&ui.split(",").includes(null===l||void 0===l?void 0:l.value)){var ci,pi,mi,fi,_i,yi,hi,gi,bi,xi,Ei,Ci;if((null===e||void 0===e||null===(ci=e.options)||void 0===ci||null===(pi=ci.value)||void 0===pi?void 0:pi.length)>0)if("Text"===(null===e||void 0===e?void 0:e.data_type_name))e.value=null===e||void 0===e||null===(_i=e.options)||void 0===_i?void 0:_i.value;else if("Date"===(null===e||void 0===e?void 0:e.data_type_name)){var wi,Mi,Si,ki,Zi,Ii;if(0==(null===e||void 0===e||null===(wi=e.value)||void 0===wi?void 0:wi.length)||void 0==(null===e||void 0===e?void 0:e.value))"today"===(null===e||void 0===e||null===(Mi=e.options)||void 0===Mi?void 0:Mi.value)?e.value=new Date(b()((0,g.now)())):"tomorrow"===(null===e||void 0===e||null===(Si=e.options)||void 0===Si?void 0:Si.value)?e.value=new Date(b()((0,g.now)()).add(1,"days")):"week"===(null===e||void 0===e||null===(ki=e.options)||void 0===ki?void 0:ki.value)?e.value=new Date(b()((0,g.now)()).add(1,"weeks")):"month"===(null===e||void 0===e||null===(Zi=e.options)||void 0===Zi?void 0:Zi.value)&&(e.value=new Date(b()((0,g.now)()).add(1,"months"))),"none"===(null===e||void 0===e||null===(Ii=e.options)||void 0===Ii?void 0:Ii.value)&&(e.value=void 0)}if((null===e||void 0===e||null===(mi=e.options)||void 0===mi||null===(fi=mi.actionToPerform2)||void 0===fi?void 0:fi.length)>0)"hide"===(null===e||void 0===e||null===(yi=e.options)||void 0===yi?void 0:yi.actionToPerform2)?e.visible=!1:"visible"===(null===e||void 0===e||null===(hi=e.options)||void 0===hi?void 0:hi.actionToPerform2)?e.visible=!0:"mandatory"===(null===e||void 0===e||null===(gi=e.options)||void 0===gi?void 0:gi.actionToPerform2)?(e.mandatory=!0,e.visible=!0):"optional"===(null===e||void 0===e||null===(bi=e.options)||void 0===bi?void 0:bi.actionToPerform2)?(e.mandatory=!1,e.visible=!0):"visman"===(null===e||void 0===e||null===(xi=e.options)||void 0===xi?void 0:xi.actionToPerform2)?(e.mandatory=!0,e.visible=!0):"disable"===(null===e||void 0===e||null===(Ei=e.options)||void 0===Ei?void 0:Ei.actionToPerform2)?Wo="none":"enable"===(null===e||void 0===e||null===(Ci=e.options)||void 0===Ci?void 0:Ci.actionToPerform2)&&(Wo="")}}if("Record"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(d=e.options)||void 0===d||null===(h=d.component_id)||void 0===h?void 0:h.length)>0){var Ni,Ti,Di,Pi,Ai,Oi,Li,zi,Ri,Ui,Fi,Wi,qi,Bi,Yi,Hi,Vi,ji,Gi,Ji,Ki,Qi,Xi,$i,et,lt,ot,it,tt,nt,dt,at,rt,st,vt,ut,ct,pt,mt,ft,_t;const o=(null!==e&&void 0!==e&&null!==(Ni=e.options)&&void 0!==Ni&&Ni.global?Rl(null===e||void 0===e?void 0:e.data_type_name):ae).filter(l=>{var o;return l.component_fields.filter(l=>{var o;return l.component_blueprint_id===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.component_id)}).length>0||l.module_id===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.module_id)}),n=o.map(l=>{var o,i,t,n;let d="";return null===e||void 0===e||null===(o=e.options)||void 0===o||null===(i=o.names)||void 0===i||i.map(e=>{var o,i;return d=""===d?null===(o=l.component_fields.find(l=>l.field_name===e))||void 0===o?void 0:o.value:"".concat(d," ").concat(null===(i=l.component_fields.find(l=>l.field_name===e))||void 0===i?void 0:i.value)}),{label:""===d?l.title:d,value:l.id,component:l,[null===e||void 0===e||null===(t=e.options)||void 0===t?void 0:t.output]:null===(n=l.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.output)}))||void 0===n?void 0:n.value}});let d;if((null===e||void 0===e||null===(Ti=e.options)||void 0===Ti||null===(Di=Ti.filters)||void 0===Di?void 0:Di.length)>0){if((null===o||void 0===o?void 0:o.length)>0)if(e.value){if(d=o.find(l=>l.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.output)&&l.value===e.value})),d){var yt,ht,gt;zl(null===(yt=d)||void 0===yt?void 0:yt.id);const e=[...null!==(ht=null===(gt=L.currentStep)||void 0===gt?void 0:gt.component_blueprints)&&void 0!==ht?ht:[]];e&&(L.newStepComponents=e)}}else if(1==n.length&&(d=o[0],d)){var bt,xt,Et;zl(null===(bt=d)||void 0===bt?void 0:bt.id);const e=[...null!==(xt=null===(Et=L.currentStep)||void 0===Et?void 0:Et.component_blueprints)&&void 0!==xt?xt:[]];e&&(L.newStepComponents=e)}if(1==n.length||e.value){var Ct,wt,Mt,St;if((null===e||void 0===e||null===(Ct=e.options)||void 0===Ct?void 0:Ct.filters.length)>0)dl[null===e||void 0===e||null===(Mt=e.options)||void 0===Mt?void 0:Mt.filters[0]]=j.Z(G.Z("value"))(o.map(l=>{const o=null===l||void 0===l?void 0:l.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[1])});return{label:null===o||void 0===o?void 0:o.value,value:null===o||void 0===o?void 0:o.value,component:l}}).filter(l=>{var o;return(null===(o=l.component)||void 0===o?void 0:o.component_fields.filter(l=>{var o,i;return l.value===(null===(o=d)||void 0===o||null===(i=o.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[0])}))||void 0===i?void 0:i.value)}).length)>0}));if((null===e||void 0===e||null===(wt=e.options)||void 0===wt?void 0:wt.filters.length)>1)dl[null===e||void 0===e||null===(St=e.options)||void 0===St?void 0:St.filters[1]]=j.Z(G.Z("value"))(o.map(l=>{const o=l.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[2])});return{label:null===o||void 0===o?void 0:o.value,value:null===o||void 0===o?void 0:o.value,component:l}}).filter(l=>{var o;return(null===(o=l.component)||void 0===o?void 0:o.component_fields.filter(l=>{var o,i;return l.value===(null===(o=d)||void 0===o||null===(i=o.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[1])}))||void 0===i?void 0:i.value)}).length)>0}))}}else if(n.length>0)if(e.value){if(d=null===n||void 0===n?void 0:n.find(l=>{var o;return l[null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.output]===e.value}),d){var kt,Zt;zl(d.value);const e=[...null!==(kt=null===(Zt=L.currentStep)||void 0===Zt?void 0:Zt.component_blueprints)&&void 0!==kt?kt:[]];e&&(L.newStepComponents=e)}}else if(1==n.length&&1==(null===e||void 0===e?void 0:e.mandatory)&&(d=n[0],d)){var It,Nt;zl(d.value);const e=[...null!==(It=null===(Nt=L.currentStep)||void 0===Nt?void 0:Nt.component_blueprints)&&void 0!==It?It:[]];e&&(L.newStepComponents=e)}return!d&&null!==e&&void 0!==e&&e.value?t.createElement("div",{key:l},"A record ( ".concat(null===e||void 0===e?void 0:e.value," ) was previously selected but not found. Press the refresh button on the upper right side to retrieve the missing record. If record is still not found, please check with your admin.")):(null===e||void 0===e||null===(Pi=e.options)||void 0===Pi||null===(Ai=Pi.filters)||void 0===Ai?void 0:Ai.length)>0?t.createElement("div",{key:l,style:{width:"100%",display:null!==e&&void 0!==e&&e.visible?"":"none",pointerEvents:Wo,border:"1px dashed gray",fontSize:"16px",color:"var(--app-color-gray-dark)",padding:"20px",marginBottom:"10px",backgroundColor:"var(--app-color-gray-lightest)"}},null===ue||void 0===ue||null===(Oi=ue.find(l=>{var o;return l.id===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.component_id)}))||void 0===Oi?void 0:Oi.name,t.createElement("br",null),t.createElement("br",null),(null===e||void 0===e||null===(Li=e.options)||void 0===Li||null===(zi=Li.filters)||void 0===zi?void 0:zi.length)>0&&t.createElement(A.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-dark)"},className:ce.multiselectComponent,visible:null===e||void 0===e?void 0:e.visible,mandatory:1==(null===e||void 0===e||null===(Ri=e.options)||void 0===Ri||null===(Ui=Ri.filters)||void 0===Ui?void 0:Ui.length)&&(null===e||void 0===e?void 0:e.mandatory),items:j.Z(G.Z("value"))(o.map(l=>{const o=l.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[0])});return{label:null===o||void 0===o?void 0:o.value,value:null===o||void 0===o?void 0:o.value,component:l}})),loading:qe,error:1==(null===e||void 0===e||null===(Fi=e.options)||void 0===Fi||null===(Wi=Fi.filters)||void 0===Wi?void 0:Wi.length)?null===e||void 0===e?void 0:e.errors:"",onChange:i=>{var t,n,d,a,r;(null===e||void 0===e||null===(t=e.options)||void 0===t||null===(n=t.filters)||void 0===n?void 0:n.length)>1?(P(void 0,l),ul(!1),sl(!1),setTimeout(()=>{sl(!0),ul(!0)},10),al({[null===e||void 0===e||null===(d=e.options)||void 0===d?void 0:d.filters[0]]:j.Z(G.Z("value"))(o.map(l=>{const o=l.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[1])});return{label:null===o||void 0===o?void 0:o.value,value:null===o||void 0===o?void 0:o.value,component:l,selected:i}}).filter(l=>l.component.component_fields.filter(l=>{var o;return l.value===i&&l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[0])}).length>0))})):(fl("50px"),P(null!==(a=o.find(e=>e.value===i)[null===e||void 0===e||null===(r=e.options)||void 0===r?void 0:r.output])&&void 0!==a?a:null,l),zl(o.find(e=>e.value===i).component.id))},fieldLabel:null===e||void 0===e||null===(qi=e.options)||void 0===qi?void 0:qi.filters[0],value:d?null===(Bi=d.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[0])}))||void 0===Bi?void 0:Bi.value:""}),t.createElement("div",{style:{display:null!==e&&void 0!==e&&e.visible?"":"none",marginBottom:"10px"}},(null===e||void 0===e||null===(Yi=e.options)||void 0===Yi||null===(Hi=Yi.filters)||void 0===Hi?void 0:Hi.length)>1&&rl&&t.createElement(A.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-dark)"},className:ce.multiselectComponent,visible:null===e||void 0===e?void 0:e.visible,mandatory:2==(null===e||void 0===e||null===(Vi=e.options)||void 0===Vi||null===(ji=Vi.filters)||void 0===ji?void 0:ji.length)&&(null===e||void 0===e?void 0:e.mandatory),items:null!==(Gi=dl[null===e||void 0===e||null===(Ji=e.options)||void 0===Ji?void 0:Ji.filters[0]])&&void 0!==Gi?Gi:[],loading:qe,onClicked:e=>fl(e?"180px":"50px"),onChange:t=>{var n,d,a,r,s,v,u,c,p;(null===e||void 0===e||null===(n=e.options)||void 0===n||null===(d=n.filters)||void 0===d?void 0:d.length)>2?(ul(!1),setTimeout(()=>ul(!0),10),al((0,i.Z)((0,i.Z)({},dl),{},{[null===e||void 0===e||null===(a=e.options)||void 0===a?void 0:a.filters[1]]:null!==(r=j.Z(G.Z("value"))(o.map(l=>{const o=l.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[2])});return{label:null===o||void 0===o?void 0:o.value,value:null===o||void 0===o?void 0:o.value,component:l}}).filter(l=>l.component.component_fields.filter(l=>{var o;return l.value===t&&l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[1])}).length>0).filter(l=>l.component.component_fields.filter(l=>{var o,i;return l.value===dl[null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[0]][0].component.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[0])}).value&&l.field_name===(null===e||void 0===e||null===(i=e.options)||void 0===i?void 0:i.filters[0])}).length>0)))&&void 0!==r?r:[]}))):(fl("50px"),$.start=!0,P(null!==(s=null===(v=dl[null===e||void 0===e||null===(c=e.options)||void 0===c?void 0:c.filters[0]])||void 0===v||null===(u=v.find(e=>e.value===t))||void 0===u?void 0:u.component.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.output)}).value)&&void 0!==s?s:null,l),zl(dl[null===e||void 0===e||null===(p=e.options)||void 0===p?void 0:p.filters[0]].find(e=>e.value===t).component.id),ul(!1),sl(!1),setTimeout(()=>{sl(!0),ul(!0)},10))},fieldLabel:null===e||void 0===e||null===(Ki=e.options)||void 0===Ki?void 0:Ki.filters[1],value:d?null===(Qi=d.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[1])}))||void 0===Qi?void 0:Qi.value:""})),t.createElement("div",{style:{display:null!==e&&void 0!==e&&e.visible?"":"none",marginBottom:"10px"}},(null===e||void 0===e||null===(Xi=e.options)||void 0===Xi||null===($i=Xi.filters)||void 0===$i?void 0:$i.length)>2&&vl&&t.createElement(A.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-dark)"},className:ce.multiselectComponent,visible:null===e||void 0===e?void 0:e.visible,mandatory:3==(null===e||void 0===e||null===(et=e.options)||void 0===et||null===(lt=et.filters)||void 0===lt?void 0:lt.length)&&(null===e||void 0===e?void 0:e.mandatory),items:null!==(ot=dl[null===e||void 0===e||null===(it=e.options)||void 0===it?void 0:it.filters[1]])&&void 0!==ot?ot:[],loading:qe,onClicked:e=>fl(e?"180px":"50px"),onChange:o=>{var i,t,n,d,a;fl("50px"),$.start=!0,P(null!==(i=null===(t=dl[null===e||void 0===e||null===(d=e.options)||void 0===d?void 0:d.filters[1]])||void 0===t||null===(n=t.find(e=>e.value===o))||void 0===n?void 0:n.component.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.output)}).value)&&void 0!==i?i:null,l),zl(dl[null===e||void 0===e||null===(a=e.options)||void 0===a?void 0:a.filters[1]].find(e=>e.value===o).component.id)},fieldLabel:null===e||void 0===e||null===(tt=e.options)||void 0===tt?void 0:tt.filters[2],value:d?null===(nt=d.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[2])}))||void 0===nt?void 0:nt.value:""}))):"Tiles"===(null===e||void 0===e||null===(dt=e.options)||void 0===dt?void 0:dt.selection)?t.createElement(_e.Z,{enabled:Wo,width:"100%",style:{border:"0"},editMode:xe,showWidth:l=>{e.field_options=(0,i.Z)((0,i.Z)({},e.field_options),{},{width:"".concat(l,"px")})},key:l,fieldLabel:e.field_name,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:(null===(at=e.errors)||void 0===at?void 0:at.length)>0?"".concat(e.errors,". Try to select again"):"",notes:null===e||void 0===e||null===(rt=e.options)||void 0===rt?void 0:rt.notes},t.createElement("div",{style:{width:"100%"}},t.createElement(T.default,{rowStyleSelected:{border:"2px solid black"},initialSelected:n.map(l=>{var o;return l[null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.output]}).indexOf(null===e||void 0===e?void 0:e.value),modern:!0,isReport:!1,className:ce.listContainer,"app-variant-is-mobile":"true",columns:null===e||void 0===e||null===(st=e.options)||void 0===st?void 0:st.names,list:n.map(e=>{const l=e;return e.component.component_fields.filter(e=>{l[e.field_name]=e.value}),l}),onListItemClick:o=>{var i,t,d,a,r;o&&(null===e||void 0===e||null===(r=e.options)||void 0===r||r.list.map(e=>{const l=Ll({field_name:e});var i,t;-1!=l&&(S.selected_fields[l].value=null!==(i=null===(t=o.component.component_fields.find(l=>l.field_name===e))||void 0===t?void 0:t.value)&&void 0!==i?i:"",S.selected_fields[l].disabled=!0)}));Nl(),zl(o),P(null!==(i=null===n||void 0===n||null===(t=n.find(e=>e.value===o.value))||void 0===t||null===(d=t.component.component_fields)||void 0===d||null===(a=d.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.output)}))||void 0===a?void 0:a.value)&&void 0!==i?i:null,l)}}))):t.createElement(_e.Z,{titleProps:{fontSize:"14px",color:"var(--app-color-gray-dark)",fontWeight:"normal",paddingLeft:"5px"},enabled:Wo,width:"100%",style:{marginTop:"0px",border:"0px solid var(--app-color-gray-lighter)",padding:"5px",marginBottom:"10px",backgroundColor:"var(--app-color-gray-lightest)"},editMode:xe,showWidth:l=>{e.field_options=(0,i.Z)((0,i.Z)({},e.field_options),{},{width:"".concat(l,"px")})},key:l,fieldLabel:ue.find(l=>{var o;return l.id===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.component_id)}).name,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:(null===(vt=e.errors)||void 0===vt?void 0:vt.length)>0?"".concat(e.errors,". Try to select again"):"",notes:null===e||void 0===e||null===(ut=e.options)||void 0===ut?void 0:ut.notes},t.createElement("div",{style:{width:"inherit"}},t.createElement(A.Z,{key:l,visible:null===e||void 0===e?void 0:e.visible,mandatory:null===e||void 0===e?void 0:e.mandatory,items:n,loading:qe,error:"",className:ce.dropdownClassContainer,onClicked:e=>fl(e?"100px":"50px"),onChange:o=>{var i,t;$.start=!0,fl("50px"),zl(o),P(null!==(i=null===n||void 0===n?void 0:n.find(e=>e.value===o)[null===e||void 0===e||null===(t=e.options)||void 0===t?void 0:t.output])&&void 0!==i?i:null,l)},selectionType:(null===e||void 0===e||null===(ct=e.options)||void 0===ct?void 0:ct.selection.length)>0?null===e||void 0===e||null===(pt=e.options)||void 0===pt?void 0:pt.selection:null===e||void 0===e||null===(mt=e.options)||void 0===mt?void 0:mt.type,value:null!==(ft=null===(_t=d)||void 0===_t?void 0:_t.label)&&void 0!==ft?ft:""})))}if("Filters"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(x=e.options)||void 0===x||null===(ye=x.component_id)||void 0===ye?void 0:ye.length)>0){var Tt,Dt,Pt,At,Ot,Lt,zt,Rt,Ut,Ft,Wt,qt,Bt,Yt,Ht,Vt,jt,Gt,Jt,Kt,Qt,Xt,$t,en,ln,on,tn,nn,dn;const o=(null!==e&&void 0!==e&&null!==(Tt=e.options)&&void 0!==Tt&&Tt.global?Rl(null===e||void 0===e?void 0:e.data_type_name):ae).filter(l=>l.component_fields.filter(l=>{var o;return l.component_blueprint_id===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.component_id)}).length>0),n=o.map(l=>{var o,i;return{label:l.title,value:l.id,component:l,[null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.output]:null===(i=l.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.output)}))||void 0===i?void 0:i.value}});let d;if(o.length>0){if(e.value){if(d=o.find(l=>l.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.output)&&l.value===e.value})),d){var an,rn,sn;zl(null===(an=d)||void 0===an?void 0:an.id);const e=[...null!==(rn=null===(sn=L.currentStep)||void 0===sn?void 0:sn.component_blueprints)&&void 0!==rn?rn:[]];e&&(L.newStepComponents=e)}}else if(1==n.length&&1==(null===e||void 0===e?void 0:e.mandatory)&&(d=o[0],d)){var vn,un,cn;zl(null===(vn=d)||void 0===vn?void 0:vn.id);const e=[...null!==(un=null===(cn=L.currentStep)||void 0===cn?void 0:cn.component_blueprints)&&void 0!==un?un:[]];e&&(L.newStepComponents=e)}if(1==n.length||e.value){var pn,mn,fn,_n;if((null===e||void 0===e||null===(pn=e.options)||void 0===pn?void 0:pn.filters.length)>0)dl[null===e||void 0===e||null===(fn=e.options)||void 0===fn?void 0:fn.filters[0]]=j.Z(G.Z("value"))(o.map(l=>{const o=null===l||void 0===l?void 0:l.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[1])});return{label:null===o||void 0===o?void 0:o.value,value:null===o||void 0===o?void 0:o.value,component:l}}));if((null===e||void 0===e||null===(mn=e.options)||void 0===mn?void 0:mn.filters.length)>1)dl[null===e||void 0===e||null===(_n=e.options)||void 0===_n?void 0:_n.filters[1]]=j.Z(G.Z("value"))(o.map(l=>{const o=l.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[2])});return{label:null===o||void 0===o?void 0:o.value,value:null===o||void 0===o?void 0:o.value,component:l}}))}}return!d&&null!==e&&void 0!==e&&e.value?t.createElement("div",{key:l},"A record ( ".concat(null===e||void 0===e?void 0:e.value," ) was previously selected but not found. Press the refresh button on the upper right side to retrieve the missing record. If record is still not found, please check with your admin.")):t.createElement("div",{key:l,style:{width:"100%",display:null!==e&&void 0!==e&&e.visible?"":"none",pointerEvents:Wo,border:"1px dashed gray",fontSize:"16px",color:"var(--app-color-gray-dark)",marginBottom:"10px",padding:"20px",backgroundColor:"var(--app-color-gray-lightest)"}},ue.find(l=>{var o;return l.id===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.component_id)}).name,t.createElement("br",null),t.createElement("br",null),(null===e||void 0===e||null===(Dt=e.options)||void 0===Dt||null===(Pt=Dt.filters)||void 0===Pt?void 0:Pt.length)>0&&t.createElement(A.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-dark)"},className:ce.multiselectComponent,visible:null===e||void 0===e?void 0:e.visible,mandatory:1==(null===e||void 0===e||null===(At=e.options)||void 0===At||null===(Ot=At.filters)||void 0===Ot?void 0:Ot.length)&&(null===e||void 0===e?void 0:e.mandatory),items:j.Z(G.Z("value"))(o.map(l=>{const o=l.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[0])});return{label:null===o||void 0===o?void 0:o.value,value:null===o||void 0===o?void 0:o.value,component:l}})),loading:qe,error:1==(null===e||void 0===e||null===(Lt=e.options)||void 0===Lt||null===(zt=Lt.filters)||void 0===zt?void 0:zt.length)?null===e||void 0===e?void 0:e.errors:"",onChange:i=>{var t,n,d,a,r;(null===e||void 0===e||null===(t=e.options)||void 0===t||null===(n=t.filters)||void 0===n?void 0:n.length)>1?(P(void 0,l),ul(!1),sl(!1),setTimeout(()=>{sl(!0),ul(!0)},10),al({[null===e||void 0===e||null===(d=e.options)||void 0===d?void 0:d.filters[0]]:j.Z(G.Z("value"))(o.map(l=>{const o=l.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[1])});return{label:null===o||void 0===o?void 0:o.value,value:null===o||void 0===o?void 0:o.value,component:l,selected:i}}).filter(l=>l.component.component_fields.filter(l=>{var o;return l.value===i&&l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[0])}).length>0))})):(fl("50px"),P(null!==(a=o.find(e=>e.value===i)[null===e||void 0===e||null===(r=e.options)||void 0===r?void 0:r.output])&&void 0!==a?a:null,l),zl(o.find(e=>e.value===i).component.id))},fieldLabel:null===e||void 0===e||null===(Rt=e.options)||void 0===Rt?void 0:Rt.filters[0],value:d?null===(Ut=d.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[0])}))||void 0===Ut?void 0:Ut.value:""}),t.createElement("div",{style:{display:null!==e&&void 0!==e&&e.visible?"":"none",marginBottom:"10px"}},(null===e||void 0===e||null===(Ft=e.options)||void 0===Ft||null===(Wt=Ft.filters)||void 0===Wt?void 0:Wt.length)>1&&rl&&t.createElement(A.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-dark)"},className:ce.multiselectComponent,visible:null===e||void 0===e?void 0:e.visible,mandatory:2==(null===e||void 0===e||null===(qt=e.options)||void 0===qt||null===(Bt=qt.filters)||void 0===Bt?void 0:Bt.length)&&(null===e||void 0===e?void 0:e.mandatory),items:null!==(Yt=dl[null===e||void 0===e||null===(Ht=e.options)||void 0===Ht?void 0:Ht.filters[0]])&&void 0!==Yt?Yt:[],loading:qe,error:2==(null===e||void 0===e||null===(Vt=e.options)||void 0===Vt||null===(jt=Vt.filters)||void 0===jt?void 0:jt.length)?null===e||void 0===e?void 0:e.errors:"",onClicked:e=>fl(e?"180px":"50px"),onChange:t=>{var n,d,a,r,s,v,u,c,p;(null===e||void 0===e||null===(n=e.options)||void 0===n||null===(d=n.filters)||void 0===d?void 0:d.length)>2?(ul(!1),setTimeout(()=>ul(!0),10),al((0,i.Z)((0,i.Z)({},dl),{},{[null===e||void 0===e||null===(a=e.options)||void 0===a?void 0:a.filters[1]]:null!==(r=j.Z(G.Z("value"))(o.map(l=>{const o=l.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[2])});return{label:null===o||void 0===o?void 0:o.value,value:null===o||void 0===o?void 0:o.value,component:l}}).filter(l=>l.component.component_fields.filter(l=>{var o;return l.value===t&&l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[1])}).length>0).filter(l=>l.component.component_fields.filter(l=>{var o,i;return l.value===dl[null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[0]][0].component.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[0])}).value&&l.field_name===(null===e||void 0===e||null===(i=e.options)||void 0===i?void 0:i.filters[0])}).length>0)))&&void 0!==r?r:[]}))):(Nl(),fl("50px"),$.start=!0,P(null!==(s=null===(v=dl[null===e||void 0===e||null===(c=e.options)||void 0===c?void 0:c.filters[0]])||void 0===v||null===(u=v.find(e=>e.value===t))||void 0===u?void 0:u.component.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.output)}).value)&&void 0!==s?s:null,l),zl(dl[null===e||void 0===e||null===(p=e.options)||void 0===p?void 0:p.filters[0]].find(e=>e.value===t).component.id))},fieldLabel:null===e||void 0===e||null===(Gt=e.options)||void 0===Gt?void 0:Gt.filters[1],value:d?null===(Jt=d.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[1])}))||void 0===Jt?void 0:Jt.value:""})),t.createElement("div",{style:{display:null!==e&&void 0!==e&&e.visible?"":"none",marginBottom:"10px"}},(null===e||void 0===e||null===(Kt=e.options)||void 0===Kt||null===(Qt=Kt.filters)||void 0===Qt?void 0:Qt.length)>2&&vl&&t.createElement(A.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-dark)"},className:ce.multiselectComponent,visible:null===e||void 0===e?void 0:e.visible,mandatory:3==(null===e||void 0===e||null===(Xt=e.options)||void 0===Xt||null===($t=Xt.filters)||void 0===$t?void 0:$t.length)&&(null===e||void 0===e?void 0:e.mandatory),items:null!==(en=dl[null===e||void 0===e||null===(ln=e.options)||void 0===ln?void 0:ln.filters[1]])&&void 0!==en?en:[],loading:qe,error:3==(null===e||void 0===e||null===(on=e.options)||void 0===on||null===(tn=on.filters)||void 0===tn?void 0:tn.length)?null===e||void 0===e?void 0:e.errors:"",onClicked:e=>fl(e?"180px":"50px"),onChange:o=>{var i,t,n,d,a;fl("50px"),$.start=!0,P(null!==(i=null===(t=dl[null===e||void 0===e||null===(d=e.options)||void 0===d?void 0:d.filters[1]])||void 0===t||null===(n=t.find(e=>e.value===o))||void 0===n?void 0:n.component.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.output)}).value)&&void 0!==i?i:null,l),zl(dl[null===e||void 0===e||null===(a=e.options)||void 0===a?void 0:a.filters[1]].find(e=>e.value===o).component.id)},fieldLabel:null===e||void 0===e||null===(nn=e.options)||void 0===nn?void 0:nn.filters[2],value:d?null===(dn=d.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[2])}))||void 0===dn?void 0:dn.value:""})))}if("Global"===(null===e||void 0===e?void 0:e.data_type_name)||"Connector"===(null===e||void 0===e?void 0:e.data_type_name)||"Emails"===(null===e||void 0===e?void 0:e.data_type_name)||"Template"===(null===e||void 0===e?void 0:e.data_type_name));else if("Action Button"!==(null===e||void 0===e?void 0:e.data_type_name)){var yn,hn,gn,bn,xn,En,Cn,wn,Mn,Sn,kn,Zn,In,Nn,Tn,Dn;if("GoogleAI Assistant"===(null===e||void 0===e?void 0:e.data_type_name))return t.createElement("div",{key:l,style:{display:e.visible?"":"none",color:"var(--app-color-gray-dark)",height:"inherit",width:"100%",flexDirection:"column",marginTop:"50px"}},t.createElement(_e.Z,{enabled:Wo,width:null!==(yn=null===e||void 0===e||null===(hn=e.field_options)||void 0===hn?void 0:hn.width)&&void 0!==yn?yn:"100%",editMode:xe,showWidth:l=>{e.field_options=(0,i.Z)((0,i.Z)({},e.field_options),{},{width:"".concat(l,"px")})},key:l,fieldLabel:"".concat(null===e||void 0===e||null===(gn=e.options)||void 0===gn?void 0:gn.description),fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors,notes:null===e||void 0===e||null===(bn=e.options)||void 0===bn?void 0:bn.notes},t.createElement("textarea",{className:ce.fullLengthTextarea,type:e.data_type,onFocus:()=>{},disabled:e.options.fixed,autoComplete:"none",onChange:e=>{N(e.target.value,l)},placeholder:"Enter your question here",value:1==e.options.fixed?null===e||void 0===e||null===(xn=e.options)||void 0===xn?void 0:xn.analyze:e.value})),t.createElement("div",{style:{display:"flex"}},t.createElement(f.zx,{light:!0,loading:qe,title:"Ask",clicked:()=>{0==e.options.fixed&&(e.options.analyze=e.value),Ol(e.options)}},t.createElement("img",{src:"https://ai.google/static/images/share.png",height:"90px",width:"140px"})),(null===hl||void 0===hl?void 0:hl.candidates.length)>0&&t.createElement(f.zx,{title:"Clear",clicked:()=>{gl({candidates:[]}),N(void 0,l)}})));if("Chart"===e.data_type_name)return t.createElement(_e.Z,{width:"100%",key:l,fieldLabel:e.field_name,fieldIcon:e.icon,editMode:xe,notes:null===e||void 0===e||null===(En=e.options)||void 0===En?void 0:En.notes,isProcess:!0,visible:e.visible,error:e.errors,customIconBgColor:"white"},t.createElement("div",{className:"grid grid-cols-12 gap-4 md:gap-6 2xl:gap-7.5",style:{width:"inherit"}},"Line"===(null===e||void 0===e||null===(Cn=e.options)||void 0===Cn?void 0:Cn.orientation)&&t.createElement(ze.Z,{series:[{name:"Product One",data:[23,11,22,27,13,22,37,21,44,22,30,45]},{name:"Product Two",data:[30,25,36,30,45,35,64,52,59,36,39,51]}]}),"Column"===(null===e||void 0===e||null===(wn=e.options)||void 0===wn?void 0:wn.orientation)&&t.createElement(Re.Z,{series:[{name:"Sales",data:[44,55,41,67,22,43,65]},{name:"Revenue",data:[13,23,20,8,13,27,15]}]}),"Donut"===(null===e||void 0===e||null===(Mn=e.options)||void 0===Mn?void 0:Mn.orientation)&&t.createElement(Ue.Z,{series:[65,34,12,56],labels:["Desktop","Tablet","Mobile","AI"]})));if("Info"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(Qe=e.options)||void 0===Qe||null===($e=Qe.list)||void 0===$e?void 0:$e.length)>0&&(null===e||void 0===e||null===(Il=e.options)||void 0===Il||null===(Fl=Il.component_id)||void 0===Fl?void 0:Fl.length)>0){var Pn,An,On,Ln,zn,Rn,Un,Fn;const o=ae.find(l=>l.id===(null===e||void 0===e?void 0:e.value)),i={};var Wn;if(o)null===e||void 0===e||null===(Wn=e.options)||void 0===Wn||Wn.list.map((e,l)=>{var n,d,a,r;if(0==o.component_fields.length)return t.createElement("div",{key:l});const s=o.component_fields.find(l=>l.field_name===e);var v;"Link"===(null===s||void 0===s?void 0:s.data_type_name)&&(null!==(n="".concat(null===s||void 0===s?void 0:s.value))&&void 0!==n&&n.includes("jpg")||null!==s&&void 0!==s&&null!==(d=s.options)&&void 0!==d&&d.image||null!==(a="".concat(null===s||void 0===s?void 0:s.value))&&void 0!==a&&a.includes("jpeg")||null!==(r="".concat(null===s||void 0===s?void 0:s.value))&&void 0!==r&&r.includes("png"))?i[e]=t.createElement("div",{key:l,onClick:()=>window.open(null===s||void 0===s?void 0:s.value,"_blank")},t.createElement("img",{alt:"lg",src:null===s||void 0===s?void 0:s.value,style:{width:"30px",height:"30px",cursor:"pointer"}})):i[e]=null!==(v=null===s||void 0===s?void 0:s.value)&&void 0!==v?v:""});return o&&("rows"===(null===e||void 0===e||null===(Pn=e.options)||void 0===Pn?void 0:Pn.orientation)?t.createElement(_e.Z,{style:{border:"0"},width:"100%",key:l,fieldLabel:e.field_name,fieldIcon:e.icon,isProcess:!0,visible:!0,mandatory:e.mandatory,error:e.errors,notes:null===e||void 0===e||null===(An=e.options)||void 0===An?void 0:An.notes},t.createElement(O.Z,{className:ce.mobileTable_ii,style:{width:"100%"},tableHostSimple:ce.tableHostSimple,columns:null!==(On=null===e||void 0===e||null===(Ln=e.options)||void 0===Ln?void 0:Ln.list)&&void 0!==On?On:[],list:[i]})):t.createElement("div",{style:{width:"inherit"},key:l},o&&t.createElement(f.zx,{light:!0,title:"Show Information",style:{width:"100%",backgroundColor:"var(--app-color-blue)",color:"white"},clicked:()=>Nl()}),Nl&&t.createElement(el,{title:"Information:",nav:Zl,openNav:Nl},t.createElement("div",{style:{color:"var(--app-color-gray-dark)",height:"inherit",width:"100%",display:null!==e&&void 0!==e&&e.visible?"":"none"}},Object.keys(i).length>0&&(null===e||void 0===e||null===(zn=e.options)||void 0===zn?void 0:zn.list.map((l,i)=>{var n,d,a,r,s,v,u;if(0==o.component_fields.length)return t.createElement("div",{key:i});const c=o.component_fields.find(e=>e.field_name===l);return i<3?t.createElement("div",{key:i},t.createElement("div",{className:ce.actionsContainer,style:{fontSize:(l.length>10||c.value.length,"12px")}},t.createElement("div",null,l,":"),t.createElement("div",{style:{fontWeight:"bold"}},c?c.value:"")),t.createElement("hr",{style:{borderTop:"0.5px solid #D2D2D2"}})):t.createElement("div",{style:{border:"0"},key:i,fieldLabel:l,fieldIcon:e.icon,isProcess:!0,visible:!0,mandatory:e.mandatory,error:e.errors,notes:null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.notes},"Link"===(null===c||void 0===c?void 0:c.data_type_name)&&(null!==(d="".concat(null===c||void 0===c?void 0:c.value))&&void 0!==d&&d.includes("jpg")||null!==(a="".concat(null===c||void 0===c?void 0:c.value))&&void 0!==a&&a.includes("jpeg")||null!==c&&void 0!==c&&null!==(r=c.options)&&void 0!==r&&r.image||null!==(s="".concat(null===c||void 0===c?void 0:c.value))&&void 0!==s&&s.includes("png"))?t.createElement("div",{onClick:()=>window.open(null===c||void 0===c?void 0:c.value,"_blank")},t.createElement("img",{alt:"lg",src:null===c||void 0===c?void 0:c.value,style:{width:"50%",height:"100%",cursor:"pointer"}})):null!==e&&void 0!==e&&null!==(v=e.value)&&void 0!==v&&v.includes("pdf")?t.createElement("div",{style:{width:"inherit"},onClick:()=>window.open(null===c||void 0===c?void 0:c.value,"_blank")},t.createElement("embed",{src:"".concat(null===c||void 0===c?void 0:c.value,"#toolbar=0&navpanes=0&scrollbar=0&zoom=100%"),width:"100%",height:"1000px"})):(null===c||void 0===c||null===(u=c.value)||void 0===u?void 0:u.length)<50||void 0===c?t.createElement("input",{onBlur:l=>Ke(e.data_type_name,l.target.value,D,i,L),type:e.data_type,value:c?c.value:"",autoComplete:"none",className:ce.fieldTypeInput,name:e.field_name,disabled:!0,style:{border:"1px dashed rgba(234, 231, 231, 0.91)",height:"40px",fontSize:"18px",backgroundColor:"rgba(234, 231, 231, 0.91)"}}):t.createElement("textarea",{className:ce.fieldTypeTextarea,type:e.data_type,value:c?c.value:"",onFocus:()=>{},autoComplete:"none",onChange:e=>{},disabled:!0,style:{backgroundColor:"rgba(234, 231, 231, 0.91)",height:"auto",fontSize:"18px"}}))})),!0===(null===S||void 0===S||null===(Rn=S.options)||void 0===Rn?void 0:Rn.allowMultipleInputs)&&(null===(Un=re.processModule.module.options)||void 0===Un||null===(Fn=Un.computes)||void 0===Fn?void 0:Fn.map((l,i)=>{var n,d;const a=null===ae||void 0===ae||null===(n=ae.filter(e=>e.module_id===l.module_id))||void 0===n?void 0:n.find(l=>l.component_fields.filter(l=>{var i,t;return l.value===(null!==(i=null===(t=o.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.key)}))||void 0===t?void 0:t.value)&&void 0!==i?i:"#$")}).length>0),r=null===a||void 0===a?void 0:a.component_fields.find(e=>e.procedure_step_blueprint_field_id===l.field_id);return t.createElement(_e.Z,{style:{display:r?"":"none",border:"0"},key:i,fieldLabel:null===r||void 0===r?void 0:r.field_name,fieldIcon:e.icon,isProcess:!0,visible:!0,mandatory:e.mandatory,error:e.errors,notes:null===e||void 0===e||null===(d=e.options)||void 0===d?void 0:d.notes},t.createElement("input",{onBlur:l=>Ke(e.data_type_name,l.target.value,D,i,L),type:e.data_type,value:null===r||void 0===r?void 0:r.value,autoComplete:"none",className:ce.fieldTypeInput,name:e.field_name,disabled:!0,style:{border:"1px dashed rgba(234, 231, 231, 0.91)",height:"40px",fontSize:"18px",backgroundColor:"rgba(234, 231, 231, 0.91)"}}))})),t.createElement("br",null),t.createElement(f.zx,{clicked:()=>Nl(),title:"Close",style:{width:"100%",backgroundColor:"orange"}})))))}if("Details"===(null===e||void 0===e?void 0:e.data_type_name)){var qn,Bn,Yn,Hn,Vn,jn,Gn;const l=null===(qn=L.components.find(l=>l.selected_fields.find(l=>{var o;return l.field_name===(null===(o=e.options)||void 0===o?void 0:o.key)&&l.value})))||void 0===qn||null===(Bn=qn.selected_fields)||void 0===Bn?void 0:Bn.find(l=>{var o;return l.field_name===(null===(o=e.options)||void 0===o?void 0:o.key)});let o=ae.find(o=>{var i;return o.module_id===(null===(i=e.options)||void 0===i?void 0:i.module_id)&&o.component_fields.find(o=>{var i;return o.value===(null===l||void 0===l?void 0:l.value)&&o.field_name===(null===(i=e.options)||void 0===i?void 0:i.key)})});if(!o){var Jn,Kn;const l=null===(Jn=L.components.find(l=>l.selected_fields.find(l=>{var o;return l.field_name===(null===(o=e.options)||void 0===o?void 0:o.key)&&l.value})))||void 0===Jn||null===(Kn=Jn.selected_fields)||void 0===Kn?void 0:Kn.find(l=>{var o;return l.field_name===(null===(o=e.options)||void 0===o?void 0:o.key)});l&&(o=ae.find(o=>{var i;return o.module_id===(null===(i=e.options)||void 0===i?void 0:i.module_id)&&o.component_fields.find(o=>{var i;return o.value===(null===l||void 0===l?void 0:l.value)&&o.field_name===(null===(i=e.options)||void 0===i?void 0:i.key)})}))}return t.createElement("div",{style:{width:"100%"}},o?t.createElement(O.Z,{modern:!(!y.tq&&null!==e&&void 0!==e&&null!==(Yn=e.options)&&void 0!==Yn&&Yn.table),tableHostSimple:ce.itemsContainer_ii,style:{width:"100%"},layeredColumns:null===e||void 0===e||null===(Hn=e.options)||void 0===Hn||null===(Vn=Hn.fields)||void 0===Vn?void 0:Vn.map(e=>({label:e})),list:[(null!==(jn=null===(Gn=o)||void 0===Gn?void 0:Gn.component_fields)&&void 0!==jn?jn:[]).reduce((e,l)=>(0,i.Z)((0,i.Z)({},e),{},{[l.field_name]:l.value}),{})]}):"No information found")}if("Module"===(null===e||void 0===e?void 0:e.data_type_name)&&null!==(Wl=e.options)&&void 0!==Wl&&Wl.module_id){var Qn,Xn,$n,ed,ld,od,id;const l=ge.find(l=>l.id===e.options.module_id);return t.createElement(t.Fragment,null,t.createElement("div",{style:{width:"inherit"}},t.createElement("div",{className:ce.iconsContainer,style:{display:"flex",alignContent:"space-between",justifyContent:"space-between",width:"100%"}},!((null===k||void 0===k?void 0:k.status)===(null===$||void 0===$||null===(Qn=$.misc_info)||void 0===Qn?void 0:Qn.lock)||(null!==(Xn=null===($n=re.processModule)||void 0===$n||null===(ed=$n.module)||void 0===ed||null===(ld=ed.options)||void 0===ld?void 0:ld.lock)&&void 0!==Xn?Xn:"").split(",").includes(null===k||void 0===k?void 0:k.status))&&t.createElement(f.zx,{light:!0,title:null===e||void 0===e?void 0:e.field_name,message:"Preparing ".concat(l.name," entry..."),loading:qe,clicked:()=>{Ve(!0),(0,r.zJ)(l.procedure.id).pipe((0,p.P)()).subscribe({next:l=>{var o;if(null!==e&&void 0!==e&&null!==(o=e.options)&&void 0!==o&&o.cmp){var t,n,d;const o=null===l||void 0===l||null===(t=l.steps)||void 0===t?void 0:t.find(e=>e.component_blueprints.filter(e=>{var l,o;return(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.allowMultipleInputs)&&(null===(o=e.selected_fields)||void 0===o?void 0:o.find(e=>"Transaction List"===e.data_type_name))}).length>0),c=null===o||void 0===o||null===(n=o.component_blueprints)||void 0===n?void 0:n.find(e=>{var l;return(null===(l=e.selected_fields)||void 0===l?void 0:l.filter(e=>"Transaction List"===e.data_type_name&&!0===e.visible).length)>0}),m={};var r;if(null===c||void 0===c||null===(d=c.selected_fields)||void 0===d||d.filter(e=>{var l;return null===(l=e.options)||void 0===l?void 0:l.mapToItem}).forEach(e=>{const l=le.Z(ee.Z("field_name",e.field_name),B.Z(q.Z("selected_fields",L.components.concat(L.newStepComponents))));var o;l&&(null===l||void 0===l?void 0:l.data_type_name)===e.data_type_name&&(m[null===(o=e.options)||void 0===o?void 0:o.mapToItem]=l.value)}),Object.values(m).length>0)(0,s.r6)(null===e||void 0===e||null===(r=e.options)||void 0===r?void 0:r.cmp).pipe((0,p.P)()).subscribe({next:o=>{var t,n;(0,s.np)((0,i.Z)((0,i.Z)({},m),{},{index:null===(t=o.component_items)||void 0===t?void 0:t.length,id:(0,v.mR)()}),null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.cmp).pipe((0,p.P)()).subscribe({next:t=>{Ve(!1),u.h.dispatch((0,a.q4)((0,i.Z)((0,i.Z)({},l),{},{completeSteps:l.steps,steps:l.steps,stepIndex:0,module_id:e.options.module_id,module:ge.find(l=>l.id===e.options.module_id),selectedComponent:o}))),z({action:_._U.setModuleItems,value:[]}),z({action:_._U.setModuleNewStepComponents,value:[]}),z({action:_._U.setComponents,value:[]})},error:()=>{},complete:()=>{}})},error:()=>{}});else Ve(!1)}else Ve(!1),L.components=[],e.options.fields.filter(e=>{var o,i;const t=null===(o=le.Z(ee.Z("field_name",e),B.Z(q.Z("selected_fields",L.components))))||void 0===o?void 0:o.value;null===(i=l.steps)||void 0===i||i.forEach(l=>{var o;null===l||void 0===l||null===(o=l.component_blueprints)||void 0===o||o.filter(e=>{var l;return!(null!==(l=e.options)&&void 0!==l&&l.asModuleList)}).forEach(l=>{const o=l.selected_fields.find(l=>l.field_name===e);o&&(o.value=t)}),l.component_blueprints.find(l=>l.selected_fields.filter(l=>l.field_name===e).length>0)&&z({action:_._U.addModuleComponents,value:l.component_blueprints.filter(l=>l.selected_fields.filter(l=>l.field_name===e).length>0)})})}),u.h.dispatch((0,a.q4)((0,i.Z)((0,i.Z)({},l),{},{completeSteps:l.steps,steps:l.steps,stepIndex:1,module_id:e.options.module_id,isUpdating:!0,module:ge.find(l=>l.id===e.options.module_id)}))),z({action:_._U.setCurrentStep,value:l.steps[1]}),z({action:_._U.setModuleItems,value:[]}),z({action:_._U.setModuleNewStepComponents,value:[]})}})}}),(null===e||void 0===e||null===(od=e.options)||void 0===od?void 0:od.showL)&&t.createElement(f.zx,{light:!0,clicked:()=>{Ve(!0),(0,m.vC)(l,v.Qc,v.R6,1).pipe((0,c.q)(1)).subscribe({next:e=>{var o;l.lastUpdate=(0,g.now)(),l.count=null!==(o=null===e||void 0===e?void 0:e.total)&&void 0!==o?o:0,Ve(!1)},complete:()=>{},error:()=>Ve(!1)})},icon:t.createElement("img",{src:Z.Fd}),loading:qe,message:"Fetching ".concat(l.name,"...")})),(null===e||void 0===e||null===(id=e.options)||void 0===id?void 0:id.showL)&&t.createElement(T.default,{modern:!!y.tq,className:ce.itemsContainer,columns:["Transaction","Date Created","Status"],list:J.Z([K.Z(Q.Z("created_date"))])(ae.filter(e=>e.module_id===l.id)).filter(l=>{var o,i,t;const n=null===(o=le.Z(ee.Z("field_name",null!==(i=null===(t=e.options)||void 0===t?void 0:t.key)&&void 0!==i?i:""),B.Z(q.Z("selected_fields",L.components))))||void 0===o?void 0:o.value;return l.component_fields.find(l=>{var o;return l.value===n&&l.field_name===(null===(o=e.options)||void 0===o?void 0:o.key)})}).map(e=>({Transaction:e.title,"Date Created":"".concat(b()(new Date(e.created_date)).format("DD MMM YYYY h:mm a")),Status:e.status})),onCellClick:o=>{var i;if(null!==e&&void 0!==e&&null!==(i=e.options)&&void 0!==i&&i.viewable){const e=ae.find(e=>e.id===o.data.id),i=We.find(e=>e.id===l.procedure.id&&e.steps.length>0);i?(0,s.DA)(i,e,void 0,z,ge,"New"===e.status||"None"===e.status||"Reopen"===e.status||ke.id===i.user_id?1:0):(0,r.zJ)(l.procedure.id).pipe((0,p.P)()).subscribe({next:l=>{(0,s.DA)(l,ae.find(e=>e.id===o.data.id),void 0,z,ge,"New"===e.status||"None"===e.status||"Reopen"===e.status||ke.id===i.user_id?1:0)}})}}})))}if("Lookup"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(ql=e.options)||void 0===ql||null===(Bl=ql.list)||void 0===Bl?void 0:Bl.length)>0&&(null===e||void 0===e||null===(Yl=e.options)||void 0===Yl||null===(Hl=Yl.source_id)||void 0===Hl?void 0:Hl.length)>0&&null!==e&&void 0!==e&&null!==(Vl=e.options)&&void 0!==Vl&&null!==(jl=Vl.target_id)&&void 0!==jl&&jl.length){var td,nd,dd,ad,rd,sd,vd,ud,cd,pd,md,fd,_d,yd,hd,gd,bd,xd;const o=((e,l)=>{var o,i;let t=null===(o=re.processModule.module)||void 0===o||null===(i=o.options)||void 0===i?void 0:i.global;var n,d,a,r,s;return t||(t=null===(n=L.components.find(l=>l.selected_fields.filter(l=>1==l.visible&&l.field_name===e).length>0))||void 0===n||null===(d=n.selected_fields.find(l=>l.field_name===e))||void 0===d?void 0:d.value),t||(t=null===(a=W.Z(q.Z("component_blueprints"),B.Z)(re.processModule.completeSteps).find(l=>l.selected_fields.filter(l=>l.field_name===e&&"Value"===l.data_type_name).length>0))||void 0===a||null===(r=a.selected_fields.find(l=>l.field_name===e))||void 0===r||null===(s=r.options)||void 0===s?void 0:s.value),t?l.filter(l=>l[e]===t):l})(null===e||void 0===e||null===(td=e.options)||void 0===td?void 0:td.global,function(e,l,o,t,n){let d=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:ae;const r=a.filter(e=>{var l;return(null===(l=e.component_fields)||void 0===l?void 0:l.filter(e=>e.component_blueprint_id===o).length)>0});let s=[];return a.filter(l=>l.component_fields.filter(l=>l.component_blueprint_id===e).length>0).map(e=>{const o={};t.map(l=>{var i;o[l]=null===(i=e.component_fields.find(e=>e.field_name===l))||void 0===i?void 0:i.value});const a=e.component_fields.find(e=>e.field_name===l);void 0!==a&&r.filter(e=>e.component_fields.filter(e=>e.value===a.value&&e.field_name===l).length>0).map(l=>{var t,a,r;const v=null!==(t=null===(a=l.component_fields.find(e=>-1!==d.indexOf(e.field_name)))||void 0===a?void 0:a.value)&&void 0!==t?t:"";let u={};d.length>0&&d.map(e=>{const o=l.component_fields.find(l=>l.field_name===e);o&&(u[e]=o.value)});let c={};n.length>0&&n.map(o=>{const i=l.component_fields.find(e=>e.field_name===o);if(i)c[o]=i.value;else{const l=e.component_fields.find(e=>e.field_name===o);l&&(c[o]=l.value)}}),s=[...s,(0,i.Z)((0,i.Z)((0,i.Z)({label:v,value:l.id,field:l,grouping:(null===(r=Object.values(o))||void 0===r?void 0:r.length)>0?Object.values(o)[0]:"Fields"},o),c),u)]})}),s}(null===e||void 0===e||null===(nd=e.options)||void 0===nd?void 0:nd.source_id,null===e||void 0===e||null===(dd=e.options)||void 0===dd?void 0:dd.common_field,null===e||void 0===e||null===(ad=e.options)||void 0===ad?void 0:ad.target_id,null===e||void 0===e||null===(rd=e.options)||void 0===rd?void 0:rd.sourceLabel,null===e||void 0===e||null===(sd=e.options)||void 0===sd?void 0:sd.list,null!==(vd=null===e||void 0===e||null===(ud=e.options)||void 0===ud?void 0:ud.rlist)&&void 0!==vd?vd:[]));return t.createElement(_e.Z,{enabled:Wo,width:"100%",style:{border:"Tiles"===(null===e||void 0===e||null===(cd=e.options)||void 0===cd?void 0:cd.selection)?"0":"1px dashed gray"},titleProps:{fontSize:"14px",color:"var(--app-color-gray-dark)",fontWeight:"normal",paddingLeft:"5px"},editMode:xe,showWidth:l=>{e.field_options=(0,i.Z)((0,i.Z)({},e.field_options),{},{width:"".concat(l,"px")})},key:l,fieldLabel:e.field_name,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors,notes:null===e||void 0===e||null===(pd=e.options)||void 0===pd?void 0:pd.notes},t.createElement("div",{id:e.field_name,style:{width:"100%"}},"Dropdown"===(null===e||void 0===e||null===(md=e.options)||void 0===md?void 0:md.selection)?t.createElement(U.yV,{items:o,groupedBy:"grouping",groupname:"grouping",triggerType:"chevron",title:il,className:ce.dropdownClassContainer,inputClassName:ce.peoplePositionsSelectInput,molclassname:ce.peoplePositionsSelectMenuOverlay,moliclassname:ce.peoplePositionsSelectMenuOverlayItem,notags:"true",onChange:o=>{var i;o.length>0&&(null===e||void 0===e||null===(i=e.options)||void 0===i||i.list.map(l=>{const i=Ll({field_name:l});if(-1!=i){const t=ae.find(e=>e.id===o[0].value),n=t.component_fields.find(e=>e.field_name===l);if(void 0==n){const o=t.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.common_field)}),n=ae.find(l=>l.component_fields.filter(l=>{var i;return l.value===o.value&&l.component_blueprint_id===(null===e||void 0===e||null===(i=e.options)||void 0===i?void 0:i.source_id)}).length>0);if(void 0!=n){const e=n.component_fields.find(e=>e.field_name===l);void 0!=e?(S.selected_fields[i].value=e.value,S.selected_fields[i].disabled=!0):S.selected_fields[i].value=""}else S.selected_fields[i].value=""}else S.selected_fields[i].value=n.value,S.selected_fields[i].disabled=!0}}),P("".concat(o[0].label,",").concat(o[0].value),l),tl("".concat(o[0].grouping)))}}):"Tiles"===(null===e||void 0===e||null===(fd=e.options)||void 0===fd?void 0:fd.selection)?t.createElement(U.qq,{items:o,columns:null===e||void 0===e||null===(_d=e.options)||void 0===_d?void 0:_d.rlist,columnsG:null===e||void 0===e||null===(yd=e.options)||void 0===yd?void 0:yd.sourceLabel,initialSelected:null===e||void 0===e?void 0:e.value,selectedItems:null!==e&&void 0!==e&&null!==(hd=e.options)&&void 0!==hd&&hd.showAll?o:dl,showAll:1==(null===e||void 0===e||null===(gd=e.options)||void 0===gd?void 0:gd.showAll),groupedBy:"grouping",groupname:"grouping",className:ce.peoplePositionsSelect,onGroupChange:e=>{al(o.filter(l=>l.grouping===e))},onChange:o=>{var i;o&&(null===e||void 0===e||null===(i=e.options)||void 0===i||i.list.map(l=>{const i=Ll({field_name:l});if(-1!=i){const t=ae.find(e=>e.id===o.value),n=t.component_fields.find(e=>e.field_name===l);if(void 0==n){const o=t.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.common_field)}),n=ae.find(l=>l.component_fields.filter(l=>{var i;return l.value===o.value&&l.component_blueprint_id===(null===e||void 0===e||null===(i=e.options)||void 0===i?void 0:i.source_id)}).length>0);if(void 0!=n){const e=n.component_fields.find(e=>e.field_name===l);void 0!=e?(S.selected_fields[i].value=e.value,S.selected_fields[i].disabled=!0):S.selected_fields[i].value=""}else S.selected_fields[i].value=""}else S.selected_fields[i].value=n.value,S.selected_fields[i].disabled=!0}}),Nl(),P("".concat(o.label,",").concat(o.value),l))}}):t.createElement("div",{className:ce.openSelectWithSearchHost},t.createElement(De.Z,{title:null===e||void 0===e||null===(bd=e.options)||void 0===bd?void 0:bd.sourceLabel,triggerType:"eyeglass",className:ce.openSelectWithSearch,molclassname:ce.menuOverlayList,moliclassname:ce.menuOverlayListItem,inputClassName:ce.menuOverlayListItemInput,inputContainerClassName:ce.menuOverlayListItemInputContainerClassName,items:j.Z(G.Z("grouping"))(o).map(e=>({label:e.grouping,value:e.grouping})),onChange:l=>{document.getElementById(e.field_name).style.height="80px",al(o.filter(e=>e.grouping===l.value))}}),t.createElement(De.Z,{title:null===e||void 0===e||null===(xd=e.options)||void 0===xd?void 0:xd.referenceLabel,triggerType:"eyeglass",className:ce.openSelectWithSearch,molclassname:ce.menuOverlayList,moliclassname:ce.menuOverlayListItem,inputClassName:ce.menuOverlayListItemInput,inputContainerClassName:ce.menuOverlayListItemInputContainerClassName,items:dl,onChange:o=>{var i;(document.getElementById(e.field_name).style.height="80px",o)&&(null===e||void 0===e||null===(i=e.options)||void 0===i||i.list.map(l=>{const i=Ll({field_name:l});if(-1!=i){const t=ae.find(e=>e.id===o.value),n=t.component_fields.find(e=>e.field_name===l);if(void 0==n){const o=t.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.common_field)}),n=ae.find(l=>l.component_fields.filter(l=>{var i;return l.value===o.value&&l.component_blueprint_id===(null===e||void 0===e||null===(i=e.options)||void 0===i?void 0:i.source_id)}).length>0);if(void 0!=n){const e=n.component_fields.find(e=>e.field_name===l);void 0!=e?(S.selected_fields[i].value=e.value,S.selected_fields[i].disabled=!0):S.selected_fields[i].value=""}else S.selected_fields[i].value=""}else S.selected_fields[i].value=n.value,S.selected_fields[i].disabled=!0}}),P("".concat(o.label,",").concat(o.value),l))}}))))}if(("Step List"===(null===e||void 0===e?void 0:e.data_type_name)||"Component List"===(null===e||void 0===e?void 0:e.data_type_name))&&(null===e||void 0===e||null===(Gl=e.options)||void 0===Gl||null===(Jl=Gl.list)||void 0===Jl?void 0:Jl.length)>0&&(null===e||void 0===e||null===(Kl=e.options)||void 0===Kl||null===(Ql=Kl.component_id)||void 0===Ql?void 0:Ql.length)>0)return t.createElement("div",{key:l,style:{width:"100%",display:1==e.visible?"":"none"}},t.createElement(T.default,{columns:null===e||void 0===e||null===(Sn=e.options)||void 0===Sn?void 0:Sn.list,list:(lv=null===e||void 0===e?void 0:e.options,L.components.filter(e=>e.id===lv.component_id).map(e=>null===lv||void 0===lv?void 0:lv.list.reduce((l,o)=>(0,i.Z)((0,i.Z)({},l),{},{[o]:e.selected_fields.find(e=>e.field_name===o).value,temp_id:e.temp_id}),{}))),onListItemClick:e=>{z({action:_._U.removeModuleComponents,value:e.temp_id})}}));if("Checkbox"===(null===e||void 0===e?void 0:e.data_type_name))return t.createElement(_e.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-light)"},enabled:Wo,border:{border:"0",paddingTop:"40px"},notes:null===e||void 0===e||null===(kn=e.options)||void 0===kn?void 0:kn.notes,editMode:xe,width:"100%",showWidth:l=>{e.field_options=(0,i.Z)((0,i.Z)({},e.field_options),{},{width:"".concat(l,"px")})},key:l,visible:e.visible,mandatory:e.mandatory,error:e.errors,customIconBgColor:"white"},t.createElement(Pe.X,{defaultChecked:null!==(Zn=e.value)&&void 0!==Zn&&Zn,checkboxLabel:null===e||void 0===e||null===(In=e.options)||void 0===In?void 0:In.value,onChange:e=>{P(e.target.checked,l)}}));if("YesNo"===(null===e||void 0===e?void 0:e.data_type_name))return t.createElement(_e.Z,{enabled:Wo,style:{border:"0.5px dashed gray",padding:"10px"},width:"100%",editMode:xe,key:l,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors},t.createElement("div",{class:"checkbox-wrapper-21"},t.createElement("div",{style:{display:"flex",justifyContent:"space-between",margin:"20px 0px"}},t.createElement("input",{id:"check-23",type:"checkbox",checked:null!==(Nn=null===e||void 0===e?void 0:e.value)&&void 0!==Nn&&Nn,onChange:e=>P(e.target.checked,l),style:{marginRight:"20px"}}),t.createElement("label",null,null!==(Tn=null===e||void 0===e||null===(Dn=e.options)||void 0===Dn?void 0:Dn.notes)&&void 0!==Tn?Tn:e.field_name))));if("Transaction List"===(null===e||void 0===e?void 0:e.data_type_name)&&null!==e&&void 0!==e&&null!==(Xl=e.options)&&void 0!==Xl&&Xl.simple){var Ed,Cd,wd,Md,Sd;const o=J.Z([oe.Z(Q.Z("index"))])(null!==(Ed=null!==e&&void 0!==e&&null!==(Cd=e.options)&&void 0!==Cd&&Cd.type?L.items.filter(l=>{var o;return l.type===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.type)}):L.items)&&void 0!==Ed?Ed:[]);return t.createElement(_e.Z,{fieldLabel:null===e||void 0===e?void 0:e.field_name,enabled:Wo,width:"100%",editMode:xe,showWidth:l=>{e.options=(0,i.Z)((0,i.Z)({},e.options),{},{width:"".concat(l,"px")})},style:{border:"0",padding:"0",marginTop:"50px"},key:l,visible:e.visible,notes:null===e||void 0===e||null===(wd=e.options)||void 0===wd?void 0:wd.notes,error:(null===(Md=e.errors)||void 0===Md?void 0:Md.length)>0?"".concat(e.errors):""},t.createElement("div",{style:{width:"inherit"}},t.createElement(T.default,{modern:!1,className:ce.itemsContainer,columns:null===S||void 0===S||null===(Sd=S.selected_fields)||void 0===Sd?void 0:Sd.filter(e=>{var l;return null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.mapToItem}).map(e=>e.field_name).concat(["Actions"]),list:null===o||void 0===o?void 0:o.map((e,l)=>{var n,d;e.index=l;let a={index:l,Actions:t.createElement("div",{style:{display:"flex",justifyContent:"space-evenly",minWidth:"80px"}},!(null!==e&&void 0!==e&&e.edit)&&t.createElement(C.G,{icon:E.IwR,onClick:()=>{e.edit=!0,z({action:_._U.setModuleItems,value:[...o.filter(l=>l.id!==e.id),e]})}}),(null===e||void 0===e?void 0:e.edit)&&t.createElement(C.G,{icon:E.EsX,onClick:()=>{e.edit=!1,z({action:_._U.setModuleItems,value:[...o.filter(l=>l.id!==e.id),e]})}}),(null===e||void 0===e?void 0:e.edit)&&t.createElement(C.G,{icon:E.$aW,onClick:()=>{z({action:_._U.setModuleItems,value:o.filter(l=>l.id!==e.id)})}}))};return(null!==(n=null===S||void 0===S||null===(d=S.selected_fields)||void 0===d?void 0:d.filter(e=>{var l;return null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.mapToItem}))&&void 0!==n?n:[]).forEach(o=>{var n,d,r;const s=(0,v.sO)(e[o.options.mapToItem])?JSON.parse(null!==(n=e[o.options.mapToItem])&&void 0!==n?n:"{}"):{};a[o.field_name]=t.createElement("div",{style:{padding:null!==e&&void 0!==e&&e.edit?"5px":""}},t.createElement(Ul,{item:e,index:l,enabled:!0,edit:null!==(d=null===e||void 0===e?void 0:e.edit)&&void 0!==d&&d,isItem:!0,field:(0,i.Z)((0,i.Z)({},o),{},{visible:!0,value:null!==(r=s[o.field_name])&&void 0!==r?r:""}),withLabel:!1,handleItem:(l,i)=>{s[o.field_name]=l,e[o.options.mapToItem]=JSON.stringify(s),z({action:_._U.setModuleItems,value:[...L.items.filter(l=>l.id!==e.id),e]})}}))}),a})})))}if("Transaction List"!==(null===e||void 0===e?void 0:e.data_type_name)||null===e||void 0===e||null===($l=e.options)||void 0===$l||!$l.map||null!==e&&void 0!==e&&null!==(eo=e.options)&&void 0!==eo&&eo.simple){var kd,Zd,Id,Nd,Td,Dd,Pd,Ad,Od,Ld,zd,Rd,Ud,Fd,Wd,qd,Bd,Yd,Hd,Vd,jd,Gd,Jd,Kd,Qd,Xd,$d,ea,la,oa,ia,ta,na,da,aa,ra,sa,va,ua,ca,pa,ma,fa,_a,ya,ha,ga,ba,xa;if("Clock"===(null===e||void 0===e?void 0:e.data_type_name))return t.createElement(_e.Z,{enabled:Wo,width:"100%",editMode:xe,style:{},key:l,fieldLabel:e.field_name,notes:null===e||void 0===e||null===(kd=e.options)||void 0===kd?void 0:kd.notes,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors},t.createElement("div",{className:ce.centerDiv,style:{width:"100%",height:"auto",border:"1px dashed var(--app-color-gray-light)",padding:"50px",flexDirection:"column"}},t.createElement("p",{className:ce.timer},"".concat(we.format("DD MMMM YYYY HH:mm:ss"))),t.createElement("div",{className:ce.centerDiv,style:{display:"flex",flexDirection:"row"}},t.createElement("input",{readOnly:!0,autoComplete:"off",value:null!==e&&void 0!==e&&e.value?b()(new Date(null===e||void 0===e?void 0:e.value)).format("MMM DD hh:mm:ss"):"",className:ce.currencyInput,style:{border:"1px solid black",maxWidth:"300px",marginRight:"10px"}}),t.createElement(f.zx,{light:!0,title:"Set",clicked:()=>{N((0,g.now)(),l)}}))));if("ID"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(lo=e.options)||void 0===lo||null===(oo=lo.id)||void 0===oo?void 0:oo.length)>0){var Ea,Ca;const o=void 0===e.value||null===e.value?"".concat(null===e||void 0===e?void 0:e.options.id).concat(null===(null===$||void 0===$?void 0:$.misc_info)?1:null!==(Ea=null===$||void 0===$?void 0:$.misc_info[null===e||void 0===e?void 0:e.field_name])&&void 0!==Ea?Ea:1):e.value;return e.value=o,L.id=o,t.createElement(_e.Z,{titleProps:{fontSize:"14px",color:"var(--app-color-gray-dark)",fontWeight:"normal",paddingLeft:"5px"},width:"100%",style:{marginTop:"0px",border:"0px solid var(--app-color-gray-lighter)",padding:"5px",marginBottom:"10px",backgroundColor:"var(--app-color-gray-lightest)"},editMode:xe,showWidth:l=>{e.field_options=(0,i.Z)((0,i.Z)({},e.field_options),{},{width:"".concat(l,"px")})},key:l,fieldLabel:e.field_name,fieldIcon:e.icon,notes:null===e||void 0===e||null===(Ca=e.options)||void 0===Ca?void 0:Ca.notes,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors,customIconBgColor:"white"},t.createElement("div",{className:ce.fieldTypeInput,style:{border:"0",margin:"20px 0 0 0"}},e.value))}if("Notes"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(io=e.options)||void 0===io||null===(to=io.value)||void 0===to?void 0:to.length)>0)return t.createElement(_e.Z,{titleProps:{fontSize:"14px",color:"var(--app-color-gray-dark)",fontWeight:"normal",paddingLeft:"5px"},enabled:Wo,width:"100%",editMode:xe,showWidth:l=>{e.field_options=(0,i.Z)((0,i.Z)({},e.field_options),{},{width:"".concat(l,"px")})},style:{border:"0"},key:l,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:!1,error:e.errors},t.createElement("p",{key:l,className:ce.labelInput,style:{display:e.visible?"":"none"}},"".concat(null===e||void 0===e||null===(Zd=e.options)||void 0===Zd?void 0:Zd.value)));if("List Filter"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(no=e.options)||void 0===no||null===(ao=no.value)||void 0===ao?void 0:ao.length)>0)return t.createElement(t.Fragment,null);if("Ratings"===(null===e||void 0===e?void 0:e.data_type_name))return t.createElement(t.Fragment,null);if("Value"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(ro=e.options)||void 0===ro||null===(so=ro.module_id)||void 0===so?void 0:so.length)>0&&(null===e||void 0===e||null===(vo=e.options)||void 0===vo||null===(uo=vo.component_id)||void 0===uo?void 0:uo.length)>0)return t.createElement(_e.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-light)"},width:"100%",style:{border:"0"},key:l,fieldLabel:e.field_name,fieldIcon:e.icon,editMode:xe,showWidth:l=>{e.field_options=(0,i.Z)((0,i.Z)({},e.field_options),{},{width:"".concat(l,"px")})},notes:null===e||void 0===e||null===(Id=e.options)||void 0===Id?void 0:Id.notes,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors,customIconBgColor:"white"},t.createElement("input",{value:null===e||void 0===e||null===(Nd=e.options)||void 0===Nd?void 0:Nd.value,className:ce.fieldTypeInput,name:e.field_name,disabled:!0}));if("URL"===e.data_type_name)return t.createElement(_e.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-light)"},border:{border:"0"},width:"100%",editMode:xe,showWidth:l=>{e.field_options=(0,i.Z)((0,i.Z)({},e.field_options),{},{width:"".concat(l,"px")})},key:l,notes:null===e||void 0===e||null===(Td=e.options)||void 0===Td?void 0:Td.notes,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors,customIconBgColor:"white"},null!==e&&void 0!==e&&null!==(Dd=e.options.value)&&void 0!==Dd&&Dd.includes("jpg")||null!==e&&void 0!==e&&null!==(Pd=e.options.value)&&void 0!==Pd&&Pd.includes("jpeg")||null!==e&&void 0!==e&&null!==(Ad=e.options)&&void 0!==Ad&&Ad.image||null!==e&&void 0!==e&&null!==(Od=e.options.value)&&void 0!==Od&&Od.includes("png")?t.createElement("div",{onClick:()=>window.open(null===e||void 0===e?void 0:e.options.value,"_blank")},t.createElement("img",{alt:"lg",src:null===e||void 0===e?void 0:e.options.value,style:{width:"100%",height:"100%",cursor:"pointer"}})):null!==e&&void 0!==e&&null!==(Ld=e.options.value)&&void 0!==Ld&&Ld.includes("pdf")?t.createElement("div",{style:{width:"inherit"},onClick:()=>window.open(null===e||void 0===e?void 0:e.options.value,"_blank")},t.createElement("embed",{src:"".concat(null===e||void 0===e?void 0:e.options.value,"#toolbar=0&navpanes=0&scrollbar=0&zoom=100%"),width:"100%",height:"1000px"})):t.createElement("div",{style:{width:"inherit"},onClick:()=>window.open(null===e||void 0===e?void 0:e.options.value,"_blank")},t.createElement("textarea",{disabled:!0,onChange:()=>{},autoComplete:"none",value:null===(null===e||void 0===e?void 0:e.options.value)?"":null===e||void 0===e?void 0:e.options.value,className:ce.fieldTypeInput,style:{height:"auto",width:"inherit",cursor:"pointer"},name:e.field_name})));if("Formula"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(co=e.options)||void 0===co||null===(po=co.operator)||void 0===po?void 0:po.length)>0){var wa,Ma,Sa,ka,Za;const o=L.newStepComponents.filter(e=>null===e.options||(void 0===e.allowMultipleInputs||!1===e.options.allowMultipleInputs)),n=(0,v.LV)(null===e||void 0===e?void 0:e.options,S.selected_fields.filter(l=>e.options.list.includes(l.field_name)),[...L.components.filter(e=>o.every(l=>l.id!==e.id)),...H.Z(e=>e.selected_fields.filter(e=>""===e.value).length>0,o)],null!==(wa=null===L||void 0===L?void 0:L.items)&&void 0!==wa?wa:[],null!==(Ma=null===L||void 0===L?void 0:L.newStepComponents)&&void 0!==Ma?Ma:[]);return void 0!==n&&0!==n&&(e.value=n),"bar"===(null===e||void 0===e||null===(Sa=e.options)||void 0===Sa?void 0:Sa.display)?t.createElement("div",{style:{margin:"20px",display:"flex",height:"30px",width:"100%"}},t.createElement("label",{className:ce.fieldTypeInput,style:{width:"20%"}},null===e||void 0===e?void 0:e.field_name),t.createElement("div",{style:{height:"30px",width:"100%",backgroundColor:null===e||void 0===e||null===(ka=e.options)||void 0===ka?void 0:ka.maxC,display:"flex",flexDirection:"column"}},t.createElement("input",{value:n||0,className:ce.fieldTypeInput,name:e.field_name,disabled:!0,style:{color:"transparent",height:"30px",width:"".concat(+n/+e.options.max*100,"%"),backgroundColor:null===e||void 0===e||null===(Za=e.options)||void 0===Za?void 0:Za.barC}})),t.createElement("label",{className:ce.fieldTypeInput,style:{width:"2%"}},"".concat(+n/+e.options.max*100,"%"))):t.createElement(_e.Z,{titleProps:{fontSize:"14px",color:"var(--app-color-gray-dark)",fontWeight:"normal",paddingLeft:"5px"},width:"100%",style:{border:"0px dashed var(--app-color-gray-light)",padding:"5px",backgroundColor:"var(--app-color-gray-lightest)"},editMode:xe,showWidth:l=>{e.field_options=(0,i.Z)((0,i.Z)({},e.field_options),{},{width:"".concat(l,"px")})},key:l,fieldLabel:e.field_name,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors,customIconBgColor:"white"},t.createElement("div",{style:{flexDirection:"column",width:"inherit"},key:l},t.createElement("input",{value:n||0,className:ce.fieldTypeInput,name:e.field_name,readOnly:!0,style:{border:"0"}}),Zl&&n>0&&t.createElement(el,{title:"",nav:Zl,openNav:Nl},t.createElement("div",{style:{color:"var(--app-color-gray-dark)",height:"inherit",width:"100%",display:null!==e&&void 0!==e&&e.visible?"":"none"}},t.createElement("div",{key:l},t.createElement("div",{className:ce.actionsContainer,style:{fontSize:"20px"}},t.createElement("div",null,e.field_name,":"),t.createElement("div",{style:{fontWeight:"bolder"}},n)),t.createElement("hr",{style:{borderTop:"0.5px solid #D2D2D2"}})),t.createElement("br",null),t.createElement(f.zx,{clicked:()=>Nl(),title:"Continue",style:{width:"100%"}})))))}if("Dropdown"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(mo=e.options)||void 0===mo||null===(fo=mo.list)||void 0===fo?void 0:fo.length)>0)return t.createElement(_e.Z,{titleProps:{fontSize:"14px",color:"var(--app-color-gray-dark)",fontWeight:"normal",paddingLeft:"5px"},enabled:Wo,width:"100%",style:{marginTop:"0px",border:"0px solid var(--app-color-gray-lighter)",padding:"5px",marginBottom:"10px",backgroundColor:"var(--app-color-gray-lightest)"},editMode:xe,showWidth:l=>{e.field_options=(0,i.Z)((0,i.Z)({},e.field_options),{},{width:"".concat(l,"px")})},key:l,fieldLabel:e.field_name,notes:null===e||void 0===e||null===(zd=e.options)||void 0===zd?void 0:zd.notes,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors},t.createElement("div",{style:{width:"100%"}},t.createElement(A.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-light)"},key:l,visible:e.visible,mandatory:e.mandatory,items:null===e||void 0===e||null===(Rd=e.options)||void 0===Rd?void 0:Rd.list.map(e=>({label:e,value:e})),className:ce.dropdownClassContainer,error:e.errors,onClicked:e=>fl(e?"180px":"50px"),onChange:e=>{fl("50px"),P(e,l)},selectionType:null===e||void 0===e||null===(Ud=e.options)||void 0===Ud?void 0:Ud.type,max:+(null!==(Fd=null===e||void 0===e||null===(Wd=e.options)||void 0===Wd?void 0:Wd.max)&&void 0!==Fd?Fd:0),fieldIcon:e.icon,value:void 0===e.value||null===e.value?"":e.value})));if("Payments"===(null===e||void 0===e?void 0:e.data_type_name))return t.createElement(_e.Z,{titleProps:{fontSize:"14px",color:"var(--app-color-gray-dark)",fontWeight:"normal",paddingLeft:"5px"},enabled:Wo,width:"100%",style:{backgroundColor:"var(--app-color-gray-lightest)"},editMode:xe,showWidth:l=>{e.field_options=(0,i.Z)((0,i.Z)({},e.field_options),{},{width:"".concat(l,"px")})},key:l,fieldLabel:e.field_name,notes:null===e||void 0===e||null===(qd=e.options)||void 0===qd?void 0:qd.notes,fieldIcon:e.icon,isProcess:!0,visible:!0,mandatory:e.mandatory,error:_l[l]},t.createElement("div",{style:{width:"100%",pointerEvents:!0===(null===re||void 0===re||null===(Bd=re.processModule)||void 0===Bd?void 0:Bd.isUpdating)&&null!==e&&void 0!==e&&e.value?"none":""}},null!==k&&void 0!==k&&null!==(Yd=k.payments)&&void 0!==Yd&&Yd.stripe_id?t.createElement("div",{style:{padding:"10px 5px 10px 5px",width:"100%",border:"0px solid var(--app-color-gray-lighter)"}},"".concat(null===e||void 0===e?void 0:e.value,", ").concat(null===k||void 0===k||null===(Qd=k.payments)||void 0===Qd?void 0:Qd.stripe_id.slice(0,6))):t.createElement(A.Z,{key:l,visible:e.visible,mandatory:e.mandatory,items:!0===(null===(Hd=re.processModule)||void 0===Hd||null===(Vd=Hd.module)||void 0===Vd||null===(jd=Vd.options)||void 0===jd?void 0:jd.credits)?[...null!==(Gd=null===e||void 0===e||null===(Jd=e.options)||void 0===Jd?void 0:Jd.list.map(e=>({label:e,value:e})))&&void 0!==Gd?Gd:[],{label:"Wallet",value:"Wallet"}]:null===e||void 0===e||null===(Kd=e.options)||void 0===Kd?void 0:Kd.list.map(e=>({label:e,value:e})),className:ce.dropdownClassContainer,error:e.errors,onClicked:e=>fl(e?"180px":"50px"),onChange:o=>{if(o){var i,t,n,d,a,r,s,v,u,c,p,m,f,_,y,h,g;const C=null===(i=L.newStepComponents.find(l=>l.selected_fields.filter(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.paymentField)}).length>0))||void 0===i||null===(t=i.selected_fields)||void 0===t?void 0:t.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.paymentField)}),w=null===(n=L.components.find(l=>l.selected_fields.filter(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.paymentField)}).length>0))||void 0===n||null===(d=n.selected_fields)||void 0===d?void 0:d.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.paymentField)}),M=null===(a=L.currentStep)||void 0===a||null===(r=a.component_blueprints)||void 0===r||null===(s=r.find(l=>{var o;return null===l||void 0===l||null===(o=l.selected_fields)||void 0===o?void 0:o.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.paymentField)})}))||void 0===s||null===(v=s.selected_fields)||void 0===v?void 0:v.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.paymentField)});if(_l[l]="",+(null!==(u=null===C||void 0===C?void 0:C.value)&&void 0!==u?u:0)>0)L.total=C.value,L.plan=C.value;else if(+(null!==(c=null===w||void 0===w?void 0:w.value)&&void 0!==c?c:0)>0)L.total=w.value,L.plan=w.value;else{if(!(+(null!==(p=null===M||void 0===M?void 0:M.value)&&void 0!==p?p:0)>0))return _l[l]="Please enter a payment amount in the designated field",yl([]),void setTimeout(()=>yl(_l));L.total=M.value,L.plan=M.value}var b;if(1==(null===(m=re.processModule)||void 0===m||null===(f=m.module)||void 0===f||null===(_=f.options)||void 0===_?void 0:_.credits)&&"Wallet"===o){if(+(null!==(b=Ze.wallet)&&void 0!==b?b:0)<+L.total)return _l[l]="Insufficient wallet balance",yl([]),void setTimeout(()=>yl(_l))}else if(1==(null===(y=re.processModule)||void 0===y||null===(h=y.module)||void 0===h||null===(g=h.options)||void 0===g?void 0:g.credits)&&"Points"===o){var x,E;if(+(null!==(x=null===(E=Ze.options)||void 0===E?void 0:E.points)&&void 0!==x?x:0)<+L.total)return _l[l]="Insufficient points balance",yl([]),void setTimeout(()=>yl(_l))}_l[l]="",yl([]),setTimeout(()=>yl(_l)),fl("50px"),P(o,l)}},selectionType:"Dropdown",fieldIcon:e.icon,value:void 0===e.value||null===e.value?"":e.value,placeholder:""})));if("Positions"===(null===e||void 0===e?void 0:e.data_type_name)&&"multiple"===(null===e||void 0===e||null===(_o=e.options)||void 0===_o?void 0:_o.type))return t.createElement(_e.Z,{enabled:Wo,style:{height:"".concat((null===e||void 0===e||null===(Xd=e.value)||void 0===Xd?void 0:Xd.split(",").length)>2?"160":"45","px"),marginBottom:"50px"},width:"100%",editMode:xe,key:l,fieldLabel:e.field_name,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors,notes:null===e||void 0===e||null===($d=e.options)||void 0===$d?void 0:$d.notes},t.createElement("div",{style:{width:"100%",border:"1px solid var(--app-color-gray-dark)"}},t.createElement(A.Z,{onOpen:e=>{fl("50px"===ml?"180px":"50px")},visible:null===e||void 0===e?void 0:e.visible,mandatory:null===e||void 0===e?void 0:e.mandatory,className:ce.dropdownClassContainer,items:he.filter(l=>{var o,i;return null===e||void 0===e||null===(o=e.options)||void 0===o||null===(i=o.position_id)||void 0===i?void 0:i.includes(null===l||void 0===l?void 0:l.value)}),value:e.value,loading:qe,error:null===e||void 0===e?void 0:e.errors,onChange:e=>{P(e,l)},selectionType:"multiple",fieldIcon:null===e||void 0===e?void 0:e.icon,placeholder:""})));if("Positions"===(null===e||void 0===e?void 0:e.data_type_name)&&null!==e&&void 0!==e&&null!==(yo=e.options)&&void 0!==yo&&yo.calendar){var Ia,Na,Ta,Da,Pa,Aa,Oa,La,za,Ra,Ua,Fa,Wa,qa,Ba,Ya;const o=JSON.parse(null!==(Ia=null===e||void 0===e?void 0:e.value)&&void 0!==Ia?Ia:JSON.stringify({user:0})),n=Te.find(e=>e.id===(null===o||void 0===o?void 0:o.task)),d=null===Te||void 0===Te?void 0:Te.filter(e=>{var l,i,t,n;return(null===e||void 0===e||null===(l=e.add_info)||void 0===l?void 0:l.module_id)===(null===(i=re.processModule)||void 0===i?void 0:i.module_id)&&e.creator.id===(null===o||void 0===o?void 0:o.user)&&!(null!==e&&void 0!==e&&null!==(t=e.assignee)&&void 0!==t&&t.id)&&b()((0,g.now)()).diff(b()(null===e||void 0===e||null===(n=e.add_info)||void 0===n?void 0:n.start),"seconds")<0});return t.createElement(_e.Z,{enabled:Wo,style:{marginBottom:"50px"},width:"100%",editMode:xe,key:l,fieldLabel:e.field_name,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors,notes:null===e||void 0===e||null===(Na=e.options)||void 0===Na?void 0:Na.notes},t.createElement("div",{style:{display:"flex",flexDirection:"column",width:"100%"}},t.createElement("div",{style:{width:"100%",border:"1px solid var(--app-color-gray-light)"}},t.createElement(A.Z,{onFocus:()=>0==he.length&&Al(),visible:null===e||void 0===e?void 0:e.visible,mandatory:null===e||void 0===e?void 0:e.mandatory,className:"multiple"===(null===e||void 0===e||null===(Ta=e.options)||void 0===Ta?void 0:Ta.type)?ce.dropdownHeightClassContainer:ce.dropdownClassContainer,value:null===(Da=he.find(e=>e.value===(null===o||void 0===o?void 0:o.pos)))||void 0===Da?void 0:Da.label,loading:qe,items:he.filter(l=>{var o,i;return null===e||void 0===e||null===(o=e.options)||void 0===o||null===(i=o.position_id)||void 0===i?void 0:i.includes(null===l||void 0===l?void 0:l.value)}),error:null===e||void 0===e?void 0:e.errors,onChange:e=>{e.length>0&&(o.pos=void 0,o.user=void 0,P(JSON.stringify(o),l),(0,be.n0)([e]).pipe((0,c.q)(1)).subscribe({next:i=>{Se(i),setTimeout(()=>{o.pos=e,P(JSON.stringify(o),l)},0)}}))},selectionType:null===e||void 0===e||null===(Pa=e.options)||void 0===Pa?void 0:Pa.type,fieldIcon:null===e||void 0===e?void 0:e.icon})),t.createElement("div",{style:{width:"100%"}},0==(null===Me||void 0===Me?void 0:Me.length)&&t.createElement("p",null,"No ".concat(e.field_name," found")),!n&&t.createElement(T.default,{initialSelected:null!==e&&void 0!==e&&e.value?Me.filter(e=>{var l,i;return(null===e||void 0===e||null===(l=e.user)||void 0===l||null===(i=l.positions)||void 0===i?void 0:i.filter(e=>(null===o||void 0===o?void 0:o.pos)===(null===e||void 0===e?void 0:e.id)).length)>0}).map(e=>e.value).indexOf(null===o||void 0===o?void 0:o.user):void 0,card:!0,isReport:!1,"app-variant-is-mobile":"true",columns:["Name","Info","About",...null!==(Aa=null===$||void 0===$||null===(Oa=$.misc_info)||void 0===Oa?void 0:Oa.profile)&&void 0!==Aa?Aa:["Rate"],"Location","Photo","Ratings"],list:Me.filter(e=>{var l,i;return(null===e||void 0===e||null===(l=e.user)||void 0===l||null===(i=l.positions)||void 0===i?void 0:i.filter(e=>(null===o||void 0===o?void 0:o.pos)===(null===e||void 0===e?void 0:e.id)).length)>0}).map(e=>{var l,o,n,d,a,r,s,v,u,c,p;const m=null===e||void 0===e||null===(l=e.user)||void 0===l||null===(o=l.ratings)||void 0===o?void 0:o.map(e=>+e.ratings);return(0,i.Z)((0,i.Z)({},null!==(n=null===(d=e.user)||void 0===d||null===(a=d.options)||void 0===a?void 0:a.add_info)&&void 0!==n?n:{}),{},{Name:"".concat(e.user.first_name," ").concat(e.user.last_name),Location:t.createElement("div",{style:{marginTop:"10px"}},null===(r=e.user)||void 0===r?void 0:r.city),About:null!==(s=null===(v=e.user.options)||void 0===v?void 0:v.info)&&void 0!==s?s:null===(u=e.user)||void 0===u?void 0:u.positions.map(e=>e.name).toString().replace(",",", "),id:e.user.id,Photo:null!=(null===(c=e.user)||void 0===c?void 0:c.photo)?null===(p=e.user)||void 0===p?void 0:p.photo:null===$||void 0===$?void 0:$.logo,Ratings:(null===m||void 0===m?void 0:m.length)>0&&t.createElement("div",{className:ce.simpleNames},Array(Math.round(ie.Z(te.Z,[ne.Z,de.Z])(m))).fill(0).map((e,l)=>t.createElement(C.G,{key:l,icon:E.Tab,style:{color:"var(--app-color-blue)"}})),Array(5-Math.round(ie.Z(te.Z,[ne.Z,de.Z])(m))).fill(0).map((e,l)=>t.createElement(C.G,{key:l,icon:E.Tab,style:{color:"lightgray"}})))})}),onListItemClick:e=>{if(e){const i=Me.find(l=>l.value===e.id);o.user=null===i||void 0===i?void 0:i.value,P(JSON.stringify(o),l),(0,Le.Mk)(null===i||void 0===i?void 0:i.value,!0).pipe((0,c.q)(1)).subscribe({})}}},(null===d||void 0===d?void 0:d.length)>0&&t.createElement("p",null,"Schedules"),(null===d||void 0===d?void 0:d.length)>0&&t.createElement(ve.tq,{slidesPerView:3,centeredSlides:!0,spaceBetween:5,initialSlide:1,pagination:{clickable:!0,dynamicBullets:!0},modules:[se.pt,se.tl],className:"mySwiper",style:{border:"0.8px dashed gray",padding:"5px",height:"200px",display:(null===d||void 0===d?void 0:d.length)>0?"":"none"}},null===d||void 0===d?void 0:d.map((e,l)=>t.createElement(ve.o5,{key:l+100,className:ce.swiperslide},t.createElement("div",{className:ce.dashboardCard,onClick:()=>{xl(!0),Cl(e)}},t.createElement("div",{style:{fontSize:"10px"}},b()(new Date(e.add_info.start)).format("h:mm a")),e.add_info.end!==e.add_info.start&&t.createElement("div",{style:{fontSize:"10px"}},b()(new Date(e.add_info.end)).format("h:mm a")),t.createElement("hr",{style:{border:"0.8px dashed gray"}}),t.createElement("p",{style:{fontSize:"12px",fontWeight:"bold"}},b()(new Date(e.add_info.start)).format("MMM")),t.createElement("div",{style:{fontSize:"20px",fontWeight:"bold"}},b()(new Date(e.add_info.start)).format("DD"))))))),n&&t.createElement(T.default,{modern:!0,isReport:!1,"app-variant-is-mobile":"true",columns:["Responsible",null!==(La=null===e||void 0===e||null===(za=e.options)||void 0===za?void 0:za.header)&&void 0!==La?La:"Name",null!==(Ra=null===e||void 0===e||null===(Ua=e.options)||void 0===Ua?void 0:Ua.start)&&void 0!==Ra?Ra:"Date","Photo"],list:[n].map(l=>{var o,i,t,n,d,a;return{[null!==(o=null===e||void 0===e||null===(i=e.options)||void 0===i?void 0:i.header)&&void 0!==o?o:"Name"]:l.name,[null!==(t=null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.start)&&void 0!==t?t:"Date"]:b()(new Date(null===(d=l.add_info)||void 0===d?void 0:d.start)).format("MMM DD h:mm a"),Responsible:"".concat(l.creator.first_name," ").concat(l.creator.last_name),Photo:null===(a=l.creator)||void 0===a?void 0:a.photo}}),onListItemClick:e=>{e&&(xl(!0),Cl(n))}}),bl&&t.createElement(nl,{save:!1,modalVisible:bl,heading:null!==(Fa=null===e||void 0===e||null===(Wa=e.options)||void 0===Wa?void 0:Wa.header)&&void 0!==Fa?Fa:El?"Update Calendar":"Create New Calendar",labels:null===e||void 0===e?void 0:e.options,task:El,isProcess:!0,blured:!1,onClose:()=>xl(!1),isEdit:!!El,statuses:null===e||void 0===e||null===(qa=e.options)||void 0===qa?void 0:qa.list,priority:null===e||void 0===e||null===(Ba=e.options)||void 0===Ba?void 0:Ba.priority,span:null===e||void 0===e||null===(Ya=e.options)||void 0===Ya?void 0:Ya.span,start_date:je,onUpdate:i=>{if(i.creator.id!==(null===ke||void 0===ke?void 0:ke.id)&&(null===i||void 0===i?void 0:i.assignee_id)===(null===ke||void 0===ke?void 0:ke.id)){var t;if(L.assigned_to=i.creator.id,o.task=null===i||void 0===i?void 0:i.id,null!==i&&void 0!==i&&null!==(t=i.add_info)&&void 0!==t&&t.value){var n,d,a,r,s,v,u,c,p;o.value=null===i||void 0===i||null===(n=i.add_info)||void 0===n?void 0:n.value;const l=null===(d=L.components.find(l=>l.selected_fields.find(l=>{var o;return l.field_name===(null===(o=e.options)||void 0===o?void 0:o.valueL)})))||void 0===d?void 0:d.selected_fields.find(l=>{var o;return l.field_name===(null===(o=e.options)||void 0===o?void 0:o.valueL)});var m;if(l)l.value=null===i||void 0===i||null===(m=i.add_info)||void 0===m?void 0:m.value;const t=null===(a=L.newStepComponents.find(l=>l.selected_fields.find(l=>{var o;return l.field_name===(null===(o=e.options)||void 0===o?void 0:o.valueL)})))||void 0===a?void 0:a.selected_fields.find(l=>{var o;return l.field_name===(null===(o=e.options)||void 0===o?void 0:o.valueL)});var f;if(t)t.value=null===i||void 0===i||null===(f=i.add_info)||void 0===f?void 0:f.value;const y=null===(r=re.processModule)||void 0===r||null===(s=r.steps)||void 0===s||null===(v=s.find(l=>{var o;return null===(o=l.component_blueprints)||void 0===o?void 0:o.find(l=>{var o;return null===l||void 0===l||null===(o=l.selected_fields)||void 0===o?void 0:o.find(l=>{var o;return l.field_name===(null===(o=e.options)||void 0===o?void 0:o.valueL)})})}))||void 0===v||null===(u=v.component_blueprints)||void 0===u||null===(c=u.find(l=>{var o;return null===l||void 0===l||null===(o=l.selected_fields)||void 0===o?void 0:o.find(l=>{var o;return l.field_name===(null===(o=e.options)||void 0===o?void 0:o.valueL)})}))||void 0===c||null===(p=c.selected_fields)||void 0===p?void 0:p.find(l=>{var o;return l.field_name===(null===(o=e.options)||void 0===o?void 0:o.valueL)});var _;if(y)y.value=null===i||void 0===i||null===(_=i.add_info)||void 0===_?void 0:_.value}P(JSON.stringify(o),l)}}}))))}if("Positions"===(null===e||void 0===e?void 0:e.data_type_name))return t.createElement(_e.Z,{enabled:Wo,titleProps:{fontSize:"14px",color:"var(--app-color-gray-dark)",fontWeight:"normal",paddingLeft:"5px"},style:{marginTop:"0px",border:"0px solid var(--app-color-gray-lighter)",padding:"5px",marginBottom:"10px",backgroundColor:"var(--app-color-gray-lightest)"},width:"100%",editMode:xe,key:l,fieldLabel:e.field_name,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors,notes:null===e||void 0===e||null===(ea=e.options)||void 0===ea?void 0:ea.notes},t.createElement("div",{style:{width:"100%",bborder:"1px dashed var(--app-color-gray-light)"}},t.createElement(A.Z,{visible:null===e||void 0===e?void 0:e.visible,mandatory:null===e||void 0===e?void 0:e.mandatory,className:"multiple"===(null===e||void 0===e||null===(la=e.options)||void 0===la?void 0:la.type)?ce.dropdownHeightClassContainer:ce.dropdownClassContainer,items:he.filter(l=>{var o,i;return null===e||void 0===e||null===(o=e.options)||void 0===o||null===(i=o.position_id)||void 0===i?void 0:i.includes(null===l||void 0===l?void 0:l.value)}),value:null===(oa=he.find(l=>l.value===e.value))||void 0===oa?void 0:oa.label,loading:qe,error:null===e||void 0===e?void 0:e.errors,onChange:o=>{var t;P(o,l),null!==e&&void 0!==e&&null!==(t=e.options)&&void 0!==t&&t.addToPos&&(0,be.Vy)(ke,(0,i.Z)((0,i.Z)({},null===ke||void 0===ke?void 0:ke.options),{},{selPos:o})).pipe((0,p.P)()).subscribe({complete:()=>{},next:e=>{(0,I.aT)(o,null===ke||void 0===ke?void 0:ke.id).subscribe({complete:()=>{},next:()=>{var l;(ke.options.selPos&&ke.options.selPos!==o?(0,I._s)(ke.options.selPos,null===ke||void 0===ke?void 0:ke.id).subscribe({next:()=>{window.scrollTo({top:0,behavior:"smooth"})}}):window.scrollTo({top:0,behavior:"smooth"}),null!==e&&void 0!==e&&e.user)||(ke.options.selPos=null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.selPos)}})}})},selectionType:null===e||void 0===e||null===(ia=e.options)||void 0===ia?void 0:ia.type,fieldIcon:null===e||void 0===e?void 0:e.icon})));if("Value Button"===(null===e||void 0===e?void 0:e.data_type_name))return t.createElement(_e.Z,{width:"100%",editMode:xe,key:l,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors,customIconBgColor:"white"},t.createElement(T.default,{rowStyleSelected:{border:null!==e&&void 0!==e&&e.value?"2px solid black":"1px dashed black"},initialSelected:(null===(ta=e.options)||void 0===ta?void 0:ta.value)===(null===e||void 0===e?void 0:e.value)?0:void 0,modern:!0,isReport:!1,filtersContainer:ce.filtersContainerII,"app-variant-is-mobile":"true",columns:["Type","Description","Image"],list:[{Type:null===(na=e.options)||void 0===na?void 0:na.label,Description:null!==(da=null===e||void 0===e||null===(aa=e.options)||void 0===aa?void 0:aa.notes)&&void 0!==da?da:e.field_name,Image:null===(ra=e.options)||void 0===ra?void 0:ra.image}],onListItemClick:()=>{var o;null!==e&&void 0!==e&&e.value?N(void 0,l):(null===S||void 0===S||null===(o=S.selected_fields)||void 0===o||o.filter(e=>"Value Button"===(null===e||void 0===e?void 0:e.data_type_name)).map(e=>{e.value=void 0}),N(e.options.value,l))}}));if("Calendar"===(null===e||void 0===e?void 0:e.data_type_name))return t.createElement(_e.Z,{enabled:Wo,width:"100%",style:{width:"100%"},editMode:xe,showWidth:l=>{e.field_options=(0,i.Z)((0,i.Z)({},e.field_options),{},{width:"".concat(l,"px")})},key:l,fieldLabel:e.field_name,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors,notes:null===e||void 0===e||null===(sa=e.options)||void 0===sa?void 0:sa.notes},t.createElement("div",{id:e.field_name,style:{width:"inherit",marginBottom:"160px"}},t.createElement(f.zx,{light:!0,clicked:()=>{var e,l;Ve(!0),(0,Le.Mk)(null!==(e=null===k||void 0===k||null===(l=k.created_by)||void 0===l?void 0:l.id)&&void 0!==e?e:ke.id,!0).pipe((0,c.q)(1)).subscribe({next:()=>{Ve(!1)}})},loading:qe,icon:t.createElement("img",{src:Z.Fd})}),!(bl||qe)&&t.createElement(pe.Scheduler,{events:Te.length>0?null===Te||void 0===Te||null===(va=Te.filter(e=>{var l,o;return(null===e||void 0===e||null===(l=e.add_info)||void 0===l?void 0:l.module_id)===(null===(o=re.processModule)||void 0===o?void 0:o.module_id)}))||void 0===va?void 0:va.map(e=>{var l,o;return{event_id:e.id,title:e.description,start:new Date(Date.parse(null===(l=e.add_info)||void 0===l?void 0:l.start)),end:null!==e&&void 0!==e&&e.completed_at?new Date(Date.parse(e.completed_at)):new Date(Date.parse(null===(o=e.add_info)||void 0===o?void 0:o.end)),admin_id:2,color:"#50b500",editable:!1,deletable:!1}}):[],navigation:!0,view:wl,agenda:(null===k||void 0===k||null===(ua=k.created_by)||void 0===ua?void 0:ua.id)!==ke.id&&!(null===k||void 0===k||null===(ca=k.created_by)||void 0===ca||!ca.id),day:{startHour:0,endHour:24,cellRenderer:e=>{let{height:l,start:o,onClick:i}=e;const n=!1,d=(0,M.Z)(e,Be);return t.createElement(f.zx,(0,w.Z)({style:{height:"100%",background:"transparent",cursor:"pointer"},clicked:()=>{xl(!0),Cl(void 0)},disabled:n},d))}},month:(null===k||void 0===k||null===(pa=k.created_by)||void 0===pa?void 0:pa.id)!==ke.id&&void 0!==(null===k||void 0===k?void 0:k.created_by)?null:{cellRenderer:e=>{let{height:l,start:o,onClick:i}=e;const n=!1,d=(0,M.Z)(e,Ye);return t.createElement(f.zx,(0,w.Z)({style:{height:"100%",background:"transparent",cursor:"pointer"},clicked:()=>{xl(!0),Cl(void 0)},disabled:n},d))}},week:(null===k||void 0===k||null===(ma=k.created_by)||void 0===ma?void 0:ma.id)!==ke.id&&void 0!==(null===k||void 0===k?void 0:k.created_by)?null:{weekDays:[0,1,2,3,4,5],weekStartOn:6,startHour:0,endHour:25,step:60,cellRenderer:e=>{let{height:l,start:o,onClick:i}=e;const n=!1,d=(0,M.Z)(e,He);return t.createElement(f.zx,(0,w.Z)({style:{height:"100%",background:"transparent",cursor:"pointer"},clicked:()=>{Ge(o),xl(!0),Cl(void 0)},disabled:n},d))}},onEventClick:e=>{xl(!0),Cl(null===Te||void 0===Te?void 0:Te.find(l=>l.id===e.event_id))},onViewChange:e=>Ml(e)}),bl&&t.createElement(nl,{modalVisible:bl,heading:null!==e&&void 0!==e&&null!==(fa=e.options)&&void 0!==fa&&fa.title?null===e||void 0===e||null===(_a=e.options)||void 0===_a?void 0:_a.title:El?"Update Calendar":"Create New Calendar",task:El,isProcess:!0,blured:!1,onClose:()=>xl(!1),isEdit:!!El,statuses:null===e||void 0===e||null===(ya=e.options)||void 0===ya?void 0:ya.list,priority:null===e||void 0===e||null===(ha=e.options)||void 0===ha?void 0:ha.priority,span:null===e||void 0===e||null===(ga=e.options)||void 0===ga?void 0:ga.span,start_date:je})));if("Video"===(null===e||void 0===e?void 0:e.data_type_name)&&null!==e&&void 0!==e&&null!==(ho=e.options)&&void 0!==ho&&ho.start)return t.createElement(_e.Z,{enabled:Wo,width:"100%",editMode:xe,style:{backgroundColor:"var(--app-color-gray-lightest)"},key:l,fieldLabel:e.field_name,notes:null===e||void 0===e||null===(ba=e.options)||void 0===ba?void 0:ba.notes,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors},t.createElement("div",{style:{width:"100%",height:"auto",border:"0px solid var(--app-color-gray-light)"}},t.createElement("div",{id:"custom-input",style:{cursor:"pointer",display:"flex",justifyContent:"center",width:"100%",alignItems:"stretch",padding:"5px",border:"0px solid var(--app-color-gray-lighter)"}},t.createElement(C.G,{icon:E.WRo,style:{width:"14px",height:"14px"}}),t.createElement("input",{value:e.value?b()(e.value).format("DD MMMM YYYY HH:mm"):"",disabled:!0,type:"text",style:{flex:1,marginTop:"auto",marginBottom:"auto",outline:"none",fontFamily:"var(--app-text-font-mobile)",fontSize:"16px",lineHeight:"20px",color:"black",textAlign:"left",maxWidth:"98%",border:"0px"},onChange:e=>{}})),t.createElement(Fe.Z,{payload:{name:null===k||void 0===k?void 0:k.id}})));if("Video"!==(null===e||void 0===e?void 0:e.data_type_name)||null!==e&&void 0!==e&&null!==(go=e.options)&&void 0!==go&&go.start){var Ha,Va,ja,Ga,Ja,Ka,Qa,Xa,$a,er,lr,or,ir,tr,nr,dr,ar,rr,sr,vr,ur,cr,pr,mr,fr,_r,yr,hr,gr,br,xr,Er,Cr,wr,Mr,Sr,kr,Zr,Ir,Nr,Tr,Dr,Pr,Ar,Or,Lr,zr,Rr,Ur,Fr,Wr,qr,Br,Yr,Hr;if("Radio"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(bo=e.options)||void 0===bo||null===(xo=bo.list)||void 0===xo?void 0:xo.length)>0)return t.createElement(_e.Z,{enabled:Wo,width:"100%",style:{backgroundColor:"var(--app-color-gray-lightest)",padding:"10px"},editMode:xe,key:l,fieldLabel:e.field_name,notes:null===e||void 0===e||null===(Ha=e.options)||void 0===Ha?void 0:Ha.notes,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors},t.createElement("div",{style:{width:"100%",border:"1px solid var(--app-color-gray-light)",padding:"20px",fontSize:"16px",display:"flex",flexDirection:"column",marginTop:"10px"}},null===e||void 0===e||null===(Va=e.options)||void 0===Va?void 0:Va.list.map((o,i)=>t.createElement("div",{key:i,style:{display:"flex",padding:"20px 0"}},t.createElement("input",{style:{margin:"0 20px"},type:"radio",id:o,name:e.field_name,value:o,checked:(null===e||void 0===e?void 0:e.value)===o,onChange:e=>{var o;return P(null===(o=e.target)||void 0===o?void 0:o.value,l)}}),t.createElement("label",{htmlFor:o,for:o},o)))));if("People"===(null===e||void 0===e?void 0:e.data_type_name)&&null!==e&&void 0!==e&&null!==(Eo=e.options)&&void 0!==Eo&&Eo.calendar){var Vr,jr,Gr,Jr,Kr,Qr,Xr,$r,es,ls,os,is,ts,ns,ds,as,rs,ss,vs,us,cs;const o=JSON.parse(null!==(Vr=null===e||void 0===e?void 0:e.value)&&void 0!==Vr?Vr:JSON.stringify({user:0})),n=Te.find(e=>e.id===(null===o||void 0===o?void 0:o.task)),d=null===Te||void 0===Te?void 0:Te.filter(l=>{var i,t,n,d,a,r,s,v;return(null!==l&&void 0!==l&&null!==(i=l.add_info)&&void 0!==i&&i.pos?null===e||void 0===e||null===(t=e.options)||void 0===t||null===(n=t.position_id)||void 0===n?void 0:n.includes(null===l||void 0===l||null===(d=l.add_info)||void 0===d?void 0:d.pos):null===l||void 0===l?void 0:l.id)&&(null===l||void 0===l||null===(a=l.add_info)||void 0===a?void 0:a.module_id)===(null===(r=re.processModule)||void 0===r?void 0:r.module_id)&&l.creator.id===(null===o||void 0===o?void 0:o.user)&&!(null!==l&&void 0!==l&&null!==(s=l.assignee)&&void 0!==s&&s.id)&&b()((0,g.now)()).diff(b()(null===l||void 0===l||null===(v=l.add_info)||void 0===v?void 0:v.start),"seconds")<0});return t.createElement(_e.Z,{titleProps:{fontSize:"14px",color:"var(--app-color-gray-dark)",fontWeight:"normal"},enabled:Wo,width:"100%",editMode:xe,dragEnd:l=>{var o;const i=null===(o=document.getElementById(null===S||void 0===S?void 0:S.name))||void 0===o?void 0:o.getBoundingClientRect();document.getElementById(e.field_name).style.position="absolute",document.getElementById(e.field_name).style.top="".concat(l.top-i.top,"px"),document.getElementById(e.field_name).style.left="".concat(l.left-i.left,"px")},key:l,fieldLabel:null===e||void 0===e?void 0:e.field_name,notes:null===e||void 0===e||null===(jr=e.options)||void 0===jr?void 0:jr.notes,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors},t.createElement("div",{style:{width:"100%"}},(null===e||void 0===e||null===(Gr=e.options)||void 0===Gr||null===(Jr=Gr.dropdown)||void 0===Jr?void 0:Jr.length)>0&&t.createElement("div",{style:{width:"100%",border:"0.5px solid var(--app-color-gray-dark)"}},t.createElement(A.Z,{visible:null===e||void 0===e?void 0:e.visible,mandatory:null===e||void 0===e?void 0:e.mandatory,className:ce.dropdownClassContainer,items:null===e||void 0===e||null===(Kr=e.options)||void 0===Kr||null===(Qr=Kr.dropdown)||void 0===Qr?void 0:Qr.map(e=>({label:e,value:e})),value:null===o||void 0===o?void 0:o.pos,error:null===e||void 0===e?void 0:e.errors,onChange:i=>{var t,n;i.length>0&&(o.pos=void 0,o.user=void 0,P(JSON.stringify(o),l),Se([]),Ve(!0),(0,be.FY)(null===e||void 0===e||null===(t=e.options)||void 0===t?void 0:t.position_id,null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.filter,i).pipe((0,c.q)(1)).subscribe({next:e=>{Ve(!1),Se(e),setTimeout(()=>{o.pos=i,P(JSON.stringify(o),l)},0)},error:()=>Ve(!1)}))},selectionType:null===e||void 0===e||null===(Xr=e.options)||void 0===Xr?void 0:Xr.type,fieldIcon:null===e||void 0===e?void 0:e.icon})),0==(null===Me||void 0===Me?void 0:Me.length)&&!qe&&t.createElement("p",null,"No ".concat(e.field_name," found")),0==(null===Me||void 0===Me?void 0:Me.length)&&qe&&t.createElement("p",null,"Searching for ".concat(e.field_name)),!n&&t.createElement(T.default,{rowStyleSelected:{border:"2px solid var(--app-color-gray-light)"},initialSelected:null!==e&&void 0!==e&&e.value?Me.filter(l=>{var o,i;return(null===l||void 0===l||null===(o=l.user)||void 0===o||null===(i=o.positions)||void 0===i?void 0:i.filter(l=>{var o,i;return null===e||void 0===e||null===(o=e.options)||void 0===o||null===(i=o.position_id)||void 0===i?void 0:i.includes(null===l||void 0===l?void 0:l.id)}).length)>0}).map(e=>e.value).indexOf(null===o||void 0===o?void 0:o.user):void 0,card:!0,isReport:!1,"app-variant-is-mobile":"true",columns:["Name","Info","About",...null!==($r=null===$||void 0===$||null===(es=$.misc_info)||void 0===es?void 0:es.profile)&&void 0!==$r?$r:["Rate"],"Location","Photo","Ratings"],list:Me.filter(l=>{var o,i;return(null===l||void 0===l||null===(o=l.user)||void 0===o||null===(i=o.positions)||void 0===i?void 0:i.filter(l=>{var o,i;return null===e||void 0===e||null===(o=e.options)||void 0===o||null===(i=o.position_id)||void 0===i?void 0:i.includes(null===l||void 0===l?void 0:l.id)}).length)>0}).map(e=>{var l,o,n,d,a,r,s,v,u;const c=null===e||void 0===e||null===(l=e.user)||void 0===l||null===(o=l.ratings)||void 0===o?void 0:o.map(e=>+e.ratings);return(0,i.Z)((0,i.Z)({},null!==(n=null===(d=e.user)||void 0===d||null===(a=d.options)||void 0===a?void 0:a.add_info)&&void 0!==n?n:{}),{},{Name:"".concat(e.user.first_name," ").concat(e.user.last_name),Location:t.createElement("div",{style:{marginTop:"10px",fontWeight:"bolder",fontSize:"12px"}},null===(r=e.user)||void 0===r?void 0:r.city),Info:null===(s=e.user.options)||void 0===s?void 0:s.info,id:e.user.id,Photo:null!=(null===(v=e.user)||void 0===v?void 0:v.photo)?null===(u=e.user)||void 0===u?void 0:u.photo:null===$||void 0===$?void 0:$.logo,Ratings:(null===c||void 0===c?void 0:c.length)>0&&t.createElement("div",{className:ce.simpleNames},Array(Math.round(ie.Z(te.Z,[ne.Z,de.Z])(c))).fill(0).map((e,l)=>t.createElement(C.G,{key:l,icon:E.Tab,style:{color:"var(--app-color-blue)"}})),Array(5-Math.round(ie.Z(te.Z,[ne.Z,de.Z])(c))).fill(0).map((e,l)=>t.createElement(C.G,{key:l,icon:E.Tab,style:{color:"lightgray"}})))})}),onListItemClick:e=>{if(e){const i=Me.find(l=>l.value===e.id);o.user=null===i||void 0===i?void 0:i.value,P(JSON.stringify(o),l),Ve(!0),(0,Le.Mk)(null===i||void 0===i?void 0:i.value,!0).pipe((0,c.q)(1)).subscribe({next:()=>Ve(!1),error:()=>Ve(!1)})}}},(null===d||void 0===d?void 0:d.length)>0&&t.createElement("p",null,"Schedules"),(null===d||void 0===d?void 0:d.length)>0&&(null===d||void 0===d?void 0:d.length)>0?t.createElement(ve.tq,{slidesPerView:3,centeredSlides:!0,spaceBetween:10,initialSlide:1,pagination:{clickable:!0,dynamicBullets:!0},modules:[se.pt,se.tl],className:"mySwiper",style:{border:"0.8px dashed gray",padding:"5px",height:"200px",display:(null===d||void 0===d?void 0:d.length)>0?"":"none",zIndex:"0"}},null===(ls=J.Z([oe.Z(Q.Z("due_date"))])(d))||void 0===ls?void 0:ls.map((e,l)=>t.createElement(ve.o5,{key:l+200,className:ce.swiperslide},t.createElement("div",{className:ce.dashboardCard,onClick:()=>{xl(!0),Cl(e)}},t.createElement("div",{style:{fontSize:"10px"}},b()(new Date(e.add_info.start)).format("h:mm a")),e.add_info.end!==e.add_info.start&&t.createElement("div",{style:{fontSize:"10px"}},b()(new Date(e.add_info.end)).format("h:mm a")),t.createElement("hr",{style:{border:"0.8px dashed gray"}}),t.createElement("p",{style:{fontSize:"12px",fontWeight:"bold"}},b()(new Date(e.add_info.start)).format("MMM")),t.createElement("div",{style:{fontSize:"20px",fontWeight:"bold"}},b()(new Date(e.add_info.start)).format("DD")))))):null!==o&&void 0!==o&&o.user?t.createElement("p",{style:{fontSize:"12px",paddingLeft:"10px"}},qe?"Searching for Schedules":"No Schedules Found"):t.createElement("div",null)),t.createElement("div",{className:ce.centerDiv},!n&&!(null!==e&&void 0!==e&&null!==(os=e.options)&&void 0!==os&&os.dropdown)&&(!(null!==e&&void 0!==e&&e.last_page)||1===(null===e||void 0===e?void 0:e.last_page))&&t.createElement(f.zx,{title:"More",style:{width:"30%"},clicked:()=>{var i,t;(0,be.Wz)(null===(i=re.processModule.module)||void 0===i||null===(t=i.options)||void 0===t?void 0:t.positions,5,1).pipe((0,p.P)()).subscribe({next:i=>{e.last_page=null===i||void 0===i?void 0:i.last_page,Se(null===i||void 0===i?void 0:i.data),o.user=void 0,P(JSON.stringify(o),l)}})}}),!n&&!(null!==e&&void 0!==e&&null!==(is=e.options)&&void 0!==is&&is.dropdown)&&(null===e||void 0===e?void 0:e.last_page)>1&&t.createElement("div",{style:{display:"flex"}},[...Array(Math.ceil(+(null===e||void 0===e?void 0:e.last_page)))].map((i,n)=>t.createElement(f.zx,{title:n+1,clear:!0,key:n,style:{width:"40px",display:n<18?"":"none"},titleContainer:ce.pageContainer,disabled:n==(null===e||void 0===e?void 0:e.page)-1,clicked:()=>{var i,t;e.page=n+1,(0,be.Wz)(null===(i=re.processModule.module)||void 0===i||null===(t=i.options)||void 0===t?void 0:t.positions,5,null===e||void 0===e?void 0:e.page).pipe((0,p.P)()).subscribe({next:i=>{e.last_page=null===i||void 0===i?void 0:i.last_page,Se(null===i||void 0===i?void 0:i.data),o.user=void 0,P(JSON.stringify(o),l)}})}})))),n&&t.createElement(T.default,{modern:!0,isReport:!1,"app-variant-is-mobile":"true",columns:["Responsible",null!==(ts=null===e||void 0===e||null===(ns=e.options)||void 0===ns?void 0:ns.header)&&void 0!==ts?ts:"Name",null!==(ds=null===e||void 0===e||null===(as=e.options)||void 0===as?void 0:as.start)&&void 0!==ds?ds:"Date","Photo"],list:[n].map(l=>{var o,i,t,n,d,a;return{[null!==(o=null===e||void 0===e||null===(i=e.options)||void 0===i?void 0:i.header)&&void 0!==o?o:"Name"]:l.name,[null!==(t=null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.start)&&void 0!==t?t:"Date"]:b()(new Date(null===(d=l.add_info)||void 0===d?void 0:d.start)).format("MMM DD h:mm a"),Responsible:"".concat(l.creator.first_name," ").concat(l.creator.last_name),Position:"",Photo:null===(a=l.creator)||void 0===a?void 0:a.photo}}),onListItemClick:e=>{e&&(xl(!0),Cl(n))}}),bl&&t.createElement(nl,{save:!1,modalVisible:bl,heading:null!==(rs=null===e||void 0===e||null===(ss=e.options)||void 0===ss?void 0:ss.header)&&void 0!==rs?rs:El?"Update Calendar":"Create New Calendar",labels:null===e||void 0===e?void 0:e.options,task:El,isProcess:!0,blured:!1,onClose:()=>xl(!1),isEdit:!!El,statuses:null===e||void 0===e||null===(vs=e.options)||void 0===vs?void 0:vs.list,priority:null===e||void 0===e||null===(us=e.options)||void 0===us?void 0:us.priority,span:null===e||void 0===e||null===(cs=e.options)||void 0===cs?void 0:cs.span,start_date:je,onUpdate:i=>{if(i.creator.id!==(null===ke||void 0===ke?void 0:ke.id)&&(null===i||void 0===i?void 0:i.assignee_id)===(null===ke||void 0===ke?void 0:ke.id)){var t;if(L.assigned_to=i.creator.id,o.task=null===i||void 0===i?void 0:i.id,null!==i&&void 0!==i&&null!==(t=i.add_info)&&void 0!==t&&t.value){var n,d,a,r,s,v,u,c,p;o.value=null===i||void 0===i||null===(n=i.add_info)||void 0===n?void 0:n.value;const l=null===(d=L.components.find(l=>l.selected_fields.find(l=>{var o;return l.field_name===(null===(o=e.options)||void 0===o?void 0:o.valueL)})))||void 0===d?void 0:d.selected_fields.find(l=>{var o;return l.field_name===(null===(o=e.options)||void 0===o?void 0:o.valueL)});var m;if(l)l.value=null===i||void 0===i||null===(m=i.add_info)||void 0===m?void 0:m.value;const t=null===(a=L.newStepComponents.find(l=>l.selected_fields.find(l=>{var o;return l.field_name===(null===(o=e.options)||void 0===o?void 0:o.valueL)})))||void 0===a?void 0:a.selected_fields.find(l=>{var o;return l.field_name===(null===(o=e.options)||void 0===o?void 0:o.valueL)});var f;if(t)t.value=null===i||void 0===i||null===(f=i.add_info)||void 0===f?void 0:f.value;const y=null===(r=re.processModule)||void 0===r||null===(s=r.steps)||void 0===s||null===(v=s.find(l=>{var o;return null===(o=l.component_blueprints)||void 0===o?void 0:o.find(l=>{var o;return null===l||void 0===l||null===(o=l.selected_fields)||void 0===o?void 0:o.find(l=>{var o;return l.field_name===(null===(o=e.options)||void 0===o?void 0:o.valueL)})})}))||void 0===v||null===(u=v.component_blueprints)||void 0===u||null===(c=u.find(l=>{var o;return null===l||void 0===l||null===(o=l.selected_fields)||void 0===o?void 0:o.find(l=>{var o;return l.field_name===(null===(o=e.options)||void 0===o?void 0:o.valueL)})}))||void 0===c||null===(p=c.selected_fields)||void 0===p?void 0:p.find(l=>{var o;return l.field_name===(null===(o=e.options)||void 0===o?void 0:o.valueL)});var _;if(y)y.value=null===i||void 0===i||null===(_=i.add_info)||void 0===_?void 0:_.value}P(JSON.stringify(o),l)}}})))}if("People"===(null===e||void 0===e?void 0:e.data_type_name)&&(!0===(null===e||void 0===e||null===(Co=e.options)||void 0===Co?void 0:Co.slider)||Sl)&&(null===me||void 0===me?void 0:me.length)>0)return t.createElement(_e.Z,{titleProps:{fontSize:"14px",color:"var(--app-color-gray-dark)",fontWeight:"normal",paddingLeft:"5px"},enabled:Wo,width:"100%",editMode:xe,showWidth:l=>{e.field_options=(0,i.Z)((0,i.Z)({},e.field_options),{},{width:"".concat(l,"px")})},dragEnd:l=>{var o;const i=null===(o=document.getElementById(null===S||void 0===S?void 0:S.name))||void 0===o?void 0:o.getBoundingClientRect();document.getElementById(e.field_name).style.position="absolute",document.getElementById(e.field_name).style.top="".concat(l.top-i.top,"px"),document.getElementById(e.field_name).style.left="".concat(l.left-i.left,"px")},key:l,notes:null===e||void 0===e||null===(ja=e.options)||void 0===ja?void 0:ja.notes,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors},t.createElement(ve.tq,{slidesPerView:1,centeredSlides:!0,spaceBetween:10,initialSlide:0,pagination:{clickable:!0,dynamicBullets:!0},style:{zIndex:0},modules:[se.pt,se.tl],className:"mySwiper"},me.filter(l=>{var o;return(null===l||void 0===l||null===(o=l.positions)||void 0===o?void 0:o.filter(l=>{var o,i;return null===e||void 0===e||null===(o=e.options)||void 0===o||null===(i=o.position_id)||void 0===i?void 0:i.includes(null===l||void 0===l?void 0:l.id)}).length)>0}).map((o,n)=>{var d,a,r,s,v,u,c,p,m,f,_;const y=null===o||void 0===o||null===(d=o.ratings)||void 0===d?void 0:d.map(e=>+e.ratings);return t.createElement(ve.o5,{key:n,className:ce.swiperslide},t.createElement("div",{style:{padding:"20px",width:"100%"},onClick:()=>{var i;e.open=null===e||void 0===e||!e.open,e.idx=l,null!==e&&void 0!==e&&null!==(i=e.options)&&void 0!==i&&i.skip?kl(e.open):P(null===o||void 0===o?void 0:o.id,l)}},t.createElement(Ae.Z,{photo:null===o||void 0===o?void 0:o.photo,height:null!==e&&void 0!==e&&e.open?"auto":"300px",width:"100%",firstName:"".concat(null===o||void 0===o?void 0:o.first_name),lastName:"".concat(null===o||void 0===o?void 0:o.last_name),position:t.createElement("div",{style:{marginTop:"10px"}},null===o||void 0===o?void 0:o.city),email:null===(a=o.options)||void 0===a?void 0:a.info},(null===y||void 0===y?void 0:y.length)>0&&t.createElement("div",{className:ce.simpleNames},Array(Math.round(ie.Z(te.Z,[ne.Z,de.Z])(y))).fill(0).map((e,l)=>t.createElement(C.G,{key:l,icon:E.Tab,style:{height:"15px",width:"15px",color:"var(--app-color-blue)"}})),Array(5-Math.round(ie.Z(te.Z,[ne.Z,de.Z])(y))).fill(0).map((e,l)=>t.createElement(C.G,{key:l,icon:E.Tab,style:{height:"15px",width:"15px",color:"lightgray"}}))),t.createElement("div",{className:ce.simpleNames,style:{pointerEvents:"none",padding:"20px 10px 0 10px",color:"gray"}},(null===(r=e.options)||void 0===r?void 0:r.info)&&(null===e||void 0===e?void 0:e.open)&&(null===e||void 0===e?void 0:e.idx)==l&&t.createElement(t.Fragment,null,t.createElement("p",{style:{fontSize:"14px"}},"General Info:"),t.createElement(T.default,{rowStyleSelected:{border:"2px solid var(--app-color-gray-light)"},card:!0,isReport:!1,"app-variant-is-mobile":"true",columns:["First Name","Last Name","Phone","Address","City","Postal","Bio"],list:[o].map(e=>{var l,o,i,t,n,d;return{"First Name":"".concat(null!==(l=null===e||void 0===e?void 0:e.first_name)&&void 0!==l?l:""),"Last Name":"".concat(null!==(o=null===e||void 0===e?void 0:e.last_name)&&void 0!==o?o:""),Phone:"".concat(null!==(i=null===e||void 0===e?void 0:e.phone)&&void 0!==i?i:""),Address:"".concat(null!==(t=null===e||void 0===e?void 0:e.address)&&void 0!==t?t:""),City:"".concat(null!==(n=null===e||void 0===e?void 0:e.city)&&void 0!==n?n:""),Postal:"".concat(null!==(d=null===e||void 0===e?void 0:e.postal)&&void 0!==d?d:"")}})})),(null===(s=e.options)||void 0===s?void 0:s.other)&&(null===e||void 0===e?void 0:e.open)&&(null===e||void 0===e?void 0:e.idx)==l&&Object.keys(null!==(v=null===o||void 0===o||null===(u=o.options)||void 0===u?void 0:u.add_info)&&void 0!==v?v:{}).length>1&&t.createElement(t.Fragment,null,t.createElement("p",{style:{fontSize:"14px"}},"More Info:"),t.createElement(T.default,{rowStyleSelected:{border:"2px solid var(--app-color-gray-light)"},card:!0,isReport:!1,"app-variant-is-mobile":"true",columns:Object.keys(null!==(c=null===o||void 0===o||null===(p=o.options)||void 0===p?void 0:p.add_info)&&void 0!==c?c:{}),list:[o].map(e=>{var l,o;return(0,i.Z)((0,i.Z)({},null!==(l=null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.add_info)&&void 0!==l?l:{}),{},{Rate:""})})})),(null===(m=e.options)||void 0===m?void 0:m.info)&&(null===e||void 0===e?void 0:e.open)&&(null===o||void 0===o||null===(f=o.ratings)||void 0===f?void 0:f.length)>0&&t.createElement(t.Fragment,null,t.createElement("p",{style:{fontSize:"14px"}},"What other users say:"),t.createElement(T.default,{rowStyleSelected:{border:"2px solid var(--app-color-gray-light)"},card:!0,isReport:!1,columns:["Feedback"],list:null===o||void 0===o||null===(_=o.ratings)||void 0===_?void 0:_.map((e,l)=>({Feedback:'"'.concat(e.comments,'"')}))}))))))})));if("People"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(wo=e.options)||void 0===wo||null===(Mo=wo.position_id)||void 0===Mo?void 0:Mo.length)>0)return t.createElement(_e.Z,{titleProps:{fontSize:"14px",color:"var(--app-color-gray-dark)",fontWeight:"normal",paddingLeft:"5px"},enabled:Wo,width:"100%",style:{marginTop:"0px",border:"0px solid var(--app-color-gray-lighter)",padding:"5px",marginBottom:"10px",backgroundColor:"var(--app-color-gray-lightest)"},editMode:xe,showWidth:l=>{e.field_options=(0,i.Z)((0,i.Z)({},e.field_options),{},{width:"".concat(l,"px")})},dragEnd:l=>{var o;const i=null===(o=document.getElementById(null===S||void 0===S?void 0:S.name))||void 0===o?void 0:o.getBoundingClientRect();document.getElementById(e.field_name).style.position="absolute",document.getElementById(e.field_name).style.top="".concat(l.top-i.top,"px"),document.getElementById(e.field_name).style.left="".concat(l.left-i.left,"px")},key:l,fieldLabel:e.field_name,notes:null===e||void 0===e||null===(Ga=e.options)||void 0===Ga?void 0:Ga.notes,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors},t.createElement("div",{style:{width:"100%"}},t.createElement(A.Z,{onOpen:e=>{fl("50px"===ml?"180px":"50px")},onFocus:()=>{var l;return 0==Me.length&&Pl(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.position_id)},visible:null===e||void 0===e?void 0:e.visible,mandatory:null===e||void 0===e?void 0:e.mandatory,titleProps:{fontSize:"12px",color:"var(--app-color-gray-light)"},className:ce.dropdownClassContainer,items:Me.filter(l=>{var o,i;return(null===l||void 0===l||null===(o=l.user)||void 0===o||null===(i=o.positions)||void 0===i?void 0:i.filter(l=>{var o,i;return null===e||void 0===e||null===(o=e.options)||void 0===o||null===(i=o.position_id)||void 0===i?void 0:i.includes(null===l||void 0===l?void 0:l.id)}).length)>0}),value:"single"===(null===e||void 0===e||null===(Ja=e.options)||void 0===Ja?void 0:Ja.type)?null===(Ka=Me.find(l=>l.label===(null===e||void 0===e?void 0:e.value)))||void 0===Ka?void 0:Ka.label:e.value,loading:qe,error:null===e||void 0===e?void 0:e.errors,onChange:o=>{var i;if("single"===(null===e||void 0===e||null===(i=e.options)||void 0===i?void 0:i.type)){var t;const i=Me.find(e=>e.value===o);var n;if(1==(null===e||void 0===e||null===(t=e.options)||void 0===t?void 0:t.email))e.email=null===i||void 0===i||null===(n=i.user)||void 0===n?void 0:n.email;P(null===i||void 0===i?void 0:i.label,l)}else P(o,l);fl("50px")},onClicked:e=>fl(e?"180px":"50px"),selectionType:null===e||void 0===e||null===(Qa=e.options)||void 0===Qa?void 0:Qa.type,fieldIcon:null===e||void 0===e?void 0:e.icon})));if("People"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(So=e.options)||void 0===So||null===(ko=So.componentF)||void 0===ko?void 0:ko.length)>0&&(null===e||void 0===e||null===(Zo=e.options)||void 0===Zo||null===(Io=Zo.componentO)||void 0===Io?void 0:Io.length)>0){var ps,ms,fs,_s,ys,hs;const o=null===(ps=L.components.find(l=>l.selected_fields.filter(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.componentF)}).length>0))||void 0===ps?void 0:ps.selected_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.componentF)}),n=ae.find(l=>{var i;return l.component_fields.filter(e=>e.value===(null===o||void 0===o?void 0:o.value)).length>0&&l.module_id===(null===e||void 0===e||null===(i=e.options)||void 0===i?void 0:i.module_id)}),d=null===n||void 0===n?void 0:n.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.componentO)});return t.createElement(_e.Z,{titleProps:{fontSize:"14px",color:"var(--app-color-gray-dark)",fontWeight:"normal",paddingLeft:"5px"},enabled:Wo,width:"100%",style:{marginTop:"0px",border:"0px solid var(--app-color-gray-lighter)",padding:"5px",marginBottom:"10px",backgroundColor:"var(--app-color-gray-lightest)"},editMode:xe,showWidth:l=>{e.field_options=(0,i.Z)((0,i.Z)({},e.field_options),{},{width:"".concat(l,"px")})},key:l,fieldLabel:e.field_name,notes:null===e||void 0===e||null===(ms=e.options)||void 0===ms?void 0:ms.notes,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors},t.createElement("div",{style:{width:"100%"}},t.createElement(A.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-light)"},onFocus:()=>{var l;fl("180px"),0==Me.length&&Pl(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.position_id)},visible:null===e||void 0===e?void 0:e.visible,mandatory:null===e||void 0===e?void 0:e.mandatory,className:"multiple"===(null===e||void 0===e||null===(fs=e.options)||void 0===fs?void 0:fs.type)?ce.dropdownHeightClassContainer:ce.dropdownClassContainer,items:Me.filter(e=>{var l,o;return(null===e||void 0===e||null===(l=e.user)||void 0===l||null===(o=l.positions)||void 0===o?void 0:o.filter(e=>{var l;return null===d||void 0===d||null===(l=d.value)||void 0===l?void 0:l.split(",").includes(null===e||void 0===e?void 0:e.name)}).length)>0}),value:"single"===(null===e||void 0===e||null===(_s=e.options)||void 0===_s?void 0:_s.type)?null===(ys=Me.find(l=>l.label===(null===e||void 0===e?void 0:e.value)))||void 0===ys?void 0:ys.label:e.value,loading:qe,error:null===e||void 0===e?void 0:e.errors,onChange:o=>{var i;if("single"===(null===e||void 0===e||null===(i=e.options)||void 0===i?void 0:i.type)){var t;const i=Me.find(e=>e.value===o);var n;if(1==(null===e||void 0===e||null===(t=e.options)||void 0===t?void 0:t.email))e.email=null===i||void 0===i||null===(n=i.user)||void 0===n?void 0:n.email;P(null===i||void 0===i?void 0:i.label,l)}else P(o,l);fl("50px")},onClicked:e=>fl(e?"180px":"50px"),selectionType:null===e||void 0===e||null===(hs=e.options)||void 0===hs?void 0:hs.type,fieldIcon:null===e||void 0===e?void 0:e.icon,placeholder:"Select user..."})))}if("People"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(No=e.options)||void 0===No||null===(To=No.componentF)||void 0===To?void 0:To.length)>0&&(null===e||void 0===e||null===(Do=e.options)||void 0===Do||null===(Po=Do.componentUO)||void 0===Po?void 0:Po.length)>0){var gs,bs,xs,Es,Cs,ws;const o=null===(gs=L.components.find(l=>l.selected_fields.filter(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.componentF)}).length>0))||void 0===gs?void 0:gs.selected_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.componentF)}),n=ae.filter(l=>{var o;return l.module_id===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.module_id)}).find(e=>e.component_fields.filter(e=>(null===e||void 0===e?void 0:e.value)===(null===o||void 0===o?void 0:o.value)).length>0),d=n?null===n||void 0===n?void 0:n.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.componentUO)}):"";return t.createElement(_e.Z,{titleProps:{fontSize:"14px",color:"var(--app-color-gray-dark)",fontWeight:"normal",paddingLeft:"5px"},enabled:Wo,width:"100%",style:{marginTop:"0px",border:"0px solid var(--app-color-gray-lighter)",padding:"5px",marginBottom:"10px",backgroundColor:"var(--app-color-gray-lightest)"},editMode:xe,showWidth:l=>{e.field_options=(0,i.Z)((0,i.Z)({},e.field_options),{},{width:"".concat(l,"px")})},key:l,fieldLabel:e.field_name,notes:null===e||void 0===e||null===(bs=e.options)||void 0===bs?void 0:bs.notes,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors},t.createElement(A.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-light)"},onFocus:()=>{var l;return 0==Me.length&&Pl(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.position_id)},visible:null===e||void 0===e?void 0:e.visible,mandatory:null===e||void 0===e?void 0:e.mandatory,className:"multiple"===(null===e||void 0===e||null===(xs=e.options)||void 0===xs?void 0:xs.type)?ce.dropdownHeightClassContainer:ce.dropdownClassContainer,items:Me.filter(e=>{var l;return null===d||void 0===d||null===(l=d.value)||void 0===l?void 0:l.split(",").includes(null===e||void 0===e?void 0:e.label)}),value:"single"===(null===e||void 0===e||null===(Es=e.options)||void 0===Es?void 0:Es.type)?null===(Cs=Me.find(l=>l.label===(null===e||void 0===e?void 0:e.value)))||void 0===Cs?void 0:Cs.label:e.value,loading:qe,error:null===e||void 0===e?void 0:e.errors,onChange:o=>{var i;if("single"===(null===e||void 0===e||null===(i=e.options)||void 0===i?void 0:i.type)){var t;const i=Me.find(e=>e.value===o);var n;if(1==(null===e||void 0===e||null===(t=e.options)||void 0===t?void 0:t.email))e.email=null===i||void 0===i||null===(n=i.user)||void 0===n?void 0:n.email;P(null===i||void 0===i?void 0:i.label,l)}else P(o,l);fl("50px")},onClicked:e=>fl(e?"180px":"50px"),selectionType:null===e||void 0===e||null===(ws=e.options)||void 0===ws?void 0:ws.type,fieldIcon:null===e||void 0===e?void 0:e.icon,placeholder:"Select user..."}))}if("Status"===(null===e||void 0===e?void 0:e.data_type_name)){var Ms,Ss,ks,Zs,Is,Ns,Ts,Ds,Ps,As,Os,Ls,zs,Rs,Us,Fs,Ws;let o=(null===(Ms=e.options)||void 0===Ms||null===(Ss=Ms.list)||void 0===Ss?void 0:Ss.length)>0?null===(ks=e.options)||void 0===ks||null===(Zs=ks.list)||void 0===Zs?void 0:Zs.map(e=>({label:e,value:e})):1==(null===re||void 0===re||null===(Is=re.processModule)||void 0===Is||null===(Ns=Is.module)||void 0===Ns||null===(Ts=Ns.options)||void 0===Ts?void 0:Ts.asGraphical)?[{label:"Show",value:"Show"},{label:"Hide",value:"Hide"}]:(null===$||void 0===$||null===(Ds=$.misc_info)||void 0===Ds||null===(Ps=Ds.status)||void 0===Ps?void 0:Ps.length)>0?null===$||void 0===$||null===(As=$.misc_info)||void 0===As?void 0:As.status:v.MO;var qs;if((null===$||void 0===$||null===(Os=$.misc_info)||void 0===Os||null===(Ls=Os.rules)||void 0===Ls?void 0:Ls.length)>0)null===$||void 0===$||null===(qs=$.misc_info)||void 0===qs||qs.rules.filter(e=>"status"===e.type).filter(l=>{l.valueCondition===e.value&&(o="0"===l.allow?o.filter(o=>{var i;return l.values.concat(null===(i=e.options)||void 0===i?void 0:i.list).includes(o.value)}):o.filter(o=>{var i;return!l.values.concat(null===(i=e.options)||void 0===i?void 0:i.list).includes(o.value)}))});return null!==re&&void 0!==re&&null!==(zs=re.processModule)&&void 0!==zs&&null!==(Rs=zs.module)&&void 0!==Rs&&null!==(Us=Rs.options)&&void 0!==Us&&Us.canCancel&&(o=o.concat({label:"Request Cancellation",value:"Cancellation Request"})),t.createElement(_e.Z,{titleProps:{fontSize:"14px",color:"var(--app-color-gray-dark)",fontWeight:"normal",paddingLeft:"5px"},enabled:Wo,width:"100%",style:{marginTop:"0px",border:"0px solid var(--app-color-gray-lighter)",padding:"5px",marginBottom:"10px",backgroundColor:"var(--app-color-gray-lightest)"},editMode:xe,showWidth:l=>{e.field_options=(0,i.Z)((0,i.Z)({},e.field_options),{},{width:"".concat(l,"px")})},key:l,fieldLabel:e.field_name,notes:null===e||void 0===e||null===(Fs=e.options)||void 0===Fs?void 0:Fs.notes,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors},t.createElement(A.Z,{titleProps:{fontSize:"14px",color:"var(--app-color-gray-dark)",fontWeight:"normal",paddingLeft:"5px"},className:ce.multiselectComponentNoBorder,style:{border:"0px"},key:l,visible:e.visible,mandatory:e.mandatory,value:null!==(Ws=e.value)&&void 0!==Ws?Ws:"",items:o,error:e.errors,onClicked:e=>fl(e?"180px":"50px"),onChange:e=>{$.start=!0,fl("50px"),P(e,l);const o=S.selected_fields.find(l=>"Date"===l.data_type_name&l.field_name===e);o&&(o.value=new Date(b().now()))},fieldIcon:e.icon}))}if("Profile"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(Ao=e.options)||void 0===Ao||null===(Oo=Ao.type)||void 0===Oo?void 0:Oo.length)>0){var Bs,Ys,Hs;let l=ke.id;if("creator"!==e.options.type&&"wallet"!==e.options.type||null===k||void 0===k||null===(Bs=k.created_by)||void 0===Bs||!Bs.id)if("creator"!==e.options.type&&"wallet"!==e.options.type||null!==k&&void 0!==k&&null!==(Ys=k.created_by)&&void 0!==Ys&&Ys.id)if("owner"===e.options.type){var Vs;l=null!==k&&void 0!==k&&k.options?null===(Vs=JSON.parse(null===k||void 0===k?void 0:k.options))||void 0===Vs?void 0:Vs.owner:""}else{if("custom"!==e.options.type)return null;var js;l=null===e||void 0===e||null===(js=e.options)||void 0===js?void 0:js.id}else l=ke.id;else l=k.user_id;return(null===(Hs=l)||void 0===Hs?void 0:Hs.length)>0?(null===me||void 0===me?void 0:me.length)>0&&(null===me||void 0===me?void 0:me.filter(e=>e.id===l).map((l,o)=>{var i,n,d,a,r,s;return t.createElement("div",{className:ce.centerDiv,key:o},"wallet"===e.options.type?t.createElement(T.default,{modern:!0,columns:["Name","Wallet","Email","Photo"],list:[{Name:"".concat(null===l||void 0===l?void 0:l.first_name," ").concat(null===l||void 0===l?void 0:l.last_name),Wallet:"".concat(null===(i=l.wallet)||void 0===i?void 0:i.toFixed(2)),Email:null===l||void 0===l?void 0:l.email,Photo:l.photo}]}):t.createElement(Ae.Z,{photo:null===l||void 0===l?void 0:l.photo,noPhoto:0==(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.show),firstName:"".concat(null===l||void 0===l?void 0:l.first_name),lastName:"".concat(null===l||void 0===l?void 0:l.last_name),position:null===l||void 0===l||null===(d=l.positions)||void 0===d||null===(a=d.slice(0,1))||void 0===a?void 0:a.map(e=>e.name),email:null===l||void 0===l?void 0:l.email,cardClicked:()=>{},width:y.tq?"100%":""}),(null===e||void 0===e||null===(r=e.options)||void 0===r?void 0:r.notes)&&t.createElement("p",null,null===e||void 0===e||null===(s=e.options)||void 0===s?void 0:s.notes))})):null}if("Pin"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(Lo=e.options)||void 0===Lo||null===(zo=Lo.pintype)||void 0===zo?void 0:zo.length)>0)return t.createElement(_e.Z,{style:{border:"0",width:"100%"},enabled:Wo,key:l,fieldLabel:e.field_name,notes:null===e||void 0===e||null===(Xa=e.options)||void 0===Xa?void 0:Xa.notes,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors},null!==e&&void 0!==e&&null!==($a=e.options)&&void 0!==$a&&$a.source||null!==(er=e.options)&&void 0!==er&&er.destination?t.createElement("div",{style:{color:"var(--app-color-gray-dark)",height:"inherit",width:"100%",display:null!==e&&void 0!==e&&e.visible?"":"none"}},t.createElement("div",{className:ce.filtersContainer,style:{color:"var(--app-color-gray-dark)",height:"inherit",width:"100%",display:null!==e&&void 0!==e&&e.visible?"":"none"}},t.createElement("div",{className:ce.actionsContainer,style:{fontSize:"12px"},onClick:()=>{pl({source:!0,destination:!1,field:e,index:l})}},t.createElement("div",{style:{width:"30%",textAlign:"left"}},t.createElement(C.G,{icon:1==(null===e||void 0===e||null===(lr=e.options)||void 0===lr?void 0:lr.destination)?E.W3K:E.opg,style:{width:"20px",height:"20px",marginRight:"5px",color:"blue"}}),1==(null===e||void 0===e||null===(or=e.options)||void 0===or?void 0:or.destination)?"From":"Pin",":"),t.createElement("div",{style:{width:"70%",textAlign:"left"}},null!==e&&void 0!==e&&e.value?null===(ir=JSON.parse(e.value))||void 0===ir||null===(tr=ir.source)||void 0===tr?void 0:tr.address:"")),1==(null===e||void 0===e||null===(nr=e.options)||void 0===nr?void 0:nr.destination)&&t.createElement("hr",{style:{borderTop:"0.5px solid #D2D2D2"}}),1==(null===e||void 0===e||null===(dr=e.options)||void 0===dr?void 0:dr.destination)&&t.createElement("div",{className:ce.actionsContainer,style:{fontSize:"12px"},onClick:()=>{pl({source:!1,destination:!0,field:e,index:l})}},t.createElement("div",{style:{width:"30%",textAlign:"left"}},t.createElement(C.G,{icon:E.opg,style:{width:"20px",height:"20px",marginRight:"5px",color:"green"}}),"To",":"),t.createElement("div",{style:{width:"70%",textAlign:"left"}},null!==e&&void 0!==e&&e.value?null===(ar=JSON.parse(e.value))||void 0===ar||null===(rr=ar.destination)||void 0===rr?void 0:rr.address:""))),(null===cl||void 0===cl?void 0:cl.source)&&t.createElement(f.U7,{hasCloseIcon:!0,blured:!1,scrollable:!0,isOpen:cl.source,shadowedContainerStyle:{width:"100%"},onClose:()=>pl({source:!1,destination:!1})},t.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",marginTop:"30px"}},t.createElement("div",{className:ce.title},null!==(sr=null===cl||void 0===cl||null===(vr=cl.field)||void 0===vr?void 0:vr.field_name)&&void 0!==sr?sr:"Origin:"),t.createElement(Ce.Z,{zoom:null===cl||void 0===cl||null===(ur=cl.field)||void 0===ur||null===(cr=ur.options)||void 0===cr?void 0:cr.zoom,value:null===(pr=JSON.parse(null!==(mr=null===cl||void 0===cl||null===(fr=cl.field)||void 0===fr?void 0:fr.value)&&void 0!==mr?mr:JSON.stringify({source:{},destination:{}})))||void 0===pr?void 0:pr.source,onChange:o=>{var i,t,n,d,a,r,s,u,c,p;const m=null!==cl&&void 0!==cl&&null!==(i=cl.field)&&void 0!==i&&i.value?JSON.parse(null===cl||void 0===cl||null===(t=cl.field)||void 0===t?void 0:t.value):{source:{lat:0,lng:0,address:""},destination:{lat:0,lng:0,address:""}};if(m.source.lat=o.geometry.location.lat,m.source.lng=o.geometry.location.lng,m.source.address=o.formatted_address,null!==cl&&void 0!==cl&&cl.field&&(null===(n=e.options)||void 0===n||!n.compute))return N(JSON.stringify(m),cl.index),void pl({source:!1,destination:!1});let f=null===S||void 0===S||null===(d=S.selected_fields)||void 0===d?void 0:d.find(e=>{var l;return"distance"===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.mapToItem)});var _,y,h,g,b,x,E,C,w,M,k,Z;f||(f=null===(_=L.newStepComponents)||void 0===_||null===(y=_.find(e=>{var l;return(null===(l=e.selected_fields)||void 0===l?void 0:l.filter(e=>{var l;return"distance"===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.mapToItem)}).length)>0}))||void 0===y||null===(h=y.selected_fields)||void 0===h?void 0:h.find(e=>{var l;return"distance"===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.mapToItem)}),f||(f=null===(g=L.components)||void 0===g||null===(b=g.find(e=>{var l;return(null===(l=e.selected_fields)||void 0===l?void 0:l.filter(e=>{var l;return"distance"===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.mapToItem)}).length)>0}))||void 0===b||null===(x=b.selected_fields)||void 0===x?void 0:x.find(e=>{var l;return"distance"===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.mapToItem)}),f||(f=null===(E=re.processModule)||void 0===E||null===(C=E.steps[null!==(k=null===(Z=re.processModule)||void 0===Z?void 0:Z.stepIndex)&&void 0!==k?k:1].component_blueprints)||void 0===C||null===(w=C.find(e=>{var l;return(null===(l=e.selected_fields)||void 0===l?void 0:l.filter(e=>{var l;return"distance"===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.mapToItem)}).length)>0}))||void 0===w||null===(M=w.selected_fields)||void 0===M?void 0:M.find(e=>{var l;return"distance"===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.mapToItem)}))));if(null!==m&&void 0!==m&&m.source&&null!==(a=e.options)&&void 0!==a&&a.compute&&0==(null===(r=e.options)||void 0===r?void 0:r.destination))m.distance=(0,v.Iw)(m.source.lat,m.source.lng,Ie.latitude,Ie.longitude),m.duration=0,f&&(f.value=m.distance,f.disabled=!0),N(JSON.stringify(m),l);else if(null!==(s=m.source)&&void 0!==s&&s.address&&null!==cl&&void 0!==cl&&null!==(u=cl.field.options)&&void 0!==u&&u.compute){var I;null===(I=(0,Oe.Y)(m.source.address,m.destination.address))||void 0===I||I.subscribe({next:e=>{var l;if((null===e||void 0===e||null===(l=e.routes)||void 0===l?void 0:l.length)>0){var o;const l=e.routes[0];var i,t,n,d;if((null===l||void 0===l||null===(o=l.legs)||void 0===o?void 0:o.length)>0)m.distance=(null===(i=l.legs[0])||void 0===i||null===(t=i.distance)||void 0===t?void 0:t.value)/1e3,m.duration=null===(n=l.legs[0])||void 0===n||null===(d=n.duration)||void 0===d?void 0:d.value,m.steps=l.legs[0].steps,f&&(f.value=m.distance,f.disabled=!0)}},error:e=>{m.distance=(0,v.Iw)(m.source.lat,m.source.lng,m.destination.lat,m.destination.lng),m.duration=0,f&&(f.value=m.distance,f.disabled=!0)}})}else null!==(c=m.source)&&void 0!==c&&c.address&&(m.distance=(0,v.Iw)(m.source.lat,m.source.lng,m.destination.lat,m.destination.lng),m.duration=0,f&&(f.value=m.distance));N(JSON.stringify(m),null!==(p=null===cl||void 0===cl?void 0:cl.index)&&void 0!==p?p:l),pl({source:!1,destination:!1})},mapkey:null===(_r=$.misc_info)||void 0===_r?void 0:_r.map}))),(null===cl||void 0===cl?void 0:cl.destination)&&t.createElement(f.U7,{hasCloseIcon:!0,blured:!1,scrollable:!0,isOpen:cl.destination,shadowedContainerStyle:{width:"100%"},shadowedContainerClassname:ce.mappopup,onClose:()=>pl({source:!1,destination:!1})},t.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"}},t.createElement("div",{className:ce.title},null!==(yr=null===cl||void 0===cl||null===(hr=cl.field)||void 0===hr?void 0:hr.field_name)&&void 0!==yr?yr:"Destination:"),t.createElement(Ce.Z,{value:null===(gr=JSON.parse(null!==(br=null===cl||void 0===cl||null===(xr=cl.field)||void 0===xr?void 0:xr.value)&&void 0!==br?br:JSON.stringify({source:{},destination:{}})))||void 0===gr?void 0:gr.destination,zoom:null===cl||void 0===cl||null===(Er=cl.field)||void 0===Er||null===(Cr=Er.options)||void 0===Cr?void 0:Cr.zoom,onChange:e=>{var l,o,i,t,n,d;const a=null!==cl&&void 0!==cl&&null!==(l=cl.field)&&void 0!==l&&l.value?JSON.parse(null===cl||void 0===cl||null===(o=cl.field)||void 0===o?void 0:o.value):{destination:{lat:0,lng:0,address:""},source:{lat:0,lng:0,address:""}};let r=null===S||void 0===S||null===(i=S.selected_fields)||void 0===i?void 0:i.find(e=>{var l;return"distance"===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.mapToItem)});var s,u,c,p,m,f,_;r||(r=null===(s=L.newStepComponents)||void 0===s||null===(u=s.find(e=>{var l;return(null===(l=e.selected_fields)||void 0===l?void 0:l.filter(e=>{var l;return"distance"===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.mapToItem)}).length)>0}))||void 0===u||null===(c=u.selected_fields)||void 0===c?void 0:c.find(e=>{var l;return"distance"===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.mapToItem)}),r||(r=null===(p=L.components)||void 0===p||null===(m=p.find(e=>{var l;return(null===(l=e.selected_fields)||void 0===l?void 0:l.filter(e=>{var l;return"distance"===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.mapToItem)}).length)>0}))||void 0===m||null===(f=m.selected_fields)||void 0===f?void 0:f.find(e=>{var l;return"distance"===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.mapToItem)})));(a.destination.lat=e.geometry.location.lat,a.destination.lng=e.geometry.location.lng,a.destination.address=e.formatted_address,null!==(t=a.destination)&&void 0!==t&&t.address&&null!==cl&&void 0!==cl&&null!==(n=cl.field.options)&&void 0!==n&&n.compute)?null===(_=(0,Oe.Y)(a.source.address,a.destination.address))||void 0===_||_.subscribe({next:e=>{var l;if((null===e||void 0===e||null===(l=e.routes)||void 0===l?void 0:l.length)>0){var o;const l=e.routes[0];var i,t,n,d;if((null===l||void 0===l||null===(o=l.legs)||void 0===o?void 0:o.length)>0)a.distance=(null===(i=l.legs[0])||void 0===i||null===(t=i.distance)||void 0===t?void 0:t.value)/1e3,a.duration=null===(n=l.legs[0])||void 0===n||null===(d=n.duration)||void 0===d?void 0:d.value,a.steps=l.legs[0].steps,r&&(r.value=a.distance)}},error:e=>{a.distance=(0,v.Iw)(a.source.lat,a.source.lng,a.destination.lat,a.destination.lng),a.duration=0,r&&(r.value=a.distance)}}):null!==(d=a.destination)&&void 0!==d&&d.address&&(a.distance=(0,v.Iw)(a.source.lat,a.source.lng,a.destination.lat,a.destination.lng),a.duration=0,r&&(r.value=a.distance));N(JSON.stringify(a),null===cl||void 0===cl?void 0:cl.index),pl({source:!1,destination:!1})},mapkey:null===(wr=$.misc_info)||void 0===wr?void 0:wr.map})))):t.createElement(Ce.Z,{zoom:null===cl||void 0===cl||null===(Mr=cl.field)||void 0===Mr||null===(Sr=Mr.options)||void 0===Sr?void 0:Sr.zoom,key:l,value:null===S||void 0===S?void 0:S.selected_fields[l].value,onLocationChange:e=>X(e,l),mapkey:null===(kr=$.misc_info)||void 0===kr?void 0:kr.map}));if("Map"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(Ro=e.options)||void 0===Ro||null===(Uo=Ro.maptype)||void 0===Uo?void 0:Uo.length)>0)return t.createElement(_e.Z,{enabled:Wo,width:"100%",editMode:xe,showWidth:l=>{e.field_options=(0,i.Z)((0,i.Z)({},e.field_options),{},{width:"".concat(l,"px")})},key:l,fieldLabel:e.field_name,notes:null===e||void 0===e||null===(Zr=e.options)||void 0===Zr?void 0:Zr.notes,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors},t.createElement(Ne,{key:l,value:null===S||void 0===S?void 0:S.selected_fields[l].value,onLocationChange:e=>X(e,l)}));if("Summary"===(null===e||void 0===e?void 0:e.data_type_name)){var Gs;let e={};return L.components.map(l=>l.selected_fields.filter(e=>(null===e||void 0===e?void 0:e.value)&&!("Pin"===e.data_type_name||"Lookup"===e.data_type_name||"Record"===e.data_type_name||"Ratings"===e.data_type_name||"People"===e.data_type_name||"Positions"===e.data_type_name||"Notes"===e.data_type_name||"URL"===e.data_type_name||"Summary"===e.data_type_name||"Info"===e.data_type_name)&&1==e.visible).map(l=>{var o,i;(0,v.gD)(null!==(o=null===l||void 0===l?void 0:l.value)&&void 0!==o?o:"")?e[l.field_name]="":e[l.field_name]="".concat(null!==(i=null===l||void 0===l?void 0:l.value)&&void 0!==i?i:"")})),(null!==(Gs=null===k||void 0===k?void 0:k.component_fields)&&void 0!==Gs?Gs:[]).filter(e=>(null===e||void 0===e?void 0:e.value)&&!("Pin"===e.data_type_name||"Lookup"===e.data_type_name||"Record"===e.data_type_name||"Ratings"===e.data_type_name||"People"===e.data_type_name||"Positions"===e.data_type_name||"Notes"===e.data_type_name||"URL"===e.data_type_name||"Summary"===e.data_type_name||"Info"===e.data_type_name)).forEach(l=>{var o;return e[l.field_name]="".concat(null!==(o=null===l||void 0===l?void 0:l.value)&&void 0!==o?o:"")}),L.newStepComponents.map(l=>l.selected_fields.filter(e=>!("Pin"===e.data_type_name||"Lookup"===e.data_type_name||"Record"===e.data_type_name||"Ratings"===e.data_type_name||"People"===e.data_type_name||"Positions"===e.data_type_name||"Notes"===e.data_type_name||"URL"===e.data_type_name)&&1==e.visible).map(l=>{var o,i;(0,v.gD)(null!==(o=null===l||void 0===l?void 0:l.value)&&void 0!==o?o:"")?e[l.field_name]="":e[l.field_name]="".concat(null!==(i=null===l||void 0===l?void 0:l.value)&&void 0!==i?i:"")})),t.createElement("div",{key:l,style:{width:"100%"}},t.createElement(T.default,{modern:!0,columns:Object.keys(e),list:[e]}))}return"Currency"===(null===e||void 0===e?void 0:e.data_type_name)&&null!==e&&void 0!==e&&null!==(Fo=e.options)&&void 0!==Fo&&Fo.currency_type?t.createElement(_e.Z,{titleProps:{fontSize:"14px",color:"var(--app-color-gray-dark)",fontWeight:"normal",paddingLeft:"5px"},style:{border:"1px solid var(--app-color-gray-lighter)"},enabled:Wo,width:"100%",editMode:xe,showWidth:l=>{e.field_options=(0,i.Z)((0,i.Z)({},e.field_options),{},{width:"".concat(l,"px")})},key:l,fieldLabel:e.field_name,notes:null===e||void 0===e||null===(Ir=e.options)||void 0===Ir?void 0:Ir.notes,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors},t.createElement("div",{style:{width:"inherit",display:"flex"}},t.createElement("div",{onClick:()=>Ve(!qe),className:ce.currencySymbol},null!==e&&void 0!==e&&null!==(Nr=e.options)&&void 0!==Nr&&Nr.symbol?null===e||void 0===e||null===(Tr=e.options)||void 0===Tr?void 0:Tr.symbol:""," "),qe&&t.createElement(f.Ld,{items:v.s3,defaultSelectedItem:{label:null===e||void 0===e||null===(Dr=e.options)||void 0===Dr?void 0:Dr.currency_type,value:null===e||void 0===e||null===(Pr=e.options)||void 0===Pr?void 0:Pr.country_code},triggerType:"chevron",className:ce.currencySelectComponent,inputClassName:ce.currencySearchInput,inputContainerClassName:ce.currencyInputContainerClassName,clearControlsClassName:ce.currencyClearControlsClassName,molclassname:ce.currencySelectMenuOverlayList,moliclassname:ce.currencySelectMenuOverlayListItem,onChange:e=>{L.currency=e.value,V(e,l),Ve(!1)}}),!qe&&t.createElement("input",{type:"number",autoComplete:"off",value:null!==(Ar=S.selected_fields[l].value)&&void 0!==Ar?Ar:0,className:ce.currencyInput,onChange:e=>{N(e.target.value,l)}}))):t.createElement(_e.Z,{titleProps:{fontSize:"14px",color:"var(--app-color-gray-dark)",fontWeight:"normal",paddingLeft:"5px"},enabled:Wo,width:"100%",style:{marginTop:"0px",border:"0px solid var(--app-color-gray-lighter)",padding:"5px",marginBottom:"10px",backgroundColor:"var(--app-color-gray-lightest)"},editMode:xe,showWidth:l=>{e.field_options=(0,i.Z)((0,i.Z)({},e.field_options),{},{width:"".concat(l,"px")})},key:l,fieldLabel:e.field_name,notes:null===e||void 0===e||null===(Or=e.options)||void 0===Or?void 0:Or.notes,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors,customIconBgColor:"white"},"file"===e.data_type?t.createElement(Xe,{notes:null===e||void 0===e||null===(Lr=e.options)||void 0===Lr?void 0:Lr.notes,field_id:e.id,value:null===e||void 0===e?void 0:e.value,isInherited:R,checkIfAreMandatoryErrored:F,options:null===e||void 0===e?void 0:e.options,index:l,indexInContextArray:D}):"date"===e.data_type||null!==e&&void 0!==e&&null!==(zr=e.options)&&void 0!==zr&&zr.country_code||null!==e&&void 0!==e&&null!==(Rr=e.options)&&void 0!==Rr&&Rr.currency_type||"Number"===e.data_type_name?t.createElement("div",{style:{width:"inherit"}},"date"===e.data_type?"Range"===(null===e||void 0===e||null===(Ur=e.options)||void 0===Ur?void 0:Ur.type)?t.createElement(f.$m,{inputContainerClassName:ce.inputContainerClassName,dateChangeHandler:e=>Tl(e,l),startDate:ll,endDate:ol}):null!==e&&void 0!==e&&null!==(Fr=e.options)&&void 0!==Fr&&Fr.time?t.createElement("div",{style:{width:"100%",height:"auto",border:"0"}},t.createElement(fe(),{showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:5,customInput:t.createElement("div",{id:"custom-input",style:{cursor:"pointer",display:"flex",justifyContent:"center",width:"100%",alignItems:"stretch",padding:"5px",border:"0px solid var(--app-color-gray-lighter)"}},t.createElement("input",{value:e.value?b()(e.value).format("DD MMMM YYYY HH:mm"):"",readOnly:!0,type:"text",style:{flex:1,marginTop:"auto",marginBottom:"auto",outline:"none",fontFamily:"var(--app-text-font-mobile)",fontSize:"16px",lineHeight:"20px",color:"#4A4A4A",textAlign:"left",maxWidth:"98%",border:"0px"},onChange:e=>{}}),t.createElement(C.G,{icon:E.WRo,style:{marginLeft:"10px",width:"14px",height:"14px"}})),className:ce.singleInputContainer,selected:null!==e&&void 0!==e&&e.value?new Date(b()(null===e||void 0===e?void 0:e.value)):(0,g.now)(),onChange:e=>{e>(0,g.now)()&&Dl(e,l)}})):t.createElement(f.X9,{toggleDP:e=>fl(!0===e?"240px":"50px"),value:void 0==e.value?"":b()(new Date(e.value)).format("Do MMMM YYYY"),dateChangeHandler:e=>Dl(e,l),selected:new Date(b()(je,"YYYY-MM-DD")),iconClassName:ce.calendar,inputContainerClassName:ce.singleInputContainer,inputStyle:{textAlign:"left",border:"none",height:"auto",fontSize:"16px"},hasCalendarIcon:!0}):null!==e&&void 0!==e&&null!==(Wr=e.options)&&void 0!==Wr&&Wr.country_code?t.createElement("div",{style:{padding:"10px"}},t.createElement(Ee(),{specialLabel:"",value:S.selected_fields[l].value,country:null===e||void 0===e||null===(qr=e.options)||void 0===qr?void 0:qr.country_code,onChange:(e,o,i)=>{Y(o,l,i.target.value)},inputClass:ce.phoneIInput,inputProps:{style:{border:"0",backgroundColor:"transparent"}}})):t.createElement("input",{onBlur:o=>Ke(e.data_type_name,o.target.value,D,l,L),type:e.data_type,onChange:e=>{N(e.target.value,l)},autoComplete:"none",value:S.selected_fields[l].value?S.selected_fields[l].value:""===Je(null===e||void 0===e?void 0:e.options)?"":Je(null===e||void 0===e?void 0:e.options),placeholder:"Number"===S.selected_fields[l].data_type_name?"0":"",className:ce.fieldTypeInput,style:{border:"0"},name:e.field_name,disabled:null!==(Br=S.selected_fields[l].disabled)&&void 0!==Br&&Br})):"Long Text"===e.data_type_name?t.createElement("textarea",{className:ce.fieldTypeTextarea,onBlur:o=>Ke(e.data_type_name,o.target.value,D,l,L),type:e.data_type,value:S.selected_fields[l].value?S.selected_fields[l].value:""===Je(null===e||void 0===e?void 0:e.options)?"":Je(null===e||void 0===e?void 0:e.options),onFocus:()=>{},disabled:null!==(Yr=S.selected_fields[l].disabled)&&void 0!==Yr&&Yr,autoComplete:"none",onChange:e=>{N(e.target.value,l)},placeholder:"Number"===S.selected_fields[l].data_type_name?"0":"",name:e.field_name,style:{border:"0"}}):t.createElement("input",{onBlur:o=>Ke(e.data_type_name,o.target.value,D,l,L),type:e.data_type,onChange:e=>{N(e.target.value,l)},autoComplete:"none",value:S.selected_fields[l].value?S.selected_fields[l].value:""===Je(null===e||void 0===e?void 0:e.options)?"":Je(null===e||void 0===e?void 0:e.options),placeholder:"Number"===S.selected_fields[l].data_type_name?"0":"",className:ce.fieldTypeInput,name:e.field_name,disabled:null!==(Hr=S.selected_fields[l].disabled)&&void 0!==Hr&&Hr,style:{border:"0"}}))}return t.createElement(_e.Z,{enabled:Wo,width:"100%",style:{backgroundColor:"var(--app-color-gray-lightest)",padding:"10px"},editMode:xe,key:l,fieldLabel:e.field_name,notes:null===e||void 0===e||null===(xa=e.options)||void 0===xa?void 0:xa.notes,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors},t.createElement("div",{style:{width:"100%",height:"auto",border:"0px solid var(--app-color-gray-light)"}},t.createElement(fe(),{showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:5,customInput:t.createElement("div",{id:"custom-input",style:{cursor:"pointer",display:"flex",justifyContent:"center",width:"100%",alignItems:"stretch",padding:"5px",border:"0px solid var(--app-color-gray-lighter)",color:"black"}},t.createElement(C.G,{icon:E.WRo,style:{marginLeft:"10px",width:"14px",height:"14px"}}),t.createElement("input",{disabled:!0,value:e.value?b()(e.value).format("DD MMMM YYYY HH:mm"):"",type:"text",style:{flex:1,marginTop:"auto",marginBottom:"auto",outline:"none",fontFamily:"var(--app-text-font-mobile)",fontSize:"16px",lineHeight:"20px",color:"black",textAlign:"left",width:"80%",border:"0px"},onChange:e=>{}})),className:ce.singleInputContainer,selected:null!==e&&void 0!==e&&e.value?new Date(b()(null===e||void 0===e?void 0:e.value)):(0,g.now)(),onChange:e=>{e>(0,g.now)()&&Dl(e,l)}})))}{var Js,Ks,Qs,Xs,$s,ev;const o={item_code:null,quantity:null,value:null,alt_value:null,total:null},n=Object.entries(Object.assign(o,e.options.map)).reduce((e,l)=>{let[o,i]=l;return null===i||(e[o]=i),e},{});return t.createElement(_e.Z,{fieldLabel:null===e||void 0===e?void 0:e.field_name,enabled:Wo,width:"100%",editMode:xe,showWidth:l=>{e.options=(0,i.Z)((0,i.Z)({},e.options),{},{width:"".concat(l,"px")})},style:{border:"0",padding:"0",marginTop:"50px"},key:l,visible:e.visible,notes:null===e||void 0===e||null===(Js=e.options)||void 0===Js?void 0:Js.notes,error:(null===(Ks=e.errors)||void 0===Ks?void 0:Ks.length)>0?"".concat(e.errors):""},t.createElement(T.default,{modern:!!y.tq,className:ce.itemsContainer,columns:null===S||void 0===S||null===(Qs=S.selected_fields)||void 0===Qs?void 0:Qs.filter(e=>{var l;return null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.mapToItem}).map(e=>e.field_name).concat(["Actions"]),list:null===(Xs=J.Z([oe.Z(Q.Z("index"))])(null!==($s=null!==e&&void 0!==e&&null!==(ev=e.options)&&void 0!==ev&&ev.type?L.items.filter(l=>{var o;return l.type===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.type)}):L.items)&&void 0!==$s?$s:[]))||void 0===Xs?void 0:Xs.map((e,l)=>{e.index=l;let o={index:l,Actions:t.createElement("div",{style:{display:"flex",justifyContent:"space-evenly",minWidth:"80px"}},!(null!==e&&void 0!==e&&e.edit)&&t.createElement(C.G,{icon:E.IwR,onClick:()=>{e.edit=!0,z({action:_._U.setModuleItems,value:[...L.items.filter(l=>l.id!==e.id),e]})}}),(null===e||void 0===e?void 0:e.edit)&&t.createElement(C.G,{icon:E.EsX,onClick:()=>{e.edit=!1,z({action:_._U.setModuleItems,value:[...L.items.filter(l=>l.id!==e.id),e]})}}),(null===e||void 0===e?void 0:e.edit)&&t.createElement(C.G,{icon:E.$aW,onClick:()=>{z({action:_._U.setModuleItems,value:L.items.filter(l=>l.id!==e.id)})}}))};return Object.entries(null!==n&&void 0!==n?n:[]).forEach(n=>{var d,a,r;o[n[1]]=t.createElement("div",{style:{padding:null!==e&&void 0!==e&&e.edit?"5px":""}},t.createElement(Ul,{index:l,enabled:!0,edit:null!==(d=null===e||void 0===e?void 0:e.edit)&&void 0!==d&&d,isItem:!0,item:e,field:(0,i.Z)((0,i.Z)({},null!==(a=null===S||void 0===S||null===(r=S.selected_fields)||void 0===r?void 0:r.find(e=>{var l;return(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.mapToItem)===n[0]}))&&void 0!==a?a:{}),{},{visible:!0,value:e[n[0]]}),withLabel:!1,handleItem:(l,o)=>{e[n[0]]!==l&&(e[n[0]]=l,z({action:_._U.setModuleItems,value:[...L.items.filter(l=>l.id!==e.id),e]}))}}))}),o})}))}}var lv}));return t.createElement("div",{id:null===S||void 0===S?void 0:S.name,className:ce.emulatedFlexGap,style:{width:"100%",position:"relative",marginBottom:ml,padding:"30px 10px 10px 10px"}},Fl,(null===hl||void 0===hl||null===(n=hl.candidates)||void 0===n?void 0:n.length)>0&&t.createElement(_e.Z,{width:"80%",fieldLabel:"Response",visible:!0},t.createElement("textarea",{className:ce.fullLengthTextarea,type:"text",onFocus:()=>{},disabled:!0,value:null===hl||void 0===hl||null===(d=hl.candidates[0])||void 0===d||null===(x=d.content.parts[0])||void 0===x?void 0:x.text})))}),Xe=e=>{var l;const{notes:o="",options:i,field_id:n,index:d,indexInContextArray:a,value:r,checkIfAreMandatoryErrored:v}=e,[u,c]=(0,t.useState)(),[p,m]=(0,t.useState)(!1),[f,h]=(0,_.pQ)();return t.createElement("div",{style:{width:"inherit",flexDirection:"column",fontSize:"12px"}},t.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",flex:"1 1",overflow:"hidden",fontSize:"14px"}},t.createElement("u",{onClick:()=>{var e;null===(e=document.getElementById("file-change-".concat(n)))||void 0===e||e.click()},style:{cursor:"pointer",marginLeft:"2px",wordWrap:"break-word"}},null!==u&&void 0!==u&&u.name||r?"File":"Click to upload file..."),t.createElement("input",{accept:"."+(null===i||void 0===i||null===(l=i.accepted_mimes)||void 0===l?void 0:l.replace(/,/g,",.")),type:"file",onChange:()=>(e=>{var l,o;const i=document.getElementById("file-change-".concat(n)).files[0],t=((null===i||void 0===i?void 0:i.size)/1024/1024).toFixed(4),r=(e/1024).toFixed(4);m(!0);const u=[...null!==(l=null===(o=f.currentStep)||void 0===o?void 0:o.component_blueprints)&&void 0!==l?l:[]];t>r?alert("File is too big!"):(0,s.kf)(i,n).subscribe({next:e=>{c(i),m(!1),u[a].selected_fields[d].value=null===e||void 0===e?void 0:e.file_url,u[a].selected_fields[d].value&&u[a].selected_fields[d].mandatory&&(u[a].selected_fields[d].errors=""),v(),h({action:_._U.setComponentBlueprints,value:u}),h({action:_._U.setModuleNewStepComponents,value:u})}})})(null===i||void 0===i?void 0:i.max_file_size),style:{position:"absolute",visibility:"hidden",width:"0px"},id:"file-change-".concat(n),className:ce.fieldTypeInput}),p&&t.createElement(Te.Z,{type:y.G6?"Watch":"Puff",color:"#4A4A4A",secondaryColor:"gray",radius:22,height:22,width:"22px"}),(null===u||void 0===u?void 0:u.type)&&t.createElement($e,{fileType:null===u||void 0===u?void 0:u.type})))},$e=e=>"application/pdf"===(null===e||void 0===e?void 0:e.fileType)?t.createElement("img",{alt:"",src:Z.ed}):t.createElement("img",{alt:"",src:Z.dm}),el=(0,t.memo)(e=>{const{children:l,nav:o,openNav:i,title:n}=e;return t.createElement(f.U7,{onClose:i,blured:!1,scrollable:!0,isOpen:o,shadowedContainerStyle:{width:"100%",minWidth:"50%",minHeight:"400px"},shadowedContainerClassname:ce.popup},t.createElement("div",{style:{width:"inherit",height:"inherit"},onClick:i},n.length>0&&t.createElement("div",{className:ce.actionsContainer},t.createElement("p",{className:ce.infoTitle},n)),l))}),ll=e=>{var l,o;const{component:i,blueprintIndex:n,setSelectedComponent:d,selectedComponent:a,companyData:r,components:s,allComponents:v,companyUsersArray:u,user:c,status:p}=e,[m]=(0,_.pQ)(),[f]=(0,t.useState)(ce.active),[h]=(0,t.useState)(""),g=null===(l=m.currentStep)||void 0===l?void 0:l.component_blueprints.findIndex(e=>e.id===i.id),b=i.selected_fields.filter(e=>"Pin"===e.data_type_name||"Map"===e.data_type_name).length>0,x=null===a||void 0===a||null===(o=a.component_fields)||void 0===o?void 0:o.find(e=>"Action Button"===e.data_type_name);return t.createElement("div",{id:"accordion",key:n,className:ge()(ce.accordionContainer,f),"app-variant-has-error":h?"error":"",style:y.tq?b?{padding:"0",border:"0"}:{border:"0"}:{}},t.createElement(ol,{components:s,allComponents:v,component:i,handleInputChange:()=>{},handlePrefixChange:()=>{},handleCurrencyChange:()=>{},checkIfAreMandatoryErrored:!1,handleCheckbox:()=>{},isInherited:!1,indexInContextArray:g,handleLocationChange:()=>{},processTaskContext:m,companyData:r,companyUsersArray:u,selectedComponent:a,setSelectedComponent:d,hasAction:x,user:c,status:p}))},ol=(0,t.memo)(e=>{var l,o;const{component:n,components:d,companyData:c,allComponents:m,companyUsersArray:x,setSelectedComponent:w,selectedComponent:M,hasAction:S,user:k,status:Z}=e,{allTasks:I,companyPositionsArray:N,allModules:D,begunModule:P}=(0,h.v9)(e=>e.flowReducer),[A,O]=(0,_.pQ)(),[L,z]=(0,t.useState)(!1),[R,U]=(0,t.useState)(0),[W,q]=(0,t.useState)(!1),[B,Y]=(0,t.useState)(!1),H=(null===n||void 0===n||null===(l=n.selected_fields)||void 0===l?void 0:l.length)>0&&J.Z([oe.Z(Q.Z("index"))])(null===n||void 0===n||null===(o=n.selected_fields)||void 0===o?void 0:o.filter(e=>!0!==e.value||void 0!==(null===e||void 0===e?void 0:e.value))).map((e,l)=>{var o,h,H,V,j;if((null===e||void 0===e||null===(o=e.options)||void 0===o||null===(h=o.list)||void 0===h?void 0:h.length)>0&&(null===e||void 0===e||null===(H=e.options)||void 0===H||null===(V=H.component_id)||void 0===V?void 0:V.length)>0&&("Step List"===(null===e||void 0===e?void 0:e.data_type_name)||"Component List"===(null===e||void 0===e?void 0:e.data_type_name)))return t.createElement("div",{key:l,style:{width:"100%"}},t.createElement(T.default,{modern:!0,columns:e.options.list,list:(j=e.options,d.filter(e=>e.id===j.component_id).map(e=>null===j||void 0===j?void 0:j.list.reduce((l,o)=>(0,i.Z)((0,i.Z)({},l),{},{[o]:e.selected_fields.find(e=>e.field_name===o).value,temp_id:e.temp_id}),{})))}));if("output"===e.data_type&&"Formula"!==e.data_type_name&&"Item Formula"!==e.data_type_name&&"Record"!==e.data_type_name&&"Filters"!==e.data_type_name)return null;if("Info"===e.data_type_name)return null;if("URL"===e.data_type_name)return null;if("Map"===e.data_type_name)return null;if("Lookup"===e.data_type_name)return null;if("Rewards"===e.data_type_name)return null;if("Summary"===e.data_type_name)return null;if("Ratings"===e.data_type_name)return null;if("ID"===e.data_type_name){var G,J;const o=null!==(G=null===F||void 0===F?void 0:le.Z(null===F||void 0===F?void 0:ee.Z("field_name",e.field_name))(n.values))&&void 0!==G?G:null;return t.createElement("div",{key:l},t.createElement("div",{className:ce.actionsContainer,style:{fontSize:"12px"}},t.createElement("div",{style:{fontWeight:"normal",fontSize:"14px"}},e.field_name,":"),t.createElement("div",null,null===o||null===o.value?"":null===o||void 0===o||null===(J=o.value)||void 0===J?void 0:J.split(",")[0])),t.createElement("hr",{style:{borderTop:"0.5px solid #D2D2D2"}}))}{var K,Q,X,$,oe,ie,te,ne,de,ae,re,se,ve;let o=null!==(K=null===F||void 0===F?void 0:le.Z(null===F||void 0===F?void 0:ee.Z("field_name",null===e||void 0===e?void 0:e.field_name))(null!==(Q=null===M||void 0===M?void 0:M.component_fields)&&void 0!==Q?Q:[]))&&void 0!==K?K:{},d=null===(X=o)||void 0===X?void 0:X.value;const h=null===n||void 0===n||null===($=n.selected_fields)||void 0===$?void 0:$.find(e=>"Info"===e.data_type_name);if(h){const e=m.find(e=>(null===e||void 0===e?void 0:e.component_fields.filter(e=>e.component_blueprint_id===h.options.component_id&&e.value===d).length)>0);var ue,pe;if(e)return null===h||void 0===h||null===(ue=h.options)||void 0===ue||null===(pe=ue.list)||void 0===pe?void 0:pe.map((l,o)=>{var i,n;const d=null!==(i=null===(n=e.component_fields.find(e=>e.field_name===l))||void 0===n?void 0:n.value)&&void 0!==i?i:"";return t.createElement("div",{key:o},t.createElement("div",{className:ce.actionsContainer,style:{fontSize:"12px"}},t.createElement("div",{style:{fontWeight:"normal",fontSize:"14px"}},l,":"),t.createElement("div",null,d)),t.createElement("hr",{style:{borderTop:"0.5px solid #D2D2D2"}}))})}if("Pin"===e.data_type_name&&(null!==e&&void 0!==e&&e.value||d)){var me,fe,ye,he,ge,be,xe,Ee,Ce,we,Me,Se,ke,Ze,Ie,Ne,Te,De,Pe,Le,ze,Re,Ue,We,qe,Be,Ye,He,Ve,je,Ge,Je;const n=JSON.parse(null!==(me=null===e||void 0===e?void 0:e.value)&&void 0!==me?me:d),a=null===M||void 0===M||null===(fe=M.component_fields)||void 0===fe||null===(ye=fe.find(e=>"Status"===e.data_type_name))||void 0===ye?void 0:ye.value;var Ke;if(void 0===o)o=null===(Ke=M.component_fields)||void 0===Ke?void 0:Ke.find(e=>"Pin"===e.data_type_name);return t.createElement("div",{key:l,style:{display:"",width:"100%"}},B&&t.createElement(Oe.Z,{mapkey:null===(he=c.misc_info)||void 0===he?void 0:he.map,pins:null!==n&&void 0!==n&&n.realtime?null!==n&&void 0!==n&&null!==(ge=n.destination)&&void 0!==ge&&ge.address?[(0,i.Z)((0,i.Z)({},n.destination),{},{type:"destination"}),(0,i.Z)((0,i.Z)({},n.source),{},{type:"source"}),(0,i.Z)((0,i.Z)({},n.realtime),{},{type:"realtime"})]:[(0,i.Z)((0,i.Z)({},n.source),{},{type:"source"}),(0,i.Z)((0,i.Z)({},n.realtime),{},{type:"realtime"})]:null!==n&&void 0!==n&&null!==(be=n.destination)&&void 0!==be&&be.address?[(0,i.Z)((0,i.Z)({},n.destination),{},{type:"destination"}),(0,i.Z)((0,i.Z)({},n.source),{},{type:"source"})]:[(0,i.Z)((0,i.Z)({},n.source),{},{type:"source"})]}),t.createElement("div",{key:l,className:ce.filtersContainer,style:{color:"var(--app-color-gray-dark)",height:"inherit",width:"100%",display:null!==e&&void 0!==e&&e.visible?"":"none"}},t.createElement("div",{className:ce.actionsContainer,style:{fontSize:"12px"},onClick:()=>Y(!B)},null!==n&&void 0!==n&&null!==(xe=n.destination)&&void 0!==xe&&xe.address?t.createElement("div",{style:{width:"50px",textAlign:"left",fontWeight:"normal",fontSize:"14px"}},"From:"):t.createElement(C.G,{icon:E.opg,style:{color:"green",width:"20px",height:"20px"}}),t.createElement("div",{style:{width:"70%",textAlign:"right"}},n.source.address)),(null===n||void 0===n||null===(Ee=n.destination)||void 0===Ee?void 0:Ee.address)&&t.createElement("hr",{style:{borderTop:"0.5px solid #D2D2D2"}}),(null===n||void 0===n||null===(Ce=n.destination)||void 0===Ce?void 0:Ce.address)&&t.createElement("div",{className:ce.actionsContainer,style:{fontSize:"12px"}},t.createElement("div",{style:{width:"50px",textAlign:"left",fontWeight:"normal",fontSize:"14px"}},"To",":"),t.createElement("div",{style:{width:"70%",textAlign:"right"}},null===n||void 0===n||null===(we=n.destination)||void 0===we?void 0:we.address))),t.createElement(f.zx,{light:!0,title:0!=R?"Stop Location Updates":null!==e&&void 0!==e&&null!==(Me=e.options)&&void 0!==Me&&Me.realtime?"Send Location Updates":"Update Location",clicked:()=>{0===R?navigator.geolocation.getCurrentPosition(l=>{var i,t,d,a;n&&(n.realtime={lat:l.coords.latitude,lng:l.coords.longitude,id:"10"},e.value=JSON.stringify(n),1==(null===e||void 0===e||null===(i=e.options)||void 0===i?void 0:i.realtime)?U(setInterval(()=>{z(!0),(0,s.po)({component_id:M.id,index:e.index,value:JSON.stringify(n),group:e.group,component_field_id:o.id}).subscribe({next:e=>{z(!1)},error:()=>z(!1),complete:()=>{}})},+(null!==(t=null===(d=o)||void 0===d||null===(a=d.options)||void 0===a?void 0:a.interval)&&void 0!==t?t:6e4))):(z(!0),(0,s.po)({component_id:M.id,index:o.index,value:JSON.stringify(n),group:o.group,component_field_id:o.id}).subscribe({next:e=>{z(!1)},error:()=>z(!1),complete:()=>{}})))}):(window.clearInterval(R),U(0))},loading:L,style:{width:"100%",display:"Closed"===(null===M||void 0===M?void 0:M.status)||"New"===(null===M||void 0===M?void 0:M.status)||"Reopen"===(null===M||void 0===M?void 0:M.status)||(null===M||void 0===M?void 0:M.status)===(null===c||void 0===c||null===(Se=c.misc_info)||void 0===Se?void 0:Se.lock)||(null!==(ke=null===(Ze=P.processModule)||void 0===Ze||null===(Ie=Ze.module)||void 0===Ie||null===(Ne=Ie.options)||void 0===Ne?void 0:Ne.lock)&&void 0!==ke?ke:"").split(",").includes(null===M||void 0===M?void 0:M.status)||"Closed"===a||"New"===a||"Reopen"===a||a===(null===c||void 0===c||null===(Te=c.misc_info)||void 0===Te?void 0:Te.lock)||(null!==(De=null===(Pe=P.processModule)||void 0===Pe||null===(Le=Pe.module)||void 0===Le||null===(ze=Le.options)||void 0===ze?void 0:ze.lock)&&void 0!==De?De:"").split(",").includes(a)||"Cancelled"===a?"none":S&&"user"===S.options.action&&(null===S||void 0===S?void 0:S.value)===(null===k||void 0===k?void 0:k.id)?"":"none"}}),B&&t.createElement(f.zx,{light:!0,title:"Refresh location",clicked:()=>{z(!0),(0,s.r6)(M.id).pipe((0,p.P)()).subscribe({next:e=>{w(e),z(!1)},error:()=>z(!1)})},loading:L,style:{width:"100%",display:"Closed"===(null===M||void 0===M?void 0:M.sttaus)||"New"===(null===M||void 0===M?void 0:M.sttaus)||"Reopen"===(null===M||void 0===M?void 0:M.sttaus)||(null===M||void 0===M?void 0:M.status)===(null===c||void 0===c||null===(Re=c.misc_info)||void 0===Re?void 0:Re.lock)||(null!==(Ue=null===(We=P.processModule)||void 0===We||null===(qe=We.module)||void 0===qe||null===(Be=qe.options)||void 0===Be?void 0:Be.lock)&&void 0!==Ue?Ue:"").split(",").includes()||"Closed"===a||"New"===a||"Reopen"===a||a===(null===c||void 0===c||null===(Ye=c.misc_info)||void 0===Ye?void 0:Ye.lock)||(null!==(He=null===(Ve=P.processModule)||void 0===Ve||null===(je=Ve.module)||void 0===je||null===(Ge=je.options)||void 0===Ge?void 0:Ge.lock)&&void 0!==He?He:"").split(",").includes(a)||"Cancelled"===a?"none":S&&"user"===S.options.action&&null!==S&&void 0!==S&&S.value&&(null===M||void 0===M||null===(Je=M.created_by)||void 0===Je?void 0:Je.id)===(null===k||void 0===k?void 0:k.id)?"":"none"}}))}var Qe,Xe,$e,el,ll,ol;if("Action Button"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(oe=e.options)||void 0===oe||null===(ie=oe.action)||void 0===ie?void 0:ie.length)>0)return null!==e&&void 0!==e&&e.value||d?t.createElement(_e.Z,{width:"100%",key:l,style:{flexDirection:"column",border:"0"},isProcess:!0,visible:void 0!==(null===e||void 0===e?void 0:e.value)||e.visible,mandatory:!1,error:e.errors},t.createElement("div",{className:ce.centeredDiv,style:{width:"inherit",fontSize:"14px",fontWeight:"normal"}},t.createElement("p",{style:{width:"inherit",fontSize:"12px",fontWeight:"bold"}},null!==e&&void 0!==e&&e.value||d?null!==(Qe=e.options)&&void 0!==Qe&&Qe.notes?null===(Xe=e.options)||void 0===Xe?void 0:Xe.notes:"".concat(e.field_name,":"):"user"===e.options.action?"Not yet assigned":"No status"),"user"===e.options.action&&(null===x||void 0===x?void 0:x.length)>0&&(null===x||void 0===x?void 0:x.filter(l=>l.id===(d||(null===e||void 0===e?void 0:e.value))).map((e,l)=>{var o,i,n,d,a,r;return t.createElement("div",{key:l,className:ce.filtersContainer,style:{fontSize:"12px"}},t.createElement(Ae.Z,{ratings:(null===e||void 0===e||null===(o=e.ratings)||void 0===o?void 0:o.length)>0?null===e||void 0===e||null===(i=e.ratings)||void 0===i?void 0:i.map(e=>+e.ratings):[],simple:!0,photo:e.photo,firstName:null===e||void 0===e?void 0:e.first_name,lastName:null===e||void 0===e?void 0:e.last_name,email:null===e||void 0===e||null===(n=e.positions)||void 0===n||null===(d=n.slice(0,1))||void 0===d?void 0:d.map(e=>e.name),position:"",cardClicked:()=>q(!W),width:"100%"}),W&&t.createElement("div",{style:{padding:"10px"}},t.createElement("h3",null,"User Feedback:"),(null===e||void 0===e||null===(a=e.ratings)||void 0===a?void 0:a.length)>0?null===e||void 0===e||null===(r=e.ratings)||void 0===r?void 0:r.map((e,l)=>t.createElement("div",{className:ce.actionsContainer,key:l,style:{fontSize:"12px",marginBottom:"10px"}},t.createElement("div",{style:{width:"60%",textAlign:"left"}},'"'.concat(e.comments,'"')))):null))})))):null;if("Module"===e.data_type_name&&null!==e&&void 0!==e&&null!==(te=e.options)&&void 0!==te&&te.detail){var il,tl,nl,dl,al;const l=D.find(l=>l.id===e.options.module_id);return t.createElement("div",{className:ce.iconsContainer,style:{display:"flex",alignContent:"space-between",justifyContent:"center",width:"100%",margin:"40px 0"}},!((null===M||void 0===M?void 0:M.status)===(null===c||void 0===c||null===(il=c.misc_info)||void 0===il?void 0:il.lock)||(null!==(tl=null===P||void 0===P||null===(nl=P.processModule)||void 0===nl||null===(dl=nl.module)||void 0===dl||null===(al=dl.options)||void 0===al?void 0:al.lock)&&void 0!==tl?tl:"").split(",").includes(null===M||void 0===M?void 0:M.status))&&t.createElement(f.zx,{style:{backgroundColor:"var(--app-color-blue)",width:"100%"},title:null===e||void 0===e?void 0:e.field_name,message:"Preparing ".concat(l.name," entry..."),loading:L,clicked:()=>{z(!0),(0,r.zJ)(l.procedure.id).pipe((0,p.P)()).subscribe({next:l=>{var o;if(null!==e&&void 0!==e&&null!==(o=e.options)&&void 0!==o&&o.cmp){var t,n,d;const o=null===l||void 0===l||null===(t=l.steps)||void 0===t?void 0:t.find(e=>e.component_blueprints.filter(e=>{var l,o;return(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.allowMultipleInputs)&&(null===(o=e.selected_fields)||void 0===o?void 0:o.find(e=>"Transaction List"===e.data_type_name))}).length>0),c=null===o||void 0===o||null===(n=o.component_blueprints)||void 0===n?void 0:n.find(e=>{var l;return(null===(l=e.selected_fields)||void 0===l?void 0:l.filter(e=>"Transaction List"===e.data_type_name&&!0===e.visible).length)>0}),m={};var r;if(null===c||void 0===c||null===(d=c.selected_fields)||void 0===d||d.filter(e=>{var l;return null===(l=e.options)||void 0===l?void 0:l.mapToItem}).forEach(e=>{const l=M.component_fields.find(l=>l.field_name===e.field_name&&l.data_type_name===e.data_type_name);var o;l&&(m[null===(o=e.options)||void 0===o?void 0:o.mapToItem]=l.value)}),Object.values(m).length>0)(0,s.r6)(null===e||void 0===e||null===(r=e.options)||void 0===r?void 0:r.cmp).pipe((0,p.P)()).subscribe({next:l=>{var o,t;(0,s.np)((0,i.Z)((0,i.Z)({},m),{},{index:null===(o=l.component_items)||void 0===o?void 0:o.length,id:(0,v.mR)()}),null===e||void 0===e||null===(t=e.options)||void 0===t?void 0:t.cmp).pipe((0,p.P)()).subscribe({next:e=>{z(!1),u.h.dispatch((0,a.Xc)({show:!0,message:"Success, an item was added."}))},error:()=>{},complete:()=>{}})},error:()=>{}});else z(!1)}else z(!1),A.components=[],e.options.fields.filter(e=>{var o,i;const t=null===(o=M.component_fields.find(l=>l.field_name===e))||void 0===o?void 0:o.value;null===(i=l.steps)||void 0===i||i.forEach(l=>{var o;null===l||void 0===l||null===(o=l.component_blueprints)||void 0===o||o.filter(e=>{var l;return!(null!==(l=e.options)&&void 0!==l&&l.asModuleList)}).forEach(l=>{const o=l.selected_fields.find(l=>l.field_name===e&&1==l.visible);o&&(o.value=t)}),l.component_blueprints.find(l=>l.selected_fields.filter(l=>l.field_name===e).length>0)&&O({action:_._U.addModuleComponents,value:l.component_blueprints.filter(l=>l.selected_fields.filter(l=>l.field_name===e).length>0)})})}),u.h.dispatch((0,a.q4)((0,i.Z)((0,i.Z)({},l),{},{completeSteps:l.steps,steps:l.steps,stepIndex:1,module_id:e.options.module_id,module:D.find(l=>l.id===e.options.module_id)}))),O({action:_._U.setCurrentStep,value:l.steps[1]}),O({action:_._U.setModuleItems,value:[]}),O({action:_._U.setModuleNewStepComponents,value:[]})}})}}))}if("Module"===e.data_type_name)return null;if("Link"===e.data_type_name){var rl;const o="".concat(d||(null===e||void 0===e?void 0:e.value));return t.createElement(_e.Z,{width:y.tq?"100%":"50%",style:{border:"0"},key:l,fieldIcon:e.icon,isProcess:!0,visible:void 0!==(null===e||void 0===e?void 0:e.value)||e.visible,mandatory:!1,error:e.errors,customIconBgColor:"white"},null!==o&&void 0!==o&&o.includes("jpg")||null!==o&&void 0!==o&&o.includes("jpeg")||null!==e&&void 0!==e&&null!==(rl=e.options)&&void 0!==rl&&rl.image||null!==o&&void 0!==o&&o.includes("png")?t.createElement("div",{className:ce.accordionContainer,onClick:()=>window.open(o,"_blank")},t.createElement("img",{alt:"lg",src:o,style:{width:"100%",height:"100%",cursor:"pointer"}})):null!==o&&void 0!==o&&o.includes("pdf")?t.createElement("div",{className:ce.accordionContainer,onClick:()=>window.open(o,"_blank")},t.createElement("embed",{onClick:()=>window.open(o,"_blank"),src:"".concat(o,"#toolbar=0&navpanes=0&scrollbar=0"),width:"400px",height:"500px"})):t.createElement("div",{style:{width:"inherit",textDecoration:"underline",textAlign:"center",cursor:"pointer"},onClick:()=>window.open(d,"_blank")},"Link"))}if("Checkbox"===e.data_type_name)return t.createElement("div",{key:l},t.createElement("div",{className:ce.actionsContainer,style:{fontSize:"12px"}},t.createElement("div",{style:{fontWeight:"normal",fontSize:"14px"}},e.options.value,":"),t.createElement("div",null,void 0===d?!0===(null===e||void 0===e?void 0:e.value)?"Yes":"No":1==d?"Yes":"No")),t.createElement("hr",{style:{borderTop:"0.5px solid #D2D2D2"}}));if("Status"===e.data_type_name)return t.createElement("div",{key:l},t.createElement("div",{className:ce.actionsContainer,style:{fontSize:"12px"}},t.createElement("div",{style:{fontWeight:"normal",fontSize:"14px"}},"Status",":"),t.createElement("div",null,null!==($e=null===M||void 0===M?void 0:M.status)&&void 0!==$e?$e:d)),t.createElement("hr",{style:{borderTop:"0.5px solid #D2D2D2"}}));if("Upload"===e.data_type_name)return t.createElement("div",{key:l},t.createElement("div",{className:ce.actionsContainer,style:{fontSize:"12px"}},t.createElement("div",{style:{fontWeight:"normal",fontSize:"14px"}},e.field_name,":"),(d||(null===e||void 0===e?void 0:e.value))&&t.createElement("a",{style:{fontFamily:"var(--app-text-font-mobile)"},key:l,href:d||(null===e||void 0===e?void 0:e.value),download:"Example-PDF-document",target:"_blank",rel:"noreferrer"},"Download File")),t.createElement("hr",{style:{borderTop:"0.5px solid #D2D2D2"}}));if("Tiles"===(null===e||void 0===e||null===(ne=e.options)||void 0===ne?void 0:ne.selection)){const o=m.find(l=>(null===l||void 0===l?void 0:l.component_fields.filter(l=>l.component_blueprint_id===e.options.component_id&&l.value===d).length)>0);var sl,vl;if(o)return t.createElement("div",{key:l,className:ce.filtersContainer,style:{color:"var(--app-color-gray-dark)",height:"inherit",width:"100%",display:null!==e&&void 0!==e&&e.visible?"":"none"}},null===e||void 0===e||null===(sl=e.options)||void 0===sl||null===(vl=sl.names)||void 0===vl?void 0:vl.map((e,l)=>{var i,n,d,a;const r=null!==(i=null===(n=o.component_fields.find(l=>l.field_name===e))||void 0===n?void 0:n.value)&&void 0!==i?i:"";return null!==r&&void 0!==r&&r.includes("jpg")||null!==r&&void 0!==r&&r.includes("jpeg")||null!==r&&void 0!==r&&r.includes("png")?t.createElement("div",{key:l,style:{width:"inherit",display:"flex",justifyContent:"right",marginBottom:"20px"}},t.createElement("img",{alt:"lg",src:r,style:{objectFit:"contain",width:"40px",height:"30px",cursor:"pointer"}})):t.createElement("div",{key:l},t.createElement("div",{className:ce.actionsContainer,style:{fontSize:"12px"}},t.createElement("div",{style:{width:"20%",textAlign:"left",fontWeight:"normal",fontSize:"14px"}},e,":"),t.createElement("div",{style:{width:"80%",textAlign:"right"}},null!==(d=null===(a=o.component_fields.find(l=>l.field_name===e))||void 0===a?void 0:a.value)&&void 0!==d?d:"")),t.createElement("hr",{style:{borderTop:"0.5px solid #D2D2D2"}}))}))}if("People"===e.data_type_name)if(e.options.calendar){var ul,cl;const o=JSON.parse(null!==(ul=d)&&void 0!==ul?ul:null!==(cl=null===e||void 0===e?void 0:e.value)&&void 0!==cl?cl:JSON.stringify({})),i=x.find(e=>e.id===o.user);if(d=i?"".concat(i.first_name," ").concat(i.last_name):"",null!==o&&void 0!==o&&o.task){var pl;const i=I.find(e=>e.id===o.task);return t.createElement("div",{key:l,style:{margin:"10px 0 10px 0",display:e.visible&&d?"":"none"}},t.createElement("div",{className:ce.actionsContainer,style:{fontSize:"12px"}},t.createElement("div",{style:{fontWeight:"normal",fontSize:"14px"}},e.field_name,":"),t.createElement("div",{style:{display:"flex",flexDirection:"column",textAlign:"right"}},t.createElement("div",null,d),i&&"Closed"!==M.status&&t.createElement("div",null,null===i||void 0===i?void 0:i.name),i&&"Closed"!==M.status&&t.createElement("div",null,b()(new Date(null===i||void 0===i||null===(pl=i.add_info)||void 0===pl?void 0:pl.start)).format("DD MMM YYYY h:mm a")),(null===i||void 0===i?void 0:i.status)&&"Closed"!==M.status&&t.createElement("div",null,null===i||void 0===i?void 0:i.status))),t.createElement("hr",{style:{borderTop:"0.5px solid #D2D2D2"}}))}}else{const l=x.find(l=>{var o;return l.id===(null!==(o=d)&&void 0!==o?o:e.value)});d=l?"".concat(l.first_name," ").concat(l.last_name):""}if("Video"===e.data_type_name&&Z===(null!==(de=null===e||void 0===e||null===(ae=e.options)||void 0===ae?void 0:ae.status)&&void 0!==de?de:"New"))if(null!==e&&void 0!==e&&e.value&&b()(null===e||void 0===e?void 0:e.value)<=(0,g.now)()&&(0,g.now)()<b()(null===e||void 0===e?void 0:e.value).add("minutes",+(null!==(el=null===e||void 0===e||null===(ll=e.options)||void 0===ll?void 0:ll.expiry)&&void 0!==el?el:30)))return t.createElement("div",{key:l,style:{width:"100%",fontSize:"12px",display:"flex",flexDirection:"column",justifyContent:"center"}},t.createElement("div",{style:{fontWeight:"normal",fontSize:"14px"}},e.field_name,":"),t.createElement("div",{style:{width:"100%",fontSize:"12px",display:"flex",flexDirection:"column",justifyContent:"center"}},t.createElement(Fe.Z,{payload:{name:null===M||void 0===M?void 0:M.id}})));if("Clock"===e.data_type_name&&(d=b()(new Date(+d)).format("DD MMM YYYY h:mm a")),"Positions"===e.data_type_name)return t.createElement("div",{key:l,style:{margin:"10px 0 10px 0",display:e.visible&&d?"":"none"}},t.createElement("div",{className:ce.actionsContainer,style:{fontSize:"12px"}},t.createElement("div",{style:{fontWeight:"normal",fontSize:"14px"}},e.field_name,":"),t.createElement("div",{style:{textAlign:"right",width:"60%"}},null!==e&&void 0!==e&&e.value?null===(ol=N.find(l=>l.value===(null===e||void 0===e?void 0:e.value)))||void 0===ol?void 0:ol.label:"-")),t.createElement("hr",{style:{borderTop:"0.5px solid #D2D2D2"}}));if("Details"===e.data_type_name&&null!==e&&void 0!==e&&null!==(re=e.options)&&void 0!==re&&re.key&&(null===e||void 0===e||null===(se=e.options)||void 0===se||null===(ve=se.fields)||void 0===ve?void 0:ve.length)>0){var ml,fl;const l=m.find(l=>l.module_id===e.options.module_id&&l.component_fields.find(l=>{var o,i;return l.field_name===e.options.key&&l.value===(null===M||void 0===M||null===(o=M.component_fields)||void 0===o||null===(i=o.find(l=>l.field_name===e.options.key&&l.value))||void 0===i?void 0:i.value)}));d=null===l||void 0===l||null===(ml=l.component_fields)||void 0===ml||null===(fl=ml.find(l=>{var o;return l.field_name===(null===(o=e.options)||void 0===o?void 0:o.fields[0])}))||void 0===fl?void 0:fl.value}return t.createElement("div",{key:l,style:{margin:"10px 0 10px 0",display:e.visible&&d?"":"none"}},t.createElement("div",{className:ce.actionsContainer,style:{fontSize:"12px"}},t.createElement("div",{style:{fontWeight:"normal",fontSize:"14px"}},e.field_name,":"),t.createElement("div",{style:{textAlign:"right",width:"60%"}},null===d||void 0===d?null!==e&&void 0!==e&&e.value?"Date"===e.data_type_name||"Video"===e.data_type_name?"Invalid date"===b()(new Date(null===e||void 0===e?void 0:e.value)).format("DD MMM YYYY h:mm a")?"":b()(new Date(null===e||void 0===e?void 0:e.value)).format("DD MMM YYYY h:mm a"):null===e||void 0===e?void 0:e.value:"":"Date"===e.data_type_name||"Video"===e.data_type_name?"Invalid date"===b()(new Date(d)).format("DD MMM YYYY h:mm a")?"":b()(new Date(d)).format("DD MMM YYYY h:mm a"):d)),t.createElement("hr",{style:{borderTop:"0.5px solid #D2D2D2"}}))}});return t.createElement("div",{style:{width:"100%",display:L?"none":"",margin:"20px 0"}},H)}),il=e=>{var l,o,i,n;const{component:d,title:a="Created by",show:r=!0}=e,{companyUsersArray:s}=(0,h.v9)(e=>e.flowReducer),v=s.find(e=>{var l;return e.id===(null===(l=d.created_by)||void 0===l?void 0:l.id)});return t.createElement("div",{className:ce.centeredDiv,style:{width:"inherit",fontSize:"14px",marginTop:"20px"}},t.createElement("div",{style:{fontFamily:"var(--app-text-font-mobile)",fontWeight:"bold",color:"var(--app-color-gray-dark)",paddingLeft:"5px"}},a),t.createElement("div",{className:ce.filtersContainer},t.createElement(Ae.Z,{title:"Created by:",simple:!0,photo:null!==(l=null===v||void 0===v?void 0:v.photo)&&void 0!==l?l:"https://s3-symbol-logo.tradingview.com/logo-yazilim--600.png",email:"Document Date: ".concat(b()(new Date(d.created_date)).format("DD MMM YYYY")),position:"Time: ".concat(b()(new Date(d.created_date)).format("h:mm a")),firstName:t.createElement("div",{style:{fontWeight:"bold"}},r?"".concat(null===(o=d.created_by)||void 0===o?void 0:o.first_name," ").concat(null===(i=d.created_by)||void 0===i?void 0:i.last_name):null===(n=d.created_by)||void 0===n?void 0:n.id.replace(/\D/g,"").slice(-5)),cardClicked:()=>{},width:"100%"})))},tl=e=>{var l,o,i,n,d,a,r,s,v,u,c,p,m,f;const{component:_}=e,{companyData:y}=(0,h.v9)(e=>e.flowReducer),{authenticatedUser:g}=(0,h.v9)(e=>e.authReducer),b=null===_||void 0===_?void 0:_.component_fields.find(e=>{var l;return"Payments"===e.data_type_name&&("Done"===(null===_||void 0===_?void 0:_.status)||"Closed"===(null===_||void 0===_?void 0:_.status))&&(null===_||void 0===_||null===(l=_.created_by)||void 0===l?void 0:l.id)===(null===g||void 0===g?void 0:g.id)}),x=null===_||void 0===_?void 0:_.component_fields.find(e=>{var l;return e.field_name===(null===b||void 0===b||null===(l=b.options)||void 0===l?void 0:l.paymentField)});return t.createElement("div",{className:ce.filtersContainer,style:{display:b?"":"none"}},null!==_&&void 0!==_&&_.payments?t.createElement("div",null,t.createElement("div",{className:ce.actionsContainer,style:{fontSize:"12px"}},t.createElement("div",null,"Payments:",":"),t.createElement("div",null,"".concat(null===(l=_.payments)||void 0===l?void 0:l.stripe_product,", ID: ").concat(null===(o=_.payments)||void 0===o?void 0:o.stripe_id.substring(0,5)))),t.createElement("hr",{style:{borderTop:"0.5px solid #D2D2D2"}}),t.createElement("div",{className:ce.actionsContainer,style:{fontSize:"12px"}},t.createElement("div",null,"Amount Paid",":"),t.createElement("div",null,"".concat((+(null!==(i=null===(n=_.payments)||void 0===n?void 0:n.stripe_price)&&void 0!==i?i:0)).toFixed(2)))),t.createElement("hr",{style:{borderTop:"0.5px solid #D2D2D2"}}),(null===(d=_.assigned_to)||void 0===d?void 0:d.id)===(null===g||void 0===g?void 0:g.id)&&t.createElement("div",{className:ce.actionsContainer,style:{fontSize:"12px"}},t.createElement("div",null,"Transaction Fees",":"),t.createElement("div",null,"".concat((+(null===(a=_.payments)||void 0===a?void 0:a.stripe_price)*(null!==(r=null===y||void 0===y||null===(s=y.misc_info)||void 0===s?void 0:s.rate)&&void 0!==r?r:.2)).toFixed(2))))):t.createElement("div",null,"Cash"===(null===b||void 0===b?void 0:b.value)&&t.createElement("div",{className:ce.actionsContainer,style:{fontSize:"12px"}},t.createElement("div",null,"Payments:",":"),t.createElement("div",null,"Cash")),"Cash"===(null===b||void 0===b?void 0:b.value)&&t.createElement("div",{className:ce.actionsContainer,style:{fontSize:"12px"}},t.createElement("div",null,"Cash Paid",":"),t.createElement("div",null,"".concat((+(null===x||void 0===x?void 0:x.value)).toFixed(2)))),"Cash"===(null===b||void 0===b?void 0:b.value)&&(null===(v=_.assigned_to)||void 0===v?void 0:v.id)===(null===g||void 0===g?void 0:g.id)&&t.createElement("div",{className:ce.actionsContainer,style:{fontSize:"12px"}},t.createElement("div",null,"Deducted from wallet",":"),t.createElement("div",null,"".concat((+(null===x||void 0===x?void 0:x.value)+ +(null===x||void 0===x?void 0:x.value)*(null!==(u=null===y||void 0===y||null===(c=y.misc_info)||void 0===c?void 0:c.rate)&&void 0!==u?u:.2)).toFixed(2)))),"Cash"===(null===b||void 0===b?void 0:b.value)&&(null===(p=_.assigned_to)||void 0===p?void 0:p.id)===(null===g||void 0===g?void 0:g.id)&&t.createElement("div",{className:ce.actionsContainer,style:{fontSize:"12px"}},t.createElement("div",null,"Total Fees",":"),t.createElement("div",null,"".concat((+(null===x||void 0===x?void 0:x.value)*(null!==(m=null===y||void 0===y||null===(f=y.misc_info)||void 0===f?void 0:f.rate)&&void 0!==m?m:.2)).toFixed(2)))),"Cash"!==(null===b||void 0===b?void 0:b.value)&&t.createElement("div",{className:ce.actionsContainer,style:{fontSize:"12px",fontWeight:"bold"}},t.createElement("div",null,"Payments:",":"),t.createElement("div",{style:{color:"red"}},"Pending"))))},nl=e=>{const{companyUsersArray:l}=u.h.getState().flowReducer,{isEdit:o,modalVisible:i,heading:n,onClose:d,isProcess:r,setIsProcessBegin:s,task:v,priority:c=!0,shadowedContainerStyle:m,statuses:_,start_date:y,span:h,labels:g={},onUpdate:b=()=>{},save:x=!0}=e,[E]=(0,t.useState)(g),[C]=(0,t.useState)(r),[w]=(0,t.useState)(n);return(0,t.useEffect)(()=>{let e=[];if(v){var o,i;if(!l.find(e=>{var l;return e.id===(null===v||void 0===v||null===(l=v.creator)||void 0===l?void 0:l.id)}))e=e.concat(null===(o=v.creator)||void 0===o?void 0:o.id);if(!l.find(e=>{var l;return e.id===(null===v||void 0===v||null===(l=v.assignee)||void 0===l?void 0:l.id)}))e=e.concat(null===(i=v.assignee)||void 0===i?void 0:i.id);e.length>0&&(0,be.VG)(e).pipe((0,p.P)()).subscribe({next:e=>{u.h.dispatch((0,a.NY)(l.concat(e)))}})}},[]),t.createElement("div",null,t.createElement(f.U7,{scrollable:!0,shadowedContainerStyle:m||{width:"100%",minHeight:"100vh"},isOpen:i,onClose:()=>{},blured:!1},t.createElement("div",null,t.createElement("p",{style:{fontFamily:"var(--app-text-font-mobile)",fontSize:"20px",fontWeight:"bold",color:"#4A4A4A",marginTop:"50px",marginBottom:"20px",textAlign:"center"}},null!==v&&void 0!==v&&v.completed_at?"Completed Task":w),t.createElement(dl,{labels:E,showPriority:c,statuses:_,task:v,setIsProcessBegin:s,setDisplayModal:d,isProcess:C,isEdit:o,onClose:()=>d(),start_date:y,span:h,onUpdate:b,save:x}))))};function dl(e){var l,o,n,d,a,r,s,c,p,m,_,y,h,g,x,w,M,S,k,Z,I,N,T,D,A,O,z,U,F,W,q,B,Y,H,V,j,G,J,K,Q,X,$,ee,le,oe,ie,te,ne,de,ae,re,se,ve,ue,pe;const{selectedProcess:me,companyUsersArray:ye,begunModule:he,companyData:ge}=u.h.getState().flowReducer,{user:be}=u.h.getState().sessionReducer,{isProcess:xe,statuses:Ee,task:Ce,isEdit:we,assigneeId:Me,setDisplayModal:Se,onClose:ke,start_date:Ze=(new Date).setDate((new Date).getDate()),span:Ie=!0,labels:Ne,onUpdate:Te=()=>{},save:De=!0}=e,[Pe,Ae]=(0,t.useState)(null!==Ce&&void 0!==Ce&&null!==(l=Ce.assignee)&&void 0!==l&&l.id?{assignee_id:null===Ce||void 0===Ce||null===(o=Ce.assignee)||void 0===o?void 0:o.id}:""),[Oe,ze]=(0,t.useState)(null!==Ce&&void 0!==Ce&&null!==(n=Ce.process)&&void 0!==n&&n.id?{process:null===Ce||void 0===Ce||null===(d=Ce.process)||void 0===d?void 0:d.id}:""),[Re,Ue]=(0,t.useState)((null===Ce||void 0===Ce?void 0:Ce.name)||""),[Fe,We]=(0,t.useState)((null===Ce||void 0===Ce?void 0:Ce.status)||""),[qe,Be]=(0,t.useState)((null===Ce||void 0===Ce?void 0:Ce.description)||""),[Ye,He]=(0,t.useState)(null!==Ce&&void 0!==Ce&&Ce.due_date?new Date(null===Ce||void 0===Ce?void 0:Ce.due_date):(new Date).setDate((new Date).getDate())+36e5),[Ve,je]=(0,t.useState)(null!==(a=null===Ce||void 0===Ce||null===(r=Ce.add_info)||void 0===r?void 0:r.pos)&&void 0!==a?a:null===be||void 0===be||null===(s=be.positions[0])||void 0===s?void 0:s.id),[Ge,Je]=(0,t.useState)(null!==Ce&&void 0!==Ce&&null!==(c=Ce.add_info)&&void 0!==c&&c.start?new Date(null===Ce||void 0===Ce||null===(p=Ce.add_info)||void 0===p?void 0:p.start):Ze),[Ke,Qe]=(0,t.useState)(null!==Ce&&void 0!==Ce&&null!==(m=Ce.add_info)&&void 0!==m&&m.end?new Date(null===Ce||void 0===Ce||null===(_=Ce.add_info)||void 0===_?void 0:_.end):Ze),[Xe,$e]=(0,t.useState)(null===Ce||void 0===Ce||null===(y=Ce.add_info)||void 0===y?void 0:y.value),[el,ll]=(0,t.useState)(""),[ol,il]=(0,t.useState)(!1),[tl,nl]=(0,t.useState)(!1),[dl,rl]=(0,t.useState)(!1),[sl,vl]=(0,t.useState)(!1),[ul,cl]=(0,t.useState)(xe),[pl,ml]=(0,t.useState)((null===Ce||void 0===Ce||null===(h=Ce.add_info)||void 0===h?void 0:h.priority)||""),fl=(null===ye||void 0===ye?void 0:ye.length)>0?we&&(null===Ce||void 0===Ce||null===(g=Ce.creator)||void 0===g?void 0:g.id)!==be.id?[{label:be.first_name+" "+be.last_name,value:be.id}]:(null===Ne||void 0===Ne||null===(x=Ne.aList)||void 0===x?void 0:x.length)>0?ye.filter(e=>{var l;return(null===e||void 0===e||null===(l=e.positions)||void 0===l?void 0:l.filter(e=>{var l,o;return null===Ne||void 0===Ne||null===(l=Ne.options)||void 0===l||null===(o=l.aList)||void 0===o?void 0:o.includes(null===e||void 0===e?void 0:e.id)}).length)>0}).map(e=>({label:e.first_name+" "+e.last_name,value:e.id})):ye.map(e=>({label:e.first_name+" "+e.last_name,value:e.id})):[];(0,t.useEffect)(()=>(rl(!0),()=>{rl(!1)}),[]),(0,t.useEffect)(()=>{if(ul&&null!==me&&void 0!==me&&me.id&&dl){(()=>{ze({procedure_id:me.id}),Be(me.description)})()}},[ul,dl,me.description,me.id]);const _l=Ee?Ee.map(e=>({label:e,value:e})):[{label:"Ongoing",value:"Ongoing"},{label:"In Review",value:"In Review"},{label:"Approved",value:"Approved"},{label:"Postponed",value:"Postponed"},{label:"Moved",value:"Moved"},{label:"Cancelled",value:"Cancelled"}];return t.createElement("div",{className:ce.newTaskFormHost,style:{padding:"0 20px 0 20px"}},t.createElement(R(),{style:{flex:1}},t.createElement(_e.Z,{titleProps:{fontSize:"14px",color:"var(--app-color-gray-dark)",fontWeight:"normal",paddingLeft:"5px"},enabled:void 0===(null===Ce||void 0===Ce?void 0:Ce.id)||(null===Ce||void 0===Ce||!Ce.completed_at)&&be.id===(null===Ce||void 0===Ce||null===(w=Ce.creator)||void 0===w?void 0:w.id),width:"100%",style:{marginTop:"0px",border:"0px solid var(--app-color-gray-lighter)",padding:"5px",marginBottom:"10px",backgroundColor:"var(--app-color-gray-lightest)"},editMode:!1,fieldLabel:null!==(M=null===Ne||void 0===Ne?void 0:Ne.title)&&void 0!==M?M:"Event Name",isProcess:!0,visible:!0,mandatory:!0,error:null===el||void 0===el||null===(S=el.errors)||void 0===S?void 0:S.name},t.createElement("textarea",{className:ce.fieldTypeTextarea,type:"text",value:Re,readOnly:void 0!==(null===Ce||void 0===Ce?void 0:Ce.id)&&(!(null===Ce||void 0===Ce||!Ce.completed_at)||be.id!==(null===Ce||void 0===Ce||null===(k=Ce.creator)||void 0===k?void 0:k.id)),autoComplete:"none",onChange:e=>Ue(e.target.value),placeholder:"",style:{height:"60px",border:"0"}})),t.createElement(_e.Z,{titleProps:{fontSize:"14px",color:"var(--app-color-gray-dark)",fontWeight:"normal",paddingLeft:"5px"},enabled:void 0===(null===Ce||void 0===Ce?void 0:Ce.id)||(null===Ce||void 0===Ce||!Ce.completed_at)&&be.id===(null===Ce||void 0===Ce||null===(Z=Ce.creator)||void 0===Z?void 0:Z.id),width:"100%",style:{marginTop:"0px",border:"0px solid var(--app-color-gray-lighter)",padding:"5px",marginBottom:"10px",backgroundColor:"var(--app-color-gray-lightest)"},editMode:!0,fieldLabel:null!==(I=null===Ne||void 0===Ne?void 0:Ne.description)&&void 0!==I?I:"Description",isProcess:!0,visible:(null!==Ce&&void 0!==Ce&&Ce.completed_at,!0),mandatory:!0,error:null===el||void 0===el||null===(N=el.errors)||void 0===N?void 0:N.name},t.createElement("textarea",{className:ce.fieldTypeTextarea,style:{border:"0",minHeight:"160px"},readOnly:void 0!==(null===Ce||void 0===Ce?void 0:Ce.id)&&(!(null===Ce||void 0===Ce||!Ce.completed_at)||be.id!==(null===Ce||void 0===Ce||null===(T=Ce.creator)||void 0===T?void 0:T.id)),required:null===el||void 0===el||null===(D=el.errors)||void 0===D?void 0:D.description,value:qe,onChange:e=>Be(e.target.value)})),t.createElement(_e.Z,{titleProps:{fontSize:"14px",color:"var(--app-color-gray-dark)",fontWeight:"normal",paddingLeft:"5px"},enabled:void 0===(null===Ce||void 0===Ce?void 0:Ce.id)||(null===Ce||void 0===Ce||!Ce.completed_at)&&be.id===(null===Ce||void 0===Ce||null===(A=Ce.creator)||void 0===A?void 0:A.id),width:"100%",style:{marginTop:"0px",border:"0px solid var(--app-color-gray-lighter)",padding:"5px",marginBottom:"10px",backgroundColor:"var(--app-color-gray-lightest)"},editMode:!1,fieldLabel:null===Ne||void 0===Ne?void 0:Ne.valueL,isProcess:!0,visible:!(null===Ne||void 0===Ne||!Ne.valueL),mandatory:!0},t.createElement("div",null,t.createElement("input",{className:ce.fieldTypeInput,style:{border:"0"},readOnly:void 0!==(null===Ce||void 0===Ce?void 0:Ce.id)&&(!(null===Ce||void 0===Ce||!Ce.completed_at)||be.id!==(null===Ce||void 0===Ce||null===(O=Ce.creator)||void 0===O?void 0:O.id)),value:Xe,onChange:e=>$e(e.target.value),onBlur:()=>{var e,l,o;null!==he&&void 0!==he&&null!==(e=he.processModule)&&void 0!==e&&null!==(l=e.module)&&void 0!==l&&null!==(o=l.options)&&void 0!==o&&o.credits&&+Xe>+(null===be||void 0===be?void 0:be.wallet)&&($e("0.00"),ll({errors:{value:"You have insufficient funds in your wallet. You currently have ".concat(null===be||void 0===be?void 0:be.wallet,".")}}))}}),el&&(null===el||void 0===el||null===(z=el.errors)||void 0===z?void 0:z.value)&&t.createElement(P.Z,{message:el.errors.value,onClick:()=>ll("")}))),t.createElement(_e.Z,{titleProps:{fontSize:"14px",color:"var(--app-color-gray-dark)",fontWeight:"normal",paddingLeft:"5px"},enabled:void 0===(null===Ce||void 0===Ce?void 0:Ce.id)||(null===Ce||void 0===Ce||!Ce.completed_at)&&be.id===(null===Ce||void 0===Ce||null===(U=Ce.creator)||void 0===U?void 0:U.id),width:"100%",style:{marginTop:"0px",border:"0px solid var(--app-color-gray-lighter)",padding:"5px",marginBottom:"10px",backgroundColor:"var(--app-color-gray-lightest)"},editMode:!1,fieldLabel:null!==(F=null===Ne||void 0===Ne?void 0:Ne.start)&&void 0!==F?F:"Start Date",isProcess:!0,visible:!0,mandatory:!0,error:null===el||void 0===el||null===(W=el.errors)||void 0===W?void 0:W.due_date},t.createElement(fe(),{showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:15,readOnly:void 0!==(null===Ce||void 0===Ce?void 0:Ce.id)&&(!(null===Ce||void 0===Ce||!Ce.completed_at)||be.id!==(null===Ce||void 0===Ce||null===(q=Ce.creator)||void 0===q?void 0:q.id)),placeholderText:"Start Date",customInput:t.createElement("div",{id:"custom-input",style:{cursor:"pointer",display:"flex",justifyContent:"center",width:"100%",alignItems:"stretch"}},t.createElement("input",{readOnly:!0,value:void 0!==(null===Ce||void 0===Ce?void 0:Ce.id)&&(null!==Ce&&void 0!==Ce&&Ce.completed_at||be.id!==(null===Ce||void 0===Ce||null===(B=Ce.creator)||void 0===B?void 0:B.id))?"".concat(b()(Ge).format("DD MMMM YYYY HH:mm")):b()(Ge).format("DD MMMM YYYY HH:mm"),type:"text",required:null===el||void 0===el||null===(Y=el.errors)||void 0===Y?void 0:Y.startDate,id:"start-date",style:{flex:1,marginTop:"auto",marginBottom:"auto",outline:"none",border:"none",fontFamily:"var(--app-text-font-mobile)",fontSize:"16px",fontWeight:"bold",lineHeight:"20px",color:"#4A4A4A",textAlign:(null===Ge||void 0===Ge?void 0:Ge.length)>0?"center":"left",maxWidth:"98%",backgroundColor:"transparent"},placeholder:"Start Date",onChange:e=>{}}),t.createElement(C.G,{icon:E.WRo,style:{width:"14px",height:"14px"}})),className:ce.datePickerWrapper,selected:Ge,onChange:e=>{b()(e).diff(b()(Ke),"minutes")<1?Je(e):(Je(e),Qe(e))}})),t.createElement(_e.Z,{titleProps:{fontSize:"14px",color:"var(--app-color-gray-dark)",fontWeight:"normal",paddingLeft:"5px"},enabled:void 0===(null===Ce||void 0===Ce?void 0:Ce.id)||(null===Ce||void 0===Ce||!Ce.completed_at)&&be.id===(null===Ce||void 0===Ce||null===(H=Ce.creator)||void 0===H?void 0:H.id),width:"100%",style:{marginTop:"0px",border:"0px solid var(--app-color-gray-lighter)",padding:"5px",marginBottom:"10px",backgroundColor:"var(--app-color-gray-lightest)"},editMode:!1,fieldLabel:null!==(V=null===Ne||void 0===Ne?void 0:Ne.end)&&void 0!==V?V:"End Date",isProcess:!0,visible:!0,mandatory:!0,error:null===el||void 0===el||null===(j=el.errors)||void 0===j?void 0:j.due_date},t.createElement(fe(),{showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:15,readOnly:void 0!==(null===Ce||void 0===Ce?void 0:Ce.id)&&(!(null===Ce||void 0===Ce||!Ce.completed_at)||be.id!==(null===Ce||void 0===Ce||null===(G=Ce.creator)||void 0===G?void 0:G.id)),placeholderText:"End Date",customInput:t.createElement("div",{id:"custom-input",style:{cursor:"pointer",display:"flex",justifyContent:"center",width:"100%",alignItems:"stretch"}},t.createElement("input",{readOnly:!0,value:b()(Ke).format("DD MMMM YYYY HH:mm"),type:"text",required:null===el||void 0===el||null===(J=el.errors)||void 0===J?void 0:J.endDate,id:"due-date",style:{flex:1,marginTop:"auto",marginBottom:"auto",outline:"none",border:"none",fontFamily:"var(--app-text-font-mobile)",fontSize:"16px",fontWeight:"bold",lineHeight:"20px",color:"#4A4A4A",textAlign:(null===Ke||void 0===Ke?void 0:Ke.length)>0?"center":"left",maxWidth:"98%",backgroundColor:"transparent"},placeholder:"Due Date",onChange:e=>{}}),t.createElement(C.G,{icon:E.WRo,style:{width:"14px",height:"14px"}})),className:ce.datePickerWrapper,selected:Ke,onChange:e=>{b()(e).diff(b()(Ge),"minutes")>0?!1===Ie?b()(e).format("DD")===b()(Ke).format("DD")?Qe(e):Qe(Ke):Qe(e):Qe(Ke)}})),(null===be||void 0===be||null===(K=be.positions)||void 0===K?void 0:K.length)>1&&(!(null!==Ce&&void 0!==Ce&&Ce.id)||(null===(Q=Ce.creator)||void 0===Q?void 0:Q.id)===be.id)&&t.createElement("div",{style:{marginBottom:"10px"}},t.createElement("label",{style:{fontSize:"14px",color:"var(--app-color-gray-dark)",fontWeight:"normal",paddingLeft:"5px"}},t.createElement("p",null,"Role"),null!==Ce&&void 0!==Ce&&null!==(X=Ce.add_info)&&void 0!==X&&X.pos||null!==Ce&&void 0!==Ce&&Ce.completed_at?t.createElement("div",null,t.createElement("input",{style:{marginTop:"auto",marginBottom:"auto",outline:"none",fontFamily:"var(--app-text-font-mobile)",fontSize:"16px",fontWeight:"bold",lineHeight:"20px",color:"#4A4A4A",padding:"10px",border:"1px solid var(--app-color-gray-lighter)",width:"100%",backgroundColor:"transparent"},defaultValue:null===be||void 0===be||null===($=be.positions.find(e=>{var l;return e.id===(null===Ce||void 0===Ce||null===(l=Ce.add_info)||void 0===l?void 0:l.pos)}))||void 0===$?void 0:$.name,readOnly:!0})):t.createElement(L.ZP,{isSearchable:!1,key:"pos",styles:v.X2,defaultInputValue:"",components:{DropdownIndicator:v.ms},placeholder:"",options:null===be||void 0===be?void 0:be.positions.map(e=>({label:e.name,value:e.id,pos:e})),onChange:e=>{je(e.value)}}),t.createElement("div",{style:{fontWeight:"normal",margin:"10px"}},"Note: Your role when making this task")),el&&(null===el||void 0===el||null===(ee=el.errors)||void 0===ee?void 0:ee.procedure_id)&&t.createElement(P.Z,{message:el.errors.procedure_id})),t.createElement("div",{style:{marginBottom:"10px"}},t.createElement("label",{style:{fontSize:"14px",color:"var(--app-color-gray-dark)",fontWeight:"normal",paddingLeft:"5px"}},null!==(le=null===Ne||void 0===Ne?void 0:Ne.assignee)&&void 0!==le?le:"Assignee",null!==Ce&&void 0!==Ce&&Ce.completed_at?t.createElement("div",null,t.createElement("input",{style:{cursor:"auto"},placeholder:(null===Ce||void 0===Ce?void 0:Ce.assignee.first_name)+" "+(null===Ce||void 0===Ce?void 0:Ce.assignee.last_name),readOnly:!0})):t.createElement(L.ZP,{isSearchable:!1,key:"Assignee",styles:v.X2,defaultInputValue:"",components:{DropdownIndicator:v.ms},placeholder:"",value:fl[fl.findIndex(e=>e.value===Pe.assignee_id)],options:fl.concat([{label:"None",value:""}]),onChange:e=>{e&&Ae(l=>(0,i.Z)((0,i.Z)({},l),{},{assignee_id:e.value}))}})),el&&(null===el||void 0===el||null===(oe=el.errors)||void 0===oe?void 0:oe.assignee_id)&&t.createElement(P.Z,{message:el.errors.assignee_id})),((null===Ce||void 0===Ce?void 0:Ce.completed_at)||be.id===(null===Ce||void 0===Ce||null===(ie=Ce.creator)||void 0===ie?void 0:ie.id))&&t.createElement("div",{style:{marginBottom:"10px"}},t.createElement("label",{style:{fontSize:"14px",color:"var(--app-color-gray-dark)",fontWeight:"normal",paddingLeft:"5px"}},"Status",null!==Ce&&void 0!==Ce&&Ce.completed_at?t.createElement("input",{style:{cursor:"auto"},placeholder:null!==(te=null===Ce||void 0===Ce?void 0:Ce.status)&&void 0!==te?te:"No status set",readOnly:!0}):be.id===(null===Ce||void 0===Ce||null===(ne=Ce.creator)||void 0===ne?void 0:ne.id)?t.createElement(L.ZP,{onFocus:()=>ll(""),key:"status",isSearchable:!1,styles:v.X2,defaultInputValue:"",components:{DropdownIndicator:v.ms},placeholder:"",value:_l.find(e=>e.value===Fe),options:be.id===(null===Ce||void 0===Ce||null===(de=Ce.creator)||void 0===de?void 0:de.id)?[..._l,{label:null===ge||void 0===ge||null===(ae=ge.misc_info)||void 0===ae?void 0:ae.lock,value:null===ge||void 0===ge||null===(re=ge.misc_info)||void 0===re?void 0:re.lock},{label:"No status",value:""}]:_l,onChange:e=>We(e.value)}):t.createElement("input",{style:{cursor:"auto"},placeholder:null!==(se=null===Ce||void 0===Ce?void 0:Ce.status)&&void 0!==se?se:"No status set",readOnly:!0})),el&&(null===el||void 0===el||null===(ve=el.errors)||void 0===ve?void 0:ve.procedure_id)&&t.createElement(P.Z,{message:el.errors.procedure_id})),el&&(null===el||void 0===el?void 0:el.message)&&t.createElement(P.Z,{message:el.message})),null!==Ce&&void 0!==Ce&&Ce.completed_at?t.createElement("div",{className:ce.buttonsContainer},t.createElement(f.zx,{clicked:ke,className:ce.saveButton,title:"Close"})):we?t.createElement("div",{className:ce.buttonsContainer},t.createElement(f.zx,{clicked:ke,className:ce.saveButton,title:"Close"}),De&&be.id===(null===(ue=Ce.creator)||void 0===ue?void 0:ue.id)&&!(null!==Ce&&void 0!==Ce&&null!==(pe=Ce.assignee)&&void 0!==pe&&pe.id)&&t.createElement(f.zx,{light:!0,clicked:()=>vl(!0),className:ce.saveButton,title:"Delete"}),De&&t.createElement(f.zx,{light:!0,clicked:()=>(()=>{var l,o;il(!0);let t=Pe?Pe.assignee_id:Me;(0,Le.xJ)({assignee_id:t,name:Re,description:qe,dueDate:b()(Ke).format("YYYY-MM-DD HH:mm"),status:null!==Fe&&void 0!==Fe?Fe:"",add_info:(0,i.Z)((0,i.Z)({},null===e||void 0===e||null===(l=e.task)||void 0===l?void 0:l.add_info),{},{priority:null!==pl&&void 0!==pl?pl:"",start:Ge,end:Ke,value:Xe,pos:Ve})},null===e||void 0===e||null===(o=e.task)||void 0===o?void 0:o.id).subscribe({next:e=>{Te(e),il(!1),Se(!1)},error:e=>{e&&(ll(e.data),il(!1))},complete:()=>{}})})(),className:ce.saveButton,title:"Update",loading:ol}),!De&&t.createElement(f.zx,{title:"Save",light:!0,clicked:()=>{var l;Te((0,i.Z)((0,i.Z)({},null===e||void 0===e?void 0:e.task),{},{assignee_id:Pe?Pe.assignee_id:Me,name:Re,description:qe,due_date:b()(Ye).format("YYYY-MM-DD HH:mm"),status:null!==Fe&&void 0!==Fe?Fe:"",add_info:(0,i.Z)((0,i.Z)({},null===e||void 0===e||null===(l=e.task)||void 0===l?void 0:l.add_info),{},{priority:null!==pl&&void 0!==pl?pl:"",start:Ge,end:Ke,value:Xe})})),Se(!1)},className:ce.saveButton})):t.createElement("div",{className:ce.buttonsContainer},t.createElement(f.zx,{clicked:ke,className:ce.saveButton,title:"Close"}),t.createElement(f.zx,{light:!0,clicked:()=>(il(!0),void(0,Le.vr)({newAssignee:Pe,taskProcess:null===he||void 0===he?void 0:he.processModule,taskName:Re,taskDescription:null!==qe&&void 0!==qe?qe:"-",dueDate:b()(Ke).format("YYYY-MM-DD HH:mm"),add_info:{module_id:null===he||void 0===he?void 0:he.processModule.module_id,priority:pl,start:Ge,end:Ke,value:Xe,pos:Ve}}).subscribe({next:e=>{ke()},error:e=>{e&&(ll(e.data),il(!1))},complete:()=>{il(!1),!ul&&Se(!1)}})),className:ce.saveButton,title:"Save",loading:ol})),sl&&t.createElement(al,{taskId:Ce.id,isOpen:sl,removeTask:e=>{nl(!0),(0,Le._5)(e).subscribe({next:e=>{nl(!1),vl(!1)},error:e=>{nl(!1)},complete:()=>{Se(!1)}})},loading:tl,onClose:vl}))}const al=e=>{const{isOpen:l,onClose:o,loading:i,removeTask:n,taskId:d}=e;return t.createElement(f.U7,{isOpen:l,onClose:()=>o(!1),backdropColor:!0,blured:!0,scrollable:!0,shadowedContainerStyle:{width:"35%"}},t.createElement("div",null,t.createElement("p",{style:{textAlign:"center",fontSize:"20px",color:"#4A4A4A",fontFamily:"var(--app-text-font-mobile)"}},"Are you sure do you want to delete this task?"),t.createElement(f.zx,{loading:i,clicked:()=>n(d),title:"Yes, Delete",style:{fontWeight:"500",marginLeft:"auto",marginRight:"auto"}}),t.createElement("p",{style:{cursor:"pointer",textAlign:"center",fontSize:"16px",fontWeight:600,color:"#4A4A4A",fontFamily:"var(--app-text-font-mobile)"},onClick:()=>o(!1),className:"go-back-text"},"No, Go Back")))},rl=(0,h.$j)(e=>{const{begunModule:l,allModules:o,companyData:i,components:t,rememberPath:n,lastUpdates:d,companyUsersArray:a,products:r,transactions:s,companyProcesses:v,companyPositionsArray:u,cart:c,blueprints:p,payable:m,allTasks:f}=e.flowReducer,{authenticatedUser:_}=e.authReducer,{user:y}=e.sessionReducer;return{user:y,begunModule:l,allModules:o,companyData:i,components:t,rememberPath:n,lastUpdates:d,companyUsersArray:a,products:r,transactions:s,companyProcesses:v,companyPositionsArray:u,cart:c,blueprints:p,payable:m,authenticatedUser:_,allTasks:f}},e=>({onSetAuthenticatedUser:l=>e((0,x.IF)(l))}))(e=>{var l,o,d,r,x,w,M,N,T,D,O,L,z,R,F,$,ee,le,oe,ie,te,ne,de,se,ve,ue,pe,me,fe,_e,ye,he,ge,xe,Ee,Ce,we,Me,Se,ke,Ze,Ie,Ne,Te,De,Pe,Oe,ze,Re,Ue,Fe,Be,Ye,He,Ge,Je,Ke,Qe,Xe,$e,ll,ol,il,tl,nl,dl,al,rl,sl,vl,ul,cl,pl,ml,fl,_l,yl,hl,gl,bl,xl,El,Cl,wl,Ml,Sl,kl,Zl,Il,Nl,Tl,Dl,Pl,Al,Ol,Ll;const{navigateTo:zl={},begunModule:Rl,user:Ul,cart:Fl,selectedProcess:Wl={steps:[]},allModules:ql,companyData:Bl,components:Yl,onCancel:Hl=()=>{},companyUsersArray:Vl,products:jl,companyPositionsArray:Gl,blueprints:Jl,paymentID:Kl="",isEditing:Ql=!1,payable:Xl,selectedComponent:$l,setSelectedComponent:eo,isProcessorOnly:lo=!1,companyProcesses:oo,lastUpdates:io,allTasks:to}=e,{authenticatedUser:no}=(0,h.v9)(e=>e.authReducer),[ao,ro]=(0,t.useState)(!1),[so]=(0,t.useState)(1),[vo,uo]=(0,t.useState)(!1),[co,po]=(0,t.useState)(!1),[mo,fo]=(0,t.useState)(""),[_o,yo]=(0,t.useState)(!1),[ho,go]=(0,t.useState)(!1),[bo,xo]=(0,t.useState)(null===(l=null===$l||void 0===$l?void 0:$l.is_complete)||void 0===l||l),[Eo,Co]=(0,t.useState)([]),[wo,Mo]=(0,t.useState)([]),[So,ko]=(0,t.useState)(!1),[Zo,Io]=(0,t.useState)(!1),[No,To]=(0,t.useState)(!1),[Do,Po]=(0,t.useState)(!1),[Ao,Oo]=(0,t.useState)(!1),[Lo,zo]=(0,t.useState)(!1),[Ro,Uo]=(0,t.useState)(!1),[Fo,Wo]=(0,t.useState)([]),[qo,Bo]=(0,t.useState)([]),[Yo,Ho]=(0,t.useState)([]),[Vo,jo]=(0,t.useState)(!1),[Go,Jo]=(0,t.useState)(!1),[Ko,Qo]=(0,t.useState)(!1),[Xo,$o]=(0,t.useState)(!1),[ei,li]=(0,t.useState)(5),[oi,ii]=(0,t.useState)(0),[ti,ni]=(0,t.useState)(!1),[,di]=(0,t.useState)(!1),[ai,ri]=(0,t.useState)(!1),[si,vi]=(0,t.useState)(!1),ui=(0,n.s0)(),ci=(null===Wl||void 0===Wl||null===(o=Wl.steps)||void 0===o?void 0:o.length)>0?null===Wl||void 0===Wl?void 0:Wl.steps[Rl.processModule.stepIndex]:{},pi=(null===Wl||void 0===Wl||null===(d=Wl.steps)||void 0===d?void 0:d.length)>0?null===Wl||void 0===Wl||null===(r=Wl.steps[Rl.processModule.stepIndex])||void 0===r?void 0:r.pathway_steps:[],mi=(null===Wl||void 0===Wl||null===(x=Wl.steps)||void 0===x?void 0:x.length)>0?null===(w=Wl.steps[Rl.processModule.stepIndex])||void 0===w?void 0:w.pathway_processes:[];let fi=(0,t.useRef)();const _i=(0,t.useRef)(),[yi,hi]=(0,_.pQ)();(0,t.useEffect)(()=>{var e,l;if(void 0===(null===Rl||void 0===Rl||null===(e=Rl.processModule)||void 0===e?void 0:e.isUpdating)){let e=Wl;if(e&&e.steps.length>0){var o;const l=(0,i.Z)((0,i.Z)((0,i.Z)({},Rl.processModule),e),{},{steps:e.steps.filter(l=>{var o,i,t,n,d,a;return void 0==(null===l||void 0===l||null===(o=l.options)||void 0===o?void 0:o.showStepAll)||1==(null===l||void 0===l||null===(i=l.options)||void 0===i?void 0:i.showStepAll)||0==(null===l||void 0===l||null===(t=l.options)||void 0===t?void 0:t.showStepAll)&&(null===l||void 0===l||null===(n=l.options)||void 0===n||null===(d=n.showOnly)||void 0===d?void 0:d.filter(e=>no.positions.map(e=>e.id).indexOf(e)>-1).length)>0||(null===l||void 0===l||null===(a=l.options)||void 0===a?void 0:a.showStepAuthor)&&(null===no||void 0===no?void 0:no.id)===(null===e||void 0===e?void 0:e.user_id)}).map((e,l)=>(0,i.Z)((0,i.Z)({},e),{},{rank:l+1}))});u.h.dispatch((0,a.q4)(l)),hi({action:_._U.setCurrentStep,value:l.steps[null!==(o=Rl.processModule.stepIndex)&&void 0!==o?o:0]})}}else if(!0===(null===Rl||void 0===Rl||null===(l=Rl.processModule)||void 0===l?void 0:l.isUpdating)){var t;hi({action:_._U.setCurrentStep,value:Rl.processModule.steps[null!==(t=Rl.processModule.stepIndex)&&void 0!==t?t:0]})}},[]),(0,t.useEffect)(()=>{let e=Vl.filter(e=>0==e.departments.length).map(e=>({label:"".concat(e.first_name," ").concat(e.last_name),value:e.id,department:"General",user:e}));Vl.filter(e=>e.departments.length>0).filter(l=>{l.departments.filter(o=>{e=[...e,{label:"".concat(l.first_name," ").concat(l.last_name),value:l.id,department:null===o||void 0===o?void 0:o.name,user:l}]})}),Bo(e)},[Vl]),(0,t.useEffect)(()=>{Xl.length>0&&""!==Kl&&Xl.map((e,l)=>{var o;ro(!0),(0,re.e_)({user_id:no.id,id:null===e||void 0===e?void 0:e.id,total:-Math.abs(+(null!==(o=null===e||void 0===e?void 0:e.amount)&&void 0!==o?o:0)),product:null===e||void 0===e?void 0:e.product,notes:"Payment",quantity:1}).pipe((0,p.P)()).subscribe({next:()=>{if(ro(!1),l+1==Xl.length){var e,o,i,t;if(Xl.filter(e=>e.paymentID===Kl).length>0)zo((null===Rl||void 0===Rl||null===(e=Rl.processModule)||void 0===e||null===(o=e.module)||void 0===o||null===(i=o.options)||void 0===i||null===(t=i.message)||void 0===t?void 0:t.length)>0);u.h.dispatch((0,a.Wy)([])),Ci()}}})})},[Xl,Kl]),(0,t.useEffect)(()=>{var e,l;if((null===Rl||void 0===Rl||null===(e=Rl.processModule)||void 0===e||null===(l=e.steps)||void 0===l?void 0:l.length)>0){let e={id:""},l=[],t=[];const n=o=>{o.component_fields.map(i=>{var n,d;o.procedure_id!==(null===qe||void 0===qe?void 0:qe.id)&&(e=oo.find(e=>e.id===o.procedure_id),null!==(n=e)&&void 0!==n&&n.steps&&(l=W.Z(q.Z("component_blueprints"),B.Z)(null===(d=e)||void 0===d?void 0:d.steps),t=W.Z(q.Z("selected_fields"),B.Z)(l)));const a=t.find(e=>e.procedure_step_blueprint_field_id===i.procedure_step_blueprint_field_id);var r;a&&(i.data_type_name=a.data_type_name,i.data_type=a.data_type,i.field_name=a.field_name,i.options=a.options,i.component_blueprint_id=null===(r=l.find(e=>e.selected_fields.filter(e=>e.procedure_step_blueprint_field_id===i.procedure_step_blueprint_field_id).length>0))||void 0===r?void 0:r.id)})};var o,i;if(Y.Z(n,Yl.filter(e=>e.component_fields.filter(e=>void 0===(null===e||void 0===e?void 0:e.field_name)).length>0)),void 0!==(null===zl||void 0===zl?void 0:zl.key))Wo(ki(null===Rl||void 0===Rl||null===(o=Rl.processModule)||void 0===o||null===(i=o.module)||void 0===i?void 0:i.id,Yl,zl.value,zl.key));else Wo(Yl.filter(e=>{var l,o;return e.module_id===(null===Rl||void 0===Rl||null===(l=Rl.processModule)||void 0===l||null===(o=l.module)||void 0===o?void 0:o.id)}))}},[zl,Rl,Yl]);const gi=(0,t.useCallback)(()=>{let e=!1;return ci.component_blueprints.filter(e=>{var l,o;return null===e.options||(!1===(null===(l=e.options)||void 0===l?void 0:l.allowMultipleInputs)||void 0===(null===(o=e.options)||void 0===o?void 0:o.allowMultipleInputs))}).some(e=>{var l;return!0===(null===(l=e.selected_fields)||void 0===l?void 0:l.filter(e=>"Summary"!==e.data_type_name&&"Profile"!==e.data_type_name&&"ID"!==e.data_type_name&&"Info"!==e.data_type_name&&"Notes"!==e.data_type_name&&"URL"!==e.data_type_name&&"Emails"!==e.data_type_name&&"Template"!==e.data_type_name&&"Global"!==e.data_type_name&&"Chart"!==e.data_type_name&&"Value"!==e.data_type_name).some(e=>{var l;return!0===e.mandatory&&!0===e.visible&&(!e.value||(null===e||void 0===e||null===(l=e.value)||void 0===l?void 0:l.length)<1)}))})&&(e=!0),!0===e?(po(!0),!0):(fo(""),po(!1),!1)},[ci]),bi=e=>{var l;yo(!0),gi()&&!1===(null===Rl||void 0===Rl||null===(l=Rl.processModule)||void 0===l?void 0:l.isUpdating)?Si():Ei(e)},xi=e=>{yi.components=[],yi.items=[],yi.currentStep={},yi.newStepComponents=[],Rl.processModule.steps.filter(e=>e.component_blueprints.filter(e=>e.selected_fields.filter(e=>e.value=void 0))),u.h.dispatch((0,a.q4)((0,i.Z)((0,i.Z)({},Rl.processModule),{},{isUpdating:!1}))),go(!1),yo(!0),Ei(e),Bl.start=!1,(0,I.aK)().pipe((0,p.P)()).subscribe({next:()=>{}})},Ei=function(e){yo(!1),po(!1),uo(!1);let l={};if(void 0===e){if(l=Rl.processModule.steps[Rl.processModule.stepIndex+1],void 0===l)return void u.h.dispatch((0,a.Xc)({show:!0,message:"Misconfigured next step, please contact your administrator",color:"red",bottom:!0}));hi({action:_._U.setCurrentStep,value:l}),u.h.dispatch((0,a.q4)((0,i.Z)((0,i.Z)({},Rl.processModule),{},{stepIndex:Rl.processModule.stepIndex+1})))}else{if(l=Wl.steps.find(l=>l.id===e),void 0==l)l=Wl.steps[Rl.processModule.stepIndex+1],u.h.dispatch((0,a.q4)((0,i.Z)((0,i.Z)({},Rl.processModule),{},{stepIndex:Rl.processModule.stepIndex+1})));else{var o;if(void 0===Wl.steps[(null===(o=l)||void 0===o?void 0:o.rank)-1])return void u.h.dispatch((0,a.Xc)({show:!0,message:"Misconfigured next step, please contact your administrator",color:"red",bottom:!0}));var t;u.h.dispatch((0,a.q4)((0,i.Z)((0,i.Z)({},Rl.processModule),{},{stepIndex:(null===(t=l)||void 0===t?void 0:t.rank)-1})))}hi({action:_._U.setCurrentStep,value:l})}const n=yi.newStepComponents.filter(e=>null===e.options||(void 0===e.allowMultipleInputs||!1===e.options.allowMultipleInputs));hi({action:_._U.setComponents,value:[...yi.components.filter(e=>n.every(l=>l.id!==e.id)),...H.Z(e=>e.selected_fields.filter(e=>""===e.value).length>0,n)]}),hi({action:_._U.setModuleNewStepComponents,value:l.component_blueprints.filter(e=>e.selected_fields.filter(e=>"Status"===e.data_type_name||"ID"===e.data_type_name||"Value"===e.data_type_name).length>0)})},Ci=()=>{var e,l,o,t;hi({action:_._U.setModuleItems,value:[]}),hi({action:_._U.setComponents,value:[]}),hi({action:_._U.addModuleComponents,value:[]}),hi({action:_._U.setModuleNewStepComponents,value:[]}),u.h.dispatch((0,a.q4)((0,i.Z)((0,i.Z)({},null!==(e=null===Rl||void 0===Rl?void 0:Rl.processModule)&&void 0!==e?e:{}),{},{isUpdating:!1})));const n=(null===Wl||void 0===Wl||null===(l=Wl.steps)||void 0===l?void 0:l.length)>0&&!((null===Wl||void 0===Wl||null===(o=Wl.steps[0])||void 0===o||null===(t=o.component_blueprints)||void 0===t?void 0:t.filter(e=>{var l;return 1==(null===(l=e.options)||void 0===l?void 0:l.asModuleList)}).length)>0);xi(lo||n?Rl.processModule.steps[0].id:Rl.processModule.steps[1].id)},wi=()=>{var e,l,o,t,n,d,r,c,m,f,_,y,h,g,x,E,C,w;if(gi())return fo("Fill up all the required fields"),window.scrollTo({top:0,behavior:"smooth"}),void uo(!1);const M=yi.newStepComponents,S=[...yi.components.filter(e=>M.every(l=>l.id!==e.id)),...H.Z(e=>e.selected_fields.filter(e=>""===e.value).length>0,M)];let k,Z=[],I=[],N="",T="",D=!1,P=null!==Rl&&void 0!==Rl&&null!==(e=Rl.processModule)&&void 0!==e&&e.isUpdating?null===$l||void 0===$l?void 0:$l.status:null!==Rl&&void 0!==Rl&&null!==(l=Rl.processModule)&&void 0!==l&&null!==(o=l.module)&&void 0!==o&&null!==(t=o.options)&&void 0!==t&&t.lock?"New":"None",A={x:0},O=[];const L=null===$l||void 0===$l?void 0:$l.status,z={};let R=null!==Rl&&void 0!==Rl&&null!==(n=Rl.processModule)&&void 0!==n&&n.isUpdating?(null!==(d=V.Z(Math.max,q.Z("group",j.Z(G.Z("group"))(null!==(r=null===$l||void 0===$l?void 0:$l.component_fields)&&void 0!==r?r:[]))))&&void 0!==d?d:-1)+1:0;S.map((e,l)=>{var o,t,n,d,a,r;let s=l;const u=null===(o=e.selected_fields.filter(e=>"Record"===e.data_type_name||"Filters"===e.data_type_name))||void 0===o?void 0:o.find(e=>+(null===e||void 0===e?void 0:e.group)>=0);u&&null!==Rl&&void 0!==Rl&&null!==(t=Rl.processModule)&&void 0!==t&&t.isUpdating?s=u.group:null!==Rl&&void 0!==Rl&&null!==(n=Rl.processModule)&&void 0!==n&&n.isUpdating&&(s=R,R++),e.selected_fields.filter(e=>("Record"===e.data_type_name||"Filters"===e.data_type_name)&&!0===e.visible).map((e,l)=>{var o;if(null!==e.value&&void 0!==e.value&&1!=(null===(o=e.options)||void 0===o?void 0:o.skip)){var t,n;I=[...I,(0,i.Z)((0,i.Z)({},e),{},{index:l,group:s})],N=e.value,z[e.field_name]=e.value;const o=null===(t=Yl.find(l=>l.component_fields.filter(l=>{var o;return l.component_blueprint_id===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.component_id)&&(null===l||void 0===l?void 0:l.value)===N}).length>0))||void 0===t||null===(n=t.component_fields.find(e=>"Email Recipient"===e.data_type_name))||void 0===n?void 0:n.value;o&&(k=o)}});const c=null===(d=e.selected_fields.filter(e=>!("Record"===e.data_type_name||"Filters"===e.data_type_name)))||void 0===d?void 0:d.find(e=>+(null===e||void 0===e?void 0:e.group)>=0);c&&null!==Rl&&void 0!==Rl&&null!==(a=Rl.processModule)&&void 0!==a&&a.isUpdating?s=c.group:null!==Rl&&void 0!==Rl&&null!==(r=Rl.processModule)&&void 0!==r&&r.isUpdating&&(s=R,R++),e.selected_fields.filter(e=>!("Record"===e.data_type_name||"Filters"===e.data_type_name)).map((e,l)=>{var o,t,n,d;if(null!==e.value&&void 0!==e.value&&1!=(null===(o=e.options)||void 0===o?void 0:o.skip)){if(z[e.field_name]=e.value,"ID"===(null===e||void 0===e?void 0:e.data_type_name))null!==Rl&&void 0!==Rl&&null!==(n=Rl.processModule)&&void 0!==n&&n.isUpdating?I=[...I,(0,i.Z)((0,i.Z)({},e),{},{index:l,group:s})]:(I=[...I,(0,i.Z)((0,i.Z)({},e),{},{index:l,group:s,value:"".concat(null===e||void 0===e?void 0:e.options.id).concat(null===(null===Bl||void 0===Bl?void 0:Bl.misc_info)?1:null!==(d=null===Bl||void 0===Bl?void 0:Bl.misc_info[null===e||void 0===e?void 0:e.field_name])&&void 0!==d?d:1)})],Z=[...Z,"".concat(e.field_name)]);else if("Value"===(null===e||void 0===e?void 0:e.data_type_name)){var a;I=[...I,(0,i.Z)((0,i.Z)({},e),{},{index:l,value:null===e||void 0===e||null===(a=e.options)||void 0===a?void 0:a.value,group:s})]}else if("Email Recipient"===(null===e||void 0===e?void 0:e.data_type_name))I=[...I,(0,i.Z)((0,i.Z)({},e),{},{index:l,value:e.value.replace(/ /g,""),group:s})];else if("Product Lookup"===e.data_type_name)I=[...I];else if("Status"===e.data_type_name&&"Draft"===e.value&&1==bo)D=!0,I=[...I,(0,i.Z)((0,i.Z)({},e),{},{index:l,value:"New",group:s})],P="New";else if("Status"===e.data_type_name)I=[...I,(0,i.Z)((0,i.Z)({},e),{},{index:l,value:null===e||void 0===e?void 0:e.value,group:s})],P=null===e||void 0===e?void 0:e.value;else if("Positions"===e.data_type_name&&!0===(null===e||void 0===e||null===(t=e.options)||void 0===t?void 0:t.share))I=[...I,(0,i.Z)((0,i.Z)({},e),{},{index:l,value:null===e||void 0===e?void 0:e.value,group:s})],O=[null===e||void 0===e?void 0:e.value];else if("Pin"===e.data_type_name)I=[...I,(0,i.Z)((0,i.Z)({},e),{},{index:l,value:null===e||void 0===e?void 0:e.value,group:s})];else if("Formula"===e.data_type_name){var r;const o=null!==Rl&&void 0!==Rl&&null!==(r=Rl.processModule)&&void 0!==r&&r.isUpdating?(0,v.LV)(null===e||void 0===e?void 0:e.options,$l.component_fields.filter(l=>{var o;return null===(o=e.options)||void 0===o?void 0:o.list.includes(l.field_name)}),S,yi.items):e.value;I=[...I,(0,i.Z)((0,i.Z)({},e),{},{index:l,value:o.toString(),group:s})]}else if("output"!==e.data_type){var u,c,p,m,f;if("People"===e.data_type_name)if(!0===(null===(f=e.options)||void 0===f?void 0:f.email)){var _,y;const l=null===(_=qo.find(l=>l.label===(null===e||void 0===e?void 0:e.value)))||void 0===_||null===(y=_.user)||void 0===y?void 0:y.email;T=l?T.concat(T.length>0?",".concat(l):l):T,e.email=void 0}"email"===(null===e||void 0===e||null===(u=e.options)||void 0===u?void 0:u.actionToPerform2)&&null!==e&&void 0!==e&&null!==(c=e.options)&&void 0!==c&&null!==(p=c.valueToMatch2)&&void 0!==p&&null!==(m=p.split(","))&&void 0!==m&&m.includes(null===e||void 0===e?void 0:e.value)&&k&&(D=!0,T=T.concat(T.length>0?",".concat(k):k)),I=[...I,(0,i.Z)((0,i.Z)({},e),{},{index:l,group:s})]}}else if("Status"===(null===e||void 0===e?void 0:e.data_type_name))1==bo?(I=[...I,(0,i.Z)((0,i.Z)({},e),{},{index:l,value:"New",group:s})],P="New"):(I=[...I,(0,i.Z)((0,i.Z)({},e),{},{index:l,value:"Draft",group:s})],P="Draft"),z[e.field_name]=e.value;else if("Action Button"===(null===e||void 0===e?void 0:e.data_type_name)){var h,g,b;I=[...I],z[e.field_name]=e.value,"status"===(null===e||void 0===e||null===(h=e.options)||void 0===h?void 0:h.action)?P=e.value:"user"!==(null===(g=e.options)||void 0===g?void 0:g.action)&&"creator"!==(null===(b=e.options)||void 0===b?void 0:b.action)||($l.assigned_to=null===e||void 0===e?void 0:e.value)}})});let U,F,W,B,Y="";if((null===(c=Rl.processModule)||void 0===c||null===(m=c.module)||void 0===m||null===(f=m.options)||void 0===f||null===(_=f.title)||void 0===_?void 0:_.length)>0){var J,K,Q,X,$,ee,le,oe,ie,te,ne,de,ae,se,ve,ue;if(null===(J=Rl.processModule)||void 0===J||null===(K=J.module)||void 0===K||null===(Q=K.options)||void 0===Q||null===(X=Q.title)||void 0===X||X.map(e=>{if("Info"!==e){const n=I.find(l=>l.field_name===e);var l,o,i,t;if("Date"===(null===n||void 0===n?void 0:n.data_type_name)||"Calendar"===(null===n||void 0===n?void 0:n.data_type_name))Y=""===Y?"".concat(b()(null===n||void 0===n?void 0:n.value).format("DD MMMM YYYY")):"".concat(null!==(l=Y)&&void 0!==l?l:"","  ").concat(b()(null===n||void 0===n?void 0:n.value).format("DD MMMM YYYY HH:mm"));else Y=""===Y?"".concat(null!==(o=null===n||void 0===n?void 0:n.value)&&void 0!==o?o:""):"".concat(null!==(i=Y)&&void 0!==i?i:"","  ").concat(null!==(t=null===n||void 0===n?void 0:n.value)&&void 0!==t?t:"")}else{var n;const e=null===(n=Rl.processModule)||void 0===n?void 0:n.completeSteps.find(e=>{var l;return(null===(l=e.component_blueprints.filter(e=>{var l;return(null===(l=e.selected_fields.filter(e=>"Info"===e.data_type_name))||void 0===l?void 0:l.length)>0}))||void 0===l?void 0:l.length)>0});if(void 0!==e){var d,a;const l=null===(d=e.component_blueprints)||void 0===d||null===(a=d.find(e=>{var l;return(null===(l=e.selected_fields.filter(e=>"Info"===e.data_type_name))||void 0===l?void 0:l.length)>0}).selected_fields)||void 0===a?void 0:a.find(e=>"Info"===e.data_type_name),o=Yl.find(e=>{var o;return(null===(o=e.component_fields.filter(e=>e.component_blueprint_id===l.options.component_id&&e.value===z[l.field_name]))||void 0===o?void 0:o.length)>0});var r,s,v,u,c,p,m;if(o)if((null===l||void 0===l||null===(r=l.options)||void 0===r||null===(s=r.list)||void 0===s?void 0:s.length)>0)Y=""===Y?"".concat(null!==(v=null===(u=o.component_fields.find(e=>{var o;return e.field_name===(null===l||void 0===l||null===(o=l.options)||void 0===o?void 0:o.list[0])}))||void 0===u?void 0:u.value)&&void 0!==v?v:""):"".concat(null!==(c=Y)&&void 0!==c?c:"","  ").concat(null!==(p=null===(m=o.component_fields.find(e=>{var o;return e.field_name===(null===l||void 0===l||null===(o=l.options)||void 0===o?void 0:o.list[0])}))||void 0===m?void 0:m.value)&&void 0!==p?p:"")}}}),null!==($=Rl.processModule)&&void 0!==$&&null!==(ee=$.module)&&void 0!==ee&&null!==(le=ee.options)&&void 0!==le&&le.title.find(e=>"UUID"===e))Y="".concat(null===(ne=Rl.processModule)||void 0===ne||null===(de=ne.module)||void 0===de?void 0:de.name," #").concat(null!==Rl&&void 0!==Rl&&null!==(ae=Rl.processModule)&&void 0!==ae&&ae.isUpdating?$l.id.replace(/\D/g,"").slice(-5):(0,v.mR)().replace(/\D/g,"").slice(-5));if(null!==(oe=Rl.processModule)&&void 0!==oe&&null!==(ie=oe.module)&&void 0!==ie&&null!==(te=ie.options)&&void 0!==te&&te.title.find(e=>"Module Name"===e))Y=" ".concat(null===(se=Rl.processModule)||void 0===se||null===(ve=se.module)||void 0===ve?void 0:ve.name," - ").concat(null!==(ue=Y)&&void 0!==ue?ue:"")}else{var ce,pe,me;Y="".concat(null===(ce=Rl.processModule)||void 0===ce||null===(pe=ce.module)||void 0===pe?void 0:pe.name," #").concat(null!==Rl&&void 0!==Rl&&null!==(me=Rl.processModule)&&void 0!==me&&me.isUpdating?$l.id.replace(/\D/g,"").slice(-5):(0,v.mR)().replace(/\D/g,"").slice(-5))}if(!0===(null===(y=Rl.processModule)||void 0===y||null===(h=y.module)||void 0===h||null===(g=h.options)||void 0===g?void 0:g.emailOutputs)){var fe,_e;let e=Rl.processModule.steps.find(e=>{var l;return(null===(l=e.component_blueprints.filter(e=>{var l;return(null===(l=e.selected_fields.filter(e=>"Info"===e.data_type_name&&1==e.options.email))||void 0===l?void 0:l.length)>0}))||void 0===l?void 0:l.length)>0});if(void 0!==e){var ye,he;const l=null===(ye=e.component_blueprints)||void 0===ye||null===(he=ye.find(e=>{var l;return(null===(l=e.selected_fields.filter(e=>{var l;return"Info"===e.data_type_name&&1==(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.email)}))||void 0===l?void 0:l.length)>0}).selected_fields)||void 0===he?void 0:he.find(e=>{var l;return"Info"===e.data_type_name&&!0===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.email)}),o=Yl.find(e=>{var o;return(null===(o=e.component_fields.filter(e=>e.component_blueprint_id===l.options.component_id&&e.value===N))||void 0===o?void 0:o.length)>0});o&&(F=l.id,U=o.id)}if(e=Rl.processModule.steps.find(e=>{var l;return!0===e.is_end&&(null===(l=e.component_blueprints.filter(e=>{var l;return(null===(l=e.selected_fields.filter(e=>"Emails"===e.data_type_name))||void 0===l?void 0:l.length)>0}))||void 0===l?void 0:l.length)>0}),void 0!==e){var ge;(null===(ge=e.component_blueprints)||void 0===ge?void 0:ge.find(e=>{var l;return(null===(l=e.selected_fields.filter(e=>"Emails"===e.data_type_name))||void 0===l?void 0:l.length)>0})).selected_fields.filter(e=>"Emails"===e.data_type_name).filter(e=>{var l;I.find(l=>l.value===e.options.valueToMatch&&l.field_name===e.options.fieldToMatch)&&(k&&(W=e,D=!0,!0===(null===(l=e.options)||void 0===l?void 0:l.copyEmailRecip)&&(T=T.concat(T.length>0?",".concat(k):k))))})}var xe,Ee;if(T=""===T?[]:null!==(fe=T.split(","))&&void 0!==fe?fe:[],Yo.length>0||T.length>0)T=null!==Rl&&void 0!==Rl&&null!==(xe=Rl.processModule)&&void 0!==xe&&xe.isUpdating?!0===D?[...Yo,...T]:[...Yo]:[...Yo,...T];if(T.length>0&&(A={emailTo:T}),F&&U&&(A=(0,i.Z)((0,i.Z)({},A),{},{info:F,target:U})),(null===(_e=W)||void 0===_e?void 0:_e.id.length)>0)A=(0,i.Z)((0,i.Z)({},A),{},{template:null===(Ee=W)||void 0===Ee?void 0:Ee.id})}if(!0===(null===(x=Rl.processModule)||void 0===x||null===(E=x.module)||void 0===E||null===(C=E.options)||void 0===C?void 0:C.rewards)&&L!==P){const e=Rl.processModule.steps.find(e=>{var l;return(null===(l=e.component_blueprints.filter(e=>{var l;return(null===(l=e.selected_fields.filter(e=>"Rewards"===e.data_type_name))||void 0===l?void 0:l.length)>0}))||void 0===l?void 0:l.length)>0});var Ce,we,Me,Se,ke,Ze;if(void 0!==e)if(B=null===(Ce=e.component_blueprints)||void 0===Ce||null===(we=Ce.find(e=>{var l;return(null===(l=e.selected_fields.filter(e=>"Rewards"===e.data_type_name))||void 0===l?void 0:l.length)>0}).selected_fields)||void 0===we?void 0:we.find(e=>"Rewards"===e.data_type_name),B.options.status===P)no.options.rewards=+(null!==(Me=null===no||void 0===no||null===(Se=no.options)||void 0===Se?void 0:Se.rewards)&&void 0!==Me?Me:0)+ +(null===(ke=B)||void 0===ke||null===(Ze=ke.options)||void 0===Ze?void 0:Ze.points)}var Ie,Ne,Te,De,Pe,Ae,Oe,ze,Re,Ue,Fe,We,qe,Be,Ye,He,Ve,je,Ge,Je,Ke;(null===(w=I)||void 0===w?void 0:w.length)>0?(ro(!0),null!==Rl&&void 0!==Rl&&null!==(Ie=Rl.processModule)&&void 0!==Ie&&Ie.isUpdating?($l.options=A,$l.status=P,null!==yi&&void 0!==yi&&yi.assigned_to&&($l.assigned_to={id:null===yi||void 0===yi?void 0:yi.assigned_to}),(0,s.KL)((0,i.Z)((0,i.Z)({},$l),{},{selected_fields:[...I],component_items:yi.items}),$l.id,null===$l||void 0===$l||null===(Ne=$l.shared_users)||void 0===Ne?void 0:Ne.map(e=>null===e||void 0===e?void 0:e.id),Y,bo,(null===(Te=Rl.processModule)||void 0===Te||null===(De=Te.module)||void 0===De||null===(Pe=De.options)||void 0===Pe||null===(Ae=Pe.shares)||void 0===Ae?void 0:Ae.length)>0?[...null!==(Oe=null===(ze=Rl.processModule)||void 0===ze||null===(Re=ze.module)||void 0===Re||null===(Ue=Re.options)||void 0===Ue?void 0:Ue.shares)&&void 0!==Oe?Oe:[],...O]:[...null!==(Fe=null===$l||void 0===$l||null===(We=$l.shared_positions)||void 0===We?void 0:We.map(e=>null===e||void 0===e?void 0:e.id))&&void 0!==Fe?Fe:[],...O]).subscribe({next:e=>{var l,o,t,n,d,a,r,s;if(null!==(l=Rl.processModule)&&void 0!==l&&null!==(o=l.module)&&void 0!==o&&null!==(t=o.options)&&void 0!==t&&t.single)return localStorage.setItem(null===(a=Rl.processModule)||void 0===a?void 0:a.module.id,JSON.stringify(null===e||void 0===e?void 0:e.data)),void Ei(null===(r=Rl.processModule)||void 0===r||null===(s=r.steps[0])||void 0===s?void 0:s.id);const u=I.find(e=>{var l;return"People"===e.data_type_name&&!0===(null===(l=e.options)||void 0===l?void 0:l.calendar)});if(u){var c;const l=JSON.parse(null!==(c=null===u||void 0===u?void 0:u.value)&&void 0!==c?c:{task:0}),o=to.find(e=>e.id===(null===l||void 0===l?void 0:l.task));var m;if(o)(0,Le.xJ)((0,i.Z)((0,i.Z)({},o),{},{assignee_id:null===e||void 0===e||null===(m=e.data.created_by)||void 0===m?void 0:m.id}),null===o||void 0===o?void 0:o.id).pipe((0,p.P)()).subscribe({complete:()=>{}})}const f=I.find(e=>"Payments"===e.data_type_name),_=I.find(e=>{var l;return e.field_name===(null===f||void 0===f||null===(l=f.options)||void 0===l?void 0:l.paymentField)});var y,h,g;if("Closed"!==(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.status)&&"Cancelled"!==(null===e||void 0===e||null===(d=e.data)||void 0===d?void 0:d.status))if(!f||null!==e&&void 0!==e&&null!==(y=e.data.payments)&&void 0!==y&&y.stripe_id||"Cash"===(null===f||void 0===f?void 0:f.value)||"Wallet"===(null===f||void 0===f?void 0:f.value)||"Points"===(null===f||void 0===f?void 0:f.value)||no.id!==(null===$l||void 0===$l||null===(h=$l.created_by)||void 0===h?void 0:h.id))if(f){var b,x,E,C,w,M;if(_&&"Cash"!==(null===f||void 0===f?void 0:f.value)&&P===(null===(b=Bl.misc_info)||void 0===b?void 0:b.lock)||(null!==(x=null===(E=Rl.processModule)||void 0===E||null===(C=E.module)||void 0===C||null===(w=C.options)||void 0===w?void 0:w.lock)&&void 0!==x?x:"").split(",").includes(P)&&no.id===(null===$l||void 0===$l||null===(M=$l.assigned_to)||void 0===M?void 0:M.id)&&L!==P){var S,k;const e=+(null===_||void 0===_?void 0:_.value)-+(null===_||void 0===_?void 0:_.value)*+(null!==(S=null===Bl||void 0===Bl||null===(k=Bl.misc_info)||void 0===k?void 0:k.rate)&&void 0!==S?S:.2);(0,re.e_)({user_id:no.id,id:(0,v.mR)(),total:e,product:"CR-".concat(Y),notes:"Wallet",quantity:1}).pipe((0,p.P)()).subscribe({next:()=>{var l;no.wallet=+(+(null!==(l=null===Ul||void 0===Ul?void 0:Ul.wallet)&&void 0!==l?l:0)+e),ro(!1),Ci(),Ni(),window.scrollTo({top:0,behavior:"smooth"})}})}else B?(0,be.Vy)(no,null===no||void 0===no?void 0:no.options).pipe((0,p.P)()).subscribe({next:()=>{Ci(),Ni(),window.scrollTo({top:0,behavior:"smooth"})},complete:()=>{}}):(Ci(),Ni(),window.scrollTo({top:0,behavior:"smooth"})),ro(!1)}else ro(!1),Ci(),Ni(),window.scrollTo({top:0,behavior:"smooth"});else yi.total=+(null===_||void 0===_?void 0:_.value),yi.plan=+(null===_||void 0===_?void 0:_.value),yi.id=null===e||void 0===e||null===(g=e.data)||void 0===g?void 0:g.title,ro(!1),Jo(!0);else ro(!1),Ci(),Ni(),window.scrollTo({top:0,behavior:"smooth"})}})):(0,s.LM)({id:S[0].id,selected_fields:[...I],component_items:yi.items,options:A,status:P,assigned_to:null!==(qe=null===yi||void 0===yi?void 0:yi.assigned_to)&&void 0!==qe?qe:""},"",Rl.processModule.module_id,Eo,Y,bo,(null===(Be=Rl.processModule)||void 0===Be||null===(Ye=Be.module)||void 0===Ye||null===(He=Ye.options)||void 0===He||null===(Ve=He.shares)||void 0===Ve?void 0:Ve.length)>0?[...null!==(je=null===(Ge=Rl.processModule)||void 0===Ge||null===(Je=Ge.module)||void 0===Je||null===(Ke=Je.options)||void 0===Ke?void 0:Ke.shares)&&void 0!==je?je:[],...O]:[...wo,...O]).subscribe({next:e=>{var l,o,t,n,d,r,c,m,f;if(null!==(l=Rl.processModule)&&void 0!==l&&null!==(o=l.module)&&void 0!==o&&null!==(t=o.options)&&void 0!==t&&t.single)return localStorage.setItem(null===(c=Rl.processModule)||void 0===c?void 0:c.module.id,JSON.stringify(e)),void Ei(null===(m=Rl.processModule)||void 0===m||null===(f=m.steps[0])||void 0===f?void 0:f.id);(null===(n=Z)||void 0===n?void 0:n.length)>0&&Mi(Z);const _=I.find(e=>{var l;return"People"===e.data_type_name&&!0===(null===(l=e.options)||void 0===l?void 0:l.calendar)});if(_){var y;const l=JSON.parse(null!==(y=null===_||void 0===_?void 0:_.value)&&void 0!==y?y:{task:0}),o=to.find(e=>e.id===(null===l||void 0===l?void 0:l.task));var h,g;if(o)(0,Le.xJ)((0,i.Z)((0,i.Z)({},o),{},{assignee_id:null!==(h=null===e||void 0===e||null===(g=e.created_by)||void 0===g?void 0:g.id)&&void 0!==h?h:no.id}),null===o||void 0===o?void 0:o.id).pipe((0,p.P)()).subscribe({})}if(Rl.processModule.selectedComponent=e,"Closed"!==(null===e||void 0===e||null===(d=e.data)||void 0===d?void 0:d.status)&&"Cancelled"!==(null===e||void 0===e||null===(r=e.data)||void 0===r?void 0:r.status))if(I.filter(e=>!("Cash"===(null===e||void 0===e?void 0:e.value)||"Wallet"===(null===e||void 0===e?void 0:e.value)||"Points"===(null===e||void 0===e?void 0:e.value))&&"Payments"===e.data_type_name).length>0)ro(!1),Jo(!0);else if(I.filter(e=>("Wallet"===(null===e||void 0===e?void 0:e.value)||"Points"===(null===e||void 0===e?void 0:e.value))&&"Payments"===e.data_type_name).length>0){var b;const l=I.find(e=>"Payments"===e.data_type_name);(0,re.e_)({user_id:no.id,id:null!==(b=null===e||void 0===e?void 0:e.id)&&void 0!==b?b:(0,v.mR)(),total:-yi.total,product:"DB-".concat(Y),notes:"Wallet",quantity:1}).pipe((0,p.P)()).subscribe({next:()=>{var o,t;(0,be.Vy)(no,(0,i.Z)((0,i.Z)({},null===no||void 0===no?void 0:no.options),{},{points:+(+(null!==(o=null===Ul||void 0===Ul||null===(t=Ul.options)||void 0===t?void 0:t.points)&&void 0!==o?o:0)-("Points"===(null===l||void 0===l?void 0:l.value)?+yi.total:0))})).pipe((0,p.P)()).subscribe({next:l=>{var o,i,t,n,d,r,v,c,m,f;(ro(!1),no.options=l.options,null!==Rl&&void 0!==Rl&&null!==(o=Rl.processModule)&&void 0!==o&&null!==(i=o.steps)&&void 0!==i&&i.find(e=>e.component_blueprints.filter(e=>e.selected_fields.filter(e=>"Action Button"===e.data_type_name&&("user"===e.options.action||"creator"===e.options.action)).length>0).length>0))?(Uo((null===Rl||void 0===Rl||null===(t=Rl.processModule)||void 0===t||null===(n=t.module)||void 0===n||null===(d=n.options)||void 0===d||null===(r=d.message)||void 0===r?void 0:r.length)>0&&1==e.is_complete),ii(setInterval(()=>{(0,s.r6)(e.id).pipe((0,p.P)()).subscribe({next:e=>{var l;null!==e&&void 0!==e&&null!==(l=e.component_fields)&&void 0!==l&&l.find(e=>"Action Button"===e.data_type_name&&(null===e||void 0===e?void 0:e.value))&&(eo(e),window.clearInterval(oi))},error:()=>{window.clearInterval(oi)}})},15e3))):zo((null===Rl||void 0===Rl||null===(v=Rl.processModule)||void 0===v||null===(c=v.module)||void 0===c||null===(m=c.options)||void 0===m||null===(f=m.message)||void 0===f?void 0:f.length)>0&&1==e.is_complete);u.h.dispatch((0,a.RV)({})),Ni(),Ci()}})}})}else{var x,E,C,w,M,S,k,N,T,D;if(ro(!1),null!==Rl&&void 0!==Rl&&null!==(x=Rl.processModule)&&void 0!==x&&null!==(E=x.steps)&&void 0!==E&&E.find(e=>e.component_blueprints.filter(e=>e.selected_fields.filter(e=>"Action Button"===e.data_type_name&&("user"===e.options.action||"creator"===e.options.action)).length>0).length>0))Uo((null===Rl||void 0===Rl||null===(C=Rl.processModule)||void 0===C||null===(w=C.module)||void 0===w||null===(M=w.options)||void 0===M||null===(S=M.message)||void 0===S?void 0:S.length)>0&&1==e.is_complete),ii(setInterval(()=>{(0,s.r6)(e.id).pipe((0,p.P)()).subscribe({next:e=>{var l;null!==e&&void 0!==e&&null!==(l=e.component_fields)&&void 0!==l&&l.find(e=>"Action Button"===e.data_type_name&&(null===e||void 0===e?void 0:e.value))&&(eo(e),window.clearInterval(oi))},error:()=>{window.clearInterval(oi)}})},15e3));else zo((null===Rl||void 0===Rl||null===(k=Rl.processModule)||void 0===k||null===(N=k.module)||void 0===N||null===(T=N.options)||void 0===T||null===(D=T.message)||void 0===D?void 0:D.length)>0&&1==e.is_complete);u.h.dispatch((0,a.RV)({})),Ni(),Ci()}else{var P,A,O,L,z,R,U,F,W,q;if(ro(!1),null!==Rl&&void 0!==Rl&&null!==(P=Rl.processModule)&&void 0!==P&&null!==(A=P.steps)&&void 0!==A&&A.find(e=>e.component_blueprints.filter(e=>e.selected_fields.filter(e=>"Action Button"===e.data_type_name&&("user"===e.options.action||"creator"===e.options.action)).length>0).length>0))Uo((null===Rl||void 0===Rl||null===(O=Rl.processModule)||void 0===O||null===(L=O.module)||void 0===L||null===(z=L.options)||void 0===z||null===(R=z.message)||void 0===R?void 0:R.length)>0&&1==e.is_complete),ii(setInterval(()=>{(0,s.r6)(e.id).pipe((0,p.P)()).subscribe({next:e=>{var l;null!==e&&void 0!==e&&null!==(l=e.component_fields)&&void 0!==l&&l.find(e=>"Action Button"===e.data_type_name&&(null===e||void 0===e?void 0:e.value))&&(eo(e),window.clearInterval(oi))},error:()=>{window.clearInterval(oi)}})},15e3));else zo((null===Rl||void 0===Rl||null===(U=Rl.processModule)||void 0===U||null===(F=U.module)||void 0===F||null===(W=F.options)||void 0===W||null===(q=W.message)||void 0===q?void 0:q.length)>0&&1==e.is_complete);u.h.dispatch((0,a.RV)({})),Ni(),Ci()}},complete:()=>{},error:e=>{var l,o,i,t;null!==e&&void 0!==e&&e.data&&(null!==Z&&Mi(Z),zo((null===Rl||void 0===Rl||null===(l=Rl.processModule)||void 0===l||null===(o=l.module)||void 0===o||null===(i=o.options)||void 0===i||null===(t=i.message)||void 0===t?void 0:t.length)>0&&1==(null===e||void 0===e?void 0:e.data.is_complete)),u.h.dispatch((0,a.RV)({})),Ci())}})):(u.h.dispatch((0,a.Xc)({show:!0,message:"There are no items to be saved",color:"red"})),window.scrollTo({top:0,behavior:"smooth"}))},Mi=e=>{if((null===e||void 0===e?void 0:e.length)>0){var l;const o=null!==(l=Bl.misc_info)&&void 0!==l?l:{};e.filter(e=>{var l;o[e]=+(null!==(l=o[e])&&void 0!==l?l:1)+1}),ro(!0),(0,I.x5)({misc_info:o}).pipe((0,p.P)()).subscribe({complete:()=>{}})}},Si=()=>{fo("Fill up all the required fields"),window.scrollTo({top:0,behavior:"smooth"}),uo(!1)},ki=function(e){let l=arguments.length>2?arguments[2]:void 0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).filter(l=>l.module_id===e).filter(e=>{var t;return i.length>0?i.includes(e.id):""===l?e:e.title.includes(l)||(null===(t=e.component_fields.filter(e=>{var i,t,n,d,a;return"Record"===e.data_type_name?null===(i=Yl.find(l=>{var o;return(null===(o=l.component_fields.filter(l=>l.field_name===e.options.output&&l.component_blueprint_id===e.options.component_id&&l.value===(null===e||void 0===e?void 0:e.value)))||void 0===o?void 0:o.length)>0}))||void 0===i?void 0:i.component_fields.find(l=>{var o;return null===(o=e.options)||void 0===o?void 0:o.names.includes(l.field_name)}).value.includes(l):void 0!==o?("date"===e.data_type?null===(t=b()(new Date(null===e||void 0===e?void 0:e.value)))||void 0===t?void 0:t.format("DD MMM YYYY").includes(l):null===e||void 0===e||null===(n=e.value)||void 0===n?void 0:n.includes(l))&&e.field_name===o:"date"===e.data_type?null===(d=b()(new Date(null===e||void 0===e?void 0:e.value)))||void 0===d?void 0:d.format("DD MMM YYYY").includes(l):null===e||void 0===e||null===(a=e.value)||void 0===a?void 0:a.includes(l)}))||void 0===t?void 0:t.length)>0})},Zi=null===$l||void 0===$l||null===(M=$l.component_fields)||void 0===M||null===(N=M.find(e=>"Status"===e.data_type_name))||void 0===N?void 0:N.value,Ii=(null===Rl||void 0===Rl||null===(T=Rl.processModule)||void 0===T||null===(D=T.steps)||void 0===D?void 0:D.length)>0?null===Rl||void 0===Rl||null===(O=Rl.processModule)||void 0===O||null===(L=O.steps)||void 0===L||null===(z=L.find(e=>(null===e||void 0===e?void 0:e.component_blueprints.filter(e=>e.selected_fields.filter(e=>"Action Button"===e.data_type_name).length>0).length)>0))||void 0===z||null===(R=z.component_blueprints.find(e=>{var l;return(null===(l=e.selected_fields.filter(e=>"Action Button"===e.data_type_name))||void 0===l?void 0:l.length)>0}))||void 0===R||null===(F=R.options)||void 0===F?void 0:F.showOnly:[],Ni=()=>{var e,l,o,t,n;eo({}),hi({action:_._U.setModuleItems,value:null!==(e=null===$l||void 0===$l?void 0:$l.component_items)&&void 0!==e?e:[]}),hi({action:_._U.setModuleNewStepComponents,value:[]}),hi({action:_._U.setComponents,value:[]}),(null===Rl||void 0===Rl||null===(l=Rl.processModule)||void 0===l||null===(o=l.steps)||void 0===o?void 0:o.length)>0&&(null===Rl||void 0===Rl||null===(t=Rl.processModule)||void 0===t||null===(n=t.steps)||void 0===n||n.filter(e=>{var l;return null===e||void 0===e||null===(l=e.component_blueprints)||void 0===l?void 0:l.filter(e=>e.selected_fields.filter(e=>e.value=void 0))})),u.h.dispatch((0,a.q4)((0,i.Z)((0,i.Z)({},Rl.processModule),{},{selectedComponent:{id:""},stepIndex:lo||Pi?0:1,isUpdating:!1})))},Ti=!!Array.isArray(null===Rl||void 0===Rl||null===($=Rl.processModule)||void 0===$?void 0:$.steps)&&(null===Rl||void 0===Rl||null===(ee=Rl.processModule)||void 0===ee||null===(le=ee.steps)||void 0===le||null===(oe=le.find(e=>{var l;return(null===e||void 0===e||null===(l=e.component_blueprints)||void 0===l?void 0:l.filter(e=>e.selected_fields.filter(e=>"Ratings"===e.data_type_name).length>0).length)>0}))||void 0===oe||null===(ie=oe.component_blueprints)||void 0===ie||null===(te=ie.find(e=>{var l;return(null===(l=e.selected_fields.filter(e=>"Ratings"===e.data_type_name))||void 0===l?void 0:l.length)>0}))||void 0===te||null===(ne=te.selected_fields)||void 0===ne?void 0:ne.find(e=>"Ratings"===e.data_type_name)),Di=null===Vl||void 0===Vl?void 0:Vl.find(e=>{var l,o,i,t;return e.id===(null===Rl||void 0===Rl||null===(l=Rl.processModule)||void 0===l||null===(o=l.selectedComponent)||void 0===o||null===(i=o.component_fields)||void 0===i||null===(t=i.find(e=>{var l;return e.field_name===(null===Ti||void 0===Ti||null===(l=Ti.options)||void 0===l?void 0:l.field)}))||void 0===t?void 0:t.value)}),Pi=(null===Wl||void 0===Wl||null===(de=Wl.steps)||void 0===de?void 0:de.length)>0&&!((null===Wl||void 0===Wl||null===(se=Wl.steps[0])||void 0===se||null===(ve=se.component_blueprints)||void 0===ve?void 0:ve.filter(e=>{var l;return 1==(null===(l=e.options)||void 0===l?void 0:l.asModuleList)}).length)>0),Ai=()=>{var e,l,o,i,n,d,r,s,v;return t.createElement("div",{ref:_i,className:ce.menuAccordionButtons},(0==Pi&&Rl.processModule.stepIndex>1||1==Pi&&Rl.processModule.stepIndex>0||(null===$l||void 0===$l?void 0:$l.title))&&t.createElement(f.zx,{title:"Cancel",light:!0,style:{width:"100%",display:null!==(e=Rl.processModule.module.options)&&void 0!==e&&e.single?"none":""},clicked:()=>{yi.components.length>0||yi.newStepComponents.length>0?ri(!0):(Rl.processModule.back_array=[],Ei(Pi?Wl.steps[0].id:Wl.steps[1].id),jo(!1),Ni(),Hl())}}),(0==Pi&&Rl.processModule.stepIndex>1||1==Pi&&Rl.processModule.stepIndex>0)&&t.createElement(f.zx,{title:"Back",light:!0,style:{width:"100%"},clicked:()=>{var e,l,o;if(1==Rl.processModule.stepIndex&&Wo(Yl.filter(e=>{var l,o;return e.module_id===(null===Rl||void 0===Rl||null===(l=Rl.processModule)||void 0===l||null===(o=l.module)||void 0===o?void 0:o.id)})),1==(null===ci||void 0===ci||null===(e=ci.options)||void 0===e?void 0:e.deleteOnBack)&&ci.component_blueprints.filter(e=>e.selected_fields.filter(e=>"output"!==e.data_type).map(e=>{e.value=void 0})),(null===Rl||void 0===Rl||null===(l=Rl.processModule)||void 0===l||null===(o=l.back_array)||void 0===o?void 0:o.length)>0){var i;const e=null===Rl||void 0===Rl||null===(i=Rl.processModule)||void 0===i?void 0:i.back_array.pop();e&&Ei(e)}else{var t;Ei(null===(t=Rl.processModule.steps[Rl.processModule.stepIndex-1])||void 0===t?void 0:t.id)}}}),!0===(null===ci||void 0===ci?void 0:ci.is_end)?t.createElement(f.zx,{disabled:!1===(null===Bl||void 0===Bl?void 0:Bl.start),title:1==(null===Rl||void 0===Rl||null===(l=Rl.processModule)||void 0===l?void 0:l.isUpdating)?"Update":bo&&null!==(o=null===Rl||void 0===Rl||null===(i=Rl.processModule)||void 0===i||null===(n=i.module)||void 0===n||null===(d=n.options)||void 0===d?void 0:d.save)&&void 0!==o?o:"Save",loading:ao,style:{width:"100%",marginLeft:"0px",display:null!==Rl&&void 0!==Rl&&null!==(r=Rl.processModule)&&void 0!==r&&null!==(s=r.module)&&void 0!==s&&null!==(v=s.options)&&void 0!==v&&v.nosave?"none":yi.components.length>0||yi.newStepComponents.length>0?"":"none"},clicked:()=>{var e,l,o,i,t,n;return Vo?fo("Saving is not allowed in Edit Mode"):1==(null===Rl||void 0===Rl||null===(e=Rl.processModule)||void 0===e||null===(l=e.module)||void 0===l||null===(o=l.options)||void 0===o?void 0:o.emailOutputs)&&1==(null===Rl||void 0===Rl||null===(i=Rl.processModule)||void 0===i||null===(t=i.module)||void 0===t||null===(n=t.options)||void 0===n?void 0:n.selectiveEmail)&&bo?To(!0):wi()}}):t.createElement(f.zx,{disabled:!1===(null===Bl||void 0===Bl?void 0:Bl.start),title:"Next",style:{width:"100%"},clicked:()=>{var e,l,o,i,t,n,d,r,s;Array.isArray(null===Rl||void 0===Rl||null===(e=Rl.processModule)||void 0===e?void 0:e.back_array)||(Rl.processModule.back_array=[]),null===Rl||void 0===Rl||null===(l=Rl.processModule)||void 0===l||l.back_array.push(null===yi||void 0===yi||null===(o=yi.currentStep)||void 0===o?void 0:o.id);const v=null===(i=ci.component_blueprints.find(e=>e.selected_fields.filter(e=>{var l,o;return"Dropdown"===e.data_type_name&&(null===(l=e.options)||void 0===l?void 0:l.jump1)&&"decision"===(null===(o=e.options)||void 0===o?void 0:o.type)}).length>0))||void 0===i||null===(t=i.selected_fields)||void 0===t?void 0:t.find(e=>{var l;return"Dropdown"===e.data_type_name&&(null===(l=e.options)||void 0===l?void 0:l.jump1)}),c=null===(n=ci.component_blueprints.find(e=>e.selected_fields.filter(e=>{var l;return"Value Button"===e.data_type_name&&(null===(l=e.options)||void 0===l?void 0:l.jump1)}).length>0))||void 0===n||null===(d=n.selected_fields)||void 0===d?void 0:d.filter(e=>{var l;return"Value Button"===e.data_type_name&&(null===(l=e.options)||void 0===l?void 0:l.jump1)});var p,m,f,_,y;if(null!==v&&void 0!==v&&null!==(r=v.options)&&void 0!==r&&r.jump1&&null!==v&&void 0!==v&&null!==(s=v.options)&&void 0!==s&&s.jump2)if(0==(null===v||void 0===v||null===(p=v.options)||void 0===p?void 0:p.list.indexOf(null===v||void 0===v?void 0:v.value)))bi(null===(f=oo.find(e=>{var l;return e.id===(null===v||void 0===v||null===(l=v.options)||void 0===l?void 0:l.process)}))||void 0===f||null===(_=f.steps)||void 0===_||null===(y=_.find(e=>e.id===(null===v||void 0===v?void 0:v.options.jump1)))||void 0===y?void 0:y.id);else if(1==(null===v||void 0===v||null===(m=v.options)||void 0===m?void 0:m.list.indexOf(null===v||void 0===v?void 0:v.value))){var h,g,b;bi(null===(h=oo.find(e=>{var l;return e.id===(null===v||void 0===v||null===(l=v.options)||void 0===l?void 0:l.process)}))||void 0===h||null===(g=h.steps)||void 0===g||null===(b=g.find(e=>e.id===(null===v||void 0===v?void 0:v.options.jump2)))||void 0===b?void 0:b.id)}else{var x,E;null===Rl||void 0===Rl||null===(x=Rl.processModule)||void 0===x||null===(E=x.back_array)||void 0===E||E.pop(),u.h.dispatch((0,a.Xc)({show:!0,message:"Please select a value for ".concat(null===v||void 0===v?void 0:v.field_name),color:"red",bottom:!1})),window.scrollTo({top:0,behavior:"smooth"})}else if((null===c||void 0===c?void 0:c.length)>0){const e=c.filter(e=>void 0!==e.value);var C,w,M,S,k;if(1==e.length)bi(null===(C=oo.find(l=>{var o,i;return l.id===(null===(o=e[0])||void 0===o||null===(i=o.options)||void 0===i?void 0:i.process)}))||void 0===C||null===(w=C.steps)||void 0===w||null===(M=w.find(l=>{var o;return l.id===(null===(o=e[0])||void 0===o?void 0:o.options.jump1)}))||void 0===M?void 0:M.id);else null===Rl||void 0===Rl||null===(S=Rl.processModule)||void 0===S||null===(k=S.back_array)||void 0===k||k.pop(),u.h.dispatch((0,a.Xc)({show:!0,message:"A selection is required",color:"red",bottom:!1})),window.scrollTo({top:0,behavior:"smooth"})}else if((null===ci||void 0===ci?void 0:ci.next_steps.length)>1||pi.length>1||mi.length>1)uo(!vo);else if(1===ci.next_steps.length){var Z;bi(null===ci||void 0===ci||null===(Z=ci.next_steps[0])||void 0===Z?void 0:Z.id)}else{var I;bi(null===(I=Wl.steps[Wl.steps.findIndex(e=>e.id===ci.id)+1])||void 0===I?void 0:I.id)}}}),vo&&t.createElement("div",{className:ce.goToNextStep},null===ci||void 0===ci?void 0:ci.next_steps.map((e,l)=>t.createElement("div",{key:l,onClick:()=>bi(e.id),className:ce.nextStepsContainer},t.createElement("div",{className:ce.nextStepImageContainer},t.createElement(C.G,{icon:E.d63})),t.createElement("p",null,null===e||void 0===e?void 0:e.name))),null===pi||void 0===pi?void 0:pi.map((e,l)=>t.createElement("div",{key:l,onClick:()=>bi(e.id),className:ce.nextStepsContainer},t.createElement("div",{className:ce.nextStepImageContainer},t.createElement(C.G,{icon:E.t3U})),t.createElement("p",null,null===e||void 0===e?void 0:e.name))),null===mi||void 0===mi?void 0:mi.map((e,l)=>t.createElement("div",{key:l,onClick:()=>(e=>{u.h.dispatch((0,a.pU)(e)),uo(!1)})(e),className:ce.nextStepsContainer},t.createElement("div",{className:ce.nextStepImageContainer},t.createElement(C.G,{icon:E.t3U})),t.createElement("p",null,null===e||void 0===e?void 0:e.name)))))};return t.createElement(S.LN,null,t.createElement(k.sM,null,t.createElement("div",{className:ce.processStepHost,style:{backgroundColor:y.tq?"":!0===(null===ci||void 0===ci||null===(ue=ci.options)||void 0===ue?void 0:ue.popup)?"var(--app-color-white-lightest)":""}},t.createElement("div",{className:ce.leftCardMargin,"app-variant-is-mobile":y.tq?"true":"false"},(Rl.processModule.stepIndex>1||(null===(pe=Rl.processModule)||void 0===pe?void 0:pe.tab))&&t.createElement("div",{style:{display:"flex",justifyContent:"space-between",width:"100%",marginBottom:"20px"}},null!==(me=Rl.processModule)&&void 0!==me&&me.tab?t.createElement("label",{className:ce.stepGuidanceSmaller},null===ci||void 0===ci?void 0:ci.guidance):t.createElement("div",null),t.createElement(f.zx,{clear:!0,clicked:()=>{ro(!0);const e=ql.find(e=>e.id===Rl.processModule.module_id);io.componentsByModule[e.name]=0,(0,m.vC)(e,v.Qc,1e3,1).pipe((0,c.q)(1)).subscribe({next:l=>{var o;const i=null!==l&&void 0!==l&&l.data?null===l||void 0===l?void 0:l.data:l;u.h.dispatch((0,a.mK)(X.Z(Q.Z("created_date"),[...Yl.filter(e=>e.module_id!==Rl.processModule.module_id),...i]),v.KI)),ro(!1),e.lastUpdate=(0,g.now)(),e.count=null!==(o=null===l||void 0===l?void 0:l.total)&&void 0!==o?o:0},complete:()=>{},error:()=>ro(!1)})},icon:t.createElement("img",{src:Z.Fd}),loading:ao})),0===(null===ci||void 0===ci||null===(fe=ci.component_blueprints)||void 0===fe?void 0:fe.filter(e=>{var l;return 1==(null===(l=e.options)||void 0===l?void 0:l.asModuleList)}).length)&&t.createElement(t.Fragment,null,t.createElement("p",{className:ce.stepTitle,style:{width:"100%",fontSize:"30px"}},null===ci||void 0===ci?void 0:ci.name),!lo&&(null===ci||void 0===ci||null===(_e=ci.guidance)||void 0===_e?void 0:_e.length)>0&&t.createElement("label",{className:ce.stepGuidanceSmaller},null===ci||void 0===ci?void 0:ci.guidance),mo&&(co||Vo)&&t.createElement(P.Z,{message:mo,onClick:()=>fo("")})),-1==Rl.processModule.stepIndex&&t.createElement(t.Fragment,null,t.createElement("label",{className:ce.stepGuidanceSmaller},Rl.processModule.description)),1===so&&void 0===(null===ci||void 0===ci?void 0:ci.component_blueprints)?t.createElement("div",{className:ce.centeredSpinner}):(null===ci||void 0===ci||null===(ye=ci.component_blueprints)||void 0===ye?void 0:ye.filter(e=>{var l;return 1==(null===(l=e.options)||void 0===l?void 0:l.asModuleList)}).length)>0?null===ci||void 0===ci||null===(he=ci.component_blueprints)||void 0===he?void 0:he.filter(e=>{var l,o,i;return 1==e.options.asModuleList&&(no.positions.filter(l=>{var o,i;return null===(o=e.options)||void 0===o||null===(i=o.showOnly)||void 0===i?void 0:i.includes(l.id)}).length>0||0==(null===(l=e.options)||void 0===l||null===(o=l.showOnly)||void 0===o?void 0:o.length)||void 0===(null===(i=e.options)||void 0===i?void 0:i.showOnly))}).map((e,l)=>t.createElement("div",{key:l,style:{width:"100%",padding:"0 10px 0 10px",fontFamily:"var(--app-text-font-mobile)"}},function(e){var l,o;let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Fo,n=J.Z([K.Z(Q.Z("created_date"))])(t.filter(e=>e.created_by.id===(null===no||void 0===no?void 0:no.id)?e:"Expired"!==e.status)).map(l=>{var o,t,n,d,a,r,s,u,c,p,m,f;let _={};e.list.map(e=>{const o=l.component_fields.find(l=>l.field_name===e);if(void 0!=o)if("People"===o.data_type_name)_=(0,i.Z)((0,i.Z)({},_),{},{[e]:o.value});else if("Positions"===o.data_type_name)_=(0,i.Z)((0,i.Z)({},_),{},{[e]:Gl.find(e=>e.value===o.value).label});else if("Date"===o.data_type_name){var t;const l=new Date(null===o||void 0===o||null===(t=o.value)||void 0===t?void 0:t.split(",")[0]);_=(0,i.Z)((0,i.Z)({},_),{},{[e]:b()(l).format("DD MMM YYYY")})}else if("Record"===o.data_type_name||"Component"===o.data_type_name){var n;_=(0,i.Z)((0,i.Z)({},_),{},{[e]:y.tq?"".concat(null===o||void 0===o?void 0:o.value.slice(0,40)):"".concat(null===o||void 0===o?void 0:o.value)}),null===(n=Yl.find(e=>{var l;return(null===(l=e.component_fields.filter(e=>e.field_name===o.options.output&&e.component_blueprint_id===o.options.component_id&&e.value===(null===o||void 0===o?void 0:o.value)))||void 0===l?void 0:l.length)>0}))||void 0===n||n.component_fields.filter(e=>{_=(0,i.Z)((0,i.Z)({},_),{},{[e.field_name]:y.tq?e.value.slice(0,40):e.value})})}else if("Filters"===o.data_type_name){var d;_=(0,i.Z)((0,i.Z)({},_),{},{[e]:y.tq?"".concat(null===o||void 0===o?void 0:o.value.slice(0,30)):"".concat(null===o||void 0===o?void 0:o.value)}),null===(d=Yl.find(e=>{var l;return(null===(l=e.component_fields.filter(e=>e.field_name===o.options.output&&e.component_blueprint_id===o.options.component_id&&e.value===(null===o||void 0===o?void 0:o.value)))||void 0===l?void 0:l.length)>0}))||void 0===d||d.component_fields.filter(e=>{_=(0,i.Z)((0,i.Z)({},_),{},{[e.field_name]:y.tq?e.value.slice(0,40):e.value})})}else if("Status"===o.data_type_name){var a,r,s,v,u,c;_=0==l.is_complete?(0,i.Z)((0,i.Z)({},_),{},{[e]:"Draft"}):!((null===(a=Rl.processModule.module)||void 0===a||null===(r=a.options)||void 0===r?void 0:r.activeFor)>0&&b()((0,g.now)()).diff(b()(l.created_date),"minutes")>+(null===(s=Rl.processModule.module)||void 0===s||null===(v=s.options)||void 0===v?void 0:v.activeFor))||"New"!==l.status&&"Unassigned"!==l.status||null!==(u=l.assigned_to)&&void 0!==u&&u.id?(0,i.Z)((0,i.Z)({},_),{},{[e]:"".concat(null!==(c=null===l||void 0===l?void 0:l.status)&&void 0!==c?c:null===o||void 0===o?void 0:o.value)}):(0,i.Z)((0,i.Z)({},_),{},{[e]:"Expired"})}else{var p,m;_=(0,i.Z)((0,i.Z)({},_),{},{[e]:y.tq?null===o||void 0===o||null===(p=o.value)||void 0===p?void 0:p.slice(0,40).split(",")[0]:null===o||void 0===o||null===(m=o.value)||void 0===m?void 0:m.split(",")[0]})}}),null===e||void 0===e||null===(o=e.com)||void 0===o||null===(t=o.selected_fields)||void 0===t||null===(n=t.filter(e=>"Details"===e.data_type_name))||void 0===n||n.forEach(e=>{var l,o,i,t;const n=_[null!==(l=null===(o=e.options)||void 0===o?void 0:o.field)&&void 0!==l?l:e.options.key],d=Yl.find(l=>l.module_id===e.options.module_id&&l.component_fields.find(l=>l.field_name===e.options.key&&l.value===n));_[e.field_name]=null===(i=e.options)||void 0===i||null===(t=i.fields.map(e=>{var l,o;return null===d||void 0===d||null===(l=d.component_fields)||void 0===l||null===(o=l.find(l=>l.field_name===e))||void 0===o?void 0:o.value}))||void 0===t?void 0:t.join(" ")}),(null===l||void 0===l||null===(d=l.component_items)||void 0===d?void 0:d.length)>0&&(_=(0,i.Z)((0,i.Z)({},_),{},{"Total Qty":l.component_items.reduce((e,l)=>e+ +l.quantity,0)})),(null===l||void 0===l||null===(a=l.shared_positions)||void 0===a?void 0:a.length)>0&&(_=(0,i.Z)((0,i.Z)({},_),{},{Shares:null===l||void 0===l?void 0:l.shared_positions.map(e=>{var l;return null===(l=Gl.find(l=>l.value===e.id))||void 0===l?void 0:l.label}).toString()}));const h=new Date(l.created_date);return _=(0,i.Z)((0,i.Z)({},_),{},{id:l.id,"Created By":"".concat(null===l||void 0===l||null===(r=l.created_by)||void 0===r?void 0:r.first_name," ").concat(null===l||void 0===l||null===(s=l.created_by)||void 0===s?void 0:s.last_name),"Created Date":b()(h).format("DD MMM YYYY"),"Assigned To":"".concat(null!==(u=null===l||void 0===l||null===(c=l.assigned_to)||void 0===c?void 0:c.first_name)&&void 0!==u?u:""," ").concat(null!==(p=null===l||void 0===l||null===(m=l.assigned_to)||void 0===m?void 0:m.last_name)&&void 0!==p?p:""),Title:l.title,items:l.component_items,Status:l.status,[Rl.processModule.module.name]:l.title}),null===e||void 0===e||null===(f=e.reports)||void 0===f||f.filter(e=>"Formula"===e.data_type_name).map(e=>{const o=(0,v.LV)(e.options,e.options.list.map(e=>{var l;return{value:null!==(l=_[e])&&void 0!==l?l:0}}),Yl.filter(e=>{var l,o;return e.module_id===(null===Rl||void 0===Rl||null===(l=Rl.processModule)||void 0===l||null===(o=l.module)||void 0===o?void 0:o.id)}),null===l||void 0===l?void 0:l.component_items);_=(0,i.Z)((0,i.Z)({},_),{},{[e.field_name]:"".concat(o)})}),_});null===e||void 0===e||null===(l=e.reports)||void 0===l||l.filter(e=>"List Filter"===e.data_type_name).map(e=>{n=n.filter(l=>{var o,i;return l[null===(o=e.options)||void 0===o?void 0:o.field]===(null===(i=e.options)||void 0===i?void 0:i.value)})});const d=null===e||void 0===e||null===(o=e.reports)||void 0===o?void 0:o.find(e=>"Transaction List"===e.data_type_name);if(d){let e=[];n.map(l=>{l.items.filter(o=>{const t=(0,i.Z)({},l);Object.keys(d.options.map).map(e=>{t[d.options.map[e]]=o[e]}),e=[...e,t]}),delete l.items}),n=e}return n}({list:e.selected_fields.filter(e=>1==e.visible||"Info"===e.data_type_name).map(e=>{var l,o;return"Info"===e.data_type_name&&null!==(l=null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.key)&&void 0!==l?l:e.field_name})}).map((e,l)=>t.createElement("div",{key:l,style:{width:"100%",borderBottom:"1px solid lightgray",padding:"20px 5px 20px 5px"}},t.createElement("div",{style:{fontSize:"18px",fontWeight:"600",width:"100%",color:"var(--app-color-gray-dark)"}},"".concat(e.Title," - ").concat(e["Created By"]).toUpperCase()),t.createElement(f.zx,{title:"".concat(b()(new Date(e["Created Date"])).format("MMM DD, YYYY")),style:{height:"24px",backgroundColor:"var(--app-color-blue)"}}),t.createElement("div",{style:{fontSize:"18px",fontWeight:"normal",width:"100%"}},e.Status),(null===ti||void 0===ti?void 0:ti.id)===e.id&&t.createElement(je,{ref:fi,begunModule:Rl,allModules:ql,companyData:Bl,components:Yl,selectedComponent:Fo.find(e=>e.id===(null===ti||void 0===ti?void 0:ti.id)),setSelectedComponent:eo,companyUsersArray:Vl,print:So,step:Z.Nb,companyPositionsArray:Gl,user:Ul,goto:!1}),t.createElement(f.zx,{title:(null===ti||void 0===ti?void 0:ti.id)===e.id?"HIDE":"VIEW",style:{width:"100%",backgroundColor:"green"},clicked:()=>{ti.id===e.id?ni(!1):ni(e)}}))))):1===so&&void 0===ci.component_blueprints?t.createElement(t.Fragment,null,"No components in step"):null===Rl||void 0===Rl||null===(ge=Rl.processModule)||void 0===ge||null===(xe=ge.module)||void 0===xe||null===(Ee=xe.options)||void 0===Ee||!Ee.one||(null===Rl||void 0===Rl||null===(Ce=Rl.processModule)||void 0===Ce||null===(we=Ce.module)||void 0===we||null===(Me=we.options)||void 0===Me?void 0:Me.lock)!==(null===$l||void 0===$l?void 0:$l.status)&&null!==$l&&void 0!==$l&&$l.status||!Yl.find(e=>{var l,o,i;return e.module_id===(null===(l=Rl.processModule)||void 0===l||null===(o=l.module)||void 0===o?void 0:o.id)&&(null===e||void 0===e||null===(i=e.created_by)||void 0===i?void 0:i.id)===no.id})?t.createElement("div",{className:ce.processModuleContainer,"app-variant-is-mobile":y.tq?"true":"false"},t.createElement(f.U7,{blured:!1,scrollable:!1,isOpen:!y.tq&&(null!==(Se=null===ci||void 0===ci||null===(ke=ci.options)||void 0===ke?void 0:ke.popup)&&void 0!==Se&&Se),shadowedContainerStyle:{width:"100%",minWidth:"50%"}},t.createElement(Ve,{nextButtonClicked:_o,step:ci,setIsMandatoryError:po,isMandatoryError:co,begunModule:Rl,companyData:Bl,blueprints:Jl,components:Yl,products:jl,authenticatedUser:no,isEditing:Ql,companyUsersArray:Vl,usersArray:qo,setUsers:Co,setPositions:Mo,setIsCompleted:xo,selectedComponent:$l,goToNextStep:Ei,companyPositionsArray:Gl,cart:Fl,allModules:ql,editMode:Vo},t.createElement("div",{className:ce.menuRightButtons}),Ai())),(!0!==(null===ci||void 0===ci||null===(Ze=ci.options)||void 0===Ze?void 0:Ze.popup)||y.tq)&&t.createElement(Ve,{nextButtonClicked:_o,step:ci,setIsMandatoryError:po,isMandatoryError:co,begunModule:Rl,companyData:Bl,blueprints:Jl,components:Yl,products:jl,authenticatedUser:no,isEditing:Ql,companyUsersArray:Vl,usersArray:qo,setUsers:Co,setPositions:Mo,setIsCompleted:xo,selectedComponent:$l,goToNextStep:Ei,companyPositionsArray:Gl,cart:Fl,allModules:ql,editMode:Vo,isProcessorOnly:lo},Ai())):t.createElement("label",{className:ce.stepGuidanceSmaller},"This is a single submission module. You have already submitted a response"),ai&&t.createElement(We.Z,{openModal:ai,setOpenModal:ri,dialogHandler:()=>{Rl.processModule.back_array=[],Ei(Pi?Wl.steps[0].id:Wl.steps[1].id),jo(!1),Ni(),Hl()},title:"You have unsaved items. Are you sure you want to cancel?",proceedTitle:"Yes",cancelTitle:"No, return back",loading:ao}),Zo&&t.createElement(f.U7,{isOpen:s.v7,onClose:()=>{},backdropColor:!0,blured:!0,scrollable:!0,shadowedContainerStyle:{width:"100%"}},t.createElement("div",null,t.createElement("p",{className:ce.deleteText},"Are you sure you want to delete ".concat($l.title,"?")),t.createElement("div",{style:{display:"flex",justifyContent:"center"}},t.createElement(f.zx,{title:"Delete",clicked:()=>{Oo(!0),(0,s.v7)($l.id).pipe((0,p.P)()).subscribe({next:()=>{Oo(!1),go(!1),Io(!1)},complete:()=>{},error:()=>{Oo(!1),Io(!1)}})},loading:Ao}),t.createElement(f.zx,{title:"No",light:!0,clicked:()=>Io(!1)})))),Do&&t.createElement(f.U7,{isOpen:Do,onClose:()=>{},backdropColor:!0,blured:!1,scrollable:!0,shadowedContainerStyle:{width:"100%"}},t.createElement("div",null,t.createElement("p",{className:ce.deleteText},"Cannot delete ".concat($l.title,". Some transactions and master data are using this item")),t.createElement("div",{style:{display:"flex",justifyContent:"center"}},t.createElement(f.zx,{title:"Close",light:!0,clicked:()=>Po(!1)}))))),si&&t.createElement(We.Z,{openModal:si,setOpenModal:vi,dialogHandler:()=>{Jo(!1),vi(!1),u.h.dispatch((0,a.q4)((0,i.Z)((0,i.Z)({},Rl.processModule),{},{stepIndex:0,isUpdating:!1})))},title:"No payments made. Do you want to pay later?",proceedTitle:"Yes",cancelTitle:"No, return back"}),Go&&t.createElement(f.U7,{hasCloseIcon:!0,isOpen:Go,onClose:()=>vi(!0),backdropColor:!0,blured:!1,scrollable:!0,shadowedContainerStyle:{width:"100%"}},t.createElement(ae.default,{label:" ",withBack:!1,paymentPath:"begin-mobile",onClose:()=>Jo(!1),companyData:Bl,subscriptionInfo:{user_id:no.id,ref:yi.id,plan_price:null!==(Ie=null===yi||void 0===yi?void 0:yi.plan)&&void 0!==Ie?Ie:0,currency:null!==(Ne=null===yi||void 0===yi?void 0:yi.currency)&&void 0!==Ne?Ne:"PHP",plan:"CC-".concat(yi.id),total:null!==(Te=+(null===yi||void 0===yi?void 0:yi.total))&&void 0!==Te?Te:0,billable_users:[no],duration:0,dlabel:yi.id,id:null===Rl||void 0===Rl||null===(De=Rl.processModule)||void 0===De||null===(Pe=De.selectedComponent)||void 0===Pe?void 0:Pe.id},onError:e=>{di(!0),fo(e),po(!0),Jo(!1),u.h.dispatch((0,a.q4)((0,i.Z)((0,i.Z)({},Rl.processModule),{},{stepIndex:0,isUpdating:!1})))}})),No&&t.createElement(f.U7,{isOpen:No,onClose:()=>To(!1),backdropColor:!0,blured:!0,scrollable:!0,shadowedContainerStyle:{width:"100%"}},t.createElement("div",null,t.createElement(f.jL,{ungrouped:!0,title:"nonmanager"===no.user_type?"Type an email address to send copy of this transaction (optional)":"Select users to email this transaction (Optional)",columned:!0,withAckButton:!1},"nonmanager"===no.user_type?t.createElement("input",{placeholder:"Use comma, no space, for multiple email addresses",className:ce.emailInput,onChange:e=>{new RegExp(/^([a-z0-9!#$%&'*+/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*)(([, ]+[a-z0-9!#$%&'*+/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])\.([a-z0-9]([a-z0-9-]*[a-z0-9]))*)?)*$/).test(e.target.value)&&Ho(e.target.value.split(","))}}):t.createElement(U.Cm,{id:"Users",tagEmplacement:"inlined",searchable:!1,items:qo.filter(e=>{var l;return e.department===(null===(l=no.departments[0])||void 0===l?void 0:l.name)}),groupedBy:"department",groupname:"department",triggerType:"chevron",initialSelectedValues:[],className:ce.peoplePositionsSelect,inputClassName:ce.peoplePositionsSelectInput,molclassname:ce.peoplePositionsSelectMenuOverlay,moliclassname:ce.peoplePositionsSelectMenuOverlayItem,onChange:e=>{e.length>0?Ho(null===e||void 0===e?void 0:e.map(e=>null===e||void 0===e?void 0:e.user.email)):Ho([])}})),t.createElement("div",{style:{display:"flex",justifyContent:"center"}},t.createElement(f.zx,{title:"Back",light:!0,clicked:()=>To(!1)}),t.createElement(f.zx,{disabled:!1===(null===Bl||void 0===Bl?void 0:Bl.start),title:null!==Rl&&void 0!==Rl&&null!==(Oe=Rl.processModule)&&void 0!==Oe&&Oe.isUpdating?"Update":bo&&null!==(ze=null===Rl||void 0===Rl||null===(Re=Rl.processModule)||void 0===Re||null===(Ue=Re.module)||void 0===Ue||null===(Fe=Ue.options)||void 0===Fe?void 0:Fe.save)&&void 0!==ze?ze:"Save",loading:ao,style:{width:"160px",marginLeft:"0px"},clicked:()=>{To(!1),wi()}})))),(ho||!0===(null===Rl||void 0===Rl||null===(Be=Rl.processModule)||void 0===Be?void 0:Be.showDetail))&&void 0!==(null===$l||void 0===$l?void 0:$l.title)&&t.createElement(f.U7,{hasCloseIcon:!0,blured:!0,scrollable:!0,isOpen:(ho||!0===(null===Rl||void 0===Rl||null===(Ye=Rl.processModule)||void 0===Ye?void 0:Ye.showDetail))&&void 0!==(null===$l||void 0===$l?void 0:$l.title),shadowedContainerStyle:{padding:"0 20px 20px 20px",width:"100%"},sshadowedContainerClassname:ce.popup,onClose:()=>{go(!1),ko(!1),u.h.dispatch((0,a.q4)((0,i.Z)((0,i.Z)({},Rl.processModule),{},{showDetail:!1}))),lo?Ni():(Wo(Yl.filter(e=>{var l,o;return e.module_id===(null===Rl||void 0===Rl||null===(l=Rl.processModule)||void 0===l||null===(o=l.module)||void 0===o?void 0:o.id)})),Ei(Pi?Wl.steps[0].id:Wl.steps[1].id),jo(!1),Ni(),Hl())}},t.createElement(je,{ref:fi,begunModule:Rl,allModules:ql,companyData:Bl,components:Yl,selectedComponent:$l,setSelectedComponent:eo,companyUsersArray:Vl,print:So,step:Z.Nb,companyPositionsArray:Gl,user:Ul,goto:!0}),t.createElement("div",{className:ce.emulatedFlexGap,style:{width:"100%"}},(null===$l||void 0===$l||null===(He=$l.component_fields)||void 0===He?void 0:He.length)>0&&t.createElement(t.Fragment,null,(0,v.cQ)(Zi,Ii,$l,no,Rl,Bl)&&(null===Rl||void 0===Rl||null===(Ge=Rl.processModule)||void 0===Ge||null===(Je=Ge.steps)||void 0===Je||null===(Ke=Je.find(e=>e.component_blueprints.filter(e=>e.selected_fields.filter(e=>"Action Button"===e.data_type_name).length>0).length>0))||void 0===Ke||null===(Qe=Ke.component_blueprints.find(e=>e.selected_fields.filter(e=>"Action Button"===e.data_type_name).length>0))||void 0===Qe?void 0:Qe.selected_fields.filter(e=>"Action Button"===e.data_type_name).map((e,l)=>{var o,n,d,r;if("status"===e.options.action){var c,m,_,y,h,x,E,C;let o=(null===Bl||void 0===Bl||null===(c=Bl.misc_info)||void 0===c||null===(m=c.status)||void 0===m?void 0:m.length)>0?null===Bl||void 0===Bl||null===(_=Bl.misc_info)||void 0===_?void 0:_.status:v.MO;var w;if((null===Bl||void 0===Bl||null===(y=Bl.misc_info)||void 0===y||null===(h=y.rules)||void 0===h?void 0:h.length)>0)null===Bl||void 0===Bl||null===(w=Bl.misc_info)||void 0===w||w.rules.filter(e=>"status"===e.type).filter(l=>{l.valueCondition===e.value&&(o="0"===l.allow?o.filter(e=>l.values.includes(e.value)):o.filter(e=>!l.values.includes(e.value)))});return t.createElement("div",{key:l,style:{width:"100%",display:"user"===e.options.action&&null!==(x=$l.component_fields)&&void 0!==x&&null!==(E=x.find(l=>l.procedure_step_blueprint_field_id===e.procedure_step_blueprint_field_id))&&void 0!==E&&E.value?"none":""}},t.createElement(A.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-light)"},className:ce.multiselectComponent,key:l,visible:e.visible,mandatory:e.mandatory,value:null!==(C=e.value)&&void 0!==C?C:"",items:o,error:e.errors,onChange:l=>{var o,t,n,d;if(null!==(o=Rl.processModule)&&void 0!==o&&null!==(t=o.module)&&void 0!==t&&null!==(n=t.options)&&void 0!==n&&n.credits&&(l===(null===(d=Bl.options)||void 0===d?void 0:d.lock)||"Closed"===l)){var r,c,m,f,_,y,h,g;const e=null===Rl||void 0===Rl||null===(r=Rl.processModule)||void 0===r||null===(c=r.steps)||void 0===c||null===(m=c.find(e=>e.component_blueprints.filter(e=>e.selected_fields.filter(e=>"Payments"===e.data_type_name).length>0).length>0))||void 0===m||null===(f=m.component_blueprints.find(e=>e.selected_fields.filter(e=>"Payments"===e.data_type_name).length>0))||void 0===f?void 0:f.selected_fields.find(e=>"Payments"===e.data_type_name),l=null===(_=yi.newStepComponents.concat(yi.components).find(l=>l.selected_fields.filter(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.paymentField)}).length>0))||void 0===_||null===(y=_.selected_fields)||void 0===y?void 0:y.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.paymentField)});let o=0;if(null===(h=Rl.processModule)||void 0===h||null===(g=h.selectedComponent.payments)||void 0===g||!g.stripe_id)return go(!1),Rl.processModule.showDetail=!1,void u.h.dispatch((0,a.Xc)({show:!0,message:"Check support payment docs",color:"red",spinner:!1,bottom:!0}));var b,x;if(!(+(null!==(b=null===l||void 0===l?void 0:l.value)&&void 0!==b?b:0)>0))return void u.h.dispatch((0,a.Xc)({show:!0,message:"No amount found",color:"red",spinner:!1,bottom:!0}));o=+(null!==(x=null===l||void 0===l?void 0:l.value)&&void 0!==x?x:0),"Cash"!==(null===e||void 0===e?void 0:e.value)&&(0,re.e_)({user_id:no.id,id:(0,v.mR)(),total:o,product:"CR-".concat(null===$l||void 0===$l?void 0:$l.title),notes:"Wallet",quantity:1}).pipe((0,p.P)()).subscribe({next:()=>{var e;Ul.wallet=+(+(null!==(e=null===Ul||void 0===Ul?void 0:Ul.wallet)&&void 0!==e?e:0)+o)}})}Bl.start=!0,ro(!0),(0,s.C0)({component_id:$l.id,index:0,group:99,value:l,procedure_step_blueprint_field_id:e.procedure_step_blueprint_field_id}).subscribe({next:e=>{(0,s.zK)(null===$l||void 0===$l?void 0:$l.id,l).subscribe({next:e=>{ro(!1),go(!1),u.h.dispatch((0,a.q4)((0,i.Z)((0,i.Z)({},Rl.processModule),{},{showDetail:!1})))}})},error:()=>{},complete:()=>{}})},fieldIcon:e.icon,fieldLabel:e.field_name,placeholder:"Select status..."}))}return t.createElement("div",{key:l,style:{width:"100%",display:null!==$l&&void 0!==$l&&$l.payments||null===$l||void 0===$l||!$l.component_fields.find(e=>"Payments"===e.data_type_name&&"Credit Card"===e.value)?"":"none"}},t.createElement(f.zx,{light:!0,title:e.field_name,loading:ao,clicked:()=>{if("user"===e.options.action||"creator"===e.options.action){var l,o,t,n,d,r,c,m,f;if(1==(null===(l=Rl.processModule)||void 0===l||null===(o=l.module)||void 0===o||null===(t=o.options)||void 0===t?void 0:t.activeFor)&&b()((0,g.now)()).diff(b()($l.created_date),"minutes")>+(null===(n=Rl.processModule)||void 0===n||null===(d=n.module)||void 0===d||null===(r=d.options)||void 0===r?void 0:r.activeFor))return void u.h.dispatch((0,a.Xc)({show:!0,message:"This transaction has already expired.",color:"red",spinner:!1,bottom:!0}));const P="user"===e.options.action?no:Vl.find(e=>{var l;return e.id===(null===(l=$l.created_by)||void 0===l?void 0:l.id)});if(null!==(c=Rl.processModule)&&void 0!==c&&null!==(m=c.module)&&void 0!==m&&null!==(f=m.options)&&void 0!==f&&f.credits){var _,y,h,x,E,C,w,M,S,k;const e=null===Rl||void 0===Rl||null===(_=Rl.processModule)||void 0===_||null===(y=_.steps)||void 0===y||null===(h=y.find(e=>e.component_blueprints.filter(e=>e.selected_fields.filter(e=>"Payments"===e.data_type_name).length>0).length>0))||void 0===h||null===(x=h.component_blueprints.find(e=>e.selected_fields.filter(e=>"Payments"===e.data_type_name).length>0))||void 0===x?void 0:x.selected_fields.find(e=>"Payments"===e.data_type_name);if("Credit Card"===(null===e||void 0===e?void 0:e.value)&&(null===$l||void 0===$l||!$l.payments))return u.h.dispatch((0,a.Xc)({show:!0,message:"This ",color:"red",spinner:!1,bottom:!0})),Rl.processModule.showDetail=!1,void go(!1);const l=null===(E=yi.newStepComponents.concat(yi.components).find(l=>l.selected_fields.filter(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.paymentField)}).length>0))||void 0===E||null===(C=E.selected_fields)||void 0===C?void 0:C.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.paymentField)});let o=0;if(void 0===(null===P||void 0===P?void 0:P.wallet)||0===(null===P||void 0===P?void 0:P.wallet))return u.h.dispatch((0,a.Xc)({show:!0,message:"You need to setup funds for your wallet",color:"red",spinner:!1,bottom:!0})),Rl.processModule.showDetail=!1,void go(!1);if(+(null!==(w=null===l||void 0===l?void 0:l.value)&&void 0!==w?w:0)>0&&"Cash"===(null===e||void 0===e?void 0:e.value)){var Z,I,N,T,D;if((null!==(Z=+(null===P||void 0===P?void 0:P.wallet))&&void 0!==Z?Z:0)<+(null===l||void 0===l?void 0:l.value)+ +(null===l||void 0===l?void 0:l.value)*+(null!==(I=null===(N=Bl.misc_info)||void 0===N?void 0:N.rate)&&void 0!==I?I:.2))return u.h.dispatch((0,a.Xc)({show:!0,message:"Insufficient funds in wallet",color:"red",spinner:!1,bottom:!0})),Rl.processModule.showDetail=!1,void go(!1);o=null!==l&&void 0!==l&&l.value?+(null===l||void 0===l?void 0:l.value)+ +(null===l||void 0===l?void 0:l.value)*+(null!==(T=null===(D=Bl.misc_info)||void 0===D?void 0:D.rate)&&void 0!==T?T:.2):0}else if(!("Wallet"===(null===e||void 0===e?void 0:e.value)||"Points"===(null===e||void 0===e?void 0:e.value)||null!==(M=Rl.processModule)&&void 0!==M&&null!==(S=M.selectedComponent)&&void 0!==S&&null!==(k=S.payments)&&void 0!==k&&k.stripe_id))return go(!1),Rl.processModule.showDetail=!1,void u.h.dispatch((0,a.Xc)({show:!0,message:"Check support payment docs",color:"red",spinner:!1,bottom:!0}));"Cash"===(null===e||void 0===e?void 0:e.value)&&(0,re.e_)({user_id:no.id,id:(0,v.mR)(),total:-o,product:"DB-".concat(null===$l||void 0===$l?void 0:$l.title),notes:"Wallet",quantity:1}).pipe((0,p.P)()).subscribe({next:()=>{var e;return P.wallet=+(+(null!==(e=null===P||void 0===P?void 0:P.wallet)&&void 0!==e?e:0)-o)},error:()=>u.h.dispatch((0,a.Xc)({show:!0,message:"Purchase error encountered",color:"red",spinner:!1,bottom:!0}))})}ro(!0),(0,s.C0)({component_id:$l.id,index:0,group:99,value:P.id,procedure_step_blueprint_field_id:e.procedure_step_blueprint_field_id}).subscribe({next:e=>{(0,s.dn)($l.id,P.id).subscribe({next:e=>{ro(!1),go(!1),u.h.dispatch((0,a.q4)((0,i.Z)((0,i.Z)({},Rl.processModule),{},{showDetail:!1})))}})},error:()=>{},complete:()=>{}})}else"status"===e.options.action||"date"===e.options.action||e.options.action,ro(!1)},style:{backgroundColor:"green",color:"white",width:"100%",display:"user"===e.options.action&&null!==(o=$l.component_fields)&&void 0!==o&&null!==(n=o.find(l=>l.procedure_step_blueprint_field_id===e.procedure_step_blueprint_field_id))&&void 0!==n&&n.value?"none":""}}),t.createElement(f.zx,{title:"Decline",light:!0,loading:ao,clicked:()=>{var e,l;ro(!0);const o=$l.component_fields.find(e=>{var l;return"People"===e.data_type_name&&!0===(null===(l=e.options)||void 0===l?void 0:l.calendar)});(0,s.KL)((0,i.Z)((0,i.Z)({},$l),{},{selected_fields:o?$l.component_fields.filter(e=>e.id!==o.id):$l.component_fields,assigned_to:{id:""},status:"Unassigned"}),$l.id,null===(e=$l.shared_users)||void 0===e?void 0:e.map(e=>null===e||void 0===e?void 0:e.id),$l.title,$l.is_complete,null===(l=$l.shared_positions)||void 0===l?void 0:l.map(e=>null===e||void 0===e?void 0:e.id)).subscribe({error:e=>{u.h.dispatch((0,a.Xc)({show:!0,message:"Errors found",color:"red"}))},next:e=>{u.h.dispatch((0,a.aT)($l.id)),ro(!1),go(!1),u.h.dispatch((0,a.q4)((0,i.Z)((0,i.Z)({},Rl.processModule),{},{showDetail:!1})))},complete:()=>{}})},style:{backgroundColor:"red",color:"white",width:"100%",display:"user"===e.options.action&&null!==(d=$l.component_fields)&&void 0!==d&&null!==(r=d.find(l=>l.procedure_step_blueprint_field_id===e.procedure_step_blueprint_field_id))&&void 0!==r&&r.value?"none":""}}))}))),!(null!==Rl&&void 0!==Rl&&null!==(Xe=Rl.processModule)&&void 0!==Xe&&Xe.canEdit)&&("Closed"===(null===Rl||void 0===Rl||null===($e=Rl.processModule)||void 0===$e?void 0:$e.status)||(null===Rl||void 0===Rl||null===(ll=Rl.processModule)||void 0===ll?void 0:ll.status)===(null===Bl||void 0===Bl||null===(ol=Bl.misc_info)||void 0===ol?void 0:ol.lock)||(null!==(il=null===(tl=Rl.processModule)||void 0===tl||null===(nl=tl.module)||void 0===nl||null===(dl=nl.options)||void 0===dl?void 0:dl.lock)&&void 0!==il?il:"").split(",").includes(null===Rl||void 0===Rl||null===(al=Rl.processModule)||void 0===al?void 0:al.status))&&(null===Rl||void 0===Rl||null===(rl=Rl.processModule.selectedComponent)||void 0===rl||null===(sl=rl.created_by)||void 0===sl?void 0:sl.id)===no.id&&(null===Rl||void 0===Rl||null===(vl=Rl.processModule)||void 0===vl||null===(ul=vl.steps)||void 0===ul?void 0:ul.find(e=>e.component_blueprints.filter(e=>e.selected_fields.filter(e=>"Ratings"===e.data_type_name).length>0)))&&!(null!==Rl&&void 0!==Rl&&null!==(cl=Rl.processModule.selectedComponent)&&void 0!==cl&&cl.component_fields.find(e=>"Ratings"===e.data_type_name))&&Di&&t.createElement(f.zx,{clear:!0,title:"Rate",style:{backgroundColor:"orange",color:"white",width:"100%"},clicked:()=>{Qo(!0)}}),(null===(pl=Rl.processModule)||void 0===pl?void 0:pl.canEdit)&&t.createElement(f.zx,{title:Rl.processModule.canEdit?"Edit":"Close",style:{width:"100%"},clicked:()=>{go(!1),ko(!1),u.h.dispatch((0,a.q4)((0,i.Z)((0,i.Z)({},Rl.processModule),{},{showDetail:!1}))),Rl.processModule.canEdit||(lo?Ni():(Wo(Yl.filter(e=>{var l,o;return e.module_id===(null===Rl||void 0===Rl||null===(l=Rl.processModule)||void 0===l||null===(o=l.module)||void 0===o?void 0:o.id)})),Ei(Pi?Wl.steps[0].id:Wl.steps[1].id),jo(!1),Ni(),Hl())),window.scrollTo({top:Rl.processModule.canEdit?1e3:0,behavior:"smooth"})}}),(null===Rl||void 0===Rl||null===(ml=Rl.processModule)||void 0===ml||null===(fl=ml.module)||void 0===fl||null===(_l=fl.options)||void 0===_l?void 0:_l.canCancel)&&("New"===$l.status||"Unassigned"===$l.status)&&!(null!==(yl=$l.assigned_to)&&void 0!==yl&&yl.id)&&t.createElement(f.zx,{loading:ao,title:"Cancel Transaction",style:{backgroundColor:"red",color:"white",width:"100%"},clear:!0,clicked:()=>{ro(!0),(0,s.tE)(null===$l||void 0===$l?void 0:$l.id,"Cancelled").pipe((0,p.P)()).subscribe({complete:()=>{},next:e=>{var l;if(ro(!1),null!==e&&void 0!==e&&null!==(l=e.data.payments)&&void 0!==l&&l.stripe_id){var o;const l=Math.abs(+(null===e||void 0===e||null===(o=e.data.payments)||void 0===o?void 0:o.stripe_price));(0,re.e_)({user_id:no.id,id:(0,v.mR)(),total:l,product:"RF-".concat($l.title),notes:"Wallet",quantity:1}).pipe((0,p.P)()).subscribe({next:()=>{var e;no.wallet=+(+(null!==(e=null===Ul||void 0===Ul?void 0:Ul.wallet)&&void 0!==e?e:0)+l),ro(!1),go(!1),ko(!1),u.h.dispatch((0,a.q4)((0,i.Z)((0,i.Z)({},Rl.processModule),{},{showDetail:!1}))),window.scrollTo({top:0,behavior:"smooth"})}})}else ro(!1),go(!1),ko(!1),u.h.dispatch((0,a.q4)((0,i.Z)((0,i.Z)({},Rl.processModule),{},{showDetail:!1}))),window.scrollTo({top:0,behavior:"smooth"})}})}}),(null===Rl||void 0===Rl||null===(hl=Rl.processModule)||void 0===hl||null===(gl=hl.module)||void 0===gl||null===(bl=gl.options)||void 0===bl?void 0:bl.canCancel)&&"Cancellation Request"===(null===$l||void 0===$l?void 0:$l.status)&&(null===no||void 0===no?void 0:no.id)===(null===$l||void 0===$l||null===(xl=$l.created_by)||void 0===xl?void 0:xl.id)&&t.createElement(f.zx,{loading:ao,title:"Allow Cancellation",style:{backgroundColor:"red",color:"white",width:"100%"},clear:!0,clicked:()=>{var e;if(ro(!0),null!==(e=$l.payments)&&void 0!==e&&e.stripe_id){var l,o;const e=Math.abs(null!==(l=+(null===$l||void 0===$l||null===(o=$l.payments)||void 0===o?void 0:o.stripe_price))&&void 0!==l?l:0);(0,re.e_)({user_id:no.id,id:(0,v.mR)(),total:e,product:"RF-".concat($l.title),notes:"Wallet",quantity:1}).pipe((0,p.P)()).subscribe({next:()=>{var l;no.wallet=+(+(null!==(l=null===Ul||void 0===Ul?void 0:Ul.wallet)&&void 0!==l?l:0)+e),(0,s.tE)(null===$l||void 0===$l?void 0:$l.id,"Cancelled").pipe((0,p.P)()).subscribe({next:e=>{ro(!1),go(!1),ko(!1),u.h.dispatch((0,a.q4)((0,i.Z)((0,i.Z)({},Rl.processModule),{},{showDetail:!1}))),window.scrollTo({top:0,behavior:"smooth"})},complete:()=>{}})}})}else(0,s.tE)(null===$l||void 0===$l?void 0:$l.id,"Refund").pipe((0,p.P)()).subscribe({complete:()=>{},next:e=>{ro(!1),go(!1),ko(!1),u.h.dispatch((0,a.q4)((0,i.Z)((0,i.Z)({},Rl.processModule),{},{showDetail:!1}))),window.scrollTo({top:0,behavior:"smooth"})}})}}),(null===Rl||void 0===Rl||null===(El=Rl.processModule)||void 0===El||null===(Cl=El.module)||void 0===Cl||null===(wl=Cl.options)||void 0===wl?void 0:wl.canCancel)&&"Refund"===$l.status&&(null===no||void 0===no?void 0:no.id)===(null===(Ml=$l.assigned_to)||void 0===Ml?void 0:Ml.id)&&t.createElement(f.zx,{loading:ao,title:"Refund",style:{backgroundColor:"red",color:"white",width:"100%"},clear:!0,clicked:()=>{const e=$l.component_fields.find(e=>{var l;return"Payments"===e.data_type_name&&"Refund"===$l.status&&(null===(l=$l.assigned_to)||void 0===l?void 0:l.id)===(null===no||void 0===no?void 0:no.id)}),l=$l.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.paymentField)});if(l){var o,t,n;ro(!0);const e=Math.abs(null!==(o=+(null===l||void 0===l?void 0:l.value))&&void 0!==o?o:0)+ +(null===l||void 0===l?void 0:l.value)*+(null!==(t=null===(n=Bl.misc_info)||void 0===n?void 0:n.rate)&&void 0!==t?t:.2);(0,re.e_)({user_id:no.id,id:(0,v.mR)(),total:e,product:"RF-".concat($l.title),notes:"Wallet",quantity:1}).pipe((0,p.P)()).subscribe({next:()=>{var l;no.wallet=+(+(null!==(l=null===Ul||void 0===Ul?void 0:Ul.wallet)&&void 0!==l?l:0)+e),(0,s.tE)(null===$l||void 0===$l?void 0:$l.id,"Cancelled").pipe((0,p.P)()).subscribe({next:e=>{ro(!1),go(!1),ko(!1),Ci(),Ni(),window.scrollTo({top:0,behavior:"smooth"})},complete:()=>{}})}})}else ro(!1),go(!1),ko(!1),u.h.dispatch((0,a.q4)((0,i.Z)((0,i.Z)({},Rl.processModule),{},{showDetail:!1}))),window.scrollTo({top:0,behavior:"smooth"})}}))),Xo&&t.createElement(f.U7,{hasCloseIcon:!0,blured:!0,scrollable:!0,isOpen:Xo,shadowedContainerStyle:{borderTopLeftRadius:"30px",borderTopRightRadius:"30px",padding:"20px",width:"100%"},sshadowedContainerClassname:ce.popup,onClose:()=>{$o(!1)}},t.createElement(je,{ref:fi,begunModule:Rl,allModules:ql,companyData:Bl,components:Yl,setSelectedComponent:eo,selectedComponent:$l,companyUsersArray:Vl,print:So,step:Z.Nb,companyPositionsArray:Gl,user:Ul,goto:!0}),t.createElement("div",{className:ce.emulatedFlexGap,style:{width:"100%"}},t.createElement(f.zx,{title:"Close",style:{width:"100%"},clicked:()=>{$o(!1)}}))),Ko&&t.createElement(f.U7,{isOpen:Ko,hasCloseIcon:!0,onClose:()=>Qo(!1),backdropColor:!0,blured:!1,scrollable:!0,shadowedContainerStyle:{width:"100%",height:"auto"}},t.createElement("div",{className:ce.ratingsDiv},t.createElement("h3",null,"Rate your experience"),t.createElement("h5",null,"Ratings and reviews of users are visible to everyone"),t.createElement(Ae.Z,{photo:null===Di||void 0===Di?void 0:Di.photo,firstName:null===Di||void 0===Di?void 0:Di.first_name,lastName:null===Di||void 0===Di?void 0:Di.last_name,email:null===Di||void 0===Di?void 0:Di.email,position:null===Di||void 0===Di?void 0:Di.phone,cardClicked:()=>{},width:"100%"}),t.createElement("div",{className:ce.slider},t.createElement(f.zx,{clear:!0,clicked:()=>li(1)},t.createElement(C.G,{icon:E.Tab,style:{color:ei<1?"lightgray":"black",height:"30px",width:"30px"}})),t.createElement(f.zx,{clear:!0,clicked:()=>li(2)},t.createElement(C.G,{icon:E.Tab,style:{color:ei<2?"lightgray":"black",height:"30px",width:"30px"}})),t.createElement(f.zx,{clear:!0,clicked:()=>li(3)},t.createElement(C.G,{icon:E.Tab,style:{color:ei<3?"lightgray":"black",height:"30px",width:"30px"}})),t.createElement(f.zx,{clear:!0,clicked:()=>li(4)},t.createElement(C.G,{icon:E.Tab,style:{color:ei<4?"lightgray":"black",height:"30px",width:"30px"}})),t.createElement(f.zx,{clear:!0,clicked:()=>li(5)},t.createElement(C.G,{icon:E.Tab,style:{color:ei<5?"lightgray":"black",height:"30px",width:"30px"}}))),"Comments:",t.createElement("textarea",{type:"text",autoComplete:"none",className:ce.ratingsInput,name:"Comments",id:"Comments",style:{padding:"0 10px 0 10px",fontSize:"16px",backgroundColor:"rgba(234, 231, 231, 0.91)",marginBottom:"30px"}}),t.createElement(f.zx,{title:"Rate",clicked:()=>{var e,l,o,t;const n=null===Rl||void 0===Rl||null===(e=Rl.processModule)||void 0===e||null===(l=e.steps)||void 0===l||null===(o=l.find(e=>e.component_blueprints.filter(e=>e.selected_fields.filter(e=>"Ratings"===e.data_type_name).length>0).length>0))||void 0===o||null===(t=o.component_blueprints.find(e=>e.selected_fields.filter(e=>"Ratings"===e.data_type_name).length>0).selected_fields)||void 0===t?void 0:t.find(e=>"Ratings"===e.data_type_name);Di&&(ro(!0),(0,s.C0)({component_id:$l.id,index:0,gropup:100,value:"".concat(document.getElementById("Comments").value,",").concat(ei),procedure_step_blueprint_field_id:n.procedure_step_blueprint_field_id}).subscribe({complete:()=>{},next:()=>{(0,s.zK)($l.id,"Closed").subscribe({complete:()=>{},next:e=>{(0,be.DV)(Di,{ratings:ei,comments:document.getElementById("Comments").value,component_id:$l.id}).pipe((0,p.P)()).subscribe({next:e=>{ro(!1),Qo(!1),u.h.dispatch((0,a.q4)((0,i.Z)((0,i.Z)({},Rl.processModule),{},{showDetail:!1}))),eo((0,i.Z)((0,i.Z)({},$l),{},{status:"Closed"}))},error:e=>{ro(!1),Qo(!1),u.h.dispatch((0,a.q4)((0,i.Z)((0,i.Z)({},Rl.processModule),{},{showDetail:!1}))),Ni()},complete:()=>{}})}})}}))}}))),Ro&&t.createElement(el,{title:"",nav:Ro,openNav:()=>{window.clearInterval(oi),Kl?ui("/"):Uo(!1)}},t.createElement("div",{style:{color:"var(--app-color-gray-dark)",height:"inherit",width:"100%"}},t.createElement("div",null,t.createElement("div",{style:{textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center",padding:"0 20px 20px 20px"}},!(null!==$l&&void 0!==$l&&$l.assigned_to)&&t.createElement(f.$j,{type:"BallTriangle",color:"black",height:30,width:"30px"}),t.createElement("p",{className:ce.modalSubTitle},null!==$l&&void 0!==$l&&$l.assigned_to?"Your transaction has been assigned to:":"Waiting for ".concat(null!==(Sl=null===$l||void 0===$l?void 0:$l.title)&&void 0!==Sl?Sl:"transaction"," to be assigned")),null!==$l&&void 0!==$l&&$l.assigned_to||"Unassigned"!==(null===$l||void 0===$l?void 0:$l.status)?(null===$l||void 0===$l?void 0:$l.assigned_to)&&t.createElement(Ae.Z,{photo:null===$l||void 0===$l||null===(kl=$l.assigned_to)||void 0===kl?void 0:kl.photo,height:"150px",width:y.tq?"100%":"80%",firstName:"".concat(null===$l||void 0===$l||null===(Zl=$l.assigned_to)||void 0===Zl?void 0:Zl.first_name," ").concat(null===$l||void 0===$l||null===(Il=$l.assigned_to)||void 0===Il?void 0:Il.last_name),email:null!==(Nl=null===$l||void 0===$l||null===(Tl=$l.assigned_to)||void 0===Tl?void 0:Tl.phone)&&void 0!==Nl?Nl:""}):t.createElement(Ae.Z,{noPhoto:!0,height:"150px",width:y.tq?"100%":"80%",firstName:"Unassigned",email:"Please close and select another provider"})),t.createElement("hr",{style:{borderTop:"0.5px solid #D2D2D2"}})),t.createElement("br",null),t.createElement(f.zx,{clicked:()=>{window.clearInterval(oi),Uo(!1)},title:"Hide",style:{width:"100%"},loading:ao}))),Lo&&t.createElement(f.U7,{isOpen:Lo,hasCloseIcon:!0,onClose:()=>Kl?ui("/"):zo(!1),backdropColor:!0,blured:!1,scrollable:!0,shadowedContainerStyle:{width:"100%",height:"auto"}},t.createElement("div",{style:{textAlign:"center",padding:"20px"}},t.createElement("p",{className:ce.modalTitle},null===(Dl=Rl.processModule.module)||void 0===Dl?void 0:Dl.name),t.createElement("p",{className:ce.modalSubTitle},null!==(Pl=null===Rl||void 0===Rl||null===(Al=Rl.processModule)||void 0===Al||null===(Ol=Al.module)||void 0===Ol||null===(Ll=Ol.options)||void 0===Ll?void 0:Ll.message)&&void 0!==Pl?Pl:"Transaction saved"))))))});var sl=o(91605),vl=o(30994),ul=o(57650),cl=o(96079),pl=o(87453),ml=o(34665);const fl={host:"DashboardMobile_host__FXUjc",dashboardPanel:"DashboardMobile_dashboardPanel__lXz07",headerContainer:"DashboardMobile_headerContainer__JAcuY",title:"DashboardMobile_title__UJq7q",modalTitle:"DashboardMobile_modalTitle__yR3Zx",singleButton:"DashboardMobile_singleButton__h-dk5",fieldRowContainer:"DashboardMobile_fieldRowContainer__VvOwp",fieldTypeInput:"DashboardMobile_fieldTypeInput__Qmlee",dashboardCard:"DashboardMobile_dashboardCard__uJUtM",componentCard:"DashboardMobile_componentCard__9UsrE",componentCardv2:"DashboardMobile_componentCardv2__EqNmf",imageCard:"DashboardMobile_imageCard__J6I0d",imageCard_ii:"DashboardMobile_imageCard_ii__jH+mu",searchContainer:"DashboardMobile_searchContainer__nrcHL",searchInput:"DashboardMobile_searchInput__GQHtE",ongoingtx:"DashboardMobile_ongoingtx__tEDSh",dropdownSelectComponent:"DashboardMobile_dropdownSelectComponent__RUoXR",dropdownSelectMenuOverlayList:"DashboardMobile_dropdownSelectMenuOverlayList__T2zDR",dropdownSelectMenuOverlayListItem:"DashboardMobile_dropdownSelectMenuOverlayListItem__twu8t",dropdownInput:"DashboardMobile_dropdownInput__CB8Ta",dropdownClearControlsClassName:"DashboardMobile_dropdownClearControlsClassName__TMP-7",listContainer:"DashboardMobile_listContainer__ASOGR",dropdownListContainer:"DashboardMobile_dropdownListContainer__J4smE",dropDownButtonContainer:"DashboardMobile_dropDownButtonContainer__oeCll",searchResults:"DashboardMobile_searchResults__RB3VY",pageContainer:"DashboardMobile_pageContainer__ep2wY",emulatedFlexGap:"DashboardMobile_emulatedFlexGap__mHKc9",popup:"DashboardMobile_popup__wqxbT",profilepopup:"DashboardMobile_profilepopup__0SibL",userCardContainerTop:"DashboardMobile_userCardContainerTop__bT3XW",userCardInnerContainer:"DashboardMobile_userCardInnerContainer__u0yVs",avatarUrlImg:"DashboardMobile_avatarUrlImg__1MY4w",center:"DashboardMobile_center__wR7QQ",moduleTitle:"DashboardMobile_moduleTitle__itg2E",filtersContainer:"DashboardMobile_filtersContainer__Mz0UE",wallet:"DashboardMobile_wallet__QzTMZ",userPanelRows:"DashboardMobile_userPanelRows__XQVNr",actionsContainer:"DashboardMobile_actionsContainer__65lpT",appsTitle:"DashboardMobile_appsTitle__a80ai",stepTitle:"DashboardMobile_stepTitle__FV3ye",stepSubTitle:"DashboardMobile_stepSubTitle__s2cY7",listContainerAll:"DashboardMobile_listContainerAll__ZrR1O",listButton:"DashboardMobile_listButton__zpevX",logoUrlImgMobile:"DashboardMobile_logoUrlImgMobile__yqITz",button:"DashboardMobile_button__-7QAd"};o(143),o(36832);const _l=o(66918),yl=(0,h.$j)(e=>{const{begunModule:l,allTasks:o,allCompletedTasks:i,allCompletedTasksPaginated:t,companyProcesses:n,allModules:d,components:a,companyData:r,companyUsersArray:s,blueprints:v,payable:u,lastUpdates:c,companyPositionsArray:p,showMessage:m}=e.flowReducer,{user:f,authenticated:_}=e.sessionReducer,{authenticatedUser:y}=e.authReducer;return{begunModule:l,allTasks:o,allCompletedTasks:i,allCompletedTasksPaginated:t,companyProcesses:n,allModules:d,components:a,companyData:r,companyUsersArray:s,user:f,authenticatedUser:y,authenticated:_,blueprints:v,payable:u,lastUpdates:c,companyPositionsArray:p,showMessage:m}},e=>({onSetSelectedProcess:l=>e((0,a.Xu)(l))}))(e=>{var l,o,w,M,S,k,I,N,D,P,A,O,L,z,R,U,F,W,q,B,Y,H,V,j,G,J,K,Q,X,$,ee,le,oe,ie,te,ne,de;(0,ul.z2)();const{authenticated:ue,authenticatedUser:ce,user:pe,companyProcesses:me,allModules:fe,components:_e,companyData:ye,begunModule:he,blueprints:ge,payable:xe,companyUsersArray:Ee,lastUpdates:Ce,allTasks:we,companyPositionsArray:Me,showMessage:Se}=e,[ke,Ze]=(0,t.useState)(!1),[Ie,Ne]=(0,t.useState)({}),[Te,De]=(0,t.useState)(!1),[Pe,Oe]=(0,t.useState)(!1),[ze,Re]=(0,t.useState)(!1),[Ue,Fe]=(0,t.useState)(!1),[We,qe]=(0,t.useState)(),[Be,Ye]=(0,t.useState)(!1),[He,Ve]=(0,t.useState)({}),[je,Ge]=(0,t.useState)(!1),[Je,Ke]=(0,t.useState)({}),[Qe,Xe]=(0,t.useState)(!1),[$e,el]=(0,t.useState)(-1),[ll,ol]=(0,t.useState)([]),[il,tl]=(0,t.useState)(!1),[dl,al]=(0,t.useState)(!1),[yl,gl]=(0,t.useState)(!1),[bl,xl]=(0,t.useState)(!1),[El,Cl]=(0,_.pQ)(),[wl,Ml]=(0,t.useState)(!(null===he||void 0===he||null===(l=he.processModule)||void 0===l||null===(o=l.module)||void 0===o||!o.id)&&(null===pe||void 0===pe||null===(w=pe.positions)||void 0===w||null===(M=w.filter(e=>{var l,o,i,t;return(null===he||void 0===he||null===(l=he.processModule)||void 0===l||null===(o=l.module)||void 0===o||null===(i=o.options)||void 0===i||null===(t=i.processors)||void 0===t?void 0:t.indexOf(e.id))>-1}))||void 0===M?void 0:M.length)>0),Sl=(0,h.I0)(),{paymentID:kl,walletID:Zl}=(0,n.UO)();document.title="Dashboard | ".concat(v.iC," Mobile"),(0,t.useEffect)(()=>(window.addEventListener("scroll",e=>{0==e.currentTarget.scrollY?xl(!1):xl(!0)}),()=>{try{window.removeEventListener("scroll")}catch(e){}}),[]);const Il=(0,t.useCallback)((e,l,o)=>{const t=t=>{var n,d,r,p,f,y,h,b,x,E,C,w,M,S,k,Z;const I=t.steps.filter(e=>{var l,o,i,n,d,a;return void 0==(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.showStepAll)||1==(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.showStepAll)||0==(null===e||void 0===e||null===(i=e.options)||void 0===i?void 0:i.showStepAll)&&(null===e||void 0===e||null===(n=e.options)||void 0===n||null===(d=n.showOnly)||void 0===d?void 0:d.filter(e=>ce.positions.map(e=>e.id).indexOf(e)>-1).length)>0||(null===e||void 0===e||null===(a=e.options)||void 0===a?void 0:a.showStepAuthor)&&(null===ce||void 0===ce?void 0:ce.id)===(null===t||void 0===t?void 0:t.user_id)}).map((e,l)=>(0,i.Z)((0,i.Z)({},e),{},{rank:l+1}));var N,T;(u.h.dispatch((0,a.q4)(t)),u.h.dispatch((0,a.an)([t],v.Qc)),u.h.dispatch((0,a.q4)((0,i.Z)((0,i.Z)({},t),{},{completeSteps:t.steps,steps:I,stepIndex:o?-1:(null===t||void 0===t||null===(n=t.steps)||void 0===n?void 0:n.length)>0?(null===t||void 0===t||null===(d=t.steps[0])||void 0===d||null===(r=d.component_blueprints)||void 0===r?void 0:r.filter(e=>{var l;return 1==(null===(l=e.options)||void 0===l?void 0:l.asModuleList)}).length)>0?1:0:1,module_id:l.id,module:e.find(e=>e.id===l.id),isUpdating:!1,tab:!1}))),Cl({action:_._U.setCurrentStep,value:null===t||void 0===t?void 0:t.steps[o?0:(null===t||void 0===t||null===(p=t.steps)||void 0===p?void 0:p.length)>0?(null===t||void 0===t||null===(f=t.steps[0])||void 0===f||null===(y=f.component_blueprints)||void 0===y?void 0:y.filter(e=>{var l;return 1==(null===(l=e.options)||void 0===l?void 0:l.asModuleList)}).length)>0?1:0:1]}),Cl({action:_._U.setModuleItems,value:null!==(h=null===Ie||void 0===Ie?void 0:Ie.component_items)&&void 0!==h?h:[]}),Cl({action:_._U.setModuleNewStepComponents,value:[]}),Cl({action:_._U.setComponents,value:[]}),(null===he||void 0===he||null===(b=he.processModule)||void 0===b||null===(x=b.steps)||void 0===x?void 0:x.length)>0&&(null===he||void 0===he||null===(E=he.processModule)||void 0===E||null===(C=E.steps)||void 0===C||C.filter(e=>{var l;return null===e||void 0===e||null===(l=e.component_blueprints)||void 0===l?void 0:l.filter(e=>e.selected_fields.filter(e=>e.value=void 0))})),(0,m.vC)(l,v.Qc,v.M4,1,!1).pipe((0,c.q)(1)).subscribe({next:e=>{var o;Ze(!1),l.lastUpdate=0,l.count=null!==(o=null===e||void 0===e?void 0:e.total)&&void 0!==o?o:0,(0,s.OQ)(!0,!1).pipe((0,c.q)(1)).subscribe({complete:()=>{(0,s.ew)().pipe((0,c.q)(1)).subscribe({})}})}}),null===l||void 0===l||null===(w=l.options)||void 0===w||null===(M=w.supporting)||void 0===M||M.filter((e,o)=>{var i,t;(0,m.vC)({id:e,name:null!==(i="".concat(null===fe||void 0===fe||null===(t=fe.find(l=>l.id===e))||void 0===t?void 0:t.name).concat(o))&&void 0!==i?i:"".concat(null===l||void 0===l?void 0:l.name).concat(o)},v.Qc,v.R6,1).pipe((0,c.q)(1)).subscribe({next:i=>{var t,n;Ce.componentsByModule[null!==(t="".concat(null===fe||void 0===fe||null===(n=fe.find(l=>l.id===e))||void 0===n?void 0:n.name).concat(o))&&void 0!==t?t:"".concat(null===l||void 0===l?void 0:l.name).concat(o)]=(0,g.now)()}})}),(null===l||void 0===l||null===(S=l.options)||void 0===S||null===(k=S.positions)||void 0===k?void 0:k.length)>0)&&(0,be.n0)(null===l||void 0===l||null===(N=l.options)||void 0===N?void 0:N.positions,5*(null===l||void 0===l||null===(T=l.options)||void 0===T?void 0:T.positions.length)).pipe((0,c.q)(1)).subscribe({});if(null!==l&&void 0!==l&&null!==(Z=l.options)&&void 0!==Z&&Z.single){const e=localStorage.getItem(l.id);(0,s.DA)(t,e?JSON.parse(e):_e.find(e=>e.module_id===l.id),void 0,Cl,fe),Ne(e?JSON.parse(e):_e.find(e=>e.module_id===l.id))}};me.find(e=>e.id===l.procedure.id)?t(me.find(e=>e.id===l.procedure.id)):(Ze(!0),(0,r.zJ)(l.procedure.id).pipe((0,p.P)()).subscribe({next:e=>{Ze(!1),t(e)},error:e=>{}}))},[he]);(0,t.useEffect)(()=>{Sl((0,a.aV)())},[]),(0,t.useEffect)(()=>{history.pushState(null,null,location.href),window.onpopstate=function(e){history.go(1)},Sl((0,a.tR)(!1)),Sl((0,a.IW)(!1))},[ze]),(0,t.useEffect)(()=>{if(ue){if("trial_ended"!==(null===ye||void 0===ye?void 0:ye.status)&&"inactive"!==(null===ye||void 0===ye?void 0:ye.status)&&(null===fe||void 0===fe?void 0:fe.length)>0){const d=null===fe||void 0===fe?void 0:fe.filter(e=>{var l;return!0===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.asMobileApp)});if(1===(null===d||void 0===d?void 0:d.length)){var e,l;const o=(null===pe||void 0===pe||null===(e=pe.positions)||void 0===e||null===(l=e.filter(e=>{var l,o,i;return(null===(l=d[0])||void 0===l||null===(o=l.options)||void 0===o||null===(i=o.processors)||void 0===i?void 0:i.indexOf(e.id))>-1}))||void 0===l?void 0:l.length)>0;Ml(o),Il(fe,d[0],o)}else if((null===d||void 0===d?void 0:d.length)>0){var o,i;const e=ce.positions.find(e=>"1"===e.standards),l=e&&d.find(l=>l.name===e.name);let a=(null===pe||void 0===pe||null===(o=pe.positions)||void 0===o||null===(i=o.filter(e=>{var l,o,i;return(null===(l=d[0])||void 0===l||null===(o=l.options)||void 0===o||null===(i=o.processors)||void 0===i?void 0:i.indexOf(e.id))>-1}))||void 0===i?void 0:i.length)>0;var t,n;if(l)a=(null===pe||void 0===pe||null===(t=pe.positions)||void 0===t||null===(n=t.filter(e=>{var o,i;return(null===l||void 0===l||null===(o=l.options)||void 0===o||null===(i=o.processors)||void 0===i?void 0:i.indexOf(e.id))>-1}))||void 0===n?void 0:n.length)>0,Il(fe,l,a);else Il(fe,d[0],a);Ml(a),Ge(!0)}}""===(null===pe||void 0===pe?void 0:pe.id)&&(Sl((0,x.ci)()),Sl((0,a.mb)())),"geolocation"in navigator&&navigator.geolocation.getCurrentPosition(function(e){u.h.dispatch((0,a.Rb)({latitude:e.coords.latitude,longitude:e.coords.longitude}))})}},[ue,fe]),(0,t.useEffect)(()=>{fe.length>0&&fe.filter(e=>{var l;return void 0===me.find(l=>{var o;return l.id===(null===e||void 0===e||null===(o=e.procedure)||void 0===o?void 0:o.id)})&&(0,r.zJ)(null===e||void 0===e||null===(l=e.procedure)||void 0===l?void 0:l.id).pipe((0,p.P)()).subscribe({})}),fe.length>0&&fe.filter(e=>{var l;return(b()((0,g.now)()).diff(b()(null!==(l=Ce.componentsByModule[e.name])&&void 0!==l?l:(0,g.now)()),"minutes")>10||void 0===Ce.componentsByModule[e.name]||0===_e.filter(l=>l.module_id===e.id).length)&&(0,m.vC)(e,v.Qc,v.Zp,1,!1).pipe((0,c.q)(1)).subscribe({next:l=>{Ce.componentsByModule[e.name]=(0,g.now)()}})})},[fe]),(0,t.useEffect)(()=>{if(ue&&(null===xe||void 0===xe?void 0:xe.length)>0&&void 0!==Zl&&void 0===kl){xe.find(e=>e.user_id===(null===ce||void 0===ce?void 0:ce.id)&&e.paymentID===Zl)&&(u.h.dispatch((0,a.Wy)(xe.filter(e=>e.paymentID!==Zl))),(0,be.IC)().pipe((0,p.P)()).subscribe({next:e=>{var l;ce.wallet=null===e||void 0===e?void 0:e.wallet,ce.options=null===e||void 0===e?void 0:e.options,ce.departments=null===e||void 0===e?void 0:e.departments,ce.positions=null===e||void 0===e?void 0:e.positions,ce.pinned_modules=null===e||void 0===e?void 0:e.pinned_modules,null===ml.Fc||void 0===ml.Fc||null===(l=ml.Fc.saveUser)||void 0===l||l.call(ml.Fc,ce).then(()=>{})}}),Fe(!1),Re(!1),Xe(!0))}},[Zl,ue]);const Nl=(0,t.useCallback)(e=>{var l,o,n,r,s,v,c;return t.createElement("div",{className:"tabbar-section",style:{display:"inactive"===(null===ye||void 0===ye?void 0:ye.status)?"none":"",zIndex:"99"}},e.children,t.createElement("div",{className:"mobile-nav"},t.createElement(d.Z,{clear:!0,loading:ke,clicked:()=>{var e,l,o;u.h.dispatch((0,a.q4)((0,i.Z)((0,i.Z)({},he.processModule),{},{stepIndex:wl?-1:null!==(e=he.processModule)&&void 0!==e&&null!==(l=e.module)&&void 0!==l&&null!==(o=l.options)&&void 0!==o&&o.single?0:1,isUpdating:!1,tab:!1}))),fe.filter(e=>{var l;return!0===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.asMobileApp)}).length>1&&Ge(!0),Re(!1),Fe(!1)}},t.createElement("div",{style:{color:"var(--app-color-gray-dark)"}},t.createElement(C.G,{icon:E.J9Y,className:"tabbar-icon"}),t.createElement("div",{style:{fontSize:"10px",height:"14px"}},"Home")))),(null===pe||void 0===pe||null===(l=pe.ui_permissions)||void 0===l?void 0:l.find(e=>"view-dashboard-task"===e))&&t.createElement("div",{className:"mobile-nav"},t.createElement(d.Z,{clear:!0,clicked:()=>{Fe(!0),Re(!1)}},t.createElement("div",{style:{color:"var(--app-color-gray-dark)"}},t.createElement(C.G,{icon:E.fT7,className:"tabbar-icon"}),t.createElement("div",{style:{fontSize:"10px",height:"14px"}},"Tasks")))),!(null!==he&&void 0!==he&&null!==(o=he.processModule)&&void 0!==o&&null!==(n=o.module)&&void 0!==n&&null!==(r=n.options)&&void 0!==r&&r.single)&&t.createElement("div",{className:"mobile-nav"},t.createElement(d.Z,{clear:!0,clicked:()=>{u.h.dispatch((0,a.q4)((0,i.Z)((0,i.Z)({},he.processModule),{},{stepIndex:0,isUpdating:!1,tab:!0}))),Oe(!0),Ge(!1),setTimeout(()=>Oe(!1)),Ve({}),Ye(!0),Re(!1),Fe(!1)}},t.createElement("div",{style:{color:"var(--app-color-gray-dark)"}},t.createElement(C.G,{icon:E.Zrf,className:"tabbar-icon"}),t.createElement("br",null),t.createElement("div",{style:{fontSize:"10px",height:"14px"}},null!==(s=null===(v=he.processModule)||void 0===v||null===(c=v.module)||void 0===c?void 0:c.name)&&void 0!==s?s:"Transactions")))),t.createElement("div",{className:"mobile-nav"},t.createElement(d.Z,{clear:!0,clicked:()=>{Re(!0),Fe(!1)}},t.createElement("div",{style:{color:"var(--app-color-gray-dark)"}},t.createElement(C.G,{icon:E.ILF,className:"tabbar-icon"}),t.createElement("div",{style:{fontSize:"10px",height:"14px"}},"Profile")))))},[dl,ke,El,_e]),Tl=(0,t.useCallback)(e=>{var l,o,i,n,a,r,s;const{dark:u=!0}=e,c=()=>{al(!dl)};return t.createElement("div",{className:"navbar-section",style:{backgroundColor:u?null!==ye&&void 0!==ye&&null!==(l=ye.company_standards)&&void 0!==l&&null!==(o=l.themeJ)&&void 0!==o&&o.backgroundColorr?null===ye||void 0===ye||null===(i=ye.company_standards)||void 0===i||null===(n=i.themeJ)||void 0===n?void 0:n.backgroundColor:"var(--app-color-gray-dark)":"white"}},t.createElement("div",{className:"mobile-nav"},t.createElement(d.Z,{style:{marginLeft:"10px",height:"30px"},clear:!0,clicked:()=>{var e,l;Ze(!1),(null===El||void 0===El||null===(e=El.components)||void 0===e?void 0:e.length)>0||(null===El||void 0===El||null===(l=El.newStepComponents)||void 0===l?void 0:l.length)>0?Ke({open:!0,handler:c}):c(),c()}},t.createElement(C.G,{icon:E.Ljc,className:"hamb-icon"}))),t.createElement("div",{className:fl.moduleTitle},null!==ye&&void 0!==ye&&null!==(a=ye.company_standards)&&void 0!==a&&null!==(r=a.themeJ)&&void 0!==r&&r.title?t.createElement(t.Fragment,null,null!==ye&&void 0!==ye&&ye.logo?t.createElement("img",{alt:"lg",src:null===ye||void 0===ye?void 0:ye.logo,className:fl.logoUrlImgMobile}):t.createElement(t.Fragment,null,t.createElement("div",{style:{width:"100%",justifyContent:"center",display:"flex"}},(0,v.lh)("16px",u?"white":"var(--app-color-gray-dark)","bold")),t.createElement("div",{style:{width:"100%",fontSize:"9px",fontWeight:"bold",color:u?"white":"black",justifyContent:"center",display:"flex"}},"".concat((null!==(s=ye.display_name)&&void 0!==s?s:"").toUpperCase()).concat(wl?"*":"")," "))):t.createElement("div",{style:{width:"100%",justifyContent:"center",display:"flex"}},(0,v.lh)("18px",u?"white":"var(--app-color-gray-dark)","bold"))),t.createElement("div",{className:fl.userCardContainerTop},t.createElement(pl.ZP,null,t.createElement(cl.T$,null))),t.createElement("div",{className:"mobile-navbar ".concat(dl?"open-nav":""),style:{width:"100%",backgroundColor:"transparent"}},t.createElement("div",{className:"mobile-navbar ".concat(dl?"open-nav":""),style:{height:"inherit",width:"90%",boxShadow:"0px 2px 20px 5px rgba(0, 0, 0, 0.1)"}},t.createElement("div",{onClick:c,className:"mobile-navbar-close"},t.createElement(C.G,{icon:E.QQm,className:"hamb-icon",style:{color:"var(--app-color-gray)",width:"25px",height:"25px"}})),t.createElement("ul",{className:"mobile-navbar-links"},fe.filter(e=>{var l;return!0===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.asMobileApp)}).map(e=>{var l;return t.createElement("li",{key:e.id},t.createElement("a",{style:{fontFamily:"Montserrat, serif"},onClick:()=>{var l,o;const i=(null===pe||void 0===pe||null===(l=pe.positions)||void 0===l||null===(o=l.filter(l=>{var o,i;return(null===e||void 0===e||null===(o=e.options)||void 0===o||null===(i=o.processors)||void 0===i?void 0:i.indexOf(l.id))>-1}))||void 0===o?void 0:o.length)>0;Ml(i),Il(fe,e,i),c(),fe.filter(e=>{var l;return!0===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.asMobileApp)}).length>1&&Ge(!0),Re(!1),Fe(!1)}},null===e||void 0===e||null===(l=e.name)||void 0===l?void 0:l.toUpperCase()))}),t.createElement("li",null,t.createElement("a",{style:{fontFamily:"Montserrat, serif"},onClick:()=>{Fe(!1),Re(!0),c()}},"PROFILE")),(null===fe||void 0===fe?void 0:fe.find(e=>{var l;return null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.credits}))&&t.createElement("li",null,t.createElement("a",{style:{fontFamily:"Montserrat, serif"},onClick:()=>{(0,be.IC)().pipe((0,p.P)()).subscribe({next:e=>{var l;ce.wallet=null===e||void 0===e?void 0:e.wallet,ce.options=null===e||void 0===e?void 0:e.options,ce.departments=null===e||void 0===e?void 0:e.departments,ce.positions=null===e||void 0===e?void 0:e.positions,ce.pinned_modules=null===e||void 0===e?void 0:e.pinned_modules,null===ml.Fc||void 0===ml.Fc||null===(l=ml.Fc.saveUser)||void 0===l||l.call(ml.Fc,ce).then(()=>{})}}),Fe(!1),Re(!1),Xe(!0),c()}},"WALLET")),t.createElement("li",null,t.createElement("a",{style:{fontFamily:"Montserrat, serif"},onClick:()=>{De(!0),Re(!1),c()}},"LOGOUT"))))))},[dl,ke,El,_e]),Dl=(0,t.memo)(()=>{var e,l,o;return t.createElement("div",{style:{padding:"20px 5px"}},t.createElement("div",{style:{display:"flex",textAlign:"left",borderBottom:"1px solid black"}},t.createElement("p",{className:fl.stepTitle},"MY TASKS"),t.createElement(d.Z,{clear:!0,clicked:()=>{Ze(!0),(0,Le.km)(pe.id,!0).pipe((0,c.q)(1)).subscribe({complete:()=>Ze(!1)})},icon:t.createElement("img",{src:Z.Fd})}),t.createElement(d.Z,{clear:!0,style:{display:null!==pe&&void 0!==pe&&null!==(e=pe.ui_permissions)&&void 0!==e&&e.find(e=>"view-dashboard-task"===e)?"":"none"},clicked:()=>{qe(!0)},icon:t.createElement("img",{src:Z.IH})})),t.createElement("p",{className:fl.stepSubTitle},"Your tasks related to ".concat(null===he||void 0===he||null===(l=he.processModule)||void 0===l||null===(o=l.module)||void 0===o?void 0:o.name)),t.createElement(T.default,{title:"",card:!0,className:fl.listContainer,isReport:!1,"app-variant-is-mobile":"true",columns:["Name","Status","Due"],list:we.filter(e=>{var l,o,i;return"Done"!==e.status&&(null===e||void 0===e||null===(l=e.add_info)||void 0===l?void 0:l.module_id)===(null===he||void 0===he||null===(o=he.processModule)||void 0===o||null===(i=o.module)||void 0===i?void 0:i.id)}).map(e=>{var l,o,i,t,n,d,a,r,s,v;return{Name:e.name,Description:e.description,Status:null!==(l=e.status)&&void 0!==l?l:"New",Due:b()(null===(o=e.add_info)||void 0===o?void 0:o.end).format("DD MMMM h:mm a"),"Created By":"".concat(null!==(i=null===(t=e.creator)||void 0===t?void 0:t.first_name)&&void 0!==i?i:""," ").concat(null!==(n=null===(d=e.creator)||void 0===d?void 0:d.last_name)&&void 0!==n?n:""),"Assigned To":"".concat(null!==(a=null===(r=e.assignee)||void 0===r?void 0:r.first_name)&&void 0!==a?a:""," ").concat(null!==(s=null===(v=e.assignee)||void 0===v?void 0:v.last_name)&&void 0!==s?s:""),task:e}}),onListItemClick:e=>{qe(e.task)}}))});return t.createElement(t.Fragment,null,t.createElement("div",{className:fl.center,style:{flexDirection:"column",alignItems:"center",paddingTop:bl?"60px":"0px"}},t.createElement("div",{style:{position:bl?"fixed":"",top:"0",zIndex:"20",width:"100%",display:null!==Se&&void 0!==Se&&Se.show?"none":""}},(e=>{const l=_l.sortWith([_l.descend(_l.prop("created_date"))])(_e.filter(l=>l.module_id===(null===e||void 0===e?void 0:e.id))).filter(e=>{var l;return!("Closed"===(null===e||void 0===e?void 0:e.status)||"Cancelled"===(null===e||void 0===e?void 0:e.status)||"Expired"===(null===e||void 0===e?void 0:e.status)||(null===e||void 0===e||!e.payments)&&(null===e||void 0===e||null===(l=e.created_by)||void 0===l?void 0:l.id)!==(null===ce||void 0===ce?void 0:ce.id)&&null!==e&&void 0!==e&&e.component_fields.find(e=>"Payments"===e.data_type_name&&"Credit Card"===e.value))}).filter(l=>{var o,i,t,n;return"None"===(null===l||void 0===l?void 0:l.status)||!((null===(o=e.options)||void 0===o?void 0:o.activeFor)>0&&b()((0,g.now)()).diff(b()(l.created_date),"minutes")>+(null===(i=e.options)||void 0===i?void 0:i.activeFor))||!("New"===l.status||"Reopen"===l.status||"Unassigned"===l.status)||(null===(t=l.assigned_to)||void 0===t?void 0:t.id)||(null===l||void 0===l||null===(n=l.payments)||void 0===n?void 0:n.id)});return 1==l.length&&l.map((l,o)=>t.createElement(d.Z,{key:o,className:fl.button,title:null!==l&&void 0!==l&&l.status?"None"===(null===l||void 0===l?void 0:l.status)?l.title:"".concat(l.title," (").concat(null===l||void 0===l?void 0:l.status,")"):l.title,clicked:()=>{hl(me,Ne,Ye,ye,l,Cl,ce,he,pe,fe,Oe,Ee,e)},titleStyle:{fontWeight:"normal",fontSize:"14px",color:"white"}}))})(null!==(S=null===he||void 0===he||null===(k=he.processModule)||void 0===k?void 0:k.module)&&void 0!==S?S:null===fe||void 0===fe?void 0:fe.find(e=>{var l;return!0===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.asMobileApp)})),void 0==(null===he||void 0===he||null===(I=he.processModule)||void 0===I?void 0:I.stepIndex)||(null===he||void 0===he||null===(N=he.processModule)||void 0===N?void 0:N.stepIndex)<2?fe.length>0&&t.createElement(Tl,{dark:!1}):t.createElement("div",null),0!==(null===he||void 0===he||null===(D=he.processModule)||void 0===D?void 0:D.stepIndex)&&0===(null===fe||void 0===fe?void 0:fe.length)&&t.createElement("div",{style:{display:"flex",margin:"auto",width:"100%",height:"500px",alignContent:"center",alignItems:"center",justifyItems:"center",justifyContent:"center"}},(0,v.lh)("30px"))),"inactive"===(null===ye||void 0===ye?void 0:ye.status)&&t.createElement("div",{style:{display:"flex",margin:"auto",width:"100%",alignContent:"center",alignItems:"center",justifyItems:"center",justifyContent:"center"}},"Your account is inactive and services are temporarily not available. Please check with your administrator"),(void 0==(null===he||void 0===he||null===(P=he.processModule)||void 0===P?void 0:P.stepIndex)||(null===he||void 0===he||null===(A=he.processModule)||void 0===A?void 0:A.stepIndex)<2)&&fe.length>0&&!ze&&!Ue&&je&&"inactive"!==(null===ye||void 0===ye?void 0:ye.status)&&(()=>{const e=fe.length>0?(()=>{const e=fe.find(e=>{var l;return 1==(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.asGraphical)});return void 0===e?[]:_l.sortWith([_l.descend(_l.prop("created_date"))])(_e.filter(l=>l.module_id===e.id&&"Hide"!==l.status)).filter(e=>{var l;return(null===e||void 0===e||null===(l=e.component_fields)||void 0===l?void 0:l.filter(e=>{var l,o,i,t,n;return"Status"===e.data_type_name&&!(e.value===(null!==(l=null===(o=he.processModule)||void 0===o||null===(i=o.module)||void 0===i||null===(t=i.options)||void 0===t?void 0:t.lock)&&void 0!==l?l:null===(n=ye.misc_info)||void 0===n?void 0:n.lock)||"Closed"===e.value||"Cancelled"===e.value)}).length)>0}).map((e,l)=>{var o,i,n,d;const a=null===e||void 0===e?void 0:e.component_fields.find(e=>"Link"===e.data_type_name);return t.createElement("div",{key:l,className:fl.imageCard_ii},a&&((null===(o="".concat(null===a||void 0===a?void 0:a.value))||void 0===o?void 0:o.includes("jpg"))||(null===(i="".concat(null===a||void 0===a?void 0:a.value))||void 0===i?void 0:i.includes("jpeg"))||(null===(n="".concat(null===a||void 0===a?void 0:a.value))||void 0===n?void 0:n.includes("png"))||(null===a||void 0===a||null===(d=a.options)||void 0===d?void 0:d.image))&&t.createElement("img",{alt:"lg",src:null===a||void 0===a?void 0:a.value,style:{objectFit:"fill",hheight:"160px"}}))})})():[];return t.createElement("div",{className:fl.center,style:{display:(null===e||void 0===e?void 0:e.length)>0?"":"none",width:"100%",minWidth:"360px",backgroundColor:"var(--app-color-gray-lightest)",flexDirection:"column",marginTop:"5px"}},t.createElement(ve.tq,{slidesPerView:1,centeredSlides:!0,spaceBetween:6,initialSlide:0,pagination:{clickable:!0,dynamicBullets:!0},modules:[se.pt,se.tl],className:"mySwiper",loop:!0},(null===e||void 0===e?void 0:e.length)>0&&e.map((e,l)=>t.createElement(ve.o5,{key:l,className:fl.swiperslide},e))))})(null!==(O=null===he||void 0===he||null===(L=he.processModule)||void 0===L?void 0:L.module)&&void 0!==O||(null===fe||void 0===fe||fe.find(e=>{var l;return!0===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.asMobileApp)}))),(void 0==(null===he||void 0===he||null===(z=he.processModule)||void 0===z?void 0:z.stepIndex)||(null===he||void 0===he||null===(R=he.processModule)||void 0===R?void 0:R.stepIndex)<2)&&fe.length>0&&!ze&&!Ue&&je&&"inactive"!==(null===ye||void 0===ye?void 0:ye.status)&&(e=>{const l=e?(e=>{const l=_l.sortWith([_l.descend(_l.prop("created_date"))])(_e.filter(l=>l.module_id===e.id)).filter(e=>"None"===(null===e||void 0===e?void 0:e.status)).filter(l=>{var o,i,t,n;return!((null===(o=e.options)||void 0===o?void 0:o.activeFor)>0&&b()((0,g.now)()).diff(b()(l.created_date),"minutes")>+(null===(i=e.options)||void 0===i?void 0:i.activeFor))||!("New"===l.status||"Unassigned"===l.status)||(null===(t=l.assigned_to)||void 0===t?void 0:t.id)||(null===l||void 0===l||null===(n=l.payments)||void 0===n?void 0:n.id)});return l.map((o,i)=>{var n,d,a;const r=null===o||void 0===o?void 0:o.component_fields.find(e=>"Value Button"===e.data_type_name&&(null===e||void 0===e?void 0:e.value)),s=null===(n=he.processModule.completeSteps[0].component_blueprints)||void 0===n||null===(d=n.find(e=>{var l,o,i;return 1==e.options.asModuleList&&(ce.positions.filter(l=>{var o,i;return null===(o=e.options)||void 0===o||null===(i=o.showOnly)||void 0===i?void 0:i.includes(l.id)}).length>0||0==(null===(l=e.options)||void 0===l||null===(o=l.showOnly)||void 0===o?void 0:o.length)||void 0===(null===(i=e.options)||void 0===i?void 0:i.showOnly))}))||void 0===d||null===(a=d.selected_fields)||void 0===a?void 0:a.map(e=>e.field_name);return t.createElement("div",{key:i,className:fl.componentCard,style:{display:"flex",border:"0.6px solid var(--app-color-gray-lighter)",borderRadius:l.length>0?"":"0px",fontWeight:"normal",alignItems:"flex-start",padding:"20px 20px",height:"160px",userSelect:"none",margin:l.length>2?"":"0 2px"},"app-color-variant":"".concat(i%5+1),onClick:()=>{hl(me,Ne,Ye,ye,o,Cl,ce,he,pe,fe,Oe,Ee,e)}},t.createElement("div",{style:{width:r?"80%":"100%",fontFamily:"Montserrat, serif",textAlign:"left"}},s.map((e,l)=>{const i=null===o||void 0===o?void 0:o.component_fields.find(l=>l.field_name===e);var n;return"Positions"===(null===i||void 0===i?void 0:i.data_type_name)?t.createElement("div",{key:l,style:{fontSize:0==l?"15px":"10px",fontWeight:0==l?"bold":""}},"".concat(null===(n=Me.find(e=>(null===e||void 0===e?void 0:e.value)===(null===i||void 0===i?void 0:i.value)))||void 0===n?void 0:n.label)):t.createElement("div",{key:l,style:{width:0==l?"90%":"100%",fontSize:0==l?"14px":"10px",fontWeight:0==l?"bold":"",margin:"2px 0",fontFamily:"Montserrat, serif"}},0==l?null===i||void 0===i?void 0:i.value.toUpperCase():null===i||void 0===i?void 0:i.value)}),t.createElement("div",{style:{fontSize:"10px",fontWeight:"bold",width:"100%"}},null===e||void 0===e?void 0:e.name)))})})(e):[],o=e?(e=>{const l=_l.sortWith([_l.descend(_l.prop("created_date"))])(_e.filter(l=>l.module_id===e.id)).filter(e=>!("Closed"===(null===e||void 0===e?void 0:e.status)||"Cancelled"===(null===e||void 0===e?void 0:e.status)||"Expired"===(null===e||void 0===e?void 0:e.status)||"None"===(null===e||void 0===e?void 0:e.status))).filter(l=>{var o,i,t,n;return!((null===(o=e.options)||void 0===o?void 0:o.activeFor)>0&&b()((0,g.now)()).diff(b()(l.created_date),"minutes")>+(null===(i=e.options)||void 0===i?void 0:i.activeFor))||!("New"===l.status||"Reopen"===l.status||"Unassigned"===l.status)||(null===(t=l.assigned_to)||void 0===t?void 0:t.id)||(null===l||void 0===l||null===(n=l.payments)||void 0===n?void 0:n.id)});return l.map((o,i)=>t.createElement("div",{key:i,className:fl.componentCard,style:{display:"flex",border:"0.6px solid var(--app-color-gray-lighter)",borderRadius:l.length>0?"":"0px",fontWeight:"normal",padding:"20px 10px",height:"160px",userSelect:"none",margin:l.length>2?"":"0 2px"},"app-color-variant":"".concat(i%5+1),onClick:()=>{hl(me,Ne,Ye,ye,o,Cl,ce,he,pe,fe,Oe,Ee,e)}},t.createElement("div",{style:{width:"100%",fontFamily:"var(--app-text-mobile-font)",textAlign:"left"}},t.createElement("div",{style:{width:"90%",fontSize:"14px",fontWeight:"bold"}},o.title.toUpperCase()),t.createElement("div",{style:{width:"100%",fontSize:"10px",fontWeight:"normal"}},"".concat(o.status)),t.createElement("div",{style:{fontSize:"10px",fontWeight:"bold",width:"100%"}},null===e||void 0===e?void 0:e.name))))})(e):[];return t.createElement("div",{className:fl.center,style:{display:(null===l||void 0===l?void 0:l.length)>1||(null===o||void 0===o?void 0:o.length)>1?"":"none",width:"100%",minWidth:"360px",backgroundColor:"var(--app-color-gray-lightest)",flexDirection:"column",marginTop:"5px"}},t.createElement(ve.tq,{slidesPerView:2,centeredSlides:!0,spaceBetween:6,initialSlide:1==(null===o||void 0===o?void 0:o.length)?0:1,pagination:{clickable:!0,dynamicBullets:!0},modules:[se.pt,se.tl],className:"mySwiper",loop:!0},(null===l||void 0===l?void 0:l.length)>0&&l.map((e,l)=>t.createElement(ve.o5,{key:l,className:fl.swiperslide},e)),(null===o||void 0===o?void 0:o.length)>0&&o.map((e,l)=>t.createElement(ve.o5,{key:l,className:fl.swiperslide},e)),(null===l||void 0===l?void 0:l.length)<3&&(null===o||void 0===o?void 0:o.length)<3&&t.createElement(ve.o5,{className:fl.swiperslide},t.createElement("div",{className:fl.componentCard,style:{display:"flex",alignItems:"flex-start",padding:"20px 20px",height:"160px",userSelect:"none"},"app-color-variant":"5"},t.createElement("div",{style:{fontSize:"15px",fontWeight:"bold",width:"100%"}},"CREATE YOUR NEXT TRANSACTION")))))})(null!==(U=null===he||void 0===he||null===(F=he.processModule)||void 0===F?void 0:F.module)&&void 0!==U?U:null===fe||void 0===fe?void 0:fe.find(e=>{var l;return!0===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.asMobileApp)})),(null===he||void 0===he||null===(W=he.processModule)||void 0===W?void 0:W.stepIndex)<2&&je&&!ze&&!Ue&&"inactive"!==(null===ye||void 0===ye?void 0:ye.status)&&fe.filter(e=>{var l;return!0===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.asMobileApp)}).length<3&&(()=>{const e=fe.filter(e=>{var l;return!0===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.asMobileApp)});return t.createElement("div",{style:{width:"100%",minWidth:"360px",backgroundColor:"var(--app-color-gray-lightest)",flexDirection:"column",marginTop:"10px"}},t.createElement(ve.tq,{slidesPerView:2,spaceBetween:0,initialSlide:0,pagination:{clickable:!0,dynamicBullets:!0},modules:[se.pt,se.tl],className:"mySwiper",loop:!0},e.map((e,l)=>{var o;return t.createElement(ve.o5,{key:l},t.createElement("div",{style:{padding:"10px",userSelect:"none"}},t.createElement(Ae.Z,{withBorder:!0,photo:null===(o=e.options)||void 0===o?void 0:o.background,height:"22vh",width:y.tq?"20vh":"",email:null===e||void 0===e?void 0:e.name,position:"",cardClicked:()=>{var l,o;const i=(null===pe||void 0===pe||null===(l=pe.positions)||void 0===l||null===(o=l.filter(l=>{var o,i;return(null===e||void 0===e||null===(o=e.options)||void 0===o||null===(i=o.processors)||void 0===i?void 0:i.indexOf(l.id))>-1}))||void 0===o?void 0:o.length)>0;Ml(i),Il(fe,e,i),Ge(!0),Re(!1),Fe(!1)}})))})))})(null!==(q=null===he||void 0===he||null===(B=he.processModule)||void 0===B?void 0:B.module)&&void 0!==q||(null===fe||void 0===fe||fe.find(e=>{var l;return!0===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.asMobileApp)}))),!(ze||Ue)&&t.createElement("div",{className:fl.host,style:{display:"inactive"===ye.status?"none":"",width:"100%"}},t.createElement("div",{className:fl.dashboardPanel,style:{display:1!=(null===he||void 0===he||null===(Y=he.processModule)||void 0===Y||null===(H=Y.module)||void 0===H||null===(V=H.options)||void 0===V?void 0:V.readOnly)||"manager"===ce.user_type||"admin"===ce.user_type?"flex":"none",margin:"0px 0 0 0"}},(null===he||void 0===he||null===(j=he.processModule)||void 0===j?void 0:j.stepIndex)<2&&t.createElement("p",{style:{fontFamily:"Montserrat, serif",fontSize:"24px",width:"100%",textAlign:"left",padding:"0 10px 5px 20px",borderBottom:"1px solid gray",marginBottom:"60px"}},null===he||void 0===he||null===(G=he.processModule.module)||void 0===G||null===(J=G.name)||void 0===J?void 0:J.toUpperCase()),(null===he||void 0===he||null===(K=he.processModule)||void 0===K||null===(Q=K.steps)||void 0===Q?void 0:Q.length)>0&&ge.length>0&&!Pe?t.createElement(rl,{isProcessorOnly:wl,paymentID:kl,navigateTo:He,selectedComponent:null!==Ie&&void 0!==Ie?Ie:{},setSelectedComponent:Ne,selectedProcess:he.processModule,onCancel:()=>{Ye(!1),Oe(!0),setTimeout(()=>Oe(!1))}}):t.createElement(f.$j,{type:"BallTriangle",color:"black",height:40,width:"40px"}))),ze&&t.createElement("div",{style:{width:"100%",padding:"0 20px"}},t.createElement(sl.default,null)),Ue&&t.createElement("div",{style:{width:"100%",padding:"0 10px"}},t.createElement(Dl,null)),(void 0==(null===he||void 0===he||null===(X=he.processModule)||void 0===X?void 0:X.stepIndex)||(null===he||void 0===he||null===($=he.processModule)||void 0===$?void 0:$.stepIndex)<2)&&fe.length>0&&t.createElement("div",{style:{display:"flex",position:"fixed",bottom:"0",width:"100%"}},t.createElement(Nl,null)),Qe&&t.createElement(f.U7,{hasCloseIcon:!0,isOpen:Qe,onClose:()=>{Xe(!1),el(-1)},backdropColor:!0,blured:!1,scrollable:!0,shadowedContainerStyle:{width:"100%"}},t.createElement("div",{className:fl.userPanelRows,style:{height:"auto",minHeight:"540px",marginTop:"20px",display:$e>0?"none":""}},t.createElement(sl.LabeledContainer,{label:"BILLING & PAYMENTS"}),t.createElement("div",{style:{borderBottom:"1px solid black",margin:"10px"}}),t.createElement("div",{className:fl.wallet},t.createElement("div",{style:{color:"white",fontSize:"14px"}},"Reward Points:"),t.createElement("div",{style:{color:"white",fontSize:"20px",fontWeight:"bold",margin:"5px 0 20px"}},null!==(ee=null===pe||void 0===pe||null===(le=pe.options)||void 0===le||null===(oe=le.points)||void 0===oe?void 0:oe.toFixed(2))&&void 0!==ee?ee:"0.00"," Pts"),t.createElement("div",{style:{color:"white",fontSize:"14px"}},"Payments Wallet:"),t.createElement("div",{style:{color:"white",fontSize:"20px",fontWeight:"bold",margin:"5px 0 80px"}},"Php ",null!==(ie=null===ce||void 0===ce||null===(te=ce.wallet)||void 0===te?void 0:te.toFixed(2))&&void 0!==ie?ie:"0.00"),t.createElement("div",{className:fl.actionsContainer},t.createElement(d.Z,{clear:!0,title:"Top Up",clicked:()=>el(0),style:{backgroundColor:"var(--app-color-blue)",color:"white",width:"140px",display:$e>-1?"none":""}})),t.createElement("div",{style:{width:"inherit",display:-1===$e?"none":""}},t.createElement("div",{style:{color:"white"},onClick:()=>el(-1)},"Select your denomination:"),t.createElement(d.Z,{light:!0,title:"Php 500.00",clicked:()=>el(500),style:{width:"100%"}}),t.createElement(d.Z,{light:!0,title:"Php 1000.00",clicked:()=>el(1e3),style:{width:"100%"}}),t.createElement(d.Z,{light:!0,title:"Php 2000.00",clicked:()=>el(2e3),style:{width:"100%"}}),t.createElement(d.Z,{light:!0,title:"Php 3000.00",clicked:()=>el(3e3),style:{width:"100%"}}))),t.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},t.createElement(d.Z,{loading:ke,light:!0,titleStyle:{fontWeight:"normal"},title:il?"Hide":"Show Recent Payments",style:{marginRight:"40px"},clicked:()=>{il?tl(!1):(Ze(!0),(0,re.GP)().pipe((0,p.P)()).subscribe({next:e=>{Ze(!1),tl(!0),ol(e.data)},error:()=>{}}))}})),t.createElement("div",{style:{display:il?"":"none",padding:"20px 0px",fontFamily:"var(--app-text-mobile-font)"}},t.createElement("p",{style:{fontFamily:"var(--app-text-mobile-font)",fontWeight:"bold"}},"Recent Payments:"),t.createElement("br",null),t.createElement("br",null),t.createElement(T.default,{title:"",card:!0,className:fl.listContainer,isReport:!1,"app-variant-is-mobile":"true",columns:["Date","ID","Source","Amount"],list:ll.map(e=>{var l,o;return{Date:"".concat(b()(e.starts_at).format("YY MMM DD h:mm a")),ID:"".concat(null===(l=e.stripe_id)||void 0===l?void 0:l.substring(0,15)),Source:"".concat(e.stripe_status),Amount:"".concat(null===(o=+e.stripe_price)||void 0===o?void 0:o.toFixed(2))}})}))),$e>0?t.createElement(ae.default,{label:" ",withBack:!1,paymentPath:"wallet",onClose:()=>Xe(!1),companyData:ye,subscriptionInfo:{user_id:ce.id,ref:ce.id,plan_price:$e,currency:"PHP",description:"Credits",plan:"Wallet",total:$e,billable_users:[pe],duration:0,dlabel:"Flowhero",id:(0,v.mR)()},onError:()=>Xe(!1)}):t.createElement(t.Fragment,null,t.createElement("p",{style:{fontSize:"10px"}},""!==vl.lw?"Payments by":""),t.createElement("img",{src:"https://files.readme.io/7586db8-small-paymongo_api_white.png",style:{backgroundColor:"black",height:"30px",width:"140px"}}))),We&&t.createElement(nl,{modalVisible:We,heading:"Task for ".concat(null===he||void 0===he||null===(ne=he.processModule)||void 0===ne||null===(de=ne.module)||void 0===de?void 0:de.name),task:!0===We?{}:We,isProcess:!0,blured:!0,shadowedContainerStyle:{width:"100%"},onClose:()=>qe(!1),isEdit:!0!==We,labels:{valueL:"Value"}}),Te&&t.createElement(f.P9,{openModal:Te,setOpenModal:De,slug:null===ye||void 0===ye?void 0:ye.slug})))}),hl=(e,l,o,t,n,d,r,s,c,m,f,y,h)=>{(()=>{var g,b,x,E,C,w,M,S,k,Z,I,N,T,D,P,A,O,L,z,R,U,F,W,q,B,Y,H,V,j,G;const J=e.find(e=>e.id===h.procedure.id);l(n),o(!0),t.start=!0;let K=[];(null===J||void 0===J||null===(g=J.steps)||void 0===g?void 0:g.length)>0&&(null===J||void 0===J||null===(b=J.steps)||void 0===b||b.filter(e=>{var l;return null===e||void 0===e||null===(l=e.component_blueprints)||void 0===l?void 0:l.filter(e=>e.selected_fields.filter(e=>e.value=void 0))})),_l.uniqWith(_l.eqProps("group"))(null===n||void 0===n?void 0:n.component_fields).map(e=>{K=[...K,{id:e.component_blueprint_id,temp_id:e.id,selected_fields:_l.filter(_l.propEq("group",e.group))(null===n||void 0===n?void 0:n.component_fields)}]}),J.steps.filter(e=>{e.component_blueprints.filter(e=>{e.selected_fields.filter(e=>{var l;const o=null===n||void 0===n||null===(l=n.component_fields)||void 0===l?void 0:l.find(l=>l.field_name===e.field_name);if(void 0!=o)e.value=o.value,e.group=o.group;else if("Record"===e.data_type_name){var i;const l=null===n||void 0===n||null===(i=n.component_fields)||void 0===i?void 0:i.find(l=>l.field_name===e.options.name);void 0!=l&&(e.value=l.value,e.group=l.group)}})})}),d({action:_._U.setComponents,value:K}),d({action:_._U.setModuleItems,value:JSON.parse(JSON.stringify(n.component_items))});const Q=J.steps.filter(e=>{var l,o,i,t,n,d;return void 0==(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.showStepAll)||1==(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.showStepAll)||0==(null===e||void 0===e||null===(i=e.options)||void 0===i?void 0:i.showStepAll)&&(null===e||void 0===e||null===(t=e.options)||void 0===t||null===(n=t.showOnly)||void 0===n?void 0:n.filter(e=>r.positions.map(e=>e.id).indexOf(e)>-1).length)>0||(null===e||void 0===e||null===(d=e.options)||void 0===d?void 0:d.showStepAuthor)&&(null===r||void 0===r?void 0:r.id)===(null===J||void 0===J?void 0:J.user_id)}).map((e,l)=>(0,i.Z)((0,i.Z)({},e),{},{rank:l+1})),X=(null===s||void 0===s||null===(x=s.processModule)||void 0===x||null===(E=x.steps)||void 0===E?void 0:E.length)>0?null===s||void 0===s||null===(C=s.processModule)||void 0===C||null===(w=C.steps)||void 0===w||null===(M=w.find(e=>(null===e||void 0===e?void 0:e.component_blueprints.filter(e=>e.selected_fields.filter(e=>"Status"===e.data_type_name).length>0).length)>0))||void 0===M||null===(S=M.component_blueprints)||void 0===S||null===(k=S.find(e=>e.selected_fields.filter(e=>"Status"===e.data_type_name).length>0))||void 0===k||null===(Z=k.options)||void 0===Z?void 0:Z.showOnly:[],$=(null===s||void 0===s||null===(I=s.processModule)||void 0===I||null===(N=I.steps)||void 0===N?void 0:N.length)>0?null===s||void 0===s||null===(T=s.processModule)||void 0===T||null===(D=T.steps)||void 0===D||null===(P=D.find(e=>(null===e||void 0===e?void 0:e.component_blueprints.filter(e=>e.selected_fields.filter(e=>"Action Button"===e.data_type_name).length>0).length)>0))||void 0===P||null===(A=P.component_blueprints.find(e=>{var l;return(null===(l=e.selected_fields.filter(e=>"Action Button"===e.data_type_name))||void 0===l?void 0:l.length)>0}))||void 0===A||null===(O=A.options)||void 0===O?void 0:O.showOnly:[],ee=void 0===n.status&&((null===c||void 0===c?void 0:c.id)===(null===J||void 0===J?void 0:J.user_id)||(null===X||void 0===X?void 0:X.filter(e=>{var l;return(null===r||void 0===r||null===(l=r.positions)||void 0===l?void 0:l.map(e=>e.id).indexOf(e))>-1}).length)>0)||(void 0===n.status||"New"===n.status||"None"===n.status)&&(null===n||void 0===n||null===(L=n.created_by)||void 0===L?void 0:L.id)===(null===r||void 0===r?void 0:r.id)||void 0!==n.status&&!("Closed"===n.status||n.status===(null!==(z=null===(R=s.processModule)||void 0===R||null===(U=R.module)||void 0===U||null===(F=U.options)||void 0===F?void 0:F.lock)&&void 0!==z?z:null===t||void 0===t||null===(W=t.misc_info)||void 0===W?void 0:W.lock))&&(null===X||void 0===X?void 0:X.filter(e=>{var l;return(null===r||void 0===r||null===(l=r.positions)||void 0===l?void 0:l.map(e=>e.id).indexOf(e))>-1}).length)>0&&(1!=(null===m||void 0===m||null===(q=m.find(e=>e.id===n.module_id))||void 0===q||null===(B=q.options)||void 0===B?void 0:B.strict)||(null===n||void 0===n||null===(Y=n.created_by)||void 0===Y?void 0:Y.id)!==(null===c||void 0===c?void 0:c.id))||!1===(null===n||void 0===n?void 0:n.is_complete)&&(null===n||void 0===n||null===(H=n.created_by)||void 0===H?void 0:H.id)===(null===c||void 0===c?void 0:c.id),le=(0,v.cQ)(n.status,$,n,c,s,t),oe=null!==(V=null===n||void 0===n||null===(j=n.component_fields.find(e=>"Action Button"===e.data_type_name))||void 0===j?void 0:j.value)&&void 0!==V?V:"";var ie,te,ne;(u.h.dispatch((0,a.q4)((0,i.Z)((0,i.Z)({},J),{},{completeSteps:J.steps,steps:Q,stepIndex:1==ee&&n.created_by.id===r.id&&oe||(!ee||n.created_by.id!==r.id&&J.user_id!==r.id)&&(!le||oe!==r.id&&J.user_id!==r.id)?0:1,canEdit:!(1==ee&&n.created_by.id===r.id&&oe||(!ee||n.created_by.id!==r.id&&J.user_id!==r.id)&&(!le||oe!==r.id&&J.user_id!==r.id)),status:n.status,back_array:Q.length>0?[Q[0].id]:[],module_id:n.module_id,module:null===m||void 0===m?void 0:m.find(e=>e.id===n.module_id),isUpdating:!0,selectedComponent:n,showDetail:!0}))),f(!0),null!==n&&void 0!==n&&null!==(G=n.assigned_to)&&void 0!==G&&G.id&&!y.find(e=>{var l;return e.id===(null===n||void 0===n||null===(l=n.assigned_to)||void 0===l?void 0:l.id)}))?(0,be.VG)(y.find(e=>{var l;return e.id===(null===(l=n.created_by)||void 0===l?void 0:l.id)})?[null===n||void 0===n||null===(ie=n.assigned_to)||void 0===ie?void 0:ie.id]:[null===n||void 0===n||null===(te=n.assigned_to)||void 0===te?void 0:te.id,null===n||void 0===n||null===(ne=n.created_by)||void 0===ne?void 0:ne.id]).pipe((0,p.P)()).subscribe({next:e=>{u.h.dispatch((0,a.NY)(y.concat(e))),setTimeout(()=>{f(!1)})}}):setTimeout(()=>{f(!1)})})()}},51330:(e,l,o)=>{"use strict";o.d(l,{Z:()=>h});var i=o(1413),t=o(67861),n=o(48963),d=o(47144),a=o.n(d),r=o(27436),s=o(14170),v=o(88550),u=o(71600),c=o(49465),p=o(12075),m=o(52902),f=o(73500),_=o(50981),y=o.n(_);const h=e=>{var l,o,d,_,h,g,b,x,E,C,w,M,S,k,Z,I,N,T,D,P,A,O,L,z,R,U,F,W,q,B;const{component:Y,blueprintIndex:H,nextButtonClicked:V,setIsMandatoryError:j,authenticatedUser:G,begunModule:J,selectedComponent:K,editMode:Q,shouldDisplay:X=(!1===(null===Y||void 0===Y||null===(l=Y.options)||void 0===l?void 0:l.useCustomTemplate)||void 0===(null===Y||void 0===Y||null===(o=Y.options)||void 0===o?void 0:o.useCustomTemplate))&&(null!==Y&&void 0!==Y&&null!==(d=Y.options)&&void 0!==d&&d.statusOnly?(null===Y||void 0===Y||null===(_=Y.options)||void 0===_?void 0:_.statusOnly)===(null===K||void 0===K?void 0:K.status):void 0===(null===Y||void 0===Y||null===(h=Y.options)||void 0===h?void 0:h.showOnly)||(!((null===Y||void 0===Y||null===(g=Y.options)||void 0===g||null===(b=g.showOnly)||void 0===b?void 0:b.length)>0)||(null===Y||void 0===Y||null===(x=Y.options)||void 0===x||null===(E=x.showOnly)||void 0===E?void 0:E.filter(e=>{var l;return(null===G||void 0===G||null===(l=G.positions)||void 0===l?void 0:l.filter(l=>l.id===e).length)>0}).length)>0)),isEnabled:$=void 0===(null===K||void 0===K?void 0:K.id)||(!((null===K||void 0===K||null===(C=K.created_by)||void 0===C?void 0:C.id)!==G.id||!("New"===K.status||void 0===(null===Y||void 0===Y||null===(w=Y.options)||void 0===w?void 0:w.showOnly)||null!==Y&&void 0!==Y&&null!==(M=Y.options)&&void 0!==M&&M.showOnly&&(null===Y||void 0===Y||null===(S=Y.options)||void 0===S||null===(k=S.showOnly)||void 0===k?void 0:k.filter(e=>{var l;return(null===G||void 0===G||null===(l=G.positions)||void 0===l?void 0:l.filter(l=>l.id===e).length)>0}).length)>0&&null!==J&&void 0!==J&&null!==(Z=J.processModule)&&void 0!==Z&&null!==(I=Z.module)&&void 0!==I&&null!==(N=I.options)&&void 0!==N&&N.strict))||(void 0===(null===J||void 0===J||null===(T=J.processModule)||void 0===T||null===(D=T.module)||void 0===D||null===(P=D.options)||void 0===P?void 0:P.strict)||0==(null===J||void 0===J||null===(A=J.processModule)||void 0===A||null===(O=A.module)||void 0===O||null===(L=O.options)||void 0===L?void 0:L.strict)||void 0!==(null===Y||void 0===Y||null===(z=Y.options)||void 0===z?void 0:z.showOnly)&&((null===Y||void 0===Y||null===(R=Y.options)||void 0===R||null===(U=R.showOnly)||void 0===U?void 0:U.length)>0&&(null===Y||void 0===Y||null===(F=Y.options)||void 0===F||null===(W=F.showOnly)||void 0===W?void 0:W.filter(e=>{var l;return(null===G||void 0===G||null===(l=G.positions)||void 0===l?void 0:l.filter(l=>l.id===e).length)>0}).length)>0))),hideTitle:ee=!1}=e,[le,oe]=(0,v.pQ)(),[ie]=(0,t.useState)(n.Z.active),[te,ne]=(0,t.useState)(!1),[de]=(0,t.useState)(""),[ae,re]=(0,t.useState)(y()()),se=(0,t.useRef)(null),ve=null===(q=le.currentStep)||void 0===q?void 0:q.component_blueprints.findIndex(e=>e.id===(null===Y||void 0===Y?void 0:Y.id));(0,t.useEffect)(()=>{ue()},[V]),(0,t.useEffect)(()=>{var e;if(null!==Y&&void 0!==Y&&null!==(e=Y.selected_fields)&&void 0!==e&&e.find(e=>"Clock"===e.data_type_name&&!0===e.visible)){const e=setInterval(()=>{re(y()())},1e3);return()=>{window.clearInterval(e)}}},[]);const ue=()=>{var e;null!==Y&&void 0!==Y&&null!==(e=Y.selected_fields)&&void 0!==e&&e.some(e=>{var l;return!0===e.mandatory&&!0===e.visible&&"output"!==e.data_type&&(!e.value||(null===e||void 0===e||null===(l=e.value)||void 0===l?void 0:l.length)<1)})?j(!0):j(!1)},ce=(e,l)=>{var o,i,t;const n=[...null!==(o=null===(i=le.currentStep)||void 0===i?void 0:i.component_blueprints)&&void 0!==o?o:[]],d=null===(t=n[ve])||void 0===t?void 0:t.selected_fields[l];"Number"===(null===d||void 0===d?void 0:d.data_type_name)?Number(+e)?d.value=e:""===e&&(d.value=""):null!==d&&void 0!==d&&d.data_type_name&&(d.value=e),null!==d&&void 0!==d&&d.value&&d.mandatory&&(d.errors=""),ue(),oe({action:v._U.setComponentBlueprints,value:n}),oe({action:v._U.setModuleNewStepComponents,value:n})},pe=(0,t.useCallback)((e,l,o)=>{var i,t,n;const d=[...null!==(i=null===(t=le.currentStep)||void 0===t?void 0:t.component_blueprints)&&void 0!==i?i:[]],a=null===(n=d[ve])||void 0===n?void 0:n.selected_fields[l];a.options.country_code=null===e||void 0===e?void 0:e.countryCode,a.options.country_name=null===e||void 0===e?void 0:e.name,a.options.country_prefix="+".concat(null===e||void 0===e?void 0:e.dialCode),oe({action:v._U.setComponentBlueprints,value:d}),oe({action:v._U.setModuleNewStepComponents,value:d}),ce(o,l)},[le]),me=(0,t.useCallback)((e,l)=>{var o,i,t;const n=[...null!==(o=null===(i=le.currentStep)||void 0===i?void 0:i.component_blueprints)&&void 0!==o?o:[]],d=null===(t=n[ve])||void 0===t?void 0:t.selected_fields[l];d.options.currency_type=null===e||void 0===e?void 0:e.label,d.options.currency_value=null===e||void 0===e?void 0:e.value,d.options.symbol=null===e||void 0===e?void 0:e.symbol,oe({action:v._U.setComponentBlueprints,value:n}),oe({action:v._U.setModuleNewStepComponents,value:n})},[le]);return t.createElement("div",{id:"accordion",className:n.Z.section,key:H,style:{display:X?"":"none",pointerEvents:$?"":"none"}},t.createElement("div",{className:a()(n.Z.accordionContainer,ie),"app-variant-has-error":de?"error":"",style:{border:f.tq?"0":"",padding:f.tq?"0":"",margin:f.tq?"0":""}},!ee&&t.createElement("p",{className:f.tq?n.Z.titleII:n.Z.title},null===Y||void 0===Y?void 0:Y.name),t.createElement("div",{ref:se,style:{maxHeight:ie===n.Z.active?"":"0px",display:"flex"},className:n.Z.content},t.createElement(u.g,{component:Y,selectedComponent:K,handleInputChange:ce,handlePrefixChange:pe,handleCurrencyChange:me,checkIfAreMandatoryErrored:ue,handleCheckbox:(e,l)=>{var o,i,t;const n=[...null!==(o=null===(i=le.currentStep)||void 0===i?void 0:i.component_blueprints)&&void 0!==o?o:[]],d=null===(t=n[ve])||void 0===t?void 0:t.selected_fields[l];d&&(d.value=e,null!==d&&void 0!==d&&d.value&&d.mandatory&&(d.errors=""),oe({action:v._U.setComponentBlueprints,value:n}),oe({action:v._U.setModuleNewStepComponents,value:n}),ue())},isInherited:!1,indexInContextArray:ve,handleLocationChange:(e,l)=>{var o,i,t;const n=[...null!==(o=null===(i=le.currentStep)||void 0===i?void 0:i.component_blueprints)&&void 0!==o?o:[]];(null===(t=n[ve])||void 0===t?void 0:t.selected_fields[l]).value="".concat(e.lat,", ").concat(e.lng),oe({action:v._U.setComponentBlueprints,value:n}),oe({action:v._U.setModuleNewStepComponents,value:n})},processTaskContext:le,setTaskProcessContext:oe,editMode:Q,setShowEdit:ne,showEdit:te,clock:ae})),t.createElement("div",{style:{paddingLeft:"10px",display:"flex"}},te&&(null===te||void 0===te?void 0:te.item_code)&&t.createElement(s.zx,{light:!0,clicked:()=>{var e;const l={};Y.selected_fields.map(e=>{var o,t,n;if("Formula"===e.data_type_name){var d,a,r;const o=(0,c.LV)(e.options,Y.selected_fields.filter(l=>e.options.list.includes(l.field_name)),le.components,null!==(d=le.items)&&void 0!==d?d:[],null!==(a=null===le||void 0===le?void 0:le.newStepComponents)&&void 0!==a?a:[]);var s;if(null!==e&&void 0!==e&&null!==(r=e.options)&&void 0!==r&&r.mapToItem)l[null===e||void 0===e||null===(s=e.options)||void 0===s?void 0:s.mapToItem]="".concat(null!==o&&void 0!==o?o:"");return(0,i.Z)((0,i.Z)({},e),{},{value:"".concat(null!==o&&void 0!==o?o:"")})}null!==e&&void 0!==e&&null!==(o=e.options)&&void 0!==o&&o.mapToItem&&(l[null===e||void 0===e||null===(t=e.options)||void 0===t?void 0:t.mapToItem]="".concat(null!==(n=null===e||void 0===e?void 0:e.value)&&void 0!==n?n:""));return e});const o=null===(e=le.items)||void 0===e?void 0:e.find(e=>e.id===(null===te||void 0===te?void 0:te.id));oe(void 0===o?{action:v._U.addModuleItems,value:(0,i.Z)((0,i.Z)({},l),{},{id:(0,c.mR)()})}:{action:v._U.updateModuleItems,value:(0,i.Z)((0,i.Z)({},o),l)}),ne(!1),Y.selected_fields.map((e,l)=>{ce("",l)})}},t.createElement(p.G,{icon:m.r6l,style:{width:"20px",height:"20px"}})),te&&!(null!==te&&void 0!==te&&te.item_code)&&t.createElement(s.zx,{clicked:()=>{oe({action:v._U.removeModuleComponents,value:te.temp_id}),ne(!1)}},t.createElement(p.G,{icon:m.$aW,style:{width:"20px",height:"20px"}})),te&&(null===te||void 0===te?void 0:te.item_code)&&t.createElement(s.zx,{light:!0,clicked:()=>{te.item_code&&(te.alt_value||te.quantity||te.total)?oe({action:v._U.removeModuleItems,value:te}):oe({action:v._U.removeModuleComponents,value:te.temp_id}),ne(!1),Y.selected_fields.map((e,l)=>{ce("",l)})}},t.createElement(p.G,{icon:m.$aW,style:{width:"20px",height:"20px"}})))),de&&(null===de||void 0===de||null===(B=de.errors)||void 0===B?void 0:B.title)&&t.createElement(r.Z,{message:de.errors.title}),de&&(null===de||void 0===de?void 0:de.message)&&t.createElement(r.Z,{message:de.message}))}},71600:(e,l,o)=>{"use strict";o.d(l,{g:()=>Il});var i,t,n,d,a,r=o(87462),s=o(45987),v=o(1413),u=o(67861),c=o(48963),p=o(85692),m=o(79633),f=o(6073),_=o(94667),y=o(63864),h=o(75105),g=o(11577),b=o(10103),x=o(14170),E=o(66180),C=o.n(E),w=o(49465),M=o(88550),S=o(29960),k=o(86025),Z=o(39518),I=o(37390);const N=["title","titleId"];function T(){return T=Object.assign?Object.assign.bind():function(e){for(var l=1;l<arguments.length;l++){var o=arguments[l];for(var i in o)({}).hasOwnProperty.call(o,i)&&(e[i]=o[i])}return e},T.apply(null,arguments)}const D=(e,l)=>{let{title:o,titleId:r}=e,s=function(e,l){if(null==e)return{};var o,i,t=function(e,l){if(null==e)return{};var o={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==l.indexOf(i))continue;o[i]=e[i]}return o}(e,l);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(i=0;i<n.length;i++)o=n[i],-1===l.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(t[o]=e[o])}return t}(e,N);return u.createElement("svg",T({width:8,height:68,viewBox:"0 0 8 68",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:l,"aria-labelledby":r},s),o?u.createElement("title",{id:r},o):null,i||(i=u.createElement("circle",{cx:4,cy:4,r:3.5,fill:"white",stroke:"#0094FF"})),t||(t=u.createElement("circle",{cx:4,cy:29,r:1,fill:"#0094FF"})),n||(n=u.createElement("circle",{cx:4,cy:34,r:1,fill:"#0094FF"})),d||(d=u.createElement("circle",{cx:4,cy:39,r:1,fill:"#0094FF"})),a||(a=u.createElement("circle",{cx:4,cy:64,r:4,fill:"#0094FF"})))},P=(0,u.forwardRef)(D);o.p;var A,O;const L=["title","titleId"];function z(){return z=Object.assign?Object.assign.bind():function(e){for(var l=1;l<arguments.length;l++){var o=arguments[l];for(var i in o)({}).hasOwnProperty.call(o,i)&&(e[i]=o[i])}return e},z.apply(null,arguments)}const R=(e,l)=>{let{title:o,titleId:i}=e,t=function(e,l){if(null==e)return{};var o,i,t=function(e,l){if(null==e)return{};var o={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==l.indexOf(i))continue;o[i]=e[i]}return o}(e,l);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(i=0;i<n.length;i++)o=n[i],-1===l.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(t[o]=e[o])}return t}(e,L);return u.createElement("svg",z({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:l,"aria-labelledby":i},t),o?u.createElement("title",{id:i},o):null,A||(A=u.createElement("g",{clipPath:"url(#clip0_1648_5272)"},u.createElement("path",{d:"M18.92 6.01C18.72 5.42 18.16 5 17.5 5H6.5C5.84 5 5.29 5.42 5.08 6.01L3.11 11.68C3.04 11.89 3 12.11 3 12.34V19.5C3 20.33 3.67 21 4.5 21C5.33 21 6 20.33 6 19.5V19H18V19.5C18 20.32 18.67 21 19.5 21C20.32 21 21 20.33 21 19.5V12.34C21 12.12 20.96 11.89 20.89 11.68L18.92 6.01ZM6.5 16C5.67 16 5 15.33 5 14.5C5 13.67 5.67 13 6.5 13C7.33 13 8 13.67 8 14.5C8 15.33 7.33 16 6.5 16ZM17.5 16C16.67 16 16 15.33 16 14.5C16 13.67 16.67 13 17.5 13C18.33 13 19 13.67 19 14.5C19 15.33 18.33 16 17.5 16ZM5 11L6.27 7.18C6.41 6.78 6.79 6.5 7.22 6.5H16.78C17.21 6.5 17.59 6.78 17.73 7.18L19 11H5Z"}))),O||(O=u.createElement("defs",null,u.createElement("clipPath",{id:"clip0_1648_5272"},u.createElement("rect",{width:24,height:24,fill:"white"})))))},U=(0,u.forwardRef)(R);o.p;var F,W;const q=["title","titleId"];function B(){return B=Object.assign?Object.assign.bind():function(e){for(var l=1;l<arguments.length;l++){var o=arguments[l];for(var i in o)({}).hasOwnProperty.call(o,i)&&(e[i]=o[i])}return e},B.apply(null,arguments)}const Y=(e,l)=>{let{title:o,titleId:i}=e,t=function(e,l){if(null==e)return{};var o,i,t=function(e,l){if(null==e)return{};var o={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==l.indexOf(i))continue;o[i]=e[i]}return o}(e,l);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(i=0;i<n.length;i++)o=n[i],-1===l.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(t[o]=e[o])}return t}(e,q);return u.createElement("svg",B({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:l,"aria-labelledby":i},t),o?u.createElement("title",{id:i},o):null,F||(F=u.createElement("g",{clipPath:"url(#clip0_1648_5275)"},u.createElement("path",{d:"M20 11C19.82 11 19.64 11.03 19.47 11.05L17.41 9H19C19.55 9 20 8.55 20 8V7.62C20 6.88 19.22 6.39 18.55 6.73L16.27 7.87L13.7 5.3C13.52 5.11 13.26 5 13 5H10C9.45 5 9 5.45 9 6C9 6.55 9.45 7 10 7H12.17C12.44 7 12.69 7.11 12.88 7.29L14.59 9H11.24C11.08 9 10.93 9.04 10.79 9.11L7.65 10.68C7.27 10.87 6.8 10.8 6.5 10.49L5.3 9.29C5.11 9.11 4.85 9 4.59 9H1C0.45 9 0 9.45 0 10C0 10.55 0.45 11 1 11H4C1.48 11 -0.49 13.32 0.11 15.94C0.44 17.39 1.61 18.56 3.06 18.89C5.68 19.49 8 17.52 8 15L9.41 16.41C9.79 16.79 10.3 17 10.83 17H11.84C12.56 17 13.22 16.62 13.58 15.99L16.49 10.9L17.5 11.91C16.37 12.82 15.74 14.32 16.12 15.96C16.46 17.4 17.63 18.57 19.07 18.9C21.68 19.49 24 17.51 24 15C24 12.79 22.21 11 20 11ZM4 17C2.9 17 2 16.1 2 15C2 13.9 2.9 13 4 13C5.1 13 6 13.9 6 15C6 16.1 5.1 17 4 17ZM20 17C18.9 17 18 16.1 18 15C18 13.9 18.9 13 20 13C21.1 13 22 13.9 22 15C22 16.1 21.1 17 20 17Z"}))),W||(W=u.createElement("defs",null,u.createElement("clipPath",{id:"clip0_1648_5275"},u.createElement("rect",{width:24,height:24,fill:"white"})))))},H=(0,u.forwardRef)(Y);o.p;var V,j,G,J;const K=["title","titleId"];function Q(){return Q=Object.assign?Object.assign.bind():function(e){for(var l=1;l<arguments.length;l++){var o=arguments[l];for(var i in o)({}).hasOwnProperty.call(o,i)&&(e[i]=o[i])}return e},Q.apply(null,arguments)}const X=(e,l)=>{let{title:o,titleId:i}=e,t=function(e,l){if(null==e)return{};var o,i,t=function(e,l){if(null==e)return{};var o={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==l.indexOf(i))continue;o[i]=e[i]}return o}(e,l);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(i=0;i<n.length;i++)o=n[i],-1===l.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(t[o]=e[o])}return t}(e,K);return u.createElement("svg",Q({width:54,height:54,viewBox:"0 0 54 54",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:l,"aria-labelledby":i},t),o?u.createElement("title",{id:i},o):null,V||(V=u.createElement("circle",{opacity:.24,cx:27.3333,cy:27.3333,r:26.6667,fill:"#0094FF"})),j||(j=u.createElement("circle",{cx:27.3333,cy:27.3333,r:20,fill:"#0094FF",stroke:"white",strokeWidth:2.66667})),G||(G=u.createElement("g",{clipPath:"url(#clip0_1648_5266)"},u.createElement("path",{d:"M33.4845 22.0089C33.3067 21.4844 32.8089 21.1111 32.2222 21.1111H22.4445C21.8578 21.1111 21.3689 21.4844 21.1822 22.0089L19.4311 27.0489C19.3689 27.2356 19.3333 27.4311 19.3333 27.6356V34C19.3333 34.7378 19.9289 35.3333 20.6667 35.3333C21.4045 35.3333 22 34.7378 22 34V33.5556H32.6667V34C32.6667 34.7289 33.2622 35.3333 34 35.3333C34.7289 35.3333 35.3333 34.7378 35.3333 34V27.6356C35.3333 27.44 35.2978 27.2356 35.2356 27.0489L33.4845 22.0089ZM22.4445 30.8889C21.7067 30.8889 21.1111 30.2933 21.1111 29.5556C21.1111 28.8178 21.7067 28.2222 22.4445 28.2222C23.1822 28.2222 23.7778 28.8178 23.7778 29.5556C23.7778 30.2933 23.1822 30.8889 22.4445 30.8889ZM32.2222 30.8889C31.4845 30.8889 30.8889 30.2933 30.8889 29.5556C30.8889 28.8178 31.4845 28.2222 32.2222 28.2222C32.96 28.2222 33.5556 28.8178 33.5556 29.5556C33.5556 30.2933 32.96 30.8889 32.2222 30.8889ZM21.1111 26.4444L22.24 23.0489C22.3645 22.6933 22.7022 22.4444 23.0845 22.4444H31.5822C31.9645 22.4444 32.3022 22.6933 32.4267 23.0489L33.5556 26.4444H21.1111Z",fill:"white"}))),J||(J=u.createElement("defs",null,u.createElement("clipPath",{id:"clip0_1648_5266"},u.createElement("rect",{width:21.3333,height:21.3333,fill:"white",transform:"translate(16.6667 16.6667)"})))))},$=(0,u.forwardRef)(X);o.p;var ee,le,oe;const ie=["title","titleId"];function te(){return te=Object.assign?Object.assign.bind():function(e){for(var l=1;l<arguments.length;l++){var o=arguments[l];for(var i in o)({}).hasOwnProperty.call(o,i)&&(e[i]=o[i])}return e},te.apply(null,arguments)}const ne=(e,l)=>{let{title:o,titleId:i}=e,t=function(e,l){if(null==e)return{};var o,i,t=function(e,l){if(null==e)return{};var o={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==l.indexOf(i))continue;o[i]=e[i]}return o}(e,l);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(i=0;i<n.length;i++)o=n[i],-1===l.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(t[o]=e[o])}return t}(e,ie);return u.createElement("svg",te({width:51,height:51,viewBox:"0 0 51 51",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:l,"aria-labelledby":i},t),o?u.createElement("title",{id:i},o):null,ee||(ee=u.createElement("g",{filter:"url(#filter0_dd_1648_5267)"},u.createElement("circle",{cx:25.3333,cy:23.3333,r:21.3333,fill:"#0094FF"}),u.createElement("circle",{cx:25.3333,cy:23.3333,r:20,stroke:"white",strokeWidth:2.66667}))),le||(le=u.createElement("g",{clipPath:"url(#clip0_1648_5267)"},u.createElement("path",{d:"M27.1333 17.6667L26.92 16.6C26.84 16.1911 26.4755 15.8889 26.0489 15.8889H19.6667C19.1778 15.8889 18.7778 16.2889 18.7778 16.7778V30.1111C18.7778 30.6 19.1778 31 19.6667 31C20.1555 31 20.5555 30.6 20.5555 30.1111V24.7778H25.5333L25.7467 25.8445C25.8267 26.2622 26.1911 26.5556 26.6178 26.5556H31.2222C31.7111 26.5556 32.1111 26.1556 32.1111 25.6667V18.5556C32.1111 18.0667 31.7111 17.6667 31.2222 17.6667H27.1333Z",fill:"white"}))),oe||(oe=u.createElement("defs",null,u.createElement("filter",{id:"filter0_dd_1648_5267",x:0,y:0,width:50.6667,height:50.6667,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},u.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),u.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),u.createElement("feOffset",null),u.createElement("feGaussianBlur",{stdDeviation:.5}),u.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.24 0"}),u.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_1648_5267"}),u.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),u.createElement("feOffset",{dy:2}),u.createElement("feGaussianBlur",{stdDeviation:2}),u.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.04 0"}),u.createElement("feBlend",{mode:"normal",in2:"effect1_dropShadow_1648_5267",result:"effect2_dropShadow_1648_5267"}),u.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect2_dropShadow_1648_5267",result:"shape"})),u.createElement("clipPath",{id:"clip0_1648_5267"},u.createElement("rect",{width:21.3333,height:21.3333,fill:"white",transform:"translate(14.3333 12.3333)"})))))},de=(0,u.forwardRef)(ne),ae=(o.p,{ThreeDot:P,DRIVE:U,TWO_WHEELER:H,OriginMarker:$,DestinationMarker:de}),re=e=>{let{type:l,color:o,strokeColor:i,text:t,onClick:n}=e;const d=(0,u.useMemo)(()=>{const e=ae[l];return e?u.createElement(e,{style:{fill:o||void 0,stroke:i||void 0}}):null},[l,o]);return u.createElement("div",{className:"img-".concat(l),onClick:n},d,void 0!==t&&u.createElement("span",null,t))},se=u.memo(re);var ve=o(12075),ue=o(52902);const ce=e=>{let{style:l,position:o,active:i,onToggle:t,type:n}=e;return u.createElement(k._Q,{position:o,className:"marker ".concat(i?"active":""),zIndex:i?2:1,onClick:t},"Pin"===n?u.createElement(ve.G,{icon:ue.opg,style:{color:"green",width:"30px",height:"30px"}}):"ThreeDot"===n||"DRIVE"===n||"TWO_WHEELER"===n||"OriginMarker"===n||"DestinationMarker"===n?u.createElement(se,{type:n,style:l}):u.createElement("img",{alt:"lg",src:n,className:"customPin"}))},pe=["onClick","onDrag","onDragStart","onDragEnd","onMouseOver","onMouseOut","encodedPath"];const me=(0,u.forwardRef)((e,l)=>{const o=function(e){var l;const{onClick:o,onDrag:i,onDragStart:t,onDragEnd:n,onMouseOver:d,onMouseOut:a,encodedPath:r}=e,v=(0,s.Z)(e,pe),c=(0,u.useRef)({});Object.assign(c.current,{onClick:o,onDrag:i,onDragStart:t,onDragEnd:n,onMouseOver:d,onMouseOut:a});const p=(0,k.kY)("geometry"),m=(0,u.useRef)(new window.google.maps.Polyline).current;(0,u.useMemo)(()=>{m.setOptions(v)},[m,v]);const f=null===(l=(0,u.useContext)(k._Z))||void 0===l?void 0:l.map;return(0,u.useMemo)(()=>{if(!r||!p)return;const e=p.encoding.decodePath(r);m.setPath(e)},[m,r,p]),(0,u.useEffect)(()=>{if(f)return m.setMap(f),()=>{m.setMap(null)};void 0===f&&console.error("<Polyline> has to be inside a Map component.")},[f,m]),(0,u.useEffect)(()=>{if(!m)return;const e=window.google.maps.event;return[["click","onClick"],["drag","onDrag"],["dragstart","onDragStart"],["dragend","onDragEnd"],["mouseover","onMouseOver"],["mouseout","onMouseOut"]].forEach(l=>{let[o,i]=l;e.addListener(m,o,e=>{const l=c.current[i];l&&l(e)})}),()=>{e.clearInstanceListeners(m)}},[m]),m}(e);return(0,u.useImperativeHandle)(l,()=>o,[o]),null}),fe=e=>{if(!e)return"";const l=parseInt(e,10);if("s"===e.slice(-1)){const e=Math.floor(l/3600),o=Math.floor(l%3600/60),i=l%60;return e>=1?"".concat(e.toFixed(0)," hr")+" "+"".concat(o," min"):o>=1?"".concat(o.toFixed(0)," min")+" "+"".concat(i," sec"):"".concat(i," secs")}throw new Error('Invalid time unit. Only seconds ("s") are supported.')},_e=e=>{let{route:l,activeRoute:o,routeIndex:i,onClick:t}=e;const[n,d]=(0,u.useState)([]),a=(0,k.kY)("geometry");return(0,u.useEffect)(()=>{var e;if(null===l||void 0===l||null===(e=l.polyline)||void 0===e||!e.encodedPolyline||!a)return;const t=(n=l.polyline.encodedPolyline,a.encoding.decodePath(n).map(e=>({lat:e.lat(),lng:e.lng()})));var n;let r=l.travelAdvisory.speedReadingIntervals.length+2;const s=l.travelAdvisory.speedReadingIntervals.map(e=>{const l=t.slice(e.startPolylinePointIndex,e.endPolylinePointIndex+1);return{path:a.encoding.encodePath(l),options:{zIndex:100-i+r--,strokeColor:I.Gd[e.speed]||I.Gd.NORMAL,strokeOpacity:i===o?1:.5,strokeWeight:6}}});return d(s),()=>{d([])}},[l,a,i,o]),u.createElement(u.Fragment,null,n.map((e,o)=>u.createElement(me,(0,r.Z)({key:"p-".concat(o),onClick:e=>t(e,l,i),encodedPath:e.path},e.options))))},ye=u.memo(_e),he=e=>{let{route:l,travelMode:o}=e;return u.createElement("div",{className:"polyline-info-window"},u.createElement("div",{className:"content"},u.createElement("div",{className:"title"},u.createElement(se,{type:o,color:"#212121"}),u.createElement("b",null,fe(l.duration))),u.createElement("div",{className:"distanceMeters"},u.createElement("p",null,(l.distanceMeters/1e3).toFixed(2)," km"))))},ge=e=>{let{map:l,stops:o}=e;return(0,u.useEffect)(()=>{if(l){if(o.length>0){const e=new window.google.maps.LatLngBounds;o.forEach(l=>{e.extend(new window.google.maps.LatLng(l.position.lat,l.position.lng))}),l.fitBounds(e)}1===o.length&&l.setZoom(14)}},[l,o]),null},be=u.memo(ge),xe=e=>{let{origin:l,destination:o,travelMode:i,routes:t,currentLocation:n,pins:d=[],controls:a,zoom:r}=e;const s=(0,k.Sx)(),[c,p]=(0,u.useState)(null),[m,f]=(0,u.useState)(0),_=(0,u.useMemo)(()=>{let e=[];return null!==l&&void 0!==l&&l.position&&e.push(l),d&&(null===d||void 0===d||d.map(l=>e.push(l))),null!==o&&void 0!==o&&o.position&&e.push(o),e},[l,o,d]),y=(e,l,o)=>{const t={lat:e.latLng.lat(),lng:e.latLng.lng()};f(o),p({position:t,content:u.createElement(he,{route:l,travelMode:i})})};return u.createElement(k.D5,{mapId:"FLOWHEROMAPS",defaultZoom:I.o0,defaultCenter:null!==n&&void 0!==n?n:I.k1,center:1===(null===d||void 0===d?void 0:d.length)?(0,v.Z)({},d[0].position):null,zoom:1===(null===d||void 0===d?void 0:d.length)?r:null,gestureHandling:"greedy",disableDefaultUI:!1},u.createElement(be,{map:s,stops:_}),l&&u.createElement(ce,{type:"OriginMarker",position:l.position}),o&&u.createElement(ce,{type:"DestinationMarker",position:o.position}),(null===d||void 0===d?void 0:d.length)>0&&(null===d||void 0===d?void 0:d.map((e,l)=>u.createElement(ce,{key:l,type:null!==e&&void 0!==e&&e.type?null===e||void 0===e?void 0:e.type:"Pin",position:e.position}))),(null===n||void 0===n?void 0:n.icon)&&u.createElement(ce,{type:null===n||void 0===n?void 0:n.icon,position:n}),t.map((e,l)=>u.createElement(ye,{key:"polyline-".concat(l),route:e,activeRoute:m,routeIndex:l,onClick:y})),c&&u.createElement(k.nx,{key:c.position.lat+","+c.position.lng,position:c.position,onCloseClick:()=>p(null)},c.content))},Ee=u.memo(xe),Ce=e=>{var l;const{controls:o,zoom:i}=e,{map:t,currentLocation:n}=(0,Z.v9)(e=>e.flowReducer),[d,a]=(0,u.useState)(n);return u.createElement(Ee,{origin:null===t||void 0===t?void 0:t.origin,destination:null===t||void 0===t?void 0:t.destination,travelMode:null===t||void 0===t?void 0:t.travelMode,routes:(null===t||void 0===t?void 0:t.routes[null===t||void 0===t?void 0:t.travelMode])||[],currentLocation:d,pins:null!==(l=null===t||void 0===t?void 0:t.pins)&&void 0!==l?l:[],controls:o,zoom:null===t||void 0===t?void 0:t.zoom})},we=e=>{let{onPlaceSelect:l}=e;const[o,i]=(0,u.useState)(null),t=(0,u.useRef)(null),n=(0,k.kY)("places");return(0,u.useEffect)(()=>{if(!n||!t.current)return;i(new n.Autocomplete(t.current,{fields:["place_id","geometry","name","formatted_address"]}))},[n]),(0,u.useEffect)(()=>{o&&o.addListener("place_changed",()=>{l(o.getPlace())})},[l,o]),u.createElement("div",{className:"autocomplete-container"},u.createElement("input",{ref:t}))},Me=e=>{let{routes:l,travelMode:o,onTravelModeChange:i,onOriginAddressChange:t,onDestinationAddressChange:n}=e;return u.createElement("div",{className:"search-box"},u.createElement("div",{className:"travel-mode-filter-btns"},I.jk.map(e=>{var t,n;const d=fe(null===(t=l[e])||void 0===t||null===(n=t[0])||void 0===n?void 0:n.duration);return u.createElement("button",{key:e,className:o===e?"active":"",onClick:()=>i(e)},u.createElement(se,{type:e}),d&&u.createElement("span",null,d))})),u.createElement("div",{className:"input-address-group"},u.createElement(se,{type:"ThreeDot"}),u.createElement(we,{onPlaceSelect:t}),u.createElement(we,{onPlaceSelect:n})))};var Se=o(11217),ke=o(88374);const Ze=()=>{const{map:e,companyData:l}=(0,Z.v9)(e=>e.flowReducer),o=(0,Z.I0)();(0,u.useEffect)(()=>{(async()=>{var i,t;if(null!==e&&void 0!==e&&e.origin&&null!==e&&void 0!==e&&e.destination&&null!==(i=Object.keys(null===e||void 0===e?void 0:e.origin))&&void 0!==i&&i.length&&null!==(t=Object.keys(null===e||void 0===e?void 0:e.destination))&&void 0!==t&&t.length)try{const i={};for(const o of I.jk){var n;const t=await(0,Se.s)({origin:{address:null===e||void 0===e?void 0:e.origin.formattedAddress},destination:{address:null===e||void 0===e?void 0:e.destination.formattedAddress},travelMode:o,routingPreference:"traffic_aware",extraComputations:["TRAFFIC_ON_POLYLINE"]},null===l||void 0===l||null===(n=l.misc_info)||void 0===n?void 0:n.map);i[o]=(null===t||void 0===t?void 0:t.routes)||[]}o((0,ke.wM)({routes:i}))}catch(d){o((0,ke.wM)({routes:[],error:"Failed to fetch directions"}))}})()},[null===e||void 0===e?void 0:e.origin,null===e||void 0===e?void 0:e.destination,o]);const i=(e,l)=>{o((0,ke.wM)({[e]:{name:l.name,formattedAddress:l.formatted_address,position:{lat:l.geometry.location.lat(),lng:l.geometry.location.lng()},place_id:l.place_id}}))};return u.createElement(Me,{travelMode:null===e||void 0===e?void 0:e.travelMode,routes:null===e||void 0===e?void 0:e.routes,onTravelModeChange:e=>o((0,ke.wM)({travelMode:e})),onOriginAddressChange:e=>i("origin",e),onDestinationAddressChange:e=>i("destination",e)})},Ie=e=>{const{search:l=!0,apikey:o="",controls:i=!0}=e;return u.createElement("div",{className:"GoogleMaps"},u.createElement(k.un,{apiKey:o},l&&u.createElement("div",{className:"control-pannel"},u.createElement(Ze,null)),u.createElement(Ce,{controls:i})))};var Ne=o(12308),Te=o(9825),De=o.n(Te),Pe=o(4358),Ae=o(49523),Oe=o(25403),Le=o(4292),ze=o(32086),Re=o(68218),Ue=o(84634),Fe=o(97606),We=o(8284),qe=o(35606),Be=o(79544),Ye=o(98032),He=o(13397),Ve=o(3616),je=o(90421),Ge=o(7538),Je=o(77802),Ke=o(50981),Qe=o.n(Ke),Xe=o(91426),$e=o(60534),el=o(48630),ll=o(32588),ol=o(27426),il=o(27658),tl=o(34710),nl=o(44408),dl=o(23910),al=(o(56120),o(37704),o(72666),o(68623),o(3863),o(95361),o(52950)),rl=o(51481),sl=o(68635),vl=o.n(sl),ul=o(1542),cl=(o(31266),o(84952),o(30519)),pl=o(20089),ml=o(73500),fl=(o(68140),o(20777)),_l=o(58535),yl=o(32562),hl=o(88827),gl=o(93389),bl=o(95007),xl=o(41131),El=o(41756),Cl=o.n(El),wl=(o(16207),o(23280));e=o.hmd(e);const Ml=["height","start","onClick"],Sl=["height","start","onClick"],kl=["height","start","onClick"],Zl="50",Il=(0,u.memo)(l=>{var o,i,t,n,d,a,E,k,I;const{component:N,selectedComponent:T,handleInputChange:D=()=>{},indexInContextArray:P=0,handleCheckbox:A=()=>{},processTaskContext:O,setTaskProcessContext:L,isInherited:z=!1,checkIfAreMandatoryErrored:R=()=>{},handlePrefixChange:U=()=>{},handleCurrencyChange:F=()=>{},handleLocationChange:W=()=>{},editMode:q=!1,setShowEdit:B=()=>{},isDraft:Y=!1,clock:H}=l,{authenticatedUser:V}=(0,Z.v9)(e=>e.authReducer),{currentLocation:j,allTasks:G,allModules:J,blueprints:K,begunModule:Q,components:X,companyData:$,companyUsersArray:ee,companyPositionsArray:le,lastUpdates:oe,companyProcesses:ie}=(0,Z.v9)(e=>e.flowReducer),[te,ne]=(0,u.useState)(!1),[de,ae]=(0,u.useState)(new Date),[re,se]=(0,u.useState)([new Date,new Date(Qe()().add(7,"days"))]),[ce,pe]=re,[me,fe]=(0,u.useState)(""),[_e,ye]=(0,u.useState)([{label:"",value:""}]),[he,ge]=(0,u.useState)(!0),[be,xe]=(0,u.useState)(!0),[Ee,Ce]=(0,u.useState)({source:!1,destination:!1}),[we,Me]=(0,u.useState)("50px"),[Se,Ze]=(0,u.useState)(Array(12).fill("")),[Te,sl]=(0,u.useState)({candidates:[]}),[fl,El]=(0,u.useState)(!1),[Il,Pl]=(0,u.useState)({}),[Al,Ol]=(0,u.useState)("day"),[Ll,zl]=(0,u.useState)(),Rl=(0,wl.s0)(),Ul=(0,u.useRef)(),[Fl,Wl]=(0,u.useState)(ee.map(e=>({label:e.first_name+" "+e.last_name,value:e.id,user:e}))),ql=(e,l)=>{se(e),D(e,l)},Bl=(e,l)=>{ae(e),D(e,l)},Yl=(0,u.useCallback)(e=>{void 0!==e&&(0==Fl.length?ne(!0):ne(!1),(0,h.n0)(e).pipe((0,g.P)()).subscribe({next:e=>{Wl(e),ne(!1)}}))},[]),Hl=function(){var e;let l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.keys(l[0]),i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null===(e=Q.processModule.module)||void 0===e?void 0:e.name;return u.createElement(x.zx,{light:!0,clicked:()=>{var e,t,n;const d=null===Q||void 0===Q||null===(e=Q.processModule)||void 0===e||null===(t=e.steps)||void 0===t?void 0:t.find(e=>e.component_blueprints.filter(e=>{var l,o;return(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.allowMultipleInputs)&&(null===(o=e.selected_fields)||void 0===o?void 0:o.find(e=>"Transaction List"===e.data_type_name))}).length>0),a=null===d||void 0===d||null===(n=d.component_blueprints)||void 0===n?void 0:n.find(e=>{var l;return(null===(l=e.selected_fields)||void 0===l?void 0:l.filter(e=>"Transaction List"===e.data_type_name&&!0===e.visible).length)>0});if(a){var r,s,v,u;const e=null===Q||void 0===Q||null===(r=Q.processModule)||void 0===r||null===(s=r.steps)||void 0===s||null===(v=s.find(e=>e.component_blueprints.filter(e=>{var l;return null===(l=e.selected_fields)||void 0===l?void 0:l.find(e=>"Template"===e.data_type_name)}).length>0))||void 0===v||null===(u=v.component_blueprints)||void 0===u?void 0:u.find(e=>{var l;return(null===(l=e.selected_fields)||void 0===l?void 0:l.filter(e=>"Template"===e.data_type_name&&!0===e.visible).length)>0});(0,xl._G)(T,a,e,o,l,Q,i)}else{var c;const e=o,t=bl.utils.book_new(),n=bl.utils.json_to_sheet([]);bl.utils.sheet_add_json(n,l.map(l=>Object.assign({},...e.map(e=>({[e]:l[e]})))),{origin:"A2",skipHeader:!0}),bl.utils.book_append_sheet(t,n,"".concat(null===(c=Q.processModule.module)||void 0===c?void 0:c.name)),(0,bl.writeFile)(t,"".concat(i).concat((0,Ke.now)(),".xlsx"))}},icon:u.createElement("img",{src:p.so})})},Vl=(0,u.useCallback)(e=>{var l;if(0==(null===e||void 0===e||null===(l=e.analyze)||void 0===l?void 0:l.length)||void 0==(null===e||void 0===e?void 0:e.analyze))return void sl({candidates:[{content:{parts:[{text:"Enter a question that I could answer"}]}}]});let o={role:"user",parts:[{text:e.analyze}]};1==(null===e||void 0===e?void 0:e.current)?o.parts=[...o.parts,{text:JSON.stringify({table:"Transaction",data:(0,v.Z)((0,v.Z)((0,v.Z)({},O.components.map(e=>{let l={};return e.selected_fields.filter(e=>l=(0,v.Z)((0,v.Z)({},l),{},{[e.field_name]:e.value})),l})),O.newStepComponents.map(e=>{let l={};return e.selected_fields.filter(e=>l=(0,v.Z)((0,v.Z)({},l),{},{[e.field_name]:e.value})),l})),{},{items:O.items.map(e=>({item:e.item_code,quantity:+e.quantity,value:e.value}))})})}]:(void 0!==e.module_id&&(o.parts=[...o.parts,{text:JSON.stringify({table:J.find(l=>l.id===e.module_id).name,data:X.filter(l=>l.module_id===e.module_id).map(e=>{let l={};return e.component_fields.filter(e=>l=(0,v.Z)((0,v.Z)({},l),{},{[e.field_name]:e.value})),(0,v.Z)((0,v.Z)({},l),{},{created_date:e.created_date,created_by:e.created_by.id,items:null===e||void 0===e?void 0:e.component_items.map(e=>({item:e.item_code,quantity:+e.quantity,value:e.value}))})})})}]),void 0!==e.module2_id&&(o.parts=[...o.parts,{text:JSON.stringify({table:J.find(l=>l.id===e.module2_id).name,data:X.filter(l=>l.module_id===e.module2_id).map(e=>{let l={};return e.component_fields.filter(e=>l=(0,v.Z)((0,v.Z)({},l),{},{[e.field_name]:e.value})),(0,v.Z)((0,v.Z)({},l),{},{created_date:e.created_date,created_by:e.created_by.id,items:null===e||void 0===e?void 0:e.component_items.map(e=>({item:e.item_code,quantity:+e.quantity,value:e.value}))})})})}]),void 0!==e.module3_id&&(o.parts=[...o.parts,{text:JSON.stringify({table:J.find(l=>l.id===e.module3_id).name,data:X.filter(l=>l.module_id===e.module3_id).map(e=>{let l={};return e.component_fields.filter(e=>l=(0,v.Z)((0,v.Z)({},l),{},{[e.field_name]:e.value})),(0,v.Z)((0,v.Z)({},l),{},{created_date:e.created_date,created_by:e.created_by.id,items:null===e||void 0===e?void 0:e.component_items.map(e=>({item:e.item_code,quantity:+e.quantity,value:e.value}))})})})}])),sl({candidates:[]}),ne(!0),(0,_.hd)(JSON.stringify(o)).pipe((0,g.P)()).subscribe({next:e=>{ne(!1),sl(e)},error:e=>{sl({candidates:[{content:{parts:[{text:JSON.stringify(e)}]}}]}),ne(!1)}})},[]),jl=e=>{const{field_name:l}=e;return N.selected_fields.findIndex(e=>e.field_name===l)},Gl=e=>{const l=N.selected_fields.filter(e=>"Info"===e.data_type_name),o=X.find(l=>l.id===e);l.map(l=>{var i;null===l||void 0===l||null===(i=l.options)||void 0===i||i.list.map(i=>{var t,n;const d=null===(t=o.component_fields)||void 0===t?void 0:t.find(e=>e.field_name===i),a=jl({field_name:i});-1!=a&&(null===(n=o.component_fields)||void 0===n?void 0:n.length)>0&&(N.selected_fields[a].value=d?d.value:"",l.value=e)})});N.selected_fields.filter(e=>"Global"===e.data_type_name&&1==e.visible).map(e=>{var l,i;const t=null===(l=o.component_fields)||void 0===l?void 0:l.find(l=>l.field_name===e.field_name),n=jl({field_name:e.field_name});-1!=n&&(null===(i=o.component_fields)||void 0===i?void 0:i.length)>0&&t&&(N.selected_fields[n].value=null===t||void 0===t?void 0:t.value)})},Jl=e=>{var l,o;if(!O)return;let i=null===(l=Q.processModule.module)||void 0===l||null===(o=l.options)||void 0===o?void 0:o.global;var t,n,d,a,r,s,v;i||(i=null===O||void 0===O||null===(t=O.components.concat(null===O||void 0===O?void 0:O.newStepComponents).find(l=>l.selected_fields.filter(l=>{var o,i;return"Global"===l.data_type_name&&1==l.visible&&l.field_name===(null===(o=N.selected_fields.find(l=>l.data_type_name===e&&1==l.visible))||void 0===o||null===(i=o.options)||void 0===i?void 0:i.global)}).length>0))||void 0===t||null===(n=t.selected_fields.find(e=>"Global"===e.data_type_name))||void 0===n?void 0:n.value);i||(i=null===(d=Ae.Z(Oe.Z("component_blueprints"),Le.Z)(null!==(s=null===Q||void 0===Q||null===(v=Q.processModule)||void 0===v?void 0:v.completeSteps)&&void 0!==s?s:[]).find(l=>l.selected_fields.filter(l=>{var o,i;return l.field_name===(null===(o=N.selected_fields.find(l=>l.data_type_name===e&&1==l.visible))||void 0===o||null===(i=o.options)||void 0===i?void 0:i.global)&&"Value"===l.data_type_name}).length>0))||void 0===d||null===(a=d.selected_fields.find(e=>"Value"===e.data_type_name))||void 0===a||null===(r=a.options)||void 0===r?void 0:r.value);return i?X.filter(l=>l.component_fields.filter(l=>{var o,t;return l.value===i&&l.field_name===(null===(o=N.selected_fields.find(l=>l.data_type_name===e))||void 0===o||null===(t=o.options)||void 0===t?void 0:t.global)}).length>0):X},Kl=()=>{var l,o,i;null===(l=Q.processModule.module)||void 0===l||null===(o=l.options)||void 0===o||null===(i=o.supporting)||void 0===i||i.filter((l,o)=>{var i,t,n;ne(!0),(0,ul.vC)({id:l,name:null!==(i="".concat(null===J||void 0===J||null===(t=J.find(e=>e.id===l))||void 0===t?void 0:t.name).concat(o))&&void 0!==i?i:"".concat(null===(n=e)||void 0===n?void 0:n.name).concat(o)},w.Qc,w.R6,1).pipe((0,b.q)(1)).subscribe({next:e=>{ne(!1)}})})},Ql=e=>{var l,o,i,t,n,d,a,r,s,v,p,m,f,_,h,g,b,E,C,M,S,k,Z;const{field:I,enabled:T,index:L,isItem:U=!1,handleItem:F,withLabel:W=!0,edit:q=!0,item:B}=e;var H,V,j,G,J,K,Q,ee,le,oe,ie,ne,ae,re,se,me,fe,_e,ye,he,ge,be,xe,Ee,Ce,we,Me,Se,ke,Ze,Ie,Ne,Te,Pe,Ae,Oe,Le,Re,Ue;if("Dropdown"===(null===I||void 0===I?void 0:I.data_type_name)&&(null===I||void 0===I||null===(l=I.options)||void 0===l||null===(o=l.list)||void 0===o?void 0:o.length)>0)return q?u.createElement("div",{style:{width:"100%",border:"1px solid var(--app-color-gray-light)"}},u.createElement(y.Z,{key:L,visible:I.visible,mandatory:I.mandatory,items:null===I||void 0===I||null===(H=I.options)||void 0===H?void 0:H.list.map(e=>({label:e,value:e})),className:c.Z.dropdownClassContainer,error:I.errors,onChange:e=>{U?F(e,L):A(e,L)},selectionType:null===I||void 0===I||null===(V=I.options)||void 0===V?void 0:V.type,max:+(null!==(j=null===I||void 0===I||null===(G=I.options)||void 0===G?void 0:G.max)&&void 0!==j?j:0),fieldIcon:I.icon,backgroundColor:null!==I&&void 0!==I&&null!==(J=I.options)&&void 0!==J&&J.valueC&&null!==I&&void 0!==I&&I.value?null===I||void 0===I||null===(K=I.options)||void 0===K?void 0:K.valueC:"",value:void 0===I.value||null===I.value?"":I.value})):u.createElement("div",null,null===I||void 0===I?void 0:I.value);if("Radio"===(null===I||void 0===I?void 0:I.data_type_name)&&(null===I||void 0===I||null===(i=I.options)||void 0===i||null===(t=i.list)||void 0===t?void 0:t.length)>0)return u.createElement("div",{style:{width:"100%",border:"1px solid var(--app-color-gray-light)",padding:"20px",fontSize:"16px"}},null===I||void 0===I||null===(Q=I.options)||void 0===Q?void 0:Q.list.map(e=>u.createElement(u.Fragment,null,u.createElement("input",{style:{margin:"0 10px"},type:"radio",id:e,name:I.field_name,value:e,checked:(null===I||void 0===I?void 0:I.value)===e,onChange:e=>{var l,o;U?F(null===(l=e.target)||void 0===l?void 0:l.value,L):A(null===(o=e.target)||void 0===o?void 0:o.value,L)}}),u.createElement("label",{for:e},e))));if("Checkbox"===(null===I||void 0===I?void 0:I.data_type_name))return q?u.createElement("input",{type:"checkbox",defaultChecked:null!==(ee=I.value)&&void 0!==ee&&ee,onChange:e=>{U?F(e.target.checked,L):A(e.target.checked,L)}}):u.createElement("input",{type:"checkbox",checked:null!==(le=I.value)&&void 0!==le&&le,readOnly:!0});if("Formula"===(null===I||void 0===I?void 0:I.data_type_name)&&(null===I||void 0===I||null===(n=I.options)||void 0===n||null===(d=n.operator)||void 0===d?void 0:d.length)>0&&!1===Y){var Fe,We,qe,Be,Ye;const e=O.newStepComponents.filter(e=>null===e.options||(void 0===e.allowMultipleInputs||!1===e.options.allowMultipleInputs)),l=(0,w.LV)(null===I||void 0===I?void 0:I.options,N.selected_fields.filter(e=>I.options.list.includes(e.field_name)&&!e.options.mapToItem),[...O.components.filter(l=>e.every(e=>e.id!==l.id)),...ze.Z(e=>e.selected_fields.filter(e=>""===(null===e||void 0===e?void 0:e.value)).length>0,e)],null!==(Fe=null===O||void 0===O?void 0:O.items)&&void 0!==Fe?Fe:[],null!==(We=null===O||void 0===O?void 0:O.newStepComponents)&&void 0!==We?We:[]);return void 0!==l&&(I.value=l),"bar"===(null===I||void 0===I||null===(qe=I.options)||void 0===qe?void 0:qe.display)?u.createElement("div",{style:{margin:"20px",display:"flex",height:"30px",width:"100%"}},u.createElement("label",{className:c.Z.fieldTypeInput,style:{width:"20%"}},null===I||void 0===I?void 0:I.field_name),u.createElement("div",{style:{height:"20px",width:"80%",backgroundColor:null===I||void 0===I||null===(Be=I.options)||void 0===Be?void 0:Be.maxC,display:"flex",flexDirection:"column"}},u.createElement("input",{value:l||0,className:c.Z.fieldTypeInput,name:I.field_name,disabled:!0,style:{color:"transparent",height:"20px",width:"".concat(+l/+I.options.max*100,"%"),backgroundColor:null===I||void 0===I||null===(Ye=I.options)||void 0===Ye?void 0:Ye.barC}}))):l||""}if("Item Formula"===(null===I||void 0===I?void 0:I.data_type_name)&&(null===I||void 0===I||null===(a=I.options)||void 0===a||null===(r=a.operator)||void 0===r?void 0:r.length)>0&&!1===Y){var He,Ve,je;const e=(0,w.LV)(null===I||void 0===I?void 0:I.options,N.selected_fields.filter(e=>I.options.list.includes(e.field_name)&&e.options.mapToItem),[],[],B,!0);return"bar"===(null===I||void 0===I||null===(He=I.options)||void 0===He?void 0:He.display)?u.createElement("div",{style:{margin:"20px",display:"flex",height:"30px",width:"100%"}},u.createElement("label",{className:c.Z.fieldTypeInput,style:{width:"20%"}},null===I||void 0===I?void 0:I.field_name),u.createElement("div",{style:{height:"20px",width:"100%",backgroundColor:null===I||void 0===I||null===(Ve=I.options)||void 0===Ve?void 0:Ve.maxC,display:"flex",flexDirection:"column"}},u.createElement("input",{value:e||0,className:c.Z.fieldTypeInput,name:I.field_name,disabled:!0,style:{color:"transparent",height:"20px",width:"".concat(+e/+I.options.max*100,"%"),backgroundColor:null===I||void 0===I||null===(je=I.options)||void 0===je?void 0:je.barC}}))):e||""}if("Record"===(null===I||void 0===I?void 0:I.data_type_name)&&(null===I||void 0===I||null===(s=I.options)||void 0===s||null===(v=s.component_id)||void 0===v?void 0:v.length)>0){var Ge,Je,Ke,Xe,$e,el,ll,ol,il,tl,nl;const e=(null!==I&&void 0!==I&&null!==(Ge=I.options)&&void 0!==Ge&&Ge.global?Jl(null===I||void 0===I?void 0:I.data_type_name):X).filter(e=>{var l;return e.component_fields.filter(e=>{var l;return e.component_blueprint_id===(null===I||void 0===I||null===(l=I.options)||void 0===l?void 0:l.component_id)}).length>0||e.module_id===(null===I||void 0===I||null===(l=I.options)||void 0===l?void 0:l.module_id)}).map(e=>{var l,o,i,t;let n="";return null===I||void 0===I||null===(l=I.options)||void 0===l||null===(o=l.names)||void 0===o||o.map(l=>{var o,i;return n=""===n?null===(o=e.component_fields.find(e=>e.field_name===l))||void 0===o?void 0:o.value:"".concat(n," ").concat(null===(i=e.component_fields.find(e=>e.field_name===l))||void 0===i?void 0:i.value)}),{label:""===n?e.title:n,value:e.id,component:e,[null===I||void 0===I||null===(i=I.options)||void 0===i?void 0:i.output]:null===(t=e.component_fields.find(e=>{var l;return e.field_name===(null===I||void 0===I||null===(l=I.options)||void 0===l?void 0:l.output)}))||void 0===t?void 0:t.value}});let l;if(e.length>0)if(I.value){if(l=null===e||void 0===e?void 0:e.find(e=>{var l;return e[null===I||void 0===I||null===(l=I.options)||void 0===l?void 0:l.output]===I.value}),l){var dl,al;Gl(l.value);const e=[...null!==(dl=null===(al=O.currentStep)||void 0===al?void 0:al.component_blueprints)&&void 0!==dl?dl:[]];e&&(O.newStepComponents=e)}}else if(1==e.length&&1==(null===I||void 0===I?void 0:I.mandatory)&&(l=e[0],l)){var rl,sl;Gl(l.value);const e=[...null!==(rl=null===(sl=O.currentStep)||void 0===sl?void 0:sl.component_blueprints)&&void 0!==rl?rl:[]];e&&(O.newStepComponents=e)}return q?u.createElement("div",{style:{width:"inherit",border:"1px solid gray",minWidth:"300px"}},u.createElement(y.Z,{key:L,visible:null===I||void 0===I?void 0:I.visible,mandatory:null===I||void 0===I?void 0:I.mandatory,items:e,loading:te,error:"",className:c.Z.dropdownClassContainer,onChange:l=>{var o,i,t,n,d,a;l&&(null===I||void 0===I||null===(d=I.options)||void 0===d||null===(a=d.list)||void 0===a||a.map(o=>{const i=jl({field_name:o});var t,n;-1!=i&&(N.selected_fields[i].value=null!==(t=null===(n=e.find(e=>e.value===l).component.component_fields.find(e=>e.field_name===o))||void 0===n?void 0:n.value)&&void 0!==t?t:"",N.selected_fields[i].disabled=!0)}));$.start=!0,Gl(l),U?F(null!==(o=null===e||void 0===e?void 0:e.find(e=>e.value===l)[null===I||void 0===I||null===(i=I.options)||void 0===i?void 0:i.output])&&void 0!==o?o:null,L):A(null!==(t=null===e||void 0===e?void 0:e.find(e=>e.value===l)[null===I||void 0===I||null===(n=I.options)||void 0===n?void 0:n.output])&&void 0!==t?t:null,L)},selectionType:(null===I||void 0===I||null===(Je=I.options)||void 0===Je?void 0:Je.selection.length)>0?null===I||void 0===I||null===(Ke=I.options)||void 0===Ke?void 0:Ke.selection:null===I||void 0===I||null===(Xe=I.options)||void 0===Xe?void 0:Xe.type,backgroundColor:null!==I&&void 0!==I&&null!==($e=I.options)&&void 0!==$e&&$e.valueC&&null!==I&&void 0!==I&&I.value?null===I||void 0===I||null===(el=I.options)||void 0===el?void 0:el.valueC:"",value:null!==(ll=null===(ol=l)||void 0===ol?void 0:ol.label)&&void 0!==ll?ll:""})):u.createElement("div",{style:{backgroundColor:null!==I&&void 0!==I&&null!==(il=I.options)&&void 0!==il&&il.valueC?null===I||void 0===I||null===(tl=I.options)||void 0===tl?void 0:tl.valueC:""}},null===(nl=l)||void 0===nl?void 0:nl.label)}if("People"===(null===I||void 0===I?void 0:I.data_type_name)&&(null===I||void 0===I||null===(p=I.options)||void 0===p||null===(m=p.position_id)||void 0===m?void 0:m.length)>0){var vl,ul,cl,pl,ml,fl;const e=Fl.find(e=>e.label===(null===I||void 0===I?void 0:I.value));return u.createElement("div",{style:{display:"flex",justifyContent:"center"}},q&&u.createElement("div",{style:{width:"300px",border:"1px solid var(--app-color-gray-light)",height:"38px"}},u.createElement(y.Z,{onFocus:()=>{var e;return 0==Fl.length&&Yl(null===I||void 0===I||null===(e=I.options)||void 0===e?void 0:e.position_id)},visible:!0,mandatory:null===I||void 0===I?void 0:I.mandatory,className:c.Z.dropdownClassContainer,items:Fl.filter(e=>{var l,o;return(null===e||void 0===e||null===(l=e.user)||void 0===l||null===(o=l.positions)||void 0===o?void 0:o.filter(e=>{var l,o;return null===I||void 0===I||null===(l=I.options)||void 0===l||null===(o=l.position_id)||void 0===o?void 0:o.includes(null===e||void 0===e?void 0:e.id)}).length)>0}),value:"single"===(null===I||void 0===I||null===(vl=I.options)||void 0===vl?void 0:vl.type)?null===(ul=Fl.find(e=>{var l,o;return e.label===(null!==I&&void 0!==I&&null!==(l=I.options)&&void 0!==l&&l.mapToItem?null===I||void 0===I?void 0:I.value:null===(o=N.selected_fields[L])||void 0===o?void 0:o.value)}))||void 0===ul?void 0:ul.label:null!==I&&void 0!==I&&null!==(cl=I.options)&&void 0!==cl&&cl.mapToItem?null===I||void 0===I?void 0:I.value:null===(pl=N.selected_fields[L])||void 0===pl?void 0:pl.value,loading:te,error:null===I||void 0===I?void 0:I.errors,onChange:e=>{var l;if("single"===(null===I||void 0===I||null===(l=I.options)||void 0===l?void 0:l.type)){const l=Fl.find(l=>l.value===e);U?F(null===l||void 0===l?void 0:l.label,L):A(null===l||void 0===l?void 0:l.label,L)}else U?F(e,L):A(e,L)},selectionType:null===I||void 0===I||null===(ml=I.options)||void 0===ml?void 0:ml.type,fieldIcon:null===I||void 0===I?void 0:I.icon})),e&&u.createElement("div",{className:c.Z.avatarContentContainer},u.createElement("img",{alt:"lg",src:null===e||void 0===e||null===(fl=e.user)||void 0===fl?void 0:fl.photo,className:c.Z.avatarUrlImg})))}return"file"===I.data_type?u.createElement(Dl,{field_id:I.id,value:null===I||void 0===I?void 0:I.value,isInherited:z,checkIfAreMandatoryErrored:R,options:null===I||void 0===I?void 0:I.options,index:L,indexInContextArray:P}):"date"===I.data_type||null!==I&&void 0!==I&&null!==(f=I.options)&&void 0!==f&&f.country_code||null!==I&&void 0!==I&&null!==(_=I.options)&&void 0!==_&&_.currency_type||"Number"===I.data_type_name?q||"bar"===(null===I||void 0===I||null===(oe=I.options)||void 0===oe?void 0:oe.display)?u.createElement("div",{className:c.Z.fieldTypeInput,style:{paddingLeft:q?"":"0px",border:q?"1px solid var(--app-color-gray-light)":"none",height:"auto"}},"date"===I.data_type?"Range"===(null===I||void 0===I||null===(ie=I.options)||void 0===ie?void 0:ie.type)?u.createElement(x.$m,{inputContainerClassName:c.Z.inputContainerClassName,dateChangeHandler:e=>ql(e,L),startDate:ce,endDate:pe}):null!==I&&void 0!==I&&null!==(ne=I.options)&&void 0!==ne&&ne.time?u.createElement("div",{style:{width:"100%",height:"auto",border:"0"}},u.createElement(De(),{selected:null!==I&&void 0!==I&&I.value?new Date(null===I||void 0===I?void 0:I.value):new Date,showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:15,customInput:u.createElement("div",{style:{cursor:"pointer",display:"flex",justifyContent:"center",width:"100%",alignItems:"stretch",padding:"5px 0",border:"0px solid var(--app-color-gray-lighter)"}},u.createElement("input",{value:I.value?Qe()(I.value).format("DD MMMM YYYY HH:mm"):"",className:c.Z.inputValue,type:"text",style:{flex:1,marginTop:"auto",marginBottom:"auto",outline:"none",fontFamily:"var(--app-text-main-font)",fontSize:"14px",fontWeight:"bold",lineHeight:"20px",color:"#4A4A4A",textAlign:"left",maxWidth:"98%",border:"0px"},onChange:e=>{}}),u.createElement(ve.G,{icon:ue.WRo,style:{margin:"0 10px",width:"14px",height:"14px"}})),className:c.Z.singleInputContainer,onChange:e=>{F(e,L)}})):u.createElement(x.X9,{value:null!==I&&void 0!==I&&I.value?Qe()(new Date(null===I||void 0===I?void 0:I.value)).format("Do MMMM YYYY"):"",dateChangeHandler:e=>{U?F(e,L):Bl(e,L)},selected:new Date(Qe()(de,"YYYY-MM-DD")),iconClassName:c.Z.calendar,inputContainerClassName:c.Z.singleInputContainer,inputStyle:{textAlign:"left",border:"none",fontSize:"16px",margin:"0px 0 0px"},hasCalendarIcon:!0}):q&&u.createElement("input",{type:I.data_type,onBlur:e=>{U?F(e.target.value,L):D(e.target.value,L)},id:I.field_name,autoComplete:"none",defaultValue:null===I||void 0===I?void 0:I.value,className:c.Z.fieldTypeInput,name:I.field_name,style:{height:"33px",backgroundColor:null!==I&&void 0!==I&&null!==(ae=I.options)&&void 0!==ae&&ae.valueC?null===I||void 0===I||null===(re=I.options)||void 0===re?void 0:re.valueC:"",minWidth:U?"100px":""},disabled:null!==(se=null===I||void 0===I?void 0:I.disabled)&&void 0!==se&&se}),"bar"===(null===I||void 0===I||null===(me=I.options)||void 0===me?void 0:me.display)&&"Number"===(null===I||void 0===I?void 0:I.data_type_name)&&u.createElement("div",{style:{height:q?"5px":"20px",border:"none",width:"100%",backgroundColor:null===I||void 0===I||null===(fe=I.options)||void 0===fe?void 0:fe.maxC,display:"flex",flexDirection:"row"}},u.createElement("input",{value:"",className:c.Z.fieldTypeInput,name:I.field_name,style:{color:"transparent",border:"none",height:q?"5px":"20px",width:"".concat(+(null===I||void 0===I?void 0:I.value)/+I.options.max*100,"%"),backgroundColor:null!==I&&void 0!==I&&I.value?"0"===(null===I||void 0===I?void 0:I.value)?"transparent":null===I||void 0===I||null===(_e=I.options)||void 0===_e?void 0:_e.barC:"transparent"},disabled:!0}))):u.createElement("div",{style:{backgroundColor:null!==I&&void 0!==I&&null!==(ye=I.options)&&void 0!==ye&&ye.valueC?null===I||void 0===I||null===(he=I.options)||void 0===he?void 0:he.valueC:"",minWidth:U?"200px":""}},"date"===(null===I||void 0===I?void 0:I.data_type)?null!==I&&void 0!==I&&I.value?Qe()(null===I||void 0===I?void 0:I.value).format(null!==I&&void 0!==I&&null!==(ge=I.options)&&void 0!==ge&&ge.time?"DD MMMM YYYY HH:mm":"DD MMMM YYYY"):"":null===I||void 0===I?void 0:I.value):"Long Text"===I.data_type_name?q?null!==(be=I.options)&&void 0!==be&&be.rich?u.createElement(Cl(),{modules:w.WH,style:{fontFamily:"var(--app-text-main-font)",minHeight:"200px"},formats:w.dv,defaultValue:null===I||void 0===I?void 0:I.value,onChange:e=>I.value=e,onBlur:()=>{U?F(I.value,L):D(I.value,L)},theme:"snow"}):u.createElement("textarea",{className:c.Z.fieldTypeTextarea,style:{minWidth:U?"300px":"",border:"0px solid var(--app-color-gray-light)"},type:I.data_type,defaultValue:null!==I&&void 0!==I&&null!==(xe=I.options)&&void 0!==xe&&xe.mapToItem?null===I||void 0===I?void 0:I.value:null!==(Ee=N.selected_fields[L])&&void 0!==Ee&&Ee.value?null===(Ce=N.selected_fields[L])||void 0===Ce?void 0:Ce.value:""===Nl(null===I||void 0===I?void 0:I.options)?"":Nl(null===I||void 0===I?void 0:I.options),onFocus:()=>{},disabled:null!==(we=null===(Me=N.selected_fields[L])||void 0===Me?void 0:Me.disabled)&&void 0!==we&&we,autoComplete:"none",onBlur:e=>{U?F(e.target.value,L):D(e.target.value,L)},name:I.field_name}):null!==(Se=I.options)&&void 0!==Se&&Se.rich?u.createElement(Cl(),{modules:{toolbar:!1},style:{fontFamily:"var(--app-text-main-font)",minHeight:"200px"},readOnly:!0,formats:w.dv,defaultValue:null===I||void 0===I?void 0:I.value,onChange:()=>{},onBlur:()=>{},theme:"snow"}):u.createElement("div",{style:{backgroundColor:null!==I&&void 0!==I&&null!==(ke=I.options)&&void 0!==ke&&ke.valueC?null===I||void 0===I||null===(Ze=I.options)||void 0===Ze?void 0:Ze.valueC:"",minWidth:U?"300px":""}},null===I||void 0===I?void 0:I.value):"Link"===I.data_type_name?q?u.createElement("div",{style:{width:"inherit",display:"flex",flexDirection:"column"}},u.createElement("input",{type:I.data_type,onBlur:e=>{U?F(e.target.value,L):D(e.target.value,L)},autoComplete:"none",defaultValue:null!==I&&void 0!==I&&null!==(Ie=I.options)&&void 0!==Ie&&Ie.mapToItem?null===I||void 0===I?void 0:I.value:null!==(Ne=N.selected_fields[L])&&void 0!==Ne&&Ne.value?null===(Te=N.selected_fields[L])||void 0===Te?void 0:Te.value:""===Nl(null===I||void 0===I?void 0:I.options)?"":Nl(null===I||void 0===I?void 0:I.options),className:c.Z.fieldTypeInput,style:{border:"0px solid var(--app-color-gray-light)"},name:I.field_name,disabled:null!==(Pe=null===(Ae=N.selected_fields[L])||void 0===Ae?void 0:Ae.disabled)&&void 0!==Pe&&Pe})):((null===I||void 0===I||null===(Oe=I.value)||void 0===Oe?void 0:Oe.includes("jpg"))||(null===I||void 0===I||null===(Le=I.value)||void 0===Le?void 0:Le.includes("jpeg"))||(null===I||void 0===I||null===(Re=I.options)||void 0===Re?void 0:Re.image)||(null===I||void 0===I||null===(Ue=I.value)||void 0===Ue?void 0:Ue.includes("png")))&&u.createElement("img",{className:c.Z.avatarUrlImg,alt:"lg",onError:e=>e.target.src="https://i.quotev.com/b2gtjqawaaaa.jpg",src:null===I||void 0===I?void 0:I.value}):q?u.createElement("input",{type:I.data_type,onBlur:e=>{U?F(e.target.value,L):D(e.target.value,L)},autoComplete:"none",defaultValue:null!==I&&void 0!==I&&null!==(h=I.options)&&void 0!==h&&h.mapToItem?null===I||void 0===I?void 0:I.value:null!==(g=N.selected_fields[L])&&void 0!==g&&g.value?null===(b=N.selected_fields[L])||void 0===b?void 0:b.value:""===Nl(null===I||void 0===I?void 0:I.options)?"":Nl(null===I||void 0===I?void 0:I.options),className:c.Z.fieldTypeInput,style:{minWidth:U?"300px":"",border:"1px solid var(--app-color-gray-light)",backgroundColor:null!==I&&void 0!==I&&null!==(E=I.options)&&void 0!==E&&E.valueC?null===I||void 0===I||null===(C=I.options)||void 0===C?void 0:C.valueC:""},name:I.field_name,disabled:null!==(M=null===(S=N.selected_fields[L])||void 0===S?void 0:S.disabled)&&void 0!==M&&M}):u.createElement("div",{style:{backgroundColor:null!==I&&void 0!==I&&null!==(k=I.options)&&void 0!==k&&k.valueC?null===I||void 0===I||null===(Z=I.options)||void 0===Z?void 0:Z.valueC:"",minWidth:U?"200px":""}},null===I||void 0===I?void 0:I.value)},Xl=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],l=arguments.length>1?arguments[1]:void 0,o=arguments.length>2?arguments[2]:void 0;return 0==(null===e||void 0===e?void 0:e.length)?0:e.reduce((e,i)=>{var t,n,d,a,r,s,v,u,c;if(null===i[null===l||void 0===l||null===(t=l.options)||void 0===t?void 0:t.mapToItem]||""===i[null===l||void 0===l||null===(n=l.options)||void 0===n?void 0:n.mapToItem])return e;const p=null!==(d=null!==o&&void 0!==o&&null!==(a=o.options)&&void 0!==a&&a.simple?JSON.parse(null!==(r=i[null===l||void 0===l||null===(s=l.options)||void 0===s?void 0:s.mapToItem])&&void 0!==r?r:"{}")[l.field_name]:i[null===l||void 0===l||null===(v=l.options)||void 0===v?void 0:v.mapToItem])&&void 0!==d?d:0;return"itemsum"===(null===l||void 0===l||null===(u=l.options)||void 0===u?void 0:u.footer)?e+ +(""===p?0:"".concat(p)):"itemdiff"===(null===l||void 0===l||null===(c=l.options)||void 0===c?void 0:c.footer)?e-+(""===p?0:"".concat(p)):0},0)},$l=(e,l)=>{var o,i,t,n,d,a,_,E,k,Z,I,re,se,bl,xl,wl,Zl,$l,eo,lo,oo,io,to,no,ao,ro,so,vo,uo,co,po,mo,fo,_o,yo,ho,go,bo,xo,Eo,Co,wo,Mo,So,ko,Zo,Io,No,To,Do,Po,Ao,Oo,Lo,zo,Ro,Uo,Fo,Wo,qo,Bo,Yo,Ho,Vo,jo,Go,Jo,Ko,Qo,Xo;let $o="";if((null===e||void 0===e||null===(o=e.options)||void 0===o||null===(i=o.fieldToMatch)||void 0===i?void 0:i.length)>0){var ei,li,oi,ii,ti,ni,di,ai;const l=N.selected_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.fieldToMatch)});var ri,si,vi,ui,ci,pi,mi,fi,_i,yi,hi,gi,bi,xi,Ei,Ci;if(l&&(null===e||void 0===e||null===(ei=e.options)||void 0===ei||null===(li=ei.valueToMatch)||void 0===li?void 0:li.length)>0&&(null===e||void 0===e||null===(oi=e.options)||void 0===oi||null===(ii=oi.actionToPerform)||void 0===ii?void 0:ii.length)>0&&(null===e||void 0===e||null===(ti=e.options)||void 0===ti||null===(ni=ti.initialState)||void 0===ni?void 0:ni.length)>0)if(null!==e&&void 0!==e&&null!==(ri=e.options)&&void 0!==ri&&null!==(si=ri.valueToMatch)&&void 0!==si&&si.split(",").includes(null===l||void 0===l?void 0:l.value))"hide"===(null===e||void 0===e||null===(vi=e.options)||void 0===vi?void 0:vi.actionToPerform)?e.visible=!1:"visible"===(null===e||void 0===e||null===(ui=e.options)||void 0===ui?void 0:ui.actionToPerform)?e.visible=!0:"mandatory"===(null===e||void 0===e||null===(ci=e.options)||void 0===ci?void 0:ci.actionToPerform)?(e.mandatory=!0,e.visible=!0):"optional"===(null===e||void 0===e||null===(pi=e.options)||void 0===pi?void 0:pi.actionToPerform)?(e.mandatory=!1,e.visible=!0):"visman"===(null===e||void 0===e||null===(mi=e.options)||void 0===mi?void 0:mi.actionToPerform)?(e.mandatory=!0,e.visible=!0):"disable"===(null===e||void 0===e||null===(fi=e.options)||void 0===fi?void 0:fi.actionToPerform)&&($o="none");else"hidden"===(null===e||void 0===e||null===(_i=e.options)||void 0===_i?void 0:_i.initialState)?e.visible=!1:"visible"===(null===e||void 0===e||null===(yi=e.options)||void 0===yi?void 0:yi.initialState)?e.visible=!0:"mandatory"===(null===e||void 0===e||null===(hi=e.options)||void 0===hi?void 0:hi.initialState)?(e.mandatory=!0,e.visible=!0):"optional"===(null===e||void 0===e||null===(gi=e.options)||void 0===gi?void 0:gi.initialState)?(e.mandatory=!1,e.visible=!0):"visman"===(null===e||void 0===e||null===(bi=e.options)||void 0===bi?void 0:bi.actionToPerform)?(e.mandatory=!0,e.visible=!0):"disable"===(null===e||void 0===e||null===(xi=e.options)||void 0===xi?void 0:xi.actionToPerform)&&($o="none");if(l&&(null===e||void 0===e||null===(di=e.options)||void 0===di||null===(ai=di.valueToMatch2)||void 0===ai?void 0:ai.length)>0)if(null!==e&&void 0!==e&&null!==(Ei=e.options)&&void 0!==Ei&&null!==(Ci=Ei.valueToMatch2)&&void 0!==Ci&&Ci.split(",").includes(null===l||void 0===l?void 0:l.value)){var wi,Mi,Si,ki,Zi,Ii,Ni,Ti,Di,Pi,Ai,Oi,Li;if((null===e||void 0===e||null===(wi=e.options)||void 0===wi||null===(Mi=wi.value)||void 0===Mi?void 0:Mi.length)>0)if("Text"===(null===e||void 0===e?void 0:e.data_type_name))e.value=null===e||void 0===e||null===(Zi=e.options)||void 0===Zi?void 0:Zi.value,e.field.value=null===e||void 0===e||null===(Ii=e.options)||void 0===Ii?void 0:Ii.value;else if("Date"===(null===e||void 0===e?void 0:e.data_type_name)){var zi,Ri,Ui,Fi,Wi,qi;if(0==(null===e||void 0===e||null===(zi=e.value)||void 0===zi?void 0:zi.length)||void 0==(null===e||void 0===e?void 0:e.value))"today"===(null===e||void 0===e||null===(Ri=e.options)||void 0===Ri?void 0:Ri.value)?(e.value=new Date(Qe()((0,Ke.now)())),e.field.value=new Date(Qe()((0,Ke.now)()))):"tomorrow"===(null===e||void 0===e||null===(Ui=e.options)||void 0===Ui?void 0:Ui.value)?(e.value=new Date(Qe()((0,Ke.now)()).add(1,"days")),e.field.value=new Date(Qe()((0,Ke.now)()).add(1,"days"))):"week"===(null===e||void 0===e||null===(Fi=e.options)||void 0===Fi?void 0:Fi.value)?(e.value=new Date(Qe()((0,Ke.now)()).add(1,"weeks")),e.field.value=new Date(Qe()((0,Ke.now)()).add(1,"weeks"))):"month"===(null===e||void 0===e||null===(Wi=e.options)||void 0===Wi?void 0:Wi.value)&&(e.value=new Date(Qe()((0,Ke.now)()).add(1,"months")),e.field.value=new Date(Qe()((0,Ke.now)()).add(1,"months"))),"none"===(null===e||void 0===e||null===(qi=e.options)||void 0===qi?void 0:qi.value)&&(e.value=void 0,e.field.value=void 0)}if((null===e||void 0===e||null===(Si=e.options)||void 0===Si||null===(ki=Si.actionToPerform2)||void 0===ki?void 0:ki.length)>0)"hide"===(null===e||void 0===e||null===(Ni=e.options)||void 0===Ni?void 0:Ni.actionToPerform2)?(e.visible=!1,e.field.visible=!1):"visible"===(null===e||void 0===e||null===(Ti=e.options)||void 0===Ti?void 0:Ti.actionToPerform2)?e.visible=!0:"mandatory"===(null===e||void 0===e||null===(Di=e.options)||void 0===Di?void 0:Di.actionToPerform2)?(e.mandatory=!0,e.visible=!0,e.field.mandatory=!0,e.field.visible=!0):"optional"===(null===e||void 0===e||null===(Pi=e.options)||void 0===Pi?void 0:Pi.actionToPerform2)?(e.mandatory=!1,e.visible=!0,e.field.mandatory=!1,e.field.visible=!0):"visman"===(null===e||void 0===e||null===(Ai=e.options)||void 0===Ai?void 0:Ai.actionToPerform2)?(e.mandatory=!0,e.visible=!0,e.field.mandatory=!0,e.field.visible=!0):"disable"===(null===e||void 0===e||null===(Oi=e.options)||void 0===Oi?void 0:Oi.actionToPerform2)?$o="none":"enable"===(null===e||void 0===e||null===(Li=e.options)||void 0===Li?void 0:Li.actionToPerform2)&&($o="")}e.field.mandatory=e.mandatory,e.field.visible=e.visible}if("Record"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(t=e.options)||void 0===t||null===(n=t.component_id)||void 0===n?void 0:n.length)>0){var Bi,Yi,Hi,Vi,ji,Gi,Ji,Ki,Qi,Xi,$i,et,lt,ot,it,tt,nt,dt,at,rt,st,vt,ut,ct,pt,mt,ft,_t,yt,ht,gt,bt,xt,Et,Ct,wt,Mt,St,kt,Zt,It,Nt,Tt,Dt,Pt,At,Ot,Lt,zt,Rt,Ut,Ft,Wt,qt,Bt,Yt;const o=(null!==e&&void 0!==e&&null!==(Bi=e.options)&&void 0!==Bi&&Bi.global?Jl(null===e||void 0===e?void 0:e.data_type_name):X).filter(l=>{var o;return l.component_fields.filter(l=>{var o;return l.component_blueprint_id===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.component_id)}).length>0||l.module_id===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.module_id)}),i=o.map(l=>{var o,i,t,n;let d="";return null===e||void 0===e||null===(o=e.options)||void 0===o||null===(i=o.names)||void 0===i||i.map(e=>{var o,i;return d=""===d?null===(o=l.component_fields.find(l=>l.field_name===e))||void 0===o?void 0:o.value:"".concat(d," ").concat(null===(i=l.component_fields.find(l=>l.field_name===e))||void 0===i?void 0:i.value)}),{label:""===d?l.title:d,value:l.id,component:l,[null===e||void 0===e||null===(t=e.options)||void 0===t?void 0:t.output]:null===(n=l.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.output)}))||void 0===n?void 0:n.value}});let t;if((null===e||void 0===e||null===(Yi=e.options)||void 0===Yi||null===(Hi=Yi.filters)||void 0===Hi?void 0:Hi.length)>0){if((null===o||void 0===o?void 0:o.length)>0)if(e.value){if(t=o.find(l=>l.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.output)&&l.value===e.value})),t){var Ht,Vt,jt;Gl(null===(Ht=t)||void 0===Ht?void 0:Ht.id);const e=[...null!==(Vt=null===(jt=O.currentStep)||void 0===jt?void 0:jt.component_blueprints)&&void 0!==Vt?Vt:[]];e&&(O.newStepComponents=e)}}else if(1==i.length&&(t=o[0],t)){var Gt,Jt,Kt;Gl(null===(Gt=t)||void 0===Gt?void 0:Gt.id);const e=[...null!==(Jt=null===(Kt=O.currentStep)||void 0===Kt?void 0:Kt.component_blueprints)&&void 0!==Jt?Jt:[]];e&&(O.newStepComponents=e)}if(1==i.length||e.value){var Qt,Xt,$t,en;if((null===e||void 0===e||null===(Qt=e.options)||void 0===Qt?void 0:Qt.filters.length)>0)_e[null===e||void 0===e||null===($t=e.options)||void 0===$t?void 0:$t.filters[0]]=Re.Z(Ue.Z("value"))(o.map(l=>{const o=null===l||void 0===l?void 0:l.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[1])});return{label:null===o||void 0===o?void 0:o.value,value:null===o||void 0===o?void 0:o.value,component:l}}).filter(l=>{var o;return(null===(o=l.component)||void 0===o?void 0:o.component_fields.filter(l=>{var o,i;return l.value===(null===(o=t)||void 0===o||null===(i=o.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[0])}))||void 0===i?void 0:i.value)}).length)>0}));if((null===e||void 0===e||null===(Xt=e.options)||void 0===Xt?void 0:Xt.filters.length)>1)_e[null===e||void 0===e||null===(en=e.options)||void 0===en?void 0:en.filters[1]]=Re.Z(Ue.Z("value"))(o.map(l=>{const o=l.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[2])});return{label:null===o||void 0===o?void 0:o.value,value:null===o||void 0===o?void 0:o.value,component:l}}).filter(l=>{var o;return(null===(o=l.component)||void 0===o?void 0:o.component_fields.filter(l=>{var o,i;return l.value===(null===(o=t)||void 0===o||null===(i=o.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[1])}))||void 0===i?void 0:i.value)}).length)>0}))}}else if(i.length>0)if(e.value){if(t=null===i||void 0===i?void 0:i.find(l=>{var o;return l[null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.output]===e.value}),t){var ln,on;Gl(t.value);const e=[...null!==(ln=null===(on=O.currentStep)||void 0===on?void 0:on.component_blueprints)&&void 0!==ln?ln:[]];e&&(O.newStepComponents=e)}}else if(1==i.length&&1==(null===e||void 0===e?void 0:e.mandatory)&&(t=i[0],t)){var tn,nn;Gl(t.value);const e=[...null!==(tn=null===(nn=O.currentStep)||void 0===nn?void 0:nn.component_blueprints)&&void 0!==tn?tn:[]];e&&(O.newStepComponents=e)}return 1==(null===e||void 0===e||null===(Vi=e.options)||void 0===Vi||null===(ji=Vi.filters)||void 0===ji?void 0:ji.length)?u.createElement("div",{style:{width:"inherit",fontSize:"16px"}},u.createElement("label",{style:{fontWeight:"normal",fontSize:"15px"}},null===(Gi=K.find(l=>{var o;return l.id===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.component_id)}))||void 0===Gi?void 0:Gi.name),!t&&(null===e||void 0===e?void 0:e.value)&&u.createElement("div",{key:l},"A record ( ".concat(null===e||void 0===e?void 0:e.value," ) was previously selected but not found. Press the refresh button on the upper right side to retrieve the missing record. If record is still not found, please check with your admin.")),u.createElement(y.Z,{visible:null===e||void 0===e?void 0:e.visible,mandatory:1==(null===e||void 0===e||null===(Ji=e.options)||void 0===Ji||null===(Ki=Ji.filters)||void 0===Ki?void 0:Ki.length)&&(null===e||void 0===e?void 0:e.mandatory),items:Re.Z(Ue.Z("value"))(null===(Qi=o.map(l=>{const o=l.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[0])});return{label:null===o||void 0===o?void 0:o.value,value:null===o||void 0===o?void 0:o.value,component:l}}))||void 0===Qi?void 0:Qi.concat({label:"...More",value:"more"})),loading:te,error:1==(null===e||void 0===e||null===(Xi=e.options)||void 0===Xi||null===($i=Xi.filters)||void 0===$i?void 0:$i.length)?null===e||void 0===e?void 0:e.errors:"",onChange:i=>{var t,n,d,a,r,s,v;"more"!==i?(null===e||void 0===e||null===(t=e.options)||void 0===t||null===(n=t.filters)||void 0===n?void 0:n.length)>1?(A(void 0,l),xe(!1),ge(!1),setTimeout(()=>{ge(!0),xe(!0)},10),ye({[null===e||void 0===e||null===(d=e.options)||void 0===d?void 0:d.filters[0]]:Re.Z(Ue.Z("value"))(o.map(l=>{const o=l.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[1])});return{label:null===o||void 0===o?void 0:o.value,value:null===o||void 0===o?void 0:o.value,component:l,selected:i}}).filter(l=>l.component.component_fields.filter(l=>{var o;return l.value===i&&l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[0])}).length>0))})):(Me("50px"),A(null!==(a=null===(r=o.find(e=>e.component_fields.filter(e=>e.value===i).length>0))||void 0===r||null===(s=r.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.output)}))||void 0===s?void 0:s.value)&&void 0!==a?a:null,l),Gl(null===(v=o.find(e=>e.component_fields.filter(e=>e.value===i).length>0))||void 0===v?void 0:v.id)):Kl()},backgroundColor:null!==e&&void 0!==e&&null!==(et=e.options)&&void 0!==et&&et.valueC&&null!==e&&void 0!==e&&e.value?null===e||void 0===e||null===(lt=e.options)||void 0===lt?void 0:lt.valueC:"",value:t?null===(ot=t.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[0])}))||void 0===ot?void 0:ot.value:""})):(null===e||void 0===e||null===(it=e.options)||void 0===it||null===(tt=it.filters)||void 0===tt?void 0:tt.length)>1?u.createElement("div",{key:l,className:c.Z.filtersContainer,style:{width:"inherit",display:null!==e&&void 0!==e&&e.visible?"":"none",pointerEvents:$o,paddingTop:"20px"}},!t&&(null===e||void 0===e?void 0:e.value)&&u.createElement("div",{key:l},"A record ( ".concat(null===e||void 0===e?void 0:e.value," ) was previously selected but not found. Press the refresh button on the upper right side to retrieve the missing record. If record is still not found, please check with your admin.")),(null===e||void 0===e||null===(nt=e.options)||void 0===nt||null===(dt=nt.filters)||void 0===dt?void 0:dt.length)>0&&u.createElement(u.Fragment,null,u.createElement("label",{style:{fontWeight:"normal",fontSize:"15px"}},null===e||void 0===e||null===(at=e.options)||void 0===at?void 0:at.filters[0]),u.createElement(y.Z,{visible:null===e||void 0===e?void 0:e.visible,mandatory:1==(null===e||void 0===e||null===(rt=e.options)||void 0===rt||null===(st=rt.filters)||void 0===st?void 0:st.length)&&(null===e||void 0===e?void 0:e.mandatory),items:Re.Z(Ue.Z("value"))(o.map(l=>{const o=l.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[0])});return{label:null===o||void 0===o?void 0:o.value,value:null===o||void 0===o?void 0:o.value,component:l}})),loading:te,error:1==(null===e||void 0===e||null===(vt=e.options)||void 0===vt||null===(ut=vt.filters)||void 0===ut?void 0:ut.length)?null===e||void 0===e?void 0:e.errors:"",onChange:i=>{var t,n,d,a,r,s,v;(null===e||void 0===e||null===(t=e.options)||void 0===t||null===(n=t.filters)||void 0===n?void 0:n.length)>1?(A(void 0,l),xe(!1),ge(!1),setTimeout(()=>{ge(!0),xe(!0)},10),ye({[null===e||void 0===e||null===(d=e.options)||void 0===d?void 0:d.filters[0]]:Re.Z(Ue.Z("value"))(o.map(l=>{const o=l.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[1])});return{label:null===o||void 0===o?void 0:o.value,value:null===o||void 0===o?void 0:o.value,component:l,selected:i}}).filter(l=>l.component.component_fields.filter(l=>{var o;return l.value===i&&l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[0])}).length>0))})):(Me("50px"),A(null!==(a=null===(r=o.find(e=>e.component_fields.filter(e=>e.value===i).length>0))||void 0===r||null===(s=r.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.output)}))||void 0===s?void 0:s.value)&&void 0!==a?a:null,l),Gl(null===(v=o.find(e=>e.component_fields.filter(e=>e.value===i).length>0))||void 0===v?void 0:v.id))},value:t?null===(ct=t.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[0])}))||void 0===ct?void 0:ct.value:"",backgroundColor:null!==e&&void 0!==e&&null!==(pt=e.options)&&void 0!==pt&&pt.valueC&&null!==e&&void 0!==e&&e.value?null===e||void 0===e||null===(mt=e.options)||void 0===mt?void 0:mt.valueC:""})),u.createElement("div",{style:{display:null!==e&&void 0!==e&&e.visible?"":"none",margin:"10px 0"}},(null===e||void 0===e||null===(ft=e.options)||void 0===ft||null===(_t=ft.filters)||void 0===_t?void 0:_t.length)>1&&he&&u.createElement(u.Fragment,null,u.createElement("label",{style:{fontWeight:"normal",fontSize:"15px"}},null===e||void 0===e||null===(yt=e.options)||void 0===yt?void 0:yt.filters[1]),u.createElement(y.Z,{visible:null===e||void 0===e?void 0:e.visible,mandatory:2==(null===e||void 0===e||null===(ht=e.options)||void 0===ht||null===(gt=ht.filters)||void 0===gt?void 0:gt.length)&&(null===e||void 0===e?void 0:e.mandatory),items:null!==(bt=_e[null===e||void 0===e||null===(xt=e.options)||void 0===xt?void 0:xt.filters[0]])&&void 0!==bt?bt:[],loading:te,onClicked:e=>Me(e?"180px":"50px"),onChange:i=>{var t,n,d,a,r,s,u,c,p;(null===e||void 0===e||null===(t=e.options)||void 0===t||null===(n=t.filters)||void 0===n?void 0:n.length)>2?(xe(!1),setTimeout(()=>xe(!0),10),ye((0,v.Z)((0,v.Z)({},_e),{},{[null===e||void 0===e||null===(d=e.options)||void 0===d?void 0:d.filters[1]]:null!==(a=Re.Z(Ue.Z("value"))(o.map(l=>{const o=l.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[2])});return{label:null===o||void 0===o?void 0:o.value,value:null===o||void 0===o?void 0:o.value,component:l}}).filter(l=>l.component.component_fields.filter(l=>{var o;return l.value===i&&l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[1])}).length>0).filter(l=>l.component.component_fields.filter(l=>{var o,i;return l.value===_e[null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[0]][0].component.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[0])}).value&&l.field_name===(null===e||void 0===e||null===(i=e.options)||void 0===i?void 0:i.filters[0])}).length>0)))&&void 0!==a?a:[]}))):(Me("50px"),$.start=!0,A(null!==(r=null===(s=_e[null===e||void 0===e||null===(c=e.options)||void 0===c?void 0:c.filters[0]])||void 0===s||null===(u=s.find(e=>e.value===i))||void 0===u?void 0:u.component.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.output)}).value)&&void 0!==r?r:null,l),Gl(_e[null===e||void 0===e||null===(p=e.options)||void 0===p?void 0:p.filters[0]].find(e=>e.value===i).component.id),xe(!1),ge(!1),setTimeout(()=>{ge(!0),xe(!0)},10))},backgroundColor:null!==e&&void 0!==e&&null!==(Et=e.options)&&void 0!==Et&&Et.valueC&&null!==e&&void 0!==e&&e.value?null===e||void 0===e||null===(Ct=e.options)||void 0===Ct?void 0:Ct.valueC:"",value:t?null===(wt=t.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[1])}))||void 0===wt?void 0:wt.value:""}))),u.createElement("div",{style:{display:null!==e&&void 0!==e&&e.visible?"":"none",margin:"10px 0"}},(null===e||void 0===e||null===(Mt=e.options)||void 0===Mt||null===(St=Mt.filters)||void 0===St?void 0:St.length)>2&&be&&u.createElement(u.Fragment,null,u.createElement("label",{style:{fontWeight:"normal",fontSize:"15px"}},null===e||void 0===e||null===(kt=e.options)||void 0===kt?void 0:kt.filters[2]),u.createElement(y.Z,{visible:null===e||void 0===e?void 0:e.visible,mandatory:3==(null===e||void 0===e||null===(Zt=e.options)||void 0===Zt||null===(It=Zt.filters)||void 0===It?void 0:It.length)&&(null===e||void 0===e?void 0:e.mandatory),items:null!==(Nt=_e[null===e||void 0===e||null===(Tt=e.options)||void 0===Tt?void 0:Tt.filters[1]])&&void 0!==Nt?Nt:[],loading:te,onClicked:e=>Me(e?"180px":"50px"),onChange:o=>{var i,t,n,d,a;Me("50px"),$.start=!0,A(null!==(i=null===(t=_e[null===e||void 0===e||null===(d=e.options)||void 0===d?void 0:d.filters[1]])||void 0===t||null===(n=t.find(e=>e.value===o))||void 0===n?void 0:n.component.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.output)}).value)&&void 0!==i?i:null,l),Gl(_e[null===e||void 0===e||null===(a=e.options)||void 0===a?void 0:a.filters[1]].find(e=>e.value===o).component.id)},backgroundColor:null!==e&&void 0!==e&&null!==(Dt=e.options)&&void 0!==Dt&&Dt.valueC&&null!==e&&void 0!==e&&e.value?null===e||void 0===e||null===(Pt=e.options)||void 0===Pt?void 0:Pt.valueC:"",value:t?null===(At=t.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[2])}))||void 0===At?void 0:At.value:""}))),null===e||void 0===e||null===(Ot=e.options)||void 0===Ot?void 0:Ot.notes):"Tiles"===(null===e||void 0===e||null===(Lt=e.options)||void 0===Lt?void 0:Lt.selection)?u.createElement("div",{style:{width:"100%",fontSize:"16px"}},K.find(l=>{var o;return l.id===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.component_id)}).name,u.createElement("div",{style:{width:ml.tq?"100%":"50%"}},u.createElement(Ne.default,{rowStyleSelected:{border:"2px solid black"},initialSelected:i.map(l=>{var o;return l[null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.output]}).indexOf(null===e||void 0===e?void 0:e.value),modern:!0,isReport:!1,"app-variant-is-mobile":"true",columns:null===e||void 0===e||null===(zt=e.options)||void 0===zt?void 0:zt.names,list:i.map(e=>{const l=e;return e.component.component_fields.filter(e=>{l[e.field_name]=e.value}),l}),onListItemClick:o=>{var t,n,d,a,r;o&&(null===e||void 0===e||null===(r=e.options)||void 0===r||r.list.map(e=>{const l=jl({field_name:e});var i,t;-1!=l&&(N.selected_fields[l].value=null!==(i=null===(t=o.component.component_fields.find(l=>l.field_name===e))||void 0===t?void 0:t.value)&&void 0!==i?i:"",N.selected_fields[l].disabled=!0)}));Gl(o),A(null!==(t=null===i||void 0===i||null===(n=i.find(e=>e.value===o.value))||void 0===n||null===(d=n.component.component_fields)||void 0===d||null===(a=d.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.output)}))||void 0===a?void 0:a.value)&&void 0!==t?t:null,l)}}))):u.createElement("div",{style:{width:"100%",fontSize:"16px"}},u.createElement("div",{style:{width:"inherit",border:"1px solid gray"}},u.createElement(y.Z,{key:l,visible:null===e||void 0===e?void 0:e.visible,mandatory:null===e||void 0===e?void 0:e.mandatory,items:i,loading:te,error:"",className:c.Z.dropdownClassContainer,onClicked:e=>Me(e?"100px":"50px"),onChange:o=>{var t,n,d,a;o&&(null===e||void 0===e||null===(d=e.options)||void 0===d||null===(a=d.list)||void 0===a||a.map(e=>{const l=jl({field_name:e});var t,n;-1!=l&&(N.selected_fields[l].value=null!==(t=null===(n=i.find(e=>e.value===o).component.component_fields.find(l=>l.field_name===e))||void 0===n?void 0:n.value)&&void 0!==t?t:"",N.selected_fields[l].disabled=!0)}));$.start=!0,Me("50px"),Gl(o),A(null!==(t=null===i||void 0===i?void 0:i.find(e=>e.value===o)[null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.output])&&void 0!==t?t:null,l)},selectionType:(null===e||void 0===e||null===(Rt=e.options)||void 0===Rt?void 0:Rt.selection.length)>0?null===e||void 0===e||null===(Ut=e.options)||void 0===Ut?void 0:Ut.selection:null===e||void 0===e||null===(Ft=e.options)||void 0===Ft?void 0:Ft.type,backgroundColor:null!==e&&void 0!==e&&null!==(Wt=e.options)&&void 0!==Wt&&Wt.valueC&&null!==e&&void 0!==e&&e.value?null===e||void 0===e||null===(qt=e.options)||void 0===qt?void 0:qt.valueC:"",value:null!==(Bt=null===(Yt=t)||void 0===Yt?void 0:Yt.label)&&void 0!==Bt?Bt:""})))}if("Filters"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(d=e.options)||void 0===d||null===(a=d.component_id)||void 0===a?void 0:a.length)>0){var dn,an,rn,sn,vn,un,cn,pn,mn,fn,_n,yn,hn,gn,bn,xn,En,Cn,wn,Mn,Sn,kn,Zn,In,Nn,Tn,Dn,Pn,An,On,Ln,zn,Rn,Un,Fn,Wn,qn;const o=(null!==e&&void 0!==e&&null!==(dn=e.options)&&void 0!==dn&&dn.global?Jl(null===e||void 0===e?void 0:e.data_type_name):X).filter(l=>l.component_fields.filter(l=>{var o;return l.component_blueprint_id===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.component_id)}).length>0),i=o.map(l=>{var o,i;return{label:l.title,value:l.id,component:l,[null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.output]:null===(i=l.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.output)}))||void 0===i?void 0:i.value}});let t;if(o.length>0){if(e.value){if(t=o.find(l=>l.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.output)&&l.value===e.value})),t){var Bn,Yn,Hn;Gl(null===(Bn=t)||void 0===Bn?void 0:Bn.id);const e=[...null!==(Yn=null===(Hn=O.currentStep)||void 0===Hn?void 0:Hn.component_blueprints)&&void 0!==Yn?Yn:[]];e&&(O.newStepComponents=e)}}else if(1==i.length&&1==(null===e||void 0===e?void 0:e.mandatory)&&(t=o[0],t)){var Vn,jn,Gn;Gl(null===(Vn=t)||void 0===Vn?void 0:Vn.id);const e=[...null!==(jn=null===(Gn=O.currentStep)||void 0===Gn?void 0:Gn.component_blueprints)&&void 0!==jn?jn:[]];e&&(O.newStepComponents=e)}if(1==i.length||e.value){var Jn,Kn,Qn,Xn;if((null===e||void 0===e||null===(Jn=e.options)||void 0===Jn?void 0:Jn.filters.length)>0)_e[null===e||void 0===e||null===(Qn=e.options)||void 0===Qn?void 0:Qn.filters[0]]=Re.Z(Ue.Z("value"))(o.map(l=>{const o=null===l||void 0===l?void 0:l.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[1])});return{label:null===o||void 0===o?void 0:o.value,value:null===o||void 0===o?void 0:o.value,component:l}}));if((null===e||void 0===e||null===(Kn=e.options)||void 0===Kn?void 0:Kn.filters.length)>1)_e[null===e||void 0===e||null===(Xn=e.options)||void 0===Xn?void 0:Xn.filters[1]]=Re.Z(Ue.Z("value"))(o.map(l=>{const o=l.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[2])});return{label:null===o||void 0===o?void 0:o.value,value:null===o||void 0===o?void 0:o.value,component:l}}))}}return u.createElement("div",{key:l,className:c.Z.filtersContainer,style:{width:"inherit",display:null!==e&&void 0!==e&&e.visible?"":"none",pointerEvents:$o}},null===(an=K.find(l=>{var o;return l.id===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.component_id)}))||void 0===an?void 0:an.name,u.createElement("br",null),u.createElement("br",null),!t&&(null===e||void 0===e?void 0:e.value)&&u.createElement("div",{key:l},"A record ( ".concat(null===e||void 0===e?void 0:e.value," ) was previously selected but not found. Press the refresh button on the upper right side to retrieve the missing record. If record is still not found, please check with your admin.")),(null===e||void 0===e||null===(rn=e.options)||void 0===rn||null===(sn=rn.filters)||void 0===sn?void 0:sn.length)>0&&u.createElement("div",{style:{display:null!==e&&void 0!==e&&e.visible?"":"none",marginBottom:"10px"}},u.createElement("label",{style:{fontWeight:"normal",fontSize:"15px"}},null===e||void 0===e||null===(vn=e.options)||void 0===vn?void 0:vn.filters[0]),u.createElement(y.Z,{visible:null===e||void 0===e?void 0:e.visible,className:c.Z.dropdownSelectComponent,mandatory:1==(null===e||void 0===e||null===(un=e.options)||void 0===un||null===(cn=un.filters)||void 0===cn?void 0:cn.length)&&(null===e||void 0===e?void 0:e.mandatory),items:Re.Z(Ue.Z("value"))(null===(pn=o.map(l=>{const o=l.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[0])});return{label:null===o||void 0===o?void 0:o.value,value:null===o||void 0===o?void 0:o.value,component:l}}))||void 0===pn?void 0:pn.concat({label:"...More",value:"more"})),loading:te,error:1==(null===e||void 0===e||null===(mn=e.options)||void 0===mn||null===(fn=mn.filters)||void 0===fn?void 0:fn.length)?null===e||void 0===e?void 0:e.errors:"",onChange:i=>{var t,n,d,a,r;"more"!==i?(null===e||void 0===e||null===(t=e.options)||void 0===t||null===(n=t.filters)||void 0===n?void 0:n.length)>1?(A(void 0,l),xe(!1),ge(!1),setTimeout(()=>{ge(!0),xe(!0)},10),ye({[null===e||void 0===e||null===(d=e.options)||void 0===d?void 0:d.filters[0]]:Re.Z(Ue.Z("value"))(o.map(l=>{const o=l.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[1])});return{label:null===o||void 0===o?void 0:o.value,value:null===o||void 0===o?void 0:o.value,component:l,selected:i}}).filter(l=>l.component.component_fields.filter(l=>{var o;return l.value===i&&l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[0])}).length>0))})):(Me("50px"),A(null!==(a=o.find(e=>e.value===i)[null===e||void 0===e||null===(r=e.options)||void 0===r?void 0:r.output])&&void 0!==a?a:null,l),Gl(o.find(e=>e.value===i).component.id)):Kl()},backgroundColor:null!==e&&void 0!==e&&null!==(_n=e.options)&&void 0!==_n&&_n.valueC&&null!==e&&void 0!==e&&e.value?null===e||void 0===e||null===(yn=e.options)||void 0===yn?void 0:yn.valueC:"",value:t?null===(hn=t.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[0])}))||void 0===hn?void 0:hn.value:""})),u.createElement("div",{style:{display:null!==e&&void 0!==e&&e.visible?"":"none",marginBottom:"10px"}},(null===e||void 0===e||null===(gn=e.options)||void 0===gn||null===(bn=gn.filters)||void 0===bn?void 0:bn.length)>1&&he&&u.createElement(u.Fragment,null,u.createElement("label",{style:{fontWeight:"normal",fontSize:"15px"}},null===e||void 0===e||null===(xn=e.options)||void 0===xn?void 0:xn.filters[1]),u.createElement(y.Z,{className:c.Z.dropdownSelectComponent,visible:null===e||void 0===e?void 0:e.visible,mandatory:2==(null===e||void 0===e||null===(En=e.options)||void 0===En||null===(Cn=En.filters)||void 0===Cn?void 0:Cn.length)&&(null===e||void 0===e?void 0:e.mandatory),items:null!==(wn=_e[null===e||void 0===e||null===(Mn=e.options)||void 0===Mn?void 0:Mn.filters[0]])&&void 0!==wn?wn:[],loading:te,error:2==(null===e||void 0===e||null===(Sn=e.options)||void 0===Sn||null===(kn=Sn.filters)||void 0===kn?void 0:kn.length)?null===e||void 0===e?void 0:e.errors:"",onClicked:e=>Me(e?"180px":"50px"),onChange:i=>{var t,n,d,a,r,s,u,c,p;(null===e||void 0===e||null===(t=e.options)||void 0===t||null===(n=t.filters)||void 0===n?void 0:n.length)>2?(xe(!1),setTimeout(()=>xe(!0),10),ye((0,v.Z)((0,v.Z)({},_e),{},{[null===e||void 0===e||null===(d=e.options)||void 0===d?void 0:d.filters[1]]:null!==(a=Re.Z(Ue.Z("value"))(o.map(l=>{const o=l.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[2])});return{label:null===o||void 0===o?void 0:o.value,value:null===o||void 0===o?void 0:o.value,component:l}}).filter(l=>l.component.component_fields.filter(l=>{var o;return l.value===i&&l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[1])}).length>0).filter(l=>l.component.component_fields.filter(l=>{var o,i;return l.value===_e[null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[0]][0].component.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[0])}).value&&l.field_name===(null===e||void 0===e||null===(i=e.options)||void 0===i?void 0:i.filters[0])}).length>0)))&&void 0!==a?a:[]}))):(Me("50px"),$.start=!0,A(null!==(r=null===(s=_e[null===e||void 0===e||null===(c=e.options)||void 0===c?void 0:c.filters[0]])||void 0===s||null===(u=s.find(e=>e.value===i))||void 0===u?void 0:u.component.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.output)}).value)&&void 0!==r?r:null,l),Gl(_e[null===e||void 0===e||null===(p=e.options)||void 0===p?void 0:p.filters[0]].find(e=>e.value===i).component.id))},backgroundColor:null!==e&&void 0!==e&&null!==(Zn=e.options)&&void 0!==Zn&&Zn.valueC&&null!==e&&void 0!==e&&e.value?null===e||void 0===e||null===(In=e.options)||void 0===In?void 0:In.valueC:"",value:t?null===(Nn=t.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[1])}))||void 0===Nn?void 0:Nn.value:""}))),u.createElement("div",{style:{display:null!==e&&void 0!==e&&e.visible?"":"none",marginBottom:"10px"}},(null===e||void 0===e||null===(Tn=e.options)||void 0===Tn||null===(Dn=Tn.filters)||void 0===Dn?void 0:Dn.length)>2&&be&&u.createElement(u.Fragment,null,u.createElement("label",{style:{fontWeight:"normal",fontSize:"15px"}},null===e||void 0===e||null===(Pn=e.options)||void 0===Pn?void 0:Pn.filters[2]),u.createElement(y.Z,{visible:null===e||void 0===e?void 0:e.visible,className:c.Z.dropdownSelectComponent,mandatory:3==(null===e||void 0===e||null===(An=e.options)||void 0===An||null===(On=An.filters)||void 0===On?void 0:On.length)&&(null===e||void 0===e?void 0:e.mandatory),items:null!==(Ln=_e[null===e||void 0===e||null===(zn=e.options)||void 0===zn?void 0:zn.filters[1]])&&void 0!==Ln?Ln:[],loading:te,error:3==(null===e||void 0===e||null===(Rn=e.options)||void 0===Rn||null===(Un=Rn.filters)||void 0===Un?void 0:Un.length)?null===e||void 0===e?void 0:e.errors:"",onClicked:e=>Me(e?"180px":"50px"),onChange:o=>{var i,t,n,d,a;Me("50px"),$.start=!0,A(null!==(i=null===(t=_e[null===e||void 0===e||null===(d=e.options)||void 0===d?void 0:d.filters[1]])||void 0===t||null===(n=t.find(e=>e.value===o))||void 0===n?void 0:n.component.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.output)}).value)&&void 0!==i?i:null,l),Gl(_e[null===e||void 0===e||null===(a=e.options)||void 0===a?void 0:a.filters[1]].find(e=>e.value===o).component.id)},backgroundColor:null!==e&&void 0!==e&&null!==(Fn=e.options)&&void 0!==Fn&&Fn.valueC&&null!==e&&void 0!==e&&e.value?null===e||void 0===e||null===(Wn=e.options)||void 0===Wn?void 0:Wn.valueC:"",value:t?null===(qn=t.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[2])}))||void 0===qn?void 0:qn.value:""}))))}if("Global"!==(null===e||void 0===e?void 0:e.data_type_name)&&"Connector"!==(null===e||void 0===e?void 0:e.data_type_name)&&"Emails"!==(null===e||void 0===e?void 0:e.data_type_name)&&"Template"!==(null===e||void 0===e?void 0:e.data_type_name)){var $n,ed,ld,od,id,td,nd,dd,ad,rd,sd,vd,ud,cd,pd,md,fd;if("GoogleAI Assistant"===(null===e||void 0===e?void 0:e.data_type_name))return u.createElement("div",{key:l,style:{display:e.visible?"":"none",color:"var(--app-color-gray-dark)",height:"inherit",width:ml.tq?"100%":"80%",flexDirection:"column",marginTop:"50px"}},u.createElement("textarea",{className:c.Z.fullLengthTextarea,type:e.data_type,onFocus:()=>{},disabled:e.options.fixed,autoComplete:"none",onChange:e=>{D(e.target.value,l)},placeholder:"Enter your question here",value:1==e.options.fixed?null===e||void 0===e||null===($n=e.options)||void 0===$n?void 0:$n.analyze:e.value}),u.createElement("div",{style:{display:"flex"}},u.createElement(x.zx,{light:!0,loading:te,title:"Ask Assistant ",clicked:()=>{0==e.options.fixed&&(e.options.analyze=e.value),Vl(e.options)}},u.createElement("img",{src:"https://ai.google/static/images/share.png",height:"90px",width:"140px"})),(null===Te||void 0===Te?void 0:Te.candidates.length)>0&&u.createElement(x.zx,{title:"Clear",clicked:()=>{sl({candidates:[]}),D(void 0,l)}})));if("Info"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(_=e.options)||void 0===_||null===(E=_.list)||void 0===E?void 0:E.length)>0&&(null===e||void 0===e||null===(k=e.options)||void 0===k||null===(Z=k.component_id)||void 0===Z?void 0:Z.length)>0&&null!==e&&void 0!==e&&e.visible){var _d,yd,hd,gd,bd,xd,Ed;const l=X.find(l=>l.id===(null===e||void 0===e?void 0:e.value)),o={};var Cd;if(l)null===e||void 0===e||null===(Cd=e.options)||void 0===Cd||Cd.list.map((e,i)=>{var t,n,d,a;if(0==l.component_fields.length)return u.createElement("div",{key:i});const r=l.component_fields.find(l=>l.field_name===e);var s;"Link"===(null===r||void 0===r?void 0:r.data_type_name)&&(null!==r&&void 0!==r&&null!==(t=r.value)&&void 0!==t&&t.includes("jpg")||null!==r&&void 0!==r&&null!==(n=r.value)&&void 0!==n&&n.includes("jpeg")||null!==r&&void 0!==r&&null!==(d=r.options)&&void 0!==d&&d.image||null!==r&&void 0!==r&&null!==(a=r.value)&&void 0!==a&&a.includes("png"))?o[e]=u.createElement("div",{onClick:()=>window.open(null===r||void 0===r?void 0:r.value,"_blank")},u.createElement("img",{alt:"lg",onError:e=>e.target.src="https://i.quotev.com/b2gtjqawaaaa.jpg",src:null===r||void 0===r?void 0:r.value,style:{width:"30px",height:"30px",cursor:"pointer"}})):o[e]=null!==(s=null===r||void 0===r?void 0:r.value)&&void 0!==s?s:""});return l&&("rows"===(null===e||void 0===e||null===(_d=e.options)||void 0===_d?void 0:_d.orientation)?u.createElement($e.Z,{className:c.Z.mobileTable_ii,style:{width:"100%"},tableHostSimple:c.Z.tableHostSimple,columns:null!==(yd=null===e||void 0===e||null===(hd=e.options)||void 0===hd?void 0:hd.list)&&void 0!==yd?yd:[],list:[o]}):u.createElement("div",{className:c.Z.filtersContainer,style:{color:"var(--app-color-gray-light)",height:"inherit",width:"100%",display:null!==e&&void 0!==e&&e.visible?"":"none"}},u.createElement("div",{style:{color:"var(--app-color-gray-dark)"}},"Additional Information"),u.createElement("hr",{style:{margin:"20px 0",borderTop:"1px solid #D2D2D2"}}),Object.keys(o).length>0&&(null===e||void 0===e||null===(gd=e.options)||void 0===gd?void 0:gd.list.map((o,i)=>{var t,n,d,a,r,s,v;if(0==l.component_fields.length)return u.createElement("div",{key:i,style:{width:"inherit"}});const p=l.component_fields.find(e=>e.field_name===o);return u.createElement(m.Z,{style:{border:"0"},key:i,fieldLabel:o,fieldIcon:e.icon,isProcess:!0,visible:!0,mandatory:e.mandatory,error:e.errors,notes:null===e||void 0===e||null===(t=e.options)||void 0===t?void 0:t.notes},"Link"===(null===p||void 0===p?void 0:p.data_type_name)&&(null!==p&&void 0!==p&&null!==(n=p.value)&&void 0!==n&&n.includes("jpg")||null!==p&&void 0!==p&&null!==(d=p.value)&&void 0!==d&&d.includes("jpeg")||null!==p&&void 0!==p&&null!==(a=p.options)&&void 0!==a&&a.image||null!==p&&void 0!==p&&null!==(r=p.value)&&void 0!==r&&r.includes("png"))?u.createElement("div",{style:{width:"inherit"},onClick:()=>window.open(null===p||void 0===p?void 0:p.value,"_blank")},u.createElement("img",{onError:e=>e.target.src="https://i.quotev.com/b2gtjqawaaaa.jpg",src:null===p||void 0===p?void 0:p.value,style:{fit:"scale-down",width:"100%",height:"auto",cursor:"pointer"}})):null!==e&&void 0!==e&&null!==(s=e.value)&&void 0!==s&&s.includes("pdf")?u.createElement("div",{style:{width:"inherit"},onClick:()=>window.open(null===p||void 0===p?void 0:p.value,"_blank")},u.createElement("embed",{src:"".concat(null===p||void 0===p?void 0:p.value,"#toolbar=0&navpanes=0&scrollbar=0&zoom=100%"),width:"100%",height:"1000px"})):(null===p||void 0===p||null===(v=p.value)||void 0===v?void 0:v.length)<50||void 0===p?u.createElement("input",{onBlur:l=>Tl(e.data_type_name,l.target.value,P,i,O),type:e.data_type,value:p?p.value:"",autoComplete:"none",className:c.Z.fieldTypeInput,name:e.field_name,readOnly:!0,style:{width:"inherit",border:"1px dashed rgba(234, 231, 231, 0.91)",height:"40px",fontSize:"18px",backgroundColor:"rgba(234, 231, 231, 0.91)"}}):u.createElement("textarea",{className:c.Z.fieldTypeTextarea,type:e.data_type,value:p?p.value:"",onFocus:()=>{},autoComplete:"none",onChange:e=>{},readOnly:!0,style:{width:"inherit",backgroundColor:"rgba(234, 231, 231, 0.91)",height:"auto",fontSize:"18px"}}))})),!0===(null===N||void 0===N||null===(bd=N.options)||void 0===bd?void 0:bd.allowMultipleInputs)&&(null===(xd=Q.processModule.module.options)||void 0===xd||null===(Ed=xd.computes)||void 0===Ed?void 0:Ed.map((o,i)=>{var t,n;const d=null===X||void 0===X||null===(t=X.filter(e=>e.module_id===o.module_id))||void 0===t?void 0:t.find(o=>o.component_fields.filter(o=>{var i,t;return o.value===(null!==(i=null===(t=l.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.key)}))||void 0===t?void 0:t.value)&&void 0!==i?i:"#$")}).length>0),a=null===d||void 0===d?void 0:d.component_fields.find(e=>e.procedure_step_blueprint_field_id===o.field_id);return u.createElement(m.Z,{style:{display:a?"":"none",border:"0"},key:i,fieldLabel:null===a||void 0===a?void 0:a.field_name,fieldIcon:e.icon,isProcess:!0,visible:!0,mandatory:e.mandatory,error:e.errors,notes:null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.notes},u.createElement("input",{onBlur:l=>Tl(e.data_type_name,l.target.value,P,i,O),type:e.data_type,value:null===a||void 0===a?void 0:a.value,autoComplete:"none",className:c.Z.fieldTypeInput,name:e.field_name,disabled:!0,style:{border:"1px dashed rgba(234, 231, 231, 0.91)",height:"40px",fontSize:"18px",backgroundColor:"rgba(234, 231, 231, 0.91)"}}))}))))}if("Details"===(null===e||void 0===e?void 0:e.data_type_name)){var wd,Md,Sd,kd,Zd,Id,Nd;const l=null===(wd=O.newStepComponents.find(l=>l.selected_fields.find(l=>{var o,i,t;return l.field_name===(null!==(o=null===(i=e.options)||void 0===i?void 0:i.field)&&void 0!==o?o:null===(t=e.options)||void 0===t?void 0:t.key)&&l.value})))||void 0===wd||null===(Md=wd.selected_fields)||void 0===Md?void 0:Md.find(l=>{var o,i,t;return l.field_name===(null!==(o=null===(i=e.options)||void 0===i?void 0:i.field)&&void 0!==o?o:null===(t=e.options)||void 0===t?void 0:t.key)});let o=X.find(o=>{var i;return o.module_id===(null===(i=e.options)||void 0===i?void 0:i.module_id)&&o.component_fields.find(o=>{var i;return o.value===(null===l||void 0===l?void 0:l.value)&&o.field_name===(null===(i=e.options)||void 0===i?void 0:i.key)})});if(!o){var Td,Dd;const l=null===(Td=O.components.find(l=>l.selected_fields.find(l=>{var o;return l.field_name===(null===(o=e.options)||void 0===o?void 0:o.key)&&l.value})))||void 0===Td||null===(Dd=Td.selected_fields)||void 0===Dd?void 0:Dd.find(l=>{var o;return l.field_name===(null===(o=e.options)||void 0===o?void 0:o.key)});l&&(o=X.find(o=>{var i;return o.module_id===(null===(i=e.options)||void 0===i?void 0:i.module_id)&&o.component_fields.find(o=>{var i;return o.value===(null===l||void 0===l?void 0:l.value)&&o.field_name===(null===(i=e.options)||void 0===i?void 0:i.key)})}))}return u.createElement("div",{style:{width:"100%"}},o?u.createElement($e.Z,{modern:!(!ml.tq&&null!==e&&void 0!==e&&null!==(Sd=e.options)&&void 0!==Sd&&Sd.table),tableHostSimple:c.Z.itemsContainer_ii,style:{width:"100%"},layeredColumns:null===e||void 0===e||null===(kd=e.options)||void 0===kd||null===(Zd=kd.fields)||void 0===Zd?void 0:Zd.map(e=>({label:e})),list:[(null!==(Id=null===(Nd=o)||void 0===Nd?void 0:Nd.component_fields)&&void 0!==Id?Id:[]).reduce((e,l)=>(0,v.Z)((0,v.Z)({},e),{},{[l.field_name]:l.value}),{})]}):"No information found")}if("Calendar"===(null===e||void 0===e?void 0:e.data_type_name))return u.createElement("div",{id:e.field_name,style:{width:"inherit",marginBottom:"160px"}},u.createElement(x.zx,{light:!0,clicked:()=>{var e,l;ne(!0),(0,rl.Mk)(null!==(e=null===T||void 0===T||null===(l=T.created_by)||void 0===l?void 0:l.id)&&void 0!==e?e:V.id,!0).pipe((0,b.q)(1)).subscribe({next:()=>{ne(!1)}})},loading:te,icon:u.createElement("img",{src:p.Fd})}),!(fl||te)&&u.createElement(_l.Scheduler,{height:1800,events:G.length>0?null===G||void 0===G||null===(ed=G.filter(e=>{var l,o;return(null===e||void 0===e||null===(l=e.add_info)||void 0===l?void 0:l.module_id)===(null===(o=Q.processModule)||void 0===o?void 0:o.module_id)}))||void 0===ed?void 0:ed.map(e=>{var l,o;return{event_id:e.id,title:e.description,start:new Date(Date.parse(null===(l=e.add_info)||void 0===l?void 0:l.start)),end:null!==e&&void 0!==e&&e.completed_at?new Date(Date.parse(e.completed_at)):new Date(Date.parse(null===(o=e.add_info)||void 0===o?void 0:o.end)),admin_id:2,color:"#50b500",editable:!1,deletable:!1}}):[],navigation:!0,view:Al,agenda:(null===T||void 0===T||null===(ld=T.created_by)||void 0===ld?void 0:ld.id)!==V.id&&!(null===T||void 0===T||null===(od=T.created_by)||void 0===od||!od.id),day:{startHour:0,endHour:24,cellRenderer:e=>{let{height:l,start:o,onClick:i}=e;const t=!1,n=(0,s.Z)(e,Ml);return u.createElement(x.zx,(0,r.Z)({style:{height:"100%",background:"transparent",cursor:"pointer"},clicked:()=>{El(!0),Pl(void 0)},disabled:t},n))}},month:(null===T||void 0===T||null===(id=T.created_by)||void 0===id?void 0:id.id)!==V.id&&void 0!==(null===T||void 0===T?void 0:T.created_by)?null:{cellRenderer:e=>{let{height:l,start:o,onClick:i}=e;const t=!1,n=(0,s.Z)(e,Sl);return u.createElement(x.zx,(0,r.Z)({style:{height:"100%",background:"transparent",cursor:"pointer"},clicked:()=>{El(!0),Pl(void 0)},disabled:t},n))}},week:(null===T||void 0===T||null===(td=T.created_by)||void 0===td?void 0:td.id)!==V.id&&void 0!==(null===T||void 0===T?void 0:T.created_by)?null:{weekDays:[0,1,2,3,4,5],weekStartOn:6,startHour:0,endHour:25,step:60,cellRenderer:e=>{let{height:l,start:o,onClick:i}=e;const t=!1,n=(0,s.Z)(e,kl);return u.createElement(x.zx,(0,r.Z)({style:{height:"100%",background:"transparent",cursor:"pointer"},clicked:()=>{ae(o),El(!0),Pl(void 0)},disabled:t},n))}},onEventClick:e=>{El(!0),Pl(null===G||void 0===G?void 0:G.find(l=>l.id===e.event_id))},onViewChange:e=>Ol(e)}),fl&&u.createElement(al.Z,{modalVisible:fl,heading:null!==(nd=null===e||void 0===e||null===(dd=e.options)||void 0===dd?void 0:dd.header)&&void 0!==nd?nd:Il?"Update Calendar":"Create New Calendar",labels:null===e||void 0===e?void 0:e.options,task:Il,isProcess:!0,blured:!1,onClose:()=>El(!1),isEdit:!!Il,statuses:null===e||void 0===e||null===(ad=e.options)||void 0===ad?void 0:ad.list,priority:null===e||void 0===e||null===(rd=e.options)||void 0===rd?void 0:rd.priority,span:null===e||void 0===e||null===(sd=e.options)||void 0===sd?void 0:sd.span,start_date:de}));if("Lookup"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(I=e.options)||void 0===I||null===(re=I.list)||void 0===re?void 0:re.length)>0&&(null===e||void 0===e||null===(se=e.options)||void 0===se||null===(bl=se.source_id)||void 0===bl?void 0:bl.length)>0&&null!==e&&void 0!==e&&null!==(xl=e.options)&&void 0!==xl&&null!==(wl=xl.target_id)&&void 0!==wl&&wl.length){var Pd,Ad,Od,Ld,zd,Rd,Ud,Fd,Wd,qd,Bd,Yd,Hd,Vd,jd,Gd,Jd,Kd;const o=((e,l)=>{var o,i;if(!O)return;let t=null===(o=Q.processModule.module)||void 0===o||null===(i=o.options)||void 0===i?void 0:i.global;var n,d,a,r,s,v,u;return t||(t=null===(n=O.components.find(l=>l.selected_fields.filter(l=>1==l.visible&&l.field_name===e).length>0))||void 0===n||null===(d=n.selected_fields.find(l=>l.field_name===e))||void 0===d?void 0:d.value),t||(t=null===(a=Ae.Z(Oe.Z("component_blueprints"),Le.Z)(null!==(v=null===Q||void 0===Q||null===(u=Q.processModule)||void 0===u?void 0:u.completeSteps)&&void 0!==v?v:[]).find(l=>l.selected_fields.filter(l=>l.field_name===e&&"Value"===l.data_type_name).length>0))||void 0===a||null===(r=a.selected_fields.find(l=>l.field_name===e))||void 0===r||null===(s=r.options)||void 0===s?void 0:s.value),t?l.filter(l=>l[e]===t):l})(null===e||void 0===e||null===(Pd=e.options)||void 0===Pd?void 0:Pd.global,function(e,l,o){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],t=arguments.length>4?arguments[4]:void 0,n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],d=arguments.length>6&&void 0!==arguments[6]?arguments[6]:X;const a=d.filter(e=>{var l;return(null===(l=e.component_fields)||void 0===l?void 0:l.filter(e=>e.component_blueprint_id===o).length)>0});let r=[];return d.filter(l=>l.component_fields.filter(l=>l.component_blueprint_id===e).length>0).map(e=>{const o={};i.map(l=>{var i;o[l]=null===(i=e.component_fields.find(e=>e.field_name===l))||void 0===i?void 0:i.value});const d=e.component_fields.find(e=>e.field_name===l);void 0!==d&&a.filter(e=>e.component_fields.filter(e=>e.value===d.value&&e.field_name===l).length>0).map(l=>{var i,d,a;const s=null!==(i=null===(d=l.component_fields.find(e=>-1!==n.indexOf(e.field_name)))||void 0===d?void 0:d.value)&&void 0!==i?i:"";let u={};n.length>0&&n.map(e=>{const o=l.component_fields.find(l=>l.field_name===e);o&&(u[e]=o.value)});let c={};t.length>0&&t.map(o=>{const i=l.component_fields.find(e=>e.field_name===o);if(i)c[o]=i.value;else{const l=e.component_fields.find(e=>e.field_name===o);l&&(c[o]=l.value)}}),r=[...r,(0,v.Z)((0,v.Z)((0,v.Z)({label:s,value:l.id,field:l,grouping:(null===(a=Object.values(o))||void 0===a?void 0:a.length)>0?Object.values(o)[0]:"Fields"},o),c),u)]})}),r}(null===e||void 0===e||null===(Ad=e.options)||void 0===Ad?void 0:Ad.source_id,null===e||void 0===e||null===(Od=e.options)||void 0===Od?void 0:Od.common_field,null===e||void 0===e||null===(Ld=e.options)||void 0===Ld?void 0:Ld.target_id,null===e||void 0===e||null===(zd=e.options)||void 0===zd?void 0:zd.sourceLabel,null===e||void 0===e||null===(Rd=e.options)||void 0===Rd?void 0:Rd.list,null!==(Ud=null===e||void 0===e||null===(Fd=e.options)||void 0===Fd?void 0:Fd.rlist)&&void 0!==Ud?Ud:[]));return u.createElement(u.Fragment,null,u.createElement("div",{id:e.field_name,style:{width:"100%",border:"Dropdown"===(null===e||void 0===e||null===(Wd=e.options)||void 0===Wd?void 0:Wd.selection)?"1px solid var(--app-color-gray-light)":"none"}},"Dropdown"===(null===e||void 0===e||null===(qd=e.options)||void 0===qd?void 0:qd.selection)?u.createElement(Pe.yV,{items:o,groupedBy:"grouping",groupname:"grouping",triggerType:"chevron",title:me,className:c.Z.dropdownClassContainer,inputClassName:c.Z.peoplePositionsSelectInput,molclassname:c.Z.peoplePositionsSelectMenuOverlay,moliclassname:c.Z.peoplePositionsSelectMenuOverlayItem,notags:"true",onChange:o=>{var i;o.length>0&&(null===e||void 0===e||null===(i=e.options)||void 0===i||i.list.map(l=>{const i=jl({field_name:l});if(-1!=i){const t=X.find(e=>e.id===o[0].value),n=t.component_fields.find(e=>e.field_name===l);if(void 0==n){const o=t.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.common_field)}),n=X.find(l=>l.component_fields.filter(l=>{var i;return l.value===o.value&&l.component_blueprint_id===(null===e||void 0===e||null===(i=e.options)||void 0===i?void 0:i.source_id)}).length>0);if(void 0!=n){const e=n.component_fields.find(e=>e.field_name===l);void 0!=e?(N.selected_fields[i].value=e.value,N.selected_fields[i].disabled=!0):N.selected_fields[i].value=""}else N.selected_fields[i].value=""}else N.selected_fields[i].value=n.value,N.selected_fields[i].disabled=!0}}),A("".concat(o[0].label,",").concat(o[0].value),l),fe("".concat(o[0].grouping)))}}):"Tiles"===(null===e||void 0===e||null===(Bd=e.options)||void 0===Bd?void 0:Bd.selection)?u.createElement(Pe.qq,{items:o,columns:null===e||void 0===e||null===(Yd=e.options)||void 0===Yd?void 0:Yd.rlist,columnsG:null!==(Hd=null===e||void 0===e||null===(Vd=e.options)||void 0===Vd?void 0:Vd.sourceLabel)&&void 0!==Hd?Hd:[],initialSelected:null===e||void 0===e?void 0:e.value,selectedItems:null!==e&&void 0!==e&&null!==(jd=e.options)&&void 0!==jd&&jd.showAll?o:_e,showAll:1==(null===e||void 0===e||null===(Gd=e.options)||void 0===Gd?void 0:Gd.showAll),groupedBy:"grouping",groupname:"grouping",className:c.Z.peoplePositionsSelect,onGroupChange:e=>{ye(o.filter(l=>l.grouping===e))},onChange:o=>{var i;o&&(null===e||void 0===e||null===(i=e.options)||void 0===i||i.list.map(l=>{const i=jl({field_name:l});if(-1!=i){const t=X.find(e=>e.id===o.value),n=t.component_fields.find(e=>e.field_name===l);if(void 0==n){const o=t.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.common_field)}),n=X.find(l=>l.component_fields.filter(l=>{var i;return l.value===o.value&&l.component_blueprint_id===(null===e||void 0===e||null===(i=e.options)||void 0===i?void 0:i.source_id)}).length>0);if(void 0!=n){const e=n.component_fields.find(e=>e.field_name===l);void 0!=e?(N.selected_fields[i].value=e.value,N.selected_fields[i].disabled=!0):N.selected_fields[i].value=""}else N.selected_fields[i].value=""}else N.selected_fields[i].value=n.value,N.selected_fields[i].disabled=!0}}),A("".concat(o.label,",").concat(o.value),l))}}):u.createElement("div",{className:c.Z.openSelectWithSearchHost},u.createElement(Xe.Z,{title:null===e||void 0===e||null===(Jd=e.options)||void 0===Jd?void 0:Jd.sourceLabel,triggerType:"eyeglass",className:c.Z.openSelectWithSearch,molclassname:c.Z.menuOverlayList,moliclassname:c.Z.menuOverlayListItem,inputClassName:c.Z.menuOverlayListItemInput,inputContainerClassName:c.Z.menuOverlayListItemInputContainerClassName,items:Re.Z(Ue.Z("grouping"))(o).map(e=>({label:e.grouping,value:e.grouping})),onChange:l=>{document.getElementById(e.field_name).style.height="80px",ye(o.filter(e=>e.grouping===l.value))}}),u.createElement(Xe.Z,{title:null===e||void 0===e||null===(Kd=e.options)||void 0===Kd?void 0:Kd.referenceLabel,triggerType:"eyeglass",className:c.Z.openSelectWithSearch,molclassname:c.Z.menuOverlayList,moliclassname:c.Z.menuOverlayListItem,inputClassName:c.Z.menuOverlayListItemInput,inputContainerClassName:c.Z.menuOverlayListItemInputContainerClassName,items:_e,onChange:o=>{var i;(document.getElementById(e.field_name).style.height="80px",o)&&(null===e||void 0===e||null===(i=e.options)||void 0===i||i.list.map(l=>{const i=jl({field_name:l});if(-1!=i){const t=X.find(e=>e.id===o.value),n=t.component_fields.find(e=>e.field_name===l);if(void 0==n){const o=t.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.common_field)}),n=X.find(l=>l.component_fields.filter(l=>{var i;return l.value===o.value&&l.component_blueprint_id===(null===e||void 0===e||null===(i=e.options)||void 0===i?void 0:i.source_id)}).length>0);if(void 0!=n){const e=n.component_fields.find(e=>e.field_name===l);void 0!=e?(N.selected_fields[i].value=e.value,N.selected_fields[i].disabled=!0):N.selected_fields[i].value=""}else N.selected_fields[i].value=""}else N.selected_fields[i].value=n.value,N.selected_fields[i].disabled=!0}}),A("".concat(o.label,",").concat(o.value),l))}}))))}if(("Step List"===(null===e||void 0===e?void 0:e.data_type_name)||"Component List"===(null===e||void 0===e?void 0:e.data_type_name))&&(null===e||void 0===e||null===(Zl=e.options)||void 0===Zl||null===($l=Zl.list)||void 0===$l?void 0:$l.length)>0&&(null===e||void 0===e||null===(eo=e.options)||void 0===eo||null===(lo=eo.component_id)||void 0===lo?void 0:lo.length)>0)return u.createElement("div",{style:{width:"100%",display:1==e.visible?"":"none",padding:ml.tq?"0":"50px"}},u.createElement(Ne.default,{columns:["No"].concat(null===e||void 0===e||null===(vd=e.options)||void 0===vd?void 0:vd.list),list:(Yu=null===e||void 0===e?void 0:e.options,O.components.filter(e=>e.id===Yu.component_id).map((e,l)=>null===Yu||void 0===Yu?void 0:Yu.list.reduce((o,i)=>(0,v.Z)((0,v.Z)({},o),{},{[i]:e.selected_fields.find(e=>e.field_name===i).value,temp_id:e.temp_id,No:l+1}),{}))),onListItemClick:e=>{B(e),N.selected_fields.map((l,o)=>{"output"!==l.data_type&&("Text"===l.data_type_name||"Date"===l.data_type_name||"Number"===l.data_type_name||"Link"===l.data_type_name?D(e[l.field_name],o):A(e[l.field_name],o),l.value=e[l.field_name],l.field.value=e[l.field_name])})}}));if("Checkbox"===(null===e||void 0===e?void 0:e.data_type_name))return u.createElement("div",{style:{display:"flex",fontWeight:"normal",width:"100%",paddingTop:"20px"}},(null===e||void 0===e||null===(ud=e.options)||void 0===ud?void 0:ud.landscape)&&(null===e||void 0===e||null===(cd=e.options)||void 0===cd?void 0:cd.value),u.createElement(el.X,{defaultChecked:null!==(pd=e.value)&&void 0!==pd&&pd,onChange:e=>{A(e.target.checked,l)}}),!(null!==e&&void 0!==e&&null!==(md=e.options)&&void 0!==md&&md.landscape)&&(null===e||void 0===e||null===(fd=e.options)||void 0===fd?void 0:fd.value));if("Module"===(null===e||void 0===e?void 0:e.data_type_name)&&null!==(oo=e.options)&&void 0!==oo&&oo.module_id){var Qd,Xd;const l=J.find(l=>l.id===e.options.module_id);return u.createElement(u.Fragment,null,u.createElement("div",{style:{width:"inherit"}},u.createElement("div",{className:c.Z.iconsContainer,style:{display:"flex",alignContent:"space-between",justifyContent:"space-between",width:"100%"}},u.createElement(x.zx,{light:!0,title:null===e||void 0===e?void 0:e.field_name,message:"Preparing ".concat(l.name," entry..."),loading:te,clicked:()=>{ne(!0),(0,gl.zJ)(l.procedure.id).pipe((0,g.P)()).subscribe({next:l=>{var o;if(null!==e&&void 0!==e&&null!==(o=e.options)&&void 0!==o&&o.cmp){var i,t,n;const o=null===l||void 0===l||null===(i=l.steps)||void 0===i?void 0:i.find(e=>e.component_blueprints.filter(e=>{var l,o;return(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.allowMultipleInputs)&&(null===(o=e.selected_fields)||void 0===o?void 0:o.find(e=>"Transaction List"===e.data_type_name))}).length>0),a=null===o||void 0===o||null===(t=o.component_blueprints)||void 0===t?void 0:t.find(e=>{var l;return(null===(l=e.selected_fields)||void 0===l?void 0:l.filter(e=>"Transaction List"===e.data_type_name&&!0===e.visible).length)>0}),r=null===a||void 0===a||null===(n=a.selected_fields)||void 0===n?void 0:n.filter(e=>{var l;return null===(l=e.options)||void 0===l?void 0:l.mapToItem}).reduce((e,l)=>{const o=Fe.Z(We.Z("field_name",l.field_name),Le.Z(Oe.Z("selected_fields",O.components.concat(O.newStepComponents))));var i;return o&&(null===o||void 0===o?void 0:o.data_type_name)===l.data_type_name?(0,v.Z)((0,v.Z)({},e),{},{[null===(i=l.options)||void 0===i?void 0:i.mapToItem]:o.value}):e},{});var d;if(Object.values(r).length>0)(0,f.r6)(null===e||void 0===e||null===(d=e.options)||void 0===d?void 0:d.cmp).pipe((0,g.P)()).subscribe({next:o=>{var i,t;(0,f.np)((0,v.Z)((0,v.Z)({},r),{},{index:null===(i=o.component_items)||void 0===i?void 0:i.length,id:(0,w.mR)()}),null===e||void 0===e||null===(t=e.options)||void 0===t?void 0:t.cmp).pipe((0,g.P)()).subscribe({next:i=>{ne(!1),hl.h.dispatch((0,ke.q4)((0,v.Z)((0,v.Z)({},l),{},{completeSteps:l.steps,steps:l.steps,stepIndex:0,module_id:e.options.module_id,module:J.find(l=>l.id===e.options.module_id),selectedComponent:o}))),L({action:M._U.setModuleItems,value:[]}),L({action:M._U.setModuleNewStepComponents,value:[]}),L({action:M._U.setComponents,value:[]})},error:()=>{}})},error:()=>{}});else ne(!1)}else ne(!1),O.components=[],O.newStepComponents=[],e.options.fields.filter(e=>{var o,i;const t=null===(o=T.component_fields.find(l=>l.field_name===e))||void 0===o?void 0:o.value;null===(i=l.steps)||void 0===i||i.forEach(l=>{var o;null===l||void 0===l||null===(o=l.component_blueprints)||void 0===o||o.filter(e=>{var l;return!(null!==(l=e.options)&&void 0!==l&&l.asModuleList)}).forEach(l=>{const o=l.selected_fields.find(l=>l.field_name===e&&1==l.visible);o&&(o.value=t)}),l.component_blueprints.find(l=>l.selected_fields.filter(l=>l.field_name===e).length>0)&&L({action:M._U.addNewComponent,value:l.component_blueprints.filter(l=>l.selected_fields.filter(l=>l.field_name===e).length>0)})})}),hl.h.dispatch((0,ke.q4)((0,v.Z)((0,v.Z)({},l),{},{completeSteps:l.steps,steps:l.steps,stepIndex:1,module_id:e.options.module_id,module:J.find(l=>l.id===e.options.module_id)}))),L({action:M._U.setCurrentStep,value:l.steps[1]}),L({action:M._U.setModuleItems,value:[]}),Rl("/begin-module")}})}}),(null===e||void 0===e||null===(Qd=e.options)||void 0===Qd?void 0:Qd.showL)&&u.createElement(x.zx,{light:!0,clicked:()=>{ne(!0),oe.componentsByModule[l.name]=0,(0,ul.vC)(l,w.Qc,w.R6,1).pipe((0,b.q)(1)).subscribe({next:e=>{var o;oe.componentsByModule[l.name]=(0,Ke.now)(),l.lastUpdate=(0,Ke.now)(),l.count=null!==(o=null===e||void 0===e?void 0:e.total)&&void 0!==o?o:0,ne(!1)},complete:()=>{},error:()=>ne(!1)})},icon:u.createElement("img",{src:p.Fd}),loading:te,message:"Fetching ".concat(l.name,"...")})),(null===e||void 0===e||null===(Xd=e.options)||void 0===Xd?void 0:Xd.showL)&&u.createElement(Ne.default,{modern:!!ml.tq,className:c.Z.itemsContainer,columns:["Transaction","Date Created","Status"],list:qe.Z([Be.Z(Ye.Z("created_date"))])(X.filter(e=>e.module_id===l.id)).filter(l=>{var o,i,t;const n=null===(o=Fe.Z(We.Z("field_name",null!==(i=null===(t=e.options)||void 0===t?void 0:t.key)&&void 0!==i?i:""),Le.Z(Oe.Z("selected_fields",O.components))))||void 0===o?void 0:o.value;return l.component_fields.find(l=>{var o;return l.value===n&&l.field_name===(null===(o=e.options)||void 0===o?void 0:o.key)})}).map(e=>({id:e.id,Transaction:e.title,"Date Created":"".concat(Qe()(new Date(e.created_date)).format("DD MMM YYYY h:mm a")),Status:e.status})),onCellClick:o=>{var i;if(null!==e&&void 0!==e&&null!==(i=e.options)&&void 0!==i&&i.viewable){const e=X.find(e=>e.id===o.data.id),i=ie.find(e=>e.id===l.procedure.id&&e.steps.length>0);i?((0,f.DA)(i,e,void 0,L,J,"New"===e.status||"None"===e.status||"Reopen"===e.status||V.id===i.user_id?1:0),Rl("/begin-module")):(0,gl.zJ)(l.procedure.id).pipe((0,g.P)()).subscribe({next:l=>{(0,f.DA)(l,X.find(e=>e.id===o.data.id),void 0,L,J,"New"===e.status||"None"===e.status||"Reopen"===e.status||V.id===i.user_id?1:0),Rl("/begin-module")}})}}})))}if("Transaction List"===(null===e||void 0===e?void 0:e.data_type_name)&&null!==e&&void 0!==e&&null!==(io=e.options)&&void 0!==io&&io.simple){var $d,ea,la,oa,ia,ta,na,da;const l=qe.Z([He.Z(Ye.Z("index"))])(null!==($d=null!==e&&void 0!==e&&null!==(ea=e.options)&&void 0!==ea&&ea.type?O.items.filter(l=>{var o;return l.type===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.type)}):O.items)&&void 0!==$d?$d:[]);return u.createElement($e.Z,{tableStyle:{marginBottom:O.items.find(e=>e.edit)?"160px":"0"},style:{width:"100%",border:"0"},modern:!(!ml.tq&&"vertical"!==(null===e||void 0===e||null===(la=e.options)||void 0===la?void 0:la.table)),tableHostSimple:c.Z.itemsContainer_ii,layeredColumns:null===N||void 0===N||null===(oa=N.selected_fields)||void 0===oa?void 0:oa.filter(e=>{var l;return null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.mapToItem}).map(e=>{var l,o;return null!==(l=e.options)&&void 0!==l&&l.group?{label:null===(o=e.options)||void 0===o?void 0:o.group,subColumns:[{label:e.field_name}]}:{label:e.field_name}}).concat([{label:"Actions"}]),list:null===l||void 0===l?void 0:l.map((l,o)=>{var i,t;let n={index:o,Actions:u.createElement("div",{style:{display:"flex",justifyContent:"space-evenly",minWidth:"80px",margin:null!==l&&void 0!==l&&l.edit?"0":"20px 10px",maxWidth:"120px"}},!(null!==l&&void 0!==l&&l.edit)&&u.createElement(ve.G,{icon:ue.IwR,onClick:()=>{l.edit=!0,L({action:M._U.setModuleItems,value:O.items})}}),(null===l||void 0===l?void 0:l.edit)&&u.createElement(ve.G,{icon:ue.EsX,onClick:()=>{var o;l.edit=!1,L({action:M._U.setModuleItems,value:O.items}),null!==T&&void 0!==T&&T.id&&null!==e&&void 0!==e&&null!==(o=e.options)&&void 0!==o&&o.asap&&(0,f.np)(l,T.id).subscribe({})}}),(null===l||void 0===l?void 0:l.edit)&&u.createElement(ve.G,{icon:ue.$aW,onClick:()=>{L({action:M._U.setModuleItems,value:O.items.filter(e=>e.id!==l.id).map((e,l)=>(0,v.Z)((0,v.Z)({},e),{},{index:l}))})}}))};return(null!==(i=null===N||void 0===N||null===(t=N.selected_fields)||void 0===t?void 0:t.filter(e=>{var l;return null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.mapToItem}))&&void 0!==i?i:[]).forEach(e=>{var i,t,d;const a=(0,w.sO)(l[e.options.mapToItem])?JSON.parse(null!==(i=l[e.options.mapToItem])&&void 0!==i?i:"{}"):{};n[e.field_name]=u.createElement("div",{style:{padding:"0"}},u.createElement(Ql,{item:l,index:o,enabled:!0,edit:null!==(t=null===l||void 0===l?void 0:l.edit)&&void 0!==t&&t,isItem:!0,field:(0,v.Z)((0,v.Z)({},e),{},{visible:!0,value:null!==(d=a[e.field_name])&&void 0!==d?d:""}),withLabel:!1,handleItem:(o,i)=>{a[e.field_name]=o,l[e.options.mapToItem]=JSON.stringify(a),L({action:M._U.setModuleItems,value:[...O.items.filter(e=>e.id!==l.id),l]})}}))}),n}),footer:null!==(ia=e.options)&&void 0!==ia&&ia.footer?null===N||void 0===N||null===(ta=N.selected_fields)||void 0===ta?void 0:ta.filter(e=>{var l;return null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.mapToItem}).map((l,o)=>{var i,t;return null!==l&&void 0!==l&&null!==(i=l.options)&&void 0!==i&&i.footer?u.createElement("div",{style:{margin:"20px 0"}},Xl(null!==e&&void 0!==e&&null!==(t=e.options)&&void 0!==t&&t.type?O.items.filter(l=>{var o;return l.type===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.type)}):O.items,l,e)):0===o?"Totals:":""}).concat([""]):[]},(null===N||void 0===N||null===(na=N.options)||void 0===na?void 0:na.allowMultipleInputs)&&u.createElement("div",{className:c.Z.iconsContainer,style:{display:"flex",justifyContent:"space-between"}},u.createElement(x.zx,{light:!0,style:{width:"32px"},clicked:()=>{var l,o;L({action:M._U.setModuleItems,value:[...O.items,{id:(0,w.mR)(),item_code:"",value:"",alt_value:"",quantity:"",total:"",type:null!==(l=null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.type)&&void 0!==l?l:"",edit:!0,index:O.items.length}]})}},u.createElement(p.mm,null)),(null===(da=e.options)||void 0===da?void 0:da.export)&&Hl(null===T||void 0===T?void 0:T.component_items,["item_code","quantity","value","alt_value","total"])))}if("Transaction List"!==(null===e||void 0===e?void 0:e.data_type_name)||null===e||void 0===e||null===(to=e.options)||void 0===to||!to.map||null!==e&&void 0!==e&&null!==(no=e.options)&&void 0!==no&&no.simple){if("ID"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(ao=e.options)||void 0===ao||null===(ro=ao.id)||void 0===ro?void 0:ro.length)>0){var aa;const o=void 0===e.value||null===e.value?"".concat(null===e||void 0===e?void 0:e.options.id).concat(null===(null===$||void 0===$?void 0:$.misc_info)?1:null!==(aa=null===$||void 0===$?void 0:$.misc_info[null===e||void 0===e?void 0:e.field_name])&&void 0!==aa?aa:1):e.value;return e.value=o,e.field.value=o,O.id=o,u.createElement("input",{onBlur:o=>Tl(e.data_type_name,o.target.value,P,l,O),type:e.data_type,autoComplete:"none",value:o,className:c.Z.fieldTypeID,name:e.field_name,disabled:!0})}var ra,sa,va,ua,ca,pa,ma,fa,_a,ya,ha,ga,ba,xa,Ea,Ca,wa,Ma,Sa,ka,Za,Ia,Na,Ta,Da,Pa,Aa,Oa,La,za,Ra,Ua,Fa,Wa,qa,Ba,Ya,Ha,Va,ja,Ga,Ja,Ka,Qa,Xa,$a,er,lr,or,ir,tr,nr;if("Value Button"===(null===e||void 0===e?void 0:e.data_type_name))return u.createElement(Ne.default,{rowStyleSelected:{border:null!==e&&void 0!==e&&e.value?"2px solid black":"1px dashed black"},initialSelected:(null===(ra=e.options)||void 0===ra?void 0:ra.value)===(null===e||void 0===e?void 0:e.value)?0:void 0,modern:!0,isReport:!1,"app-variant-is-mobile":"true",columns:["Name","Description","Image"],list:[{Name:null===(sa=e.options)||void 0===sa?void 0:sa.label,Description:null!==(va=null===e||void 0===e||null===(ua=e.options)||void 0===ua?void 0:ua.notes)&&void 0!==va?va:e.field_name,Image:null===(ca=e.options)||void 0===ca?void 0:ca.image}],onListItemClick:()=>{var o;null!==e&&void 0!==e&&e.value?D(void 0,l):(null===N||void 0===N||null===(o=N.selected_fields)||void 0===o||o.filter(e=>"Value Button"===(null===e||void 0===e?void 0:e.data_type_name)).map(e=>{e.value=void 0}),D(e.options.value,l))}});if("Notes"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(so=e.options)||void 0===so||null===(vo=so.value)||void 0===vo?void 0:vo.length)>0)return u.createElement("p",{key:l,className:c.Z.labelInput,style:{width:"100%",marginTop:"10px"}},"".concat(null===e||void 0===e||null===(pa=e.options)||void 0===pa?void 0:pa.value));if("List Filter"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(uo=e.options)||void 0===uo||null===(co=uo.value)||void 0===co?void 0:co.length)>0)return u.createElement(u.Fragment,null);if("Value"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(po=e.options)||void 0===po||null===(mo=po.module_id)||void 0===mo?void 0:mo.length)>0&&(null===e||void 0===e||null===(fo=e.options)||void 0===fo||null===(_o=fo.component_id)||void 0===_o?void 0:_o.length)>0)return u.createElement(u.Fragment,null,!0===(null===e||void 0===e||null===(ma=e.options)||void 0===ma?void 0:ma.chart)?u.createElement(cl.Z,{title:e.field_name,series:null===(fa=N.selected_fields[l])||void 0===fa||null===(_a=fa.value)||void 0===_a?void 0:_a.split(",").map(e=>+e),labels:null!==e&&void 0!==e&&null!==(ya=e.options)&&void 0!==ya&&ya.notes?null===e||void 0===e||null===(ha=e.options)||void 0===ha||null===(ga=ha.notes)||void 0===ga?void 0:ga.split(","):["To accomplish","Done"]}):u.createElement("input",{value:null===e||void 0===e||null===(ba=e.options)||void 0===ba?void 0:ba.value,className:c.Z.fieldTypeInput,name:e.field_name,disabled:!0}));if("URL"===e.data_type_name)return u.createElement(u.Fragment,null,null!==e&&void 0!==e&&null!==(xa=e.options.value)&&void 0!==xa&&xa.includes("jpg")||null!==e&&void 0!==e&&null!==(Ea=e.options.value)&&void 0!==Ea&&Ea.includes("jpeg")||null!==e&&void 0!==e&&null!==(Ca=e.options)&&void 0!==Ca&&Ca.image||null!==e&&void 0!==e&&null!==(wa=e.options.value)&&void 0!==wa&&wa.includes("png")?u.createElement("div",{onClick:()=>window.open(null===e||void 0===e?void 0:e.options.value,"_blank")},u.createElement("img",{alt:"lg",onError:e=>e.target.src="https://i.quotev.com/b2gtjqawaaaa.jpg",src:null===e||void 0===e?void 0:e.options.value,style:{width:"100%",height:"100%",cursor:"pointer"}})):null!==e&&void 0!==e&&null!==(Ma=e.options.value)&&void 0!==Ma&&Ma.includes("pdf")?u.createElement("div",{style:{width:"inherit"},onClick:()=>window.open(null===e||void 0===e?void 0:e.options.value,"_blank")},u.createElement("embed",{src:"".concat(null===e||void 0===e?void 0:e.options.value,"#toolbar=0&navpanes=0&scrollbar=0&zoom=100%"),width:"100%",height:"1000px"})):u.createElement("div",{style:{width:"inherit"},onClick:()=>window.open(null===e||void 0===e?void 0:e.options.value,"_blank")},u.createElement("textarea",{disabled:!0,onChange:()=>{},autoComplete:"none",value:null===(null===e||void 0===e?void 0:e.options.value)?"":null===e||void 0===e?void 0:e.options.value,className:c.Z.fieldTypeInput,style:{height:"auto",width:"inherit",cursor:"pointer"},name:e.field_name})));if("Chart"===e.data_type_name){var dr,ar,rr,sr,vr,ur,cr,pr,mr,fr,_r,yr,hr,gr,br,xr;const l=null===(dr=O.newStepComponents.find(l=>l.id===e.options.component_id))||void 0===dr||null===(ar=dr.selected_fields.find(l=>l.field_name===e.options.key))||void 0===ar?void 0:ar.value,o=null!==(rr=null===e||void 0===e||null===(sr=e.options)||void 0===sr?void 0:sr.config)&&void 0!==rr?rr:w.HR;let i=[],t=[];if(X.filter(l=>l.module_id===(null===e||void 0===e?void 0:e.module_id)).filter(l=>{var o;const i=(null!==(o=null===l||void 0===l?void 0:l.component_fields)&&void 0!==o?o:[]).find(l=>l.field_name===(null===e||void 0===e?void 0:e.options.key));i&&(t=[...t,i.value])}),"Line"===(null===e||void 0===e||null===(vr=e.options)||void 0===vr?void 0:vr.orientation)||"area"===(null===o||void 0===o||null===(ur=o.chart)||void 0===ur?void 0:ur.type)||"Column"===(null===e||void 0===e||null===(cr=e.options)||void 0===cr?void 0:cr.orientation)||"bar"===(null===o||void 0===o||null===(pr=o.chart)||void 0===pr?void 0:pr.type))[...new Set(t)].map(e=>{i=[...i,{name:e,data:[]}]});else if("Donut"===(null===e||void 0===e||null===(mr=e.options)||void 0===mr?void 0:mr.orientation)||"donut"===(null===o||void 0===o||null===(fr=o.chart)||void 0===fr?void 0:fr.type)){var Er,Cr,wr;i=l?null===l||void 0===l?void 0:l.split(",").map(e=>+e):[...new Set(t)].map(l=>{var o,i,n,d,a;return"occurences"===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.operation)?t.filter(e=>e===l).length:null!==e&&void 0!==e&&null!==(i=e.options)&&void 0!==i&&i.items?null===(d=Ae.Z(Oe.Z("component_items"),Le.Z)(X.filter(o=>o.module_id===e.module_id&&o.component_fields.find(o=>o.field_name===e.options.key&&o.value===l))).map(l=>{var o;return+l[null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.items[0]]}))||void 0===d?void 0:d.reduce((e,l)=>e+l,0):null!==e&&void 0!==e&&null!==(n=e.options)&&void 0!==n&&n.list?null===(a=Ae.Z(Oe.Z("component_fields"),Le.Z)(X.filter(o=>o.module_id===e.module_id&&o.component_fields.find(o=>o.field_name===e.options.key&&o.value===l))).map(l=>l.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.list[0])}).value))||void 0===a?void 0:a.reduce((e,l)=>e+ +l,0):0}),o.labels=null!==e&&void 0!==e&&null!==(Er=e.options)&&void 0!==Er&&Er.notes?null===e||void 0===e||null===(Cr=e.options)||void 0===Cr||null===(wr=Cr.notes)||void 0===wr?void 0:wr.split(","):[...new Set(t)],o.plotOptions.pie.donut.labels.total.label=e.field_name}return u.createElement(u.Fragment,null,l&&u.createElement("div",{className:"grid grid-cols-12 gap-4 md:gap-6 2xl:gap-7.5",style:{display:"flex",width:"inherit",border:"1px dashed gray",justifyContent:"center",padding:"20px 0"}},u.createElement(pl.Z,{config:o,type:null!==(_r=null===o||void 0===o||null===(yr=o.chart)||void 0===yr?void 0:yr.type)&&void 0!==_r?_r:"",orientation:null===e||void 0===e||null===(hr=e.options)||void 0===hr?void 0:hr.orientation,series:i,title:e.field_name,labels:null!==e&&void 0!==e&&null!==(gr=e.options)&&void 0!==gr&&gr.notes?null===e||void 0===e||null===(br=e.options)||void 0===br||null===(xr=br.notes)||void 0===xr?void 0:xr.split(","):["Target","Actual"]})))}if("Item Formula"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(yo=e.options)||void 0===yo||null===(ho=yo.operator)||void 0===ho?void 0:ho.length)>0&&!1===Y&&null!==e&&void 0!==e&&e.visible)return null;if("Formula"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(go=e.options)||void 0===go||null===(bo=go.operator)||void 0===bo?void 0:bo.length)>0&&!1===Y&&null!==e&&void 0!==e&&e.visible){var Mr,Sr,kr,Zr,Ir;const l=O.newStepComponents.filter(e=>null===e.options||(void 0===e.allowMultipleInputs||!1===e.options.allowMultipleInputs)),o=(0,w.LV)(null===e||void 0===e?void 0:e.options,N.selected_fields.filter(l=>e.options.list.includes(l.field_name)&&!l.options.mapToItem),[...O.components.filter(e=>l.every(l=>l.id!==e.id)),...ze.Z(e=>e.selected_fields.filter(e=>""===e.value).length>0,l)],null!==(Mr=null===O||void 0===O?void 0:O.items)&&void 0!==Mr?Mr:[],null!==(Sr=null===O||void 0===O?void 0:O.newStepComponents)&&void 0!==Sr?Sr:[]);return void 0!==o&&(e.value=o,e.field.value=o),"bar"===(null===e||void 0===e||null===(kr=e.options)||void 0===kr?void 0:kr.display)?u.createElement("div",{style:{display:"flex",height:"30px",width:"100%"}},u.createElement("div",{style:{height:"30px",width:"100%",backgroundColor:null===e||void 0===e||null===(Zr=e.options)||void 0===Zr?void 0:Zr.maxC,display:"flex",flexDirection:"column"}},u.createElement("input",{value:o||0,className:c.Z.fieldTypeInput,name:e.field_name,disabled:!0,style:{color:"transparent",height:"30px",width:"".concat(+o/+e.options.max*100,"%"),backgroundColor:null===e||void 0===e||null===(Ir=e.options)||void 0===Ir?void 0:Ir.barC}})),u.createElement("label",{className:c.Z.fieldTypeInput,style:{width:"2%"}},"".concat(+o/+e.options.max*100,"%"))):u.createElement("input",{value:o||0,className:c.Z.fieldTypeInput,name:e.field_name,disabled:!0,style:{border:"1px solid var(--app-color-gray-light)"}})}if("Radio"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(xo=e.options)||void 0===xo||null===(Eo=xo.list)||void 0===Eo?void 0:Eo.length)>0)return u.createElement("div",{style:{width:"100%",border:"1px solid var(--app-color-gray-light)",padding:"20px",fontSize:"16px",display:"flex",flexDirection:"column",marginTop:"10px"}},null===e||void 0===e||null===(Sa=e.options)||void 0===Sa?void 0:Sa.list.map((o,i)=>u.createElement("div",{key:i,style:{display:"flex",padding:"20px 0"}},u.createElement("input",{style:{margin:"0 20px"},type:"radio",id:o,name:e.field_name,value:o,checked:(null===e||void 0===e?void 0:e.value)===o,onChange:e=>{var o;return A(null===(o=e.target)||void 0===o?void 0:o.value,l)}}),u.createElement("label",{htmlFor:o,for:o},o))));if("Dropdown"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(Co=e.options)||void 0===Co||null===(wo=Co.list)||void 0===wo?void 0:wo.length)>0)return u.createElement("div",{style:{width:"100%",border:"1px solid var(--app-color-gray-light)"}},u.createElement(y.Z,{key:l,visible:e.visible,mandatory:e.mandatory,items:null===e||void 0===e||null===(ka=e.options)||void 0===ka?void 0:ka.list.map(e=>({label:e,value:e})),className:c.Z.dropdownClassContainer,error:e.errors,onClicked:e=>Me(e?"180px":"50px"),onChange:e=>{Me("50px"),A(e,l)},max:+(null!==(Za=null===e||void 0===e||null===(Ia=e.options)||void 0===Ia?void 0:Ia.max)&&void 0!==Za?Za:0),selectionType:null===e||void 0===e||null===(Na=e.options)||void 0===Na?void 0:Na.type,fieldIcon:e.icon,backgroundColor:null!==e&&void 0!==e&&null!==(Ta=e.options)&&void 0!==Ta&&Ta.valueC&&null!==e&&void 0!==e&&e.value?null===e||void 0===e||null===(Da=e.options)||void 0===Da?void 0:Da.valueC:"",value:void 0===e.value||null===e.value?"":e.value}));if("Dropdown"===(null===e||void 0===e?void 0:e.data_type_name)&&"modules"===(null===e||void 0===e||null===(Mo=e.options)||void 0===Mo?void 0:Mo.type))return u.createElement("div",{style:{width:"100%",border:"1px solid var(--app-color-gray-light)"}},u.createElement(y.Z,{key:l,visible:e.visible,mandatory:e.mandatory,items:J.map(e=>({label:e.name,value:e.id})),className:c.Z.dropdownClassContainer,error:e.errors,onClicked:e=>Me(e?"180px":"50px"),onChange:e=>{Me("50px"),A(e,l)},selectionType:null===e||void 0===e||null===(Pa=e.options)||void 0===Pa?void 0:Pa.type,fieldIcon:e.icon,backgroundColor:null!==e&&void 0!==e&&null!==(Aa=e.options)&&void 0!==Aa&&Aa.valueC&&null!==e&&void 0!==e&&e.value?null===e||void 0===e||null===(Oa=e.options)||void 0===Oa?void 0:Oa.valueC:"",value:void 0===e.value||null===e.value?"":null===(La=J.map(e=>({label:e.name,value:e.id})).find(l=>l.value===e.value))||void 0===La?void 0:La.label}));if("Payments"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(So=e.options)||void 0===So||null===(ko=So.list)||void 0===ko?void 0:ko.length)>0)return u.createElement("div",{style:{width:"100%",border:"0px solid var(--app-color-gray-dark)",pointerEvents:!0===(null===Q||void 0===Q||null===(za=Q.processModule)||void 0===za?void 0:za.isUpdating)&&null!==e&&void 0!==e&&e.value?"none":""}},null!==T&&void 0!==T&&null!==(Ra=T.payments)&&void 0!==Ra&&Ra.stripe_id?u.createElement("div",{style:{padding:"10px 5px 10px 5px",width:"100%",border:"1px solid var(--app-color-gray-lighter)"}},"".concat(null===e||void 0===e?void 0:e.value,", PID: ").concat(null===T||void 0===T||null===(ja=T.payments)||void 0===ja?void 0:ja.stripe_id.slice(0,6))):u.createElement(y.Z,{key:l,className:c.Z.dropdownSelectComponent,visible:e.visible,mandatory:e.mandatory,items:!0===(null===(Ua=Q.processModule)||void 0===Ua||null===(Fa=Ua.module)||void 0===Fa||null===(Wa=Fa.options)||void 0===Wa?void 0:Wa.credits)?[...null!==(qa=null===e||void 0===e||null===(Ba=e.options)||void 0===Ba?void 0:Ba.list.map(e=>({label:e,value:e})))&&void 0!==qa?qa:[],{label:"Wallet",value:"Wallet"}]:null===e||void 0===e||null===(Ya=e.options)||void 0===Ya?void 0:Ya.list.map(e=>({label:e,value:e})),error:0===Se.length?e.errors:Se,onClicked:e=>Me(e?"180px":"50px"),onChange:o=>{if(o){var i,t,n,d,a,r,s,v,u,c,p,m,f,_;const C=null===(i=O.newStepComponents.find(l=>l.selected_fields.filter(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.paymentField)}).length>0))||void 0===i||null===(t=i.selected_fields)||void 0===t?void 0:t.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.paymentField)}),w=null===(n=O.components.find(l=>l.selected_fields.filter(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.paymentField)}).length>0))||void 0===n||null===(d=n.selected_fields)||void 0===d?void 0:d.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.paymentField)}),M=null===(a=O.currentStep)||void 0===a||null===(r=a.component_blueprints)||void 0===r||null===(s=r.find(l=>{var o;return null===l||void 0===l||null===(o=l.selected_fields)||void 0===o?void 0:o.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.paymentField)})}))||void 0===s||null===(v=s.selected_fields)||void 0===v?void 0:v.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.paymentField)});if(Se[l]="",+(null!==(u=null===C||void 0===C?void 0:C.value)&&void 0!==u?u:0)>0)O.total=C.value,O.plan=C.value;else if(+(null!==(c=null===w||void 0===w?void 0:w.value)&&void 0!==c?c:0)>0)O.total=w.value,O.plan=w.value;else{if(!(+(null!==(p=null===M||void 0===M?void 0:M.value)&&void 0!==p?p:0)>0))return Se[l]="Please enter a payment amount in the designated field",Ze([]),void setTimeout(()=>Ze(Se));O.total=M.value,O.plan=M.value}var y,h,g,b,x,E;if(1==(null===(m=Q.processModule)||void 0===m||null===(f=m.module)||void 0===f||null===(_=f.options)||void 0===_?void 0:_.credits)&&"Wallet"===o){if(+(null!==(y=V.wallet)&&void 0!==y?y:0)<+O.total)return Se[l]="Insufficient wallet balance",Ze([]),void setTimeout(()=>Ze(Se))}else if(1==(null===(h=Q.processModule)||void 0===h||null===(g=h.module)||void 0===g||null===(b=g.options)||void 0===b?void 0:b.credits)&&"Points"===o)if(+(null!==(x=null===(E=V.options)||void 0===E?void 0:E.points)&&void 0!==x?x:0)<+O.total)return Se[l]="Insufficient points balance",Ze([]),void setTimeout(()=>Ze(Se));Ze([]),Me("50px"),A(o,l)}},selectionType:"Dropdown",fieldIcon:e.icon,backgroundColor:null!==e&&void 0!==e&&null!==(Ha=e.options)&&void 0!==Ha&&Ha.valueC&&null!==e&&void 0!==e&&e.value?null===e||void 0===e||null===(Va=e.options)||void 0===Va?void 0:Va.valueC:"",value:void 0===e.value||null===e.value?"":e.value,placeholder:""}));if("Positions"===(null===e||void 0===e?void 0:e.data_type_name)&&"multiple"===(null===e||void 0===e||null===(Zo=e.options)||void 0===Zo?void 0:Zo.type))return u.createElement("div",{style:{width:"100%",border:"1px solid var(--app-color-gray-dark)"}},u.createElement(y.Z,{onOpen:e=>{Me("50px"===we?"180px":"50px")},visible:null===e||void 0===e?void 0:e.visible,mandatory:null===e||void 0===e?void 0:e.mandatory,className:c.Z.dropdownClassContainer,items:le.filter(l=>{var o,i;return null===e||void 0===e||null===(o=e.options)||void 0===o||null===(i=o.position_id)||void 0===i?void 0:i.includes(null===l||void 0===l?void 0:l.value)}),backgroundColor:null!==e&&void 0!==e&&null!==(Ga=e.options)&&void 0!==Ga&&Ga.valueC&&null!==e&&void 0!==e&&e.value?null===e||void 0===e||null===(Ja=e.options)||void 0===Ja?void 0:Ja.valueC:"",value:e.value,loading:te,error:null===e||void 0===e?void 0:e.errors,onChange:e=>{A(e,l)},selectionType:"multiple",fieldIcon:null===e||void 0===e?void 0:e.icon,placeholder:""}));if("Positions"===(null===e||void 0===e?void 0:e.data_type_name)&&null!==e&&void 0!==e&&null!==(Io=e.options)&&void 0!==Io&&Io.calendar){var Nr,Tr,Dr,Pr,Ar,Or,Lr,zr,Rr,Ur,Fr,Wr,qr,Br,Yr;const o=JSON.parse(null!==(Nr=null===e||void 0===e?void 0:e.value)&&void 0!==Nr?Nr:JSON.stringify({user:0})),i=G.find(e=>e.id===(null===o||void 0===o?void 0:o.task)),t=null===G||void 0===G?void 0:G.filter(e=>{var l,i,t,n;return(null===e||void 0===e||null===(l=e.add_info)||void 0===l?void 0:l.module_id)===(null===(i=Q.processModule)||void 0===i?void 0:i.module_id)&&e.creator.id===(null===o||void 0===o?void 0:o.user)&&!(null!==e&&void 0!==e&&null!==(t=e.assignee)&&void 0!==t&&t.id)&&Qe()((0,Ke.now)()).diff(Qe()(null===e||void 0===e||null===(n=e.add_info)||void 0===n?void 0:n.start),"seconds")<0});return u.createElement("div",{style:{display:"flex",flexDirection:"column",width:"100%"}},u.createElement("div",{style:{width:"100%",border:"1px solid var(--app-color-gray-dark)"}},u.createElement(y.Z,{visible:null===e||void 0===e?void 0:e.visible,mandatory:null===e||void 0===e?void 0:e.mandatory,className:"multiple"===(null===e||void 0===e||null===(Tr=e.options)||void 0===Tr?void 0:Tr.type)?c.Z.dropdownHeightClassContainer:c.Z.dropdownClassContainer,items:le.filter(l=>{var o,i;return null===e||void 0===e||null===(o=e.options)||void 0===o||null===(i=o.position_id)||void 0===i?void 0:i.includes(null===l||void 0===l?void 0:l.value)}),backgroundColor:null!==e&&void 0!==e&&null!==(Dr=e.options)&&void 0!==Dr&&Dr.valueC&&null!==e&&void 0!==e&&e.value?null===e||void 0===e||null===(Pr=e.options)||void 0===Pr?void 0:Pr.valueC:"",value:null===(Ar=le.find(e=>e.value===(null===o||void 0===o?void 0:o.pos)))||void 0===Ar?void 0:Ar.label,loading:te,error:null===e||void 0===e?void 0:e.errors,onChange:e=>{e.length>0&&(o.pos=void 0,o.user=void 0,A(JSON.stringify(o),l),(0,h.n0)([e]).pipe((0,b.q)(1)).subscribe({next:i=>{Wl(i),setTimeout(()=>{o.pos=e,A(JSON.stringify(o),l)},10)}}))},selectionType:null===e||void 0===e||null===(Or=e.options)||void 0===Or?void 0:Or.type,fieldIcon:null===e||void 0===e?void 0:e.icon})),u.createElement("div",{style:{width:"100%"}},0==(null===Fl||void 0===Fl?void 0:Fl.length)&&u.createElement("p",null,"No ".concat(e.field_name," found")),!i&&u.createElement(Ne.default,{rowStyleSelected:{border:"2px solid black"},initialSelected:null!==e&&void 0!==e&&e.value?Fl.filter(e=>{var l,i;return(null===e||void 0===e||null===(l=e.user)||void 0===l||null===(i=l.positions)||void 0===i?void 0:i.filter(e=>(null===o||void 0===o?void 0:o.pos)===(null===e||void 0===e?void 0:e.id)).length)>0}).map(e=>e.value).indexOf(null===o||void 0===o?void 0:o.user):void 0,card:!0,isReport:!1,"app-variant-is-mobile":"true",columns:["Name","Location","About","Photo","Ratings"],list:Fl.filter(e=>{var l,i;return(null===e||void 0===e||null===(l=e.user)||void 0===l||null===(i=l.positions)||void 0===i?void 0:i.filter(e=>(null===o||void 0===o?void 0:o.pos)===(null===e||void 0===e?void 0:e.id)).length)>0}).map(e=>{var l,o,i,t,n,d,a,r;const s=null===e||void 0===e||null===(l=e.user)||void 0===l||null===(o=l.ratings)||void 0===o?void 0:o.map(e=>+e.ratings);return{Name:"".concat(e.user.first_name," ").concat(e.user.last_name),Location:null===(i=e.user)||void 0===i?void 0:i.city,About:null!==(t=null===(n=e.user.options)||void 0===n?void 0:n.info)&&void 0!==t?t:null===(d=e.user)||void 0===d?void 0:d.positions.map(e=>e.name).toString().replace(",",", "),id:e.user.id,Photo:null!=(null===(a=e.user)||void 0===a?void 0:a.photo)?null===(r=e.user)||void 0===r?void 0:r.photo:null===$||void 0===$?void 0:$.logo,Ratings:(null===s||void 0===s?void 0:s.length)>0&&u.createElement("div",{className:c.Z.simpleNames},Array(Math.round(Ve.Z(je.Z,[Ge.Z,Je.Z])(s))).fill(0).map((e,l)=>u.createElement(ve.G,{key:l,icon:ue.Tab,style:{color:"var(--app-color-blue)"}})),Array(5-Math.round(Ve.Z(je.Z,[Ge.Z,Je.Z])(s))).fill(0).map((e,l)=>u.createElement(ve.G,{key:l,icon:ue.Tab,style:{color:"lightgray"}})))}}),onListItemClick:e=>{if(e){const i=Fl.find(l=>l.value===e.id);o.user=null===i||void 0===i?void 0:i.value,A(JSON.stringify(o),l),(0,rl.Mk)(null===i||void 0===i?void 0:i.value,!0).pipe((0,b.q)(1)).subscribe({})}}},(null===t||void 0===t?void 0:t.length)>0&&u.createElement("p",null,"Schedules"),(null===t||void 0===t?void 0:t.length)>0&&u.createElement(dl.tq,{slidesPerView:3,centeredSlides:!0,spaceBetween:5,initialSlide:1,pagination:{clickable:!0,dynamicBullets:!0},modules:[nl.pt,nl.tl],className:"mySwiper",style:{border:"0.8px dashed gray",padding:"5px",height:"200px"}},null===t||void 0===t?void 0:t.map((e,l)=>u.createElement(dl.o5,{key:l+100,className:c.Z.swiperslide},u.createElement("div",{className:c.Z.dashboardCard,onClick:()=>{El(!0),Pl(e)}},u.createElement("div",{style:{fontSize:"10px"}},Qe()(new Date(e.add_info.start)).format("h:mm a")),e.add_info.end!==e.add_info.start&&u.createElement("div",{style:{fontSize:"10px"}},Qe()(new Date(e.add_info.end)).format("h:mm a")),u.createElement("hr",{style:{border:"0.8px dashed gray"}}),u.createElement("p",{style:{fontSize:"12px",fontWeight:"bold"}},Qe()(new Date(e.add_info.start)).format("MMM")),u.createElement("div",{style:{fontSize:"20px",fontWeight:"bold"}},Qe()(new Date(e.add_info.start)).format("DD"))))))),i&&u.createElement(Ne.default,{modern:!0,isReport:!1,"app-variant-is-mobile":"true",columns:["Responsible",null!==(Lr=null===e||void 0===e||null===(zr=e.options)||void 0===zr?void 0:zr.header)&&void 0!==Lr?Lr:"Name",null!==(Rr=null===e||void 0===e||null===(Ur=e.options)||void 0===Ur?void 0:Ur.start)&&void 0!==Rr?Rr:"Date","Photo"],list:[i].map(l=>{var o,i,t,n,d,a;return{[null!==(o=null===e||void 0===e||null===(i=e.options)||void 0===i?void 0:i.header)&&void 0!==o?o:"Name"]:l.name,[null!==(t=null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.start)&&void 0!==t?t:"Date"]:Qe()(new Date(null===(d=l.add_info)||void 0===d?void 0:d.start)).format("MMM DD h:mm a"),Responsible:"".concat(l.creator.first_name," ").concat(l.creator.last_name),Photo:null===(a=l.creator)||void 0===a?void 0:a.photo}}),onListItemClick:e=>{e&&(El(!0),Pl(i))}}),fl&&u.createElement(al.Z,{save:!1,modalVisible:fl,heading:null!==(Fr=null===e||void 0===e||null===(Wr=e.options)||void 0===Wr?void 0:Wr.header)&&void 0!==Fr?Fr:Il?"Update Calendar":"Create New Calendar",labels:null===e||void 0===e?void 0:e.options,task:Il,isProcess:!0,blured:!1,onClose:()=>El(!1),isEdit:!!Il,statuses:null===e||void 0===e||null===(qr=e.options)||void 0===qr?void 0:qr.list,priority:null===e||void 0===e||null===(Br=e.options)||void 0===Br?void 0:Br.priority,span:null===e||void 0===e||null===(Yr=e.options)||void 0===Yr?void 0:Yr.span,start_date:de,onUpdate:i=>{if(i.creator.id!==(null===V||void 0===V?void 0:V.id)&&(null===i||void 0===i?void 0:i.assignee_id)===(null===V||void 0===V?void 0:V.id)){var t;if(O.assigned_to=i.creator.id,o.task=null===i||void 0===i?void 0:i.id,null!==i&&void 0!==i&&null!==(t=i.add_info)&&void 0!==t&&t.value){var n,d,a,r,s,v,u,c,p;o.value=null===i||void 0===i||null===(n=i.add_info)||void 0===n?void 0:n.value;const l=null===(d=O.components.find(l=>l.selected_fields.find(l=>{var o;return l.field_name===(null===(o=e.options)||void 0===o?void 0:o.valueL)})))||void 0===d?void 0:d.selected_fields.find(l=>{var o;return l.field_name===(null===(o=e.options)||void 0===o?void 0:o.valueL)});var m;if(l)l.value=null===i||void 0===i||null===(m=i.add_info)||void 0===m?void 0:m.value;const t=null===(a=O.newStepComponents.find(l=>l.selected_fields.find(l=>{var o;return l.field_name===(null===(o=e.options)||void 0===o?void 0:o.valueL)})))||void 0===a?void 0:a.selected_fields.find(l=>{var o;return l.field_name===(null===(o=e.options)||void 0===o?void 0:o.valueL)});var f;if(t)t.value=null===i||void 0===i||null===(f=i.add_info)||void 0===f?void 0:f.value;const y=null===(r=Q.processModule)||void 0===r||null===(s=r.steps)||void 0===s||null===(v=s.find(l=>{var o;return null===(o=l.component_blueprints)||void 0===o?void 0:o.find(l=>{var o;return null===l||void 0===l||null===(o=l.selected_fields)||void 0===o?void 0:o.find(l=>{var o;return l.field_name===(null===(o=e.options)||void 0===o?void 0:o.valueL)})})}))||void 0===v||null===(u=v.component_blueprints)||void 0===u||null===(c=u.find(l=>{var o;return null===l||void 0===l||null===(o=l.selected_fields)||void 0===o?void 0:o.find(l=>{var o;return l.field_name===(null===(o=e.options)||void 0===o?void 0:o.valueL)})}))||void 0===c||null===(p=c.selected_fields)||void 0===p?void 0:p.find(l=>{var o;return l.field_name===(null===(o=e.options)||void 0===o?void 0:o.valueL)});var _;if(y)y.value=null===i||void 0===i||null===(_=i.add_info)||void 0===_?void 0:_.value}A(JSON.stringify(o),l)}}})))}if("Positions"===(null===e||void 0===e?void 0:e.data_type_name))return u.createElement("div",{style:{width:"100%",border:"1px solid var(--app-color-gray-light)"}},u.createElement(y.Z,{visible:null===e||void 0===e?void 0:e.visible,mandatory:null===e||void 0===e?void 0:e.mandatory,className:"multiple"===(null===e||void 0===e||null===(Ka=e.options)||void 0===Ka?void 0:Ka.type)?c.Z.dropdownHeightClassContainer:c.Z.dropdownClassContainer,items:le.filter(l=>{var o,i;return null===e||void 0===e||null===(o=e.options)||void 0===o||null===(i=o.position_id)||void 0===i?void 0:i.includes(null===l||void 0===l?void 0:l.value)}),backgroundColor:null!==e&&void 0!==e&&null!==(Qa=e.options)&&void 0!==Qa&&Qa.valueC&&null!==e&&void 0!==e&&e.value?null===e||void 0===e||null===(Xa=e.options)||void 0===Xa?void 0:Xa.valueC:"",value:null===($a=le.find(l=>l.value===e.value))||void 0===$a?void 0:$a.label,loading:te,error:null===e||void 0===e?void 0:e.errors,onChange:o=>{var i;A(o,l),null!==e&&void 0!==e&&null!==(i=e.options)&&void 0!==i&&i.addToPos&&(0,h.Vy)(V,(0,v.Z)((0,v.Z)({},null===V||void 0===V?void 0:V.options),{},{selPos:o})).pipe((0,g.P)()).subscribe({next:e=>{(0,tl.aT)(o,null===V||void 0===V?void 0:V.id).subscribe({next:()=>{var l;(V.options.selPos&&V.options.selPos!==o?(0,tl._s)(V.options.selPos,null===V||void 0===V?void 0:V.id).subscribe({next:()=>{window.scrollTo({top:0,behavior:"smooth"})}}):window.scrollTo({top:0,behavior:"smooth"}),null!==e&&void 0!==e&&e.user)||(V.options.selPos=null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.selPos)}})}})},selectionType:null===e||void 0===e||null===(er=e.options)||void 0===er?void 0:er.type,fieldIcon:null===e||void 0===e?void 0:e.icon}));if("People"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(No=e.options)||void 0===No||null===(To=No.position_id)||void 0===To?void 0:To.length)>0&&null!==e&&void 0!==e&&null!==(Do=e.options)&&void 0!==Do&&Do.calendar){var Hr,Vr,jr,Gr,Jr,Kr,Qr,Xr,$r,es,ls,os,is,ts,ns,ds,as,rs,ss,vs,us;let o;try{var cs;o=JSON.parse(null!==(cs=null===e||void 0===e?void 0:e.value)&&void 0!==cs?cs:JSON.stringify({user:0}))}catch(Hu){}const i=G.find(e=>{var l;return e.id===(null===(l=o)||void 0===l?void 0:l.task)}),t=null===G||void 0===G?void 0:G.filter(e=>{var l,i,t,n,d;return(null===e||void 0===e||null===(l=e.add_info)||void 0===l?void 0:l.module_id)===(null===(i=Q.processModule)||void 0===i?void 0:i.module_id)&&e.creator.id===(null===(t=o)||void 0===t?void 0:t.user)&&!(null!==e&&void 0!==e&&null!==(n=e.assignee)&&void 0!==n&&n.id)&&Qe()((0,Ke.now)()).diff(Qe()(null===e||void 0===e||null===(d=e.add_info)||void 0===d?void 0:d.start),"seconds")<0});return u.createElement("div",{style:{width:"100%"}},(null===e||void 0===e||null===(Hr=e.options)||void 0===Hr||null===(Vr=Hr.dropdown)||void 0===Vr?void 0:Vr.length)>0&&u.createElement("div",{style:{width:"100%",border:"1px solid var(--app-color-gray-dark)"}},u.createElement(y.Z,{visible:null===e||void 0===e?void 0:e.visible,mandatory:null===e||void 0===e?void 0:e.mandatory,className:c.Z.dropdownClassContainer,items:null===e||void 0===e||null===(jr=e.options)||void 0===jr||null===(Gr=jr.dropdown)||void 0===Gr?void 0:Gr.map(e=>({label:e,value:e})),backgroundColor:null!==e&&void 0!==e&&null!==(Jr=e.options)&&void 0!==Jr&&Jr.valueC&&null!==e&&void 0!==e&&e.value?null===e||void 0===e||null===(Kr=e.options)||void 0===Kr?void 0:Kr.valueC:"",value:null===(Qr=o)||void 0===Qr?void 0:Qr.pos,loading:te,error:null===e||void 0===e?void 0:e.errors,onChange:i=>{var t,n;i.length>0&&(o.pos=void 0,o.user=void 0,A(JSON.stringify(o),l),(0,h.FY)(null===e||void 0===e||null===(t=e.options)||void 0===t?void 0:t.position_id,null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.filter,i).pipe((0,b.q)(1)).subscribe({next:e=>{Wl(e),setTimeout(()=>{o.pos=i,A(JSON.stringify(o),l)},0)}}))},selectionType:null===e||void 0===e||null===(Xr=e.options)||void 0===Xr?void 0:Xr.type,fieldIcon:null===e||void 0===e?void 0:e.icon})),0==(null===Fl||void 0===Fl?void 0:Fl.length)&&u.createElement("p",null,"No ".concat(e.field_name," found")),!i&&u.createElement(Ne.default,{rowStyleSelected:{border:"2px solid var(--app-color-gray-light)"},initialSelected:null!==e&&void 0!==e&&e.value?Fl.filter(l=>{var o,i;return(null===l||void 0===l||null===(o=l.user)||void 0===o||null===(i=o.positions)||void 0===i?void 0:i.filter(l=>{var o,i;return null===e||void 0===e||null===(o=e.options)||void 0===o||null===(i=o.position_id)||void 0===i?void 0:i.includes(null===l||void 0===l?void 0:l.id)}).length)>0}).map(e=>e.value).indexOf(null===($r=o)||void 0===$r?void 0:$r.user):void 0,card:!0,isReport:!1,"app-variant-is-mobile":"true",columns:["Name","Info","About",...null!==(es=null===$||void 0===$||null===(ls=$.misc_info)||void 0===ls?void 0:ls.profile)&&void 0!==es?es:["Rate"],"Location","Photo","Ratings"],list:Fl.filter(l=>{var o,i;return(null===l||void 0===l||null===(o=l.user)||void 0===o||null===(i=o.positions)||void 0===i?void 0:i.filter(l=>{var o,i;return null===e||void 0===e||null===(o=e.options)||void 0===o||null===(i=o.position_id)||void 0===i?void 0:i.includes(null===l||void 0===l?void 0:l.id)}).length)>0}).map(e=>{var l,o,i,t,n,d,a,r,s;const p=null===e||void 0===e||null===(l=e.user)||void 0===l||null===(o=l.ratings)||void 0===o?void 0:o.map(e=>+e.ratings);return(0,v.Z)((0,v.Z)({},null!==(i=null===(t=e.user)||void 0===t||null===(n=t.options)||void 0===n?void 0:n.add_info)&&void 0!==i?i:{}),{},{Name:"".concat(e.user.first_name," ").concat(e.user.last_name),Location:u.createElement("div",{style:{marginTop:"10px",fontWeight:"bolder",fontSize:"12px"}},null===(d=e.user)||void 0===d?void 0:d.city),Info:null===(a=e.user.options)||void 0===a?void 0:a.info,id:e.user.id,Photo:null!=(null===(r=e.user)||void 0===r?void 0:r.photo)?null===(s=e.user)||void 0===s?void 0:s.photo:null===$||void 0===$?void 0:$.logo,Ratings:(null===p||void 0===p?void 0:p.length)>0&&u.createElement("div",{className:c.Z.simpleNames},Array(Math.round(Ve.Z(je.Z,[Ge.Z,Je.Z])(p))).fill(0).map((e,l)=>u.createElement(ve.G,{key:l,icon:ue.Tab,style:{color:"var(--app-color-blue)"}})),Array(5-Math.round(Ve.Z(je.Z,[Ge.Z,Je.Z])(p))).fill(0).map((e,l)=>u.createElement(ve.G,{key:l,icon:ue.Tab,style:{color:"lightgray"}})))})}),onListItemClick:e=>{if(e){const i=Fl.find(l=>l.value===e.id);o.user=null===i||void 0===i?void 0:i.value,A(JSON.stringify(o),l),(0,rl.Mk)(null===i||void 0===i?void 0:i.value,!0).pipe((0,b.q)(1)).subscribe({next:()=>ne(!1)})}}},(null===t||void 0===t?void 0:t.length)>0&&u.createElement("p",null,"Schedules"),(null===t||void 0===t?void 0:t.length)>0?u.createElement(dl.tq,{slidesPerView:3,centeredSlides:!0,spaceBetween:10,pagination:{clickable:!0,dynamicBullets:!0},modules:[nl.pt,nl.tl],className:"mySwiper",style:{border:"0.8px dashed gray",padding:"5px",height:"200px",display:(null===t||void 0===t?void 0:t.length)>0?"":"none",zIndex:"0"}},null===t||void 0===t?void 0:t.map((e,l)=>u.createElement(dl.o5,{key:l+200,className:c.Z.swiperslide},u.createElement("div",{className:c.Z.dashboardCard,onClick:()=>{El(!0),Pl(e)}},u.createElement("div",{style:{fontSize:"10px"}},Qe()(new Date(e.add_info.start)).format("h:mm a")),e.add_info.end!==e.add_info.start&&u.createElement("div",{style:{fontSize:"10px"}},Qe()(new Date(e.add_info.end)).format("h:mm a")),u.createElement("hr",{style:{border:"0.8px dashed gray"}}),u.createElement("p",{style:{fontSize:"12px",fontWeight:"bold"}},Qe()(new Date(e.add_info.start)).format("MMM")),u.createElement("div",{style:{fontSize:"20px",fontWeight:"bold"}},Qe()(new Date(e.add_info.start)).format("DD")))))):null!==(os=o)&&void 0!==os&&os.user?u.createElement("p",{style:{fontSize:"12px"}},"No Schedules Found"):u.createElement("div",null)),i&&u.createElement(Ne.default,{modern:!0,isReport:!1,"app-variant-is-mobile":"true",columns:["Responsible",null!==(is=null===e||void 0===e||null===(ts=e.options)||void 0===ts?void 0:ts.header)&&void 0!==is?is:"Name",null!==(ns=null===e||void 0===e||null===(ds=e.options)||void 0===ds?void 0:ds.start)&&void 0!==ns?ns:"Date","Photo"],list:[i].map(l=>{var o,i,t,n,d,a;return{[null!==(o=null===e||void 0===e||null===(i=e.options)||void 0===i?void 0:i.header)&&void 0!==o?o:"Name"]:l.name,[null!==(t=null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.start)&&void 0!==t?t:"Date"]:Qe()(new Date(null===(d=l.add_info)||void 0===d?void 0:d.start)).format("MMM DD h:mm a"),Responsible:"".concat(l.creator.first_name," ").concat(l.creator.last_name),Position:"",Photo:null===(a=l.creator)||void 0===a?void 0:a.photo}}),onListItemClick:e=>{e&&(El(!0),Pl(i))}}),fl&&u.createElement(al.Z,{save:!1,modalVisible:fl,heading:null!==(as=null===e||void 0===e||null===(rs=e.options)||void 0===rs?void 0:rs.header)&&void 0!==as?as:Il?"Update Calendar":"Create New Calendar",labels:null===e||void 0===e?void 0:e.options,task:Il,isProcess:!0,blured:!1,onClose:()=>El(!1),isEdit:!!Il,statuses:null===e||void 0===e||null===(ss=e.options)||void 0===ss?void 0:ss.list,priority:null===e||void 0===e||null===(vs=e.options)||void 0===vs?void 0:vs.priority,span:null===e||void 0===e||null===(us=e.options)||void 0===us?void 0:us.span,start_date:de,onUpdate:i=>{if(i.creator.id!==(null===V||void 0===V?void 0:V.id)&&(null===i||void 0===i?void 0:i.assignee_id)===(null===V||void 0===V?void 0:V.id)){var t;if(O.assigned_to=i.creator.id,o.task=null===i||void 0===i?void 0:i.id,null!==i&&void 0!==i&&null!==(t=i.add_info)&&void 0!==t&&t.value){var n,d,a,r,s,v,u,c,p;o.value=null===i||void 0===i||null===(n=i.add_info)||void 0===n?void 0:n.value;const l=null===(d=O.components.find(l=>l.selected_fields.find(l=>{var o;return l.field_name===(null===(o=e.options)||void 0===o?void 0:o.valueL)})))||void 0===d?void 0:d.selected_fields.find(l=>{var o;return l.field_name===(null===(o=e.options)||void 0===o?void 0:o.valueL)});var m;if(l)l.value=null===i||void 0===i||null===(m=i.add_info)||void 0===m?void 0:m.value;const t=null===(a=O.newStepComponents.find(l=>l.selected_fields.find(l=>{var o;return l.field_name===(null===(o=e.options)||void 0===o?void 0:o.valueL)})))||void 0===a?void 0:a.selected_fields.find(l=>{var o;return l.field_name===(null===(o=e.options)||void 0===o?void 0:o.valueL)});var f;if(t)t.value=null===i||void 0===i||null===(f=i.add_info)||void 0===f?void 0:f.value;const y=null===(r=Q.processModule)||void 0===r||null===(s=r.steps)||void 0===s||null===(v=s.find(l=>{var o;return null===(o=l.component_blueprints)||void 0===o?void 0:o.find(l=>{var o;return null===l||void 0===l||null===(o=l.selected_fields)||void 0===o?void 0:o.find(l=>{var o;return l.field_name===(null===(o=e.options)||void 0===o?void 0:o.valueL)})})}))||void 0===v||null===(u=v.component_blueprints)||void 0===u||null===(c=u.find(l=>{var o;return null===l||void 0===l||null===(o=l.selected_fields)||void 0===o?void 0:o.find(l=>{var o;return l.field_name===(null===(o=e.options)||void 0===o?void 0:o.valueL)})}))||void 0===c||null===(p=c.selected_fields)||void 0===p?void 0:p.find(l=>{var o;return l.field_name===(null===(o=e.options)||void 0===o?void 0:o.valueL)});var _;if(y)y.value=null===i||void 0===i||null===(_=i.add_info)||void 0===_?void 0:_.value}A(JSON.stringify(o),l)}}}))}if("People"===(null===e||void 0===e?void 0:e.data_type_name)&&(!0===(null===e||void 0===e||null===(Po=e.options)||void 0===Po?void 0:Po.slider)||Ll)&&(null===ee||void 0===ee?void 0:ee.length)>0)return u.createElement(dl.tq,{slidesPerView:1,centeredSlides:!0,spaceBetween:10,initialSlide:1,pagination:{clickable:!0,dynamicBullets:!0},modules:[nl.pt,nl.tl],className:"mySwiper"},ee.filter(l=>{var o;return(null===l||void 0===l||null===(o=l.positions)||void 0===o?void 0:o.filter(l=>{var o,i;return null===e||void 0===e||null===(o=e.options)||void 0===o||null===(i=o.position_id)||void 0===i?void 0:i.includes(null===l||void 0===l?void 0:l.id)}).length)>0}).map((o,i)=>{var t,n,d,a,r,s,p,m,f,_,y;const h=null===o||void 0===o||null===(t=o.ratings)||void 0===t?void 0:t.map(e=>+e.ratings);return u.createElement(dl.o5,{key:i,className:c.Z.swiperslide},u.createElement("div",{style:{padding:"5px",width:"100%"},onClick:()=>{var i;e.open=null===e||void 0===e||!e.open,e.idx=l,null!==e&&void 0!==e&&null!==(i=e.options)&&void 0!==i&&i.skip?zl(e.open):A(null===o||void 0===o?void 0:o.id,l)}},u.createElement(ll.Z,{photo:null===o||void 0===o?void 0:o.photo,height:null!==e&&void 0!==e&&e.open?"auto":"260px",width:"100%",firstName:"".concat(null===o||void 0===o?void 0:o.first_name," ").concat(null===o||void 0===o?void 0:o.last_name),position:u.createElement("div",{style:{marginTop:"10px"}},null===o||void 0===o?void 0:o.city),email:null===(n=o.options)||void 0===n?void 0:n.info},(null===h||void 0===h?void 0:h.length)>0&&u.createElement("div",{className:c.Z.simpleNames},Array(Math.round(Ve.Z(je.Z,[Ge.Z,Je.Z])(h))).fill(0).map((e,l)=>u.createElement(ve.G,{key:l,icon:ue.Tab,style:{color:"var(--app-color-blue)"}})),Array(5-Math.round(Ve.Z(je.Z,[Ge.Z,Je.Z])(h))).fill(0).map((e,l)=>u.createElement(ve.G,{key:l,icon:ue.Tab,style:{color:"lightgray"}}))),u.createElement("div",{className:c.Z.simpleNames,style:{pointerEvents:"none",padding:"20px 10px 0 10px",color:"gray"}},(null===(d=e.options)||void 0===d?void 0:d.info)&&(null===e||void 0===e?void 0:e.open)&&(null===e||void 0===e?void 0:e.idx)==l&&u.createElement(u.Fragment,null,u.createElement("p",null,"General Info:"),u.createElement(Ne.default,{rowStyleSelected:{border:"2px solid var(--app-color-gray-light)"},card:!0,isReport:!1,"app-variant-is-mobile":"true",columns:["First Name","Last Name","Phone","Address","City","Postal","Bio"],list:[o].map(e=>{var l,o,i,t,n,d;return{"First Name":"".concat(null!==(l=null===e||void 0===e?void 0:e.first_name)&&void 0!==l?l:""),"Last Name":"".concat(null!==(o=null===e||void 0===e?void 0:e.last_name)&&void 0!==o?o:""),Phone:"".concat(null!==(i=null===e||void 0===e?void 0:e.phone)&&void 0!==i?i:""),Address:"".concat(null!==(t=null===e||void 0===e?void 0:e.address)&&void 0!==t?t:""),City:"".concat(null!==(n=null===e||void 0===e?void 0:e.city)&&void 0!==n?n:""),Postal:"".concat(null!==(d=null===e||void 0===e?void 0:e.postal)&&void 0!==d?d:"")}})})),(null===(a=e.options)||void 0===a?void 0:a.other)&&(null===e||void 0===e?void 0:e.open)&&(null===e||void 0===e?void 0:e.idx)==l&&Object.keys(null!==(r=null===o||void 0===o||null===(s=o.options)||void 0===s?void 0:s.add_info)&&void 0!==r?r:{}).length>1&&u.createElement(u.Fragment,null,u.createElement("p",null,"More Info:"),u.createElement(Ne.default,{rowStyleSelected:{border:"2px solid var(--app-color-gray-light)"},card:!0,isReport:!1,"app-variant-is-mobile":"true",columns:Object.keys(null!==(p=null===o||void 0===o||null===(m=o.options)||void 0===m?void 0:m.add_info)&&void 0!==p?p:{}),list:[o].map(e=>{var l,o;return(0,v.Z)((0,v.Z)({},null!==(l=null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.add_info)&&void 0!==l?l:{}),{},{Rate:""})})})),(null===(f=e.options)||void 0===f?void 0:f.info)&&(null===e||void 0===e?void 0:e.open)&&(null===o||void 0===o||null===(_=o.ratings)||void 0===_?void 0:_.length)>0&&u.createElement(u.Fragment,null,u.createElement("p",null,"What other users say:"),u.createElement(Ne.default,{rowStyleSelected:{border:"2px solid var(--app-color-gray-light)"},card:!0,isReport:!1,columns:["Feedback"],list:null===o||void 0===o||null===(y=o.ratings)||void 0===y?void 0:y.map((e,l)=>({Feedback:'"'.concat(e.comments,'"')}))}))))))}));if("People"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(Ao=e.options)||void 0===Ao||null===(Oo=Ao.position_id)||void 0===Oo?void 0:Oo.length)>0)return u.createElement("div",{style:{width:"100%",border:"1px solid var(--app-color-gray-light)"}},u.createElement(y.Z,{onOpen:e=>{Me("50px"===we?"180px":"50px")},onFocus:()=>{var l;return 0==Fl.length&&Yl(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.position_id)},visible:null===e||void 0===e?void 0:e.visible,mandatory:null===e||void 0===e?void 0:e.mandatory,className:c.Z.dropdownClassContainer,items:Fl.filter(l=>{var o,i;return(null===l||void 0===l||null===(o=l.user)||void 0===o||null===(i=o.positions)||void 0===i?void 0:i.filter(l=>{var o,i;return null===e||void 0===e||null===(o=e.options)||void 0===o||null===(i=o.position_id)||void 0===i?void 0:i.includes(null===l||void 0===l?void 0:l.id)}).length)>0}),backgroundColor:null!==e&&void 0!==e&&null!==(lr=e.options)&&void 0!==lr&&lr.valueC&&null!==e&&void 0!==e&&e.value?null===e||void 0===e||null===(or=e.options)||void 0===or?void 0:or.valueC:"",value:"single"===(null===e||void 0===e||null===(ir=e.options)||void 0===ir?void 0:ir.type)?null===(tr=Fl.find(l=>l.label===(null===e||void 0===e?void 0:e.value)))||void 0===tr?void 0:tr.label:e.value,loading:te,error:null===e||void 0===e?void 0:e.errors,onChange:o=>{var i;if("single"===(null===e||void 0===e||null===(i=e.options)||void 0===i?void 0:i.type)){var t;const i=Fl.find(e=>e.value===o);var n;if(1==(null===e||void 0===e||null===(t=e.options)||void 0===t?void 0:t.email))e.email=null===i||void 0===i||null===(n=i.user)||void 0===n?void 0:n.email;A(null===i||void 0===i?void 0:i.label,l)}else A(o,l);Me("50px")},onClicked:e=>Me(e?"180px":"50px"),selectionType:null===e||void 0===e||null===(nr=e.options)||void 0===nr?void 0:nr.type,fieldIcon:null===e||void 0===e?void 0:e.icon,placeholder:"Select user..."}));if("People"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(Lo=e.options)||void 0===Lo||null===(zo=Lo.componentF)||void 0===zo?void 0:zo.length)>0&&(null===e||void 0===e||null===(Ro=e.options)||void 0===Ro||null===(Uo=Ro.componentO)||void 0===Uo?void 0:Uo.length)>0){var ps,ms,fs,_s,ys,hs,gs;const o=null===(ps=O.components.find(l=>l.selected_fields.filter(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.componentF)}).length>0))||void 0===ps?void 0:ps.selected_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.componentF)}),i=X.find(l=>{var i;return l.component_fields.filter(e=>e.value===(null===o||void 0===o?void 0:o.value)).length>0&&l.module_id===(null===e||void 0===e||null===(i=e.options)||void 0===i?void 0:i.module_id)}),t=null===i||void 0===i?void 0:i.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.componentO)});return u.createElement("div",{style:{width:"100%",border:"1px solid var(--app-color-gray-light)"}},u.createElement(y.Z,{onFocus:()=>{var l;return 0==Fl.length&&Yl(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.position_id)},visible:null===e||void 0===e?void 0:e.visible,mandatory:null===e||void 0===e?void 0:e.mandatory,className:"multiple"===(null===e||void 0===e||null===(ms=e.options)||void 0===ms?void 0:ms.type)?c.Z.dropdownHeightClassContainer:c.Z.dropdownClassContainer,items:Fl.filter(e=>{var l,o;return(null===e||void 0===e||null===(l=e.user)||void 0===l||null===(o=l.positions)||void 0===o?void 0:o.filter(e=>{var l;return null===t||void 0===t||null===(l=t.value)||void 0===l?void 0:l.split(",").includes(null===e||void 0===e?void 0:e.name)}).length)>0}),backgroundColor:null!==e&&void 0!==e&&null!==(fs=e.options)&&void 0!==fs&&fs.valueC&&null!==e&&void 0!==e&&e.value?null===e||void 0===e||null===(_s=e.options)||void 0===_s?void 0:_s.valueC:"",value:"single"===(null===e||void 0===e||null===(ys=e.options)||void 0===ys?void 0:ys.type)?null===(hs=Fl.find(l=>l.label===(null===e||void 0===e?void 0:e.value)))||void 0===hs?void 0:hs.label:e.value,loading:te,error:null===e||void 0===e?void 0:e.errors,onChange:o=>{var i;if("single"===(null===e||void 0===e||null===(i=e.options)||void 0===i?void 0:i.type)){var t;const i=Fl.find(e=>e.value===o);var n;if(1==(null===e||void 0===e||null===(t=e.options)||void 0===t?void 0:t.email))e.email=null===i||void 0===i||null===(n=i.user)||void 0===n?void 0:n.email;A(null===i||void 0===i?void 0:i.label,l)}else A(o,l);Me("50px")},onClicked:e=>Me(e?"180px":"50px"),selectionType:null===e||void 0===e||null===(gs=e.options)||void 0===gs?void 0:gs.type,fieldIcon:null===e||void 0===e?void 0:e.icon,placeholder:"Select user..."}))}if("People"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(Fo=e.options)||void 0===Fo||null===(Wo=Fo.componentF)||void 0===Wo?void 0:Wo.length)>0&&(null===e||void 0===e||null===(qo=e.options)||void 0===qo||null===(Bo=qo.componentUO)||void 0===Bo?void 0:Bo.length)>0){var bs,xs,Es,Cs,ws,Ms,Ss;const o=null===(bs=O.components.find(l=>l.selected_fields.filter(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.componentF)}).length>0))||void 0===bs?void 0:bs.selected_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.componentF)}),i=X.filter(l=>{var o;return l.module_id===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.module_id)}).find(e=>e.component_fields.filter(e=>(null===e||void 0===e?void 0:e.value)===(null===o||void 0===o?void 0:o.value)).length>0),t=i?null===i||void 0===i?void 0:i.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.componentUO)}):"";return u.createElement("div",{style:{width:"100%",border:"1px solid var(--app-color-gray-light)"}},u.createElement(y.Z,{onFocus:()=>{var l;return 0==Fl.length&&Yl(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.position_id)},visible:null===e||void 0===e?void 0:e.visible,mandatory:null===e||void 0===e?void 0:e.mandatory,className:"multiple"===(null===e||void 0===e||null===(xs=e.options)||void 0===xs?void 0:xs.type)?c.Z.dropdownHeightClassContainer:c.Z.dropdownClassContainer,items:Fl.filter(e=>{var l;return null===t||void 0===t||null===(l=t.value)||void 0===l?void 0:l.split(",").includes(null===e||void 0===e?void 0:e.label)}),backgroundColor:null!==e&&void 0!==e&&null!==(Es=e.options)&&void 0!==Es&&Es.valueC&&null!==e&&void 0!==e&&e.value?null===e||void 0===e||null===(Cs=e.options)||void 0===Cs?void 0:Cs.valueC:"",value:"single"===(null===e||void 0===e||null===(ws=e.options)||void 0===ws?void 0:ws.type)?null===(Ms=Fl.find(l=>l.label===(null===e||void 0===e?void 0:e.value)))||void 0===Ms?void 0:Ms.label:e.value,loading:te,error:null===e||void 0===e?void 0:e.errors,onChange:o=>{var i;if("single"===(null===e||void 0===e||null===(i=e.options)||void 0===i?void 0:i.type)){var t;const i=Fl.find(e=>e.value===o);var n;if(1==(null===e||void 0===e||null===(t=e.options)||void 0===t?void 0:t.email))e.email=null===i||void 0===i||null===(n=i.user)||void 0===n?void 0:n.email;A(null===i||void 0===i?void 0:i.label,l)}else A(o,l);Me("50px")},onClicked:e=>Me(e?"180px":"50px"),selectionType:null===e||void 0===e||null===(Ss=e.options)||void 0===Ss?void 0:Ss.type,fieldIcon:null===e||void 0===e?void 0:e.icon,placeholder:"Select user..."}))}if("Status"===(null===e||void 0===e?void 0:e.data_type_name)){var ks,Zs,Is,Ns,Ts,Ds,Ps,As,Os,Ls,zs,Rs,Us,Fs,Ws;let o=(null===(ks=e.options)||void 0===ks||null===(Zs=ks.list)||void 0===Zs?void 0:Zs.length)>0?null===(Is=e.options)||void 0===Is||null===(Ns=Is.list)||void 0===Ns?void 0:Ns.map(e=>({label:e,value:e})):1==(null===Q||void 0===Q||null===(Ts=Q.processModule)||void 0===Ts||null===(Ds=Ts.module)||void 0===Ds||null===(Ps=Ds.options)||void 0===Ps?void 0:Ps.asGraphical)?[{label:"Show",value:"Show"},{label:"Hide",value:"Hide"}]:(null===$||void 0===$||null===(As=$.misc_info)||void 0===As||null===(Os=As.status)||void 0===Os?void 0:Os.length)>0?null===$||void 0===$||null===(Ls=$.misc_info)||void 0===Ls?void 0:Ls.status:w.MO;var qs;if((null===$||void 0===$||null===(zs=$.misc_info)||void 0===zs||null===(Rs=zs.rules)||void 0===Rs?void 0:Rs.length)>0)null===$||void 0===$||null===(qs=$.misc_info)||void 0===qs||qs.rules.filter(e=>"status"===e.type).filter(l=>{l.valueCondition===e.value&&(o="0"===l.allow?o.filter(o=>{var i;return l.values.concat(null===(i=e.options)||void 0===i?void 0:i.list).includes(o.value)}):o.filter(o=>{var i;return!l.values.concat(null===(i=e.options)||void 0===i?void 0:i.list).includes(o.value)}))});return u.createElement(y.Z,{key:l,visible:e.visible,mandatory:e.mandatory,backgroundColor:null!==e&&void 0!==e&&null!==(Us=e.options)&&void 0!==Us&&Us.valueC&&null!==e&&void 0!==e&&e.value?null===e||void 0===e||null===(Fs=e.options)||void 0===Fs?void 0:Fs.valueC:"",value:null!==(Ws=e.value)&&void 0!==Ws?Ws:"",items:o,error:e.errors,className:c.Z.dropdownSelectComponent,onClicked:e=>Me(e?"180px":"50px"),onChange:e=>{$.start=!0,Me("50px"),A(e,l);const o=N.selected_fields.find(l=>"Date"===l.data_type_name&l.field_name===e);o&&(o.value=new Date(Qe().now()))},fieldIcon:e.icon,placeholder:"Select status..."})}if("Action Button"===(null===e||void 0===e?void 0:e.data_type_name)||"Ratings"===(null===e||void 0===e?void 0:e.data_type_name))return u.createElement("div",{key:l});if("Video"===(null===e||void 0===e?void 0:e.data_type_name)&&null!==e&&void 0!==e&&null!==(Yo=e.options)&&void 0!==Yo&&Yo.start)return u.createElement("div",{style:{width:"100%",height:"auto",border:"1px solid var(--app-color-gray-light)"}},u.createElement("div",{id:"custom-input",style:{cursor:"pointer",display:"flex",justifyContent:"center",width:"100%",alignItems:"stretch",padding:"5px",border:"0px solid var(--app-color-gray-lighter)"}},u.createElement("input",{value:e.value?Qe()(e.value).format("DD MMMM YYYY HH:mm"):"",disabled:!0,type:"text",style:{flex:1,marginTop:"auto",marginBottom:"auto",outline:"none",fontFamily:"var(--app-text-main-font)",fontSize:"16px",lineHeight:"20px",color:"#4A4A4A",textAlign:"left",maxWidth:"98%",border:"0px"},onChange:e=>{}}),u.createElement(ve.G,{icon:ue.WRo,style:{width:"14px",height:"14px"}})),u.createElement(yl.Z,{payload:{name:null===T||void 0===T?void 0:T.id}}));if("Video"!==(null===e||void 0===e?void 0:e.data_type_name)||null!==e&&void 0!==e&&null!==(Ho=e.options)&&void 0!==Ho&&Ho.start){var Bs,Ys,Hs,Vs,js,Gs,Js,Ks,Qs,Xs,$s,ev,lv,ov,iv,tv,nv,dv,av,rv,sv,vv,uv,cv,pv,mv,fv,_v,yv,hv,gv,bv,xv,Ev,Cv,wv,Mv,Sv,kv,Zv,Iv,Nv,Tv,Dv,Pv,Av,Ov,Lv,zv,Rv,Uv,Fv,Wv,qv,Bv,Yv,Hv,Vv,jv,Gv,Jv,Kv,Qv,Xv,$v,eu,lu,ou,iu,tu,nu,du,au,ru;if("Clock"===(null===e||void 0===e?void 0:e.data_type_name))return u.createElement("div",{className:c.Z.centerDiv,style:{width:"100%",height:"auto",border:"1px dashed var(--app-color-gray-light)",padding:"20px",flexDirection:"column",fontSize:"16px"}},"".concat(H.format("MMMM DD YYYY")),u.createElement("p",{className:c.Z.timer},"".concat(H.format("HH:mm:ss"))),u.createElement("div",{className:c.Z.centerDiv,style:{display:"flex",flexDirection:"row"}},u.createElement("input",{readOnly:!0,autoComplete:"off",value:null!==e&&void 0!==e&&e.value?Qe()(new Date(+(null!==(Bs=e.value)&&void 0!==Bs?Bs:0))).format("DD MMM YYYY h:mm a"):"",className:c.Z.currencyInput,style:{border:"1px solid var(--app-color-gray-light)",maxWidth:"220px",marginRight:"10px",textAlign:"center"}}),u.createElement(x.zx,{light:!0,title:"Set",clicked:()=>{D((0,Ke.now)(),l)}})));if("Profile"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(Vo=e.options)||void 0===Vo||null===(jo=Vo.type)||void 0===jo?void 0:jo.length)>0&&e.visible){var su,vu,uu,cu,pu,mu,fu,_u,yu,hu,gu,bu,xu,Eu,Cu,wu;let o=V.id;var Mu;if("creator"!==e.options.type&&"wallet"!==e.options.type||null===T||void 0===T||null===(su=T.created_by)||void 0===su||!su.id)if("creator"!==e.options.type&&"wallet"!==e.options.type||null!==T&&void 0!==T&&null!==(vu=T.created_by)&&void 0!==vu&&vu.id)if("owner"===e.options.type){var Su;o=null!==T&&void 0!==T&&T.options?null===(Su=JSON.parse(null===T||void 0===T?void 0:T.options))||void 0===Su?void 0:Su.owner:""}else{if("custom"!==e.options.type)return null;var ku;o=null===e||void 0===e||null===(ku=e.options)||void 0===ku?void 0:ku.id}else o=V.id;else o=null===(Mu=T.created_by)||void 0===Mu?void 0:Mu.id;const i=ee.concat([V]).find(e=>e.id===o),t=null===i||void 0===i||null===(uu=i.ratings)||void 0===uu?void 0:uu.map(e=>+e.ratings);return i?u.createElement("div",{className:c.Z.centerDiv,key:l},"wallet"===e.options.type?u.createElement(ll.Z,{simple:!0,height:"100px",photo:i.photo,noPhoto:0==(null===e||void 0===e||null===(cu=e.options)||void 0===cu?void 0:cu.show),firstName:"".concat(null===i||void 0===i?void 0:i.first_name," ").concat(null===i||void 0===i?void 0:i.last_name),lastName:"(".concat(null===(pu=null!==(mu=i.wallet)&&void 0!==mu?mu:0)||void 0===pu?void 0:pu.toFixed(2),")"),position:null===i||void 0===i||null===(fu=i.positions)||void 0===fu||null===(_u=fu.slice(0,1))||void 0===_u?void 0:_u.map(e=>e.name),email:null===i||void 0===i?void 0:i.email,cardClicked:()=>{},width:"100%"}):u.createElement(ll.Z,{photo:i.photo,height:"auto",noPhoto:!1,firstName:"".concat(null===i||void 0===i?void 0:i.first_name),lastName:"".concat(null===i||void 0===i?void 0:i.last_name),position:null===i||void 0===i||null===(yu=i.positions)||void 0===yu||null===(hu=yu.slice(0,1))||void 0===hu?void 0:hu.map(e=>e.name),email:null===i||void 0===i?void 0:i.email,cardClicked:()=>{},width:"100%"},(null===t||void 0===t?void 0:t.length)>0&&u.createElement("div",{className:c.Z.centerDiv},Array(Math.round(Ve.Z(je.Z,[Ge.Z,Je.Z])(t))).fill(0).map((e,l)=>u.createElement(ve.G,{key:l,icon:ue.Tab,style:{height:"15px",width:"15px",color:"var(--app-color-blue)"}})),Array(5-Math.round(Ve.Z(je.Z,[Ge.Z,Je.Z])(t))).fill(0).map((e,l)=>u.createElement(ve.G,{key:l,icon:ue.Tab,style:{height:"15px",width:"15px",color:"lightgray"}}))),u.createElement("div",{className:c.Z.simpleNames,style:{pointerEvents:"none",padding:"20px 10px 0 10px",color:"gray"}},u.createElement("p",{style:{fontSize:"14px"}},"General Info:"),u.createElement(Ne.default,{rowStyleSelected:{border:"2px solid var(--app-color-gray-light)"},card:!0,isReport:!1,"app-variant-is-mobile":"true",columns:["First Name","Last Name","Phone","Address","City","Postal","Bio"],list:[i].map(e=>{var l,o,i,t,n,d;return{"First Name":"".concat(null!==(l=null===e||void 0===e?void 0:e.first_name)&&void 0!==l?l:""),"Last Name":"".concat(null!==(o=null===e||void 0===e?void 0:e.last_name)&&void 0!==o?o:""),Phone:"".concat(null!==(i=null===e||void 0===e?void 0:e.phone)&&void 0!==i?i:""),Address:"".concat(null!==(t=null===e||void 0===e?void 0:e.address)&&void 0!==t?t:""),City:"".concat(null!==(n=null===e||void 0===e?void 0:e.city)&&void 0!==n?n:""),Postal:"".concat(null!==(d=null===e||void 0===e?void 0:e.postal)&&void 0!==d?d:"")}})}),Object.keys(null!==(gu=null===i||void 0===i||null===(bu=i.options)||void 0===bu?void 0:bu.add_info)&&void 0!==gu?gu:{}).length>1&&u.createElement(u.Fragment,null,u.createElement("p",{style:{fontSize:"14px"}},"More Info:"),u.createElement(Ne.default,{rowStyleSelected:{border:"2px solid var(--app-color-gray-light)"},card:!0,isReport:!1,"app-variant-is-mobile":"true",columns:Object.keys(null!==(xu=null===i||void 0===i||null===(Eu=i.options)||void 0===Eu?void 0:Eu.add_info)&&void 0!==xu?xu:{}),list:[i].map(e=>{var l,o;return(0,v.Z)((0,v.Z)({},null!==(l=null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.add_info)&&void 0!==l?l:{}),{},{Rate:""})})})),(null===i||void 0===i||null===(Cu=i.ratings)||void 0===Cu?void 0:Cu.length)>0&&u.createElement(u.Fragment,null,u.createElement("p",{style:{fontSize:"14px"}},"What other users say:"),u.createElement(Ne.default,{rowStyleSelected:{border:"2px solid var(--app-color-gray-light)"},card:!0,isReport:!1,columns:["Feedback"],list:null===i||void 0===i||null===(wu=i.ratings)||void 0===wu?void 0:wu.map((e,l)=>({Feedback:'"'.concat(e.comments,'"')}))}))))):"owner"===e.options.type&&u.createElement("p",null,"No user has accepted this transaction")}if("Summary"===(null===e||void 0===e?void 0:e.data_type_name)){var Zu;let e={};return O.components.map(l=>l.selected_fields.filter(e=>(null===e||void 0===e?void 0:e.value)&&!("Pin"===e.data_type_name||"Lookup"===e.data_type_name||"Record"===e.data_type_name||"Ratings"===e.data_type_name||"People"===e.data_type_name||"Positions"===e.data_type_name||"Notes"===e.data_type_name||"URL"===e.data_type_name||"Summary"===e.data_type_name||"Info"===e.data_type_name)&&1==e.visible).map(l=>{var o;e[l.field_name]="".concat(null!==(o=null===l||void 0===l?void 0:l.value)&&void 0!==o?o:"")})),(null!==(Zu=null===T||void 0===T?void 0:T.component_fields)&&void 0!==Zu?Zu:[]).filter(e=>(null===e||void 0===e?void 0:e.value)&&!("Pin"===e.data_type_name||"Lookup"===e.data_type_name||"Record"===e.data_type_name||"Ratings"===e.data_type_name||"People"===e.data_type_name||"Positions"===e.data_type_name||"Notes"===e.data_type_name||"URL"===e.data_type_name||"Summary"===e.data_type_name||"Info"===e.data_type_name)).forEach(l=>{var o;return e[l.field_name]="".concat(null!==(o=null===l||void 0===l?void 0:l.value)&&void 0!==o?o:"")}),u.createElement("div",{key:l,style:{width:ml.tq?"%100":"50%"}},u.createElement($e.Z,{hideHeaders:!0,className:c.Z.tableHostMobile,style:{width:"100%"},tableHostSimple:c.Z.leagueTable,columns:["1","2"],list:Object.keys(e).map(l=>({1:l,2:e[l]}))}))}if("Pin"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(Go=e.options)||void 0===Go||null===(Jo=Go.pintype)||void 0===Jo?void 0:Jo.length)>0)return null!==e&&void 0!==e&&null!==(Ys=e.options)&&void 0!==Ys&&Ys.source||null!==(Hs=e.options)&&void 0!==Hs&&Hs.destination?u.createElement("div",{style:{color:"var(--app-color-gray-dark)",height:"inherit",width:"100%",display:null!==e&&void 0!==e&&e.visible?"":"none"}},u.createElement("div",{key:l,className:c.Z.filtersContainer,style:{color:"var(--app-color-gray-dark)",height:"inherit",width:"100%",display:null!==e&&void 0!==e&&e.visible?"":"none"}},u.createElement("div",{className:c.Z.actionsContainer,style:{fontSize:"12px"},onClick:()=>{Ce({source:!0,destination:!1,field:e,index:l})}},u.createElement("div",{style:{width:"100px"}},1==(null===e||void 0===e||null===(Vs=e.options)||void 0===Vs?void 0:Vs.destination)?"From":"Pin",":"),u.createElement("div",null,null!==e&&void 0!==e&&e.value?null===(js=JSON.parse(e.value))||void 0===js||null===(Gs=js.source)||void 0===Gs?void 0:Gs.address:"")),1==(null===e||void 0===e||null===(Js=e.options)||void 0===Js?void 0:Js.destination)&&u.createElement("hr",{style:{borderTop:"0.5px solid #D2D2D2"}}),1==(null===e||void 0===e||null===(Ks=e.options)||void 0===Ks?void 0:Ks.destination)&&u.createElement("div",{className:c.Z.actionsContainer,style:{fontSize:"12px"},onClick:()=>{Ce({source:!1,destination:!0,field:e,index:l})}},u.createElement("div",{style:{width:"100px"}},"To",":"),u.createElement("div",null,null!==e&&void 0!==e&&e.value?null===(Qs=JSON.parse(e.value))||void 0===Qs||null===(Xs=Qs.destination)||void 0===Xs?void 0:Xs.address:""))),u.createElement("div",{style:{display:null!==($s=e.options)&&void 0!==$s&&$s.source?"flex":"none",width:"100%"}},u.createElement(x.zx,{icon:u.createElement(ve.G,{icon:ue.W3K,style:{width:"20px",height:"20px"}}),clicked:()=>{Ce({source:!0,destination:!1,field:e,index:l})},style:{backgroundColor:"blue",width:"100%"},title:1==(null===e||void 0===e||null===(ev=e.options)||void 0===ev?void 0:ev.destination)?"Origin from":"Pin location"})),1==(null===e||void 0===e||null===(lv=e.options)||void 0===lv?void 0:lv.destination)&&u.createElement("div",{style:{display:null!==(ov=e.options)&&void 0!==ov&&ov.destination?"flex":"none",width:"100%"}},u.createElement(x.zx,{icon:u.createElement(ve.G,{icon:ue.opg,style:{width:"20px",height:"20px"}}),clicked:()=>{Ce({source:!1,destination:!0,field:e,index:l})},style:{backgroundColor:"green",width:"100%"},title:"Destination"})),(null===Ee||void 0===Ee?void 0:Ee.source)&&u.createElement(x.U7,{hasCloseIcon:!0,blured:!1,scrollable:!0,isOpen:Ee.source,shadowedContainerStyle:{width:ml.tq?"100%":"50%"},onClose:()=>Ce({source:!1,destination:!1})},u.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",marginTop:"30px"}},u.createElement("div",{className:c.Z.title},null!==(iv=null===Ee||void 0===Ee||null===(tv=Ee.field)||void 0===tv?void 0:tv.field_name)&&void 0!==iv?iv:"Origin:"),u.createElement(S.Z,{zoom:null===e||void 0===e||null===(nv=e.options)||void 0===nv?void 0:nv.zoom,value:null===(dv=JSON.parse(null!==(av=null===Ee||void 0===Ee||null===(rv=Ee.field)||void 0===rv?void 0:rv.value)&&void 0!==av?av:JSON.stringify({source:{},destination:{}})))||void 0===dv?void 0:dv.source,onChange:o=>{var i,t,n,d,a,r,s,v,u,c;const p=null!==Ee&&void 0!==Ee&&null!==(i=Ee.field)&&void 0!==i&&i.value?JSON.parse(null===Ee||void 0===Ee||null===(t=Ee.field)||void 0===t?void 0:t.value):{source:{lat:0,lng:0,address:""},destination:{lat:0,lng:0,address:""}};if(p.source.lat=o.geometry.location.lat,p.source.lng=o.geometry.location.lng,p.source.address=o.formatted_address,null!==Ee&&void 0!==Ee&&Ee.field&&(null===(n=e.options)||void 0===n||!n.compute))return D(JSON.stringify(p),Ee.index),void Ce({source:!1,destination:!1});let m=null===N||void 0===N||null===(d=N.selected_fields)||void 0===d?void 0:d.find(e=>{var l;return"distance"===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.mapToItem)});var f,_,y,h,g,b,x,E,C,M,S,k;m||(m=null===(f=O.newStepComponents)||void 0===f||null===(_=f.find(e=>{var l;return(null===(l=e.selected_fields)||void 0===l?void 0:l.filter(e=>{var l;return"distance"===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.mapToItem)}).length)>0}))||void 0===_||null===(y=_.selected_fields)||void 0===y?void 0:y.find(e=>{var l;return"distance"===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.mapToItem)}),m||(m=null===(h=O.components)||void 0===h||null===(g=h.find(e=>{var l;return(null===(l=e.selected_fields)||void 0===l?void 0:l.filter(e=>{var l;return"distance"===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.mapToItem)}).length)>0}))||void 0===g||null===(b=g.selected_fields)||void 0===b?void 0:b.find(e=>{var l;return"distance"===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.mapToItem)}),m||(m=null===(x=Q.processModule)||void 0===x||null===(E=x.steps[null!==(S=null===(k=Q.processModule)||void 0===k?void 0:k.stepIndex)&&void 0!==S?S:1].component_blueprints)||void 0===E||null===(C=E.find(e=>{var l;return(null===(l=e.selected_fields)||void 0===l?void 0:l.filter(e=>{var l;return"distance"===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.mapToItem)}).length)>0}))||void 0===C||null===(M=C.selected_fields)||void 0===M?void 0:M.find(e=>{var l;return"distance"===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.mapToItem)}))));if(null!==p&&void 0!==p&&p.source&&null!==(a=e.options)&&void 0!==a&&a.compute&&0==(null===(r=e.options)||void 0===r?void 0:r.destination))p.distance=(0,w.Iw)(p.source.lat,p.source.lng,j.latitude,j.longitude),p.duration=0,m&&(m.value=p.distance,m.disabled=!0),D(JSON.stringify(p),l);else if(null!==(s=p.source)&&void 0!==s&&s.address&&null!==Ee&&void 0!==Ee&&null!==(v=Ee.field.options)&&void 0!==v&&v.compute){var Z;null===(Z=(0,ol.Y)(p.source.address,p.destination.address))||void 0===Z||Z.subscribe({next:e=>{var l;if((null===e||void 0===e||null===(l=e.routes)||void 0===l?void 0:l.length)>0){var o;const l=e.routes[0];var i,t,n,d;if((null===l||void 0===l||null===(o=l.legs)||void 0===o?void 0:o.length)>0)p.distance=(null===(i=l.legs[0])||void 0===i||null===(t=i.distance)||void 0===t?void 0:t.value)/1e3,p.duration=null===(n=l.legs[0])||void 0===n||null===(d=n.duration)||void 0===d?void 0:d.value,p.steps=l.legs[0].steps,m&&(m.value=p.distance,m.disabled=!0)}},error:e=>{p.distance=(0,w.Iw)(p.source.lat,p.source.lng,p.destination.lat,p.destination.lng),p.duration=0,m&&(m.value=p.distance,m.disabled=!0)}})}else null!==(u=p.source)&&void 0!==u&&u.address&&(p.distance=(0,w.Iw)(p.source.lat,p.source.lng,p.destination.lat,p.destination.lng),p.duration=0,m&&(m.value=p.distance));D(JSON.stringify(p),null!==(c=null===Ee||void 0===Ee?void 0:Ee.index)&&void 0!==c?c:l),Ce({source:!1,destination:!1})},mapkey:null===(sv=$.misc_info)||void 0===sv?void 0:sv.map}),u.createElement("br",null),u.createElement(x.zx,{clicked:()=>Ce({source:!1,destination:!1}),title:"Close",style:{width:"80%",backgroundColor:"orange"}}))),(null===Ee||void 0===Ee?void 0:Ee.destination)&&u.createElement(x.U7,{hasCloseIcon:!0,blured:!1,scrollable:!0,isOpen:Ee.destination,shadowedContainerStyle:{width:ml.tq?"100%":"50%"},shadowedContainerClassname:c.Z.mappopup,onClose:()=>Ce({source:!1,destination:!1})},u.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"}},u.createElement("div",{className:c.Z.title},null!==(vv=null===Ee||void 0===Ee||null===(uv=Ee.field)||void 0===uv?void 0:uv.field_name)&&void 0!==vv?vv:"Destination:"),u.createElement(S.Z,{value:null===(cv=JSON.parse(null!==(pv=null===Ee||void 0===Ee||null===(mv=Ee.field)||void 0===mv?void 0:mv.value)&&void 0!==pv?pv:JSON.stringify({source:{},destination:{}})))||void 0===cv?void 0:cv.destination,zoom:null===e||void 0===e||null===(fv=e.options)||void 0===fv?void 0:fv.zoom,onChange:e=>{var l,o,i,t,n,d;const a=null!==Ee&&void 0!==Ee&&null!==(l=Ee.field)&&void 0!==l&&l.value?JSON.parse(null===Ee||void 0===Ee||null===(o=Ee.field)||void 0===o?void 0:o.value):{destination:{lat:0,lng:0,address:""},source:{lat:0,lng:0,address:""}};let r=null===N||void 0===N||null===(i=N.selected_fields)||void 0===i?void 0:i.find(e=>{var l;return"distance"===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.mapToItem)});var s,v,u,c,p,m,f;r||(r=null===(s=O.newStepComponents)||void 0===s||null===(v=s.find(e=>{var l;return(null===(l=e.selected_fields)||void 0===l?void 0:l.filter(e=>{var l;return"distance"===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.mapToItem)}).length)>0}))||void 0===v||null===(u=v.selected_fields)||void 0===u?void 0:u.find(e=>{var l;return"distance"===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.mapToItem)}),r||(r=null===(c=O.components)||void 0===c||null===(p=c.find(e=>{var l;return(null===(l=e.selected_fields)||void 0===l?void 0:l.filter(e=>{var l;return"distance"===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.mapToItem)}).length)>0}))||void 0===p||null===(m=p.selected_fields)||void 0===m?void 0:m.find(e=>{var l;return"distance"===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.mapToItem)})));(a.destination.lat=e.geometry.location.lat,a.destination.lng=e.geometry.location.lng,a.destination.address=e.formatted_address,null!==(t=a.destination)&&void 0!==t&&t.address&&null!==Ee&&void 0!==Ee&&null!==(n=Ee.field.options)&&void 0!==n&&n.compute)?null===(f=(0,ol.Y)(a.source.address,a.destination.address))||void 0===f||f.subscribe({next:e=>{var l;if((null===e||void 0===e||null===(l=e.routes)||void 0===l?void 0:l.length)>0){var o;const l=e.routes[0];var i,t,n,d;if((null===l||void 0===l||null===(o=l.legs)||void 0===o?void 0:o.length)>0)a.distance=(null===(i=l.legs[0])||void 0===i||null===(t=i.distance)||void 0===t?void 0:t.value)/1e3,a.duration=null===(n=l.legs[0])||void 0===n||null===(d=n.duration)||void 0===d?void 0:d.value,a.steps=l.legs[0].steps,r&&(r.value=a.distance)}},error:e=>{a.distance=(0,w.Iw)(a.source.lat,a.source.lng,a.destination.lat,a.destination.lng),a.duration=0,r&&(r.value=a.distance)}}):null!==(d=a.destination)&&void 0!==d&&d.address&&(a.distance=(0,w.Iw)(a.source.lat,a.source.lng,a.destination.lat,a.destination.lng),a.duration=0,r&&(r.value=a.distance));D(JSON.stringify(a),null===Ee||void 0===Ee?void 0:Ee.index),Ce({source:!1,destination:!1})},mapkey:null===(_v=$.misc_info)||void 0===_v?void 0:_v.map}),u.createElement("br",null),u.createElement(x.zx,{clicked:()=>Ce({source:!1,destination:!1}),title:"Close",style:{width:"80%",backgroundColor:"orange"}})))):u.createElement(S.Z,{zoom:null===Ee||void 0===Ee||null===(yv=Ee.field)||void 0===yv||null===(hv=yv.options)||void 0===hv?void 0:hv.zoom,key:l,value:null===N||void 0===N?void 0:N.selected_fields[l].value,onLocationChange:e=>W(e,l),mapkey:null===(gv=$.misc_info)||void 0===gv?void 0:gv.map});if("Map"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(Ko=e.options)||void 0===Ko||null===(Qo=Ko.maptype)||void 0===Qo?void 0:Qo.length)>0)return u.createElement(Ie,{apikey:null===$||void 0===$||null===(bv=$.misc_info)||void 0===bv?void 0:bv.map,search:null!==(xv=null===e||void 0===e||null===(Ev=e.options)||void 0===Ev?void 0:Ev.search)&&void 0!==xv&&xv});if("YesNo"===(null===e||void 0===e?void 0:e.data_type_name))return u.createElement(u.Fragment,null,u.createElement("div",{class:"checkbox-wrapper-21"},u.createElement("div",{style:{display:"flex",justifyContent:"space-between",margin:"20px 0px"}},u.createElement("input",{id:"check-23",type:"checkbox",checked:null!==(Cv=null===e||void 0===e?void 0:e.value)&&void 0!==Cv&&Cv,onChange:e=>A(e.target.checked,l),style:{marginRight:"20px"}}),u.createElement("label",null,e.field_name))));if("Freehand"===(null===e||void 0===e?void 0:e.data_type_name))return u.createElement(m.Z,{enabled:$o,style:{border:"0.5px dashed gray",padding:"10px"},width:ml.tq?"100%":"".concat(null!==(wv=null===e||void 0===e||null===(Mv=e.options)||void 0===Mv?void 0:Mv.width)&&void 0!==wv?wv:40,"%"),height:"400px",editMode:q,key:l,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors},null!==e&&void 0!==e&&e.value?u.createElement("img",{alt:"lg",src:null===e||void 0===e?void 0:e.value,style:{width:"500px",height:"300px",cursor:"pointer"}}):u.createElement(vl(),{penColor:"green",canvasProps:{width:400,height:200,className:"sigCanvas"},ref:Ul,onEnd:()=>D(Ul.current.toDataURL("image/png"),l)}));if("User Wallet"===(null===e||void 0===e?void 0:e.data_type_name)){var Iu,Nu,Tu,Du,Pu,Au;const o=null!==(Iu=null===ee||void 0===ee?void 0:ee.find(e=>{var l;return e.id===(null===T||void 0===T||null===(l=T.created_by)||void 0===l?void 0:l.id)}))&&void 0!==Iu?Iu:V;return u.createElement("div",{style:{width:"100%",border:"1px dashed gray",padding:"20px",marginTop:"10px"}},u.createElement(ll.Z,{simple:!0,height:"100px",photo:o.photo,firstName:"".concat(null===o||void 0===o?void 0:o.first_name," ").concat(null===o||void 0===o?void 0:o.last_name),lastName:"(".concat(null===(Nu=null!==(Tu=o.wallet)&&void 0!==Tu?Tu:0)||void 0===Nu?void 0:Nu.toFixed(2),")"),position:null===o||void 0===o||null===(Du=o.positions)||void 0===Du||null===(Pu=Du.slice(0,1))||void 0===Pu?void 0:Pu.map(e=>e.name),email:null===o||void 0===o?void 0:o.email,cardClicked:()=>{},width:ml.tq?"100%":""}),u.createElement("input",{type:"number",autoComplete:"off",value:null!==(Au=null===e||void 0===e?void 0:e.value)&&void 0!==Au?Au:0,className:c.Z.currencyInput,style:{border:"1px solid black",padding:"0",margin:"0",width:"100%"},onChange:e=>{D(e.target.value,l)}}),u.createElement(x.zx,{loading:te,clear:!0,title:"Release amount",style:{color:"white",backgroundColor:"green",display:e.visible&&null!==e&&void 0!==e&&e.value?"":"none",width:"100%"},clicked:()=>{ne(!0),(0,il.e_)({user_id:o.id,id:(0,w.mR)(),total:-+(null===e||void 0===e?void 0:e.value),product:"Withdrawal",notes:"Withdrawal",quantity:1}).pipe((0,g.P)()).subscribe({next:()=>{o.wallet=+(+(null===o||void 0===o?void 0:o.wallet)-(null===e||void 0===e?void 0:e.value)),e.visible=!1,ne(!1)}})}}))}return"Currency"===(null===e||void 0===e?void 0:e.data_type_name)&&null!==e&&void 0!==e&&null!==(Xo=e.options)&&void 0!==Xo&&Xo.currency_type?u.createElement("div",{style:{border:"1px solid var(--app-color-gray-light)",width:"inherit",display:"flex"}},u.createElement("div",{onClick:()=>ne(!te),className:c.Z.currencySymbol},null!==e&&void 0!==e&&null!==(Sv=e.options)&&void 0!==Sv&&Sv.symbol?null===e||void 0===e||null===(kv=e.options)||void 0===kv?void 0:kv.symbol:""," "),te&&u.createElement(x.Ld,{items:w.s3,defaultSelectedItem:{label:null===e||void 0===e||null===(Zv=e.options)||void 0===Zv?void 0:Zv.currency_type,value:null===e||void 0===e||null===(Iv=e.options)||void 0===Iv?void 0:Iv.country_code},triggerType:"chevron",placeholder:"Select curency...",className:c.Z.currencySelectComponent,inputClassName:c.Z.currencySearchInput,inputContainerClassName:c.Z.currencyInputContainerClassName,clearControlsClassName:c.Z.currencyClearControlsClassName,molclassname:c.Z.currencySelectMenuOverlayList,moliclassname:c.Z.currencySelectMenuOverlayListItem,onChange:e=>{O.currency=e.value,F(e,l),ne(!1)}}),!te&&u.createElement("input",{type:"number",autoComplete:"off",value:null!==(Nv=N.selected_fields[l].value)&&void 0!==Nv?Nv:0,className:c.Z.currencyInput,onChange:e=>{D(e.target.value,l)}})):"Phone"===(null===e||void 0===e?void 0:e.data_type_name)?u.createElement(C(),{specialLabel:"",value:N.selected_fields[l].value,country:null===e||void 0===e||null===(Tv=e.options)||void 0===Tv?void 0:Tv.country_code,onChange:(e,o,i)=>{U(o,l,i.target.value)},inputClass:c.Z.phoneIInput}):u.createElement("div",{style:{width:"100%"}},"file"===e.data_type?u.createElement(Dl,{field_id:e.id,value:null===e||void 0===e?void 0:e.value,isInherited:z,checkIfAreMandatoryErrored:R,options:null===e||void 0===e?void 0:e.options,index:l,indexInContextArray:P}):"date"===e.data_type||null!==e&&void 0!==e&&null!==(Dv=e.options)&&void 0!==Dv&&Dv.country_code||null!==e&&void 0!==e&&null!==(Pv=e.options)&&void 0!==Pv&&Pv.currency_type||"Number"===e.data_type_name?u.createElement("div",{className:c.Z.fieldTypeInput,style:{border:"1px solid var(--app-color-gray-light)",height:"auto"}},"date"===e.data_type?"Range"===(null===e||void 0===e||null===(Av=e.options)||void 0===Av?void 0:Av.type)?u.createElement(x.$m,{inputContainerClassName:c.Z.inputContainerClassName,dateChangeHandler:e=>ql(e,l),startDate:ce,endDate:pe}):null!==e&&void 0!==e&&null!==(Ov=e.options)&&void 0!==Ov&&Ov.time?u.createElement("div",{style:{width:"100%",height:"auto",border:"0"}},u.createElement(De(),{selected:null!==e&&void 0!==e&&e.value?new Date(null===e||void 0===e?void 0:e.value):new Date,showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:15,customInput:u.createElement("div",{style:{cursor:"pointer",display:"flex",justifyContent:"center",width:"100%",alignItems:"stretch",padding:"5px",border:"0px solid var(--app-color-gray-lighter)"}},u.createElement("input",{value:e.value?Qe()(e.value).format("DD MMMM YYYY HH:mm"):"",className:c.Z.inputValue,type:"text",style:{flex:1,marginTop:"auto",marginBottom:"auto",outline:"none",fontFamily:"var(--app-text-main-font)",fontSize:"14px",fontWeight:"bold",lineHeight:"20px",color:"#4A4A4A",textAlign:"left",maxWidth:"98%",border:"0px"},onChange:e=>{}}),u.createElement(ve.G,{icon:ue.WRo,style:{margin:"0 10px",width:"14px",height:"14px"}})),className:c.Z.singleInputContainer,onChange:e=>{D(e,l)}})):u.createElement(x.X9,{toggleDP:e=>Me(!0===e?"240px":"50px"),value:void 0==e.value?"":Qe()(new Date(e.value)).format("Do MMMM YYYY"),dateChangeHandler:e=>Bl(e,l),selected:new Date(Qe()(de,"YYYY-MM-DD")),iconClassName:c.Z.calendar,inputContainerClassName:c.Z.singleInputContainer,inputStyle:{textAlign:"left",border:"none",fontSize:"16px"},hasCalendarIcon:!0}):u.createElement(u.Fragment,null,u.createElement("input",{onBlur:o=>Tl(e.data_type_name,o.target.value,P,l,O),type:e.data_type,onChange:e=>{D(e.target.value,l)},autoComplete:"none",value:N.selected_fields[l].value?N.selected_fields[l].value:""===Nl(null===e||void 0===e?void 0:e.options)?"":Nl(null===e||void 0===e?void 0:e.options),className:c.Z.fieldTypeInput,name:e.field_name,style:{height:"33px",backgroundColor:null!==e&&void 0!==e&&null!==(Lv=e.options)&&void 0!==Lv&&Lv.valueC&&null!==e&&void 0!==e&&e.value?null===e||void 0===e||null===(zv=e.options)||void 0===zv?void 0:zv.valueC:""},disabled:null!==(Rv=N.selected_fields[l].disabled)&&void 0!==Rv&&Rv}),!0===(null===e||void 0===e||null===(Uv=e.options)||void 0===Uv?void 0:Uv.chart)&&u.createElement(cl.Z,{title:e.field_name,series:null===(Fv=N.selected_fields[l].value)||void 0===Fv?void 0:Fv.split(",").map(e=>+e),labels:null!==e&&void 0!==e&&null!==(Wv=e.options)&&void 0!==Wv&&Wv.notes?null===e||void 0===e||null===(qv=e.options)||void 0===qv||null===(Bv=qv.notes)||void 0===Bv?void 0:Bv.split(","):["Incomplete","Completed"]}),"bar"===(null===e||void 0===e||null===(Yv=e.options)||void 0===Yv?void 0:Yv.display)&&"Number"===(null===e||void 0===e?void 0:e.data_type_name)&&u.createElement("div",{style:{height:"30px",width:"100%",backgroundColor:null===e||void 0===e||null===(Hv=e.options)||void 0===Hv?void 0:Hv.maxC,display:"flex",flexDirection:"column"}},u.createElement("input",{value:null===(Vv=N.selected_fields[l])||void 0===Vv?void 0:Vv.value,className:c.Z.fieldTypeInput,name:e.field_name,disabled:!0,style:{color:"transparent",height:"30px",width:"".concat(+(null===(jv=N.selected_fields[l])||void 0===jv?void 0:jv.value)/+e.options.max*100,"%"),backgroundColor:null===e||void 0===e||null===(Gv=e.options)||void 0===Gv?void 0:Gv.barC}})))):"Long Text"===e.data_type_name?null!==(Jv=e.options)&&void 0!==Jv&&Jv.rich?u.createElement(Cl(),{modules:w.WH,style:{fontFamily:"var(--app-text-main-font)",minHeight:"200px",border:"0.5px solid var(--app-color-gray-dark)"},formats:w.dv,defaultValue:null!==(Kv=null===(Qv=N.selected_fields[l])||void 0===Qv?void 0:Qv.value)&&void 0!==Kv?Kv:"",onChange:e=>{D(e,l)},onBlur:()=>{},theme:"snow"}):u.createElement("textarea",{className:c.Z.fieldTypeTextarea,style:{border:"1px solid var(--app-color-gray-light)",backgroundColor:null!==e&&void 0!==e&&null!==(Xv=e.options)&&void 0!==Xv&&Xv.valueC&&null!==e&&void 0!==e&&e.value?null===e||void 0===e||null===($v=e.options)||void 0===$v?void 0:$v.valueC:""},onBlur:o=>Tl(e.data_type_name,o.target.value,P,l,O),type:e.data_type,value:N.selected_fields[l].value?N.selected_fields[l].value:""===Nl(null===e||void 0===e?void 0:e.options)?"":Nl(null===e||void 0===e?void 0:e.options),onFocus:()=>{},disabled:null!==(eu=N.selected_fields[l].disabled)&&void 0!==eu&&eu,autoComplete:"none",onChange:e=>{D(e.target.value,l)},name:e.field_name}):"Link"===e.data_type_name?u.createElement("div",{style:{width:"inherit",display:"flex",flexDirection:"column"}},(null===e||void 0===e?void 0:e.value)&&((null===e||void 0===e||null===(lu=e.value)||void 0===lu?void 0:lu.includes("jpg"))||(null===e||void 0===e||null===(ou=e.value)||void 0===ou?void 0:ou.includes("jpeg"))||(null===e||void 0===e||null===(iu=e.options)||void 0===iu?void 0:iu.image)||(null===e||void 0===e||null===(tu=e.value)||void 0===tu?void 0:tu.includes("png")))&&u.createElement("img",{alt:"lg",onError:e=>e.target.src="https://i.quotev.com/b2gtjqawaaaa.jpg",src:null===e||void 0===e?void 0:e.value,style:{width:"100%",height:"100%",cursor:"pointer"}}),Y&&u.createElement("img",{alt:"lg",onError:e=>e.target.src="https://i.quotev.com/b2gtjqawaaaa.jpg",src:"https://i.quotev.com/b2gtjqawaaaa.jpg",style:{width:"100%",height:"100%",cursor:"pointer"}}),u.createElement("textarea",{onBlur:o=>Tl(e.data_type_name,o.target.value,P,l,O),type:e.data_type,onChange:e=>{D(e.target.value,l)},autoComplete:"none",value:N.selected_fields[l].value?N.selected_fields[l].value:""===Nl(null===e||void 0===e?void 0:e.options)?"":Nl(null===e||void 0===e?void 0:e.options),className:c.Z.fieldTypeTextarea,style:{border:"1px solid var(--app-color-gray-light)"},name:e.field_name,disabled:null!==(nu=N.selected_fields[l].disabled)&&void 0!==nu&&nu})):u.createElement("input",{onBlur:o=>Tl(e.data_type_name,o.target.value,P,l,O),type:e.data_type,onChange:e=>{D(e.target.value,l)},autoComplete:"none",value:N.selected_fields[l].value?N.selected_fields[l].value:""===Nl(null===e||void 0===e?void 0:e.options)?"":Nl(null===e||void 0===e?void 0:e.options),className:c.Z.fieldTypeInput,style:{border:"1px solid var(--app-color-gray-light)",backgroundColor:null!==e&&void 0!==e&&null!==(du=e.options)&&void 0!==du&&du.valueC&&null!==e&&void 0!==e&&e.value?null===e||void 0===e||null===(au=e.options)||void 0===au?void 0:au.valueC:""},name:e.field_name,disabled:null!==(ru=N.selected_fields[l].disabled)&&void 0!==ru&&ru}))}return u.createElement("div",{style:{width:"100%",height:"auto",border:"1px solid var(--app-color-gray-light)"}},u.createElement(De(),{showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:5,customInput:u.createElement("div",{id:"custom-input",style:{cursor:"pointer",display:"flex",justifyContent:"center",width:"100%",alignItems:"stretch",padding:"5px",border:"0px solid var(--app-color-gray-lighter)"}},u.createElement("input",{value:e.value?Qe()(e.value).format("DD MMMM YYYY HH:mm"):"",disabled:!0,type:"text",style:{flex:1,marginTop:"auto",marginBottom:"auto",outline:"none",fontFamily:"var(--app-text-main-font)",fontSize:"16px",lineHeight:"20px",color:"#4A4A4A",textAlign:"left",maxWidth:"98%",border:"0px"},onChange:e=>{}}),u.createElement(ve.G,{icon:ue.WRo,style:{marginLeft:"10px",width:"14px",height:"14px"}})),className:c.Z.singleInputContainer,selected:null!==e&&void 0!==e&&e.value?new Date(Qe()(null===e||void 0===e?void 0:e.value)):(0,Ke.now)(),onChange:e=>{e>(0,Ke.now)()&&Bl(e,l)}}))}{var Ou,Lu,zu,Ru,Uu,Fu,Wu,qu,Bu;const l={item_code:null,quantity:null,value:null,alt_value:null,total:null},o=Object.entries(Object.assign(l,e.options.map)).reduce((e,l)=>{let[o,i]=l;return null===i||(e[o]=i),e},{});return u.createElement($e.Z,{tableStyle:{marginBottom:O.items.find(e=>e.edit)?"160px":"0"},style:{width:"100%",border:"0"},modern:!(!ml.tq&&"vertical"!==(null===e||void 0===e||null===(Ou=e.options)||void 0===Ou?void 0:Ou.table)),tableHostSimple:c.Z.itemsContainer_ii,layeredColumns:null===N||void 0===N||null===(Lu=N.selected_fields)||void 0===Lu?void 0:Lu.filter(e=>{var l;return null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.mapToItem}).map(e=>{var l,o;return null!==(l=e.options)&&void 0!==l&&l.group?{label:null===(o=e.options)||void 0===o?void 0:o.group,subColumns:[{label:e.field_name}]}:{label:e.field_name}}).concat([{label:"Actions"}]),list:null===(zu=qe.Z([He.Z(Ye.Z("index"))])(null!==(Ru=null!==e&&void 0!==e&&null!==(Uu=e.options)&&void 0!==Uu&&Uu.type?O.items.filter(l=>{var o;return l.type===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.type)}):O.items)&&void 0!==Ru?Ru:[]))||void 0===zu?void 0:zu.map((l,i)=>{let t={index:i,Actions:u.createElement("div",{style:{display:"flex",justifyContent:"space-evenly",alignContent:"center",minWidth:"80px",maxWidth:"120px",margin:null!==l&&void 0!==l&&l.edit?"0":"20px 10px"}},!(null!==l&&void 0!==l&&l.edit)&&u.createElement(ve.G,{icon:ue.IwR,onClick:()=>{l.edit=!0,L({action:M._U.setModuleItems,value:O.items})}}),(null===l||void 0===l?void 0:l.edit)&&u.createElement(ve.G,{icon:ue.EsX,onClick:()=>{var o;l.edit=!1,L({action:M._U.setModuleItems,value:O.items}),null!==T&&void 0!==T&&T.id&&null!==e&&void 0!==e&&null!==(o=e.options)&&void 0!==o&&o.asap&&(0,f.np)(l,T.id).subscribe({})}}),(null===l||void 0===l?void 0:l.edit)&&u.createElement(ve.G,{icon:ue.$aW,onClick:()=>{L({action:M._U.setModuleItems,value:O.items.filter(e=>e.id!==l.id).map((e,l)=>(0,v.Z)((0,v.Z)({},e),{},{index:l}))})}}))};return Object.entries(null!==o&&void 0!==o?o:[]).forEach(e=>{var o,n,d;t[e[1]]=u.createElement("div",{style:{padding:"0"}},u.createElement(Ql,{index:i,enabled:!0,edit:null!==(o=null===l||void 0===l?void 0:l.edit)&&void 0!==o&&o,isItem:!0,item:l,field:(0,v.Z)((0,v.Z)({},null!==(n=null===N||void 0===N||null===(d=N.selected_fields)||void 0===d?void 0:d.find(l=>{var o;return(null===l||void 0===l||null===(o=l.options)||void 0===o?void 0:o.mapToItem)===e[0]}))&&void 0!==n?n:{}),{},{visible:!0,value:l[e[0]]}),withLabel:!1,handleItem:(o,i)=>{l[e[0]]!==o&&(l[e[0]]=o,L({action:M._U.setModuleItems,value:[...O.items.filter(e=>e.id!==l.id),l]}))}}))}),t}),footer:null!==(Fu=e.options)&&void 0!==Fu&&Fu.footer?null===N||void 0===N||null===(Wu=N.selected_fields)||void 0===Wu?void 0:Wu.filter(e=>{var l;return null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.mapToItem}).map((l,o)=>{var i,t;return null!==l&&void 0!==l&&null!==(i=l.options)&&void 0!==i&&i.footer?u.createElement("div",{style:{margin:"20px 0px"}},Xl(null!==e&&void 0!==e&&null!==(t=e.options)&&void 0!==t&&t.type?O.items.filter(l=>{var o;return l.type===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.type)}):O.items,l,e)):0===o?"Totals:":""}).concat([""]):[]},(null===N||void 0===N||null===(qu=N.options)||void 0===qu?void 0:qu.allowMultipleInputs)&&u.createElement("div",{className:c.Z.iconsContainer,style:{display:"flex",justifyContent:"space-between"}},u.createElement(x.zx,{light:!0,style:{width:"32px"},clicked:()=>{var l,o;L({action:M._U.setModuleItems,value:[...O.items,{id:(0,w.mR)(),item_code:"",value:"",alt_value:"",quantity:"",total:"",type:null!==(l=null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.type)&&void 0!==l?l:"",edit:!0,index:O.items.length}]})}},u.createElement(p.mm,null)),(null===(Bu=e.options)||void 0===Bu?void 0:Bu.export)&&Hl(null===T||void 0===T?void 0:T.component_items,["item_code","quantity","value","alt_value","total"])))}}var Yu},eo=(null===N||void 0===N||null===(o=N.selected_fields)||void 0===o?void 0:o.length)>0&&(null===N||void 0===N||null===(i=N.selected_fields)||void 0===i?void 0:i.sort((e,l)=>e.index-l.index).map((e,l)=>{var o,i,t,n,d,a,r,s,c,p,f,_,y,h,g,b,x;const E=(0,v.Z)((0,v.Z)({},e),{},{visible:null===e||void 0===e?void 0:e.visible,field:e});return u.createElement(m.Z,{landscape:!ml.tq&&(null===E||void 0===E||null===(o=E.options)||void 0===o?void 0:o.landscape),enabled:null===E||void 0===E?void 0:E.enabled,width:"Transaction List"===(null===E||void 0===E?void 0:E.data_type_name)||"Step List"===(null===E||void 0===E?void 0:E.data_type_name)||"Component List"===(null===E||void 0===E?void 0:E.data_type_name)||"Module"===(null===E||void 0===E?void 0:E.data_type_name)||"rows"===(null===E||void 0===E||null===(i=E.options)||void 0===i?void 0:i.orientation)&&"Info"===(null===E||void 0===E?void 0:E.data_type_name)||"GoogleAI Assistant"===(null===E||void 0===E?void 0:E.data_type_name)||"Calendar"===(null===E||void 0===E?void 0:E.data_type_name)||"Video"===(null===E||void 0===E?void 0:E.data_type_name)&&null!==E&&void 0!==E&&null!==(t=E.options)&&void 0!==t&&t.start||"Summary"===(null===E||void 0===E?void 0:E.data_type_name)||"Record"===(null===E||void 0===E?void 0:E.data_type_name)&&"Tiles"===(null===E||void 0===E||null===(n=E.options)||void 0===n?void 0:n.selection)||ml.tq?"100%":"Tiles"===(null===E||void 0===E||null===(d=E.options)||void 0===d?void 0:d.selection)&&"Lookup"===(null===E||void 0===E?void 0:E.data_type_name)||"Formula"===(null===E||void 0===E?void 0:E.data_type_name)?"50%":"".concat(null!==(a=null===E||void 0===E||null===(r=E.options)||void 0===r?void 0:r.width)&&void 0!==a?a:(null===N||void 0===N||null===(s=N.selected_fields)||void 0===s?void 0:s.filter(e=>!0===e.visible).length)<5?"50":Zl,"%"),editMode:q,key:l,fieldLabel:"Checkbox"===(null===E||void 0===E?void 0:E.data_type_name)?null!==E&&void 0!==E&&null!==(c=E.options)&&void 0!==c&&c.value?"":E.field_name:"Info"===(null===E||void 0===E?void 0:E.data_type_name)||"Module"===(null===E||void 0===E?void 0:E.data_type_name)||"Record"===(null===E||void 0===E?void 0:E.data_type_name)&&(null===E||void 0===E||null===(p=E.options)||void 0===p||null===(f=p.filters)||void 0===f?void 0:f.length)>0||"Filters"===(null===E||void 0===E?void 0:E.data_type_name)&&(null===E||void 0===E||null===(_=E.options)||void 0===_||null===(y=_.filters)||void 0===y?void 0:y.length)>0||"Profile"===(null===E||void 0===E?void 0:E.data_type_name)||"Chart"===(null===E||void 0===E?void 0:E.data_type_name)||"URL"===(null===E||void 0===E?void 0:E.data_type_name)?"":E.field_name,fieldIcon:E.icon,isProcess:!0,visible:!("Global"===(null===E||void 0===E?void 0:E.data_type_name)||"Connector"===(null===E||void 0===E?void 0:E.data_type_name)||"Emails"===(null===E||void 0===E?void 0:E.data_type_name)||"Template"===(null===E||void 0===E?void 0:E.data_type_name)||"List Filter"===(null===E||void 0===E?void 0:E.data_type_name)&&(null===E||void 0===E||null===(h=E.options)||void 0===h||null===(g=h.value)||void 0===g?void 0:g.length)>0||"Action Button"===(null===E||void 0===E?void 0:E.data_type_name)||"Ratings"===(null===E||void 0===E?void 0:E.data_type_name))&&E.visible,mandatory:E.mandatory,error:(null===(b=E.errors)||void 0===b?void 0:b.length)>0?"".concat(E.errors,". Try to select again"):"",notes:"Value Button"===(null===E||void 0===E?void 0:E.data_type_name)?"":null===E||void 0===E||null===(x=E.options)||void 0===x?void 0:x.notes,showWidth:"Transaction List"===(null===E||void 0===E?void 0:E.data_type_name)?e=>{E.options=(0,v.Z)((0,v.Z)({},E.options),{},{width:"".concat(e,"px")})}:()=>{},dragEnd:"People"===(null===E||void 0===E?void 0:E.data_type_name)?l=>{var o;const i=null===(o=document.getElementById(null===N||void 0===N?void 0:N.name))||void 0===o?void 0:o.getBoundingClientRect();document.getElementById(e.field_name).style.position="absolute",document.getElementById(e.field_name).style.top="".concat(l.top-i.top,"px"),document.getElementById(e.field_name).style.left="".concat(l.left-i.left,"px")}:()=>{},style:{border:"0"}},$l(E,l))})),lo=(null===N||void 0===N||null===(t=N.selected_fields)||void 0===t?void 0:t.length)>0&&(null===N||void 0===N||null===(n=N.selected_fields)||void 0===n?void 0:n.sort((e,l)=>e.index-l.index).map((e,l)=>{var o,i,t,n,d,a,r,s,c,p,f,_,y,h,g,b,x,E,C,w;const M=(0,v.Z)((0,v.Z)({},e),{},{visible:!(null===e||void 0===e||!e.visible)&&(!((null===N||void 0===N||null===(o=N.options)||void 0===o||null===(i=o.left)||void 0===i||null===(t=i.find(l=>l===e.field_name))||void 0===t?void 0:t.length)>0)&&e.visible),field:e});return u.createElement(m.Z,{landscape:!ml.tq&&(null===M||void 0===M||null===(n=M.options)||void 0===n?void 0:n.landscape),enabled:null===M||void 0===M?void 0:M.enabled,width:"Transaction List"===(null===M||void 0===M?void 0:M.data_type_name)||"Step List"===(null===M||void 0===M?void 0:M.data_type_name)||"Component List"===(null===M||void 0===M?void 0:M.data_type_name)||"Module"===(null===M||void 0===M?void 0:M.data_type_name)||"rows"===(null===M||void 0===M||null===(d=M.options)||void 0===d?void 0:d.orientation)&&"Info"===(null===M||void 0===M?void 0:M.data_type_name)||"GoogleAI Assistant"===(null===M||void 0===M?void 0:M.data_type_name)||"Calendar"===(null===M||void 0===M?void 0:M.data_type_name)||"Video"===(null===M||void 0===M?void 0:M.data_type_name)&&null!==M&&void 0!==M&&null!==(a=M.options)&&void 0!==a&&a.start||"Summary"===(null===M||void 0===M?void 0:M.data_type_name)||"Record"===(null===M||void 0===M?void 0:M.data_type_name)&&"Tiles"===(null===M||void 0===M||null===(r=M.options)||void 0===r?void 0:r.selection)||ml.tq?"100%":"Tiles"===(null===M||void 0===M||null===(s=M.options)||void 0===s?void 0:s.selection)&&"Lookup"===(null===M||void 0===M?void 0:M.data_type_name)||"Formula"===(null===M||void 0===M?void 0:M.data_type_name)?"50%":"".concat(null!==(c=null===M||void 0===M||null===(p=M.options)||void 0===p?void 0:p.width)&&void 0!==c?c:(null===N||void 0===N||null===(f=N.selected_fields)||void 0===f?void 0:f.filter(e=>!0===e.visible).length)<5?"50":Zl,"%"),editMode:q,key:l,fieldLabel:"Checkbox"===(null===M||void 0===M?void 0:M.data_type_name)?null!==M&&void 0!==M&&null!==(_=M.options)&&void 0!==_&&_.value?"":M.field_name:"Info"===(null===M||void 0===M?void 0:M.data_type_name)||"Module"===(null===M||void 0===M?void 0:M.data_type_name)||"Record"===(null===M||void 0===M?void 0:M.data_type_name)&&(null===M||void 0===M||null===(y=M.options)||void 0===y||null===(h=y.filters)||void 0===h?void 0:h.length)>0||"Filters"===(null===M||void 0===M?void 0:M.data_type_name)&&(null===M||void 0===M||null===(g=M.options)||void 0===g||null===(b=g.filters)||void 0===b?void 0:b.length)>0||"Profile"===(null===M||void 0===M?void 0:M.data_type_name)||"Chart"===(null===M||void 0===M?void 0:M.data_type_name)||"URL"===(null===M||void 0===M?void 0:M.data_type_name)?"":M.field_name,fieldIcon:M.icon,isProcess:!0,visible:!("Global"===(null===M||void 0===M?void 0:M.data_type_name)||"Connector"===(null===M||void 0===M?void 0:M.data_type_name)||"Emails"===(null===M||void 0===M?void 0:M.data_type_name)||"Template"===(null===M||void 0===M?void 0:M.data_type_name)||"List Filter"===(null===M||void 0===M?void 0:M.data_type_name)&&(null===M||void 0===M||null===(x=M.options)||void 0===x||null===(E=x.value)||void 0===E?void 0:E.length)>0||"Action Button"===(null===M||void 0===M?void 0:M.data_type_name)||"Ratings"===(null===M||void 0===M?void 0:M.data_type_name))&&M.visible,mandatory:M.mandatory,error:(null===(C=M.errors)||void 0===C?void 0:C.length)>0?"".concat(M.errors,". Try to select again"):"",notes:"Value Button"===(null===M||void 0===M?void 0:M.data_type_name)?"":null===M||void 0===M||null===(w=M.options)||void 0===w?void 0:w.notes,showWidth:"Transaction List"===(null===M||void 0===M?void 0:M.data_type_name)?e=>{M.options=(0,v.Z)((0,v.Z)({},M.options),{},{width:"".concat(e,"px")})}:()=>{},dragEnd:"People"===(null===M||void 0===M?void 0:M.data_type_name)?l=>{var o;const i=null===(o=document.getElementById(null===N||void 0===N?void 0:N.name))||void 0===o?void 0:o.getBoundingClientRect();document.getElementById(e.field_name).style.position="absolute",document.getElementById(e.field_name).style.top="".concat(l.top-i.top,"px"),document.getElementById(e.field_name).style.left="".concat(l.left-i.left,"px")}:()=>{},style:{border:"0"}},$l(M,l))})),oo=(null===N||void 0===N||null===(d=N.selected_fields)||void 0===d?void 0:d.length)>0&&(null===N||void 0===N||null===(a=N.selected_fields)||void 0===a?void 0:a.sort((e,l)=>e.index-l.index).map((e,l)=>{var o,i,t,n,d,a,r,s,c,p,f,_,y,h,g,b,x,E,C;const w=(0,v.Z)((0,v.Z)({},e),{},{visible:!!e.visible&&((null===N||void 0===N||null===(o=N.options)||void 0===o||null===(i=o.left)||void 0===i||null===(t=i.find(l=>l===e.field_name))||void 0===t?void 0:t.length)>0&&e.visible),field:e});return u.createElement(m.Z,{landscape:!1,enabled:null===w||void 0===w?void 0:w.enabled,width:"Transaction List"===(null===w||void 0===w?void 0:w.data_type_name)||"Step List"===(null===w||void 0===w?void 0:w.data_type_name)||"Component List"===(null===w||void 0===w?void 0:w.data_type_name)||"Module"===(null===w||void 0===w?void 0:w.data_type_name)||"rows"===(null===w||void 0===w||null===(n=w.options)||void 0===n?void 0:n.orientation)&&"Info"===(null===w||void 0===w?void 0:w.data_type_name)||"GoogleAI Assistant"===(null===w||void 0===w?void 0:w.data_type_name)||"Calendar"===(null===w||void 0===w?void 0:w.data_type_name)||"Video"===(null===w||void 0===w?void 0:w.data_type_name)&&null!==w&&void 0!==w&&null!==(d=w.options)&&void 0!==d&&d.start||"Summary"===(null===w||void 0===w?void 0:w.data_type_name)||"Record"===(null===w||void 0===w?void 0:w.data_type_name)&&"Tiles"===(null===w||void 0===w||null===(a=w.options)||void 0===a?void 0:a.selection)||ml.tq?"100%":"Tiles"===(null===w||void 0===w||null===(r=w.options)||void 0===r?void 0:r.selection)&&"Lookup"===(null===w||void 0===w?void 0:w.data_type_name)||"Formula"===(null===w||void 0===w?void 0:w.data_type_name)?"50%":"".concat(null!==(s=null===w||void 0===w||null===(c=w.options)||void 0===c?void 0:c.width)&&void 0!==s?s:(null===N||void 0===N||null===(p=N.selected_fields)||void 0===p?void 0:p.filter(e=>!0===e.visible).length)<5?"50":Zl,"%"),editMode:q,key:l,fieldLabel:"Checkbox"===(null===w||void 0===w?void 0:w.data_type_name)?null!==w&&void 0!==w&&null!==(f=w.options)&&void 0!==f&&f.value?"":w.field_name:"Info"===(null===w||void 0===w?void 0:w.data_type_name)||"Module"===(null===w||void 0===w?void 0:w.data_type_name)||"Record"===(null===w||void 0===w?void 0:w.data_type_name)&&(null===w||void 0===w||null===(_=w.options)||void 0===_||null===(y=_.filters)||void 0===y?void 0:y.length)>0||"Filters"===(null===w||void 0===w?void 0:w.data_type_name)&&(null===w||void 0===w||null===(h=w.options)||void 0===h||null===(g=h.filters)||void 0===g?void 0:g.length)>0||"Profile"===(null===w||void 0===w?void 0:w.data_type_name)||"Chart"===(null===w||void 0===w?void 0:w.data_type_name)||"URL"===(null===w||void 0===w?void 0:w.data_type_name)?"":w.field_name,fieldIcon:w.icon,isProcess:!0,visible:!("Global"===(null===w||void 0===w?void 0:w.data_type_name)||"Connector"===(null===w||void 0===w?void 0:w.data_type_name)||"Emails"===(null===w||void 0===w?void 0:w.data_type_name)||"Template"===(null===w||void 0===w?void 0:w.data_type_name)||"List Filter"===(null===w||void 0===w?void 0:w.data_type_name)&&(null===w||void 0===w||null===(b=w.options)||void 0===b||null===(x=b.value)||void 0===x?void 0:x.length)>0||"Action Button"===(null===w||void 0===w?void 0:w.data_type_name)||"Ratings"===(null===w||void 0===w?void 0:w.data_type_name))&&w.visible,mandatory:w.mandatory,error:(null===(E=w.errors)||void 0===E?void 0:E.length)>0?"".concat(w.errors,". Try to select again"):"",notes:"Value Button"===(null===w||void 0===w?void 0:w.data_type_name)?"":null===w||void 0===w||null===(C=w.options)||void 0===C?void 0:C.notes,showWidth:"Transaction List"===(null===w||void 0===w?void 0:w.data_type_name)?e=>{w.options=(0,v.Z)((0,v.Z)({},w.options),{},{width:"".concat(e,"px")})}:()=>{},dragEnd:"People"===(null===w||void 0===w?void 0:w.data_type_name)?l=>{var o;const i=null===(o=document.getElementById(null===N||void 0===N?void 0:N.name))||void 0===o?void 0:o.getBoundingClientRect();document.getElementById(e.field_name).style.position="absolute",document.getElementById(e.field_name).style.top="".concat(l.top-i.top,"px"),document.getElementById(e.field_name).style.left="".concat(l.left-i.left,"px")}:()=>{},style:{border:"0"}},$l(w,l))}));return u.createElement("div",{id:null===N||void 0===N?void 0:N.name,className:c.Z.emulatedFlexGap,style:{width:ml.tq?"100%":"",position:"relative",marginBottom:we}},(null===N||void 0===N?void 0:N.selected_fields.filter(e=>{var l,o;return null===N||void 0===N||null===(l=N.options)||void 0===l||null===(o=l.left)||void 0===o?void 0:o.find(l=>l===e.field_name)}).length)>0&&!ml.tq?u.createElement("div",{style:{display:ml.tq?"block":"flex",width:"100%"}},u.createElement("div",{style:{width:ml.tq?"100%":"30%",overflow:"auto"}},oo),u.createElement("div",{className:c.Z.emulatedFlexGap,style:{width:ml.tq?"100%":"80%",overflow:"auto",padding:"0",margin:"0"}},lo)):eo,(null===Te||void 0===Te||null===(E=Te.candidates)||void 0===E?void 0:E.length)>0&&u.createElement(m.Z,{width:"80%",fieldLabel:"Response",visible:!0},u.createElement("textarea",{className:c.Z.fullLengthTextarea,type:"text",onFocus:()=>{},disabled:!0,value:null===Te||void 0===Te||null===(k=Te.candidates[0])||void 0===k||null===(I=k.content.parts[0])||void 0===I?void 0:I.text})))});function Nl(e){return null!==e&&void 0!==e&&e.country_prefix?null===e||void 0===e?void 0:e.country_prefix:null!==e&&void 0!==e&&e.currency_value?(null===e||void 0===e?void 0:e.currency_value)+" ":""}const Tl=(e,l,o,i,t)=>{var n,d,a;const r=null===(a=[...null!==(n=null===(d=t.currentStep)||void 0===d?void 0:d.component_blueprints)&&void 0!==n?n:[]][o])||void 0===a?void 0:a.selected_fields[i];switch(e){case"Link":!function(e){let l;try{l=new URL(e)}catch(o){return!1}return"http:"===l.protocol||"https:"===l.protocol}(l)?r.errors="This field should contain a link!":r.errors="";break;case"E-mail":case"Email":new RegExp(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/).test(l)?r.errors="":r.errors="This field should contain an valid email address!";break;case"Phone":new RegExp(/^[+]?[(]?[0-9]{3}[)]?[-\s.]?[0-9]{3}[-\s.]?[0-9]{4,6}$/im).test(l)?r.errors="":r.errors="This field should contain an valid phone number!";break;case"Email Recipient":new RegExp(/^([a-z0-9!#$%&'*+/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*)(([, ]+[a-z0-9!#$%&'*+/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])\.([a-z0-9]([a-z0-9-]*[a-z0-9]))*)?)*$/).test(l)?r.errors="":r.errors="This field should contain an valid email address!"}},Dl=e=>{var l;const{options:o,field_id:i,index:t,indexInContextArray:n,value:d,checkIfAreMandatoryErrored:a}=e,[r,s]=(0,u.useState)(),[v,p]=(0,u.useState)(!1),[m,_]=(0,M.pQ)();return u.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",flex:"1 1",overflow:"hidden",border:"1px solid var(--app-color-gray-light)",padding:"10px"}},u.createElement("u",{onClick:()=>{var e;null===(e=document.getElementById("file-change-".concat(i)))||void 0===e||e.click()},style:{cursor:"pointer",marginLeft:"20px",wordWrap:"break-word"}},null!==r&&void 0!==r&&r.name||d?(null===r||void 0===r?void 0:r.name)||d:"Click to upload file..."),u.createElement("input",{accept:"."+(null===o||void 0===o||null===(l=o.accepted_mimes)||void 0===l?void 0:l.replace(/,/g,",.")),type:"file",onChange:()=>(e=>{var l,o;const d=document.getElementById("file-change-".concat(i)).files[0],r=((null===d||void 0===d?void 0:d.size)/1024/1024).toFixed(4),v=(e/1024).toFixed(4);p(!0);const u=[...null!==(l=null===(o=m.currentStep)||void 0===o?void 0:o.component_blueprints)&&void 0!==l?l:[]];r>v?alert("File is too big!"):(0,f.kf)(d,i).subscribe({next:e=>{s(d),p(!1),u[n].selected_fields[t].value=null===e||void 0===e?void 0:e.file_url,u[n].selected_fields[t].value&&u[n].selected_fields[t].mandatory&&(u[n].selected_fields[t].errors=""),a(),_({action:M._U.setComponentBlueprints,value:u}),_({action:M._U.setModuleNewStepComponents,value:u})}})})(null===o||void 0===o?void 0:o.max_file_size),style:{position:"absolute",visibility:"hidden",width:"0px"},id:"file-change-".concat(i),className:c.Z.fieldTypeInput}),v&&u.createElement(fl.Z,{type:ml.G6?"Watch":"Puff",color:"#4A4A4A",secondaryColor:"gray",radius:22,height:22,width:"22px"}),(null===r||void 0===r?void 0:r.type)&&u.createElement(Pl,{fileType:null===r||void 0===r?void 0:r.type}))},Pl=e=>"application/pdf"===(null===e||void 0===e?void 0:e.fileType)?u.createElement("img",{alt:"",src:p.ed}):u.createElement("img",{alt:"",src:p.dm})},63864:(e,l,o)=>{"use strict";o.d(l,{Z:()=>I});var i=o(1413),t=o(67861),n=o(14170);const d="SelectAndMultiselect_selectAndMultiselectHost__JL5Qu",a="SelectAndMultiselect_tiles__GNuMU",r="SelectAndMultiselect_fieldLabel__LpRMc",s="SelectAndMultiselect_multiselectComponent__0I85T",v="SelectAndMultiselect_multiselectMenuOverlayList__4knAb",u="SelectAndMultiselect_multiselectMenuOverlayListItem__fBe0B",c="SelectAndMultiselect_dropdownSelectMenuOverlayList__MRf2l",p="SelectAndMultiselect_dropdownSelectComponent__0UNAl",m="SelectAndMultiselect_dropdownInput__BPcW7",f="SelectAndMultiselect_menuButtonPlaceholder__V0wnB",_="SelectAndMultiselect_dropdownSelectMenuOverlayListItem__NM5xS",y="SelectAndMultiselect_center__Dukva";var h=o(64967),g=o(27436);const b="Card_statusCardContainer__m5Upe",x="Card_statusCard__3ICe3",E="Card_statusTitleContainer__C4HCR",C="Card_statusDescriptionContainer__E3WnX";var w=o(47144),M=o.n(w),S=o(67861);const k=e=>{const{onClick:l,cardTitle:o,subtitle:i="",className:t}=e;return S.createElement("div",{className:M()(b,t),style:{display:"inline-block"},onClick:()=>l()},S.createElement("div",{className:x},S.createElement("div",{style:{padding:"15px"}},S.createElement("div",{className:E},S.createElement("p",null,o)),S.createElement("div",{className:C},S.createElement("p",null,i)))))},Z=o(66918),I=e=>{const{selectionType:l="Dropdown",items:o,fieldIcon:b,placeholder:x,fieldLabel:E,onChange:C,visible:w=!0,mandatory:M=!1,error:S,loading:I,onFocus:N,onClicked:T=()=>{},value:D,className:P,onClose:A=()=>{},onOpen:O=()=>{},titleProps:L={},children:z,backgroundColor:R,max:U}=e,[F,W]=(0,t.useState)(!0);return t.createElement("div",{onFocus:N,onClick:O,className:d,style:{display:w?"":"none"}},E?t.createElement("label",{className:r,style:(0,i.Z)({},L)},E," ",M&&t.createElement("span",null,"*")):t.createElement(t.Fragment,null),t.createElement("div",{className:a},"Tiles"===l&&o.map((e,l)=>t.createElement(k,{cardTitle:e.label,key:l,onClick:()=>{C("".concat(e.value))}}))),"multiple"===l&&t.createElement(n.NU,{loading:I,items:null!==o&&void 0!==o?o:[],toggleLeftIcon:b,notags:!0,error:!!S,style:{backgroundColor:null!==R&&void 0!==R?R:""},initialSelectedValues:D&&Z.split(",",D),itemType:"checkboxes",tmiClassName:m,className:P||s,molclassname:v,moliclassname:u,menuButtonPlaceholder:P||f,placeholder:x,checkboxEmplacement:"right",onOpen:e=>T(e),onChange:e=>{C(e.map(e=>e.label).toString())},selectionLimit:U},z),("single"===l||"Dropdown"===l||"decision"===l||"modules"===l)&&t.createElement(h.M,{style:{backgroundColor:R},className:P||p,tmiClassName:m,molclassname:c,moliclassname:_,menuButtonPlaceholder:f,selectType:"checkbox",loading:I,title:"",error:S,placeholder:x,onOpen:e=>T(e),onChange:e=>{C("".concat(e.value))},items:null!==o&&void 0!==o?o:[],defaultSelected:D&&o.find(e=>e.label===D)},z),I&&F?t.createElement(n.U7,{blured:!0,scrollable:!0,isOpen:I&&F,shadowedContainerStyle:{width:"200px"}},t.createElement("div",{className:y,style:{width:"200px",height:"50px"},onClick:()=>W(!1)},t.createElement(n.$j,{type:"BallTriangle",color:"black",height:30,width:"30px",style:{marginRight:"30px"}}),"Processing...")):null,S&&t.createElement(g.Z,{message:S}))}},52950:(e,l,o)=>{"use strict";o.d(l,{Z:()=>A});var i=o(67861),t=(o(83381),o(14170)),n=o(1413),d=o(50981),a=o.n(d),r=o(9825),s=o.n(r),v=o(39518),u=o(23280),c=o(63077),p=o(79492),m=o.n(p),f=o(85692),_=o(51481),y=o(49465),h=o(40694);const g="TaskForm_newTaskFormHost__8YIFH",b="TaskForm_buttonsContainer__Y5EGp",x="TaskForm_datePickerWrapper__vAFgZ",E="TaskForm_saveButton__6OqA+",C="TaskForm_calendarSVG__bXc-+";var w=o(27436);o(79633);o(66918);const M=e=>{const{isOpen:l,onClose:o,loading:n,removeTask:d,taskId:a}=e;return i.createElement(t.U7,{isOpen:l,onClose:()=>o(!1),backdropColor:!0,blured:!0,scrollable:!0,shadowedContainerStyle:{width:"35%"}},i.createElement("div",null,i.createElement("p",{style:{textAlign:"center",fontSize:"20px",color:"#4A4A4A",fontFamily:"var(--app-text-main-font)"}},"Are you sure do you want to delete this task?"),i.createElement(h.Z,{loading:n,clicked:()=>d(a),title:"Yes, Delete",style:{fontWeight:"500",marginLeft:"auto",marginRight:"auto"}}),i.createElement("p",{style:{cursor:"pointer",textAlign:"center",fontSize:"16px",fontWeight:600,color:"#4A4A4A",fontFamily:"var(--app-text-main-font)"},onClick:()=>o(!1),className:"go-back-text"},"No, Go Back")))},S=(0,v.$j)(e=>{const{selectedProcess:l,companyUsersArray:o,companyProcesses:i,allModules:t,begunModule:n,companyData:d}=e.flowReducer,{user:a}=e.sessionReducer;return{selectedProcess:l,companyUsersArray:o,companyProcesses:i,allModules:t,user:a,begunModule:n,companyData:d}})(function(e){var l,o,t,d,r,v,p,S,k,Z,I,N,T,D,P,A,O,L,z,R,U,F,W,q,B,Y,H,V,j,G,J,K,Q,X,$,ee,le,oe,ie,te,ne,de,ae,re,se,ve,ue,ce,pe,me,fe,_e,ye,he,ge,be,xe;(0,u.s0)();const{showPriority:Ee=!0,selectedProcess:Ce,isProcess:we,statuses:Me,companyUsersArray:Se,task:ke,isEdit:Ze,assigneeId:Ie,setDisplayModal:Ne,begunModule:Te,onClose:De,user:Pe,start_date:Ae=(new Date).setDate((new Date).getDate()),span:Oe=!0,setTaskLabels:Le,allModules:ze,onModuleSelect:Re=()=>{},companyData:Ue}=e,[Fe,We]=(0,i.useState)(null!==ke&&void 0!==ke&&null!==(l=ke.assignee)&&void 0!==l&&l.id?{assignee_id:null===ke||void 0===ke||null===(o=ke.assignee)||void 0===o?void 0:o.id}:""),[qe,Be]=(0,i.useState)(null!==ke&&void 0!==ke&&null!==(t=ke.process)&&void 0!==t&&t.id?{process:null===ke||void 0===ke||null===(d=ke.process)||void 0===d?void 0:d.id}:""),[Ye,He]=(0,i.useState)((null===ke||void 0===ke?void 0:ke.name)||""),[Ve,je]=(0,i.useState)((null===ke||void 0===ke?void 0:ke.status)||""),[Ge,Je]=(0,i.useState)((null===ke||void 0===ke?void 0:ke.description)||""),[Ke,Qe]=(0,i.useState)(null!==ke&&void 0!==ke&&null!==(r=ke.add_info)&&void 0!==r&&r.end?new Date(null===ke||void 0===ke||null===(v=ke.add_info)||void 0===v?void 0:v.end):null!==ke&&void 0!==ke&&ke.due_date?new Date(null===ke||void 0===ke?void 0:ke.due_date):(new Date).setDate((new Date).getDate())+36e5),[Xe,$e]=(0,i.useState)(null!==ke&&void 0!==ke&&null!==(p=ke.add_info)&&void 0!==p&&p.start?new Date(null===ke||void 0===ke||null===(S=ke.add_info)||void 0===S?void 0:S.start):Ae),[el,ll]=(0,i.useState)(null!==ke&&void 0!==ke&&null!==(k=ke.add_info)&&void 0!==k&&k.end?new Date(null===ke||void 0===ke||null===(Z=ke.add_info)||void 0===Z?void 0:Z.end):Ae),[ol,il]=(0,i.useState)(""),[tl,nl]=(0,i.useState)(!1),[dl,al]=(0,i.useState)(!1),[rl,sl]=(0,i.useState)(!1),[vl,ul]=(0,i.useState)(!1),[cl,pl]=(0,i.useState)(we),[ml,fl]=(0,i.useState)((null===ke||void 0===ke||null===(I=ke.add_info)||void 0===I?void 0:I.priority)||""),_l=(null===Se||void 0===Se?void 0:Se.length)>0?Se.map(e=>({label:e.first_name+" "+e.last_name,value:e.id})):[];(0,i.useEffect)(()=>(sl(!0),()=>{sl(!1)}),[]),(0,i.useEffect)(()=>{if(cl&&null!==Ce&&void 0!==Ce&&Ce.id&&rl){(()=>{Be({procedure_id:Ce.id}),Je(Ce.description)})()}},[cl,rl,Ce.description,Ce.id]);const yl={control:(e,l)=>(0,n.Z)((0,n.Z)({},e),{},{boxShadow:"none","&:hover":{border:"1px solid var(--app-color-gray-lighter)"},position:"relative",height:"60px",width:"100%",border:"var(--app-color-gray-lighter) solid 1px",padding:"3px",paddingLeft:"10px",fontFamily:"var(--app-text-main-font)",fontSize:"1.4em",fontWeight:"700",color:"#4A4A4A",textAlign:"left",flex:"1 1 auto",justifyContent:"center",alignItems:"center",alignContent:"center",alignSelf:"center",margin:"10px 0 0 0 ",marginBottom:"20px"}),input:(e,l)=>(0,n.Z)((0,n.Z)({},e),{},{fontFamily:"var(--app-text-main-font)",color:"#4A4A4A",width:"100%",textAlign:"left",fontSize:"0.8em",fontWeight:"700",alignSelf:"center"}),menu:(e,l)=>(0,n.Z)((0,n.Z)({},e),{},{justifyContent:"center",alignItems:"center",verticalTextAlign:"center",alignContent:"center"}),menulist:(e,l)=>(0,n.Z)((0,n.Z)({},e),{},{justifyContent:"center",alignItems:"center",verticalTextAlign:"center",alignContent:"center",fontFamily:"var(--app-text-main-font)"}),option:(e,l)=>(0,n.Z)((0,n.Z)({},e),{},{minHeight:15,paddingTop:0,fontSize:"1.1em",color:"black",verticalTextAlign:"center",justifyContent:"center",alignItems:"center",alignContent:"center",fontFamily:"var(--app-text-main-font)"}),placeholder:(e,l)=>(0,n.Z)((0,n.Z)({},e),{},{fontSize:"0.75em",lineHeight:"20px",color:"#4A4A4A",fontWeight:400,overflow:"hidden",fontFamily:"var(--app-text-main-font)"}),singleValue:(e,l)=>{const o=l.isDisabled?.5:1;return(0,n.Z)((0,n.Z)({},e),{},{opacity:o,transition:"opacity 300ms",marginLeft:"0px",fontSize:"0.75em",lineHeight:"20px",color:"#4A4A4A",fontFamily:"var(--app-text-main-font)"})},indicatorsContainer:(e,l)=>{let{_data:o}=l;return(0,n.Z)((0,n.Z)({},e),{},{marginTop:"auto",marginBottom:"auto",color:"#4A4A4A",size:7,":hover":{color:"gray"},width:"65px",height:"45px"})}},hl=Me?Me.map(e=>({label:e,value:e})):[{label:"Done",value:"Done"},{label:"Ongoing",value:"Ongoing"},{label:"In Review",value:"In Review"},{label:"Approved",value:"Approved"},{label:"Postponed",value:"Postponed"},{label:"Moved",value:"Moved"},{label:"Cancelled",value:"Cancelled"}];return i.createElement("div",{className:g},i.createElement(m(),{style:{flex:1}},i.createElement("div",{style:{marginBottom:"10px"}},i.createElement("label",{style:{color:null!==ol&&void 0!==ol&&null!==(N=ol.errors)&&void 0!==N&&N.name?"var(--app-color-error)":"",display:(null!==ke&&void 0!==ke&&ke.completed_at,"")}},i.createElement("p",null,"Name"),i.createElement("textarea",{readOnly:void 0!==(null===ke||void 0===ke?void 0:ke.id)&&(!(null===ke||void 0===ke||!ke.completed_at)||Pe.id!==(null===ke||void 0===ke||null===(T=ke.creator)||void 0===T?void 0:T.id)),required:null===ol||void 0===ol||null===(D=ol.errors)||void 0===D?void 0:D.name,onFocus:()=>il(""),value:Ye,onChange:e=>He(e.target.value)})),ol&&(null===ol||void 0===ol||null===(P=ol.errors)||void 0===P?void 0:P.name)&&i.createElement(w.Z,{message:ol.errors.name})),we?i.createElement("div",{style:{marginBottom:"10px"}},i.createElement("label",{style:{color:null!==ol&&void 0!==ol&&null!==(A=ol.errors)&&void 0!==A&&A.due_date?"var(--app-color-error)":""}},"Start Date",i.createElement("div",null,i.createElement(s(),{showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:15,disabled:void 0!==(null===ke||void 0===ke?void 0:ke.id)&&(!(null===ke||void 0===ke||!ke.completed_at)||Pe.id!==(null===ke||void 0===ke||null===(O=ke.creator)||void 0===O?void 0:O.id)),placeholderText:"Start Date",customInput:i.createElement("div",{id:"custom-input",style:{cursor:"pointer",display:"flex",justifyContent:"center",width:"100%",alignItems:"stretch",border:"1px solid",borderColor:"var(--app-color-gray-lighter)"}},i.createElement("input",{disabled:!0,readOnly:void 0!==(null===ke||void 0===ke?void 0:ke.id)&&(!(null===ke||void 0===ke||!ke.completed_at)||Pe.id!==(null===ke||void 0===ke||null===(L=ke.creator)||void 0===L?void 0:L.id)),onFocus:()=>il(""),value:a()(Xe).format("DD MMMM YYYY HH:mm"),type:"text",required:null===ol||void 0===ol||null===(z=ol.errors)||void 0===z?void 0:z.startDate,id:"start-date",style:{flex:1,marginTop:"auto",marginBottom:"auto",outline:"none",border:"none",fontFamily:"var(--app-text-main-font)",fontSize:"16px",lineHeight:"20px",color:"#4A4A4A",textAlign:(null===Xe||void 0===Xe?void 0:Xe.length)>0?"center":"left",maxWidth:"98%"},placeholder:"Start Date",onChange:e=>{}}),i.createElement(f.f,{className:C})),className:x,selected:Xe,onChange:e=>{a()(e).diff(a()(el),"minutes")<1&&$e(e)}}))),i.createElement("br",null),i.createElement("label",{style:{color:null!==ol&&void 0!==ol&&null!==(R=ol.errors)&&void 0!==R&&R.due_date?"var(--app-color-error)":""}},"End Date",i.createElement("div",null,i.createElement(s(),{showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:15,disabled:void 0!==(null===ke||void 0===ke?void 0:ke.id)&&(!(null===ke||void 0===ke||!ke.completed_at)||Pe.id!==(null===ke||void 0===ke||null===(U=ke.creator)||void 0===U?void 0:U.id)),placeholderText:"End Date",customInput:i.createElement("div",{id:"custom-input",style:{cursor:"pointer",display:"flex",justifyContent:"center",width:"100%",alignItems:"stretch",border:"1px solid",borderColor:null!==ol&&void 0!==ol&&null!==(F=ol.errors)&&void 0!==F&&F.endDate?"var(--app-color-error)":"var(--app-color-gray-lighter)"}},i.createElement("input",{disabled:!0,readOnly:void 0!==(null===ke||void 0===ke?void 0:ke.id)&&(!(null===ke||void 0===ke||!ke.completed_at)||Pe.id!==(null===ke||void 0===ke||null===(W=ke.creator)||void 0===W?void 0:W.id)),onFocus:()=>il(""),value:a()(el).format("DD MMMM YYYY HH:mm"),type:"text",required:null===ol||void 0===ol||null===(q=ol.errors)||void 0===q?void 0:q.endDate,id:"due-date",style:{flex:1,marginTop:"auto",marginBottom:"auto",outline:"none",border:"none",fontFamily:"var(--app-text-main-font)",fontSize:"16px",lineHeight:"20px",color:"#4A4A4A",textAlign:(null===el||void 0===el?void 0:el.length)>0?"center":"left",maxWidth:"98%"},placeholder:"Due Date",onChange:e=>{}}),i.createElement(f.f,{className:C})),className:x,selected:el,onChange:e=>{a()(e).diff(a()(Xe),"minutes")>0?!1===Oe?a()(e).format("DD")===a()(el).format("DD")?ll(e):ll(el):ll(e):ll(el)}}))),ol&&(null===ol||void 0===ol||null===(B=ol.errors)||void 0===B?void 0:B.due_date)&&i.createElement(w.Z,{message:ol.errors.endDate})):i.createElement("div",{style:{marginBottom:"10px"}},i.createElement("label",{style:{color:null!==ol&&void 0!==ol&&null!==(Y=ol.errors)&&void 0!==Y&&Y.due_date?"var(--app-color-error)":""}},"Due Date",i.createElement("div",{style:{marginTop:"10px"}},i.createElement(s(),{disabled:void 0!==(null===ke||void 0===ke?void 0:ke.id)&&(!(null===ke||void 0===ke||!ke.completed_at)||Pe.id!==(null===ke||void 0===ke||null===(H=ke.creator)||void 0===H?void 0:H.id)),placeholderText:"Due Date",customInput:i.createElement("div",{id:"custom-input",style:{cursor:"pointer",display:"flex",justifyContent:"center",width:"100%",alignItems:"stretch",border:"1px solid",borderColor:null!==ol&&void 0!==ol&&null!==(V=ol.errors)&&void 0!==V&&V.due_date?"var(--app-color-error)":"var(--app-color-gray-lighter)"}},i.createElement("input",{readOnly:void 0!==(null===ke||void 0===ke?void 0:ke.id)&&(!(null===ke||void 0===ke||!ke.completed_at)||Pe.id!==(null===ke||void 0===ke||null===(j=ke.creator)||void 0===j?void 0:j.id)),onFocus:()=>il(""),value:a()(Ke).format("DD MMMM YYYY HH:mm"),type:"text",required:null===ol||void 0===ol||null===(G=ol.errors)||void 0===G?void 0:G.due_date,id:"due-date",style:{flex:1,marginTop:"auto",marginBottom:"auto",outline:"none",border:"none",fontFamily:"var(--app-text-main-font)",fontSize:"16px",lineHeight:"20px",color:"#4A4A4A",textAlign:(null===Ke||void 0===Ke?void 0:Ke.length)>0?"center":"left",maxWidth:"98%"},placeholder:"Due Date",onChange:e=>{}}),i.createElement(f.f,{className:C})),className:x,selected:Ke,onChange:e=>{Qe(e)}}))),ol&&(null===ol||void 0===ol||null===(J=ol.errors)||void 0===J?void 0:J.due_date)&&i.createElement(w.Z,{message:ol.errors.due_date})),i.createElement("div",{style:{marginBottom:"10px"}},i.createElement("label",{style:{color:null!==ol&&void 0!==ol&&null!==(K=ol.errors)&&void 0!==K&&K.description?"var(--app-color-error)":""}},"Description",i.createElement("textarea",{style:{marginTop:"10px"},disabled:!(null===ke||void 0===ke||!ke.completed_at),onFocus:()=>il(""),required:null===ol||void 0===ol||null===(Q=ol.errors)||void 0===Q?void 0:Q.description,value:Ge,onChange:e=>Je(e.target.value)})),ol&&(null===ol||void 0===ol||null===(X=ol.errors)||void 0===X?void 0:X.description)&&i.createElement(w.Z,{message:ol.errors.description})),i.createElement("div",{style:{marginBottom:"10px"}},i.createElement("label",{style:{color:null!==ol&&void 0!==ol&&null!==($=ol.errors)&&void 0!==$&&$.assignee_id?"var(--app-color-error)":""}},"Assignee",null!==ke&&void 0!==ke&&ke.completed_at?i.createElement("div",null,i.createElement("input",{style:{cursor:"auto"},defaultValue:(null===ke||void 0===ke?void 0:ke.assignee.first_name)+" "+(null===ke||void 0===ke?void 0:ke.assignee.last_name),readOnly:!0})):i.createElement(c.ZP,{onFocus:()=>il(""),isSearchable:!1,key:"Assignee",styles:yl,defaultInputValue:"",components:{DropdownIndicator:y.ms},placeholder:"",value:_l[_l.findIndex(e=>e.value===Fe.assignee_id)],options:_l.concat([{label:"None",value:""}]),onChange:e=>{e&&We(l=>(0,n.Z)((0,n.Z)({},l),{},{assignee_id:e.value}))}})),ol&&(null===ol||void 0===ol||null===(ee=ol.errors)||void 0===ee?void 0:ee.assignee_id)&&i.createElement(w.Z,{message:ol.errors.assignee_id})),(null===e||void 0===e||null===(le=e.task)||void 0===le?void 0:le.creator)&&i.createElement("div",{style:{marginBottom:"10px"}},i.createElement("label",null,i.createElement("p",null,"Creator"),i.createElement("input",{style:{cursor:"auto"},defaultValue:(null===ke||void 0===ke?void 0:ke.creator.first_name)+" "+(null===ke||void 0===ke?void 0:ke.creator.last_name),readOnly:!0})),i.createElement("label",null,i.createElement("p",null,"Created Date"),i.createElement("input",{style:{cursor:"auto"},defaultValue:a()(null===ke||void 0===ke?void 0:ke.created_at).format("DD MMMM YYYY"),readOnly:!0}))),i.createElement("div",{style:{marginBottom:"10px"}},Ee&&i.createElement("label",{style:{color:null!==ol&&void 0!==ol&&null!==(oe=ol.errors)&&void 0!==oe&&oe.procedure_id?"var(--app-color-error)":""}},i.createElement("p",null,"Priority"),null!==ke&&void 0!==ke&&ke.completed_at?i.createElement("input",{style:{cursor:"auto"},defaultValue:null!==(ie=null===ke||void 0===ke?void 0:ke.priority)&&void 0!==ie?ie:"Medium",readOnly:!0}):i.createElement(c.ZP,{onFocus:()=>il(""),key:"priority",styles:yl,defaultInputValue:"",components:{DropdownIndicator:y.ms},placeholder:"",value:y._l.find(e=>e.value===ml),options:y._l,onChange:e=>fl(e.value)})),i.createElement("label",{style:{color:null!==ol&&void 0!==ol&&null!==(te=ol.errors)&&void 0!==te&&te.procedure_id?"var(--app-color-error)":""}},i.createElement("p",null,"Status"),null!==ke&&void 0!==ke&&ke.completed_at?i.createElement("input",{style:{cursor:"auto"},defaultValue:null!==(ne=null===ke||void 0===ke?void 0:ke.status)&&void 0!==ne?ne:"No status set",readOnly:!0}):i.createElement(c.ZP,{onFocus:()=>il(""),key:"status",styles:yl,defaultInputValue:"",components:{DropdownIndicator:y.ms},placeholder:"",value:hl.find(e=>e.value===Ve),options:Pe.id===(null===ke||void 0===ke||null===(de=ke.creator)||void 0===de?void 0:de.id)?[...hl,{label:null!==(ae=null===(re=Te.processModule)||void 0===re||null===(se=re.module)||void 0===se||null===(ve=se.options)||void 0===ve?void 0:ve.lock)&&void 0!==ae?ae:null===Ue||void 0===Ue||null===(ue=Ue.misc_info)||void 0===ue?void 0:ue.lock,value:null!==(ce=null===(pe=Te.processModule)||void 0===pe||null===(me=pe.module)||void 0===me||null===(fe=me.options)||void 0===fe?void 0:fe.lock)&&void 0!==ce?ce:null===Ue||void 0===Ue||null===(_e=Ue.misc_info)||void 0===_e?void 0:_e.lock},{label:"No status",value:""}]:hl,onChange:e=>je(e.value)})),ol&&(null===ol||void 0===ol||null===(ye=ol.errors)||void 0===ye?void 0:ye.procedure_id)&&i.createElement(w.Z,{message:ol.errors.procedure_id})),i.createElement("div",{style:{marginBottom:"10px"}},i.createElement("label",{style:{color:null!==ol&&void 0!==ol&&null!==(he=ol.errors)&&void 0!==he&&he.procedure_id?"var(--app-color-error)":""}},i.createElement("p",null,"Module"),null!==ke&&void 0!==ke&&null!==(ge=ke.add_info)&&void 0!==ge&&ge.module_id||null!==ke&&void 0!==ke&&ke.completed_at?i.createElement("input",{style:{cursor:"auto"},defaultValue:null===(be=ze.find(e=>{var l;return e.id===(null===ke||void 0===ke||null===(l=ke.add_info)||void 0===l?void 0:l.module_id)}))||void 0===be?void 0:be.name,readOnly:!0}):i.createElement(c.ZP,{onFocus:()=>il(""),key:"module",styles:yl,components:{DropdownIndicator:y.ms},placeholder:"",options:ze.filter(e=>{var l;return null===(l=e.options)||void 0===l?void 0:l.task}).map(e=>({label:e.name,value:e.id,module:e})),onChange:e=>{Te.processModule=(0,n.Z)((0,n.Z)({},e.module.procedure),{},{module_id:e.value}),Le({valueL:"Value"}),Re(e.module)}})),ol&&(null===ol||void 0===ol||null===(xe=ol.errors)||void 0===xe?void 0:xe.procedure_id)&&i.createElement(w.Z,{message:ol.errors.procedure_id})),ol&&(null===ol||void 0===ol?void 0:ol.message)&&i.createElement(w.Z,{message:ol.message})),null!==ke&&void 0!==ke&&ke.completed_at?i.createElement("div",{className:b},i.createElement(h.Z,{clicked:De,className:E,title:"Close"})):Ze?i.createElement("div",{className:b},i.createElement(h.Z,{clicked:De,className:E,title:"Close"}),i.createElement(h.Z,{light:!0,clicked:()=>ul(!0),className:E,title:"Delete"}),i.createElement(h.Z,{light:!0,clicked:()=>(()=>{var l,o;nl(!0);let i=Fe?Fe.assignee_id:Ie;(0,_.xJ)({assignee_id:i,name:Ye,description:Ge,dueDate:a()(Ke).format("YYYY-MM-DD HH:mm"),status:null!==Ve&&void 0!==Ve?Ve:"",add_info:(0,n.Z)((0,n.Z)({},null===e||void 0===e||null===(l=e.task)||void 0===l?void 0:l.add_info),{},{priority:null!==ml&&void 0!==ml?ml:"",start:Xe,end:el})},null===e||void 0===e||null===(o=e.task)||void 0===o?void 0:o.id).subscribe({next:e=>{nl(!1),Ne(!1)},error:e=>{e&&(il(e.data),nl(!1))},complete:()=>{}})})(),className:E,title:"Update",loading:tl}),i.createElement(h.Z,{light:!0,clicked:()=>(()=>{var e,l;nl(!0),(0,_.vr)({newAssignee:{assignee_id:null===ke||void 0===ke||null===(e=ke.assignee)||void 0===e?void 0:e.id},taskName:ke.name,taskDescription:ke.description,add_info:null===ke||void 0===ke?void 0:ke.add_info,taskProcess:{id:null===ke||void 0===ke||null===(l=ke.process)||void 0===l?void 0:l.id}}).subscribe({next:e=>{De()},error:e=>{e&&(il(e.data),nl(!1))},complete:()=>{nl(!1),!cl&&Ne(!1)}})})(),className:E,title:"Copy",loading:tl})):i.createElement("div",{className:b},i.createElement(h.Z,{clicked:De,className:E,title:"Close"}),i.createElement(h.Z,{light:!0,clicked:()=>(nl(!0),void(0,_.vr)(null!==Te&&void 0!==Te&&Te.processModule?{newAssignee:Fe,taskProcess:null===Te||void 0===Te?void 0:Te.processModule,taskName:Ye,taskDescription:Ge,dueDate:a()(el).format("YYYY-MM-DD HH:mm"),add_info:{module_id:null===Te||void 0===Te?void 0:Te.processModule.module_id,priority:ml,start:Xe,end:el}}:{newAssignee:Fe,taskName:Ye,taskDescription:Ge,dueDate:a()(Ke).format("YYYY-MM-DD HH:mm"),add_info:{priority:null!==ml&&void 0!==ml?ml:""}}).subscribe({next:e=>{De()},error:e=>{e&&(il(e.data),nl(!1))},complete:()=>{nl(!1),!cl&&Ne(!1)}})),className:E,title:"Save",loading:tl})),vl&&i.createElement(M,{taskId:ke.id,isOpen:vl,removeTask:e=>{al(!0),(0,_._5)(e).subscribe({next:e=>{al(!1),ul(!1)},error:e=>{al(!1)},complete:()=>{Ne(!1)}})},loading:dl,onClose:ul}))});var k=o(73500);o(63864);o(66918);const Z=e=>{const{isOpen:l,onClose:o,loading:n,removeTask:d,taskId:a}=e;return i.createElement(t.U7,{isOpen:l,onClose:()=>o(!1),backdropColor:!0,blured:!0,scrollable:!0,shadowedContainerStyle:{width:"35%"}},i.createElement("div",null,i.createElement("p",{style:{textAlign:"center",fontSize:"16px",color:"#4A4A4A",fontFamily:"var(--app-text-main-font)"}},"Are you sure do you want to delete this task?"),i.createElement("div",{style:{display:"flex",justifyContent:"space-evenly"}},i.createElement(h.Z,{loading:n,clicked:()=>d(a),title:"Yes, Delete"}),i.createElement(h.Z,{light:!0,loading:n,clicked:()=>o(!1),title:"No, Go Back"}))))},I=(0,v.$j)(e=>{const{selectedProcess:l,companyUsersArray:o,companyProcesses:i,allModules:t,begunModule:n,companyData:d}=e.flowReducer,{user:a}=e.sessionReducer;return{selectedProcess:l,companyUsersArray:o,companyProcesses:i,allModules:t,user:a,begunModule:n,companyData:d}})(function(e){var l,o,t,d,r,v,u,p,M,S,k,I,N,T,D,P,A,O,L,z,R,U,F,W,q,B,Y,H,V,j,G,J,K,Q,X,$,ee,le,oe,ie,te,ne,de,ae,re,se,ve,ue,ce,pe,me,fe,_e,ye,he,ge,be,xe,Ee,Ce,we,Me,Se,ke,Ze,Ie;const{selectedProcess:Ne,isProcess:Te,statuses:De,companyUsersArray:Pe,task:Ae,isEdit:Oe,assigneeId:Le,setDisplayModal:ze,begunModule:Re,onClose:Ue,user:Fe,start_date:We=(new Date).setDate((new Date).getDate()),span:qe=!0,labels:Be,onUpdate:Ye=()=>{},companyData:He,save:Ve=!0}=e,[je,Ge]=(0,i.useState)(null!==Ae&&void 0!==Ae&&null!==(l=Ae.assignee)&&void 0!==l&&l.id?{assignee_id:null===Ae||void 0===Ae||null===(o=Ae.assignee)||void 0===o?void 0:o.id}:""),[Je,Ke]=(0,i.useState)(null!==Ae&&void 0!==Ae&&null!==(t=Ae.process)&&void 0!==t&&t.id?{process:null===Ae||void 0===Ae||null===(d=Ae.process)||void 0===d?void 0:d.id}:""),[Qe,Xe]=(0,i.useState)((null===Ae||void 0===Ae?void 0:Ae.name)||""),[$e,el]=(0,i.useState)((null===Ae||void 0===Ae?void 0:Ae.status)||""),[ll,ol]=(0,i.useState)((null===Ae||void 0===Ae?void 0:Ae.description)||""),[il,tl]=(0,i.useState)(null!==Ae&&void 0!==Ae&&Ae.due_date?new Date(null===Ae||void 0===Ae?void 0:Ae.due_date):(new Date).setDate((new Date).getDate())+36e5),[nl,dl]=(0,i.useState)(null!==Ae&&void 0!==Ae&&null!==(r=Ae.add_info)&&void 0!==r&&r.start?new Date(null===Ae||void 0===Ae||null===(v=Ae.add_info)||void 0===v?void 0:v.start):We),[al,rl]=(0,i.useState)(null!==Ae&&void 0!==Ae&&null!==(u=Ae.add_info)&&void 0!==u&&u.end?new Date(null===Ae||void 0===Ae||null===(p=Ae.add_info)||void 0===p?void 0:p.end):We),[sl,vl]=(0,i.useState)(null===Ae||void 0===Ae||null===(M=Ae.add_info)||void 0===M?void 0:M.value),[ul,cl]=(0,i.useState)(null!==(S=null===Ae||void 0===Ae||null===(k=Ae.add_info)||void 0===k?void 0:k.pos)&&void 0!==S?S:null===Fe||void 0===Fe||null===(I=Fe.positions[0])||void 0===I?void 0:I.id),[pl,ml]=(0,i.useState)(""),[fl,_l]=(0,i.useState)(!1),[yl,hl]=(0,i.useState)(!1),[gl,bl]=(0,i.useState)(!1),[xl,El]=(0,i.useState)(!1),[Cl,wl]=(0,i.useState)(Te),[Ml,Sl]=(0,i.useState)((null===Ae||void 0===Ae||null===(N=Ae.add_info)||void 0===N?void 0:N.priority)||""),kl=(null===Pe||void 0===Pe?void 0:Pe.length)>0?Oe&&(null===Ae||void 0===Ae||null===(T=Ae.creator)||void 0===T?void 0:T.id)!==Fe.id?[{label:Fe.first_name+" "+Fe.last_name,value:Fe.id}]:Pe.map(e=>({label:e.first_name+" "+e.last_name,value:e.id})):[];(0,i.useEffect)(()=>(bl(!0),()=>{bl(!1)}),[]),(0,i.useEffect)(()=>{if(Cl&&null!==Ne&&void 0!==Ne&&Ne.id&&gl){(()=>{Ke({procedure_id:Ne.id}),ol(Ne.description)})()}},[Cl,gl,Ne.description,Ne.id]);const Zl={control:(e,l)=>(0,n.Z)((0,n.Z)({},e),{},{boxShadow:"none","&:hover":{border:"1px solid var(--app-color-gray-lighter)"},position:"relative",height:"60px",width:"100%",border:"var(--app-color-gray-lighter) solid 1px",padding:"3px",fontFamily:"var(--app-text-main-font)",fontSize:"1.4em",fontWeight:"700",color:"#4A4A4A",textAlign:"left",flex:"1 1 auto",justifyContent:"center",alignItems:"center",alignContent:"center",alignSelf:"center"}),input:(e,l)=>(0,n.Z)((0,n.Z)({},e),{},{fontFamily:"var(--app-text-main-font)",color:"#4A4A4A",width:"100%",textAlign:"left",fontSize:"0.8em",fontWeight:"700",alignSelf:"center"}),menu:(e,l)=>(0,n.Z)((0,n.Z)({},e),{},{justifyContent:"center",alignItems:"center",verticalTextAlign:"center",alignContent:"center"}),menulist:(e,l)=>(0,n.Z)((0,n.Z)({},e),{},{justifyContent:"center",alignItems:"center",verticalTextAlign:"center",alignContent:"center",fontFamily:"var(--app-text-main-font)"}),option:(e,l)=>(0,n.Z)((0,n.Z)({},e),{},{minHeight:15,paddingTop:0,fontSize:"1.1em",color:"black",verticalTextAlign:"center",justifyContent:"center",alignItems:"center",alignContent:"center",fontFamily:"var(--app-text-main-font)",fontWeight:"bold"}),placeholder:(e,l)=>(0,n.Z)((0,n.Z)({},e),{},{fontSize:"0.75em",lineHeight:"20px",color:"#4A4A4A",fontWeight:400,overflow:"hidden",fontFamily:"var(--app-text-main-font)"}),singleValue:(e,l)=>{const o=l.isDisabled?.5:1;return(0,n.Z)((0,n.Z)({},e),{},{opacity:o,transition:"opacity 300ms",marginLeft:"0px",fontSize:"0.75em",lineHeight:"20px",color:"#4A4A4A",fontFamily:"var(--app-text-main-font)"})},indicatorsContainer:(e,l)=>{let{_data:o}=l;return(0,n.Z)((0,n.Z)({},e),{},{marginTop:"auto",marginBottom:"auto",color:"#4A4A4A",size:7,":hover":{color:"gray"},width:"65px",height:"45px"})}},Il=De?De.map(e=>({label:e,value:e})):[{label:"Ongoing",value:"Ongoing"},{label:"In Review",value:"In Review"},{label:"Approved",value:"Approved"},{label:"Postponed",value:"Postponed"},{label:"Moved",value:"Moved"},{label:"Cancelled",value:"Cancelled"}];return i.createElement("div",{className:g},i.createElement(m(),{style:{flex:1}},i.createElement("div",{style:{marginBottom:"10px"}},i.createElement("label",{style:{color:null!==pl&&void 0!==pl&&null!==(D=pl.errors)&&void 0!==D&&D.name?"var(--app-color-error)":"",display:(null!==Ae&&void 0!==Ae&&Ae.completed_at,"")}},i.createElement("p",null,null!==(P=null===Be||void 0===Be?void 0:Be.title)&&void 0!==P?P:"Event Name"),i.createElement("textarea",{readOnly:void 0!==(null===Ae||void 0===Ae?void 0:Ae.id)&&(!(null===Ae||void 0===Ae||!Ae.completed_at)||Fe.id!==(null===Ae||void 0===Ae||null===(A=Ae.creator)||void 0===A?void 0:A.id)),required:null===pl||void 0===pl||null===(O=pl.errors)||void 0===O?void 0:O.name,onFocus:()=>ml(""),value:Qe,onChange:e=>Xe(e.target.value)})),pl&&(null===pl||void 0===pl||null===(L=pl.errors)||void 0===L?void 0:L.name)&&i.createElement(w.Z,{message:pl.errors.name})),i.createElement("div",{style:{marginBottom:"10px"}},i.createElement("label",{style:{color:null!==pl&&void 0!==pl&&null!==(z=pl.errors)&&void 0!==z&&z.name?"var(--app-color-error)":"",display:(null!==Ae&&void 0!==Ae&&Ae.completed_at,"")}},i.createElement("p",null,null!==(R=null===Be||void 0===Be?void 0:Be.description)&&void 0!==R?R:"Description"),i.createElement("textarea",{style:{minHeight:"200px"},readOnly:void 0!==(null===Ae||void 0===Ae?void 0:Ae.id)&&(!(null===Ae||void 0===Ae||!Ae.completed_at)||Fe.id!==(null===Ae||void 0===Ae||null===(U=Ae.creator)||void 0===U?void 0:U.id)),required:null===pl||void 0===pl||null===(F=pl.errors)||void 0===F?void 0:F.description,onFocus:()=>ml(""),value:ll,onChange:e=>ol(e.target.value)})),pl&&(null===pl||void 0===pl||null===(W=pl.errors)||void 0===W?void 0:W.name)&&i.createElement(w.Z,{message:pl.errors.description})),(null===Be||void 0===Be?void 0:Be.valueL)&&i.createElement("div",{style:{marginBottom:"10px"}},i.createElement("label",{style:{color:null!==pl&&void 0!==pl&&null!==(q=pl.errors)&&void 0!==q&&q.name?"var(--app-color-error)":""}},i.createElement("p",null,null===Be||void 0===Be?void 0:Be.valueL),i.createElement("input",{readOnly:void 0!==(null===Ae||void 0===Ae?void 0:Ae.id)&&(!(null===Ae||void 0===Ae||!Ae.completed_at)||Fe.id!==(null===Ae||void 0===Ae||null===(B=Ae.creator)||void 0===B?void 0:B.id)),onFocus:()=>ml(""),value:sl,onChange:e=>vl(e.target.value),onBlur:()=>{var e,l,o;null!==Re&&void 0!==Re&&null!==(e=Re.processModule)&&void 0!==e&&null!==(l=e.module)&&void 0!==l&&null!==(o=l.options)&&void 0!==o&&o.credits&&+sl>+(null===Fe||void 0===Fe?void 0:Fe.wallet)&&(vl("0.00"),ml({errors:{value:"You have insufficient funds in your wallet. You currently have ".concat(null===Fe||void 0===Fe?void 0:Fe.wallet,".")}}))}})),pl&&(null===pl||void 0===pl||null===(Y=pl.errors)||void 0===Y?void 0:Y.value)&&i.createElement(w.Z,{message:pl.errors.value})),i.createElement("div",{style:{marginBottom:"10px"}},i.createElement("label",{style:{color:null!==pl&&void 0!==pl&&null!==(H=pl.errors)&&void 0!==H&&H.due_date?"var(--app-color-error)":""}},i.createElement("p",null,null!==(V=null===Be||void 0===Be?void 0:Be.start)&&void 0!==V?V:"Start Date"),i.createElement(s(),{showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:15,disabled:!(void 0===(null===Ae||void 0===Ae?void 0:Ae.id)||!(null!==Ae&&void 0!==Ae&&Ae.completed_at||Fe.id!==(null===Ae||void 0===Ae||null===(j=Ae.creator)||void 0===j?void 0:j.id))),placeholderText:"Start Date",customInput:i.createElement("div",{id:"custom-input",style:{cursor:"pointer",display:"flex",justifyContent:"center",width:"100%",alignItems:"stretch",border:"1px solid",borderColor:"var(--app-color-gray-lighter)"}},i.createElement("input",{disabled:!0,readOnly:void 0!==(null===Ae||void 0===Ae?void 0:Ae.id)&&(!(null===Ae||void 0===Ae||!Ae.completed_at)||Fe.id!==(null===Ae||void 0===Ae||null===(G=Ae.creator)||void 0===G?void 0:G.id)),onFocus:()=>ml(""),value:void 0!==(null===Ae||void 0===Ae?void 0:Ae.id)&&(null!==Ae&&void 0!==Ae&&Ae.completed_at||Fe.id!==(null===Ae||void 0===Ae||null===(J=Ae.creator)||void 0===J?void 0:J.id))?"".concat(a()(nl).format("DD MMMM YYYY HH:mm")):a()(nl).format("DD MMMM YYYY HH:mm"),type:"text",required:null===pl||void 0===pl||null===(K=pl.errors)||void 0===K?void 0:K.startDate,id:"start-date",style:{flex:1,marginTop:"auto",marginBottom:"auto",outline:"none",border:"none",fontFamily:"var(--app-text-main-font)",fontSize:"16px",lineHeight:"20px",color:"#4A4A4A",textAlign:(null===nl||void 0===nl?void 0:nl.length)>0?"center":"left",maxWidth:"98%"},placeholder:"Start Date",onChange:e=>{}}),i.createElement(f.f,{className:C})),className:x,selected:nl,onChange:e=>{a()(e).diff(a()(al),"minutes")<1?dl(e):(dl(e),rl(e))}}))),(void 0===(null===Ae||void 0===Ae?void 0:Ae.id)||!(null!==Ae&&void 0!==Ae&&Ae.completed_at)&&Fe.id===(null===Ae||void 0===Ae||null===(Q=Ae.creator)||void 0===Q?void 0:Q.id))&&i.createElement("div",{style:{marginBottom:"10px"}},i.createElement("label",{style:{color:null!==pl&&void 0!==pl&&null!==(X=pl.errors)&&void 0!==X&&X.due_date?"var(--app-color-error)":""}},i.createElement("p",null,null!==($=null===Be||void 0===Be?void 0:Be.end)&&void 0!==$?$:"End Date"),i.createElement(s(),{showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:15,disabled:void 0!==(null===Ae||void 0===Ae?void 0:Ae.id)&&(!(null===Ae||void 0===Ae||!Ae.completed_at)||Fe.id!==(null===Ae||void 0===Ae||null===(ee=Ae.creator)||void 0===ee?void 0:ee.id)),placeholderText:"End Date",customInput:i.createElement("div",{id:"custom-input",style:{cursor:"pointer",display:"flex",justifyContent:"center",width:"100%",alignItems:"stretch",border:"1px solid",borderColor:null!==pl&&void 0!==pl&&null!==(le=pl.errors)&&void 0!==le&&le.endDate?"var(--app-color-error)":"var(--app-color-gray-lighter)"}},i.createElement("input",{disabled:!0,readOnly:void 0!==(null===Ae||void 0===Ae?void 0:Ae.id)&&(!(null===Ae||void 0===Ae||!Ae.completed_at)||Fe.id!==(null===Ae||void 0===Ae||null===(oe=Ae.creator)||void 0===oe?void 0:oe.id)),onFocus:()=>ml(""),value:a()(al).format("DD MMMM YYYY HH:mm"),type:"text",required:null===pl||void 0===pl||null===(ie=pl.errors)||void 0===ie?void 0:ie.endDate,id:"due-date",style:{flex:1,marginTop:"auto",marginBottom:"auto",outline:"none",border:"none",fontFamily:"var(--app-text-main-font)",fontSize:"16px",lineHeight:"20px",color:"#4A4A4A",textAlign:(null===al||void 0===al?void 0:al.length)>0?"center":"left",maxWidth:"98%"},placeholder:"Due Date",onChange:e=>{}}),i.createElement(f.f,{className:C})),className:x,selected:al,onChange:e=>{a()(e).diff(a()(nl),"minutes")>0?!1===qe?a()(e).format("DD")===a()(al).format("DD")?rl(e):rl(al):rl(e):rl(al)}}))),pl&&(null===pl||void 0===pl||null===(te=pl.errors)||void 0===te?void 0:te.due_date)&&i.createElement(w.Z,{message:pl.errors.endDate}),i.createElement("div",{style:{marginBottom:"10px"}},i.createElement("label",{style:{color:null!==pl&&void 0!==pl&&null!==(ne=pl.errors)&&void 0!==ne&&ne.assignee_id?"var(--app-color-error)":""}},i.createElement("p",null,null!==(de=null===Be||void 0===Be?void 0:Be.assignee)&&void 0!==de?de:"Assignee"),null!==Ae&&void 0!==Ae&&Ae.completed_at?i.createElement("div",null,i.createElement("input",{style:{cursor:"auto"},placeholder:(null===Ae||void 0===Ae?void 0:Ae.assignee.first_name)+" "+(null===Ae||void 0===Ae?void 0:Ae.assignee.last_name),readOnly:!0})):i.createElement(c.ZP,{onFocus:()=>ml(""),isSearchable:!1,key:"Assignee",styles:Zl,defaultInputValue:"",components:{DropdownIndicator:y.ms},placeholder:"",value:kl[kl.findIndex(e=>e.value===je.assignee_id)],options:kl.concat([{label:"None",value:""}]),onChange:e=>{e&&Ge(l=>(0,n.Z)((0,n.Z)({},l),{},{assignee_id:e.value}))}})),pl&&(null===pl||void 0===pl||null===(ae=pl.errors)||void 0===ae?void 0:ae.assignee_id)&&i.createElement(w.Z,{message:pl.errors.assignee_id})),(null===Fe||void 0===Fe||null===(re=Fe.positions)||void 0===re?void 0:re.length)>1&&i.createElement("div",{style:{marginBottom:"10px"}},i.createElement("label",{style:{}},i.createElement("p",null,"Role"),null!==Ae&&void 0!==Ae&&null!==(se=Ae.add_info)&&void 0!==se&&se.pos||null!==Ae&&void 0!==Ae&&Ae.completed_at?i.createElement("input",{style:{cursor:"auto",border:"1px solid var(--app-color-gray-lighter)"},defaultValue:null===Fe||void 0===Fe||null===(ve=Fe.positions.find(e=>{var l;return e.id===(null===Ae||void 0===Ae||null===(l=Ae.add_info)||void 0===l?void 0:l.pos)}))||void 0===ve?void 0:ve.name,readOnly:!0}):i.createElement(c.ZP,{onFocus:()=>ml(""),key:"pos",styles:Zl,components:{DropdownIndicator:y.ms},placeholder:"",options:null===Fe||void 0===Fe?void 0:Fe.positions.map(e=>({label:e.name,value:e.id,pos:e})),onChange:e=>{cl(e.value)}}),i.createElement("div",{style:{fontWeight:"normal"}},"Note: Your role when making this task")),pl&&(null===pl||void 0===pl||null===(ue=pl.errors)||void 0===ue?void 0:ue.procedure_id)&&i.createElement(w.Z,{message:pl.errors.procedure_id})),((null===Ae||void 0===Ae?void 0:Ae.completed_at)||Fe.id===(null===Ae||void 0===Ae||null===(ce=Ae.creator)||void 0===ce?void 0:ce.id))&&i.createElement("div",{style:{marginBottom:"10px"}},i.createElement("label",{style:{color:null!==pl&&void 0!==pl&&null!==(pe=pl.errors)&&void 0!==pe&&pe.procedure_id?"var(--app-color-error)":""}},i.createElement("p",null,"Status"),null!==Ae&&void 0!==Ae&&Ae.completed_at?i.createElement("input",{style:{cursor:"auto"},placeholder:null!==(me=null===Ae||void 0===Ae?void 0:Ae.status)&&void 0!==me?me:"No status set",readOnly:!0}):Fe.id===(null===Ae||void 0===Ae||null===(fe=Ae.creator)||void 0===fe?void 0:fe.id)?i.createElement(c.ZP,{onFocus:()=>ml(""),key:"status",isSearchable:!1,styles:Zl,defaultInputValue:"",components:{DropdownIndicator:y.ms},placeholder:"",value:Il.find(e=>e.value===$e),options:Fe.id===(null===Ae||void 0===Ae||null===(_e=Ae.creator)||void 0===_e?void 0:_e.id)?[...Il,{label:null!==(ye=null===(he=Re.processModule)||void 0===he||null===(ge=he.module)||void 0===ge||null===(be=ge.options)||void 0===be?void 0:be.lock)&&void 0!==ye?ye:null===He||void 0===He||null===(xe=He.misc_info)||void 0===xe?void 0:xe.lock,value:null!==(Ee=null===(Ce=Re.processModule)||void 0===Ce||null===(we=Ce.module)||void 0===we||null===(Me=we.options)||void 0===Me?void 0:Me.lock)&&void 0!==Ee?Ee:null===He||void 0===He||null===(Se=He.misc_info)||void 0===Se?void 0:Se.lock},{label:"No status",value:""}]:Il,onChange:e=>el(e.value)}):i.createElement("input",{style:{cursor:"auto"},placeholder:null!==(ke=null===Ae||void 0===Ae?void 0:Ae.status)&&void 0!==ke?ke:"No status set",readOnly:!0})),pl&&(null===pl||void 0===pl||null===(Ze=pl.errors)||void 0===Ze?void 0:Ze.procedure_id)&&i.createElement(w.Z,{message:pl.errors.procedure_id})),pl&&(null===pl||void 0===pl?void 0:pl.message)&&i.createElement(w.Z,{message:pl.message})),null!==Ae&&void 0!==Ae&&Ae.completed_at?i.createElement("div",{className:b},i.createElement(h.Z,{clicked:Ue,className:E,title:"Close"})):Oe?i.createElement("div",{className:b},i.createElement(h.Z,{clicked:Ue,className:E,title:"Close"}),Ve&&Fe.id===(null===(Ie=Ae.creator)||void 0===Ie?void 0:Ie.id)&&i.createElement(h.Z,{light:!0,clicked:()=>El(!0),className:E,title:"Delete"}),Ve&&i.createElement(h.Z,{light:!0,clicked:()=>(()=>{var l,o;_l(!0);let i=je?je.assignee_id:Le;(0,_.xJ)({assignee_id:i,name:Qe,description:ll,dueDate:a()(al).format("YYYY-MM-DD HH:mm"),status:null!==$e&&void 0!==$e?$e:"",add_info:(0,n.Z)((0,n.Z)({},null===e||void 0===e||null===(l=e.task)||void 0===l?void 0:l.add_info),{},{priority:null!==Ml&&void 0!==Ml?Ml:"",start:nl,end:al,value:sl,pos:ul})},null===e||void 0===e||null===(o=e.task)||void 0===o?void 0:o.id).subscribe({next:e=>{Ye(e),_l(!1),ze(!1)},error:e=>{e&&(ml(e.data),_l(!1))},complete:()=>{}})})(),className:E,title:"Update",loading:fl}),Ve&&i.createElement(h.Z,{light:!0,clicked:()=>(()=>{var e,l,o;_l(!0),(0,_.vr)({newAssignee:{assignee_id:null===Ae||void 0===Ae||null===(e=Ae.assignee)||void 0===e?void 0:e.id},taskName:Ae.name,taskDescription:Ae.description,dueDate:a()(null===Ae||void 0===Ae||null===(l=Ae.add_info)||void 0===l?void 0:l.end).format("YYYY-MM-DD HH:mm"),add_info:null===Ae||void 0===Ae?void 0:Ae.add_info,taskProcess:{id:null===Ae||void 0===Ae||null===(o=Ae.process)||void 0===o?void 0:o.id}}).subscribe({next:e=>{Ue()},error:e=>{e&&(ml(e.data),_l(!1))},complete:()=>{_l(!1),!Cl&&ze(!1)}})})(),className:E,title:"Copy",loading:fl}),!Ve&&i.createElement(h.Z,{title:"Assign",light:!0,clicked:()=>{var l;Ye((0,n.Z)((0,n.Z)({},null===e||void 0===e?void 0:e.task),{},{assignee_id:je?je.assignee_id:Le,name:Qe,description:ll,due_date:a()(il).format("YYYY-MM-DD HH:mm"),status:null!==$e&&void 0!==$e?$e:"",add_info:(0,n.Z)((0,n.Z)({},null===e||void 0===e||null===(l=e.task)||void 0===l?void 0:l.add_info),{},{priority:null!==Ml&&void 0!==Ml?Ml:"",start:nl,end:al,value:sl})})),ze(!1)},className:E})):i.createElement("div",{className:b},i.createElement(h.Z,{clicked:Ue,className:E,title:"Close"}),i.createElement(h.Z,{light:!0,clicked:()=>(_l(!0),void(0,_.vr)({newAssignee:je,taskProcess:null===Re||void 0===Re?void 0:Re.processModule,taskName:Qe,taskDescription:null!==ll&&void 0!==ll?ll:"-",dueDate:a()(al).format("YYYY-MM-DD HH:mm"),add_info:{module_id:null===Re||void 0===Re?void 0:Re.processModule.module_id,priority:Ml,start:nl,end:al,value:sl,pos:ul}}).subscribe({next:e=>{Ue()},error:e=>{e&&(ml(e.data),_l(!1))},complete:()=>{_l(!1),!Cl&&ze(!1)}})),className:E,title:"Save",loading:fl})),xl&&i.createElement(Z,{taskId:Ae.id,isOpen:xl,removeTask:e=>{hl(!0),(0,_._5)(e).subscribe({next:e=>{hl(!1),El(!1)},error:e=>{hl(!1)},complete:()=>{ze(!1)}})},loading:yl,onClose:El}))});o(64967);var N=o(75105),T=o(11577),D=o(88374),P=o(88827);const A=(0,v.$j)(e=>{const{allModules:l,begunModule:o,companyUsersArray:i}=e.flowReducer,{user:t}=e.sessionReducer;return{allModules:l,user:t,begunModule:o,companyUsersArray:i}})(e=>{const{isEdit:l,modalVisible:o,heading:n,onClose:d,isProcess:a,setIsProcessBegin:r,task:s,priority:v=!0,shadowedContainerStyle:u,statuses:c,start_date:p,span:m,labels:f={},onUpdate:_=()=>{},save:y=!0,companyUsersArray:h}=e,[g,b]=(0,i.useState)(f),[x,E]=(0,i.useState)(a),[C,w]=(0,i.useState)(n);return(0,i.useEffect)(()=>{let e=[];if(s){var l,o;if(!h.find(e=>{var l;return e.id===(null===s||void 0===s||null===(l=s.creator)||void 0===l?void 0:l.id)}))e=e.concat(null===(l=s.creator)||void 0===l?void 0:l.id);if(!h.find(e=>{var l;return e.id===(null===s||void 0===s||null===(l=s.assignee)||void 0===l?void 0:l.id)}))e=e.concat(null===(o=s.assignee)||void 0===o?void 0:o.id);e.length>0&&(0,N.VG)(e).pipe((0,T.P)()).subscribe({next:e=>{P.h.dispatch((0,D.NY)(h.concat(e)))}})}},[]),i.createElement("div",null,i.createElement(t.U7,{scrollable:!0,shadowedContainerStyle:u||{width:k.tq?"96%":"35%"},isOpen:o,onClose:()=>{},blured:!1},x?i.createElement("div",null,i.createElement("p",{style:{fontFamily:"var(--app-text-main-font)",fontSize:k.tq?"20px":"30px",fontWeight:"bold",color:"#4A4A4A",marginTop:"50px",marginBottom:"5px",textAlign:"center"}},null!==s&&void 0!==s&&s.completed_at?"Completed Task":C.toUpperCase()),i.createElement(I,{labels:g,showPriority:v,statuses:c,task:s,setIsProcessBegin:r,setDisplayModal:d,isProcess:x,isEdit:l,onClose:()=>d(),start_date:p,span:m,onUpdate:_,save:y})):i.createElement("div",{style:{padding:"20px 20px"}},i.createElement("p",{style:{fontFamily:"var(--app-text-main-font)",fontSize:"20px",fontWeight:"bold",color:"#4A4A4A",marginTop:"10px",marginBottom:"5px",textAlign:"center"}},null!==s&&void 0!==s&&s.completed_at?"Completed Task":C),l&&i.createElement("p",{style:{fontFamily:"var(--app-text-main-font)",fontSize:"15px",fontWeight:"700",color:"#4A4A4A",marginTop:"5px",marginBottom:"5px",textAlign:"center"}},"Task ID: ".concat(s.id.slice(-6))),i.createElement(S,{showPriority:v,statuses:c,task:s,setIsProcessBegin:r,setDisplayModal:d,isProcess:x,isEdit:l,onClose:()=>d(),start_date:p,span:m,setTaskLabels:b,onModuleSelect:e=>{E(!0),w("New Task for ".concat(e.name))}}))))})},11217:(e,l,o)=>{"use strict";o.d(l,{s:()=>d});var i=o(1413),t=o(22148),n=o.n(t);const d=async function(e){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";try{const o=await n().post("https://routes.googleapis.com/directions/v2:computeRoutes",(e=>(0,i.Z)((0,i.Z)({},e),{},{polylineQuality:"high_quality",computeAlternativeRoutes:!0}))(e),{headers:{"x-goog-api-key":l,"x-goog-fieldmask":"routes.duration,routes.distanceMeters,routes.polyline.encodedPolyline,routes.optimizedIntermediateWaypointIndex,routes.travelAdvisory.speedReadingIntervals"}});return o.data}catch(o){throw console.error("Error fetching directions:",o),o}}},29960:(e,l,o)=>{"use strict";o.d(l,{Z:()=>m});var i=o(81235),t=o(84878),n=o(67861),d=o(54868),a=o(12075),r=o(52902),s=o(40694),v=o(39518),u=o(88827),c=o(88374),p=o(67861);o(66918);const m=e=>{var l,o,m,f,_;const{onLocationChange:y=()=>{},value:h,mapkey:g="",onChange:b=()=>{},placeholder:x="",zoom:E=10}=e,{currentLocation:C}=(0,v.v9)(e=>e.flowReducer),[w,M]=(0,n.useState)(null!==(l=null===h||void 0===h?void 0:h.address)&&void 0!==l?l:""),[S,k]=(0,n.useState)([]),[Z,I]=(0,n.useState)({}),[N,T]=(0,n.useState)(""),[D,P]=(0,n.useState)({id:1,title:null!==h&&void 0!==h&&h.lat?"Target Location":"Current Location",lat:null!==(o=null!==(m=null===h||void 0===h?void 0:h.lat)&&void 0!==m?m:null===C||void 0===C?void 0:C.latitude)&&void 0!==o?o:0,lng:null!==(f=null!==(_=null===h||void 0===h?void 0:h.lng)&&void 0!==_?_:null===C||void 0===C?void 0:C.longitude)&&void 0!==f?f:0});(0,n.useEffect)(()=>{(0,d.setKey)(g),navigator.geolocation.getCurrentPosition(e=>{null!==h&&void 0!==h&&h.lat&&null!==h&&void 0!==h&&h.lng||e&&(P({id:1,title:"Current Location",lat:e.coords.latitude,lng:e.coords.longitude}),I({id:1,title:"Current Location",lat:e.coords.latitude,lng:e.coords.longitude}),u.h.dispatch((0,c.Rb)({latitude:e.coords.latitude,longitude:e.coords.longitude})))},e=>console.log(e))},[]);const A=e=>{let{text:l,tooltip:o}=e;return p.createElement("div",{className:t.Z.xcircle},p.createElement("span",{className:t.Z.circleText,title:o},p.createElement(a.G,{icon:r.opg,style:{color:"green",width:"50px",height:"50px"}}),l))},O=e=>{let{text:l,tooltip:o}=e;return p.createElement(a.G,{icon:r.diR,style:{color:"red",width:"10px",height:"10px"}})};return p.createElement("div",{style:{height:S.length>0?"":"600px",width:"100%",margin:"20px",textAlign:"center"}},p.createElement("div",{style:{display:"flex",width:"100%",margin:"auto",border:"1px dashed black"}},p.createElement(s.Z,{clear:!0,style:{width:"10%",height:"20px"},clicked:()=>{Object.keys(Z).length>0&&(P(Z),(0,d.fromLatLng)(Z.lat,Z.lng).then(e=>{let{results:l}=e;M(l[0].formatted_address),k(l.map(e=>({label:e.formatted_address,value:e.formatted_address,res:e})))}).catch(console.error))},icon:p.createElement(a.G,{icon:r.TqS,style:{swidth:"20px",height:"20px"}})}),p.createElement("input",{onBlur:e=>{e.target.value.length>3?(0,d.geocode)(d.RequestType.ADDRESS,w).then(e=>{let{results:l}=e;const{lat:o,lng:i}=l[0].geometry.location;P({id:1,title:"Target Location",lat:o,lng:i}),k(l.map(e=>({label:e.formatted_address,value:e.formatted_address,res:e})))}).catch(()=>T("Address need more details")):k([])},type:"text",onChange:e=>{M(e.target.value)},value:w,autoComplete:"none",className:t.Z.fieldTypeInput,style:{width:"74%",border:"0"},placeholder:"Type address"}),p.createElement(s.Z,{clear:!0,style:{width:"10%",height:"20px"},icon:p.createElement(a.G,{icon:r.wn1,style:{swidth:"20px",height:"20px"},clicked:()=>{w.length>3&&(0,d.geocode)(d.RequestType.ADDRESS,w).then(e=>{let{results:l}=e;const{lat:o,lng:i}=l[0].geometry.location;P({id:1,title:"Target Location",lat:o,lng:i}),k(l.map(e=>({label:e.formatted_address,value:e})))}).catch(()=>{})}})})),p.createElement("p",{onClick:()=>T("")},N),S.slice(0,5).map((e,l)=>p.createElement("div",{key:l},p.createElement(s.Z,{light:!0,title:e.value,style:{height:"100px",width:"100%"},titleStyle:{textAlign:"left"},clicked:()=>{b(null===e||void 0===e?void 0:e.res)}}))),p.createElement("div",{style:{marginTop:"20px",height:"80%",width:"100%"}},p.createElement(i.ZP,{onClick:e=>{(0,d.fromLatLng)(e.lat,e.lng).then(e=>{let{results:l}=e;M(l[0].formatted_address),k(l.map(e=>({label:e.formatted_address,value:e.formatted_address,res:e})))}).catch(console.error),P({id:1,title:"Target Location",lat:e.lat,lng:e.lng})},bootstrapURLKeys:{key:g,language:"en",region:"US"},center:{lat:+D.lat,lng:+D.lng},defaultZoom:E,distanceToMouse:(e,l)=>{if(e&&l)return Math.sqrt((e.x-l.x)*(e.x-l.x)+(e.y-l.y)*(e.y-l.y))}},C&&p.createElement(O,{key:1e3,lat:C.latitude,lng:C.longitude,tooltip:"Current Location"}),"Current Location"!==D.title&&p.createElement(A,{key:D.id,lat:D.lat,lng:D.lng,tooltip:D.title}))))}},27426:(e,l,o)=>{"use strict";o.d(l,{Y:()=>c,Z:()=>u});var i=o(81235);const t={App:"MapView_App__nakdl",circleText:"MapView_circleText__hsWm+",fieldTypeInput:"MapView_fieldTypeInput__jTYlG",selectText:"MapView_selectText__V-czl",inputField:"MapView_inputField__bZlly",industryMOL:"MapView_industryMOL__efdJc",industryMOLI:"MapView_industryMOLI__GM343"};o(67861);var n=o(60192),d=(o(54868),o(12075)),a=o(52902),r=(o(49465),o(73500)),s=o(95256),v=o(67861);o(66918);const u=e=>{const{pins:l={lat:0,lng:0,address:"Nowhere"},mapkey:o="",current:s,direction:u,zoom:c=15}=e,p=(Math.max(...l.map(e=>e.lng))+Math.min(...l.map(e=>e.lng)))/2,m=(Math.max(...l.map(e=>e.lat))+Math.min(...l.map(e=>e.lat)))/2,f=e=>{let{text:l,tooltip:o,type:i="source"}=e;return v.createElement("div",{className:t.circle},v.createElement("span",{className:t.circleText,title:o},v.createElement(d.G,{icon:"realtime"===i?a.lft:a.opg,style:{color:"realtime"===i?"black":"destination"===i?"blue":"green",width:"30px",height:"30px"}})))},_=(e,l,o)=>{if((null===o||void 0===o?void 0:o.length)>1){const i=((e,l,o)=>{const i=new l.LatLngBounds;return o.forEach(e=>{i.extend(new l.LatLng(e.lat,e.lng))}),i})(0,l,o);e.fitBounds(i),((e,l,o)=>{l.event.addDomListenerOnce(e,"idle",()=>{l.event.addDomListener(window,"resize",()=>{e.fitBounds(o)})})})(e,l,i)}};return v.createElement("div",{style:{height:"500px",width:"100%",margin:r.tq?"0":"20px",padding:"0 20px 0 0"}},v.createElement("div",{style:{marginTop:"20px",height:"inherit",width:"inherit"}},v.createElement(i.ZP,{onClick:e=>{},bootstrapURLKeys:{key:"localhost"===window.location.hostname?"":o,language:"en",region:"US"},center:{lat:isNaN(m)?0:+m,lng:isNaN(p)?0:+p},defaultZoom:c,yesIWantToUseGoogleMapApiInternals:!0,onGoogleApiLoaded:e=>{let{map:o,maps:i}=e;return _(o,i,l)}},l.length>0&&l.map((e,l)=>v.createElement(f,{key:l,lat:e.lat,lng:e.lng,text:e.address,tooltip:e.address,type:e.type})),u&&v.createElement(n.tH,{direction:u}))))},c=(e,l)=>{if(""===e||""===l)return;const o=new window.google.maps.DirectionsService;return new s.y(i=>null===o||void 0===o?void 0:o.route({origin:e,destination:l,travelMode:window.google.maps.TravelMode.DRIVING}).then(e=>{i.next(e)}).catch(e=>{i.error(e)}))}},31266:(e,l,o)=>{"use strict";o.d(l,{Z:()=>a});var i=o(1413),t=o(67861),n=o(61058),d=o(49465);const a=e=>{const{series:l,categories:o}=e,[a,r]=(0,t.useState)({series:l}),s=(0,i.Z)((0,i.Z)({},d.NE),{},{xaxis:(0,i.Z)((0,i.Z)({},d.NE),{},{categories:o})});return t.createElement("div",null,t.createElement("div",{id:"chartOne",className:"-ml-5"},t.createElement(n.Z,{options:s,series:a.series,type:"area",height:350})))}},30519:(e,l,o)=>{"use strict";o.d(l,{Z:()=>a});var i=o(1413),t=o(67861),n=o(61058),d=o(49465);const a=e=>{const{series:l,labels:o,title:a="Total"}=e,[r,s]=(0,t.useState)({series:l}),v=(0,i.Z)((0,i.Z)({},d.HR),{},{labels:o,plotOptions:(0,i.Z)((0,i.Z)({},d.HR.plotOptions),{},{pie:(0,i.Z)((0,i.Z)({},d.HR.plotOptions.pie),{},{donut:(0,i.Z)((0,i.Z)({},d.HR.plotOptions.pie.donut),{},{labels:(0,i.Z)((0,i.Z)({},d.HR.plotOptions.pie.donut.labels),{},{total:(0,i.Z)((0,i.Z)({},d.HR.plotOptions.pie.donut.labels.total),{},{label:a})})})})})});return t.createElement("div",{className:"mb-2"},t.createElement("div",{id:"chartThree",className:"mx-auto flex justify-center"},t.createElement(n.Z,{options:v,series:r.series,type:"donut"})))}},84952:(e,l,o)=>{"use strict";o.d(l,{Z:()=>a});var i=o(1413),t=o(67861),n=o(61058),d=o(49465);const a=e=>{const{series:l,categories:o}=e,[a,r]=(0,t.useState)({series:l}),s=(0,i.Z)((0,i.Z)({},d.AM),{},{xaxis:(0,i.Z)((0,i.Z)({},d.AM),{},{categories:o})});return t.createElement("div",null,t.createElement("div",{id:"chartTwo",className:"-ml-5 -mb-9"},t.createElement(n.Z,{options:s,series:a.series,type:"bar",height:350})))}},20089:(e,l,o)=>{"use strict";o.d(l,{Z:()=>r});var i=o(61058),t=o(31266),n=o(84952),d=o(30519),a=(o(43411),o(67861));const r=e=>{const{orientation:l,series:o,labels:r,config:s,title:v,type:u}=e;return a.createElement(a.Fragment,null,"Line"===l&&a.createElement(t.Z,{series:o}),"Column"===l&&a.createElement(n.Z,{series:o}),"Donut"===l&&a.createElement(d.Z,{title:v,series:o,labels:r}),"Custom"===l&&a.createElement("div",{className:"mb-2"},a.createElement("div",{id:"reactApexChart",className:"mx-auto flex justify-center"},a.createElement(i.Z,{options:s,series:o,type:u}))))}},91426:(e,l,o)=>{"use strict";o.d(l,{Z:()=>m});var i=o(87462),t=o(1413),n=o(45987),d=o(47144),a=o.n(d),r=o(88239),s=o(67861),v=o(85692),u=o(64468);const c={host:"OpenSelectWithSearch_host__AREPA",toggleMenuControlsIcons:"OpenSelectWithSearch_toggleMenuControlsIcons__1MKyC",toggleMenuButton:"OpenSelectWithSearch_toggleMenuButton__bFOLO",inputContainer:"OpenSelectWithSearch_inputContainer__1riPP",input:"OpenSelectWithSearch_input__moy3y",menuOverlayList:"OpenSelectWithSearch_menuOverlayList__FgGKF",menuOverlayListItem:"OpenSelectWithSearch_menuOverlayListItem__uRq1S",title:"OpenSelectWithSearch_title__IiTec"},p=["defaultSelectedItem","items","title","id","placeholder","hasMandatoryIndicator","responsiveOnChange","errorMessage","itemType","onChange","onDropDownClosed","focusSelectedMenuItem","className","inputContainerClassName","inputClassName","clearControlsClassName","molclassname","moliclassname","inputStyle","menuOverlayListStyle","menuOverlayListItemStyle","triggerType","isClearable"],m=e=>{const{defaultSelectedItem:l,items:o,title:d,id:m=(null===d||void 0===d?void 0:d.replace(/ /g,"-")),placeholder:f,hasMandatoryIndicator:_,responsiveOnChange:y,errorMessage:h,itemType:g,onChange:b,onDropDownClosed:x,focusSelectedMenuItem:E,className:C,inputContainerClassName:w,inputClassName:M,clearControlsClassName:S,molclassname:k,moliclassname:Z,inputStyle:I,menuOverlayListStyle:N,menuOverlayListItemStyle:T,triggerType:D,isClearable:P}=e,A=(0,n.Z)(e,p),[O,L]=(0,s.useState)(o),[z,R]=(0,s.useState)(!1),U=e=>R(e),F=null!=h,{isOpen:W,getToggleButtonProps:q,getLabelProps:B,getMenuProps:Y,getInputProps:H,getComboboxProps:V,highlightedIndex:j,getItemProps:G,selectedItem:J,openMenu:K,closeMenu:Q,selectItem:X}=(0,r.Kb)({items:O,id:m,defaultSelectedItem:l,stateReducer:(e,l)=>{const{type:i,changes:n}=l;switch(i){case r.Kb.stateChangeTypes.ToggleButtonClick:case r.Kb.stateChangeTypes.InputBlur:return(0,t.Z)((0,t.Z)({},n),{},{inputValue:""});case r.Kb.stateChangeTypes.FunctionOpenMenu:return L(o),(0,t.Z)((0,t.Z)({},n),{},{highlightedIndex:e.selectedItem?o.indexOf(e.selectedItem):-1})}return n},itemToString:e=>{var l;return null!==(l=null===e||void 0===e?void 0:e.label)&&void 0!==l?l:""},onSelectedItemChange:e=>null===b||void 0===b?void 0:b(e.selectedItem),onInputValueChange:e=>{let{inputValue:l}=e;l&&L(o.filter(e=>{var o,i;return null===e||void 0===e||null===(o=e.label)||void 0===o||null===(i=o.toLowerCase())||void 0===i?void 0:i.includes(l.toLowerCase())}))}});(0,s.useEffect)(()=>{y&&W&&X({value:"",label:""})},[W,X]),(0,s.useEffect)(()=>{W&&J&&E&&requestAnimationFrame(()=>{const e=document.querySelector("#".concat(m,"-item-").concat(o.indexOf(J)));null===e||void 0===e||e.scrollIntoView({behavior:"smooth",block:"center"})})},[m,W,o,J]);const $=(0,s.useCallback)(()=>{z&&(null===x||void 0===x||x(J))},[x,J,z]);return(0,s.useEffect)(()=>{W?U(!0):($(),U(!1)),K()},[W,$]),s.createElement("div",(0,i.Z)({className:a()(c.host,C)},A),s.createElement("div",{className:c.title,style:{padding:"10px 0 0 26px"}},d.toUpperCase()),s.createElement(u.fv,(0,i.Z)({},V(),{isActive:W,hasError:F,className:a()(c.inputContainer,w)}),s.createElement(u.II,(0,i.Z)({className:a()(c.input,M),style:I},H({placeholder:f,"aria-invalid":null!=h||void 0,onFocus:()=>{var l;W||K(),null===e||void 0===e||null===(l=e.onFocus)||void 0===l||l.call(e)}}))),P&&(null===J||void 0===J?void 0:J.label)&&s.createElement("div",{className:S,onClick:e=>{e.stopPropagation(),e.preventDefault(),X(null)}},s.createElement(v.KF,{className:c.toggleMenuControlsIcons})),s.createElement(u.LG,(0,i.Z)({triggerType:D,isOpen:W,onClick:()=>W?Q():K()},q()))),s.createElement(u.ai,(0,i.Z)({},Y(),{className:a()(c.menuOverlayList,k),"app-is-visible":W?"true":"false",style:N}),W&&(null===O||void 0===O?void 0:O.map((e,l)=>s.createElement(u.q_,(0,i.Z)({itemType:g,isVisible:!0,key:"".concat(e).concat(l),className:a()(c.menuOverlayListItem,Z),style:T,isHighlighted:j===l},G({item:e,index:l})),e.label,s.createElement("pre",{className:c.currencySymbol},null===e||void 0===e?void 0:e.symbol," "))))),h&&s.createElement(u.Bc,null,h))}},60179:(e,l,o)=>{"use strict";o.d(l,{iA:()=>C,z0:()=>w,zx:()=>M});var i,t,n,d,a,r=o(87462),s=o(30168),v=o(67861),u=o(43745),c=o(49866),p=o(33613),m=o(79602),f=o(66624),_=o(90369),y=o(67861);const h=u.ZP.div(i||(i=(0,s.Z)(["\n\theight: 1rem;\n\tvertical-align: bottom;\n\tdisplay: inline-block;\n\tmargin-right: 0.5rem;\n\tsvg {\n\t\twidth: 100%;\n\t\theight: 100%;\n\t}\n\tcursor: ",";\n"])),e=>{let{isDragging:l}=e;return l?"grabbing":"grab"}),g=e=>y.createElement(h,e,y.createElement("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"grip-vertical",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512"},y.createElement("path",{fill:"currentColor",fillOpacity:"0.1",d:"M96 32H32C14.33 32 0 46.33 0 64v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32V64c0-17.67-14.33-32-32-32zm0 160H32c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32v-64c0-17.67-14.33-32-32-32zm0 160H32c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32v-64c0-17.67-14.33-32-32-32zM288 32h-64c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32V64c0-17.67-14.33-32-32-32zm0 160h-64c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32v-64c0-17.67-14.33-32-32-32zm0 160h-64c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32v-64c0-17.67-14.33-32-32-32z"}))),b=u.ZP.td(t||(t=(0,s.Z)(["\n\tbackground: rgba(127, 207, 250, 0.3);\n"]))),x=u.ZP.td(n||(n=(0,s.Z)(["\n\tbackground: white;\n\t&:first-of-type {\n\t\tmin-width: 20ch;\n\t}\n"]))),E=e=>{let{row:l}=e;const{attributes:o,listeners:i,transform:t,transition:n,setNodeRef:d,isDragging:a}=(0,c.nB)({id:l.original.id}),s={transform:p.ux.Transform.toString(t),transition:n};return y.createElement("tr",(0,r.Z)({ref:d,style:s},l.getRowProps()),a?y.createElement(b,{colSpan:1},"\xa0"):l.cells.map((e,l)=>{if(0===l)return y.createElement(x,(0,r.Z)({key:l},e.getCellProps()),y.createElement(g,(0,r.Z)({},o,i)),y.createElement("span",null,e.render("Cell")))}))};function C(e){let{columns:l,data:o,onhandleDragEnd:i}=e;const[,t]=(0,v.useState)(),n=(0,v.useMemo)(()=>null===o||void 0===o?void 0:o.map(e=>{let{id:l}=e;return l}),[o]),{getTableProps:d,getTableBodyProps:a,rows:r,prepareRow:s}=(0,_.useTable)({columns:l,data:o}),u=(0,m.Dy)((0,m.VT)(m.MA,{}),(0,m.VT)(m.LO,{}),(0,m.VT)(m.Lg,{}));return y.createElement(m.LB,{sensors:u,onDragEnd:function(e){const{active:l,over:d}=e;if(l.id!==d.id){const e=n.indexOf(l.id),t=n.indexOf(d.id),a=(0,c.Rp)(o,e,t);i(a)}t(null)},onDragStart:function(e){t(e.active.id)},onDragCancel:function(){t(null)},collisionDetection:m.pE,modifiers:[f.DL]},y.createElement("table",d(),y.createElement("tbody",a(),y.createElement(c.Fo,{items:n,strategy:c.qw},r.map(e=>(s(e),y.createElement(E,{key:e.original.id,row:e})))))))}const w=u.ZP.div(d||(d=(0,s.Z)(["\n\t\n\toverflow:auto;\n\tpadding: 0rem;\n\ttable {\n\t\tborder-spacing: 0;\n\t\tborder: 0px dashed black;\n\n\t\ttr {\n\t\t\t:last-child {\n\t\t\t\ttd {\n\t\t\t\t\tborder-bottom: 0;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tth,\n\t\ttd {\n\t\t\tmargin: 0;\n\t\t\twidth: 200rem;\n\t\t\tpadding: 0rem;\n\n\t\t\t:last-child {\n\t\t\t\tborder-right: 0;\n\t\t\t}\n\t\t}\n\t}\n"]))),M=u.ZP.div(a||(a=(0,s.Z)(["\n\tmax-height: 100vh; \n\toverflow:auto;\n\tpadding: 0rem;\n\ttable {\n\t\tborder-spacing: 0;\n\t\tborder: 0px dashed black;\n\n\t\ttr {\n\t\t\t:last-child {\n\t\t\t\ttd {\n\t\t\t\t\tborder-bottom: 0;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tth,\n\t\ttd {\n\t\t\tmargin: 0;\n\t\t\twidth: 200rem;\n\t\t\tpadding: 0rem;\n\n\t\t\t:last-child {\n\t\t\t\tborder-right: 0;\n\t\t\t}\n\t\t}\n\t}\n"])))},32562:(e,l,o)=>{"use strict";o.d(l,{Z:()=>N});var i=o(67861),t=o(88425),n=o(71853),d=o(40694);function a(e){let{createCall:l,startHairCheck:o}=e;return i.createElement("div",{className:"home-screen"},i.createElement(d.Z,{clicked:()=>{l().then(e=>{o(e)})},type:"button",title:"Join Call"}))}var r=o(67861);function s(e){let{id:l,isLocal:o}=e;const i=(0,n.ou)(l,"user_name");return r.createElement("div",{className:"username"},i||"Other Participant"," ",o&&"(You)")}var v=o(73500),u=o(67861);function c(e){let{id:l,isScreenShare:o,isLocal:i,isAlone:t}=e;let d=o?"tile-screenshare":"tile-video";return i&&(d+=" self-view",t&&(d+=" alone")),(0,n._)(l).isOff&&(d+=" no-video"),u.createElement("div",{className:v.tq?"containerCssClassesMobile":"containerCssClasses",style:{padding:"20px"}},u.createElement(n.E5,{fit:"cover",automirror:!0,sessionId:l,type:o?"screenVideo":"video"}),!o&&u.createElement(s,{id:l,isLocal:i}))}const p=()=>{console.log("make sure to allow access to your microphone and camera in your browser's permissions"),window.location.reload()};function m(){return i.createElement("div",{className:"call"},i.createElement("div",{className:"info-box get-user-media-error"},i.createElement("h1",null,"Camera or mic blocked"),i.createElement("button",{onClick:p,type:"button"},"Try again"),i.createElement("p",null,i.createElement("a",{href:"https://docs.daily.co/guides/how-daily-works/handling-device-permissions",target:"_blank",rel:"noreferrer"},"Get help"))))}function f(){const[e,l]=(0,i.useState)(!1);(0,n.VU)("camera-error",(0,i.useCallback)(()=>{l(!0)},[]));const{screens:o}=(0,n.N2)(),t=(0,n.OV)({filter:"remote"}),d=(0,n.q5)(),a=t.length<1;return e?i.createElement(m,null):i.createElement("div",{className:"call",style:{display:"flex",flexDirection:v.tq?"column":"row"}},d&&i.createElement(c,{id:d,isLocal:!0,isAlone:a}),t.length>0||o.length>0?i.createElement(i.Fragment,null,t.map(e=>i.createElement(c,{key:e,id:e}))):i.createElement("div",{className:"info-box"},i.createElement("p",null,"Waiting for the other participant")))}function _(){return i.createElement("svg",{"aria-hidden":"true",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5 7.5C3.89543 7.5 3 8.39543 3 9.5V14.5C3 15.6046 3.89543 16.5 5 16.5H13C14.1046 16.5 15 15.6046 15 14.5V9.5C15 8.39543 14.1046 7.5 13 7.5H5ZM16.5 10.9491C16.5 10.6634 16.6221 10.3914 16.8356 10.2017L19.3356 7.97943C19.9805 7.40618 21 7.86399 21 8.72684V15.2732C21 16.136 19.9805 16.5938 19.3356 16.0206L16.8356 13.7983C16.6221 13.6086 16.5 13.3366 16.5 13.0509V10.9491Z",fill:"currentColor"}))}function y(){return i.createElement("svg",{"aria-hidden":"true",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{d:"M20.5303 4.53033C20.8232 4.23744 20.8232 3.76256 20.5303 3.46967C20.2374 3.17678 19.7626 3.17678 19.4697 3.46967L14.6168 8.32252L14.6162 8.32164L6.43781 16.5H6.43934L3.46967 19.4697C3.17678 19.7626 3.17678 20.2374 3.46967 20.5303C3.76256 20.8232 4.23744 20.8232 4.53033 20.5303L8.56066 16.5H13C14.1046 16.5 15 15.6046 15 14.5V10.0607L20.5303 4.53033Z",fill:"#f63135"}),i.createElement("path",{d:"M13.2949 7.52159C13.1987 7.50737 13.1002 7.5 13 7.5H5C3.89543 7.5 3 8.39543 3 9.5V14.5C3 15.3978 3.59155 16.1574 4.40614 16.4104L13.2949 7.52159Z",fill:"#f63135"}),i.createElement("path",{d:"M16.5 10.9491C16.5 10.6634 16.6221 10.3914 16.8356 10.2017L19.3356 7.97943C19.9805 7.40618 21 7.86399 21 8.72684V15.2732C21 16.136 19.9805 16.5938 19.3356 16.0206L16.8356 13.7983C16.6221 13.6086 16.5 13.3366 16.5 13.0509V10.9491Z",fill:"#f63135"}))}function h(){return i.createElement("svg",{"aria-hidden":"true",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 3C10.3431 3 9 4.34315 9 6V12C9 13.6569 10.3431 15 12 15C13.6569 15 15 13.6569 15 12V6C15 4.34315 13.6569 3 12 3ZM7.5 12C7.5 11.5858 7.16421 11.25 6.75 11.25C6.33579 11.25 6 11.5858 6 12C6 13.9175 6.62158 15.4436 7.73826 16.4858C8.67527 17.3603 9.90114 17.8386 11.25 17.9654V20.25C11.25 20.6642 11.5858 21 12 21C12.4142 21 12.75 20.6642 12.75 20.25V17.9654C14.0989 17.8386 15.3247 17.3603 16.2617 16.4858C17.3784 15.4436 18 13.9175 18 12C18 11.5858 17.6642 11.25 17.25 11.25C16.8358 11.25 16.5 11.5858 16.5 12C16.5 13.5825 15.9966 14.6814 15.2383 15.3892C14.4713 16.105 13.3583 16.5 12 16.5C10.6417 16.5 9.52867 16.105 8.76174 15.3892C8.00342 14.6814 7.5 13.5825 7.5 12Z",fill:"currentColor"}))}function g(){return i.createElement("svg",{"aria-hidden":"true",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{d:"M12 3C13.5979 3 14.904 4.24928 14.9949 5.8244L9 11.8193V6C9 4.34315 10.3431 3 12 3Z",fill:"#f63135"}),i.createElement("path",{d:"M15 10.0607L20.5303 4.53033C20.8232 4.23744 20.8232 3.76256 20.5303 3.46967C20.2374 3.17678 19.7626 3.17678 19.4697 3.46967L3.46967 19.4697C3.17678 19.7626 3.17678 20.2374 3.46967 20.5303C3.76256 20.8232 4.23744 20.8232 4.53033 20.5303L8.19557 16.8651C9.05938 17.5005 10.1108 17.8583 11.25 17.9654V20.25C11.25 20.6642 11.5858 21 12 21C12.4142 21 12.75 20.6642 12.75 20.25V17.9654C14.0989 17.8386 15.3247 17.3603 16.2617 16.4858C17.3784 15.4436 18 13.9175 18 12C18 11.5858 17.6642 11.25 17.25 11.25C16.8358 11.25 16.5 11.5858 16.5 12C16.5 13.5825 15.9966 14.6814 15.2383 15.3892C14.4713 16.105 13.3583 16.5 12 16.5C10.919 16.5 9.9933 16.2498 9.27382 15.7868L10.476 14.5846C10.9227 14.8486 11.4436 15 12 15C13.6569 15 15 13.6569 15 12V10.0607Z",fill:"#f63135"}),i.createElement("path",{d:"M7.6111 13.2082C7.53881 12.8415 7.5 12.4394 7.5 12C7.5 11.5858 7.16421 11.25 6.75 11.25C6.33579 11.25 6 11.5858 6 12C6 12.8969 6.13599 13.7082 6.39503 14.4243L7.6111 13.2082Z",fill:"#f63135"}))}function b(){return i.createElement("svg",{"aria-hidden":"true",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{d:"M7 4.5H14C15.3807 4.5 16.5 5.61929 16.5 7V10H15V7C15 6.44772 14.5523 6 14 6H7C6.44772 6 6 6.44772 6 7V17C6 17.5523 6.44772 18 7 18H14C14.5523 18 15 17.5523 15 17V14H16.5V17C16.5 18.3807 15.3807 19.5 14 19.5H7C5.61929 19.5 4.5 18.3807 4.5 17V7C4.5 5.61929 5.61929 4.5 7 4.5Z",fill:"#f63135"}),i.createElement("path",{d:"M19.0303 8.46967C18.7374 8.17678 18.2626 8.17678 17.9697 8.46967C17.6768 8.76256 17.6768 9.23744 17.9697 9.53033L19.6893 11.25H12.75C12.3358 11.25 12 11.5858 12 12C12 12.4142 12.3358 12.75 12.75 12.75H19.6893L17.9697 14.4697C17.6768 14.7626 17.6768 15.2374 17.9697 15.5303C18.2626 15.8232 18.7374 15.8232 19.0303 15.5303L22.0303 12.5303C22.3232 12.2374 22.3232 11.7626 22.0303 11.4697L19.0303 8.46967Z",fill:"#f63135"}))}o(67861);function x(e){let{leaveCall:l}=e;const o=(0,n.VI)(),{isSharingScreen:t,startScreenShare:d,stopScreenShare:a}=(0,n.N2)(),[r,s]=(0,i.useState)(!1),[u,c]=(0,i.useState)(!1),[p,m]=(0,i.useState)(!1),f=(0,n.q5)(),x=(0,n._)(f),E=(0,n.Gg)(f),C=x.isOff,w=E.isOff;(0,n.F3)({onAppMessage:(0,i.useCallback)(()=>{u||m(!0)},[u])});const M=(0,i.useCallback)(()=>{o.setLocalVideo(C)},[o,C]),S=(0,i.useCallback)(()=>{o.setLocalAudio(w)},[o,w]);return i.createElement("div",{className:"controls",style:{flexDirection:v.tq?"column":"row"}},i.createElement("button",{onClick:M,type:"button",style:{width:v.tq?"100%":""}},C?i.createElement(y,null):i.createElement(_,null),C?"Turn camera on":"Turn camera off"),i.createElement("button",{onClick:S,type:"button",style:{width:v.tq?"100%":""}},w?i.createElement(g,null):i.createElement(h,null),w?"Unmute mic":"Mute mic"),i.createElement("button",{onClick:l,type:"button",style:{width:v.tq?"100%":""}},i.createElement(b,null)," ","Leave call"))}function E(e){var l,o,t;let{joinCall:a,cancelCall:r}=e;const s=(0,n.q5)(),u=(0,n.ou)(s,"user_name"),{currentCam:c,currentMic:p,currentSpeaker:f,microphones:_,speakers:y,cameras:h,setMicrophone:g,setCamera:b,setSpeaker:x}=(0,n.Ls)(),E=(0,n.VI)(),[C,w]=(0,i.useState)(u),[M,S]=(0,i.useState)(!1);(0,i.useEffect)(()=>{w(u)},[u]),(0,n.VU)("camera-error",(0,i.useCallback)(()=>{S(!0)},[]));const k=e=>{e.preventDefault(),a(C.trim())};return M?i.createElement(m,null):i.createElement("form",{className:"hair-check",onSubmit:k},i.createElement("div",{style:{display:"flex",flexDirection:"row",alignContent:"center",alignItems:"center",justifyContent:"space-between",justifyItems:"center",width:"100%"}},i.createElement(d.Z,{title:"Back",clicked:r,type:"button",style:{width:"100px"}}),i.createElement(d.Z,{light:!0,title:"Join",clicked:k,type:"button",style:{width:"100px"}})),i.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"center"}},s&&i.createElement(n.E5,{fit:"cover",style:{width:v.tq?"100%":"80%",height:v.tq?"50vh":"80vh"},sessionId:s,mirror:!0})),i.createElement("div",null,i.createElement("label",{htmlFor:"username"},"Your name:"),i.createElement("input",{name:"username",type:"text",placeholder:"Enter username",onChange:e=>{w(e.target.value),E.setUserName(e.target.value)},value:C||" ",style:{border:"1px dashed gray"}})),i.createElement("div",null,i.createElement("label",{htmlFor:"micOptions"},"Microphone:"),i.createElement("select",{name:"micOptions",id:"micSelect",onChange:e=>{g(e.target.value)},value:null===p||void 0===p||null===(l=p.device)||void 0===l?void 0:l.deviceId,style:{border:"1px dashed gray"}},_.map(e=>i.createElement("option",{key:"mic-".concat(e.device.deviceId),value:e.device.deviceId},e.device.label)))),i.createElement("div",null,i.createElement("label",{htmlFor:"speakersOptions"},"Speakers:"),i.createElement("select",{name:"speakersOptions",id:"speakersSelect",onChange:e=>{x(e.target.value)},value:null===f||void 0===f||null===(o=f.device)||void 0===o?void 0:o.deviceId,style:{border:"1px dashed gray"}},y.map(e=>i.createElement("option",{key:"speaker-".concat(e.device.deviceId),value:e.device.deviceId},e.device.label)))),i.createElement("div",null,i.createElement("label",{htmlFor:"cameraOptions"},"Camera:"),i.createElement("select",{name:"cameraOptions",id:"cameraSelect",onChange:e=>{b(e.target.value)},value:null===c||void 0===c||null===(t=c.device)||void 0===t?void 0:t.deviceId,style:{border:"1px dashed gray"}},h.map(e=>i.createElement("option",{key:"cam-".concat(e.device.deviceId),value:e.device.deviceId},e.device.label)))))}var C=o(49465),w=o(30994);const M="STATE_IDLE",S="STATE_JOINING",k="STATE_JOINED",Z="STATE_ERROR",I="STATE_HAIRCHECK",N=e=>{const{payload:l}=e,[o,d]=(0,i.useState)(M),[r,s]=(0,i.useState)(null),[v,u]=(0,i.useState)(null),[c,p]=(0,i.useState)(!1),m=(0,i.useCallback)(()=>(d("STATE_CREATING"),w.ns.videos.checkRoom(l).then(e=>"not-found"===(null===e||void 0===e?void 0:e.error)?w.ns.videos.createRoom(l).then(e=>e.url).catch(e=>{s(null),d(M),p(!0)}):e.url).catch(()=>{s(null),d(M),p(!0)})),[]),_=(0,i.useCallback)(async e=>{const l=t.ZP.createCallObject();s(e),u(l),d(I),await l.preAuth({url:e}),await l.startCamera()},[]),y=(0,i.useCallback)(e=>{v.join({url:r,userName:e})},[v,r]),h=(0,i.useCallback)(()=>{v&&(o===Z?v.destroy().then(()=>{s(null),u(null),d(M)}):(d("STATE_LEAVING"),v.leave()))},[v,o]);(0,i.useEffect)(()=>{const e=(0,C.bi)();e&&_(e)},[_]),(0,i.useEffect)(()=>{const e=(0,C.eu)(r);e!==window.location.href&&window.history.replaceState(null,null,e)},[r]),(0,i.useEffect)(()=>{if(!v)return;const e=["joined-meeting","left-meeting","error","camera-error"];function l(){switch(v.meetingState()){case"joined-meeting":d(k);break;case"left-meeting":v.destroy().then(()=>{s(null),u(null),d(M)});break;case"error":d(Z)}}return l(),e.forEach(e=>v.on(e,l)),()=>{e.forEach(e=>v.off(e,l))}},[v]);const g=!c&&[S,k,Z].includes(o),b=!c&&o===I;return i.createElement("div",{className:"app"},c?i.createElement("div",{className:"api-error"},i.createElement("h1",null,"Error"),i.createElement("p",null,"Room could not be created. For more information, see the"," ",i.createElement("a",{href:"https://github.com/daily-demos/custom-video-daily-react-hooks#readme"},"readme")," ")):b||g?i.createElement(n.Eu,{callObject:v},b?i.createElement(E,{joinCall:y,cancelCall:h}):i.createElement("div",{className:"call"},i.createElement(f,null),i.createElement(x,{leaveCall:h}),i.createElement(n.Th,null))):i.createElement(a,{createCall:m,startHairCheck:_}))}},59401:(e,l,o)=>{"use strict";o.d(l,{sM:()=>a});var i=o(1413),t=o(92957);const n="SET_SELECTED_COMPONENT",[d,a]=(0,t.Z)((e,l)=>{const{action:o,value:t}=l;return o===n?(0,i.Z)((0,i.Z)({},e),{},{selectedComponent:t}):(0,i.Z)({},e)},{selectedComponent:[]})},94667:(e,l,o)=>{"use strict";o.d(l,{hd:()=>r});var i=o(1413),t=(o(56031),o(95256)),n=o(88827),d=o(30994),a=o(96332);const r=e=>{const{sessionSettings:{last_access_token:l}}=n.h.getState().authReducer,o={analyze:e},r=(0,i.Z)({},d.ns.search.geminiAI(l)),s=(0,i.Z)((0,i.Z)({},r),{},{data:o,handlerEnabled:!0,forwardAllErrors:!0});return new t.y(e=>(0,a.b)(s).then(l=>{null!==l&&void 0!==l&&l.data&&(e.next(l.data),e.complete())}).catch(l=>{e.error(l)}))}},143:()=>{},48963:(e,l,o)=>{"use strict";o.d(l,{Z:()=>i});const i={selectAndMultiselectHost:"AccordionModule_selectAndMultiselectHost__H5+ac",selectAndMultiselectHostTiles:"AccordionModule_selectAndMultiselectHostTiles__zy8A7",section:"AccordionModule_section__WDGnE",accordionContainer:"AccordionModule_accordionContainer__xiMyc",active:"AccordionModule_active__a1e+z",title:"AccordionModule_title__K6M+I",titleII:"AccordionModule_titleII__F1dBf",customTitleInput:"AccordionModule_customTitleInput__DlCL7",icon:"AccordionModule_icon__7T+T6",loaderContainer:"AccordionModule_loaderContainer__fKA1C",host:"AccordionModule_host__TqxiS",iconsContainer:"AccordionModule_iconsContainer__gYCG-",rotate:"AccordionModule_rotate__ojdmf",content:"AccordionModule_content__N8Nff",fieldTypeInput:"AccordionModule_fieldTypeInput__Mql2D",fieldTypeID:"AccordionModule_fieldTypeID__02C5P",fieldMapInput:"AccordionModule_fieldMapInput__iOK6F",fieldTypeDate:"AccordionModule_fieldTypeDate__sfpwa",labelInput:"AccordionModule_labelInput__djkp5",fieldRowContainer:"AccordionModule_fieldRowContainer__eD864",accordion:"AccordionModule_accordion__dL-hC",emulatedFlexGap:"AccordionModule_emulatedFlexGap__UKu5e",regularAccordion:"AccordionModule_regularAccordion__UnZ1B",singleInputContainer:"AccordionModule_singleInputContainer__7L-68",dateInputContainer:"AccordionModule_dateInputContainer__WIoWU",inputContainerClassName:"AccordionModule_inputContainerClassName__ZLNQe",phoneIInput:"AccordionModule_phoneIInput__bFeGI",currencySelectContainer:"AccordionModule_currencySelectContainer__J5uBg",currencySymbol:"AccordionModule_currencySymbol__jg7Fb",currencySelectComponent:"AccordionModule_currencySelectComponent__vxRYx",currencySelectMenuOverlayList:"AccordionModule_currencySelectMenuOverlayList__suVOI",currencySelectMenuOverlayListItem:"AccordionModule_currencySelectMenuOverlayListItem__F4q4l",currencySearchInput:"AccordionModule_currencySearchInput__EStZB",currencyClearControlsClassName:"AccordionModule_currencyClearControlsClassName__9qj4b",currencyInputContainerClassName:"AccordionModule_currencyInputContainerClassName__gSheY",currencyInput:"AccordionModule_currencyInput__pD6+T",peopleContainer:"AccordionModule_peopleContainer__VbsS1",peopleBooleansOptions:"AccordionModule_peopleBooleansOptions__b1ikO",peoplePositionSelectContainer:"AccordionModule_peoplePositionSelectContainer__KETnD",peoplePositionsSelect:"AccordionModule_peoplePositionsSelect__8SVZX",peoplePositionsSelectInput:"AccordionModule_peoplePositionsSelectInput__Zf0FV",peoplePositionsSelectMenuOverlay:"AccordionModule_peoplePositionsSelectMenuOverlay__G6S96",peoplePositionsSelectMenuOverlayItem:"AccordionModule_peoplePositionsSelectMenuOverlayItem__l7tLe",tileCards:"AccordionModule_tileCards__VEH-p",unfocusableWrapper:"AccordionModule_unfocusableWrapper__ySvhc",menuOverlayList:"AccordionModule_menuOverlayList__53cF+",menuOverlayListItem:"AccordionModule_menuOverlayListItem__52ph5",menuOverlayListItemInput:"AccordionModule_menuOverlayListItemInput__D1qcy",menuOverlayListItemInputContainerClassName:"AccordionModule_menuOverlayListItemInputContainerClassName__jn-Os",openSelectWithSearchHost:"AccordionModule_openSelectWithSearchHost__S8Y7m",openSelectWithSearch:"AccordionModule_openSelectWithSearch__xb15e",dropdownClassContainer:"AccordionModule_dropdownClassContainer__opaaF",dropdownHeightClassContainer:"AccordionModule_dropdownHeightClassContainer__alywJ",fieldTypeTextarea:"AccordionModule_fieldTypeTextarea__wJxdM",fullLengthTextarea:"AccordionModule_fullLengthTextarea__DKcwY",filtersContainer:"AccordionModule_filtersContainer__kaLD+",dropdownSelectComponent:"AccordionModule_dropdownSelectComponent__IfPlb",itemsTable:"AccordionModule_itemsTable__kWpNG",customMenuOverlayListItemCheckboxCheckedMark:"AccordionModule_customMenuOverlayListItemCheckboxCheckedMark__b3B5p",customMenuOverlayListItemNormalCheckedMark:"AccordionModule_customMenuOverlayListItemNormalCheckedMark__tu2Bv",checkbox:"AccordionModule_checkbox__V5Lcp",itemsContainer:"AccordionModule_itemsContainer__bCyAe",listContainer:"AccordionModule_listContainer__RLbAr",tableHostMobile:"AccordionModule_tableHostMobile__AbPfF",tableHostSimple:"AccordionModule_tableHostSimple__JS9c+",action:"AccordionModule_action__N6BJM",mobileTable_ii:"AccordionModule_mobileTable_ii__jIJWm",centerDiv:"AccordionModule_centerDiv__jUmVO",calendar:"AccordionModule_calendar__v3+FG",actionsContainer:"AccordionModule_actionsContainer__Q+UIe",wallet:"AccordionModule_wallet__9uxJi",swiperslide:"AccordionModule_swiperslide__kTurl","checkbox-wrapper-21":"AccordionModule_checkbox-wrapper-21__8wOyr",control:"AccordionModule_control__xQxfW",control__indicator:"AccordionModule_control__indicator__ygU2Z","control--checkbox":"AccordionModule_control--checkbox__7QZcQ",dashboardCard:"AccordionModule_dashboardCard__4lxG5",avatarContentContainer:"AccordionModule_avatarContentContainer__YeEYQ",avatarUrlImg:"AccordionModule_avatarUrlImg__ImMyI",itemsContainer_ii:"AccordionModule_itemsContainer_ii__BNh89",timer:"AccordionModule_timer__7JIP9"}},84878:(e,l,o)=>{"use strict";o.d(l,{Z:()=>i});const i={App:"MapPin_App__ttDFM",circle:"MapPin_circle__XymBg",circleText:"MapPin_circleText__wjHtA",fieldTypeInput:"MapPin_fieldTypeInput__qK41G",selectText:"MapPin_selectText__OZhje",inputField:"MapPin_inputField__OXU+c",industryMOLI:"MapPin_industryMOLI__PLA7r",multiselectComponent:"MapPin_multiselectComponent__03G3Z",dropdownClassContainer:"MapPin_dropdownClassContainer__5871O"}},55382:()=>{},72095:()=>{},61219:()=>{}}]);
//# sourceMappingURL=3710.88fa910d.chunk.js.map