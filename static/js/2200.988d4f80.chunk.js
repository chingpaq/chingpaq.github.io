"use strict";(self.webpackChunkflowhero=self.webpackChunkflowhero||[]).push([[2200],{82200:(e,t,n)=>{n.r(t),n.d(t,{default:()=>H});var o=n(1413),l=n(67861);const i="BeginModule_headerContainer__6l-gP",d="BeginModule_modalLabelHeader__EVne0",s="BeginModule_modalLabel__WZVSY",r="BeginModule_modalButtons__bAjdy",a="BeginModule_importArea__2hmJ7",u="BeginModule_importText__YhRY+";var p=n(39518),c=n(10103),v=n(11577),m=n(65019),h=n(88550),f=n(93389);const g=function(e,t){void 0===e&&(e=!0);var n=(0,l.useCallback)(function(n){if("function"!==typeof e||e())return n.preventDefault(),t&&(n.returnValue=t),t},[e,t]);(0,l.useEffect)(function(){if(e)return function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];e&&e.addEventListener&&e.addEventListener.apply(e,t)}(window,"beforeunload",n),function(){return function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];e&&e.removeEventListener&&e.removeEventListener.apply(e,t)}(window,"beforeunload",n)}},[e,n])};var x,y,w,b,E,_,k,S,M=n(88827),Z=n(88374),C=n(32422),P=n(14170),q=n(73500),I=n(1542),U=n(6073),A=n(43984),z=n(75105),O=n(34665),L=n(23280),D=n(59401),N=n(29118),B=n(30168),R=n(43745);const T=R.ZP.div(x||(x=(0,B.Z)(["\n\twidth: 100%;\n\t\n\tmargin: 0 auto;\n\tpadding: 0 16px;\n\tpadding 0 8% 0 8%;\n"]))),Y=R.ZP.div(y||(y=(0,B.Z)(["\n\tdisplay: flex;\n\tjustify-content: space-between;\n\tposition: relative;\n\tmargin-top: 40px;\n\t:before {\n\t\tcontent: '';\n\t\tposition: absolute;\n\t\tbackground: var(--app-color-gray-lighter);\n\t\theight: 4px;\n\t\twidth: 100%;\n\t\ttop: 50%;\n\t\ttransform: translateY(-50%);\n\t\topacity: 0.3;\n\t\tleft: 0;\n\t}\n\t:after {\n\t\tcontent: '';\n\t\tposition: absolute;\n\t\tbackground: #4a154b;\n\t\theight: 4px;\n\t\twidth: ",";\n\t\ttop: 50%;\n\t\ttransition: 0.4s ease;\n\t\ttransform: translateY(-50%);\n\t\tleft: 0;\n\t}\n"])),e=>{let{width:t}=e;return t}),j=R.ZP.div(w||(w=(0,B.Z)(["\n\tposition: relative;\n\tz-index: 1;\n"]))),W=R.ZP.div(b||(b=(0,B.Z)(["\n\twidth: 40px;\n\theight: 40px;\n\tborder-radius: 50%;\n\tbackground-color: #ffffff;\n\tborder: 3px solid ",";\n\ttransition: 0.4s ease;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n"])),e=>{let{step:t}=e;return"completed"===t?"black":"var(--app-color-gray-dark)"}),G=R.ZP.span(E||(E=(0,B.Z)(["\n\tfont-size: 19px;\n\tcolor: var(--app-color-gray-dark);\n\t@media (max-width: 600px) {\n\t\tfont-size: 16px;\n\t}\n"]))),V=R.ZP.div(_||(_=(0,B.Z)(["\n\tposition: absolute;\n\twidth: 300px;\n\ttop: 66px;\n\tleft: 50%;\n\ttransform: translate(-50%, -50%);\n"]))),$=R.ZP.span(k||(k=(0,B.Z)(["\n\tfont-size: 10px;\n\tcolor: var(--app-color-gray-dark);\n\n\t@media (max-width: 800px) {\n\t\tfont-size: 16px;\n\t}\n\t@media (max-width: 600px) {\n\t\tfont-size: 8px;\n\t}\n"]))),F=R.ZP.div(S||(S=(0,B.Z)(["\n\tfont-size: 26px;\n\tfont-weight: 600;\n\tcolor: #4a154b;\n\t-ms-transform: scaleX(-1) rotate(-46deg); /* IE 9 */\n\t-webkit-transform: scaleX(-1) rotate(-46deg); /* Chrome, Safari, Opera */\n\ttransform: scaleX(-1) rotate(-46deg);\n"]))),J=e=>{const{steps:t,activeStep:n=1}=e,o=t.length,i="".concat(100/(o-1)*(n-1),"%");return l.createElement(T,null,l.createElement(Y,{width:i},t.map(e=>{let{rank:t,name:o}=e;return l.createElement(j,{key:t-1},l.createElement(W,{step:n>=t-1?"completed":"incomplete"},n>t-1?l.createElement(F,null,"L"):l.createElement(G,null,t-1)),l.createElement(V,null,l.createElement($,{key:t-1},o)))})))};var Q=n(52902),X=n(12075);n(85692);const H=(0,p.$j)(e=>{const{begunModule:t,companyProcesses:n,cart:o}=e.flowReducer,{user:l}=e.sessionReducer;return{begunModule:t,user:l,companyProcesses:n,cart:o}},e=>({onSetAuthenticatedUser:t=>e((0,A.IF)(t))}))(e=>{var t,n,p,x,y,w,b,E,_,k,S,A,B,R,T,Y,j,W,G,V,$,F;const{begunModule:H,user:K,companyProcesses:ee,cart:te}=e,[ne,oe]=(0,l.useState)(""),[le,ie]=(0,l.useState)(!1),[de,se]=(0,l.useState)(!1),[re,ae]=(0,h.pQ)(),[ue,pe]=(0,l.useState)(!1),[ce,ve]=(0,l.useState)(!1),{moduleID:me,paymentID:he}=(0,L.UO)(),fe=(0,L.TH)(),ge=(0,l.useCallback)(e=>{e.forEach(e=>{var t;if(-1===["xls","xlsx","csv"].indexOf(null===e||void 0===e||null===(t=e.name)||void 0===t?void 0:t.toString().split(".")[1]))return;const n=new FileReader;n.onabort=()=>{},n.onerror=()=>{},n.onload=e=>{},n.readAsBinaryString(e),n.onloadend=t=>{var n,o;ve(!0),(0,I._)(e,null===H||void 0===H||null===(n=H.processModule)||void 0===n||null===(o=n.module)||void 0===o?void 0:o.id).subscribe({next:()=>{ve(!1),(0,U.OQ)(!1,!0).pipe((0,c.q)(1)).subscribe({})},complete:()=>{ve(!1)},error:e=>{ve(!1)}})}})},[null===H||void 0===H||null===(t=H.processModule)||void 0===t?void 0:t.module]),{getRootProps:xe,getInputProps:ye,isDragActive:we}=(0,N.uI)({onDrop:ge}),be=(0,L.s0)();(0,l.useEffect)(()=>{var e,t;if(void 0===(null===H||void 0===H||null===(e=H.processModule)||void 0===e?void 0:e.isUpdating)){let e=ee.find(e=>e.id===H.processModule.id);if(e&&e.steps.length>0){var n;const t=(0,o.Z)((0,o.Z)((0,o.Z)({},H.processModule),e),{},{completeSteps:e.steps,steps:e.steps.filter(t=>{var n,o,l,i,d,s;return void 0==(null===t||void 0===t||null===(n=t.options)||void 0===n?void 0:n.showStepAll)||1==(null===t||void 0===t||null===(o=t.options)||void 0===o?void 0:o.showStepAll)||0==(null===t||void 0===t||null===(l=t.options)||void 0===l?void 0:l.showStepAll)&&(null===t||void 0===t||null===(i=t.options)||void 0===i||null===(d=i.showOnly)||void 0===d?void 0:d.filter(e=>{var t;return(null===K||void 0===K||null===(t=K.positions)||void 0===t?void 0:t.map(e=>e.id).indexOf(e))>-1}).length)>0||(null===t||void 0===t||null===(s=t.options)||void 0===s?void 0:s.showStepAuthor)&&(null===K||void 0===K?void 0:K.id)===(null===e||void 0===e?void 0:e.user_id)}).map((e,t)=>(0,o.Z)((0,o.Z)({},e),{},{rank:t+1}))});M.h.dispatch((0,Z.q4)(t)),ae({action:h._U.setCurrentStep,value:t.steps[null!==(n=H.processModule.stepIndex)&&void 0!==n?n:0]})}else(0,f.zJ)(H.processModule.id).pipe((0,v.P)()).subscribe({next:e=>{var t;const n=(0,o.Z)((0,o.Z)((0,o.Z)({},H.processModule),e),{},{completeSteps:e.steps,steps:e.steps.filter(t=>{var n,o,l,i,d,s;return void 0==(null===t||void 0===t||null===(n=t.options)||void 0===n?void 0:n.showStepAll)||1==(null===t||void 0===t||null===(o=t.options)||void 0===o?void 0:o.showStepAll)||0==(null===t||void 0===t||null===(l=t.options)||void 0===l?void 0:l.showStepAll)&&(null===t||void 0===t||null===(i=t.options)||void 0===i||null===(d=i.showOnly)||void 0===d?void 0:d.filter(e=>K.positions.map(e=>e.id).indexOf(e)>-1).length)>0||(null===t||void 0===t||null===(s=t.options)||void 0===s?void 0:s.showStepAuthor)&&(null===K||void 0===K?void 0:K.id)===(null===e||void 0===e?void 0:e.user_id)})});M.h.dispatch((0,Z.q4)(n)),ae({action:h._U.setCurrentStep,value:n.steps[null!==(t=H.processModule.stepIndex)&&void 0!==t?t:0]})},error:e=>{}})}else if(!0===(null===H||void 0===H||null===(t=H.processModule)||void 0===t?void 0:t.isUpdating)){var l;ae({action:h._U.setCurrentStep,value:H.processModule.steps[null!==(l=H.processModule.stepIndex)&&void 0!==l?l:0]})}if(me){const e=new URLSearchParams(null===fe||void 0===fe?void 0:fe.search);oe({key:e.get("key"),value:e.get("value")})}},[]);return g(!0,"Are you sure want to leave this "),l.createElement(m.LN,null,l.createElement(D.sM,null,l.createElement("div",{className:i},l.createElement("div",null),!q.tq&&(null===re||void 0===re||null===(n=re.currentStep)||void 0===n?void 0:n.rank)>1&&(null===(p=H.processModule.steps)||void 0===p?void 0:p.length)>2&&l.createElement("div",{className:d,style:{width:(null===(x=H.processModule.steps)||void 0===x?void 0:x.length)>4?"100%":"50%",paddingBottom:"20px"}},l.createElement(J,{steps:null===(y=H.processModule)||void 0===y||null===(w=y.steps)||void 0===w?void 0:w.slice(1),activeStep:null!==(b=(null===re||void 0===re||null===(E=re.currentStep)||void 0===E?void 0:E.rank)-1)&&void 0!==b?b:0})),l.createElement("div",{style:{display:"flex"}},l.createElement(P.j3,{permissions:[P.po.blueprints.process.create]},!0===(null===H||void 0===H||null===(_=H.processModule)||void 0===_||null===(k=_.module)||void 0===k||null===(S=k.options)||void 0===S?void 0:S.allowImport)&&1==(null===re||void 0===re||null===(A=re.currentStep)||void 0===A?void 0:A.rank)&&l.createElement(P.zx,{titleStyle:{fontWeight:"normal"},title:q.tq?"":ue?"Hide Import":"Import",clear:q.tq,icon:!ue&&q.tq&&l.createElement(X.G,{icon:Q.cf$,style:{margin:"0px",width:"20px",height:"20px"}}),style:{marginLeft:"0px",display:q.tq?"none":""},clicked:()=>pe(!ue)})),((null===K||void 0===K||null===(B=K.pinned_modules)||void 0===B?void 0:B.find(e=>e.id===H.processModule.module_id))||0===(null===K||void 0===K||null===(R=K.pinned_modules)||void 0===R?void 0:R.length))&&l.createElement(P.zx,{titleStyle:{fontWeight:"normal"},title:q.tq?"":(null===K||void 0===K||null===(T=K.pinned_modules)||void 0===T?void 0:T.filter(e=>e.id===H.processModule.module_id).length)>0?"Unpin":"Pin",clear:q.tq,icon:q.tq&&l.createElement(X.G,{icon:(null===K||void 0===K||null===(Y=K.pinned_modules)||void 0===Y?void 0:Y.filter(e=>e.id===H.processModule.module_id).length)>0?Q.KUK:Q.Lad,style:{margin:"0 0px",width:"20px",height:"20px"}}),loading:de,style:{marginLeft:"0px",display:(null===re||void 0===re||null===(j=re.currentStep)||void 0===j?void 0:j.rank)>1||q.tq?"none":""},clicked:()=>{var e;re.items=[],se(!0),(null===K||void 0===K||null===(e=K.pinned_modules)||void 0===e?void 0:e.filter(e=>e.id===H.processModule.module_id).length)>0?(0,I.Ev)(H.processModule.module_id).pipe((0,v.P)()).subscribe({next:()=>{(0,z.IC)().pipe((0,v.P)()).subscribe({next:e=>{O.Fc.saveUser((0,o.Z)({},e)),se(!1)}})}}):(0,I.tq)(H.processModule.module_id).pipe((0,v.P)()).subscribe({next:()=>{(0,z.IC)().pipe((0,v.P)()).subscribe({next:e=>{O.Fc.saveUser((0,o.Z)({},e)),se(!1),M.h.dispatch((0,Z.IW)(!0)),be("/dashboard")}})}})}}),l.createElement(P.zx,{titleStyle:{fontWeight:"normal"},title:!q.tq&&"Close",clear:q.tq,icon:q.tq&&l.createElement(X.G,{icon:Q.QQm,style:{margin:"0 0px",width:"30px",height:"30px"}}),style:{marginLeft:"0px",display:(null===re||void 0===re||null===(W=re.currentStep)||void 0===W?void 0:W.rank)>1?"none":""},clicked:()=>{var e,t,n;(setTimeout(()=>{M.h.dispatch((0,Z.IW)(!0)),M.h.dispatch((0,Z.Xc)({show:!1,message:""}))},10),(null===re||void 0===re||null===(e=re.items)||void 0===e?void 0:e.length)>0)?!0!==(null===(t=H.processModule.module)||void 0===t||null===(n=t.options)||void 0===n?void 0:n.saveCart)||!1!==H.processModule.isUpdating&&void 0!==H.processModule.isUpdating?(re.items=[],be("/dashboard"),M.h.dispatch((0,Z.q4)(""))):ie(!0):(be("/dashboard"),M.h.dispatch((0,Z.q4)("")))}}))),ue&&l.createElement("div",{className:a},l.createElement("div",xe(),we?l.createElement("div",{className:u},l.createElement(X.G,{icon:Q.cf$,style:{backgroundColor:"black",margin:"0 10px",width:"20px",height:"20px"}}),l.createElement("p",null,"Drop the files here ...")):l.createElement("div",{className:u},!ce&&l.createElement(X.G,{icon:Q.cf$,style:{color:"black",margin:"0 10px",width:"20px",height:"20px"}}),l.createElement("p",null,ce?l.createElement(P.$j,{size:80,type:"ThreeDots"}):"Click or drag your file here to begin import. (ex .csv)")))),l.createElement(C.ZP,{navigateTo:ne,isEditing:!1,paymentID:he}),l.createElement(P.U7,{id:"pending-component-modal",blured:!0,scrollable:!1,isOpen:le,shadowedContainerStyle:{width:q.tq?"100%":"30%"}},l.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"}},l.createElement("p",{className:d},"Are you working on a transaction?"),l.createElement("div",{className:s},"You can press ".concat((null===te||void 0===te||null===(G=te.items)||void 0===G?void 0:G.length)>0?"'Update Cart'":"'Add to Cart'"," to save any transaction you are working on without submitting it. You can resume it by clicking the cart icon on the menu bar. ").concat((null===te||void 0===te||null===(V=te.items)||void 0===V?void 0:V.length)>0?"Pressing 'Empty Cart' will clear previous contents of your cart, and exit":"")),l.createElement("div",{className:r},l.createElement(P.zx,{title:"Close only",style:{width:"120px"},clicked:()=>{ae({action:h._U.clearOngoingTransaction}),window.history.back(),M.h.dispatch((0,Z.q4)(""))}}),l.createElement(P.zx,{title:(null===te||void 0===te||null===($=te.items)||void 0===$?void 0:$.length)>0?"Update Cart":"Add to Cart",light:!0,style:{width:"130px"},clicked:()=>{var e,t,n,l;re.components.filter(e=>e.selected_fields.filter(e=>"ID"===e.data_type_name).forEach(e=>e.value=void 0)),re.newStepComponents.filter(e=>e.selected_fields.filter(e=>"ID"===e.data_type_name).forEach(e=>e.value=void 0)),(null===H||void 0===H||null===(e=H.processModule)||void 0===e||null===(t=e.steps)||void 0===t?void 0:t.length)>0&&(null===H||void 0===H||null===(n=H.processModule)||void 0===n||null===(l=n.steps)||void 0===l||l.filter(e=>{var t;return null===e||void 0===e||null===(t=e.component_blueprints)||void 0===t?void 0:t.filter(e=>e.selected_fields.filter(e=>"ID"===e.data_type_name).filter(e=>e.value=void 0))}));const i=JSON.parse(JSON.stringify({components:re.components,newStepComponents:re.newStepComponents,items:re.items,begunModule:(0,o.Z)((0,o.Z)({},H.processModule),{},{stepIndex:1})}));M.h.dispatch((0,Z.RV)(i)),ae({action:h._U.clearOngoingTransaction}),window.history.back(),M.h.dispatch((0,Z.q4)(""))}}),l.createElement(P.zx,{title:"Empty Cart",light:!0,style:{width:"120px",display:(null===te||void 0===te||null===(F=te.items)||void 0===F?void 0:F.length)>0?"":"none"},clicked:()=>{M.h.dispatch((0,Z.RV)({})),ae({action:h._U.clearOngoingTransaction}),window.history.back(),M.h.dispatch((0,Z.q4)(""))}}))))))})}}]);
//# sourceMappingURL=2200.988d4f80.chunk.js.map