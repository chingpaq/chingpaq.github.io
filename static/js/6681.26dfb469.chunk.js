"use strict";(self.webpackChunkflowhero=self.webpackChunkflowhero||[]).push([[6681],{96681:function(e,t,l){l.r(t),l.d(t,{default:function(){return I}});var n=l(29439),i=l(50981),o=l.n(i),a=(l(34665),l(38826)),r=l(84658),d=l(2464),s=l(59141),c=l(67861),u=l(39518),p=l(23280),m=(l(18316),l(79492)),v=l.n(m),f=l(85692),g=l(88827),y=l(88374),x=l(71982),h=l(57417),E=l(89293),b=l(14170),C=l(40694),w=l(67861),S=l(66918),I=(0,u.$j)((function(e){var t=e.authReducer.sessionSettings;return{onBoardingCompleted:e.flowReducer.onBoardingCompleted,sessionSettings:t}}),(function(e){return{onSetOnBoardingVisible:function(t){return e((0,x.DJ)(t))},onSetOnBoardingComplete:function(t){return e((0,y.fj)(t))},onToggleModalVisibility:function(t){return e((0,x.$6)(t))}}}))((function(e){var t,l=(0,p.s0)(),i=((0,u.I0)(),(0,p.UO)().hash),m=(0,c.useRef)(),x=(0,c.useRef)(),I=(0,c.useState)(""),Z=(0,n.Z)(I,2),k=Z[0],A=Z[1],D=(0,c.useState)(""),N=(0,n.Z)(D,2),j=N[0],z=N[1],F=(0,c.useState)(""),H=(0,n.Z)(F,2),T=H[0],B=H[1],P=(0,c.useState)(""),Y=(0,n.Z)(P,2),M=Y[0],O=Y[1],R=(0,c.useState)(""),_=(0,n.Z)(R,2),L=_[0],V=_[1],q=(0,c.useState)("Asia/Hong_Kong"),K=(0,n.Z)(q,2),U=K[0],W=K[1],$=(0,c.useState)(""),J=(0,n.Z)($,2),X=J[0],G=J[1],Q=(0,c.useState)(!1),ee=(0,n.Z)(Q,2),te=ee[0],le=ee[1],ne=(0,c.useState)(!1),ie=(0,n.Z)(ne,2),oe=ie[0],ae=ie[1],re=(0,c.useState)(""),de=(0,n.Z)(re,2),se=de[0],ce=de[1],ue=(0,c.useState)(!1),pe=(0,n.Z)(ue,2),me=pe[0],ve=pe[1],fe=(0,c.useState)(!0),ge=(0,n.Z)(fe,2),ye=ge[0],xe=ge[1],he=e.onToggleModalVisibility,Ee=e.onSetOnBoardingComplete,be=e.authenticated;(0,c.useEffect)((function(){if(Ee(!1),he({}),(null===i||void 0===i?void 0:i.length)>0){if(be)return xe(!1),void ce("You are currently logged in as another user. Please logout this user and accept the invitation again");var e=(0,h.s7)(i).subscribe({next:function(e){var t,l,n,i,o;ae(!1),V(null!==(t=null!==(l=null===e||void 0===e||null===(n=e.user)||void 0===n?void 0:n.first_name)&&void 0!==l?l:"  "+(null===e||void 0===e||null===(i=e.user)||void 0===i?void 0:i.last_name))&&void 0!==t?t:" "),A(null===e||void 0===e?void 0:e.email),O(null!==(o=null===e||void 0===e?void 0:e.id)&&void 0!==o?o:"")},error:function(e){V("Error"),xe(!1),ce("Not a valid invitation, could have expired or incorrect. Please contact your admin")}});return function(){(0,E.zK)(e)}}}),[i]);var Ce=(0,c.useCallback)((function(e){var t,n;e.preventDefault(),e.stopPropagation(),m.current.validateAll(),console.log("error",null===x||void 0===x||null===(t=x.current)||void 0===t||null===(n=t.context)||void 0===n?void 0:n._errors),ae(!0);var i={email:k,password:X,username:T,invitation_id:M,timezone:U,phone:j,validity:"".concat(o()().add(3,"days").format("YYYY-MM-DD HH:mm:ss"))};(0,h.f0)(i).subscribe({next:function(){ae(!1),g.h.dispatch((0,y.Xc)({noTimeout:!0,show:!0,message:"You have successfully registered your account. Close this message and enter your credentials when the login page appears",color:"var(--app-color-blue)",spinner:!1,bottom:!0,action:function(){(0,h.iC)(),l("/login")}}))},error:function(e){var t,l,n,i,o,a,r,d,s,c,u,p,m,v,f,g,y;if((null===e||void 0===e||null===(t=e.data)||void 0===t||null===(l=t.errors)||void 0===l||null===(n=l.email)||void 0===n?void 0:n.length)>0)ce(null===e||void 0===e||null===(g=e.data)||void 0===g||null===(y=g.errors)||void 0===y?void 0:y.email[0]);else if((null===e||void 0===e||null===(i=e.data)||void 0===i||null===(o=i.errors)||void 0===o||null===(a=o.username)||void 0===a?void 0:a.length)>0){var x,h;ce(null===e||void 0===e||null===(x=e.data)||void 0===x||null===(h=x.errors)||void 0===h?void 0:h.username[0])}else if((null===e||void 0===e||null===(r=e.data)||void 0===r||null===(d=r.errors)||void 0===d||null===(s=d.password)||void 0===s?void 0:s.length)>0){var E,b;ce(null===e||void 0===e||null===(E=e.data)||void 0===E||null===(b=E.errors)||void 0===b?void 0:b.password[0])}else if((null===e||void 0===e||null===(c=e.data)||void 0===c||null===(u=c.errors)||void 0===u||null===(p=u.timezone)||void 0===p?void 0:p.length)>0){var C,w;ce(null===e||void 0===e||null===(C=e.data)||void 0===C||null===(w=C.errors)||void 0===w?void 0:w.timezone[0])}else if((null===e||void 0===e||null===(m=e.data)||void 0===m||null===(v=m.errors)||void 0===v||null===(f=v.invitation_id)||void 0===f?void 0:f.length)>0){var S,I;ce(null===e||void 0===e||null===(S=e.data)||void 0===S||null===(I=S.errors)||void 0===I?void 0:I.invitation_id[0])}else ce("InvitationAccepted");ae(!1)},complete:function(){}})}),[k,X,M,U,T]),we=function(){e.onSetOnBoardingVisible(!1),e.onSetOnBoardingComplete(!0),l("/help-center")},Se=(0,d.Z)({"@global":{".MuiOutlinedInput-root":{"& fieldset":{borderColor:"var(--app-color-gray-lighter)"},"&:hover fieldset":{borderColor:"var(--app-color-gray-lighter)!important"},"&.Mui-focused fieldset":{borderColor:"var(--app-color-gray-lighter)!important"}}}})((function(){return null}));return w.createElement("div",{className:"main-container",style:{position:"relative",backgroundColor:"white",display:""===L?"none":"flex",flex:1,width:"100%",height:"100vh",justifyContent:"space-evenly",alignItems:"stretch",overflowY:"auto"}},w.createElement("div",{className:"first-container"},w.createElement("div",{style:{display:"flex",width:"100%",flexDirection:"column",justifyContent:"flex-start",alignItems:"center"}},ye?w.createElement("div",{style:{alignSelf:"flex-start",display:"flex",flexDirection:"column",justifyContent:"space-evenly",alignItems:"center"}},w.createElement("div",{style:{alignSelf:"flex-start",display:"flex",flex:0,flexDirection:"column",justifyContent:"space-evenly",alignItems:"center"}},w.createElement("h1",{style:{padding:0,color:"#4A4A4A",fontSize:"28px",fontWeight:500,letterSpacing:0,lineHeight:"40px"}},"Superadmin"===L?"The request to create your company/or user account has been approved by ".concat(E.iC):"You've been invited by ","Superadmin"!==L&&w.createElement("span",null,w.createElement("i",null,L)," to ".concat(E.iC)))),"Superadmin"===L&&w.createElement("div",{style:{display:"flex",width:"100%",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",margin:"30px 0 0 0 "}},w.createElement("p",{style:{fontFamily:"var(--app-text-main-font)",fontSize:"1em",lineHeight:"1.5em",color:"var(--app-color-gray-light)"}},"Please provide the details below to finalize the company")),w.createElement("div",{style:{paddingTop:"30px",alignSelf:"flex-start"}},w.createElement(v(),{ref:m},w.createElement("p",{className:"labelTextStyle"},"Account Email:"),w.createElement(s.Z,{id:"my-input",type:"text",variant:"outlined",name:"name",className:"input-style",placeholder:"Company Email",value:k,onChange:function(e){var t=e.target.value;A(t)}}),null!==se&&void 0!==se&&se.email?w.createElement("div",{className:"form-group"},w.createElement("div",{style:{color:"#721c24",backgroundColor:"#f8d7da",borderColor:"#f5c6cb"}},null===se||void 0===se?void 0:se.email)):null,w.createElement("br",null),w.createElement("br",null),w.createElement(s.Z,{id:"my-input",type:"text",variant:"outlined",name:"username",className:"input-style",placeholder:"Desired Username",value:T,onChange:function(e){B(e.target.value)}}),null!==se&&void 0!==se&&se.username?w.createElement("div",{className:"form-group"},w.createElement("div",{style:{color:"#721c24",backgroundColor:"#f8d7da",borderColor:"#f5c6cb"}},null===se||void 0===se?void 0:se.username)):null,w.createElement("br",null),w.createElement("br",null),w.createElement(s.Z,{id:"my-input",type:"text",variant:"outlined",name:"mobile",className:"input-style",placeholder:"Mobile Number",value:j,onChange:function(e){z(e.target.value)}}),w.createElement("br",null),w.createElement("br",null),w.createElement("p",{className:"labelTextStyle"},"Account Password:"),w.createElement("label",{style:{display:"inline-flex",alignItems:"center"}},w.createElement(Se,null),w.createElement(a.Z,{id:"my-input",className:"input-style",type:te?"text":"password",name:"password",placeholder:"Password",value:X,onChange:function(e){var t=e.target.value;G(t)},endAdornment:w.createElement(r.Z,{className:"showHideButton",onClick:function(){return le(!te)},position:"end"},te?"Hide":"Show")})),null!==se&&void 0!==se&&se.password?w.createElement("div",{className:"form-group"},w.createElement("div",{className:"alert alert-danger",role:"alert"},null===se||void 0===se?void 0:se.password)):null,w.createElement("br",null),w.createElement("br",null),w.createElement("p",{className:"labelTextStyle"},"Timezone:"),w.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"stretch",width:"100%"}},w.createElement(b.Ld,{items:E.LY,defaultSelectedItem:S.find(S.propEq("value",U))(E.LY),triggerType:"chevron",placeholder:"Select timezone...",onChange:function(e){W(null===e||void 0===e?void 0:e.value)}})),w.createElement("br",null),w.createElement("br",null),w.createElement("div",{style:{display:"flex",width:"100%",flex:0,justifyContent:"flex-start",alignItems:"center",maxHeight:"30px"}},w.createElement(C.Z,{disabled:oe,loading:oe,clicked:Ce,title:"Super"===L?"Create Company":"Accept Invitation",style:{margin:"0",display:(null===T||void 0===T?void 0:T.length)>6?"":"none"}})),se&&w.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-evenly",alignItems:"center",fontSize:"1em",width:"90%",marginTop:"30px",borderRadius:"3px",color:"#721c24",backgroundColor:"#f8d7da",borderColor:"#f5c6cb",padding:"2px"},role:"alert"},"InvitationAccepted"===se?w.createElement("div",null,"Already accepted the invitation, click ",w.createElement("a",{href:"/"},"here")," to login."):se))),w.createElement("div",{style:{display:"flex",width:"100%",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",margin:"30px 0 0 0 "}},w.createElement("p",null,"".concat("Superadmin"===L?"By creating the company":"By accepting",", you agree with ").concat(E.iC)," ",w.createElement("a",{href:"https://www.flowhero.app/#/legal"},"Terms and Conditions")," and ",w.createElement("a",{href:"https://www.flowhero.app/#/legal"},"Privacy Policy")))):w.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-evenly",alignItems:"center",fontSize:"1em",width:"90%",marginTop:"30px",borderRadius:"3px",color:null!==se&&void 0!==se&&se.success?"gray":"#721c24",backgroundColor:null!==se&&void 0!==se&&se.success?"transparent":"#f8d7da",borderColor:"#f5c6cb",padding:"2px"},role:"alert"},null!==(t=null===se||void 0===se?void 0:se.success)&&void 0!==t?t:se))),w.createElement("div",{className:"second-container",onClick:function(e){e.preventDefault(),e.stopPropagation(),ve(!1)}}),me&&w.createElement("div",{style:{width:"300px",flex:1,flexWrap:"wrap",padding:"12px 30px 0px 10px",zIndex:101,position:"absolute",bottom:"0px",right:"50px",display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center",borderRadius:"8px 8px 0 0",backgroundColor:" #FFFFFF",boxShadow:"0 0 40px 0 rgba(0, 0, 0, 0.1)"}},w.createElement("div",{style:{display:"flex",flex:1,flexDirection:"row",justifyContent:"space-evenly",alignItems:"center",height:"54px",width:"149px"}},w.createElement("img",{src:f.Py,style:{height:"24px",width:"24px"},alt:"need-help-icon"}),w.createElement("p",{style:{color:" #4A4A4A",fontFamily:" var(--app-text-main-font)",fontSize:"16px",lineHeight:"22px"}},"Need help?")),w.createElement("div",{style:{display:" flex",flex:1,flexDirection:"row",justifyContent:"space-evenly",alignItems:"center"}},w.createElement("p",{style:{textAlign:"left",color:" #4A4A4A",fontFamily:" var(--app-text-main-font)",fontSize:"16px",lineHeight:"24px"}},"Before requesting to speak to one of our colleagues, we encourage you to explore our ",w.createElement("span",{onClick:we,style:{textDecoration:"underline",cursor:"pointer"}},"Help Center")," to find your solution.")),w.createElement("div",{style:{margin:"20px 10px",display:"flex",width:"100%",flex:0,justifyContent:"center",alignItems:"center",maxHeight:"30px"}},w.createElement(C.Z,{disabled:oe,loading:oe,clicked:we,title:"Help Center",style:{margin:"10px",width:"100%"}})),w.createElement("div",{style:{margin:"20px 10px",display:"flex",width:"100%",flex:0,justifyContent:"center",alignItems:"center",maxHeight:"30px"}},w.createElement(C.Z,{disabled:oe,loading:oe,clicked:function(){alert("Live Chat")},title:"Live Chat",style:{margin:"10px",width:"100%",backgroundColor:"#FFFFFF"},titleStyle:{color:"var(--app-color-gray-light)",fontSize:"16px"}}))))}))}}]);
//# sourceMappingURL=6681.26dfb469.chunk.js.map