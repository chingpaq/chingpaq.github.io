"use strict";(self.webpackChunkflowhero=self.webpackChunkflowhero||[]).push([[6681],{96681:(e,t,l)=>{l.r(t),l.d(t,{default:()=>S});var n=l(50981),a=l.n(n),i=(l(34665),l(38826)),o=l(84658),r=l(2464),s=l(59141),d=l(67861),c=l(39518),u=l(23280),p=(l(18316),l(79492)),m=l.n(p),v=l(85692),f=l(88827),g=l(88374),y=l(71982),x=l(57417),h=l(49465),E=l(48929),b=l(40694),C=l(67861);const w=l(66918),S=(0,c.$j)(e=>{const{sessionSettings:t}=e.authReducer,{onBoardingCompleted:l}=e.flowReducer;return{onBoardingCompleted:l,sessionSettings:t}},e=>({onSetOnBoardingVisible:t=>e((0,y.DJ)(t)),onSetOnBoardingComplete:t=>e((0,g.fj)(t)),onToggleModalVisibility:t=>e((0,y.$6)(t))}))(e=>{var t;const l=(0,u.s0)(),{hash:n}=((0,c.I0)(),(0,u.UO)()),p=(0,d.useRef)(),[y,S]=((0,d.useRef)(),(0,d.useState)("")),[I,k]=(0,d.useState)(""),[A,D]=(0,d.useState)(""),[N,j]=(0,d.useState)(""),[z,F]=(0,d.useState)(""),[H,T]=(0,d.useState)("Asia/Hong_Kong"),[B,P]=(0,d.useState)(""),[Y,Z]=(0,d.useState)(!1),[M,O]=(0,d.useState)(!1),[R,_]=(0,d.useState)(""),[L,V]=(0,d.useState)(!1),[q,K]=(0,d.useState)(!0),{onToggleModalVisibility:U,onSetOnBoardingComplete:W,authenticated:$}=e;(0,d.useEffect)(()=>{if(W(!1),U({}),!((null===n||void 0===n?void 0:n.length)>0))return;if($)return K(!1),void _("You are currently logged in as another user. Please logout this user and accept the invitation again");const e=(0,x.s7)(n).subscribe({next:e=>{var t,l,n,a,i;O(!1),F(null!==(t=null!==(l=null===e||void 0===e||null===(n=e.user)||void 0===n?void 0:n.first_name)&&void 0!==l?l:"  "+(null===e||void 0===e||null===(a=e.user)||void 0===a?void 0:a.last_name))&&void 0!==t?t:" "),S(null===e||void 0===e?void 0:e.email),j(null!==(i=null===e||void 0===e?void 0:e.id)&&void 0!==i?i:"")},error:e=>{F("Error"),K(!1),_("Not a valid invitation, could have expired or incorrect. Please contact your admin")}});return()=>{(0,h.zK)(e)}},[n]);const J=(0,d.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),p.current.validateAll(),O(!0);const t={email:y,password:B,username:A,invitation_id:N,timezone:H,phone:I,validity:"".concat(a()().add(30,"days").format("YYYY-MM-DD HH:mm:ss"))};(0,x.f0)(t).subscribe({next:()=>{O(!1),f.h.dispatch((0,g.Xc)({noTimeout:!0,show:!0,message:"You have successfully registered your account. Close this message and enter your credentials when the login page appears",color:"var(--app-color-blue)",spinner:!1,bottom:!0,action:()=>{(0,x.iC)(),l("/login")}}))},error:e=>{var t,l,n,a,i,o,r,s,d,c,u,p,m,v,f,g,y;if((null===e||void 0===e||null===(t=e.data)||void 0===t||null===(l=t.errors)||void 0===l||null===(n=l.email)||void 0===n?void 0:n.length)>0)_(null===e||void 0===e||null===(g=e.data)||void 0===g||null===(y=g.errors)||void 0===y?void 0:y.email[0]);else if((null===e||void 0===e||null===(a=e.data)||void 0===a||null===(i=a.errors)||void 0===i||null===(o=i.username)||void 0===o?void 0:o.length)>0){var x,h;_(null===e||void 0===e||null===(x=e.data)||void 0===x||null===(h=x.errors)||void 0===h?void 0:h.username[0])}else if((null===e||void 0===e||null===(r=e.data)||void 0===r||null===(s=r.errors)||void 0===s||null===(d=s.password)||void 0===d?void 0:d.length)>0){var E,b;_(null===e||void 0===e||null===(E=e.data)||void 0===E||null===(b=E.errors)||void 0===b?void 0:b.password[0])}else if((null===e||void 0===e||null===(c=e.data)||void 0===c||null===(u=c.errors)||void 0===u||null===(p=u.timezone)||void 0===p?void 0:p.length)>0){var C,w;_(null===e||void 0===e||null===(C=e.data)||void 0===C||null===(w=C.errors)||void 0===w?void 0:w.timezone[0])}else if((null===e||void 0===e||null===(m=e.data)||void 0===m||null===(v=m.errors)||void 0===v||null===(f=v.invitation_id)||void 0===f?void 0:f.length)>0){var S,I;_(null===e||void 0===e||null===(S=e.data)||void 0===S||null===(I=S.errors)||void 0===I?void 0:I.invitation_id[0])}else _("InvitationAccepted");O(!1)},complete:()=>{}})},[y,B,N,H,A]),X=()=>{e.onSetOnBoardingVisible(!1),e.onSetOnBoardingComplete(!0),l("/help-center")},G=(0,r.Z)({"@global":{".MuiOutlinedInput-root":{"& fieldset":{borderColor:"var(--app-color-gray-lighter)"},"&:hover fieldset":{borderColor:"var(--app-color-gray-lighter)!important"},"&.Mui-focused fieldset":{borderColor:"var(--app-color-gray-lighter)!important"}}}})(()=>null);return C.createElement("div",{className:"main-container",style:{position:"relative",backgroundColor:"white",display:""===z?"none":"flex",flex:1,width:"100%",height:"100vh",justifyContent:"space-evenly",alignItems:"stretch",overflowY:"auto"}},C.createElement("div",{className:"first-container"},C.createElement("div",{style:{display:"flex",width:"100%",flexDirection:"column",justifyContent:"flex-start",alignItems:"center"}},q?C.createElement("div",{style:{alignSelf:"flex-start",display:"flex",flexDirection:"column",justifyContent:"space-evenly",alignItems:"center"}},C.createElement("div",{style:{alignSelf:"flex-start",display:"flex",flex:0,flexDirection:"column",justifyContent:"space-evenly",alignItems:"center"}},C.createElement("h1",{style:{padding:0,color:"#4A4A4A",fontSize:"28px",fontWeight:500,letterSpacing:0,lineHeight:"40px"}},"Superadmin"===z?"The request to create your company/or user account has been approved by ".concat(h.iC):"You've been invited by ","Superadmin"!==z&&C.createElement("span",null,C.createElement("i",null,z)," to ".concat(h.iC)))),"Superadmin"===z&&C.createElement("div",{style:{display:"flex",width:"100%",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",margin:"30px 0 0 0 "}},C.createElement("p",{style:{fontFamily:"var(--app-text-main-font)",fontSize:"1em",lineHeight:"1.5em",color:"var(--app-color-gray-light)"}},"Please provide the details below to finalize the company")),C.createElement("div",{style:{paddingTop:"30px",alignSelf:"flex-start"}},C.createElement(m(),{ref:p},C.createElement("p",{className:"labelTextStyle"},"Account Email:"),C.createElement(s.Z,{id:"my-input",type:"text",variant:"outlined",name:"name",className:"input-style",placeholder:"Company Email",value:y,onChange:e=>{const t=e.target.value;S(t)}}),null!==R&&void 0!==R&&R.email?C.createElement("div",{className:"form-group"},C.createElement("div",{style:{color:"#721c24",backgroundColor:"#f8d7da",borderColor:"#f5c6cb"}},null===R||void 0===R?void 0:R.email)):null,C.createElement("br",null),C.createElement("br",null),C.createElement(s.Z,{id:"my-input",type:"text",variant:"outlined",name:"username",className:"input-style",placeholder:"Desired Username",value:A,onChange:e=>{D(e.target.value)}}),null!==R&&void 0!==R&&R.username?C.createElement("div",{className:"form-group"},C.createElement("div",{style:{color:"#721c24",backgroundColor:"#f8d7da",borderColor:"#f5c6cb"}},null===R||void 0===R?void 0:R.username)):null,C.createElement("br",null),C.createElement("br",null),C.createElement(s.Z,{id:"my-input",type:"text",variant:"outlined",name:"mobile",className:"input-style",placeholder:"Mobile Number",value:I,onChange:e=>{k(e.target.value)}}),C.createElement("br",null),C.createElement("br",null),C.createElement("p",{className:"labelTextStyle"},"Account Password:"),C.createElement("label",{style:{display:"inline-flex",alignItems:"center"}},C.createElement(G,null),C.createElement(i.Z,{id:"my-input",className:"input-style",type:Y?"text":"password",name:"password",placeholder:"Password",value:B,onChange:e=>{const t=e.target.value;P(t)},endAdornment:C.createElement(o.Z,{className:"showHideButton",onClick:()=>Z(!Y),position:"end"},Y?"Hide":"Show")})),null!==R&&void 0!==R&&R.password?C.createElement("div",{className:"form-group"},C.createElement("div",{className:"alert alert-danger",role:"alert"},null===R||void 0===R?void 0:R.password)):null,C.createElement("br",null),C.createElement("br",null),C.createElement("p",{className:"labelTextStyle"},"Timezone:"),C.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"stretch",width:"100%"}},C.createElement(E.Ld,{items:h.LY,defaultSelectedItem:w.find(w.propEq("value",H))(h.LY),triggerType:"chevron",placeholder:"Select timezone...",onChange:e=>{T(null===e||void 0===e?void 0:e.value)}})),C.createElement("br",null),C.createElement("br",null),C.createElement("div",{style:{display:"flex",width:"100%",flex:0,justifyContent:"flex-start",alignItems:"center",maxHeight:"30px"}},C.createElement(b.Z,{disabled:M,loading:M,clicked:J,title:"Super"===z?"Create Company":"Accept Invitation",style:{margin:"0",display:(null===A||void 0===A?void 0:A.length)>6?"":"none"}})),R&&C.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-evenly",alignItems:"center",fontSize:"1em",width:"90%",marginTop:"30px",borderRadius:"3px",color:"#721c24",backgroundColor:"#f8d7da",borderColor:"#f5c6cb",padding:"2px"},role:"alert"},"InvitationAccepted"===R?C.createElement("div",null,"Already accepted the invitation, click ",C.createElement("a",{href:"/"},"here")," to login."):R))),C.createElement("div",{style:{display:"flex",width:"100%",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",margin:"30px 0 0 0 "}},C.createElement("p",null,"".concat("Superadmin"===z?"By creating the company":"By accepting",", you agree with ").concat(h.iC)," ",C.createElement("a",{href:"https://www.flowhero.app/#/legal"},"Terms and Conditions")," and ",C.createElement("a",{href:"https://www.flowhero.app/#/legal"},"Privacy Policy")))):C.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-evenly",alignItems:"center",fontSize:"1em",width:"90%",marginTop:"30px",borderRadius:"3px",color:null!==R&&void 0!==R&&R.success?"gray":"#721c24",backgroundColor:null!==R&&void 0!==R&&R.success?"transparent":"#f8d7da",borderColor:"#f5c6cb",padding:"2px"},role:"alert"},null!==(t=null===R||void 0===R?void 0:R.success)&&void 0!==t?t:R))),C.createElement("div",{className:"second-container",onClick:e=>{e.preventDefault(),e.stopPropagation(),V(!1)}}),L&&C.createElement("div",{style:{width:"300px",flex:1,flexWrap:"wrap",padding:"12px 30px 0px 10px",zIndex:101,position:"absolute",bottom:"0px",right:"50px",display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center",borderRadius:"8px 8px 0 0",backgroundColor:" #FFFFFF",boxShadow:"0 0 40px 0 rgba(0, 0, 0, 0.1)"}},C.createElement("div",{style:{display:"flex",flex:1,flexDirection:"row",justifyContent:"space-evenly",alignItems:"center",height:"54px",width:"149px"}},C.createElement("img",{src:v.Py,style:{height:"24px",width:"24px"},alt:"need-help-icon"}),C.createElement("p",{style:{color:" #4A4A4A",fontFamily:" var(--app-text-main-font)",fontSize:"16px",lineHeight:"22px"}},"Need help?")),C.createElement("div",{style:{display:" flex",flex:1,flexDirection:"row",justifyContent:"space-evenly",alignItems:"center"}},C.createElement("p",{style:{textAlign:"left",color:" #4A4A4A",fontFamily:" var(--app-text-main-font)",fontSize:"16px",lineHeight:"24px"}},"Before requesting to speak to one of our colleagues, we encourage you to explore our ",C.createElement("span",{onClick:X,style:{textDecoration:"underline",cursor:"pointer"}},"Help Center")," to find your solution.")),C.createElement("div",{style:{margin:"20px 10px",display:"flex",width:"100%",flex:0,justifyContent:"center",alignItems:"center",maxHeight:"30px"}},C.createElement(b.Z,{disabled:M,loading:M,clicked:X,title:"Help Center",style:{margin:"10px",width:"100%"}})),C.createElement("div",{style:{margin:"20px 10px",display:"flex",width:"100%",flex:0,justifyContent:"center",alignItems:"center",maxHeight:"30px"}},C.createElement(b.Z,{disabled:M,loading:M,clicked:()=>{alert("Live Chat")},title:"Live Chat",style:{margin:"10px",width:"100%",backgroundColor:"#FFFFFF"},titleStyle:{color:"var(--app-color-gray-light)",fontSize:"16px"}}))))})}}]);
//# sourceMappingURL=6681.ab2efd36.chunk.js.map