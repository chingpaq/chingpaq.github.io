(self.webpackChunkflowhero=self.webpackChunkflowhero||[]).push([[3573],{48630:(e,l,o)=>{"use strict";o.d(l,{X:()=>g});var i=o(87462),t=o(45987),n=o(67861),d=o(64468);const a="Checkbox_host__MtZZg",r="Checkbox_checkmarkContainer__7m7hu",v="Checkbox_input__fK+n4",s="Checkbox_checkboxControl__TezWV",u="Checkbox_checkboxControlIcon__5qzo9",c="Checkbox_checkboxLabel__lacXH",p="Checkbox_checkboxDisabled__Qo2Ag";var m=o(85692),f=o(47144),_=o.n(f);const y=["checkboxLabel","hasMandatoryIndicator","disabled","errormessage"];const g=(0,n.forwardRef)((e,l)=>{const{checkboxLabel:o,hasMandatoryIndicator:f,disabled:g,errormessage:h}=e,b=(0,t.Z)(e,y);return n.createElement(d.__,{hasMandatoryIndicator:f,className:_()(a,{[p]:g}),"app-checkbox-error":h&&(null===h||void 0===h?void 0:h.length)>0?"error":"false"},n.createElement("span",{className:_()(r)},n.createElement("input",(0,i.Z)({ref:l,className:_()(v),type:"checkbox",disabled:g},b)),n.createElement("span",{className:_()(s)},n.createElement(m.MK,{className:_()(u)}))),n.createElement("span",{className:_()(c)},o))})},41131:(e,l,o)=>{"use strict";o.d(l,{C6:()=>Te,ij:()=>Pe,_G:()=>Ae,HR:()=>ze,ZP:()=>De,ev:()=>Oe});var i=o(1413),t=o(67861);const n="CustomTemplateModule_section__S+Ga8",d="CustomTemplateModule_accordionContainer__Eooxm",a="CustomTemplateModule_active__x9Y6U",r="CustomTemplateModule_content__3auE3",v="CustomTemplateModule_itemsDetail__9ldd4";var s=o(47144),u=o.n(s),c=o(27436),p=o(39518),m=o(49465),f=o(88550),_=o(51330),y=o(73500),g=o(46415),h=o(48929);const b={mobilepopup:"CustomSportsClub_mobilepopup__efO50",mobilepopupopen:"CustomSportsClub_mobilepopupopen__R9HZu",mobilePopupActionContainer:"CustomSportsClub_mobilePopupActionContainer__9+kzH",filtersContainer:"CustomSportsClub_filtersContainer__GwQ7c",centerDiv:"CustomSportsClub_centerDiv__oTWCq",fieldInput:"CustomSportsClub_fieldInput__ZHED4"};var x=o(6073),E=o(12308),C=o(11577),w=o(85692),M=o(12075),S=o(52902),k=o(32588),Z=o(50981),I=o.n(Z),N=o(88827),D=o(88374),T=o(93389),P=o(58535),O=o(53692),A=o(63864),z=o(27658),L=o(9825),R=o.n(L);const U=(0,p.$j)(e=>{const{authenticatedUser:{position:l},authenticatedUser:o}=e.authReducer,{user:i}=e.sessionReducer,{begunModule:t,allModules:n,companyData:d,companyUsersArray:a,companyPositionsArray:r,components:v,companyProcesses:s}=e.flowReducer;return{begunModule:t,allModules:n,companyData:d,companyUsersArray:a,companyPositionsArray:r,components:v,authenticatedUser:o,user:i,companyProcesses:s}})(e=>{var l,o,n,d,a,r,v,s,u,c,p,_,Z,P,A,z,L,R,U,F,W,Y,B,H,j,V,G,J,Q;const{begunModule:K,allModules:X,companyData:$,companyUsersArray:ee,goto:le,components:oe,authenticatedUser:ie,user:te,companyProcesses:ne,template:de}=e,{title:ae,selectedComponent:re,setSelectedComponent:ve,step:se}=e,[ue,ce]=(0,t.useState)(!1),[pe,me]=(0,t.useState)((null===(l=re.shared_users)||void 0===l||null===(o=l.filter(e=>(null===e||void 0===e?void 0:e.id)===(null===ie||void 0===ie?void 0:ie.id)))||void 0===o?void 0:o.length)>0),[fe,_e]=(0,t.useState)((null===(n=re.component_items)||void 0===n||null===(d=n.filter(e=>{var l,o;return(null===e||void 0===e?void 0:e.value)===(null===ie||void 0===ie?void 0:ie.id)&&"Join"===(null===e||void 0===e?void 0:e.type)&&(null===e||void 0===e?void 0:e.item_code)===(null===K||void 0===K||null===(l=K.processModule)||void 0===l||null===(o=l.module)||void 0===o?void 0:o.id)}))||void 0===d?void 0:d.length)>0),[ye,ge]=(0,t.useState)(!1),[he,be]=(0,t.useState)(!1),[xe,Ee]=(0,t.useState)(!1),[Ce,we]=(0,t.useState)(!1),[Me,Se]=(0,f.pQ)(),ke=(null===ie||void 0===ie?void 0:ie.id)===(null===re||void 0===re||null===(a=re.created_by)||void 0===a?void 0:a.id),Ze=1===(null===re||void 0===re||null===(r=re.component_items)||void 0===r?void 0:r.filter(e=>"Moderator"===e.type&&(null===e||void 0===e?void 0:e.value)===(null===ie||void 0===ie?void 0:ie.id)).length),Ie=ke||Ze,Ne=null!==(v=re.component_fields.find(e=>"Private"===e.field_name))&&void 0!==v&&v,De=null!==(s=null===(u=re.component_fields.find(e=>"My Community"===e.field_name))||void 0===u?void 0:u.value)&&void 0!==s?s:"Metro Manila",Te=null===(c=re.component_fields.find(e=>"Club Description"===e.field_name))||void 0===c?void 0:c.value,Pe="Yes"===(null===(p=re.component_fields.find(e=>"Basketball"===e.field_name))||void 0===p?void 0:p.value)?"Basketball":"Yes"===(null===(_=re.component_fields.find(e=>"Pickleball"===e.field_name))||void 0===_?void 0:_.value)?"Pickleball":"All Sports",Oe=null===X||void 0===X?void 0:X.find(e=>"Meets"===(null===e||void 0===e?void 0:e.name));return t.createElement("div",null,t.createElement("div",{style:{fontFamily:"var(--app-text-mobile-font)",fontSize:y.tq?"18px":"20px",fontWeight:"bold",marginTop:y.tq?"":"50px"}},null===ae||void 0===ae?void 0:ae.toUpperCase()),t.createElement("div",{style:{fontFamily:"var(--app-text-mobile-font)",fontSize:"12px",marginTop:"5px"}},"".concat(Ne?"Private":"Public"," \u25e6 ").concat(Pe," \u25e6 ").concat(De)),Te&&t.createElement("div",{style:{fontFamily:"var(--app-text-mobile-font)",fontSize:"16px",margin:"40px 0"}},"".concat(Te)),pe&&!Ie&&t.createElement("p",{style:{fontFamily:"var(--app-text-mobile-font)",fontSize:"14px",fontWeight:"bold",marginTop:"30px"}},"You are a member of this club"),Ie&&t.createElement("p",{style:{fontFamily:"var(--app-text-mobile-font)",fontSize:"14px",fontWeight:"bold",marginTop:"30px"}},Ze?"You are a moderator of this club":"You are the admin of this club"),t.createElement(g.mQ,{style:{width:"100%",fontSize:y.tq?"16px":"20px",marginTop:"20px"}},t.createElement(g.td,{style:{fontFamily:"var(--app-text-mobile-font)",fontSsize:y.tq?"14px":"16px"}},Ie&&t.createElement(g.OK,null,"DETAILS"),t.createElement(g.OK,null,"MEMBERS"),Oe&&t.createElement(g.OK,null,"MEETS")),Ie&&t.createElement(g.x4,{id:"DETAILS"},t.createElement("div",{style:{width:"100%",minHeight:"50vh",overflow:"auto"}},e.children)),t.createElement(g.x4,{id:"MEMBERS"},t.createElement("div",{style:{width:"100%",minHeight:"80vh",overflow:"auto",ppadding:y.tq?"":"0 30%"}},t.createElement("div",{className:b.centeredDiv,style:{justifyContent:"left",width:y.tq?"inherit":"100%",fontSize:"14px",marginTop:"20px"}},t.createElement("div",{style:{fontFamily:"var(--app-text-main-font)",fontWeight:"bold",color:"var(--app-color-gray-dark)",paddingLeft:"5px"}},"Club Admin"),t.createElement("div",{className:b.filtersContainer},t.createElement(k.Z,{simple:!0,photo:null!==(Z=null===re||void 0===re||null===(P=re.created_by)||void 0===P?void 0:P.photo)&&void 0!==Z?Z:"https://s3-symbol-logo.tradingview.com/logo-yazilim--600.png",email:"Founded club: ".concat(I()(new Date(re.created_date)).format("DD MMM YYYY")),position:null!==(A=null===ie||void 0===ie||null===(z=ie.options)||void 0===z?void 0:z.info)&&void 0!==A?A:"",firstName:t.createElement("div",{style:{fontWeight:"bold"}},"".concat(null===re||void 0===re||null===(L=re.created_by)||void 0===L?void 0:L.first_name," ").concat(null===re||void 0===re||null===(R=re.created_by)||void 0===R?void 0:R.last_name)),cardClicked:()=>{},width:"100%"}))),(null===re||void 0===re||null===(U=re.shared_users)||void 0===U?void 0:U.length)>0&&t.createElement(t.Fragment,null,t.createElement("p",{style:{fontSize:"14px",fontFamily:"var(--app-text-main-font)",fontWeight:"bold",color:"var(--app-color-gray-dark)",paddingLeft:"5px"}},"Members ( ".concat(null===re||void 0===re||null===(F=re.shared_users)||void 0===F?void 0:F.length," )")),t.createElement(E.default,{className:b.sharesTable,withColumns:!1,modern:!0,columns:["User","Photo","Bio","Pay"],list:null===re||void 0===re||null===(W=re.shared_users)||void 0===W?void 0:W.map(e=>{var l;const o=ee.find(l=>l.id===e.id),n=null===re||void 0===re||null===(l=re.component_items)||void 0===l?void 0:l.find(e=>"Moderator"===e.type&&(null===e||void 0===e?void 0:e.value)===(null===o||void 0===o?void 0:o.id));var d,a,r;return o?{User:t.createElement("div",{style:{fontWeight:"bold"}},"".concat(null===o||void 0===o?void 0:o.first_name," ").concat(null===o||void 0===o?void 0:o.last_name)),Photo:null!==(d=null===o||void 0===o?void 0:o.photo)&&void 0!==d?d:null===$||void 0===$?void 0:$.logo,Bio:null!==(a=null===o||void 0===o||null===(r=o.options)||void 0===r?void 0:r.info)&&void 0!==a?a:"",Pay:ke?t.createElement("div",{style:{display:"flex",justifyContent:"space-between",width:"100%"}},n?t.createElement(h.zx,{title:"Remove as Moderator",clicked:()=>{var e,l,t;ce(!0),(0,x.KL)((0,i.Z)((0,i.Z)({},re),{},{component_items:null===re||void 0===re||null===(e=re.component_items)||void 0===e?void 0:e.filter(e=>!("Moderator"===e.type&&(null===e||void 0===e?void 0:e.value)===(null===o||void 0===o?void 0:o.id)))}),re.id,null===(l=re.shared_users)||void 0===l?void 0:l.map(e=>e.id),re.title,null===re||void 0===re?void 0:re.is_complete,null===re||void 0===re||null===(t=re.shared_positions)||void 0===t?void 0:t.map(e=>null===e||void 0===e?void 0:e.id)).subscribe({next:e=>{ve(null===e||void 0===e?void 0:e.data),ce(!1)},error:()=>ce(!1)})},style:{width:"100%"},titleStyle:{fontSize:"10px"}}):t.createElement(h.zx,{title:"Add as Moderator",clicked:()=>{var e,l,i;ce(!0),(0,x.np)({index:null===re||void 0===re||null===(e=re.component_items)||void 0===e?void 0:e.length,item_code:null===K||void 0===K||null===(l=K.processModule)||void 0===l||null===(i=l.module)||void 0===i?void 0:i.id,type:"Moderator",value:null===o||void 0===o?void 0:o.id},re.id).subscribe({next:e=>{ve(null===e||void 0===e?void 0:e.data),ce(!1)},error:()=>ce(!1)})},style:{width:"100%"},titleStyle:{fontSize:"10px"}}),t.createElement(h.zx,{icon:t.createElement(M.G,{icon:S.$aW,style:{width:"15px",height:"15px"}}),clicked:()=>{var e;ce(!0),(0,x.KL)((0,i.Z)((0,i.Z)({},re),{},{component_items:re.component_items.filter(e=>e.value!==(null===o||void 0===o?void 0:o.id))}),re.id,re.shared_users.filter(e=>e.id!==(null===o||void 0===o?void 0:o.id)).map(e=>e.id),ae,null===re||void 0===re?void 0:re.is_complete,null===re||void 0===re||null===(e=re.shared_positions)||void 0===e?void 0:e.map(e=>null===e||void 0===e?void 0:e.id)).subscribe({next:e=>{var l;re.shared_users=null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.shared_users,ve(re),me(!1),ce(!1)},error:()=>ce(!1)})},style:{width:"50px",backgroundColor:"red",color:"white"},titleStyle:{fontSize:"10px"},loading:ue})):t.createElement("div",{style:{fontWeight:"bold"}}," ",n?"Club Moderator":""," ")}:{User:null===e||void 0===e?void 0:e.id}})})),Ie&&(null===re||void 0===re||null===(Y=re.component_items)||void 0===Y?void 0:Y.filter(e=>"Invite"===e.type).length)>0&&t.createElement(t.Fragment,null,t.createElement("p",{style:{fontSize:"14px",fontFamily:"var(--app-text-main-font)",fontWeight:"bold",color:"var(--app-color-gray-dark)",paddingLeft:"5px"}},"Invited ( ".concat(null===re||void 0===re||null===(B=re.component_items)||void 0===B?void 0:B.filter(e=>"Invite"===e.type).length," )")),t.createElement(E.default,{className:b.sharesTable,withColumns:!1,modern:!0,columns:["User","Photo","Bio"],list:null===re||void 0===re||null===(H=re.component_items)||void 0===H||null===(j=H.filter(e=>"Invite"===e.type))||void 0===j?void 0:j.map(e=>{var l,o,i;const t=ee.find(l=>l.id===e.value);return{User:"".concat(null===t||void 0===t?void 0:t.first_name," ").concat(null===t||void 0===t?void 0:t.last_name),Photo:null!==(l=null===t||void 0===t?void 0:t.photo)&&void 0!==l?l:null===$||void 0===$?void 0:$.logo,Bio:null!==(o=null===t||void 0===t||null===(i=t.options)||void 0===i?void 0:i.info)&&void 0!==o?o:""}})})),Ie&&(null===re||void 0===re||null===(V=re.component_items)||void 0===V?void 0:V.filter(e=>"Join"===e.type).length)>0&&t.createElement(t.Fragment,null,t.createElement("p",{style:{fontSize:"14px",fontFamily:"var(--app-text-main-font)",fontWeight:"bold",color:"var(--app-color-gray-dark)",paddingLeft:"5px"}},"Requests to Join ( ".concat(null===re||void 0===re||null===(G=re.component_items)||void 0===G?void 0:G.filter(e=>"Join"===e.type).length," )")),t.createElement(E.default,{className:b.sharesTable,withColumns:!1,modern:!0,columns:["User","Photo","Requests"],list:null===re||void 0===re||null===(J=re.component_items)||void 0===J||null===(Q=J.filter(e=>"Join"===e.type))||void 0===Q?void 0:Q.map(e=>{const l=ee.find(l=>l.id===e.value);var o,n,d;return l?{User:t.createElement("div",{style:{fontWeight:"bold"}},"".concat(null===l||void 0===l?void 0:l.first_name," ").concat(null===l||void 0===l?void 0:l.last_name)),Photo:null!==(o=null===l||void 0===l?void 0:l.photo)&&void 0!==o?o:null===$||void 0===$?void 0:$.logo,Requests:Ie?null!==re&&void 0!==re&&null!==(n=re.component_items)&&void 0!==n&&n.find(e=>"Payments"===e.type&&(null===e||void 0===e?void 0:e.value)===(null===l||void 0===l?void 0:l.id))?"Paid":t.createElement("div",{style:{display:"flex",justifyContent:"space-between",width:"100%"}},t.createElement("p",{style:{width:"50%"}},null===l||void 0===l||null===(d=l.options)||void 0===d?void 0:d.info),t.createElement(h.zx,{title:"Accept",clicked:()=>{var o,t,n;ce(!0),(0,x.KL)((0,i.Z)((0,i.Z)({},re),{},{component_items:re.component_items.filter(l=>l.id!==e.id)}),re.id,[...null!==(o=null===(t=re.shared_users)||void 0===t?void 0:t.map(e=>e.id))&&void 0!==o?o:[],null===l||void 0===l?void 0:l.id],re.title,null===re||void 0===re?void 0:re.is_complete,null===re||void 0===re||null===(n=re.shared_positions)||void 0===n?void 0:n.map(e=>null===e||void 0===e?void 0:e.id)).subscribe({next:e=>{ce(!1),ve(null===e||void 0===e?void 0:e.data)},error:()=>ce(!1)})},style:{width:"100%",backgroundColor:"blue"},titleStyle:{fontSize:"10px"},loading:ue}),t.createElement(h.zx,{title:"Decline",clicked:()=>{var l,o;ce(!0),(0,x.KL)((0,i.Z)((0,i.Z)({},re),{},{component_items:re.component_items.filter(l=>l.id!==e.id)}),re.id,null===(l=re.shared_users)||void 0===l?void 0:l.map(e=>e.id),re.title,null===re||void 0===re?void 0:re.is_complete,null===re||void 0===re||null===(o=re.shared_positions)||void 0===o?void 0:o.map(e=>null===e||void 0===e?void 0:e.id)).subscribe({next:e=>{ve(null===e||void 0===e?void 0:e.data),ce(!1)},error:()=>ce(!1)})},style:{width:"100%",backgroundColor:"red"},titleStyle:{fontSize:"10px"},loading:ue})):""}:{User:null===e||void 0===e?void 0:e.id}})})),!(pe||fe||Ie)&&Ne&&t.createElement(h.zx,{title:"REQUEST TO JOIN CLUB",clicked:()=>{var e,l,o;ce(!0),(0,x.np)({index:null===re||void 0===re||null===(e=re.component_items)||void 0===e?void 0:e.length,item_code:null===K||void 0===K||null===(l=K.processModule)||void 0===l||null===(o=l.module)||void 0===o?void 0:o.id,type:"Join",value:null===ie||void 0===ie?void 0:ie.id},re.id).subscribe({next:()=>{_e(!0),ce(!1)},error:()=>ce(!1)})},style:{width:"100%",backgroundColor:"green"},loading:ue}),!(pe||Ie)&&!Ne&&t.createElement(h.zx,{title:"JOIN CLUB",clicked:()=>{var e,l,o;ce(!0),(0,x.KL)((0,i.Z)((0,i.Z)({},re),{},{component_items:re.component_items.filter(e=>("Invite"===e.type||"Join"===e.type)&&e.value!==ie.id)}),re.id,[...null!==(e=null===(l=re.shared_users)||void 0===l?void 0:l.map(e=>e.id))&&void 0!==e?e:[],null===ie||void 0===ie?void 0:ie.id],ae,null===re||void 0===re?void 0:re.is_complete,null===re||void 0===re||null===(o=re.shared_positions)||void 0===o?void 0:o.map(e=>null===e||void 0===e?void 0:e.id)).subscribe({next:e=>{var l;re.shared_users=null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.shared_users,me(!0),ce(!1)},error:()=>ce(!1)})},style:{width:"100%",backgroundColor:"blue"},loading:ue}),Ie&&t.createElement(h.zx,{title:"INVITE PEOPLE",clicked:()=>{be(!0)},style:{width:"100%",backgroundColor:"green"},loading:ue}),pe&&!Ie&&t.createElement(h.zx,{title:"LEAVE CLUB",clicked:()=>{var e;ce(!0),(0,x.KL)((0,i.Z)((0,i.Z)({},re),{},{component_items:re.component_items.filter(e=>e.value!==(null===ie||void 0===ie?void 0:ie.id))}),re.id,re.shared_users.filter(e=>e.id!==(null===ie||void 0===ie?void 0:ie.id)).map(e=>e.id),ae,null===re||void 0===re?void 0:re.is_complete,null===re||void 0===re||null===(e=re.shared_positions)||void 0===e?void 0:e.map(e=>null===e||void 0===e?void 0:e.id)).subscribe({next:e=>{var l;re.shared_users=null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.shared_users,ve(re),me(!1),ce(!1)},error:()=>ce(!1)})},style:{width:"100%",backgroundColor:"red"},loading:ue}))),Oe&&t.createElement(g.x4,{id:"MEETS"},t.createElement("div",{style:{width:"100%",minHeight:"60vh",overflow:"auto",zIndex:"-1"}},t.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end"}},t.createElement(h.zx,{light:!0,style:{display:Ie?"":"none"},clicked:()=>{ge(!0)},icon:t.createElement("img",{src:w.IH})})),!ye&&t.createElement(q,{events:oe.filter(e=>"Expired"!==e.status&&e.module_id===(null===Oe||void 0===Oe?void 0:Oe.id)),isAdmin:Ie,onEventClick:e=>{const l=oe.find(l=>l.id===(null===e||void 0===e?void 0:e.event_id));le&&(0,O.navigateToTransaction)(ne,ve,Ee,$,l,Se,ie,K,te,X,we,ee,Oe)}})))),t.createElement("div",{className:he?b.mobilepopupopen:b.mobilepopup,style:{display:he?"":"none",padding:y.tq?"":"0 30%"}},t.createElement("div",{style:{width:"100%",height:"50vh",backgroundColor:"white",opacity:"0.9"},onClick:()=>be(!1)}),t.createElement("div",{className:b.mobilePopupActionContainer,style:{padding:"30px",backgroundColor:"var(--app-color-gray-lightest)"}},t.createElement("p",{style:{fontSize:"16px",fontFamily:"var(--app-text-main-font)",fontWeight:"bold",color:"black",paddingLeft:"5px"}},"Invite"),t.createElement(E.default,{className:b.sharesTable,withColumns:!1,modern:!0,columns:["User","Photo","Bioy"],list:ee.filter(e=>{var l,o,i;return re.created_by.id!==e.id&&!(null!==re&&void 0!==re&&null!==(l=re.shared_users)&&void 0!==l&&null!==(o=l.map(e=>e.id))&&void 0!==o&&o.includes(e.id)||null!==re&&void 0!==re&&null!==(i=re.component_items.filter(e=>"Invite"===e.type).map(e=>e.value))&&void 0!==i&&i.includes(e.id))}).map(e=>{var l,o,i;return{User:"".concat(null===e||void 0===e?void 0:e.first_name," ").concat(null===e||void 0===e?void 0:e.last_name),Photo:null!==(l=null===e||void 0===e?void 0:e.photo)&&void 0!==l?l:null===$||void 0===$?void 0:$.logo,Bio:null!==(o=null===e||void 0===e||null===(i=e.options)||void 0===i?void 0:i.info)&&void 0!==o?o:"",id:e.id}}),onListItemClick:e=>{var l,o,i;ce(!0),(0,x.np)({index:null===re||void 0===re||null===(l=re.component_items)||void 0===l?void 0:l.length,item_code:null===K||void 0===K||null===(o=K.processModule)||void 0===o||null===(i=o.module)||void 0===i?void 0:i.id,type:"Invite",value:null===e||void 0===e?void 0:e.id},re.id).subscribe({next:e=>{ve(e),ce(!1),be(!1)},error:()=>ce(!1)})}}))),t.createElement("div",{className:ye?b.mobilepopupopen:b.mobilepopup,style:{display:ye?"":"none"}},t.createElement("div",{style:{width:"100%",height:"50vh",backgroundColor:"white",opacity:"0.9"},onClick:()=>ge(!1)}),t.createElement("div",{className:b.mobilePopupActionContainer},t.createElement(h.zx,{title:"Create one-off meet",style:{width:"100%"},clicked:()=>{const e=e=>{var l,o,t,n,d,a;const r=e.steps.filter(l=>{var o,i,t,n,d,a;return void 0==(null===l||void 0===l||null===(o=l.options)||void 0===o?void 0:o.showStepAll)||1==(null===l||void 0===l||null===(i=l.options)||void 0===i?void 0:i.showStepAll)||0==(null===l||void 0===l||null===(t=l.options)||void 0===t?void 0:t.showStepAll)&&(null===l||void 0===l||null===(n=l.options)||void 0===n||null===(d=n.showOnly)||void 0===d?void 0:d.filter(e=>ie.positions.map(e=>e.id).indexOf(e)>-1).length)>0||(null===l||void 0===l||null===(a=l.options)||void 0===a?void 0:a.showStepAuthor)&&(null===ie||void 0===ie?void 0:ie.id)===(null===e||void 0===e?void 0:e.user_id)}).map((e,l)=>(0,i.Z)((0,i.Z)({},e),{},{rank:l+1}));N.h.dispatch((0,D.q4)(e)),N.h.dispatch((0,D.an)([e],m.Qc)),N.h.dispatch((0,D.q4)((0,i.Z)((0,i.Z)({},e),{},{completeSteps:e.steps,steps:r,stepIndex:2,module_id:Oe.id,module:Oe,isUpdating:!1}))),Se({action:f._U.setCurrentStep,value:null===e||void 0===e?void 0:e.steps[2]}),Se({action:f._U.setModuleItems,value:re.component_items}),Se({action:f._U.setModuleNewStepComponents,value:[]}),Se({action:f._U.setComponents,value:[]});const v=[...null!==(l=null===(o=r[2])||void 0===o?void 0:o.component_blueprints)&&void 0!==l?l:[]];if((null===v||void 0===v?void 0:v.length)>0){var s,u;let e=null===(s=v.find(e=>e.selected_fields.find(e=>"Club"===e.field_name)))||void 0===s?void 0:s.selected_fields.find(e=>"Club"===e.field_name);e&&(e.value=ae),e=null===(u=v.find(e=>e.selected_fields.find(e=>"Sport"===e.field_name)))||void 0===u?void 0:u.selected_fields.find(e=>"Sport"===e.field_name),e&&(e.value=Pe),Se({action:f._U.setComponentBlueprints,value:v}),Se({action:f._U.setModuleNewStepComponents,value:v})}(null===K||void 0===K||null===(t=K.processModule)||void 0===t||null===(n=t.steps)||void 0===n?void 0:n.length)>0&&(null===K||void 0===K||null===(d=K.processModule)||void 0===d||null===(a=d.steps)||void 0===a||a.filter(e=>{var l;return null===e||void 0===e||null===(l=e.component_blueprints)||void 0===l?void 0:l.filter(e=>e.selected_fields.filter(e=>e.value=void 0))}))};ne.find(e=>e.id===Oe.procedure.id)?(e(ne.find(e=>e.id===Oe.procedure.id)),ge(!1)):(ce(!0),(0,T.zJ)(Oe.procedure.id).pipe((0,C.P)()).subscribe({next:l=>{ce(!1),e(l),ge(!1)},error:e=>{}}))}}))))}),F=e=>{var l,o,n,d,a,r,v,s,u,c,f,_,N,D,T,P,O,L,U,F,W,q,Y,B,H,j,V,G,J,Q,K,X,$,ee,le,oe,ie,te,ne,de;const{selectedComponent:ae,begunModule:re,goto:ve}=e,{companyData:se,companyUsersArray:ue,components:ce}=(0,p.v9)(e=>e.flowReducer),{authenticatedUser:pe}=(0,p.v9)(e=>e.authReducer),[me,fe]=(0,t.useState)(!1),[_e,ye]=(0,t.useState)((null===ae||void 0===ae||null===(l=ae.shared_users)||void 0===l||null===(o=l.filter(e=>(null===e||void 0===e?void 0:e.id)===(null===pe||void 0===pe?void 0:pe.id)))||void 0===o?void 0:o.length)>0),[ge,he]=(0,t.useState)((null===ae||void 0===ae||null===(n=ae.component_items)||void 0===n||null===(d=n.filter(e=>{var l,o;return(null===e||void 0===e?void 0:e.value)===(null===pe||void 0===pe?void 0:pe.id)&&("Request"===(null===e||void 0===e?void 0:e.type)||"Waitlist"===(null===e||void 0===e?void 0:e.type))&&(null===e||void 0===e?void 0:e.item_code)===(null===re||void 0===re||null===(l=re.processModule)||void 0===l||null===(o=l.module)||void 0===o?void 0:o.id)}))||void 0===d?void 0:d.length)>0),[be]=(0,t.useState)(null===ae||void 0===ae?void 0:ae.component_fields.find(e=>"Status"===e.field_name)),[xe,Ee]=(0,t.useState)(null===ae||void 0===ae||null===(a=ae.component_items)||void 0===a?void 0:a.find(e=>"Payments"===e.type&&(null===e||void 0===e?void 0:e.value)===(null===pe||void 0===pe?void 0:pe.id))),[Ce,we]=(0,t.useState)(""),[Me,Se]=(0,t.useState)(!1),[ke,Ze]=(0,t.useState)({type:"Match"}),[Ie,Ne]=(0,t.useState)(),De=(null===pe||void 0===pe?void 0:pe.id)===(null===ae||void 0===ae||null===(r=ae.created_by)||void 0===r?void 0:r.id),Te=(null===ae||void 0===ae||null===(v=ae.component_fields.find(e=>"Sport"===e.field_name))||void 0===v||v.value,null===ae||void 0===ae||null===(s=ae.component_fields.find(e=>"Type"===e.field_name))||void 0===s||s.value,null===ae||void 0===ae||null===(u=ae.component_fields.find(e=>"Notes"===e.field_name))||void 0===u||u.value,null===ae||void 0===ae?void 0:ae.component_fields.find(e=>"Club"===e.field_name)),Pe=ce.find(e=>{var l;return e.module_id===(null===Te||void 0===Te||null===(l=Te.options)||void 0===l?void 0:l.module_id)&&(null===e||void 0===e?void 0:e.component_fields.find(e=>e.value===(null===Te||void 0===Te?void 0:Te.value)))}),Oe=(null===Pe||void 0===Pe||Pe.component_fields.find(e=>"Value Button"===e.data_type_name&&(null===e||void 0===e?void 0:e.value)),c=null===Pe||void 0===Pe||null===(f=Pe.component_fields.find(e=>"My Community"===e.field_name))||void 0===f?void 0:f.value,null!==(_=null===ae||void 0===ae?void 0:ae.component_fields.find(e=>"Private"===e.field_name))&&void 0!==_&&_),Ae="".concat(I()(new Date(null===ae||void 0===ae||null===(N=ae.component_fields.find(e=>"Meet Date"===e.field_name))||void 0===N?void 0:N.value)).format("DD MMM YYYY hh:mm A")),ze=null===ae||void 0===ae?void 0:ae.component_fields.find(e=>"Fee"===e.field_name),Le=()=>t.createElement("div",null,!(_e||De)&&!Oe&&!("Closed"===(null===ae||void 0===ae?void 0:ae.status)||"Done"===(null===ae||void 0===ae?void 0:ae.status)||"Cancelled"===(null===ae||void 0===ae?void 0:ae.status)||"Expired"===(null===ae||void 0===ae?void 0:ae.status))&&t.createElement(h.zx,{title:"JOIN MEET",clicked:()=>{var e,l,o;fe(!0),(0,x.KL)((0,i.Z)((0,i.Z)({},ae),{},{component_items:ae.component_items.filter(e=>e.value!==pe.id&&"Unavailable"===e.type)}),ae.id,[...null!==(e=null===(l=ae.shared_users)||void 0===l?void 0:l.map(e=>e.id))&&void 0!==e?e:[],null===pe||void 0===pe?void 0:pe.id],null===ae||void 0===ae?void 0:ae.title,null===ae||void 0===ae?void 0:ae.is_complete,null===ae||void 0===ae||null===(o=ae.shared_positions)||void 0===o?void 0:o.map(e=>null===e||void 0===e?void 0:e.id)).subscribe({next:e=>{var l;ae.shared_users=null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.shared_users,ye(!0),fe(!1)},error:()=>fe(!1)})},style:{width:y.tq?"100%":"300px",backgroundColor:"green"},loading:me}),!_e&&De&&!("Closed"===(null===ae||void 0===ae?void 0:ae.status)||"Done"===(null===ae||void 0===ae?void 0:ae.status)||"Cancelled"===(null===ae||void 0===ae?void 0:ae.status)||"Expired"===(null===ae||void 0===ae?void 0:ae.status))&&t.createElement(h.zx,{title:"Participate as Player",clicked:()=>{var e,l,o;fe(!0),(0,x.KL)((0,i.Z)((0,i.Z)({},ae),{},{component_items:ae.component_items.filter(e=>e.value!==pe.id&&"Unavailable"===e.type)}),ae.id,[...null!==(e=null===(l=ae.shared_users)||void 0===l?void 0:l.map(e=>e.id))&&void 0!==e?e:[],null===pe||void 0===pe?void 0:pe.id],null===ae||void 0===ae?void 0:ae.title,null===ae||void 0===ae?void 0:ae.is_complete,null===ae||void 0===ae||null===(o=ae.shared_positions)||void 0===o?void 0:o.map(e=>null===e||void 0===e?void 0:e.id)).subscribe({next:e=>{var l;ae.shared_users=null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.shared_users,ye(!0),fe(!1)},error:()=>fe(!1)})},style:{width:y.tq?"100%":"300px",backgroundColor:"green"},loading:me}),_e&&ze&&!De&&!xe&&t.createElement(h.zx,{disabled:+(null===pe||void 0===pe?void 0:pe.wallet)<+(null===ze||void 0===ze?void 0:ze.value),title:"Pay ".concat(null===ze||void 0===ze?void 0:ze.field_name),clicked:()=>{+(null===pe||void 0===pe?void 0:pe.wallet)>+(null===ze||void 0===ze?void 0:ze.value)?(fe(!0),(0,z.e_)({user_id:pe.id,id:(0,m.mR)(),total:-+(null===ze||void 0===ze?void 0:ze.value),product:"PY-".concat(null===ae||void 0===ae?void 0:ae.id),notes:"Wallet",quantity:1}).pipe((0,C.P)()).subscribe({next:()=>{var e,l,o,i,t;pe.wallet=+(+(null!==(e=null===pe||void 0===pe?void 0:pe.wallet)&&void 0!==e?e:0)-+(null===ze||void 0===ze?void 0:ze.value)),(0,x.np)({index:null===ae||void 0===ae||null===(l=ae.component_items)||void 0===l?void 0:l.length,item_code:null===re||void 0===re||null===(o=re.processModule)||void 0===o||null===(i=o.module)||void 0===i?void 0:i.id,type:"Payments",value:null===pe||void 0===pe?void 0:pe.id,alt_value:null===ae||void 0===ae||null===(t=ae.created_by)||void 0===t?void 0:t.id,total:null===ze||void 0===ze?void 0:ze.value},ae.id).subscribe({next:e=>{var l,o;Ee(null===e||void 0===e||null===(l=e.component_items)||void 0===l?void 0:l.find(e=>"Payments"===e.type&&(null===e||void 0===e?void 0:e.value)===(null===pe||void 0===pe?void 0:pe.id))),(0,z.e_)({user_id:null===ae||void 0===ae||null===(o=ae.created_by)||void 0===o?void 0:o.id,id:(0,m.mR)(),total:+(null===ze||void 0===ze?void 0:ze.value),product:"CR-".concat(null===ae||void 0===ae?void 0:ae.id),notes:"Wallet",quantity:1}).pipe((0,C.P)()).subscribe({next:()=>fe(!1),error:()=>fe(!1)})},error:()=>fe(!1)})}})):we("Insufficient wallet balance. ( Available: ".concat(null===pe||void 0===pe?void 0:pe.wallet,")"))},style:{width:y.tq?"100%":"300px",backgroundColor:"green"},loading:me}),Ce&&t.createElement("p",{style:{fontFamily:"var(--app-text-mobile-font)",fontSize:"14px",fontWeight:"bold"},onClick:()=>we("")},Ce),_e&&!De&&!("Closed"===(null===ae||void 0===ae?void 0:ae.status)||"Done"===(null===ae||void 0===ae?void 0:ae.status)||"Cancelled"===(null===ae||void 0===ae?void 0:ae.status)||"Expired"===(null===ae||void 0===ae?void 0:ae.status))&&t.createElement(h.zx,{title:"Cant Join",clicked:()=>{var e,l,o,t,n,d,a;fe(!0),(0,x.KL)((0,i.Z)((0,i.Z)({},ae),{},{component_items:[...null!==(e=null===ae||void 0===ae?void 0:ae.component_items)&&void 0!==e?e:[],{index:null===ae||void 0===ae||null===(l=ae.component_items)||void 0===l?void 0:l.length,item_code:null===re||void 0===re||null===(o=re.processModule)||void 0===o||null===(t=o.module)||void 0===t?void 0:t.id,type:"Unavailable",value:null===pe||void 0===pe?void 0:pe.id}]}),ae.id,null===(n=ae.shared_users)||void 0===n||null===(d=n.filter(e=>e.id!==(null===pe||void 0===pe?void 0:pe.id)))||void 0===d?void 0:d.map(e=>e.id),null===ae||void 0===ae?void 0:ae.title,null===ae||void 0===ae?void 0:ae.is_complete,null===ae||void 0===ae||null===(a=ae.shared_positions)||void 0===a?void 0:a.map(e=>null===e||void 0===e?void 0:e.id)).subscribe({next:e=>{var l,o;ae.shared_users=null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.shared_users,ae.component_items=null===e||void 0===e||null===(o=e.data)||void 0===o?void 0:o.component_items,ye(!1),fe(!1)},error:()=>fe(!1)})},style:{width:y.tq?"100%":"300px"},loading:me}),!(_e||De)&&!ge&&Oe&&!("Closed"===(null===ae||void 0===ae?void 0:ae.status)||"Done"===(null===ae||void 0===ae?void 0:ae.status)||"Cancelled"===(null===ae||void 0===ae?void 0:ae.status)||"Expired"===(null===ae||void 0===ae?void 0:ae.status))&&t.createElement(h.zx,{title:"REQUEST TO JOIN MEET",clicked:()=>{var e,l,o;fe(!0),(0,x.np)({index:null===ae||void 0===ae||null===(e=ae.component_items)||void 0===e?void 0:e.length,item_code:null===re||void 0===re||null===(l=re.processModule)||void 0===l||null===(o=l.module)||void 0===o?void 0:o.id,type:"Request",value:null===pe||void 0===pe?void 0:pe.id},ae.id).subscribe({next:()=>{he(!0),fe(!1)},error:()=>fe(!1)})},style:{width:y.tq?"100%":"300px",backgroundColor:"var(--app-color-blue)"},loading:me})),Re=()=>{var e,l,o,n,d;const a=[...ue,pe].find(e=>e.id===ke.value),r=[...ue,pe].find(e=>e.id===ke.alt_value),v=JSON.parse(ke.item_code);return t.createElement("div",{className:b.mobilePopupActionContainer},t.createElement("div",{style:{fontFamily:"var(--app-text-mobile-font)",fontSize:"18px",fontWeight:"bold"}},null===v||void 0===v?void 0:v.round),t.createElement("div",{style:{fontFamily:"var(--app-text-mobile-font)",fontSize:"12px",marginTop:"5px"}},"Date: ".concat(I()(null===v||void 0===v?void 0:v.date).format("DD MMMM YYYY HH:mm"))),t.createElement("div",{style:{fontFamily:"var(--app-text-mobile-font)",fontSize:"12px",marginTop:"5px"}},"Venue: ".concat(null===v||void 0===v?void 0:v.court)),t.createElement("hr",null),t.createElement("div",{style:{display:"flex",justifyContent:"space-between",width:"100%"}},t.createElement("p",{style:{fontSize:"14px",fontFamily:"var(--app-text-main-font)",fontWeight:"bold",marginRight:"20px",width:"50%"}},"".concat(null!==(e=null===a||void 0===a?void 0:a.first_name)&&void 0!==e?e:"Player"," ").concat(null!==(l=null===a||void 0===a?void 0:a.last_name)&&void 0!==l?l:"1")),t.createElement("p",{style:{textAlign:"right",fontSize:"14px",fontFamily:"var(--app-text-main-font)",fontWeight:"bold",marginRight:"20px",width:"50%"}},"".concat(null!==(o=null===r||void 0===r?void 0:r.first_name)&&void 0!==o?o:"Player"," ").concat(null!==(n=null===r||void 0===r?void 0:r.last_name)&&void 0!==n?n:"2"))),null===v||void 0===v||null===(d=v.matches)||void 0===d?void 0:d.map((e,l)=>t.createElement("div",{key:l,style:{display:"flex",justifyContent:"space-between",width:"100%"}},t.createElement("input",{defaultValue:null===e||void 0===e?void 0:e.p1,style:{textAlign:"center",width:"50px",height:"50px",margin:"10px"},onChange:l=>{e.p1=l.target.value,ke.item_code=JSON.stringify(v)}}),t.createElement("p",{style:{fontSize:"14px",fontFamily:"var(--app-text-main-font)"}},"SET ",e.set),t.createElement("input",{defaultValue:null===e||void 0===e?void 0:e.p2,style:{textAlign:"center",width:"50px",height:"50px",margin:"10px"},onChange:l=>{e.p2=l.target.value,ke.item_code=JSON.stringify(v)}}))),t.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},(De||a.id===pe.id||r.id===pe.id)&&t.createElement(h.zx,{light:!0,style:{display:"",backgroundColor:"rgb(246,244,236)"},clicked:()=>{fe(!0),(0,x.np)(ke,ae.id).subscribe({next:e=>{ae.component_items=e.data.component_items,fe(!1),Se(!1)},error:()=>fe(!1)})},title:"UPDATE",loading:me}),(De||a.id===pe.id||r.id===pe.id)&&t.createElement(h.zx,{light:!0,style:{display:"",backgroundColor:"rgb(246,244,236)"},clicked:()=>{var e;v.matches.push({p1:0,p2:0,set:(null===v||void 0===v||null===(e=v.matches)||void 0===e?void 0:e.length)+1}),Ze((0,i.Z)((0,i.Z)({},ke),{},{item_code:JSON.stringify(v)}))},title:"ADD SET"})))};return t.createElement("div",null,t.createElement("div",{style:{fontFamily:"var(--app-text-mobile-font)",fontSize:y.tq?"18px":"20px",fontWeight:"bold",marginTop:y.tq?"":"50px"}},null===ae||void 0===ae||null===(D=ae.title)||void 0===D?void 0:D.toUpperCase()),t.createElement("div",{style:{fontFamily:"var(--app-text-mobile-font)",fontSize:"12px",marginTop:"5px"}},Ae),t.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},_e&&!De&&t.createElement("p",{style:{fontFamily:"var(--app-text-mobile-font)",fontSize:"14px",fontWeight:"bold",marginTop:"30px"}},"You are a participant of this meet"),De&&t.createElement("p",{style:{fontFamily:"var(--app-text-mobile-font)",fontSize:"14px",fontWeight:"bold",marginTop:"30px"}},"You are the organizer of this meet"),!De&&ze&&t.createElement("p",{style:{fontFamily:"var(--app-text-mobile-font)",fontSize:"14px",fontWeight:"bold",marginTop:"30px"}},xe?"PAID":"FEE (".concat(null===ze||void 0===ze?void 0:ze.value,")"))),t.createElement(g.mQ,{style:{width:"100%",fontSize:y.tq?"16px":"20px",marginTop:"20px"}},t.createElement(g.td,{style:{fontFamily:"var(--app-text-mobile-font)",fontSize:(y.tq,"16px")}},t.createElement(g.OK,null,"DETAILS"),t.createElement(g.OK,null,"PARTICIPANTS"),!("New"===ae.status||"None"===ae.status||"Reopen"===ae.status)&&t.createElement(g.OK,null,"GAMES")),t.createElement(g.x4,{id:"DETAILS"},t.createElement("div",{style:{width:"100%",minHeight:"60vh",overflow:"auto"}},t.createElement("div",{className:b.centeredDiv,style:{width:"inherit",fontSize:"14px",marginTop:"20px"}},e.children,De&&"Expired"!==(null===ae||void 0===ae?void 0:ae.status)&&t.createElement("div",{style:{width:"100%",display:""}},t.createElement(A.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-light)"},className:b.multiselectComponent,visible:!0,mandatory:!1,value:null===be||void 0===be?void 0:be.value,items:null===be||void 0===be||null===(T=be.options)||void 0===T||null===(P=T.list)||void 0===P?void 0:P.map(e=>({label:e,value:e})),onChange:e=>{var l,o;ae.status=e,be.value=e,fe(!0),(0,x.KL)(ae,ae.id,null===(l=ae.shared_users)||void 0===l?void 0:l.map(e=>e.id),null===ae||void 0===ae?void 0:ae.title,null===ae||void 0===ae?void 0:ae.is_complete,null===ae||void 0===ae||null===(o=ae.shared_positions)||void 0===o?void 0:o.map(e=>null===e||void 0===e?void 0:e.id)).subscribe({next:e=>{fe(!1)},error:()=>fe(!1)})},fieldLabel:"Status",placeholder:"Select status..."}))))),t.createElement(g.x4,{id:"PARTICIPANTS"},t.createElement("div",{style:{justifyContent:"left",width:y.tq?"100%":"60%",minHeight:"50vh",overflow:"auto",ppadding:y.tq?"":"0 30%"}},!De&&t.createElement("p",{style:{fontSize:"14px",fontFamily:"var(--app-text-main-font)",fontWeight:"bold",color:"var(--app-color-gray-dark)",paddingLeft:"5px"}},"Organizer"),!De&&t.createElement("div",{className:b.filtersContainer},t.createElement(k.Z,{simple:!0,photo:null!==(O=null===pe||void 0===pe?void 0:pe.photo)&&void 0!==O?O:"https://s3-symbol-logo.tradingview.com/logo-yazilim--600.png",email:"",position:null!==(L=null===pe||void 0===pe||null===(U=pe.options)||void 0===U?void 0:U.info)&&void 0!==L?L:"",firstName:t.createElement("div",{style:{fontWeight:"bold"}},"".concat(null===ae||void 0===ae||null===(F=ae.created_by)||void 0===F?void 0:F.first_name," ").concat(null===ae||void 0===ae||null===(W=ae.created_by)||void 0===W?void 0:W.last_name)),cardClicked:()=>{},width:"100%"})),(null===ae||void 0===ae||null===(q=ae.shared_users)||void 0===q?void 0:q.length)>0&&t.createElement(t.Fragment,null,t.createElement("p",{style:{fontSize:"14px",fontFamily:"var(--app-text-main-font)",fontWeight:"bold",color:"var(--app-color-gray-dark)",paddingLeft:"5px"}},"Participants ( ".concat(null===ae||void 0===ae||null===(Y=ae.shared_users)||void 0===Y?void 0:Y.length," )")),t.createElement(E.default,{className:b.sharesTable,withColumns:!1,modern:!0,columns:["User","Photo","Bio","Pay"],list:null===ae||void 0===ae||null===(B=ae.shared_users)||void 0===B?void 0:B.map(e=>{var l,o,i,n;const d=ue.find(l=>l.id===e.id);return d?{User:t.createElement("div",{style:{fontWeight:"bold"}},"".concat(null===d||void 0===d?void 0:d.first_name," ").concat(null===d||void 0===d?void 0:d.last_name)),Photo:null!==(l=null===d||void 0===d?void 0:d.photo)&&void 0!==l?l:null===se||void 0===se?void 0:se.logo,Bio:null!==(o=null===d||void 0===d||null===(i=d.options)||void 0===i?void 0:i.info)&&void 0!==o?o:"",Pay:ze&&De?null!==ae&&void 0!==ae&&null!==(n=ae.component_items)&&void 0!==n&&n.find(e=>"Payments"===e.type&&(null===e||void 0===e?void 0:e.value)===(null===d||void 0===d?void 0:d.id))?"Paid":t.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},t.createElement("p",{style:{fontFamily:"var(--app-text-mobile-font)",fontSize:"14px",fontWeight:"bold"}},"Unpaid"),t.createElement(h.zx,{title:"Remove",clicked:()=>{var e,l;fe(!0),(0,x.KL)(ae,ae.id,null===(e=ae.shared_users)||void 0===e?void 0:e.filter(e=>e.id!==(null===d||void 0===d?void 0:d.id)).map(e=>e.id),null===ae||void 0===ae?void 0:ae.title,null===ae||void 0===ae?void 0:ae.is_complete,null===ae||void 0===ae||null===(l=ae.shared_positions)||void 0===l?void 0:l.map(e=>null===e||void 0===e?void 0:e.id)).subscribe({next:e=>{var l;ae.component_items=null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.component_items,ye(!1),fe(!1)},error:()=>fe(!1)})},style:{width:"100px"},loading:me})):""}:{User:null===e||void 0===e?void 0:e.id}})})),De&&(null===ae||void 0===ae||null===(H=ae.component_items)||void 0===H?void 0:H.filter(e=>"Unavailable"===e.type).length)>0&&t.createElement(t.Fragment,null,t.createElement("p",{style:{fontSize:"14px",fontFamily:"var(--app-text-main-font)",fontWeight:"bold",color:"var(--app-color-gray-dark)",paddingLeft:"5px"}},"Unavailable ( ".concat(null===ae||void 0===ae||null===(j=ae.component_items)||void 0===j?void 0:j.filter(e=>"Unavailable"===e.type).length," )")),t.createElement(E.default,{className:b.sharesTable,withColumns:!1,modern:!0,columns:["User","Photo","Bio"],list:null===ae||void 0===ae||null===(V=ae.component_items)||void 0===V||null===(G=V.filter(e=>"Unavailable"===e.type))||void 0===G?void 0:G.map(e=>{var l,o,i;const t=ue.find(l=>l.id===e.value);return{User:"".concat(null===t||void 0===t?void 0:t.first_name," ").concat(null===t||void 0===t?void 0:t.last_name),Photo:null!==(l=null===t||void 0===t?void 0:t.photo)&&void 0!==l?l:null===se||void 0===se?void 0:se.logo,Bio:null!==(o=null===t||void 0===t||null===(i=t.options)||void 0===i?void 0:i.info)&&void 0!==o?o:""}})})),De&&(null===ae||void 0===ae||null===(J=ae.component_items)||void 0===J?void 0:J.filter(e=>"Request"===e.type||"Waitlist"===e.type).length)>0&&t.createElement(t.Fragment,null,t.createElement("p",{style:{fontSize:"14px",fontFamily:"var(--app-text-main-font)",fontWeight:"bold",color:"var(--app-color-gray-dark)",paddingLeft:"5px"}},"Request to Join ( ".concat(null===ae||void 0===ae||null===(Q=ae.component_items)||void 0===Q?void 0:Q.filter(e=>"Request"===e.type||"Waitlist"===e.type).length," )")),null===ae||void 0===ae||null===(K=ae.component_items)||void 0===K||null===(X=K.filter(e=>"Request"===e.type||"Waitlist"===e.type))||void 0===X?void 0:X.map((e,l)=>{const o=ue.find(l=>l.id===e.value);return t.createElement("div",{key:l,style:{display:"flex"},className:b.filtersContainer},t.createElement("p",{style:{fontSize:"14px",fontFamily:"var(--app-text-main-font)",width:"200px",marginRight:"20px"}},"".concat(null===o||void 0===o?void 0:o.first_name," ").concat(null===o||void 0===o?void 0:o.last_name)),t.createElement(h.zx,{title:"Approve",clicked:()=>{var e,l,t;fe(!0),(0,x.KL)((0,i.Z)((0,i.Z)({},ae),{},{component_items:ae.component_items.filter(e=>e.value!==o.id&&("Request"===e.type||"Waitlist"===e.type))}),ae.id,[...null!==(e=null===(l=ae.shared_users)||void 0===l?void 0:l.map(e=>e.id))&&void 0!==e?e:[],null===o||void 0===o?void 0:o.id],null===ae||void 0===ae?void 0:ae.title,null===ae||void 0===ae?void 0:ae.is_complete,null===ae||void 0===ae||null===(t=ae.shared_positions)||void 0===t?void 0:t.map(e=>null===e||void 0===e?void 0:e.id)).subscribe({next:e=>{var l,o;ae.shared_users=null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.shared_users,ae.component_items=null===e||void 0===e||null===(o=e.data)||void 0===o?void 0:o.component_items,fe(!1)},error:()=>fe(!1)})},style:{width:"100px",backgroundColor:"green",fontSize:"10px"},titleStyle:{fontSize:"10px"},loading:me}),t.createElement(h.zx,{title:"Decline",clicked:()=>{var e,l;fe(!0),(0,x.KL)((0,i.Z)((0,i.Z)({},ae),{},{component_items:ae.component_items.filter(e=>e.value!==o.id&&("Request"===e.type||"Waitlist"===e.type))}),ae.id,null===(e=ae.shared_users)||void 0===e?void 0:e.map(e=>e.id),null===ae||void 0===ae?void 0:ae.title,null===ae||void 0===ae?void 0:ae.is_complete,null===ae||void 0===ae||null===(l=ae.shared_positions)||void 0===l?void 0:l.map(e=>null===e||void 0===e?void 0:e.id)).subscribe({next:e=>{var l;ae.component_items=null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.component_items,ye(!1),fe(!1)},error:()=>fe(!1)})},style:{width:"100px"},titleStyle:{fontSize:"10px"},loading:me}),"Request"===e.type?t.createElement(h.zx,{title:"Waitlist",clicked:()=>{fe(!0),(0,x.np)((0,i.Z)((0,i.Z)({},e),{},{type:"Waitlist"}),ae.id).subscribe({next:l=>{e.type="Waitlist",fe(!1)},error:()=>fe(!1)})},style:{width:"100px",backgroundColor:"orange"},titleStyle:{fontSize:"10px"},loading:me}):t.createElement("p",{style:{fontSize:"16px",fontFamily:"var(--app-text-main-font)",fontWeight:"bold"}},"Waitlisted"))})),ge&&t.createElement(t.Fragment,null,t.createElement("p",{style:{fontSize:"14px",fontFamily:"var(--app-text-main-font)",fontWeight:"bold",color:"var(--app-color-gray-dark)",paddingLeft:"5px"}},(null===($=ae.component_items)||void 0===$||null===(ee=$.filter(e=>{var l,o;return(null===e||void 0===e?void 0:e.value)===(null===pe||void 0===pe?void 0:pe.id)&&"Request"===(null===e||void 0===e?void 0:e.type)&&(null===e||void 0===e?void 0:e.item_code)===(null===re||void 0===re||null===(l=re.processModule)||void 0===l||null===(o=l.module)||void 0===o?void 0:o.id)}))||void 0===ee?void 0:ee.length)>0?"Pending Request":"Waitlisted"),t.createElement("div",{className:b.filtersContainer},t.createElement(k.Z,{simple:!0,photo:null!==(le=null===pe||void 0===pe?void 0:pe.photo)&&void 0!==le?le:"https://s3-symbol-logo.tradingview.com/logo-yazilim--600.png",email:"",position:null!==(oe=null===pe||void 0===pe||null===(ie=pe.options)||void 0===ie?void 0:ie.info)&&void 0!==oe?oe:"",firstName:t.createElement("div",{style:{fontWeight:"bold"}},"".concat(null===pe||void 0===pe?void 0:pe.first_name," ").concat(null===pe||void 0===pe?void 0:pe.last_name)),cardClicked:()=>{},width:"100%"}))),t.createElement(Le,null))),!("New"===ae.status||"None"===ae.status||"Reopen"===ae.status)&&t.createElement(g.x4,{id:"GAMES"},t.createElement("div",{style:{width:"100%",minHeight:"50vh",overflow:"auto",padding:y.tq?"":"0 30%"}},ve&&De&&t.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end"}},t.createElement(h.zx,{light:!0,style:{display:""},clicked:()=>{Se(!0),Ze({type:"Match"})},icon:t.createElement("img",{src:w.IH})})),t.createElement("p",{style:{fontSize:"14px",fontFamily:"var(--app-text-main-font)",fontWeight:"bold",color:"var(--app-color-gray-dark)",paddingLeft:"5px"}},"Matches ( ".concat(null===ae||void 0===ae||null===(te=ae.component_items)||void 0===te?void 0:te.filter(e=>"Match"===e.type).length," )")),null===ae||void 0===ae||null===(ne=ae.component_items)||void 0===ne||null===(de=ne.filter(e=>"Match"===e.type))||void 0===de?void 0:de.map((e,l)=>{var o,i,n,d;const a=[...ue,pe].find(l=>l.id===e.value),r=[...ue,pe].find(l=>l.id===e.alt_value),v=JSON.parse(e.item_code),s=v.matches.map(e=>"  ".concat(e.p1,"-").concat(e.p2,"  ")).toString();return t.createElement("div",{key:l,className:b.filtersContainer,onClick:()=>{ve&&(Ze(e),Se(!0))}},t.createElement("div",{style:{display:"flex",width:"100%",justifyContent:"space-between"}},t.createElement("div",{style:{fontSize:"14px",fontFamily:"var(--app-text-main-font)",fontWeight:"bold",marginRight:"20px"}},"".concat(null===v||void 0===v?void 0:v.round)),t.createElement("div",{style:{fontSize:"14px",fontFamily:"var(--app-text-main-font)",fontWeight:"bold",marginRight:"20px"}},"".concat(s))),t.createElement("hr",{style:{border:"0.5px solid var(--app-color-gray-light)"}}),t.createElement("div",{style:{display:"flex",marginTop:"5px",width:"100%",justifyContent:"space-between"}},t.createElement("div",{style:{fontSize:"14px",fontFamily:"var(--app-text-main-font)",fontWeight:"bold",marginRight:"20px"}},"".concat(null!==(o=null===r||void 0===r?void 0:r.first_name)&&void 0!==o?o:"Player"," ").concat(null!==(i=null===r||void 0===r?void 0:r.last_name)&&void 0!==i?i:"1")),t.createElement("div",{style:{fontSize:"14px",fontFamily:"var(--app-text-main-font)",fontWeight:"bold",marginRight:"20px"}},"".concat(null!==(n=null===a||void 0===a?void 0:a.first_name)&&void 0!==n?n:"Player"," ").concat(null!==(d=null===a||void 0===a?void 0:a.last_name)&&void 0!==d?d:"2"))))})),t.createElement("div",{className:Me?b.mobilepopupopen:b.mobilepopup,style:{display:Me?"":"none"}},t.createElement("div",{style:{width:"100%",height:"20vh",backgroundColor:"white",opacity:"0.9"},onClick:()=>Se(!1)}),null!==ke&&void 0!==ke&&ke.id?t.createElement(Re,null):t.createElement("div",{className:b.mobilePopupActionContainer,style:{backgroundColor:"var(--app-color-gray-lightest)"}},t.createElement(A.Z,{titleProps:{fontSize:"14px",color:"var(--app-color-gray-dark)"},className:b.multiselectComponent,visible:!0,mandatory:!1,items:ae.shared_users.map((e,l)=>{const o=ue.find(l=>l.id===e.id);return o?{label:"".concat(null===o||void 0===o?void 0:o.first_name," ").concat(null===o||void 0===o?void 0:o.last_name),value:e.id}:{label:"Player ".concat(l+1),value:l}}),onChange:e=>{Ze((0,i.Z)((0,i.Z)({},ke),{},{value:e}))},fieldLabel:"Player 1",placeholder:"Select player 1"}),t.createElement("br",null),t.createElement(A.Z,{titleProps:{fontSize:"14px",color:"var(--app-color-gray-dark)"},className:b.multiselectComponent,visible:!0,mandatory:!1,items:ae.shared_users.map(e=>{const l=ue.find(l=>l.id===e.id);return{label:"".concat(l.first_name," ").concat(l.last_name),value:e.id}}),onChange:e=>{Ze((0,i.Z)((0,i.Z)({},ke),{},{alt_value:e}))},fieldLabel:"Player 2",placeholder:"Select player 2"}),t.createElement("br",null),t.createElement(A.Z,{titleProps:{fontSize:"14px",color:"var(--app-color-gray-dark)"},className:b.multiselectComponent,visible:!0,mandatory:!1,items:[{label:"Round 1",value:"Round 1"},{label:"Round 2",value:"Round 2"},{label:"Round 3",value:"Round 3"},{label:"Round 4",value:"Round 4"},{label:"Round 5",value:"Round 5"},{label:"Round 6",value:"Round 6"},{label:"Round 7",value:"Round 7"},{label:"Round 8",value:"Round 8"},{label:"Round 9",value:"Round 9"}],onChange:e=>{var l;const o=JSON.parse(null!==(l=null===ke||void 0===ke?void 0:ke.item_code)&&void 0!==l?l:"{}");o.round=e,o.matches=[{p1:0,p2:0,set:1}],Ze((0,i.Z)((0,i.Z)({},ke),{},{item_code:JSON.stringify(o)}))},fieldLabel:"Round",placeholder:"Select Round"}),t.createElement("br",null),t.createElement("label",{className:b.fieldLabel,style:{color:"var(--app-color-gray-dark",fontSize:"14px",marginTop:"10px"}},"Date and Time"),t.createElement("div",{className:b.filtersContainer,style:{height:"60px",border:"2px solid var(--app-color-gray-lighter)",padding:"5px",marginTop:"10px"}},t.createElement(R(),{showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:5,customInput:t.createElement("div",{id:"custom-input",style:{cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",padding:"5px",border:"0px solid var(--app-color-gray-lighter)",backgroundColor:"var(--app-color-gray-lightest)",color:"var(--app-color-gray-dark)"}},t.createElement("input",{value:Ie?I()(Ie).format("DD MMMM YYYY HH:mm"):"",readOnly:!0,type:"text",style:{outline:"none",fontFamily:"var(--app-text-main-font)",fontSize:"16px",fontWeight:"bold",lineHeight:"20px",color:"var(--app-color-gray-dark)",width:"100%",border:"0px",backgroundColor:"var(--app-color-gray-lightest)"},onChange:e=>{}}),t.createElement(M.G,{icon:S.WRo,style:{width:"14px",height:"14px"}})),className:b.singleInputContainer,selected:Ie?new Date(I()(Ie)):(0,Z.now)(),onChange:e=>{if(e>(0,Z.now)()){var l;Ne(e);const o=JSON.parse(null!==(l=null===ke||void 0===ke?void 0:ke.item_code)&&void 0!==l?l:"{}");o.date=e,o.matches=[{p1:0,p2:0,set:1}],Ze((0,i.Z)((0,i.Z)({},ke),{},{item_code:JSON.stringify(o)}))}}})),t.createElement(A.Z,{titleProps:{fontSize:"14px",color:"var(--app-color-gray-dark)"},className:b.multiselectComponent,visible:!0,mandatory:!1,items:[{label:"Court 1",value:"Court 1"},{label:"Court 2",value:"Court 2"},{label:"Court 3",value:"Court 3"},{label:"Court 4",value:"Court 4"},{label:"Court 5",value:"Court 5"},{label:"Court 6",value:"Court 6"},{label:"Court 7",value:"Court 7"},{label:"Court 8",value:"Court 8"},{label:"Court 9",value:"Court 9"}],onChange:e=>{var l;const o=JSON.parse(null!==(l=null===ke||void 0===ke?void 0:ke.item_code)&&void 0!==l?l:"{}");o.court=e,o.matches=[{p1:0,p2:0,set:1}],Ze((0,i.Z)((0,i.Z)({},ke),{},{item_code:JSON.stringify(o)}))},fieldLabel:"Court",placeholder:"Select Court"}),t.createElement("br",null),(null===ke||void 0===ke?void 0:ke.value)&&(null===ke||void 0===ke?void 0:ke.alt_value)&&(null===ke||void 0===ke?void 0:ke.item_code)&&t.createElement(h.zx,{title:"CREATE MATCH",style:{width:"100%"},clicked:()=>{var e;fe(!0),(0,x.np)((0,i.Z)((0,i.Z)({},ke),{},{index:null===ae||void 0===ae||null===(e=ae.component_items)||void 0===e?void 0:e.length}),ae.id).subscribe({next:e=>{ae.component_items=e.data.component_items,fe(!1),Se(!1)},error:()=>fe(!1)})},loading:me}))))))},W=e=>{const{begunModule:l,authenticatedUser:o,user:n,template:d}=e,{companyData:a,companyUsersArray:r,components:v,companyPositionsArray:s,allModules:u,companyProcesses:c}=(0,p.v9)(e=>e.flowReducer),[m,f]=(0,t.useState)(!1),_=v.filter(e=>e.module_id===l.processModule.module_id&&e.component_items.find(e=>"Invite"===e.type&&e.value===o.id)).map(e=>(0,i.Z)((0,i.Z)({},e.component_items.find(e=>"Invite"===e.type&&e.value===o.id)),{},{club:e}));return t.createElement("div",{style:{width:"100%",padding:"0 20px",fontFamily:"var(--app-text-main-font)"}},null===_||void 0===_?void 0:_.map((e,l)=>t.createElement("div",{className:b.filtersContainer,key:l,style:{border:"0"}},t.createElement(k.Z,{photo:"https://s3-symbol-logo.tradingview.com/logo-yazilim--600.png",firstName:t.createElement("div",{style:{fontWeight:"bold"}},"".concat(e.club.title)),position:"has invited you to join their club",email:"",ccardClicked:()=>{var l,t,n,d,a;f(!0),(0,x.KL)((0,i.Z)((0,i.Z)({},e.club),{},{component_items:e.club.component_items.filter(l=>l.id!==e.id)}),e.club.id,[...null!==(l=null===(t=e.club.shared_users)||void 0===t?void 0:t.map(e=>e.id))&&void 0!==l?l:[],null===o||void 0===o?void 0:o.id],e.club.title,null===(n=e.club)||void 0===n?void 0:n.is_complete,null===e||void 0===e||null===(d=e.club)||void 0===d||null===(a=d.shared_positions)||void 0===a?void 0:a.map(e=>null===e||void 0===e?void 0:e.id)).subscribe({next:l=>{var o;e.club.shared_users=null===l||void 0===l||null===(o=l.data)||void 0===o?void 0:o.shared_users,f(!1)},error:()=>f(!1)})},width:"100%"},t.createElement("div",{style:{display:"flex",justifyContent:"space-evenly"}},t.createElement(h.zx,{title:"Accept",clicked:()=>{var l,t,n,d,a;f(!0),(0,x.KL)((0,i.Z)((0,i.Z)({},e.club),{},{component_items:e.club.component_items.filter(l=>l.id!==e.id)}),e.club.id,[...null!==(l=null===(t=e.club.shared_users)||void 0===t?void 0:t.map(e=>e.id))&&void 0!==l?l:[],null===o||void 0===o?void 0:o.id],e.club.title,null===(n=e.club)||void 0===n?void 0:n.is_complete,null===e||void 0===e||null===(d=e.club)||void 0===d||null===(a=d.shared_positions)||void 0===a?void 0:a.map(e=>null===e||void 0===e?void 0:e.id)).subscribe({next:l=>{var o;e.club.shared_users=null===l||void 0===l||null===(o=l.data)||void 0===o?void 0:o.shared_users,f(!1)},error:()=>f(!1)})},style:{width:"80px",backgroundColor:"blue"},titleStyle:{fontSize:"12px"},loading:m}),t.createElement(h.zx,{title:"Decline",clicked:()=>{var l,o,t,n;f(!0),(0,x.KL)((0,i.Z)((0,i.Z)({},e.club),{},{component_items:e.club.component_items.filter(l=>l.id!==e.id)}),e.club.id,null===(l=e.club.shared_users)||void 0===l?void 0:l.map(e=>e.id),e.club.title,null===(o=e.club)||void 0===o?void 0:o.is_complete,null===e||void 0===e||null===(t=e.club)||void 0===t||null===(n=t.shared_positions)||void 0===n?void 0:n.map(e=>null===e||void 0===e?void 0:e.id)).subscribe({next:e=>{f(!1)},error:()=>f(!1)})},style:{width:"80px",backgroundColor:"red"},titleStyle:{fontSize:"12px"},loading:m}))))))},q=e=>{const{events:l,onEventClick:o,isAdmin:i=!0}=e,[n,d]=(0,t.useState)("day");return t.createElement(P.Scheduler,{style:{fontFamily:"var(--app-text-main-font)",fontSize:"30px"},events:null===l||void 0===l?void 0:l.map(e=>{var l,o;const i=null===(l=e.component_fields.find(e=>"Meet Date"===e.field_name&&"Date"===e.data_type_name))||void 0===l?void 0:l.value,t=null===(o=e.component_fields.find(e=>"Ends"===e.field_name&&"Date"===e.data_type_name))||void 0===o?void 0:o.value;return{event_id:e.id,title:e.title,start:new Date(Date.parse(i)),end:new Date(Date.parse(t)),admin_id:e.id,editable:!1,deletable:!1}}),agenda:!0,navigation:i,alwaysShowAgendaDays:!1,view:n,onEventClick:o,onViewChange:e=>d(e)})},Y=e=>{var l,o,n,d,a,r,v;const{selectedComponent:s,begunModule:u,goto:c,setSelectedComponent:_}=e,{companyData:k,companyUsersArray:Z,components:I,allModules:P,companyProcesses:L}=(0,p.v9)(e=>e.flowReducer),{authenticatedUser:R}=(0,p.v9)(e=>e.authReducer),[U,F]=(0,t.useState)(!1),[,W]=(0,t.useState)(!1),[,Y]=(0,f.pQ)(),[B,H]=(0,t.useState)(null===s||void 0===s||null===(l=s.component_items)||void 0===l?void 0:l.find(e=>"Payments"===e.type&&(null===e||void 0===e?void 0:e.value)===(null===R||void 0===R?void 0:R.id))),[j,V]=(0,t.useState)(""),[G,J]=(0,t.useState)(!1),[Q,K]=(0,t.useState)(!1),[X,$]=(0,t.useState)([]),[ee,le]=(0,t.useState)({type:"Service"}),oe=(null===R||void 0===R?void 0:R.id)===(null===s||void 0===s||null===(o=s.created_by)||void 0===o?void 0:o.id),ie=(null===s||void 0===s||s.component_fields.find(e=>"Club"===e.field_name),null===P||void 0===P?void 0:P.find(e=>"Meets"===(null===e||void 0===e?void 0:e.name)));return t.createElement("div",null,t.createElement("div",{style:{fontFamily:"var(--app-text-mobile-font)",fontSize:y.tq?"18px":"20px",fontWeight:"bold",marginTop:y.tq?"":"50px"}},null===s||void 0===s||null===(n=s.title)||void 0===n?void 0:n.toUpperCase()),t.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},oe&&t.createElement("p",{style:{fontFamily:"var(--app-text-mobile-font)",fontSize:"14px",fontWeight:"bold",marginTop:"30px"}},"You are the admin of this facility")),t.createElement(g.mQ,{style:{width:"100%",fontSize:y.tq?"12px":"20px",marginTop:"20px"},onSelect:e=>{3==e&&(0,z.GP)().pipe((0,C.P)()).subscribe({next:e=>{$(e.data)},error:()=>{}})}},t.createElement(g.td,{style:{fontFamily:"var(--app-text-mobile-font)",fontSize:"16px"}},t.createElement(g.OK,null,"INFO"),t.createElement(g.OK,null,"ACTIVITIES"),t.createElement(g.OK,null,"SERVICES")),t.createElement(g.x4,{id:"DETAILS"},t.createElement("div",{style:{width:"100%",minHeight:"60vh",overflow:"auto"}},t.createElement("div",{className:b.centeredDiv,style:{width:"inherit",fontSize:"14px",marginTop:"20px"}},e.children))),t.createElement(g.x4,{id:"ACTIVITIES"},t.createElement("div",{style:{width:"100%",minHeight:"60vh",overflow:"auto",zIndex:"-1"}},t.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end"}},t.createElement(h.zx,{light:!0,style:{display:oe?"":"none"},clicked:()=>{const e=e=>{var l,o,t,n,d,a;const r=e.steps.filter(l=>{var o,i,t,n,d,a;return void 0==(null===l||void 0===l||null===(o=l.options)||void 0===o?void 0:o.showStepAll)||1==(null===l||void 0===l||null===(i=l.options)||void 0===i?void 0:i.showStepAll)||0==(null===l||void 0===l||null===(t=l.options)||void 0===t?void 0:t.showStepAll)&&(null===l||void 0===l||null===(n=l.options)||void 0===n||null===(d=n.showOnly)||void 0===d?void 0:d.filter(e=>R.positions.map(e=>e.id).indexOf(e)>-1).length)>0||(null===l||void 0===l||null===(a=l.options)||void 0===a?void 0:a.showStepAuthor)&&(null===R||void 0===R?void 0:R.id)===(null===e||void 0===e?void 0:e.user_id)}).map((e,l)=>(0,i.Z)((0,i.Z)({},e),{},{rank:l+1}));N.h.dispatch((0,D.q4)(e)),N.h.dispatch((0,D.an)([e],m.Qc)),N.h.dispatch((0,D.q4)((0,i.Z)((0,i.Z)({},e),{},{completeSteps:e.steps,steps:r,stepIndex:2,module_id:ie.id,module:ie,isUpdating:!1}))),Y({action:f._U.setCurrentStep,value:null===e||void 0===e?void 0:e.steps[2]}),Y({action:f._U.setModuleItems,value:s.component_items}),Y({action:f._U.setModuleNewStepComponents,value:[]}),Y({action:f._U.setComponents,value:[]});const v=[...null!==(l=null===(o=r[2])||void 0===o?void 0:o.component_blueprints)&&void 0!==l?l:[]];if((null===v||void 0===v?void 0:v.length)>0){var c;const e=null===(c=v.find(e=>e.selected_fields.find(e=>"Sport"===e.field_name)))||void 0===c?void 0:c.selected_fields.find(e=>"Sport"===e.field_name);e&&(e.value="Basketball"),Y({action:f._U.setComponentBlueprints,value:v}),Y({action:f._U.setModuleNewStepComponents,value:v})}(null===u||void 0===u||null===(t=u.processModule)||void 0===t||null===(n=t.steps)||void 0===n?void 0:n.length)>0&&(null===u||void 0===u||null===(d=u.processModule)||void 0===d||null===(a=d.steps)||void 0===a||a.filter(e=>{var l;return null===e||void 0===e||null===(l=e.component_blueprints)||void 0===l?void 0:l.filter(e=>e.selected_fields.filter(e=>e.value=void 0))}))};L.find(e=>e.id===ie.procedure.id)?e(L.find(e=>e.id===ie.procedure.id)):(F(!0),(0,T.zJ)(ie.procedure.id).pipe((0,C.P)()).subscribe({next:l=>{F(!1),e(l)},error:e=>{}}))},icon:t.createElement("img",{src:w.IH})})),t.createElement(q,{events:I.filter(e=>"Expired"!==e.status&&e.module_id===(null===ie||void 0===ie?void 0:ie.id)),isAdmin:oe,onEventClick:e=>{const l=I.find(l=>l.id===(null===e||void 0===e?void 0:e.event_id));c&&(0,O.navigateToTransaction)(L,_,K,k,l,Y,R,u,R,P,W,Z,ie)}}))),t.createElement(g.x4,{id:"SERVICES"},t.createElement("div",{style:{width:"100%",minHeight:"60vh",overflow:"auto",padding:y.tq?"":"0 30%"}},t.createElement("div",{className:b.centeredDiv,style:{width:"inherit",fontSize:"14px",marginTop:"20px"}},oe&&t.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end"}},t.createElement(h.zx,{light:!0,style:{display:""},clicked:()=>{J(!0),le({type:"Service"})},icon:t.createElement("img",{src:w.IH,loading:U})})),(null===s||void 0===s||null===(d=s.component_items)||void 0===d?void 0:d.filter(e=>"Service"===e.type).length)>0&&t.createElement(t.Fragment,null,t.createElement("p",{style:{fontSize:"14px",fontFamily:"var(--app-text-main-font)",fontWeight:"bold",color:"var(--app-color-gray-dark)",paddingLeft:"5px"}},"Merchandise and Services"),j&&t.createElement("p",{style:{fontFamily:"var(--app-text-mobile-font)",color:"green",fontSize:"14px",fontWeight:"bold"},onClick:()=>V("")},j),t.createElement(E.default,{className:b.sharesTable,withColumns:!1,modern:!0,columns:["value","description","quantity","item_code","photo","controls"],list:null===s||void 0===s||null===(a=s.component_items)||void 0===a||null===(r=a.filter(e=>"Service"===e.type))||void 0===r?void 0:r.map((e,l)=>{var o;return e.qty=null!==(o=null===e||void 0===e?void 0:e.qty)&&void 0!==o?o:1,{item_code:null===e||void 0===e?void 0:e.item_code,value:null===e||void 0===e?void 0:e.value,quantity:null===e||void 0===e?void 0:e.total,description:null===e||void 0===e?void 0:e.alt_value,photo:null===e||void 0===e?void 0:e.quantity,controls:t.createElement("div",{style:{display:"flex",justifyContent:"left",justifyItems:"center",alignContent:"center",alignItems:"center"}},!oe&&t.createElement(h.zx,{light:!0,title:"Purchase",disabled:void 0===(null===R||void 0===R?void 0:R.wallet)||(null===R||void 0===R?void 0:R.wallet)<+(null===e||void 0===e?void 0:e.total),clicked:()=>{F(!0),(0,z.e_)({user_id:R.id,id:(0,m.mR)(),total:-+(null===e||void 0===e?void 0:e.total)*(null===e||void 0===e?void 0:e.qty),product:"".concat(null===e||void 0===e?void 0:e.alt_value),notes:"Purchases",quantity:null===e||void 0===e?void 0:e.qty}).pipe((0,C.P)()).subscribe({next:()=>{var l;R.wallet=+(+(null!==(l=null===R||void 0===R?void 0:R.wallet)&&void 0!==l?l:0)+B),F(!1),V("You have bought ".concat(e.qty,"x ").concat(null===e||void 0===e?void 0:e.alt_value,". You may claim the item/s")),window.scrollTo({top:0,behavior:"smooth"})},error:()=>F(!1)})},loading:0===l&&U}),!oe&&t.createElement("input",{type:"number",defaultValue:null===e||void 0===e?void 0:e.qty,style:{textAlign:"center",width:"50px",height:"40px",margin:"0 10px 0 0",fontFamily:"var(--app-text-main-font)",fontSize:"16px"},onChange:l=>{e.qty=+l.target.value}}),oe&&t.createElement(h.zx,{light:!0,icon:t.createElement(M.G,{icon:S.$aW,style:{width:"20px",height:"16px"}}),disabled:void 0===(null===R||void 0===R?void 0:R.wallet)||(null===R||void 0===R?void 0:R.wallet)<+(null===e||void 0===e?void 0:e.total),clicked:()=>{var l,o,t;F(!0),(0,x.KL)((0,i.Z)((0,i.Z)({},s),{},{component_items:null===s||void 0===s||null===(l=s.component_items)||void 0===l?void 0:l.filter(l=>(null===l||void 0===l?void 0:l.id)!==(null===e||void 0===e?void 0:e.id))}),s.id,null===(o=s.shared_users)||void 0===o?void 0:o.map(e=>e.id),s.title,null===s||void 0===s?void 0:s.is_complete,null===s||void 0===s||null===(t=s.shared_positions)||void 0===t?void 0:t.map(e=>null===e||void 0===e?void 0:e.id)).subscribe({next:e=>{_(null===e||void 0===e?void 0:e.data),F(!1)},error:()=>F(!1)})}}))}})})),t.createElement("p",{style:{fontSize:"14px",fontFamily:"var(--app-text-main-font)",color:"var(--app-color-gray-dark)",paddingLeft:"5px"}},"Note: Some products and services here may require credits to be available in your app wallet")),t.createElement("p",{style:{fontSize:"14px",fontFamily:"var(--app-text-main-font)",fontWeight:"bold",color:"var(--app-color-gray-dark)",paddingLeft:"5px"}},"Purchases Made"),j&&t.createElement("p",{style:{fontFamily:"var(--app-text-mobile-font)",color:"green",fontSize:"14px",fontWeight:"bold"},onClick:()=>V("")},j),t.createElement(E.default,{className:b.sharesTable,modern:!0,columns:["Item","Cost","Quantity","Sold To"].concat(oe?["Options"]:[]),list:null===X||void 0===X||null===(v=X.filter(e=>"Purchases"===e.stripe_status&&(oe?e.user_id!==(null===R||void 0===R?void 0:R.id):e.user_id===(null===R||void 0===R?void 0:R.id))))||void 0===v?void 0:v.map((e,l)=>{var o;return{Item:e.stripe_product,Cost:Math.abs(+(null===e||void 0===e?void 0:e.stripe_price)),Quantity:null===e||void 0===e?void 0:e.quantity,"Sold To":null===(o=Z.find(l=>l.id===(null===e||void 0===e?void 0:e.user_id)))||void 0===o?void 0:o.first_name,Options:X.find(l=>l.stripe_id===e.id)?null:t.createElement("div",{style:{display:"flex",justifyContent:"left",justifyItems:"center",alignContent:"center",alignItems:"center"}},oe&&t.createElement(h.zx,{light:!0,title:"Release",disabled:void 0===(null===R||void 0===R?void 0:R.wallet)||(null===R||void 0===R?void 0:R.wallet)<+(null===e||void 0===e?void 0:e.total),clicked:()=>{F(!0),(0,z.e_)({user_id:R.id,id:null===e||void 0===e?void 0:e.id,total:-+(null===e||void 0===e?void 0:e.stripe_price),product:"".concat(null===e||void 0===e?void 0:e.stripe_product),notes:"Purchases",quantity:null===e||void 0===e?void 0:e.quantity}).pipe((0,C.P)()).subscribe({next:l=>{var o;$([...X,l]),R.wallet=+(+(null!==(o=null===R||void 0===R?void 0:R.wallet)&&void 0!==o?o:0)+ +(null===l||void 0===l?void 0:l.stripe_price)),V("You have sold ".concat(e.qty,"x ").concat(null===e||void 0===e?void 0:e.stripe_product)),F(!1),window.scrollTo({top:0,behavior:"smooth"})},error:()=>F(!1)})},loading:0===l&&U}))}})})))),t.createElement("div",{className:G?b.mobilepopupopen:b.mobilepopup,style:{display:G?"":"none"}},t.createElement("div",{style:{width:"100%",height:"20vh",backgroundColor:"white",opacity:"0.9"},onClick:()=>J(!1)}),t.createElement("div",{className:b.mobilePopupActionContainer},t.createElement(A.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-light)"},className:b.multiselectComponent,visible:!0,mandatory:!1,items:[{label:"Court Rental",value:"Court Rental"},{label:"Equipment Rental",value:"Equipment Rental"},{label:"Food",value:"Food"},{label:"Others",value:"Others"}],onChange:e=>{le((0,i.Z)((0,i.Z)({},ee),{},{item_code:e}))},fieldLabel:"Service Type",placeholder:"Select Service"}),t.createElement("label",{className:b.fieldLabel,style:{color:"var(--app-color-gray-light",fontSize:"12px",marginTop:"10px"}},"Name"),t.createElement("input",{type:"text",className:b.fieldInput,onChange:e=>{le((0,i.Z)((0,i.Z)({},ee),{},{value:e.target.value}))}}),t.createElement("label",{className:b.fieldLabel,style:{color:"var(--app-color-gray-light",fontSize:"12px",marginTop:"10px"}},"Description"),t.createElement("input",{type:"text",className:b.fieldInput,onChange:e=>{le((0,i.Z)((0,i.Z)({},ee),{},{alt_value:e.target.value}))}}),t.createElement("label",{className:b.fieldLabel,style:{color:"var(--app-color-gray-light",fontSize:"12px",marginTop:"10px"}},"Photo"),t.createElement("input",{type:"text",className:b.fieldInput,onChange:e=>{le((0,i.Z)((0,i.Z)({},ee),{},{quantity:e.target.value}))}}),t.createElement("label",{className:b.fieldLabel,style:{color:"var(--app-color-gray-light",fontSize:"12px",marginTop:"10px"}},"Price"),t.createElement("input",{type:"number",className:b.fieldInput,onChange:e=>{le((0,i.Z)((0,i.Z)({},ee),{},{total:e.target.value}))}}),(null===ee||void 0===ee?void 0:ee.value)&&(null===ee||void 0===ee?void 0:ee.alt_value)&&(null===ee||void 0===ee?void 0:ee.item_code)&&t.createElement(h.zx,{title:"Add service",style:{width:"100%"},clicked:()=>{var e;F(!0),(0,x.np)((0,i.Z)((0,i.Z)({},ee),{},{index:null===s||void 0===s||null===(e=s.component_items)||void 0===e?void 0:e.length}),s.id).subscribe({next:e=>{s.component_items=e.data.component_items,F(!1),J(!1)},error:()=>F(!1)})},loading:U}))))};var B=o(35606),H=o(79544),j=o(98032),V=o(74369),G=o(13397),J=o(85841),Q=o(22781),K=o(3295),X=o(12892),$=o(7924),ee=o(41756),le=o.n(ee);o(16207);const oe="CustomGeneric_accordionContainer__sELnZ";var ie=o(48963);const te={itemsTable:"CustomHR_itemsTable__HAV5Z",inputValue:"CustomHR_inputValue__OSYPp",multiselectComponent:"CustomHR_multiselectComponent__m25o5",dropdownComponent:"CustomHR_dropdownComponent__l2dQs",dropdownComponent_ii:"CustomHR_dropdownComponent_ii__pPeh5",title:"CustomHR_title__qfol-",subtitle:"CustomHR_subtitle__yCda9",timer:"CustomHR_timer__iWj0M",centerDiv:"CustomHR_centerDiv__Yvw6F",avatarUrlImg:"CustomHR_avatarUrlImg__k-p8m"};var ne=o(60534),de=o(75105),ae=o(10103);(0,p.$j)(e=>{const{authenticatedUser:{position:l},authenticatedUser:o}=e.authReducer,{user:i}=e.sessionReducer,{begunModule:t,allModules:n,companyData:d,companyUsersArray:a,companyPositionsArray:r,components:v,companyProcesses:s}=e.flowReducer;return{begunModule:t,allModules:n,companyData:d,companyUsersArray:a,companyPositionsArray:r,components:v,authenticatedUser:o,user:i,companyProcesses:s}})(e=>{const{title:l}=e;return t.createElement("div",{className:oe},t.createElement("div",{style:{fontFamily:"var(--app-text-mobile-font)",fontSize:y.tq?"18px":"20px",fontWeight:"bold",marginTop:y.tq?"":"50px"}},l))});const re=e=>{var l,o,i,n,d;const{selectedComponent:a,component_blueprint:r,isUpdating:v=!0}=e,{components:s}=(0,p.v9)(e=>e.flowReducer),[u,c]=(0,t.useState)("month"),[_,b]=(0,t.useState)((0,J.v)(new Date,{weekStartsOn:1})),[x,E]=(0,t.useState)((0,Q.z)(_,{weekStartsOn:1})),[,C]=(0,f.pQ)(),k=new Date,[N,D]=(0,t.useState)(a.component_items.filter(e=>(0,K.WU)(e.value,"MM/yyyy")===(0,K.WU)(k,"MM/yyyy"))),T=e=>{var l;const{type:o,itm:i,edit:n=!0}=e;return t.createElement(t.Fragment,null,("Start Time"===o||"all"===o)&&n&&t.createElement(P,{showTimeSelect:!0,value:i.value,style:{width:"100%",border:"1px solid black",fontSize:"14px"},handleDate:e=>{i.value=e,null!==i&&void 0!==i&&i.alt_value&&null!==i&&void 0!==i&&i.value&&(i.total=(I()(new Date(i.alt_value),"DD/MM/YYYY").diff(I()(new Date(i.value),"DD/MM/YYYY"),"minutes")/60).toFixed(2),C({action:f._U.setModuleItems,value:[...a.component_items.filter(e=>e.id!==i.id),i]})),D([...N.filter(e=>e.id!==i.id),i])}}),("End Time"===o||"all"===o)&&n&&t.createElement(P,{showTimeSelect:!0,value:i.alt_value,style:{width:"100%",border:"1px solid black",fontSize:"14px"},handleDate:e=>{i.alt_value=e,null!==i&&void 0!==i&&i.alt_value&&null!==i&&void 0!==i&&i.value&&(i.total=(I()(new Date(i.alt_value),"DD/MM/YYYY").diff(I()(new Date(i.value),"DD/MM/YYYY"),"minutes")/60).toFixed(2),C({action:f._U.setModuleItems,value:[...a.component_items.filter(e=>e.id!==i.id),i]})),D([...N.filter(e=>e.id!==i.id),i])}}),("Duration"===o||"all"===o)&&n&&t.createElement("input",{defaultValue:null!==(l=null===i||void 0===i?void 0:i.total)&&void 0!==l?l:0,type:"number",className:te.inputValue,style:{fontWeight:"bold",fontSize:"14px",border:"0.3px dashed gray",height:"45px",width:"100%",margin:"20px 0",paddingLeft:"10px"},onBlur:e=>{i.total!==e.target.value&&(i.total=e.target.value,C({action:f._U.setModuleItems,value:[...a.component_items.filter(e=>e.id!==i.id),i]}))}}),("Work Details"===o||"all"===o)&&n&&t.createElement("input",{defaultValue:i.item_code,className:te.inputValue,style:{fontWeight:"bold",fontSize:"14px",border:"0.3px dashed gray",height:"48px",width:(y.tq,"100%"),minWidth:"300px",paddingLeft:"10px"},onBlur:e=>{i.item_code!==e.target.value&&(i.item_code=e.target.value,C({action:f._U.setModuleItems,value:[...a.component_items.filter(e=>e.id!==i.id),i]}))}}),("Project"===o||"all"===o)&&n&&t.createElement("div",{style:{border:null!==e&&void 0!==e&&e.disabled?"none":"0.3px dashed gray",minWidth:y.tq?"":"200px",padding:"6px 0"}},t.createElement(A.Z,{value:null===i||void 0===i?void 0:i.quantity,titleProps:{fontSize:"14px",color:"var(--app-color-gray-light)"},className:te.dropdownComponent,visible:!0,mandatory:!1,items:s.filter(e=>{var l;return e.component_fields.filter(e=>{var l;return e.component_blueprint_id===(null===O||void 0===O||null===(l=O.options)||void 0===l?void 0:l.component_id)}).length>0||e.module_id===(null===O||void 0===O||null===(l=O.options)||void 0===l?void 0:l.module_id)}).map(e=>{var l,o;let i="";return null===O||void 0===O||null===(l=O.options)||void 0===l||null===(o=l.names)||void 0===o||o.map(l=>{var o,t;return i=""===i?null===(o=e.component_fields.find(e=>e.field_name===l))||void 0===o?void 0:o.value:"".concat(i," ").concat(null===(t=e.component_fields.find(e=>e.field_name===l))||void 0===t?void 0:t.value)}),i=""!==i&&i?i:e.title,{label:i,value:i}}),onChange:e=>{i.quantity=e,i.alt_value||(i.alt_value=new Date),i.value||(i.value=new Date),C({action:f._U.setModuleItems,value:[...a.component_items.filter(e=>e.id!==i.id),i]})}},t.createElement("input",{value:null===i||void 0===i?void 0:i.quantity,className:te.inputValue,style:{fontWeight:"bold",fontSize:"14px"},readOnly:!0}))),("Actions"===o||"all"===o)&&t.createElement("div",{style:{display:"flex",justifyContent:"space-evenly",width:"50px"}},t.createElement(M.G,{icon:S.$aW,onClick:()=>{C({action:f._U.setModuleItems,value:N.filter(e=>e.id!==i.id)}),D(N.filter(e=>e.id!==i.id))}})),!n&&t.createElement("input",{value:"Duration"===o?null===i||void 0===i?void 0:i.total:"Start Time"===o?i.value?I()(i.value).format("DD MMMM YYYY HH:mm"):"":"End Time"===o?i.value?I()(i.alt_value).format("DD MMMM YYYY HH:mm"):"":"Project"===o?null===i||void 0===i?void 0:i.quantity:"Work Details"===o?null===i||void 0===i?void 0:i.item_code:"",className:te.inputValue,style:{color:"black",fontWeight:"bold",fontSize:"14px",border:"0px dashed gray",padding:"24px 5px",width:"100%"},readOnly:!0}))},P=e=>{var l,o;return t.createElement("div",{style:{width:"100%",padding:"6px 10px",border:null!==e&&void 0!==e&&e.disabled?"0px dashed gray":"0.3px dashed var(--app-color-gray-light)",alignContent:"center"}},t.createElement(R(),{selected:null!==e&&void 0!==e&&e.value?new Date(null===e||void 0===e?void 0:e.value):new Date,showTimeSelect:null!==(l=e.showTimeSelect)&&void 0!==l&&l,timeFormat:"HH:mm",timeIntervals:15,customInput:t.createElement("div",{style:{cursor:"pointer",display:"flex",justifyContent:"center",width:"100%",alignItems:"stretch",padding:"5px 0",border:"0px solid var(--app-color-gray-lighter)"}},t.createElement("input",{value:e.value?I()(e.value).format(null!==(o=e.format)&&void 0!==o?o:"DD MMMM YYYY HH:mm"):"",className:te.inputValue,type:"text",style:{flex:1,marginTop:"auto",marginBottom:"auto",outline:"none",fontFamily:"var(--app-text-main-font)",fontSize:"14px",fontWeight:"bold",lineHeight:"20px",color:"#4A4A4A",textAlign:"left",maxWidth:"98%",border:"0px"},onChange:e=>{}}),t.createElement(M.G,{icon:S.WRo,style:{margin:"0 10px",width:"14px",height:"14px"}})),className:te.singleInputContainer,onChange:l=>{e.handleDate(l)}}))},O=null===r||void 0===r||null===(l=r.selected_fields)||void 0===l?void 0:l.find(e=>"Record"===e.data_type_name&&"Project"===e.field_name);return t.createElement("div",{className:oe},O?t.createElement("div",{style:{fontFamily:"var(--app-text-mobile-font)",fontSize:y.tq?"18px":"20px",fontWeight:"normal",marginTop:y.tq?"":"50px",padding:"20px"}},e.children,t.createElement(g.mQ,{style:{width:"100%",fontSize:y.tq?"16px":"20px",marginTop:"20px"},onSelect:e=>{1===e?(D(a.component_items),b((0,J.v)(new Date,{weekStartsOn:1})),E((0,Q.z)(new Date,{weekStartsOn:1})),c("week")):(D(a.component_items),c("all"))}},t.createElement(g.td,{style:{fontFamily:"var(--app-text-mobile-font)",fontSize:"18px",fontWeight:"normal"}},t.createElement(g.OK,{style:{padding:"16px"}},"BY TIME"),t.createElement(g.OK,{style:{padding:"16px"}},"BY PROJECT")),t.createElement(g.x4,{id:"TIMESHEETS"},t.createElement("div",{style:{width:"100%",overflow:"auto"}},t.createElement("div",{style:{display:"flex",justifyContent:"space-between",width:"100%",padding:"20px"}},v&&t.createElement(h.zx,{light:!0,style:{display:""},clicked:()=>{var e,l;c(!1),setTimeout(()=>c("today"),1);const o=new Date;D([...a.component_items.filter(e=>(0,K.WU)(e.value,"d/MM/yyyy")===(0,K.WU)(o,"d/MM/yyyy")),{index:null!==(e=null===(l=a.component_items)||void 0===l?void 0:l.length)&&void 0!==e?e:0,item_code:"",value:(0,Z.now)(),alt_value:"",total:0,quantity:"",id:(0,m.mR)()}])},icon:t.createElement("img",{src:w.IH})}),u&&t.createElement("div",{style:{display:"flex"}},t.createElement(A.Z,{value:null===(o=[{label:"All",value:"all"},{label:"Today",value:"today"},{label:"This Week",value:"week"},{label:"This Month",value:"month"},{label:"Select Month",value:"select"},{label:"Custom Date",value:"custom"}].find(e=>e.value===u))||void 0===o?void 0:o.label,className:y.tq?"":te.multiselectComponent,visible:!0,mandatory:!1,items:[{label:"All",value:"all"},{label:"Today",value:"today"},{label:"This Week",value:"week"},{label:"This Month",value:"month"},{label:"Select Month",value:"select"},{label:"Custom Date",value:"custom"}],onChange:e=>{"week"===e?D(function(e){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"d/MM/yyyy",o=arguments.length>2?arguments[2]:void 0;const i=null!==o&&void 0!==o?o:new Date,t=(0,Q.z)(i,{weekStartsOn:1}),n=(0,X.D)({start:t,end:i}).map(e=>(0,K.WU)(e,l));return e.filter(e=>n.includes("".concat((0,K.WU)(e.value,l))))}(a.component_items)):"today"===e?D(a.component_items.filter(e=>(0,K.WU)(e.value,"d/MM/yyyy")===(0,K.WU)(k,"d/MM/yyyy"))):"month"===e?D(a.component_items.filter(e=>(0,K.WU)(e.value,"MM/yyyy")===(0,K.WU)(k,"MM/yyyy"))):"custom"===e?(b(k),D(a.component_items.filter(e=>(0,K.WU)(e.value,"d/MM/yyyy")===(0,K.WU)(new Date,"d/MM/yyyy")))):"all"===e&&D(a.component_items),c(e)}}),"select"===u&&t.createElement(A.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-light)"},className:y.tq?"":te.multiselectComponent,visible:!0,mandatory:!1,items:[{label:"January",value:"01"},{label:"February",value:"02"},{label:"March",value:"03"},{label:"April",value:"04"},{label:"May",value:"05"},{label:"June",value:"06"},{label:"July",value:"07"},{label:"August",value:"08"},{label:"September",value:"09"},{label:"October",value:"10"},{label:"November",value:"11"},{label:"December",value:"12"}],onChange:e=>{D(a.component_items.filter(l=>(0,K.WU)(l.value,"MM")===e))}}),"custom"===u&&t.createElement("div",{style:{display:"flex",hheight:"50px",alignItems:"center",width:"300px"}},t.createElement(P,{value:_,style:{width:"100%",border:"1px solid black"},format:"DD MMMM YYYY",handleDate:e=>{b(e),D(a.component_items.filter(l=>(0,K.WU)(l.value,"d/MM/yyyy")===(0,K.WU)(e,"d/MM/yyyy")))}})))),null!==a&&void 0!==a&&a.id?t.createElement(ne.Z,{style:{width:"100%"},tableHostSimple:ie.Z.itemsContainer_ii,columns:v?["Start Time","End Time","Work Details","Project","Duration","Actions"]:["Start Time","End Time","Work Details","Project","Duration"],list:null===(i=B.Z([H.Z(j.Z("value"))])(N.filter(e=>null!==e.alt_value)))||void 0===i?void 0:i.map(e=>({All:t.createElement(T,{itm:e,type:"all"}),"Start Time":t.createElement(T,{itm:e,type:"Start Time",edit:v}),"End Time":t.createElement(T,{itm:e,type:"End Time",edit:v}),Duration:t.createElement(T,{itm:e,type:"Duration",edit:v}),"Work Details":t.createElement(T,{itm:e,type:"Work Details",edit:v}),Project:t.createElement(T,{itm:e,type:"Project",edit:v}),Actions:t.createElement(T,{itm:e,type:"Actions",edit:v}),id:e.id})),footer:[t.createElement("br",{key:0}),t.createElement("br",{key:1}),t.createElement("br",{key:2}),t.createElement("input",{key:4,readOnly:!0,className:te.inputValue,style:{fontWeight:"bold",padding:"20px 0 20px 10px"},defaultValue:"Totals:"}),t.createElement("input",{key:4,readOnly:!0,className:te.inputValue,style:{fontWeight:"bold",padding:"20px 0"},defaultValue:"".concat(V.Z((e,l)=>+e+ +l.total,0,null!==(n=N.filter(e=>null!==e.item_code&&null!==e.alt_value))&&void 0!==n?n:[]).toFixed(2))})].concat(v?[t.createElement("br",{key:5})]:[])}):e.children)),t.createElement(g.x4,{id:"BY PROJECT"},t.createElement("div",{style:{width:"100%",overflow:"auto"}},t.createElement("div",{style:{display:"flex",justifyContent:"flex-end",width:"100%",padding:"20px"}},t.createElement("div",{style:{display:"flex",height:"50px",alignItems:"center",width:"auto"}},t.createElement(A.Z,{value:null===(d=[{label:"This Week",value:"week"},{label:"This Month",value:"month"},{label:"Select Month",value:"select"},{label:"Custom Date",value:"custom"}].find(e=>e.value===u))||void 0===d?void 0:d.label,className:te.multiselectComponent,visible:!0,mandatory:!1,items:[{label:"This Week",value:"week"},{label:"This Month",value:"month"},{label:"Select Month",value:"select"},{label:"Custom Date",value:"custom"}],onChange:e=>{if("week"===e){const e=(0,J.v)(new Date,{weekStartsOn:1});b(e),E((0,Q.z)(e,{weekStartsOn:1}))}c(e)}}),"select"===u&&t.createElement(A.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-light)"},className:y.tq?"":te.multiselectComponent,visible:!0,mandatory:!1,items:[{label:"January",value:"00"},{label:"February",value:"01"},{label:"March",value:"02"},{label:"April",value:"03"},{label:"May",value:"04"},{label:"June",value:"05"},{label:"July",value:"06"},{label:"August",value:"07"},{label:"September",value:"08"},{label:"October",value:"09"},{label:"November",value:"10"},{label:"December",value:"11"}],onChange:e=>{const l=(0,K.WU)(new Date,"yyyy"),o=new Date(l,+e,1),i=(0,$.V)(o);b(i),E(o)}}),"custom"===u&&t.createElement("div",{style:{display:"flex",height:"50px",alignItems:"center",width:"300px"}},t.createElement(P,{value:_,style:{width:"100%",border:"1px solid black"},format:"DD MMMM YYYY",handleDate:e=>{const l=(0,J.v)(e,{weekStartsOn:1});b(l),E((0,Q.z)(l,{weekStartsOn:1}))}})))),null!==a&&void 0!==a&&a.id?t.createElement(ne.Z,{style:{width:"100%"},tableHostSimple:ie.Z.itemsContainer_ii,columns:["Project"].concat("select"===u?["".concat((0,K.WU)(x,"MMM"))]:"month"===u?["".concat((0,K.WU)(new Date,"MMM"))]:(0,X.D)({start:x,end:_}).map(e=>(0,K.WU)(e,"E MMM d"))),list:s.filter(e=>{var l;return e.component_fields.filter(e=>{var l;return e.component_blueprint_id===(null===O||void 0===O||null===(l=O.options)||void 0===l?void 0:l.component_id)}).length>0||e.module_id===(null===O||void 0===O||null===(l=O.options)||void 0===l?void 0:l.module_id)}).map(e=>{var l,o;let i="";null===O||void 0===O||null===(l=O.options)||void 0===l||null===(o=l.names)||void 0===o||o.map(l=>{var o,t;return i=""===i?null===(o=e.component_fields.find(e=>e.field_name===l))||void 0===o?void 0:o.value:"".concat(i," ").concat(null===(t=e.component_fields.find(e=>e.field_name===l))||void 0===t?void 0:t.value)}),i=""!==i&&i?i:e.title;const n={Project:t.createElement("input",{defaultValue:i,className:te.inputValue,style:{fontSize:v?"15px":"14px",fontWeight:"bold",width:y.tq?"100%":"300px",height:"40px",margin:"10px 0"},readOnly:!0})};return"month"===u?n["".concat((0,K.WU)(new Date,"MMM"))]=t.createElement("input",{defaultValue:N.filter(e=>e.quantity===i&&"".concat((0,K.WU)(e.value,"MMM"))==="".concat((0,K.WU)(new Date,"MMM"))).map(e=>null===e||void 0===e?void 0:e.total).reduce((e,l)=>e+ +l,0),className:te.inputValue,style:{fontSize:v?"15px":"14px",fontWeight:"bold",height:"40px",textAlign:"left",margin:"10px 0"},readOnly:!0}):"select"===u?n["".concat((0,K.WU)(x,"MMM"))]=t.createElement("input",{defaultValue:N.filter(e=>e.quantity===i&&"".concat((0,K.WU)(e.value,"MMM"))==="".concat((0,K.WU)(x,"MMM"))).map(e=>null===e||void 0===e?void 0:e.total).reduce((e,l)=>e+ +l,0),className:te.inputValue,style:{fontSize:v?"15px":"14px",fontWeight:"bold",height:"40px",textAlign:"left",margin:"10px 0"},readOnly:!0}):(0,X.D)({start:x,end:_}).map(e=>n["".concat((0,K.WU)(e,"E MMM d"))]=t.createElement("input",{defaultValue:N.filter(l=>l.quantity===i&&"".concat((0,K.WU)(l.value,"E MMM d"))==="".concat((0,K.WU)(e,"E MMM d"))).map(e=>null===e||void 0===e?void 0:e.total).reduce((e,l)=>e+ +l,0),className:te.inputValue,style:{fontSize:v?"15px":"14px",fontWeight:"bold",width:"150px",height:"40px",textAlign:"left",margin:"10px 0",border:v?"0.5px dashed black":"none"},onBlur:l=>{const o=N.find(l=>l.quantity===i&&null===l.item_code&&"".concat((0,K.WU)(null===l||void 0===l?void 0:l.value,"E MMM d"))==="".concat((0,K.WU)(e,"E MMM d")));if(o)o.total=l.target.value,C({action:f._U.updateModuleItems,value:o}),D([...N.filter(e=>e.id!==o.id),o]);else{const o={value:I()(e).format("YYYY-MM-DD HH:mm:ss"),total:l.target.value,quantity:i,id:(0,m.mR)()};C({action:f._U.addModuleItems,value:o}),D([...N,o])}}})),n})}):e.children)))):t.createElement("p",null,"This custom template requires a Transaction List component"))},ve=e=>{var l,o,i,n,d,a,r;const{selectedComponent:v,begunModule:s,goto:u,component_blueprint:c,isUpdating:_=!0}=e,{companyData:b,companyUsersArray:E,components:C}=(0,p.v9)(e=>e.flowReducer),{authenticatedUser:k}=(0,p.v9)(e=>e.authReducer),[Z,N]=(0,t.useState)(!1),[D,T]=(0,t.useState)((null===v||void 0===v||null===(l=v.component_items)||void 0===l?void 0:l.filter(e=>!(null!==e&&void 0!==e&&e.quantity)).length)>0?null===v||void 0===v||null===(o=v.component_items)||void 0===o?void 0:o.filter(e=>!(null!==e&&void 0!==e&&e.quantity)):null===v||void 0===v?void 0:v.component_items),[P,O]=(0,t.useState)((null===v||void 0===v||null===(i=v.component_items)||void 0===i?void 0:i.filter(e=>!(null!==e&&void 0!==e&&e.quantity)).length)>0?"forapproval":"all"),[z,L]=(0,t.useState)((0,J.v)(new Date,{weekStartsOn:1})),[U,F]=(0,t.useState)((0,Q.z)(z,{weekStartsOn:1})),[W,q]=(0,f.pQ)(),Y=e=>{var l,o,i,n;return t.createElement("div",{style:{width:"100%",margin:"30px 0",border:null!==e&&void 0!==e&&e.disabled?"0px dashed gray":"0.5px dashed gray",alignContent:"center",padding:"8px 0"}},null!==e&&void 0!==e&&e.disabled?t.createElement("div",{style:{fontSize:"14px",fontWeight:"bold",border:"0px dashed gray"}},e.value?I()(e.value).format(null!==(l=e.format)&&void 0!==l?l:"DD MMMM YYYY HH:mm"):""):t.createElement(R(),{disabled:null!==(o=null===e||void 0===e?void 0:e.disabled)&&void 0!==o&&o,selected:null!==e&&void 0!==e&&e.value?new Date(null===e||void 0===e?void 0:e.value):new Date,showTimeSelect:null!==(i=e.showTimeSelect)&&void 0!==i&&i,timeFormat:"HH:mm",timeIntervals:15,customInput:t.createElement("div",{style:{cursor:"pointer",display:"flex",justifyContent:"center",width:"100%",alignItems:"stretch",padding:"5px",border:"0px solid var(--app-color-gray-lighter)"}},t.createElement("input",{value:e.value?I()(e.value).format(null!==(n=e.format)&&void 0!==n?n:"DD MMMM YYYY HH:mm"):"",className:te.inputValue,type:"text",style:{flex:1,marginTop:"auto",marginBottom:"auto",outline:"none",fontFamily:"var(--app-text-main-font)",fontSize:"14px",lineHeight:"20px",color:"#4A4A4A",textAlign:"left",maxWidth:"98%",border:"0px",fontWeight:"bold"},onChange:e=>{}}),t.createElement(M.G,{icon:S.WRo,style:{margin:"0 10px",width:"14px",height:"14px"}})),className:te.singleInputContainer,onChange:l=>{e.handleDate(l)}}))},G=null===c||void 0===c||null===(n=c.selected_fields)||void 0===n?void 0:n.find(e=>"Dropdown"===e.data_type_name&&"Type"===e.field_name);return t.createElement("div",{className:oe},G?t.createElement("div",{style:{fontFamily:"var(--app-text-mobile-font)",fontSize:y.tq?"18px":"20px",fontWeight:"normal",marginTop:y.tq?"":"50px",padding:"20px"}},e.children,t.createElement(g.mQ,{style:{width:"100%",fontSize:y.tq?"16px":"20px",marginTop:"20px"}},t.createElement(g.td,{style:{fontFamily:"var(--app-text-mobile-font)",fontSize:"18px",fontWeight:"normal"}},t.createElement(g.OK,{style:{padding:"16px"}},"LEAVES"),t.createElement(g.OK,{style:{padding:"16px"},onChange:()=>{T(v.component_items),O("all")}},"BALANCES")),t.createElement(g.x4,{id:"LEAVES"},t.createElement("div",{style:{width:"100%",overflow:"auto"}},t.createElement("div",{style:{display:"flex",justifyContent:"space-between",width:"100%",padding:"20px"}},_&&t.createElement(h.zx,{light:!0,style:{display:""},clicked:()=>{var e;T([...D,{index:null!==(e=null===D||void 0===D?void 0:D.length)&&void 0!==e?e:0,item_code:"",value:"",alt_value:"",total:0,quantity:"",id:(0,m.mR)()}])},icon:t.createElement("img",{src:w.IH})}),t.createElement("div",{style:{display:"flex"}},t.createElement(A.Z,{value:null===(d=[{label:"All",value:"all"},{label:"For Approval",value:"forapproval"},{label:"Approved",value:"approved"},{label:"Disapproved",value:"disapproved"},{label:"Select Month",value:"select"}].find(e=>e.value===P))||void 0===d?void 0:d.label,className:y.tq?"":te.multiselectComponent,visible:!0,mandatory:!1,items:[{label:"All",value:"all"},{label:"For Approval",value:"forapproval"},{label:"Approved",value:"approved"},{label:"Disapproved",value:"disapproved"},{label:"Select Month",value:"select"}],onChange:e=>{"forapproval"===e?T(v.component_items.filter(e=>!(null!==e&&void 0!==e&&e.quantity))):"approved"===e?T(v.component_items.filter(e=>1===+e.quantity)):"disapproved"===e?T(v.component_items.filter(e=>9===+e.quantity)):"custom"===e?(L(new Date),T(v.component_items.filter(e=>(0,K.WU)(e.value,"d/MM/yyyy")===(0,K.WU)(new Date,"d/MM/yyyy")))):"all"===e&&T(v.component_items),O(e)}}),"select"===P&&t.createElement(A.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-light)"},className:y.tq?"":te.multiselectComponent,visible:!0,mandatory:!1,items:[{label:"January",value:"01"},{label:"February",value:"02"},{label:"March",value:"03"},{label:"April",value:"04"},{label:"May",value:"05"},{label:"June",value:"06"},{label:"July",value:"07"},{label:"August",value:"08"},{label:"September",value:"09"},{label:"October",value:"10"},{label:"November",value:"11"},{label:"December",value:"12"}],onChange:e=>{T(v.component_items.filter(l=>(0,K.WU)(l.value,"MM")===e))}}),"custom"===P&&t.createElement("div",{style:{display:"flex",height:"50px",alignItems:"center",width:"300px"}},t.createElement(Y,{value:z,style:{width:"100%",border:"1px solid black"},format:"DD MMMM YYYY",handleDate:e=>{L(e),T(v.component_items.filter(l=>(0,K.WU)(l.value,"d/MM/yyyy")===(0,K.WU)(e,"d/MM/yyyy")))}})))),null!==v&&void 0!==v&&v.id?t.createElement(ne.Z,{style:{width:"100%"},tableHostSimple:ie.Z.itemsContainer_ii,layeredColumns:[{label:"Date From"},{label:"Date To"},{label:"Details"},{label:"Type"},{label:"Duration"},{label:"Status"},{label:"Actions"}],list:null===(a=B.Z([H.Z(j.Z("index"))])(D))||void 0===a?void 0:a.map((l,o)=>{var i,n,d;const a=1===+l.quantity||9===+l.quantity;return{"Date From":t.createElement(Y,{disabled:a||!_,showTimeSelect:!0,value:l.value,style:{width:"100%",border:"1px solid black"},handleDate:e=>{l.value=e,null!==l&&void 0!==l&&l.alt_value&&null!==l&&void 0!==l&&l.value&&(l.total=(I()(new Date(l.alt_value),"DD/MM/YYYY").diff(I()(new Date(l.value),"DD/MM/YYYY"),"minutes")/60).toFixed(2),document.getElementById("Duration".concat(o)).value=l.total,q({action:f._U.setModuleItems,value:[...v.component_items.filter(e=>e.id!==l.id),l]})),T([...D.filter(e=>e.id!==l.id),l])}}),"Date To":t.createElement(Y,{disabled:a||!_,showTimeSelect:!0,value:l.alt_value,style:{width:"100%",border:"1px solid black"},handleDate:e=>{l.alt_value=e,null!==l&&void 0!==l&&l.alt_value&&null!==l&&void 0!==l&&l.value&&(l.total=(I()(new Date(l.alt_value),"DD/MM/YYYY").diff(I()(new Date(l.value),"DD/MM/YYYY"),"minutes")/60).toFixed(2),document.getElementById("Duration".concat(o)).value=l.total,q({action:f._U.setModuleItems,value:[...v.component_items.filter(e=>e.id!==l.id),l]})),T([...D.filter(e=>e.id!==l.id),l])}}),Duration:a||!_?t.createElement("div",{style:{fontSize:"14px",fontWeight:"bold"}},null!==(i=null===l||void 0===l?void 0:l.total)&&void 0!==i?i:0):t.createElement("input",{disabled:1===+l.quantity||9===+l.quantity,defaultValue:null!==(n=null===l||void 0===l?void 0:l.total)&&void 0!==n?n:0,id:"Duration".concat(o),className:te.inputValue,style:{fontWeight:"bold",border:"0.5px dashed gray",height:"50px",width:"100%"},onBlur:e=>{l.total!==e.target.value&&(l.total=e.target.value,q({action:f._U.setModuleItems,value:[...v.component_items.filter(e=>e.id!==l.id),l]})),T([...D.filter(e=>e.id!==l.id),l])}}),Details:a||!_?t.createElement("div",{style:{fontSize:"14px",fontWeight:"bold"}},null===l||void 0===l?void 0:l.item_code):t.createElement("input",{defaultValue:l.item_code,disabled:1===+l.quantity||9===+l.quantity,className:te.inputValue,style:{fontWeight:"bold",border:"0.5px dashed gray",height:y.tq?"100px":"50px",width:y.tq?"100%":"300px"},onBlur:e=>{l.item_code!==e.target.value&&(l.item_code=e.target.value,q({action:f._U.setModuleItems,value:[...v.component_items.filter(e=>e.id!==l.id),l]}))}}),Status:t.createElement("div",{style:{fontSize:_?"15px":"14px",fontWeight:"bold"}},1===+l.quantity?"Approved":9===+l.quantity?"Disapproved":"For Approval"),Type:a||!_?t.createElement("div",{style:{fontSize:"14px",fontWeight:"bold"}},null===l||void 0===l?void 0:l.type):t.createElement("div",{style:{border:null!==e&&void 0!==e&&e.disabled?"0px dashed gray":"0.5px dashed gray",width:y.tq?"100%":"240px",pointerEvents:1===+l.quantity||9===+l.quantity?"none":"",padding:"9px 0"}},t.createElement(A.Z,{value:null===l||void 0===l?void 0:l.type,titleProps:{fontSize:"14px",color:"var(--app-color-gray-light)"},className:te.dropdownComponent,visible:!0,mandatory:!1,items:null===(d=G.options)||void 0===d?void 0:d.list.map(e=>({label:e,value:e})),onChange:e=>{l.type=e,q({action:f._U.setModuleItems,value:[...v.component_items.filter(e=>e.id!==l.id),l]})}},t.createElement("input",{value:null===l||void 0===l?void 0:l.type,className:te.inputValue,style:{fontWeight:"bold",border:"0px dashed gray",paddingLeft:"10px"},readOnly:!0}))),Actions:t.createElement("div",{style:{display:"flex",justifyContent:"space-evenly",paddingTop:"10px",minWidth:"50px"}},k.id===v.created_by.id&&t.createElement(M.G,{icon:S.u8Q,onClick:()=>{l.quantity=1,q({action:f._U.setModuleItems,value:[...v.component_items.filter(e=>e.id!==l.id),l]}),T([...D.filter(e=>e.id!==l.id),l]),null!==v&&void 0!==v&&v.id&&(0,x.np)(l,v.id).subscribe({})},style:{color:1===+l.quantity?"var(--app-color-gray-lightest)":"green",cursor:"pointer",pointerEvents:1===+l.quantity?"none":""}}),k.id===v.created_by.id&&t.createElement(M.G,{icon:S.QWY,onClick:()=>{l.quantity=9,q({action:f._U.setModuleItems,value:[...v.component_items.filter(e=>e.id!==l.id),l]}),T([...D.filter(e=>e.id!==l.id),l]),null!==v&&void 0!==v&&v.id&&(0,x.np)(l,v.id).subscribe({})},style:{color:9===+l.quantity?"var(--app-color-gray-lightest)":"red",cursor:"pointer",pointerEvents:9===+l.quantity?"none":""}}),t.createElement(M.G,{icon:S.$aW,onClick:()=>{q({action:f._U.setModuleItems,value:D.filter(e=>e.id!==l.id)}),T(D.filter(e=>e.id!==l.id))},style:{color:0!==+l.quantity?"var(--app-color-gray-lightest)":"black",cursor:"pointer",pointerEvents:0!==+l.quantity?"none":""}})),id:l.id}})}):e.children)),t.createElement(g.x4,{id:"BALANCES"},t.createElement("div",{style:{width:"100%",overflow:"auto"}},null!==v&&void 0!==v&&v.id?t.createElement(ne.Z,{style:{width:"100%"},tableHostSimple:ie.Z.itemsContainer_ii,modern:!!y.tq,layeredColumns:[{label:"Type"},{label:"Allocated"},{label:"For Approval"},{label:"Availed"},{label:"Balance"}],list:null===(r=G.options)||void 0===r?void 0:r.list.map(e=>{var l,o,i,n,d,a,r;return{Type:t.createElement("input",{className:te.inputValue,defaultValue:e,style:{fontWeight:"bold",fontSize:_?"15px":"14px",height:"40px",width:"100%"},readOnly:!0}),Allocated:t.createElement("input",{className:te.inputValue,defaultValue:null!==(l=null===(o=v.component_fields.find(l=>l.field_name===e))||void 0===o?void 0:o.value)&&void 0!==l?l:"0",style:{fontWeight:"bold",fontSize:_?"15px":"14px",height:"40px",width:"100%"},readOnly:!0}),"For Approval":t.createElement("input",{className:te.inputValue,defaultValue:"".concat(V.Z((e,l)=>+e+ +l.total,0,null!==(i=v.component_items.filter(l=>l.type===e&&0===+l.quantity))&&void 0!==i?i:[]).toFixed(2)),style:{fontWeight:"bold",fontSize:_?"15px":"14px",height:"40px",width:"100%"},readOnly:!0}),Availed:t.createElement("input",{className:te.inputValue,defaultValue:"".concat(V.Z((e,l)=>+e+ +l.total,0,null!==(n=v.component_items.filter(l=>l.type===e&&1===+l.quantity))&&void 0!==n?n:[]).toFixed(2)),style:{fontWeight:"bold",fontSize:_?"15px":"14px",height:"40px",width:"100%"},readOnly:!0}),Balance:t.createElement("input",{className:te.inputValue,defaultValue:"".concat((+(null!==(d=null===(a=v.component_fields.find(l=>l.field_name===e))||void 0===a?void 0:a.value)&&void 0!==d?d:0)-V.Z((e,l)=>+e+ +l.total,0,null!==(r=v.component_items.filter(l=>l.type===e&&1===+l.quantity))&&void 0!==r?r:[])).toFixed(2)),style:{fontWeight:"bold",fontSize:_?"15px":"14px",height:"40px",width:"100%"},readOnly:!0})}})}):e.children)))):t.createElement("p",null,"Note: This custom template requires a Transaction List component"))},se=e=>{var l,o,n,d,a,r,v;const{selectedComponent:s,begunModule:u,goto:c,component_blueprint:_,isUpdating:b=!0}=e,{authenticatedUser:x}=(0,p.v9)(e=>e.authReducer),[C,k]=(0,t.useState)(!1),[Z,I]=(0,t.useState)((null===s||void 0===s||null===(l=s.component_items)||void 0===l?void 0:l.length)>0?s.component_items:[{item_code:"",value:"",alt_value:"",type:"goal",id:(0,m.mR)()}]),[N,D]=(0,t.useState)("goal"),[T,P]=(0,f.pQ)(),O={clipboard:{matchers:[]},toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],["link","image","video","formula"],[{header:[1,2,3,4,5,6,!1]}],[{list:"ordered"},{list:"bullet"},{list:"check"}],[{size:["small",!1,"large","huge"]}]]},z=["header","font","bold","italic","underline","strike","blockquote","list","bullet","indent","link","image"],L=()=>t.createElement(h.zx,{light:!0,style:{display:""},clicked:()=>{var e;I([...Z,{index:null!==(e=null===Z||void 0===Z?void 0:Z.length)&&void 0!==e?e:0,type:N,item_code:"",value:"",alt_value:"",total:"",quantity:"",id:(0,m.mR)()}])},icon:t.createElement("img",{src:w.IH})}),R=e=>{var l;return t.createElement(le(),{modules:null!==e&&void 0!==e&&e.showToolbar?O:(0,i.Z)((0,i.Z)({},O),{},{toolbar:!1}),style:{fontFamily:"var(--app-text-main-font)",minHeight:"200px"},readOnly:null!==(l=null===e||void 0===e?void 0:e.readOnly)&&void 0!==l&&l,formats:z,defaultValue:null===e||void 0===e?void 0:e.value,onChange:null===e||void 0===e?void 0:e.onChange,onBlur:null===e||void 0===e?void 0:e.onBlur,theme:"snow"})},U=null===_||void 0===_||null===(o=_.selected_fields)||void 0===o?void 0:o.find(e=>"Dropdown"===e.data_type_name&&"Goal"===e.field_name),F=null===_||void 0===_||null===(n=_.selected_fields)||void 0===n?void 0:n.find(e=>"Dropdown"===e.data_type_name&&"KPI"===e.field_name);return t.createElement("div",{className:oe},U&&F?t.createElement("div",{style:{fontFamily:"var(--app-text-mobile-font)",fontSize:y.tq?"18px":"20px",fontWeight:"bold",marginTop:y.tq?"":"50px",padding:"20px"}},e.children,t.createElement(g.mQ,{style:{width:"100%",fontSize:y.tq?"16px":"20px",marginTop:"20px"},onSelect:e=>{D(1===e?"kpi":"goal")}},t.createElement(g.td,{style:{fontFamily:"var(--app-text-mobile-font)",fontSize:y.tq?"14px":"16px",fontWeight:"normal"}},t.createElement(g.OK,null,t.createElement("p",null,"TARGET GOALS")),t.createElement(g.OK,null,t.createElement("p",null,"KEY PERFORMANCE INDICATORS"))),t.createElement(g.x4,{id:"TARGET GOALS"},t.createElement("div",{style:{width:"100%",overflow:"auto"}},s.created_by.id===x.id&&t.createElement("div",{style:{display:"flex",justifyContent:"left"}},b&&L()),null!==s&&void 0!==s&&s.id&&s.created_by.id===x.id?t.createElement(E.default,{modern:!!y.tq,columns:["Goal","Description","Result","Employee Comment"].concat(b?["Actions"]:[]),list:null===(d=B.Z([G.Z(j.Z("value"))])(Z.filter(e=>"goal"===e.type)))||void 0===d?void 0:d.map((e,l)=>{var o,i,n,d;return{Goal:t.createElement("div",{style:{pointerEvents:b?"":"none"}},t.createElement("div",{style:{border:"0.5px dashed gray",minWidth:y.tq?"":"300px",width:"auto"}},t.createElement(A.Z,{value:null===e||void 0===e?void 0:e.item_code,className:te.dropdownComponent,visible:!0,mandatory:!1,items:null===(o=U.options)||void 0===o?void 0:o.list.map(e=>({label:e,value:e})),onChange:l=>{e.item_code=l,P({action:f._U.setModuleItems,value:[...s.component_items.filter(l=>l.id!==e.id),e]})}})),t.createElement("textarea",{defaultValue:e.value,className:te.inputValue,style:{fontWeight:"bold",fontSize:"16px",border:"0.5px dashed gray",minHeight:"150px",width:"100%",paddingLeft:"20px",marginTop:"10px"},placeholder:"Goal Item",onBlur:l=>{e.value!==l.target.value&&(e.value=l.target.value,P({action:f._U.setModuleItems,value:[...s.component_items.filter(l=>l.id!==e.id),e]}))}})),Description:t.createElement("div",{style:{border:"0.5px dashed gray",width:"auto",pointerEvents:b?"":"none"}},t.createElement(R,{showToolbar:!(y.tq||!b),value:null!==(i=null===e||void 0===e?void 0:e.alt_value)&&void 0!==i?i:"",onBlur:()=>{P({action:f._U.setModuleItems,value:[...s.component_items.filter(l=>l.id!==e.id),e]})},onChange:l=>{e.alt_value=l}})),Result:t.createElement("div",{style:{border:"0.5px dashed gray",width:"auto",pointerEvents:b?"":"none"}},t.createElement(R,{showToolbar:!(y.tq||!b),value:null!==(n=null===e||void 0===e?void 0:e.quantity)&&void 0!==n?n:"",onBlur:()=>{P({action:f._U.setModuleItems,value:[...s.component_items.filter(l=>l.id!==e.id),e]})},onChange:l=>{e.quantity=l}})),"Employee Comment":t.createElement("div",{style:{border:"0px dashed gray",pointerEvents:b?"":"none"}},t.createElement(R,{value:null!==(d=null===e||void 0===e?void 0:e.total)&&void 0!==d?d:"",readOnly:!0,showToolbar:!1})),Actions:t.createElement("div",{style:{display:"flex",justifyContent:"space-evenly"}},t.createElement(M.G,{icon:S.$aW,onClick:()=>{P({action:f._U.setModuleItems,value:Z.filter(l=>l.id!==e.id)}),I(Z.filter(l=>l.id!==e.id))},style:{cursor:"pointer",width:"30px"}})),id:e.id}})}):t.createElement("br",null),null!==s&&void 0!==s&&s.id&&s.assigned_to.id===x.id?t.createElement(E.default,{modern:!0,className:te.itemsTable,columns:["Goal","Goal Item","Description","Result","Comments"],list:null===(a=B.Z([G.Z(j.Z("type"))])(Z.filter(e=>"goal"===e.type)))||void 0===a?void 0:a.map((e,l)=>{var o,i;return{Goal:t.createElement("input",{defaultValue:e.item_code,className:te.inputValue,style:{border:"0.5px dashed gray",padding:"10px",margin:"10px",fontWeight:"bold",fontSize:"16px",width:"100%"},readOnly:!0}),"Goal Item":t.createElement("div",{style:{width:"auto"}},t.createElement("textarea",{defaultValue:e.value,className:te.inputValue,style:{border:"0.5px dashed gray",height:"auto",minHeight:"100px",width:"100%",padding:"10px",margin:"10px",fontWeight:"bold",fontSize:"16px"},readOnly:!0})),Description:t.createElement("div",{style:{border:"0.5px dashed gray",width:"auto"}},t.createElement(R,{value:null!==(o=null===e||void 0===e?void 0:e.alt_value)&&void 0!==o?o:"",readOnly:!0,showToolbar:!1})),Owner:t.createElement("div",{style:{border:"0.5px dashed gray",width:"auto"}},t.createElement("textarea",{defaultValue:e.quantity,className:te.inputValue,style:{fontWeight:"bolder",border:"1px dashed gray",minHeight:"50px",width:"100%",paddingLeft:"10px",margin:"10px"},disabled:!0})),Comments:t.createElement("div",{style:{border:"0.5px dashed gray"}},t.createElement(R,{showToolbar:!y.tq,value:null!==(i=null===e||void 0===e?void 0:e.total)&&void 0!==i?i:"",onBlur:()=>{P({action:f._U.setModuleItems,value:[...s.component_items.filter(l=>l.id!==e.id),e]})},onChange:l=>{e.total=l}})),id:e.id}})}):t.createElement("br",null))),t.createElement(g.x4,{id:"KPI"},t.createElement("div",{style:{width:"100%",overflow:"auto"}},s.created_by.id===x.id&&t.createElement("div",{style:{display:"flex",justifyContent:"left"}},b&&L()),null!==s&&void 0!==s&&s.id&&s.created_by.id===x.id?t.createElement(E.default,{modern:!!y.tq,className:te.itemsTable,columns:["KPI","KPI Elements","Owner","Comments"].concat(b?["Actions"]:[]),list:null===(r=B.Z([G.Z(j.Z("value"))])(Z.filter(e=>"kpi"===e.type)))||void 0===r?void 0:r.map((e,l)=>{var o,i,n,d;return{KPI:t.createElement("div",{style:{pointerEvents:b?"":"none"}},t.createElement("div",{style:{border:"0.5px dashed gray",minWidth:y.tq?"":"300px",width:"auto"}},t.createElement(A.Z,{value:null===e||void 0===e?void 0:e.item_code,className:te.dropdownComponent,visible:!0,mandatory:!1,items:null===(o=F.options)||void 0===o?void 0:o.list.map(e=>({label:e,value:e})),onChange:l=>{e.item_code=l,P({action:f._U.setModuleItems,value:[...s.component_items.filter(l=>l.id!==e.id),e]})}})),t.createElement("textarea",{defaultValue:e.value,className:te.inputValue,style:{fontWeight:"bold",fontSize:"16px",border:"0.5px dashed gray",minHeight:"150px",width:"100%",paddingLeft:"20px",marginTop:"10px"},placeholder:"KPI Item",onBlur:l=>{e.value!==l.target.value&&(e.value=l.target.value,P({action:f._U.setModuleItems,value:[...s.component_items.filter(l=>l.id!==e.id),e]}))}})),"KPI Elements":t.createElement("div",{style:{border:"0.5px dashed gray",width:"auto",pointerEvents:b?"":"none"}},t.createElement(R,{showToolbar:!(y.tq||!b),value:null!==(i=null===e||void 0===e?void 0:e.alt_value)&&void 0!==i?i:"",onBlur:l=>{P({action:f._U.setModuleItems,value:[...s.component_items.filter(l=>l.id!==e.id),e]})},onChange:l=>{e.alt_value=l}})),Owner:t.createElement("div",{style:{border:"0.5px dashed gray",width:"auto",pointerEvents:b?"":"none"}},t.createElement(R,{showToolbar:!(y.tq||!b),value:null!==(n=null===e||void 0===e?void 0:e.quantity)&&void 0!==n?n:"",onBlur:l=>{P({action:f._U.setModuleItems,value:[...s.component_items.filter(l=>l.id!==e.id),e]})},onChange:l=>{e.quantity=l}})),Comments:t.createElement("div",{style:{border:"0.5px dashed gray",pointerEvents:b?"":"none"}},t.createElement(R,{showToolbar:!(y.tq||!b),value:null!==(d=null===e||void 0===e?void 0:e.total)&&void 0!==d?d:"",onBlur:l=>{P({action:f._U.setModuleItems,value:[...s.component_items.filter(l=>l.id!==e.id),e]})},onChange:l=>{e.total=l}})),Actions:t.createElement("div",{style:{display:"flex",justifyContent:"space-evenly"}},t.createElement(M.G,{icon:S.$aW,onClick:()=>{P({action:f._U.setModuleItems,value:Z.filter(l=>l.id!==e.id)}),I(Z.filter(l=>l.id!==e.id))},style:{cursor:"pointer"}})),id:e.id}})}):t.createElement("br",null),null!==s&&void 0!==s&&s.id&&s.assigned_to.id===x.id?t.createElement(E.default,{modern:!0,className:te.itemsTable,columns:["KPI","KPI Item","KPI Element","Result","Owner"],list:null===(v=B.Z([G.Z(j.Z("type"))])(Z.filter(e=>"kpi"===e.type)))||void 0===v?void 0:v.map((e,l)=>{var o,i,n;return{KPI:t.createElement("input",{defaultValue:e.item_code,className:te.inputValue,style:{fontWeight:"bold",border:"0.5px dashed gray",padding:"10px",minHeight:"50px",margin:"10px",fontSize:"16px",width:"100%"},readOnly:!0}),"KPI Item":t.createElement("div",{style:{width:"auto"}},t.createElement("textarea",{defaultValue:e.value,className:te.inputValue,style:{border:"0.5px dashed gray",height:"auto",minHeight:"100px",width:"100%",paddingLeft:"10px",margin:"10px",fontWeight:"bold",fontSize:"16px"},readOnly:!0})),"KPI Element":t.createElement("div",{style:{border:"0.5px dashed gray",width:"auto"}},t.createElement(R,{value:null!==(o=null===e||void 0===e?void 0:e.alt_value)&&void 0!==o?o:"",readOnly:!0,showToolbar:!1})),Owner:t.createElement("div",{style:{border:"0.5px dashed gray",width:"auto"}},t.createElement(R,{value:null!==(i=null===e||void 0===e?void 0:e.quantity)&&void 0!==i?i:"",readOnly:!0,showToolbar:!1})),Comments:t.createElement("div",{style:{border:"0px dashed gray",width:"auto"}},t.createElement(R,{value:null!==(n=null===e||void 0===e?void 0:e.total)&&void 0!==n?n:"",readOnly:!0,showToolbar:!1})),id:e.id}})}):t.createElement("br",null))))):t.createElement("p",null,"Note: This custom template requires a Transaction List component"))},ue=e=>{var l,o,n;const{selectedComponent:d,authenticatedUser:a,component_blueprint:r,isUpdating:v=!0}=e,{companyUsersArray:s}=(0,p.v9)(e=>e.flowReducer),[u,c]=(0,f.pQ)(),[m,_]=(0,t.useState)(I()()),[g,b]=(0,t.useState)(),[E,C]=(0,t.useState)(),[k,Z]=(0,t.useState)(),[N,D]=(0,t.useState)(""),[T,P]=(0,t.useState)(!1),[O,z]=(0,t.useState)(s);(0,t.useEffect)(()=>{const e=setInterval(()=>{_(I()())},1e3);return()=>{window.clearInterval(e)}},[]),(0,t.useEffect)(()=>{s.length<2&&(0,de.AW)(!0).pipe((0,ae.q)(1)).subscribe({next:e=>{z([]),setTimeout(()=>z([...e,a]),10)}})},[]);const L=null===r||void 0===r||null===(l=r.selected_fields)||void 0===l?void 0:l.find(e=>"People"===e.data_type_name&&"Employee"===e.field_name);return t.createElement("div",{className:oe},g&&(null===k||void 0===k?void 0:k.id)&&t.createElement(h.U7,{hasCloseIcon:!0,isOpen:!!g,onClose:()=>{C(void 0),b(void 0)},shadowedContainerStyle:{border:"5px black",backgroundColor:"",width:y.tq?"100%":"200px"}},t.createElement("p",{className:te.title},"Enter ID:"),t.createElement("input",{id:"Log Password",type:"password",style:{fontWeight:"bold",border:"2px solid gray",height:"50px",fontSize:"20px"},onChange:e=>C("")}),E&&t.createElement("p",null,E),t.createElement(h.zx,{title:"LOG",clicked:()=>{document.getElementById("Log Password").value===k.id.replace(/\D/g,"").slice(-5)?(P(!0),(0,x.KL)((0,i.Z)((0,i.Z)({},d),{},{component_items:[...u.items,g]})).subscribe({error:e=>{P(!1),b(void 0)},next:()=>{P(!1),c({action:f._U.addModuleItems,value:g}),b(void 0)}}),C(void 0)):C("Incorrect ID entered")}})),t.createElement("div",{style:{fontFamily:"var(--app-text-mobile-font)",fontSize:y.tq?"18px":"20px",fontWeight:"bold",display:null!==d&&void 0!==d&&d.id?"":"none",padding:"10px"}},e.children,L?t.createElement("div",{className:te.centerDiv,style:{width:"100%",height:"auto",display:"flex",flexDirection:y.tq?"column":"row",alignItems:"flex-start"}},t.createElement("div",{style:{width:y.tq?"100%":"30%",padding:"20px"}},t.createElement("div",{id:"date_header"},"".concat(m.format("DD MMMM YYYY dddd"))),t.createElement("label",{className:te.timer,id:"timer_count",style:{fontSize:v||y.tq?"":"40px"}},m.format("HH:mm:ss")),t.createElement("div",{className:te.centerDiv,style:{width:"100%"}},(null===k||void 0===k?void 0:k.photo)&&t.createElement("img",{src:null===k||void 0===k?void 0:k.photo,className:te.avatarUrlImg}),s.length>0&&O.length>0&&t.createElement(t.Fragment,null,t.createElement("p",{style:{fontSize:"20p"}},null===L||void 0===L?void 0:L.field_name),t.createElement("div",{style:{display:"flex",border:"1px dashed gray",width:"100%"}},t.createElement(A.Z,{className:te.dropdownComponent,visible:!0,mandatory:!1,items:s.filter(e=>{var l;return(null===e||void 0===e||null===(l=e.positions)||void 0===l?void 0:l.filter(e=>{var l,o;return null===L||void 0===L||null===(l=L.options)||void 0===l||null===(o=l.position_id)||void 0===o?void 0:o.includes(null===e||void 0===e?void 0:e.id)}).length)>0}).map(e=>({label:"".concat(e.first_name," ").concat(e.last_name),value:e.id,user:e})),onChange:e=>{var l;Z(s.find(l=>l.id===e)),0===(null===u||void 0===u||null===(l=u.items)||void 0===l?void 0:l.length)&&d.component_items.length>0&&c({action:f._U.setModuleItems,value:d.component_items})}}),s.length<3&&t.createElement(h.zx,{clear:!0,icon:t.createElement("img",{src:w.Fd,style:{width:"20px",height:"20px"}}),style:{width:"30px",height:"20px"},clicked:()=>{P(!0),(0,de.AW)(!0).pipe((0,ae.q)(1)).subscribe({next:e=>{P(!1),z([]),setTimeout(()=>z([...e,a]),10)}})},loading:T}))),t.createElement("p",{style:{fontSize:"20p"}},"Remarks (Optional)"),t.createElement("input",{className:te.inputValue,style:{fontWeight:"bold",border:"1px dashed gray",height:"40px",width:"100%"},onBlur:e=>{D(e.target.value)}}),(null===d||void 0===d?void 0:d.id)&&t.createElement(t.Fragment,null,t.createElement("div",{style:{width:"100%",padding:"8px"}},t.createElement(h.zx,{style:{width:"100%",height:"16vh",backgroundColor:"green",margin:"0px",padding:"0"},loading:T,clicked:()=>{if(null!==k&&void 0!==k&&k.id){const o=B.Z([H.Z(j.Z("index"))])(null===u||void 0===u?void 0:u.items).find(e=>e.quantity===k.id);let t={};var e,l;if(null!==o&&void 0!==o&&o.alt_value||null!==o&&void 0!==o&&o.value)t={index:null===u||void 0===u||null===(e=u.items)||void 0===e?void 0:e.length,item_code:"".concat(k.first_name," ").concat(k.last_name),quantity:k.id,value:null!==o&&void 0!==o&&o.value?"":new Date,alt_value:null!==o&&void 0!==o&&o.alt_value?"":new Date,total:N};else t={index:null===u||void 0===u||null===(l=u.items)||void 0===l?void 0:l.length,item_code:"".concat(k.first_name," ").concat(k.last_name),quantity:k.id,value:new Date,alt_value:"",total:N};(null===a||void 0===a?void 0:a.id)===k.id?(P(!0),(0,x.KL)((0,i.Z)((0,i.Z)({},d),{},{component_items:[...u.items,t]})).subscribe({error:e=>{P(!1),b(void 0)},next:()=>{P(!1),c({action:f._U.addModuleItems,value:t}),b(void 0)}})):b(t)}}},t.createElement("div",{className:te.centerDiv,style:{width:"inherit",display:"flex",flexDirection:"column",alignContent:"center"}},t.createElement(M.G,{icon:S.Ual,style:{width:"50px",height:"50px"}}),t.createElement("p",null,"Clock In / Out")))),t.createElement("div",{style:{display:"flex",width:"100%"}},t.createElement(h.zx,{style:{width:"100%",height:"16vh",backgroundColor:"orange",margin:"5px",padding:"0"},clicked:()=>{if(null!==k&&void 0!==k&&k.id){var e;let l={index:null===u||void 0===u||null===(e=u.items)||void 0===e?void 0:e.length,item_code:"".concat(k.first_name," ").concat(k.last_name),quantity:k.id,value:new Date,alt_value:"",total:N};(null===a||void 0===a?void 0:a.id)===k.id?(P(!0),(0,x.KL)((0,i.Z)((0,i.Z)({},d),{},{component_items:[...u.items,l]})).subscribe({error:e=>{P(!1),b(void 0)},next:()=>{P(!1),c({action:f._U.addModuleItems,value:l}),b(void 0)}})):b(l)}}},t.createElement("div",{className:te.centerDiv,style:{width:"inherit",display:"flex",flexDirection:"column",alignContent:"center"}},t.createElement(M.G,{icon:S.uF7,style:{width:"50px",height:"50px"}}),t.createElement("p",null,"Clock In"))),t.createElement(h.zx,{style:{width:"100%",height:"16vh",backgroundColor:"blue",margin:"5px",padding:"0"},clicked:()=>{if(null!==k&&void 0!==k&&k.id){var e;let l={index:null===u||void 0===u||null===(e=u.items)||void 0===e?void 0:e.length,item_code:"".concat(k.first_name," ").concat(k.last_name),quantity:k.id,alt_value:new Date,value:"",total:N};(null===a||void 0===a?void 0:a.id)===k.id?(P(!0),(0,x.KL)((0,i.Z)((0,i.Z)({},d),{},{component_items:[...u.items,l]})).subscribe({error:e=>{P(!1),b(void 0)},next:()=>{P(!1),c({action:f._U.addModuleItems,value:l}),b(void 0)}})):b(l)}}},t.createElement("div",{className:te.centerDiv,style:{width:"inherit",display:"flex",flexDirection:"column",alignContent:"center"}},t.createElement(M.G,{icon:S.f8k,style:{width:"50px",height:"50px"}}),t.createElement("p",null,"Clock Out"))))))),k&&t.createElement("div",{style:{width:y.tq?"100%":"70%",margin:"0 10px"}},t.createElement(ne.Z,{style:{width:"100%"},tableHostSimple:ie.Z.itemsContainer_ii,columns:y.tq?["Time In","Time Out"]:(v?["Employee"]:[]).concat(["Time In","Time Out","Remarks"]),list:null!==u&&void 0!==u&&u.items?null===(o=B.Z([H.Z(j.Z("index"))])(null===u||void 0===u||null===(n=u.items)||void 0===n?void 0:n.filter(e=>e.quantity===(null===k||void 0===k?void 0:k.id))))||void 0===o?void 0:o.map((l,o)=>{var i,n;return{Employee:t.createElement("div",{style:{padding:"20px 0"}},l.item_code),"Time In":t.createElement("div",{style:{padding:"20px 0"}},null!==l&&void 0!==l&&l.value?I()(l.value).format(null!==(i=e.format)&&void 0!==i?i:"DD MMMM YYYY HH:mm"):""),"Time Out":t.createElement("div",{style:{padding:"20px 0"}},null!==l&&void 0!==l&&l.alt_value?I()(l.alt_value).format(null!==(n=e.format)&&void 0!==n?n:"DD MMMM YYYY HH:mm"):""),Remarks:t.createElement("div",{style:{padding:"20px 0"}},l.total)}}):[]}))):t.createElement("p",null,"Note: This custom template requires a People component named Employee")))},ce={itemsTable:"CustomRoutes_itemsTable__9GNyT",inputValue:"CustomRoutes_inputValue__mE20S",multiselectComponent:"CustomRoutes_multiselectComponent__JWLpx",dropdownComponent:"CustomRoutes_dropdownComponent__1P3Wa",dropdownComponent_ii:"CustomRoutes_dropdownComponent_ii__5Cecx",title:"CustomRoutes_title__yxO4J",subtitle:"CustomRoutes_subtitle__aarjQ",dropdownContainer:"CustomRoutes_dropdownContainer__LcpSg",currencyInput:"CustomRoutes_currencyInput__Axdwe",tmiClassName:"CustomRoutes_tmiClassName__k+Nse",templateNotes:"CustomRoutes_templateNotes__ZU+Al"};var pe=o(68218),me=o(84634),fe=o(60179),_e=o(37390),ye=o(11217);o(11712);const ge=(0,p.$j)(e=>{const{authenticatedUser:{position:l},authenticatedUser:o}=e.authReducer,{user:i}=e.sessionReducer,{begunModule:t,allModules:n,companyData:d,companyUsersArray:a,companyPositionsArray:r,components:v,companyProcesses:s}=e.flowReducer;return{begunModule:t,allModules:n,companyData:d,companyUsersArray:a,companyPositionsArray:r,components:v,authenticatedUser:o,user:i,companyProcesses:s}})(e=>{var l,o,n,d,a,r,v,s,u,c,_,g,b,x,C,w,k,N,T,P,O,z,L,R,U,F,W,q,Y,B,H,j,V;const{components:G,component:J}=e,{selectedComponent:Q,children:K}=e,X=(0,p.I0)(),{companyData:$,map:ee}=(0,p.v9)(e=>e.flowReducer),[le,ie]=(0,f.pQ)(),[te,ne]=(0,t.useState)({}),[de,ae]=(0,t.useState)([]),[re,ve]=(0,t.useState)(),[se,ue]=(0,t.useState)(),[ge,he]=(0,t.useState)(!1),[be,xe]=(0,t.useState)(!0),[Ee,Ce]=(0,t.useState)(le.items.length>0),we=J.selected_fields.find(e=>{var l;return"item_code"===(null===(l=e.options)||void 0===l?void 0:l.mapToItem)&&"Record"===e.data_type_name&&"Customer"===e.field_name}),Me=J.selected_fields.find(e=>{var l;return"alt_value"===(null===(l=e.options)||void 0===l?void 0:l.mapToItem)&&"Dropdown"===e.data_type_name&&"Status"===e.field_name}),Se=J.selected_fields.find(e=>"Map"===e.data_type_name),ke=G.filter(e=>e.component_fields.filter(e=>{var l;return e.component_blueprint_id===(null===we||void 0===we||null===(l=we.options)||void 0===l?void 0:l.component_id)}).length>0),[Ze,Ie]=(0,t.useState)(null===ke||void 0===ke?void 0:ke.filter(e=>!le.items.map(e=>e.item_code).includes(e.title)&&e.component_fields.find(e=>"Pin"===e.data_type_name&&e.value))),[Ne]=(0,t.useState)(J.selected_fields.find(e=>{var l;return"Pin"===e.data_type_name&&!0===(null===(l=e.options)||void 0===l?void 0:l.destination)})),[De]=(0,t.useState)(null===(l=le.newStepComponents.find(e=>e.selected_fields.find(e=>"Number"===e.data_type_name&&"Stopover"===e.field_name)))||void 0===l?void 0:l.selected_fields.find(e=>"Number"===e.data_type_name&&"Stopover"===e.field_name)),Te=(0,t.useMemo)(()=>[{Header:"View",columns:[{Header:"View",accessor:"view"}]}],[]),Pe=null===(o=le.currentStep)||void 0===o?void 0:o.component_blueprints.findIndex(e=>e.id===(null===J||void 0===J?void 0:J.id)),Oe=(e,l)=>{var o,i,t;const n=[...null!==(o=null===(i=le.currentStep)||void 0===i?void 0:i.component_blueprints)&&void 0!==o?o:[]],d=null===(t=n[Pe])||void 0===t?void 0:t.selected_fields[l];"Number"===(null===d||void 0===d?void 0:d.data_type_name)?Number(+e)?d.value=e:""===e&&(d.value=""):null!==d&&void 0!==d&&d.data_type_name&&(d.value=e),null!==d&&void 0!==d&&d.value&&d.mandatory&&(d.errors=""),ie({action:f._U.setComponentBlueprints,value:n}),ie({action:f._U.setModuleNewStepComponents,value:n})};return t.createElement("div",{className:oe},t.createElement("div",{style:{display:"flex",width:"100%",flexDirection:y.tq?"column":"row"}},t.createElement("div",{style:{width:y.tq?"100%":"20%",padding:"140px 10px 0 10px"}},t.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},!0===(null===Ne||void 0===Ne?void 0:Ne.visible)&&t.createElement("div",null,"Route:"),le.items.length>0&&t.createElement(M.G,{icon:S.XTR,onClick:()=>{ie({action:f._U.setModuleItems,value:[]}),X((0,D.wM)({routes:{},pins:""}))},style:{cursor:"pointer"}})),le.items.length>0?t.createElement(fe.zx,null,!0===(null===Ne||void 0===Ne?void 0:Ne.visible)&&t.createElement("div",{style:{border:"1px dashed gray",padding:"5px",cursor:"pointer"},onClick:()=>{var e;const l=JSON.parse(null!==(e=null===Ne||void 0===Ne?void 0:Ne.value)&&void 0!==e?e:"{}");var o,i;null!==l&&void 0!==l&&l.source&&(X((0,D.wM)({pins:[{position:{lat:null===l||void 0===l||null===(o=l.source)||void 0===o?void 0:o.lat,lng:null===l||void 0===l||null===(i=l.source)||void 0===i?void 0:i.lng},type:"OriginMarker"}]})),X((0,D.wM)({zoom:17})))}},t.createElement("p",null,"Start"),t.createElement("p",{style:{fontSize:"12px"}},"".concat(null!==(n=null===(d=JSON.parse(null!==(r=null===Ne||void 0===Ne?void 0:Ne.value)&&void 0!==r?r:"{}"))||void 0===d||null===(a=d.source)||void 0===a?void 0:a.address)&&void 0!==n?n:"Please set start"))),t.createElement(fe.iA,{columns:Te,data:null===le||void 0===le?void 0:le.items.map((e,l)=>{var o,i,n,d,a,r,v,s,u;const c=JSON.parse(null!==(o=null===e||void 0===e?void 0:e.quantity)&&void 0!==o?o:"{}"),p=JSON.parse(null!==(i=e[null===Me||void 0===Me||null===(n=Me.options)||void 0===n?void 0:n.mapToItem])&&void 0!==i?i:"{}"),m=JSON.parse(null!==(d=null===e||void 0===e?void 0:e.value)&&void 0!==d?d:"{}");return{id:e.id,view:t.createElement("div",{style:{border:e.isOpen?"1px dashed blue":"1px dashed gray",padding:"5px 5px 10px 5px"}},e.isOpen&&t.createElement("div",{style:{display:"flex",justifyContent:"right"}},t.createElement(M.G,{icon:S.$aW,onClick:()=>{ie({action:f._U.removeModuleItems,value:e})},style:{cursor:"pointer"}})),t.createElement("p",{style:{cursor:"pointer"},onClick:()=>{var l;if(e.isOpen=!(null!==(l=null===e||void 0===e?void 0:e.isOpen)&&void 0!==l&&l),ie({action:f._U.setModuleItems,value:le.items}),e.isOpen){var o,i;X((0,D.wM)({pins:[{position:{lat:null===m||void 0===m||null===(o=m.source)||void 0===o?void 0:o.lat,lng:null===m||void 0===m||null===(i=m.source)||void 0===i?void 0:i.lng},type:"Pin"}]})),X((0,D.wM)({zoom:17}))}else{if(null!==Ne&&void 0!==Ne&&Ne.value){var t,n,d,a,r,v;const e=JSON.parse(null!==(t=null===Ne||void 0===Ne?void 0:Ne.value)&&void 0!==t?t:"{}");X((0,D.wM)({pins:[{position:{lat:null===e||void 0===e||null===(n=e.source)||void 0===n?void 0:n.lat,lng:null===e||void 0===e||null===(d=e.source)||void 0===d?void 0:d.lng},type:"OriginMarker"},{position:{lat:null===e||void 0===e||null===(a=e.destination)||void 0===a?void 0:a.lat,lng:null===e||void 0===e||null===(r=e.destination)||void 0===r?void 0:r.lng},type:"DestinationMarker"}].concat(null===le||void 0===le||null===(v=le.items)||void 0===v?void 0:v.map(e=>{var l,o,i;const t=JSON.parse(null!==(l=e.value)&&void 0!==l?l:"{}");return{position:{lat:null===t||void 0===t||null===(o=t.source)||void 0===o?void 0:o.lat,lng:null===t||void 0===t||null===(i=t.source)||void 0===i?void 0:i.lng},type:"Pin"}}))}))}else{var s;X((0,D.wM)({pins:null===le||void 0===le||null===(s=le.items)||void 0===s?void 0:s.map(e=>{var l,o,i;const t=JSON.parse(null!==(l=e.value)&&void 0!==l?l:"{}");return{position:{lat:null===t||void 0===t||null===(o=t.source)||void 0===o?void 0:o.lat,lng:null===t||void 0===t||null===(i=t.source)||void 0===i?void 0:i.lng},type:"Pin"}})}))}Ce(!1),X((0,D.wM)({zoom:null}))}}},t.createElement("span",{style:{fontSize:"12px"}},"".concat(l+1,". ")),"".concat(e.item_code)),t.createElement("p",{style:{fontSize:"14px"}},"".concat(null===m||void 0===m||null===(a=m.source)||void 0===a?void 0:a.address)),e.isOpen&&t.createElement("div",null,Object.keys(c).map((e,l)=>t.createElement("p",{style:{fontSize:"12px"},key:l},"".concat(e,": ").concat(I()(c[e]).format("DD MMMM YYYY HH:mm")))),t.createElement("p",null,"Notes"),t.createElement("textarea",{defaultValue:null===p||void 0===p?void 0:p.notes,className:ce.templateNotes,onChange:e=>p.notes=e.target.value}),t.createElement("p",null,"Status"),Me&&t.createElement(A.Z,{visible:!0,items:null===Me||void 0===Me||null===(r=Me.options)||void 0===r?void 0:r.list.map(e=>({label:e,value:e})),className:ce.dropdownClassContainer,onChange:l=>{var o,i;p.status=l,e[null===Me||void 0===Me||null===(o=Me.options)||void 0===o?void 0:o.mapToItem]=JSON.stringify(p),c[l]=(0,Z.now)(),e.quantity=JSON.stringify(c),null!==Se&&void 0!==Se&&null!==(i=Se.options)&&void 0!==i&&i.realtime&&null!==Q&&void 0!==Q&&Q.id?navigator.geolocation.getCurrentPosition(o=>{const i={},t={lat:o.coords.latitude,lng:o.coords.longitude,id:"10"};i[l]=t,e.total=JSON.stringify(i),ie({action:f._U.setModuleItems,value:le.items}),Q.lat=o.coords.latitude,Q.lng=o.coords.longitude}):ie({action:f._U.setModuleItems,value:le.items})},selectionType:null===Me||void 0===Me||null===(v=Me.options)||void 0===v?void 0:v.type,backgroundColor:null!==Me&&void 0!==Me&&null!==(s=Me.options)&&void 0!==s&&s.valueC&&null!==Me&&void 0!==Me&&Me.value?null===Me||void 0===Me||null===(u=Me.options)||void 0===u?void 0:u.valueC:"",value:void 0===(null===p||void 0===p?void 0:p.status)||null===(null===p||void 0===p?void 0:p.status)?"":null===p||void 0===p?void 0:p.status}))),item:e}}),onhandleDragEnd:e=>{xe(!1),he(!0),setTimeout(()=>he(!1),10),ie({action:f._U.setModuleItems,value:e.map((e,l)=>(0,i.Z)((0,i.Z)({},e.item),{},{index:l}))})}}),!0===(null===Ne||void 0===Ne?void 0:Ne.visible)&&t.createElement("div",{style:{border:"1px dashed gray",marginTop:"10px",cursor:"pointer"},onClick:()=>{var e;const l=JSON.parse(null!==(e=null===Ne||void 0===Ne?void 0:Ne.value)&&void 0!==e?e:"{}");var o,i;null!==l&&void 0!==l&&l.destination&&(X((0,D.wM)({pins:[{position:{lat:null===l||void 0===l||null===(o=l.destination)||void 0===o?void 0:o.lat,lng:null===l||void 0===l||null===(i=l.destination)||void 0===i?void 0:i.lng},type:"DestinationMarker"}]})),X((0,D.wM)({zoom:17})))}},t.createElement("p",null,"End"),t.createElement("p",{style:{fontSize:"12px"}},"".concat(null!==(v=null===(s=JSON.parse(null!==(c=null===Ne||void 0===Ne?void 0:Ne.value)&&void 0!==c?c:"{}"))||void 0===s||null===(u=s.destination)||void 0===u?void 0:u.address)&&void 0!==v?v:"Please set end")))):t.createElement("div",null,t.createElement("p",{style:{fontSize:"14px"}},"None found."),t.createElement("p",{style:{fontSize:"14px"}},"Add using filters below. Click Add to Route or Add All to Route to add pin/s. Set a starting and end point. When done press Generate Route. You can also set Optimize Route Order to No and drag pins manually.")),(null===ee||void 0===ee||null===(_=ee.routes)||void 0===_||null===(g=_.DRIVE)||void 0===g?void 0:g.length)>0&&(null===le||void 0===le||null===(b=le.items)||void 0===b?void 0:b.length)>0&&t.createElement("div",{style:{margin:"40px 0"}},t.createElement("p",{style:{fontSize:"12px"}},"Route Distance: ".concat(+(null===ee||void 0===ee||null===(x=ee.routes)||void 0===x||null===(C=x.DRIVE[0])||void 0===C?void 0:C.distanceMeters)/1e3," km")),t.createElement("p",{style:{fontSize:"12px"}},"No of Stopover: ".concat(le.items.length," ")),t.createElement("p",{style:{fontSize:"12px"}},"Time per Stopover: ".concat(+(null===De||void 0===De?void 0:De.value)/60," min")),t.createElement("p",{style:{fontSize:"12px"}},"Total Duration: ".concat(((+(null===ee||void 0===ee||null===(w=ee.routes)||void 0===w||null===(k=w.DRIVE[0])||void 0===k||null===(N=k.duration)||void 0===N?void 0:N.replace("s",""))+ +(null===De||void 0===De?void 0:De.value)*le.items.length)/3600).toFixed(2)," hr"))),(null===le||void 0===le||null===(T=le.items)||void 0===T?void 0:T.length)>1&&(null===Ne||void 0===Ne?void 0:Ne.value)&&t.createElement("div",null,!ge&&t.createElement(h.pd,{id:"optimizeWaypointOrder?",title:"Optimize Route Order",ungrouped:!0,withAckButton:!1,value:be,style:{margin:"20px 0px 20px 0px",width:"auto"},toggleSelected:e=>{xe(!!e)}}),t.createElement(h.zx,{title:"Generate Routes",style:{width:"100%",backgroundColor:"darkblue",textAlign:"left",marginTop:"50px"},clicked:async()=>{if(null!==Ne&&void 0!==Ne&&Ne.value){var e,l,o,t,n;const C={},w=JSON.parse(null!==(e=null===Ne||void 0===Ne?void 0:Ne.value)&&void 0!==e?e:"{}"),M=await(0,ye.s)({origin:{location:{latLng:{latitude:w.source.lat,longitude:w.source.lng}}},destination:{location:{latLng:{latitude:w.destination.lat,longitude:w.destination.lng}}},intermediates:null===le||void 0===le||null===(l=le.items)||void 0===l?void 0:l.map(e=>{var l,o,i;const t=JSON.parse(null!==(l=e.value)&&void 0!==l?l:"{}");return{location:{latLng:{latitude:null===t||void 0===t||null===(o=t.source)||void 0===o?void 0:o.lat,longitude:null===t||void 0===t||null===(i=t.source)||void 0===i?void 0:i.lng}}}}),computeAlternativeRoutes:"false",optimizeWaypointOrder:be?"true":"false",travelMode:_e.jk[0],routingPreference:"traffic_aware",extraComputations:["TRAFFIC_ON_POLYLINE"]},null===$||void 0===$||null===(o=$.misc_info)||void 0===o?void 0:o.map);var d,a,r;if(null!==M&&void 0!==M&&null!==(t=M.routes)&&void 0!==t&&t.DRIVE)if(null!==M&&void 0!==M&&null!==(d=M.routes)&&void 0!==d&&null!==(a=d.DRIVE[0])&&void 0!==a&&a.legs)null===M||void 0===M||(null===(r=M.routes)||void 0===r||delete r.DRIVE[0].legs);if(C[_e.jk[0]]=[],(null===M||void 0===M||null===(n=M.routes)||void 0===n?void 0:n.length)>0){var v,s,u,c,p,m,_,y,g,h,b,x,E;if(null!==(v=M.routes[0])&&void 0!==v&&v.optimizedIntermediateWaypointIndex)ie({action:f._U.setModuleItems,value:null===(x=M.routes[0])||void 0===x||null===(E=x.optimizedIntermediateWaypointIndex)||void 0===E?void 0:E.map((e,l)=>(0,i.Z)((0,i.Z)({},le.items[+e]),{},{index:l}))});C[_e.jk[0]]=[null===M||void 0===M?void 0:M.routes[0]],X((0,D.wM)({routes:C,pins:[{position:{lat:null===w||void 0===w||null===(s=w.source)||void 0===s?void 0:s.lat,lng:null===w||void 0===w||null===(u=w.source)||void 0===u?void 0:u.lng},type:"OriginMarker"},{position:{lat:null===w||void 0===w||null===(c=w.destination)||void 0===c?void 0:c.lat,lng:null===w||void 0===w||null===(p=w.destination)||void 0===p?void 0:p.lng},type:"DestinationMarker"}].concat(null===le||void 0===le||null===(m=le.items)||void 0===m?void 0:m.map(e=>{var l,o,i;const t=JSON.parse(null!==(l=e.value)&&void 0!==l?l:"{}");return{position:{lat:null===t||void 0===t||null===(o=t.source)||void 0===o?void 0:o.lat,lng:null===t||void 0===t||null===(i=t.source)||void 0===i?void 0:i.lng},type:"Pin"}}))})),Oe(JSON.stringify((0,i.Z)((0,i.Z)({},ee),{},{routes:{[_e.jk[0]]:[null===M||void 0===M?void 0:M.routes[0]]},pins:[{position:{lat:null===w||void 0===w||null===(_=w.source)||void 0===_?void 0:_.lat,lng:null===w||void 0===w||null===(y=w.source)||void 0===y?void 0:y.lng},type:"OriginMarker"},{position:{lat:null===w||void 0===w||null===(g=w.destination)||void 0===g?void 0:g.lat,lng:null===w||void 0===w||null===(h=w.destination)||void 0===h?void 0:h.lng},type:"DestinationMarker"}].concat(null===le||void 0===le||null===(b=le.items)||void 0===b?void 0:b.map(e=>{var l,o,i;const t=JSON.parse(null!==(l=e.value)&&void 0!==l?l:"{}");return{position:{lat:null===t||void 0===t||null===(o=t.source)||void 0===o?void 0:o.lat,lng:null===t||void 0===t||null===(i=t.source)||void 0===i?void 0:i.lng},type:"Pin"}}))})),Se.index)}}}})),(null===le||void 0===le||null===(P=le.items)||void 0===P?void 0:P.length)>1&&!0===!(null!==Ne&&void 0!==Ne&&Ne.visible)&&t.createElement("div",null,t.createElement(h.zx,{title:"Save Map",loading:ge,style:{width:"100%",backgroundColor:"darkblue",textAlign:"left",marginTop:"50px"},clicked:()=>{var e;Oe(JSON.stringify((0,i.Z)((0,i.Z)({},ee),{},{pins:null===le||void 0===le||null===(e=le.items)||void 0===e?void 0:e.map(e=>{var l,o,i;const t=JSON.parse(null!==(l=e.value)&&void 0!==l?l:"{}");return{position:{lat:null===t||void 0===t||null===(o=t.source)||void 0===o?void 0:o.lat,lng:null===t||void 0===t||null===(i=t.source)||void 0===i?void 0:i.lng},type:"Pin"}})})),Se.index),he(!0),setTimeout(()=>he(!1),1e3)}}))),t.createElement("div",{style:{width:y.tq?"100%":"80%"}},t.createElement("div",{style:{display:"flex",justifyContent:"right",padding:"20px 5px 10px 10px"}},t.createElement(M.G,{icon:Ee?S.byT:S.tAh,onClick:()=>{Ce(!Ee),X((0,D.wM)({zoom:null}))},style:{cursor:"pointer"}})),t.createElement("div",{style:{height:"auto",width:"100%",pointerEvents:Ee?"none":""}},K))),t.createElement("div",{style:{display:"flex",flexDirection:y.tq?"column":"row",width:"100%",padding:"20px"}},t.createElement("div",{style:{width:"20%",padding:"20px 10px 0 10px"}},t.createElement("div",{style:{disabled:!0,width:"250px",display:"flex",flexDirection:"column",marginRight:"0px",mmarginTop:"".concat(280+60*(null!==(O=null===le||void 0===le||null===(z=le.items)||void 0===z?void 0:z.length)&&void 0!==O?O:1),"px"),fontSize:"18px"}},"Filters:",(null===we||void 0===we||null===(L=we.options)||void 0===L||null===(R=L.filters)||void 0===R?void 0:R.length)>0&&t.createElement("div",{className:ce.dropdownContainer},t.createElement(h.rk,{items:ke?pe.Z(me.Z("value"))(ke.map(e=>{const l=e.component_fields.find(e=>{var l;return e.field_name===(null===we||void 0===we||null===(l=we.options)||void 0===l?void 0:l.filters[0])});return{label:null===l||void 0===l?void 0:l.value,value:null===l||void 0===l?void 0:l.value,component:e}})):[],onChange:e=>{var l,o,i,t;ae([]),ne({[null===we||void 0===we||null===(l=we.options)||void 0===l?void 0:l.filters[0]]:e.value}),Ie([]),ue(!1),ve(!1),setTimeout(()=>ve(!0),10),Ie(null===ke||void 0===ke||null===(o=ke.filter(e=>!le.items.map(e=>e.item_code).includes(e.title)&&e.component_fields.find(e=>"Pin"===e.data_type_name&&e.value)))||void 0===o?void 0:o.filter(l=>{var o;return(null===(o=l.component_fields.filter(l=>l.value===e.value))||void 0===o?void 0:o.length)>0})),ie({action:f._U.setModuleNewStepComponents,value:null!==(i=null===(t=le.currentStep)||void 0===t?void 0:t.component_blueprints)&&void 0!==i?i:[]})},placeholder:null===we||void 0===we||null===(U=we.options)||void 0===U?void 0:U.filters[0],moliclassname:ce.componentsSelectMenuOverlayListItem,className:ce.currencyInput,tmiClassName:ce.tmiClassName})),t.createElement("div",{style:{height:"10px"}}),(null===we||void 0===we||null===(F=we.options)||void 0===F||null===(W=F.filters)||void 0===W?void 0:W.length)>1&&!y.tq&&re&&t.createElement("div",{className:ce.dropdownContainer},t.createElement(h.rk,{items:te[null===we||void 0===we||null===(q=we.options)||void 0===q?void 0:q.filters[0]]?pe.Z(me.Z("value"))(ke.map(e=>{const l=e.component_fields.find(e=>{var l;return e.field_name===(null===we||void 0===we||null===(l=we.options)||void 0===l?void 0:l.filters[1])});return{label:null===l||void 0===l?void 0:l.value,value:null===l||void 0===l?void 0:l.value,component:e}}).filter(e=>e.component.component_fields.filter(e=>{var l,o;return e.value===te[null===we||void 0===we||null===(l=we.options)||void 0===l?void 0:l.filters[0]]&&e.field_name===(null===we||void 0===we||null===(o=we.options)||void 0===o?void 0:o.filters[0])}).length>0)):[],onChange:e=>{var l,o,t,n;ue(!1),setTimeout(()=>ue(!0),10),ie({action:f._U.setModuleNewStepComponents,value:null!==(l=null===(o=le.currentStep)||void 0===o?void 0:o.component_blueprints)&&void 0!==l?l:[]}),ne((0,i.Z)((0,i.Z)({},te),{},{[null===we||void 0===we||null===(t=we.options)||void 0===t?void 0:t.filters[1]]:e.value})),Ie(null===ke||void 0===ke||null===(n=ke.filter(e=>!le.items.map(e=>e.item_code).includes(e.title)&&e.component_fields.find(e=>"Pin"===e.data_type_name&&e.value)))||void 0===n?void 0:n.filter(l=>{var o;return(null===(o=l.component_fields.filter(l=>l.value===e.value))||void 0===o?void 0:o.length)>0}).filter(e=>{var l;return(null===(l=e.component_fields.filter(e=>{var l;return e.value===te[null===we||void 0===we||null===(l=we.options)||void 0===l?void 0:l.filters[0]]}))||void 0===l?void 0:l.length)>0}))},placeholder:null===we||void 0===we||null===(Y=we.options)||void 0===Y?void 0:Y.filters[1],style:{fontSize:"16px"},moliclassname:ce.componentsSelectMenuOverlayListItem,tmiClassName:ce.tmiClassName})),t.createElement("div",{style:{height:"10px"}}),(null===we||void 0===we||null===(B=we.options)||void 0===B||null===(H=B.filters)||void 0===H?void 0:H.length)>2&&!y.tq&&se&&t.createElement("div",{className:ce.dropdownContainer},t.createElement(h.rk,{items:te[null===we||void 0===we||null===(j=we.options)||void 0===j?void 0:j.filters[1]]?pe.Z(me.Z("value"))(Ze.map(e=>{const l=e.component_fields.find(e=>{var l;return e.field_name===(null===we||void 0===we||null===(l=we.options)||void 0===l?void 0:l.filters[2])});return{label:null===l||void 0===l?void 0:l.value,value:null===l||void 0===l?void 0:l.value,component:e}}).filter(e=>e.component.component_fields.filter(e=>{var l,o;return e.value===te[null===we||void 0===we||null===(l=we.options)||void 0===l?void 0:l.filters[1]]&&e.field_name===(null===we||void 0===we||null===(o=we.options)||void 0===o?void 0:o.filters[1])}).length>0)):[],onChange:e=>{var l,o,t,n;ie({action:f._U.setModuleNewStepComponents,value:null!==(l=null===(o=le.currentStep)||void 0===o?void 0:o.component_blueprints)&&void 0!==l?l:[]}),ne((0,i.Z)((0,i.Z)({},te),{},{[null===we||void 0===we||null===(t=we.options)||void 0===t?void 0:t.filters[1]]:e.value})),Ie(null===ke||void 0===ke||null===(n=ke.filter(e=>!le.items.map(e=>e.item_code).includes(e.title)&&e.component_fields.find(e=>"Pin"===e.data_type_name&&e.value)))||void 0===n?void 0:n.filter(l=>{var o;return(null===(o=l.component_fields.filter(l=>l.value===e.value))||void 0===o?void 0:o.length)>0}).filter(e=>{var l;return(null===(l=e.component_fields.filter(e=>{var l;return e.value===te[null===we||void 0===we||null===(l=we.options)||void 0===l?void 0:l.filters[0]]}))||void 0===l?void 0:l.length)>0}))},placeholder:null===we||void 0===we||null===(V=we.options)||void 0===V?void 0:V.filters[2],style:{fontSize:"16px"},moliclassname:ce.componentsSelectMenuOverlayListItem,tmiClassName:ce.tmiClassName})))),t.createElement("div",{style:{width:y.tq?"100%":"80%"}},t.createElement(E.default,{className:ce.itemsTable,modern:!!y.tq,columns:["Name","Address","Action"],list:null===Ze||void 0===Ze?void 0:Ze.map(e=>{var l,o;const i=null===(l=e.component_fields.find(e=>"Pin"===e.data_type_name))||void 0===l?void 0:l.value,n=JSON.parse(null!==i&&void 0!==i?i:"{}");return{id:e.id,location:null===n||void 0===n?void 0:n.source,Name:t.createElement("div",{style:{textAlign:"left",padding:"10px",cursor:"pointer"}},e.title),Action:t.createElement(h.zx,{title:!0===(null===Ne||void 0===Ne?void 0:Ne.visible)?"Add to Route":"Add to Map",clicked:()=>{var l,o;const t={id:(0,m.mR)(),item_code:e.title,value:i,alt_value:"{}",quantity:"{}",total:"{}",isOpen:!0};ie({action:f._U.addModuleItems,value:t}),Ie(Ze.filter(l=>l.id!==e.id)),X((0,D.wM)({pins:[{position:{lat:null===n||void 0===n||null===(l=n.source)||void 0===l?void 0:l.lat,lng:null===n||void 0===n||null===(o=n.source)||void 0===o?void 0:o.lng}}]}))},titleStyle:{fontSize:"12px"},style:{height:"30px",width:"140px"}}),Address:t.createElement("div",{style:{textAlign:"left",padding:"10px"}},null===(o=n.source)||void 0===o?void 0:o.address)}}),onListItemClick:e=>{var l,o;X((0,D.wM)({pins:[{position:{lat:null===(l=e.location)||void 0===l?void 0:l.lat,lng:null===(o=e.location)||void 0===o?void 0:o.lng},type:"Pin"}]}))}}),Ze.length>1&&t.createElement("div",{style:{display:"flex",justifyContent:"right",padding:"20px 5px 0 10px"}},t.createElement(h.zx,{title:!0===(null===Ne||void 0===Ne?void 0:Ne.visible)?"Add All to Route":"Add All to Map",style:{height:"30px",width:"140px",backgroundColor:"darkgreen"},titleStyle:{fontSize:"12px"},clicked:()=>{const e=Ze.map(e=>{var l;const o=null===(l=e.component_fields.find(e=>"Pin"===e.data_type_name))||void 0===l?void 0:l.value;return{id:(0,m.mR)(),item_code:e.title,value:o,alt_value:"{}",quantity:"{}",total:"{}"}});X((0,D.wM)({pins:null===e||void 0===e?void 0:e.map(e=>{var l,o,i;const t=JSON.parse(null!==(l=e.value)&&void 0!==l?l:"{}");return{position:{lat:null===t||void 0===t||null===(o=t.source)||void 0===o?void 0:o.lat,lng:null===t||void 0===t||null===(i=t.source)||void 0===i?void 0:i.lng},type:"Pin"}})})),ie({action:f._U.setModuleItems,value:[...le.items,...e]}),Ie([])}})))))});var he=o(67598),be=o(67861);const xe=e=>{var l,o,t,n,d,a,r,v,s,u,c,p,_,g,b,E,C,M,S,k,Z,I,N,D,T;const[P,O]=(0,f.pQ)(),{user:A,favorites:z,creating:L,items:R,templateName:U,field:F,showSecond:W,listItems:q,orderItems:Y,setShowSecond:B,components:H,template:j,component:G,showFavorites:J,companyData:Q,setShowFavorites:K,setListItems:X,setOrderItems:$,setSelectedItems:ee,selectedItems:le}=e,oe=null!==(l=null===j||void 0===j||null===(o=j.config.find(e=>"quantity"===e.key))||void 0===o?void 0:o.label)&&void 0!==l?l:"Quantity",te=null!==(t=null===j||void 0===j||null===(n=j.config.find(e=>"alt_value"===e.key))||void 0===n?void 0:n.label)&&void 0!==t?t:"Actual",de=null!==(d=null===j||void 0===j||null===(a=j.config.find(e=>"item_code"===e.key))||void 0===a?void 0:a.label)&&void 0!==d?d:"Product ID",ae=null!==(r=null===j||void 0===j?void 0:j.list)&&void 0!==r?r:[],re=e=>{var l;let o=[];e.filter(e=>{const l=null===R||void 0===R?void 0:R.find(l=>{var o;return(null===(o=l.component_fields.filter(l=>l.value===e.component_id))||void 0===o?void 0:o.length)>0});l&&(o=[...o,l])}),X(o),$(null===(l=o)||void 0===l?void 0:l.map(e=>{let l={};return G.selected_fields.filter(o=>{var t,n;"Text"!==o.data_type_name&&"Number"!==o.data_type_name||(l=(0,i.Z)((0,i.Z)({},l),{},{[o.field_name]:null!==(t=null===(n=e.component_fields.find(e=>e.field_name===o.field_name))||void 0===n?void 0:n.value)&&void 0!==t?t:0}))}),l}))},ve=(e,l,o)=>{var i;const t=e.component_fields.find(e=>{var l;return e.field_name===(null===G||void 0===G||null===(l=G.options)||void 0===l?void 0:l.key)}),n=null===P||void 0===P||null===(i=P.items)||void 0===i?void 0:i.find(e=>e.item_code===t.value);if(void 0===n){var d,a,r;const e={alt_value:null!==(d=Y[l][te])&&void 0!==d?d:0,quantity:null!==(a=Y[l][oe])&&void 0!==a?a:0,item_code:t.value,id:(0,m.mR)(),value:null!==(r=parseFloat(o*+Y[l][oe]).toFixed(2))&&void 0!==r?r:0};O({action:f._U.addModuleItems,value:e})}else{var v;if(0==+Y[l][oe])O({action:f._U.removeModuleItems,value:n});else n.quantity=Y[l][oe],n.alt_value=Y[l][te],n.value=null!==(v=parseFloat(o*+Y[l][oe]).toFixed(2))&&void 0!==v?v:0,O({action:f._U.updateModuleItems,value:n})}};return be.createElement("div",{style:{width:"100%",justifyContent:"center"}},be.createElement("div",null,be.createElement("div",{style:{display:"flex",flexDirection:"row",marginTop:"50px",width:"100%"}},be.createElement("div",{style:{disabled:!0,width:"250px",display:y.tq?"none":"flex",flexDirection:"column",marginRight:"20px",marginTop:"".concat(280+60*(null!==(v=null===P||void 0===P||null===(s=P.items)||void 0===s?void 0:s.length)&&void 0!==v?v:1),"px"),fontSize:"18px"}},"Filters:",(null===F||void 0===F||null===(u=F.options)||void 0===u||null===(c=u.filters)||void 0===c?void 0:c.length)>0&&be.createElement("div",{className:he.Z.dropdownContainer},be.createElement(h.rk,{items:R?pe.Z(me.Z("value"))(R.map(e=>{const l=e.component_fields.find(e=>{var l;return e.field_name===(null===F||void 0===F||null===(l=F.options)||void 0===l?void 0:l.filters[0])});return{label:null===l||void 0===l?void 0:l.value,value:null===l||void 0===l?void 0:l.value,component:e}})):[],onChange:e=>{var l,o,t;K(!1),$([]),ee({[null===F||void 0===F||null===(l=F.options)||void 0===l?void 0:l.filters[0]]:e.value}),X([]),B(!1),setTimeout(()=>B(!0),10),X(null===R||void 0===R?void 0:R.filter(l=>{var o;return(null===(o=l.component_fields.filter(l=>l.value===e.value))||void 0===o?void 0:o.length)>0})),O({action:f._U.setModuleNewStepComponents,value:null!==(o=null===(t=P.currentStep)||void 0===t?void 0:t.component_blueprints)&&void 0!==o?o:[]}),$(null===R||void 0===R?void 0:R.filter(l=>{var o;return(null===(o=l.component_fields.filter(l=>l.value===e.value))||void 0===o?void 0:o.length)>0}).map(e=>{let l={};return G.selected_fields.filter(o=>{var t,n;"Text"!==o.data_type_name&&"Number"!==o.data_type_name||(l=(0,i.Z)((0,i.Z)({},l),{},{[o.field_name]:null!==(t=null===(n=e.component_fields.find(e=>e.field_name===o.field_name))||void 0===n?void 0:n.value)&&void 0!==t?t:0}))}),l}))},placeholder:null===F||void 0===F||null===(p=F.options)||void 0===p?void 0:p.filters[0],moliclassname:he.Z.componentsSelectMenuOverlayListItem,className:he.Z.currencyInput})),be.createElement("div",{style:{height:"10px"}}),(null===F||void 0===F||null===(_=F.options)||void 0===_||null===(g=_.filters)||void 0===g?void 0:g.length)>1&&!y.tq&&W&&be.createElement("div",{className:he.Z.dropdownContainer},be.createElement(h.rk,{items:le[null===F||void 0===F||null===(b=F.options)||void 0===b?void 0:b.filters[0]]?pe.Z(me.Z("value"))(R.map(e=>{const l=e.component_fields.find(e=>{var l;return e.field_name===(null===F||void 0===F||null===(l=F.options)||void 0===l?void 0:l.filters[1])});return{label:null===l||void 0===l?void 0:l.value,value:null===l||void 0===l?void 0:l.value,component:e}}).filter(e=>e.component.component_fields.filter(e=>{var l,o;return e.value===le[null===F||void 0===F||null===(l=F.options)||void 0===l?void 0:l.filters[0]]&&e.field_name===(null===F||void 0===F||null===(o=F.options)||void 0===o?void 0:o.filters[0])}).length>0)):[],onChange:e=>{var l,o,t;K(!1),O({action:f._U.setModuleNewStepComponents,value:null!==(l=null===(o=P.currentStep)||void 0===o?void 0:o.component_blueprints)&&void 0!==l?l:[]}),ee((0,i.Z)((0,i.Z)({},le),{},{[null===F||void 0===F||null===(t=F.options)||void 0===t?void 0:t.filters[1]]:e.value})),$(null===R||void 0===R?void 0:R.filter(l=>{var o;return(null===(o=l.component_fields.filter(l=>l.value===e.value))||void 0===o?void 0:o.length)>0}).filter(e=>{var l;return(null===(l=e.component_fields.filter(e=>{var l;return e.value===le[null===F||void 0===F||null===(l=F.options)||void 0===l?void 0:l.filters[0]]}))||void 0===l?void 0:l.length)>0}).map(e=>{let l={};return G.selected_fields.filter(o=>{var t,n;"Text"!==o.data_type_name&&"Number"!==o.data_type_name||(l=(0,i.Z)((0,i.Z)({},l),{},{[o.field_name]:null!==(t=null===(n=e.component_fields.find(e=>e.field_name===o.field_name))||void 0===n?void 0:n.value)&&void 0!==t?t:0}))}),l})),X(null===R||void 0===R?void 0:R.filter(l=>{var o;return(null===(o=l.component_fields.filter(l=>l.value===e.value))||void 0===o?void 0:o.length)>0}).filter(e=>{var l;return(null===(l=e.component_fields.filter(e=>{var l;return e.value===le[null===F||void 0===F||null===(l=F.options)||void 0===l?void 0:l.filters[0]]}))||void 0===l?void 0:l.length)>0}))},placeholder:null===F||void 0===F||null===(E=F.options)||void 0===E?void 0:E.filters[1],style:{fontSize:"16px"},moliclassname:he.Z.componentsSelectMenuOverlayListItem}))),be.createElement("div",{style:{display:"flex",flexDirection:"column",width:y.tq?"100%":"80%"}},be.createElement("p",null,"Orders"),be.createElement(ne.Z,{tableHostSimple:ie.Z.itemsContainer_ii,style:{width:"100%"},highlights:"var(--app-color-gray-lighter)",columns:y.tq?null===Q||void 0===Q||null===(C=Q.misc_info)||void 0===C||null===(M=C.templatesData.find(e=>e.name===U).config)||void 0===M?void 0:M.filter(e=>"Text"===e.value||"Number"===e.value||"Connector"===e.value).map(e=>e.label).slice(0,2):null===Q||void 0===Q||null===(S=Q.misc_info)||void 0===S||null===(k=S.templatesData.find(e=>e.name===U).config)||void 0===k?void 0:k.filter(e=>"Text"===e.value||"Number"===e.value||"Connector"===e.value).map(e=>e.label),footer:y.tq?["Totals",be.createElement("div",{className:he.Z.templateInformation,key:1,style:{padding:"20px 5px"}},"".concat(V.Z((e,l)=>{var o;return null!==(o=+e+ +l.quantity)&&void 0!==o?o:0},0,null!==(Z=null===P||void 0===P?void 0:P.items)&&void 0!==Z?Z:[])))]:["Totals:",be.createElement("div",{key:1,className:he.Z.templateInformation,style:{padding:"20px 5px"}},"".concat(V.Z((e,l)=>{var o;return null!==(o=+e+ +l.quantity)&&void 0!==o?o:0},0,null!==(I=null===P||void 0===P?void 0:P.items)&&void 0!==I?I:[]))),be.createElement("div",{key:2,className:he.Z.templateInformation,style:{padding:"20px 5px"}},"".concat(V.Z((e,l)=>{var o;return+e+(isNaN(+l.alt_value)?0:null!==(o=+l.alt_value)&&void 0!==o?o:0)},0,null!==(N=null===P||void 0===P?void 0:P.items)&&void 0!==N?N:[])))],list:null===P||void 0===P||null===(D=P.items)||void 0===D?void 0:D.map(e=>{var l,o;const i=e.item_code,t=null!==(l=e.quantity)&&void 0!==l?l:0,n=null!==(o=e.alt_value)&&void 0!==o?o:0;return{List:be.createElement("div",{className:he.Z.templateInformation,style:{display:"flex",flex:"1"}},be.createElement("div",{style:{width:"40%"}},i),be.createElement("div",{style:{width:"20%"}},t)),[null===G||void 0===G?void 0:G.options.key]:be.createElement("div",{className:he.Z.templateInformation},be.createElement("span",null,i)),Quantity:be.createElement("div",{className:he.Z.templateInformation,style:{padding:"20px 5px"}},be.createElement("span",null,t)),Actual:be.createElement("div",{className:he.Z.templateInformation},be.createElement("span",null,n)),id:e.id,code:i}}),onListItemClick:e=>{$(null===R||void 0===R?void 0:R.filter(l=>{var o;return(null===(o=l.component_fields.filter(l=>l.value===e.code))||void 0===o?void 0:o.length)>0}).map(e=>{var l;let o={};G.selected_fields.filter(l=>{var t,n;"Text"!==l.data_type_name&&"Number"!==l.data_type_name||(o=(0,i.Z)((0,i.Z)({},o),{},{[l.field_name]:null!==(t=null===(n=e.component_fields.find(e=>e.field_name===l.field_name))||void 0===n?void 0:n.value)&&void 0!==t?t:0}))});const t=null===P||void 0===P||null===(l=P.items)||void 0===l?void 0:l.find(e=>e.item_code===o[de]);return o[te]=t.alt_value,o[oe]=t.quantity,o})),X(null===H||void 0===H?void 0:H.filter(l=>{var o;return(null===(o=l.component_fields.filter(l=>l.value===e.code))||void 0===o?void 0:o.length)>0}))}}),be.createElement("br",null),be.createElement("div",{className:he.Z.searchContainer,style:{display:J?"none":""}},be.createElement(w.O,null),be.createElement("input",{placeholder:"Search",className:he.Z.searchInput,onChange:e=>{var l,o,t;(null===(l=e.target.value)||void 0===l?void 0:l.length)>1?($(null===(t=H.filter(e=>e.component_fields.filter(e=>e.component_blueprint_id===F.options.component_id).length>0))||void 0===t?void 0:t.filter(l=>{var o;return(null===(o=l.component_fields.filter(l=>l.value.includes(e.target.value)))||void 0===o?void 0:o.length)>0}).map(e=>{let l={};return G.selected_fields.filter(o=>{var t,n;"Text"!==o.data_type_name&&"Number"!==o.data_type_name||(l=(0,i.Z)((0,i.Z)({},l),{},{[o.field_name]:null!==(t=null===(n=e.component_fields.find(e=>e.field_name===o.field_name))||void 0===n?void 0:n.value)&&void 0!==t?t:0}))}),l})),X(null===R||void 0===R?void 0:R.filter(l=>{var o;return(null===(o=l.component_fields.filter(l=>l.value.includes(e.target.value)))||void 0===o?void 0:o.length)>0}))):0==(null===(o=e.target.value)||void 0===o?void 0:o.length)&&($([]),X([]))}})),be.createElement(ne.Z,{tableHostSimple:ie.Z.itemsContainer_ii,style:{width:"100%"},columns:y.tq?[null!==(T=null===G||void 0===G?void 0:G.name)&&void 0!==T?T:"Item"]:[...ae],list:q.map((e,l)=>{var o,i,t,n,d,a,r,v,s;const u="".concat(null===(o=e.component_fields.find(e=>"Name"===e.field_name))||void 0===o?void 0:o.value),c="".concat(null===(i=e.component_fields.find(e=>"Range"===e.field_name))||void 0===i?void 0:i.value),p="".concat(null===(t=e.component_fields.find(e=>"Application"===e.field_name))||void 0===t?void 0:t.value),m=null===(n=e.component_fields.find(e=>"Link"===e.data_type_name&&"Picture"!==e.field_name))||void 0===n?void 0:n.value,f=null===(d=e.component_fields.find(e=>"Link"===e.data_type_name&&"Picture"===e.field_name))||void 0===d?void 0:d.value,_=null===Q||void 0===Q||null===(a=Q.misc_info)||void 0===a?void 0:a.templatesData.find(e=>"Battery Order Template"===e.name).config.find(e=>e.label===(null===G||void 0===G?void 0:G.options.key)),y=null===P||void 0===P||null===(r=P.items)||void 0===r?void 0:r.find(e=>e[_.key]===Y[l][null===G||void 0===G?void 0:G.options.key]),g=y?+y.quantity:0,b=y?+y.alt_value:0;let E={};return ae.filter(l=>{var o,i;E[l]=be.createElement("div",{className:he.Z.templateInformation},"".concat(null!==(o=null===(i=e.component_fields.find(e=>e.field_name===l))||void 0===i?void 0:i.value)&&void 0!==o?o:""))}),E[null!==(v=null===G||void 0===G?void 0:G.name)&&void 0!==v?v:"Item"]=be.createElement("div",null,be.createElement("div",{style:{display:"flex"}},be.createElement("div",{style:{display:"",width:"70%"}},be.createElement("div",{className:he.Z.templateInformation},u)),be.createElement("input",{autoComplete:"off",className:he.Z.templateInput,style:{border:"1px solid var(--app-color-gray-light)",width:"30%",height:"30px"},placeholder:g,onChange:e=>{+e.target.value>-1&&(Y[l][oe]=+e.target.value)},onBlur:()=>{$([...Y]),ve(e,l,0)}}))),E.Quantity=L?be.createElement("div",{className:he.Z.templateAddBox},be.createElement(h.zx,{clear:!0,className:he.Z.templatePlus,clicked:()=>{g>0&&(Y[l][oe]=g-1,Y[l][te]=b-1,$([...Y]),ve(e,l,0))}},"-"),be.createElement("input",{autoComplete:"off",className:he.Z.templateInput,placeholder:y?y.quantity:0,onChange:e=>{+e.target.value>-1&&(Y[l][oe]=+e.target.value,Y[l][te]=+e.target.value)},onBlur:()=>{$([...Y]),ve(e,l,0)}}),be.createElement(h.zx,{clear:!0,className:he.Z.templatePlus,clicked:()=>{Y[l][oe]=g+1,Y[l][te]=b+1,$([...Y]),ve(e,l,0)}},"+")):be.createElement("div",{className:he.Z.templateInput},y?y.quantity:0),E.Action=be.createElement(h.zx,{title:(null===(s=z.filter(e=>e.component_id===u))||void 0===s?void 0:s.length)>0?"Remove from Favorites":"Add to Favorites",clicked:()=>{var e;(null===(e=z.filter(e=>e.component_id===u))||void 0===e?void 0:e.length)>0?(0,x.Ni)(z.find(e=>e.component_id===u).id).subscribe({next:()=>{re(z.filter(e=>e.component_id!==u))}}):(0,x.Ic)(A.id,u,"components").subscribe({})},titleStyle:{fontSize:"12px"},style:{width:"200px",height:"30px"}}),E.Info=be.createElement("img",{alt:"lg",src:f,className:he.Z.templatePicture,onClick:()=>window.open(m,"_blank")}),E.Name=be.createElement("div",{className:he.Z.templateInformation},u),E.Application=be.createElement("div",{className:he.Z.templateInformation},p),E.Range=be.createElement("div",{className:he.Z.templateInformation},c),E.Actual=be.createElement("div",{className:he.Z.templateAddBox,style:{padding:"0 10px 0 10px",border:L?"0":"1px solid var(--app-color-gray-lighter)"}},be.createElement("input",{disabled:L,autoComplete:"off",className:he.Z.templateInput,placeholder:b,onChange:e=>{+e.target.value>-1&&(Y[l][te]=+e.target.value,Y[l][oe]=g)},onBlur:()=>{$([...Y]),ve(e,l,0)}})),E})}),0===(null===q||void 0===q?void 0:q.length)&&be.createElement("p",{style:{fontSize:y.tq?"16px":""}},"Please select an item"),be.createElement(h.zx,{light:!0,title:J?"Hide Favorites":"Show Favorites",clicked:()=>{K(!J),!1===J?re(z):($([]),X([]))},style:{width:"180px",display:y.tq?"none":""}}))),y.tq&&be.createElement("div",{className:he.Z.dropdownContainer},be.createElement(h.rk,{items:pe.Z(me.Z("value"))(R.map(e=>{const l=e.component_fields.find(e=>{var l;return e.field_name===(null===F||void 0===F||null===(l=F.options)||void 0===l?void 0:l.filters[0])});return{label:null===l||void 0===l?void 0:l.value,value:null===l||void 0===l?void 0:l.value,component:e}})),onChange:e=>{var l,o,t;K(!1),$([]),ee({[null===F||void 0===F||null===(l=F.options)||void 0===l?void 0:l.filters[0]]:e.value}),X([]),B(!1),setTimeout(()=>B(!0),10),X(null===R||void 0===R?void 0:R.filter(l=>{var o;return(null===(o=l.component_fields.filter(l=>l.value===e.value))||void 0===o?void 0:o.length)>0})),O({action:f._U.setModuleNewStepComponents,value:null!==(o=null===(t=P.currentStep)||void 0===t?void 0:t.component_blueprints)&&void 0!==o?o:[]}),$(null===R||void 0===R?void 0:R.filter(l=>{var o;return(null===(o=l.component_fields.filter(l=>l.value===e.value))||void 0===o?void 0:o.length)>0}).map(e=>{let l={};return G.selected_fields.filter(o=>{var t,n;"Text"!==o.data_type_name&&"Number"!==o.data_type_name||(l=(0,i.Z)((0,i.Z)({},l),{},{[o.field_name]:null!==(t=null===(n=e.component_fields.find(e=>e.field_name===o.field_name))||void 0===n?void 0:n.value)&&void 0!==t?t:0}))}),l}))},style:{fontSize:"16px"},moliclassname:he.Z.componentsSelectMenuOverlayListItem})),be.createElement("br",null)))},Ee=e=>{var l,o,t,n,d,a,r,v,s,u,c,p,_,g,b,x,E,C,M,S,k,Z,I;const[N,D]=(0,f.pQ)(),{creating:T,showSecond:P,listItems:O,orderItems:A,setShowSecond:z,components:L,template:R,component:U,showFavorites:F,begunModule:W,setShowFavorites:q,setListItems:Y,setOrderItems:B,setSelectedItems:H,selectedItems:j}=e,G=U.selected_fields.find(e=>"Record"===e.data_type_name),J=L.filter(e=>{var l;return(null===(l=e.component_fields.filter(e=>{var l;return e.component_blueprint_id===(null===G||void 0===G||null===(l=G.options)||void 0===l?void 0:l.component_id)}))||void 0===l?void 0:l.length)>0}),Q=(e,l,o,t,n,d)=>{var a;if("Number"===l)return T?be.createElement("input",{autoComplete:"off",type:"number",className:he.Z.templateIIInput,style:{border:"1px solid var(--app-color-gray-light)",width:"50%",height:"30px"},placeholder:null!==e&&void 0!==e?e:"0",onChange:e=>{+e.target.value>-1&&(A[o][n]=+e.target.value,A[o][d]=+e.target.value)},onBlur:()=>{B([...A]),((e,l)=>{var o;const t=e.component_fields.find(e=>{var l;return e.field_name===(null===R||void 0===R||null===(l=R.key)||void 0===l?void 0:l.label)}),n=null===N||void 0===N||null===(o=N.items)||void 0===o?void 0:o.find(e=>{var l;return e[null===R||void 0===R||null===(l=R.key)||void 0===l?void 0:l.key]===t.value});var d,a,r;if(void 0===n){if(void 0==+(null===(d=A[l])||void 0===d?void 0:d.quantity)||+(null===(a=A[l])||void 0===a?void 0:a.quantity)>0){let e={};null===R||void 0===R||R.slist.filter(o=>{var t,n;e=(0,i.Z)((0,i.Z)({},e),{},{[o.key]:null!==(t=A[l][o.key])&&void 0!==t?t:"",id:(0,m.mR)(),options:null!==(n=null===o||void 0===o?void 0:o.options)&&void 0!==n?n:{}})}),D({action:f._U.addModuleItems,value:e})}}else 0==+(null===(r=A[l])||void 0===r?void 0:r.quantity)?D({action:f._U.removeModuleItems,value:n}):(null===R||void 0===R||R.slist.filter(e=>{n[e.key]=A[l][e.key]}),D({action:f._U.updateModuleItems,value:n}))})(t,o)}}):be.createElement("div",{className:he.Z.templateInput},null!==(a=e.value)&&void 0!==a?a:"0");if("Action"===l)return be.createElement("div",null);if("Link"===l){const l="".concat(e);return null!==l&&void 0!==l&&l.includes(".jpg")||null!==l&&void 0!==l&&l.includes(".png")||null!==l&&void 0!==l&&l.includes(".jpeg")?be.createElement("img",{alt:"lg",src:l,className:he.Z.templateIIPicture}):be.createElement("p",{className:he.Z.templateURL,onClick:()=>window.open(l,"_blank")},"View")}return"Info"===l||"Text"===l?be.createElement("div",{className:he.Z.templateInformation,style:{textAlign:"center"}},null!==e&&void 0!==e?e:""):be.createElement("div",null,null!==e&&void 0!==e?e:"")};return be.createElement("div",{style:{width:"100%",justifyContent:"center"}},be.createElement("div",{style:{margin:"auto",width:"inherit"}},be.createElement("div",{style:{width:"inherit"}},be.createElement("p",null,null!==(l=null===R||void 0===R||null===(o=R.config)||void 0===o||null===(t=o.find(e=>"tlist"===e.key))||void 0===t?void 0:t.label)&&void 0!==l?l:"ORDERS:"),be.createElement(ne.Z,{className:he.Z.itemsTable_ii,style:{width:(null===R||void 0===R||null===(n=R.tlist)||void 0===n?void 0:n.length)>4?"100%":"70%"},highlights:"var(--app-color-gray-lighter)",columns:y.tq?null===R||void 0===R?void 0:R.tlist.filter(e=>{var l;return"Number"===e.value||e.key===(null===R||void 0===R||null===(l=R.key)||void 0===l?void 0:l.key)||"Info"===e.value||"Text"===e.value}).map(e=>e.label):null===R||void 0===R||null===(d=R.tlist)||void 0===d?void 0:d.map(e=>e.label),footer:["Items ".concat(null===N||void 0===N||null===(a=N.items)||void 0===a?void 0:a.length),"".concat(V.Z((e,l)=>{var o;return null!==(o=+e+ +l.quantity)&&void 0!==o?o:0},0,null!==(r=null===N||void 0===N?void 0:N.items)&&void 0!==r?r:[]))],list:null===N||void 0===N||null===(v=N.items)||void 0===v?void 0:v.map(e=>{let l={id:e.id};return null===R||void 0===R||R.tlist.filter(o=>{l=(0,i.Z)((0,i.Z)({},l),{},{[o.label]:e[o.key]})}),l}),onListItemClick:e=>{B(null===J||void 0===J?void 0:J.filter(l=>{var o;return(null===(o=l.component_fields.filter(l=>{var o;return l.value===e[null===R||void 0===R||null===(o=R.key)||void 0===o?void 0:o.label]}))||void 0===o?void 0:o.length)>0}).map(e=>{let l={};return null===R||void 0===R||R.slist.filter(o=>{var t,n,d,a;l=(0,i.Z)((0,i.Z)({},l),{},{[o.label]:null!==(t=null===(n=e.component_fields.find(e=>e.field_name===o.label))||void 0===n?void 0:n.value)&&void 0!==t?t:0,[o.key]:null!==(d=null===(a=e.component_fields.find(e=>e.field_name===o.label))||void 0===a?void 0:a.value)&&void 0!==d?d:0})}),l})),Y(null===J||void 0===J?void 0:J.filter(l=>{var o;return(null===(o=l.component_fields.filter(l=>{var o;return l.value===e[null===R||void 0===R||null===(o=R.key)||void 0===o?void 0:o.label]}))||void 0===o?void 0:o.length)>0}))}}),be.createElement("br",null),be.createElement("div",{style:{width:"100%",display:y.tq?"":F?"none":"flex",flexDirection:"row",justifyContent:"center",fontSize:"18px"}},(null===G||void 0===G||null===(s=G.options)||void 0===s||null===(u=s.filters)||void 0===u?void 0:u.length)>0&&be.createElement("div",{className:he.Z.dropdownContainer,style:{border:"1px solid var(--app-color-gray-dark)",width:y.tq?"100%":"25%"}},be.createElement(h.rk,{items:J?pe.Z(me.Z("value"))(J.map(e=>{const l=e.component_fields.find(e=>{var l;return e.field_name===(null===G||void 0===G||null===(l=G.options)||void 0===l?void 0:l.filters[0])});return{label:null===l||void 0===l?void 0:l.value,value:null===l||void 0===l?void 0:l.value,component:e}})):[],onChange:e=>{var l,o,t;q(!1),B([]),H({[null===G||void 0===G||null===(l=G.options)||void 0===l?void 0:l.filters[0]]:e.value}),Y([]),z(!1),setTimeout(()=>z(!0),10),Y(null===J||void 0===J?void 0:J.filter(l=>{var o;return(null===(o=l.component_fields.filter(l=>l.value===e.value))||void 0===o?void 0:o.length)>0})),D({action:f._U.setModuleNewStepComponents,value:null!==(o=null===(t=N.currentStep)||void 0===t?void 0:t.component_blueprints)&&void 0!==o?o:[]}),B(null===J||void 0===J?void 0:J.filter(l=>{var o;return(null===(o=l.component_fields.filter(l=>l.value===e.value))||void 0===o?void 0:o.length)>0}).map(e=>{let l={};return null===R||void 0===R||R.slist.filter(o=>{var t,n;const d=null!==(t=null===(n=e.component_fields.find(e=>e.field_name===o.label))||void 0===n?void 0:n.value)&&void 0!==t?t:"";l=(0,i.Z)((0,i.Z)({},l),{},{[o.label]:d,[o.key]:d})}),l}))},placeholder:null===G||void 0===G||null===(c=G.options)||void 0===c?void 0:c.filters[0],moliclassname:he.Z.componentsSelectMenuOverlayListItem,style:{fontSize:"16px"},className:he.Z.currencyInput})),(null===G||void 0===G||null===(p=G.options)||void 0===p||null===(_=p.filters)||void 0===_?void 0:_.length)>1&&!y.tq&&P&&be.createElement("div",{className:he.Z.dropdownContainer,style:{marginLeft:"10px",border:"1px solid var(--app-color-gray-dark)",width:"25%"}},be.createElement(h.rk,{items:j[null===G||void 0===G||null===(g=G.options)||void 0===g?void 0:g.filters[0]]?pe.Z(me.Z("value"))(J.map(e=>{const l=e.component_fields.find(e=>{var l;return e.field_name===(null===G||void 0===G||null===(l=G.options)||void 0===l?void 0:l.filters[1])});return{label:null===l||void 0===l?void 0:l.value,value:null===l||void 0===l?void 0:l.value,component:e}}).filter(e=>e.component.component_fields.filter(e=>{var l,o;return e.value===j[null===G||void 0===G||null===(l=G.options)||void 0===l?void 0:l.filters[0]]&&e.field_name===(null===G||void 0===G||null===(o=G.options)||void 0===o?void 0:o.filters[0])}).length>0)):[],onChange:e=>{var l,o,t;q(!1),D({action:f._U.setModuleNewStepComponents,value:null!==(l=null===(o=N.currentStep)||void 0===o?void 0:o.component_blueprints)&&void 0!==l?l:[]}),H((0,i.Z)((0,i.Z)({},j),{},{[null===G||void 0===G||null===(t=G.options)||void 0===t?void 0:t.filters[1]]:e.value})),B(null===J||void 0===J?void 0:J.filter(l=>{var o;return(null===(o=l.component_fields.filter(l=>l.value===e.value))||void 0===o?void 0:o.length)>0}).filter(e=>{var l;return(null===(l=e.component_fields.filter(e=>{var l;return e.value===j[null===G||void 0===G||null===(l=G.options)||void 0===l?void 0:l.filters[0]]}))||void 0===l?void 0:l.length)>0}).map(e=>{let l={};return null===R||void 0===R||R.slist.filter(o=>{var t,n;const d=null!==(t=null===(n=e.component_fields.find(e=>e.field_name===o.label))||void 0===n?void 0:n.value)&&void 0!==t?t:0;l=(0,i.Z)((0,i.Z)({},l),{},{[o.label]:d,[o.key]:d})}),l})),Y(null===J||void 0===J?void 0:J.filter(l=>{var o;return(null===(o=l.component_fields.filter(l=>l.value===e.value))||void 0===o?void 0:o.length)>0}).filter(e=>{var l;return(null===(l=e.component_fields.filter(e=>{var l;return e.value===j[null===G||void 0===G||null===(l=G.options)||void 0===l?void 0:l.filters[0]]}))||void 0===l?void 0:l.length)>0}))},placeholder:null===G||void 0===G||null===(b=G.options)||void 0===b?void 0:b.filters[1],style:{fontSize:"16px"},moliclassname:he.Z.componentsSelectMenuOverlayListItem}))),be.createElement("div",{className:he.Z.searchContainer,style:{display:F?"none":"",width:y.tq?"100%":"400px"}},be.createElement(w.O,null),be.createElement("input",{placeholder:"Search",className:he.Z.searchInput,onChange:e=>{var l,o;(null===(l=e.target.value)||void 0===l?void 0:l.length)>1?(Y(null===J||void 0===J?void 0:J.filter(l=>{var o;return(null===(o=l.component_fields.filter(l=>l.value.includes(e.target.value)))||void 0===o?void 0:o.length)>0})),B(null===J||void 0===J?void 0:J.filter(l=>{var o;return(null===(o=l.component_fields.filter(l=>l.value.includes(e.target.value)))||void 0===o?void 0:o.length)>0}).map(e=>{let l={};return null===R||void 0===R||R.slist.filter(o=>{var t,n;const d=null!==(t=null===(n=e.component_fields.find(e=>e.field_name===o.label))||void 0===n?void 0:n.value)&&void 0!==t?t:"";l=(0,i.Z)((0,i.Z)({},l),{},{[o.label]:d,[o.key]:d})}),l}))):0==(null===(o=e.target.value)||void 0===o?void 0:o.length)&&(B([]),Y([]))}})),be.createElement(ne.Z,{className:he.Z.mobileTable_ii,style:{width:y.tq||(null===R||void 0===R||null===(x=R.slist)||void 0===x?void 0:x.length)>4?"100%":"70%"},tableHostSimple:he.Z.tableHostSimple,columns:y.tq?null===R||void 0===R?void 0:R.slist.filter(e=>{var l;return"Number"===e.value||e.key===(null===R||void 0===R||null===(l=R.key)||void 0===l?void 0:l.key)}).map(e=>e.label):(null===(E=W.processModule.module.options)||void 0===E||null===(C=E.computes)||void 0===C?void 0:C.length)>0?[...null!==(M=null===R||void 0===R?void 0:R.slist.map(e=>e.label))&&void 0!==M?M:[],...null!==(S=null===(k=W.processModule.module.options)||void 0===k||null===(Z=k.computes)||void 0===Z?void 0:Z.map(e=>{var l;const o=null===(l=L.filter(l=>l.module_id===e.module_id))||void 0===l?void 0:l.find(l=>l.component_fields.filter(l=>l.procedure_step_blueprint_field_id===e.field_id).length>0);return(null===o||void 0===o?void 0:o.component_fields.find(l=>l.procedure_step_blueprint_field_id===e.field_id)).field_name}))&&void 0!==S?S:[]]:[...null!==(I=null===R||void 0===R?void 0:R.slist.map(e=>e.label))&&void 0!==I?I:[]],list:O.map((e,l)=>{var o,i,t,n,d;let a={};null===R||void 0===R||null===(o=R.slist)||void 0===o||o.filter(o=>{var i,t;a[o.label]=Q("".concat(null!==(i=null===(t=e.component_fields.find(e=>e.field_name===o.label))||void 0===t?void 0:t.value)&&void 0!==i?i:""),o.value,l,e,o.key,o.label)});const r=null!==(i=null===N||void 0===N||null===(t=N.items)||void 0===t?void 0:t.find(e=>{var o,i;return e[null===R||void 0===R||null===(o=R.key)||void 0===o?void 0:o.key]===A[l][null===R||void 0===R||null===(i=R.key)||void 0===i?void 0:i.key]}))&&void 0!==i?i:void 0;var v,s;(void 0!==r&&Object.keys(r).filter(o=>{var i;const t=null===R||void 0===R||null===(i=R.slist)||void 0===i?void 0:i.find(e=>e.key===o);t&&(a[t.label]=Q(r[o],t.value,l,e,t.key,t.label))}),(null===(n=W.processModule.module.options)||void 0===n||null===(d=n.computes)||void 0===d?void 0:d.length)>0)&&(null===(v=W.processModule.module.options)||void 0===v||null===(s=v.computes)||void 0===s||s.map(l=>{var o;const i=null===L||void 0===L||null===(o=L.filter(e=>e.module_id===l.module_id))||void 0===o?void 0:o.find(l=>l.component_fields.filter(l=>{var o,i;return l.value===(null!==(o=null===(i=e.component_fields.find(e=>{var l;return e.field_name===(null===R||void 0===R||null===(l=R.key)||void 0===l?void 0:l.label)}))||void 0===i?void 0:i.value)&&void 0!==o?o:"#$")}).length>0),t=null===i||void 0===i?void 0:i.component_fields.find(e=>e.procedure_step_blueprint_field_id===l.field_id);t&&(a[t.field_name]=null===t||void 0===t?void 0:t.value)}));return a})}),0===(null===O||void 0===O?void 0:O.length)&&be.createElement("p",null,"No Items Selected"))),be.createElement("br",null))};var Ce=o(6341),we=o(32086),Me=o(8284),Se=o(9204),ke=o(4292),Ze=o(25403),Ie=(o(68140),o(60940),o(95007));const Ne=(0,t.memo)(e=>{var l,o,i,n;const{component:d,allComponents:a,components:r,favorites:v=[],user:s,companyData:u,selectedComponent:c,templateName:p,begunModule:m}=e,{nextButtonClicked:f,isMandatoryError:y,index:g,component_blueprint:h,setIsMandatoryError:b,editMode:x,blueprints:E,allModules:C,authenticatedUser:w,companyUsersArray:M,companyPositionsArray:S,products:k}=e,[Z,I]=(0,t.useState)({}),[N,D]=(0,t.useState)([]),[T,P]=(0,t.useState)([]),[O,A]=(0,t.useState)([]),[z,L]=(0,t.useState)(null!==(l=+localStorage.getItem("timer"))&&void 0!==l?l:0),[R,U]=(0,t.useState)(null===d||void 0===d||null===(o=d.selected_fields)||void 0===o?void 0:o.filter(e=>"Record"===e.data_type_name)),[F,q]=(0,t.useState)(!1),[Y,B]=(0,t.useState)(),[H,j]=(0,t.useState)(),[V,G]=(0,t.useState)(!1),J=d.selected_fields.find(e=>"Filters"===e.data_type_name||"Record"===e.data_type_name),Q=r.filter(e=>e.component_fields.filter(e=>{var l;return e.component_blueprint_id===(null===J||void 0===J||null===(l=J.options)||void 0===l?void 0:l.component_id)}).length>0),K=(null===c||void 0===c||null===(i=c.created_by)||void 0===i?void 0:i.id)===s.id||void 0===(null===c||void 0===c?void 0:c.created_by),X=null===u||void 0===u||null===(n=u.misc_info)||void 0===n?void 0:n.templatesData.find(e=>e.name===p);return"Scoresheet Template"===p?null!==c&&void 0!==c&&c.id?t.createElement(Ce.tF,{showSecond:Y,listItems:T,orderItems:N,selectedComponent:c,action:H,setAction:j,setShowSecond:B,components:r,records:R,template:X,component:d,allComponents:a,generalArray:O,showFavorites:F,setGeneralArray:A,setTimer:L,timer:z,index:g,begunModule:m,companyData:u,setShowFavorites:q,loading:V,setLoading:G,setListItems:P,setOrderItems:D,setSelectedItems:I,selectedItems:Z}):t.createElement("p",null,"Need to save this transaction first before the scoresheet is made available"):"Meets Template"===p?t.createElement("div",{style:{width:"100%"}}):"Club Template"===p?t.createElement(W,{allModules:C,components:r,begunModule:m,authenticatedUser:w,companyUsersArray:M}):"Sports Facility Template"===p?t.createElement("div",null,e.children):"Battery Order Template"===p?t.createElement(xe,{showSecond:Y,listItems:T,orderItems:N,selectedComponent:c,action:H,setAction:j,setShowSecond:B,components:r,records:R,template:X,component:d,allComponents:a,generalArray:O,showFavorites:F,setGeneralArray:A,setTimer:L,timer:z,index:g,begunModule:m,companyData:u,setShowFavorites:q,loading:V,setLoading:G,setListItems:P,setOrderItems:D,setSelectedItems:I,selectedItems:Z,templateName:p,items:Q,field:J,user:s,favorites:v,creating:K}):"Order Template"===p?t.createElement(Ee,{showSecond:Y,listItems:T,orderItems:N,selectedComponent:c,action:H,setAction:j,setShowSecond:B,components:r,records:R,template:X,component:d,allComponents:a,generalArray:O,showFavorites:F,setGeneralArray:A,setTimer:L,timer:z,index:g,begunModule:m,companyData:u,setShowFavorites:q,loading:V,setLoading:G,setListItems:P,setOrderItems:D,setSelectedItems:I,selectedItems:Z,templateName:p,items:Q,field:J,user:s,favorites:v,creating:K}):"Routes Template"===p?t.createElement(ge,{component:d,selectedComponent:c,component_blueprint:h,title:p},t.createElement(_.Z,{editMode:x,nextButtonClicked:f,isMandatoryError:y,blueprintIndex:g,setIsMandatoryError:b,blueprints:E,component:h,companyData:u,components:r,allModules:C,products:k,authenticatedUser:w,selectedComponent:c,companyUsersArray:M,companyPositionsArray:S,begunModule:m})):"Timesheet Template"===p?null!==c&&void 0!==c&&c.id?t.createElement(re,{selectedComponent:c,component_blueprint:h,title:p}):t.createElement("div",null):"Leaves Template"===p?null!==c&&void 0!==c&&c.id?t.createElement(ve,{selectedComponent:c,component_blueprint:h,title:p}):t.createElement("div",null):"KPI Template"===p?null!==c&&void 0!==c&&c.id?t.createElement(se,{selectedComponent:c,component_blueprint:h,title:p}):t.createElement("div",null):"Clock In Template"===p?(window.clearInterval(+localStorage.getItem("timer")),t.createElement(ue,{template:X,companyUsersArray:M,selectedComponent:c,component_blueprint:h,begunModule:m,companyData:u,authenticatedUser:w,title:p})):t.createElement("div",{style:{width:"100%"}},t.createElement(_.Z,{editMode:x,nextButtonClicked:f,isMandatoryError:y,blueprintIndex:g,setIsMandatoryError:b,blueprints:E,component:h,companyData:u,components:r,allModules:C,products:k,authenticatedUser:w,selectedComponent:c,companyUsersArray:M,companyPositionsArray:S,begunModule:m}))}),De=(0,p.$j)(e=>{const{authenticatedUser:l}=e.authReducer,{favorites:o,begunModule:i}=e.flowReducer;return{authenticatedUser:l,favorites:o,begunModule:i}})(e=>{var l,o;const{component:v,blueprintIndex:s,setIsMandatoryError:p,companyData:_,components:y,favorites:g,products:h,authenticatedUser:b,begunModule:x,selectedComponent:E,setSelectedComponent:C,templateName:w}=e,{editMode:M,blueprints:S,allModules:k,companyUsersArray:Z,companyPositionsArray:I,nextButtonClicked:N,isMandatoryError:D,index:T,component_blueprint:P}=e,[O,A]=(0,f.pQ)(),[z]=(0,t.useState)(a),[L,R]=(0,t.useState)(""),U=(0,t.useRef)(null),F=null===(l=O.currentStep)||void 0===l||null===(o=l.component_blueprints)||void 0===o?void 0:o.findIndex(e=>e.id===(null===v||void 0===v?void 0:v.id)),W=()=>{var e;null!==v&&void 0!==v&&null!==(e=v.selected_fields)&&void 0!==e&&e.some(e=>{var l;return!0===e.mandatory&&!0===e.visible&&(!e.value||(null===e||void 0===e||null===(l=e.value)||void 0===l?void 0:l.length)<1)})?p(!0):p(!1)},q=e=>{const l=O.components.find(e=>e.selected_fields.filter(e=>"Formula"===e.data_type_name).length>0);if(void 0!==l){const o=l.selected_fields.find(e=>"Formula"===e.data_type_name),i=(0,m.LV)(o.options,v.selected_fields.filter(e=>o.options.list.includes(e.field_name)),[...O.components,e]);o.value="".concat(i.toString())}else{const l=O.currentStep.component_blueprints.find(e=>e.selected_fields.filter(e=>"Formula"===e.data_type_name).length>0);if(void 0!==l){const o=l.selected_fields.find(e=>"Formula"===e.data_type_name),t=(0,m.LV)(o.options,v.selected_fields.filter(e=>o.options.list.includes(e.field_name)),[...O.components,e]);o.value="".concat(t.toString());const n=JSON.parse(JSON.stringify((0,i.Z)((0,i.Z)({},l),{},{temp_id:(0,m.mR)(),selected_fields:l.selected_fields})));A({action:f._U.addModuleComponents,value:n})}}},Y=(e,l)=>{var o,i,t;const n=[...null!==(o=null===(i=O.currentStep)||void 0===i?void 0:i.component_blueprints)&&void 0!==o?o:[]],d=null===(t=n[F])||void 0===t?void 0:t.selected_fields[l];"Number"===(null===d||void 0===d?void 0:d.data_type_name)?Number(+e)?d.value=e:""===e&&(d.value=""):d.value=e,d.value&&d.mandatory&&(d.errors=""),W(),A({action:f._U.setComponentBlueprints,value:n}),A({action:f._U.setModuleNewStepComponents,value:n})},B=(0,t.useCallback)((e,l,o)=>{var i,t,n;const d=[...null!==(i=null===(t=O.currentStep)||void 0===t?void 0:t.component_blueprints)&&void 0!==i?i:[]],a=null===(n=d[F])||void 0===n?void 0:n.selected_fields[l];a.options.country_code=null===e||void 0===e?void 0:e.countryCode,a.options.country_name=null===e||void 0===e?void 0:e.name,a.options.country_prefix="+".concat(null===e||void 0===e?void 0:e.dialCode),A({action:f._U.setComponentBlueprints,value:d}),A({action:f._U.setModuleNewStepComponents,value:d}),Y(o,l)},[]),H=(0,t.useCallback)((e,l)=>{var o,i,t;const n=[...null!==(o=null===(i=O.currentStep)||void 0===i?void 0:i.component_blueprints)&&void 0!==o?o:[]],d=null===(t=n[F])||void 0===t?void 0:t.selected_fields[l];d.options.currency_type=null===e||void 0===e?void 0:e.label,d.options.currency_value=null===e||void 0===e?void 0:e.value,d.options.symbol=null===e||void 0===e?void 0:e.symbol,A({action:f._U.setComponentBlueprints,value:n}),A({action:f._U.setModuleNewStepComponents,value:n})},[]);return(0,t.useEffect)(()=>{var e;A({action:f._U.setModuleNewStepComponents,value:null===(e=O.currentStep)||void 0===e?void 0:e.component_blueprints})},[O.currentStep]),t.createElement("div",{id:"accordion",className:n,key:s},t.createElement("div",{className:u()(d,z),"app-variant-has-error":L?"error":""},t.createElement("div",{ref:U,style:{maxHeight:z===a?"":"0px",display:"flex"},className:r},t.createElement(Ne,{templateName:w,component:v,handleInputChange:Y,handlePrefixChange:B,handleCurrencyChange:H,checkIfAreMandatoryErrored:W,handleCheckbox:(e,l)=>{var o,i,t;const n=[...null!==(o=null===(i=O.currentStep)||void 0===i?void 0:i.component_blueprints)&&void 0!==o?o:[]],d=null===(t=n[F])||void 0===t?void 0:t.selected_fields[l];d.value=e,d.value&&d.mandatory&&(d.errors=""),A({action:f._U.setComponentBlueprints,value:n}),A({action:f._U.setModuleNewStepComponents,value:n}),W()},isInherited:!1,indexInContextArray:F,handleLocationChange:(e,l)=>{var o,i,t;const n=[...null!==(o=null===(i=O.currentStep)||void 0===i?void 0:i.component_blueprints)&&void 0!==o?o:[]];(null===(t=n[F])||void 0===t?void 0:t.selected_fields[l]).value="".concat(e.lat,", ").concat(e.lng),A({action:f._U.setComponentBlueprints,value:n}),A({action:f._U.setModuleNewStepComponents,value:n})},processTaskContext:O,setTaskProcessContext:A,companyData:_,components:(()=>{var e,l;const o=null===(e=O.components.find(e=>e.selected_fields.filter(e=>{var l,o;return"Global"===e.data_type_name&&1==e.visible&&e.field_name===(null===(l=v.selected_fields.find(e=>("Filters"===e.data_type_name||"Record"===e.data_type_name)&&1==e.visible))||void 0===l||null===(o=l.options)||void 0===o?void 0:o.global)}).length>0))||void 0===e||null===(l=e.selected_fields.find(e=>"Global"===e.data_type_name))||void 0===l?void 0:l.value;return o?y.filter(e=>e.component_fields.filter(e=>{var l,i,t;return(null===e||void 0===e||null===(l=e.value)||void 0===l?void 0:l.toUpperCase())===(null===o||void 0===o?void 0:o.toUpperCase())&&e.field_name===(null===(i=v.selected_fields.find(e=>"Filters"===e.data_type_name||"Record"===e.data_type_name))||void 0===i||null===(t=i.options)||void 0===t?void 0:t.global)}).length>0):y})(),products:h,saveButtonAction:()=>{const e=JSON.parse(JSON.stringify((0,i.Z)((0,i.Z)({},v),{},{temp_id:(0,m.mR)(),selected_fields:v.selected_fields})));q(e),A({action:f._U.addModuleComponents,value:e}),R(""),v.selected_fields.map((e,l)=>{Y("",l)}),A({action:f._U.setModuleNewStepComponents,value:[...we.Z(e=>e.selected_fields.filter(e=>""===e.value).length>0,[...we.Z(Me.Z("id",v.id))(O.newStepComponents)])]})},updateFormula:q,favorites:g,user:b,begunModule:x,selectedComponent:E,setSelectedComponent:C,allComponents:y,nextButtonClicked:N,isMandatoryError:D,index:T,component_blueprint:P,setIsMandatoryError:p,editMode:M,blueprints:S,allModules:k,authenticatedUser:b,companyUsersArray:Z,companyPositionsArray:I}))),L&&(null===L||void 0===L?void 0:L.message)&&t.createElement(c.Z,{message:L.message}))}),Te=t.forwardRef((e,l)=>{var o,i,n,d,a,r,v;const{begunModule:s,goto:u,companyData:c,selectedComponent:p,setSelectedComponent:m,companyUsersArray:f,companyPositionsArray:_,components:y=[],step:g,print:h=!1}=e,[b,x]=(0,t.useState)(0),[E,C]=(0,t.useState)(),[w,M]=(0,t.useState)(),[S,k]=(0,t.useState)([]),[Z,I]=(0,t.useState)([]),[N,D]=(0,t.useState)([]),T=null===s||void 0===s||null===(o=s.processModule)||void 0===o||null===(i=o.completeSteps)||void 0===i||null===(n=i.find(e=>{var l;return(null===e||void 0===e||null===(l=e.component_blueprints)||void 0===l?void 0:l.filter(e=>e.selected_fields.filter(e=>"Template"===e.data_type_name).length>0).length)>0}))||void 0===n||null===(d=n.component_blueprints.find(e=>e.selected_fields.find(e=>"Template"===e.data_type_name&&1==e.visible)))||void 0===d||null===(a=d.selected_fields.find(e=>"Template"===e.data_type_name&&1==e.visible))||void 0===a?void 0:a.field_name,P=null===c||void 0===c||null===(r=c.misc_info)||void 0===r?void 0:r.templatesData.find(e=>e.name===T),[O,A]=(0,t.useState)(null===p||void 0===p||null===(v=p.component_fields)||void 0===v?void 0:v.filter(e=>"Record"===e.data_type_name));return"Scoresheet Template"===T?t.createElement(Ce.mr,{setRecords:A,selectedComponent:p,template:P,setListItems:I,components:y,setOrderItems:k,setSelectedIndex:C,records:O,listItems:Z,orderItems:S,begunModule:s,selectedTabIndex:b,setSelectedTabIndex:x,selectedItems:w,setSelectedItems:M,selectedIndex:E,generalArray:N,setGeneralArray:D,print:h}):"Sports Facility Template"===T?t.createElement(Y,{selectedComponent:p,setSelectedComponent:m},e.children):"Player Profile Template"===T?t.createElement(Ce.yX,{selectedComponent:p,template:P,components:y,setListItems:I,begunModule:s,listItems:Z}):"League Template"===T?t.createElement(Ce.Dr,{selectedComponent:p,template:P,components:y}):"Club Template"===T?t.createElement(U,{title:p.title,selectedComponent:p,setSelectedComponent:m,step:g,template:P,goto:u},e.children):"Meets Template"===T?t.createElement(F,{selectedComponent:p,begunModule:s,goto:u},e.children):"Clock In Template"===T||"Jobs Create Template"===T?t.createElement("div",null,e.children):t.createElement("div",null,e.children,e.payments,e.creator,e.shares)}),Pe=e=>{const{templateName:l,selectedComponent:o,component_blueprint:i,template:n,companyUsersArray:d,begunModule:a,companyData:r,authenticatedUser:s}=e;var u,c,p,m;return"Timesheet Template"===l?t.createElement("div",{className:v},(null===o||void 0===o?void 0:o.id)&&t.createElement(re,{selectedComponent:o,component_blueprint:i,title:l,isUpdating:!1},t.createElement("div",{style:{margin:"0 0 50px 0",fontSize:"20px",fontFamily:"var(--app-text-main-font)",fontWeight:"bold",color:"var(--app-color-gray-dark)"}},null===(u=a.processModule.module)||void 0===u?void 0:u.name))):"Leaves Template"===l?null!==o&&void 0!==o&&o.id?t.createElement("div",{className:v},t.createElement(ve,{selectedComponent:o,component_blueprint:i,title:l,isUpdating:!1},t.createElement("div",{style:{margin:"0 0 50px 0",fontSize:"20px",fontFamily:"var(--app-text-main-font)",fontWeight:"bold",color:"var(--app-color-gray-dark)"}},null===(c=a.processModule.module)||void 0===c?void 0:c.name))):t.createElement("div",null):"KPI Template"===l?t.createElement("div",{className:v},t.createElement(se,{selectedComponent:o,component_blueprint:i,title:l,isUpdating:!1},t.createElement("div",{style:{margin:"0 0 50px 0",fontSize:"20px",fontFamily:"var(--app-text-main-font)",fontWeight:"bold",color:"var(--app-color-gray-dark)"}},null===(p=a.processModule.module)||void 0===p?void 0:p.name))):"Clock In Template"===l?t.createElement("div",{className:v},t.createElement(ue,{template:n,companyUsersArray:d,selectedComponent:o,component_blueprint:i,begunModule:a,companyData:r,authenticatedUser:s,title:l,isUpdating:!1},t.createElement("div",{style:{margin:"0 0 50px 0",fontSize:"20px",fontFamily:"var(--app-text-main-font)",fontWeight:"bold",color:"var(--app-color-gray-dark)"}},null===(m=a.processModule.module)||void 0===m?void 0:m.name))):t.createElement("div",null,e.children)},Oe=e=>"Scoresheet Template"===e?"100%":"Club Template"===e?"40%":"60%",Ae=function(e,l,o){var i,t,n,d,a;let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],v=arguments.length>4?arguments[4]:void 0,s=arguments.length>5?arguments[5]:void 0;const u=Ie.utils.book_new(),c=Ie.utils.json_to_sheet([]),p=Ie.utils.json_to_sheet([]);let f=[];if(null!==l&&void 0!==l&&null!==(i=l.selected_fields)&&void 0!==i&&null!==(t=i.find(e=>"Transaction List"===e.data_type_name))&&void 0!==t&&null!==(n=t.options)&&void 0!==n&&n.simple){const e=l.selected_fields.filter(e=>{var l;return null===(l=e.options)||void 0===l?void 0:l.mapToItem}).map(e=>e);f=v.map(l=>{const o={};return r.forEach(e=>{if((0,m.sO)(l[e])){const i=JSON.parse(l[e]);Object.keys(null!==i&&void 0!==i?i:[]).forEach(e=>o[e]=i[e])}}),Object.assign({},...e.map(e=>"Date"===e.data_type_name?{[e.field_name]:I()(new Date(o[e.field_name])).format("MMM DD YYYY")}:{[e.field_name]:o[e.field_name]}))})}else{var _;const e=null===l||void 0===l||null===(_=l.selected_fields)||void 0===_?void 0:_.filter(e=>{var l;return null===(l=e.options)||void 0===l?void 0:l.mapToItem}).map(e=>e.options.mapToItem);f=v.map(l=>Object.assign({},...e.map(e=>({[e]:l[e]}))))}var y;(Ie.utils.sheet_add_aoa(c,[l.selected_fields.filter(e=>{var l;return null===(l=e.options)||void 0===l?void 0:l.mapToItem}).map(e=>e.field_name)]),Ie.utils.sheet_add_json(c,f,{origin:"A2",skipHeader:!0}),(null===e||void 0===e||null===(d=e.component_fields)||void 0===d?void 0:d.length)>0)&&(Ie.utils.sheet_add_json(p,null===e||void 0===e||null===(y=e.component_fields)||void 0===y?void 0:y.filter(e=>null===e||void 0===e?void 0:e.value).map(e=>({item_code:e.field_name,value:null===e||void 0===e?void 0:e.value})),{origin:"A2",skipHeader:!0}),Ie.utils.book_append_sheet(u,p,"Information"));return Ie.utils.book_append_sheet(u,c,"".concat(null===(a=s.processModule.module)||void 0===a?void 0:a.name)),(0,Ie.writeFile)(u,"".concat(null===e||void 0===e?void 0:e.title).concat((0,Z.now)(),".xlsx")),0},ze=(e,l,o)=>{var t;if(null!==l&&void 0!==l&&null!==(t=l.reports)&&void 0!==t&&t.find(e=>"Poll Report Template"===(null===e||void 0===e?void 0:e.field_name)&&"Template"===(null===e||void 0===e?void 0:e.data_type_name))){return[...B.Z([G.Z(j.Z("index"))])(Se.Z(e=>e,[...new Set(Se.Z(e=>e,ke.Z(Ze.Z("selected_fields",ke.Z(Ze.Z("component_blueprints",o.processModule.completeSteps))))))]))].filter(e=>{var l;return("Radio"===e.data_type_name||"Dropdown"===e.data_type_name)&&(null===e||void 0===e?void 0:e.visible)&&(null===(l=e.options)||void 0===l?void 0:l.list)}).reduce((e,l)=>{var o,i;return e.concat(null===(o=l.options)||void 0===o||null===(i=o.list)||void 0===i?void 0:i.map(e=>({key:l.field_name,value:e})))},[]).map(t=>l.reports.filter(e=>"Template"!==e.data_type_name).reduce((l,n)=>{var d,a,r,v,s;return"item_code"===(null===n||void 0===n||null===(d=n.options)||void 0===d?void 0:d.mapToItem)?(0,i.Z)((0,i.Z)({},l),{},{[n.field_name]:t.value}):"value"===(null===(a=n.options)||void 0===a?void 0:a.mapToItem)?(0,i.Z)((0,i.Z)({},l),{},{[n.field_name]:t.key}):(0,i.Z)((0,i.Z)({},l),{},{[n.field_name]:(null!==o&&void 0!==o&&null!==(r=o.processModule)&&void 0!==r&&null!==(v=r.module)&&void 0!==v&&null!==(s=v.options)&&void 0!==s&&s.lock?e.filter(e=>{var l,i,t;return e.Status===(null===o||void 0===o||null===(l=o.processModule)||void 0===l||null===(i=l.module)||void 0===i||null===(t=i.options)||void 0===t?void 0:t.lock)}):e).filter(e=>(e[t.key]?e[t.key]:"").split(",").includes(t.value)).length})},{}))}return e}},53692:(e,l,o)=>{"use strict";o.r(l),o.d(l,{default:()=>gl,navigateToTransaction:()=>hl});var i=o(1413),t=o(67861),n=o(23280),d=o(40694),a=o(88374),r=o(93389),v=o(6073),s=o(49465),u=o(88827),c=o(10103),p=o(11577),m=o(1542),f=o(48929),_=o(88550),y=o(73500),g=o(39518),h=o(50981),b=o.n(h),x=o(43984),E=o(52902),C=o(12075),w=o(87462),M=o(45987),S=o(65019),k=o(59401),Z=o(85692),I=o(34710),N=o(49119),D=o(12308),T=o(41131),P=o(27436),O=o(63864),A=o(60534),z=o(79492),L=o.n(z),R=o(4358),U=(o(83381),o(66918)),F=o(49523),W=o(25403),q=o(4292),Y=o(9204),B=o(32086),H=o(53431),j=o(68218),V=o(84634),G=o(35606),J=o(79544),Q=o(98032),K=o(88346),X=o(8284),$=o(97606),ee=o(13397),le=o(3616),oe=o(90421),ie=o(7538),te=o(77802),ne=(o(67055),o(71901),o(87424)),de=o(27658),ae=o(44408),re=o(23910),ve=(o(56120),o(37704),o(72666),o(68623),o(3863),o(95361),o(46415));o(60940);const se={ProcessModuleContainer:"ProcessModule_ProcessModuleContainer__FsiP8",modalLabelHeader:"ProcessModule_modalLabelHeader__RSEXx",processStepHost:"ProcessModule_processStepHost__jnVYj",saveButton:"ProcessModule_saveButton__GOKiK",processModuleContainer:"ProcessModule_processModuleContainer__T-efO",renderComponentContainer:"ProcessModule_renderComponentContainer__MQMoJ",accordionModuleContainer:"ProcessModule_accordionModuleContainer__QQQn5",detailContainer:"ProcessModule_detailContainer__yrECc",leftCardMargin:"ProcessModule_leftCardMargin__+5cc+",centeredCardMargin:"ProcessModule_centeredCardMargin__8ns+o",centeredSpinner:"ProcessModule_centeredSpinner__T1+25",emptyElementsSection:"ProcessModule_emptyElementsSection__LP79x",stepCounter:"ProcessModule_stepCounter__BLQiH",clockIcon:"ProcessModule_clockIcon__Iq90d",stepTitle:"ProcessModule_stepTitle__92AhY",stepGuidanceSmaller:"ProcessModule_stepGuidanceSmaller__fbek+",stepTitleSmaller:"ProcessModule_stepTitleSmaller__o-RAS",stepGuidance:"ProcessModule_stepGuidance__VN9ID",inputContainer:"ProcessModule_inputContainer__ov5HE",selectInput:"ProcessModule_selectInput__gIlsq",multiselectWithSearch:"ProcessModule_multiselectWithSearch__HPDWF",smoMultiselectParent:"ProcessModule_smoMultiselectParent__XMpxu",selectMenuItem:"ProcessModule_selectMenuItem__D9YuM",inputClassName:"ProcessModule_inputClassName__FaizJ",inputClassNameII:"ProcessModule_inputClassNameII__OlFw1",toggleMenuInputButton:"ProcessModule_toggleMenuInputButton__u2LB6",goToNextStep:"ProcessModule_goToNextStep__5FEFk",nextStepsContainer:"ProcessModule_nextStepsContainer__0lDZ4",nextStepImageContainer:"ProcessModule_nextStepImageContainer__ESZoP",nextStepWrapper:"ProcessModule_nextStepWrapper__8aQAo",tasksTableHost:"ProcessModule_tasksTableHost__jF7kU",headerContainer:"ProcessModule_headerContainer__B9M39",content:"ProcessModule_content__TwxRx","react-grid-layout":"ProcessModule_react-grid-layout__kuSHy",layoutJSON:"ProcessModule_layoutJSON__swsUL",columns:"ProcessModule_columns__74Ypn","react-grid-item":"ProcessModule_react-grid-item__SV1zr","react-grid-placeholder":"ProcessModule_react-grid-placeholder__RsO19",resizing:"ProcessModule_resizing__lsJHw",static:"ProcessModule_static__fjtpd",text:"ProcessModule_text__JRaDx",minMax:"ProcessModule_minMax__n6Nqc",add:"ProcessModule_add__73-R8","react-grid-dragHandleExample":"ProcessModule_react-grid-dragHandleExample__ifaCX",cssTransforms:"ProcessModule_cssTransforms__Tj9J0","react-draggable-dragging":"ProcessModule_react-draggable-dragging__df7gg","react-resizable-handle":"ProcessModule_react-resizable-handle__HFiOI",singleButton:"ProcessModule_singleButton__VBAVx",menuRightButtons:"ProcessModule_menuRightButtons__YMGk1",menuButtons:"ProcessModule_menuButtons__t3peI",menuAccordionButtons:"ProcessModule_menuAccordionButtons__IwPeb",detailLabel:"ProcessModule_detailLabel__ujv54",subLabel:"ProcessModule_subLabel__ljjWe",modalHeaderTitle:"ProcessModule_modalHeaderTitle__20ZkP",p:"ProcessModule_p__fq5W3",itemsTable:"ProcessModule_itemsTable__Lhi8m",sharesTable:"ProcessModule_sharesTable__0LY0Q",peoplePositionsSelect:"ProcessModule_peoplePositionsSelect__3PUST",peoplePositionsSelectInput:"ProcessModule_peoplePositionsSelectInput__uW3vb",peoplePositionsSelectMenuOverlay:"ProcessModule_peoplePositionsSelectMenuOverlay__7WF9K",peoplePositionsSelectMenuOverlayItem:"ProcessModule_peoplePositionsSelectMenuOverlayItem__thx5T",deleteText:"ProcessModule_deleteText__LHcJR",deleteButton:"ProcessModule_deleteButton__Vd-mb",searchContainer:"ProcessModule_searchContainer__7U0ti",searchInput:"ProcessModule_searchInput__21v+N",emailInput:"ProcessModule_emailInput__OSseh",actionsContainer:"ProcessModule_actionsContainer__dN4VO",detailButton:"ProcessModule_detailButton__hsMZQ",detailButtonTitleContainer:"ProcessModule_detailButtonTitleContainer__9vGQV",fetchingLatestP:"ProcessModule_fetchingLatestP__w43Ah",modalTitle:"ProcessModule_modalTitle__ZzDzz",modalSubTitle:"ProcessModule_modalSubTitle__iCPup",dropdownSelectComponent:"ProcessModule_dropdownSelectComponent__fwabj",dropdownSelectComponentL:"ProcessModule_dropdownSelectComponentL__UjHu+",dropdownSelectOperation:"ProcessModule_dropdownSelectOperation__Z0sof",dropdownSelectReport:"ProcessModule_dropdownSelectReport__VhkMx",cardTitle:"ProcessModule_cardTitle__5UI1u",customButton:"ProcessModule_customButton__EmZ3f",fieldRowContainer:"ProcessModule_fieldRowContainer__w-2m5",templateInformation:"ProcessModule_templateInformation__diTyj",emulatedFlexGap:"ProcessModule_emulatedFlexGap__0zLFx",selectAndMultiselectHost:"ProcessModule_selectAndMultiselectHost__heH79",selectAndMultiselectHostTiles:"ProcessModule_selectAndMultiselectHostTiles__iC2AB",section:"ProcessModule_section__wECKG",accordionContainer:"ProcessModule_accordionContainer__ivI1e",active:"ProcessModule_active__krZBG",title:"ProcessModule_title__ePgXX",customTitleInput:"ProcessModule_customTitleInput__ONvpq",icon:"ProcessModule_icon__OW9E6",loaderContainer:"ProcessModule_loaderContainer__zN3G3",host:"ProcessModule_host__95lCJ",iconsContainer:"ProcessModule_iconsContainer__ktO+d",rotate:"ProcessModule_rotate__gwBr5",fieldTypeInput:"ProcessModule_fieldTypeInput__+x8RA",fieldMapInput:"ProcessModule_fieldMapInput__TyyrY",fieldTypeDate:"ProcessModule_fieldTypeDate__yjKi1",labelInput:"ProcessModule_labelInput__HMbSI",accordion:"ProcessModule_accordion__Er3uD",regularAccordion:"ProcessModule_regularAccordion__FpzQa",singleInputContainer:"ProcessModule_singleInputContainer__jGXcH",dateInputContainer:"ProcessModule_dateInputContainer__gXUmg",inputContainerClassName:"ProcessModule_inputContainerClassName__T8Rwy",phoneIInput:"ProcessModule_phoneIInput__DrOHj",currencySelectContainer:"ProcessModule_currencySelectContainer__w+Q8U",currencySymbol:"ProcessModule_currencySymbol__hnqlD",currencySelectComponent:"ProcessModule_currencySelectComponent__DiSZQ",currencySelectMenuOverlayList:"ProcessModule_currencySelectMenuOverlayList__eWmgR",currencySelectMenuOverlayListItem:"ProcessModule_currencySelectMenuOverlayListItem__HJNGm",currencySearchInput:"ProcessModule_currencySearchInput__QNuK3",currencyClearControlsClassName:"ProcessModule_currencyClearControlsClassName__cQ2JL",currencyInputContainerClassName:"ProcessModule_currencyInputContainerClassName__jjeME",currencyInput:"ProcessModule_currencyInput__ockL5",peopleContainer:"ProcessModule_peopleContainer__qhRGZ",peopleBooleansOptions:"ProcessModule_peopleBooleansOptions__1QKZY",peoplePositionSelectContainer:"ProcessModule_peoplePositionSelectContainer__Dek6h",unfocusableWrapper:"ProcessModule_unfocusableWrapper__lYnko",menuOverlayList:"ProcessModule_menuOverlayList__stXtG",menuOverlayListItem:"ProcessModule_menuOverlayListItem__q5Cp8",menuOverlayListItemInput:"ProcessModule_menuOverlayListItemInput__mGtmf",menuOverlayListItemInputContainerClassName:"ProcessModule_menuOverlayListItemInputContainerClassName__c2qiO",openSelectWithSearchHost:"ProcessModule_openSelectWithSearchHost__GVLkU",openSelectWithSearch:"ProcessModule_openSelectWithSearch__zQUZm",dropdownClassContainer:"ProcessModule_dropdownClassContainer__4rFl4",dropdownHeightClassContainer:"ProcessModule_dropdownHeightClassContainer__6Rqku",fieldTypeTextarea:"ProcessModule_fieldTypeTextarea__9rSMB",fullLengthTextarea:"ProcessModule_fullLengthTextarea__eYuTp",filtersContainer:"ProcessModule_filtersContainer__ZXr-v",filtersContainerII:"ProcessModule_filtersContainerII__7cIxb",customMenuOverlayListItemCheckboxCheckedMark:"ProcessModule_customMenuOverlayListItemCheckboxCheckedMark__vi6VV",customMenuOverlayListItemNormalCheckedMark:"ProcessModule_customMenuOverlayListItemNormalCheckedMark__U5+ho",checkbox:"ProcessModule_checkbox__iHQvz",listContainer:"ProcessModule_listContainer__gwweI",tableHostMobile:"ProcessModule_tableHostMobile__j-DPP",tableHostSimple:"ProcessModule_tableHostSimple__Vct0M",action:"ProcessModule_action__iCvd1",mobileTable_ii:"ProcessModule_mobileTable_ii__vrooR",centerDiv:"ProcessModule_centerDiv__DT2hU",calendar:"ProcessModule_calendar__dkHMo",multiselectComponent:"ProcessModule_multiselectComponent__nKtu7",multiselectComponentNoBorder:"ProcessModule_multiselectComponentNoBorder__E-5tg",infoTitle:"ProcessModule_infoTitle__ZuUto",mappopup:"ProcessModule_mappopup__jQF6G",popup:"ProcessModule_popup__UhrxE",ratingsDiv:"ProcessModule_ratingsDiv__CRzxP",slider:"ProcessModule_slider__Le7zs",ratingsInput:"ProcessModule_ratingsInput__TJzIX",swiperslide:"ProcessModule_swiperslide__rHvXl",dashboardCard:"ProcessModule_dashboardCard__8GAEl",buttonsContainer:"ProcessModule_buttonsContainer__IZ5YN"};o(11488);var ue=o(58535),ce=o(9825),pe=o.n(ce),me=o(79633),fe=o(94667),_e=o(47144),ye=o.n(_e),ge=o(75105),he=o(66180),be=o.n(he),xe=o(29960),Ee=o(81235),Ce=o(84878),we=o(13845),Me=o(67861);const Se=o(66918),ke={selectProcess:{id:"selectedProcess",title:"Select Workflow",tooltipText:"Select target process for this map",defaultHighlighted:!0,withAckButton:!1,useContext:we.fG},selectBlueprint:{id:"selectedComponentBlueprint",title:"Select source of map pins",tooltipText:"Select target source pins for this map",defaultHighlighted:!0,withAckButton:!1,useContext:we.fG},selectComponent:{id:"selectedComponent",title:"Select Component",tooltipText:"Select target component for this map",defaultHighlighted:!0,withAckButton:!1,useContext:we.fG},selectFields:{id:"selectedFields",title:"Filter by",tooltipText:"Select target filter for this map",defaultHighlighted:!0,withAckButton:!1,useContext:we.fG},selectItem:{id:"selectedItem",title:"Select Item",tooltipText:"Select target item for this map",defaultHighlighted:!0,withAckButton:!1,useContext:we.fG},selectRoutingMethod:{id:"selectedRouting",title:"Select Routing",tooltipText:"Select target routing method for this map",defaultHighlighted:!0,withAckButton:!1,useContext:we.fG}},Ze=(0,g.$j)(e=>{const{companyProcesses:l}=e.flowReducer;return{companyProcesses:l}})(e=>{const{companyProcesses:l,mapkey:o="",zoom:n=11}=e,[d,a]=(0,t.useState)({name:"",icon:"",fields:"",components:""}),[r,s]=(0,t.useState)([]),[u,c]=(0,t.useState)([]),[m,_]=(0,t.useState)([]),[y,g]=(0,t.useState)([]),[h,b]=(0,t.useState)([]),[x,E]=(0,t.useState)([]),[C,M]=(0,t.useState)({value:"",blueprint:{}}),[S,k]=(0,t.useState)({value:"",process:{}}),[Z,I]=(0,t.useState)({value:"",field:{}}),[N,D]=(0,t.useState)({value:"",item:{}}),[T,P]=(0,t.useState)([]),O=(null===l||void 0===l?void 0:l.length)>0?l.map(e=>({label:e.name,value:e.id})):[],A=e=>{let{text:l,tooltip:o}=e;return Me.createElement("div",{className:Ce.Z.circle},Me.createElement("span",{className:Ce.Z.circleText,title:o},l))};(0,t.useEffect)(()=>{L()},[]);const z=(0,t.useCallback)((e,l)=>{const o=e.filter(e=>e.component.component_fields.filter(e=>e.value===l.value).length>0);let i=[];return o.map(e=>{const l=e.component.component_fields.find(e=>"Pin"===e.field_name);if(void 0!=l&&l.value){const o=Se.split(",",l.value);i.push({id:e.id,title:e.label,lat:+o[0],lng:+o[1]})}}),{components:o,pins:i}}),L=(0,t.useCallback)(()=>{(0,v.d7)().pipe((0,p.P)()).pipe((0,p.P)()).subscribe({next:e=>{const l=e.data.length>0?Se.sortBy(Se.prop("name"),e.data.filter(e=>e.fields.filter(e=>"Pin"===e.name).length>0)):[];c(l.map(e=>({label:e.name,value:e.id,blueprint:e})))},error:e=>{}})});return Me.createElement("div",{style:{height:"auto",width:"100%",padding:"20px"}},Me.createElement(we.ij,null,Me.createElement("div",{style:{height:"80vh",width:"100%"}},Me.createElement(Ee.ZP,{bootstrapURLKeys:{key:"",language:"en",region:"US"},center:{lat:-33.8149597,lng:150.9171779},defaultZoom:n,distanceToMouse:(e,l)=>{if(e&&l)return Math.sqrt((e.x-l.x)*(e.x-l.x)+(e.y-l.y)*(e.y-l.y))}},T.map(e=>{let{lat:l,lng:o,id:i,title:t}=e;return Me.createElement(A,{key:i,lat:l,lng:o,tooltip:t})}))),Me.createElement("br",null),Me.createElement("div",{style:{minWidth:"50%"}},Me.createElement(f.n2,(0,w.Z)({},ke.selectBlueprint,{value:C.value,placeholder:"Select blueprint...",sectionError:d.icon,onOpenChanged:()=>{}}),Me.createElement(f.rk,{items:u,defaultSelected:"",className:Ce.Z.selectComponent,molclassname:Ce.Z.selectMenuOverlayList,moliclassname:Ce.Z.selectMenuOverlayListItem,placeholder:"Select blueprint...",onChange:e=>{const l=e.blueprint.fields.filter(e=>"Pin"!=e.name);M({value:e.label,blueprint:e.blueprint}),g([...l.map(e=>({label:e.value,value:e.id,field:e}))]),P([]),I({value:"",field:{}}),D({value:"",item:{}}),k({value:"",process:{}});let o=[];r.map(e=>{const l=e.component.component_fields.find(e=>"Pin"===e.field_name);if(void 0!=l&&l.value){const i=Se.split(",",l.value);o.push({id:e.id,title:e.label,lat:+i[0],lng:+i[1]})}}),P([...o])}})),Me.createElement(f.n2,(0,w.Z)({},ke.selectFields,{value:Z.value,placeholder:"Select field...",sectionError:d.icon,onOpenChanged:()=>{}}),Me.createElement(f.rk,{items:y,iconValue:!0,defaultSelected:"",className:Ce.Z.selectComponent,molclassname:Ce.Z.selectMenuOverlayList,moliclassname:Ce.Z.selectMenuOverlayListItem,placeholder:"Select field...",onChange:e=>{I({value:e.label,field:e.field});const l=r.filter(l=>l.component.component_fields.filter(l=>l.component_blueprint_id===e.field.component_blueprint_id).length>0);let o=[];l.map(l=>{const i=l.component.component_fields.find(l=>l.field_name===e.label);void 0!=i&&("People"===i.data_type_name||"Record"===i.data_type_name?o.push({label:i.value.split(",")[0],value:i.value,id:i.id,component:l.component}):o.push({label:i.value,value:i.value,id:i.id,component:l.component}))}),b([...new Map(o.map(e=>[e.label,e])).values()]),_(l),P([]),D({value:"",item:{}}),k({value:"",process:{}})}})),Me.createElement(f.n2,(0,w.Z)({},ke.selectItem,{value:N.value,placeholder:"Select item...",sectionError:d.icon,onOpenChanged:()=>{}}),Me.createElement(f.rk,{items:h,iconValue:!0,defaultSelected:"",className:Ce.Z.selectComponent,molclassname:Ce.Z.selectMenuOverlayList,moliclassname:Ce.Z.selectMenuOverlayListItem,placeholder:"Select item...",onChange:e=>{const l=z(m,e);D({value:e.label,id:e.id,item:e}),E(O.filter(e=>[...l.components.map(e=>e.component.procedure_id)].some(l=>e.value===l))),P([...l.pins]),k({value:"",process:{}})}})),Me.createElement(f.n2,(0,w.Z)({},ke.selectProcess,{value:S.value,placeholder:"Select workflow...",sectionError:d.icon,onOpenChanged:()=>{a(e=>(0,i.Z)((0,i.Z)({},e),{},{icon:""}))}}),Me.createElement(f.rk,{items:x,iconValue:!0,defaultSelected:"",className:Ce.Z.selectComponent,molclassname:Ce.Z.selectMenuOverlayList,moliclassname:Ce.Z.selectMenuOverlayListItem,placeholder:"Select workflow...",onChange:e=>{const l=z(m.filter(l=>l.component.procedure_id===e.value),{value:N.item.value});k({id:e.value,value:e.label}),P([...l.pins])}})),Me.createElement(f.n2,(0,w.Z)({},ke.selectRoutingMethod,{placeholder:"Select routing method...",sectionError:d.icon,onOpenChanged:()=>{}}),Me.createElement(f.rk,{items:[{label:"By Manual Routing",value:"Method 1"},{label:"Automated - by distance",value:"Method 2"},{label:"By sales visit time",value:"Method 3"}],iconValue:!0,defaultSelected:"",className:Ce.Z.selectComponent,molclassname:Ce.Z.selectMenuOverlayList,moliclassname:Ce.Z.selectMenuOverlayListItem,placeholder:"Select routing method...",onChange:()=>{}})))))});var Ie=o(20777),Ne=o(91426),De=o(48630),Te=o(32588),Pe=(o(68140),o(27426)),Oe=o(51481),Ae=o(31266),ze=o(84952),Le=o(30519),Re=o(32562),Ue=o(41757),Fe=o(41756),We=o.n(Fe),qe=o(456);const Ye=["height","start","onClick"],Be=["height","start","onClick"],He=["height","start","onClick"],je=(0,t.memo)(e=>{var l,o,n,d,a,v,s;const{step:u,isMandatoryError:c,nextButtonClicked:m,setIsMandatoryError:_,begunModule:y,companyData:g,components:x,isEditing:E,companyUsersArray:C,products:w,selectedComponent:M,goToNextStep:S,authenticatedUser:k,setIsCompleted:Z,companyPositionsArray:I,blueprints:D,allModules:P,editMode:A,isProcessorOnly:z}=e,[L]=((0,N.WidthProvider)(N.Responsive),(0,t.useState)(null===(l=null===M||void 0===M?void 0:M.is_complete)||void 0===l||l));let R=[];const U=(null===u||void 0===u||null===(o=u.component_blueprints)||void 0===o?void 0:o.length)>0?null===u||void 0===u?void 0:u.component_blueprints.map((e,l)=>{const o=e.selected_fields.find(e=>"Template"===e.data_type_name&&1==e.visible),n=e.selected_fields.find(e=>"Video"===e.data_type_name&&1==e.visible);return o?t.createElement("div",{key:l,style:{padding:"0px"}},t.createElement(T.ZP,{templateName:o.field_name,nextButtonClicked:m,isMandatoryError:c,blueprintIndex:l,setIsMandatoryError:_,component:e,companyData:g,components:x,products:w,selectedComponent:M})):e.selected_fields.filter(e=>1==e.visible).length>0?t.createElement("div",{key:l,className:se.renderComponentContainer},t.createElement(Ge,{editMode:A,nextButtonClicked:m,isMandatoryError:c,blueprintIndex:l,setIsMandatoryError:_,blueprints:D,component:e,companyData:g,components:x,allModules:P,products:w,authenticatedUser:k,selectedComponent:M,companyUsersArray:C,companyPositionsArray:I,begunModule:y,isProcessorOnly:z}),(null===M||void 0===M?void 0:M.id)&&(null===n||void 0===n?void 0:n.value)&&b()(null===n||void 0===n?void 0:n.value)<=(0,h.now)()&&(0,h.now)()<b()(null===n||void 0===n?void 0:n.value).add("minutes",10)&&t.createElement(Ge,{editMode:A,nextButtonClicked:m,isMandatoryError:c,blueprintIndex:l,setIsMandatoryError:_,blueprints:D,component:(0,i.Z)((0,i.Z)({},e),{},{name:"Video Call",selected_fields:[(0,i.Z)((0,i.Z)({},n),{},{options:(0,i.Z)((0,i.Z)({},n.options),{},{start:!0})})]}),companyData:g,components:x,allModules:P,products:w,authenticatedUser:k,selectedComponent:M,companyUsersArray:C,companyPositionsArray:I,begunModule:y,shouldDisplay:!0,isEnabled:!0})):t.createElement("div",{key:l,className:se.emptyElementsSection})}):t.createElement("div",{className:se.emptyElementsSection}),F=t.createElement(ve.mQ,{style:{width:"100%",marginTop:"50px",minHeight:"30vh"}},t.createElement(ve.td,null,null===u||void 0===u?void 0:u.component_blueprints.filter(e=>e.selected_fields.filter(l=>{var o,i;return 1==l.visible&&"Emails"!==l.data_type_name&&(void 0===(null===(o=e.options)||void 0===o?void 0:o.showOnly)||0==(null===(i=e.options)||void 0===i?void 0:i.showOnly.length)||k.positions.filter(l=>{var o,i;return null===(o=e.options)||void 0===o||null===(i=o.showOnly)||void 0===i?void 0:i.includes(l.id)}).length>0)}).length>0).map((e,l)=>t.createElement(ve.OK,{key:l},t.createElement("div",{style:{padding:"5px 0",fontSize:"18px",color:"var(--app-color-gray-dark)",fontWeight:"normal",fontFamily:"var(--app-text-font-mobile)",transform:"scaleY(1.1)"}},e.name.toUpperCase())))),(null===u||void 0===u||null===(n=u.component_blueprints)||void 0===n?void 0:n.length)>0?null===u||void 0===u?void 0:u.component_blueprints.filter(e=>e.selected_fields.filter(l=>{var o,i;return 1==l.visible&&"Emails"!==l.data_type_name&&(void 0===(null===(o=e.options)||void 0===o?void 0:o.showOnly)||0==(null===(i=e.options)||void 0===i?void 0:i.showOnly.length)||k.positions.filter(l=>{var o,i;return null===(o=e.options)||void 0===o||null===(i=o.showOnly)||void 0===i?void 0:i.includes(l.id)}).length>0)}).length>0).map((e,l)=>{const o=e.selected_fields.find(e=>"Template"===e.data_type_name&&1==e.visible),n=e.selected_fields.find(e=>"Video"===e.data_type_name&&1==e.visible);return o?t.createElement(ve.x4,{key:l},t.createElement(T.ZP,{templateName:o.field_name,nextButtonClicked:m,isMandatoryError:c,blueprintIndex:l,setIsMandatoryError:_,component:e,companyData:g,components:x,products:w,selectedComponent:M,component_blueprint:e,editMode:A,blueprints:D,allModules:P,authenticatedUser:k,companyUsersArray:C,companyPositionsArray:I,begunModule:y})):e.selected_fields.filter(e=>1==e.visible).length>0?t.createElement(ve.x4,{key:l,style:{margin:"30px 0 0 0",padding:"30px 3px"}},t.createElement(Ge,{editMode:A,nextButtonClicked:m,isMandatoryError:c,blueprintIndex:l,setIsMandatoryError:_,blueprints:D,component:e,companyData:g,components:x,allModules:P,products:w,authenticatedUser:k,selectedComponent:M,companyUsersArray:C,companyPositionsArray:I,begunModule:y}),(null===M||void 0===M?void 0:M.id)&&(null===n||void 0===n?void 0:n.value)&&b()(null===n||void 0===n?void 0:n.value)<=(0,h.now)()&&(0,h.now)()<b()(null===n||void 0===n?void 0:n.value).add("minutes",10)&&t.createElement(Ge,{editMode:A,nextButtonClicked:m,isMandatoryError:c,blueprintIndex:l,setIsMandatoryError:_,blueprints:D,component:(0,i.Z)((0,i.Z)({},e),{},{name:"Video Call",selected_fields:[(0,i.Z)((0,i.Z)({},n),{},{options:(0,i.Z)((0,i.Z)({},n.options),{},{start:!0})})]}),companyData:g,components:x,allModules:P,products:w,authenticatedUser:k,selectedComponent:M,companyUsersArray:C,companyPositionsArray:I,begunModule:y,shouldDisplay:!0,isEnabled:!0})):t.createElement(ve.x4,null)}):t.createElement(ve.x4,null)),[W,q]=(0,t.useState)({currentBreakpoint:"lg",compactType:"vertical",mounted:!1,layouts:{lg:u.options.layout},editing:E});return t.createElement("div",{style:{width:"inherit"}},t.createElement(f.j3,{permissions:[f.po.processes.create]},t.createElement("button",{onClick:()=>{R=W.layouts.lg.map(e=>(0,i.Z)((0,i.Z)({},e),{},{static:!1})),q((0,i.Z)((0,i.Z)({},W),{},{layouts:{lg:R},editing:!W.editing}))},hidden:!W.editing},"Edit Layout"),t.createElement("button",{onClick:()=>{const e=R.map(e=>(0,i.Z)((0,i.Z)({},e),{},{static:!0}));(0,r.T5)({options:(0,i.Z)((0,i.Z)({},u.options),{},{layout:e})},u.id,!0).pipe((0,p.P)()).subscribe({next:l=>{q((0,i.Z)((0,i.Z)({},W),{},{layouts:{lg:e},editing:!W.editing}))},error:e=>{q((0,i.Z)((0,i.Z)({},W),{},{layouts:{lg:u.options.layout},editing:!W.editing}))},complete:()=>{}})},hidden:!W.editing},"Save Layout")),null!==u&&void 0!==u&&null!==(d=u.options)&&void 0!==d&&d.tabbed?F:U,(null===(a=y.processModule.module)||void 0===a?void 0:a.options.forSpecificUsers)&&(null===u||void 0===u?void 0:u.is_end)&&t.createElement("div",{style:{height:"100px"}}),(null===u||void 0===u||null===(v=u.pathway_steps)||void 0===v?void 0:v.length)>0&&(()=>{const e=u.pathway_steps.map(e=>({label:"".concat(e.name),value:e.id})),l=C.map(e=>({label:"".concat(e.first_name," ").concat(e.last_name),value:e.id}));return t.createElement("div",{className:se.emptyElementsSection,style:{width:"60%",padding:"20px 20px 20px 20px",height:"".concat(l.length*l.length>4?70:200,"px")}},t.createElement(O.Z,{visible:!0,mandatory:!1,items:e,onChange:e=>{S(e)},placeholder:"Continue to this step..."}))})(),(null===u||void 0===u||null===(s=u.pathway_processes)||void 0===s?void 0:s.length)>0&&(()=>{const e=u.pathway_processes.map(e=>({label:"".concat(e.name),value:e.id})),l=C.map(e=>({label:"".concat(e.first_name," ").concat(e.last_name),value:e.id}));return t.createElement("div",{className:se.emptyElementsSection,style:{width:"60%",padding:"20px 20px 20px 20px",height:"".concat(l.length*l.length>4?70:200,"px")}},t.createElement(O.Z,{visible:!0,mandatory:!1,items:e,onChange:()=>{},placeholder:"Continue to this process..."}))})(),e.children)}),Ve=t.forwardRef((e,l)=>{var o,n,d,a,r,v,u,c,p,m,f;const{begunModule:_,allModules:g,companyData:h,setSelectedComponent:b,selectedComponent:x,companyUsersArray:E,companyPositionsArray:C,print:w,components:M=[],user:S,bypassCustom:k=!1,goto:Z}=e,[I,N]=(0,t.useState)([]),P=null===_||void 0===_||null===(o=_.processModule)||void 0===o||null===(n=o.completeSteps)||void 0===n?void 0:n.find(e=>{var l;return(null===(l=e.component_blueprints)||void 0===l?void 0:l.filter(e=>e.selected_fields.filter(e=>"Template"===e.data_type_name).length>0).length)>0&&0==k});(0,t.useEffect)(()=>{var o,n,d;let a=[];if(j.Z(V.Z("group"))(null!==(o=null===x||void 0===x?void 0:x.component_fields)&&void 0!==o?o:[]).map(e=>{a=[...a,{id:e.component_blueprint_id,selected_fields:K.Z(X.Z("group",e.group))(x.component_fields)}]}),(null===_||void 0===_||null===(n=_.processModule)||void 0===n||null===(d=n.completeSteps)||void 0===d?void 0:d.length)>0){let o=[t.createElement("div",{key:0,style:{display:null!==e&&void 0!==e&&e.noHeader?"none":""}},w&&t.createElement("p",{className:se.detailLabel},h.display_name)),P?t.createElement("div",{key:1}):O()];var r,v,s,u,c,p;if(_.processModule.completeSteps.map(e=>{e.component_blueprints.filter(e=>{var l,o;return 0==(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.asModuleList)||void 0==(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.asModuleList)}).map((l,n)=>{var d,r,v;const s=null!==(d=null===x||void 0===x||null===(r=x.component_fields)||void 0===r?void 0:r.filter(e=>e.component_blueprint_id===l.id))&&void 0!==d?d:[],u=!(null===s||void 0===s||!s.find(e=>!(""===e.value||void 0===e.value||null===e.value)));var c,p,m;(null===s||void 0===s?void 0:s.length)>0&&(null===(v=l.selected_fields)||void 0===v?void 0:v.filter(e=>1==e.visible).length)>0&&(null!==l.options?!1!==l.options.allowMultipleInputs&&void 0!==l.options.allowMultipleInputs&&null!==l.options.allowMultipleInputs||(o=[...o,t.createElement("div",{key:o.length,style:{display:u?"":"none"}},t.createElement(ll,{step:e,isInherited:!1,nextButtonClicked:()=>{},isMandatoryError:!1,stepId:e.id,blueprintIndex:n,setIsMandatoryError:()=>{},component:(0,i.Z)((0,i.Z)({},l),{},{created_date:x.created_date,values:null!==(c=null===(p=a.find(e=>e.id===l.id))||void 0===p?void 0:p.selected_fields)&&void 0!==c?c:[]}),begunModule:_,allModules:g,companyData:h,components:a,allComponents:M,companyUsersArray:E,status:null===x||void 0===x?void 0:x.status,selectedComponent:x}))]):o=[...o,t.createElement("div",{key:o.length},t.createElement(ll,{step:e,isInherited:!1,nextButtonClicked:()=>{},isMandatoryError:!1,stepId:e.id,blueprintIndex:n,setIsMandatoryError:()=>{},component:(0,i.Z)((0,i.Z)({},l),{},{created_date:x.created_date,values:null===(m=a.find(e=>e.id===l.id))||void 0===m?void 0:m.selected_fields}),begunModule:_,allModules:g,companyData:h,components:a,allComponents:M,companyUsersArray:E,status:null===x||void 0===x?void 0:x.status,selectedComponent:x}))])})}),P)return void N(t.createElement(T.C6,{ref:l,begunModule:_,allModules:g,companyData:h,components:M,selectedComponent:x,setSelectedComponent:b,companyUsersArray:E,companyPositionsArray:C,goto:Z},o,t.createElement(tl,{component:x}),t.createElement(il,{component:x,show:null===_||void 0===_||null===(r=_.processModule)||void 0===r||null===(v=r.module)||void 0===v||null===(s=v.options)||void 0===s?void 0:s.anonymous})));N([...o,t.createElement(tl,{component:x,key:o.length+1}),t.createElement(il,{component:x,key:o.length+2,show:null===_||void 0===_||null===(u=_.processModule)||void 0===u||null===(c=u.module)||void 0===c||null===(p=c.options)||void 0===p?void 0:p.anonymous})])}},[x]);const O=()=>{var e,l,o,n,d,a,r,v,u,c,p,m,f,g,b,E,C,w;const M=null===_||void 0===_||null===(e=_.processModule)||void 0===e||null===(l=e.completeSteps)||void 0===l?void 0:l.find(e=>e.component_blueprints.filter(e=>{var l;return(null===(l=e.selected_fields)||void 0===l?void 0:l.filter(e=>{var l;return"item_code"===(null===(l=e.options)||void 0===l?void 0:l.mapToItem)||"Transactions Field"===e.data_type_name||"Template"===e.data_type_name||"Transaction List"===e.data_type_name}).length)>0}).length>0),S=null!==(o=null!==(n=null!==(d=null!==(a=null===M||void 0===M||null===(r=M.component_blueprints)||void 0===r?void 0:r.find(e=>{var l;return(null===(l=e.selected_fields)||void 0===l?void 0:l.filter(e=>"Transaction List"===e.data_type_name).length)>0}))&&void 0!==a?a:null===M||void 0===M||null===(v=M.component_blueprints)||void 0===v?void 0:v.find(e=>{var l;return(null===(l=e.selected_fields)||void 0===l?void 0:l.filter(e=>{var l;return"item_code"===(null===(l=e.options)||void 0===l?void 0:l.mapToItem)}).length)>0}))&&void 0!==d?d:null===M||void 0===M||null===(u=M.component_blueprints)||void 0===u?void 0:u.find(e=>{var l;return(null===(l=e.selected_fields)||void 0===l?void 0:l.filter(e=>"Transactions Field"===e.data_type_name).length)>0}))&&void 0!==n?n:null===M||void 0===M||null===(c=M.component_blueprints)||void 0===c?void 0:c.find(e=>{var l;return(null===(l=e.selected_fields)||void 0===l?void 0:l.filter(e=>"Template"===e.data_type_name).length)>0}))&&void 0!==o?o:void 0,k=S?null===(p=S.selected_fields)||void 0===p||null===(m=p.find(e=>"Template"===e.data_type_name))||void 0===m?void 0:m.field_name:"",Z=null===h||void 0===h||null===(f=h.misc_info)||void 0===f||null===(g=f.templatesData)||void 0===g?void 0:g.find(e=>e.name===k),I=Z?(null===Z||void 0===Z||null===(b=Z.tlist)||void 0===b?void 0:b.length)>0?null===Z||void 0===Z?void 0:Z.tlist:null===(E=Z.config)||void 0===E?void 0:E.filter(e=>"Text"===e.value||"Number"===e.value||"Connector"===e.value):S?S.selected_fields.filter(e=>{var l,o,i;return!(""===(null===(l=e.options)||void 0===l?void 0:l.mapToItem)||void 0==(null===(o=e.options)||void 0===o?void 0:o.mapToItem)||null==(null===(i=e.options)||void 0===i?void 0:i.mapToItem))}):[];return(null===x||void 0===x||null===(C=x.component_items)||void 0===C?void 0:C.length)>0&&t.createElement("div",{className:se.accordionContainer,style:{border:y.tq?"0":"",marginTop:"10px",padding:y.tq?"10px":"",backgroundColor:"var(--app-color-gray-lightest)"}},t.createElement(D.default,{modern:!0,className:se.listContainer,isReport:!1,"app-variant-is-mobile":"true",title:"Items",columns:I?I.map(e=>Z?e.label:e.field_name):["Product ID","Quantity","Price"],list:null===x||void 0===x||null===(w=x.component_items)||void 0===w?void 0:w.map(e=>{var l,o,n,d,a,r,v,u,c,p,m,f,_,y,g,h,b,x,E,C,w,M,S,k,N,D;if((null===Z||void 0===Z||null===(l=Z.tlist)||void 0===l?void 0:l.length)>0){let l={};return Z.tlist.filter(o=>{l=(0,i.Z)((0,i.Z)({},l),{},{[null===o||void 0===o?void 0:o.label]:e[null===o||void 0===o?void 0:o.key]})}),l}const T=e.item_code,P=e.quantity,O=null!==(o=e.alt_value)&&void 0!==o?o:0,A=null!==(n=e.value)&&void 0!==n?n:0,z=null!==(d=e.total)&&void 0!==d?d:0;let L={};return(0,s.sO)(e.item_code)&&(L=(0,i.Z)((0,i.Z)({},L),JSON.parse(e.item_code))),(0,s.sO)(e.quantity)&&(L=(0,i.Z)((0,i.Z)({},L),JSON.parse(e.quantity))),(0,s.sO)(e.alt_value)&&(L=(0,i.Z)((0,i.Z)({},L),JSON.parse(e.alt_value))),(0,s.sO)(e.value)&&(L=(0,i.Z)((0,i.Z)({},L),JSON.parse(e.value))),(0,s.sO)(e.total)&&(L=(0,i.Z)((0,i.Z)({},L),JSON.parse(e.total))),void 0!=Z?(0,i.Z)({[null!==(a=null===(r=Z.config.find(e=>"item_code"===e.key))||void 0===r?void 0:r.label)&&void 0!==a?a:"Item Code"]:t.createElement("div",{className:se.templateInformation},T),[null!==(v=null===(u=Z.config.find(e=>"value"===e.key))||void 0===u?void 0:u.label)&&void 0!==v?v:"Price"]:t.createElement("div",{className:se.templateInformation},A),[null!==(c=null===(p=Z.config.find(e=>"total"===e.key))||void 0===p?void 0:p.label)&&void 0!==c?c:"Total"]:t.createElement("div",{className:se.templateInformation},z),[null!==(m=null===(f=Z.config.find(e=>"quantity"===e.key))||void 0===f?void 0:f.label)&&void 0!==m?m:"Quantity"]:t.createElement("div",{className:se.templateInformation},P),[null!==(_=null===(y=Z.config.find(e=>"alt_value"===e.key))||void 0===y?void 0:y.label)&&void 0!==_?_:"Discount"]:t.createElement("div",{className:se.templateInformation},O),id:e.id},L):null!==I&&void 0!==I&&I.find(e=>{var l,o,i,t,n;return"item_code"===(null===(l=e.options)||void 0===l?void 0:l.mapToItem)||"value"===(null===(o=e.options)||void 0===o?void 0:o.mapToItem)||"total"===(null===(i=e.options)||void 0===i?void 0:i.mapToItem)||"quantity"===(null===(t=e.options)||void 0===t?void 0:t.mapToItem)||"alt_value"===(null===(n=e.options)||void 0===n?void 0:n.mapToItem)})?(0,i.Z)({[null!==(g=null===(h=I.find(e=>{var l;return"item_code"===(null===(l=e.options)||void 0===l?void 0:l.mapToItem)}))||void 0===h?void 0:h.field_name)&&void 0!==g?g:"Product ID"]:t.createElement("div",{className:se.templateInformation},T),[null!==(b=null===(x=I.find(e=>{var l;return"value"===(null===(l=e.options)||void 0===l?void 0:l.mapToItem)}))||void 0===x?void 0:x.field_name)&&void 0!==b?b:"Price"]:t.createElement("div",{className:se.templateInformation},A),[null!==(E=null===(C=I.find(e=>{var l;return"total"===(null===(l=e.options)||void 0===l?void 0:l.mapToItem)}))||void 0===C?void 0:C.field_name)&&void 0!==E?E:"Total"]:t.createElement("div",{className:se.templateInformation},z),[null!==(w=null===(M=I.find(e=>{var l;return"quantity"===(null===(l=e.options)||void 0===l?void 0:l.mapToItem)}))||void 0===M?void 0:M.field_name)&&void 0!==w?w:"Quantity"]:t.createElement("div",{className:se.templateInformation},P),[null!==(S=null===(k=I.find(e=>{var l;return"alt_value"===(null===(l=e.options)||void 0===l?void 0:l.mapToItem)}))||void 0===k?void 0:k.field_name)&&void 0!==S?S:"Discount"]:t.createElement("div",{className:se.templateInformation},O),[null!==(N=null===(D=I.find(e=>{var l;return"alt_value"===(null===(l=e.options)||void 0===l?void 0:l.mapToItem)}))||void 0===D?void 0:D.field_name)&&void 0!==N?N:"Actual"]:t.createElement("div",{className:se.templateInformation},O),id:e.id},L):{"Product ID":T,Quantity:P,Price:A}}),onListItemClick:e=>{}}))},A=t.createElement("div",{style:{display:y.tq?"none":""}},((null===x||void 0===x||null===(d=x.shared_users)||void 0===d?void 0:d.length)>0||(null===x||void 0===x||null===(a=x.shared_positions)||void 0===a?void 0:a.length)>0)&&t.createElement("div",{className:se.accordionContainer},t.createElement("p",{className:se.cardTitle},"Shares"),t.createElement("div",{style:{display:"flex"}},(null===x||void 0===x||null===(r=x.shared_positions)||void 0===r?void 0:r.length)>0&&t.createElement(D.default,{className:se.sharesTable,columns:["Position"],list:null===x||void 0===x||null===(v=x.shared_positions)||void 0===v?void 0:v.map(e=>{var l;const o=C.find(l=>l.value===e.id);return{Position:null!==(l=null===o||void 0===o?void 0:o.label)&&void 0!==l?l:""}})}),(null===x||void 0===x||null===(u=x.shared_users)||void 0===u?void 0:u.length)>0&&t.createElement(D.default,{className:se.sharesTable,columns:["User"],list:null===x||void 0===x||null===(c=x.shared_users)||void 0===c?void 0:c.map(e=>{const l=E.find(l=>l.id===e.id);return{User:"".concat(null===l||void 0===l?void 0:l.first_name," ").concat(null===l||void 0===l?void 0:l.last_name)}})}))));return t.createElement("div",{ref:l,style:{userSelect:"none",padding:w?"50px 120px 50px 100px":"50px 10px 10px 10px",alignSelf:"center",width:"100%"}},I,(null===_||void 0===_||null===(p=_.processModule)||void 0===p||null===(m=p.module)||void 0===m||null===(f=m.options)||void 0===f?void 0:f.forSpecificUsers)&&A)}),Ge=e=>{var l,o,n,d,a,r,v,u,c,p,m,g,h,x,E,C,w,M,S,k,I,N,D;const{allModules:T,component:O,blueprintIndex:A,nextButtonClicked:z,setIsMandatoryError:L,companyUsersArray:R,companyData:U,components:F,products:W,authenticatedUser:q,begunModule:Y,blueprints:H,selectedComponent:j,companyPositionsArray:V,editMode:G,isProcessorOnly:J,shouldDisplay:Q=(!1===(null===O||void 0===O||null===(l=O.options)||void 0===l?void 0:l.useCustomTemplate)||void 0===(null===O||void 0===O||null===(o=O.options)||void 0===o?void 0:o.useCustomTemplate))&&(void 0===(null===O||void 0===O||null===(n=O.options)||void 0===n?void 0:n.showOnly)||(!((null===O||void 0===O||null===(d=O.options)||void 0===d||null===(a=d.showOnly)||void 0===a?void 0:a.length)>0)||(null===O||void 0===O||null===(r=O.options)||void 0===r||null===(v=r.showOnly)||void 0===v?void 0:v.filter(e=>{var l;return(null===q||void 0===q||null===(l=q.positions)||void 0===l?void 0:l.filter(l=>l.id===e).length)>0}).length)>0)),isEnabled:K=void 0===(null===j||void 0===j?void 0:j.id)||((null===j||void 0===j||null===(u=j.created_by)||void 0===u?void 0:u.id)===q.id||(void 0===(null===Y||void 0===Y||null===(c=Y.processModule)||void 0===c||null===(p=c.module)||void 0===p||null===(m=p.options)||void 0===m?void 0:m.strict)||0==(null===Y||void 0===Y||null===(g=Y.processModule)||void 0===g||null===(h=g.module)||void 0===h||null===(x=h.options)||void 0===x?void 0:x.strict)||void 0!==(null===O||void 0===O||null===(E=O.options)||void 0===E?void 0:E.showOnly)&&((null===O||void 0===O||null===(C=O.options)||void 0===C||null===(w=C.showOnly)||void 0===w?void 0:w.length)>0&&(null===O||void 0===O||null===(M=O.options)||void 0===M||null===(S=M.showOnly)||void 0===S?void 0:S.filter(e=>{var l;return(null===q||void 0===q||null===(l=q.positions)||void 0===l?void 0:l.filter(l=>l.id===e).length)>0}).length)>0)))}=e,[$,ee]=(0,_.pQ)(),[le,oe]=(0,t.useState)(se.active),[ie,te]=(0,t.useState)(!1),[ne,de]=(0,t.useState)(""),[ae,re]=(0,t.useState)(b()()),ve=(0,t.useRef)(null),ue=null===(k=$.currentStep)||void 0===k?void 0:k.component_blueprints.findIndex(e=>e.id===O.id);(0,t.useEffect)(()=>{ce()},[z]),(0,t.useEffect)(()=>{if(null!==O&&void 0!==O&&O.selected_fields.find(e=>"Clock"===e.data_type_name&&!0===e.visible)){const e=setInterval(()=>{re(b()())},1e3);return()=>{window.clearInterval(e)}}},[]);const ce=()=>{var e;null!==O&&void 0!==O&&null!==(e=O.selected_fields)&&void 0!==e&&e.some(e=>{var l;return!0===e.mandatory&&!0===e.visible&&(!e.value||(null===e||void 0===e||null===(l=e.value)||void 0===l?void 0:l.length)<1)})?L(!0):L(!1)},pe=(0,t.useCallback)(()=>{var e,l,o;const t=[...null!==(e=null===(l=$.currentStep)||void 0===l?void 0:l.component_blueprints)&&void 0!==e?e:[]],n=null===(o=t[ue])||void 0===o?void 0:o.selected_fields;ce(),t[ue].selected_fields=null===n||void 0===n?void 0:n.map(e=>(0,i.Z)((0,i.Z)({},e),{},{errors:!0!==e.mandatory||e.value?"":"Field is mandatory"})),ee({action:_._U.setComponentBlueprints,value:t}),ee({action:_._U.setModuleNewStepComponents,value:t})},[$.currentStep]),me=(e,l)=>{var o,i,t;const n=[...null!==(o=null===(i=$.currentStep)||void 0===i?void 0:i.component_blueprints)&&void 0!==o?o:[]],d=null===(t=n[ue])||void 0===t?void 0:t.selected_fields[l];"Number"===(null===d||void 0===d?void 0:d.data_type_name)?Number(+e)?d.value=e:""===e&&(d.value=""):null!==d&&void 0!==d&&d.data_type_name&&(d.value=e),null!==d&&void 0!==d&&d.value&&d.mandatory&&(d.errors=""),ce(),ee({action:_._U.setComponentBlueprints,value:n}),ee({action:_._U.setModuleNewStepComponents,value:n})},fe=(0,t.useCallback)((e,l,o)=>{var i,t,n;const d=[...null!==(i=null===(t=$.currentStep)||void 0===t?void 0:t.component_blueprints)&&void 0!==i?i:[]],a=null===(n=d[ue])||void 0===n?void 0:n.selected_fields[l];a.options.country_code=null===e||void 0===e?void 0:e.countryCode,a.options.country_name=null===e||void 0===e?void 0:e.name,a.options.country_prefix="+".concat(null===e||void 0===e?void 0:e.dialCode),ee({action:_._U.setComponentBlueprints,value:d}),ee({action:_._U.setModuleNewStepComponents,value:d}),me(o,l)},[$]),_e=(0,t.useCallback)((e,l)=>{var o,i,t;const n=[...null!==(o=null===(i=$.currentStep)||void 0===i?void 0:i.component_blueprints)&&void 0!==o?o:[]],d=null===(t=n[ue])||void 0===t?void 0:t.selected_fields[l];d.options.currency_type=null===e||void 0===e?void 0:e.label,d.options.currency_value=null===e||void 0===e?void 0:e.value,d.options.symbol=null===e||void 0===e?void 0:e.symbol,ee({action:_._U.setComponentBlueprints,value:n}),ee({action:_._U.setModuleNewStepComponents,value:n})},[$]);return t.createElement("div",{id:"accordion",className:se.accordionModuleContainer,key:A,style:{width:"100%",border:J&&K?"4px solid var(--app-color-gray-lighter)":"0",boxShadow:y.tq||1==(null===Z.Nb||void 0===Z.Nb||null===(I=Z.Nb.options)||void 0===I?void 0:I.popup)?"0 var(--app-color-white-lightest)":"",display:Q?"":"none",pointerEvents:K?"":"none"}},t.createElement("div",{className:ye()(se.accordionContainer,le),"app-variant-has-error":ne?"error":"",style:{border:y.tq?"0":"",padding:y.tq?"0":"",margin:y.tq?"0":""}},t.createElement("div",{ref:ve,style:{maxHeight:le===se.active?"":"0px",display:"flex"},className:se.content},t.createElement(Ke,{blueprints:H,component:O,selectedComponent:j,handleInputChange:me,handlePrefixChange:fe,handleCurrencyChange:_e,checkIfAreMandatoryErrored:ce,handleCheckbox:(e,l)=>{var o,i,t;const n=[...null!==(o=null===(i=$.currentStep)||void 0===i?void 0:i.component_blueprints)&&void 0!==o?o:[]],d=null===(t=n[ue])||void 0===t?void 0:t.selected_fields[l];d&&(d.value=e,null!==d&&void 0!==d&&d.value&&d.mandatory&&(d.errors=""),ee({action:_._U.setComponentBlueprints,value:n}),ee({action:_._U.setModuleNewStepComponents,value:n}),ce())},isInherited:!1,indexInContextArray:ue,handleLocationChange:(e,l)=>{var o,i,t;const n=[...null!==(o=null===(i=$.currentStep)||void 0===i?void 0:i.component_blueprints)&&void 0!==o?o:[]];(null===(t=n[ue])||void 0===t?void 0:t.selected_fields[l]).value="".concat(e.lat,", ").concat(e.lng),ee({action:_._U.setComponentBlueprints,value:n}),ee({action:_._U.setModuleNewStepComponents,value:n})},processTaskContext:$,begunModule:Y,setTaskProcessContext:ee,companyData:U,companyUsersArray:R,companyPositionsArray:V,components:F,products:W,allModules:T,editMode:G,clock:ae})),t.createElement("div",{style:{paddingLeft:"10px"}},t.createElement("div",{onClick:()=>{var e;if(pe(),null!==O&&void 0!==O&&null!==(e=O.selected_fields)&&void 0!==e&&e.some(e=>{var l;return!0===e.mandatory&&!0===e.visible&&(!e.value||(null===e||void 0===e||null===(l=e.value)||void 0===l?void 0:l.length)<1)}))return;const l={},o=O.selected_fields.map(e=>{var o,t;if("Formula"===e.data_type_name){var n,d,a;const o=(0,s.LV)(e.options,O.selected_fields.filter(l=>e.options.list.includes(l.field_name)),$.components,null!==(n=$.items)&&void 0!==n?n:[],null!==(d=null===$||void 0===$?void 0:$.newStepComponents)&&void 0!==d?d:[]);var r;if(null!==e&&void 0!==e&&null!==(a=e.options)&&void 0!==a&&a.mapToItem)l[null===e||void 0===e||null===(r=e.options)||void 0===r?void 0:r.mapToItem]="".concat(o);return(0,i.Z)((0,i.Z)({},e),{},{value:"".concat(o)})}null!==e&&void 0!==e&&null!==(o=e.options)&&void 0!==o&&o.mapToItem&&(l[null===e||void 0===e||null===(t=e.options)||void 0===t?void 0:t.mapToItem]="".concat(null===e||void 0===e?void 0:e.value));return e});if(Object.keys(l).length>0){var t;const e=null===(t=$.items)||void 0===t?void 0:t.find(e=>e.item_code===l.item_code);void 0===e?ee({action:_._U.addModuleItems,value:(0,i.Z)((0,i.Z)({},l),{},{id:(0,s.mR)()})}):0==l.quantity?ee({action:_._U.removeModuleItems,value:e}):ee({action:_._U.updateModuleItems,value:(0,i.Z)((0,i.Z)({},e),l)})}else{const e=JSON.parse(JSON.stringify((0,i.Z)((0,i.Z)({},O),{},{temp_id:(0,s.mR)(),selected_fields:o})));ee({action:_._U.addModuleComponents,value:e})}te(!1),de(""),O.selected_fields.map((e,l)=>{me("",l)}),ee({action:_._U.setModuleNewStepComponents,value:[...B.Z(e=>e.selected_fields.filter(e=>""===e.value).length>0,[...B.Z(X.Z("id",O.id))($.newStepComponents)])]})},className:se.iconsContainer,style:{display:null===(null===O||void 0===O?void 0:O.options)?"none":!0===(null===O||void 0===O||null===(N=O.options)||void 0===N?void 0:N.allowMultipleInputs)?"":"none"}},ie?t.createElement("div",{className:se.loaderContainer},t.createElement(Ie.Z,{type:y.G6?"Watch":"Puff",color:"var(--app-color-gray-dark)",secondaryColor:"gray",radius:32,height:32,width:"32px"})):t.createElement(f.zx,{light:!0},t.createElement(Z.mm,null))))),ne&&(null===ne||void 0===ne||null===(D=ne.errors)||void 0===D?void 0:D.title)&&t.createElement(P.Z,{message:ne.errors.title}),ne&&(null===ne||void 0===ne?void 0:ne.message)&&t.createElement(P.Z,{message:ne.message}))};function Je(e){return null!==e&&void 0!==e&&e.country_prefix?null===e||void 0===e?void 0:e.country_prefix:null!==e&&void 0!==e&&e.currency_value?(null===e||void 0===e?void 0:e.currency_value)+" ":""}const Qe=(e,l,o,i,t)=>{var n,d,a;const r=null===(a=[...null!==(n=null===(d=t.currentStep)||void 0===d?void 0:d.component_blueprints)&&void 0!==n?n:[]][o])||void 0===a?void 0:a.selected_fields[i];switch(e){case"Link":!function(e){let l;try{l=new URL(e)}catch(o){return!1}return"http:"===l.protocol||"https:"===l.protocol}(l)?r.errors="This field should contain a link!":r.errors="";break;case"E-mail":case"Email":new RegExp(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/).test(l)?r.errors="":r.errors="This field should contain an valid email address!";break;case"Phone":new RegExp(/^[+]?[(]?[0-9]{3}[)]?[-\s.]?[0-9]{3}[-\s.]?[0-9]{4,6}$/im).test(l)?r.errors="":r.errors="This field should contain an valid phone number!";break;case"Email Recipient":new RegExp(/^([a-z0-9!#$%&'*+/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*)(([, ]+[a-z0-9!#$%&'*+/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])\.([a-z0-9]([a-z0-9-]*[a-z0-9]))*)?)*$/).test(l)?r.errors="":r.errors="This field should contain an valid email address!"}},Ke=(0,t.memo)(e=>{var l,o,n,d,x;const{component:S,selectedComponent:k,handleInputChange:N,indexInContextArray:T,handleCheckbox:P,processTaskContext:z,setTaskProcessContext:L,isInherited:U,checkIfAreMandatoryErrored:Y,handlePrefixChange:H,handleCurrencyChange:K,handleLocationChange:ne,companyData:de,components:ve,begunModule:ce,blueprints:_e,companyUsersArray:ye,companyPositionsArray:he,allModules:Ee,editMode:Ce,clock:we}=e,[Me,Se]=(0,t.useState)(ye.map(e=>({label:e.first_name+" "+e.last_name,value:e.id,user:e}))),{authenticatedUser:ke}=(0,g.v9)(e=>e.authReducer),{user:Ie}=(0,g.v9)(e=>e.sessionReducer),{currentLocation:Ue,allTasks:Fe,companyProcesses:qe}=(0,g.v9)(e=>e.flowReducer),[je,Ve]=(0,t.useState)(!1),[Ge,Ke]=(0,t.useState)(new Date),[$e,ll]=(0,t.useState)([new Date,new Date(b()().add(7,"days"))]),[ol,il]=$e,[tl,dl]=(0,t.useState)(""),[al,rl]=(0,t.useState)([{label:"",value:""}]),[vl,sl]=(0,t.useState)(!0),[ul,cl]=(0,t.useState)(!0),[pl,ml]=(0,t.useState)({source:!1,destination:!1}),[fl,_l]=(0,t.useState)("50px"),[yl,gl]=(0,t.useState)(Array(12).fill("")),[hl,bl]=(0,t.useState)({candidates:[]}),[xl,El]=(0,t.useState)(!1),[Cl,wl]=(0,t.useState)({}),[Ml,Sl]=(0,t.useState)("day"),[kl,Zl]=(0,t.useState)({}),[Il,Nl]=((0,t.useRef)(),(0,t.useState)(!1)),Dl=()=>{Nl(!Il)},Tl=(e,l)=>{ll(e),N(e,l)},Pl=(e,l)=>{Ke(e),N(e,l)},Ol=(0,t.useCallback)(e=>{void 0!==e&&(0==Me.length?Ve(!0):Ve(!1),(0,ge.n0)(e).pipe((0,p.P)()).subscribe({next:e=>{Se(e),Ve(!1)}}))},[]),Al=(0,t.useCallback)(()=>{0==he.length?Ve(!0):Ve(!1),(0,I.hj)().pipe((0,p.P)(1)).subscribe({})},[]),zl=(0,t.useCallback)(e=>{var l;if(0==(null===e||void 0===e||null===(l=e.analyze)||void 0===l?void 0:l.length)||void 0==(null===e||void 0===e?void 0:e.analyze))return void bl({candidates:[{content:{parts:[{text:"Enter a question that I could answer"}]}}]});let o={role:"user",parts:[{text:e.analyze}]};1==(null===e||void 0===e?void 0:e.current)?o.parts=[...o.parts,{text:JSON.stringify({table:"Transaction",data:(0,i.Z)((0,i.Z)((0,i.Z)({},z.components.map(e=>{let l={};return e.selected_fields.filter(e=>l=(0,i.Z)((0,i.Z)({},l),{},{[e.field_name]:e.value})),l})),z.newStepComponents.map(e=>{let l={};return e.selected_fields.filter(e=>l=(0,i.Z)((0,i.Z)({},l),{},{[e.field_name]:e.value})),l})),{},{items:z.items.map(e=>({item:e.item_code,quantity:+e.quantity,value:e.value}))})})}]:(void 0!==e.module_id&&(o.parts=[...o.parts,{text:JSON.stringify({table:Ee.find(l=>l.id===e.module_id).name,data:ve.filter(l=>l.module_id===e.module_id).map(e=>{var l;let o={};return e.component_fields.filter(e=>o=(0,i.Z)((0,i.Z)({},o),{},{[e.field_name]:e.value})),(0,i.Z)((0,i.Z)({},o),{},{created_date:e.created_date,created_by:null===(l=e.created_by)||void 0===l?void 0:l.id,items:null===e||void 0===e?void 0:e.component_items.map(e=>({item:e.item_code,quantity:+e.quantity,value:e.value}))})})})}]),void 0!==e.module2_id&&(o.parts=[...o.parts,{text:JSON.stringify({table:Ee.find(l=>l.id===e.module2_id).name,data:ve.filter(l=>l.module_id===e.module2_id).map(e=>{var l;let o={};return e.component_fields.filter(e=>o=(0,i.Z)((0,i.Z)({},o),{},{[e.field_name]:e.value})),(0,i.Z)((0,i.Z)({},o),{},{created_date:e.created_date,created_by:null===(l=e.created_by)||void 0===l?void 0:l.id,items:null===e||void 0===e?void 0:e.component_items.map(e=>({item:e.item_code,quantity:+e.quantity,value:e.value}))})})})}]),void 0!==e.module3_id&&(o.parts=[...o.parts,{text:JSON.stringify({table:Ee.find(l=>l.id===e.module3_id).name,data:ve.filter(l=>l.module_id===e.module3_id).map(e=>{var l;let o={};return e.component_fields.filter(e=>o=(0,i.Z)((0,i.Z)({},o),{},{[e.field_name]:e.value})),(0,i.Z)((0,i.Z)({},o),{},{created_date:e.created_date,created_by:null===(l=e.created_by)||void 0===l?void 0:l.id,items:null===e||void 0===e?void 0:e.component_items.map(e=>({item:e.item_code,quantity:+e.quantity,value:e.value}))})})})}])),bl({candidates:[]}),Ve(!0),(0,fe.hd)(JSON.stringify(o)).pipe((0,p.P)()).subscribe({next:e=>{Ve(!1),bl(e)},error:e=>{bl({candidates:[{content:{parts:[{text:JSON.stringify(e)}]}}]}),Ve(!1)}})},[]),Ll=e=>{const{field_name:l}=e;return S.selected_fields.findIndex(e=>e.field_name===l)},Rl=e=>{const l=S.selected_fields.filter(e=>"Info"===e.data_type_name),o=ve.find(l=>l.id===e);l.map(l=>{var i;null===l||void 0===l||null===(i=l.options)||void 0===i||i.list.map(i=>{var t,n;const d=null===(t=o.component_fields)||void 0===t?void 0:t.find(e=>e.field_name===i),a=Ll({field_name:i});-1!=a&&(null===(n=o.component_fields)||void 0===n?void 0:n.length)>0&&(S.selected_fields[a].value=d?d.value:"",l.value=e)})});S.selected_fields.filter(e=>"Global"===e.data_type_name&&1==e.visible).map(e=>{var l,i;const t=null===(l=o.component_fields)||void 0===l?void 0:l.find(l=>l.field_name===e.field_name),n=Ll({field_name:e.field_name});-1!=n&&(null===(i=o.component_fields)||void 0===i?void 0:i.length)>0&&t&&(S.selected_fields[n].value=null===t||void 0===t?void 0:t.value)})},Ul=e=>{var l,o;let i=null===(l=ce.processModule.module)||void 0===l||null===(o=l.options)||void 0===o?void 0:o.global;var t,n,d,a,r;i||(i=null===(t=z.components.find(l=>l.selected_fields.filter(l=>{var o,i;return"Global"===l.data_type_name&&1==l.visible&&l.field_name===(null===(o=S.selected_fields.find(l=>l.data_type_name===e&&1==l.visible))||void 0===o||null===(i=o.options)||void 0===i?void 0:i.global)}).length>0))||void 0===t||null===(n=t.selected_fields.find(e=>"Global"===e.data_type_name))||void 0===n?void 0:n.value);i||(i=null===(d=F.Z(W.Z("component_blueprints"),q.Z)(ce.processModule.completeSteps).find(l=>l.selected_fields.filter(l=>{var o,i;return l.field_name===(null===(o=S.selected_fields.find(l=>l.data_type_name===e&&1==l.visible))||void 0===o||null===(i=o.options)||void 0===i?void 0:i.global)&&"Value"===l.data_type_name}).length>0))||void 0===d||null===(a=d.selected_fields.find(e=>"Value"===e.data_type_name))||void 0===a||null===(r=a.options)||void 0===r?void 0:r.value);return i?ve.filter(l=>l.component_fields.filter(l=>{var o,t;return l.value===i&&l.field_name===(null===(o=S.selected_fields.find(l=>l.data_type_name===e))||void 0===o||null===(t=o.options)||void 0===t?void 0:t.global)}).length>0):ve},Fl=e=>{var l,o,i,n,d,a,r,v,u,c,p,m,_,y,g,h,x,w,M,k,Z,I,D;const{field:A,enabled:L,index:R,isItem:F=!1,handleItem:W,withLabel:q=!0,edit:H=!0,item:j}=e;var V,G,J,Q,K,X,$,ee,le,oe,ie,te,ne,ae,re,ue,ce,me,fe,_e,ye,ge,he,be,xe,Ee,Ce,we,Se,ke,Ze,Ie,Ne,De,Te,Pe,Oe;if("Dropdown"===(null===A||void 0===A?void 0:A.data_type_name)&&(null===A||void 0===A||null===(l=A.options)||void 0===l||null===(o=l.list)||void 0===o?void 0:o.length)>0)return H?t.createElement("div",{style:{width:"100%",border:"1px solid var(--app-color-gray-light)"}},t.createElement(O.Z,{key:R,visible:A.visible,mandatory:A.mandatory,items:null===A||void 0===A||null===(V=A.options)||void 0===V?void 0:V.list.map(e=>({label:e,value:e})),className:se.dropdownClassContainer,error:A.errors,onChange:e=>{F?W(e,R):P(e,R)},selectionType:null===A||void 0===A||null===(G=A.options)||void 0===G?void 0:G.type,max:+(null!==(J=null===A||void 0===A||null===(Q=A.options)||void 0===Q?void 0:Q.max)&&void 0!==J?J:0),fieldIcon:A.icon,backgroundColor:null!==A&&void 0!==A&&null!==(K=A.options)&&void 0!==K&&K.valueC&&null!==A&&void 0!==A&&A.value?null===A||void 0===A||null===(X=A.options)||void 0===X?void 0:X.valueC:"",value:void 0===A.value||null===A.value?"":A.value})):t.createElement("div",null,null===A||void 0===A?void 0:A.value);if("Radio"===(null===A||void 0===A?void 0:A.data_type_name)&&(null===A||void 0===A||null===(i=A.options)||void 0===i||null===(n=i.list)||void 0===n?void 0:n.length)>0)return t.createElement("div",{style:{width:"100%",border:"0px solid var(--app-color-gray-light)",padding:"20px",fontSize:"16px"}},null===A||void 0===A||null===($=A.options)||void 0===$?void 0:$.list.map(e=>t.createElement(t.Fragment,null,t.createElement("input",{style:{margin:"0 10px"},type:"radio",id:e,name:A.field_name,value:e,checked:(null===A||void 0===A?void 0:A.value)===e,onChange:e=>{var l,o;F?W(null===(l=e.target)||void 0===l?void 0:l.value,R):P(null===(o=e.target)||void 0===o?void 0:o.value,R)}}),t.createElement("label",{for:e},e))));if("Checkbox"===(null===A||void 0===A?void 0:A.data_type_name))return H?t.createElement("input",{type:"checkbox",defaultChecked:null!==(ee=A.value)&&void 0!==ee&&ee,onChange:e=>{F?W(e.target.checked,R):P(e.target.checked,R)}}):t.createElement("input",{type:"checkbox",checked:null!==(le=A.value)&&void 0!==le&&le,readOnly:!0});if("Formula"===(null===A||void 0===A?void 0:A.data_type_name)&&(null===A||void 0===A||null===(d=A.options)||void 0===d||null===(a=d.operator)||void 0===a?void 0:a.length)>0){var Ae,ze,Le,Re,Ue;const e=z.newStepComponents.filter(e=>null===e.options||(void 0===e.allowMultipleInputs||!1===e.options.allowMultipleInputs)),l=(0,s.LV)(null===A||void 0===A?void 0:A.options,S.selected_fields.filter(e=>A.options.list.includes(e.field_name)&&!e.options.mapToItem),[...z.components.filter(l=>e.every(e=>e.id!==l.id)),...B.Z(e=>e.selected_fields.filter(e=>""===(null===e||void 0===e?void 0:e.value)).length>0,e)],null!==(Ae=null===z||void 0===z?void 0:z.items)&&void 0!==Ae?Ae:[],null!==(ze=null===z||void 0===z?void 0:z.newStepComponents)&&void 0!==ze?ze:[]);return void 0!==l&&(A.value=l),"bar"===(null===A||void 0===A||null===(Le=A.options)||void 0===Le?void 0:Le.display)?t.createElement("div",{style:{margin:"20px",display:"flex",height:"30px",width:"100%"}},t.createElement("label",{className:se.fieldTypeInput,style:{width:"20%"}},null===A||void 0===A?void 0:A.field_name),t.createElement("div",{style:{height:"20px",width:"80%",backgroundColor:null===A||void 0===A||null===(Re=A.options)||void 0===Re?void 0:Re.maxC,display:"flex",flexDirection:"column"}},t.createElement("input",{value:l||0,className:se.fieldTypeInput,name:A.field_name,disabled:!0,style:{color:"transparent",height:"20px",width:"".concat(+l/+A.options.max*100,"%"),backgroundColor:null===A||void 0===A||null===(Ue=A.options)||void 0===Ue?void 0:Ue.barC}}))):l||""}if("Item Formula"===(null===A||void 0===A?void 0:A.data_type_name)&&(null===A||void 0===A||null===(r=A.options)||void 0===r||null===(v=r.operator)||void 0===v?void 0:v.length)>0){var Fe,We,qe;const e=(0,s.LV)(null===A||void 0===A?void 0:A.options,S.selected_fields.filter(e=>A.options.list.includes(e.field_name)&&e.options.mapToItem),[],[],j,!0);return"bar"===(null===A||void 0===A||null===(Fe=A.options)||void 0===Fe?void 0:Fe.display)?t.createElement("div",{style:{margin:"20px",display:"flex",height:"30px",width:"100%"}},t.createElement("label",{className:se.fieldTypeInput,style:{width:"20%"}},null===A||void 0===A?void 0:A.field_name),t.createElement("div",{style:{height:"20px",width:"100%",backgroundColor:null===A||void 0===A||null===(We=A.options)||void 0===We?void 0:We.maxC,display:"flex",flexDirection:"column"}},t.createElement("input",{value:e||0,className:se.fieldTypeInput,name:A.field_name,disabled:!0,style:{color:"transparent",height:"20px",width:"".concat(+e/+A.options.max*100,"%"),backgroundColor:null===A||void 0===A||null===(qe=A.options)||void 0===qe?void 0:qe.barC}}))):e||""}if("Record"===(null===A||void 0===A?void 0:A.data_type_name)&&(null===A||void 0===A||null===(u=A.options)||void 0===u||null===(c=u.component_id)||void 0===c?void 0:c.length)>0){var Ye,Be,He,Ve,Qe,Ke,$e,el,ll,tl,nl;const e=(null!==A&&void 0!==A&&null!==(Ye=A.options)&&void 0!==Ye&&Ye.global?Ul(null===A||void 0===A?void 0:A.data_type_name):ve).filter(e=>{var l;return e.component_fields.filter(e=>{var l;return e.component_blueprint_id===(null===A||void 0===A||null===(l=A.options)||void 0===l?void 0:l.component_id)}).length>0||e.module_id===(null===A||void 0===A||null===(l=A.options)||void 0===l?void 0:l.module_id)}).map(e=>{var l,o,i,t;let n="";return null===A||void 0===A||null===(l=A.options)||void 0===l||null===(o=l.names)||void 0===o||o.map(l=>{var o,i;return n=""===n?null===(o=e.component_fields.find(e=>e.field_name===l))||void 0===o?void 0:o.value:"".concat(n," ").concat(null===(i=e.component_fields.find(e=>e.field_name===l))||void 0===i?void 0:i.value)}),{label:""===n?e.title:n,value:e.id,component:e,[null===A||void 0===A||null===(i=A.options)||void 0===i?void 0:i.output]:null===(t=e.component_fields.find(e=>{var l;return e.field_name===(null===A||void 0===A||null===(l=A.options)||void 0===l?void 0:l.output)}))||void 0===t?void 0:t.value}});let l;if(e.length>0)if(A.value){if(l=null===e||void 0===e?void 0:e.find(e=>{var l;return e[null===A||void 0===A||null===(l=A.options)||void 0===l?void 0:l.output]===A.value}),l){var dl,al;Rl(l.value);const e=[...null!==(dl=null===(al=z.currentStep)||void 0===al?void 0:al.component_blueprints)&&void 0!==dl?dl:[]];e&&(z.newStepComponents=e)}}else if(1==e.length&&1==(null===A||void 0===A?void 0:A.mandatory)&&(l=e[0],l)){var rl,vl;Rl(l.value);const e=[...null!==(rl=null===(vl=z.currentStep)||void 0===vl?void 0:vl.component_blueprints)&&void 0!==rl?rl:[]];e&&(z.newStepComponents=e)}return H?t.createElement("div",{style:{width:"inherit",border:"1px solid gray",minWidth:"300px"}},t.createElement(O.Z,{key:R,visible:null===A||void 0===A?void 0:A.visible,mandatory:null===A||void 0===A?void 0:A.mandatory,items:e,loading:je,error:"",className:se.dropdownClassContainer,onChange:l=>{var o,i,t,n,d,a;l&&(null===A||void 0===A||null===(d=A.options)||void 0===d||null===(a=d.list)||void 0===a||a.map(o=>{const i=Ll({field_name:o});var t,n;-1!=i&&(S.selected_fields[i].value=null!==(t=null===(n=e.find(e=>e.value===l).component.component_fields.find(e=>e.field_name===o))||void 0===n?void 0:n.value)&&void 0!==t?t:"",S.selected_fields[i].disabled=!0)}));de.start=!0,Rl(l),F?W(null!==(o=null===e||void 0===e?void 0:e.find(e=>e.value===l)[null===A||void 0===A||null===(i=A.options)||void 0===i?void 0:i.output])&&void 0!==o?o:null,R):P(null!==(t=null===e||void 0===e?void 0:e.find(e=>e.value===l)[null===A||void 0===A||null===(n=A.options)||void 0===n?void 0:n.output])&&void 0!==t?t:null,R)},selectionType:(null===A||void 0===A||null===(Be=A.options)||void 0===Be?void 0:Be.selection.length)>0?null===A||void 0===A||null===(He=A.options)||void 0===He?void 0:He.selection:null===A||void 0===A||null===(Ve=A.options)||void 0===Ve?void 0:Ve.type,backgroundColor:null!==A&&void 0!==A&&null!==(Qe=A.options)&&void 0!==Qe&&Qe.valueC&&null!==A&&void 0!==A&&A.value?null===A||void 0===A||null===(Ke=A.options)||void 0===Ke?void 0:Ke.valueC:"",value:null!==($e=null===(el=l)||void 0===el?void 0:el.label)&&void 0!==$e?$e:""})):t.createElement("div",{style:{backgroundColor:null!==A&&void 0!==A&&null!==(ll=A.options)&&void 0!==ll&&ll.valueC?null===A||void 0===A||null===(tl=A.options)||void 0===tl?void 0:tl.valueC:""}},null===(nl=l)||void 0===nl?void 0:nl.label)}if("People"===(null===A||void 0===A?void 0:A.data_type_name)&&(null===A||void 0===A||null===(p=A.options)||void 0===p||null===(m=p.position_id)||void 0===m?void 0:m.length)>0){var sl,ul,cl,pl,ml,fl;const e=Me.find(e=>e.label===(null===A||void 0===A?void 0:A.value));return t.createElement("div",{style:{display:"flex",justifyContent:"center"}},H&&t.createElement("div",{style:{width:"300px",border:"1px solid var(--app-color-gray-light)",height:"38px"}},t.createElement(O.Z,{onFocus:()=>{var e;return 0==Me.length&&Ol(null===A||void 0===A||null===(e=A.options)||void 0===e?void 0:e.position_id)},visible:!0,mandatory:null===A||void 0===A?void 0:A.mandatory,className:se.dropdownClassContainer,items:Me.filter(e=>{var l,o;return(null===e||void 0===e||null===(l=e.user)||void 0===l||null===(o=l.positions)||void 0===o?void 0:o.filter(e=>{var l,o;return null===A||void 0===A||null===(l=A.options)||void 0===l||null===(o=l.position_id)||void 0===o?void 0:o.includes(null===e||void 0===e?void 0:e.id)}).length)>0}),value:"single"===(null===A||void 0===A||null===(sl=A.options)||void 0===sl?void 0:sl.type)?null===(ul=Me.find(e=>{var l,o;return e.label===(null!==A&&void 0!==A&&null!==(l=A.options)&&void 0!==l&&l.mapToItem?null===A||void 0===A?void 0:A.value:null===(o=S.selected_fields[R])||void 0===o?void 0:o.value)}))||void 0===ul?void 0:ul.label:null!==A&&void 0!==A&&null!==(cl=A.options)&&void 0!==cl&&cl.mapToItem?null===A||void 0===A?void 0:A.value:null===(pl=S.selected_fields[R])||void 0===pl?void 0:pl.value,loading:je,error:null===A||void 0===A?void 0:A.errors,onChange:e=>{var l;if("single"===(null===A||void 0===A||null===(l=A.options)||void 0===l?void 0:l.type)){const l=Me.find(l=>l.value===e);F?W(null===l||void 0===l?void 0:l.label,R):P(null===l||void 0===l?void 0:l.label,R)}else F?W(e,R):P(e,R)},selectionType:null===A||void 0===A||null===(ml=A.options)||void 0===ml?void 0:ml.type,fieldIcon:null===A||void 0===A?void 0:A.icon})),e&&t.createElement("div",{className:se.avatarContentContainer},t.createElement("img",{alt:"lg",src:null===e||void 0===e||null===(fl=e.user)||void 0===fl?void 0:fl.photo,className:se.avatarUrlImg})))}return"file"===A.data_type?t.createElement(Xe,{field_id:A.id,value:null===A||void 0===A?void 0:A.value,isInherited:U,checkIfAreMandatoryErrored:Y,options:null===A||void 0===A?void 0:A.options,index:R,indexInContextArray:T}):"date"===A.data_type||null!==A&&void 0!==A&&null!==(_=A.options)&&void 0!==_&&_.country_code||null!==A&&void 0!==A&&null!==(y=A.options)&&void 0!==y&&y.currency_type||"Number"===A.data_type_name?H||"bar"===(null===A||void 0===A||null===(oe=A.options)||void 0===oe?void 0:oe.display)?t.createElement("div",{className:se.fieldTypeInput,style:{paddingLeft:H?"":"0px",border:H?"1px solid var(--app-color-gray-light)":"none",height:"auto"}},"date"===A.data_type?"Range"===(null===A||void 0===A||null===(ie=A.options)||void 0===ie?void 0:ie.type)?t.createElement(f.$m,{inputContainerClassName:se.inputContainerClassName,dateChangeHandler:e=>Tl(e,R),startDate:ol,endDate:il}):null!==A&&void 0!==A&&null!==(te=A.options)&&void 0!==te&&te.time?t.createElement("div",{style:{width:"100%",height:"auto",border:"0"}},t.createElement(pe(),{selected:null!==A&&void 0!==A&&A.value?new Date(null===A||void 0===A?void 0:A.value):new Date,showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:15,customInput:t.createElement("div",{style:{cursor:"pointer",display:"flex",justifyContent:"center",width:"100%",alignItems:"stretch",padding:"5px 0",border:"0px solid var(--app-color-gray-lighter)"}},t.createElement("input",{value:A.value?b()(A.value).format("DD MMMM YYYY HH:mm"):"",className:se.inputValue,type:"text",style:{flex:1,marginTop:"auto",marginBottom:"auto",outline:"none",fontFamily:"var(--app-text-main-font)",fontSize:"14px",fontWeight:"bold",lineHeight:"20px",color:"#4A4A4A",textAlign:"left",maxWidth:"98%",border:"0px"},onChange:e=>{}}),t.createElement(C.G,{icon:E.WRo,style:{margin:"0 10px",width:"14px",height:"14px"}})),className:se.singleInputContainer,onChange:e=>{W(e,R)}})):t.createElement(f.X9,{value:null!==A&&void 0!==A&&A.value?b()(new Date(null===A||void 0===A?void 0:A.value)).format("Do MMMM YYYY"):"",dateChangeHandler:e=>{F?W(e,R):Pl(e,R)},selected:new Date(b()(Ge,"YYYY-MM-DD")),iconClassName:se.calendar,inputContainerClassName:se.singleInputContainer,inputStyle:{textAlign:"left",border:"none",fontSize:"16px",margin:"0px 0 0px"},hasCalendarIcon:!0}):H&&t.createElement("input",{type:A.data_type,onBlur:e=>{F?W(e.target.value,R):N(e.target.value,R)},id:A.field_name,autoComplete:"none",defaultValue:null===A||void 0===A?void 0:A.value,className:se.fieldTypeInput,name:A.field_name,style:{height:"33px",backgroundColor:null!==A&&void 0!==A&&null!==(ne=A.options)&&void 0!==ne&&ne.valueC?null===A||void 0===A||null===(ae=A.options)||void 0===ae?void 0:ae.valueC:"",minWidth:F?"100px":"",border:"0px"},disabled:null!==(re=null===A||void 0===A?void 0:A.disabled)&&void 0!==re&&re}),"bar"===(null===A||void 0===A||null===(ue=A.options)||void 0===ue?void 0:ue.display)&&"Number"===(null===A||void 0===A?void 0:A.data_type_name)&&t.createElement("div",{style:{height:H?"5px":"20px",border:"none",width:"100%",backgroundColor:null===A||void 0===A||null===(ce=A.options)||void 0===ce?void 0:ce.maxC,display:"flex",flexDirection:"row"}},t.createElement("input",{value:"",className:se.fieldTypeInput,name:A.field_name,style:{color:"transparent",border:"0px",height:H?"5px":"20px",width:"".concat(+(null===A||void 0===A?void 0:A.value)/+A.options.max*100,"%"),backgroundColor:null!==A&&void 0!==A&&A.value?"0"===(null===A||void 0===A?void 0:A.value)?"transparent":null===A||void 0===A||null===(me=A.options)||void 0===me?void 0:me.barC:"transparent"},disabled:!0}))):t.createElement("div",{style:{backgroundColor:null!==A&&void 0!==A&&null!==(fe=A.options)&&void 0!==fe&&fe.valueC?null===A||void 0===A||null===(_e=A.options)||void 0===_e?void 0:_e.valueC:"",minWidth:F?"200px":""}},"date"===(null===A||void 0===A?void 0:A.data_type)?null!==A&&void 0!==A&&A.value?b()(null===A||void 0===A?void 0:A.value).format(null!==A&&void 0!==A&&null!==(ye=A.options)&&void 0!==ye&&ye.time?"DD MMMM YYYY HH:mm":"DD MMMM YYYY"):"":null===A||void 0===A?void 0:A.value):"Long Text"===A.data_type_name?H?t.createElement("textarea",{className:se.fieldTypeTextarea,style:{minWidth:F?"300px":"",border:"0px solid var(--app-color-gray-light)"},type:A.data_type,defaultValue:null!==A&&void 0!==A&&null!==(ge=A.options)&&void 0!==ge&&ge.mapToItem?null===A||void 0===A?void 0:A.value:null!==(he=S.selected_fields[R])&&void 0!==he&&he.value?null===(be=S.selected_fields[R])||void 0===be?void 0:be.value:""===Je(null===A||void 0===A?void 0:A.options)?"":Je(null===A||void 0===A?void 0:A.options),onFocus:()=>{},disabled:null!==(xe=null===(Ee=S.selected_fields[R])||void 0===Ee?void 0:Ee.disabled)&&void 0!==xe&&xe,autoComplete:"none",onBlur:e=>{F?W(e.target.value,R):N(e.target.value,R)},name:A.field_name}):t.createElement("div",{style:{backgroundColor:null!==A&&void 0!==A&&null!==(Ce=A.options)&&void 0!==Ce&&Ce.valueC?null===A||void 0===A||null===(we=A.options)||void 0===we?void 0:we.valueC:"",minWidth:F?"300px":""}},null===A||void 0===A?void 0:A.value):"Link"===A.data_type_name?H?t.createElement("div",{style:{width:"inherit",display:"flex",flexDirection:"column"}},t.createElement("input",{type:A.data_type,onBlur:e=>{F?W(e.target.value,R):N(e.target.value,R)},autoComplete:"none",defaultValue:null!==A&&void 0!==A&&null!==(Se=A.options)&&void 0!==Se&&Se.mapToItem?null===A||void 0===A?void 0:A.value:null!==(ke=S.selected_fields[R])&&void 0!==ke&&ke.value?null===(Ze=S.selected_fields[R])||void 0===Ze?void 0:Ze.value:""===Je(null===A||void 0===A?void 0:A.options)?"":Je(null===A||void 0===A?void 0:A.options),className:se.fieldTypeInput,style:{border:"0px solid var(--app-color-gray-light)"},name:A.field_name,disabled:null!==(Ie=null===(Ne=S.selected_fields[R])||void 0===Ne?void 0:Ne.disabled)&&void 0!==Ie&&Ie})):((null===A||void 0===A||null===(De=A.value)||void 0===De?void 0:De.includes("jpg"))||(null===A||void 0===A||null===(Te=A.value)||void 0===Te?void 0:Te.includes("jpeg"))||(null===A||void 0===A||null===(Pe=A.options)||void 0===Pe?void 0:Pe.image)||(null===A||void 0===A||null===(Oe=A.value)||void 0===Oe?void 0:Oe.includes("png")))&&t.createElement("img",{className:se.avatarUrlImg,alt:"lg",onError:e=>e.target.src="https://i.quotev.com/b2gtjqawaaaa.jpg",src:null===A||void 0===A?void 0:A.value}):H?t.createElement("input",{type:A.data_type,onBlur:e=>{F?W(e.target.value,R):N(e.target.value,R)},autoComplete:"none",defaultValue:null!==A&&void 0!==A&&null!==(g=A.options)&&void 0!==g&&g.mapToItem?null===A||void 0===A?void 0:A.value:null!==(h=S.selected_fields[R])&&void 0!==h&&h.value?null===(x=S.selected_fields[R])||void 0===x?void 0:x.value:""===Je(null===A||void 0===A?void 0:A.options)?"":Je(null===A||void 0===A?void 0:A.options),className:se.fieldTypeInput,style:{minWidth:F?"300px":"",border:"0px solid var(--app-color-gray-light)",backgroundColor:null!==A&&void 0!==A&&null!==(w=A.options)&&void 0!==w&&w.valueC?null===A||void 0===A||null===(M=A.options)||void 0===M?void 0:M.valueC:""},name:A.field_name,disabled:null!==(k=null===(Z=S.selected_fields[R])||void 0===Z?void 0:Z.disabled)&&void 0!==k&&k}):t.createElement("div",{style:{backgroundColor:null!==A&&void 0!==A&&null!==(I=A.options)&&void 0!==I&&I.valueC?null===A||void 0===A||null===(D=A.options)||void 0===D?void 0:D.valueC:"",minWidth:F?"200px":""}},null===A||void 0===A?void 0:A.value)},Wl=(null===S||void 0===S||null===(l=S.selected_fields)||void 0===l?void 0:l.length)>0&&(null===S||void 0===S||null===(o=S.selected_fields)||void 0===o?void 0:o.sort((e,l)=>e.index-l.index).map((e,l)=>{var o,n,d,g,x,fe,$e,ll,Nl,Wl,ql,Yl,Bl,Hl,jl,Vl,Gl,Jl,Ql,Kl,Xl,$l,eo,lo,oo,io,to,no,ao,ro,vo,so,uo,co,po,mo,fo,_o,yo,go,ho,bo,xo,Eo,Co,wo,Mo,So,ko,Zo,Io,No,Do,To,Po,Oo,Ao,zo,Lo,Ro,Uo,Fo,Wo,qo;let Yo="";if((null===e||void 0===e||null===(o=e.options)||void 0===o||null===(n=o.fieldToMatch)||void 0===n?void 0:n.length)>0){var Bo,Ho,jo,Vo,Go,Jo,Qo,Ko;const l=S.selected_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.fieldToMatch)});var Xo,$o,ei,li,oi,ii,ti,ni,di,ai,ri,vi,si,ui,ci,pi;if(l&&(null===e||void 0===e||null===(Bo=e.options)||void 0===Bo||null===(Ho=Bo.valueToMatch)||void 0===Ho?void 0:Ho.length)>0&&(null===e||void 0===e||null===(jo=e.options)||void 0===jo||null===(Vo=jo.actionToPerform)||void 0===Vo?void 0:Vo.length)>0&&(null===e||void 0===e||null===(Go=e.options)||void 0===Go||null===(Jo=Go.initialState)||void 0===Jo?void 0:Jo.length)>0)if(null!==e&&void 0!==e&&null!==(Xo=e.options)&&void 0!==Xo&&null!==($o=Xo.valueToMatch)&&void 0!==$o&&$o.split(",").includes(null===l||void 0===l?void 0:l.value))"hide"===(null===e||void 0===e||null===(ei=e.options)||void 0===ei?void 0:ei.actionToPerform)?e.visible=!1:"visible"===(null===e||void 0===e||null===(li=e.options)||void 0===li?void 0:li.actionToPerform)?e.visible=!0:"mandatory"===(null===e||void 0===e||null===(oi=e.options)||void 0===oi?void 0:oi.actionToPerform)?(e.mandatory=!0,e.visible=!0):"optional"===(null===e||void 0===e||null===(ii=e.options)||void 0===ii?void 0:ii.actionToPerform)?(e.mandatory=!1,e.visible=!0):"visman"===(null===e||void 0===e||null===(ti=e.options)||void 0===ti?void 0:ti.actionToPerform)?(e.mandatory=!0,e.visible=!0):"disable"===(null===e||void 0===e||null===(ni=e.options)||void 0===ni?void 0:ni.actionToPerform)&&(Yo="none");else"hidden"===(null===e||void 0===e||null===(di=e.options)||void 0===di?void 0:di.initialState)?e.visible=!1:"visible"===(null===e||void 0===e||null===(ai=e.options)||void 0===ai?void 0:ai.initialState)?e.visible=!0:"mandatory"===(null===e||void 0===e||null===(ri=e.options)||void 0===ri?void 0:ri.initialState)?(e.mandatory=!0,e.visible=!0):"optional"===(null===e||void 0===e||null===(vi=e.options)||void 0===vi?void 0:vi.initialState)?(e.mandatory=!1,e.visible=!0):"visman"===(null===e||void 0===e||null===(si=e.options)||void 0===si?void 0:si.actionToPerform)?(e.mandatory=!0,e.visible=!0):"disable"===(null===e||void 0===e||null===(ui=e.options)||void 0===ui?void 0:ui.actionToPerform)&&(Yo="none");if(l&&(null===e||void 0===e||null===(Qo=e.options)||void 0===Qo||null===(Ko=Qo.valueToMatch2)||void 0===Ko?void 0:Ko.length)>0)if(null!==e&&void 0!==e&&null!==(ci=e.options)&&void 0!==ci&&null!==(pi=ci.valueToMatch2)&&void 0!==pi&&pi.split(",").includes(null===l||void 0===l?void 0:l.value)){var mi,fi,_i,yi,gi,hi,bi,xi,Ei,Ci,wi,Mi;if((null===e||void 0===e||null===(mi=e.options)||void 0===mi||null===(fi=mi.value)||void 0===fi?void 0:fi.length)>0)if("Text"===(null===e||void 0===e?void 0:e.data_type_name))e.value=null===e||void 0===e||null===(gi=e.options)||void 0===gi?void 0:gi.value;else if("Date"===(null===e||void 0===e?void 0:e.data_type_name)){var Si,ki,Zi,Ii,Ni,Di;if(0==(null===e||void 0===e||null===(Si=e.value)||void 0===Si?void 0:Si.length)||void 0==(null===e||void 0===e?void 0:e.value))"today"===(null===e||void 0===e||null===(ki=e.options)||void 0===ki?void 0:ki.value)?e.value=new Date(b()((0,h.now)())):"tomorrow"===(null===e||void 0===e||null===(Zi=e.options)||void 0===Zi?void 0:Zi.value)?e.value=new Date(b()((0,h.now)()).add(1,"days")):"week"===(null===e||void 0===e||null===(Ii=e.options)||void 0===Ii?void 0:Ii.value)?e.value=new Date(b()((0,h.now)()).add(1,"weeks")):"month"===(null===e||void 0===e||null===(Ni=e.options)||void 0===Ni?void 0:Ni.value)&&(e.value=new Date(b()((0,h.now)()).add(1,"months"))),"none"===(null===e||void 0===e||null===(Di=e.options)||void 0===Di?void 0:Di.value)&&(e.value=void 0)}if((null===e||void 0===e||null===(_i=e.options)||void 0===_i||null===(yi=_i.actionToPerform2)||void 0===yi?void 0:yi.length)>0)"hide"===(null===e||void 0===e||null===(hi=e.options)||void 0===hi?void 0:hi.actionToPerform2)?e.visible=!1:"visible"===(null===e||void 0===e||null===(bi=e.options)||void 0===bi?void 0:bi.actionToPerform2)?e.visible=!0:"mandatory"===(null===e||void 0===e||null===(xi=e.options)||void 0===xi?void 0:xi.actionToPerform2)?(e.mandatory=!0,e.visible=!0):"optional"===(null===e||void 0===e||null===(Ei=e.options)||void 0===Ei?void 0:Ei.actionToPerform2)?(e.mandatory=!1,e.visible=!0):"visman"===(null===e||void 0===e||null===(Ci=e.options)||void 0===Ci?void 0:Ci.actionToPerform2)?(e.mandatory=!0,e.visible=!0):"disable"===(null===e||void 0===e||null===(wi=e.options)||void 0===wi?void 0:wi.actionToPerform2)?Yo="none":"enable"===(null===e||void 0===e||null===(Mi=e.options)||void 0===Mi?void 0:Mi.actionToPerform2)&&(Yo="")}}if("Record"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(d=e.options)||void 0===d||null===(g=d.component_id)||void 0===g?void 0:g.length)>0){var Ti,Pi,Oi,Ai,zi,Li,Ri,Ui,Fi,Wi,qi,Yi,Bi,Hi,ji,Vi,Gi,Ji,Qi,Ki,Xi,$i,et,lt,ot,it,tt,nt,dt,at,rt,vt,st,ut,ct,pt,mt,ft,_t,yt,gt,ht,bt;const o=(null!==e&&void 0!==e&&null!==(Ti=e.options)&&void 0!==Ti&&Ti.global?Ul(null===e||void 0===e?void 0:e.data_type_name):ve).filter(l=>{var o;return l.component_fields.filter(l=>{var o;return l.component_blueprint_id===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.component_id)}).length>0||l.module_id===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.module_id)}),n=o.map(l=>{var o,i,t,n;let d="";return null===e||void 0===e||null===(o=e.options)||void 0===o||null===(i=o.names)||void 0===i||i.map(e=>{var o,i;return d=""===d?null===(o=l.component_fields.find(l=>l.field_name===e))||void 0===o?void 0:o.value:"".concat(d," ").concat(null===(i=l.component_fields.find(l=>l.field_name===e))||void 0===i?void 0:i.value)}),{label:""===d?l.title:d,value:l.id,component:l,[null===e||void 0===e||null===(t=e.options)||void 0===t?void 0:t.output]:null===(n=l.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.output)}))||void 0===n?void 0:n.value}});let d;if((null===e||void 0===e||null===(Pi=e.options)||void 0===Pi||null===(Oi=Pi.filters)||void 0===Oi?void 0:Oi.length)>0){if((null===o||void 0===o?void 0:o.length)>0)if(e.value){if(d=o.find(l=>l.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.output)&&l.value===e.value})),d){var xt,Et,Ct;Rl(null===(xt=d)||void 0===xt?void 0:xt.id);const e=[...null!==(Et=null===(Ct=z.currentStep)||void 0===Ct?void 0:Ct.component_blueprints)&&void 0!==Et?Et:[]];e&&(z.newStepComponents=e)}}else if(1==n.length&&(d=o[0],d)){var wt,Mt,St;Rl(null===(wt=d)||void 0===wt?void 0:wt.id);const e=[...null!==(Mt=null===(St=z.currentStep)||void 0===St?void 0:St.component_blueprints)&&void 0!==Mt?Mt:[]];e&&(z.newStepComponents=e)}if(1==n.length||e.value){var kt,Zt,It,Nt;if((null===e||void 0===e||null===(kt=e.options)||void 0===kt?void 0:kt.filters.length)>0)al[null===e||void 0===e||null===(It=e.options)||void 0===It?void 0:It.filters[0]]=j.Z(V.Z("value"))(o.map(l=>{const o=null===l||void 0===l?void 0:l.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[1])});return{label:null===o||void 0===o?void 0:o.value,value:null===o||void 0===o?void 0:o.value,component:l}}).filter(l=>{var o;return(null===(o=l.component)||void 0===o?void 0:o.component_fields.filter(l=>{var o,i;return l.value===(null===(o=d)||void 0===o||null===(i=o.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[0])}))||void 0===i?void 0:i.value)}).length)>0}));if((null===e||void 0===e||null===(Zt=e.options)||void 0===Zt?void 0:Zt.filters.length)>1)al[null===e||void 0===e||null===(Nt=e.options)||void 0===Nt?void 0:Nt.filters[1]]=j.Z(V.Z("value"))(o.map(l=>{const o=l.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[2])});return{label:null===o||void 0===o?void 0:o.value,value:null===o||void 0===o?void 0:o.value,component:l}}).filter(l=>{var o;return(null===(o=l.component)||void 0===o?void 0:o.component_fields.filter(l=>{var o,i;return l.value===(null===(o=d)||void 0===o||null===(i=o.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[1])}))||void 0===i?void 0:i.value)}).length)>0}))}}else if(n.length>0)if(e.value){if(d=null===n||void 0===n?void 0:n.find(l=>{var o;return l[null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.output]===e.value}),d){var Dt,Tt;Rl(d.value);const e=[...null!==(Dt=null===(Tt=z.currentStep)||void 0===Tt?void 0:Tt.component_blueprints)&&void 0!==Dt?Dt:[]];e&&(z.newStepComponents=e)}}else if(1==n.length&&1==(null===e||void 0===e?void 0:e.mandatory)&&(d=n[0],d)){var Pt,Ot;Rl(d.value);const e=[...null!==(Pt=null===(Ot=z.currentStep)||void 0===Ot?void 0:Ot.component_blueprints)&&void 0!==Pt?Pt:[]];e&&(z.newStepComponents=e)}return!d&&null!==e&&void 0!==e&&e.value?t.createElement("div",{key:l},"A record ( ".concat(null===e||void 0===e?void 0:e.value," ) was previously selected but not found. Press the refresh button on the upper right side to retrieve the missing record. If record is still not found, please check with your admin.")):(null===e||void 0===e||null===(Ai=e.options)||void 0===Ai||null===(zi=Ai.filters)||void 0===zi?void 0:zi.length)>0?t.createElement("div",{key:l,style:{width:"100%",display:null!==e&&void 0!==e&&e.visible?"":"none",pointerEvents:Yo,border:"1px dashed gray",fontSize:"16px",color:"var(--app-color-gray-dark)",padding:"20px",marginBottom:"10px",backgroundColor:"var(--app-color-gray-lightest)"}},null===_e||void 0===_e||null===(Li=_e.find(l=>{var o;return l.id===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.component_id)}))||void 0===Li?void 0:Li.name,t.createElement("br",null),t.createElement("br",null),(null===e||void 0===e||null===(Ri=e.options)||void 0===Ri||null===(Ui=Ri.filters)||void 0===Ui?void 0:Ui.length)>0&&t.createElement(O.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-dark)"},className:se.multiselectComponent,visible:null===e||void 0===e?void 0:e.visible,mandatory:1==(null===e||void 0===e||null===(Fi=e.options)||void 0===Fi||null===(Wi=Fi.filters)||void 0===Wi?void 0:Wi.length)&&(null===e||void 0===e?void 0:e.mandatory),items:j.Z(V.Z("value"))(o.map(l=>{const o=l.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[0])});return{label:null===o||void 0===o?void 0:o.value,value:null===o||void 0===o?void 0:o.value,component:l}})),loading:je,error:1==(null===e||void 0===e||null===(qi=e.options)||void 0===qi||null===(Yi=qi.filters)||void 0===Yi?void 0:Yi.length)?null===e||void 0===e?void 0:e.errors:"",onChange:i=>{var t,n,d,a,r;(null===e||void 0===e||null===(t=e.options)||void 0===t||null===(n=t.filters)||void 0===n?void 0:n.length)>1?(P(void 0,l),cl(!1),sl(!1),setTimeout(()=>{sl(!0),cl(!0)},10),rl({[null===e||void 0===e||null===(d=e.options)||void 0===d?void 0:d.filters[0]]:j.Z(V.Z("value"))(o.map(l=>{const o=l.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[1])});return{label:null===o||void 0===o?void 0:o.value,value:null===o||void 0===o?void 0:o.value,component:l,selected:i}}).filter(l=>l.component.component_fields.filter(l=>{var o;return l.value===i&&l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[0])}).length>0))})):(_l("50px"),P(null!==(a=o.find(e=>e.value===i)[null===e||void 0===e||null===(r=e.options)||void 0===r?void 0:r.output])&&void 0!==a?a:null,l),Rl(o.find(e=>e.value===i).component.id))},fieldLabel:null===e||void 0===e||null===(Bi=e.options)||void 0===Bi?void 0:Bi.filters[0],value:d?null===(Hi=d.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[0])}))||void 0===Hi?void 0:Hi.value:""}),t.createElement("div",{style:{display:null!==e&&void 0!==e&&e.visible?"":"none",marginBottom:"10px"}},(null===e||void 0===e||null===(ji=e.options)||void 0===ji||null===(Vi=ji.filters)||void 0===Vi?void 0:Vi.length)>1&&vl&&t.createElement(O.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-dark)"},className:se.multiselectComponent,visible:null===e||void 0===e?void 0:e.visible,mandatory:2==(null===e||void 0===e||null===(Gi=e.options)||void 0===Gi||null===(Ji=Gi.filters)||void 0===Ji?void 0:Ji.length)&&(null===e||void 0===e?void 0:e.mandatory),items:null!==(Qi=al[null===e||void 0===e||null===(Ki=e.options)||void 0===Ki?void 0:Ki.filters[0]])&&void 0!==Qi?Qi:[],loading:je,onClicked:e=>_l(e?"180px":"50px"),onChange:t=>{var n,d,a,r,v,s,u,c,p;(null===e||void 0===e||null===(n=e.options)||void 0===n||null===(d=n.filters)||void 0===d?void 0:d.length)>2?(cl(!1),setTimeout(()=>cl(!0),10),rl((0,i.Z)((0,i.Z)({},al),{},{[null===e||void 0===e||null===(a=e.options)||void 0===a?void 0:a.filters[1]]:null!==(r=j.Z(V.Z("value"))(o.map(l=>{const o=l.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[2])});return{label:null===o||void 0===o?void 0:o.value,value:null===o||void 0===o?void 0:o.value,component:l}}).filter(l=>l.component.component_fields.filter(l=>{var o;return l.value===t&&l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[1])}).length>0).filter(l=>l.component.component_fields.filter(l=>{var o,i;return l.value===al[null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[0]][0].component.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[0])}).value&&l.field_name===(null===e||void 0===e||null===(i=e.options)||void 0===i?void 0:i.filters[0])}).length>0)))&&void 0!==r?r:[]}))):(_l("50px"),de.start=!0,P(null!==(v=null===(s=al[null===e||void 0===e||null===(c=e.options)||void 0===c?void 0:c.filters[0]])||void 0===s||null===(u=s.find(e=>e.value===t))||void 0===u?void 0:u.component.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.output)}).value)&&void 0!==v?v:null,l),Rl(al[null===e||void 0===e||null===(p=e.options)||void 0===p?void 0:p.filters[0]].find(e=>e.value===t).component.id),cl(!1),sl(!1),setTimeout(()=>{sl(!0),cl(!0)},10))},fieldLabel:null===e||void 0===e||null===(Xi=e.options)||void 0===Xi?void 0:Xi.filters[1],value:d?null===($i=d.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[1])}))||void 0===$i?void 0:$i.value:""})),t.createElement("div",{style:{display:null!==e&&void 0!==e&&e.visible?"":"none",marginBottom:"10px"}},(null===e||void 0===e||null===(et=e.options)||void 0===et||null===(lt=et.filters)||void 0===lt?void 0:lt.length)>2&&ul&&t.createElement(O.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-dark)"},className:se.multiselectComponent,visible:null===e||void 0===e?void 0:e.visible,mandatory:3==(null===e||void 0===e||null===(ot=e.options)||void 0===ot||null===(it=ot.filters)||void 0===it?void 0:it.length)&&(null===e||void 0===e?void 0:e.mandatory),items:null!==(tt=al[null===e||void 0===e||null===(nt=e.options)||void 0===nt?void 0:nt.filters[1]])&&void 0!==tt?tt:[],loading:je,onClicked:e=>_l(e?"180px":"50px"),onChange:o=>{var i,t,n,d,a;_l("50px"),de.start=!0,P(null!==(i=null===(t=al[null===e||void 0===e||null===(d=e.options)||void 0===d?void 0:d.filters[1]])||void 0===t||null===(n=t.find(e=>e.value===o))||void 0===n?void 0:n.component.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.output)}).value)&&void 0!==i?i:null,l),Rl(al[null===e||void 0===e||null===(a=e.options)||void 0===a?void 0:a.filters[1]].find(e=>e.value===o).component.id)},fieldLabel:null===e||void 0===e||null===(dt=e.options)||void 0===dt?void 0:dt.filters[2],value:d?null===(at=d.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[2])}))||void 0===at?void 0:at.value:""}))):"Tiles"===(null===e||void 0===e||null===(rt=e.options)||void 0===rt?void 0:rt.selection)?t.createElement(me.Z,{enabled:Yo,width:"100%",style:{border:"0"},editMode:Ce,showWidth:l=>{e.field_options=(0,i.Z)((0,i.Z)({},e.field_options),{},{width:"".concat(l,"px")})},key:l,fieldLabel:null!==(vt=null===e||void 0===e||null===(st=e.options)||void 0===st?void 0:st.label)&&void 0!==vt?vt:e.field_name,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:(null===(ut=e.errors)||void 0===ut?void 0:ut.length)>0?"".concat(e.errors,". Try to select again"):"",notes:null===e||void 0===e||null===(ct=e.options)||void 0===ct?void 0:ct.notes},t.createElement("div",{style:{width:"100%"}},t.createElement(D.default,{rowStyleSelected:{border:"2px solid black"},initialSelected:n.map(l=>{var o;return l[null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.output]}).indexOf(null===e||void 0===e?void 0:e.value),modern:!0,isReport:!1,className:se.listContainer,"app-variant-is-mobile":"true",columns:null===e||void 0===e||null===(pt=e.options)||void 0===pt?void 0:pt.names,list:n.map(e=>{const l=e;return e.component.component_fields.filter(e=>{l[e.field_name]=e.value}),l}),onListItemClick:o=>{var i,t,d,a,r;o&&(null===e||void 0===e||null===(r=e.options)||void 0===r||r.list.map(e=>{const l=Ll({field_name:e});var i,t;-1!=l&&(S.selected_fields[l].value=null!==(i=null===(t=o.component.component_fields.find(l=>l.field_name===e))||void 0===t?void 0:t.value)&&void 0!==i?i:"",S.selected_fields[l].disabled=!0)}));Dl(),Rl(o),P(null!==(i=null===n||void 0===n||null===(t=n.find(e=>e.value===o.value))||void 0===t||null===(d=t.component.component_fields)||void 0===d||null===(a=d.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.output)}))||void 0===a?void 0:a.value)&&void 0!==i?i:null,l)}}))):t.createElement(me.Z,{titleProps:{fontSize:"14px",color:"var(--app-color-gray-dark)",fontWeight:"normal",paddingLeft:"5px"},enabled:Yo,width:"100%",style:{marginTop:"0px",border:"0px solid var(--app-color-gray-lighter)",padding:"5px",marginBottom:"10px",backgroundColor:"var(--app-color-gray-lightest)"},editMode:Ce,showWidth:l=>{e.field_options=(0,i.Z)((0,i.Z)({},e.field_options),{},{width:"".concat(l,"px")})},key:l,fieldLabel:_e.find(l=>{var o;return l.id===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.component_id)}).name,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:(null===(mt=e.errors)||void 0===mt?void 0:mt.length)>0?"".concat(e.errors,". Try to select again"):"",notes:null===e||void 0===e||null===(ft=e.options)||void 0===ft?void 0:ft.notes},t.createElement("div",{style:{width:"inherit"}},t.createElement(O.Z,{key:l,visible:null===e||void 0===e?void 0:e.visible,mandatory:null===e||void 0===e?void 0:e.mandatory,items:n,loading:je,error:"",className:se.dropdownClassContainer,onClicked:e=>_l(e?"100px":"50px"),onChange:o=>{var i,t;de.start=!0,_l("50px"),Rl(o),P(null!==(i=null===n||void 0===n?void 0:n.find(e=>e.value===o)[null===e||void 0===e||null===(t=e.options)||void 0===t?void 0:t.output])&&void 0!==i?i:null,l)},selectionType:(null===e||void 0===e||null===(_t=e.options)||void 0===_t?void 0:_t.selection.length)>0?null===e||void 0===e||null===(yt=e.options)||void 0===yt?void 0:yt.selection:null===e||void 0===e||null===(gt=e.options)||void 0===gt?void 0:gt.type,value:null!==(ht=null===(bt=d)||void 0===bt?void 0:bt.label)&&void 0!==ht?ht:""})))}if("Filters"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(x=e.options)||void 0===x||null===(fe=x.component_id)||void 0===fe?void 0:fe.length)>0){var At,zt,Lt,Rt,Ut,Ft,Wt,qt,Yt,Bt,Ht,jt,Vt,Gt,Jt,Qt,Kt,Xt,$t,en,ln,on,tn,nn,dn,an,rn,vn,sn;const o=(null!==e&&void 0!==e&&null!==(At=e.options)&&void 0!==At&&At.global?Ul(null===e||void 0===e?void 0:e.data_type_name):ve).filter(l=>l.component_fields.filter(l=>{var o;return l.component_blueprint_id===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.component_id)}).length>0),n=o.map(l=>{var o,i;return{label:l.title,value:l.id,component:l,[null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.output]:null===(i=l.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.output)}))||void 0===i?void 0:i.value}});let d;if(o.length>0){if(e.value){if(d=o.find(l=>l.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.output)&&l.value===e.value})),d){var un,cn,pn;Rl(null===(un=d)||void 0===un?void 0:un.id);const e=[...null!==(cn=null===(pn=z.currentStep)||void 0===pn?void 0:pn.component_blueprints)&&void 0!==cn?cn:[]];e&&(z.newStepComponents=e)}}else if(1==n.length&&1==(null===e||void 0===e?void 0:e.mandatory)&&(d=o[0],d)){var mn,fn,_n;Rl(null===(mn=d)||void 0===mn?void 0:mn.id);const e=[...null!==(fn=null===(_n=z.currentStep)||void 0===_n?void 0:_n.component_blueprints)&&void 0!==fn?fn:[]];e&&(z.newStepComponents=e)}if(1==n.length||e.value){var yn,gn,hn,bn;if((null===e||void 0===e||null===(yn=e.options)||void 0===yn?void 0:yn.filters.length)>0)al[null===e||void 0===e||null===(hn=e.options)||void 0===hn?void 0:hn.filters[0]]=j.Z(V.Z("value"))(o.map(l=>{const o=null===l||void 0===l?void 0:l.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[1])});return{label:null===o||void 0===o?void 0:o.value,value:null===o||void 0===o?void 0:o.value,component:l}}));if((null===e||void 0===e||null===(gn=e.options)||void 0===gn?void 0:gn.filters.length)>1)al[null===e||void 0===e||null===(bn=e.options)||void 0===bn?void 0:bn.filters[1]]=j.Z(V.Z("value"))(o.map(l=>{const o=l.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[2])});return{label:null===o||void 0===o?void 0:o.value,value:null===o||void 0===o?void 0:o.value,component:l}}))}}return!d&&null!==e&&void 0!==e&&e.value?t.createElement("div",{key:l},"A record ( ".concat(null===e||void 0===e?void 0:e.value," ) was previously selected but not found. Press the refresh button on the upper right side to retrieve the missing record. If record is still not found, please check with your admin.")):t.createElement("div",{key:l,style:{width:"100%",display:null!==e&&void 0!==e&&e.visible?"":"none",pointerEvents:Yo,border:"1px dashed gray",fontSize:"16px",color:"var(--app-color-gray-dark)",marginBottom:"10px",padding:"20px",backgroundColor:"var(--app-color-gray-lightest)"}},_e.find(l=>{var o;return l.id===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.component_id)}).name,t.createElement("br",null),t.createElement("br",null),(null===e||void 0===e||null===(zt=e.options)||void 0===zt||null===(Lt=zt.filters)||void 0===Lt?void 0:Lt.length)>0&&t.createElement(O.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-dark)"},className:se.multiselectComponent,visible:null===e||void 0===e?void 0:e.visible,mandatory:1==(null===e||void 0===e||null===(Rt=e.options)||void 0===Rt||null===(Ut=Rt.filters)||void 0===Ut?void 0:Ut.length)&&(null===e||void 0===e?void 0:e.mandatory),items:j.Z(V.Z("value"))(o.map(l=>{const o=l.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[0])});return{label:null===o||void 0===o?void 0:o.value,value:null===o||void 0===o?void 0:o.value,component:l}})),loading:je,error:1==(null===e||void 0===e||null===(Ft=e.options)||void 0===Ft||null===(Wt=Ft.filters)||void 0===Wt?void 0:Wt.length)?null===e||void 0===e?void 0:e.errors:"",onChange:i=>{var t,n,d,a,r;(null===e||void 0===e||null===(t=e.options)||void 0===t||null===(n=t.filters)||void 0===n?void 0:n.length)>1?(P(void 0,l),cl(!1),sl(!1),setTimeout(()=>{sl(!0),cl(!0)},10),rl({[null===e||void 0===e||null===(d=e.options)||void 0===d?void 0:d.filters[0]]:j.Z(V.Z("value"))(o.map(l=>{const o=l.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[1])});return{label:null===o||void 0===o?void 0:o.value,value:null===o||void 0===o?void 0:o.value,component:l,selected:i}}).filter(l=>l.component.component_fields.filter(l=>{var o;return l.value===i&&l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[0])}).length>0))})):(_l("50px"),P(null!==(a=o.find(e=>e.value===i)[null===e||void 0===e||null===(r=e.options)||void 0===r?void 0:r.output])&&void 0!==a?a:null,l),Rl(o.find(e=>e.value===i).component.id))},fieldLabel:null===e||void 0===e||null===(qt=e.options)||void 0===qt?void 0:qt.filters[0],value:d?null===(Yt=d.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[0])}))||void 0===Yt?void 0:Yt.value:""}),t.createElement("div",{style:{display:null!==e&&void 0!==e&&e.visible?"":"none",marginBottom:"10px"}},(null===e||void 0===e||null===(Bt=e.options)||void 0===Bt||null===(Ht=Bt.filters)||void 0===Ht?void 0:Ht.length)>1&&vl&&t.createElement(O.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-dark)"},className:se.multiselectComponent,visible:null===e||void 0===e?void 0:e.visible,mandatory:2==(null===e||void 0===e||null===(jt=e.options)||void 0===jt||null===(Vt=jt.filters)||void 0===Vt?void 0:Vt.length)&&(null===e||void 0===e?void 0:e.mandatory),items:null!==(Gt=al[null===e||void 0===e||null===(Jt=e.options)||void 0===Jt?void 0:Jt.filters[0]])&&void 0!==Gt?Gt:[],loading:je,error:2==(null===e||void 0===e||null===(Qt=e.options)||void 0===Qt||null===(Kt=Qt.filters)||void 0===Kt?void 0:Kt.length)?null===e||void 0===e?void 0:e.errors:"",onClicked:e=>_l(e?"180px":"50px"),onChange:t=>{var n,d,a,r,v,s,u,c,p;(null===e||void 0===e||null===(n=e.options)||void 0===n||null===(d=n.filters)||void 0===d?void 0:d.length)>2?(cl(!1),setTimeout(()=>cl(!0),10),rl((0,i.Z)((0,i.Z)({},al),{},{[null===e||void 0===e||null===(a=e.options)||void 0===a?void 0:a.filters[1]]:null!==(r=j.Z(V.Z("value"))(o.map(l=>{const o=l.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[2])});return{label:null===o||void 0===o?void 0:o.value,value:null===o||void 0===o?void 0:o.value,component:l}}).filter(l=>l.component.component_fields.filter(l=>{var o;return l.value===t&&l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[1])}).length>0).filter(l=>l.component.component_fields.filter(l=>{var o,i;return l.value===al[null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[0]][0].component.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[0])}).value&&l.field_name===(null===e||void 0===e||null===(i=e.options)||void 0===i?void 0:i.filters[0])}).length>0)))&&void 0!==r?r:[]}))):(Dl(),_l("50px"),de.start=!0,P(null!==(v=null===(s=al[null===e||void 0===e||null===(c=e.options)||void 0===c?void 0:c.filters[0]])||void 0===s||null===(u=s.find(e=>e.value===t))||void 0===u?void 0:u.component.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.output)}).value)&&void 0!==v?v:null,l),Rl(al[null===e||void 0===e||null===(p=e.options)||void 0===p?void 0:p.filters[0]].find(e=>e.value===t).component.id))},fieldLabel:null===e||void 0===e||null===(Xt=e.options)||void 0===Xt?void 0:Xt.filters[1],value:d?null===($t=d.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[1])}))||void 0===$t?void 0:$t.value:""})),t.createElement("div",{style:{display:null!==e&&void 0!==e&&e.visible?"":"none",marginBottom:"10px"}},(null===e||void 0===e||null===(en=e.options)||void 0===en||null===(ln=en.filters)||void 0===ln?void 0:ln.length)>2&&ul&&t.createElement(O.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-dark)"},className:se.multiselectComponent,visible:null===e||void 0===e?void 0:e.visible,mandatory:3==(null===e||void 0===e||null===(on=e.options)||void 0===on||null===(tn=on.filters)||void 0===tn?void 0:tn.length)&&(null===e||void 0===e?void 0:e.mandatory),items:null!==(nn=al[null===e||void 0===e||null===(dn=e.options)||void 0===dn?void 0:dn.filters[1]])&&void 0!==nn?nn:[],loading:je,error:3==(null===e||void 0===e||null===(an=e.options)||void 0===an||null===(rn=an.filters)||void 0===rn?void 0:rn.length)?null===e||void 0===e?void 0:e.errors:"",onClicked:e=>_l(e?"180px":"50px"),onChange:o=>{var i,t,n,d,a;_l("50px"),de.start=!0,P(null!==(i=null===(t=al[null===e||void 0===e||null===(d=e.options)||void 0===d?void 0:d.filters[1]])||void 0===t||null===(n=t.find(e=>e.value===o))||void 0===n?void 0:n.component.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.output)}).value)&&void 0!==i?i:null,l),Rl(al[null===e||void 0===e||null===(a=e.options)||void 0===a?void 0:a.filters[1]].find(e=>e.value===o).component.id)},fieldLabel:null===e||void 0===e||null===(vn=e.options)||void 0===vn?void 0:vn.filters[2],value:d?null===(sn=d.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[2])}))||void 0===sn?void 0:sn.value:""})))}if("Global"===(null===e||void 0===e?void 0:e.data_type_name)||"Connector"===(null===e||void 0===e?void 0:e.data_type_name)||"Emails"===(null===e||void 0===e?void 0:e.data_type_name)||"Template"===(null===e||void 0===e?void 0:e.data_type_name));else if("Action Button"!==(null===e||void 0===e?void 0:e.data_type_name)){var xn,En,Cn,wn,Mn,Sn,kn,Zn,In,Nn,Dn,Tn,Pn,On,An,zn,Ln,Rn;if("GoogleAI Assistant"===(null===e||void 0===e?void 0:e.data_type_name))return t.createElement("div",{key:l,style:{display:e.visible?"":"none",color:"var(--app-color-gray-dark)",height:"inherit",width:"100%",flexDirection:"column",marginTop:"50px"}},t.createElement(me.Z,{enabled:Yo,width:null!==(xn=null===e||void 0===e||null===(En=e.field_options)||void 0===En?void 0:En.width)&&void 0!==xn?xn:"100%",editMode:Ce,showWidth:l=>{e.field_options=(0,i.Z)((0,i.Z)({},e.field_options),{},{width:"".concat(l,"px")})},key:l,fieldLabel:"".concat(null===e||void 0===e||null===(Cn=e.options)||void 0===Cn?void 0:Cn.description),fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors,notes:null===e||void 0===e||null===(wn=e.options)||void 0===wn?void 0:wn.notes},t.createElement("textarea",{className:se.fullLengthTextarea,type:e.data_type,onFocus:()=>{},disabled:e.options.fixed,autoComplete:"none",onChange:e=>{N(e.target.value,l)},placeholder:"Enter your question here",value:1==e.options.fixed?null===e||void 0===e||null===(Mn=e.options)||void 0===Mn?void 0:Mn.analyze:e.value})),t.createElement("div",{style:{display:"flex"}},t.createElement(f.zx,{light:!0,loading:je,title:"Ask",clicked:()=>{0==e.options.fixed&&(e.options.analyze=e.value),zl(e.options)}},t.createElement("img",{src:"https://ai.google/static/images/share.png",height:"90px",width:"140px"})),(null===hl||void 0===hl?void 0:hl.candidates.length)>0&&t.createElement(f.zx,{title:"Clear",clicked:()=>{bl({candidates:[]}),N(void 0,l)}})));if("Chart"===e.data_type_name)return t.createElement(me.Z,{width:"100%",key:l,fieldLabel:null!==(Sn=null===e||void 0===e||null===(kn=e.options)||void 0===kn?void 0:kn.label)&&void 0!==Sn?Sn:e.field_name,fieldIcon:e.icon,editMode:Ce,notes:null===e||void 0===e||null===(Zn=e.options)||void 0===Zn?void 0:Zn.notes,isProcess:!0,visible:e.visible,error:e.errors,customIconBgColor:"white"},t.createElement("div",{className:"grid grid-cols-12 gap-4 md:gap-6 2xl:gap-7.5",style:{width:"inherit"}},"Line"===(null===e||void 0===e||null===(In=e.options)||void 0===In?void 0:In.orientation)&&t.createElement(Ae.Z,{series:[{name:"Product One",data:[23,11,22,27,13,22,37,21,44,22,30,45]},{name:"Product Two",data:[30,25,36,30,45,35,64,52,59,36,39,51]}]}),"Column"===(null===e||void 0===e||null===(Nn=e.options)||void 0===Nn?void 0:Nn.orientation)&&t.createElement(ze.Z,{series:[{name:"Sales",data:[44,55,41,67,22,43,65]},{name:"Revenue",data:[13,23,20,8,13,27,15]}]}),"Donut"===(null===e||void 0===e||null===(Dn=e.options)||void 0===Dn?void 0:Dn.orientation)&&t.createElement(Le.Z,{series:[65,34,12,56],labels:["Desktop","Tablet","Mobile","AI"]})));if("Info"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===($e=e.options)||void 0===$e||null===(ll=$e.list)||void 0===ll?void 0:ll.length)>0&&(null===e||void 0===e||null===(Nl=e.options)||void 0===Nl||null===(Wl=Nl.component_id)||void 0===Wl?void 0:Wl.length)>0){var Un,Fn,Wn,qn,Yn,Bn,Hn,jn,Vn,Gn;const o=ve.find(l=>l.id===(null===e||void 0===e?void 0:e.value)),i={};var Jn;if(o)null===e||void 0===e||null===(Jn=e.options)||void 0===Jn||Jn.list.map((e,l)=>{var n,d,a,r;if(0==o.component_fields.length)return t.createElement("div",{key:l});const v=o.component_fields.find(l=>l.field_name===e);var s;"Link"===(null===v||void 0===v?void 0:v.data_type_name)&&(null!==(n="".concat(null===v||void 0===v?void 0:v.value))&&void 0!==n&&n.includes("jpg")||null!==v&&void 0!==v&&null!==(d=v.options)&&void 0!==d&&d.image||null!==(a="".concat(null===v||void 0===v?void 0:v.value))&&void 0!==a&&a.includes("jpeg")||null!==(r="".concat(null===v||void 0===v?void 0:v.value))&&void 0!==r&&r.includes("png"))?i[e]=t.createElement("div",{key:l,onClick:()=>window.open(null===v||void 0===v?void 0:v.value,"_blank")},t.createElement("img",{alt:"lg",src:null===v||void 0===v?void 0:v.value,style:{width:"30px",height:"30px",cursor:"pointer"}})):i[e]=null!==(s=null===v||void 0===v?void 0:v.value)&&void 0!==s?s:""});return o&&("rows"===(null===e||void 0===e||null===(Un=e.options)||void 0===Un?void 0:Un.orientation)?t.createElement(me.Z,{style:{border:"0"},width:"100%",key:l,fieldLabel:null!==(Fn=null===e||void 0===e||null===(Wn=e.options)||void 0===Wn?void 0:Wn.label)&&void 0!==Fn?Fn:e.field_name,fieldIcon:e.icon,isProcess:!0,visible:!0,mandatory:e.mandatory,error:e.errors,notes:null===e||void 0===e||null===(qn=e.options)||void 0===qn?void 0:qn.notes},t.createElement(A.Z,{className:se.mobileTable_ii,style:{width:"100%"},tableHostSimple:se.tableHostSimple,columns:null!==(Yn=null===e||void 0===e||null===(Bn=e.options)||void 0===Bn?void 0:Bn.list)&&void 0!==Yn?Yn:[],list:[i]})):t.createElement("div",{style:{width:"inherit"},key:l},o&&t.createElement(f.zx,{light:!0,title:"Show Information",style:{width:"100%",backgroundColor:"var(--app-color-blue)",color:"white"},clicked:()=>Dl()}),Dl&&t.createElement(el,{title:"Information:",nav:Il,openNav:Dl},t.createElement("div",{style:{color:"var(--app-color-gray-dark)",height:"inherit",width:"100%",display:null!==e&&void 0!==e&&e.visible?"":"none"}},Object.keys(i).length>0&&(null===e||void 0===e||null===(Hn=e.options)||void 0===Hn?void 0:Hn.list.map((l,i)=>{var n,d,a,r,v,s,u;if(0==o.component_fields.length)return t.createElement("div",{key:i});const c=o.component_fields.find(e=>e.field_name===l);return i<3?t.createElement("div",{key:i},t.createElement("div",{className:se.actionsContainer,style:{fontSize:(l.length>10||c.value.length,"12px")}},t.createElement("div",null,l,":"),t.createElement("div",{style:{fontWeight:"bold"}},c?c.value:"")),t.createElement("hr",{style:{borderTop:"0.5px solid #D2D2D2"}})):t.createElement("div",{style:{border:"0"},key:i,fieldLabel:l,fieldIcon:e.icon,isProcess:!0,visible:!0,mandatory:e.mandatory,error:e.errors,notes:null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.notes},"Link"===(null===c||void 0===c?void 0:c.data_type_name)&&(null!==(d="".concat(null===c||void 0===c?void 0:c.value))&&void 0!==d&&d.includes("jpg")||null!==(a="".concat(null===c||void 0===c?void 0:c.value))&&void 0!==a&&a.includes("jpeg")||null!==c&&void 0!==c&&null!==(r=c.options)&&void 0!==r&&r.image||null!==(v="".concat(null===c||void 0===c?void 0:c.value))&&void 0!==v&&v.includes("png"))?t.createElement("div",{onClick:()=>window.open(null===c||void 0===c?void 0:c.value,"_blank")},t.createElement("img",{alt:"lg",src:null===c||void 0===c?void 0:c.value,style:{width:"50%",height:"100%",cursor:"pointer"}})):null!==e&&void 0!==e&&null!==(s=e.value)&&void 0!==s&&s.includes("pdf")?t.createElement("div",{style:{width:"inherit"},onClick:()=>window.open(null===c||void 0===c?void 0:c.value,"_blank")},t.createElement("embed",{src:"".concat(null===c||void 0===c?void 0:c.value,"#toolbar=0&navpanes=0&scrollbar=0&zoom=100%"),width:"100%",height:"1000px"})):(null===c||void 0===c||null===(u=c.value)||void 0===u?void 0:u.length)<50||void 0===c?t.createElement("input",{onBlur:l=>Qe(e.data_type_name,l.target.value,T,i,z),type:e.data_type,value:c?c.value:"",autoComplete:"none",className:se.fieldTypeInput,name:e.field_name,disabled:!0,style:{border:"1px dashed rgba(234, 231, 231, 0.91)",height:"40px",fontSize:"18px",backgroundColor:"rgba(234, 231, 231, 0.91)"}}):t.createElement("textarea",{className:se.fieldTypeTextarea,type:e.data_type,value:c?c.value:"",onFocus:()=>{},autoComplete:"none",onChange:e=>{},disabled:!0,style:{backgroundColor:"rgba(234, 231, 231, 0.91)",height:"auto",fontSize:"18px"}}))})),!0===(null===S||void 0===S||null===(jn=S.options)||void 0===jn?void 0:jn.allowMultipleInputs)&&(null===(Vn=ce.processModule.module.options)||void 0===Vn||null===(Gn=Vn.computes)||void 0===Gn?void 0:Gn.map((l,i)=>{var n,d;const a=null===ve||void 0===ve||null===(n=ve.filter(e=>e.module_id===l.module_id))||void 0===n?void 0:n.find(l=>l.component_fields.filter(l=>{var i,t;return l.value===(null!==(i=null===(t=o.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.key)}))||void 0===t?void 0:t.value)&&void 0!==i?i:"#$")}).length>0),r=null===a||void 0===a?void 0:a.component_fields.find(e=>e.procedure_step_blueprint_field_id===l.field_id);return t.createElement(me.Z,{style:{display:r?"":"none",border:"0"},key:i,fieldLabel:null===r||void 0===r?void 0:r.field_name,fieldIcon:e.icon,isProcess:!0,visible:!0,mandatory:e.mandatory,error:e.errors,notes:null===e||void 0===e||null===(d=e.options)||void 0===d?void 0:d.notes},t.createElement("input",{onBlur:l=>Qe(e.data_type_name,l.target.value,T,i,z),type:e.data_type,value:null===r||void 0===r?void 0:r.value,autoComplete:"none",className:se.fieldTypeInput,name:e.field_name,disabled:!0,style:{border:"1px dashed rgba(234, 231, 231, 0.91)",height:"40px",fontSize:"18px",backgroundColor:"rgba(234, 231, 231, 0.91)"}}))})),t.createElement("br",null),t.createElement(f.zx,{clicked:()=>Dl(),title:"Close",style:{width:"100%",backgroundColor:"orange"}})))))}if("Details"===(null===e||void 0===e?void 0:e.data_type_name)&&null!==e&&void 0!==e&&null!==(ql=e.options)&&void 0!==ql&&ql.component){var Qn,Kn,Xn,$n,ed,ld,od;const l=ve.find(l=>{var o;return l.id===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.component)}),o=null===(Qn=l.component_fields)||void 0===Qn?void 0:Qn.find(e=>{var l,o,i;return(null===(l=e.value)||void 0===l?void 0:l.includes("jpg"))||(null===(o=e.value)||void 0===o?void 0:o.includes("jpeg"))||(null===(i=e.value)||void 0===i?void 0:i.includes("png"))});return t.createElement("div",{style:{width:"100%"}},l?t.createElement(Te.Z,{photo:null===o||void 0===o?void 0:o.value,noPhoto:!o,height:"auto",width:"100%",firstName:(null===e||void 0===e||null===(Kn=e.options)||void 0===Kn||null===(Xn=Kn.fields)||void 0===Xn?void 0:Xn.length)>0?null===l||void 0===l||null===($n=l.component_fields)||void 0===$n||null===(ed=$n.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.fields[0])&&(null===l||void 0===l?void 0:l.value)}))||void 0===ed?void 0:ed.value:""},t.createElement("div",{className:se.simpleNames,style:{pointerEvents:"none",padding:"20px 10px 0 10px",color:"gray"}},t.createElement(D.default,{rowStyleSelected:{border:"2px solid var(--app-color-gray-light)"},card:!0,isReport:!1,"app-variant-is-mobile":"true",columns:null===e||void 0===e||null===(ld=e.options)||void 0===ld?void 0:ld.fields,list:[(null!==(od=null===l||void 0===l?void 0:l.component_fields)&&void 0!==od?od:[]).reduce((e,l)=>(0,i.Z)((0,i.Z)({},e),{},{[l.field_name]:l.value}),{})]}))):"No information found")}if("Details"===(null===e||void 0===e?void 0:e.data_type_name)){var id,td,nd,dd,ad,rd,vd;const l=null===(id=z.components.find(l=>l.selected_fields.find(l=>{var o;return l.field_name===(null===(o=e.options)||void 0===o?void 0:o.key)&&l.value})))||void 0===id||null===(td=id.selected_fields)||void 0===td?void 0:td.find(l=>{var o;return l.field_name===(null===(o=e.options)||void 0===o?void 0:o.key)});let o=ve.find(o=>{var i;return o.module_id===(null===(i=e.options)||void 0===i?void 0:i.module_id)&&o.component_fields.find(o=>{var i;return o.value===(null===l||void 0===l?void 0:l.value)&&o.field_name===(null===(i=e.options)||void 0===i?void 0:i.key)})});if(!o){var sd,ud;const l=null===(sd=z.components.find(l=>l.selected_fields.find(l=>{var o;return l.field_name===(null===(o=e.options)||void 0===o?void 0:o.key)&&l.value})))||void 0===sd||null===(ud=sd.selected_fields)||void 0===ud?void 0:ud.find(l=>{var o;return l.field_name===(null===(o=e.options)||void 0===o?void 0:o.key)});l&&(o=ve.find(o=>{var i;return o.module_id===(null===(i=e.options)||void 0===i?void 0:i.module_id)&&o.component_fields.find(o=>{var i;return o.value===(null===l||void 0===l?void 0:l.value)&&o.field_name===(null===(i=e.options)||void 0===i?void 0:i.key)})}))}return t.createElement("div",{style:{width:"100%"}},o?t.createElement(A.Z,{modern:!(!y.tq&&null!==e&&void 0!==e&&null!==(nd=e.options)&&void 0!==nd&&nd.table),tableHostSimple:se.itemsContainer_ii,style:{width:"100%"},layeredColumns:null===e||void 0===e||null===(dd=e.options)||void 0===dd||null===(ad=dd.fields)||void 0===ad?void 0:ad.map(e=>({label:e})),list:[(null!==(rd=null===(vd=o)||void 0===vd?void 0:vd.component_fields)&&void 0!==rd?rd:[]).reduce((e,l)=>(0,i.Z)((0,i.Z)({},e),{},{[l.field_name]:l.value}),{})]}):"No information found")}if("Module"===(null===e||void 0===e?void 0:e.data_type_name)&&null!==(Yl=e.options)&&void 0!==Yl&&Yl.module_id){var cd,pd,md,fd,_d,yd,gd;const l=Ee.find(l=>l.id===e.options.module_id);return t.createElement(t.Fragment,null,t.createElement("div",{style:{width:"inherit"}},t.createElement("div",{className:se.iconsContainer,style:{display:"flex",alignContent:"space-between",justifyContent:"space-between",width:"100%"}},!((null===k||void 0===k?void 0:k.status)===(null===de||void 0===de||null===(cd=de.misc_info)||void 0===cd?void 0:cd.lock)||(null!==(pd=null===(md=ce.processModule)||void 0===md||null===(fd=md.module)||void 0===fd||null===(_d=fd.options)||void 0===_d?void 0:_d.lock)&&void 0!==pd?pd:"").split(",").includes(null===k||void 0===k?void 0:k.status))&&t.createElement(f.zx,{light:!0,title:null===e||void 0===e?void 0:e.field_name,message:"Preparing ".concat(l.name," entry..."),loading:je,clicked:()=>{Ve(!0),(0,r.zJ)(l.procedure.id).pipe((0,p.P)()).subscribe({next:l=>{var o;if(null!==e&&void 0!==e&&null!==(o=e.options)&&void 0!==o&&o.cmp){var t,n,d;const o=null===l||void 0===l||null===(t=l.steps)||void 0===t?void 0:t.find(e=>e.component_blueprints.filter(e=>{var l,o;return(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.allowMultipleInputs)&&(null===(o=e.selected_fields)||void 0===o?void 0:o.find(e=>"Transaction List"===e.data_type_name))}).length>0),c=null===o||void 0===o||null===(n=o.component_blueprints)||void 0===n?void 0:n.find(e=>{var l;return(null===(l=e.selected_fields)||void 0===l?void 0:l.filter(e=>"Transaction List"===e.data_type_name&&!0===e.visible).length)>0}),m={};var r;if(null===c||void 0===c||null===(d=c.selected_fields)||void 0===d||d.filter(e=>{var l;return null===(l=e.options)||void 0===l?void 0:l.mapToItem}).forEach(e=>{const l=$.Z(X.Z("field_name",e.field_name),q.Z(W.Z("selected_fields",z.components.concat(z.newStepComponents))));var o;l&&(null===l||void 0===l?void 0:l.data_type_name)===e.data_type_name&&(m[null===(o=e.options)||void 0===o?void 0:o.mapToItem]=l.value)}),Object.values(m).length>0)(0,v.r6)(null===e||void 0===e||null===(r=e.options)||void 0===r?void 0:r.cmp).pipe((0,p.P)()).subscribe({next:o=>{var t,n;(0,v.np)((0,i.Z)((0,i.Z)({},m),{},{index:null===(t=o.component_items)||void 0===t?void 0:t.length,id:(0,s.mR)()}),null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.cmp).pipe((0,p.P)()).subscribe({next:t=>{Ve(!1),u.h.dispatch((0,a.q4)((0,i.Z)((0,i.Z)({},l),{},{completeSteps:l.steps,steps:l.steps,stepIndex:0,module_id:e.options.module_id,module:Ee.find(l=>l.id===e.options.module_id),selectedComponent:o}))),L({action:_._U.setModuleItems,value:[]}),L({action:_._U.setModuleNewStepComponents,value:[]}),L({action:_._U.setComponents,value:[]})},error:()=>{},complete:()=>{}})},error:()=>{}});else Ve(!1)}else Ve(!1),z.components=[],e.options.fields.filter(e=>{var o,i;const t=null===(o=$.Z(X.Z("field_name",e),q.Z(W.Z("selected_fields",z.components))))||void 0===o?void 0:o.value;null===(i=l.steps)||void 0===i||i.forEach(l=>{var o;null===l||void 0===l||null===(o=l.component_blueprints)||void 0===o||o.filter(e=>{var l;return!(null!==(l=e.options)&&void 0!==l&&l.asModuleList)}).forEach(l=>{const o=l.selected_fields.find(l=>l.field_name===e);o&&(o.value=t)}),l.component_blueprints.find(l=>l.selected_fields.filter(l=>l.field_name===e).length>0)&&L({action:_._U.addModuleComponents,value:l.component_blueprints.filter(l=>l.selected_fields.filter(l=>l.field_name===e).length>0)})})}),u.h.dispatch((0,a.q4)((0,i.Z)((0,i.Z)({},l),{},{completeSteps:l.steps,steps:l.steps,stepIndex:1,module_id:e.options.module_id,isUpdating:!0,module:Ee.find(l=>l.id===e.options.module_id)}))),L({action:_._U.setCurrentStep,value:l.steps[1]}),L({action:_._U.setModuleItems,value:[]}),L({action:_._U.setModuleNewStepComponents,value:[]})}})}}),(null===e||void 0===e||null===(yd=e.options)||void 0===yd?void 0:yd.showL)&&t.createElement(f.zx,{light:!0,clicked:()=>{Ve(!0),(0,m.vC)(l,s.Qc,s.R6,1).pipe((0,c.q)(1)).subscribe({next:e=>{var o;l.lastUpdate=(0,h.now)(),l.count=null!==(o=null===e||void 0===e?void 0:e.total)&&void 0!==o?o:0,Ve(!1)},complete:()=>{},error:()=>Ve(!1)})},icon:t.createElement("img",{src:Z.Fd}),loading:je,message:"Fetching ".concat(l.name,"...")})),(null===e||void 0===e||null===(gd=e.options)||void 0===gd?void 0:gd.showL)&&t.createElement(D.default,{modern:!!y.tq,className:se.itemsContainer,columns:["Transaction","Date Created","Status"],list:G.Z([J.Z(Q.Z("created_date"))])(ve.filter(e=>e.module_id===l.id)).filter(l=>{var o,i,t;const n=null===(o=$.Z(X.Z("field_name",null!==(i=null===(t=e.options)||void 0===t?void 0:t.key)&&void 0!==i?i:""),q.Z(W.Z("selected_fields",z.components))))||void 0===o?void 0:o.value;return l.component_fields.find(l=>{var o;return l.value===n&&l.field_name===(null===(o=e.options)||void 0===o?void 0:o.key)})}).map(e=>({Transaction:e.title,"Date Created":"".concat(b()(new Date(e.created_date)).format("DD MMM YYYY h:mm a")),Status:e.status})),onCellClick:o=>{var i;if(null!==e&&void 0!==e&&null!==(i=e.options)&&void 0!==i&&i.viewable){const e=ve.find(e=>e.id===o.data.id),i=qe.find(e=>e.id===l.procedure.id&&e.steps.length>0);i?(0,v.DA)(i,e,void 0,L,Ee,"New"===e.status||"None"===e.status||"Reopen"===e.status||ke.id===i.user_id?1:0):(0,r.zJ)(l.procedure.id).pipe((0,p.P)()).subscribe({next:l=>{(0,v.DA)(l,ve.find(e=>e.id===o.data.id),void 0,L,Ee,"New"===e.status||"None"===e.status||"Reopen"===e.status||ke.id===i.user_id?1:0)}})}}})))}if("Lookup"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(Bl=e.options)||void 0===Bl||null===(Hl=Bl.list)||void 0===Hl?void 0:Hl.length)>0&&(null===e||void 0===e||null===(jl=e.options)||void 0===jl||null===(Vl=jl.source_id)||void 0===Vl?void 0:Vl.length)>0&&null!==e&&void 0!==e&&null!==(Gl=e.options)&&void 0!==Gl&&null!==(Jl=Gl.target_id)&&void 0!==Jl&&Jl.length){var hd,bd,xd,Ed,Cd,wd,Md,Sd,kd,Zd,Id,Nd,Dd,Td,Pd,Od,Ad,zd,Ld,Rd;const o=((e,l)=>{var o,i;let t=null===(o=ce.processModule.module)||void 0===o||null===(i=o.options)||void 0===i?void 0:i.global;var n,d,a,r,v;return t||(t=null===(n=z.components.find(l=>l.selected_fields.filter(l=>1==l.visible&&l.field_name===e).length>0))||void 0===n||null===(d=n.selected_fields.find(l=>l.field_name===e))||void 0===d?void 0:d.value),t||(t=null===(a=F.Z(W.Z("component_blueprints"),q.Z)(ce.processModule.completeSteps).find(l=>l.selected_fields.filter(l=>l.field_name===e&&"Value"===l.data_type_name).length>0))||void 0===a||null===(r=a.selected_fields.find(l=>l.field_name===e))||void 0===r||null===(v=r.options)||void 0===v?void 0:v.value),t?l.filter(l=>l[e]===t):l})(null===e||void 0===e||null===(hd=e.options)||void 0===hd?void 0:hd.global,function(e,l,o,t,n){let d=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:ve;const r=a.filter(e=>{var l;return(null===(l=e.component_fields)||void 0===l?void 0:l.filter(e=>e.component_blueprint_id===o).length)>0});let v=[];return a.filter(l=>l.component_fields.filter(l=>l.component_blueprint_id===e).length>0).map(e=>{const o={};t.map(l=>{var i;o[l]=null===(i=e.component_fields.find(e=>e.field_name===l))||void 0===i?void 0:i.value});const a=e.component_fields.find(e=>e.field_name===l);void 0!==a&&r.filter(e=>e.component_fields.filter(e=>e.value===a.value&&e.field_name===l).length>0).map(l=>{var t,a,r;const s=null!==(t=null===(a=l.component_fields.find(e=>-1!==d.indexOf(e.field_name)))||void 0===a?void 0:a.value)&&void 0!==t?t:"";let u={};d.length>0&&d.map(e=>{const o=l.component_fields.find(l=>l.field_name===e);o&&(u[e]=o.value)});let c={};n.length>0&&n.map(o=>{const i=l.component_fields.find(e=>e.field_name===o);if(i)c[o]=i.value;else{const l=e.component_fields.find(e=>e.field_name===o);l&&(c[o]=l.value)}}),v=[...v,(0,i.Z)((0,i.Z)((0,i.Z)({label:s,value:l.id,field:l,grouping:(null===(r=Object.values(o))||void 0===r?void 0:r.length)>0?Object.values(o)[0]:"Fields"},o),c),u)]})}),v}(null===e||void 0===e||null===(bd=e.options)||void 0===bd?void 0:bd.source_id,null===e||void 0===e||null===(xd=e.options)||void 0===xd?void 0:xd.common_field,null===e||void 0===e||null===(Ed=e.options)||void 0===Ed?void 0:Ed.target_id,null===e||void 0===e||null===(Cd=e.options)||void 0===Cd?void 0:Cd.sourceLabel,null===e||void 0===e||null===(wd=e.options)||void 0===wd?void 0:wd.list,null!==(Md=null===e||void 0===e||null===(Sd=e.options)||void 0===Sd?void 0:Sd.rlist)&&void 0!==Md?Md:[]));return t.createElement(me.Z,{enabled:Yo,width:"100%",style:{border:"Tiles"===(null===e||void 0===e||null===(kd=e.options)||void 0===kd?void 0:kd.selection)?"0":"1px dashed gray"},titleProps:{fontSize:"14px",color:"var(--app-color-gray-dark)",fontWeight:"normal",paddingLeft:"5px"},editMode:Ce,showWidth:l=>{e.field_options=(0,i.Z)((0,i.Z)({},e.field_options),{},{width:"".concat(l,"px")})},key:l,fieldLabel:null!==(Zd=null===e||void 0===e||null===(Id=e.options)||void 0===Id?void 0:Id.label)&&void 0!==Zd?Zd:e.field_name,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors,notes:null===e||void 0===e||null===(Nd=e.options)||void 0===Nd?void 0:Nd.notes},t.createElement("div",{id:e.field_name,style:{width:"100%"}},"Dropdown"===(null===e||void 0===e||null===(Dd=e.options)||void 0===Dd?void 0:Dd.selection)?t.createElement(R.yV,{items:o,groupedBy:"grouping",groupname:"grouping",triggerType:"chevron",title:tl,className:se.dropdownClassContainer,inputClassName:se.peoplePositionsSelectInput,molclassname:se.peoplePositionsSelectMenuOverlay,moliclassname:se.peoplePositionsSelectMenuOverlayItem,notags:"true",onChange:o=>{var i;o.length>0&&(null===e||void 0===e||null===(i=e.options)||void 0===i||i.list.map(l=>{const i=Ll({field_name:l});if(-1!=i){const t=ve.find(e=>e.id===o[0].value),n=t.component_fields.find(e=>e.field_name===l);if(void 0==n){const o=t.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.common_field)}),n=ve.find(l=>l.component_fields.filter(l=>{var i;return l.value===o.value&&l.component_blueprint_id===(null===e||void 0===e||null===(i=e.options)||void 0===i?void 0:i.source_id)}).length>0);if(void 0!=n){const e=n.component_fields.find(e=>e.field_name===l);void 0!=e?(S.selected_fields[i].value=e.value,S.selected_fields[i].disabled=!0):S.selected_fields[i].value=""}else S.selected_fields[i].value=""}else S.selected_fields[i].value=n.value,S.selected_fields[i].disabled=!0}}),P("".concat(o[0].label,",").concat(o[0].value),l),dl("".concat(o[0].grouping)))}}):"Tiles"===(null===e||void 0===e||null===(Td=e.options)||void 0===Td?void 0:Td.selection)?t.createElement(R.qq,{items:o,columns:null===e||void 0===e||null===(Pd=e.options)||void 0===Pd?void 0:Pd.rlist,columnsG:null===e||void 0===e||null===(Od=e.options)||void 0===Od?void 0:Od.sourceLabel,initialSelected:null===e||void 0===e?void 0:e.value,selectedItems:null!==e&&void 0!==e&&null!==(Ad=e.options)&&void 0!==Ad&&Ad.showAll?o:al,showAll:1==(null===e||void 0===e||null===(zd=e.options)||void 0===zd?void 0:zd.showAll),groupedBy:"grouping",groupname:"grouping",className:se.peoplePositionsSelect,onGroupChange:e=>{rl(o.filter(l=>l.grouping===e))},onChange:o=>{var i;o&&(null===e||void 0===e||null===(i=e.options)||void 0===i||i.list.map(l=>{const i=Ll({field_name:l});if(-1!=i){const t=ve.find(e=>e.id===o.value),n=t.component_fields.find(e=>e.field_name===l);if(void 0==n){const o=t.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.common_field)}),n=ve.find(l=>l.component_fields.filter(l=>{var i;return l.value===o.value&&l.component_blueprint_id===(null===e||void 0===e||null===(i=e.options)||void 0===i?void 0:i.source_id)}).length>0);if(void 0!=n){const e=n.component_fields.find(e=>e.field_name===l);void 0!=e?(S.selected_fields[i].value=e.value,S.selected_fields[i].disabled=!0):S.selected_fields[i].value=""}else S.selected_fields[i].value=""}else S.selected_fields[i].value=n.value,S.selected_fields[i].disabled=!0}}),Dl(),P("".concat(o.label,",").concat(o.value),l))}}):t.createElement("div",{className:se.openSelectWithSearchHost},t.createElement(Ne.Z,{title:null===e||void 0===e||null===(Ld=e.options)||void 0===Ld?void 0:Ld.sourceLabel,triggerType:"eyeglass",className:se.openSelectWithSearch,molclassname:se.menuOverlayList,moliclassname:se.menuOverlayListItem,inputClassName:se.menuOverlayListItemInput,inputContainerClassName:se.menuOverlayListItemInputContainerClassName,items:j.Z(V.Z("grouping"))(o).map(e=>({label:e.grouping,value:e.grouping})),onChange:l=>{document.getElementById(e.field_name).style.height="80px",rl(o.filter(e=>e.grouping===l.value))}}),t.createElement(Ne.Z,{title:null===e||void 0===e||null===(Rd=e.options)||void 0===Rd?void 0:Rd.referenceLabel,triggerType:"eyeglass",className:se.openSelectWithSearch,molclassname:se.menuOverlayList,moliclassname:se.menuOverlayListItem,inputClassName:se.menuOverlayListItemInput,inputContainerClassName:se.menuOverlayListItemInputContainerClassName,items:al,onChange:o=>{var i;(document.getElementById(e.field_name).style.height="80px",o)&&(null===e||void 0===e||null===(i=e.options)||void 0===i||i.list.map(l=>{const i=Ll({field_name:l});if(-1!=i){const t=ve.find(e=>e.id===o.value),n=t.component_fields.find(e=>e.field_name===l);if(void 0==n){const o=t.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.common_field)}),n=ve.find(l=>l.component_fields.filter(l=>{var i;return l.value===o.value&&l.component_blueprint_id===(null===e||void 0===e||null===(i=e.options)||void 0===i?void 0:i.source_id)}).length>0);if(void 0!=n){const e=n.component_fields.find(e=>e.field_name===l);void 0!=e?(S.selected_fields[i].value=e.value,S.selected_fields[i].disabled=!0):S.selected_fields[i].value=""}else S.selected_fields[i].value=""}else S.selected_fields[i].value=n.value,S.selected_fields[i].disabled=!0}}),P("".concat(o.label,",").concat(o.value),l))}}))))}if(("Step List"===(null===e||void 0===e?void 0:e.data_type_name)||"Component List"===(null===e||void 0===e?void 0:e.data_type_name))&&(null===e||void 0===e||null===(Ql=e.options)||void 0===Ql||null===(Kl=Ql.list)||void 0===Kl?void 0:Kl.length)>0&&(null===e||void 0===e||null===(Xl=e.options)||void 0===Xl||null===($l=Xl.component_id)||void 0===$l?void 0:$l.length)>0)return t.createElement("div",{key:l,style:{width:"100%",display:1==e.visible?"":"none"}},t.createElement(D.default,{columns:null===e||void 0===e||null===(Tn=e.options)||void 0===Tn?void 0:Tn.list,list:(uu=null===e||void 0===e?void 0:e.options,z.components.filter(e=>e.id===uu.component_id).map(e=>null===uu||void 0===uu?void 0:uu.list.reduce((l,o)=>(0,i.Z)((0,i.Z)({},l),{},{[o]:e.selected_fields.find(e=>e.field_name===o).value,temp_id:e.temp_id}),{}))),onListItemClick:e=>{L({action:_._U.removeModuleComponents,value:e.temp_id})}}));if("Checkbox"===(null===e||void 0===e?void 0:e.data_type_name))return t.createElement(me.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-light)"},enabled:Yo,border:{border:"0",paddingTop:"40px"},notes:null===e||void 0===e||null===(Pn=e.options)||void 0===Pn?void 0:Pn.notes,editMode:Ce,width:"100%",showWidth:l=>{e.field_options=(0,i.Z)((0,i.Z)({},e.field_options),{},{width:"".concat(l,"px")})},key:l,visible:e.visible,mandatory:e.mandatory,error:e.errors,customIconBgColor:"white"},t.createElement(De.X,{defaultChecked:null!==(On=e.value)&&void 0!==On&&On,checkboxLabel:null===e||void 0===e||null===(An=e.options)||void 0===An?void 0:An.value,onChange:e=>{P(e.target.checked,l)}}));if("YesNo"===(null===e||void 0===e?void 0:e.data_type_name))return t.createElement(me.Z,{enabled:Yo,style:{border:"0.5px dashed gray",padding:"10px"},width:"100%",editMode:Ce,key:l,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors},t.createElement("div",{class:"checkbox-wrapper-21"},t.createElement("div",{style:{display:"flex",justifyContent:"space-between",margin:"20px 0px"}},t.createElement("input",{id:"check-23",type:"checkbox",checked:null!==(zn=null===e||void 0===e?void 0:e.value)&&void 0!==zn&&zn,onChange:e=>P(e.target.checked,l),style:{marginRight:"20px"}}),t.createElement("label",null,null!==(Ln=null===e||void 0===e||null===(Rn=e.options)||void 0===Rn?void 0:Rn.notes)&&void 0!==Ln?Ln:e.field_name))));if("Transaction List"===(null===e||void 0===e?void 0:e.data_type_name)&&null!==e&&void 0!==e&&null!==(eo=e.options)&&void 0!==eo&&eo.simple){var Ud,Fd,Wd,qd,Yd;const o=G.Z([ee.Z(Q.Z("index"))])(null!==(Ud=null!==e&&void 0!==e&&null!==(Fd=e.options)&&void 0!==Fd&&Fd.type?z.items.filter(l=>{var o;return l.type===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.type)}):z.items)&&void 0!==Ud?Ud:[]);return t.createElement(me.Z,{fieldLabel:null===e||void 0===e?void 0:e.field_name,enabled:Yo,width:"100%",editMode:Ce,showWidth:l=>{e.options=(0,i.Z)((0,i.Z)({},e.options),{},{width:"".concat(l,"px")})},style:{border:"0",padding:"0",marginTop:"50px"},key:l,visible:e.visible,notes:null===e||void 0===e||null===(Wd=e.options)||void 0===Wd?void 0:Wd.notes,error:(null===(qd=e.errors)||void 0===qd?void 0:qd.length)>0?"".concat(e.errors):""},t.createElement("div",{style:{width:"inherit"}},t.createElement(D.default,{modern:!1,className:se.itemsContainer,columns:null===S||void 0===S||null===(Yd=S.selected_fields)||void 0===Yd?void 0:Yd.filter(e=>{var l;return null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.mapToItem}).map(e=>e.field_name).concat(["Actions"]),list:null===o||void 0===o?void 0:o.map((e,l)=>{var n,d;e.index=l;let a={index:l,Actions:t.createElement("div",{style:{display:"flex",justifyContent:"space-evenly",minWidth:"80px"}},!(null!==e&&void 0!==e&&e.edit)&&t.createElement(C.G,{icon:E.IwR,onClick:()=>{e.edit=!0,L({action:_._U.setModuleItems,value:[...o.filter(l=>l.id!==e.id),e]})}}),(null===e||void 0===e?void 0:e.edit)&&t.createElement(C.G,{icon:E.EsX,onClick:()=>{e.edit=!1,L({action:_._U.setModuleItems,value:[...o.filter(l=>l.id!==e.id),e]})}}),(null===e||void 0===e?void 0:e.edit)&&t.createElement(C.G,{icon:E.$aW,onClick:()=>{L({action:_._U.setModuleItems,value:o.filter(l=>l.id!==e.id)})}}))};return(null!==(n=null===S||void 0===S||null===(d=S.selected_fields)||void 0===d?void 0:d.filter(e=>{var l;return null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.mapToItem}))&&void 0!==n?n:[]).forEach(o=>{var n,d,r;const v=(0,s.sO)(e[o.options.mapToItem])?JSON.parse(null!==(n=e[o.options.mapToItem])&&void 0!==n?n:"{}"):{};a[o.field_name]=t.createElement("div",{style:{padding:null!==e&&void 0!==e&&e.edit?"5px":""}},t.createElement(Fl,{item:e,index:l,enabled:!0,edit:null!==(d=null===e||void 0===e?void 0:e.edit)&&void 0!==d&&d,isItem:!0,field:(0,i.Z)((0,i.Z)({},o),{},{visible:!0,value:null!==(r=v[o.field_name])&&void 0!==r?r:""}),withLabel:!1,handleItem:(l,i)=>{v[o.field_name]=l,e[o.options.mapToItem]=JSON.stringify(v),L({action:_._U.setModuleItems,value:[...z.items.filter(l=>l.id!==e.id),e]})}}))}),a})})))}if("Transaction List"!==(null===e||void 0===e?void 0:e.data_type_name)||null===e||void 0===e||null===(lo=e.options)||void 0===lo||!lo.map||null!==e&&void 0!==e&&null!==(oo=e.options)&&void 0!==oo&&oo.simple){var Bd,Hd,jd,Vd,Gd,Jd,Qd,Kd,Xd,$d,ea,la,oa,ia,ta,na,da,aa,ra,va,sa,ua,ca,pa,ma,fa,_a,ya,ga,ha,ba,xa,Ea,Ca,wa,Ma,Sa,ka,Za,Ia,Na,Da,Ta,Pa,Oa,Aa,za,La,Ra,Ua,Fa,Wa,qa,Ya,Ba,Ha,ja,Va,Ga,Ja,Qa,Ka,Xa,$a,er,lr,or,ir,tr;if("Clock"===(null===e||void 0===e?void 0:e.data_type_name))return t.createElement(me.Z,{enabled:Yo,width:"100%",editMode:Ce,style:{},key:l,fieldLabel:null!==(Bd=null===e||void 0===e||null===(Hd=e.options)||void 0===Hd?void 0:Hd.label)&&void 0!==Bd?Bd:e.field_name,notes:null===e||void 0===e||null===(jd=e.options)||void 0===jd?void 0:jd.notes,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors},t.createElement("div",{className:se.centerDiv,style:{width:"100%",height:"auto",border:"1px dashed var(--app-color-gray-light)",padding:"50px",flexDirection:"column"}},t.createElement("p",{className:se.timer},"".concat(we.format("DD MMMM YYYY HH:mm:ss"))),t.createElement("div",{className:se.centerDiv,style:{display:"flex",flexDirection:"row"}},t.createElement("input",{readOnly:!0,autoComplete:"off",value:null!==e&&void 0!==e&&e.value?b()(new Date(null===e||void 0===e?void 0:e.value)).format("MMM DD hh:mm:ss"):"",className:se.currencyInput,style:{border:"1px solid black",maxWidth:"300px",marginRight:"10px"}}),t.createElement(f.zx,{light:!0,title:"Set",clicked:()=>{N((0,h.now)(),l)}}))));if("ID"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(io=e.options)||void 0===io||null===(to=io.id)||void 0===to?void 0:to.length)>0){var nr,dr,ar,rr;const o=void 0===e.value||null===e.value?"".concat(null===e||void 0===e?void 0:e.options.id).concat(null===(null===de||void 0===de?void 0:de.misc_info)?1:null!==(nr=null===de||void 0===de?void 0:de.misc_info[null===e||void 0===e?void 0:e.field_name])&&void 0!==nr?nr:1):e.value;return e.value=o,z.id=o,t.createElement(me.Z,{titleProps:{fontSize:"14px",color:"var(--app-color-gray-dark)",fontWeight:"normal",paddingLeft:"5px"},width:"100%",style:{marginTop:"0px",border:"0px solid var(--app-color-gray-lighter)",padding:"5px",marginBottom:"10px",backgroundColor:"var(--app-color-gray-lightest)"},editMode:Ce,showWidth:l=>{e.field_options=(0,i.Z)((0,i.Z)({},e.field_options),{},{width:"".concat(l,"px")})},key:l,fieldLabel:null!==(dr=null===e||void 0===e||null===(ar=e.options)||void 0===ar?void 0:ar.label)&&void 0!==dr?dr:e.field_name,fieldIcon:e.icon,notes:null===e||void 0===e||null===(rr=e.options)||void 0===rr?void 0:rr.notes,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors,customIconBgColor:"white"},t.createElement("input",{value:null===e||void 0===e?void 0:e.value,className:se.fieldTypeInput,style:{border:"0"},readOnly:!0}))}if("Notes"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(no=e.options)||void 0===no||null===(ao=no.value)||void 0===ao?void 0:ao.length)>0)return t.createElement(me.Z,{titleProps:{fontSize:"14px",color:"var(--app-color-gray-dark)",fontWeight:"normal",paddingLeft:"5px"},enabled:Yo,width:"100%",editMode:Ce,showWidth:l=>{e.field_options=(0,i.Z)((0,i.Z)({},e.field_options),{},{width:"".concat(l,"px")})},style:{border:"0"},key:l,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:!1,error:e.errors},null!==e&&void 0!==e&&null!==(Vd=e.options)&&void 0!==Vd&&Vd.rich?t.createElement(We(),{modules:{toolbar:!1},style:{fontFamily:"var(--app-text-main-font)"},readOnly:!0,defaultValue:null===e||void 0===e||null===(Gd=e.options)||void 0===Gd?void 0:Gd.value,theme:"snow"}):t.createElement("p",{key:l,className:se.labelInput,style:{display:e.visible?"":"none"}},"".concat(null===e||void 0===e||null===(Jd=e.options)||void 0===Jd?void 0:Jd.value)));if("List Filter"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(ro=e.options)||void 0===ro||null===(vo=ro.value)||void 0===vo?void 0:vo.length)>0)return t.createElement(t.Fragment,null);if("Ratings"===(null===e||void 0===e?void 0:e.data_type_name))return t.createElement(t.Fragment,null);if("Value"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(so=e.options)||void 0===so||null===(uo=so.module_id)||void 0===uo?void 0:uo.length)>0&&(null===e||void 0===e||null===(co=e.options)||void 0===co||null===(po=co.component_id)||void 0===po?void 0:po.length)>0)return t.createElement(me.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-light)"},width:"100%",style:{border:"0"},key:l,fieldLabel:null!==(Qd=null===e||void 0===e||null===(Kd=e.options)||void 0===Kd?void 0:Kd.label)&&void 0!==Qd?Qd:e.field_name,fieldIcon:e.icon,editMode:Ce,showWidth:l=>{e.field_options=(0,i.Z)((0,i.Z)({},e.field_options),{},{width:"".concat(l,"px")})},notes:null===e||void 0===e||null===(Xd=e.options)||void 0===Xd?void 0:Xd.notes,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors,customIconBgColor:"white"},t.createElement("input",{value:null===e||void 0===e||null===($d=e.options)||void 0===$d?void 0:$d.value,className:se.fieldTypeInput,name:e.field_name,disabled:!0}));if("URL"===e.data_type_name)return t.createElement(me.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-light)"},border:{border:"0"},width:"100%",editMode:Ce,showWidth:l=>{e.field_options=(0,i.Z)((0,i.Z)({},e.field_options),{},{width:"".concat(l,"px")})},key:l,notes:null===e||void 0===e||null===(ea=e.options)||void 0===ea?void 0:ea.notes,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors,customIconBgColor:"white"},null!==e&&void 0!==e&&null!==(la=e.options.value)&&void 0!==la&&la.includes("jpg")||null!==e&&void 0!==e&&null!==(oa=e.options.value)&&void 0!==oa&&oa.includes("jpeg")||null!==e&&void 0!==e&&null!==(ia=e.options)&&void 0!==ia&&ia.image||null!==e&&void 0!==e&&null!==(ta=e.options.value)&&void 0!==ta&&ta.includes("png")?t.createElement("div",{onClick:()=>window.open(null===e||void 0===e?void 0:e.options.value,"_blank")},t.createElement("img",{alt:"lg",src:null===e||void 0===e?void 0:e.options.value,style:{width:"100%",height:"100%",cursor:"pointer"}})):null!==e&&void 0!==e&&null!==(na=e.options.value)&&void 0!==na&&na.includes("pdf")?t.createElement("div",{style:{width:"inherit"},onClick:()=>window.open(null===e||void 0===e?void 0:e.options.value,"_blank")},t.createElement("embed",{src:"".concat(null===e||void 0===e?void 0:e.options.value,"#toolbar=0&navpanes=0&scrollbar=0&zoom=100%"),width:"100%",height:"1000px"})):t.createElement("div",{style:{width:"inherit"},onClick:()=>window.open(null===e||void 0===e?void 0:e.options.value,"_blank")},t.createElement("textarea",{disabled:!0,onChange:()=>{},autoComplete:"none",value:null===(null===e||void 0===e?void 0:e.options.value)?"":null===e||void 0===e?void 0:e.options.value,className:se.fieldTypeInput,style:{height:"auto",width:"inherit",cursor:"pointer"},name:e.field_name})));if("Formula"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(mo=e.options)||void 0===mo||null===(fo=mo.operator)||void 0===fo?void 0:fo.length)>0){var vr,sr,ur,cr,pr,mr,fr;const o=z.newStepComponents.filter(e=>null===e.options||(void 0===e.allowMultipleInputs||!1===e.options.allowMultipleInputs)),n=(0,s.LV)(null===e||void 0===e?void 0:e.options,S.selected_fields.filter(l=>e.options.list.includes(l.field_name)),[...z.components.filter(e=>o.every(l=>l.id!==e.id)),...B.Z(e=>e.selected_fields.filter(e=>""===e.value).length>0,o)],null!==(vr=null===z||void 0===z?void 0:z.items)&&void 0!==vr?vr:[],null!==(sr=null===z||void 0===z?void 0:z.newStepComponents)&&void 0!==sr?sr:[]);return void 0!==n&&0!==n&&(e.value=n),"bar"===(null===e||void 0===e||null===(ur=e.options)||void 0===ur?void 0:ur.display)?t.createElement("div",{style:{margin:"20px",display:"flex",height:"30px",width:"100%"}},t.createElement("label",{className:se.fieldTypeInput,style:{width:"20%"}},null===e||void 0===e?void 0:e.field_name),t.createElement("div",{style:{height:"30px",width:"100%",backgroundColor:null===e||void 0===e||null===(cr=e.options)||void 0===cr?void 0:cr.maxC,display:"flex",flexDirection:"column"}},t.createElement("input",{value:n||0,className:se.fieldTypeInput,name:e.field_name,disabled:!0,style:{color:"transparent",height:"30px",width:"".concat(+n/+e.options.max*100,"%"),backgroundColor:null===e||void 0===e||null===(pr=e.options)||void 0===pr?void 0:pr.barC}})),t.createElement("label",{className:se.fieldTypeInput,style:{width:"2%"}},"".concat(+n/+e.options.max*100,"%"))):t.createElement(me.Z,{titleProps:{fontSize:"14px",color:"var(--app-color-gray-dark)",fontWeight:"normal",paddingLeft:"5px"},width:"100%",style:{border:"0px dashed var(--app-color-gray-light)",padding:"5px",backgroundColor:"var(--app-color-gray-lightest)"},editMode:Ce,showWidth:l=>{e.field_options=(0,i.Z)((0,i.Z)({},e.field_options),{},{width:"".concat(l,"px")})},key:l,fieldLabel:null!==(mr=null===e||void 0===e||null===(fr=e.options)||void 0===fr?void 0:fr.label)&&void 0!==mr?mr:e.field_name,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors,customIconBgColor:"white"},t.createElement("div",{style:{flexDirection:"column",width:"inherit"},key:l},t.createElement("input",{value:n||0,className:se.fieldTypeInput,name:e.field_name,readOnly:!0,style:{border:"0"}}),Il&&n>0&&t.createElement(el,{title:"",nav:Il,openNav:Dl},t.createElement("div",{style:{color:"var(--app-color-gray-dark)",height:"inherit",width:"100%",display:null!==e&&void 0!==e&&e.visible?"":"none"}},t.createElement("div",{key:l},t.createElement("div",{className:se.actionsContainer,style:{fontSize:"20px"}},t.createElement("div",null,e.field_name,":"),t.createElement("div",{style:{fontWeight:"bolder"}},n)),t.createElement("hr",{style:{borderTop:"0.5px solid #D2D2D2"}})),t.createElement("br",null),t.createElement(f.zx,{clicked:()=>Dl(),title:"Continue",style:{width:"100%"}})))))}if("Dropdown"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(_o=e.options)||void 0===_o||null===(yo=_o.list)||void 0===yo?void 0:yo.length)>0)return t.createElement(me.Z,{titleProps:{fontSize:"14px",color:"var(--app-color-gray-dark)",fontWeight:"normal",paddingLeft:"5px"},enabled:Yo,width:"100%",style:{marginTop:"0px",border:"0px solid var(--app-color-gray-lighter)",padding:"5px",marginBottom:"10px",backgroundColor:"var(--app-color-gray-lightest)"},editMode:Ce,showWidth:l=>{e.field_options=(0,i.Z)((0,i.Z)({},e.field_options),{},{width:"".concat(l,"px")})},key:l,fieldLabel:null!==(da=null===e||void 0===e||null===(aa=e.options)||void 0===aa?void 0:aa.label)&&void 0!==da?da:e.field_name,notes:null===e||void 0===e||null===(ra=e.options)||void 0===ra?void 0:ra.notes,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors},t.createElement("div",{style:{width:"100%"}},t.createElement(O.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-light)"},key:l,visible:e.visible,mandatory:e.mandatory,items:null===e||void 0===e||null===(va=e.options)||void 0===va?void 0:va.list.map(e=>({label:e,value:e})),className:se.dropdownClassContainer,error:e.errors,onClicked:e=>_l(e?"180px":"50px"),onChange:e=>{_l("50px"),P(e,l)},selectionType:null===e||void 0===e||null===(sa=e.options)||void 0===sa?void 0:sa.type,max:+(null!==(ua=null===e||void 0===e||null===(ca=e.options)||void 0===ca?void 0:ca.max)&&void 0!==ua?ua:0),fieldIcon:e.icon,value:void 0===e.value||null===e.value?"":e.value})));if("Payments"===(null===e||void 0===e?void 0:e.data_type_name))return t.createElement(me.Z,{titleProps:{fontSize:"14px",color:"var(--app-color-gray-dark)",fontWeight:"normal",paddingLeft:"5px"},enabled:Yo,width:"100%",style:{backgroundColor:"var(--app-color-gray-lightest)"},editMode:Ce,showWidth:l=>{e.field_options=(0,i.Z)((0,i.Z)({},e.field_options),{},{width:"".concat(l,"px")})},key:l,fieldLabel:null!==(pa=null===e||void 0===e||null===(ma=e.options)||void 0===ma?void 0:ma.label)&&void 0!==pa?pa:e.field_name,notes:null===e||void 0===e||null===(fa=e.options)||void 0===fa?void 0:fa.notes,fieldIcon:e.icon,isProcess:!0,visible:!0,mandatory:e.mandatory,error:yl[l]},t.createElement("div",{style:{width:"100%",pointerEvents:!0===(null===ce||void 0===ce||null===(_a=ce.processModule)||void 0===_a?void 0:_a.isUpdating)&&null!==e&&void 0!==e&&e.value?"none":""}},null!==k&&void 0!==k&&null!==(ya=k.payments)&&void 0!==ya&&ya.stripe_id?t.createElement("div",{style:{padding:"10px 5px 10px 5px",width:"100%",border:"0px solid var(--app-color-gray-lighter)"}},"".concat(null===e||void 0===e?void 0:e.value,", ").concat(null===k||void 0===k||null===(wa=k.payments)||void 0===wa?void 0:wa.stripe_id.slice(0,6))):t.createElement(O.Z,{key:l,visible:e.visible,mandatory:e.mandatory,items:!0===(null===(ga=ce.processModule)||void 0===ga||null===(ha=ga.module)||void 0===ha||null===(ba=ha.options)||void 0===ba?void 0:ba.credits)?[...null!==(xa=null===e||void 0===e||null===(Ea=e.options)||void 0===Ea?void 0:Ea.list.map(e=>({label:e,value:e})))&&void 0!==xa?xa:[],{label:"Wallet",value:"Wallet"}]:null===e||void 0===e||null===(Ca=e.options)||void 0===Ca?void 0:Ca.list.map(e=>({label:e,value:e})),className:se.dropdownClassContainer,error:e.errors,onClicked:e=>_l(e?"180px":"50px"),onChange:o=>{if(o){var i,t,n,d,a,r,v,s,u,c,p,m,f,_,y,g,h;const C=null===(i=z.newStepComponents.find(l=>l.selected_fields.filter(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.paymentField)}).length>0))||void 0===i||null===(t=i.selected_fields)||void 0===t?void 0:t.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.paymentField)}),w=null===(n=z.components.find(l=>l.selected_fields.filter(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.paymentField)}).length>0))||void 0===n||null===(d=n.selected_fields)||void 0===d?void 0:d.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.paymentField)}),M=null===(a=z.currentStep)||void 0===a||null===(r=a.component_blueprints)||void 0===r||null===(v=r.find(l=>{var o;return null===l||void 0===l||null===(o=l.selected_fields)||void 0===o?void 0:o.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.paymentField)})}))||void 0===v||null===(s=v.selected_fields)||void 0===s?void 0:s.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.paymentField)});if(yl[l]="",+(null!==(u=null===C||void 0===C?void 0:C.value)&&void 0!==u?u:0)>0)z.total=C.value,z.plan=C.value;else if(+(null!==(c=null===w||void 0===w?void 0:w.value)&&void 0!==c?c:0)>0)z.total=w.value,z.plan=w.value;else{if(!(+(null!==(p=null===M||void 0===M?void 0:M.value)&&void 0!==p?p:0)>0))return yl[l]="Please enter a payment amount in the designated field",gl([]),void setTimeout(()=>gl(yl));z.total=M.value,z.plan=M.value}var b;if(1==(null===(m=ce.processModule)||void 0===m||null===(f=m.module)||void 0===f||null===(_=f.options)||void 0===_?void 0:_.credits)&&"Wallet"===o){if(+(null!==(b=Ie.wallet)&&void 0!==b?b:0)<+z.total)return yl[l]="Insufficient wallet balance",gl([]),void setTimeout(()=>gl(yl))}else if(1==(null===(y=ce.processModule)||void 0===y||null===(g=y.module)||void 0===g||null===(h=g.options)||void 0===h?void 0:h.credits)&&"Points"===o){var x,E;if(+(null!==(x=null===(E=Ie.options)||void 0===E?void 0:E.points)&&void 0!==x?x:0)<+z.total)return yl[l]="Insufficient points balance",gl([]),void setTimeout(()=>gl(yl))}yl[l]="",gl([]),setTimeout(()=>gl(yl)),_l("50px"),P(o,l)}},selectionType:"Dropdown",fieldIcon:e.icon,value:void 0===e.value||null===e.value?"":e.value,placeholder:""})));if("Positions"===(null===e||void 0===e?void 0:e.data_type_name)&&"multiple"===(null===e||void 0===e||null===(go=e.options)||void 0===go?void 0:go.type))return t.createElement(me.Z,{enabled:Yo,style:{height:"".concat((null===e||void 0===e||null===(Ma=e.value)||void 0===Ma?void 0:Ma.split(",").length)>2?"160":"45","px"),marginBottom:"50px"},width:"100%",editMode:Ce,key:l,fieldLabel:null!==(Sa=null===e||void 0===e||null===(ka=e.options)||void 0===ka?void 0:ka.label)&&void 0!==Sa?Sa:e.field_name,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors,notes:null===e||void 0===e||null===(Za=e.options)||void 0===Za?void 0:Za.notes},t.createElement("div",{style:{width:"100%",border:"1px solid var(--app-color-gray-dark)"}},t.createElement(O.Z,{onOpen:e=>{_l("50px"===fl?"180px":"50px")},visible:null===e||void 0===e?void 0:e.visible,mandatory:null===e||void 0===e?void 0:e.mandatory,className:se.dropdownClassContainer,items:he.filter(l=>{var o,i;return null===e||void 0===e||null===(o=e.options)||void 0===o||null===(i=o.position_id)||void 0===i?void 0:i.includes(null===l||void 0===l?void 0:l.value)}),value:e.value,loading:je,error:null===e||void 0===e?void 0:e.errors,onChange:e=>{P(e,l)},selectionType:"multiple",fieldIcon:null===e||void 0===e?void 0:e.icon,placeholder:""})));if("Positions"===(null===e||void 0===e?void 0:e.data_type_name)&&null!==e&&void 0!==e&&null!==(ho=e.options)&&void 0!==ho&&ho.calendar){var _r,yr,gr,hr,br,xr,Er,Cr,wr,Mr,Sr,kr,Zr,Ir,Nr,Dr,Tr,Pr;const o=JSON.parse(null!==(_r=null===e||void 0===e?void 0:e.value)&&void 0!==_r?_r:JSON.stringify({user:0})),n=Fe.find(e=>e.id===(null===o||void 0===o?void 0:o.task)),d=null===Fe||void 0===Fe?void 0:Fe.filter(e=>{var l,i,t,n;return(null===e||void 0===e||null===(l=e.add_info)||void 0===l?void 0:l.module_id)===(null===(i=ce.processModule)||void 0===i?void 0:i.module_id)&&e.creator.id===(null===o||void 0===o?void 0:o.user)&&!(null!==e&&void 0!==e&&null!==(t=e.assignee)&&void 0!==t&&t.id)&&b()((0,h.now)()).diff(b()(null===e||void 0===e||null===(n=e.add_info)||void 0===n?void 0:n.start),"seconds")<0});return t.createElement(me.Z,{enabled:Yo,style:{marginBottom:"50px"},width:"100%",editMode:Ce,key:l,fieldLabel:null!==(yr=null===e||void 0===e||null===(gr=e.options)||void 0===gr?void 0:gr.label)&&void 0!==yr?yr:e.field_name,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors,notes:null===e||void 0===e||null===(hr=e.options)||void 0===hr?void 0:hr.notes},t.createElement("div",{style:{display:"flex",flexDirection:"column",width:"100%"}},t.createElement("div",{style:{width:"100%",border:"1px solid var(--app-color-gray-light)"}},t.createElement(O.Z,{onFocus:()=>0==he.length&&Al(),visible:null===e||void 0===e?void 0:e.visible,mandatory:null===e||void 0===e?void 0:e.mandatory,className:"multiple"===(null===e||void 0===e||null===(br=e.options)||void 0===br?void 0:br.type)?se.dropdownHeightClassContainer:se.dropdownClassContainer,value:null===(xr=he.find(e=>e.value===(null===o||void 0===o?void 0:o.pos)))||void 0===xr?void 0:xr.label,loading:je,items:he.filter(l=>{var o,i;return null===e||void 0===e||null===(o=e.options)||void 0===o||null===(i=o.position_id)||void 0===i?void 0:i.includes(null===l||void 0===l?void 0:l.value)}),error:null===e||void 0===e?void 0:e.errors,onChange:e=>{e.length>0&&(o.pos=void 0,o.user=void 0,P(JSON.stringify(o),l),(0,ge.n0)([e]).pipe((0,c.q)(1)).subscribe({next:i=>{Se(i),setTimeout(()=>{o.pos=e,P(JSON.stringify(o),l)},0)}}))},selectionType:null===e||void 0===e||null===(Er=e.options)||void 0===Er?void 0:Er.type,fieldIcon:null===e||void 0===e?void 0:e.icon})),t.createElement("div",{style:{width:"100%"}},0==(null===Me||void 0===Me?void 0:Me.length)&&t.createElement("p",null,"No ".concat(e.field_name," found")),!n&&t.createElement(D.default,{initialSelected:null!==e&&void 0!==e&&e.value?Me.filter(e=>{var l,i;return(null===e||void 0===e||null===(l=e.user)||void 0===l||null===(i=l.positions)||void 0===i?void 0:i.filter(e=>(null===o||void 0===o?void 0:o.pos)===(null===e||void 0===e?void 0:e.id)).length)>0}).map(e=>e.value).indexOf(null===o||void 0===o?void 0:o.user):void 0,card:!0,isReport:!1,"app-variant-is-mobile":"true",columns:["Name","Info","About",...null!==(Cr=null===de||void 0===de||null===(wr=de.misc_info)||void 0===wr?void 0:wr.profile)&&void 0!==Cr?Cr:["Rate"],"Location","Photo","Ratings"],list:Me.filter(e=>{var l,i;return(null===e||void 0===e||null===(l=e.user)||void 0===l||null===(i=l.positions)||void 0===i?void 0:i.filter(e=>(null===o||void 0===o?void 0:o.pos)===(null===e||void 0===e?void 0:e.id)).length)>0}).map(e=>{var l,o,n,d,a,r,v,s,u,c,p;const m=null===e||void 0===e||null===(l=e.user)||void 0===l||null===(o=l.ratings)||void 0===o?void 0:o.map(e=>+e.ratings);return(0,i.Z)((0,i.Z)({},null!==(n=null===(d=e.user)||void 0===d||null===(a=d.options)||void 0===a?void 0:a.add_info)&&void 0!==n?n:{}),{},{Name:"".concat(e.user.first_name," ").concat(e.user.last_name),Location:t.createElement("div",{style:{marginTop:"10px"}},null===(r=e.user)||void 0===r?void 0:r.city),About:null!==(v=null===(s=e.user.options)||void 0===s?void 0:s.info)&&void 0!==v?v:null===(u=e.user)||void 0===u?void 0:u.positions.map(e=>e.name).toString().replace(",",", "),id:e.user.id,Photo:null!=(null===(c=e.user)||void 0===c?void 0:c.photo)?null===(p=e.user)||void 0===p?void 0:p.photo:null===de||void 0===de?void 0:de.logo,Ratings:(null===m||void 0===m?void 0:m.length)>0&&t.createElement("div",{className:se.simpleNames},Array(Math.round(le.Z(oe.Z,[ie.Z,te.Z])(m))).fill(0).map((e,l)=>t.createElement(C.G,{key:l,icon:E.Tab,style:{color:"var(--app-color-blue)"}})),Array(5-Math.round(le.Z(oe.Z,[ie.Z,te.Z])(m))).fill(0).map((e,l)=>t.createElement(C.G,{key:l,icon:E.Tab,style:{color:"lightgray"}})))})}),onListItemClick:e=>{if(e){const i=Me.find(l=>l.value===e.id);o.user=null===i||void 0===i?void 0:i.value,P(JSON.stringify(o),l),(0,Oe.Mk)(null===i||void 0===i?void 0:i.value,!0).pipe((0,c.q)(1)).subscribe({})}}},(null===d||void 0===d?void 0:d.length)>0&&t.createElement("p",null,"Schedules"),(null===d||void 0===d?void 0:d.length)>0&&t.createElement(re.tq,{slidesPerView:3,centeredSlides:!0,spaceBetween:5,initialSlide:1,pagination:{clickable:!0,dynamicBullets:!0},modules:[ae.pt,ae.tl],className:"mySwiper",style:{border:"0.8px dashed gray",padding:"5px",height:"200px",display:(null===d||void 0===d?void 0:d.length)>0?"":"none"}},null===d||void 0===d?void 0:d.map((e,l)=>t.createElement(re.o5,{key:l+100,className:se.swiperslide},t.createElement("div",{className:se.dashboardCard,onClick:()=>{El(!0),wl(e)}},t.createElement("div",{style:{fontSize:"10px"}},b()(new Date(e.add_info.start)).format("h:mm a")),e.add_info.end!==e.add_info.start&&t.createElement("div",{style:{fontSize:"10px"}},b()(new Date(e.add_info.end)).format("h:mm a")),t.createElement("hr",{style:{border:"0.8px dashed gray"}}),t.createElement("p",{style:{fontSize:"12px",fontWeight:"bold"}},b()(new Date(e.add_info.start)).format("MMM")),t.createElement("div",{style:{fontSize:"20px",fontWeight:"bold"}},b()(new Date(e.add_info.start)).format("DD"))))))),n&&t.createElement(D.default,{modern:!0,isReport:!1,"app-variant-is-mobile":"true",columns:["Responsible",null!==(Mr=null===e||void 0===e||null===(Sr=e.options)||void 0===Sr?void 0:Sr.header)&&void 0!==Mr?Mr:"Name",null!==(kr=null===e||void 0===e||null===(Zr=e.options)||void 0===Zr?void 0:Zr.start)&&void 0!==kr?kr:"Date","Photo"],list:[n].map(l=>{var o,i,t,n,d,a;return{[null!==(o=null===e||void 0===e||null===(i=e.options)||void 0===i?void 0:i.header)&&void 0!==o?o:"Name"]:l.name,[null!==(t=null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.start)&&void 0!==t?t:"Date"]:b()(new Date(null===(d=l.add_info)||void 0===d?void 0:d.start)).format("MMM DD h:mm a"),Responsible:"".concat(l.creator.first_name," ").concat(l.creator.last_name),Photo:null===(a=l.creator)||void 0===a?void 0:a.photo}}),onListItemClick:e=>{e&&(El(!0),wl(n))}}),xl&&t.createElement(nl,{save:!1,modalVisible:xl,heading:null!==(Ir=null===e||void 0===e||null===(Nr=e.options)||void 0===Nr?void 0:Nr.header)&&void 0!==Ir?Ir:Cl?"Update Calendar":"Create New Calendar",labels:null===e||void 0===e?void 0:e.options,task:Cl,isProcess:!0,blured:!1,onClose:()=>El(!1),isEdit:!!Cl,statuses:null===e||void 0===e||null===(Dr=e.options)||void 0===Dr?void 0:Dr.list,priority:null===e||void 0===e||null===(Tr=e.options)||void 0===Tr?void 0:Tr.priority,span:null===e||void 0===e||null===(Pr=e.options)||void 0===Pr?void 0:Pr.span,start_date:Ge,onUpdate:i=>{if(i.creator.id!==(null===ke||void 0===ke?void 0:ke.id)&&(null===i||void 0===i?void 0:i.assignee_id)===(null===ke||void 0===ke?void 0:ke.id)){var t;if(z.assigned_to=i.creator.id,o.task=null===i||void 0===i?void 0:i.id,null!==i&&void 0!==i&&null!==(t=i.add_info)&&void 0!==t&&t.value){var n,d,a,r,v,s,u,c,p;o.value=null===i||void 0===i||null===(n=i.add_info)||void 0===n?void 0:n.value;const l=null===(d=z.components.find(l=>l.selected_fields.find(l=>{var o;return l.field_name===(null===(o=e.options)||void 0===o?void 0:o.valueL)})))||void 0===d?void 0:d.selected_fields.find(l=>{var o;return l.field_name===(null===(o=e.options)||void 0===o?void 0:o.valueL)});var m;if(l)l.value=null===i||void 0===i||null===(m=i.add_info)||void 0===m?void 0:m.value;const t=null===(a=z.newStepComponents.find(l=>l.selected_fields.find(l=>{var o;return l.field_name===(null===(o=e.options)||void 0===o?void 0:o.valueL)})))||void 0===a?void 0:a.selected_fields.find(l=>{var o;return l.field_name===(null===(o=e.options)||void 0===o?void 0:o.valueL)});var f;if(t)t.value=null===i||void 0===i||null===(f=i.add_info)||void 0===f?void 0:f.value;const y=null===(r=ce.processModule)||void 0===r||null===(v=r.steps)||void 0===v||null===(s=v.find(l=>{var o;return null===(o=l.component_blueprints)||void 0===o?void 0:o.find(l=>{var o;return null===l||void 0===l||null===(o=l.selected_fields)||void 0===o?void 0:o.find(l=>{var o;return l.field_name===(null===(o=e.options)||void 0===o?void 0:o.valueL)})})}))||void 0===s||null===(u=s.component_blueprints)||void 0===u||null===(c=u.find(l=>{var o;return null===l||void 0===l||null===(o=l.selected_fields)||void 0===o?void 0:o.find(l=>{var o;return l.field_name===(null===(o=e.options)||void 0===o?void 0:o.valueL)})}))||void 0===c||null===(p=c.selected_fields)||void 0===p?void 0:p.find(l=>{var o;return l.field_name===(null===(o=e.options)||void 0===o?void 0:o.valueL)});var _;if(y)y.value=null===i||void 0===i||null===(_=i.add_info)||void 0===_?void 0:_.value}P(JSON.stringify(o),l)}}}))))}if("Positions"===(null===e||void 0===e?void 0:e.data_type_name))return t.createElement(me.Z,{enabled:Yo,titleProps:{fontSize:"14px",color:"var(--app-color-gray-dark)",fontWeight:"normal",paddingLeft:"5px"},style:{marginTop:"0px",border:"0px solid var(--app-color-gray-lighter)",padding:"5px",marginBottom:"10px",backgroundColor:"var(--app-color-gray-lightest)"},width:"100%",editMode:Ce,key:l,fieldLabel:null!==(Ia=null===e||void 0===e||null===(Na=e.options)||void 0===Na?void 0:Na.label)&&void 0!==Ia?Ia:e.field_name,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors,notes:null===e||void 0===e||null===(Da=e.options)||void 0===Da?void 0:Da.notes},t.createElement("div",{style:{width:"100%",bborder:"1px dashed var(--app-color-gray-light)"}},t.createElement(O.Z,{visible:null===e||void 0===e?void 0:e.visible,mandatory:null===e||void 0===e?void 0:e.mandatory,className:"multiple"===(null===e||void 0===e||null===(Ta=e.options)||void 0===Ta?void 0:Ta.type)?se.dropdownHeightClassContainer:se.dropdownClassContainer,items:he.filter(l=>{var o,i;return null===e||void 0===e||null===(o=e.options)||void 0===o||null===(i=o.position_id)||void 0===i?void 0:i.includes(null===l||void 0===l?void 0:l.value)}),value:null===(Pa=he.find(l=>l.value===e.value))||void 0===Pa?void 0:Pa.label,loading:je,error:null===e||void 0===e?void 0:e.errors,onChange:o=>{var t;P(o,l),null!==e&&void 0!==e&&null!==(t=e.options)&&void 0!==t&&t.addToPos&&(0,ge.Vy)(ke,(0,i.Z)((0,i.Z)({},null===ke||void 0===ke?void 0:ke.options),{},{selPos:o})).pipe((0,p.P)()).subscribe({complete:()=>{},next:e=>{(0,I.aT)(o,null===ke||void 0===ke?void 0:ke.id).subscribe({complete:()=>{},next:()=>{var l;(ke.options.selPos&&ke.options.selPos!==o?(0,I._s)(ke.options.selPos,null===ke||void 0===ke?void 0:ke.id).subscribe({next:()=>{window.scrollTo({top:0,behavior:"smooth"})}}):window.scrollTo({top:0,behavior:"smooth"}),null!==e&&void 0!==e&&e.user)||(ke.options.selPos=null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.selPos)}})}})},selectionType:null===e||void 0===e||null===(Oa=e.options)||void 0===Oa?void 0:Oa.type,fieldIcon:null===e||void 0===e?void 0:e.icon})));if("Value Button"===(null===e||void 0===e?void 0:e.data_type_name))return t.createElement(me.Z,{width:"100%",editMode:Ce,key:l,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors,customIconBgColor:"white"},t.createElement(D.default,{rowStyleSelected:{border:null!==e&&void 0!==e&&e.value?"2px solid black":"1px dashed black"},initialSelected:(null===(Aa=e.options)||void 0===Aa?void 0:Aa.value)===(null===e||void 0===e?void 0:e.value)?0:void 0,modern:!0,isReport:!1,filtersContainer:se.filtersContainerII,"app-variant-is-mobile":"true",columns:["Type","Description","Image"],list:[{Type:null===(za=e.options)||void 0===za?void 0:za.label,Description:null!==(La=null===e||void 0===e||null===(Ra=e.options)||void 0===Ra?void 0:Ra.notes)&&void 0!==La?La:e.field_name,Image:null===(Ua=e.options)||void 0===Ua?void 0:Ua.image}],onListItemClick:()=>{var o;null!==e&&void 0!==e&&e.value?N(void 0,l):(null===S||void 0===S||null===(o=S.selected_fields)||void 0===o||o.filter(e=>"Value Button"===(null===e||void 0===e?void 0:e.data_type_name)).map(e=>{e.value=void 0}),N(e.options.value,l))}}));if("Calendar"===(null===e||void 0===e?void 0:e.data_type_name))return t.createElement(me.Z,{enabled:Yo,width:"100%",style:{width:"100%"},editMode:Ce,showWidth:l=>{e.field_options=(0,i.Z)((0,i.Z)({},e.field_options),{},{width:"".concat(l,"px")})},key:l,fieldLabel:null!==(Fa=null===e||void 0===e||null===(Wa=e.options)||void 0===Wa?void 0:Wa.label)&&void 0!==Fa?Fa:e.field_name,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors,notes:null===e||void 0===e||null===(qa=e.options)||void 0===qa?void 0:qa.notes},t.createElement("div",{id:e.field_name,style:{width:"inherit",marginBottom:"160px"}},t.createElement(f.zx,{light:!0,clicked:()=>{var e,l;Ve(!0),(0,Oe.Mk)(null!==(e=null===k||void 0===k||null===(l=k.created_by)||void 0===l?void 0:l.id)&&void 0!==e?e:ke.id,!0).pipe((0,c.q)(1)).subscribe({next:()=>{Ve(!1)}})},loading:je,icon:t.createElement("img",{src:Z.Fd})}),!(xl||je)&&t.createElement(ue.Scheduler,{events:Fe.length>0?null===Fe||void 0===Fe||null===(Ya=Fe.filter(e=>{var l,o;return(null===e||void 0===e||null===(l=e.add_info)||void 0===l?void 0:l.module_id)===(null===(o=ce.processModule)||void 0===o?void 0:o.module_id)}))||void 0===Ya?void 0:Ya.map(e=>{var l,o;return{event_id:e.id,title:e.description,start:new Date(Date.parse(null===(l=e.add_info)||void 0===l?void 0:l.start)),end:null!==e&&void 0!==e&&e.completed_at?new Date(Date.parse(e.completed_at)):new Date(Date.parse(null===(o=e.add_info)||void 0===o?void 0:o.end)),admin_id:2,color:"#50b500",editable:!1,deletable:!1}}):[],navigation:!0,view:Ml,agenda:(null===k||void 0===k||null===(Ba=k.created_by)||void 0===Ba?void 0:Ba.id)!==ke.id&&!(null===k||void 0===k||null===(Ha=k.created_by)||void 0===Ha||!Ha.id),day:{startHour:0,endHour:24,cellRenderer:e=>{let{height:l,start:o,onClick:i}=e;const n=!1,d=(0,M.Z)(e,Ye);return t.createElement(f.zx,(0,w.Z)({style:{height:"100%",background:"transparent",cursor:"pointer"},clicked:()=>{El(!0),wl(void 0)},disabled:n},d))}},month:(null===k||void 0===k||null===(ja=k.created_by)||void 0===ja?void 0:ja.id)!==ke.id&&void 0!==(null===k||void 0===k?void 0:k.created_by)?null:{cellRenderer:e=>{let{height:l,start:o,onClick:i}=e;const n=!1,d=(0,M.Z)(e,Be);return t.createElement(f.zx,(0,w.Z)({style:{height:"100%",background:"transparent",cursor:"pointer"},clicked:()=>{El(!0),wl(void 0)},disabled:n},d))}},week:(null===k||void 0===k||null===(Va=k.created_by)||void 0===Va?void 0:Va.id)!==ke.id&&void 0!==(null===k||void 0===k?void 0:k.created_by)?null:{weekDays:[0,1,2,3,4,5],weekStartOn:6,startHour:0,endHour:25,step:60,cellRenderer:e=>{let{height:l,start:o,onClick:i}=e;const n=!1,d=(0,M.Z)(e,He);return t.createElement(f.zx,(0,w.Z)({style:{height:"100%",background:"transparent",cursor:"pointer"},clicked:()=>{Ke(o),El(!0),wl(void 0)},disabled:n},d))}},onEventClick:e=>{El(!0),wl(null===Fe||void 0===Fe?void 0:Fe.find(l=>l.id===e.event_id))},onViewChange:e=>Sl(e)}),xl&&t.createElement(nl,{modalVisible:xl,heading:null!==e&&void 0!==e&&null!==(Ga=e.options)&&void 0!==Ga&&Ga.title?null===e||void 0===e||null===(Ja=e.options)||void 0===Ja?void 0:Ja.title:Cl?"Update Calendar":"Create New Calendar",task:Cl,isProcess:!0,blured:!1,onClose:()=>El(!1),isEdit:!!Cl,statuses:null===e||void 0===e||null===(Qa=e.options)||void 0===Qa?void 0:Qa.list,priority:null===e||void 0===e||null===(Ka=e.options)||void 0===Ka?void 0:Ka.priority,span:null===e||void 0===e||null===(Xa=e.options)||void 0===Xa?void 0:Xa.span,start_date:Ge})));if("Video"===(null===e||void 0===e?void 0:e.data_type_name)&&null!==e&&void 0!==e&&null!==(bo=e.options)&&void 0!==bo&&bo.start)return t.createElement(me.Z,{enabled:Yo,width:"100%",editMode:Ce,style:{backgroundColor:"var(--app-color-gray-lightest)"},key:l,fieldLabel:null!==($a=null===e||void 0===e||null===(er=e.options)||void 0===er?void 0:er.label)&&void 0!==$a?$a:e.field_name,notes:null===e||void 0===e||null===(lr=e.options)||void 0===lr?void 0:lr.notes,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors},t.createElement("div",{style:{width:"100%",height:"auto",border:"0px solid var(--app-color-gray-light)"}},t.createElement("div",{id:"custom-input",style:{cursor:"pointer",display:"flex",justifyContent:"center",width:"100%",alignItems:"stretch",padding:"5px",border:"0px solid var(--app-color-gray-lighter)"}},t.createElement(C.G,{icon:E.WRo,style:{width:"14px",height:"14px"}}),t.createElement("input",{value:e.value?b()(e.value).format("DD MMMM YYYY HH:mm"):"",disabled:!0,type:"text",style:{flex:1,marginTop:"auto",marginBottom:"auto",outline:"none",fontFamily:"var(--app-text-font-mobile)",fontSize:"16px",lineHeight:"20px",color:"black",textAlign:"left",maxWidth:"98%",border:"0px"},onChange:e=>{}})),t.createElement(Re.Z,{payload:{name:null===k||void 0===k?void 0:k.id}})));if("Video"!==(null===e||void 0===e?void 0:e.data_type_name)||null!==e&&void 0!==e&&null!==(xo=e.options)&&void 0!==xo&&xo.start){var Or,Ar,zr,Lr,Rr,Ur,Fr,Wr,qr,Yr,Br,Hr,jr,Vr,Gr,Jr,Qr,Kr,Xr,$r,ev,lv,ov,iv,tv,nv,dv,av,rv,vv,sv,uv,cv,pv,mv,fv,_v,yv,gv,hv,bv,xv,Ev,Cv,wv,Mv,Sv,kv,Zv,Iv,Nv,Dv,Tv,Pv,Ov,Av,zv,Lv,Rv,Uv,Fv,Wv,qv,Yv,Bv,Hv,jv;if("Radio"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(Eo=e.options)||void 0===Eo||null===(Co=Eo.list)||void 0===Co?void 0:Co.length)>0)return t.createElement(me.Z,{enabled:Yo,width:"100%",style:{backgroundColor:"var(--app-color-gray-lightest)",padding:"10px"},editMode:Ce,key:l,fieldLabel:null!==(Or=null===e||void 0===e||null===(Ar=e.options)||void 0===Ar?void 0:Ar.label)&&void 0!==Or?Or:e.field_name,notes:null===e||void 0===e||null===(zr=e.options)||void 0===zr?void 0:zr.notes,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors},t.createElement("div",{style:{width:"100%",border:"1px solid var(--app-color-gray-light)",padding:"20px",fontSize:"16px",display:"flex",flexDirection:"column",marginTop:"10px"}},null===e||void 0===e||null===(Lr=e.options)||void 0===Lr?void 0:Lr.list.map((o,i)=>t.createElement("div",{key:i,style:{display:"flex",padding:"20px 0"}},t.createElement("input",{style:{margin:"0 20px"},type:"radio",id:o,name:e.field_name,value:o,checked:(null===e||void 0===e?void 0:e.value)===o,onChange:e=>{var o;return P(null===(o=e.target)||void 0===o?void 0:o.value,l)}}),t.createElement("label",{htmlFor:o,for:o},o)))));if("People"===(null===e||void 0===e?void 0:e.data_type_name)&&null!==e&&void 0!==e&&null!==(wo=e.options)&&void 0!==wo&&wo.calendar){var Vv,Gv,Jv,Qv,Kv,Xv,$v,es,ls,os,is,ts,ns,ds,as,rs,vs,ss,us,cs,ps;const o=JSON.parse(null!==(Vv=null===e||void 0===e?void 0:e.value)&&void 0!==Vv?Vv:JSON.stringify({user:0})),n=Fe.find(e=>e.id===(null===o||void 0===o?void 0:o.task)),d=null===Fe||void 0===Fe?void 0:Fe.filter(l=>{var i,t,n,d,a,r,v,s;return(null!==l&&void 0!==l&&null!==(i=l.add_info)&&void 0!==i&&i.pos?null===e||void 0===e||null===(t=e.options)||void 0===t||null===(n=t.position_id)||void 0===n?void 0:n.includes(null===l||void 0===l||null===(d=l.add_info)||void 0===d?void 0:d.pos):null===l||void 0===l?void 0:l.id)&&(null===l||void 0===l||null===(a=l.add_info)||void 0===a?void 0:a.module_id)===(null===(r=ce.processModule)||void 0===r?void 0:r.module_id)&&l.creator.id===(null===o||void 0===o?void 0:o.user)&&!(null!==l&&void 0!==l&&null!==(v=l.assignee)&&void 0!==v&&v.id)&&b()((0,h.now)()).diff(b()(null===l||void 0===l||null===(s=l.add_info)||void 0===s?void 0:s.start),"seconds")<0});return t.createElement(me.Z,{titleProps:{fontSize:"14px",color:"var(--app-color-gray-dark)",fontWeight:"normal"},enabled:Yo,width:"100%",editMode:Ce,dragEnd:l=>{var o;const i=null===(o=document.getElementById(null===S||void 0===S?void 0:S.name))||void 0===o?void 0:o.getBoundingClientRect();document.getElementById(e.field_name).style.position="absolute",document.getElementById(e.field_name).style.top="".concat(l.top-i.top,"px"),document.getElementById(e.field_name).style.left="".concat(l.left-i.left,"px")},key:l,fieldLabel:null===e||void 0===e?void 0:e.field_name,notes:null===e||void 0===e||null===(Gv=e.options)||void 0===Gv?void 0:Gv.notes,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors},t.createElement("div",{style:{width:"100%"}},(null===e||void 0===e||null===(Jv=e.options)||void 0===Jv||null===(Qv=Jv.dropdown)||void 0===Qv?void 0:Qv.length)>0&&t.createElement("div",{style:{width:"100%",border:"0.5px solid var(--app-color-gray-dark)"}},t.createElement(O.Z,{visible:null===e||void 0===e?void 0:e.visible,mandatory:null===e||void 0===e?void 0:e.mandatory,className:se.dropdownClassContainer,items:null===e||void 0===e||null===(Kv=e.options)||void 0===Kv||null===(Xv=Kv.dropdown)||void 0===Xv?void 0:Xv.map(e=>({label:e,value:e})),value:null===o||void 0===o?void 0:o.pos,error:null===e||void 0===e?void 0:e.errors,onChange:i=>{var t,n;i.length>0&&(o.pos=void 0,o.user=void 0,P(JSON.stringify(o),l),Se([]),Ve(!0),(0,ge.FY)(null===e||void 0===e||null===(t=e.options)||void 0===t?void 0:t.position_id,null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.filter,i).pipe((0,c.q)(1)).subscribe({next:e=>{Ve(!1),Se(e),setTimeout(()=>{o.pos=i,P(JSON.stringify(o),l)},0)},error:()=>Ve(!1)}))},selectionType:null===e||void 0===e||null===($v=e.options)||void 0===$v?void 0:$v.type,fieldIcon:null===e||void 0===e?void 0:e.icon})),0==(null===Me||void 0===Me?void 0:Me.length)&&!je&&t.createElement("p",null,"No ".concat(e.field_name," found")),0==(null===Me||void 0===Me?void 0:Me.length)&&je&&t.createElement("p",null,"Searching for ".concat(e.field_name)),!n&&t.createElement(D.default,{rowStyleSelected:{border:"2px solid var(--app-color-gray-light)"},initialSelected:null!==e&&void 0!==e&&e.value?Me.filter(l=>{var o,i;return(null===l||void 0===l||null===(o=l.user)||void 0===o||null===(i=o.positions)||void 0===i?void 0:i.filter(l=>{var o,i;return null===e||void 0===e||null===(o=e.options)||void 0===o||null===(i=o.position_id)||void 0===i?void 0:i.includes(null===l||void 0===l?void 0:l.id)}).length)>0}).map(e=>e.value).indexOf(null===o||void 0===o?void 0:o.user):void 0,card:!0,isReport:!1,"app-variant-is-mobile":"true",columns:["Name","Info","About",...null!==(es=null===de||void 0===de||null===(ls=de.misc_info)||void 0===ls?void 0:ls.profile)&&void 0!==es?es:["Rate"],"Location","Photo","Ratings"],list:Me.filter(l=>{var o,i;return(null===l||void 0===l||null===(o=l.user)||void 0===o||null===(i=o.positions)||void 0===i?void 0:i.filter(l=>{var o,i;return null===e||void 0===e||null===(o=e.options)||void 0===o||null===(i=o.position_id)||void 0===i?void 0:i.includes(null===l||void 0===l?void 0:l.id)}).length)>0}).map(e=>{var l,o,n,d,a,r,v,s,u;const c=null===e||void 0===e||null===(l=e.user)||void 0===l||null===(o=l.ratings)||void 0===o?void 0:o.map(e=>+e.ratings);return(0,i.Z)((0,i.Z)({},null!==(n=null===(d=e.user)||void 0===d||null===(a=d.options)||void 0===a?void 0:a.add_info)&&void 0!==n?n:{}),{},{Name:"".concat(e.user.first_name," ").concat(e.user.last_name),Location:t.createElement("div",{style:{marginTop:"10px",fontWeight:"bolder",fontSize:"12px"}},null===(r=e.user)||void 0===r?void 0:r.city),Info:null===(v=e.user.options)||void 0===v?void 0:v.info,id:e.user.id,Photo:null!=(null===(s=e.user)||void 0===s?void 0:s.photo)?null===(u=e.user)||void 0===u?void 0:u.photo:null===de||void 0===de?void 0:de.logo,Ratings:(null===c||void 0===c?void 0:c.length)>0&&t.createElement("div",{className:se.simpleNames},Array(Math.round(le.Z(oe.Z,[ie.Z,te.Z])(c))).fill(0).map((e,l)=>t.createElement(C.G,{key:l,icon:E.Tab,style:{color:"var(--app-color-blue)"}})),Array(5-Math.round(le.Z(oe.Z,[ie.Z,te.Z])(c))).fill(0).map((e,l)=>t.createElement(C.G,{key:l,icon:E.Tab,style:{color:"lightgray"}})))})}),onListItemClick:e=>{if(e){const i=Me.find(l=>l.value===e.id);o.user=null===i||void 0===i?void 0:i.value,P(JSON.stringify(o),l),Ve(!0),(0,Oe.Mk)(null===i||void 0===i?void 0:i.value,!0).pipe((0,c.q)(1)).subscribe({next:()=>Ve(!1),error:()=>Ve(!1)})}}},(null===d||void 0===d?void 0:d.length)>0&&t.createElement("p",null,"Schedules"),(null===d||void 0===d?void 0:d.length)>0&&(null===d||void 0===d?void 0:d.length)>0?t.createElement(re.tq,{slidesPerView:3,centeredSlides:!0,spaceBetween:10,initialSlide:1,pagination:{clickable:!0,dynamicBullets:!0},modules:[ae.pt,ae.tl],className:"mySwiper",style:{border:"0.8px dashed gray",padding:"5px",height:"200px",display:(null===d||void 0===d?void 0:d.length)>0?"":"none",zIndex:"0"}},null===(os=G.Z([ee.Z(Q.Z("due_date"))])(d))||void 0===os?void 0:os.map((e,l)=>t.createElement(re.o5,{key:l+200,className:se.swiperslide},t.createElement("div",{className:se.dashboardCard,onClick:()=>{El(!0),wl(e)}},t.createElement("div",{style:{fontSize:"10px"}},b()(new Date(e.add_info.start)).format("h:mm a")),e.add_info.end!==e.add_info.start&&t.createElement("div",{style:{fontSize:"10px"}},b()(new Date(e.add_info.end)).format("h:mm a")),t.createElement("hr",{style:{border:"0.8px dashed gray"}}),t.createElement("p",{style:{fontSize:"12px",fontWeight:"bold"}},b()(new Date(e.add_info.start)).format("MMM")),t.createElement("div",{style:{fontSize:"20px",fontWeight:"bold"}},b()(new Date(e.add_info.start)).format("DD")))))):null!==o&&void 0!==o&&o.user?t.createElement("p",{style:{fontSize:"12px",paddingLeft:"10px"}},je?"Searching for Schedules":"No Schedules Found"):t.createElement("div",null)),t.createElement("div",{className:se.centerDiv},!n&&!(null!==e&&void 0!==e&&null!==(is=e.options)&&void 0!==is&&is.dropdown)&&(!(null!==e&&void 0!==e&&e.last_page)||1===(null===e||void 0===e?void 0:e.last_page))&&t.createElement(f.zx,{title:"More",style:{width:"30%"},clicked:()=>{var i,t;(0,ge.Wz)(null===(i=ce.processModule.module)||void 0===i||null===(t=i.options)||void 0===t?void 0:t.positions,5,1).pipe((0,p.P)()).subscribe({next:i=>{e.last_page=null===i||void 0===i?void 0:i.last_page,Se(null===i||void 0===i?void 0:i.data),o.user=void 0,P(JSON.stringify(o),l)}})}}),!n&&!(null!==e&&void 0!==e&&null!==(ts=e.options)&&void 0!==ts&&ts.dropdown)&&(null===e||void 0===e?void 0:e.last_page)>1&&t.createElement("div",{style:{display:"flex"}},[...Array(Math.ceil(+(null===e||void 0===e?void 0:e.last_page)))].map((i,n)=>t.createElement(f.zx,{title:n+1,clear:!0,key:n,style:{width:"40px",display:n<18?"":"none"},titleContainer:se.pageContainer,disabled:n==(null===e||void 0===e?void 0:e.page)-1,clicked:()=>{var i,t;e.page=n+1,(0,ge.Wz)(null===(i=ce.processModule.module)||void 0===i||null===(t=i.options)||void 0===t?void 0:t.positions,5,null===e||void 0===e?void 0:e.page).pipe((0,p.P)()).subscribe({next:i=>{e.last_page=null===i||void 0===i?void 0:i.last_page,Se(null===i||void 0===i?void 0:i.data),o.user=void 0,P(JSON.stringify(o),l)}})}})))),n&&t.createElement(D.default,{modern:!0,isReport:!1,"app-variant-is-mobile":"true",columns:["Responsible",null!==(ns=null===e||void 0===e||null===(ds=e.options)||void 0===ds?void 0:ds.header)&&void 0!==ns?ns:"Name",null!==(as=null===e||void 0===e||null===(rs=e.options)||void 0===rs?void 0:rs.start)&&void 0!==as?as:"Date","Photo"],list:[n].map(l=>{var o,i,t,n,d,a;return{[null!==(o=null===e||void 0===e||null===(i=e.options)||void 0===i?void 0:i.header)&&void 0!==o?o:"Name"]:l.name,[null!==(t=null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.start)&&void 0!==t?t:"Date"]:b()(new Date(null===(d=l.add_info)||void 0===d?void 0:d.start)).format("MMM DD h:mm a"),Responsible:"".concat(l.creator.first_name," ").concat(l.creator.last_name),Position:"",Photo:null===(a=l.creator)||void 0===a?void 0:a.photo}}),onListItemClick:e=>{e&&(El(!0),wl(n))}}),xl&&t.createElement(nl,{save:!1,modalVisible:xl,heading:null!==(vs=null===e||void 0===e||null===(ss=e.options)||void 0===ss?void 0:ss.header)&&void 0!==vs?vs:Cl?"Update Calendar":"Create New Calendar",labels:null===e||void 0===e?void 0:e.options,task:Cl,isProcess:!0,blured:!1,onClose:()=>El(!1),isEdit:!!Cl,statuses:null===e||void 0===e||null===(us=e.options)||void 0===us?void 0:us.list,priority:null===e||void 0===e||null===(cs=e.options)||void 0===cs?void 0:cs.priority,span:null===e||void 0===e||null===(ps=e.options)||void 0===ps?void 0:ps.span,start_date:Ge,onUpdate:i=>{if(i.creator.id!==(null===ke||void 0===ke?void 0:ke.id)&&(null===i||void 0===i?void 0:i.assignee_id)===(null===ke||void 0===ke?void 0:ke.id)){var t;if(z.assigned_to=i.creator.id,o.task=null===i||void 0===i?void 0:i.id,null!==i&&void 0!==i&&null!==(t=i.add_info)&&void 0!==t&&t.value){var n,d,a,r,v,s,u,c,p;o.value=null===i||void 0===i||null===(n=i.add_info)||void 0===n?void 0:n.value;const l=null===(d=z.components.find(l=>l.selected_fields.find(l=>{var o;return l.field_name===(null===(o=e.options)||void 0===o?void 0:o.valueL)})))||void 0===d?void 0:d.selected_fields.find(l=>{var o;return l.field_name===(null===(o=e.options)||void 0===o?void 0:o.valueL)});var m;if(l)l.value=null===i||void 0===i||null===(m=i.add_info)||void 0===m?void 0:m.value;const t=null===(a=z.newStepComponents.find(l=>l.selected_fields.find(l=>{var o;return l.field_name===(null===(o=e.options)||void 0===o?void 0:o.valueL)})))||void 0===a?void 0:a.selected_fields.find(l=>{var o;return l.field_name===(null===(o=e.options)||void 0===o?void 0:o.valueL)});var f;if(t)t.value=null===i||void 0===i||null===(f=i.add_info)||void 0===f?void 0:f.value;const y=null===(r=ce.processModule)||void 0===r||null===(v=r.steps)||void 0===v||null===(s=v.find(l=>{var o;return null===(o=l.component_blueprints)||void 0===o?void 0:o.find(l=>{var o;return null===l||void 0===l||null===(o=l.selected_fields)||void 0===o?void 0:o.find(l=>{var o;return l.field_name===(null===(o=e.options)||void 0===o?void 0:o.valueL)})})}))||void 0===s||null===(u=s.component_blueprints)||void 0===u||null===(c=u.find(l=>{var o;return null===l||void 0===l||null===(o=l.selected_fields)||void 0===o?void 0:o.find(l=>{var o;return l.field_name===(null===(o=e.options)||void 0===o?void 0:o.valueL)})}))||void 0===c||null===(p=c.selected_fields)||void 0===p?void 0:p.find(l=>{var o;return l.field_name===(null===(o=e.options)||void 0===o?void 0:o.valueL)});var _;if(y)y.value=null===i||void 0===i||null===(_=i.add_info)||void 0===_?void 0:_.value}P(JSON.stringify(o),l)}}})))}if("People"===(null===e||void 0===e?void 0:e.data_type_name)&&(!0===(null===e||void 0===e||null===(Mo=e.options)||void 0===Mo?void 0:Mo.slider)||kl)&&(null===ye||void 0===ye?void 0:ye.length)>0)return t.createElement(me.Z,{titleProps:{fontSize:"14px",color:"var(--app-color-gray-dark)",fontWeight:"normal",paddingLeft:"5px"},enabled:Yo,width:"100%",editMode:Ce,showWidth:l=>{e.field_options=(0,i.Z)((0,i.Z)({},e.field_options),{},{width:"".concat(l,"px")})},dragEnd:l=>{var o;const i=null===(o=document.getElementById(null===S||void 0===S?void 0:S.name))||void 0===o?void 0:o.getBoundingClientRect();document.getElementById(e.field_name).style.position="absolute",document.getElementById(e.field_name).style.top="".concat(l.top-i.top,"px"),document.getElementById(e.field_name).style.left="".concat(l.left-i.left,"px")},key:l,notes:null===e||void 0===e||null===(Rr=e.options)||void 0===Rr?void 0:Rr.notes,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors},t.createElement(re.tq,{slidesPerView:1,centeredSlides:!0,spaceBetween:10,initialSlide:0,pagination:{clickable:!0,dynamicBullets:!0},style:{zIndex:0},modules:[ae.pt,ae.tl],className:"mySwiper"},ye.filter(l=>{var o;return(null===l||void 0===l||null===(o=l.positions)||void 0===o?void 0:o.filter(l=>{var o,i;return null===e||void 0===e||null===(o=e.options)||void 0===o||null===(i=o.position_id)||void 0===i?void 0:i.includes(null===l||void 0===l?void 0:l.id)}).length)>0}).map((o,n)=>{var d,a,r,v,s,u,c,p,m,f,_;const y=null===o||void 0===o||null===(d=o.ratings)||void 0===d?void 0:d.map(e=>+e.ratings);return t.createElement(re.o5,{key:n,className:se.swiperslide},t.createElement("div",{style:{padding:"20px",width:"100%"},onClick:()=>{var i;e.open=null===e||void 0===e||!e.open,e.idx=l,null!==e&&void 0!==e&&null!==(i=e.options)&&void 0!==i&&i.skip?Zl(e.open):P(null===o||void 0===o?void 0:o.id,l)}},t.createElement(Te.Z,{photo:null===o||void 0===o?void 0:o.photo,height:null!==e&&void 0!==e&&e.open?"auto":"300px",width:"100%",firstName:"".concat(null===o||void 0===o?void 0:o.first_name),lastName:"".concat(null===o||void 0===o?void 0:o.last_name),position:t.createElement("div",{style:{marginTop:"10px"}},null===o||void 0===o?void 0:o.city),email:null===(a=o.options)||void 0===a?void 0:a.info},(null===y||void 0===y?void 0:y.length)>0&&t.createElement("div",{className:se.simpleNames},Array(Math.round(le.Z(oe.Z,[ie.Z,te.Z])(y))).fill(0).map((e,l)=>t.createElement(C.G,{key:l,icon:E.Tab,style:{height:"15px",width:"15px",color:"var(--app-color-blue)"}})),Array(5-Math.round(le.Z(oe.Z,[ie.Z,te.Z])(y))).fill(0).map((e,l)=>t.createElement(C.G,{key:l,icon:E.Tab,style:{height:"15px",width:"15px",color:"lightgray"}}))),t.createElement("div",{className:se.simpleNames,style:{pointerEvents:"none",padding:"20px 10px 0 10px",color:"gray"}},(null===(r=e.options)||void 0===r?void 0:r.info)&&(null===e||void 0===e?void 0:e.open)&&(null===e||void 0===e?void 0:e.idx)==l&&t.createElement(t.Fragment,null,t.createElement("p",{style:{fontSize:"14px"}},"General Info:"),t.createElement(D.default,{rowStyleSelected:{border:"2px solid var(--app-color-gray-light)"},card:!0,isReport:!1,"app-variant-is-mobile":"true",columns:["First Name","Last Name","Phone","Address","City","Postal","Bio"],list:[o].map(e=>{var l,o,i,t,n,d;return{"First Name":"".concat(null!==(l=null===e||void 0===e?void 0:e.first_name)&&void 0!==l?l:""),"Last Name":"".concat(null!==(o=null===e||void 0===e?void 0:e.last_name)&&void 0!==o?o:""),Phone:"".concat(null!==(i=null===e||void 0===e?void 0:e.phone)&&void 0!==i?i:""),Address:"".concat(null!==(t=null===e||void 0===e?void 0:e.address)&&void 0!==t?t:""),City:"".concat(null!==(n=null===e||void 0===e?void 0:e.city)&&void 0!==n?n:""),Postal:"".concat(null!==(d=null===e||void 0===e?void 0:e.postal)&&void 0!==d?d:"")}})})),(null===(v=e.options)||void 0===v?void 0:v.other)&&(null===e||void 0===e?void 0:e.open)&&(null===e||void 0===e?void 0:e.idx)==l&&Object.keys(null!==(s=null===o||void 0===o||null===(u=o.options)||void 0===u?void 0:u.add_info)&&void 0!==s?s:{}).length>1&&t.createElement(t.Fragment,null,t.createElement("p",{style:{fontSize:"14px"}},"More Info:"),t.createElement(D.default,{rowStyleSelected:{border:"2px solid var(--app-color-gray-light)"},card:!0,isReport:!1,"app-variant-is-mobile":"true",columns:Object.keys(null!==(c=null===o||void 0===o||null===(p=o.options)||void 0===p?void 0:p.add_info)&&void 0!==c?c:{}),list:[o].map(e=>{var l,o;return(0,i.Z)((0,i.Z)({},null!==(l=null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.add_info)&&void 0!==l?l:{}),{},{Rate:""})})})),(null===(m=e.options)||void 0===m?void 0:m.info)&&(null===e||void 0===e?void 0:e.open)&&(null===o||void 0===o||null===(f=o.ratings)||void 0===f?void 0:f.length)>0&&t.createElement(t.Fragment,null,t.createElement("p",{style:{fontSize:"14px"}},"What other users say:"),t.createElement(D.default,{rowStyleSelected:{border:"2px solid var(--app-color-gray-light)"},card:!0,isReport:!1,columns:["Feedback"],list:null===o||void 0===o||null===(_=o.ratings)||void 0===_?void 0:_.map((e,l)=>({Feedback:'"'.concat(e.comments,'"')}))}))))))})));if("People"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(So=e.options)||void 0===So||null===(ko=So.position_id)||void 0===ko?void 0:ko.length)>0)return t.createElement(me.Z,{titleProps:{fontSize:"14px",color:"var(--app-color-gray-dark)",fontWeight:"normal",paddingLeft:"5px"},enabled:Yo,width:"100%",style:{marginTop:"0px",border:"0px solid var(--app-color-gray-lighter)",padding:"5px",marginBottom:"10px",backgroundColor:"var(--app-color-gray-lightest)"},editMode:Ce,showWidth:l=>{e.field_options=(0,i.Z)((0,i.Z)({},e.field_options),{},{width:"".concat(l,"px")})},dragEnd:l=>{var o;const i=null===(o=document.getElementById(null===S||void 0===S?void 0:S.name))||void 0===o?void 0:o.getBoundingClientRect();document.getElementById(e.field_name).style.position="absolute",document.getElementById(e.field_name).style.top="".concat(l.top-i.top,"px"),document.getElementById(e.field_name).style.left="".concat(l.left-i.left,"px")},key:l,fieldLabel:null!==(Ur=null===e||void 0===e||null===(Fr=e.options)||void 0===Fr?void 0:Fr.label)&&void 0!==Ur?Ur:e.field_name,notes:null===e||void 0===e||null===(Wr=e.options)||void 0===Wr?void 0:Wr.notes,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors},t.createElement("div",{style:{width:"100%"}},t.createElement(O.Z,{onOpen:e=>{_l("50px"===fl?"180px":"50px")},onFocus:()=>{var l;return 0==Me.length&&Ol(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.position_id)},visible:null===e||void 0===e?void 0:e.visible,mandatory:null===e||void 0===e?void 0:e.mandatory,titleProps:{fontSize:"12px",color:"var(--app-color-gray-light)"},className:se.dropdownClassContainer,items:Me.filter(l=>{var o,i;return(null===l||void 0===l||null===(o=l.user)||void 0===o||null===(i=o.positions)||void 0===i?void 0:i.filter(l=>{var o,i;return null===e||void 0===e||null===(o=e.options)||void 0===o||null===(i=o.position_id)||void 0===i?void 0:i.includes(null===l||void 0===l?void 0:l.id)}).length)>0}),value:"single"===(null===e||void 0===e||null===(qr=e.options)||void 0===qr?void 0:qr.type)?null===(Yr=Me.find(l=>l.label===(null===e||void 0===e?void 0:e.value)))||void 0===Yr?void 0:Yr.label:e.value,loading:je,error:null===e||void 0===e?void 0:e.errors,onChange:o=>{var i;if("single"===(null===e||void 0===e||null===(i=e.options)||void 0===i?void 0:i.type)){var t;const i=Me.find(e=>e.value===o);var n;if(1==(null===e||void 0===e||null===(t=e.options)||void 0===t?void 0:t.email))e.email=null===i||void 0===i||null===(n=i.user)||void 0===n?void 0:n.email;P(null===i||void 0===i?void 0:i.label,l)}else P(o,l);_l("50px")},onClicked:e=>_l(e?"180px":"50px"),selectionType:null===e||void 0===e||null===(Br=e.options)||void 0===Br?void 0:Br.type,fieldIcon:null===e||void 0===e?void 0:e.icon})));if("People"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(Zo=e.options)||void 0===Zo||null===(Io=Zo.componentF)||void 0===Io?void 0:Io.length)>0&&(null===e||void 0===e||null===(No=e.options)||void 0===No||null===(Do=No.componentO)||void 0===Do?void 0:Do.length)>0){var ms,fs,_s,ys,gs,hs,bs,xs;const o=null===(ms=z.components.find(l=>l.selected_fields.filter(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.componentF)}).length>0))||void 0===ms?void 0:ms.selected_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.componentF)}),n=ve.find(l=>{var i;return l.component_fields.filter(e=>e.value===(null===o||void 0===o?void 0:o.value)).length>0&&l.module_id===(null===e||void 0===e||null===(i=e.options)||void 0===i?void 0:i.module_id)}),d=null===n||void 0===n?void 0:n.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.componentO)});return t.createElement(me.Z,{titleProps:{fontSize:"14px",color:"var(--app-color-gray-dark)",fontWeight:"normal",paddingLeft:"5px"},enabled:Yo,width:"100%",style:{marginTop:"0px",border:"0px solid var(--app-color-gray-lighter)",padding:"5px",marginBottom:"10px",backgroundColor:"var(--app-color-gray-lightest)"},editMode:Ce,showWidth:l=>{e.field_options=(0,i.Z)((0,i.Z)({},e.field_options),{},{width:"".concat(l,"px")})},key:l,fieldLabel:null!==(fs=null===e||void 0===e||null===(_s=e.options)||void 0===_s?void 0:_s.label)&&void 0!==fs?fs:e.field_name,notes:null===e||void 0===e||null===(ys=e.options)||void 0===ys?void 0:ys.notes,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors},t.createElement("div",{style:{width:"100%"}},t.createElement(O.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-light)"},onFocus:()=>{var l;_l("180px"),0==Me.length&&Ol(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.position_id)},visible:null===e||void 0===e?void 0:e.visible,mandatory:null===e||void 0===e?void 0:e.mandatory,className:"multiple"===(null===e||void 0===e||null===(gs=e.options)||void 0===gs?void 0:gs.type)?se.dropdownHeightClassContainer:se.dropdownClassContainer,items:Me.filter(e=>{var l,o;return(null===e||void 0===e||null===(l=e.user)||void 0===l||null===(o=l.positions)||void 0===o?void 0:o.filter(e=>{var l;return null===d||void 0===d||null===(l=d.value)||void 0===l?void 0:l.split(",").includes(null===e||void 0===e?void 0:e.name)}).length)>0}),value:"single"===(null===e||void 0===e||null===(hs=e.options)||void 0===hs?void 0:hs.type)?null===(bs=Me.find(l=>l.label===(null===e||void 0===e?void 0:e.value)))||void 0===bs?void 0:bs.label:e.value,loading:je,error:null===e||void 0===e?void 0:e.errors,onChange:o=>{var i;if("single"===(null===e||void 0===e||null===(i=e.options)||void 0===i?void 0:i.type)){var t;const i=Me.find(e=>e.value===o);var n;if(1==(null===e||void 0===e||null===(t=e.options)||void 0===t?void 0:t.email))e.email=null===i||void 0===i||null===(n=i.user)||void 0===n?void 0:n.email;P(null===i||void 0===i?void 0:i.label,l)}else P(o,l);_l("50px")},onClicked:e=>_l(e?"180px":"50px"),selectionType:null===e||void 0===e||null===(xs=e.options)||void 0===xs?void 0:xs.type,fieldIcon:null===e||void 0===e?void 0:e.icon,placeholder:"Select user..."})))}if("People"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(To=e.options)||void 0===To||null===(Po=To.componentF)||void 0===Po?void 0:Po.length)>0&&(null===e||void 0===e||null===(Oo=e.options)||void 0===Oo||null===(Ao=Oo.componentUO)||void 0===Ao?void 0:Ao.length)>0){var Es,Cs,ws,Ms,Ss,ks,Zs,Is;const o=null===(Es=z.components.find(l=>l.selected_fields.filter(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.componentF)}).length>0))||void 0===Es?void 0:Es.selected_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.componentF)}),n=ve.filter(l=>{var o;return l.module_id===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.module_id)}).find(e=>e.component_fields.filter(e=>(null===e||void 0===e?void 0:e.value)===(null===o||void 0===o?void 0:o.value)).length>0),d=n?null===n||void 0===n?void 0:n.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.componentUO)}):"";return t.createElement(me.Z,{titleProps:{fontSize:"14px",color:"var(--app-color-gray-dark)",fontWeight:"normal",paddingLeft:"5px"},enabled:Yo,width:"100%",style:{marginTop:"0px",border:"0px solid var(--app-color-gray-lighter)",padding:"5px",marginBottom:"10px",backgroundColor:"var(--app-color-gray-lightest)"},editMode:Ce,showWidth:l=>{e.field_options=(0,i.Z)((0,i.Z)({},e.field_options),{},{width:"".concat(l,"px")})},key:l,fieldLabel:null!==(Cs=null===e||void 0===e||null===(ws=e.options)||void 0===ws?void 0:ws.label)&&void 0!==Cs?Cs:e.field_name,notes:null===e||void 0===e||null===(Ms=e.options)||void 0===Ms?void 0:Ms.notes,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors},t.createElement(O.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-light)"},onFocus:()=>{var l;return 0==Me.length&&Ol(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.position_id)},visible:null===e||void 0===e?void 0:e.visible,mandatory:null===e||void 0===e?void 0:e.mandatory,className:"multiple"===(null===e||void 0===e||null===(Ss=e.options)||void 0===Ss?void 0:Ss.type)?se.dropdownHeightClassContainer:se.dropdownClassContainer,items:Me.filter(e=>{var l;return null===d||void 0===d||null===(l=d.value)||void 0===l?void 0:l.split(",").includes(null===e||void 0===e?void 0:e.label)}),value:"single"===(null===e||void 0===e||null===(ks=e.options)||void 0===ks?void 0:ks.type)?null===(Zs=Me.find(l=>l.label===(null===e||void 0===e?void 0:e.value)))||void 0===Zs?void 0:Zs.label:e.value,loading:je,error:null===e||void 0===e?void 0:e.errors,onChange:o=>{var i;if("single"===(null===e||void 0===e||null===(i=e.options)||void 0===i?void 0:i.type)){var t;const i=Me.find(e=>e.value===o);var n;if(1==(null===e||void 0===e||null===(t=e.options)||void 0===t?void 0:t.email))e.email=null===i||void 0===i||null===(n=i.user)||void 0===n?void 0:n.email;P(null===i||void 0===i?void 0:i.label,l)}else P(o,l);_l("50px")},onClicked:e=>_l(e?"180px":"50px"),selectionType:null===e||void 0===e||null===(Is=e.options)||void 0===Is?void 0:Is.type,fieldIcon:null===e||void 0===e?void 0:e.icon,placeholder:"Select user..."}))}if("Status"===(null===e||void 0===e?void 0:e.data_type_name)){var Ns,Ds,Ts,Ps,Os,As,zs,Ls,Rs,Us,Fs,Ws,qs,Ys,Bs,Hs,js,Vs,Gs;let o=(null===(Ns=e.options)||void 0===Ns||null===(Ds=Ns.list)||void 0===Ds?void 0:Ds.length)>0?null===(Ts=e.options)||void 0===Ts||null===(Ps=Ts.list)||void 0===Ps?void 0:Ps.map(e=>({label:e,value:e})):1==(null===ce||void 0===ce||null===(Os=ce.processModule)||void 0===Os||null===(As=Os.module)||void 0===As||null===(zs=As.options)||void 0===zs?void 0:zs.asGraphical)?[{label:"Show",value:"Show"},{label:"Hide",value:"Hide"}]:(null===de||void 0===de||null===(Ls=de.misc_info)||void 0===Ls||null===(Rs=Ls.status)||void 0===Rs?void 0:Rs.length)>0?null===de||void 0===de||null===(Us=de.misc_info)||void 0===Us?void 0:Us.status:s.MO;var Js;if((null===de||void 0===de||null===(Fs=de.misc_info)||void 0===Fs||null===(Ws=Fs.rules)||void 0===Ws?void 0:Ws.length)>0)null===de||void 0===de||null===(Js=de.misc_info)||void 0===Js||Js.rules.filter(e=>"status"===e.type).filter(l=>{l.valueCondition===e.value&&(o="0"===l.allow?o.filter(o=>{var i;return l.values.concat(null===(i=e.options)||void 0===i?void 0:i.list).includes(o.value)}):o.filter(o=>{var i;return!l.values.concat(null===(i=e.options)||void 0===i?void 0:i.list).includes(o.value)}))});return null!==ce&&void 0!==ce&&null!==(qs=ce.processModule)&&void 0!==qs&&null!==(Ys=qs.module)&&void 0!==Ys&&null!==(Bs=Ys.options)&&void 0!==Bs&&Bs.canCancel&&(o=o.concat({label:"Request Cancellation",value:"Cancellation Request"})),t.createElement(me.Z,{titleProps:{fontSize:"14px",color:"var(--app-color-gray-dark)",fontWeight:"normal",paddingLeft:"5px"},enabled:Yo,width:"100%",style:{marginTop:"0px",border:"0px solid var(--app-color-gray-lighter)",padding:"5px",marginBottom:"10px",backgroundColor:"var(--app-color-gray-lightest)"},editMode:Ce,showWidth:l=>{e.field_options=(0,i.Z)((0,i.Z)({},e.field_options),{},{width:"".concat(l,"px")})},key:l,fieldLabel:null!==(Hs=null===e||void 0===e||null===(js=e.options)||void 0===js?void 0:js.label)&&void 0!==Hs?Hs:e.field_name,notes:null===e||void 0===e||null===(Vs=e.options)||void 0===Vs?void 0:Vs.notes,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors},t.createElement(O.Z,{titleProps:{fontSize:"14px",color:"var(--app-color-gray-dark)",fontWeight:"normal",paddingLeft:"5px"},className:se.multiselectComponentNoBorder,style:{border:"0px"},key:l,visible:e.visible,mandatory:e.mandatory,value:null!==(Gs=e.value)&&void 0!==Gs?Gs:"",items:o,error:e.errors,onClicked:e=>_l(e?"180px":"50px"),onChange:e=>{de.start=!0,_l("50px"),P(e,l);const o=S.selected_fields.find(l=>"Date"===l.data_type_name&l.field_name===e);o&&(o.value=new Date(b().now()))},fieldIcon:e.icon}))}if("Profile"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(zo=e.options)||void 0===zo||null===(Lo=zo.type)||void 0===Lo?void 0:Lo.length)>0){var Qs,Ks,Xs;let l=ke.id;if("creator"!==e.options.type&&"wallet"!==e.options.type||null===k||void 0===k||null===(Qs=k.created_by)||void 0===Qs||!Qs.id)if("creator"!==e.options.type&&"wallet"!==e.options.type||null!==k&&void 0!==k&&null!==(Ks=k.created_by)&&void 0!==Ks&&Ks.id)if("owner"===e.options.type){var $s;l=null!==k&&void 0!==k&&k.options?null===($s=JSON.parse(null===k||void 0===k?void 0:k.options))||void 0===$s?void 0:$s.owner:""}else{if("custom"!==e.options.type)return null;var eu;l=null===e||void 0===e||null===(eu=e.options)||void 0===eu?void 0:eu.id}else l=ke.id;else l=k.user_id;return(null===(Xs=l)||void 0===Xs?void 0:Xs.length)>0?(null===ye||void 0===ye?void 0:ye.length)>0&&(null===ye||void 0===ye?void 0:ye.filter(e=>e.id===l).map((l,o)=>{var i,n,d,a,r,v;return t.createElement("div",{className:se.centerDiv,key:o},"wallet"===e.options.type?t.createElement(D.default,{modern:!0,columns:["Name","Wallet","Email","Photo"],list:[{Name:"".concat(null===l||void 0===l?void 0:l.first_name," ").concat(null===l||void 0===l?void 0:l.last_name),Wallet:"".concat(null===(i=l.wallet)||void 0===i?void 0:i.toFixed(2)),Email:null===l||void 0===l?void 0:l.email,Photo:l.photo}]}):t.createElement(Te.Z,{photo:null===l||void 0===l?void 0:l.photo,noPhoto:0==(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.show),firstName:"".concat(null===l||void 0===l?void 0:l.first_name),lastName:"".concat(null===l||void 0===l?void 0:l.last_name),position:null===l||void 0===l||null===(d=l.positions)||void 0===d||null===(a=d.slice(0,1))||void 0===a?void 0:a.map(e=>e.name),email:null===l||void 0===l?void 0:l.email,cardClicked:()=>{},width:y.tq?"100%":""}),(null===e||void 0===e||null===(r=e.options)||void 0===r?void 0:r.notes)&&t.createElement("p",null,null===e||void 0===e||null===(v=e.options)||void 0===v?void 0:v.notes))})):null}if("Pin"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(Ro=e.options)||void 0===Ro||null===(Uo=Ro.pintype)||void 0===Uo?void 0:Uo.length)>0)return t.createElement(me.Z,{style:{border:"0",width:"100%"},enabled:Yo,key:l,fieldLabel:null!==(Hr=null===e||void 0===e||null===(jr=e.options)||void 0===jr?void 0:jr.label)&&void 0!==Hr?Hr:e.field_name,notes:null===e||void 0===e||null===(Vr=e.options)||void 0===Vr?void 0:Vr.notes,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors},null!==e&&void 0!==e&&null!==(Gr=e.options)&&void 0!==Gr&&Gr.source||null!==(Jr=e.options)&&void 0!==Jr&&Jr.destination?t.createElement("div",{style:{color:"var(--app-color-gray-dark)",height:"inherit",width:"100%",display:null!==e&&void 0!==e&&e.visible?"":"none"}},t.createElement("div",{className:se.filtersContainer,style:{color:"var(--app-color-gray-dark)",height:"inherit",width:"100%",display:null!==e&&void 0!==e&&e.visible?"":"none"}},t.createElement("div",{className:se.actionsContainer,style:{fontSize:"12px"},onClick:()=>{ml({source:!0,destination:!1,field:e,index:l})}},t.createElement("div",{style:{width:"30%",textAlign:"left"}},t.createElement(C.G,{icon:1==(null===e||void 0===e||null===(Qr=e.options)||void 0===Qr?void 0:Qr.destination)?E.W3K:E.opg,style:{width:"20px",height:"20px",marginRight:"5px",color:"blue"}}),1==(null===e||void 0===e||null===(Kr=e.options)||void 0===Kr?void 0:Kr.destination)?"From":"Pin",":"),t.createElement("div",{style:{width:"70%",textAlign:"left"}},null!==e&&void 0!==e&&e.value?null===(Xr=JSON.parse(e.value))||void 0===Xr||null===($r=Xr.source)||void 0===$r?void 0:$r.address:"")),1==(null===e||void 0===e||null===(ev=e.options)||void 0===ev?void 0:ev.destination)&&t.createElement("hr",{style:{borderTop:"0.5px solid #D2D2D2"}}),1==(null===e||void 0===e||null===(lv=e.options)||void 0===lv?void 0:lv.destination)&&t.createElement("div",{className:se.actionsContainer,style:{fontSize:"12px"},onClick:()=>{ml({source:!1,destination:!0,field:e,index:l})}},t.createElement("div",{style:{width:"30%",textAlign:"left"}},t.createElement(C.G,{icon:E.opg,style:{width:"20px",height:"20px",marginRight:"5px",color:"green"}}),"To",":"),t.createElement("div",{style:{width:"70%",textAlign:"left"}},null!==e&&void 0!==e&&e.value?null===(ov=JSON.parse(e.value))||void 0===ov||null===(iv=ov.destination)||void 0===iv?void 0:iv.address:""))),(null===pl||void 0===pl?void 0:pl.source)&&t.createElement(f.U7,{hasCloseIcon:!0,blured:!1,scrollable:!0,isOpen:pl.source,shadowedContainerStyle:{width:"100%"},onClose:()=>ml({source:!1,destination:!1})},t.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",marginTop:"30px"}},t.createElement("div",{className:se.title},null!==(tv=null===pl||void 0===pl||null===(nv=pl.field)||void 0===nv?void 0:nv.field_name)&&void 0!==tv?tv:"Origin:"),t.createElement(xe.Z,{zoom:null===pl||void 0===pl||null===(dv=pl.field)||void 0===dv||null===(av=dv.options)||void 0===av?void 0:av.zoom,value:null===(rv=JSON.parse(null!==(vv=null===pl||void 0===pl||null===(sv=pl.field)||void 0===sv?void 0:sv.value)&&void 0!==vv?vv:JSON.stringify({source:{},destination:{}})))||void 0===rv?void 0:rv.source,onChange:o=>{var i,t,n,d,a,r,v,u,c,p;const m=null!==pl&&void 0!==pl&&null!==(i=pl.field)&&void 0!==i&&i.value?JSON.parse(null===pl||void 0===pl||null===(t=pl.field)||void 0===t?void 0:t.value):{source:{lat:0,lng:0,address:""},destination:{lat:0,lng:0,address:""}};if(m.source.lat=o.geometry.location.lat,m.source.lng=o.geometry.location.lng,m.source.address=o.formatted_address,null!==pl&&void 0!==pl&&pl.field&&(null===(n=e.options)||void 0===n||!n.compute))return N(JSON.stringify(m),pl.index),void ml({source:!1,destination:!1});let f=null===S||void 0===S||null===(d=S.selected_fields)||void 0===d?void 0:d.find(e=>{var l;return"distance"===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.mapToItem)});var _,y,g,h,b,x,E,C,w,M,k,Z;f||(f=null===(_=z.newStepComponents)||void 0===_||null===(y=_.find(e=>{var l;return(null===(l=e.selected_fields)||void 0===l?void 0:l.filter(e=>{var l;return"distance"===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.mapToItem)}).length)>0}))||void 0===y||null===(g=y.selected_fields)||void 0===g?void 0:g.find(e=>{var l;return"distance"===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.mapToItem)}),f||(f=null===(h=z.components)||void 0===h||null===(b=h.find(e=>{var l;return(null===(l=e.selected_fields)||void 0===l?void 0:l.filter(e=>{var l;return"distance"===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.mapToItem)}).length)>0}))||void 0===b||null===(x=b.selected_fields)||void 0===x?void 0:x.find(e=>{var l;return"distance"===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.mapToItem)}),f||(f=null===(E=ce.processModule)||void 0===E||null===(C=E.steps[null!==(k=null===(Z=ce.processModule)||void 0===Z?void 0:Z.stepIndex)&&void 0!==k?k:1].component_blueprints)||void 0===C||null===(w=C.find(e=>{var l;return(null===(l=e.selected_fields)||void 0===l?void 0:l.filter(e=>{var l;return"distance"===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.mapToItem)}).length)>0}))||void 0===w||null===(M=w.selected_fields)||void 0===M?void 0:M.find(e=>{var l;return"distance"===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.mapToItem)}))));if(null!==m&&void 0!==m&&m.source&&null!==(a=e.options)&&void 0!==a&&a.compute&&0==(null===(r=e.options)||void 0===r?void 0:r.destination))m.distance=(0,s.Iw)(m.source.lat,m.source.lng,Ue.latitude,Ue.longitude),m.duration=0,f&&(f.value=m.distance,f.disabled=!0),N(JSON.stringify(m),l);else if(null!==(v=m.source)&&void 0!==v&&v.address&&null!==pl&&void 0!==pl&&null!==(u=pl.field.options)&&void 0!==u&&u.compute){var I;null===(I=(0,Pe.Y)(m.source.address,m.destination.address))||void 0===I||I.subscribe({next:e=>{var l;if((null===e||void 0===e||null===(l=e.routes)||void 0===l?void 0:l.length)>0){var o;const l=e.routes[0];var i,t,n,d;if((null===l||void 0===l||null===(o=l.legs)||void 0===o?void 0:o.length)>0)m.distance=(null===(i=l.legs[0])||void 0===i||null===(t=i.distance)||void 0===t?void 0:t.value)/1e3,m.duration=null===(n=l.legs[0])||void 0===n||null===(d=n.duration)||void 0===d?void 0:d.value,m.steps=l.legs[0].steps,f&&(f.value=m.distance,f.disabled=!0)}},error:e=>{m.distance=(0,s.Iw)(m.source.lat,m.source.lng,m.destination.lat,m.destination.lng),m.duration=0,f&&(f.value=m.distance,f.disabled=!0)}})}else null!==(c=m.source)&&void 0!==c&&c.address&&(m.distance=(0,s.Iw)(m.source.lat,m.source.lng,m.destination.lat,m.destination.lng),m.duration=0,f&&(f.value=m.distance));N(JSON.stringify(m),null!==(p=null===pl||void 0===pl?void 0:pl.index)&&void 0!==p?p:l),ml({source:!1,destination:!1})},mapkey:null===(uv=de.misc_info)||void 0===uv?void 0:uv.map}))),(null===pl||void 0===pl?void 0:pl.destination)&&t.createElement(f.U7,{hasCloseIcon:!0,blured:!1,scrollable:!0,isOpen:pl.destination,shadowedContainerStyle:{width:"100%"},shadowedContainerClassname:se.mappopup,onClose:()=>ml({source:!1,destination:!1})},t.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"}},t.createElement("div",{className:se.title},null!==(cv=null===pl||void 0===pl||null===(pv=pl.field)||void 0===pv?void 0:pv.field_name)&&void 0!==cv?cv:"Destination:"),t.createElement(xe.Z,{value:null===(mv=JSON.parse(null!==(fv=null===pl||void 0===pl||null===(_v=pl.field)||void 0===_v?void 0:_v.value)&&void 0!==fv?fv:JSON.stringify({source:{},destination:{}})))||void 0===mv?void 0:mv.destination,zoom:null===pl||void 0===pl||null===(yv=pl.field)||void 0===yv||null===(gv=yv.options)||void 0===gv?void 0:gv.zoom,onChange:e=>{var l,o,i,t,n,d;const a=null!==pl&&void 0!==pl&&null!==(l=pl.field)&&void 0!==l&&l.value?JSON.parse(null===pl||void 0===pl||null===(o=pl.field)||void 0===o?void 0:o.value):{destination:{lat:0,lng:0,address:""},source:{lat:0,lng:0,address:""}};let r=null===S||void 0===S||null===(i=S.selected_fields)||void 0===i?void 0:i.find(e=>{var l;return"distance"===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.mapToItem)});var v,u,c,p,m,f,_;r||(r=null===(v=z.newStepComponents)||void 0===v||null===(u=v.find(e=>{var l;return(null===(l=e.selected_fields)||void 0===l?void 0:l.filter(e=>{var l;return"distance"===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.mapToItem)}).length)>0}))||void 0===u||null===(c=u.selected_fields)||void 0===c?void 0:c.find(e=>{var l;return"distance"===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.mapToItem)}),r||(r=null===(p=z.components)||void 0===p||null===(m=p.find(e=>{var l;return(null===(l=e.selected_fields)||void 0===l?void 0:l.filter(e=>{var l;return"distance"===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.mapToItem)}).length)>0}))||void 0===m||null===(f=m.selected_fields)||void 0===f?void 0:f.find(e=>{var l;return"distance"===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.mapToItem)})));(a.destination.lat=e.geometry.location.lat,a.destination.lng=e.geometry.location.lng,a.destination.address=e.formatted_address,null!==(t=a.destination)&&void 0!==t&&t.address&&null!==pl&&void 0!==pl&&null!==(n=pl.field.options)&&void 0!==n&&n.compute)?null===(_=(0,Pe.Y)(a.source.address,a.destination.address))||void 0===_||_.subscribe({next:e=>{var l;if((null===e||void 0===e||null===(l=e.routes)||void 0===l?void 0:l.length)>0){var o;const l=e.routes[0];var i,t,n,d;if((null===l||void 0===l||null===(o=l.legs)||void 0===o?void 0:o.length)>0)a.distance=(null===(i=l.legs[0])||void 0===i||null===(t=i.distance)||void 0===t?void 0:t.value)/1e3,a.duration=null===(n=l.legs[0])||void 0===n||null===(d=n.duration)||void 0===d?void 0:d.value,a.steps=l.legs[0].steps,r&&(r.value=a.distance)}},error:e=>{a.distance=(0,s.Iw)(a.source.lat,a.source.lng,a.destination.lat,a.destination.lng),a.duration=0,r&&(r.value=a.distance)}}):null!==(d=a.destination)&&void 0!==d&&d.address&&(a.distance=(0,s.Iw)(a.source.lat,a.source.lng,a.destination.lat,a.destination.lng),a.duration=0,r&&(r.value=a.distance));N(JSON.stringify(a),null===pl||void 0===pl?void 0:pl.index),ml({source:!1,destination:!1})},mapkey:null===(hv=de.misc_info)||void 0===hv?void 0:hv.map})))):t.createElement(xe.Z,{zoom:null===pl||void 0===pl||null===(bv=pl.field)||void 0===bv||null===(xv=bv.options)||void 0===xv?void 0:xv.zoom,key:l,value:null===S||void 0===S?void 0:S.selected_fields[l].value,onLocationChange:e=>ne(e,l),mapkey:null===(Ev=de.misc_info)||void 0===Ev?void 0:Ev.map}));if("Map"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(Fo=e.options)||void 0===Fo||null===(Wo=Fo.maptype)||void 0===Wo?void 0:Wo.length)>0)return t.createElement(me.Z,{enabled:Yo,width:"100%",editMode:Ce,showWidth:l=>{e.field_options=(0,i.Z)((0,i.Z)({},e.field_options),{},{width:"".concat(l,"px")})},key:l,fieldLabel:null!==(Cv=null===e||void 0===e||null===(wv=e.options)||void 0===wv?void 0:wv.label)&&void 0!==Cv?Cv:e.field_name,notes:null===e||void 0===e||null===(Mv=e.options)||void 0===Mv?void 0:Mv.notes,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors},t.createElement(Ze,{key:l,value:null===S||void 0===S?void 0:S.selected_fields[l].value,onLocationChange:e=>ne(e,l)}));if("Summary"===(null===e||void 0===e?void 0:e.data_type_name)){var lu,ou,iu,tu;let o={};return z.components.map(e=>e.selected_fields.filter(e=>(null===e||void 0===e?void 0:e.value)&&!("Pin"===e.data_type_name||"Lookup"===e.data_type_name||"Record"===e.data_type_name||"Ratings"===e.data_type_name||"People"===e.data_type_name||"Positions"===e.data_type_name||"Notes"===e.data_type_name||"URL"===e.data_type_name||"Summary"===e.data_type_name||"Info"===e.data_type_name)&&1==e.visible).map(e=>{var l,i;(0,s.gD)(null!==(l=null===e||void 0===e?void 0:e.value)&&void 0!==l?l:"")?o[e.field_name]="":o[e.field_name]="".concat(null!==(i=null===e||void 0===e?void 0:e.value)&&void 0!==i?i:"")})),(null!==(lu=null===k||void 0===k?void 0:k.component_fields)&&void 0!==lu?lu:[]).filter(e=>(null===e||void 0===e?void 0:e.value)&&!("Pin"===e.data_type_name||"Lookup"===e.data_type_name||"Record"===e.data_type_name||"Ratings"===e.data_type_name||"People"===e.data_type_name||"Positions"===e.data_type_name||"Notes"===e.data_type_name||"URL"===e.data_type_name||"Summary"===e.data_type_name||"Info"===e.data_type_name)).forEach(e=>{var l;return o[e.field_name]="".concat(null!==(l=null===e||void 0===e?void 0:e.value)&&void 0!==l?l:"")}),z.newStepComponents.map(e=>e.selected_fields.filter(e=>!("Pin"===e.data_type_name||"Lookup"===e.data_type_name||"Record"===e.data_type_name||"Ratings"===e.data_type_name||"People"===e.data_type_name||"Positions"===e.data_type_name||"Notes"===e.data_type_name||"URL"===e.data_type_name)&&1==e.visible).map(e=>{var l,i;(0,s.gD)(null!==(l=null===e||void 0===e?void 0:e.value)&&void 0!==l?l:"")?o[e.field_name]="":o[e.field_name]="".concat(null!==(i=null===e||void 0===e?void 0:e.value)&&void 0!==i?i:"")})),t.createElement(me.Z,{titleProps:{fontSize:"14px",color:"var(--app-color-gray-dark)",fontWeight:"normal",paddingLeft:"5px"},style:{border:"0px"},enabled:Yo,width:"100%",editMode:Ce,showWidth:l=>{e.field_options=(0,i.Z)((0,i.Z)({},e.field_options),{},{width:"".concat(l,"px")})},key:l,fieldLabel:null!==(ou=null===e||void 0===e||null===(iu=e.options)||void 0===iu?void 0:iu.label)&&void 0!==ou?ou:e.field_name,notes:null===e||void 0===e||null===(tu=e.options)||void 0===tu?void 0:tu.notes,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors},t.createElement("div",{style:{width:"100%"}},Object.keys(o).map((e,l)=>o[e]&&t.createElement("div",{key:l,style:{width:"100%",borderBottom:"1px solid lightgray",padding:"20px 5px 20px 5px",fontFamily:"var(--app-text-font-mobile)"}},t.createElement("div",{style:{fontSize:"18px",fontWeight:"600",width:"100%",color:"var(--app-color-gray-dark)",textAlign:"left"}},"".concat(o[e]).toUpperCase()),t.createElement(f.zx,{title:"".concat(e),style:{height:"24px",backgroundColor:"var(--app-color-blue)"}})))))}return"Currency"===(null===e||void 0===e?void 0:e.data_type_name)&&null!==e&&void 0!==e&&null!==(qo=e.options)&&void 0!==qo&&qo.currency_type?t.createElement(me.Z,{titleProps:{fontSize:"14px",color:"var(--app-color-gray-dark)",fontWeight:"normal",paddingLeft:"5px"},style:{border:"1px solid var(--app-color-gray-lighter)"},enabled:Yo,width:"100%",editMode:Ce,showWidth:l=>{e.field_options=(0,i.Z)((0,i.Z)({},e.field_options),{},{width:"".concat(l,"px")})},key:l,fieldLabel:null!==(Sv=null===e||void 0===e||null===(kv=e.options)||void 0===kv?void 0:kv.label)&&void 0!==Sv?Sv:e.field_name,notes:null===e||void 0===e||null===(Zv=e.options)||void 0===Zv?void 0:Zv.notes,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors},t.createElement("div",{style:{width:"inherit",display:"flex"}},t.createElement("div",{onClick:()=>Ve(!je),className:se.currencySymbol},null!==e&&void 0!==e&&null!==(Iv=e.options)&&void 0!==Iv&&Iv.symbol?null===e||void 0===e||null===(Nv=e.options)||void 0===Nv?void 0:Nv.symbol:""," "),je&&t.createElement(f.Ld,{items:s.s3,defaultSelectedItem:{label:null===e||void 0===e||null===(Dv=e.options)||void 0===Dv?void 0:Dv.currency_type,value:null===e||void 0===e||null===(Tv=e.options)||void 0===Tv?void 0:Tv.country_code},triggerType:"chevron",className:se.currencySelectComponent,inputClassName:se.currencySearchInput,inputContainerClassName:se.currencyInputContainerClassName,clearControlsClassName:se.currencyClearControlsClassName,molclassname:se.currencySelectMenuOverlayList,moliclassname:se.currencySelectMenuOverlayListItem,onChange:e=>{z.currency=e.value,K(e,l),Ve(!1)}}),!je&&t.createElement("input",{type:"number",autoComplete:"off",value:null!==(Pv=S.selected_fields[l].value)&&void 0!==Pv?Pv:0,className:se.currencyInput,onChange:e=>{N(e.target.value,l)}}))):t.createElement(me.Z,{titleProps:{fontSize:"14px",color:"var(--app-color-gray-dark)",fontWeight:"normal",paddingLeft:"5px"},enabled:Yo,width:"100%",style:{marginTop:"0px",border:"0px solid var(--app-color-gray-lighter)",padding:"5px",marginBottom:"10px",backgroundColor:"var(--app-color-gray-lightest)"},editMode:Ce,showWidth:l=>{e.field_options=(0,i.Z)((0,i.Z)({},e.field_options),{},{width:"".concat(l,"px")})},key:l,fieldLabel:null!==(Ov=null===e||void 0===e||null===(Av=e.options)||void 0===Av?void 0:Av.label)&&void 0!==Ov?Ov:e.field_name,notes:null===e||void 0===e||null===(zv=e.options)||void 0===zv?void 0:zv.notes,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors,customIconBgColor:"white"},"file"===e.data_type?t.createElement(Xe,{notes:null===e||void 0===e||null===(Lv=e.options)||void 0===Lv?void 0:Lv.notes,field_id:e.id,value:null===e||void 0===e?void 0:e.value,isInherited:U,checkIfAreMandatoryErrored:Y,options:null===e||void 0===e?void 0:e.options,index:l,indexInContextArray:T}):"date"===e.data_type||null!==e&&void 0!==e&&null!==(Rv=e.options)&&void 0!==Rv&&Rv.country_code||null!==e&&void 0!==e&&null!==(Uv=e.options)&&void 0!==Uv&&Uv.currency_type||"Number"===e.data_type_name?t.createElement("div",{style:{width:"inherit"}},"date"===e.data_type?"Range"===(null===e||void 0===e||null===(Fv=e.options)||void 0===Fv?void 0:Fv.type)?t.createElement(f.$m,{inputContainerClassName:se.inputContainerClassName,dateChangeHandler:e=>Tl(e,l),startDate:ol,endDate:il}):null!==e&&void 0!==e&&null!==(Wv=e.options)&&void 0!==Wv&&Wv.time?t.createElement("div",{style:{width:"100%",height:"auto",border:"0"}},t.createElement(pe(),{showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:5,customInput:t.createElement("div",{id:"custom-input",style:{cursor:"pointer",display:"flex",justifyContent:"center",width:"100%",alignItems:"stretch",padding:"5px",border:"0px solid var(--app-color-gray-lighter)"}},t.createElement("input",{value:e.value?b()(e.value).format("DD MMMM YYYY HH:mm"):"",readOnly:!0,type:"text",style:{flex:1,marginTop:"auto",marginBottom:"auto",outline:"none",fontFamily:"var(--app-text-font-mobile)",fontSize:"16px",lineHeight:"20px",color:"#4A4A4A",textAlign:"left",maxWidth:"98%",border:"0px"},onChange:e=>{}}),t.createElement(C.G,{icon:E.WRo,style:{marginLeft:"10px",width:"14px",height:"14px"}})),className:se.singleInputContainer,selected:null!==e&&void 0!==e&&e.value?new Date(b()(null===e||void 0===e?void 0:e.value)):(0,h.now)(),onChange:e=>{e>(0,h.now)()&&Pl(e,l)}})):t.createElement(f.X9,{toggleDP:e=>_l(!0===e?"240px":"50px"),value:void 0==e.value?"":b()(new Date(e.value)).format("Do MMMM YYYY"),dateChangeHandler:e=>Pl(e,l),selected:new Date(b()(Ge,"YYYY-MM-DD")),iconClassName:se.calendar,inputContainerClassName:se.singleInputContainer,inputStyle:{textAlign:"left",border:"none",height:"auto",fontSize:"16px"},hasCalendarIcon:!0}):null!==e&&void 0!==e&&null!==(qv=e.options)&&void 0!==qv&&qv.country_code?t.createElement("div",{style:{padding:"10px"}},t.createElement(be(),{specialLabel:"",value:S.selected_fields[l].value,country:null===e||void 0===e||null===(Yv=e.options)||void 0===Yv?void 0:Yv.country_code,onChange:(e,o,i)=>{H(o,l,i.target.value)},inputClass:se.phoneIInput,inputProps:{style:{border:"0",backgroundColor:"transparent"}}})):t.createElement("input",{onBlur:o=>Qe(e.data_type_name,o.target.value,T,l,z),type:e.data_type,onChange:e=>{N(e.target.value,l)},autoComplete:"none",value:S.selected_fields[l].value?S.selected_fields[l].value:""===Je(null===e||void 0===e?void 0:e.options)?"":Je(null===e||void 0===e?void 0:e.options),placeholder:"Number"===S.selected_fields[l].data_type_name?"0":"",className:se.fieldTypeInput,style:{border:"0"},name:e.field_name,disabled:null!==(Bv=S.selected_fields[l].disabled)&&void 0!==Bv&&Bv})):"Long Text"===e.data_type_name?t.createElement("textarea",{className:se.fieldTypeTextarea,onBlur:o=>Qe(e.data_type_name,o.target.value,T,l,z),type:e.data_type,value:S.selected_fields[l].value?S.selected_fields[l].value:""===Je(null===e||void 0===e?void 0:e.options)?"":Je(null===e||void 0===e?void 0:e.options),onFocus:()=>{},disabled:null!==(Hv=S.selected_fields[l].disabled)&&void 0!==Hv&&Hv,autoComplete:"none",onChange:e=>{N(e.target.value,l)},placeholder:"Number"===S.selected_fields[l].data_type_name?"0":"",name:e.field_name,style:{border:"0"}}):t.createElement("input",{onBlur:o=>Qe(e.data_type_name,o.target.value,T,l,z),type:e.data_type,onChange:e=>{N(e.target.value,l)},autoComplete:"none",value:S.selected_fields[l].value?S.selected_fields[l].value:""===Je(null===e||void 0===e?void 0:e.options)?"":Je(null===e||void 0===e?void 0:e.options),placeholder:"Number"===S.selected_fields[l].data_type_name?"0":"",className:se.fieldTypeInput,name:e.field_name,disabled:null!==(jv=S.selected_fields[l].disabled)&&void 0!==jv&&jv,style:{border:"0"}}))}return t.createElement(me.Z,{enabled:Yo,width:"100%",style:{backgroundColor:"var(--app-color-gray-lightest)",padding:"10px"},editMode:Ce,key:l,fieldLabel:null!==(or=null===e||void 0===e||null===(ir=e.options)||void 0===ir?void 0:ir.label)&&void 0!==or?or:e.field_name,notes:null===e||void 0===e||null===(tr=e.options)||void 0===tr?void 0:tr.notes,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors},t.createElement("div",{style:{width:"100%",height:"auto",border:"0px solid var(--app-color-gray-light)"}},t.createElement(pe(),{showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:5,customInput:t.createElement("div",{id:"custom-input",style:{cursor:"pointer",display:"flex",justifyContent:"center",width:"100%",alignItems:"stretch",padding:"5px",border:"0px solid var(--app-color-gray-lighter)",color:"black"}},t.createElement(C.G,{icon:E.WRo,style:{marginLeft:"10px",width:"14px",height:"14px"}}),t.createElement("input",{disabled:!0,value:e.value?b()(e.value).format("DD MMMM YYYY HH:mm"):"",type:"text",style:{flex:1,marginTop:"auto",marginBottom:"auto",outline:"none",fontFamily:"var(--app-text-font-mobile)",fontSize:"16px",lineHeight:"20px",color:"black",textAlign:"left",width:"80%",border:"0px"},onChange:e=>{}})),className:se.singleInputContainer,selected:null!==e&&void 0!==e&&e.value?new Date(b()(null===e||void 0===e?void 0:e.value)):(0,h.now)(),onChange:e=>{e>(0,h.now)()&&Pl(e,l)}})))}{var nu,du,au,ru,vu,su;const o={item_code:null,quantity:null,value:null,alt_value:null,total:null},n=Object.entries(Object.assign(o,e.options.map)).reduce((e,l)=>{let[o,i]=l;return null===i||(e[o]=i),e},{});return t.createElement(me.Z,{fieldLabel:null===e||void 0===e?void 0:e.field_name,enabled:Yo,width:"100%",editMode:Ce,showWidth:l=>{e.options=(0,i.Z)((0,i.Z)({},e.options),{},{width:"".concat(l,"px")})},style:{border:"0",padding:"0",marginTop:"50px"},key:l,visible:e.visible,notes:null===e||void 0===e||null===(nu=e.options)||void 0===nu?void 0:nu.notes,error:(null===(du=e.errors)||void 0===du?void 0:du.length)>0?"".concat(e.errors):""},t.createElement(D.default,{modern:!!y.tq,className:se.itemsContainer,columns:null===S||void 0===S||null===(au=S.selected_fields)||void 0===au?void 0:au.filter(e=>{var l;return null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.mapToItem}).map(e=>e.field_name).concat(["Actions"]),list:null===(ru=G.Z([ee.Z(Q.Z("index"))])(null!==(vu=null!==e&&void 0!==e&&null!==(su=e.options)&&void 0!==su&&su.type?z.items.filter(l=>{var o;return l.type===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.type)}):z.items)&&void 0!==vu?vu:[]))||void 0===ru?void 0:ru.map((e,l)=>{e.index=l;let o={index:l,Actions:t.createElement("div",{style:{display:"flex",justifyContent:"space-evenly",minWidth:"80px"}},!(null!==e&&void 0!==e&&e.edit)&&t.createElement(C.G,{icon:E.IwR,onClick:()=>{e.edit=!0,L({action:_._U.setModuleItems,value:[...z.items.filter(l=>l.id!==e.id),e]})}}),(null===e||void 0===e?void 0:e.edit)&&t.createElement(C.G,{icon:E.EsX,onClick:()=>{e.edit=!1,L({action:_._U.setModuleItems,value:[...z.items.filter(l=>l.id!==e.id),e]})}}),(null===e||void 0===e?void 0:e.edit)&&t.createElement(C.G,{icon:E.$aW,onClick:()=>{L({action:_._U.setModuleItems,value:z.items.filter(l=>l.id!==e.id)})}}))};return Object.entries(null!==n&&void 0!==n?n:[]).forEach(n=>{var d,a,r;o[n[1]]=t.createElement("div",{style:{padding:null!==e&&void 0!==e&&e.edit?"5px":""}},t.createElement(Fl,{index:l,enabled:!0,edit:null!==(d=null===e||void 0===e?void 0:e.edit)&&void 0!==d&&d,isItem:!0,item:e,field:(0,i.Z)((0,i.Z)({},null!==(a=null===S||void 0===S||null===(r=S.selected_fields)||void 0===r?void 0:r.find(e=>{var l;return(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.mapToItem)===n[0]}))&&void 0!==a?a:{}),{},{visible:!0,value:e[n[0]]}),withLabel:!1,handleItem:(l,o)=>{e[n[0]]!==l&&(e[n[0]]=l,L({action:_._U.setModuleItems,value:[...z.items.filter(l=>l.id!==e.id),e]}))}}))}),o})}))}}var uu}));return t.createElement("div",{id:null===S||void 0===S?void 0:S.name,className:se.emulatedFlexGap,style:{width:"100%",position:"relative",marginBottom:fl,padding:"30px 10px 10px 10px"}},Wl,(null===hl||void 0===hl||null===(n=hl.candidates)||void 0===n?void 0:n.length)>0&&t.createElement(me.Z,{width:"80%",fieldLabel:"Response",visible:!0},t.createElement("textarea",{className:se.fullLengthTextarea,type:"text",onFocus:()=>{},disabled:!0,value:null===hl||void 0===hl||null===(d=hl.candidates[0])||void 0===d||null===(x=d.content.parts[0])||void 0===x?void 0:x.text})))}),Xe=e=>{var l;const{notes:o="",options:i,field_id:n,index:d,indexInContextArray:a,value:r,checkIfAreMandatoryErrored:s}=e,[u,c]=(0,t.useState)(),[p,m]=(0,t.useState)(!1),[f,g]=(0,_.pQ)();return t.createElement("div",{style:{width:"inherit",flexDirection:"column",fontSize:"12px"}},t.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",flex:"1 1",overflow:"hidden",fontSize:"14px"}},t.createElement("u",{onClick:()=>{var e;null===(e=document.getElementById("file-change-".concat(n)))||void 0===e||e.click()},style:{cursor:"pointer",marginLeft:"2px",wordWrap:"break-word"}},null!==u&&void 0!==u&&u.name||r?"File":"Click to upload file..."),t.createElement("input",{accept:"."+(null===i||void 0===i||null===(l=i.accepted_mimes)||void 0===l?void 0:l.replace(/,/g,",.")),type:"file",onChange:()=>(e=>{var l,o;const i=document.getElementById("file-change-".concat(n)).files[0],t=((null===i||void 0===i?void 0:i.size)/1024/1024).toFixed(4),r=(e/1024).toFixed(4);m(!0);const u=[...null!==(l=null===(o=f.currentStep)||void 0===o?void 0:o.component_blueprints)&&void 0!==l?l:[]];t>r?alert("File is too big!"):(0,v.kf)(i,n).subscribe({next:e=>{c(i),m(!1),u[a].selected_fields[d].value=null===e||void 0===e?void 0:e.file_url,u[a].selected_fields[d].value&&u[a].selected_fields[d].mandatory&&(u[a].selected_fields[d].errors=""),s(),g({action:_._U.setComponentBlueprints,value:u}),g({action:_._U.setModuleNewStepComponents,value:u})}})})(null===i||void 0===i?void 0:i.max_file_size),style:{position:"absolute",visibility:"hidden",width:"0px"},id:"file-change-".concat(n),className:se.fieldTypeInput}),p&&t.createElement(Ie.Z,{type:y.G6?"Watch":"Puff",color:"#4A4A4A",secondaryColor:"gray",radius:22,height:22,width:"22px"}),(null===u||void 0===u?void 0:u.type)&&t.createElement($e,{fileType:null===u||void 0===u?void 0:u.type})))},$e=e=>"application/pdf"===(null===e||void 0===e?void 0:e.fileType)?t.createElement("img",{alt:"",src:Z.ed}):t.createElement("img",{alt:"",src:Z.dm}),el=(0,t.memo)(e=>{const{children:l,nav:o,openNav:i,title:n}=e;return t.createElement(f.U7,{onClose:i,blured:!1,scrollable:!0,isOpen:o,shadowedContainerStyle:{width:"100%",minWidth:"50%",minHeight:"400px"},shadowedContainerClassname:se.popup},t.createElement("div",{style:{width:"inherit",height:"inherit"},onClick:i},n.length>0&&t.createElement("div",{className:se.actionsContainer},t.createElement("p",{className:se.infoTitle},n)),l))}),ll=e=>{var l,o;const{component:i,blueprintIndex:n,setSelectedComponent:d,selectedComponent:a,companyData:r,components:v,allComponents:s,companyUsersArray:u,user:c,status:p}=e,[m]=(0,_.pQ)(),[f]=(0,t.useState)(se.active),[g]=(0,t.useState)(""),h=null===(l=m.currentStep)||void 0===l?void 0:l.component_blueprints.findIndex(e=>e.id===i.id),b=i.selected_fields.filter(e=>"Pin"===e.data_type_name||"Map"===e.data_type_name).length>0,x=null===a||void 0===a||null===(o=a.component_fields)||void 0===o?void 0:o.find(e=>"Action Button"===e.data_type_name);return t.createElement("div",{id:"accordion",key:n,className:ye()(se.accordionContainer,f),"app-variant-has-error":g?"error":"",style:y.tq?b?{padding:"0",border:"0"}:{border:"0"}:{}},t.createElement(ol,{components:v,allComponents:s,component:i,handleInputChange:()=>{},handlePrefixChange:()=>{},handleCurrencyChange:()=>{},checkIfAreMandatoryErrored:!1,handleCheckbox:()=>{},isInherited:!1,indexInContextArray:h,handleLocationChange:()=>{},processTaskContext:m,companyData:r,companyUsersArray:u,selectedComponent:a,setSelectedComponent:d,hasAction:x,user:c,status:p}))},ol=(0,t.memo)(e=>{var l,o;const{component:n,components:d,companyData:c,allComponents:m,companyUsersArray:x,setSelectedComponent:w,selectedComponent:M,hasAction:S,user:k,status:Z}=e,{allTasks:I,companyPositionsArray:N,allModules:T,begunModule:P}=(0,g.v9)(e=>e.flowReducer),[O,A]=(0,_.pQ)(),[z,L]=(0,t.useState)(!1),[R,F]=(0,t.useState)(0),[W,q]=(0,t.useState)(!1),[Y,B]=(0,t.useState)(!1),H=(null===n||void 0===n||null===(l=n.selected_fields)||void 0===l?void 0:l.length)>0&&G.Z([ee.Z(Q.Z("index"))])(null===n||void 0===n||null===(o=n.selected_fields)||void 0===o?void 0:o.filter(e=>!0!==e.value||void 0!==(null===e||void 0===e?void 0:e.value))).map((e,l)=>{var o,g,H,j,V;if((null===e||void 0===e||null===(o=e.options)||void 0===o||null===(g=o.list)||void 0===g?void 0:g.length)>0&&(null===e||void 0===e||null===(H=e.options)||void 0===H||null===(j=H.component_id)||void 0===j?void 0:j.length)>0&&("Step List"===(null===e||void 0===e?void 0:e.data_type_name)||"Component List"===(null===e||void 0===e?void 0:e.data_type_name)))return t.createElement("div",{key:l,style:{width:"100%"}},t.createElement(D.default,{modern:!0,columns:e.options.list,list:(V=e.options,d.filter(e=>e.id===V.component_id).map(e=>null===V||void 0===V?void 0:V.list.reduce((l,o)=>(0,i.Z)((0,i.Z)({},l),{},{[o]:e.selected_fields.find(e=>e.field_name===o).value,temp_id:e.temp_id}),{})))}));if("output"===e.data_type&&"Formula"!==e.data_type_name&&"Item Formula"!==e.data_type_name&&"Record"!==e.data_type_name&&"Filters"!==e.data_type_name)return null;if("Info"===e.data_type_name)return null;if("URL"===e.data_type_name)return null;if("Map"===e.data_type_name)return null;if("Lookup"===e.data_type_name)return null;if("Rewards"===e.data_type_name)return null;if("Summary"===e.data_type_name)return null;if("Ratings"===e.data_type_name)return null;if("ID"===e.data_type_name){var G,J;const o=null!==(G=null===U||void 0===U?void 0:$.Z(null===U||void 0===U?void 0:X.Z("field_name",e.field_name))(n.values))&&void 0!==G?G:null;return t.createElement("div",{key:l},t.createElement("div",{className:se.actionsContainer,style:{fontSize:"12px"}},t.createElement("div",{style:{fontWeight:"normal",fontSize:"14px"}},e.field_name,":"),t.createElement("div",null,null===o||null===o.value?"":null===o||void 0===o||null===(J=o.value)||void 0===J?void 0:J.split(",")[0])),t.createElement("hr",{style:{borderTop:"0.5px solid #D2D2D2"}}))}{var Q,K,ee,le,oe,ie,te,ne,de,ae,re,ve,ue;let o=null!==(Q=null===U||void 0===U?void 0:$.Z(null===U||void 0===U?void 0:X.Z("field_name",null===e||void 0===e?void 0:e.field_name))(null!==(K=null===M||void 0===M?void 0:M.component_fields)&&void 0!==K?K:[]))&&void 0!==Q?Q:{},d=null===(ee=o)||void 0===ee?void 0:ee.value;const g=null===n||void 0===n||null===(le=n.selected_fields)||void 0===le?void 0:le.find(e=>"Info"===e.data_type_name);if(g){const e=m.find(e=>(null===e||void 0===e?void 0:e.component_fields.filter(e=>e.component_blueprint_id===g.options.component_id&&e.value===d).length)>0);var ce,pe;if(e)return null===g||void 0===g||null===(ce=g.options)||void 0===ce||null===(pe=ce.list)||void 0===pe?void 0:pe.map((l,o)=>{var i,n;const d=null!==(i=null===(n=e.component_fields.find(e=>e.field_name===l))||void 0===n?void 0:n.value)&&void 0!==i?i:"";return t.createElement("div",{key:o},t.createElement("div",{className:se.actionsContainer,style:{fontSize:"12px"}},t.createElement("div",{style:{fontWeight:"normal",fontSize:"14px"}},l,":"),t.createElement("div",null,d)),t.createElement("hr",{style:{borderTop:"0.5px solid #D2D2D2"}}))})}if("Pin"===e.data_type_name&&(null!==e&&void 0!==e&&e.value||d)){var fe,_e,ye,ge,he,be,xe,Ee,Ce,we,Me,Se,ke,Ze,Ie,Ne,De,Oe,Ae,ze,Le,Ue,Fe,We,qe,Ye,Be,He,je,Ve,Ge,Je;const n=JSON.parse(null!==(fe=null===e||void 0===e?void 0:e.value)&&void 0!==fe?fe:d),a=null===M||void 0===M||null===(_e=M.component_fields)||void 0===_e||null===(ye=_e.find(e=>"Status"===e.data_type_name))||void 0===ye?void 0:ye.value;var Qe;if(void 0===o)o=null===(Qe=M.component_fields)||void 0===Qe?void 0:Qe.find(e=>"Pin"===e.data_type_name);return t.createElement("div",{key:l,style:{display:"",width:"100%"}},Y&&t.createElement(Pe.Z,{mapkey:null===(ge=c.misc_info)||void 0===ge?void 0:ge.map,pins:null!==n&&void 0!==n&&n.realtime?null!==n&&void 0!==n&&null!==(he=n.destination)&&void 0!==he&&he.address?[(0,i.Z)((0,i.Z)({},n.destination),{},{type:"destination"}),(0,i.Z)((0,i.Z)({},n.source),{},{type:"source"}),(0,i.Z)((0,i.Z)({},n.realtime),{},{type:"realtime"})]:[(0,i.Z)((0,i.Z)({},n.source),{},{type:"source"}),(0,i.Z)((0,i.Z)({},n.realtime),{},{type:"realtime"})]:null!==n&&void 0!==n&&null!==(be=n.destination)&&void 0!==be&&be.address?[(0,i.Z)((0,i.Z)({},n.destination),{},{type:"destination"}),(0,i.Z)((0,i.Z)({},n.source),{},{type:"source"})]:[(0,i.Z)((0,i.Z)({},n.source),{},{type:"source"})]}),t.createElement("div",{key:l,className:se.filtersContainer,style:{color:"var(--app-color-gray-dark)",height:"inherit",width:"100%",display:null!==e&&void 0!==e&&e.visible?"":"none"}},t.createElement("div",{className:se.actionsContainer,style:{fontSize:"12px"},onClick:()=>B(!Y)},null!==n&&void 0!==n&&null!==(xe=n.destination)&&void 0!==xe&&xe.address?t.createElement("div",{style:{width:"50px",textAlign:"left",fontWeight:"normal",fontSize:"14px"}},"From:"):t.createElement(C.G,{icon:E.opg,style:{color:"green",width:"20px",height:"20px"}}),t.createElement("div",{style:{width:"70%",textAlign:"right"}},n.source.address)),(null===n||void 0===n||null===(Ee=n.destination)||void 0===Ee?void 0:Ee.address)&&t.createElement("hr",{style:{borderTop:"0.5px solid #D2D2D2"}}),(null===n||void 0===n||null===(Ce=n.destination)||void 0===Ce?void 0:Ce.address)&&t.createElement("div",{className:se.actionsContainer,style:{fontSize:"12px"}},t.createElement("div",{style:{width:"50px",textAlign:"left",fontWeight:"normal",fontSize:"14px"}},"To",":"),t.createElement("div",{style:{width:"70%",textAlign:"right"}},null===n||void 0===n||null===(we=n.destination)||void 0===we?void 0:we.address))),t.createElement(f.zx,{light:!0,title:0!=R?"Stop Location Updates":null!==e&&void 0!==e&&null!==(Me=e.options)&&void 0!==Me&&Me.realtime?"Send Location Updates":"Update Location",clicked:()=>{0===R?navigator.geolocation.getCurrentPosition(l=>{var i,t,d,a;n&&(n.realtime={lat:l.coords.latitude,lng:l.coords.longitude,id:"10"},e.value=JSON.stringify(n),1==(null===e||void 0===e||null===(i=e.options)||void 0===i?void 0:i.realtime)?F(setInterval(()=>{L(!0),(0,v.po)({component_id:M.id,index:e.index,value:JSON.stringify(n),group:e.group,component_field_id:o.id}).subscribe({next:e=>{L(!1)},error:()=>L(!1),complete:()=>{}})},+(null!==(t=null===(d=o)||void 0===d||null===(a=d.options)||void 0===a?void 0:a.interval)&&void 0!==t?t:6e4))):(L(!0),(0,v.po)({component_id:M.id,index:o.index,value:JSON.stringify(n),group:o.group,component_field_id:o.id}).subscribe({next:e=>{L(!1)},error:()=>L(!1),complete:()=>{}})))}):(window.clearInterval(R),F(0))},loading:z,style:{width:"100%",display:"Closed"===(null===M||void 0===M?void 0:M.status)||"New"===(null===M||void 0===M?void 0:M.status)||"Reopen"===(null===M||void 0===M?void 0:M.status)||(null===M||void 0===M?void 0:M.status)===(null===c||void 0===c||null===(Se=c.misc_info)||void 0===Se?void 0:Se.lock)||(null!==(ke=null===(Ze=P.processModule)||void 0===Ze||null===(Ie=Ze.module)||void 0===Ie||null===(Ne=Ie.options)||void 0===Ne?void 0:Ne.lock)&&void 0!==ke?ke:"").split(",").includes(null===M||void 0===M?void 0:M.status)||"Closed"===a||"New"===a||"Reopen"===a||a===(null===c||void 0===c||null===(De=c.misc_info)||void 0===De?void 0:De.lock)||(null!==(Oe=null===(Ae=P.processModule)||void 0===Ae||null===(ze=Ae.module)||void 0===ze||null===(Le=ze.options)||void 0===Le?void 0:Le.lock)&&void 0!==Oe?Oe:"").split(",").includes(a)||"Cancelled"===a?"none":S&&"user"===S.options.action&&(null===S||void 0===S?void 0:S.value)===(null===k||void 0===k?void 0:k.id)?"":"none"}}),Y&&t.createElement(f.zx,{light:!0,title:"Refresh location",clicked:()=>{L(!0),(0,v.r6)(M.id).pipe((0,p.P)()).subscribe({next:e=>{w(e),L(!1)},error:()=>L(!1)})},loading:z,style:{width:"100%",display:"Closed"===(null===M||void 0===M?void 0:M.sttaus)||"New"===(null===M||void 0===M?void 0:M.sttaus)||"Reopen"===(null===M||void 0===M?void 0:M.sttaus)||(null===M||void 0===M?void 0:M.status)===(null===c||void 0===c||null===(Ue=c.misc_info)||void 0===Ue?void 0:Ue.lock)||(null!==(Fe=null===(We=P.processModule)||void 0===We||null===(qe=We.module)||void 0===qe||null===(Ye=qe.options)||void 0===Ye?void 0:Ye.lock)&&void 0!==Fe?Fe:"").split(",").includes()||"Closed"===a||"New"===a||"Reopen"===a||a===(null===c||void 0===c||null===(Be=c.misc_info)||void 0===Be?void 0:Be.lock)||(null!==(He=null===(je=P.processModule)||void 0===je||null===(Ve=je.module)||void 0===Ve||null===(Ge=Ve.options)||void 0===Ge?void 0:Ge.lock)&&void 0!==He?He:"").split(",").includes(a)||"Cancelled"===a?"none":S&&"user"===S.options.action&&null!==S&&void 0!==S&&S.value&&(null===M||void 0===M||null===(Je=M.created_by)||void 0===Je?void 0:Je.id)===(null===k||void 0===k?void 0:k.id)?"":"none"}}))}var Ke,Xe,$e,el,ll,ol;if("Action Button"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(oe=e.options)||void 0===oe||null===(ie=oe.action)||void 0===ie?void 0:ie.length)>0)return null!==e&&void 0!==e&&e.value||d?t.createElement(me.Z,{width:"100%",key:l,style:{flexDirection:"column",border:"0"},isProcess:!0,visible:void 0!==(null===e||void 0===e?void 0:e.value)||e.visible,mandatory:!1,error:e.errors},t.createElement("div",{className:se.centeredDiv,style:{width:"inherit",fontSize:"14px",fontWeight:"normal"}},t.createElement("p",{style:{width:"inherit",fontSize:"12px",fontWeight:"bold"}},null!==e&&void 0!==e&&e.value||d?null!==(Ke=e.options)&&void 0!==Ke&&Ke.notes?null===(Xe=e.options)||void 0===Xe?void 0:Xe.notes:"".concat(e.field_name,":"):"user"===e.options.action?"Not yet assigned":"No status"),"user"===e.options.action&&(null===x||void 0===x?void 0:x.length)>0&&(null===x||void 0===x?void 0:x.filter(l=>l.id===(d||(null===e||void 0===e?void 0:e.value))).map((e,l)=>{var o,i,n,d,a,r;return t.createElement("div",{key:l,className:se.filtersContainer,style:{fontSize:"12px"}},t.createElement(Te.Z,{ratings:(null===e||void 0===e||null===(o=e.ratings)||void 0===o?void 0:o.length)>0?null===e||void 0===e||null===(i=e.ratings)||void 0===i?void 0:i.map(e=>+e.ratings):[],simple:!0,photo:e.photo,firstName:null===e||void 0===e?void 0:e.first_name,lastName:null===e||void 0===e?void 0:e.last_name,email:null===e||void 0===e||null===(n=e.positions)||void 0===n||null===(d=n.slice(0,1))||void 0===d?void 0:d.map(e=>e.name),position:"",cardClicked:()=>q(!W),width:"100%"}),W&&t.createElement("div",{style:{padding:"10px"}},t.createElement("h3",null,"User Feedback:"),(null===e||void 0===e||null===(a=e.ratings)||void 0===a?void 0:a.length)>0?null===e||void 0===e||null===(r=e.ratings)||void 0===r?void 0:r.map((e,l)=>t.createElement("div",{className:se.actionsContainer,key:l,style:{fontSize:"12px",marginBottom:"10px"}},t.createElement("div",{style:{width:"60%",textAlign:"left"}},'"'.concat(e.comments,'"')))):null))})))):null;if("Module"===e.data_type_name&&null!==e&&void 0!==e&&null!==(te=e.options)&&void 0!==te&&te.detail){var il,tl,nl,dl,al;const l=T.find(l=>l.id===e.options.module_id);return t.createElement("div",{className:se.iconsContainer,style:{display:"flex",alignContent:"space-between",justifyContent:"center",width:"100%",margin:"40px 0"}},!((null===M||void 0===M?void 0:M.status)===(null===c||void 0===c||null===(il=c.misc_info)||void 0===il?void 0:il.lock)||(null!==(tl=null===P||void 0===P||null===(nl=P.processModule)||void 0===nl||null===(dl=nl.module)||void 0===dl||null===(al=dl.options)||void 0===al?void 0:al.lock)&&void 0!==tl?tl:"").split(",").includes(null===M||void 0===M?void 0:M.status))&&t.createElement(f.zx,{style:{backgroundColor:"var(--app-color-blue)",width:"100%"},title:null===e||void 0===e?void 0:e.field_name,message:"Preparing ".concat(l.name," entry..."),loading:z,clicked:()=>{L(!0),(0,r.zJ)(l.procedure.id).pipe((0,p.P)()).subscribe({next:l=>{var o;if(null!==e&&void 0!==e&&null!==(o=e.options)&&void 0!==o&&o.cmp){var t,n,d;const o=null===l||void 0===l||null===(t=l.steps)||void 0===t?void 0:t.find(e=>e.component_blueprints.filter(e=>{var l,o;return(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.allowMultipleInputs)&&(null===(o=e.selected_fields)||void 0===o?void 0:o.find(e=>"Transaction List"===e.data_type_name))}).length>0),c=null===o||void 0===o||null===(n=o.component_blueprints)||void 0===n?void 0:n.find(e=>{var l;return(null===(l=e.selected_fields)||void 0===l?void 0:l.filter(e=>"Transaction List"===e.data_type_name&&!0===e.visible).length)>0}),m={};var r;if(null===c||void 0===c||null===(d=c.selected_fields)||void 0===d||d.filter(e=>{var l;return null===(l=e.options)||void 0===l?void 0:l.mapToItem}).forEach(e=>{const l=M.component_fields.find(l=>l.field_name===e.field_name&&l.data_type_name===e.data_type_name);var o;l&&(m[null===(o=e.options)||void 0===o?void 0:o.mapToItem]=l.value)}),Object.values(m).length>0)(0,v.r6)(null===e||void 0===e||null===(r=e.options)||void 0===r?void 0:r.cmp).pipe((0,p.P)()).subscribe({next:l=>{var o,t;(0,v.np)((0,i.Z)((0,i.Z)({},m),{},{index:null===(o=l.component_items)||void 0===o?void 0:o.length,id:(0,s.mR)()}),null===e||void 0===e||null===(t=e.options)||void 0===t?void 0:t.cmp).pipe((0,p.P)()).subscribe({next:e=>{L(!1),u.h.dispatch((0,a.Xc)({show:!0,message:"Success, an item was added."}))},error:()=>{},complete:()=>{}})},error:()=>{}});else L(!1)}else L(!1),O.components=[],e.options.fields.filter(e=>{var o,i;const t=null===(o=M.component_fields.find(l=>l.field_name===e))||void 0===o?void 0:o.value;null===(i=l.steps)||void 0===i||i.forEach(l=>{var o;null===l||void 0===l||null===(o=l.component_blueprints)||void 0===o||o.filter(e=>{var l;return!(null!==(l=e.options)&&void 0!==l&&l.asModuleList)}).forEach(l=>{const o=l.selected_fields.find(l=>l.field_name===e&&1==l.visible);o&&(o.value=t)}),l.component_blueprints.find(l=>l.selected_fields.filter(l=>l.field_name===e).length>0)&&A({action:_._U.addModuleComponents,value:l.component_blueprints.filter(l=>l.selected_fields.filter(l=>l.field_name===e).length>0)})})}),u.h.dispatch((0,a.q4)((0,i.Z)((0,i.Z)({},l),{},{completeSteps:l.steps,steps:l.steps,stepIndex:1,module_id:e.options.module_id,module:T.find(l=>l.id===e.options.module_id)}))),A({action:_._U.setCurrentStep,value:l.steps[1]}),A({action:_._U.setModuleItems,value:[]}),A({action:_._U.setModuleNewStepComponents,value:[]})}})}}))}if("Module"===e.data_type_name)return null;if("Link"===e.data_type_name){var rl;const o="".concat(d||(null===e||void 0===e?void 0:e.value));return t.createElement(me.Z,{width:y.tq?"100%":"50%",style:{border:"0"},key:l,fieldIcon:e.icon,isProcess:!0,visible:void 0!==(null===e||void 0===e?void 0:e.value)||e.visible,mandatory:!1,error:e.errors,customIconBgColor:"white"},null!==o&&void 0!==o&&o.includes("jpg")||null!==o&&void 0!==o&&o.includes("jpeg")||null!==e&&void 0!==e&&null!==(rl=e.options)&&void 0!==rl&&rl.image||null!==o&&void 0!==o&&o.includes("png")?t.createElement("div",{className:se.accordionContainer,onClick:()=>window.open(o,"_blank")},t.createElement("img",{alt:"lg",src:o,style:{width:"100%",height:"100%",cursor:"pointer"}})):null!==o&&void 0!==o&&o.includes("pdf")?t.createElement("div",{className:se.accordionContainer,onClick:()=>window.open(o,"_blank")},t.createElement("embed",{onClick:()=>window.open(o,"_blank"),src:"".concat(o,"#toolbar=0&navpanes=0&scrollbar=0"),width:"400px",height:"500px"})):t.createElement("div",{style:{width:"inherit",textDecoration:"underline",textAlign:"center",cursor:"pointer"},onClick:()=>window.open(d,"_blank")},"Link"))}if("Checkbox"===e.data_type_name)return t.createElement("div",{key:l},t.createElement("div",{className:se.actionsContainer,style:{fontSize:"12px"}},t.createElement("div",{style:{fontWeight:"normal",fontSize:"14px"}},e.options.value,":"),t.createElement("div",null,void 0===d?!0===(null===e||void 0===e?void 0:e.value)?"Yes":"No":1==d?"Yes":"No")),t.createElement("hr",{style:{borderTop:"0.5px solid #D2D2D2"}}));if("Status"===e.data_type_name)return t.createElement("div",{key:l},t.createElement("div",{className:se.actionsContainer,style:{fontSize:"12px"}},t.createElement("div",{style:{fontWeight:"normal",fontSize:"14px"}},"Status",":"),t.createElement("div",null,null!==($e=null===M||void 0===M?void 0:M.status)&&void 0!==$e?$e:d)),t.createElement("hr",{style:{borderTop:"0.5px solid #D2D2D2"}}));if("Upload"===e.data_type_name)return t.createElement("div",{key:l},t.createElement("div",{className:se.actionsContainer,style:{fontSize:"12px"}},t.createElement("div",{style:{fontWeight:"normal",fontSize:"14px"}},e.field_name,":"),(d||(null===e||void 0===e?void 0:e.value))&&t.createElement("a",{style:{fontFamily:"var(--app-text-font-mobile)"},key:l,href:d||(null===e||void 0===e?void 0:e.value),download:"Example-PDF-document",target:"_blank",rel:"noreferrer"},"Download File")),t.createElement("hr",{style:{borderTop:"0.5px solid #D2D2D2"}}));if("Tiles"===(null===e||void 0===e||null===(ne=e.options)||void 0===ne?void 0:ne.selection)){const o=m.find(l=>(null===l||void 0===l?void 0:l.component_fields.filter(l=>l.component_blueprint_id===e.options.component_id&&l.value===d).length)>0);var vl,sl;if(o)return t.createElement("div",{key:l,className:se.filtersContainer,style:{color:"var(--app-color-gray-dark)",height:"inherit",width:"100%",display:null!==e&&void 0!==e&&e.visible?"":"none"}},null===e||void 0===e||null===(vl=e.options)||void 0===vl||null===(sl=vl.names)||void 0===sl?void 0:sl.map((e,l)=>{var i,n,d,a;const r=null!==(i=null===(n=o.component_fields.find(l=>l.field_name===e))||void 0===n?void 0:n.value)&&void 0!==i?i:"";return null!==r&&void 0!==r&&r.includes("jpg")||null!==r&&void 0!==r&&r.includes("jpeg")||null!==r&&void 0!==r&&r.includes("png")?t.createElement("div",{key:l,style:{width:"inherit",display:"flex",justifyContent:"right",marginBottom:"20px"}},t.createElement("img",{alt:"lg",src:r,style:{objectFit:"contain",width:"40px",height:"30px",cursor:"pointer"}})):t.createElement("div",{key:l},t.createElement("div",{className:se.actionsContainer,style:{fontSize:"12px"}},t.createElement("div",{style:{width:"20%",textAlign:"left",fontWeight:"normal",fontSize:"14px"}},e,":"),t.createElement("div",{style:{width:"80%",textAlign:"right"}},null!==(d=null===(a=o.component_fields.find(l=>l.field_name===e))||void 0===a?void 0:a.value)&&void 0!==d?d:"")),t.createElement("hr",{style:{borderTop:"0.5px solid #D2D2D2"}}))}))}if("People"===e.data_type_name)if(e.options.calendar){var ul,cl;const o=JSON.parse(null!==(ul=d)&&void 0!==ul?ul:null!==(cl=null===e||void 0===e?void 0:e.value)&&void 0!==cl?cl:JSON.stringify({})),i=x.find(e=>e.id===o.user);if(d=i?"".concat(i.first_name," ").concat(i.last_name):"",null!==o&&void 0!==o&&o.task){var pl;const i=I.find(e=>e.id===o.task);return t.createElement("div",{key:l,style:{margin:"10px 0 10px 0",display:e.visible&&d?"":"none"}},t.createElement("div",{className:se.actionsContainer,style:{fontSize:"12px"}},t.createElement("div",{style:{fontWeight:"normal",fontSize:"14px"}},e.field_name,":"),t.createElement("div",{style:{display:"flex",flexDirection:"column",textAlign:"right"}},t.createElement("div",null,d),i&&"Closed"!==M.status&&t.createElement("div",null,null===i||void 0===i?void 0:i.name),i&&"Closed"!==M.status&&t.createElement("div",null,b()(new Date(null===i||void 0===i||null===(pl=i.add_info)||void 0===pl?void 0:pl.start)).format("DD MMM YYYY h:mm a")),(null===i||void 0===i?void 0:i.status)&&"Closed"!==M.status&&t.createElement("div",null,null===i||void 0===i?void 0:i.status))),t.createElement("hr",{style:{borderTop:"0.5px solid #D2D2D2"}}))}}else{const l=x.find(l=>{var o;return l.id===(null!==(o=d)&&void 0!==o?o:e.value)});d=l?"".concat(l.first_name," ").concat(l.last_name):""}if("Video"===e.data_type_name&&Z===(null!==(de=null===e||void 0===e||null===(ae=e.options)||void 0===ae?void 0:ae.status)&&void 0!==de?de:"New"))if(null!==e&&void 0!==e&&e.value&&b()(null===e||void 0===e?void 0:e.value)<=(0,h.now)()&&(0,h.now)()<b()(null===e||void 0===e?void 0:e.value).add("minutes",+(null!==(el=null===e||void 0===e||null===(ll=e.options)||void 0===ll?void 0:ll.expiry)&&void 0!==el?el:30)))return t.createElement("div",{key:l,style:{width:"100%",fontSize:"12px",display:"flex",flexDirection:"column",justifyContent:"center"}},t.createElement("div",{style:{fontWeight:"normal",fontSize:"14px"}},e.field_name,":"),t.createElement("div",{style:{width:"100%",fontSize:"12px",display:"flex",flexDirection:"column",justifyContent:"center"}},t.createElement(Re.Z,{payload:{name:null===M||void 0===M?void 0:M.id}})));if("Clock"===e.data_type_name&&(d=b()(new Date(+d)).format("DD MMM YYYY h:mm a")),"Positions"===e.data_type_name)return t.createElement("div",{key:l,style:{margin:"10px 0 10px 0",display:e.visible&&d?"":"none"}},t.createElement("div",{className:se.actionsContainer,style:{fontSize:"12px"}},t.createElement("div",{style:{fontWeight:"normal",fontSize:"14px"}},e.field_name,":"),t.createElement("div",{style:{textAlign:"right",width:"60%"}},null!==e&&void 0!==e&&e.value?null===(ol=N.find(l=>l.value===(null===e||void 0===e?void 0:e.value)))||void 0===ol?void 0:ol.label:"-")),t.createElement("hr",{style:{borderTop:"0.5px solid #D2D2D2"}}));if("Details"===e.data_type_name&&null!==e&&void 0!==e&&null!==(re=e.options)&&void 0!==re&&re.key&&(null===e||void 0===e||null===(ve=e.options)||void 0===ve||null===(ue=ve.fields)||void 0===ue?void 0:ue.length)>0){var ml,fl;const l=m.find(l=>l.module_id===e.options.module_id&&l.component_fields.find(l=>{var o,i;return l.field_name===e.options.key&&l.value===(null===M||void 0===M||null===(o=M.component_fields)||void 0===o||null===(i=o.find(l=>l.field_name===e.options.key&&l.value))||void 0===i?void 0:i.value)}));d=null===l||void 0===l||null===(ml=l.component_fields)||void 0===ml||null===(fl=ml.find(l=>{var o;return l.field_name===(null===(o=e.options)||void 0===o?void 0:o.fields[0])}))||void 0===fl?void 0:fl.value}return t.createElement("div",{key:l,style:{margin:"10px 0 10px 0",display:e.visible&&d?"":"none"}},t.createElement("div",{className:se.actionsContainer,style:{fontSize:"12px"}},t.createElement("div",{style:{fontWeight:"normal",fontSize:"14px"}},e.field_name,":"),t.createElement("div",{style:{textAlign:"right",width:"60%"}},null===d||void 0===d?null!==e&&void 0!==e&&e.value?"Date"===e.data_type_name||"Video"===e.data_type_name?"Invalid date"===b()(new Date(null===e||void 0===e?void 0:e.value)).format("DD MMM YYYY h:mm a")?"":b()(new Date(null===e||void 0===e?void 0:e.value)).format("DD MMM YYYY h:mm a"):null===e||void 0===e?void 0:e.value:"":"Date"===e.data_type_name||"Video"===e.data_type_name?"Invalid date"===b()(new Date(d)).format("DD MMM YYYY h:mm a")?"":b()(new Date(d)).format("DD MMM YYYY h:mm a"):d)),t.createElement("hr",{style:{borderTop:"0.5px solid #D2D2D2"}}))}});return t.createElement("div",{style:{width:"100%",display:z?"none":"",margin:"20px 0"}},H)}),il=e=>{var l,o,i,n;const{component:d,title:a="Created by",show:r=!0}=e,{companyUsersArray:v}=(0,g.v9)(e=>e.flowReducer),s=v.find(e=>{var l;return e.id===(null===(l=d.created_by)||void 0===l?void 0:l.id)});return t.createElement("div",{className:se.centeredDiv,style:{width:"inherit",fontSize:"14px",marginTop:"20px"}},t.createElement("div",{style:{fontFamily:"var(--app-text-font-mobile)",fontWeight:"bold",color:"var(--app-color-gray-dark)",paddingLeft:"5px"}},a),t.createElement("div",{className:se.filtersContainer},t.createElement(Te.Z,{title:"Created by:",simple:!0,photo:null!==(l=null===s||void 0===s?void 0:s.photo)&&void 0!==l?l:"https://s3-symbol-logo.tradingview.com/logo-yazilim--600.png",email:"Document Date: ".concat(b()(new Date(d.created_date)).format("DD MMM YYYY")),position:"Time: ".concat(b()(new Date(d.created_date)).format("h:mm a")),firstName:t.createElement("div",{style:{fontWeight:"bold"}},r?"".concat(null===(o=d.created_by)||void 0===o?void 0:o.first_name," ").concat(null===(i=d.created_by)||void 0===i?void 0:i.last_name):null===(n=d.created_by)||void 0===n?void 0:n.id.replace(/\D/g,"").slice(-5)),cardClicked:()=>{},width:"100%"})))},tl=e=>{var l,o,i,n,d,a,r,v,s,u,c,p,m,f;const{component:_}=e,{companyData:y}=(0,g.v9)(e=>e.flowReducer),{authenticatedUser:h}=(0,g.v9)(e=>e.authReducer),b=null===_||void 0===_?void 0:_.component_fields.find(e=>{var l;return"Payments"===e.data_type_name&&("Done"===(null===_||void 0===_?void 0:_.status)||"Closed"===(null===_||void 0===_?void 0:_.status))&&(null===_||void 0===_||null===(l=_.created_by)||void 0===l?void 0:l.id)===(null===h||void 0===h?void 0:h.id)}),x=null===_||void 0===_?void 0:_.component_fields.find(e=>{var l;return e.field_name===(null===b||void 0===b||null===(l=b.options)||void 0===l?void 0:l.paymentField)});return t.createElement("div",{className:se.filtersContainer,style:{display:b?"":"none"}},null!==_&&void 0!==_&&_.payments?t.createElement("div",null,t.createElement("div",{className:se.actionsContainer,style:{fontSize:"12px"}},t.createElement("div",null,"Payments:",":"),t.createElement("div",null,"".concat(null===(l=_.payments)||void 0===l?void 0:l.stripe_product,", ID: ").concat(null===(o=_.payments)||void 0===o?void 0:o.stripe_id.substring(0,5)))),t.createElement("hr",{style:{borderTop:"0.5px solid #D2D2D2"}}),t.createElement("div",{className:se.actionsContainer,style:{fontSize:"12px"}},t.createElement("div",null,"Amount Paid",":"),t.createElement("div",null,"".concat((+(null!==(i=null===(n=_.payments)||void 0===n?void 0:n.stripe_price)&&void 0!==i?i:0)).toFixed(2)))),t.createElement("hr",{style:{borderTop:"0.5px solid #D2D2D2"}}),(null===(d=_.assigned_to)||void 0===d?void 0:d.id)===(null===h||void 0===h?void 0:h.id)&&t.createElement("div",{className:se.actionsContainer,style:{fontSize:"12px"}},t.createElement("div",null,"Transaction Fees",":"),t.createElement("div",null,"".concat((+(null===(a=_.payments)||void 0===a?void 0:a.stripe_price)*(null!==(r=null===y||void 0===y||null===(v=y.misc_info)||void 0===v?void 0:v.rate)&&void 0!==r?r:.2)).toFixed(2))))):t.createElement("div",null,"Cash"===(null===b||void 0===b?void 0:b.value)&&t.createElement("div",{className:se.actionsContainer,style:{fontSize:"12px"}},t.createElement("div",null,"Payments:",":"),t.createElement("div",null,"Cash")),"Cash"===(null===b||void 0===b?void 0:b.value)&&t.createElement("div",{className:se.actionsContainer,style:{fontSize:"12px"}},t.createElement("div",null,"Cash Paid",":"),t.createElement("div",null,"".concat((+(null===x||void 0===x?void 0:x.value)).toFixed(2)))),"Cash"===(null===b||void 0===b?void 0:b.value)&&(null===(s=_.assigned_to)||void 0===s?void 0:s.id)===(null===h||void 0===h?void 0:h.id)&&t.createElement("div",{className:se.actionsContainer,style:{fontSize:"12px"}},t.createElement("div",null,"Deducted from wallet",":"),t.createElement("div",null,"".concat((+(null===x||void 0===x?void 0:x.value)+ +(null===x||void 0===x?void 0:x.value)*(null!==(u=null===y||void 0===y||null===(c=y.misc_info)||void 0===c?void 0:c.rate)&&void 0!==u?u:.2)).toFixed(2)))),"Cash"===(null===b||void 0===b?void 0:b.value)&&(null===(p=_.assigned_to)||void 0===p?void 0:p.id)===(null===h||void 0===h?void 0:h.id)&&t.createElement("div",{className:se.actionsContainer,style:{fontSize:"12px"}},t.createElement("div",null,"Total Fees",":"),t.createElement("div",null,"".concat((+(null===x||void 0===x?void 0:x.value)*(null!==(m=null===y||void 0===y||null===(f=y.misc_info)||void 0===f?void 0:f.rate)&&void 0!==m?m:.2)).toFixed(2)))),"Cash"!==(null===b||void 0===b?void 0:b.value)&&t.createElement("div",{className:se.actionsContainer,style:{fontSize:"12px",fontWeight:"bold"}},t.createElement("div",null,"Payments:",":"),t.createElement("div",{style:{color:"red"}},"Pending"))))},nl=e=>{const{companyUsersArray:l}=u.h.getState().flowReducer,{isEdit:o,modalVisible:i,heading:n,onClose:d,isProcess:r,setIsProcessBegin:v,task:s,priority:c=!0,shadowedContainerStyle:m,statuses:_,start_date:y,span:g,labels:h={},onUpdate:b=()=>{},save:x=!0}=e,[E]=(0,t.useState)(h),[C]=(0,t.useState)(r),[w]=(0,t.useState)(n);return(0,t.useEffect)(()=>{let e=[];if(s){var o,i;if(!l.find(e=>{var l;return e.id===(null===s||void 0===s||null===(l=s.creator)||void 0===l?void 0:l.id)}))e=e.concat(null===(o=s.creator)||void 0===o?void 0:o.id);if(!l.find(e=>{var l;return e.id===(null===s||void 0===s||null===(l=s.assignee)||void 0===l?void 0:l.id)}))e=e.concat(null===(i=s.assignee)||void 0===i?void 0:i.id);e.length>0&&(0,ge.VG)(e).pipe((0,p.P)()).subscribe({next:e=>{u.h.dispatch((0,a.NY)(l.concat(e)))}})}},[]),t.createElement("div",null,t.createElement(f.U7,{hasCloseIcon:!0,scrollable:!0,shadowedContainerStyle:m||{width:"100%",minHeight:"100vh"},isOpen:i,onClose:d,blured:!1},t.createElement("div",null,t.createElement("p",{style:{fontFamily:"var(--app-text-font-mobile)",fontSize:"20px",fontWeight:"bold",color:"#4A4A4A",marginTop:"50px",marginBottom:"20px",textAlign:"center"}},null!==s&&void 0!==s&&s.completed_at?"Completed Task":w),t.createElement(dl,{labels:E,showPriority:c,statuses:_,task:s,setIsProcessBegin:v,setDisplayModal:d,isProcess:C,isEdit:o,onClose:()=>d(),start_date:y,span:g,onUpdate:b,save:x}))))};function dl(e){var l,o,n,d,a,r,v,p,m,_,y,g,h,x,w,M,S,k,Z,I,N,D,T,O,A,z,R,U,F,W,q,Y,B,H,j,V,G,J,Q,K,X,$,ee,le,oe,ie,te,ne,de,ae,re,ve,ue,ce,fe,_e,ye,ge,he,be,xe,Ee,Ce;const{selectedProcess:we,companyUsersArray:Me,begunModule:Se,companyData:ke}=u.h.getState().flowReducer,{user:Ze}=u.h.getState().sessionReducer,{isProcess:Ie,statuses:Ne,task:De,isEdit:Te,assigneeId:Pe,setDisplayModal:Ae,onClose:ze,start_date:Le=(new Date).setDate((new Date).getDate()),span:Re=!0,labels:Ue,onUpdate:Fe=()=>{},save:We=!0}=e,[qe,Ye]=(0,t.useState)(null!==De&&void 0!==De&&null!==(l=De.assignee)&&void 0!==l&&l.id?{assignee_id:null===De||void 0===De||null===(o=De.assignee)||void 0===o?void 0:o.id}:""),[Be,He]=(0,t.useState)(null!==De&&void 0!==De&&null!==(n=De.process)&&void 0!==n&&n.id?{process:null===De||void 0===De||null===(d=De.process)||void 0===d?void 0:d.id}:""),[je,Ve]=(0,t.useState)((null===De||void 0===De?void 0:De.name)||""),[Ge,Je]=(0,t.useState)((null===De||void 0===De?void 0:De.status)||""),[Qe,Ke]=(0,t.useState)((null===De||void 0===De?void 0:De.description)||""),[Xe,$e]=(0,t.useState)(null!==De&&void 0!==De&&De.due_date?new Date(null===De||void 0===De?void 0:De.due_date):(new Date).setDate((new Date).getDate())+36e5),[el,ll]=(0,t.useState)(null!==(a=null===De||void 0===De||null===(r=De.add_info)||void 0===r?void 0:r.pos)&&void 0!==a?a:null===Ze||void 0===Ze||null===(v=Ze.positions[0])||void 0===v?void 0:v.id),[ol,il]=(0,t.useState)(null!==De&&void 0!==De&&null!==(p=De.add_info)&&void 0!==p&&p.start?new Date(null===De||void 0===De||null===(m=De.add_info)||void 0===m?void 0:m.start):void 0),[tl,nl]=(0,t.useState)(null!==De&&void 0!==De&&null!==(_=De.add_info)&&void 0!==_&&_.end?new Date(null===De||void 0===De||null===(y=De.add_info)||void 0===y?void 0:y.end):void 0),[dl,rl]=(0,t.useState)(null!==De&&void 0!==De&&null!==(g=De.add_info)&&void 0!==g&&g.endRepeat?new Date(null===De||void 0===De||null===(h=De.add_info)||void 0===h?void 0:h.endRepeat):void 0),[vl,sl]=(0,t.useState)(null===De||void 0===De||null===(x=De.add_info)||void 0===x?void 0:x.repeat),[ul,cl]=(0,t.useState)(null===De||void 0===De||null===(w=De.add_info)||void 0===w?void 0:w.value),[pl,ml]=(0,t.useState)(""),[fl,_l]=(0,t.useState)(!1),[yl,gl]=(0,t.useState)(!1),[hl,bl]=(0,t.useState)(!1),[xl,El]=(0,t.useState)(!1),[Cl,wl]=(0,t.useState)(Ie),[Ml,Sl]=(0,t.useState)((null===De||void 0===De||null===(M=De.add_info)||void 0===M?void 0:M.priority)||""),kl=(null===Me||void 0===Me?void 0:Me.length)>0?Te&&(null===De||void 0===De||null===(S=De.creator)||void 0===S?void 0:S.id)!==Ze.id?[{label:Ze.first_name+" "+Ze.last_name,value:Ze.id}]:(null===Ue||void 0===Ue||null===(k=Ue.aList)||void 0===k?void 0:k.length)>0?Me.filter(e=>{var l;return(null===e||void 0===e||null===(l=e.positions)||void 0===l?void 0:l.filter(e=>{var l,o;return null===Ue||void 0===Ue||null===(l=Ue.options)||void 0===l||null===(o=l.aList)||void 0===o?void 0:o.includes(null===e||void 0===e?void 0:e.id)}).length)>0}).map(e=>({label:e.first_name+" "+e.last_name,value:e.id})):Me.map(e=>({label:e.first_name+" "+e.last_name,value:e.id})):[],Zl=[{label:"Does not repeat",value:"none"},{label:"Hourly",value:"hourly"},{label:"Every 2 Hours",value:"2hours"},{label:"Daily",value:"daily"},{label:"Weekly",value:"weekly"}];(0,t.useEffect)(()=>(bl(!0),()=>{bl(!1)}),[]),(0,t.useEffect)(()=>{if(Cl&&null!==we&&void 0!==we&&we.id&&hl){(()=>{He({procedure_id:we.id}),Ke(we.description)})()}},[Cl,hl,we.description,we.id]);const Il=Ne?Ne.map(e=>({label:e,value:e})):[{label:"Ongoing",value:"Ongoing"},{label:"In Review",value:"In Review"},{label:"Approved",value:"Approved"},{label:"Postponed",value:"Postponed"},{label:"Moved",value:"Moved"},{label:"Cancelled",value:"Cancelled"}];return t.createElement("div",{className:se.newTaskFormHost,style:{padding:"0 5px 0 5px"}},t.createElement(L(),{style:{flex:1}},t.createElement(me.Z,{titleProps:{fontSize:"14px",color:"var(--app-color-gray-dark)",fontWeight:"normal",paddingLeft:"5px"},enabled:void 0===(null===De||void 0===De?void 0:De.id)||(null===De||void 0===De||!De.completed_at)&&Ze.id===(null===De||void 0===De||null===(Z=De.creator)||void 0===Z?void 0:Z.id),width:"100%",style:{marginTop:"0px",border:"0px solid var(--app-color-gray-lighter)",padding:"5px",marginBottom:"10px",backgroundColor:"var(--app-color-gray-lightest)"},editMode:!1,fieldLabel:null!==(I=null===Ue||void 0===Ue?void 0:Ue.title)&&void 0!==I?I:"Event Name",isProcess:!0,visible:!0,mandatory:!0,error:null===pl||void 0===pl||null===(N=pl.errors)||void 0===N?void 0:N.name},t.createElement("textarea",{className:se.fieldTypeTextarea,type:"text",value:je,readOnly:void 0!==(null===De||void 0===De?void 0:De.id)&&(!(null===De||void 0===De||!De.completed_at)||Ze.id!==(null===De||void 0===De||null===(D=De.creator)||void 0===D?void 0:D.id)),autoComplete:"none",onChange:e=>Ve(e.target.value),placeholder:"",style:{height:"60px",border:"0"}})),t.createElement(me.Z,{titleProps:{fontSize:"14px",color:"var(--app-color-gray-dark)",fontWeight:"normal",paddingLeft:"5px"},enabled:void 0===(null===De||void 0===De?void 0:De.id)||(null===De||void 0===De||!De.completed_at)&&Ze.id===(null===De||void 0===De||null===(T=De.creator)||void 0===T?void 0:T.id),width:"100%",style:{marginTop:"0px",border:"0px solid var(--app-color-gray-lighter)",padding:"5px",marginBottom:"10px",backgroundColor:"var(--app-color-gray-lightest)"},editMode:!0,fieldLabel:null!==(O=null===Ue||void 0===Ue?void 0:Ue.description)&&void 0!==O?O:"Description",isProcess:!0,visible:(null!==De&&void 0!==De&&De.completed_at,!0),mandatory:!0,error:null===pl||void 0===pl||null===(A=pl.errors)||void 0===A?void 0:A.name},t.createElement("textarea",{className:se.fieldTypeTextarea,style:{border:"0",minHeight:"160px"},readOnly:void 0!==(null===De||void 0===De?void 0:De.id)&&(!(null===De||void 0===De||!De.completed_at)||Ze.id!==(null===De||void 0===De||null===(z=De.creator)||void 0===z?void 0:z.id)),required:null===pl||void 0===pl||null===(R=pl.errors)||void 0===R?void 0:R.description,value:Qe,onChange:e=>Ke(e.target.value)})),t.createElement(me.Z,{titleProps:{fontSize:"14px",color:"var(--app-color-gray-dark)",fontWeight:"normal",paddingLeft:"5px"},enabled:void 0===(null===De||void 0===De?void 0:De.id)||(null===De||void 0===De||!De.completed_at)&&Ze.id===(null===De||void 0===De||null===(U=De.creator)||void 0===U?void 0:U.id),width:"100%",style:{marginTop:"0px",border:"0px solid var(--app-color-gray-lighter)",padding:"5px",marginBottom:"10px",backgroundColor:"var(--app-color-gray-lightest)"},editMode:!1,fieldLabel:null!==(F=null===Ue||void 0===Ue?void 0:Ue.start)&&void 0!==F?F:"Start Date",isProcess:!0,visible:!0,mandatory:!0,error:null===pl||void 0===pl||null===(W=pl.errors)||void 0===W?void 0:W.due_date},t.createElement(pe(),{showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:15,readOnly:void 0!==(null===De||void 0===De?void 0:De.id)&&(!(null===De||void 0===De||!De.completed_at)||Ze.id!==(null===De||void 0===De||null===(q=De.creator)||void 0===q?void 0:q.id)),placeholderText:"Start Date",customInput:t.createElement("div",{id:"custom-input",style:{cursor:"pointer",display:"flex",justifyContent:"center",width:"100%",alignItems:"stretch"}},t.createElement("input",{readOnly:!0,value:void 0!==(null===De||void 0===De?void 0:De.id)&&(null!==De&&void 0!==De&&De.completed_at||Ze.id!==(null===De||void 0===De||null===(Y=De.creator)||void 0===Y?void 0:Y.id))?"".concat(b()(ol).format("DD MMMM YYYY HH:mm")):b()(ol).format("DD MMMM YYYY HH:mm"),type:"text",required:null===pl||void 0===pl||null===(B=pl.errors)||void 0===B?void 0:B.startDate,id:"start-date",style:{flex:1,marginTop:"auto",marginBottom:"auto",outline:"none",border:"none",fontFamily:"var(--app-text-font-mobile)",fontSize:"16px",fontWeight:"bold",lineHeight:"20px",color:"#4A4A4A",textAlign:(null===ol||void 0===ol?void 0:ol.length)>0?"center":"left",maxWidth:"98%",backgroundColor:"transparent"},placeholder:"Start Date",onChange:e=>{}}),t.createElement(C.G,{icon:E.WRo,style:{width:"14px",height:"14px"}})),className:se.datePickerWrapper,selected:ol,onChange:e=>{b()(e).diff(b()(tl),"minutes")<1?il(e):(il(e),nl(e))}})),t.createElement(me.Z,{titleProps:{fontSize:"14px",color:"var(--app-color-gray-dark)",fontWeight:"normal",paddingLeft:"5px"},enabled:void 0===(null===De||void 0===De?void 0:De.id)||(null===De||void 0===De||!De.completed_at)&&Ze.id===(null===De||void 0===De||null===(H=De.creator)||void 0===H?void 0:H.id),width:"100%",style:{marginTop:"0px",border:"0px solid var(--app-color-gray-lighter)",padding:"5px",marginBottom:"10px",backgroundColor:"var(--app-color-gray-lightest)"},editMode:!1,fieldLabel:null!==(j=null===Ue||void 0===Ue?void 0:Ue.end)&&void 0!==j?j:"End Date",isProcess:!0,visible:!0,mandatory:!0,error:null===pl||void 0===pl||null===(V=pl.errors)||void 0===V?void 0:V.due_date},t.createElement(pe(),{showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:15,readOnly:void 0!==(null===De||void 0===De?void 0:De.id)&&(!(null===De||void 0===De||!De.completed_at)||Ze.id!==(null===De||void 0===De||null===(G=De.creator)||void 0===G?void 0:G.id)),placeholderText:"End Date",customInput:t.createElement("div",{id:"custom-input",style:{cursor:"pointer",display:"flex",justifyContent:"center",width:"100%",alignItems:"stretch"}},t.createElement("input",{readOnly:!0,value:b()(tl).format("DD MMMM YYYY HH:mm"),type:"text",required:null===pl||void 0===pl||null===(J=pl.errors)||void 0===J?void 0:J.endDate,id:"due-date",style:{flex:1,marginTop:"auto",marginBottom:"auto",outline:"none",border:"none",fontFamily:"var(--app-text-font-mobile)",fontSize:"16px",fontWeight:"bold",lineHeight:"20px",color:"#4A4A4A",textAlign:(null===tl||void 0===tl?void 0:tl.length)>0?"center":"left",maxWidth:"98%",backgroundColor:"transparent"},placeholder:"Due Date",onChange:e=>{}}),t.createElement(C.G,{icon:E.WRo,style:{width:"14px",height:"14px"}})),className:se.datePickerWrapper,selected:tl,onChange:e=>{b()(e).diff(b()(ol),"minutes")>0?!1===Re?b()(e).format("DD")===b()(tl).format("DD")?nl(e):nl(tl):nl(e):nl(tl)}})),tl&&void 0===(null===De||void 0===De?void 0:De.id)&&t.createElement("div",{style:{marginBottom:"10px"}},t.createElement("label",{style:{fontSize:"14px",color:"var(--app-color-gray-dark)",fontWeight:"normal",paddingLeft:"5px"}},"Repeat",t.createElement(f.rk,{defaultSelected:Zl.find(e=>e.value===vl),items:Zl,onChange:e=>{sl(e.value),"none"!==e.value?rl(tl):"none"===e.value&&(rl(void 0),sl(void 0))},className:se.multiselectComponent,tmiClassName:se.inputClassNameII})),pl&&(null===pl||void 0===pl||null===(Q=pl.errors)||void 0===Q?void 0:Q.repeat)&&t.createElement(P.Z,{message:pl.errors.repeat})),t.createElement(me.Z,{titleProps:{fontSize:"14px",color:"var(--app-color-gray-dark)",fontWeight:"normal",paddingLeft:"5px"},enabled:void 0===(null===De||void 0===De?void 0:De.id)||(null===De||void 0===De||!De.completed_at)&&Ze.id===(null===De||void 0===De||null===(K=De.creator)||void 0===K?void 0:K.id),width:"100%",style:{marginTop:"0px",border:"0px solid var(--app-color-gray-lighter)",padding:"5px",marginBottom:"10px",backgroundColor:"var(--app-color-gray-lightest)"},editMode:!1,fieldLabel:"End Repeat",isProcess:!0,visible:vl&&"none"!==vl&&void 0===(null===De||void 0===De?void 0:De.id),mandatory:!1,error:null===pl||void 0===pl||null===(X=pl.errors)||void 0===X?void 0:X.due_date},t.createElement(pe(),{showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:15,readOnly:void 0!==(null===De||void 0===De?void 0:De.id)&&(!(null===De||void 0===De||!De.completed_at)||Ze.id!==(null===De||void 0===De||null===($=De.creator)||void 0===$?void 0:$.id)),customInput:t.createElement("div",{id:"custom-input",style:{cursor:"pointer",display:"flex",justifyContent:"center",width:"100%",alignItems:"stretch"}},t.createElement("input",{readOnly:!0,value:void 0===dl?dl:b()(dl).format("DD MMMM YYYY HH:mm"),type:"text",required:null===pl||void 0===pl||null===(ee=pl.errors)||void 0===ee?void 0:ee.startDate,id:"start-date",style:{flex:1,marginTop:"auto",marginBottom:"auto",outline:"none",border:"none",fontFamily:"var(--app-text-font-mobile)",fontSize:"16px",fontWeight:"bold",lineHeight:"20px",color:"#4A4A4A",textAlign:(null===ol||void 0===ol?void 0:ol.length)>0?"center":"left",maxWidth:"98%",backgroundColor:"transparent"},placeholder:"Start Date",onChange:e=>{}}),t.createElement(C.G,{icon:E.WRo,style:{width:"14px",height:"14px"}})),className:se.datePickerWrapper,selected:dl,onChange:e=>{b()(e).diff(b()(ol),"minutes")>0&&rl(e)}})),t.createElement(me.Z,{titleProps:{fontSize:"14px",color:"var(--app-color-gray-dark)",fontWeight:"normal",paddingLeft:"5px"},enabled:void 0===(null===De||void 0===De?void 0:De.id)||(null===De||void 0===De||!De.completed_at)&&Ze.id===(null===De||void 0===De||null===(le=De.creator)||void 0===le?void 0:le.id),width:"100%",style:{marginTop:"0px",border:"0px solid var(--app-color-gray-lighter)",padding:"5px",marginBottom:"10px",backgroundColor:"var(--app-color-gray-lightest)"},editMode:!1,fieldLabel:null===Ue||void 0===Ue?void 0:Ue.valueL,isProcess:!0,visible:!(null===Ue||void 0===Ue||!Ue.valueL),mandatory:!0},t.createElement("div",null,t.createElement("input",{className:se.fieldTypeInput,style:{border:"0"},readOnly:void 0!==(null===De||void 0===De?void 0:De.id)&&(!(null===De||void 0===De||!De.completed_at)||Ze.id!==(null===De||void 0===De||null===(oe=De.creator)||void 0===oe?void 0:oe.id)),value:ul,onChange:e=>cl(e.target.value),onBlur:()=>{var e,l,o;null!==Se&&void 0!==Se&&null!==(e=Se.processModule)&&void 0!==e&&null!==(l=e.module)&&void 0!==l&&null!==(o=l.options)&&void 0!==o&&o.credits&&+ul>+(null===Ze||void 0===Ze?void 0:Ze.wallet)&&(cl("0.00"),ml({errors:{value:"You have insufficient funds in your wallet. You currently have ".concat(null===Ze||void 0===Ze?void 0:Ze.wallet,".")}}))}}),pl&&(null===pl||void 0===pl||null===(ie=pl.errors)||void 0===ie?void 0:ie.value)&&t.createElement(P.Z,{message:pl.errors.value,onClick:()=>ml("")}))),t.createElement("div",{style:{marginBottom:"10px"}},t.createElement("label",{style:{fontSize:"14px",color:"var(--app-color-gray-dark)",fontWeight:"normal",paddingLeft:"5px"}},null!==(te=null===Ue||void 0===Ue?void 0:Ue.assignee)&&void 0!==te?te:"Assignee",null!==De&&void 0!==De&&De.completed_at?t.createElement("div",null,t.createElement("input",{style:{cursor:"auto"},placeholder:(null===De||void 0===De?void 0:De.assignee.first_name)+" "+(null===De||void 0===De?void 0:De.assignee.last_name),readOnly:!0})):t.createElement(f.rk,{defaultSelected:kl.find(e=>e.id===qe),items:kl.concat([{label:"None",value:""}]),onChange:e=>{e&&Ye(l=>(0,i.Z)((0,i.Z)({},l),{},{assignee_id:e.value}))},className:se.multiselectComponent,tmiClassName:se.inputClassNameII})),pl&&(null===pl||void 0===pl||null===(ne=pl.errors)||void 0===ne?void 0:ne.assignee_id)&&t.createElement(P.Z,{message:pl.errors.assignee_id})),((null===De||void 0===De?void 0:De.completed_at)||Ze.id===(null===De||void 0===De||null===(de=De.creator)||void 0===de?void 0:de.id))&&t.createElement("div",{style:{marginBottom:"10px"}},t.createElement("label",{style:{fontSize:"14px",color:"var(--app-color-gray-dark)",fontWeight:"normal",paddingLeft:"5px"}},"Status",null!==De&&void 0!==De&&De.completed_at?t.createElement("input",{style:{cursor:"auto"},placeholder:null!==(ae=null===De||void 0===De?void 0:De.status)&&void 0!==ae?ae:"No status set",readOnly:!0}):Ze.id===(null===De||void 0===De||null===(re=De.creator)||void 0===re?void 0:re.id)?t.createElement(f.rk,{defaultSelected:Il.find(e=>e.value===Ge),items:Ze.id===(null===De||void 0===De||null===(ve=De.creator)||void 0===ve?void 0:ve.id)?[...Il,{label:null===ke||void 0===ke||null===(ue=ke.misc_info)||void 0===ue?void 0:ue.lock,value:null===ke||void 0===ke||null===(ce=ke.misc_info)||void 0===ce?void 0:ce.lock},{label:"No status",value:""}]:Il,onChange:e=>Je(e.value),className:se.multiselectComponent,tmiClassName:se.inputClassNameII}):t.createElement("input",{style:{cursor:"auto"},placeholder:null!==(fe=null===De||void 0===De?void 0:De.status)&&void 0!==fe?fe:"No status set",readOnly:!0})),pl&&(null===pl||void 0===pl||null===(_e=pl.errors)||void 0===_e?void 0:_e.procedure_id)&&t.createElement(P.Z,{message:pl.errors.procedure_id})),(null===Ze||void 0===Ze||null===(ye=Ze.positions)||void 0===ye?void 0:ye.length)>1&&(!(null!==De&&void 0!==De&&De.id)||(null===(ge=De.creator)||void 0===ge?void 0:ge.id)===Ze.id)&&t.createElement("div",{style:{marginBottom:"40px"}},t.createElement("label",{style:{fontSize:"14px",color:"var(--app-color-gray-dark)",fontWeight:"normal",paddingLeft:"5px"}},t.createElement("p",null,"Role"),null!==De&&void 0!==De&&null!==(he=De.add_info)&&void 0!==he&&he.pos||null!==De&&void 0!==De&&De.completed_at?t.createElement("div",null,t.createElement("input",{style:{marginTop:"auto",marginBottom:"auto",outline:"none",fontFamily:"var(--app-text-font-mobile)",fontSize:"16px",fontWeight:"bold",lineHeight:"20px",color:"#4A4A4A",padding:"10px",border:"1px solid var(--app-color-gray-lightest)",width:"100%",backgroundColor:"var(--app-color-gray-lightest)"},defaultValue:null===Ze||void 0===Ze||null===(be=Ze.positions.find(e=>{var l;return e.id===(null===De||void 0===De||null===(l=De.add_info)||void 0===l?void 0:l.pos)}))||void 0===be?void 0:be.name,readOnly:!0})):t.createElement(f.rk,{defaultSelected:null===Ze||void 0===Ze?void 0:Ze.positions.map(e=>({label:e.name,value:e.id,pos:e})).find(e=>e.value===el),items:null===Ze||void 0===Ze?void 0:Ze.positions.map(e=>({label:e.name,value:e.id,pos:e})),onChange:e=>{ll(e.value)},className:se.multiselectComponent,tmiClassName:se.inputClassNameII}),t.createElement("div",{style:{fontWeight:"normal",margin:"10px"}},"Note: Your role when making this task")),pl&&(null===pl||void 0===pl||null===(xe=pl.errors)||void 0===xe?void 0:xe.procedure_id)&&t.createElement(P.Z,{message:pl.errors.procedure_id})),pl&&(null===pl||void 0===pl?void 0:pl.message)&&t.createElement(P.Z,{message:pl.message})),Te?t.createElement("div",{className:se.buttonsContainer},We&&Ze.id===(null===(Ee=De.creator)||void 0===Ee?void 0:Ee.id)&&!(null!==De&&void 0!==De&&null!==(Ce=De.assignee)&&void 0!==Ce&&Ce.id)&&t.createElement(f.zx,{style:{backgroundColor:"red"},clicked:()=>El(!0),className:se.saveButton,title:"Delete"}),We&&t.createElement(f.zx,{clicked:()=>(()=>{var l,o;_l(!0);let t=qe?qe.assignee_id:Pe;(0,Oe.xJ)({assignee_id:t,name:je,description:Qe,dueDate:b()(tl).format("YYYY-MM-DD HH:mm"),status:null!==Ge&&void 0!==Ge?Ge:"",add_info:(0,i.Z)((0,i.Z)({},null===e||void 0===e||null===(l=e.task)||void 0===l?void 0:l.add_info),{},{priority:null!==Ml&&void 0!==Ml?Ml:"",start:ol,end:tl,value:ul,pos:el,repeat:vl,endRepeat:dl})},null===e||void 0===e||null===(o=e.task)||void 0===o?void 0:o.id).subscribe({next:e=>{Fe(e),_l(!1),Ae(!1)},error:e=>{e&&(ml(e.data),_l(!1))},complete:()=>{}})})(),className:se.saveButton,title:"Update",loading:fl}),!We&&t.createElement(f.zx,{title:"Save",clicked:()=>{var l;Fe((0,i.Z)((0,i.Z)({},null===e||void 0===e?void 0:e.task),{},{assignee_id:qe?qe.assignee_id:Pe,name:je,description:Qe,due_date:b()(Xe).format("YYYY-MM-DD HH:mm"),status:null!==Ge&&void 0!==Ge?Ge:"",add_info:(0,i.Z)((0,i.Z)({},null===e||void 0===e||null===(l=e.task)||void 0===l?void 0:l.add_info),{},{priority:null!==Ml&&void 0!==Ml?Ml:"",start:ol,end:tl,value:ul})})),Ae(!1)},className:se.saveButton})):t.createElement("div",{className:se.buttonsContainer},t.createElement(f.zx,{clicked:()=>(_l(!0),void(0,Oe.vr)({newAssignee:qe,taskProcess:null===Se||void 0===Se?void 0:Se.processModule,taskName:je,taskDescription:null!==Qe&&void 0!==Qe?Qe:"-",dueDate:b()(tl).format("YYYY-MM-DD HH:mm"),add_info:{module_id:null===Se||void 0===Se?void 0:Se.processModule.module_id,priority:Ml,start:b()(ol).format("YYYY-MM-DD HH:mm"),end:b()(tl).format("YYYY-MM-DD HH:mm"),value:ul,pos:el,repeat:vl,endRepeat:b()(dl).format("YYYY-MM-DD HH:mm")}}).subscribe({next:e=>{null!==e&&void 0!==e&&e.start&&(0,Oe.km)(Ze.id,s.RI).pipe((0,c.q)(1)).subscribe({}),ze()},error:e=>{e&&(ml(e.data),_l(!1))},complete:()=>{_l(!1),!Cl&&Ae(!1)}})),className:se.saveButton,title:"Save",loading:fl})),xl&&t.createElement(al,{taskId:De.id,isOpen:xl,removeTask:e=>{gl(!0),(0,Oe._5)(e).subscribe({next:e=>{gl(!1),El(!1)},error:e=>{gl(!1)},complete:()=>{Ae(!1)}})},loading:yl,onClose:El}))}const al=e=>{const{isOpen:l,onClose:o,loading:i,removeTask:n,taskId:d}=e;return t.createElement(f.U7,{isOpen:l,onClose:()=>o(!1),backdropColor:!0,blured:!0,scrollable:!0,shadowedContainerStyle:{width:"35%"}},t.createElement("div",null,t.createElement("p",{style:{textAlign:"center",fontSize:"20px",color:"#4A4A4A",fontFamily:"var(--app-text-font-mobile)"}},"Are you sure do you want to delete this task?"),t.createElement(f.zx,{loading:i,clicked:()=>n(d),title:"Yes, Delete",style:{fontWeight:"500",marginLeft:"auto",marginRight:"auto"}}),t.createElement("p",{style:{cursor:"pointer",textAlign:"center",fontSize:"16px",fontWeight:600,color:"#4A4A4A",fontFamily:"var(--app-text-font-mobile)"},onClick:()=>o(!1),className:"go-back-text"},"No, Go Back")))},rl=(0,g.$j)(e=>{const{begunModule:l,allModules:o,companyData:i,components:t,rememberPath:n,lastUpdates:d,companyUsersArray:a,products:r,transactions:v,companyProcesses:s,companyPositionsArray:u,cart:c,blueprints:p,payable:m,allTasks:f}=e.flowReducer,{authenticatedUser:_}=e.authReducer,{user:y}=e.sessionReducer;return{user:y,begunModule:l,allModules:o,companyData:i,components:t,rememberPath:n,lastUpdates:d,companyUsersArray:a,products:r,transactions:v,companyProcesses:s,companyPositionsArray:u,cart:c,blueprints:p,payable:m,authenticatedUser:_,allTasks:f}},e=>({onSetAuthenticatedUser:l=>e((0,x.IF)(l))}))(e=>{var l,o,d,r,c,m,x,w,M,N,D,T,A,z,L,U,K,X,$,ee,le,oe,ie,te,ae,re,ve,ue,ce,pe,me,fe,_e,ye,he,be,xe,Ee,Ce,we,Me,Se,ke,Ze,Ie,Ne,De,Pe,Ae,ze,Le,Re,Fe,We,Ye,Be,He,Ge,Je,Qe,Ke,Xe,$e,ll,ol,il,tl,nl,dl,al,rl,vl,sl,ul,cl,pl,ml,fl,_l,yl,gl,hl,bl,xl,El,Cl,wl,Ml,Sl,kl,Zl,Il,Nl,Dl;const{navigateTo:Tl={},begunModule:Pl,user:Ol,cart:Al,selectedProcess:zl={steps:[]},allModules:Ll,companyData:Rl,components:Ul,onCancel:Fl=()=>{},companyUsersArray:Wl,products:ql,companyPositionsArray:Yl,blueprints:Bl,paymentID:Hl="",isEditing:jl=!1,payable:Vl,selectedComponent:Gl,setSelectedComponent:Jl,isProcessorOnly:Ql=!1,companyProcesses:Kl,lastUpdates:Xl,allTasks:$l}=e,{authenticatedUser:eo}=(0,g.v9)(e=>e.authReducer),[lo,oo]=(0,t.useState)(!1),[io]=(0,t.useState)(1),[to,no]=(0,t.useState)(!1),[ao,ro]=(0,t.useState)(!1),[vo,so]=(0,t.useState)(""),[uo,co]=(0,t.useState)(!1),[po,mo]=(0,t.useState)(!1),[fo,_o]=(0,t.useState)(null===(l=null===Gl||void 0===Gl?void 0:Gl.is_complete)||void 0===l||l),[yo,go]=(0,t.useState)([]),[ho,bo]=(0,t.useState)([]),[xo,Eo]=(0,t.useState)(!1),[Co,wo]=(0,t.useState)(!1),[Mo,So]=(0,t.useState)(!1),[ko,Zo]=(0,t.useState)(!1),[Io,No]=(0,t.useState)(!1),[Do,To]=(0,t.useState)(!1),[Po,Oo]=(0,t.useState)(!1),[Ao,zo]=(0,t.useState)([]),[Lo,Ro]=(0,t.useState)([]),[Uo,Fo]=(0,t.useState)([]),[Wo,qo]=(0,t.useState)(!1),[Yo,Bo]=(0,t.useState)(!1),[Ho,jo]=(0,t.useState)(!1),[Vo,Go]=(0,t.useState)(!1),[Jo,Qo]=(0,t.useState)(5),[Ko,Xo]=(0,t.useState)(0),[$o,ei]=(0,t.useState)(!1),[,li]=(0,t.useState)(!1),[oi,ii]=(0,t.useState)(!1),[ti,ni]=(0,t.useState)(!1),di=(0,n.s0)(),ai=(null===zl||void 0===zl||null===(o=zl.steps)||void 0===o?void 0:o.length)>0?null===zl||void 0===zl?void 0:zl.steps[Pl.processModule.stepIndex]:{},ri=(null===zl||void 0===zl||null===(d=zl.steps)||void 0===d?void 0:d.length)>0?null===zl||void 0===zl||null===(r=zl.steps[Pl.processModule.stepIndex])||void 0===r?void 0:r.pathway_steps:[],vi=(null===zl||void 0===zl||null===(c=zl.steps)||void 0===c?void 0:c.length)>0?null===(m=zl.steps[Pl.processModule.stepIndex])||void 0===m?void 0:m.pathway_processes:[];let si=(0,t.useRef)();const ui=(0,t.useRef)(),[ci,pi]=(0,_.pQ)();(0,t.useEffect)(()=>{var e,l;if(void 0===(null===Pl||void 0===Pl||null===(e=Pl.processModule)||void 0===e?void 0:e.isUpdating)){let e=zl;if(e&&e.steps.length>0){var o;const l=(0,i.Z)((0,i.Z)((0,i.Z)({},Pl.processModule),e),{},{steps:e.steps.filter(l=>{var o,i,t,n,d,a;return void 0==(null===l||void 0===l||null===(o=l.options)||void 0===o?void 0:o.showStepAll)||1==(null===l||void 0===l||null===(i=l.options)||void 0===i?void 0:i.showStepAll)||0==(null===l||void 0===l||null===(t=l.options)||void 0===t?void 0:t.showStepAll)&&(null===l||void 0===l||null===(n=l.options)||void 0===n||null===(d=n.showOnly)||void 0===d?void 0:d.filter(e=>eo.positions.map(e=>e.id).indexOf(e)>-1).length)>0||(null===l||void 0===l||null===(a=l.options)||void 0===a?void 0:a.showStepAuthor)&&(null===eo||void 0===eo?void 0:eo.id)===(null===e||void 0===e?void 0:e.user_id)}).map((e,l)=>(0,i.Z)((0,i.Z)({},e),{},{rank:l+1}))});u.h.dispatch((0,a.q4)(l)),pi({action:_._U.setCurrentStep,value:l.steps[null!==(o=Pl.processModule.stepIndex)&&void 0!==o?o:0]})}}else if(!0===(null===Pl||void 0===Pl||null===(l=Pl.processModule)||void 0===l?void 0:l.isUpdating)){var t;pi({action:_._U.setCurrentStep,value:Pl.processModule.steps[null!==(t=Pl.processModule.stepIndex)&&void 0!==t?t:0]})}},[]),(0,t.useEffect)(()=>{let e=Wl.filter(e=>0==e.departments.length).map(e=>({label:"".concat(e.first_name," ").concat(e.last_name),value:e.id,department:"General",user:e}));Wl.filter(e=>e.departments.length>0).filter(l=>{l.departments.filter(o=>{e=[...e,{label:"".concat(l.first_name," ").concat(l.last_name),value:l.id,department:null===o||void 0===o?void 0:o.name,user:l}]})}),Ro(e)},[Wl]),(0,t.useEffect)(()=>{Vl.length>0&&""!==Hl&&Vl.map((e,l)=>{var o;oo(!0),(0,de.e_)({user_id:eo.id,id:null===e||void 0===e?void 0:e.id,total:-Math.abs(+(null!==(o=null===e||void 0===e?void 0:e.amount)&&void 0!==o?o:0)),product:null===e||void 0===e?void 0:e.product,notes:"Payment",quantity:1}).pipe((0,p.P)()).subscribe({next:()=>{if(oo(!1),l+1==Vl.length){var e,o,i,t;if(Vl.filter(e=>e.paymentID===Hl).length>0)To((null===Pl||void 0===Pl||null===(e=Pl.processModule)||void 0===e||null===(o=e.module)||void 0===o||null===(i=o.options)||void 0===i||null===(t=i.message)||void 0===t?void 0:t.length)>0);u.h.dispatch((0,a.Wy)([])),gi()}}})})},[Vl,Hl]),(0,t.useEffect)(()=>{var e,l;if((null===Pl||void 0===Pl||null===(e=Pl.processModule)||void 0===e||null===(l=e.steps)||void 0===l?void 0:l.length)>0){let e={id:""},l=[],t=[];const n=o=>{o.component_fields.map(i=>{var n,d;o.procedure_id!==(null===qe||void 0===qe?void 0:qe.id)&&(e=Kl.find(e=>e.id===o.procedure_id),null!==(n=e)&&void 0!==n&&n.steps&&(l=F.Z(W.Z("component_blueprints"),q.Z)(null===(d=e)||void 0===d?void 0:d.steps),t=F.Z(W.Z("selected_fields"),q.Z)(l)));const a=t.find(e=>e.procedure_step_blueprint_field_id===i.procedure_step_blueprint_field_id);var r;a&&(i.data_type_name=a.data_type_name,i.data_type=a.data_type,i.field_name=a.field_name,i.options=a.options,i.component_blueprint_id=null===(r=l.find(e=>e.selected_fields.filter(e=>e.procedure_step_blueprint_field_id===i.procedure_step_blueprint_field_id).length>0))||void 0===r?void 0:r.id)})};var o,i;if(Y.Z(n,Ul.filter(e=>e.component_fields.filter(e=>void 0===(null===e||void 0===e?void 0:e.field_name)).length>0)),void 0!==(null===Tl||void 0===Tl?void 0:Tl.key))zo(Ei(null===Pl||void 0===Pl||null===(o=Pl.processModule)||void 0===o||null===(i=o.module)||void 0===i?void 0:i.id,Ul,Tl.value,Tl.key));else zo(Ul.filter(e=>{var l,o;return e.module_id===(null===Pl||void 0===Pl||null===(l=Pl.processModule)||void 0===l||null===(o=l.module)||void 0===o?void 0:o.id)}))}},[Tl,Pl,Ul]);const mi=(0,t.useCallback)(()=>{let e=!1;return ai.component_blueprints.filter(e=>{var l,o;return null===e.options||(!1===(null===(l=e.options)||void 0===l?void 0:l.allowMultipleInputs)||void 0===(null===(o=e.options)||void 0===o?void 0:o.allowMultipleInputs))}).some(e=>{var l;return!0===(null===(l=e.selected_fields)||void 0===l?void 0:l.filter(e=>"Summary"!==e.data_type_name&&"Profile"!==e.data_type_name&&"ID"!==e.data_type_name&&"Info"!==e.data_type_name&&"Notes"!==e.data_type_name&&"URL"!==e.data_type_name&&"Emails"!==e.data_type_name&&"Template"!==e.data_type_name&&"Global"!==e.data_type_name&&"Chart"!==e.data_type_name&&"Value"!==e.data_type_name).some(e=>{var l;return!0===e.mandatory&&!0===e.visible&&(!e.value||(null===e||void 0===e||null===(l=e.value)||void 0===l?void 0:l.length)<1)}))})&&(e=!0),!0===e?(ro(!0),!0):(so(""),ro(!1),!1)},[ai]),fi=e=>{var l;co(!0),mi()&&!1===(null===Pl||void 0===Pl||null===(l=Pl.processModule)||void 0===l?void 0:l.isUpdating)?xi():yi(e)},_i=e=>{ci.components=[],ci.items=[],ci.currentStep={},ci.newStepComponents=[],Pl.processModule.steps.filter(e=>e.component_blueprints.filter(e=>e.selected_fields.filter(e=>e.value=void 0))),u.h.dispatch((0,a.q4)((0,i.Z)((0,i.Z)({},Pl.processModule),{},{isUpdating:!1}))),mo(!1),co(!0),yi(e),Rl.start=!1,(0,I.aK)().pipe((0,p.P)()).subscribe({next:()=>{}})},yi=function(e){co(!1),ro(!1),no(!1);let l={};if(void 0===e){if(l=Pl.processModule.steps[Pl.processModule.stepIndex+1],void 0===l)return void u.h.dispatch((0,a.Xc)({show:!0,message:"Misconfigured next step, please contact your administrator",color:"red",bottom:!0}));pi({action:_._U.setCurrentStep,value:l}),u.h.dispatch((0,a.q4)((0,i.Z)((0,i.Z)({},Pl.processModule),{},{stepIndex:Pl.processModule.stepIndex+1})))}else{if(l=zl.steps.find(l=>l.id===e),void 0==l)l=zl.steps[Pl.processModule.stepIndex+1],u.h.dispatch((0,a.q4)((0,i.Z)((0,i.Z)({},Pl.processModule),{},{stepIndex:Pl.processModule.stepIndex+1})));else{var o;if(void 0===zl.steps[(null===(o=l)||void 0===o?void 0:o.rank)-1])return void u.h.dispatch((0,a.Xc)({show:!0,message:"Misconfigured next step, please contact your administrator",color:"red",bottom:!0}));var t;u.h.dispatch((0,a.q4)((0,i.Z)((0,i.Z)({},Pl.processModule),{},{stepIndex:(null===(t=l)||void 0===t?void 0:t.rank)-1})))}pi({action:_._U.setCurrentStep,value:l})}const n=ci.newStepComponents.filter(e=>null===e.options||(void 0===e.allowMultipleInputs||!1===e.options.allowMultipleInputs));pi({action:_._U.setComponents,value:[...ci.components.filter(e=>n.every(l=>l.id!==e.id)),...B.Z(e=>e.selected_fields.filter(e=>""===e.value).length>0,n)]}),pi({action:_._U.setModuleNewStepComponents,value:l.component_blueprints.filter(e=>e.selected_fields.filter(e=>"Status"===e.data_type_name||"ID"===e.data_type_name||"Value"===e.data_type_name).length>0)})},gi=()=>{var e,l,o,t;pi({action:_._U.setModuleItems,value:[]}),pi({action:_._U.setComponents,value:[]}),pi({action:_._U.addModuleComponents,value:[]}),pi({action:_._U.setModuleNewStepComponents,value:[]}),u.h.dispatch((0,a.q4)((0,i.Z)((0,i.Z)({},null!==(e=null===Pl||void 0===Pl?void 0:Pl.processModule)&&void 0!==e?e:{}),{},{isUpdating:!1})));const n=(null===zl||void 0===zl||null===(l=zl.steps)||void 0===l?void 0:l.length)>0&&!((null===zl||void 0===zl||null===(o=zl.steps[0])||void 0===o||null===(t=o.component_blueprints)||void 0===t?void 0:t.filter(e=>{var l;return 1==(null===(l=e.options)||void 0===l?void 0:l.asModuleList)}).length)>0);_i(Ql||n?Pl.processModule.steps[0].id:Pl.processModule.steps[1].id)},hi=()=>{var e,l,o,t,n,d,r,c,m,f,_,y,g,h,x,E,C,w;if(mi())return so("Fill up all the required fields"),window.scrollTo({top:0,behavior:"smooth"}),void no(!1);const M=ci.newStepComponents,S=[...ci.components.filter(e=>M.every(l=>l.id!==e.id)),...B.Z(e=>e.selected_fields.filter(e=>""===e.value).length>0,M)];let k,Z=[],I=[],N="",D="",T=!1,P=null!==Pl&&void 0!==Pl&&null!==(e=Pl.processModule)&&void 0!==e&&e.isUpdating?null===Gl||void 0===Gl?void 0:Gl.status:null!==Pl&&void 0!==Pl&&null!==(l=Pl.processModule)&&void 0!==l&&null!==(o=l.module)&&void 0!==o&&null!==(t=o.options)&&void 0!==t&&t.lock?"New":"None",O={x:0},A=[];const z=null===Gl||void 0===Gl?void 0:Gl.status,L={};let R=null!==Pl&&void 0!==Pl&&null!==(n=Pl.processModule)&&void 0!==n&&n.isUpdating?(null!==(d=H.Z(Math.max,W.Z("group",j.Z(V.Z("group"))(null!==(r=null===Gl||void 0===Gl?void 0:Gl.component_fields)&&void 0!==r?r:[]))))&&void 0!==d?d:-1)+1:0;S.map((e,l)=>{var o,t,n,d,a,r;let v=l;const u=null===(o=e.selected_fields.filter(e=>"Record"===e.data_type_name||"Filters"===e.data_type_name))||void 0===o?void 0:o.find(e=>+(null===e||void 0===e?void 0:e.group)>=0);u&&null!==Pl&&void 0!==Pl&&null!==(t=Pl.processModule)&&void 0!==t&&t.isUpdating?v=u.group:null!==Pl&&void 0!==Pl&&null!==(n=Pl.processModule)&&void 0!==n&&n.isUpdating&&(v=R,R++),e.selected_fields.filter(e=>("Record"===e.data_type_name||"Filters"===e.data_type_name)&&!0===e.visible).map((e,l)=>{var o;if(null!==e.value&&void 0!==e.value&&1!=(null===(o=e.options)||void 0===o?void 0:o.skip)){var t,n;I=[...I,(0,i.Z)((0,i.Z)({},e),{},{index:l,group:v})],N=e.value,L[e.field_name]=e.value;const o=null===(t=Ul.find(l=>l.component_fields.filter(l=>{var o;return l.component_blueprint_id===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.component_id)&&(null===l||void 0===l?void 0:l.value)===N}).length>0))||void 0===t||null===(n=t.component_fields.find(e=>"Email Recipient"===e.data_type_name))||void 0===n?void 0:n.value;o&&(k=o)}});const c=null===(d=e.selected_fields.filter(e=>!("Record"===e.data_type_name||"Filters"===e.data_type_name)))||void 0===d?void 0:d.find(e=>+(null===e||void 0===e?void 0:e.group)>=0);c&&null!==Pl&&void 0!==Pl&&null!==(a=Pl.processModule)&&void 0!==a&&a.isUpdating?v=c.group:null!==Pl&&void 0!==Pl&&null!==(r=Pl.processModule)&&void 0!==r&&r.isUpdating&&(v=R,R++),e.selected_fields.filter(e=>!("Record"===e.data_type_name||"Filters"===e.data_type_name)).map((e,l)=>{var o,t,n,d;if(null!==e.value&&void 0!==e.value&&1!=(null===(o=e.options)||void 0===o?void 0:o.skip)){if(L[e.field_name]=e.value,"ID"===(null===e||void 0===e?void 0:e.data_type_name))null!==Pl&&void 0!==Pl&&null!==(n=Pl.processModule)&&void 0!==n&&n.isUpdating?I=[...I,(0,i.Z)((0,i.Z)({},e),{},{index:l,group:v})]:(I=[...I,(0,i.Z)((0,i.Z)({},e),{},{index:l,group:v,value:"".concat(null===e||void 0===e?void 0:e.options.id).concat(null===(null===Rl||void 0===Rl?void 0:Rl.misc_info)?1:null!==(d=null===Rl||void 0===Rl?void 0:Rl.misc_info[null===e||void 0===e?void 0:e.field_name])&&void 0!==d?d:1)})],Z=[...Z,"".concat(e.field_name)]);else if("Value"===(null===e||void 0===e?void 0:e.data_type_name)){var a;I=[...I,(0,i.Z)((0,i.Z)({},e),{},{index:l,value:null===e||void 0===e||null===(a=e.options)||void 0===a?void 0:a.value,group:v})]}else if("Email Recipient"===(null===e||void 0===e?void 0:e.data_type_name))I=[...I,(0,i.Z)((0,i.Z)({},e),{},{index:l,value:e.value.replace(/ /g,""),group:v})];else if("Product Lookup"===e.data_type_name)I=[...I];else if("Status"===e.data_type_name&&"Draft"===e.value&&1==fo)T=!0,I=[...I,(0,i.Z)((0,i.Z)({},e),{},{index:l,value:"New",group:v})],P="New";else if("Status"===e.data_type_name)I=[...I,(0,i.Z)((0,i.Z)({},e),{},{index:l,value:null===e||void 0===e?void 0:e.value,group:v})],P=null===e||void 0===e?void 0:e.value;else if("Positions"===e.data_type_name&&!0===(null===e||void 0===e||null===(t=e.options)||void 0===t?void 0:t.share))I=[...I,(0,i.Z)((0,i.Z)({},e),{},{index:l,value:null===e||void 0===e?void 0:e.value,group:v})],A=[null===e||void 0===e?void 0:e.value];else if("Pin"===e.data_type_name)I=[...I,(0,i.Z)((0,i.Z)({},e),{},{index:l,value:null===e||void 0===e?void 0:e.value,group:v})];else if("Formula"===e.data_type_name){var r;const o=null!==Pl&&void 0!==Pl&&null!==(r=Pl.processModule)&&void 0!==r&&r.isUpdating?(0,s.LV)(null===e||void 0===e?void 0:e.options,Gl.component_fields.filter(l=>{var o;return null===(o=e.options)||void 0===o?void 0:o.list.includes(l.field_name)}),S,ci.items):e.value;I=[...I,(0,i.Z)((0,i.Z)({},e),{},{index:l,value:o.toString(),group:v})]}else if("output"!==e.data_type){var u,c,p,m;if("People"===e.data_type_name){var f,_;if(!0===(null===(f=e.options)||void 0===f?void 0:f.email)){var y,g;const l=null===(y=Lo.find(l=>l.label===(null===e||void 0===e?void 0:e.value)))||void 0===y||null===(g=y.user)||void 0===g?void 0:g.email;D=l?D.concat(D.length>0?",".concat(l):l):D,e.email=void 0}if(!0===(null===(_=e.options)||void 0===_?void 0:_.share)){var h,b;const l=null===(h=Lo.find(l=>l.label===(null===e||void 0===e?void 0:e.value)))||void 0===h||null===(b=h.user)||void 0===b?void 0:b.id;l&&yo.push(l)}}"email"===(null===e||void 0===e||null===(u=e.options)||void 0===u?void 0:u.actionToPerform2)&&null!==e&&void 0!==e&&null!==(c=e.options)&&void 0!==c&&null!==(p=c.valueToMatch2)&&void 0!==p&&null!==(m=p.split(","))&&void 0!==m&&m.includes(null===e||void 0===e?void 0:e.value)&&k&&(T=!0,D=D.concat(D.length>0?",".concat(k):k)),I=[...I,(0,i.Z)((0,i.Z)({},e),{},{index:l,group:v})]}}else if("Status"===(null===e||void 0===e?void 0:e.data_type_name))1==fo?(I=[...I,(0,i.Z)((0,i.Z)({},e),{},{index:l,value:"New",group:v})],P="New"):(I=[...I,(0,i.Z)((0,i.Z)({},e),{},{index:l,value:"Draft",group:v})],P="Draft"),L[e.field_name]=e.value;else if("Action Button"===(null===e||void 0===e?void 0:e.data_type_name)){var x,E,C;I=[...I],L[e.field_name]=e.value,"status"===(null===e||void 0===e||null===(x=e.options)||void 0===x?void 0:x.action)?P=e.value:"user"!==(null===(E=e.options)||void 0===E?void 0:E.action)&&"creator"!==(null===(C=e.options)||void 0===C?void 0:C.action)||(Gl.assigned_to=null===e||void 0===e?void 0:e.value)}})});let U,F,q,Y,G="";if((null===(c=Pl.processModule)||void 0===c||null===(m=c.module)||void 0===m||null===(f=m.options)||void 0===f||null===(_=f.title)||void 0===_?void 0:_.length)>0){var J,Q,K,X,$,ee,le,oe,ie,te,ne,ae,re,ve,se,ue;if(null===(J=Pl.processModule)||void 0===J||null===(Q=J.module)||void 0===Q||null===(K=Q.options)||void 0===K||null===(X=K.title)||void 0===X||X.map(e=>{if("Info"!==e){const n=I.find(l=>l.field_name===e);var l,o,i,t;if("Date"===(null===n||void 0===n?void 0:n.data_type_name)||"Calendar"===(null===n||void 0===n?void 0:n.data_type_name))G=""===G?"".concat(b()(null===n||void 0===n?void 0:n.value).format("DD MMMM YYYY")):"".concat(null!==(l=G)&&void 0!==l?l:"","  ").concat(b()(null===n||void 0===n?void 0:n.value).format("DD MMMM YYYY HH:mm"));else G=""===G?"".concat(null!==(o=null===n||void 0===n?void 0:n.value)&&void 0!==o?o:""):"".concat(null!==(i=G)&&void 0!==i?i:"","  ").concat(null!==(t=null===n||void 0===n?void 0:n.value)&&void 0!==t?t:"")}else{var n;const e=null===(n=Pl.processModule)||void 0===n?void 0:n.completeSteps.find(e=>{var l;return(null===(l=e.component_blueprints.filter(e=>{var l;return(null===(l=e.selected_fields.filter(e=>"Info"===e.data_type_name))||void 0===l?void 0:l.length)>0}))||void 0===l?void 0:l.length)>0});if(void 0!==e){var d,a;const l=null===(d=e.component_blueprints)||void 0===d||null===(a=d.find(e=>{var l;return(null===(l=e.selected_fields.filter(e=>"Info"===e.data_type_name))||void 0===l?void 0:l.length)>0}).selected_fields)||void 0===a?void 0:a.find(e=>"Info"===e.data_type_name),o=Ul.find(e=>{var o;return(null===(o=e.component_fields.filter(e=>e.component_blueprint_id===l.options.component_id&&e.value===L[l.field_name]))||void 0===o?void 0:o.length)>0});var r,v,s,u,c,p,m;if(o)if((null===l||void 0===l||null===(r=l.options)||void 0===r||null===(v=r.list)||void 0===v?void 0:v.length)>0)G=""===G?"".concat(null!==(s=null===(u=o.component_fields.find(e=>{var o;return e.field_name===(null===l||void 0===l||null===(o=l.options)||void 0===o?void 0:o.list[0])}))||void 0===u?void 0:u.value)&&void 0!==s?s:""):"".concat(null!==(c=G)&&void 0!==c?c:"","  ").concat(null!==(p=null===(m=o.component_fields.find(e=>{var o;return e.field_name===(null===l||void 0===l||null===(o=l.options)||void 0===o?void 0:o.list[0])}))||void 0===m?void 0:m.value)&&void 0!==p?p:"")}}}),null!==($=Pl.processModule)&&void 0!==$&&null!==(ee=$.module)&&void 0!==ee&&null!==(le=ee.options)&&void 0!==le&&le.title.find(e=>"UUID"===e))G="".concat(null===(ne=Pl.processModule)||void 0===ne||null===(ae=ne.module)||void 0===ae?void 0:ae.name," #").concat(null!==Pl&&void 0!==Pl&&null!==(re=Pl.processModule)&&void 0!==re&&re.isUpdating?Gl.id.replace(/\D/g,"").slice(-5):(0,s.mR)().replace(/\D/g,"").slice(-5));if(null!==(oe=Pl.processModule)&&void 0!==oe&&null!==(ie=oe.module)&&void 0!==ie&&null!==(te=ie.options)&&void 0!==te&&te.title.find(e=>"Module Name"===e))G=" ".concat(null===(ve=Pl.processModule)||void 0===ve||null===(se=ve.module)||void 0===se?void 0:se.name," - ").concat(null!==(ue=G)&&void 0!==ue?ue:"")}else{var ce,pe,me;G="".concat(null===(ce=Pl.processModule)||void 0===ce||null===(pe=ce.module)||void 0===pe?void 0:pe.name," #").concat(null!==Pl&&void 0!==Pl&&null!==(me=Pl.processModule)&&void 0!==me&&me.isUpdating?Gl.id.replace(/\D/g,"").slice(-5):(0,s.mR)().replace(/\D/g,"").slice(-5))}if(!0===(null===(y=Pl.processModule)||void 0===y||null===(g=y.module)||void 0===g||null===(h=g.options)||void 0===h?void 0:h.emailOutputs)){var fe,_e;let e=Pl.processModule.steps.find(e=>{var l;return(null===(l=e.component_blueprints.filter(e=>{var l;return(null===(l=e.selected_fields.filter(e=>"Info"===e.data_type_name&&1==e.options.email))||void 0===l?void 0:l.length)>0}))||void 0===l?void 0:l.length)>0});if(void 0!==e){var ye,he;const l=null===(ye=e.component_blueprints)||void 0===ye||null===(he=ye.find(e=>{var l;return(null===(l=e.selected_fields.filter(e=>{var l;return"Info"===e.data_type_name&&1==(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.email)}))||void 0===l?void 0:l.length)>0}).selected_fields)||void 0===he?void 0:he.find(e=>{var l;return"Info"===e.data_type_name&&!0===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.email)}),o=Ul.find(e=>{var o;return(null===(o=e.component_fields.filter(e=>e.component_blueprint_id===l.options.component_id&&e.value===N))||void 0===o?void 0:o.length)>0});o&&(F=l.id,U=o.id)}if(e=Pl.processModule.steps.find(e=>{var l;return!0===e.is_end&&(null===(l=e.component_blueprints.filter(e=>{var l;return(null===(l=e.selected_fields.filter(e=>"Emails"===e.data_type_name))||void 0===l?void 0:l.length)>0}))||void 0===l?void 0:l.length)>0}),void 0!==e){var be;(null===(be=e.component_blueprints)||void 0===be?void 0:be.find(e=>{var l;return(null===(l=e.selected_fields.filter(e=>"Emails"===e.data_type_name))||void 0===l?void 0:l.length)>0})).selected_fields.filter(e=>"Emails"===e.data_type_name).filter(e=>{var l;I.find(l=>l.value===e.options.valueToMatch&&l.field_name===e.options.fieldToMatch)&&(k&&(q=e,T=!0,!0===(null===(l=e.options)||void 0===l?void 0:l.copyEmailRecip)&&(D=D.concat(D.length>0?",".concat(k):k))))})}var xe,Ee;if(D=""===D?[]:null!==(fe=D.split(","))&&void 0!==fe?fe:[],Uo.length>0||D.length>0)D=null!==Pl&&void 0!==Pl&&null!==(xe=Pl.processModule)&&void 0!==xe&&xe.isUpdating?!0===T?[...Uo,...D]:[...Uo]:[...Uo,...D];if(D.length>0&&(O={emailTo:D}),F&&U&&(O=(0,i.Z)((0,i.Z)({},O),{},{info:F,target:U})),(null===(_e=q)||void 0===_e?void 0:_e.id.length)>0)O=(0,i.Z)((0,i.Z)({},O),{},{template:null===(Ee=q)||void 0===Ee?void 0:Ee.id})}if(!0===(null===(x=Pl.processModule)||void 0===x||null===(E=x.module)||void 0===E||null===(C=E.options)||void 0===C?void 0:C.rewards)&&z!==P){const e=Pl.processModule.steps.find(e=>{var l;return(null===(l=e.component_blueprints.filter(e=>{var l;return(null===(l=e.selected_fields.filter(e=>"Rewards"===e.data_type_name))||void 0===l?void 0:l.length)>0}))||void 0===l?void 0:l.length)>0});var Ce,we,Me,Se,ke,Ze;if(void 0!==e)if(Y=null===(Ce=e.component_blueprints)||void 0===Ce||null===(we=Ce.find(e=>{var l;return(null===(l=e.selected_fields.filter(e=>"Rewards"===e.data_type_name))||void 0===l?void 0:l.length)>0}).selected_fields)||void 0===we?void 0:we.find(e=>"Rewards"===e.data_type_name),Y.options.status===P)eo.options.rewards=+(null!==(Me=null===eo||void 0===eo||null===(Se=eo.options)||void 0===Se?void 0:Se.rewards)&&void 0!==Me?Me:0)+ +(null===(ke=Y)||void 0===ke||null===(Ze=ke.options)||void 0===Ze?void 0:Ze.points)}var Ie,Ne,De,Te,Pe,Ae,ze,Le,Re,Ue,Fe,We,qe,Ye,Be,He,je,Ve,Ge,Je,Qe;(null===(w=I)||void 0===w?void 0:w.length)>0?(oo(!0),null!==Pl&&void 0!==Pl&&null!==(Ie=Pl.processModule)&&void 0!==Ie&&Ie.isUpdating?(Gl.options=O,Gl.status=P,null!==ci&&void 0!==ci&&ci.assigned_to&&(Gl.assigned_to={id:null===ci||void 0===ci?void 0:ci.assigned_to}),(0,v.KL)((0,i.Z)((0,i.Z)({},Gl),{},{selected_fields:[...I],component_items:ci.items}),Gl.id,null===Gl||void 0===Gl||null===(Ne=Gl.shared_users)||void 0===Ne?void 0:Ne.map(e=>null===e||void 0===e?void 0:e.id),G,fo,(null===(De=Pl.processModule)||void 0===De||null===(Te=De.module)||void 0===Te||null===(Pe=Te.options)||void 0===Pe||null===(Ae=Pe.shares)||void 0===Ae?void 0:Ae.length)>0?[...null!==(ze=null===(Le=Pl.processModule)||void 0===Le||null===(Re=Le.module)||void 0===Re||null===(Ue=Re.options)||void 0===Ue?void 0:Ue.shares)&&void 0!==ze?ze:[],...A]:[...null!==(Fe=null===Gl||void 0===Gl||null===(We=Gl.shared_positions)||void 0===We?void 0:We.map(e=>null===e||void 0===e?void 0:e.id))&&void 0!==Fe?Fe:[],...A]).subscribe({next:e=>{var l,o,t,n,d,a,r,v;if(null!==(l=Pl.processModule)&&void 0!==l&&null!==(o=l.module)&&void 0!==o&&null!==(t=o.options)&&void 0!==t&&t.single)return localStorage.setItem(null===(a=Pl.processModule)||void 0===a?void 0:a.module.id,JSON.stringify(null===e||void 0===e?void 0:e.data)),void yi(null===(r=Pl.processModule)||void 0===r||null===(v=r.steps[0])||void 0===v?void 0:v.id);const u=I.find(e=>{var l;return"People"===e.data_type_name&&!0===(null===(l=e.options)||void 0===l?void 0:l.calendar)});if(u){var c;const l=JSON.parse(null!==(c=null===u||void 0===u?void 0:u.value)&&void 0!==c?c:{task:0}),o=$l.find(e=>e.id===(null===l||void 0===l?void 0:l.task));var m;if(o)(0,Oe.xJ)((0,i.Z)((0,i.Z)({},o),{},{assignee_id:null===e||void 0===e||null===(m=e.data.created_by)||void 0===m?void 0:m.id}),null===o||void 0===o?void 0:o.id).pipe((0,p.P)()).subscribe({complete:()=>{}})}const f=I.find(e=>"Payments"===e.data_type_name),_=I.find(e=>{var l;return e.field_name===(null===f||void 0===f||null===(l=f.options)||void 0===l?void 0:l.paymentField)});var y,g,h;if("Closed"!==(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.status)&&"Cancelled"!==(null===e||void 0===e||null===(d=e.data)||void 0===d?void 0:d.status))if(!f||null!==e&&void 0!==e&&null!==(y=e.data.payments)&&void 0!==y&&y.stripe_id||"Cash"===(null===f||void 0===f?void 0:f.value)||"Wallet"===(null===f||void 0===f?void 0:f.value)||"Points"===(null===f||void 0===f?void 0:f.value)||eo.id!==(null===Gl||void 0===Gl||null===(g=Gl.created_by)||void 0===g?void 0:g.id))if(f){var b,x,E,C,w,M;if(_&&"Cash"!==(null===f||void 0===f?void 0:f.value)&&P===(null===(b=Rl.misc_info)||void 0===b?void 0:b.lock)||(null!==(x=null===(E=Pl.processModule)||void 0===E||null===(C=E.module)||void 0===C||null===(w=C.options)||void 0===w?void 0:w.lock)&&void 0!==x?x:"").split(",").includes(P)&&eo.id===(null===Gl||void 0===Gl||null===(M=Gl.assigned_to)||void 0===M?void 0:M.id)&&z!==P){var S,k;const e=+(null===_||void 0===_?void 0:_.value)-+(null===_||void 0===_?void 0:_.value)*+(null!==(S=null===Rl||void 0===Rl||null===(k=Rl.misc_info)||void 0===k?void 0:k.rate)&&void 0!==S?S:.2);(0,de.e_)({user_id:eo.id,id:(0,s.mR)(),total:e,product:"CR-".concat(G),notes:"Wallet",quantity:1}).pipe((0,p.P)()).subscribe({next:()=>{var l;eo.wallet=+(+(null!==(l=null===Ol||void 0===Ol?void 0:Ol.wallet)&&void 0!==l?l:0)+e),oo(!1),gi(),Mi(),window.scrollTo({top:0,behavior:"smooth"})}})}else Y?(0,ge.Vy)(eo,null===eo||void 0===eo?void 0:eo.options).pipe((0,p.P)()).subscribe({next:()=>{gi(),Mi(),window.scrollTo({top:0,behavior:"smooth"})},complete:()=>{}}):(gi(),Mi(),window.scrollTo({top:0,behavior:"smooth"})),oo(!1)}else oo(!1),gi(),Mi(),window.scrollTo({top:0,behavior:"smooth"});else ci.total=+(null===_||void 0===_?void 0:_.value),ci.plan=+(null===_||void 0===_?void 0:_.value),ci.id=null===e||void 0===e||null===(h=e.data)||void 0===h?void 0:h.title,oo(!1),Bo(!0);else oo(!1),gi(),Mi(),window.scrollTo({top:0,behavior:"smooth"})}})):(0,v.LM)({id:S[0].id,selected_fields:[...I],component_items:ci.items,options:O,status:P,assigned_to:null!==(qe=null===ci||void 0===ci?void 0:ci.assigned_to)&&void 0!==qe?qe:""},"",Pl.processModule.module_id,yo,G,fo,(null===(Ye=Pl.processModule)||void 0===Ye||null===(Be=Ye.module)||void 0===Be||null===(He=Be.options)||void 0===He||null===(je=He.shares)||void 0===je?void 0:je.length)>0?[...null!==(Ve=null===(Ge=Pl.processModule)||void 0===Ge||null===(Je=Ge.module)||void 0===Je||null===(Qe=Je.options)||void 0===Qe?void 0:Qe.shares)&&void 0!==Ve?Ve:[],...A]:[...ho,...A]).subscribe({next:e=>{var l,o,t,n,d,r,c,m,f;if(null!==(l=Pl.processModule)&&void 0!==l&&null!==(o=l.module)&&void 0!==o&&null!==(t=o.options)&&void 0!==t&&t.single)return localStorage.setItem(null===(c=Pl.processModule)||void 0===c?void 0:c.module.id,JSON.stringify(e)),void yi(null===(m=Pl.processModule)||void 0===m||null===(f=m.steps[0])||void 0===f?void 0:f.id);(null===(n=Z)||void 0===n?void 0:n.length)>0&&bi(Z);const _=I.find(e=>{var l;return"People"===e.data_type_name&&!0===(null===(l=e.options)||void 0===l?void 0:l.calendar)});if(_){var y;const l=JSON.parse(null!==(y=null===_||void 0===_?void 0:_.value)&&void 0!==y?y:{task:0}),o=$l.find(e=>e.id===(null===l||void 0===l?void 0:l.task));var g,h;if(o)(0,Oe.xJ)((0,i.Z)((0,i.Z)({},o),{},{assignee_id:null!==(g=null===e||void 0===e||null===(h=e.created_by)||void 0===h?void 0:h.id)&&void 0!==g?g:eo.id}),null===o||void 0===o?void 0:o.id).pipe((0,p.P)()).subscribe({})}if(Pl.processModule.selectedComponent=e,"Closed"!==(null===e||void 0===e||null===(d=e.data)||void 0===d?void 0:d.status)&&"Cancelled"!==(null===e||void 0===e||null===(r=e.data)||void 0===r?void 0:r.status))if(I.filter(e=>!("Cash"===(null===e||void 0===e?void 0:e.value)||"Wallet"===(null===e||void 0===e?void 0:e.value)||"Points"===(null===e||void 0===e?void 0:e.value))&&"Payments"===e.data_type_name).length>0)oo(!1),Bo(!0);else if(I.filter(e=>("Wallet"===(null===e||void 0===e?void 0:e.value)||"Points"===(null===e||void 0===e?void 0:e.value))&&"Payments"===e.data_type_name).length>0){var b;const l=I.find(e=>"Payments"===e.data_type_name);(0,de.e_)({user_id:eo.id,id:null!==(b=null===e||void 0===e?void 0:e.id)&&void 0!==b?b:(0,s.mR)(),total:-ci.total,product:"DB-".concat(G),notes:"Wallet",quantity:1}).pipe((0,p.P)()).subscribe({next:()=>{var o,t;(0,ge.Vy)(eo,(0,i.Z)((0,i.Z)({},null===eo||void 0===eo?void 0:eo.options),{},{points:+(+(null!==(o=null===Ol||void 0===Ol||null===(t=Ol.options)||void 0===t?void 0:t.points)&&void 0!==o?o:0)-("Points"===(null===l||void 0===l?void 0:l.value)?+ci.total:0))})).pipe((0,p.P)()).subscribe({next:l=>{var o,i,t,n,d,r,s,c,m,f;(oo(!1),eo.options=l.options,null!==Pl&&void 0!==Pl&&null!==(o=Pl.processModule)&&void 0!==o&&null!==(i=o.steps)&&void 0!==i&&i.find(e=>e.component_blueprints.filter(e=>e.selected_fields.filter(e=>"Action Button"===e.data_type_name&&("user"===e.options.action||"creator"===e.options.action)).length>0).length>0))?(Oo((null===Pl||void 0===Pl||null===(t=Pl.processModule)||void 0===t||null===(n=t.module)||void 0===n||null===(d=n.options)||void 0===d||null===(r=d.message)||void 0===r?void 0:r.length)>0&&1==e.is_complete),Xo(setInterval(()=>{(0,v.r6)(e.id).pipe((0,p.P)()).subscribe({next:e=>{var l;null!==e&&void 0!==e&&null!==(l=e.component_fields)&&void 0!==l&&l.find(e=>"Action Button"===e.data_type_name&&(null===e||void 0===e?void 0:e.value))&&(Jl(e),window.clearInterval(Ko))},error:()=>{window.clearInterval(Ko)}})},15e3))):To((null===Pl||void 0===Pl||null===(s=Pl.processModule)||void 0===s||null===(c=s.module)||void 0===c||null===(m=c.options)||void 0===m||null===(f=m.message)||void 0===f?void 0:f.length)>0&&1==e.is_complete);u.h.dispatch((0,a.RV)({})),Mi(),gi()}})}})}else{var x,E,C,w,M,S,k,N,D,T;if(oo(!1),null!==Pl&&void 0!==Pl&&null!==(x=Pl.processModule)&&void 0!==x&&null!==(E=x.steps)&&void 0!==E&&E.find(e=>e.component_blueprints.filter(e=>e.selected_fields.filter(e=>"Action Button"===e.data_type_name&&("user"===e.options.action||"creator"===e.options.action)).length>0).length>0))Oo((null===Pl||void 0===Pl||null===(C=Pl.processModule)||void 0===C||null===(w=C.module)||void 0===w||null===(M=w.options)||void 0===M||null===(S=M.message)||void 0===S?void 0:S.length)>0&&1==e.is_complete),Xo(setInterval(()=>{(0,v.r6)(e.id).pipe((0,p.P)()).subscribe({next:e=>{var l;null!==e&&void 0!==e&&null!==(l=e.component_fields)&&void 0!==l&&l.find(e=>"Action Button"===e.data_type_name&&(null===e||void 0===e?void 0:e.value))&&(Jl(e),window.clearInterval(Ko))},error:()=>{window.clearInterval(Ko)}})},15e3));else To((null===Pl||void 0===Pl||null===(k=Pl.processModule)||void 0===k||null===(N=k.module)||void 0===N||null===(D=N.options)||void 0===D||null===(T=D.message)||void 0===T?void 0:T.length)>0&&1==e.is_complete);u.h.dispatch((0,a.RV)({})),Mi(),gi()}else{var P,O,A,z,L,R,U,F,W,q;if(oo(!1),null!==Pl&&void 0!==Pl&&null!==(P=Pl.processModule)&&void 0!==P&&null!==(O=P.steps)&&void 0!==O&&O.find(e=>e.component_blueprints.filter(e=>e.selected_fields.filter(e=>"Action Button"===e.data_type_name&&("user"===e.options.action||"creator"===e.options.action)).length>0).length>0))Oo((null===Pl||void 0===Pl||null===(A=Pl.processModule)||void 0===A||null===(z=A.module)||void 0===z||null===(L=z.options)||void 0===L||null===(R=L.message)||void 0===R?void 0:R.length)>0&&1==e.is_complete),Xo(setInterval(()=>{(0,v.r6)(e.id).pipe((0,p.P)()).subscribe({next:e=>{var l;null!==e&&void 0!==e&&null!==(l=e.component_fields)&&void 0!==l&&l.find(e=>"Action Button"===e.data_type_name&&(null===e||void 0===e?void 0:e.value))&&(Jl(e),window.clearInterval(Ko))},error:()=>{window.clearInterval(Ko)}})},15e3));else To((null===Pl||void 0===Pl||null===(U=Pl.processModule)||void 0===U||null===(F=U.module)||void 0===F||null===(W=F.options)||void 0===W||null===(q=W.message)||void 0===q?void 0:q.length)>0&&1==e.is_complete);u.h.dispatch((0,a.RV)({})),Mi(),gi()}},complete:()=>{},error:e=>{var l,o,i,t;null!==e&&void 0!==e&&e.data&&(null!==Z&&bi(Z),To((null===Pl||void 0===Pl||null===(l=Pl.processModule)||void 0===l||null===(o=l.module)||void 0===o||null===(i=o.options)||void 0===i||null===(t=i.message)||void 0===t?void 0:t.length)>0&&1==(null===e||void 0===e?void 0:e.data.is_complete)),u.h.dispatch((0,a.RV)({})),gi())}})):(u.h.dispatch((0,a.Xc)({show:!0,message:"There are no items to be saved",color:"red"})),window.scrollTo({top:0,behavior:"smooth"}))},bi=e=>{if((null===e||void 0===e?void 0:e.length)>0){var l;const o=null!==(l=Rl.misc_info)&&void 0!==l?l:{};e.filter(e=>{var l;o[e]=+(null!==(l=o[e])&&void 0!==l?l:1)+1}),oo(!0),(0,I.x5)({misc_info:o}).pipe((0,p.P)()).subscribe({complete:()=>{}})}},xi=()=>{so("Fill up all the required fields"),window.scrollTo({top:0,behavior:"smooth"}),no(!1)},Ei=function(e){let l=arguments.length>2?arguments[2]:void 0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).filter(l=>l.module_id===e).filter(e=>{var t;return i.length>0?i.includes(e.id):""===l?e:e.title.includes(l)||(null===(t=e.component_fields.filter(e=>{var i,t,n,d,a;return"Record"===e.data_type_name?null===(i=Ul.find(l=>{var o;return(null===(o=l.component_fields.filter(l=>l.field_name===e.options.output&&l.component_blueprint_id===e.options.component_id&&l.value===(null===e||void 0===e?void 0:e.value)))||void 0===o?void 0:o.length)>0}))||void 0===i?void 0:i.component_fields.find(l=>{var o;return null===(o=e.options)||void 0===o?void 0:o.names.includes(l.field_name)}).value.includes(l):void 0!==o?("date"===e.data_type?null===(t=b()(new Date(null===e||void 0===e?void 0:e.value)))||void 0===t?void 0:t.format("DD MMM YYYY").includes(l):null===e||void 0===e||null===(n=e.value)||void 0===n?void 0:n.includes(l))&&e.field_name===o:"date"===e.data_type?null===(d=b()(new Date(null===e||void 0===e?void 0:e.value)))||void 0===d?void 0:d.format("DD MMM YYYY").includes(l):null===e||void 0===e||null===(a=e.value)||void 0===a?void 0:a.includes(l)}))||void 0===t?void 0:t.length)>0})},Ci=null===Gl||void 0===Gl||null===(x=Gl.component_fields)||void 0===x||null===(w=x.find(e=>"Status"===e.data_type_name))||void 0===w?void 0:w.value,wi=(null===Pl||void 0===Pl||null===(M=Pl.processModule)||void 0===M||null===(N=M.steps)||void 0===N?void 0:N.length)>0?null===Pl||void 0===Pl||null===(D=Pl.processModule)||void 0===D||null===(T=D.steps)||void 0===T||null===(A=T.find(e=>(null===e||void 0===e?void 0:e.component_blueprints.filter(e=>e.selected_fields.filter(e=>"Action Button"===e.data_type_name).length>0).length)>0))||void 0===A||null===(z=A.component_blueprints.find(e=>{var l;return(null===(l=e.selected_fields.filter(e=>"Action Button"===e.data_type_name))||void 0===l?void 0:l.length)>0}))||void 0===z||null===(L=z.options)||void 0===L?void 0:L.showOnly:[],Mi=()=>{var e,l,o,t,n;Jl({}),pi({action:_._U.setModuleItems,value:null!==(e=null===Gl||void 0===Gl?void 0:Gl.component_items)&&void 0!==e?e:[]}),pi({action:_._U.setModuleNewStepComponents,value:[]}),pi({action:_._U.setComponents,value:[]}),(null===Pl||void 0===Pl||null===(l=Pl.processModule)||void 0===l||null===(o=l.steps)||void 0===o?void 0:o.length)>0&&(null===Pl||void 0===Pl||null===(t=Pl.processModule)||void 0===t||null===(n=t.steps)||void 0===n||n.filter(e=>{var l;return null===e||void 0===e||null===(l=e.component_blueprints)||void 0===l?void 0:l.filter(e=>e.selected_fields.filter(e=>e.value=void 0))})),u.h.dispatch((0,a.q4)((0,i.Z)((0,i.Z)({},Pl.processModule),{},{selectedComponent:{id:""},stepIndex:Ql||Zi?0:1,isUpdating:!1})))},Si=!!Array.isArray(null===Pl||void 0===Pl||null===(U=Pl.processModule)||void 0===U?void 0:U.steps)&&(null===Pl||void 0===Pl||null===(K=Pl.processModule)||void 0===K||null===(X=K.steps)||void 0===X||null===($=X.find(e=>{var l;return(null===e||void 0===e||null===(l=e.component_blueprints)||void 0===l?void 0:l.filter(e=>e.selected_fields.filter(e=>"Ratings"===e.data_type_name).length>0).length)>0}))||void 0===$||null===(ee=$.component_blueprints)||void 0===ee||null===(le=ee.find(e=>{var l;return(null===(l=e.selected_fields.filter(e=>"Ratings"===e.data_type_name))||void 0===l?void 0:l.length)>0}))||void 0===le||null===(oe=le.selected_fields)||void 0===oe?void 0:oe.find(e=>"Ratings"===e.data_type_name)),ki=null===Wl||void 0===Wl?void 0:Wl.find(e=>{var l,o,i,t;return e.id===(null===Pl||void 0===Pl||null===(l=Pl.processModule)||void 0===l||null===(o=l.selectedComponent)||void 0===o||null===(i=o.component_fields)||void 0===i||null===(t=i.find(e=>{var l;return e.field_name===(null===Si||void 0===Si||null===(l=Si.options)||void 0===l?void 0:l.field)}))||void 0===t?void 0:t.value)}),Zi=(null===zl||void 0===zl||null===(ie=zl.steps)||void 0===ie?void 0:ie.length)>0&&!((null===zl||void 0===zl||null===(te=zl.steps[0])||void 0===te||null===(ae=te.component_blueprints)||void 0===ae?void 0:ae.filter(e=>{var l;return 1==(null===(l=e.options)||void 0===l?void 0:l.asModuleList)}).length)>0),Ii=()=>{var e,l,o,i,n,d,r,v,s;return t.createElement("div",{ref:ui,className:se.menuAccordionButtons},(0==Zi&&Pl.processModule.stepIndex>1||1==Zi&&Pl.processModule.stepIndex>0||(null===Gl||void 0===Gl?void 0:Gl.title))&&t.createElement(f.zx,{title:"Cancel",light:!0,style:{width:"100%",display:null!==(e=Pl.processModule.module.options)&&void 0!==e&&e.single?"none":""},clicked:()=>{ci.components.length>0||ci.newStepComponents.length>0?ii(!0):(Pl.processModule.back_array=[],yi(Zi?zl.steps[0].id:zl.steps[1].id),qo(!1),Mi(),Fl())}}),(0==Zi&&Pl.processModule.stepIndex>1||1==Zi&&Pl.processModule.stepIndex>0)&&t.createElement(f.zx,{title:"Back",light:!0,style:{width:"100%"},clicked:()=>{var e,l,o;if(1==Pl.processModule.stepIndex&&zo(Ul.filter(e=>{var l,o;return e.module_id===(null===Pl||void 0===Pl||null===(l=Pl.processModule)||void 0===l||null===(o=l.module)||void 0===o?void 0:o.id)})),1==(null===ai||void 0===ai||null===(e=ai.options)||void 0===e?void 0:e.deleteOnBack)&&ai.component_blueprints.filter(e=>e.selected_fields.filter(e=>"output"!==e.data_type).map(e=>{e.value=void 0})),(null===Pl||void 0===Pl||null===(l=Pl.processModule)||void 0===l||null===(o=l.back_array)||void 0===o?void 0:o.length)>0){var i;const e=null===Pl||void 0===Pl||null===(i=Pl.processModule)||void 0===i?void 0:i.back_array.pop();e&&yi(e)}else{var t;yi(null===(t=Pl.processModule.steps[Pl.processModule.stepIndex-1])||void 0===t?void 0:t.id)}}}),!0===(null===ai||void 0===ai?void 0:ai.is_end)?t.createElement(f.zx,{disabled:!1===(null===Rl||void 0===Rl?void 0:Rl.start),title:1==(null===Pl||void 0===Pl||null===(l=Pl.processModule)||void 0===l?void 0:l.isUpdating)?"Update":fo&&null!==(o=null===Pl||void 0===Pl||null===(i=Pl.processModule)||void 0===i||null===(n=i.module)||void 0===n||null===(d=n.options)||void 0===d?void 0:d.save)&&void 0!==o?o:"Save",loading:lo,style:{width:"100%",marginLeft:"0px",display:null!==Pl&&void 0!==Pl&&null!==(r=Pl.processModule)&&void 0!==r&&null!==(v=r.module)&&void 0!==v&&null!==(s=v.options)&&void 0!==s&&s.nosave?"none":ci.components.length>0||ci.newStepComponents.length>0?"":"none"},clicked:()=>{var e,l,o,i,t,n;return Wo?so("Saving is not allowed in Edit Mode"):1==(null===Pl||void 0===Pl||null===(e=Pl.processModule)||void 0===e||null===(l=e.module)||void 0===l||null===(o=l.options)||void 0===o?void 0:o.emailOutputs)&&1==(null===Pl||void 0===Pl||null===(i=Pl.processModule)||void 0===i||null===(t=i.module)||void 0===t||null===(n=t.options)||void 0===n?void 0:n.selectiveEmail)&&fo?So(!0):hi()}}):t.createElement(f.zx,{disabled:!1===(null===Rl||void 0===Rl?void 0:Rl.start),title:"Next",style:{width:"100%"},clicked:()=>{var e,l,o,i,t,n,d,r,v;Array.isArray(null===Pl||void 0===Pl||null===(e=Pl.processModule)||void 0===e?void 0:e.back_array)||(Pl.processModule.back_array=[]),null===Pl||void 0===Pl||null===(l=Pl.processModule)||void 0===l||l.back_array.push(null===ci||void 0===ci||null===(o=ci.currentStep)||void 0===o?void 0:o.id);const s=null===(i=ai.component_blueprints.find(e=>e.selected_fields.filter(e=>{var l,o;return"Dropdown"===e.data_type_name&&(null===(l=e.options)||void 0===l?void 0:l.jump1)&&"decision"===(null===(o=e.options)||void 0===o?void 0:o.type)}).length>0))||void 0===i||null===(t=i.selected_fields)||void 0===t?void 0:t.find(e=>{var l;return"Dropdown"===e.data_type_name&&(null===(l=e.options)||void 0===l?void 0:l.jump1)}),c=null===(n=ai.component_blueprints.find(e=>e.selected_fields.filter(e=>{var l;return"Value Button"===e.data_type_name&&(null===(l=e.options)||void 0===l?void 0:l.jump1)}).length>0))||void 0===n||null===(d=n.selected_fields)||void 0===d?void 0:d.filter(e=>{var l;return"Value Button"===e.data_type_name&&(null===(l=e.options)||void 0===l?void 0:l.jump1)});var p,m,f,_,y;if(null!==s&&void 0!==s&&null!==(r=s.options)&&void 0!==r&&r.jump1&&null!==s&&void 0!==s&&null!==(v=s.options)&&void 0!==v&&v.jump2)if(0==(null===s||void 0===s||null===(p=s.options)||void 0===p?void 0:p.list.indexOf(null===s||void 0===s?void 0:s.value)))fi(null===(f=Kl.find(e=>{var l;return e.id===(null===s||void 0===s||null===(l=s.options)||void 0===l?void 0:l.process)}))||void 0===f||null===(_=f.steps)||void 0===_||null===(y=_.find(e=>e.id===(null===s||void 0===s?void 0:s.options.jump1)))||void 0===y?void 0:y.id);else if(1==(null===s||void 0===s||null===(m=s.options)||void 0===m?void 0:m.list.indexOf(null===s||void 0===s?void 0:s.value))){var g,h,b;fi(null===(g=Kl.find(e=>{var l;return e.id===(null===s||void 0===s||null===(l=s.options)||void 0===l?void 0:l.process)}))||void 0===g||null===(h=g.steps)||void 0===h||null===(b=h.find(e=>e.id===(null===s||void 0===s?void 0:s.options.jump2)))||void 0===b?void 0:b.id)}else{var x,E;null===Pl||void 0===Pl||null===(x=Pl.processModule)||void 0===x||null===(E=x.back_array)||void 0===E||E.pop(),u.h.dispatch((0,a.Xc)({show:!0,message:"Please select a value for ".concat(null===s||void 0===s?void 0:s.field_name),color:"red",bottom:!1})),window.scrollTo({top:0,behavior:"smooth"})}else if((null===c||void 0===c?void 0:c.length)>0){const e=c.filter(e=>void 0!==e.value);var C,w,M,S,k;if(1==e.length)fi(null===(C=Kl.find(l=>{var o,i;return l.id===(null===(o=e[0])||void 0===o||null===(i=o.options)||void 0===i?void 0:i.process)}))||void 0===C||null===(w=C.steps)||void 0===w||null===(M=w.find(l=>{var o;return l.id===(null===(o=e[0])||void 0===o?void 0:o.options.jump1)}))||void 0===M?void 0:M.id);else null===Pl||void 0===Pl||null===(S=Pl.processModule)||void 0===S||null===(k=S.back_array)||void 0===k||k.pop(),u.h.dispatch((0,a.Xc)({show:!0,message:"A selection is required",color:"red",bottom:!1})),window.scrollTo({top:0,behavior:"smooth"})}else if((null===ai||void 0===ai?void 0:ai.next_steps.length)>1||ri.length>1||vi.length>1)no(!to);else if(1===ai.next_steps.length){var Z;fi(null===ai||void 0===ai||null===(Z=ai.next_steps[0])||void 0===Z?void 0:Z.id)}else{var I;fi(null===(I=zl.steps[zl.steps.findIndex(e=>e.id===ai.id)+1])||void 0===I?void 0:I.id)}}}),to&&t.createElement("div",{className:se.goToNextStep},null===ai||void 0===ai?void 0:ai.next_steps.map((e,l)=>t.createElement("div",{key:l,onClick:()=>fi(e.id),className:se.nextStepsContainer},t.createElement("div",{className:se.nextStepImageContainer},t.createElement(C.G,{icon:E.d63})),t.createElement("p",null,null===e||void 0===e?void 0:e.name))),null===ri||void 0===ri?void 0:ri.map((e,l)=>t.createElement("div",{key:l,onClick:()=>fi(e.id),className:se.nextStepsContainer},t.createElement("div",{className:se.nextStepImageContainer},t.createElement(C.G,{icon:E.t3U})),t.createElement("p",null,null===e||void 0===e?void 0:e.name))),null===vi||void 0===vi?void 0:vi.map((e,l)=>t.createElement("div",{key:l,onClick:()=>(e=>{u.h.dispatch((0,a.pU)(e)),no(!1)})(e),className:se.nextStepsContainer},t.createElement("div",{className:se.nextStepImageContainer},t.createElement(C.G,{icon:E.t3U})),t.createElement("p",null,null===e||void 0===e?void 0:e.name)))))};return t.createElement(S.LN,null,t.createElement(k.sM,null,t.createElement("div",{className:se.processStepHost,style:{backgroundColor:y.tq?"":!0===(null===ai||void 0===ai||null===(re=ai.options)||void 0===re?void 0:re.popup)?"var(--app-color-white-lightest)":""}},t.createElement("div",{className:se.leftCardMargin,"app-variant-is-mobile":y.tq?"true":"false"},0===(null===ai||void 0===ai||null===(ve=ai.component_blueprints)||void 0===ve?void 0:ve.filter(e=>{var l;return 1==(null===(l=e.options)||void 0===l?void 0:l.asModuleList)}).length)&&t.createElement("p",{className:se.stepTitle,style:{width:"100%",fontSize:"22px",marginTop:"20px"}},null===ai||void 0===ai||null===(ue=ai.name)||void 0===ue?void 0:ue.toUpperCase()),t.createElement("span",{style:{display:"flex",width:"100%",justifyContent:"space-between"}},t.createElement("label",{className:se.stepGuidanceSmaller},null===ai||void 0===ai?void 0:ai.guidance)),vo&&(ao||Wo)&&t.createElement(P.Z,{message:vo,onClick:()=>so("")}),-1==Pl.processModule.stepIndex&&t.createElement(t.Fragment,null,t.createElement("label",{className:se.stepGuidanceSmaller},Pl.processModule.description)),1===io&&void 0===(null===ai||void 0===ai?void 0:ai.component_blueprints)?t.createElement("div",{className:se.centeredSpinner}):(null===ai||void 0===ai||null===(ce=ai.component_blueprints)||void 0===ce?void 0:ce.filter(e=>{var l;return 1==(null===(l=e.options)||void 0===l?void 0:l.asModuleList)}).length)>0?null===ai||void 0===ai||null===(pe=ai.component_blueprints)||void 0===pe?void 0:pe.filter(e=>{var l,o,i;return 1==e.options.asModuleList&&(eo.positions.filter(l=>{var o,i;return null===(o=e.options)||void 0===o||null===(i=o.showOnly)||void 0===i?void 0:i.includes(l.id)}).length>0||0==(null===(l=e.options)||void 0===l||null===(o=l.showOnly)||void 0===o?void 0:o.length)||void 0===(null===(i=e.options)||void 0===i?void 0:i.showOnly))}).map((e,l)=>t.createElement("div",{key:l,style:{width:"100%",padding:"0 10px 0 10px",fontFamily:"var(--app-text-font-mobile)"}},function(e){var l,o;let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ao,n=G.Z([J.Z(Q.Z("created_date"))])(t.filter(e=>e.created_by.id===(null===eo||void 0===eo?void 0:eo.id)?e:"Expired"!==e.status)).map(l=>{var o,t,n,d,a,r,v,u,c,p,m,f;let _={};e.list.map(e=>{const o=l.component_fields.find(l=>l.field_name===e);if(void 0!=o)if("People"===o.data_type_name)_=(0,i.Z)((0,i.Z)({},_),{},{[e]:o.value});else if("Positions"===o.data_type_name)_=(0,i.Z)((0,i.Z)({},_),{},{[e]:Yl.find(e=>e.value===o.value).label});else if("Date"===o.data_type_name){var t;const l=new Date(null===o||void 0===o||null===(t=o.value)||void 0===t?void 0:t.split(",")[0]);_=(0,i.Z)((0,i.Z)({},_),{},{[e]:b()(l).format("DD MMM YYYY")})}else if("Record"===o.data_type_name||"Component"===o.data_type_name){var n;_=(0,i.Z)((0,i.Z)({},_),{},{[e]:y.tq?"".concat(null===o||void 0===o?void 0:o.value.slice(0,40)):"".concat(null===o||void 0===o?void 0:o.value)}),null===(n=Ul.find(e=>{var l;return(null===(l=e.component_fields.filter(e=>e.field_name===o.options.output&&e.component_blueprint_id===o.options.component_id&&e.value===(null===o||void 0===o?void 0:o.value)))||void 0===l?void 0:l.length)>0}))||void 0===n||n.component_fields.filter(e=>{_=(0,i.Z)((0,i.Z)({},_),{},{[e.field_name]:y.tq?e.value.slice(0,40):e.value})})}else if("Filters"===o.data_type_name){var d;_=(0,i.Z)((0,i.Z)({},_),{},{[e]:y.tq?"".concat(null===o||void 0===o?void 0:o.value.slice(0,30)):"".concat(null===o||void 0===o?void 0:o.value)}),null===(d=Ul.find(e=>{var l;return(null===(l=e.component_fields.filter(e=>e.field_name===o.options.output&&e.component_blueprint_id===o.options.component_id&&e.value===(null===o||void 0===o?void 0:o.value)))||void 0===l?void 0:l.length)>0}))||void 0===d||d.component_fields.filter(e=>{_=(0,i.Z)((0,i.Z)({},_),{},{[e.field_name]:y.tq?e.value.slice(0,40):e.value})})}else if("Status"===o.data_type_name){var a,r,v,s,u,c;_=0==l.is_complete?(0,i.Z)((0,i.Z)({},_),{},{[e]:"Draft"}):!((null===(a=Pl.processModule.module)||void 0===a||null===(r=a.options)||void 0===r?void 0:r.activeFor)>0&&b()((0,h.now)()).diff(b()(l.created_date),"minutes")>+(null===(v=Pl.processModule.module)||void 0===v||null===(s=v.options)||void 0===s?void 0:s.activeFor))||"New"!==l.status&&"Unassigned"!==l.status||null!==(u=l.assigned_to)&&void 0!==u&&u.id?(0,i.Z)((0,i.Z)({},_),{},{[e]:"".concat(null!==(c=null===l||void 0===l?void 0:l.status)&&void 0!==c?c:null===o||void 0===o?void 0:o.value)}):(0,i.Z)((0,i.Z)({},_),{},{[e]:"Expired"})}else{var p,m;_=(0,i.Z)((0,i.Z)({},_),{},{[e]:y.tq?null===o||void 0===o||null===(p=o.value)||void 0===p?void 0:p.slice(0,40).split(",")[0]:null===o||void 0===o||null===(m=o.value)||void 0===m?void 0:m.split(",")[0]})}}),null===e||void 0===e||null===(o=e.com)||void 0===o||null===(t=o.selected_fields)||void 0===t||null===(n=t.filter(e=>"Details"===e.data_type_name))||void 0===n||n.forEach(e=>{var l,o,i,t;const n=_[null!==(l=null===(o=e.options)||void 0===o?void 0:o.field)&&void 0!==l?l:e.options.key],d=Ul.find(l=>l.module_id===e.options.module_id&&l.component_fields.find(l=>l.field_name===e.options.key&&l.value===n));_[e.field_name]=null===(i=e.options)||void 0===i||null===(t=i.fields.map(e=>{var l,o;return null===d||void 0===d||null===(l=d.component_fields)||void 0===l||null===(o=l.find(l=>l.field_name===e))||void 0===o?void 0:o.value}))||void 0===t?void 0:t.join(" ")}),(null===l||void 0===l||null===(d=l.component_items)||void 0===d?void 0:d.length)>0&&(_=(0,i.Z)((0,i.Z)({},_),{},{"Total Qty":l.component_items.reduce((e,l)=>e+ +l.quantity,0)})),(null===l||void 0===l||null===(a=l.shared_positions)||void 0===a?void 0:a.length)>0&&(_=(0,i.Z)((0,i.Z)({},_),{},{Shares:null===l||void 0===l?void 0:l.shared_positions.map(e=>{var l;return null===(l=Yl.find(l=>l.value===e.id))||void 0===l?void 0:l.label}).toString()}));const g=new Date(l.created_date);return _=(0,i.Z)((0,i.Z)({},_),{},{id:l.id,"Created By":"".concat(null===l||void 0===l||null===(r=l.created_by)||void 0===r?void 0:r.first_name," ").concat(null===l||void 0===l||null===(v=l.created_by)||void 0===v?void 0:v.last_name),"Created Date":b()(g).format("DD MMM YYYY"),"Assigned To":"".concat(null!==(u=null===l||void 0===l||null===(c=l.assigned_to)||void 0===c?void 0:c.first_name)&&void 0!==u?u:""," ").concat(null!==(p=null===l||void 0===l||null===(m=l.assigned_to)||void 0===m?void 0:m.last_name)&&void 0!==p?p:""),Title:l.title,items:l.component_items,Status:l.status,[Pl.processModule.module.name]:l.title}),null===e||void 0===e||null===(f=e.reports)||void 0===f||f.filter(e=>"Formula"===e.data_type_name).map(e=>{const o=(0,s.LV)(e.options,e.options.list.map(e=>{var l;return{value:null!==(l=_[e])&&void 0!==l?l:0}}),Ul.filter(e=>{var l,o;return e.module_id===(null===Pl||void 0===Pl||null===(l=Pl.processModule)||void 0===l||null===(o=l.module)||void 0===o?void 0:o.id)}),null===l||void 0===l?void 0:l.component_items);_=(0,i.Z)((0,i.Z)({},_),{},{[e.field_name]:"".concat(o)})}),_});null===e||void 0===e||null===(l=e.reports)||void 0===l||l.filter(e=>"List Filter"===e.data_type_name).map(e=>{n=n.filter(l=>{var o,i;return l[null===(o=e.options)||void 0===o?void 0:o.field]===(null===(i=e.options)||void 0===i?void 0:i.value)})});const d=null===e||void 0===e||null===(o=e.reports)||void 0===o?void 0:o.find(e=>"Transaction List"===e.data_type_name);if(d){let e=[];n.map(l=>{l.items.filter(o=>{const t=(0,i.Z)({},l);Object.keys(d.options.map).map(e=>{t[d.options.map[e]]=o[e]}),e=[...e,t]}),delete l.items}),n=e}return n}({list:e.selected_fields.filter(e=>1==e.visible||"Info"===e.data_type_name).map(e=>{var l,o;return"Info"===e.data_type_name&&null!==(l=null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.key)&&void 0!==l?l:e.field_name})}).map((e,l)=>t.createElement("div",{key:l,style:{width:"100%",borderBottom:"1px solid lightgray",padding:"20px 5px 20px 5px"},onClick:()=>{$o.id!==e.id&&ei(e)}},t.createElement("div",{style:{fontSize:"18px",fontWeight:"600",width:"100%",color:"var(--app-color-gray-dark)"}},"".concat(e.Title," - ").concat(e["Created By"]).toUpperCase()),t.createElement(f.zx,{title:"".concat(b()(new Date(e["Created Date"])).format("MMM DD, YYYY")),style:{height:"24px",backgroundColor:"var(--app-color-blue)"}}),t.createElement("div",{style:{fontSize:"18px",fontWeight:"normal",width:"100%"}},e.Status),(null===$o||void 0===$o?void 0:$o.id)===e.id&&t.createElement(Ve,{ref:si,begunModule:Pl,allModules:Ll,companyData:Rl,components:Ul,selectedComponent:Ao.find(e=>e.id===(null===$o||void 0===$o?void 0:$o.id)),setSelectedComponent:Jl,companyUsersArray:Wl,print:xo,step:Z.Nb,companyPositionsArray:Yl,user:Ol,goto:!1}),(null===$o||void 0===$o?void 0:$o.id)===e.id&&t.createElement(f.zx,{title:"HIDE",style:{width:"100%",backgroundColor:"green"},clicked:()=>{$o.id===e.id&&ei(!1)}}))))):1===io&&void 0===ai.component_blueprints?t.createElement(t.Fragment,null,"No components in step"):null===Pl||void 0===Pl||null===(me=Pl.processModule)||void 0===me||null===(fe=me.module)||void 0===fe||null===(_e=fe.options)||void 0===_e||!_e.one||(null===Pl||void 0===Pl||null===(ye=Pl.processModule)||void 0===ye||null===(he=ye.module)||void 0===he||null===(be=he.options)||void 0===be?void 0:be.lock)!==(null===Gl||void 0===Gl?void 0:Gl.status)&&null!==Gl&&void 0!==Gl&&Gl.status||!Ul.find(e=>{var l,o,i;return e.module_id===(null===(l=Pl.processModule)||void 0===l||null===(o=l.module)||void 0===o?void 0:o.id)&&(null===e||void 0===e||null===(i=e.created_by)||void 0===i?void 0:i.id)===eo.id})?t.createElement("div",{className:se.processModuleContainer,"app-variant-is-mobile":y.tq?"true":"false"},t.createElement(f.U7,{blured:!1,scrollable:!1,isOpen:!y.tq&&(null!==(xe=null===ai||void 0===ai||null===(Ee=ai.options)||void 0===Ee?void 0:Ee.popup)&&void 0!==xe&&xe),shadowedContainerStyle:{width:"100%",minWidth:"50%"}},t.createElement(je,{nextButtonClicked:uo,step:ai,setIsMandatoryError:ro,isMandatoryError:ao,begunModule:Pl,companyData:Rl,blueprints:Bl,components:Ul,products:ql,authenticatedUser:eo,isEditing:jl,companyUsersArray:Wl,usersArray:Lo,setUsers:go,setPositions:bo,setIsCompleted:_o,selectedComponent:Gl,goToNextStep:yi,companyPositionsArray:Yl,cart:Al,allModules:Ll,editMode:Wo},t.createElement("div",{className:se.menuRightButtons}),Ii())),(!0!==(null===ai||void 0===ai||null===(Ce=ai.options)||void 0===Ce?void 0:Ce.popup)||y.tq)&&t.createElement(je,{nextButtonClicked:uo,step:ai,setIsMandatoryError:ro,isMandatoryError:ao,begunModule:Pl,companyData:Rl,blueprints:Bl,components:Ul,products:ql,authenticatedUser:eo,isEditing:jl,companyUsersArray:Wl,usersArray:Lo,setUsers:go,setPositions:bo,setIsCompleted:_o,selectedComponent:Gl,goToNextStep:yi,companyPositionsArray:Yl,cart:Al,allModules:Ll,editMode:Wo,isProcessorOnly:Ql},Ii())):t.createElement("label",{className:se.stepGuidanceSmaller},"This is a single submission module. You have already submitted a response"),oi&&t.createElement(Ue.Z,{openModal:oi,setOpenModal:ii,dialogHandler:()=>{Pl.processModule.back_array=[],yi(Zi?zl.steps[0].id:zl.steps[1].id),qo(!1),Mi(),Fl()},title:"You have unsaved items. Are you sure you want to cancel?",proceedTitle:"Yes",cancelTitle:"No, return back",loading:lo}),Co&&t.createElement(f.U7,{isOpen:v.v7,onClose:()=>{},backdropColor:!0,blured:!0,scrollable:!0,shadowedContainerStyle:{width:"100%"}},t.createElement("div",null,t.createElement("p",{className:se.deleteText},"Are you sure you want to delete ".concat(Gl.title,"?")),t.createElement("div",{style:{display:"flex",justifyContent:"center"}},t.createElement(f.zx,{title:"Delete",clicked:()=>{No(!0),(0,v.v7)(Gl.id).pipe((0,p.P)()).subscribe({next:()=>{No(!1),mo(!1),wo(!1)},complete:()=>{},error:()=>{No(!1),wo(!1)}})},loading:Io}),t.createElement(f.zx,{title:"No",light:!0,clicked:()=>wo(!1)})))),ko&&t.createElement(f.U7,{isOpen:ko,onClose:()=>{},backdropColor:!0,blured:!1,scrollable:!0,shadowedContainerStyle:{width:"100%"}},t.createElement("div",null,t.createElement("p",{className:se.deleteText},"Cannot delete ".concat(Gl.title,". Some transactions and master data are using this item")),t.createElement("div",{style:{display:"flex",justifyContent:"center"}},t.createElement(f.zx,{title:"Close",light:!0,clicked:()=>Zo(!1)}))))),ti&&t.createElement(Ue.Z,{openModal:ti,setOpenModal:ni,dialogHandler:()=>{Bo(!1),ni(!1),u.h.dispatch((0,a.q4)((0,i.Z)((0,i.Z)({},Pl.processModule),{},{stepIndex:0,isUpdating:!1})))},title:"No payments made. Do you want to pay later?",proceedTitle:"Yes",cancelTitle:"No, return back"}),Yo&&t.createElement(f.U7,{hasCloseIcon:!0,isOpen:Yo,onClose:()=>ni(!0),backdropColor:!0,blured:!1,scrollable:!0,shadowedContainerStyle:{width:"100%"}},t.createElement(ne.default,{label:" ",withBack:!1,paymentPath:"begin-mobile",onClose:()=>Bo(!1),companyData:Rl,subscriptionInfo:{user_id:eo.id,ref:ci.id,plan_price:null!==(we=null===ci||void 0===ci?void 0:ci.plan)&&void 0!==we?we:0,currency:null!==(Me=null===ci||void 0===ci?void 0:ci.currency)&&void 0!==Me?Me:"PHP",plan:"CC-".concat(ci.id),total:null!==(Se=+(null===ci||void 0===ci?void 0:ci.total))&&void 0!==Se?Se:0,billable_users:[eo],duration:0,dlabel:ci.id,id:null===Pl||void 0===Pl||null===(ke=Pl.processModule)||void 0===ke||null===(Ze=ke.selectedComponent)||void 0===Ze?void 0:Ze.id},onError:e=>{li(!0),so(e),ro(!0),Bo(!1),u.h.dispatch((0,a.q4)((0,i.Z)((0,i.Z)({},Pl.processModule),{},{stepIndex:0,isUpdating:!1})))}})),Mo&&t.createElement(f.U7,{isOpen:Mo,onClose:()=>So(!1),backdropColor:!0,blured:!0,scrollable:!0,shadowedContainerStyle:{width:"100%"}},t.createElement("div",null,t.createElement(f.jL,{ungrouped:!0,title:"nonmanager"===eo.user_type?"Type an email address to send copy of this transaction (optional)":"Select users to email this transaction (Optional)",columned:!0,withAckButton:!1},"nonmanager"===eo.user_type?t.createElement("input",{placeholder:"Use comma, no space, for multiple email addresses",className:se.emailInput,onChange:e=>{new RegExp(/^([a-z0-9!#$%&'*+/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*)(([, ]+[a-z0-9!#$%&'*+/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])\.([a-z0-9]([a-z0-9-]*[a-z0-9]))*)?)*$/).test(e.target.value)&&Fo(e.target.value.split(","))}}):t.createElement(R.Cm,{id:"Users",tagEmplacement:"inlined",searchable:!1,items:Lo.filter(e=>{var l;return e.department===(null===(l=eo.departments[0])||void 0===l?void 0:l.name)}),groupedBy:"department",groupname:"department",triggerType:"chevron",initialSelectedValues:[],className:se.peoplePositionsSelect,inputClassName:se.peoplePositionsSelectInput,molclassname:se.peoplePositionsSelectMenuOverlay,moliclassname:se.peoplePositionsSelectMenuOverlayItem,onChange:e=>{e.length>0?Fo(null===e||void 0===e?void 0:e.map(e=>null===e||void 0===e?void 0:e.user.email)):Fo([])}})),t.createElement("div",{style:{display:"flex",justifyContent:"center"}},t.createElement(f.zx,{title:"Back",light:!0,clicked:()=>So(!1)}),t.createElement(f.zx,{disabled:!1===(null===Rl||void 0===Rl?void 0:Rl.start),title:null!==Pl&&void 0!==Pl&&null!==(Ie=Pl.processModule)&&void 0!==Ie&&Ie.isUpdating?"Update":fo&&null!==(Ne=null===Pl||void 0===Pl||null===(De=Pl.processModule)||void 0===De||null===(Pe=De.module)||void 0===Pe||null===(Ae=Pe.options)||void 0===Ae?void 0:Ae.save)&&void 0!==Ne?Ne:"Save",loading:lo,style:{width:"160px",marginLeft:"0px"},clicked:()=>{So(!1),hi()}})))),(po||!0===(null===Pl||void 0===Pl||null===(ze=Pl.processModule)||void 0===ze?void 0:ze.showDetail))&&void 0!==(null===Gl||void 0===Gl?void 0:Gl.title)&&t.createElement(f.U7,{hasCloseIcon:!0,blured:!0,scrollable:!0,isOpen:(po||!0===(null===Pl||void 0===Pl||null===(Le=Pl.processModule)||void 0===Le?void 0:Le.showDetail))&&void 0!==(null===Gl||void 0===Gl?void 0:Gl.title),shadowedContainerStyle:{padding:"0 20px 20px 20px",width:"100%"},sshadowedContainerClassname:se.popup,onClose:()=>{mo(!1),Eo(!1),u.h.dispatch((0,a.q4)((0,i.Z)((0,i.Z)({},Pl.processModule),{},{showDetail:!1}))),Ql?Mi():(zo(Ul.filter(e=>{var l,o;return e.module_id===(null===Pl||void 0===Pl||null===(l=Pl.processModule)||void 0===l||null===(o=l.module)||void 0===o?void 0:o.id)})),yi(Zi?zl.steps[0].id:zl.steps[1].id),qo(!1),Mi(),Fl())}},t.createElement(Ve,{ref:si,begunModule:Pl,allModules:Ll,companyData:Rl,components:Ul,selectedComponent:Gl,setSelectedComponent:Jl,companyUsersArray:Wl,print:xo,step:Z.Nb,companyPositionsArray:Yl,user:Ol,goto:!0}),t.createElement("div",{className:se.emulatedFlexGap,style:{width:"100%"}},(null===Gl||void 0===Gl||null===(Re=Gl.component_fields)||void 0===Re?void 0:Re.length)>0&&t.createElement(t.Fragment,null,(0,s.cQ)(Ci,wi,Gl,eo,Pl,Rl)&&(null===Pl||void 0===Pl||null===(Fe=Pl.processModule)||void 0===Fe||null===(We=Fe.steps)||void 0===We||null===(Ye=We.find(e=>e.component_blueprints.filter(e=>e.selected_fields.filter(e=>"Action Button"===e.data_type_name).length>0).length>0))||void 0===Ye||null===(Be=Ye.component_blueprints.find(e=>e.selected_fields.filter(e=>"Action Button"===e.data_type_name).length>0))||void 0===Be?void 0:Be.selected_fields.filter(e=>"Action Button"===e.data_type_name).map((e,l)=>{var o,n,d,r;if("status"===e.options.action){var c,m,_,y,g,x,E,C;let o=(null===Rl||void 0===Rl||null===(c=Rl.misc_info)||void 0===c||null===(m=c.status)||void 0===m?void 0:m.length)>0?null===Rl||void 0===Rl||null===(_=Rl.misc_info)||void 0===_?void 0:_.status:s.MO;var w;if((null===Rl||void 0===Rl||null===(y=Rl.misc_info)||void 0===y||null===(g=y.rules)||void 0===g?void 0:g.length)>0)null===Rl||void 0===Rl||null===(w=Rl.misc_info)||void 0===w||w.rules.filter(e=>"status"===e.type).filter(l=>{l.valueCondition===e.value&&(o="0"===l.allow?o.filter(e=>l.values.includes(e.value)):o.filter(e=>!l.values.includes(e.value)))});return t.createElement("div",{key:l,style:{width:"100%",display:"user"===e.options.action&&null!==(x=Gl.component_fields)&&void 0!==x&&null!==(E=x.find(l=>l.procedure_step_blueprint_field_id===e.procedure_step_blueprint_field_id))&&void 0!==E&&E.value?"none":""}},t.createElement(O.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-light)"},className:se.multiselectComponent,key:l,visible:e.visible,mandatory:e.mandatory,value:null!==(C=e.value)&&void 0!==C?C:"",items:o,error:e.errors,onChange:l=>{var o,t,n,d;if(null!==(o=Pl.processModule)&&void 0!==o&&null!==(t=o.module)&&void 0!==t&&null!==(n=t.options)&&void 0!==n&&n.credits&&(l===(null===(d=Rl.options)||void 0===d?void 0:d.lock)||"Closed"===l)){var r,c,m,f,_,y,g,h;const e=null===Pl||void 0===Pl||null===(r=Pl.processModule)||void 0===r||null===(c=r.steps)||void 0===c||null===(m=c.find(e=>e.component_blueprints.filter(e=>e.selected_fields.filter(e=>"Payments"===e.data_type_name).length>0).length>0))||void 0===m||null===(f=m.component_blueprints.find(e=>e.selected_fields.filter(e=>"Payments"===e.data_type_name).length>0))||void 0===f?void 0:f.selected_fields.find(e=>"Payments"===e.data_type_name),l=null===(_=ci.newStepComponents.concat(ci.components).find(l=>l.selected_fields.filter(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.paymentField)}).length>0))||void 0===_||null===(y=_.selected_fields)||void 0===y?void 0:y.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.paymentField)});let o=0;if(null===(g=Pl.processModule)||void 0===g||null===(h=g.selectedComponent.payments)||void 0===h||!h.stripe_id)return mo(!1),Pl.processModule.showDetail=!1,void u.h.dispatch((0,a.Xc)({show:!0,message:"Check support payment docs",color:"red",spinner:!1,bottom:!0}));var b,x;if(!(+(null!==(b=null===l||void 0===l?void 0:l.value)&&void 0!==b?b:0)>0))return void u.h.dispatch((0,a.Xc)({show:!0,message:"No amount found",color:"red",spinner:!1,bottom:!0}));o=+(null!==(x=null===l||void 0===l?void 0:l.value)&&void 0!==x?x:0),"Cash"!==(null===e||void 0===e?void 0:e.value)&&(0,de.e_)({user_id:eo.id,id:(0,s.mR)(),total:o,product:"CR-".concat(null===Gl||void 0===Gl?void 0:Gl.title),notes:"Wallet",quantity:1}).pipe((0,p.P)()).subscribe({next:()=>{var e;Ol.wallet=+(+(null!==(e=null===Ol||void 0===Ol?void 0:Ol.wallet)&&void 0!==e?e:0)+o)}})}Rl.start=!0,oo(!0),(0,v.C0)({component_id:Gl.id,index:0,group:99,value:l,procedure_step_blueprint_field_id:e.procedure_step_blueprint_field_id}).subscribe({next:e=>{(0,v.zK)(null===Gl||void 0===Gl?void 0:Gl.id,l).subscribe({next:e=>{oo(!1),mo(!1),u.h.dispatch((0,a.q4)((0,i.Z)((0,i.Z)({},Pl.processModule),{},{showDetail:!1})))}})},error:()=>{},complete:()=>{}})},fieldIcon:e.icon,fieldLabel:e.field_name,placeholder:"Select status..."}))}return t.createElement("div",{key:l,style:{width:"100%",display:null!==Gl&&void 0!==Gl&&Gl.payments||null===Gl||void 0===Gl||!Gl.component_fields.find(e=>"Payments"===e.data_type_name&&"Credit Card"===e.value)?"":"none"}},t.createElement(f.zx,{light:!0,title:e.field_name,loading:lo,clicked:()=>{if("user"===e.options.action||"creator"===e.options.action){var l,o,t,n,d,r,c,m,f;if(1==(null===(l=Pl.processModule)||void 0===l||null===(o=l.module)||void 0===o||null===(t=o.options)||void 0===t?void 0:t.activeFor)&&b()((0,h.now)()).diff(b()(Gl.created_date),"minutes")>+(null===(n=Pl.processModule)||void 0===n||null===(d=n.module)||void 0===d||null===(r=d.options)||void 0===r?void 0:r.activeFor))return void u.h.dispatch((0,a.Xc)({show:!0,message:"This transaction has already expired.",color:"red",spinner:!1,bottom:!0}));const P="user"===e.options.action?eo:Wl.find(e=>{var l;return e.id===(null===(l=Gl.created_by)||void 0===l?void 0:l.id)});if(null!==(c=Pl.processModule)&&void 0!==c&&null!==(m=c.module)&&void 0!==m&&null!==(f=m.options)&&void 0!==f&&f.credits){var _,y,g,x,E,C,w,M,S,k;const e=null===Pl||void 0===Pl||null===(_=Pl.processModule)||void 0===_||null===(y=_.steps)||void 0===y||null===(g=y.find(e=>e.component_blueprints.filter(e=>e.selected_fields.filter(e=>"Payments"===e.data_type_name).length>0).length>0))||void 0===g||null===(x=g.component_blueprints.find(e=>e.selected_fields.filter(e=>"Payments"===e.data_type_name).length>0))||void 0===x?void 0:x.selected_fields.find(e=>"Payments"===e.data_type_name);if("Credit Card"===(null===e||void 0===e?void 0:e.value)&&(null===Gl||void 0===Gl||!Gl.payments))return u.h.dispatch((0,a.Xc)({show:!0,message:"This ",color:"red",spinner:!1,bottom:!0})),Pl.processModule.showDetail=!1,void mo(!1);const l=null===(E=ci.newStepComponents.concat(ci.components).find(l=>l.selected_fields.filter(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.paymentField)}).length>0))||void 0===E||null===(C=E.selected_fields)||void 0===C?void 0:C.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.paymentField)});let o=0;if(void 0===(null===P||void 0===P?void 0:P.wallet)||0===(null===P||void 0===P?void 0:P.wallet))return u.h.dispatch((0,a.Xc)({show:!0,message:"You need to setup funds for your wallet",color:"red",spinner:!1,bottom:!0})),Pl.processModule.showDetail=!1,void mo(!1);if(+(null!==(w=null===l||void 0===l?void 0:l.value)&&void 0!==w?w:0)>0&&"Cash"===(null===e||void 0===e?void 0:e.value)){var Z,I,N,D,T;if((null!==(Z=+(null===P||void 0===P?void 0:P.wallet))&&void 0!==Z?Z:0)<+(null===l||void 0===l?void 0:l.value)+ +(null===l||void 0===l?void 0:l.value)*+(null!==(I=null===(N=Rl.misc_info)||void 0===N?void 0:N.rate)&&void 0!==I?I:.2))return u.h.dispatch((0,a.Xc)({show:!0,message:"Insufficient funds in wallet",color:"red",spinner:!1,bottom:!0})),Pl.processModule.showDetail=!1,void mo(!1);o=null!==l&&void 0!==l&&l.value?+(null===l||void 0===l?void 0:l.value)+ +(null===l||void 0===l?void 0:l.value)*+(null!==(D=null===(T=Rl.misc_info)||void 0===T?void 0:T.rate)&&void 0!==D?D:.2):0}else if(!("Wallet"===(null===e||void 0===e?void 0:e.value)||"Points"===(null===e||void 0===e?void 0:e.value)||null!==(M=Pl.processModule)&&void 0!==M&&null!==(S=M.selectedComponent)&&void 0!==S&&null!==(k=S.payments)&&void 0!==k&&k.stripe_id))return mo(!1),Pl.processModule.showDetail=!1,void u.h.dispatch((0,a.Xc)({show:!0,message:"Check support payment docs",color:"red",spinner:!1,bottom:!0}));"Cash"===(null===e||void 0===e?void 0:e.value)&&(0,de.e_)({user_id:eo.id,id:(0,s.mR)(),total:-o,product:"DB-".concat(null===Gl||void 0===Gl?void 0:Gl.title),notes:"Wallet",quantity:1}).pipe((0,p.P)()).subscribe({next:()=>{var e;return P.wallet=+(+(null!==(e=null===P||void 0===P?void 0:P.wallet)&&void 0!==e?e:0)-o)},error:()=>u.h.dispatch((0,a.Xc)({show:!0,message:"Purchase error encountered",color:"red",spinner:!1,bottom:!0}))})}oo(!0),(0,v.C0)({component_id:Gl.id,index:0,group:99,value:P.id,procedure_step_blueprint_field_id:e.procedure_step_blueprint_field_id}).subscribe({next:e=>{(0,v.dn)(Gl.id,P.id).subscribe({next:e=>{oo(!1),mo(!1),u.h.dispatch((0,a.q4)((0,i.Z)((0,i.Z)({},Pl.processModule),{},{showDetail:!1})))}})},error:()=>{},complete:()=>{}})}else"status"===e.options.action||"date"===e.options.action||e.options.action,oo(!1)},style:{backgroundColor:"green",color:"white",width:"100%",display:"user"===e.options.action&&null!==(o=Gl.component_fields)&&void 0!==o&&null!==(n=o.find(l=>l.procedure_step_blueprint_field_id===e.procedure_step_blueprint_field_id))&&void 0!==n&&n.value?"none":""}}),t.createElement(f.zx,{title:"Decline",light:!0,loading:lo,clicked:()=>{var e,l;oo(!0);const o=Gl.component_fields.find(e=>{var l;return"People"===e.data_type_name&&!0===(null===(l=e.options)||void 0===l?void 0:l.calendar)});(0,v.KL)((0,i.Z)((0,i.Z)({},Gl),{},{selected_fields:o?Gl.component_fields.filter(e=>e.id!==o.id):Gl.component_fields,assigned_to:{id:""},status:"Unassigned"}),Gl.id,null===(e=Gl.shared_users)||void 0===e?void 0:e.map(e=>null===e||void 0===e?void 0:e.id),Gl.title,Gl.is_complete,null===(l=Gl.shared_positions)||void 0===l?void 0:l.map(e=>null===e||void 0===e?void 0:e.id)).subscribe({error:e=>{u.h.dispatch((0,a.Xc)({show:!0,message:"Errors found",color:"red"}))},next:e=>{u.h.dispatch((0,a.aT)(Gl.id)),oo(!1),mo(!1),u.h.dispatch((0,a.q4)((0,i.Z)((0,i.Z)({},Pl.processModule),{},{showDetail:!1})))},complete:()=>{}})},style:{backgroundColor:"red",color:"white",width:"100%",display:"user"===e.options.action&&null!==(d=Gl.component_fields)&&void 0!==d&&null!==(r=d.find(l=>l.procedure_step_blueprint_field_id===e.procedure_step_blueprint_field_id))&&void 0!==r&&r.value?"none":""}}))}))),!(null!==Pl&&void 0!==Pl&&null!==(He=Pl.processModule)&&void 0!==He&&He.canEdit)&&("Closed"===(null===Pl||void 0===Pl||null===(Ge=Pl.processModule)||void 0===Ge?void 0:Ge.status)||(null===Pl||void 0===Pl||null===(Je=Pl.processModule)||void 0===Je?void 0:Je.status)===(null===Rl||void 0===Rl||null===(Qe=Rl.misc_info)||void 0===Qe?void 0:Qe.lock)||(null!==(Ke=null===(Xe=Pl.processModule)||void 0===Xe||null===($e=Xe.module)||void 0===$e||null===(ll=$e.options)||void 0===ll?void 0:ll.lock)&&void 0!==Ke?Ke:"").split(",").includes(null===Pl||void 0===Pl||null===(ol=Pl.processModule)||void 0===ol?void 0:ol.status))&&(null===Pl||void 0===Pl||null===(il=Pl.processModule.selectedComponent)||void 0===il||null===(tl=il.created_by)||void 0===tl?void 0:tl.id)===eo.id&&(null===Pl||void 0===Pl||null===(nl=Pl.processModule)||void 0===nl||null===(dl=nl.steps)||void 0===dl?void 0:dl.find(e=>e.component_blueprints.filter(e=>e.selected_fields.filter(e=>"Ratings"===e.data_type_name).length>0)))&&!(null!==Pl&&void 0!==Pl&&null!==(al=Pl.processModule.selectedComponent)&&void 0!==al&&al.component_fields.find(e=>"Ratings"===e.data_type_name))&&ki&&t.createElement(f.zx,{clear:!0,title:"Rate",style:{backgroundColor:"orange",color:"white",width:"100%"},clicked:()=>{jo(!0)}}),(null===(rl=Pl.processModule)||void 0===rl?void 0:rl.canEdit)&&t.createElement(f.zx,{title:Pl.processModule.canEdit?"Edit":"Close",style:{width:"100%"},clicked:()=>{mo(!1),Eo(!1),u.h.dispatch((0,a.q4)((0,i.Z)((0,i.Z)({},Pl.processModule),{},{showDetail:!1}))),Pl.processModule.canEdit||(Ql?Mi():(zo(Ul.filter(e=>{var l,o;return e.module_id===(null===Pl||void 0===Pl||null===(l=Pl.processModule)||void 0===l||null===(o=l.module)||void 0===o?void 0:o.id)})),yi(Zi?zl.steps[0].id:zl.steps[1].id),qo(!1),Mi(),Fl())),window.scrollTo({top:Pl.processModule.canEdit?1e3:0,behavior:"smooth"})}}),(null===Pl||void 0===Pl||null===(vl=Pl.processModule)||void 0===vl||null===(sl=vl.module)||void 0===sl||null===(ul=sl.options)||void 0===ul?void 0:ul.canCancel)&&("New"===Gl.status||"Unassigned"===Gl.status)&&!(null!==(cl=Gl.assigned_to)&&void 0!==cl&&cl.id)&&t.createElement(f.zx,{loading:lo,title:"Cancel Transaction",style:{backgroundColor:"red",color:"white",width:"100%"},clear:!0,clicked:()=>{oo(!0),(0,v.tE)(null===Gl||void 0===Gl?void 0:Gl.id,"Cancelled").pipe((0,p.P)()).subscribe({complete:()=>{},next:e=>{var l;if(oo(!1),null!==e&&void 0!==e&&null!==(l=e.data.payments)&&void 0!==l&&l.stripe_id){var o;const l=Math.abs(+(null===e||void 0===e||null===(o=e.data.payments)||void 0===o?void 0:o.stripe_price));(0,de.e_)({user_id:eo.id,id:(0,s.mR)(),total:l,product:"RF-".concat(Gl.title),notes:"Wallet",quantity:1}).pipe((0,p.P)()).subscribe({next:()=>{var e;eo.wallet=+(+(null!==(e=null===Ol||void 0===Ol?void 0:Ol.wallet)&&void 0!==e?e:0)+l),oo(!1),mo(!1),Eo(!1),u.h.dispatch((0,a.q4)((0,i.Z)((0,i.Z)({},Pl.processModule),{},{showDetail:!1}))),window.scrollTo({top:0,behavior:"smooth"})}})}else oo(!1),mo(!1),Eo(!1),u.h.dispatch((0,a.q4)((0,i.Z)((0,i.Z)({},Pl.processModule),{},{showDetail:!1}))),window.scrollTo({top:0,behavior:"smooth"})}})}}),(null===Pl||void 0===Pl||null===(pl=Pl.processModule)||void 0===pl||null===(ml=pl.module)||void 0===ml||null===(fl=ml.options)||void 0===fl?void 0:fl.canCancel)&&"Cancellation Request"===(null===Gl||void 0===Gl?void 0:Gl.status)&&(null===eo||void 0===eo?void 0:eo.id)===(null===Gl||void 0===Gl||null===(_l=Gl.created_by)||void 0===_l?void 0:_l.id)&&t.createElement(f.zx,{loading:lo,title:"Allow Cancellation",style:{backgroundColor:"red",color:"white",width:"100%"},clear:!0,clicked:()=>{var e;if(oo(!0),null!==(e=Gl.payments)&&void 0!==e&&e.stripe_id){var l,o;const e=Math.abs(null!==(l=+(null===Gl||void 0===Gl||null===(o=Gl.payments)||void 0===o?void 0:o.stripe_price))&&void 0!==l?l:0);(0,de.e_)({user_id:eo.id,id:(0,s.mR)(),total:e,product:"RF-".concat(Gl.title),notes:"Wallet",quantity:1}).pipe((0,p.P)()).subscribe({next:()=>{var l;eo.wallet=+(+(null!==(l=null===Ol||void 0===Ol?void 0:Ol.wallet)&&void 0!==l?l:0)+e),(0,v.tE)(null===Gl||void 0===Gl?void 0:Gl.id,"Cancelled").pipe((0,p.P)()).subscribe({next:e=>{oo(!1),mo(!1),Eo(!1),u.h.dispatch((0,a.q4)((0,i.Z)((0,i.Z)({},Pl.processModule),{},{showDetail:!1}))),window.scrollTo({top:0,behavior:"smooth"})},complete:()=>{}})}})}else(0,v.tE)(null===Gl||void 0===Gl?void 0:Gl.id,"Refund").pipe((0,p.P)()).subscribe({complete:()=>{},next:e=>{oo(!1),mo(!1),Eo(!1),u.h.dispatch((0,a.q4)((0,i.Z)((0,i.Z)({},Pl.processModule),{},{showDetail:!1}))),window.scrollTo({top:0,behavior:"smooth"})}})}}),(null===Pl||void 0===Pl||null===(yl=Pl.processModule)||void 0===yl||null===(gl=yl.module)||void 0===gl||null===(hl=gl.options)||void 0===hl?void 0:hl.canCancel)&&"Refund"===Gl.status&&(null===eo||void 0===eo?void 0:eo.id)===(null===(bl=Gl.assigned_to)||void 0===bl?void 0:bl.id)&&t.createElement(f.zx,{loading:lo,title:"Refund",style:{backgroundColor:"red",color:"white",width:"100%"},clear:!0,clicked:()=>{const e=Gl.component_fields.find(e=>{var l;return"Payments"===e.data_type_name&&"Refund"===Gl.status&&(null===(l=Gl.assigned_to)||void 0===l?void 0:l.id)===(null===eo||void 0===eo?void 0:eo.id)}),l=Gl.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.paymentField)});if(l){var o,t,n;oo(!0);const e=Math.abs(null!==(o=+(null===l||void 0===l?void 0:l.value))&&void 0!==o?o:0)+ +(null===l||void 0===l?void 0:l.value)*+(null!==(t=null===(n=Rl.misc_info)||void 0===n?void 0:n.rate)&&void 0!==t?t:.2);(0,de.e_)({user_id:eo.id,id:(0,s.mR)(),total:e,product:"RF-".concat(Gl.title),notes:"Wallet",quantity:1}).pipe((0,p.P)()).subscribe({next:()=>{var l;eo.wallet=+(+(null!==(l=null===Ol||void 0===Ol?void 0:Ol.wallet)&&void 0!==l?l:0)+e),(0,v.tE)(null===Gl||void 0===Gl?void 0:Gl.id,"Cancelled").pipe((0,p.P)()).subscribe({next:e=>{oo(!1),mo(!1),Eo(!1),gi(),Mi(),window.scrollTo({top:0,behavior:"smooth"})},complete:()=>{}})}})}else oo(!1),mo(!1),Eo(!1),u.h.dispatch((0,a.q4)((0,i.Z)((0,i.Z)({},Pl.processModule),{},{showDetail:!1}))),window.scrollTo({top:0,behavior:"smooth"})}}))),Vo&&t.createElement(f.U7,{hasCloseIcon:!0,blured:!0,scrollable:!0,isOpen:Vo,shadowedContainerStyle:{borderTopLeftRadius:"30px",borderTopRightRadius:"30px",padding:"20px",width:"100%"},sshadowedContainerClassname:se.popup,onClose:()=>{Go(!1)}},t.createElement(Ve,{ref:si,begunModule:Pl,allModules:Ll,companyData:Rl,components:Ul,setSelectedComponent:Jl,selectedComponent:Gl,companyUsersArray:Wl,print:xo,step:Z.Nb,companyPositionsArray:Yl,user:Ol,goto:!0}),t.createElement("div",{className:se.emulatedFlexGap,style:{width:"100%"}},t.createElement(f.zx,{title:"Close",style:{width:"100%"},clicked:()=>{Go(!1)}}))),Ho&&t.createElement(f.U7,{isOpen:Ho,hasCloseIcon:!0,onClose:()=>jo(!1),backdropColor:!0,blured:!1,scrollable:!0,shadowedContainerStyle:{width:"100%",height:"auto"}},t.createElement("div",{className:se.ratingsDiv},t.createElement("h3",null,"Rate your experience"),t.createElement("h5",null,"Ratings and reviews of users are visible to everyone"),t.createElement(Te.Z,{photo:null===ki||void 0===ki?void 0:ki.photo,firstName:null===ki||void 0===ki?void 0:ki.first_name,lastName:null===ki||void 0===ki?void 0:ki.last_name,email:null===ki||void 0===ki?void 0:ki.email,position:null===ki||void 0===ki?void 0:ki.phone,cardClicked:()=>{},width:"100%"}),t.createElement("div",{className:se.slider},t.createElement(f.zx,{clear:!0,clicked:()=>Qo(1)},t.createElement(C.G,{icon:E.Tab,style:{color:Jo<1?"lightgray":"black",height:"30px",width:"30px"}})),t.createElement(f.zx,{clear:!0,clicked:()=>Qo(2)},t.createElement(C.G,{icon:E.Tab,style:{color:Jo<2?"lightgray":"black",height:"30px",width:"30px"}})),t.createElement(f.zx,{clear:!0,clicked:()=>Qo(3)},t.createElement(C.G,{icon:E.Tab,style:{color:Jo<3?"lightgray":"black",height:"30px",width:"30px"}})),t.createElement(f.zx,{clear:!0,clicked:()=>Qo(4)},t.createElement(C.G,{icon:E.Tab,style:{color:Jo<4?"lightgray":"black",height:"30px",width:"30px"}})),t.createElement(f.zx,{clear:!0,clicked:()=>Qo(5)},t.createElement(C.G,{icon:E.Tab,style:{color:Jo<5?"lightgray":"black",height:"30px",width:"30px"}}))),"Comments:",t.createElement("textarea",{type:"text",autoComplete:"none",className:se.ratingsInput,name:"Comments",id:"Comments",style:{padding:"0 10px 0 10px",fontSize:"16px",backgroundColor:"rgba(234, 231, 231, 0.91)",marginBottom:"30px"}}),t.createElement(f.zx,{title:"Rate",clicked:()=>{var e,l,o,t;const n=null===Pl||void 0===Pl||null===(e=Pl.processModule)||void 0===e||null===(l=e.steps)||void 0===l||null===(o=l.find(e=>e.component_blueprints.filter(e=>e.selected_fields.filter(e=>"Ratings"===e.data_type_name).length>0).length>0))||void 0===o||null===(t=o.component_blueprints.find(e=>e.selected_fields.filter(e=>"Ratings"===e.data_type_name).length>0).selected_fields)||void 0===t?void 0:t.find(e=>"Ratings"===e.data_type_name);ki&&(oo(!0),(0,v.C0)({component_id:Gl.id,index:0,gropup:100,value:"".concat(document.getElementById("Comments").value,",").concat(Jo),procedure_step_blueprint_field_id:n.procedure_step_blueprint_field_id}).subscribe({complete:()=>{},next:()=>{(0,v.zK)(Gl.id,"Closed").subscribe({complete:()=>{},next:e=>{(0,ge.DV)(ki,{ratings:Jo,comments:document.getElementById("Comments").value,component_id:Gl.id}).pipe((0,p.P)()).subscribe({next:e=>{oo(!1),jo(!1),u.h.dispatch((0,a.q4)((0,i.Z)((0,i.Z)({},Pl.processModule),{},{showDetail:!1}))),Jl((0,i.Z)((0,i.Z)({},Gl),{},{status:"Closed"}))},error:e=>{oo(!1),jo(!1),u.h.dispatch((0,a.q4)((0,i.Z)((0,i.Z)({},Pl.processModule),{},{showDetail:!1}))),Mi()},complete:()=>{}})}})}}))}}))),Po&&t.createElement(el,{title:"",nav:Po,openNav:()=>{window.clearInterval(Ko),Hl?di("/"):Oo(!1)}},t.createElement("div",{style:{color:"var(--app-color-gray-dark)",height:"inherit",width:"100%"}},t.createElement("div",null,t.createElement("div",{style:{textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center",padding:"0 20px 20px 20px"}},!(null!==Gl&&void 0!==Gl&&Gl.assigned_to)&&t.createElement(f.$j,{type:"BallTriangle",color:"black",height:30,width:"30px"}),t.createElement("p",{className:se.modalSubTitle},null!==Gl&&void 0!==Gl&&Gl.assigned_to?"Your transaction has been assigned to:":"Waiting for ".concat(null!==(xl=null===Gl||void 0===Gl?void 0:Gl.title)&&void 0!==xl?xl:"transaction"," to be assigned")),null!==Gl&&void 0!==Gl&&Gl.assigned_to||"Unassigned"!==(null===Gl||void 0===Gl?void 0:Gl.status)?(null===Gl||void 0===Gl?void 0:Gl.assigned_to)&&t.createElement(Te.Z,{photo:null===Gl||void 0===Gl||null===(El=Gl.assigned_to)||void 0===El?void 0:El.photo,height:"150px",width:y.tq?"100%":"80%",firstName:"".concat(null===Gl||void 0===Gl||null===(Cl=Gl.assigned_to)||void 0===Cl?void 0:Cl.first_name," ").concat(null===Gl||void 0===Gl||null===(wl=Gl.assigned_to)||void 0===wl?void 0:wl.last_name),email:null!==(Ml=null===Gl||void 0===Gl||null===(Sl=Gl.assigned_to)||void 0===Sl?void 0:Sl.phone)&&void 0!==Ml?Ml:""}):t.createElement(Te.Z,{noPhoto:!0,height:"150px",width:y.tq?"100%":"80%",firstName:"Unassigned",email:"Please close and select another provider"})),t.createElement("hr",{style:{borderTop:"0.5px solid #D2D2D2"}})),t.createElement("br",null),t.createElement(f.zx,{clicked:()=>{window.clearInterval(Ko),Oo(!1)},title:"Hide",style:{width:"100%"},loading:lo}))),Do&&t.createElement(f.U7,{isOpen:Do,hasCloseIcon:!0,onClose:()=>Hl?di("/"):To(!1),backdropColor:!0,blured:!1,scrollable:!0,shadowedContainerStyle:{width:"100%",height:"auto"}},t.createElement("div",{style:{textAlign:"center",padding:"20px"}},t.createElement("p",{className:se.modalTitle},null===(kl=Pl.processModule.module)||void 0===kl?void 0:kl.name),t.createElement("p",{className:se.modalSubTitle},null!==(Zl=null===Pl||void 0===Pl||null===(Il=Pl.processModule)||void 0===Il||null===(Nl=Il.module)||void 0===Nl||null===(Dl=Nl.options)||void 0===Dl?void 0:Dl.message)&&void 0!==Zl?Zl:"Transaction saved"))))))});var vl=o(91605),sl=o(30994),ul=o(57650),cl=o(96079),pl=o(87453),ml=o(34665);const fl={host:"DashboardMobile_host__FXUjc",dashboardPanel:"DashboardMobile_dashboardPanel__lXz07",headerContainer:"DashboardMobile_headerContainer__JAcuY",title:"DashboardMobile_title__UJq7q",modalTitle:"DashboardMobile_modalTitle__yR3Zx",singleButton:"DashboardMobile_singleButton__h-dk5",fieldRowContainer:"DashboardMobile_fieldRowContainer__VvOwp",fieldTypeInput:"DashboardMobile_fieldTypeInput__Qmlee",dashboardCard:"DashboardMobile_dashboardCard__uJUtM",componentCard:"DashboardMobile_componentCard__9UsrE",componentCardv2:"DashboardMobile_componentCardv2__EqNmf",imageCard:"DashboardMobile_imageCard__J6I0d",imageCard_ii:"DashboardMobile_imageCard_ii__jH+mu",searchContainer:"DashboardMobile_searchContainer__nrcHL",searchInput:"DashboardMobile_searchInput__GQHtE",ongoingtx:"DashboardMobile_ongoingtx__tEDSh",dropdownSelectComponent:"DashboardMobile_dropdownSelectComponent__RUoXR",dropdownSelectMenuOverlayList:"DashboardMobile_dropdownSelectMenuOverlayList__T2zDR",dropdownSelectMenuOverlayListItem:"DashboardMobile_dropdownSelectMenuOverlayListItem__twu8t",dropdownInput:"DashboardMobile_dropdownInput__CB8Ta",dropdownClearControlsClassName:"DashboardMobile_dropdownClearControlsClassName__TMP-7",listContainer:"DashboardMobile_listContainer__ASOGR",dropdownListContainer:"DashboardMobile_dropdownListContainer__J4smE",dropDownButtonContainer:"DashboardMobile_dropDownButtonContainer__oeCll",searchResults:"DashboardMobile_searchResults__RB3VY",pageContainer:"DashboardMobile_pageContainer__ep2wY",emulatedFlexGap:"DashboardMobile_emulatedFlexGap__mHKc9",popup:"DashboardMobile_popup__wqxbT",profilepopup:"DashboardMobile_profilepopup__0SibL",userCardContainerTop:"DashboardMobile_userCardContainerTop__bT3XW",userCardInnerContainer:"DashboardMobile_userCardInnerContainer__u0yVs",avatarUrlImg:"DashboardMobile_avatarUrlImg__1MY4w",center:"DashboardMobile_center__wR7QQ",moduleTitle:"DashboardMobile_moduleTitle__itg2E",filtersContainer:"DashboardMobile_filtersContainer__Mz0UE",wallet:"DashboardMobile_wallet__QzTMZ",userPanelRows:"DashboardMobile_userPanelRows__XQVNr",actionsContainer:"DashboardMobile_actionsContainer__65lpT",appsTitle:"DashboardMobile_appsTitle__a80ai",stepTitle:"DashboardMobile_stepTitle__FV3ye",stepSubTitle:"DashboardMobile_stepSubTitle__s2cY7",listContainerAll:"DashboardMobile_listContainerAll__ZrR1O",listButton:"DashboardMobile_listButton__zpevX",logoUrlImgMobile:"DashboardMobile_logoUrlImgMobile__yqITz",button:"DashboardMobile_button__-7QAd",stepGuidanceSmaller:"DashboardMobile_stepGuidanceSmaller__SwS1U"};o(143),o(36832);var _l=o(20089);const yl=o(66918),gl=(0,g.$j)(e=>{const{begunModule:l,allTasks:o,allCompletedTasks:i,allCompletedTasksPaginated:t,companyProcesses:n,allModules:d,components:a,companyData:r,companyUsersArray:v,blueprints:s,payable:u,lastUpdates:c,companyPositionsArray:p,showMessage:m}=e.flowReducer,{user:f,authenticated:_}=e.sessionReducer,{authenticatedUser:y}=e.authReducer;return{begunModule:l,allTasks:o,allCompletedTasks:i,allCompletedTasksPaginated:t,companyProcesses:n,allModules:d,components:a,companyData:r,companyUsersArray:v,user:f,authenticatedUser:y,authenticated:_,blueprints:s,payable:u,lastUpdates:c,companyPositionsArray:p,showMessage:m}},e=>({onSetSelectedProcess:l=>e((0,a.Xu)(l))}))(e=>{var l,o,w,M,S,k,I,N,T,P,O,A,z,L,R,U,F,W,q,Y,B,H,j,V,G,J,Q,K,X,$,ee,le,oe,ie,te,ve,se,ue,ce,pe,me;(0,ul.z2)();const{authenticated:fe,authenticatedUser:_e,user:ye,companyProcesses:he,allModules:be,components:xe,companyData:Ee,begunModule:Ce,blueprints:we,payable:Me,companyUsersArray:Se,lastUpdates:ke,allTasks:Ze,companyPositionsArray:Ie,showMessage:Ne}=e,[De,Pe]=(0,t.useState)(!1),[Le,Re]=(0,t.useState)({}),[Ue,Fe]=(0,t.useState)(!1),[We,qe]=(0,t.useState)(!1),[Ye,Be]=(0,t.useState)(!1),[He,je]=(0,t.useState)(!1),[Ve,Ge]=(0,t.useState)(),[Je,Qe]=(0,t.useState)([]),[Ke,Xe]=(0,t.useState)(!1),[$e,el]=(0,t.useState)({}),[ll,ol]=(0,t.useState)(!1),[il,tl]=(0,t.useState)({}),[dl,al]=(0,t.useState)(!1),[gl,bl]=(0,t.useState)(-1),[xl,El]=(0,t.useState)([]),[Cl,wl]=(0,t.useState)(!1),[Ml,Sl]=(0,t.useState)(!1),[kl,Zl]=(0,t.useState)(!1),[Il,Nl]=(0,t.useState)(!1),[Dl,Tl]=(0,_.pQ)(),[Pl,Ol]=(0,t.useState)(!(null===Ce||void 0===Ce||null===(l=Ce.processModule)||void 0===l||null===(o=l.module)||void 0===o||!o.id)&&(null===ye||void 0===ye||null===(w=ye.positions)||void 0===w||null===(M=w.filter(e=>{var l,o,i,t;return(null===Ce||void 0===Ce||null===(l=Ce.processModule)||void 0===l||null===(o=l.module)||void 0===o||null===(i=o.options)||void 0===i||null===(t=i.processors)||void 0===t?void 0:t.indexOf(e.id))>-1}))||void 0===M?void 0:M.length)>0),Al=(0,g.I0)(),zl=(0,n.s0)(),{paymentID:Ll,walletID:Rl}=(0,n.UO)();document.title="Dashboard | ".concat(s.iC," Mobile"),(0,t.useEffect)(()=>(window.addEventListener("scroll",e=>{0==e.currentTarget.scrollY?Nl(!1):Nl(!0)}),()=>{try{window.removeEventListener("scroll")}catch(e){}}),[]);const Ul=(0,t.useCallback)((e,l,o)=>{const t=t=>{var n,d,r,p,f,y,g,b,x,E,C,w,M,S,k,Z,I;const N=t.steps.filter(e=>{var l,o,i,n,d,a;return void 0==(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.showStepAll)||1==(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.showStepAll)||0==(null===e||void 0===e||null===(i=e.options)||void 0===i?void 0:i.showStepAll)&&(null===e||void 0===e||null===(n=e.options)||void 0===n||null===(d=n.showOnly)||void 0===d?void 0:d.filter(e=>_e.positions.map(e=>e.id).indexOf(e)>-1).length)>0||(null===e||void 0===e||null===(a=e.options)||void 0===a?void 0:a.showStepAuthor)&&(null===_e||void 0===_e?void 0:_e.id)===(null===t||void 0===t?void 0:t.user_id)}).map((e,l)=>(0,i.Z)((0,i.Z)({},e),{},{rank:l+1}));var D,T;(u.h.dispatch((0,a.q4)(t)),u.h.dispatch((0,a.an)([t],s.Qc)),u.h.dispatch((0,a.q4)((0,i.Z)((0,i.Z)({},t),{},{completeSteps:t.steps,steps:N,stepIndex:o||null!==l&&void 0!==l&&null!==(n=l.options)&&void 0!==n&&n.readOnly&&"manager"!==_e.user_type&&"admin"!==_e.user_type?-1:(null===t||void 0===t||null===(d=t.steps)||void 0===d?void 0:d.length)>0?(null===t||void 0===t||null===(r=t.steps[0])||void 0===r||null===(p=r.component_blueprints)||void 0===p?void 0:p.filter(e=>{var l;return 1==(null===(l=e.options)||void 0===l?void 0:l.asModuleList)}).length)>0?1:0:1,module_id:l.id,module:e.find(e=>e.id===l.id),isUpdating:!1,tab:!1}))),Tl({action:_._U.setCurrentStep,value:null===t||void 0===t?void 0:t.steps[o?0:(null===t||void 0===t||null===(f=t.steps)||void 0===f?void 0:f.length)>0?(null===t||void 0===t||null===(y=t.steps[0])||void 0===y||null===(g=y.component_blueprints)||void 0===g?void 0:g.filter(e=>{var l;return 1==(null===(l=e.options)||void 0===l?void 0:l.asModuleList)}).length)>0?1:0:1]}),Tl({action:_._U.setModuleItems,value:null!==(b=null===Le||void 0===Le?void 0:Le.component_items)&&void 0!==b?b:[]}),Tl({action:_._U.setModuleNewStepComponents,value:[]}),Tl({action:_._U.setComponents,value:[]}),(null===Ce||void 0===Ce||null===(x=Ce.processModule)||void 0===x||null===(E=x.steps)||void 0===E?void 0:E.length)>0&&(null===Ce||void 0===Ce||null===(C=Ce.processModule)||void 0===C||null===(w=C.steps)||void 0===w||w.filter(e=>{var l;return null===e||void 0===e||null===(l=e.component_blueprints)||void 0===l?void 0:l.filter(e=>e.selected_fields.filter(e=>e.value=void 0))})),(0,m.vC)(l,s.Qc,s.M4,1,!1).pipe((0,c.q)(1)).subscribe({next:e=>{var o;Pe(!1),l.lastUpdate=0,l.count=null!==(o=null===e||void 0===e?void 0:e.total)&&void 0!==o?o:0,(0,v.OQ)(!0,!1).pipe((0,c.q)(1)).subscribe({complete:()=>{(0,v.ew)().pipe((0,c.q)(1)).subscribe({})}})}}),null===l||void 0===l||null===(M=l.options)||void 0===M||null===(S=M.supporting)||void 0===S||S.filter((e,o)=>{var i,t;(0,m.vC)({id:e,name:null!==(i="".concat(null===be||void 0===be||null===(t=be.find(l=>l.id===e))||void 0===t?void 0:t.name).concat(o))&&void 0!==i?i:"".concat(null===l||void 0===l?void 0:l.name).concat(o)},s.Qc,s.R6,1).pipe((0,c.q)(1)).subscribe({next:i=>{var t,n;ke.componentsByModule[null!==(t="".concat(null===be||void 0===be||null===(n=be.find(l=>l.id===e))||void 0===n?void 0:n.name).concat(o))&&void 0!==t?t:"".concat(null===l||void 0===l?void 0:l.name).concat(o)]=(0,h.now)()}})}),(null===l||void 0===l||null===(k=l.options)||void 0===k||null===(Z=k.positions)||void 0===Z?void 0:Z.length)>0)&&(0,ge.n0)(null===l||void 0===l||null===(D=l.options)||void 0===D?void 0:D.positions,5*(null===l||void 0===l||null===(T=l.options)||void 0===T?void 0:T.positions.length)).pipe((0,c.q)(1)).subscribe({});if(null!==l&&void 0!==l&&null!==(I=l.options)&&void 0!==I&&I.single){const e=localStorage.getItem(l.id);(0,v.DA)(t,e?JSON.parse(e):xe.find(e=>e.module_id===l.id),void 0,Tl,be),Re(e?JSON.parse(e):xe.find(e=>e.module_id===l.id))}};he.find(e=>e.id===l.procedure.id)?t(he.find(e=>e.id===l.procedure.id)):(Pe(!0),(0,r.zJ)(l.procedure.id).pipe((0,p.P)()).subscribe({next:e=>{Pe(!1),t(e)},error:e=>{}}))},[Ce]);(0,t.useEffect)(()=>{Al((0,a.aV)())},[]),(0,t.useEffect)(()=>{history.pushState(null,null,location.href),window.onpopstate=function(e){history.go(1)},Al((0,a.tR)(!1)),Al((0,a.IW)(!1))},[Ye]),(0,t.useEffect)(()=>{if(fe){if("trial_ended"!==(null===Ee||void 0===Ee?void 0:Ee.status)&&"inactive"!==(null===Ee||void 0===Ee?void 0:Ee.status)&&(null===be||void 0===be?void 0:be.length)>0){const d=null===be||void 0===be?void 0:be.filter(e=>{var l;return!0===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.asMobileApp)});if(1===(null===d||void 0===d?void 0:d.length)){var e,l;const o=(null===ye||void 0===ye||null===(e=ye.positions)||void 0===e||null===(l=e.filter(e=>{var l,o,i;return(null===(l=d[0])||void 0===l||null===(o=l.options)||void 0===o||null===(i=o.processors)||void 0===i?void 0:i.indexOf(e.id))>-1}))||void 0===l?void 0:l.length)>0;Ol(o),Ul(be,d[0],o)}else if((null===d||void 0===d?void 0:d.length)>0){var o,i;const e=_e.positions.find(e=>"1"===e.standards),l=e&&d.find(l=>l.name===e.name);let a=(null===ye||void 0===ye||null===(o=ye.positions)||void 0===o||null===(i=o.filter(e=>{var l,o,i;return(null===(l=d[0])||void 0===l||null===(o=l.options)||void 0===o||null===(i=o.processors)||void 0===i?void 0:i.indexOf(e.id))>-1}))||void 0===i?void 0:i.length)>0;var t,n;if(l)a=(null===ye||void 0===ye||null===(t=ye.positions)||void 0===t||null===(n=t.filter(e=>{var o,i;return(null===l||void 0===l||null===(o=l.options)||void 0===o||null===(i=o.processors)||void 0===i?void 0:i.indexOf(e.id))>-1}))||void 0===n?void 0:n.length)>0,Ul(be,l,a);else Ul(be,d[0],a);Ol(a),ol(!0)}}""===(null===ye||void 0===ye?void 0:ye.id)&&(Al((0,x.ci)()),Al((0,a.mb)())),"geolocation"in navigator&&navigator.geolocation.getCurrentPosition(function(e){u.h.dispatch((0,a.Rb)({latitude:e.coords.latitude,longitude:e.coords.longitude}))})}},[fe,be]),(0,t.useEffect)(()=>{be.length>0&&be.filter(e=>{var l;return void 0===he.find(l=>{var o;return l.id===(null===e||void 0===e||null===(o=e.procedure)||void 0===o?void 0:o.id)})&&(0,r.zJ)(null===e||void 0===e||null===(l=e.procedure)||void 0===l?void 0:l.id).pipe((0,p.P)()).subscribe({})}),be.length>0&&be.filter(e=>{var l;return(b()((0,h.now)()).diff(b()(null!==(l=ke.componentsByModule[e.name])&&void 0!==l?l:(0,h.now)()),"minutes")>10||void 0===ke.componentsByModule[e.name]||0===xe.filter(l=>l.module_id===e.id).length)&&(0,m.vC)(e,s.Qc,s.Zp,1,!1).pipe((0,c.q)(1)).subscribe({next:l=>{ke.componentsByModule[e.name]=(0,h.now)()}})})},[be]),(0,t.useEffect)(()=>{if(fe&&(null===Me||void 0===Me?void 0:Me.length)>0&&void 0!==Rl&&void 0===Ll){Me.find(e=>e.user_id===(null===_e||void 0===_e?void 0:_e.id)&&e.paymentID===Rl)&&(u.h.dispatch((0,a.Wy)(Me.filter(e=>e.paymentID!==Rl))),(0,ge.IC)().pipe((0,p.P)()).subscribe({next:e=>{var l;_e.wallet=null===e||void 0===e?void 0:e.wallet,_e.options=null===e||void 0===e?void 0:e.options,_e.departments=null===e||void 0===e?void 0:e.departments,_e.positions=null===e||void 0===e?void 0:e.positions,_e.pinned_modules=null===e||void 0===e?void 0:e.pinned_modules,null===ml.Fc||void 0===ml.Fc||null===(l=ml.Fc.saveUser)||void 0===l||l.call(ml.Fc,_e).then(()=>{})}}),je(!1),Be(!1),al(!0))}},[Rl,fe]),(0,t.useEffect)(()=>{if(fe){let e=[];be.filter(l=>he.filter(e=>{var o;return l.procedure.id===e.id&&e.steps.length>0&&(null===e||void 0===e||null===(o=e.steps)||void 0===o?void 0:o.filter(e=>e.component_blueprints.filter(e=>{var l;return 1==(null===(l=e.options)||void 0===l?void 0:l.asDashboard)})))}).filter(o=>o.steps.filter(e=>e.component_blueprints.filter(e=>{var l;return 1==(null===(l=e.options)||void 0===l?void 0:l.asDashboard)})).filter(t=>t.component_blueprints.filter(e=>{var l;return 1==(null===(l=e.options)||void 0===l?void 0:l.asDashboard)}).filter(t=>t.selected_fields.filter(e=>1==e.visible&&("Formula"===e.data_type_name||"Chart"===e.data_type_name)).map(n=>{var d,a,r,v;e=(null===ye||void 0===ye||null===(d=ye.positions)||void 0===d?void 0:d.filter(e=>{var l,o;return null===(l=t.options)||void 0===l||null===(o=l.showOnly)||void 0===o?void 0:o.includes(e.id)}).length)>0||0==(null===(a=t.options)||void 0===a||null===(r=a.showOnly)||void 0===r?void 0:r.length)||void 0===(null===(v=t.options)||void 0===v?void 0:v.showOnly)?[...e,(0,i.Z)((0,i.Z)({},n),{},{module_id:l.id,procedure:o,module:l})]:[...e]}))))),Qe(e)}},[fe,be,he,xe]);const Fl=(0,t.useCallback)(e=>{var l,o,n,r,v,s,c;return t.createElement("div",{className:"tabbar-section"},e.children,t.createElement("div",{className:"mobile-nav"},t.createElement(d.Z,{clear:!0,loading:De,clicked:()=>{var e,l,o;u.h.dispatch((0,a.q4)((0,i.Z)((0,i.Z)({},Ce.processModule),{},{stepIndex:Pl?-1:null!==(e=Ce.processModule)&&void 0!==e&&null!==(l=e.module)&&void 0!==l&&null!==(o=l.options)&&void 0!==o&&o.single?0:1,isUpdating:!1,tab:!1}))),be.filter(e=>{var l;return!0===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.asMobileApp)}).length>1&&ol(!0),Be(!1),je(!1)}},t.createElement("div",{style:{color:"var(--app-color-gray-dark)"}},t.createElement(C.G,{icon:E.J9Y,className:"tabbar-icon"}),t.createElement("div",{style:{fontSize:"10px",height:"14px"}},"Home")))),(null===ye||void 0===ye||null===(l=ye.ui_permissions)||void 0===l?void 0:l.find(e=>"view-dashboard-task"===e))&&t.createElement("div",{className:"mobile-nav"},t.createElement(d.Z,{clear:!0,clicked:()=>{je(!0),Be(!1)}},t.createElement("div",{style:{color:"var(--app-color-gray-dark)"}},t.createElement(C.G,{icon:E.fT7,className:"tabbar-icon"}),t.createElement("div",{style:{fontSize:"10px",height:"14px"}},"Tasks")))),!(null!==Ce&&void 0!==Ce&&null!==(o=Ce.processModule)&&void 0!==o&&null!==(n=o.module)&&void 0!==n&&null!==(r=n.options)&&void 0!==r&&r.single)&&t.createElement("div",{className:"mobile-nav"},t.createElement(d.Z,{clear:!0,clicked:()=>{u.h.dispatch((0,a.q4)((0,i.Z)((0,i.Z)({},Ce.processModule),{},{stepIndex:0,isUpdating:!1,tab:!0}))),qe(!0),ol(!1),setTimeout(()=>qe(!1)),el({}),Xe(!0),Be(!1),je(!1)}},t.createElement("div",{style:{color:"var(--app-color-gray-dark)"}},t.createElement(C.G,{icon:E.Zrf,className:"tabbar-icon"}),t.createElement("br",null),t.createElement("div",{style:{fontSize:"10px",height:"14px"}},null!==(v=null===(s=Ce.processModule)||void 0===s||null===(c=s.module)||void 0===c?void 0:c.name)&&void 0!==v?v:"Transactions")))),t.createElement("div",{className:"mobile-nav"},t.createElement(d.Z,{clear:!0,clicked:()=>{Be(!0),je(!1)}},t.createElement("div",{style:{color:"var(--app-color-gray-dark)"}},t.createElement(C.G,{icon:E.ILF,className:"tabbar-icon"}),t.createElement("div",{style:{fontSize:"10px",height:"14px"}},"Profile")))))},[Ml,De,Dl,xe]),Wl=(0,t.useCallback)(e=>{var l,o,i,n,a,r,v;const{dark:u=!0}=e,c=()=>{Sl(!Ml)};return t.createElement("div",{className:"navbar-section",style:{backgroundColor:u?null!==Ee&&void 0!==Ee&&null!==(l=Ee.company_standards)&&void 0!==l&&null!==(o=l.themeJ)&&void 0!==o&&o.backgroundColorr?null===Ee||void 0===Ee||null===(i=Ee.company_standards)||void 0===i||null===(n=i.themeJ)||void 0===n?void 0:n.backgroundColor:"var(--app-color-gray-dark)":"white"}},t.createElement("div",{className:"mobile-nav"},t.createElement(d.Z,{style:{marginLeft:"10px",height:"30px"},clear:!0,clicked:()=>{var e,l;Pe(!1),(null===Dl||void 0===Dl||null===(e=Dl.components)||void 0===e?void 0:e.length)>0||(null===Dl||void 0===Dl||null===(l=Dl.newStepComponents)||void 0===l?void 0:l.length)>0?tl({open:!0,handler:c}):c(),c()}},t.createElement(C.G,{icon:E.Ljc,className:"hamb-icon"}))),t.createElement("div",{className:fl.moduleTitle},null!==Ee&&void 0!==Ee&&null!==(a=Ee.company_standards)&&void 0!==a&&null!==(r=a.themeJ)&&void 0!==r&&r.title?t.createElement(t.Fragment,null,null!==Ee&&void 0!==Ee&&Ee.logo?t.createElement("img",{alt:"lg",src:null===Ee||void 0===Ee?void 0:Ee.logo,className:fl.logoUrlImgMobile}):t.createElement(t.Fragment,null,t.createElement("div",{style:{width:"100%",justifyContent:"center",display:"flex"}},(0,s.lh)("16px",u?"white":"var(--app-color-gray-dark)","bold")),t.createElement("div",{style:{width:"100%",fontSize:"9px",fontWeight:"bold",color:u?"white":"black",justifyContent:"center",display:"flex"}},"".concat((null!==(v=Ee.display_name)&&void 0!==v?v:"").toUpperCase()).concat(Pl?"*":"")," "))):t.createElement("div",{style:{width:"100%",justifyContent:"center",display:"flex"}},(0,s.lh)("18px",u?"white":"var(--app-color-gray-dark)","bold"))),t.createElement("div",{className:fl.userCardContainerTop},t.createElement(pl.ZP,null,t.createElement(cl.T$,null))),t.createElement("div",{className:"mobile-navbar ".concat(Ml?"open-nav":""),style:{width:"100%",backgroundColor:"transparent"}},t.createElement("div",{className:"mobile-navbar ".concat(Ml?"open-nav":""),style:{height:"inherit",width:"90%",boxShadow:"0px 2px 20px 5px rgba(0, 0, 0, 0.1)"}},t.createElement("div",{onClick:c,className:"mobile-navbar-close"},t.createElement(C.G,{icon:E.QQm,className:"hamb-icon",style:{color:"var(--app-color-gray)",width:"25px",height:"25px"}})),t.createElement("ul",{className:"mobile-navbar-links"},be.filter(e=>{var l;return!0===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.asMobileApp)}).map(e=>{var l;return t.createElement("li",{key:e.id},t.createElement("a",{style:{fontFamily:"Montserrat, serif"},onClick:()=>{var l,o;const i=(null===ye||void 0===ye||null===(l=ye.positions)||void 0===l||null===(o=l.filter(l=>{var o,i;return(null===e||void 0===e||null===(o=e.options)||void 0===o||null===(i=o.processors)||void 0===i?void 0:i.indexOf(l.id))>-1}))||void 0===o?void 0:o.length)>0;Ol(i),Ul(be,e,i),c(),be.filter(e=>{var l;return!0===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.asMobileApp)}).length>1&&ol(!0),Be(!1),je(!1)}},null===e||void 0===e||null===(l=e.name)||void 0===l?void 0:l.toUpperCase()))}),(null===be||void 0===be?void 0:be.find(e=>{var l;return null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.credits}))&&t.createElement("li",null,t.createElement("a",{style:{fontFamily:"Montserrat, serif"},onClick:()=>{(0,ge.IC)().pipe((0,p.P)()).subscribe({next:e=>{var l;_e.wallet=null===e||void 0===e?void 0:e.wallet,_e.options=null===e||void 0===e?void 0:e.options,_e.departments=null===e||void 0===e?void 0:e.departments,_e.positions=null===e||void 0===e?void 0:e.positions,_e.pinned_modules=null===e||void 0===e?void 0:e.pinned_modules,null===ml.Fc||void 0===ml.Fc||null===(l=ml.Fc.saveUser)||void 0===l||l.call(ml.Fc,_e).then(()=>{})}}),je(!1),Be(!1),al(!0),c()}},"WALLET")),t.createElement("li",null,t.createElement("a",{style:{fontFamily:"Montserrat, serif"},onClick:()=>{Fe(!0),Be(!1),c()}},"LOGOUT"))))))},[Ml,De,Dl,xe]),ql=(0,t.memo)(()=>{var e,l,o;return t.createElement("div",{style:{padding:"20px 5px"}},t.createElement("div",{style:{display:"flex",textAlign:"left",borderBottom:"1px solid black"}},t.createElement("p",{className:fl.stepTitle},"MY TASKS"),t.createElement(d.Z,{clear:!0,clicked:()=>{Pe(!0),(0,Oe.km)(ye.id,!0).pipe((0,c.q)(1)).subscribe({complete:()=>Pe(!1)})},icon:t.createElement("img",{src:Z.Fd})}),t.createElement(d.Z,{clear:!0,style:{display:null!==ye&&void 0!==ye&&null!==(e=ye.ui_permissions)&&void 0!==e&&e.find(e=>"view-dashboard-task"===e)?"":"none"},clicked:()=>{Ge(!0)},icon:t.createElement("img",{src:Z.IH})})),t.createElement("p",{className:fl.stepSubTitle},"Your tasks related to ".concat(null===Ce||void 0===Ce||null===(l=Ce.processModule)||void 0===l||null===(o=l.module)||void 0===o?void 0:o.name)),Ze.filter(e=>{var l,o,i,t,n;return"Done"!==e.status&&(null===e||void 0===e||null===(l=e.add_info)||void 0===l?void 0:l.module_id)===(null===Ce||void 0===Ce||null===(o=Ce.processModule)||void 0===o||null===(i=o.module)||void 0===i?void 0:i.id)&&((null===(t=e.creator)||void 0===t?void 0:t.id)===(null===_e||void 0===_e?void 0:_e.id)||(null===(n=e.assignee)||void 0===n?void 0:n.id)===(null===_e||void 0===_e?void 0:_e.id))}).map((e,l)=>{var o,i,n,a,r,v,s,u,c,p;return t.createElement("div",{key:l,style:{width:"100%",borderBottom:"1px solid lightgray",padding:"20px 5px 20px 5px",fontFamily:"var(--app-text-font-mobile)"},onClick:()=>{Ge(e)}},t.createElement("div",{style:{fontSize:"18px",fontWeight:"600",width:"100%",color:"var(--app-color-gray-dark)",textAlign:"left"}},"".concat(e.name," ").concat(null!==(o=null===(i=e.creator)||void 0===i?void 0:i.first_name)&&void 0!==o?o:""," ").concat(null!==(n=null===(a=e.creator)||void 0===a?void 0:a.last_name)&&void 0!==n?n:""," ").concat(null!==(r=null===(v=e.assignee)||void 0===v?void 0:v.first_name)&&void 0!==r?r:""," ").concat(null!==(s=null===(u=e.assignee)||void 0===u?void 0:u.last_name)&&void 0!==s?s:"").toUpperCase()),t.createElement(d.Z,{title:"".concat(b()(null===(c=e.add_info)||void 0===c?void 0:c.end).format("MMM DD h:mm a")),style:{height:"24px",width:"180px",backgroundColor:"var(--app-color-blue)"}}),t.createElement("div",{style:{fontSize:"18px",fontWeight:"normal",width:"100%",textAlign:"left"}},null!==(p=e.status)&&void 0!==p?p:"New"))}))});return t.createElement(t.Fragment,null,t.createElement("div",{className:fl.center,style:{flexDirection:"column",alignItems:"center",paddingTop:Il?"60px":"0px"}},t.createElement("div",{style:{position:Il?"fixed":"",top:"0",zIndex:"20",width:"100%",display:null!==Ne&&void 0!==Ne&&Ne.show?"none":""}},(null===Ce||void 0===Ce||null===(S=Ce.processModule)||void 0===S?void 0:S.stepIndex)<2&&!Ye&&!He&&(e=>{const l=yl.sortWith([yl.descend(yl.prop("created_date"))])(xe.filter(l=>l.module_id===(null===e||void 0===e?void 0:e.id))).filter(e=>{var l;return!("Closed"===(null===e||void 0===e?void 0:e.status)||"Cancelled"===(null===e||void 0===e?void 0:e.status)||"Expired"===(null===e||void 0===e?void 0:e.status)||(null===e||void 0===e||!e.payments)&&(null===e||void 0===e||null===(l=e.created_by)||void 0===l?void 0:l.id)!==(null===_e||void 0===_e?void 0:_e.id)&&null!==e&&void 0!==e&&e.component_fields.find(e=>"Payments"===e.data_type_name&&"Credit Card"===e.value))}).filter(l=>{var o,i,t,n;return"None"===(null===l||void 0===l?void 0:l.status)||!((null===(o=e.options)||void 0===o?void 0:o.activeFor)>0&&b()((0,h.now)()).diff(b()(l.created_date),"minutes")>+(null===(i=e.options)||void 0===i?void 0:i.activeFor))||!("New"===l.status||"Reopen"===l.status||"Unassigned"===l.status)||(null===(t=l.assigned_to)||void 0===t?void 0:t.id)||(null===l||void 0===l||null===(n=l.payments)||void 0===n?void 0:n.id)});return 1==l.length&&l.map((l,o)=>{var i,n;return t.createElement(d.Z,{key:o,className:fl.button,title:"".concat((null===l||void 0===l||null===(i=l.created_by)||void 0===i?void 0:i.id)===_e.id||(null===l||void 0===l||null===(n=l.assigned_to)||void 0===n?void 0:n.id)===_e.id?"You have":"There is"," an ongoing transaction"),clicked:()=>{hl(he,Re,Xe,Ee,l,Tl,_e,Ce,ye,be,qe,Se,e)},titleStyle:{fontWeight:"normal",fontSize:"14px",color:"white"}})})})(null!==(k=null===Ce||void 0===Ce||null===(I=Ce.processModule)||void 0===I?void 0:I.module)&&void 0!==k?k:null===be||void 0===be?void 0:be.find(e=>{var l;return!0===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.asMobileApp)})),!Ye&&(void 0==(null===Ce||void 0===Ce||null===(N=Ce.processModule)||void 0===N?void 0:N.stepIndex)||(null===Ce||void 0===Ce||null===(T=Ce.processModule)||void 0===T?void 0:T.stepIndex)<2)?be.length>0&&t.createElement(Wl,{dark:!1}):t.createElement("div",null),0!==(null===Ce||void 0===Ce||null===(P=Ce.processModule)||void 0===P?void 0:P.stepIndex)&&0===(null===be||void 0===be?void 0:be.length)&&t.createElement("div",{style:{display:"flex",margin:"auto",width:"100%",height:"500px",alignContent:"center",alignItems:"center",justifyItems:"center",justifyContent:"center"}},(0,s.lh)("30px"))),(void 0==(null===Ce||void 0===Ce||null===(O=Ce.processModule)||void 0===O?void 0:O.stepIndex)||(null===Ce||void 0===Ce||null===(A=Ce.processModule)||void 0===A?void 0:A.stepIndex)<2)&&be.length>0&&!Ye&&!He&&ll&&t.createElement(t.Fragment,null,t.createElement("div",{style:{width:"100%",textAlign:"left",borderBottom:"1px solid black",margin:"30px 0"}},t.createElement("div",{style:{fontFamily:"var(--app-text-font-mobile), serif",fontSize:"24px",width:"100%",padding:"10px 0 10px 20px"}},null===(z=Ee.display_name)||void 0===z?void 0:z.toUpperCase())),t.createElement("p",{className:fl.stepGuidanceSmaller,style:{width:"100%",padding:"0 20px",textAlign:"left"}},null===(L=Ee.company_standards)||void 0===L?void 0:L.message)),"inactive"===(null===Ee||void 0===Ee?void 0:Ee.status)&&t.createElement("div",{style:{display:"flex",margin:"auto",width:"100%",alignContent:"center",alignItems:"center",justifyItems:"center",justifyContent:"center"}},"Your account is inactive and services are temporarily not available. Please check with your administrator"),(void 0==(null===Ce||void 0===Ce||null===(R=Ce.processModule)||void 0===R?void 0:R.stepIndex)||(null===Ce||void 0===Ce||null===(U=Ce.processModule)||void 0===U?void 0:U.stepIndex)<2)&&be.length>0&&!Ye&&!He&&ll&&"inactive"!==(null===Ee||void 0===Ee?void 0:Ee.status)&&(()=>{const e=be.length>0?(()=>{const e=be.find(e=>{var l;return 1==(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.asGraphical)});return void 0===e?[]:yl.sortWith([yl.descend(yl.prop("created_date"))])(xe.filter(l=>l.module_id===e.id&&"Hide"!==l.status)).filter(e=>{var l;return(null===e||void 0===e||null===(l=e.component_fields)||void 0===l?void 0:l.filter(e=>{var l,o,i,t,n;return"Status"===e.data_type_name&&!(e.value===(null!==(l=null===(o=Ce.processModule)||void 0===o||null===(i=o.module)||void 0===i||null===(t=i.options)||void 0===t?void 0:t.lock)&&void 0!==l?l:null===(n=Ee.misc_info)||void 0===n?void 0:n.lock)||"Closed"===e.value||"Cancelled"===e.value)}).length)>0}).map((e,l)=>{var o,i,n,d;const a=null===e||void 0===e?void 0:e.component_fields.find(e=>"Link"===e.data_type_name);return t.createElement("div",{key:l,className:fl.imageCard_ii,style:{height:"50vh"}},a&&((null===(o="".concat(null===a||void 0===a?void 0:a.value))||void 0===o?void 0:o.includes("jpg"))||(null===(i="".concat(null===a||void 0===a?void 0:a.value))||void 0===i?void 0:i.includes("jpeg"))||(null===(n="".concat(null===a||void 0===a?void 0:a.value))||void 0===n?void 0:n.includes("png"))||(null===a||void 0===a||null===(d=a.options)||void 0===d?void 0:d.image))&&t.createElement("img",{alt:"lg",src:null===a||void 0===a?void 0:a.value,style:{objectFit:"cover",height:"40vh",backgroundColor:"white"}}))})})():[];return t.createElement("div",{className:fl.center,style:{display:(null===e||void 0===e?void 0:e.length)>0?"":"none",width:"100%",backgroundColor:"var(--app-color-gray-lightest)",flexDirection:"column",marginTop:"5px"}},t.createElement(re.tq,{slidesPerView:1,centeredSlides:!0,spaceBetween:6,initialSlide:0,pagination:{clickable:!0,dynamicBullets:!0},modules:[ae.pt,ae.tl],className:"mySwiper",loop:!0},(null===e||void 0===e?void 0:e.length)>0&&e.map((e,l)=>t.createElement(re.o5,{key:l,className:fl.swiperslide},e))))})(null!==(F=null===Ce||void 0===Ce||null===(W=Ce.processModule)||void 0===W?void 0:W.module)&&void 0!==F||(null===be||void 0===be||be.find(e=>{var l;return!0===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.asMobileApp)}))),(void 0==(null===Ce||void 0===Ce||null===(q=Ce.processModule)||void 0===q?void 0:q.stepIndex)||(null===Ce||void 0===Ce||null===(Y=Ce.processModule)||void 0===Y?void 0:Y.stepIndex)<2)&&be.length>0&&!Ye&&!He&&ll&&"inactive"!==(null===Ee||void 0===Ee?void 0:Ee.status)&&t.createElement("div",{className:fl.center,style:{justifyContent:(Je.length,"center"),width:"100%",height:Je.length>0?"":"auto",display:Je.length>0?"":"none",overflow:"auto"}},(()=>{if(Je.length>0)return t.createElement("div",{style:{width:"100%",flexDirection:"column"}},t.createElement("div",{style:{display:"flex",alignContent:"center",alignItems:(y.tq,""),flexDirection:"column",width:"100%"}},t.createElement("div",{style:{justifyContent:"left",display:"flex",flexDirection:y.tq?"column":"row"}},Je.filter(e=>"Formula"===e.data_type_name).map((e,l)=>{var o;let n=null!==(o=e.value)&&void 0!==o?o:0;return"Formula"===e.data_type_name&&(n=(0,s.LV)(e.options,xe,[],[],[])),xe.filter(l=>l.module_id===e.module_id).length>0?t.createElement("div",{key:l,className:fl.dashboardCard,style:{width:"100%",height:"auto",maxWidth:y.tq?"100%":"260px",borderRadius:"8px",border:"none",boxShadow:"0 5px 20px 0 rgba(0, 0, 0, 0.1)"},onClick:()=>{var l,o,t;(u.h.dispatch((0,a.IW)(!1)),u.h.dispatch((0,a.q4)((0,i.Z)((0,i.Z)({},e.procedure),{},{stepIndex:0,module_id:e.module_id,module:e.module}))),"countdateocc"===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.operator))?zl("/modules/".concat(e.module_id,"?key=").concat(e.options.list.length>0?e.options.list[0]:"Status","&value=").concat(b()((0,s.Ob)(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.searchtext)).format("DD MMM YYYY"))):zl("/modules/".concat(e.module_id,"?key=").concat(e.options.list.length>0?e.options.list[0]:"Status","&value=").concat(null!==(t=e.options.searchtext)&&void 0!==t?t:""))}},t.createElement("p",{style:{fontWeight:"bold",fontSize:y.tq?"10px":"16px"}},e.field_name),n):0==l&&t.createElement("div",{key:l})})),t.createElement("div",{style:{justifyContent:"left",display:"flex",flexDirection:y.tq?"column":"row",width:"100%"}},Je.filter(e=>"Chart"===e.data_type_name).map((e,l)=>{var o,n,d,a,r,v,u,c,p,m;let f=[],_=[];if(xe.filter(l=>l.module_id===e.module_id).filter(l=>{var o;const i=(null!==(o=null===l||void 0===l?void 0:l.component_fields)&&void 0!==o?o:[]).find(l=>l.field_name===e.options.key);i&&(_=[..._,i.value])}),"Donut"===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.orientation)||"Custom"===(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.orientation)){var g,h,b,x,E,C;const o=null!==(g=null===e||void 0===e||null===(h=e.options)||void 0===h?void 0:h.config)&&void 0!==g?g:s.HR;var w,M,S,k,Z;if(f=[...new Set(_)].map(l=>{var o,i,t,n,d,a;return"occurences"===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.operation)?_.filter(e=>e===l).length:"quantity"===(null===e||void 0===e||null===(i=e.options)||void 0===i?void 0:i.operation)?null!==e&&void 0!==e&&null!==(t=e.options)&&void 0!==t&&t.items?null===(d=yl.pipe(yl.pluck("component_items"),yl.flatten)(xe.filter(o=>o.module_id===e.module_id&&o.component_fields.find(o=>o.field_name===e.options.key&&o.value===l))).map(l=>{var o;return+l[null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.items[0]]}))||void 0===d?void 0:d.reduce((e,l)=>e+l,0):null!==e&&void 0!==e&&null!==(n=e.options)&&void 0!==n&&n.list?null===(a=yl.pipe(yl.pluck("component_fields"),yl.flatten)(xe.filter(o=>o.module_id===e.module_id&&o.component_fields.find(o=>o.field_name===e.options.key&&o.value===l))).map(l=>l.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.list[0])}).value))||void 0===a?void 0:a.reduce((e,l)=>e+ +l,0):0:void 0}),"Custom"===(null===e||void 0===e||null===(b=e.options)||void 0===b?void 0:b.orientation)&&"donut"===(null===o||void 0===o||null===(x=o.chart)||void 0===x?void 0:x.type))o.labels=[...new Set(_)],null!==o&&void 0!==o&&null!==(w=o.plotOptions)&&void 0!==w&&null!==(M=w.pie)&&void 0!==M&&null!==(S=M.donut)&&void 0!==S&&null!==(k=S.labels)&&void 0!==k&&null!==(Z=k.total)&&void 0!==Z&&Z.label||(o.plotOptions.pie.donut.labels.total.label=e.field_name);return t.createElement("div",{key:l,style:{alignItems:"center",justifyContent:"center",margin:"10px",display:f.length>0?"flex":"none",width:"100%",flexDirection:"column",borderRadius:"8px",border:"none",boxShadow:"0 5px 20px 0 rgba(0, 0, 0, 0.1)"}},t.createElement(_l.Z,{config:o,type:null===o||void 0===o||null===(E=o.chart)||void 0===E?void 0:E.type,orientation:null===e||void 0===e||null===(C=e.options)||void 0===C?void 0:C.orientation,series:f,title:y.tq?"":e.field_name,labels:y.tq?[]:[...new Set(_)]}))}if("Line"===(null===e||void 0===e||null===(d=e.options)||void 0===d?void 0:d.orientation))f=[{name:"Product One",data:[23,11]},{name:"Product Two",data:[30,25]}];else if("Column"===(null===e||void 0===e||null===(a=e.options)||void 0===a?void 0:a.orientation)){var I;f=[...new Set(null===e||void 0===e||null===(I=e.options)||void 0===I?void 0:I.labels)].map(l=>{var o,i,t,n;if("quantity"===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.operation))return null!==e&&void 0!==e&&null!==(i=e.options)&&void 0!==i&&i.items?{name:l,data:[44,55,41,67,22,43,65]}:null!==e&&void 0!==e&&null!==(t=e.options)&&void 0!==t&&t.list?null===(n=yl.pipe(yl.pluck("component_fields"),yl.flatten)(xe.filter(o=>o.module_id===e.module_id&&o.component_fields.find(o=>o.field_name===e.options.key&&o.value===l))).map(l=>l.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.list[0])}).value))||void 0===n?void 0:n.reduce((e,l)=>e+ +l,0):0})}else if("Bar"===(null===e||void 0===e||null===(r=e.options)||void 0===r?void 0:r.orientation)&&"latest"===(null===e||void 0===e||null===(v=e.options)||void 0===v?void 0:v.operation)){var N,D,T,P,O,A,z,L,R,U,F,W;const o=null!==(N=null===e||void 0===e||null===(D=e.options)||void 0===D?void 0:D.config)&&void 0!==N?N:s.AM,n=yl.sortWith([yl.descend(yl.prop("created_date"))])(xe).find(l=>l.module_id===e.module_id);return _=null===n||void 0===n||null===(T=n.component_items)||void 0===T?void 0:T.map(l=>{var o;return l[null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.labels[0]]}),f=[{data:null===n||void 0===n||null===(P=n.component_items)||void 0===P?void 0:P.map(l=>{var o;return l[null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.items[0]]}),name:""}],t.createElement("div",{key:l,style:{display:(null===(O=f)||void 0===O?void 0:O.length)>0&&(null===(A=f[0].data)||void 0===A?void 0:A.length)>0?"flex":"none",width:"auto",flexDirection:"column"}},t.createElement("p",{style:{fontSize:"18px",fontFamily:"var(--app-text-font-mobile)"}},null!==(z=null===(L=e.options)||void 0===L?void 0:L.notes)&&void 0!==z?z:e.field_name),t.createElement(_l.Z,{config:(0,i.Z)((0,i.Z)({},o),{},{xaxis:{categories:_}}),type:null===o||void 0===o||null===(R=o.chart)||void 0===R?void 0:R.type,orientation:null===e||void 0===e||null===(U=e.options)||void 0===U?void 0:U.orientation,series:f,title:y.tq?"":e.field_name,labels:y.tq?[]:[...new Set(_)],width:(null===(F=f)||void 0===F?void 0:F.length)>0?(null===(W=f[0].data)||void 0===W?void 0:W.length)<4?800:1e3:800,height:300}))}return t.createElement("div",{key:l,style:{alignItems:"center",justifyContent:"center",margin:"10px",width:"100%",maxWidth:"50vw",display:"flex",flexDirection:"row",borderRadius:"8px",border:"none",boxShadow:"0 5px 20px 0 rgba(0, 0, 0, 0.1)"}},t.createElement("p",{style:{fontSize:"18px",fontFamily:"var(--app-text-font-mobile)"}},null!==(u=null===(c=e.options)||void 0===c?void 0:c.notes)&&void 0!==u?u:e.field_name),"Line"===(null===e||void 0===e||null===(p=e.options)||void 0===p?void 0:p.orientation)&&t.createElement(Ae.Z,{series:f,categories:[]}),"Column"===(null===e||void 0===e||null===(m=e.options)||void 0===m?void 0:m.orientation)&&t.createElement(ze.Z,{series:f,categories:_}))}))))})()),(null===Ce||void 0===Ce||null===(B=Ce.processModule)||void 0===B?void 0:B.stepIndex)<2&&ll&&!Ye&&!He&&"inactive"!==(null===Ee||void 0===Ee?void 0:Ee.status)&&be.filter(e=>{var l;return!0===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.asMobileApp)}).length<3&&(()=>{const e=be.filter(e=>{var l;return!0===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.asMobileApp)});return t.createElement("div",{style:{width:"100%",minWidth:"360px",backgroundColor:"var(--app-color-gray-lightest)",flexDirection:"column",marginTop:"10px"}},t.createElement(re.tq,{slidesPerView:2,spaceBetween:0,initialSlide:0,pagination:{clickable:!0,dynamicBullets:!0},modules:[ae.pt,ae.tl],className:"mySwiper",loop:!0},e.map((e,l)=>{var o;return t.createElement(re.o5,{key:l},t.createElement("div",{style:{padding:"10px",userSelect:"none"}},t.createElement(Te.Z,{withBorder:!0,photo:null===(o=e.options)||void 0===o?void 0:o.background,height:"22vh",width:y.tq?"20vh":"",email:null===e||void 0===e?void 0:e.name,position:"",cardClicked:()=>{var l,o;const i=(null===ye||void 0===ye||null===(l=ye.positions)||void 0===l||null===(o=l.filter(l=>{var o,i;return(null===e||void 0===e||null===(o=e.options)||void 0===o||null===(i=o.processors)||void 0===i?void 0:i.indexOf(l.id))>-1}))||void 0===o?void 0:o.length)>0;Ol(i),Ul(be,e,i),ol(!0),Be(!1),je(!1)}})))})))})(null!==(H=null===Ce||void 0===Ce||null===(j=Ce.processModule)||void 0===j?void 0:j.module)&&void 0!==H||(null===be||void 0===be||be.find(e=>{var l;return!0===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.asMobileApp)}))),!(Ye||He)&&t.createElement("div",{className:fl.host,style:{display:"inactive"===Ee.status?"none":"",width:"100%"}},t.createElement("div",{className:fl.dashboardPanel,style:{margin:"0px 0 0 0"}},(null===Ce||void 0===Ce||null===(V=Ce.processModule)||void 0===V?void 0:V.stepIndex)<2&&t.createElement("div",{style:{width:"100%",display:"flex",textAlign:"left",borderBottom:"1px solid black",margin:"30px 0"}},t.createElement("div",{style:{fontFamily:"var(--app-text-font-mobile), serif",fontSize:"24px",width:"100%",padding:"10px 0 10px 20px"}},null===Ce||void 0===Ce||null===(G=Ce.processModule.module)||void 0===G||null===(J=G.name)||void 0===J?void 0:J.toUpperCase()),t.createElement(d.Z,{clear:!0,clicked:()=>{Pe(!0);const e=be.find(e=>e.id===Ce.processModule.module_id);ke.componentsByModule[e.name]=0,(0,m.vC)(e,s.Qc,1e3,1).pipe((0,c.q)(1)).subscribe({next:l=>{var o;const i=null!==l&&void 0!==l&&l.data?null===l||void 0===l?void 0:l.data:l;u.h.dispatch((0,a.mK)(yl.sortBy(yl.prop("created_date"),[...xe.filter(e=>e.module_id!==Ce.processModule.module_id),...i]),s.KI)),Pe(!1),e.lastUpdate=(0,h.now)(),e.count=null!==(o=null===l||void 0===l?void 0:l.total)&&void 0!==o?o:0},complete:()=>{},error:()=>Pe(!1)})},icon:t.createElement("img",{src:Z.Fd}),loading:De})),(void 0==(null===Ce||void 0===Ce||null===(Q=Ce.processModule)||void 0===Q?void 0:Q.stepIndex)||(null===Ce||void 0===Ce||null===(K=Ce.processModule)||void 0===K?void 0:K.stepIndex)<2)&&be.length>0&&!Ye&&!He&&ll&&"inactive"!==(null===Ee||void 0===Ee?void 0:Ee.status)&&(e=>{const l=e?(e=>yl.sortWith([yl.descend(yl.prop("created_date"))])(xe.filter(l=>l.module_id===e.id)).filter(e=>"None"===(null===e||void 0===e?void 0:e.status)).filter(l=>{var o,i,t,n;return!((null===(o=e.options)||void 0===o?void 0:o.activeFor)>0&&b()((0,h.now)()).diff(b()(l.created_date),"minutes")>+(null===(i=e.options)||void 0===i?void 0:i.activeFor))||!("New"===l.status||"Unassigned"===l.status)||(null===(t=l.assigned_to)||void 0===t?void 0:t.id)||(null===l||void 0===l||null===(n=l.payments)||void 0===n?void 0:n.id)}).map((l,o)=>{var i,n,a,r,v,s;const u=null!==(i=null===(n=Ce.processModule.completeSteps[0].component_blueprints)||void 0===n||null===(a=n.find(e=>{var l,o,i;return 1==e.options.asModuleList&&(_e.positions.filter(l=>{var o,i;return null===(o=e.options)||void 0===o||null===(i=o.showOnly)||void 0===i?void 0:i.includes(l.id)}).length>0||0==(null===(l=e.options)||void 0===l||null===(o=l.showOnly)||void 0===o?void 0:o.length)||void 0===(null===(i=e.options)||void 0===i?void 0:i.showOnly))}))||void 0===a||null===(r=a.selected_fields)||void 0===r?void 0:r.map(e=>e.field_name))&&void 0!==i?i:[],c=null===l||void 0===l||null===(v=l.component_fields.find(e=>"Link"===e.data_type_name&&(null===e||void 0===e?void 0:e.value)))||void 0===v?void 0:v.value;return t.createElement("div",{key:o,style:{display:"flex",flexDirection:"column",border:"0.6px solid var(--app-color-gray-lighter)",fontWeight:"normal",alignItems:"flex-start",padding:"30px 5px",height:"500px",userSelect:"none"},"app-color-variant":"".concat(o%5+1),onClick:()=>{hl(he,Re,Xe,Ee,l,Tl,_e,Ce,ye,be,qe,Se,e)}},t.createElement("img",{alt:"lg",src:null!==c&&void 0!==c?c:null===(s=Ee.company_standards)||void 0===s?void 0:s.hbanner,style:{objectFit:"cover",height:"300px",width:"100%"}}),t.createElement("div",{style:{width:"100%",fontFamily:"Montserrat, serif",textAlign:"left",height:"100px"}},u.map((e,o)=>{const i=null===l||void 0===l?void 0:l.component_fields.find(l=>l.field_name===e);var n;return"Positions"===(null===i||void 0===i?void 0:i.data_type_name)?t.createElement("div",{key:o,style:{fontSize:0==o?"15px":"14px",fontWeight:0==o?"bold":""}},"".concat(null===(n=Ie.find(e=>(null===e||void 0===e?void 0:e.value)===(null===i||void 0===i?void 0:i.value)))||void 0===n?void 0:n.label)):t.createElement("div",{key:o,style:{width:0==o?"90%":"100%",fontSize:"14px",fontWeight:0==o?"bold":"",margin:"2px 0",fontFamily:"Montserrat, serif"}},0==o?null===i||void 0===i?void 0:i.value.toUpperCase():null===i||void 0===i?void 0:i.value)}),t.createElement("div",{style:{fontSize:"14px",fontWeight:"",width:"100%"}},null===e||void 0===e?void 0:e.name)),t.createElement("br",null),t.createElement(d.Z,{title:"MORE INFO",style:{backgroundColor:"green",margin:"auto",width:"90%"},clicked:()=>{}}))}))(e):[],o=e?(e=>{const l=yl.sortWith([yl.descend(yl.prop("created_date"))])(xe.filter(l=>l.module_id===e.id)).filter(e=>!("Closed"===(null===e||void 0===e?void 0:e.status)||"Cancelled"===(null===e||void 0===e?void 0:e.status)||"Expired"===(null===e||void 0===e?void 0:e.status)||"None"===(null===e||void 0===e?void 0:e.status))).filter(l=>{var o,i,t,n;return!((null===(o=e.options)||void 0===o?void 0:o.activeFor)>0&&b()((0,h.now)()).diff(b()(l.created_date),"minutes")>+(null===(i=e.options)||void 0===i?void 0:i.activeFor))||!("New"===l.status||"Reopen"===l.status||"Unassigned"===l.status)||(null===(t=l.assigned_to)||void 0===t?void 0:t.id)||(null===l||void 0===l||null===(n=l.payments)||void 0===n?void 0:n.id)});return l.map((o,i)=>t.createElement("div",{key:i,className:fl.componentCard,style:{display:"flex",border:"0.6px solid var(--app-color-gray-lighter)",borderRadius:l.length>0?"":"0px",fontWeight:"normal",padding:"20px 10px",height:"160px",userSelect:"none",margin:l.length>2?"":"0 2px",minWidth:"100px"},"app-color-variant":"".concat(i%5+1),onClick:()=>{hl(he,Re,Xe,Ee,o,Tl,_e,Ce,ye,be,qe,Se,e)}},t.createElement("div",{style:{width:"100%",fontFamily:"var(--app-text-mobile-font)",textAlign:"left"}},t.createElement("div",{style:{width:"90%",fontSize:"14px",fontWeight:"bold"}},o.title.toUpperCase()),t.createElement("div",{style:{width:"100%",fontSize:"10px",fontWeight:"normal"}},"".concat(o.status)),t.createElement("div",{style:{fontSize:"10px",fontWeight:"bold",width:"100%"}},null===e||void 0===e?void 0:e.name))))})(e):[];return t.createElement("div",{className:fl.center,style:{display:(null===l||void 0===l?void 0:l.length)>1||(null===o||void 0===o?void 0:o.length)>1?"":"none",width:"100%",minWidth:"360px",backgroundColor:"var(--app-color-gray-lightest)",flexDirection:"column",margin:"10px 0"}},t.createElement(re.tq,{slidesPerView:2==(null===l||void 0===l?void 0:l.length)?1:2,centeredSlides:!0,spaceBetween:6,initialSlide:0,pagination:{clickable:!0,dynamicBullets:!0},modules:[ae.pt,ae.tl],className:"mySwiper",loop:2!=(null===l||void 0===l?void 0:l.length)},(null===l||void 0===l?void 0:l.length)>0&&l.map((e,l)=>t.createElement(re.o5,{key:l,className:fl.swiperslide},e)),(null===o||void 0===o?void 0:o.length)>0&&o.map((e,l)=>t.createElement(re.o5,{key:l,className:fl.swiperslide},e))))})(null!==(X=null===Ce||void 0===Ce||null===($=Ce.processModule)||void 0===$?void 0:$.module)&&void 0!==X?X:null===be||void 0===be?void 0:be.find(e=>{var l;return!0===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.asMobileApp)})),(null===Ce||void 0===Ce||null===(ee=Ce.processModule)||void 0===ee||null===(le=ee.steps)||void 0===le?void 0:le.length)>0&&we.length>0&&!We?t.createElement(rl,{isProcessorOnly:Pl,paymentID:Ll,navigateTo:$e,selectedComponent:null!==Le&&void 0!==Le?Le:{},setSelectedComponent:Re,selectedProcess:Ce.processModule,onCancel:()=>{Xe(!1),qe(!0),setTimeout(()=>qe(!1))}}):t.createElement(f.$j,{type:"BallTriangle",color:"black",height:40,width:"40px"}))),Ye&&t.createElement("div",{style:{width:"100%",padding:"0 10px"}},t.createElement(vl.default,null)),He&&t.createElement("div",{style:{width:"100%",padding:"0 10px"}},t.createElement(ql,null)),(void 0==(null===Ce||void 0===Ce||null===(oe=Ce.processModule)||void 0===oe?void 0:oe.stepIndex)||(null===Ce||void 0===Ce||null===(ie=Ce.processModule)||void 0===ie?void 0:ie.stepIndex)<2)&&be.length>0&&!("inactive"===(null===Ee||void 0===Ee?void 0:Ee.status)||null!==Le&&void 0!==Le&&Le.id||Ve||dl)&&t.createElement("div",{style:{display:"flex",position:"fixed",bottom:"0",width:"100%",zIndex:"9999"}},t.createElement(Fl,null)),dl&&t.createElement(f.U7,{hasCloseIcon:!0,isOpen:dl,onClose:()=>{al(!1),bl(-1)},backdropColor:!0,blured:!1,scrollable:!0,shadowedContainerStyle:{width:"100%"}},t.createElement("div",{className:fl.userPanelRows,style:{height:"auto",minHeight:"540px",marginTop:"20px",display:gl>0?"none":""}},t.createElement(vl.LabeledContainer,{label:"BILLING & PAYMENTS"}),t.createElement("div",{style:{borderBottom:"1px solid black",margin:"10px"}}),t.createElement("div",{className:fl.wallet},t.createElement("div",{style:{color:"white",fontSize:"14px"}},"Reward Points:"),t.createElement("div",{style:{color:"white",fontSize:"20px",fontWeight:"bold",margin:"5px 0 20px"}},null!==(te=null===ye||void 0===ye||null===(ve=ye.options)||void 0===ve||null===(se=ve.points)||void 0===se?void 0:se.toFixed(2))&&void 0!==te?te:"0.00"," Pts"),t.createElement("div",{style:{color:"white",fontSize:"14px"}},"Payments Wallet:"),t.createElement("div",{style:{color:"white",fontSize:"20px",fontWeight:"bold",margin:"5px 0 80px"}},"Php ",null!==(ue=null===_e||void 0===_e||null===(ce=_e.wallet)||void 0===ce?void 0:ce.toFixed(2))&&void 0!==ue?ue:"0.00"),t.createElement("div",{className:fl.actionsContainer},t.createElement(d.Z,{clear:!0,title:"Top Up",clicked:()=>bl(0),style:{backgroundColor:"var(--app-color-blue)",color:"white",width:"140px",display:gl>-1?"none":""}})),t.createElement("div",{style:{width:"inherit",display:-1===gl?"none":""}},t.createElement("div",{style:{color:"white"},onClick:()=>bl(-1)},"Select your denomination:"),t.createElement(d.Z,{light:!0,title:"Php 500.00",clicked:()=>bl(500),style:{width:"100%"}}),t.createElement(d.Z,{light:!0,title:"Php 1000.00",clicked:()=>bl(1e3),style:{width:"100%"}}),t.createElement(d.Z,{light:!0,title:"Php 2000.00",clicked:()=>bl(2e3),style:{width:"100%"}}),t.createElement(d.Z,{light:!0,title:"Php 3000.00",clicked:()=>bl(3e3),style:{width:"100%"}}))),t.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},t.createElement(d.Z,{loading:De,light:!0,titleStyle:{fontWeight:"normal"},title:Cl?"Hide":"Show Recent Payments",style:{marginRight:"40px"},clicked:()=>{Cl?wl(!1):(Pe(!0),(0,de.GP)().pipe((0,p.P)()).subscribe({next:e=>{Pe(!1),wl(!0),El(e.data)},error:()=>{}}))}})),t.createElement("div",{style:{display:Cl?"":"none",padding:"20px 0px",fontFamily:"var(--app-text-mobile-font)"}},t.createElement("p",{style:{fontFamily:"var(--app-text-mobile-font)",fontWeight:"bold"}},"Recent Payments:"),t.createElement("br",null),t.createElement("br",null),t.createElement(D.default,{title:"",card:!0,className:fl.listContainer,isReport:!1,"app-variant-is-mobile":"true",columns:["Date","ID","Source","Amount"],list:xl.map(e=>{var l,o;return{Date:"".concat(b()(e.starts_at).format("YY MMM DD h:mm a")),ID:"".concat(null===(l=e.stripe_id)||void 0===l?void 0:l.substring(0,15)),Source:"".concat(e.stripe_status),Amount:"".concat(null===(o=+e.stripe_price)||void 0===o?void 0:o.toFixed(2))}})}))),gl>0?t.createElement(ne.default,{label:" ",withBack:!1,paymentPath:"wallet",onClose:()=>al(!1),companyData:Ee,subscriptionInfo:{user_id:_e.id,ref:_e.id,plan_price:gl,currency:"PHP",description:"Credits",plan:"Wallet",total:gl,billable_users:[ye],duration:0,dlabel:"Flowhero",id:(0,s.mR)()},onError:()=>al(!1)}):t.createElement(t.Fragment,null,t.createElement("p",{style:{fontSize:"10px"}},""!==sl.lw?"Payments by":""),t.createElement("img",{src:"https://files.readme.io/7586db8-small-paymongo_api_white.png",style:{backgroundColor:"black",height:"30px",width:"140px"}}))),Ve&&t.createElement(nl,{modalVisible:Ve,heading:"Task for ".concat(null===Ce||void 0===Ce||null===(pe=Ce.processModule)||void 0===pe||null===(me=pe.module)||void 0===me?void 0:me.name),task:!0===Ve?{}:Ve,isProcess:!0,blured:!0,shadowedContainerStyle:{width:"100%"},onClose:()=>Ge(!1),isEdit:!0!==Ve,labels:{valueL:"Value"}}),Ue&&t.createElement(f.P9,{openModal:Ue,setOpenModal:Fe,slug:null===Ee||void 0===Ee?void 0:Ee.slug})))}),hl=(e,l,o,t,n,d,r,v,c,m,f,y,g)=>{(()=>{var h,b,x,E,C,w,M,S,k,Z,I,N,D,T,P,O,A,z,L,R,U,F,W,q,Y,B,H,j,V,G;const J=e.find(e=>e.id===g.procedure.id);l(n),o(!0),t.start=!0;let Q=[];(null===J||void 0===J||null===(h=J.steps)||void 0===h?void 0:h.length)>0&&(null===J||void 0===J||null===(b=J.steps)||void 0===b||b.filter(e=>{var l;return null===e||void 0===e||null===(l=e.component_blueprints)||void 0===l?void 0:l.filter(e=>e.selected_fields.filter(e=>e.value=void 0))})),yl.uniqWith(yl.eqProps("group"))(null===n||void 0===n?void 0:n.component_fields).map(e=>{Q=[...Q,{id:e.component_blueprint_id,temp_id:e.id,selected_fields:yl.filter(yl.propEq("group",e.group))(null===n||void 0===n?void 0:n.component_fields)}]}),J.steps.filter(e=>{e.component_blueprints.filter(e=>{e.selected_fields.filter(e=>{var l;const o=null===n||void 0===n||null===(l=n.component_fields)||void 0===l?void 0:l.find(l=>l.field_name===e.field_name);if(void 0!=o)e.value=o.value,e.group=o.group;else if("Record"===e.data_type_name){var i;const l=null===n||void 0===n||null===(i=n.component_fields)||void 0===i?void 0:i.find(l=>l.field_name===e.options.name);void 0!=l&&(e.value=l.value,e.group=l.group)}})})}),d({action:_._U.setComponents,value:Q}),d({action:_._U.setModuleItems,value:JSON.parse(JSON.stringify(n.component_items))});const K=J.steps.filter(e=>{var l,o,i,t,n,d;return void 0==(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.showStepAll)||1==(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.showStepAll)||0==(null===e||void 0===e||null===(i=e.options)||void 0===i?void 0:i.showStepAll)&&(null===e||void 0===e||null===(t=e.options)||void 0===t||null===(n=t.showOnly)||void 0===n?void 0:n.filter(e=>r.positions.map(e=>e.id).indexOf(e)>-1).length)>0||(null===e||void 0===e||null===(d=e.options)||void 0===d?void 0:d.showStepAuthor)&&(null===r||void 0===r?void 0:r.id)===(null===J||void 0===J?void 0:J.user_id)}).map((e,l)=>(0,i.Z)((0,i.Z)({},e),{},{rank:l+1})),X=(null===v||void 0===v||null===(x=v.processModule)||void 0===x||null===(E=x.steps)||void 0===E?void 0:E.length)>0?null===v||void 0===v||null===(C=v.processModule)||void 0===C||null===(w=C.steps)||void 0===w||null===(M=w.find(e=>(null===e||void 0===e?void 0:e.component_blueprints.filter(e=>e.selected_fields.filter(e=>"Status"===e.data_type_name).length>0).length)>0))||void 0===M||null===(S=M.component_blueprints)||void 0===S||null===(k=S.find(e=>e.selected_fields.filter(e=>"Status"===e.data_type_name).length>0))||void 0===k||null===(Z=k.options)||void 0===Z?void 0:Z.showOnly:[],$=(null===v||void 0===v||null===(I=v.processModule)||void 0===I||null===(N=I.steps)||void 0===N?void 0:N.length)>0?null===v||void 0===v||null===(D=v.processModule)||void 0===D||null===(T=D.steps)||void 0===T||null===(P=T.find(e=>(null===e||void 0===e?void 0:e.component_blueprints.filter(e=>e.selected_fields.filter(e=>"Action Button"===e.data_type_name).length>0).length)>0))||void 0===P||null===(O=P.component_blueprints.find(e=>{var l;return(null===(l=e.selected_fields.filter(e=>"Action Button"===e.data_type_name))||void 0===l?void 0:l.length)>0}))||void 0===O||null===(A=O.options)||void 0===A?void 0:A.showOnly:[],ee=void 0===n.status&&((null===c||void 0===c?void 0:c.id)===(null===J||void 0===J?void 0:J.user_id)||(null===X||void 0===X?void 0:X.filter(e=>{var l;return(null===r||void 0===r||null===(l=r.positions)||void 0===l?void 0:l.map(e=>e.id).indexOf(e))>-1}).length)>0)||(void 0===n.status||"New"===n.status||"None"===n.status)&&(null===n||void 0===n||null===(z=n.created_by)||void 0===z?void 0:z.id)===(null===r||void 0===r?void 0:r.id)||void 0!==n.status&&!("Closed"===n.status||n.status===(null!==(L=null===(R=v.processModule)||void 0===R||null===(U=R.module)||void 0===U||null===(F=U.options)||void 0===F?void 0:F.lock)&&void 0!==L?L:null===t||void 0===t||null===(W=t.misc_info)||void 0===W?void 0:W.lock))&&(null===X||void 0===X?void 0:X.filter(e=>{var l;return(null===r||void 0===r||null===(l=r.positions)||void 0===l?void 0:l.map(e=>e.id).indexOf(e))>-1}).length)>0&&(1!=(null===m||void 0===m||null===(q=m.find(e=>e.id===n.module_id))||void 0===q||null===(Y=q.options)||void 0===Y?void 0:Y.strict)||(null===n||void 0===n||null===(B=n.created_by)||void 0===B?void 0:B.id)!==(null===c||void 0===c?void 0:c.id))||!1===(null===n||void 0===n?void 0:n.is_complete)&&(null===n||void 0===n||null===(H=n.created_by)||void 0===H?void 0:H.id)===(null===c||void 0===c?void 0:c.id),le=(0,s.cQ)(n.status,$,n,c,v,t),oe=null!==(j=null===n||void 0===n||null===(V=n.component_fields.find(e=>"Action Button"===e.data_type_name))||void 0===V?void 0:V.value)&&void 0!==j?j:"";var ie,te,ne;(u.h.dispatch((0,a.q4)((0,i.Z)((0,i.Z)({},J),{},{completeSteps:J.steps,steps:K,stepIndex:1==ee&&n.created_by.id===r.id&&oe||(!ee||n.created_by.id!==r.id&&J.user_id!==r.id)&&(!le||oe!==r.id&&J.user_id!==r.id)?0:1,canEdit:!(1==ee&&n.created_by.id===r.id&&oe||(!ee||n.created_by.id!==r.id&&J.user_id!==r.id)&&(!le||oe!==r.id&&J.user_id!==r.id)),status:n.status,back_array:K.length>0?[K[0].id]:[],module_id:n.module_id,module:null===m||void 0===m?void 0:m.find(e=>e.id===n.module_id),isUpdating:!0,selectedComponent:n,showDetail:!0}))),f(!0),null!==n&&void 0!==n&&null!==(G=n.assigned_to)&&void 0!==G&&G.id&&!y.find(e=>{var l;return e.id===(null===n||void 0===n||null===(l=n.assigned_to)||void 0===l?void 0:l.id)}))?(0,ge.VG)(y.find(e=>{var l;return e.id===(null===(l=n.created_by)||void 0===l?void 0:l.id)})?[null===n||void 0===n||null===(ie=n.assigned_to)||void 0===ie?void 0:ie.id]:[null===n||void 0===n||null===(te=n.assigned_to)||void 0===te?void 0:te.id,null===n||void 0===n||null===(ne=n.created_by)||void 0===ne?void 0:ne.id]).pipe((0,p.P)()).subscribe({next:e=>{u.h.dispatch((0,a.NY)(y.concat(e))),setTimeout(()=>{f(!1)})}}):setTimeout(()=>{f(!1)})})()}},51330:(e,l,o)=>{"use strict";o.d(l,{Z:()=>g});var i=o(1413),t=o(67861),n=o(48963),d=o(47144),a=o.n(d),r=o(27436),v=o(48929),s=o(88550),u=o(71600),c=o(49465),p=o(12075),m=o(52902),f=o(73500),_=o(50981),y=o.n(_);const g=e=>{var l,o,d,_,g,h,b,x,E,C,w,M,S,k,Z,I,N,D,T,P,O,A,z,L,R,U,F,W,q,Y;const{component:B,blueprintIndex:H,nextButtonClicked:j,setIsMandatoryError:V,authenticatedUser:G,begunModule:J,selectedComponent:Q,editMode:K,shouldDisplay:X=(!1===(null===B||void 0===B||null===(l=B.options)||void 0===l?void 0:l.useCustomTemplate)||void 0===(null===B||void 0===B||null===(o=B.options)||void 0===o?void 0:o.useCustomTemplate))&&(null!==B&&void 0!==B&&null!==(d=B.options)&&void 0!==d&&d.statusOnly?(null===B||void 0===B||null===(_=B.options)||void 0===_?void 0:_.statusOnly)===(null===Q||void 0===Q?void 0:Q.status):void 0===(null===B||void 0===B||null===(g=B.options)||void 0===g?void 0:g.showOnly)||(!((null===B||void 0===B||null===(h=B.options)||void 0===h||null===(b=h.showOnly)||void 0===b?void 0:b.length)>0)||(null===B||void 0===B||null===(x=B.options)||void 0===x||null===(E=x.showOnly)||void 0===E?void 0:E.filter(e=>{var l;return(null===G||void 0===G||null===(l=G.positions)||void 0===l?void 0:l.filter(l=>l.id===e).length)>0}).length)>0)),isEnabled:$=void 0===(null===Q||void 0===Q?void 0:Q.id)||(!((null===Q||void 0===Q||null===(C=Q.created_by)||void 0===C?void 0:C.id)!==G.id||!("New"===Q.status||void 0===(null===B||void 0===B||null===(w=B.options)||void 0===w?void 0:w.showOnly)||null!==B&&void 0!==B&&null!==(M=B.options)&&void 0!==M&&M.showOnly&&(null===B||void 0===B||null===(S=B.options)||void 0===S||null===(k=S.showOnly)||void 0===k?void 0:k.filter(e=>{var l;return(null===G||void 0===G||null===(l=G.positions)||void 0===l?void 0:l.filter(l=>l.id===e).length)>0}).length)>0&&null!==J&&void 0!==J&&null!==(Z=J.processModule)&&void 0!==Z&&null!==(I=Z.module)&&void 0!==I&&null!==(N=I.options)&&void 0!==N&&N.strict))||(void 0===(null===J||void 0===J||null===(D=J.processModule)||void 0===D||null===(T=D.module)||void 0===T||null===(P=T.options)||void 0===P?void 0:P.strict)||0==(null===J||void 0===J||null===(O=J.processModule)||void 0===O||null===(A=O.module)||void 0===A||null===(z=A.options)||void 0===z?void 0:z.strict)||void 0!==(null===B||void 0===B||null===(L=B.options)||void 0===L?void 0:L.showOnly)&&((null===B||void 0===B||null===(R=B.options)||void 0===R||null===(U=R.showOnly)||void 0===U?void 0:U.length)>0&&(null===B||void 0===B||null===(F=B.options)||void 0===F||null===(W=F.showOnly)||void 0===W?void 0:W.filter(e=>{var l;return(null===G||void 0===G||null===(l=G.positions)||void 0===l?void 0:l.filter(l=>l.id===e).length)>0}).length)>0))),hideTitle:ee=!1}=e,[le,oe]=(0,s.pQ)(),[ie]=(0,t.useState)(n.Z.active),[te,ne]=(0,t.useState)(!1),[de]=(0,t.useState)(""),[ae,re]=(0,t.useState)(y()()),ve=(0,t.useRef)(null),se=null===(q=le.currentStep)||void 0===q?void 0:q.component_blueprints.findIndex(e=>e.id===(null===B||void 0===B?void 0:B.id));(0,t.useEffect)(()=>{ue()},[j]),(0,t.useEffect)(()=>{var e;if(null!==B&&void 0!==B&&null!==(e=B.selected_fields)&&void 0!==e&&e.find(e=>"Clock"===e.data_type_name&&!0===e.visible)){const e=setInterval(()=>{re(y()())},1e3);return()=>{window.clearInterval(e)}}},[]);const ue=()=>{var e;null!==B&&void 0!==B&&null!==(e=B.selected_fields)&&void 0!==e&&e.some(e=>{var l;return!0===e.mandatory&&!0===e.visible&&"output"!==e.data_type&&(!e.value||(null===e||void 0===e||null===(l=e.value)||void 0===l?void 0:l.length)<1)})?V(!0):V(!1)},ce=(e,l)=>{var o,i,t;const n=[...null!==(o=null===(i=le.currentStep)||void 0===i?void 0:i.component_blueprints)&&void 0!==o?o:[]],d=null===(t=n[se])||void 0===t?void 0:t.selected_fields[l];"Number"===(null===d||void 0===d?void 0:d.data_type_name)?Number(+e)?d.value=e:""===e&&(d.value=""):null!==d&&void 0!==d&&d.data_type_name&&(d.value=e),null!==d&&void 0!==d&&d.value&&d.mandatory&&(d.errors=""),ue(),oe({action:s._U.setComponentBlueprints,value:n}),oe({action:s._U.setModuleNewStepComponents,value:n})},pe=(0,t.useCallback)((e,l,o)=>{var i,t,n;const d=[...null!==(i=null===(t=le.currentStep)||void 0===t?void 0:t.component_blueprints)&&void 0!==i?i:[]],a=null===(n=d[se])||void 0===n?void 0:n.selected_fields[l];a.options.country_code=null===e||void 0===e?void 0:e.countryCode,a.options.country_name=null===e||void 0===e?void 0:e.name,a.options.country_prefix="+".concat(null===e||void 0===e?void 0:e.dialCode),oe({action:s._U.setComponentBlueprints,value:d}),oe({action:s._U.setModuleNewStepComponents,value:d}),ce(o,l)},[le]),me=(0,t.useCallback)((e,l)=>{var o,i,t;const n=[...null!==(o=null===(i=le.currentStep)||void 0===i?void 0:i.component_blueprints)&&void 0!==o?o:[]],d=null===(t=n[se])||void 0===t?void 0:t.selected_fields[l];d.options.currency_type=null===e||void 0===e?void 0:e.label,d.options.currency_value=null===e||void 0===e?void 0:e.value,d.options.symbol=null===e||void 0===e?void 0:e.symbol,oe({action:s._U.setComponentBlueprints,value:n}),oe({action:s._U.setModuleNewStepComponents,value:n})},[le]);return t.createElement("div",{id:"accordion",className:n.Z.section,key:H,style:{display:X?"":"none",pointerEvents:$?"":"none"}},t.createElement("div",{className:a()(n.Z.accordionContainer,ie),"app-variant-has-error":de?"error":"",style:{border:f.tq?"0":"",padding:f.tq?"0":"",margin:f.tq?"0":""}},!ee&&t.createElement("p",{className:f.tq?n.Z.titleII:n.Z.title},null===B||void 0===B?void 0:B.name),t.createElement("div",{ref:ve,style:{maxHeight:ie===n.Z.active?"":"0px",display:"flex"},className:n.Z.content},t.createElement(u.g,{component:B,selectedComponent:Q,handleInputChange:ce,handlePrefixChange:pe,handleCurrencyChange:me,checkIfAreMandatoryErrored:ue,handleCheckbox:(e,l)=>{var o,i,t;const n=[...null!==(o=null===(i=le.currentStep)||void 0===i?void 0:i.component_blueprints)&&void 0!==o?o:[]],d=null===(t=n[se])||void 0===t?void 0:t.selected_fields[l];d&&(d.value=e,null!==d&&void 0!==d&&d.value&&d.mandatory&&(d.errors=""),oe({action:s._U.setComponentBlueprints,value:n}),oe({action:s._U.setModuleNewStepComponents,value:n}),ue())},isInherited:!1,indexInContextArray:se,handleLocationChange:(e,l)=>{var o,i,t;const n=[...null!==(o=null===(i=le.currentStep)||void 0===i?void 0:i.component_blueprints)&&void 0!==o?o:[]];(null===(t=n[se])||void 0===t?void 0:t.selected_fields[l]).value="".concat(e.lat,", ").concat(e.lng),oe({action:s._U.setComponentBlueprints,value:n}),oe({action:s._U.setModuleNewStepComponents,value:n})},processTaskContext:le,setTaskProcessContext:oe,editMode:K,setShowEdit:ne,showEdit:te,clock:ae})),t.createElement("div",{style:{paddingLeft:"10px",display:"flex"}},te&&(null===te||void 0===te?void 0:te.item_code)&&t.createElement(v.zx,{light:!0,clicked:()=>{var e;const l={};B.selected_fields.map(e=>{var o,t,n;if("Formula"===e.data_type_name){var d,a,r;const o=(0,c.LV)(e.options,B.selected_fields.filter(l=>e.options.list.includes(l.field_name)),le.components,null!==(d=le.items)&&void 0!==d?d:[],null!==(a=null===le||void 0===le?void 0:le.newStepComponents)&&void 0!==a?a:[]);var v;if(null!==e&&void 0!==e&&null!==(r=e.options)&&void 0!==r&&r.mapToItem)l[null===e||void 0===e||null===(v=e.options)||void 0===v?void 0:v.mapToItem]="".concat(null!==o&&void 0!==o?o:"");return(0,i.Z)((0,i.Z)({},e),{},{value:"".concat(null!==o&&void 0!==o?o:"")})}null!==e&&void 0!==e&&null!==(o=e.options)&&void 0!==o&&o.mapToItem&&(l[null===e||void 0===e||null===(t=e.options)||void 0===t?void 0:t.mapToItem]="".concat(null!==(n=null===e||void 0===e?void 0:e.value)&&void 0!==n?n:""));return e});const o=null===(e=le.items)||void 0===e?void 0:e.find(e=>e.id===(null===te||void 0===te?void 0:te.id));oe(void 0===o?{action:s._U.addModuleItems,value:(0,i.Z)((0,i.Z)({},l),{},{id:(0,c.mR)()})}:{action:s._U.updateModuleItems,value:(0,i.Z)((0,i.Z)({},o),l)}),ne(!1),B.selected_fields.map((e,l)=>{ce("",l)})}},t.createElement(p.G,{icon:m.r6l,style:{width:"20px",height:"20px"}})),te&&!(null!==te&&void 0!==te&&te.item_code)&&t.createElement(v.zx,{clicked:()=>{oe({action:s._U.removeModuleComponents,value:te.temp_id}),ne(!1)}},t.createElement(p.G,{icon:m.$aW,style:{width:"20px",height:"20px"}})),te&&(null===te||void 0===te?void 0:te.item_code)&&t.createElement(v.zx,{light:!0,clicked:()=>{te.item_code&&(te.alt_value||te.quantity||te.total)?oe({action:s._U.removeModuleItems,value:te}):oe({action:s._U.removeModuleComponents,value:te.temp_id}),ne(!1),B.selected_fields.map((e,l)=>{ce("",l)})}},t.createElement(p.G,{icon:m.$aW,style:{width:"20px",height:"20px"}})))),de&&(null===de||void 0===de||null===(Y=de.errors)||void 0===Y?void 0:Y.title)&&t.createElement(r.Z,{message:de.errors.title}),de&&(null===de||void 0===de?void 0:de.message)&&t.createElement(r.Z,{message:de.message}))}},71600:(e,l,o)=>{"use strict";o.d(l,{g:()=>Dl});var i,t,n,d,a,r=o(87462),v=o(45987),s=o(1413),u=o(67861),c=o(48963),p=o(85692),m=o(79633),f=o(6073),_=o(94667),y=o(63864),g=o(75105),h=o(11577),b=o(10103),x=o(48929),E=o(66180),C=o.n(E),w=o(49465),M=o(88550),S=o(29960),k=o(86025),Z=o(39518),I=o(37390);const N=["title","titleId"];function D(){return D=Object.assign?Object.assign.bind():function(e){for(var l=1;l<arguments.length;l++){var o=arguments[l];for(var i in o)({}).hasOwnProperty.call(o,i)&&(e[i]=o[i])}return e},D.apply(null,arguments)}const T=(e,l)=>{let{title:o,titleId:r}=e,v=function(e,l){if(null==e)return{};var o,i,t=function(e,l){if(null==e)return{};var o={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==l.indexOf(i))continue;o[i]=e[i]}return o}(e,l);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(i=0;i<n.length;i++)o=n[i],-1===l.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(t[o]=e[o])}return t}(e,N);return u.createElement("svg",D({width:8,height:68,viewBox:"0 0 8 68",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:l,"aria-labelledby":r},v),o?u.createElement("title",{id:r},o):null,i||(i=u.createElement("circle",{cx:4,cy:4,r:3.5,fill:"white",stroke:"#0094FF"})),t||(t=u.createElement("circle",{cx:4,cy:29,r:1,fill:"#0094FF"})),n||(n=u.createElement("circle",{cx:4,cy:34,r:1,fill:"#0094FF"})),d||(d=u.createElement("circle",{cx:4,cy:39,r:1,fill:"#0094FF"})),a||(a=u.createElement("circle",{cx:4,cy:64,r:4,fill:"#0094FF"})))},P=(0,u.forwardRef)(T);o.p;var O,A;const z=["title","titleId"];function L(){return L=Object.assign?Object.assign.bind():function(e){for(var l=1;l<arguments.length;l++){var o=arguments[l];for(var i in o)({}).hasOwnProperty.call(o,i)&&(e[i]=o[i])}return e},L.apply(null,arguments)}const R=(e,l)=>{let{title:o,titleId:i}=e,t=function(e,l){if(null==e)return{};var o,i,t=function(e,l){if(null==e)return{};var o={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==l.indexOf(i))continue;o[i]=e[i]}return o}(e,l);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(i=0;i<n.length;i++)o=n[i],-1===l.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(t[o]=e[o])}return t}(e,z);return u.createElement("svg",L({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:l,"aria-labelledby":i},t),o?u.createElement("title",{id:i},o):null,O||(O=u.createElement("g",{clipPath:"url(#clip0_1648_5272)"},u.createElement("path",{d:"M18.92 6.01C18.72 5.42 18.16 5 17.5 5H6.5C5.84 5 5.29 5.42 5.08 6.01L3.11 11.68C3.04 11.89 3 12.11 3 12.34V19.5C3 20.33 3.67 21 4.5 21C5.33 21 6 20.33 6 19.5V19H18V19.5C18 20.32 18.67 21 19.5 21C20.32 21 21 20.33 21 19.5V12.34C21 12.12 20.96 11.89 20.89 11.68L18.92 6.01ZM6.5 16C5.67 16 5 15.33 5 14.5C5 13.67 5.67 13 6.5 13C7.33 13 8 13.67 8 14.5C8 15.33 7.33 16 6.5 16ZM17.5 16C16.67 16 16 15.33 16 14.5C16 13.67 16.67 13 17.5 13C18.33 13 19 13.67 19 14.5C19 15.33 18.33 16 17.5 16ZM5 11L6.27 7.18C6.41 6.78 6.79 6.5 7.22 6.5H16.78C17.21 6.5 17.59 6.78 17.73 7.18L19 11H5Z"}))),A||(A=u.createElement("defs",null,u.createElement("clipPath",{id:"clip0_1648_5272"},u.createElement("rect",{width:24,height:24,fill:"white"})))))},U=(0,u.forwardRef)(R);o.p;var F,W;const q=["title","titleId"];function Y(){return Y=Object.assign?Object.assign.bind():function(e){for(var l=1;l<arguments.length;l++){var o=arguments[l];for(var i in o)({}).hasOwnProperty.call(o,i)&&(e[i]=o[i])}return e},Y.apply(null,arguments)}const B=(e,l)=>{let{title:o,titleId:i}=e,t=function(e,l){if(null==e)return{};var o,i,t=function(e,l){if(null==e)return{};var o={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==l.indexOf(i))continue;o[i]=e[i]}return o}(e,l);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(i=0;i<n.length;i++)o=n[i],-1===l.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(t[o]=e[o])}return t}(e,q);return u.createElement("svg",Y({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:l,"aria-labelledby":i},t),o?u.createElement("title",{id:i},o):null,F||(F=u.createElement("g",{clipPath:"url(#clip0_1648_5275)"},u.createElement("path",{d:"M20 11C19.82 11 19.64 11.03 19.47 11.05L17.41 9H19C19.55 9 20 8.55 20 8V7.62C20 6.88 19.22 6.39 18.55 6.73L16.27 7.87L13.7 5.3C13.52 5.11 13.26 5 13 5H10C9.45 5 9 5.45 9 6C9 6.55 9.45 7 10 7H12.17C12.44 7 12.69 7.11 12.88 7.29L14.59 9H11.24C11.08 9 10.93 9.04 10.79 9.11L7.65 10.68C7.27 10.87 6.8 10.8 6.5 10.49L5.3 9.29C5.11 9.11 4.85 9 4.59 9H1C0.45 9 0 9.45 0 10C0 10.55 0.45 11 1 11H4C1.48 11 -0.49 13.32 0.11 15.94C0.44 17.39 1.61 18.56 3.06 18.89C5.68 19.49 8 17.52 8 15L9.41 16.41C9.79 16.79 10.3 17 10.83 17H11.84C12.56 17 13.22 16.62 13.58 15.99L16.49 10.9L17.5 11.91C16.37 12.82 15.74 14.32 16.12 15.96C16.46 17.4 17.63 18.57 19.07 18.9C21.68 19.49 24 17.51 24 15C24 12.79 22.21 11 20 11ZM4 17C2.9 17 2 16.1 2 15C2 13.9 2.9 13 4 13C5.1 13 6 13.9 6 15C6 16.1 5.1 17 4 17ZM20 17C18.9 17 18 16.1 18 15C18 13.9 18.9 13 20 13C21.1 13 22 13.9 22 15C22 16.1 21.1 17 20 17Z"}))),W||(W=u.createElement("defs",null,u.createElement("clipPath",{id:"clip0_1648_5275"},u.createElement("rect",{width:24,height:24,fill:"white"})))))},H=(0,u.forwardRef)(B);o.p;var j,V,G,J;const Q=["title","titleId"];function K(){return K=Object.assign?Object.assign.bind():function(e){for(var l=1;l<arguments.length;l++){var o=arguments[l];for(var i in o)({}).hasOwnProperty.call(o,i)&&(e[i]=o[i])}return e},K.apply(null,arguments)}const X=(e,l)=>{let{title:o,titleId:i}=e,t=function(e,l){if(null==e)return{};var o,i,t=function(e,l){if(null==e)return{};var o={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==l.indexOf(i))continue;o[i]=e[i]}return o}(e,l);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(i=0;i<n.length;i++)o=n[i],-1===l.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(t[o]=e[o])}return t}(e,Q);return u.createElement("svg",K({width:54,height:54,viewBox:"0 0 54 54",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:l,"aria-labelledby":i},t),o?u.createElement("title",{id:i},o):null,j||(j=u.createElement("circle",{opacity:.24,cx:27.3333,cy:27.3333,r:26.6667,fill:"#0094FF"})),V||(V=u.createElement("circle",{cx:27.3333,cy:27.3333,r:20,fill:"#0094FF",stroke:"white",strokeWidth:2.66667})),G||(G=u.createElement("g",{clipPath:"url(#clip0_1648_5266)"},u.createElement("path",{d:"M33.4845 22.0089C33.3067 21.4844 32.8089 21.1111 32.2222 21.1111H22.4445C21.8578 21.1111 21.3689 21.4844 21.1822 22.0089L19.4311 27.0489C19.3689 27.2356 19.3333 27.4311 19.3333 27.6356V34C19.3333 34.7378 19.9289 35.3333 20.6667 35.3333C21.4045 35.3333 22 34.7378 22 34V33.5556H32.6667V34C32.6667 34.7289 33.2622 35.3333 34 35.3333C34.7289 35.3333 35.3333 34.7378 35.3333 34V27.6356C35.3333 27.44 35.2978 27.2356 35.2356 27.0489L33.4845 22.0089ZM22.4445 30.8889C21.7067 30.8889 21.1111 30.2933 21.1111 29.5556C21.1111 28.8178 21.7067 28.2222 22.4445 28.2222C23.1822 28.2222 23.7778 28.8178 23.7778 29.5556C23.7778 30.2933 23.1822 30.8889 22.4445 30.8889ZM32.2222 30.8889C31.4845 30.8889 30.8889 30.2933 30.8889 29.5556C30.8889 28.8178 31.4845 28.2222 32.2222 28.2222C32.96 28.2222 33.5556 28.8178 33.5556 29.5556C33.5556 30.2933 32.96 30.8889 32.2222 30.8889ZM21.1111 26.4444L22.24 23.0489C22.3645 22.6933 22.7022 22.4444 23.0845 22.4444H31.5822C31.9645 22.4444 32.3022 22.6933 32.4267 23.0489L33.5556 26.4444H21.1111Z",fill:"white"}))),J||(J=u.createElement("defs",null,u.createElement("clipPath",{id:"clip0_1648_5266"},u.createElement("rect",{width:21.3333,height:21.3333,fill:"white",transform:"translate(16.6667 16.6667)"})))))},$=(0,u.forwardRef)(X);o.p;var ee,le,oe;const ie=["title","titleId"];function te(){return te=Object.assign?Object.assign.bind():function(e){for(var l=1;l<arguments.length;l++){var o=arguments[l];for(var i in o)({}).hasOwnProperty.call(o,i)&&(e[i]=o[i])}return e},te.apply(null,arguments)}const ne=(e,l)=>{let{title:o,titleId:i}=e,t=function(e,l){if(null==e)return{};var o,i,t=function(e,l){if(null==e)return{};var o={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==l.indexOf(i))continue;o[i]=e[i]}return o}(e,l);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(i=0;i<n.length;i++)o=n[i],-1===l.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(t[o]=e[o])}return t}(e,ie);return u.createElement("svg",te({width:51,height:51,viewBox:"0 0 51 51",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:l,"aria-labelledby":i},t),o?u.createElement("title",{id:i},o):null,ee||(ee=u.createElement("g",{filter:"url(#filter0_dd_1648_5267)"},u.createElement("circle",{cx:25.3333,cy:23.3333,r:21.3333,fill:"#0094FF"}),u.createElement("circle",{cx:25.3333,cy:23.3333,r:20,stroke:"white",strokeWidth:2.66667}))),le||(le=u.createElement("g",{clipPath:"url(#clip0_1648_5267)"},u.createElement("path",{d:"M27.1333 17.6667L26.92 16.6C26.84 16.1911 26.4755 15.8889 26.0489 15.8889H19.6667C19.1778 15.8889 18.7778 16.2889 18.7778 16.7778V30.1111C18.7778 30.6 19.1778 31 19.6667 31C20.1555 31 20.5555 30.6 20.5555 30.1111V24.7778H25.5333L25.7467 25.8445C25.8267 26.2622 26.1911 26.5556 26.6178 26.5556H31.2222C31.7111 26.5556 32.1111 26.1556 32.1111 25.6667V18.5556C32.1111 18.0667 31.7111 17.6667 31.2222 17.6667H27.1333Z",fill:"white"}))),oe||(oe=u.createElement("defs",null,u.createElement("filter",{id:"filter0_dd_1648_5267",x:0,y:0,width:50.6667,height:50.6667,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},u.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),u.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),u.createElement("feOffset",null),u.createElement("feGaussianBlur",{stdDeviation:.5}),u.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.24 0"}),u.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_1648_5267"}),u.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),u.createElement("feOffset",{dy:2}),u.createElement("feGaussianBlur",{stdDeviation:2}),u.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.04 0"}),u.createElement("feBlend",{mode:"normal",in2:"effect1_dropShadow_1648_5267",result:"effect2_dropShadow_1648_5267"}),u.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect2_dropShadow_1648_5267",result:"shape"})),u.createElement("clipPath",{id:"clip0_1648_5267"},u.createElement("rect",{width:21.3333,height:21.3333,fill:"white",transform:"translate(14.3333 12.3333)"})))))},de=(0,u.forwardRef)(ne),ae=(o.p,{ThreeDot:P,DRIVE:U,TWO_WHEELER:H,OriginMarker:$,DestinationMarker:de}),re=e=>{let{type:l,color:o,strokeColor:i,text:t,onClick:n}=e;const d=(0,u.useMemo)(()=>{const e=ae[l];return e?u.createElement(e,{style:{fill:o||void 0,stroke:i||void 0}}):null},[l,o]);return u.createElement("div",{className:"img-".concat(l),onClick:n},d,void 0!==t&&u.createElement("span",null,t))},ve=u.memo(re);var se=o(12075),ue=o(52902);const ce=e=>{let{style:l,position:o,active:i,onToggle:t,type:n}=e;return u.createElement(k._Q,{position:o,className:"marker ".concat(i?"active":""),zIndex:i?2:1,onClick:t},"Pin"===n?u.createElement(se.G,{icon:ue.opg,style:{color:"green",width:"30px",height:"30px"}}):"ThreeDot"===n||"DRIVE"===n||"TWO_WHEELER"===n||"OriginMarker"===n||"DestinationMarker"===n?u.createElement(ve,{type:n,style:l}):u.createElement("img",{alt:"lg",src:n,className:"customPin"}))},pe=["onClick","onDrag","onDragStart","onDragEnd","onMouseOver","onMouseOut","encodedPath"];const me=(0,u.forwardRef)((e,l)=>{const o=function(e){var l;const{onClick:o,onDrag:i,onDragStart:t,onDragEnd:n,onMouseOver:d,onMouseOut:a,encodedPath:r}=e,s=(0,v.Z)(e,pe),c=(0,u.useRef)({});Object.assign(c.current,{onClick:o,onDrag:i,onDragStart:t,onDragEnd:n,onMouseOver:d,onMouseOut:a});const p=(0,k.kY)("geometry"),m=(0,u.useRef)(new window.google.maps.Polyline).current;(0,u.useMemo)(()=>{m.setOptions(s)},[m,s]);const f=null===(l=(0,u.useContext)(k._Z))||void 0===l?void 0:l.map;return(0,u.useMemo)(()=>{if(!r||!p)return;const e=p.encoding.decodePath(r);m.setPath(e)},[m,r,p]),(0,u.useEffect)(()=>{if(f)return m.setMap(f),()=>{m.setMap(null)};void 0===f&&console.error("<Polyline> has to be inside a Map component.")},[f,m]),(0,u.useEffect)(()=>{if(!m)return;const e=window.google.maps.event;return[["click","onClick"],["drag","onDrag"],["dragstart","onDragStart"],["dragend","onDragEnd"],["mouseover","onMouseOver"],["mouseout","onMouseOut"]].forEach(l=>{let[o,i]=l;e.addListener(m,o,e=>{const l=c.current[i];l&&l(e)})}),()=>{e.clearInstanceListeners(m)}},[m]),m}(e);return(0,u.useImperativeHandle)(l,()=>o,[o]),null}),fe=e=>{if(!e)return"";const l=parseInt(e,10);if("s"===e.slice(-1)){const e=Math.floor(l/3600),o=Math.floor(l%3600/60),i=l%60;return e>=1?"".concat(e.toFixed(0)," hr")+" "+"".concat(o," min"):o>=1?"".concat(o.toFixed(0)," min")+" "+"".concat(i," sec"):"".concat(i," secs")}throw new Error('Invalid time unit. Only seconds ("s") are supported.')},_e=e=>{let{route:l,activeRoute:o,routeIndex:i,onClick:t}=e;const[n,d]=(0,u.useState)([]),a=(0,k.kY)("geometry");return(0,u.useEffect)(()=>{var e;if(null===l||void 0===l||null===(e=l.polyline)||void 0===e||!e.encodedPolyline||!a)return;const t=(n=l.polyline.encodedPolyline,a.encoding.decodePath(n).map(e=>({lat:e.lat(),lng:e.lng()})));var n;let r=l.travelAdvisory.speedReadingIntervals.length+2;const v=l.travelAdvisory.speedReadingIntervals.map(e=>{const l=t.slice(e.startPolylinePointIndex,e.endPolylinePointIndex+1);return{path:a.encoding.encodePath(l),options:{zIndex:100-i+r--,strokeColor:I.Gd[e.speed]||I.Gd.NORMAL,strokeOpacity:i===o?1:.5,strokeWeight:6}}});return d(v),()=>{d([])}},[l,a,i,o]),u.createElement(u.Fragment,null,n.map((e,o)=>u.createElement(me,(0,r.Z)({key:"p-".concat(o),onClick:e=>t(e,l,i),encodedPath:e.path},e.options))))},ye=u.memo(_e),ge=e=>{let{route:l,travelMode:o}=e;return u.createElement("div",{className:"polyline-info-window"},u.createElement("div",{className:"content"},u.createElement("div",{className:"title"},u.createElement(ve,{type:o,color:"#212121"}),u.createElement("b",null,fe(l.duration))),u.createElement("div",{className:"distanceMeters"},u.createElement("p",null,(l.distanceMeters/1e3).toFixed(2)," km"))))},he=e=>{let{map:l,stops:o}=e;return(0,u.useEffect)(()=>{if(l){if(o.length>0){const e=new window.google.maps.LatLngBounds;o.forEach(l=>{e.extend(new window.google.maps.LatLng(l.position.lat,l.position.lng))}),l.fitBounds(e)}1===o.length&&l.setZoom(14)}},[l,o]),null},be=u.memo(he),xe=e=>{let{origin:l,destination:o,travelMode:i,routes:t,currentLocation:n,pins:d=[],controls:a,zoom:r}=e;const v=(0,k.Sx)(),[c,p]=(0,u.useState)(null),[m,f]=(0,u.useState)(0),_=(0,u.useMemo)(()=>{let e=[];return null!==l&&void 0!==l&&l.position&&e.push(l),d&&(null===d||void 0===d||d.map(l=>e.push(l))),null!==o&&void 0!==o&&o.position&&e.push(o),e},[l,o,d]),y=(e,l,o)=>{const t={lat:e.latLng.lat(),lng:e.latLng.lng()};f(o),p({position:t,content:u.createElement(ge,{route:l,travelMode:i})})};return u.createElement(k.D5,{mapId:"FLOWHEROMAPS",defaultZoom:I.o0,defaultCenter:null!==n&&void 0!==n?n:I.k1,center:1===(null===d||void 0===d?void 0:d.length)?(0,s.Z)({},d[0].position):null,zoom:1===(null===d||void 0===d?void 0:d.length)?r:null,gestureHandling:"greedy",disableDefaultUI:!1},u.createElement(be,{map:v,stops:_}),l&&u.createElement(ce,{type:"OriginMarker",position:l.position}),o&&u.createElement(ce,{type:"DestinationMarker",position:o.position}),(null===d||void 0===d?void 0:d.length)>0&&(null===d||void 0===d?void 0:d.map((e,l)=>u.createElement(ce,{key:l,type:null!==e&&void 0!==e&&e.type?null===e||void 0===e?void 0:e.type:"Pin",position:e.position}))),(null===n||void 0===n?void 0:n.icon)&&u.createElement(ce,{type:null===n||void 0===n?void 0:n.icon,position:n}),t.map((e,l)=>u.createElement(ye,{key:"polyline-".concat(l),route:e,activeRoute:m,routeIndex:l,onClick:y})),c&&u.createElement(k.nx,{key:c.position.lat+","+c.position.lng,position:c.position,onCloseClick:()=>p(null)},c.content))},Ee=u.memo(xe),Ce=e=>{var l;const{controls:o,zoom:i}=e,{map:t,currentLocation:n}=(0,Z.v9)(e=>e.flowReducer),[d,a]=(0,u.useState)(n);return u.createElement(Ee,{origin:null===t||void 0===t?void 0:t.origin,destination:null===t||void 0===t?void 0:t.destination,travelMode:null===t||void 0===t?void 0:t.travelMode,routes:(null===t||void 0===t?void 0:t.routes[null===t||void 0===t?void 0:t.travelMode])||[],currentLocation:d,pins:null!==(l=null===t||void 0===t?void 0:t.pins)&&void 0!==l?l:[],controls:o,zoom:null===t||void 0===t?void 0:t.zoom})},we=e=>{let{onPlaceSelect:l}=e;const[o,i]=(0,u.useState)(null),t=(0,u.useRef)(null),n=(0,k.kY)("places");return(0,u.useEffect)(()=>{if(!n||!t.current)return;i(new n.Autocomplete(t.current,{fields:["place_id","geometry","name","formatted_address"]}))},[n]),(0,u.useEffect)(()=>{o&&o.addListener("place_changed",()=>{l(o.getPlace())})},[l,o]),u.createElement("div",{className:"autocomplete-container"},u.createElement("input",{ref:t}))},Me=e=>{let{routes:l,travelMode:o,onTravelModeChange:i,onOriginAddressChange:t,onDestinationAddressChange:n}=e;return u.createElement("div",{className:"search-box"},u.createElement("div",{className:"travel-mode-filter-btns"},I.jk.map(e=>{var t,n;const d=fe(null===(t=l[e])||void 0===t||null===(n=t[0])||void 0===n?void 0:n.duration);return u.createElement("button",{key:e,className:o===e?"active":"",onClick:()=>i(e)},u.createElement(ve,{type:e}),d&&u.createElement("span",null,d))})),u.createElement("div",{className:"input-address-group"},u.createElement(ve,{type:"ThreeDot"}),u.createElement(we,{onPlaceSelect:t}),u.createElement(we,{onPlaceSelect:n})))};var Se=o(11217),ke=o(88374);const Ze=()=>{const{map:e,companyData:l}=(0,Z.v9)(e=>e.flowReducer),o=(0,Z.I0)();(0,u.useEffect)(()=>{(async()=>{var i,t;if(null!==e&&void 0!==e&&e.origin&&null!==e&&void 0!==e&&e.destination&&null!==(i=Object.keys(null===e||void 0===e?void 0:e.origin))&&void 0!==i&&i.length&&null!==(t=Object.keys(null===e||void 0===e?void 0:e.destination))&&void 0!==t&&t.length)try{const i={};for(const o of I.jk){var n;const t=await(0,Se.s)({origin:{address:null===e||void 0===e?void 0:e.origin.formattedAddress},destination:{address:null===e||void 0===e?void 0:e.destination.formattedAddress},travelMode:o,routingPreference:"traffic_aware",extraComputations:["TRAFFIC_ON_POLYLINE"]},null===l||void 0===l||null===(n=l.misc_info)||void 0===n?void 0:n.map);i[o]=(null===t||void 0===t?void 0:t.routes)||[]}o((0,ke.wM)({routes:i}))}catch(d){o((0,ke.wM)({routes:[],error:"Failed to fetch directions"}))}})()},[null===e||void 0===e?void 0:e.origin,null===e||void 0===e?void 0:e.destination,o]);const i=(e,l)=>{o((0,ke.wM)({[e]:{name:l.name,formattedAddress:l.formatted_address,position:{lat:l.geometry.location.lat(),lng:l.geometry.location.lng()},place_id:l.place_id}}))};return u.createElement(Me,{travelMode:null===e||void 0===e?void 0:e.travelMode,routes:null===e||void 0===e?void 0:e.routes,onTravelModeChange:e=>o((0,ke.wM)({travelMode:e})),onOriginAddressChange:e=>i("origin",e),onDestinationAddressChange:e=>i("destination",e)})},Ie=e=>{const{search:l=!0,apikey:o="",controls:i=!0}=e;return u.createElement("div",{className:"GoogleMaps"},u.createElement(k.un,{apiKey:o},l&&u.createElement("div",{className:"control-pannel"},u.createElement(Ze,null)),u.createElement(Ce,{controls:i})))};var Ne=o(12308),De=o(9825),Te=o.n(De),Pe=o(4358),Oe=o(49523),Ae=o(25403),ze=o(4292),Le=o(32086),Re=o(68218),Ue=o(84634),Fe=o(97606),We=o(8284),qe=o(35606),Ye=o(79544),Be=o(98032),He=o(13397),je=o(3616),Ve=o(90421),Ge=o(7538),Je=o(77802),Qe=o(50981),Ke=o.n(Qe),Xe=o(91426),$e=o(60534),el=o(48630),ll=o(32588),ol=o(27426),il=o(27658),tl=o(34710),nl=o(44408),dl=o(23910),al=(o(56120),o(37704),o(72666),o(68623),o(3863),o(95361),o(52950)),rl=o(51481),vl=o(68635),sl=o.n(vl),ul=o(1542),cl=(o(31266),o(84952),o(30519)),pl=o(20089),ml=o(73500),fl=(o(68140),o(20777),o(58535)),_l=o(32562),yl=o(88827),gl=o(93389),hl=o(95007),bl=o(41131),xl=o(41756),El=o.n(xl),Cl=(o(16207),o(23280)),wl=o(81330),Ml=o.n(wl),Sl=o(84910);e=o.hmd(e);const kl=["height","start","onClick"],Zl=["height","start","onClick"],Il=["height","start","onClick"],Nl="30",Dl=(0,u.memo)(l=>{var o,i,t,n,d,a,E,k,I,N;const{component:D,selectedComponent:T,handleInputChange:P=()=>{},indexInContextArray:O=0,handleCheckbox:A=()=>{},processTaskContext:z,setTaskProcessContext:L,isInherited:R=!1,checkIfAreMandatoryErrored:U=()=>{},handlePrefixChange:F=()=>{},handleCurrencyChange:W=()=>{},handleLocationChange:q=()=>{},editMode:Y=!1,setShowEdit:B=()=>{},isDraft:H=!1,clock:j}=l,{authenticatedUser:V}=(0,Z.v9)(e=>e.authReducer),{currentLocation:G,allTasks:J,allModules:Q,blueprints:K,begunModule:X,components:$,companyData:ee,companyUsersArray:le,companyPositionsArray:oe,lastUpdates:ie,companyProcesses:te}=(0,Z.v9)(e=>e.flowReducer),[ne,de]=(0,u.useState)(!1),[ae,re]=(0,u.useState)(new Date),[ve,ce]=(0,u.useState)([new Date,new Date(Ke()().add(7,"days"))]),[pe,me]=ve,[fe,_e]=(0,u.useState)(""),[ye,ge]=(0,u.useState)([{label:"",value:""}]),[he,be]=(0,u.useState)(!0),[xe,Ee]=(0,u.useState)(!0),[Ce,we]=(0,u.useState)({source:!1,destination:!1}),[Me,Se]=(0,u.useState)("50px"),[Ze,De]=(0,u.useState)(Array(12).fill("")),[vl,xl]=(0,u.useState)({candidates:[]}),[wl,Dl]=(0,u.useState)(!1),[Al,zl]=(0,u.useState)({}),[Ll,Rl]=(0,u.useState)("day"),[Ul,Fl]=(0,u.useState)(),[Wl,ql]=(0,u.useState)(),Yl=(0,Cl.s0)(),Bl=(0,u.useRef)(),Hl=(0,u.useRef)(),[jl,Vl]=(0,u.useState)(le.map(e=>({label:e.first_name+" "+e.last_name,value:e.id,user:e}))),Gl=(e,l)=>{ce(e),P(e,l)},Jl=(e,l)=>{re(e),P(e,l)},Ql=(0,u.useCallback)(e=>{void 0!==e&&(0==jl.length?de(!0):de(!1),(0,g.n0)(e).pipe((0,h.P)()).subscribe({next:e=>{Vl(e),de(!1)}}))},[]),Kl=function(){var e;let l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.keys(l[0]),i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null===(e=X.processModule.module)||void 0===e?void 0:e.name;return u.createElement(x.zx,{light:!0,clicked:()=>{var e,t,n;const d=null===X||void 0===X||null===(e=X.processModule)||void 0===e||null===(t=e.steps)||void 0===t?void 0:t.find(e=>e.component_blueprints.filter(e=>{var l,o;return(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.allowMultipleInputs)&&(null===(o=e.selected_fields)||void 0===o?void 0:o.find(e=>"Transaction List"===e.data_type_name))}).length>0),a=null===d||void 0===d||null===(n=d.component_blueprints)||void 0===n?void 0:n.find(e=>{var l;return(null===(l=e.selected_fields)||void 0===l?void 0:l.filter(e=>"Transaction List"===e.data_type_name&&!0===e.visible).length)>0});if(a){var r,v,s,u;const e=null===X||void 0===X||null===(r=X.processModule)||void 0===r||null===(v=r.steps)||void 0===v||null===(s=v.find(e=>e.component_blueprints.filter(e=>{var l;return null===(l=e.selected_fields)||void 0===l?void 0:l.find(e=>"Template"===e.data_type_name)}).length>0))||void 0===s||null===(u=s.component_blueprints)||void 0===u?void 0:u.find(e=>{var l;return(null===(l=e.selected_fields)||void 0===l?void 0:l.filter(e=>"Template"===e.data_type_name&&!0===e.visible).length)>0});(0,bl._G)(T,a,e,o,l,X,i)}else{var c;const e=o,t=hl.utils.book_new(),n=hl.utils.json_to_sheet([]);hl.utils.sheet_add_json(n,l.map(l=>Object.assign({},...e.map(e=>({[e]:l[e]})))),{origin:"A2",skipHeader:!0}),hl.utils.book_append_sheet(t,n,"".concat(null===(c=X.processModule.module)||void 0===c?void 0:c.name)),(0,hl.writeFile)(t,"".concat(i).concat((0,Qe.now)(),".xlsx"))}},icon:u.createElement("img",{src:p.so})})},Xl=(0,u.useCallback)(e=>{var l;if(0==(null===e||void 0===e||null===(l=e.analyze)||void 0===l?void 0:l.length)||void 0==(null===e||void 0===e?void 0:e.analyze))return void xl({candidates:[{content:{parts:[{text:"Enter a question that I could answer"}]}}]});let o={role:"user",parts:[{text:e.analyze}]};1==(null===e||void 0===e?void 0:e.current)?o.parts=[...o.parts,{text:JSON.stringify({table:"Transaction",data:(0,s.Z)((0,s.Z)((0,s.Z)({},z.components.map(e=>{let l={};return e.selected_fields.filter(e=>l=(0,s.Z)((0,s.Z)({},l),{},{[e.field_name]:e.value})),l})),z.newStepComponents.map(e=>{let l={};return e.selected_fields.filter(e=>l=(0,s.Z)((0,s.Z)({},l),{},{[e.field_name]:e.value})),l})),{},{items:z.items.map(e=>({item:e.item_code,quantity:+e.quantity,value:e.value}))})})}]:(void 0!==e.module_id&&(o.parts=[...o.parts,{text:JSON.stringify({table:Q.find(l=>l.id===e.module_id).name,data:$.filter(l=>l.module_id===e.module_id).map(e=>{let l={};return e.component_fields.filter(e=>l=(0,s.Z)((0,s.Z)({},l),{},{[e.field_name]:e.value})),(0,s.Z)((0,s.Z)({},l),{},{created_date:e.created_date,created_by:e.created_by.id,items:null===e||void 0===e?void 0:e.component_items.map(e=>({item:e.item_code,quantity:+e.quantity,value:e.value}))})})})}]),void 0!==e.module2_id&&(o.parts=[...o.parts,{text:JSON.stringify({table:Q.find(l=>l.id===e.module2_id).name,data:$.filter(l=>l.module_id===e.module2_id).map(e=>{let l={};return e.component_fields.filter(e=>l=(0,s.Z)((0,s.Z)({},l),{},{[e.field_name]:e.value})),(0,s.Z)((0,s.Z)({},l),{},{created_date:e.created_date,created_by:e.created_by.id,items:null===e||void 0===e?void 0:e.component_items.map(e=>({item:e.item_code,quantity:+e.quantity,value:e.value}))})})})}]),void 0!==e.module3_id&&(o.parts=[...o.parts,{text:JSON.stringify({table:Q.find(l=>l.id===e.module3_id).name,data:$.filter(l=>l.module_id===e.module3_id).map(e=>{let l={};return e.component_fields.filter(e=>l=(0,s.Z)((0,s.Z)({},l),{},{[e.field_name]:e.value})),(0,s.Z)((0,s.Z)({},l),{},{created_date:e.created_date,created_by:e.created_by.id,items:null===e||void 0===e?void 0:e.component_items.map(e=>({item:e.item_code,quantity:+e.quantity,value:e.value}))})})})}])),xl({candidates:[]}),de(!0),(0,_.hd)(JSON.stringify(o)).pipe((0,h.P)()).subscribe({next:e=>{de(!1),xl(e)},error:e=>{xl({candidates:[{content:{parts:[{text:JSON.stringify(e)}]}}]}),de(!1)}})},[]),$l=e=>{const{field_name:l}=e;return D.selected_fields.findIndex(e=>e.field_name===l)},eo=e=>{const l=D.selected_fields.filter(e=>"Info"===e.data_type_name),o=$.find(l=>l.id===e);l.map(l=>{var i;null===l||void 0===l||null===(i=l.options)||void 0===i||i.list.map(i=>{var t,n;const d=null===(t=o.component_fields)||void 0===t?void 0:t.find(e=>e.field_name===i),a=$l({field_name:i});-1!=a&&(null===(n=o.component_fields)||void 0===n?void 0:n.length)>0&&(D.selected_fields[a].value=d?d.value:"",l.value=e)})});D.selected_fields.filter(e=>"Global"===e.data_type_name&&1==e.visible).map(e=>{var l,i;const t=null===(l=o.component_fields)||void 0===l?void 0:l.find(l=>l.field_name===e.field_name),n=$l({field_name:e.field_name});-1!=n&&(null===(i=o.component_fields)||void 0===i?void 0:i.length)>0&&t&&(D.selected_fields[n].value=null===t||void 0===t?void 0:t.value)})},lo=e=>{var l,o;if(!z)return;let i=null===(l=X.processModule.module)||void 0===l||null===(o=l.options)||void 0===o?void 0:o.global;var t,n,d,a,r,v,s;i||(i=null===z||void 0===z||null===(t=z.components.concat(null===z||void 0===z?void 0:z.newStepComponents).find(l=>l.selected_fields.filter(l=>{var o,i;return"Global"===l.data_type_name&&1==l.visible&&l.field_name===(null===(o=D.selected_fields.find(l=>l.data_type_name===e&&1==l.visible))||void 0===o||null===(i=o.options)||void 0===i?void 0:i.global)}).length>0))||void 0===t||null===(n=t.selected_fields.find(e=>"Global"===e.data_type_name))||void 0===n?void 0:n.value);i||(i=null===(d=Oe.Z(Ae.Z("component_blueprints"),ze.Z)(null!==(v=null===X||void 0===X||null===(s=X.processModule)||void 0===s?void 0:s.completeSteps)&&void 0!==v?v:[]).find(l=>l.selected_fields.filter(l=>{var o,i;return l.field_name===(null===(o=D.selected_fields.find(l=>l.data_type_name===e&&1==l.visible))||void 0===o||null===(i=o.options)||void 0===i?void 0:i.global)&&"Value"===l.data_type_name}).length>0))||void 0===d||null===(a=d.selected_fields.find(e=>"Value"===e.data_type_name))||void 0===a||null===(r=a.options)||void 0===r?void 0:r.value);return i?$.filter(l=>l.component_fields.filter(l=>{var o,t;return l.value===i&&l.field_name===(null===(o=D.selected_fields.find(l=>l.data_type_name===e))||void 0===o||null===(t=o.options)||void 0===t?void 0:t.global)}).length>0):$},oo=()=>{var l,o,i;null===(l=X.processModule.module)||void 0===l||null===(o=l.options)||void 0===o||null===(i=o.supporting)||void 0===i||i.filter((l,o)=>{var i,t,n;de(!0),(0,ul.vC)({id:l,name:null!==(i="".concat(null===Q||void 0===Q||null===(t=Q.find(e=>e.id===l))||void 0===t?void 0:t.name).concat(o))&&void 0!==i?i:"".concat(null===(n=e)||void 0===n?void 0:n.name).concat(o)},w.Qc,w.R6,1).pipe((0,b.q)(1)).subscribe({next:e=>{de(!1)}})})},io=e=>{var l,o,i,t,n,d,a,r,v,s,p,m,f,_,g,h,b,E,C,M,S,k,Z;const{field:I,enabled:N,index:T,isItem:L=!1,handleItem:F,withLabel:W=!0,edit:q=!0,item:Y}=e;var B,j,V,G,J,Q,K,X,le,oe,ie,te,de,re,ve,ce,fe,_e,ye,ge,he,be,xe,Ee,Ce,we,Me,Se,ke,Ze,Ie,Ne,De,Pe,Oe,Ae,ze,Re,Ue;if("Dropdown"===(null===I||void 0===I?void 0:I.data_type_name)&&(null===I||void 0===I||null===(l=I.options)||void 0===l||null===(o=l.list)||void 0===o?void 0:o.length)>0)return q?u.createElement("div",{style:{width:"100%",border:"1px solid var(--app-color-gray-light)"}},u.createElement(y.Z,{key:T,visible:I.visible,mandatory:I.mandatory,items:null===I||void 0===I||null===(B=I.options)||void 0===B?void 0:B.list.map(e=>({label:e,value:e})),className:c.Z.dropdownClassContainer,error:I.errors,onChange:e=>{L?F(e,T):A(e,T)},selectionType:null===I||void 0===I||null===(j=I.options)||void 0===j?void 0:j.type,max:+(null!==(V=null===I||void 0===I||null===(G=I.options)||void 0===G?void 0:G.max)&&void 0!==V?V:0),fieldIcon:I.icon,backgroundColor:null!==I&&void 0!==I&&null!==(J=I.options)&&void 0!==J&&J.valueC&&null!==I&&void 0!==I&&I.value?null===I||void 0===I||null===(Q=I.options)||void 0===Q?void 0:Q.valueC:"",value:void 0===I.value||null===I.value?"":I.value})):u.createElement("div",null,null===I||void 0===I?void 0:I.value);if("Radio"===(null===I||void 0===I?void 0:I.data_type_name)&&(null===I||void 0===I||null===(i=I.options)||void 0===i||null===(t=i.list)||void 0===t?void 0:t.length)>0)return u.createElement("div",{style:{width:"100%",border:"1px solid var(--app-color-gray-light)",padding:"20px",fontSize:"16px"}},null===I||void 0===I||null===(K=I.options)||void 0===K?void 0:K.list.map(e=>u.createElement(u.Fragment,null,u.createElement("input",{style:{margin:"0 10px"},type:"radio",id:e,name:I.field_name,value:e,checked:(null===I||void 0===I?void 0:I.value)===e,onChange:e=>{var l,o;L?F(null===(l=e.target)||void 0===l?void 0:l.value,T):A(null===(o=e.target)||void 0===o?void 0:o.value,T)}}),u.createElement("label",{for:e},e))));if("Checkbox"===(null===I||void 0===I?void 0:I.data_type_name))return q?u.createElement("input",{type:"checkbox",defaultChecked:null!==(X=I.value)&&void 0!==X&&X,onChange:e=>{L?F(e.target.checked,T):A(e.target.checked,T)}}):u.createElement("input",{type:"checkbox",checked:null!==(le=I.value)&&void 0!==le&&le,readOnly:!0});if("Formula"===(null===I||void 0===I?void 0:I.data_type_name)&&(null===I||void 0===I||null===(n=I.options)||void 0===n||null===(d=n.operator)||void 0===d?void 0:d.length)>0&&!1===H){var Fe,We,qe,Ye,Be;const e=z.newStepComponents.filter(e=>null===e.options||(void 0===e.allowMultipleInputs||!1===e.options.allowMultipleInputs)),l=(0,w.LV)(null===I||void 0===I?void 0:I.options,D.selected_fields.filter(e=>I.options.list.includes(e.field_name)&&!e.options.mapToItem),[...z.components.filter(l=>e.every(e=>e.id!==l.id)),...Le.Z(e=>e.selected_fields.filter(e=>""===(null===e||void 0===e?void 0:e.value)).length>0,e)],null!==(Fe=null===z||void 0===z?void 0:z.items)&&void 0!==Fe?Fe:[],null!==(We=null===z||void 0===z?void 0:z.newStepComponents)&&void 0!==We?We:[]);return void 0!==l&&(I.value=l),"bar"===(null===I||void 0===I||null===(qe=I.options)||void 0===qe?void 0:qe.display)?u.createElement("div",{style:{margin:"20px",display:"flex",height:"30px",width:"100%"}},u.createElement("label",{className:c.Z.fieldTypeInput,style:{width:"20%"}},null===I||void 0===I?void 0:I.field_name),u.createElement("div",{style:{height:"20px",width:"80%",backgroundColor:null===I||void 0===I||null===(Ye=I.options)||void 0===Ye?void 0:Ye.maxC,display:"flex",flexDirection:"column"}},u.createElement("input",{value:l||0,className:c.Z.fieldTypeInput,name:I.field_name,disabled:!0,style:{color:"transparent",height:"20px",width:"".concat(+l/+I.options.max*100,"%"),backgroundColor:null===I||void 0===I||null===(Be=I.options)||void 0===Be?void 0:Be.barC}}))):l||""}if("Item Formula"===(null===I||void 0===I?void 0:I.data_type_name)&&(null===I||void 0===I||null===(a=I.options)||void 0===a||null===(r=a.operator)||void 0===r?void 0:r.length)>0&&!1===H){var He,je,Ve;const e=(0,w.LV)(null===I||void 0===I?void 0:I.options,D.selected_fields.filter(e=>I.options.list.includes(e.field_name)&&e.options.mapToItem),[],[],Y,!0);return"bar"===(null===I||void 0===I||null===(He=I.options)||void 0===He?void 0:He.display)?u.createElement("div",{style:{margin:"20px",display:"flex",height:"30px",width:"100%"}},u.createElement("label",{className:c.Z.fieldTypeInput,style:{width:"20%"}},null===I||void 0===I?void 0:I.field_name),u.createElement("div",{style:{height:"20px",width:"100%",backgroundColor:null===I||void 0===I||null===(je=I.options)||void 0===je?void 0:je.maxC,display:"flex",flexDirection:"column"}},u.createElement("input",{value:e||0,className:c.Z.fieldTypeInput,name:I.field_name,disabled:!0,style:{color:"transparent",height:"20px",width:"".concat(+e/+I.options.max*100,"%"),backgroundColor:null===I||void 0===I||null===(Ve=I.options)||void 0===Ve?void 0:Ve.barC}}))):e||""}if("Record"===(null===I||void 0===I?void 0:I.data_type_name)&&(null===I||void 0===I||null===(v=I.options)||void 0===v||null===(s=v.component_id)||void 0===s?void 0:s.length)>0){var Ge,Je,Qe,Xe,$e,el,ll,ol,il,tl,nl;const e=(null!==I&&void 0!==I&&null!==(Ge=I.options)&&void 0!==Ge&&Ge.global?lo(null===I||void 0===I?void 0:I.data_type_name):$).filter(e=>{var l;return e.component_fields.filter(e=>{var l;return e.component_blueprint_id===(null===I||void 0===I||null===(l=I.options)||void 0===l?void 0:l.component_id)}).length>0||e.module_id===(null===I||void 0===I||null===(l=I.options)||void 0===l?void 0:l.module_id)}).map(e=>{var l,o,i,t;let n="";return null===I||void 0===I||null===(l=I.options)||void 0===l||null===(o=l.names)||void 0===o||o.map(l=>{var o,i;return n=""===n?null===(o=e.component_fields.find(e=>e.field_name===l))||void 0===o?void 0:o.value:"".concat(n," ").concat(null===(i=e.component_fields.find(e=>e.field_name===l))||void 0===i?void 0:i.value)}),{label:""===n?e.title:n,value:e.id,component:e,[null===I||void 0===I||null===(i=I.options)||void 0===i?void 0:i.output]:null===(t=e.component_fields.find(e=>{var l;return e.field_name===(null===I||void 0===I||null===(l=I.options)||void 0===l?void 0:l.output)}))||void 0===t?void 0:t.value}});let l;if(e.length>0)if(I.value){if(l=null===e||void 0===e?void 0:e.find(e=>{var l;return e[null===I||void 0===I||null===(l=I.options)||void 0===l?void 0:l.output]===I.value}),l){var dl,al;eo(l.value);const e=[...null!==(dl=null===(al=z.currentStep)||void 0===al?void 0:al.component_blueprints)&&void 0!==dl?dl:[]];e&&(z.newStepComponents=e)}}else if(1==e.length&&1==(null===I||void 0===I?void 0:I.mandatory)&&(l=e[0],l)){var rl,vl;eo(l.value);const e=[...null!==(rl=null===(vl=z.currentStep)||void 0===vl?void 0:vl.component_blueprints)&&void 0!==rl?rl:[]];e&&(z.newStepComponents=e)}return q?u.createElement("div",{style:{width:"inherit",border:"1px solid gray",minWidth:"300px"}},u.createElement(y.Z,{key:T,visible:null===I||void 0===I?void 0:I.visible,mandatory:null===I||void 0===I?void 0:I.mandatory,items:e,loading:ne,error:"",className:c.Z.dropdownClassContainer,onChange:l=>{var o,i,t,n,d,a;l&&(null===I||void 0===I||null===(d=I.options)||void 0===d||null===(a=d.list)||void 0===a||a.map(o=>{const i=$l({field_name:o});var t,n;-1!=i&&(D.selected_fields[i].value=null!==(t=null===(n=e.find(e=>e.value===l).component.component_fields.find(e=>e.field_name===o))||void 0===n?void 0:n.value)&&void 0!==t?t:"",D.selected_fields[i].disabled=!0)}));ee.start=!0,eo(l),L?F(null!==(o=null===e||void 0===e?void 0:e.find(e=>e.value===l)[null===I||void 0===I||null===(i=I.options)||void 0===i?void 0:i.output])&&void 0!==o?o:null,T):A(null!==(t=null===e||void 0===e?void 0:e.find(e=>e.value===l)[null===I||void 0===I||null===(n=I.options)||void 0===n?void 0:n.output])&&void 0!==t?t:null,T)},selectionType:(null===I||void 0===I||null===(Je=I.options)||void 0===Je?void 0:Je.selection.length)>0?null===I||void 0===I||null===(Qe=I.options)||void 0===Qe?void 0:Qe.selection:null===I||void 0===I||null===(Xe=I.options)||void 0===Xe?void 0:Xe.type,backgroundColor:null!==I&&void 0!==I&&null!==($e=I.options)&&void 0!==$e&&$e.valueC&&null!==I&&void 0!==I&&I.value?null===I||void 0===I||null===(el=I.options)||void 0===el?void 0:el.valueC:"",value:null!==(ll=null===(ol=l)||void 0===ol?void 0:ol.label)&&void 0!==ll?ll:""})):u.createElement("div",{style:{backgroundColor:null!==I&&void 0!==I&&null!==(il=I.options)&&void 0!==il&&il.valueC?null===I||void 0===I||null===(tl=I.options)||void 0===tl?void 0:tl.valueC:""}},null===(nl=l)||void 0===nl?void 0:nl.label)}if("People"===(null===I||void 0===I?void 0:I.data_type_name)&&(null===I||void 0===I||null===(p=I.options)||void 0===p||null===(m=p.position_id)||void 0===m?void 0:m.length)>0){var sl,ul,cl,pl,ml,fl;const e=jl.find(e=>e.label===(null===I||void 0===I?void 0:I.value));return u.createElement("div",{style:{display:"flex",justifyContent:"center"}},q&&u.createElement("div",{style:{width:"300px",border:"1px solid var(--app-color-gray-light)",height:"38px"}},u.createElement(y.Z,{onFocus:()=>{var e;return 0==jl.length&&Ql(null===I||void 0===I||null===(e=I.options)||void 0===e?void 0:e.position_id)},visible:!0,mandatory:null===I||void 0===I?void 0:I.mandatory,className:c.Z.dropdownClassContainer,items:jl.filter(e=>{var l,o;return(null===e||void 0===e||null===(l=e.user)||void 0===l||null===(o=l.positions)||void 0===o?void 0:o.filter(e=>{var l,o;return null===I||void 0===I||null===(l=I.options)||void 0===l||null===(o=l.position_id)||void 0===o?void 0:o.includes(null===e||void 0===e?void 0:e.id)}).length)>0}),value:"single"===(null===I||void 0===I||null===(sl=I.options)||void 0===sl?void 0:sl.type)?null===(ul=jl.find(e=>{var l,o;return e.label===(null!==I&&void 0!==I&&null!==(l=I.options)&&void 0!==l&&l.mapToItem?null===I||void 0===I?void 0:I.value:null===(o=D.selected_fields[T])||void 0===o?void 0:o.value)}))||void 0===ul?void 0:ul.label:null!==I&&void 0!==I&&null!==(cl=I.options)&&void 0!==cl&&cl.mapToItem?null===I||void 0===I?void 0:I.value:null===(pl=D.selected_fields[T])||void 0===pl?void 0:pl.value,loading:ne,error:null===I||void 0===I?void 0:I.errors,onChange:e=>{var l;if("single"===(null===I||void 0===I||null===(l=I.options)||void 0===l?void 0:l.type)){const l=jl.find(l=>l.value===e);L?F(null===l||void 0===l?void 0:l.label,T):A(null===l||void 0===l?void 0:l.label,T)}else L?F(e,T):A(e,T)},selectionType:null===I||void 0===I||null===(ml=I.options)||void 0===ml?void 0:ml.type,fieldIcon:null===I||void 0===I?void 0:I.icon})),e&&u.createElement("div",{className:c.Z.avatarContentContainer},u.createElement("img",{alt:"lg",src:null===e||void 0===e||null===(fl=e.user)||void 0===fl?void 0:fl.photo,className:c.Z.avatarUrlImg})))}return"file"===I.data_type?u.createElement(Ol,{field_id:I.id,value:null===I||void 0===I?void 0:I.value,isInherited:R,checkIfAreMandatoryErrored:U,options:null===I||void 0===I?void 0:I.options,index:T,indexInContextArray:O}):"date"===I.data_type||null!==I&&void 0!==I&&null!==(f=I.options)&&void 0!==f&&f.country_code||null!==I&&void 0!==I&&null!==(_=I.options)&&void 0!==_&&_.currency_type||"Number"===I.data_type_name?q||"bar"===(null===I||void 0===I||null===(oe=I.options)||void 0===oe?void 0:oe.display)?u.createElement("div",{className:c.Z.fieldTypeInput,style:{paddingLeft:q?"":"0px",border:q?"1px solid var(--app-color-gray-light)":"none",height:"auto"}},"date"===I.data_type?"Range"===(null===I||void 0===I||null===(ie=I.options)||void 0===ie?void 0:ie.type)?u.createElement(x.$m,{inputContainerClassName:c.Z.inputContainerClassName,dateChangeHandler:e=>Gl(e,T),startDate:pe,endDate:me}):null!==I&&void 0!==I&&null!==(te=I.options)&&void 0!==te&&te.time?u.createElement("div",{style:{width:"100%",height:"auto",border:"0"}},u.createElement(Te(),{selected:null!==I&&void 0!==I&&I.value?new Date(null===I||void 0===I?void 0:I.value):new Date,showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:15,customInput:u.createElement("div",{style:{cursor:"pointer",display:"flex",justifyContent:"center",width:"100%",alignItems:"stretch",padding:"5px 0",border:"0px solid var(--app-color-gray-lighter)"}},u.createElement("input",{value:I.value?Ke()(I.value).format("DD MMMM YYYY HH:mm"):"",className:c.Z.inputValue,type:"text",style:{flex:1,marginTop:"auto",marginBottom:"auto",outline:"none",fontFamily:"var(--app-text-main-font)",fontSize:"14px",fontWeight:"bold",lineHeight:"20px",color:"#4A4A4A",textAlign:"left",maxWidth:"98%",border:"0px"},onChange:e=>{}}),u.createElement(se.G,{icon:ue.WRo,style:{margin:"0 10px",width:"14px",height:"14px"}})),className:c.Z.singleInputContainer,onChange:e=>{F(e,T)}})):u.createElement(x.X9,{value:null!==I&&void 0!==I&&I.value?Ke()(new Date(null===I||void 0===I?void 0:I.value)).format("Do MMMM YYYY"):"",dateChangeHandler:e=>{L?F(e,T):Jl(e,T)},selected:new Date(Ke()(ae,"YYYY-MM-DD")),iconClassName:c.Z.calendar,inputContainerClassName:c.Z.singleInputContainer,inputStyle:{textAlign:"left",border:"none",fontSize:"16px",margin:"0px 0 0px"},hasCalendarIcon:!0}):q&&u.createElement("input",{type:I.data_type,onBlur:e=>{L?F(e.target.value,T):P(e.target.value,T)},id:I.field_name,autoComplete:"none",defaultValue:null===I||void 0===I?void 0:I.value,className:c.Z.fieldTypeInput,name:I.field_name,style:{height:"33px",backgroundColor:null!==I&&void 0!==I&&null!==(de=I.options)&&void 0!==de&&de.valueC?null===I||void 0===I||null===(re=I.options)||void 0===re?void 0:re.valueC:"",minWidth:L?"100px":""},disabled:null!==(ve=null===I||void 0===I?void 0:I.disabled)&&void 0!==ve&&ve}),"bar"===(null===I||void 0===I||null===(ce=I.options)||void 0===ce?void 0:ce.display)&&"Number"===(null===I||void 0===I?void 0:I.data_type_name)&&u.createElement("div",{style:{height:q?"5px":"20px",border:"none",width:"100%",backgroundColor:null===I||void 0===I||null===(fe=I.options)||void 0===fe?void 0:fe.maxC,display:"flex",flexDirection:"row"}},u.createElement("input",{value:"",className:c.Z.fieldTypeInput,name:I.field_name,style:{color:"transparent",border:"none",height:q?"5px":"20px",width:"".concat(+(null===I||void 0===I?void 0:I.value)/+I.options.max*100,"%"),backgroundColor:null!==I&&void 0!==I&&I.value?"0"===(null===I||void 0===I?void 0:I.value)?"transparent":null===I||void 0===I||null===(_e=I.options)||void 0===_e?void 0:_e.barC:"transparent"},disabled:!0}))):u.createElement("div",{style:{backgroundColor:null!==I&&void 0!==I&&null!==(ye=I.options)&&void 0!==ye&&ye.valueC?null===I||void 0===I||null===(ge=I.options)||void 0===ge?void 0:ge.valueC:"",minWidth:L?"200px":""}},"date"===(null===I||void 0===I?void 0:I.data_type)?null!==I&&void 0!==I&&I.value?Ke()(null===I||void 0===I?void 0:I.value).format(null!==I&&void 0!==I&&null!==(he=I.options)&&void 0!==he&&he.time?"DD MMMM YYYY HH:mm":"DD MMMM YYYY"):"":null===I||void 0===I?void 0:I.value):"Long Text"===I.data_type_name?q?null!==(be=I.options)&&void 0!==be&&be.rich?u.createElement(Sl.Z,{handleChange:e=>{I.value=e,L?F(I.value,T):P(I.value,T)}}):u.createElement("textarea",{className:c.Z.fieldTypeTextarea,style:{minWidth:L?"300px":"",border:"1px solid var(--app-color-gray-light)"},type:I.data_type,defaultValue:null!==I&&void 0!==I&&null!==(xe=I.options)&&void 0!==xe&&xe.mapToItem?null===I||void 0===I?void 0:I.value:null!==(Ee=D.selected_fields[T])&&void 0!==Ee&&Ee.value?null===(Ce=D.selected_fields[T])||void 0===Ce?void 0:Ce.value:""===Tl(null===I||void 0===I?void 0:I.options)?"":Tl(null===I||void 0===I?void 0:I.options),onFocus:()=>{},disabled:null!==(we=null===(Me=D.selected_fields[T])||void 0===Me?void 0:Me.disabled)&&void 0!==we&&we,autoComplete:"none",onBlur:e=>{L?F(e.target.value,T):P(e.target.value,T)},name:I.field_name}):null!==(Se=I.options)&&void 0!==Se&&Se.rich?u.createElement(El(),{modules:{toolbar:!1},style:{fontFamily:"var(--app-text-main-font)",minHeight:"200px"},readOnly:!0,formats:w.dv,defaultValue:null===I||void 0===I?void 0:I.value,onChange:()=>{},onBlur:()=>{},theme:"snow"}):u.createElement("div",{style:{backgroundColor:null!==I&&void 0!==I&&null!==(ke=I.options)&&void 0!==ke&&ke.valueC?null===I||void 0===I||null===(Ze=I.options)||void 0===Ze?void 0:Ze.valueC:"",minWidth:L?"300px":"",height:"100px",padding:"10px"}},null===I||void 0===I?void 0:I.value):"Link"===I.data_type_name?q?u.createElement("div",{style:{width:"inherit",display:"flex",flexDirection:"column"}},u.createElement("input",{type:I.data_type,onBlur:e=>{L?F(e.target.value,T):P(e.target.value,T)},autoComplete:"none",defaultValue:null!==I&&void 0!==I&&null!==(Ie=I.options)&&void 0!==Ie&&Ie.mapToItem?null===I||void 0===I?void 0:I.value:null!==(Ne=D.selected_fields[T])&&void 0!==Ne&&Ne.value?null===(De=D.selected_fields[T])||void 0===De?void 0:De.value:""===Tl(null===I||void 0===I?void 0:I.options)?"":Tl(null===I||void 0===I?void 0:I.options),className:c.Z.fieldTypeInput,style:{border:"0px solid var(--app-color-gray-light)"},name:I.field_name,disabled:null!==(Pe=null===(Oe=D.selected_fields[T])||void 0===Oe?void 0:Oe.disabled)&&void 0!==Pe&&Pe})):((null===I||void 0===I||null===(Ae=I.value)||void 0===Ae?void 0:Ae.includes("jpg"))||(null===I||void 0===I||null===(ze=I.value)||void 0===ze?void 0:ze.includes("jpeg"))||(null===I||void 0===I||null===(Re=I.options)||void 0===Re?void 0:Re.image)||(null===I||void 0===I||null===(Ue=I.value)||void 0===Ue?void 0:Ue.includes("png")))&&u.createElement("img",{className:c.Z.avatarUrlImg,alt:"lg",onError:e=>e.target.src="https://i.quotev.com/b2gtjqawaaaa.jpg",src:null===I||void 0===I?void 0:I.value}):q?u.createElement("input",{type:I.data_type,onBlur:e=>{L?F(e.target.value,T):P(e.target.value,T)},autoComplete:"none",defaultValue:null!==I&&void 0!==I&&null!==(g=I.options)&&void 0!==g&&g.mapToItem?null===I||void 0===I?void 0:I.value:null!==(h=D.selected_fields[T])&&void 0!==h&&h.value?null===(b=D.selected_fields[T])||void 0===b?void 0:b.value:""===Tl(null===I||void 0===I?void 0:I.options)?"":Tl(null===I||void 0===I?void 0:I.options),className:c.Z.fieldTypeInput,style:{minWidth:L?"300px":"",border:"1px solid var(--app-color-gray-light)",backgroundColor:null!==I&&void 0!==I&&null!==(E=I.options)&&void 0!==E&&E.valueC?null===I||void 0===I||null===(C=I.options)||void 0===C?void 0:C.valueC:""},name:I.field_name,disabled:null!==(M=null===(S=D.selected_fields[T])||void 0===S?void 0:S.disabled)&&void 0!==M&&M}):u.createElement("div",{style:{backgroundColor:null!==I&&void 0!==I&&null!==(k=I.options)&&void 0!==k&&k.valueC?null===I||void 0===I||null===(Z=I.options)||void 0===Z?void 0:Z.valueC:"",minWidth:L?"200px":""}},null===I||void 0===I?void 0:I.value)},to=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],l=arguments.length>1?arguments[1]:void 0,o=arguments.length>2?arguments[2]:void 0;return 0==(null===e||void 0===e?void 0:e.length)?0:e.reduce((e,i)=>{var t,n,d,a,r,v,s,u,c;if(null===i[null===l||void 0===l||null===(t=l.options)||void 0===t?void 0:t.mapToItem]||""===i[null===l||void 0===l||null===(n=l.options)||void 0===n?void 0:n.mapToItem])return e;const p=null!==(d=null!==o&&void 0!==o&&null!==(a=o.options)&&void 0!==a&&a.simple?JSON.parse(null!==(r=i[null===l||void 0===l||null===(v=l.options)||void 0===v?void 0:v.mapToItem])&&void 0!==r?r:"{}")[l.field_name]:i[null===l||void 0===l||null===(s=l.options)||void 0===s?void 0:s.mapToItem])&&void 0!==d?d:0;return"itemsum"===(null===l||void 0===l||null===(u=l.options)||void 0===u?void 0:u.footer)?e+ +(""===p?0:"".concat(p)):"itemdiff"===(null===l||void 0===l||null===(c=l.options)||void 0===c?void 0:c.footer)?e-+(""===p?0:"".concat(p)):0},0).toFixed(2)},no=(e,l)=>{var o,i,t,n,d,a,_,E,k,Z,I,N,ve,ce,hl,bl,Cl,Ml,Nl,Hl,no,ao,ro,vo,so,uo,co,po,mo,fo,_o,yo,go,ho,bo,xo,Eo,Co,wo,Mo,So,ko,Zo,Io,No,Do,To,Po,Oo,Ao,zo,Lo,Ro,Uo,Fo,Wo,qo,Yo,Bo,Ho,jo,Vo,Go,Jo,Qo,Ko,Xo,$o,ei,li,oi;let ii="";if((null===e||void 0===e||null===(o=e.options)||void 0===o||null===(i=o.fieldToMatch)||void 0===i?void 0:i.length)>0){var ti,ni,di,ai,ri,vi,si,ui;const l=D.selected_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.fieldToMatch)});var ci,pi,mi,fi,_i,yi,gi,hi,bi,xi,Ei,Ci,wi,Mi,Si,ki;if(l&&(null===e||void 0===e||null===(ti=e.options)||void 0===ti||null===(ni=ti.valueToMatch)||void 0===ni?void 0:ni.length)>0&&(null===e||void 0===e||null===(di=e.options)||void 0===di||null===(ai=di.actionToPerform)||void 0===ai?void 0:ai.length)>0&&(null===e||void 0===e||null===(ri=e.options)||void 0===ri||null===(vi=ri.initialState)||void 0===vi?void 0:vi.length)>0)if(null!==e&&void 0!==e&&null!==(ci=e.options)&&void 0!==ci&&null!==(pi=ci.valueToMatch)&&void 0!==pi&&pi.split(",").includes(null===l||void 0===l?void 0:l.value))"hide"===(null===e||void 0===e||null===(mi=e.options)||void 0===mi?void 0:mi.actionToPerform)?e.visible=!1:"visible"===(null===e||void 0===e||null===(fi=e.options)||void 0===fi?void 0:fi.actionToPerform)?e.visible=!0:"mandatory"===(null===e||void 0===e||null===(_i=e.options)||void 0===_i?void 0:_i.actionToPerform)?(e.mandatory=!0,e.visible=!0):"optional"===(null===e||void 0===e||null===(yi=e.options)||void 0===yi?void 0:yi.actionToPerform)?(e.mandatory=!1,e.visible=!0):"visman"===(null===e||void 0===e||null===(gi=e.options)||void 0===gi?void 0:gi.actionToPerform)?(e.mandatory=!0,e.visible=!0):"disable"===(null===e||void 0===e||null===(hi=e.options)||void 0===hi?void 0:hi.actionToPerform)&&(ii="none");else"hidden"===(null===e||void 0===e||null===(bi=e.options)||void 0===bi?void 0:bi.initialState)?e.visible=!1:"visible"===(null===e||void 0===e||null===(xi=e.options)||void 0===xi?void 0:xi.initialState)?e.visible=!0:"mandatory"===(null===e||void 0===e||null===(Ei=e.options)||void 0===Ei?void 0:Ei.initialState)?(e.mandatory=!0,e.visible=!0):"optional"===(null===e||void 0===e||null===(Ci=e.options)||void 0===Ci?void 0:Ci.initialState)?(e.mandatory=!1,e.visible=!0):"visman"===(null===e||void 0===e||null===(wi=e.options)||void 0===wi?void 0:wi.actionToPerform)?(e.mandatory=!0,e.visible=!0):"disable"===(null===e||void 0===e||null===(Mi=e.options)||void 0===Mi?void 0:Mi.actionToPerform)&&(ii="none");if(l&&(null===e||void 0===e||null===(si=e.options)||void 0===si||null===(ui=si.valueToMatch2)||void 0===ui?void 0:ui.length)>0)if(null!==e&&void 0!==e&&null!==(Si=e.options)&&void 0!==Si&&null!==(ki=Si.valueToMatch2)&&void 0!==ki&&ki.split(",").includes(null===l||void 0===l?void 0:l.value)){var Zi,Ii,Ni,Di,Ti,Pi,Oi,Ai,zi,Li,Ri,Ui,Fi;if((null===e||void 0===e||null===(Zi=e.options)||void 0===Zi||null===(Ii=Zi.value)||void 0===Ii?void 0:Ii.length)>0)if("Text"===(null===e||void 0===e?void 0:e.data_type_name))e.value=null===e||void 0===e||null===(Ti=e.options)||void 0===Ti?void 0:Ti.value,e.field.value=null===e||void 0===e||null===(Pi=e.options)||void 0===Pi?void 0:Pi.value;else if("Date"===(null===e||void 0===e?void 0:e.data_type_name)){var Wi,qi,Yi,Bi,Hi,ji;if(0==(null===e||void 0===e||null===(Wi=e.value)||void 0===Wi?void 0:Wi.length)||void 0==(null===e||void 0===e?void 0:e.value))"today"===(null===e||void 0===e||null===(qi=e.options)||void 0===qi?void 0:qi.value)?(e.value=new Date(Ke()((0,Qe.now)())),e.field.value=new Date(Ke()((0,Qe.now)()))):"tomorrow"===(null===e||void 0===e||null===(Yi=e.options)||void 0===Yi?void 0:Yi.value)?(e.value=new Date(Ke()((0,Qe.now)()).add(1,"days")),e.field.value=new Date(Ke()((0,Qe.now)()).add(1,"days"))):"week"===(null===e||void 0===e||null===(Bi=e.options)||void 0===Bi?void 0:Bi.value)?(e.value=new Date(Ke()((0,Qe.now)()).add(1,"weeks")),e.field.value=new Date(Ke()((0,Qe.now)()).add(1,"weeks"))):"month"===(null===e||void 0===e||null===(Hi=e.options)||void 0===Hi?void 0:Hi.value)&&(e.value=new Date(Ke()((0,Qe.now)()).add(1,"months")),e.field.value=new Date(Ke()((0,Qe.now)()).add(1,"months"))),"none"===(null===e||void 0===e||null===(ji=e.options)||void 0===ji?void 0:ji.value)&&(e.value=void 0,e.field.value=void 0)}if((null===e||void 0===e||null===(Ni=e.options)||void 0===Ni||null===(Di=Ni.actionToPerform2)||void 0===Di?void 0:Di.length)>0)"hide"===(null===e||void 0===e||null===(Oi=e.options)||void 0===Oi?void 0:Oi.actionToPerform2)?(e.visible=!1,e.field.visible=!1):"visible"===(null===e||void 0===e||null===(Ai=e.options)||void 0===Ai?void 0:Ai.actionToPerform2)?e.visible=!0:"mandatory"===(null===e||void 0===e||null===(zi=e.options)||void 0===zi?void 0:zi.actionToPerform2)?(e.mandatory=!0,e.visible=!0,e.field.mandatory=!0,e.field.visible=!0):"optional"===(null===e||void 0===e||null===(Li=e.options)||void 0===Li?void 0:Li.actionToPerform2)?(e.mandatory=!1,e.visible=!0,e.field.mandatory=!1,e.field.visible=!0):"visman"===(null===e||void 0===e||null===(Ri=e.options)||void 0===Ri?void 0:Ri.actionToPerform2)?(e.mandatory=!0,e.visible=!0,e.field.mandatory=!0,e.field.visible=!0):"disable"===(null===e||void 0===e||null===(Ui=e.options)||void 0===Ui?void 0:Ui.actionToPerform2)?ii="none":"enable"===(null===e||void 0===e||null===(Fi=e.options)||void 0===Fi?void 0:Fi.actionToPerform2)&&(ii="")}e.field.mandatory=e.mandatory,e.field.visible=e.visible}if("Record"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(t=e.options)||void 0===t||null===(n=t.component_id)||void 0===n?void 0:n.length)>0){var Vi,Gi,Ji,Qi,Ki,Xi,$i,et,lt,ot,it,tt,nt,dt,at,rt,vt,st,ut,ct,pt,mt,ft,_t,yt,gt,ht,bt,xt,Et,Ct,wt,Mt,St,kt,Zt,It,Nt,Dt,Tt,Pt,Ot,At,zt,Lt,Rt,Ut,Ft,Wt,qt,Yt,Bt,Ht,jt,Vt,Gt;const o=(null!==e&&void 0!==e&&null!==(Vi=e.options)&&void 0!==Vi&&Vi.global?lo(null===e||void 0===e?void 0:e.data_type_name):$).filter(l=>{var o;return l.component_fields.filter(l=>{var o;return l.component_blueprint_id===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.component_id)}).length>0||l.module_id===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.module_id)}),i=o.map(l=>{var o,i,t,n;let d="";return null===e||void 0===e||null===(o=e.options)||void 0===o||null===(i=o.names)||void 0===i||i.map(e=>{var o,i;return d=""===d?null===(o=l.component_fields.find(l=>l.field_name===e))||void 0===o?void 0:o.value:"".concat(d," ").concat(null===(i=l.component_fields.find(l=>l.field_name===e))||void 0===i?void 0:i.value)}),{label:""===d?l.title:d,value:l.id,component:l,[null===e||void 0===e||null===(t=e.options)||void 0===t?void 0:t.output]:null===(n=l.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.output)}))||void 0===n?void 0:n.value}});let t;if((null===e||void 0===e||null===(Gi=e.options)||void 0===Gi||null===(Ji=Gi.filters)||void 0===Ji?void 0:Ji.length)>0){if((null===o||void 0===o?void 0:o.length)>0)if(e.value){if(t=o.find(l=>l.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.output)&&l.value===e.value})),t){var Jt,Qt,Kt;eo(null===(Jt=t)||void 0===Jt?void 0:Jt.id);const e=[...null!==(Qt=null===(Kt=z.currentStep)||void 0===Kt?void 0:Kt.component_blueprints)&&void 0!==Qt?Qt:[]];e&&(z.newStepComponents=e)}}else if(1==i.length&&(t=o[0],t)){var Xt,$t,en;eo(null===(Xt=t)||void 0===Xt?void 0:Xt.id);const e=[...null!==($t=null===(en=z.currentStep)||void 0===en?void 0:en.component_blueprints)&&void 0!==$t?$t:[]];e&&(z.newStepComponents=e)}if(1==i.length||e.value){var ln,on,tn,nn;if((null===e||void 0===e||null===(ln=e.options)||void 0===ln?void 0:ln.filters.length)>0)ye[null===e||void 0===e||null===(tn=e.options)||void 0===tn?void 0:tn.filters[0]]=Re.Z(Ue.Z("value"))(o.map(l=>{const o=null===l||void 0===l?void 0:l.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[1])});return{label:null===o||void 0===o?void 0:o.value,value:null===o||void 0===o?void 0:o.value,component:l}}).filter(l=>{var o;return(null===(o=l.component)||void 0===o?void 0:o.component_fields.filter(l=>{var o,i;return l.value===(null===(o=t)||void 0===o||null===(i=o.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[0])}))||void 0===i?void 0:i.value)}).length)>0}));if((null===e||void 0===e||null===(on=e.options)||void 0===on?void 0:on.filters.length)>1)ye[null===e||void 0===e||null===(nn=e.options)||void 0===nn?void 0:nn.filters[1]]=Re.Z(Ue.Z("value"))(o.map(l=>{const o=l.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[2])});return{label:null===o||void 0===o?void 0:o.value,value:null===o||void 0===o?void 0:o.value,component:l}}).filter(l=>{var o;return(null===(o=l.component)||void 0===o?void 0:o.component_fields.filter(l=>{var o,i;return l.value===(null===(o=t)||void 0===o||null===(i=o.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[1])}))||void 0===i?void 0:i.value)}).length)>0}))}}else if(i.length>0)if(e.value){if(t=null===i||void 0===i?void 0:i.find(l=>{var o;return l[null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.output]===e.value}),t){var dn,an;eo(t.value);const e=[...null!==(dn=null===(an=z.currentStep)||void 0===an?void 0:an.component_blueprints)&&void 0!==dn?dn:[]];e&&(z.newStepComponents=e)}}else if(1==i.length&&1==(null===e||void 0===e?void 0:e.mandatory)&&(t=i[0],t)){var rn,vn;eo(t.value);const e=[...null!==(rn=null===(vn=z.currentStep)||void 0===vn?void 0:vn.component_blueprints)&&void 0!==rn?rn:[]];e&&(z.newStepComponents=e)}return 1==(null===e||void 0===e||null===(Qi=e.options)||void 0===Qi||null===(Ki=Qi.filters)||void 0===Ki?void 0:Ki.length)?u.createElement("div",{style:{width:"inherit",fontSize:"16px"}},u.createElement("label",{style:{fontWeight:"normal",fontSize:"15px"}},null===(Xi=K.find(l=>{var o;return l.id===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.component_id)}))||void 0===Xi?void 0:Xi.name),!t&&(null===e||void 0===e?void 0:e.value)&&u.createElement("div",{key:l},"A record ( ".concat(null===e||void 0===e?void 0:e.value," ) was previously selected but not found. Press the refresh button on the upper right side to retrieve the missing record. If record is still not found, please check with your admin.")),u.createElement(y.Z,{visible:null===e||void 0===e?void 0:e.visible,mandatory:1==(null===e||void 0===e||null===($i=e.options)||void 0===$i||null===(et=$i.filters)||void 0===et?void 0:et.length)&&(null===e||void 0===e?void 0:e.mandatory),items:Re.Z(Ue.Z("value"))(null===(lt=o.map(l=>{const o=l.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[0])});return{label:null===o||void 0===o?void 0:o.value,value:null===o||void 0===o?void 0:o.value,component:l}}))||void 0===lt?void 0:lt.concat({label:"...More",value:"more"})),loading:ne,error:1==(null===e||void 0===e||null===(ot=e.options)||void 0===ot||null===(it=ot.filters)||void 0===it?void 0:it.length)?null===e||void 0===e?void 0:e.errors:"",onChange:i=>{var t,n,d,a,r,v,s;"more"!==i?(null===e||void 0===e||null===(t=e.options)||void 0===t||null===(n=t.filters)||void 0===n?void 0:n.length)>1?(A(void 0,l),Ee(!1),be(!1),setTimeout(()=>{be(!0),Ee(!0)},10),ge({[null===e||void 0===e||null===(d=e.options)||void 0===d?void 0:d.filters[0]]:Re.Z(Ue.Z("value"))(o.map(l=>{const o=l.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[1])});return{label:null===o||void 0===o?void 0:o.value,value:null===o||void 0===o?void 0:o.value,component:l,selected:i}}).filter(l=>l.component.component_fields.filter(l=>{var o;return l.value===i&&l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[0])}).length>0))})):(Se("50px"),A(null!==(a=null===(r=o.find(e=>e.component_fields.filter(e=>e.value===i).length>0))||void 0===r||null===(v=r.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.output)}))||void 0===v?void 0:v.value)&&void 0!==a?a:null,l),eo(null===(s=o.find(e=>e.component_fields.filter(e=>e.value===i).length>0))||void 0===s?void 0:s.id)):oo()},backgroundColor:null!==e&&void 0!==e&&null!==(tt=e.options)&&void 0!==tt&&tt.valueC&&null!==e&&void 0!==e&&e.value?null===e||void 0===e||null===(nt=e.options)||void 0===nt?void 0:nt.valueC:"",value:t?null===(dt=t.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[0])}))||void 0===dt?void 0:dt.value:""})):(null===e||void 0===e||null===(at=e.options)||void 0===at||null===(rt=at.filters)||void 0===rt?void 0:rt.length)>1?u.createElement("div",{key:l,className:c.Z.filtersContainer,style:{width:"inherit",display:null!==e&&void 0!==e&&e.visible?"":"none",pointerEvents:ii,paddingTop:"20px"}},!t&&(null===e||void 0===e?void 0:e.value)&&u.createElement("div",{key:l},"A record ( ".concat(null===e||void 0===e?void 0:e.value," ) was previously selected but not found. Press the refresh button on the upper right side to retrieve the missing record. If record is still not found, please check with your admin.")),(null===e||void 0===e||null===(vt=e.options)||void 0===vt||null===(st=vt.filters)||void 0===st?void 0:st.length)>0&&u.createElement(u.Fragment,null,u.createElement("label",{style:{fontWeight:"normal",fontSize:"15px"}},null===e||void 0===e||null===(ut=e.options)||void 0===ut?void 0:ut.filters[0]),u.createElement(y.Z,{visible:null===e||void 0===e?void 0:e.visible,mandatory:1==(null===e||void 0===e||null===(ct=e.options)||void 0===ct||null===(pt=ct.filters)||void 0===pt?void 0:pt.length)&&(null===e||void 0===e?void 0:e.mandatory),items:Re.Z(Ue.Z("value"))(o.map(l=>{const o=l.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[0])});return{label:null===o||void 0===o?void 0:o.value,value:null===o||void 0===o?void 0:o.value,component:l}})),loading:ne,error:1==(null===e||void 0===e||null===(mt=e.options)||void 0===mt||null===(ft=mt.filters)||void 0===ft?void 0:ft.length)?null===e||void 0===e?void 0:e.errors:"",onChange:i=>{var t,n,d,a,r,v,s;(null===e||void 0===e||null===(t=e.options)||void 0===t||null===(n=t.filters)||void 0===n?void 0:n.length)>1?(A(void 0,l),Ee(!1),be(!1),setTimeout(()=>{be(!0),Ee(!0)},10),ge({[null===e||void 0===e||null===(d=e.options)||void 0===d?void 0:d.filters[0]]:Re.Z(Ue.Z("value"))(o.map(l=>{const o=l.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[1])});return{label:null===o||void 0===o?void 0:o.value,value:null===o||void 0===o?void 0:o.value,component:l,selected:i}}).filter(l=>l.component.component_fields.filter(l=>{var o;return l.value===i&&l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[0])}).length>0))})):(Se("50px"),A(null!==(a=null===(r=o.find(e=>e.component_fields.filter(e=>e.value===i).length>0))||void 0===r||null===(v=r.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.output)}))||void 0===v?void 0:v.value)&&void 0!==a?a:null,l),eo(null===(s=o.find(e=>e.component_fields.filter(e=>e.value===i).length>0))||void 0===s?void 0:s.id))},value:t?null===(_t=t.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[0])}))||void 0===_t?void 0:_t.value:"",backgroundColor:null!==e&&void 0!==e&&null!==(yt=e.options)&&void 0!==yt&&yt.valueC&&null!==e&&void 0!==e&&e.value?null===e||void 0===e||null===(gt=e.options)||void 0===gt?void 0:gt.valueC:""})),u.createElement("div",{style:{display:null!==e&&void 0!==e&&e.visible?"":"none",margin:"10px 0"}},(null===e||void 0===e||null===(ht=e.options)||void 0===ht||null===(bt=ht.filters)||void 0===bt?void 0:bt.length)>1&&he&&u.createElement(u.Fragment,null,u.createElement("label",{style:{fontWeight:"normal",fontSize:"15px"}},null===e||void 0===e||null===(xt=e.options)||void 0===xt?void 0:xt.filters[1]),u.createElement(y.Z,{visible:null===e||void 0===e?void 0:e.visible,mandatory:2==(null===e||void 0===e||null===(Et=e.options)||void 0===Et||null===(Ct=Et.filters)||void 0===Ct?void 0:Ct.length)&&(null===e||void 0===e?void 0:e.mandatory),items:null!==(wt=ye[null===e||void 0===e||null===(Mt=e.options)||void 0===Mt?void 0:Mt.filters[0]])&&void 0!==wt?wt:[],loading:ne,onClicked:e=>Se(e?"180px":"50px"),onChange:i=>{var t,n,d,a,r,v,u,c,p;(null===e||void 0===e||null===(t=e.options)||void 0===t||null===(n=t.filters)||void 0===n?void 0:n.length)>2?(Ee(!1),setTimeout(()=>Ee(!0),10),ge((0,s.Z)((0,s.Z)({},ye),{},{[null===e||void 0===e||null===(d=e.options)||void 0===d?void 0:d.filters[1]]:null!==(a=Re.Z(Ue.Z("value"))(o.map(l=>{const o=l.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[2])});return{label:null===o||void 0===o?void 0:o.value,value:null===o||void 0===o?void 0:o.value,component:l}}).filter(l=>l.component.component_fields.filter(l=>{var o;return l.value===i&&l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[1])}).length>0).filter(l=>l.component.component_fields.filter(l=>{var o,i;return l.value===ye[null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[0]][0].component.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[0])}).value&&l.field_name===(null===e||void 0===e||null===(i=e.options)||void 0===i?void 0:i.filters[0])}).length>0)))&&void 0!==a?a:[]}))):(Se("50px"),ee.start=!0,A(null!==(r=null===(v=ye[null===e||void 0===e||null===(c=e.options)||void 0===c?void 0:c.filters[0]])||void 0===v||null===(u=v.find(e=>e.value===i))||void 0===u?void 0:u.component.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.output)}).value)&&void 0!==r?r:null,l),eo(ye[null===e||void 0===e||null===(p=e.options)||void 0===p?void 0:p.filters[0]].find(e=>e.value===i).component.id),Ee(!1),be(!1),setTimeout(()=>{be(!0),Ee(!0)},10))},backgroundColor:null!==e&&void 0!==e&&null!==(St=e.options)&&void 0!==St&&St.valueC&&null!==e&&void 0!==e&&e.value?null===e||void 0===e||null===(kt=e.options)||void 0===kt?void 0:kt.valueC:"",value:t?null===(Zt=t.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[1])}))||void 0===Zt?void 0:Zt.value:""}))),u.createElement("div",{style:{display:null!==e&&void 0!==e&&e.visible?"":"none",margin:"10px 0"}},(null===e||void 0===e||null===(It=e.options)||void 0===It||null===(Nt=It.filters)||void 0===Nt?void 0:Nt.length)>2&&xe&&u.createElement(u.Fragment,null,u.createElement("label",{style:{fontWeight:"normal",fontSize:"15px"}},null===e||void 0===e||null===(Dt=e.options)||void 0===Dt?void 0:Dt.filters[2]),u.createElement(y.Z,{visible:null===e||void 0===e?void 0:e.visible,mandatory:3==(null===e||void 0===e||null===(Tt=e.options)||void 0===Tt||null===(Pt=Tt.filters)||void 0===Pt?void 0:Pt.length)&&(null===e||void 0===e?void 0:e.mandatory),items:null!==(Ot=ye[null===e||void 0===e||null===(At=e.options)||void 0===At?void 0:At.filters[1]])&&void 0!==Ot?Ot:[],loading:ne,onClicked:e=>Se(e?"180px":"50px"),onChange:o=>{var i,t,n,d,a;Se("50px"),ee.start=!0,A(null!==(i=null===(t=ye[null===e||void 0===e||null===(d=e.options)||void 0===d?void 0:d.filters[1]])||void 0===t||null===(n=t.find(e=>e.value===o))||void 0===n?void 0:n.component.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.output)}).value)&&void 0!==i?i:null,l),eo(ye[null===e||void 0===e||null===(a=e.options)||void 0===a?void 0:a.filters[1]].find(e=>e.value===o).component.id)},backgroundColor:null!==e&&void 0!==e&&null!==(zt=e.options)&&void 0!==zt&&zt.valueC&&null!==e&&void 0!==e&&e.value?null===e||void 0===e||null===(Lt=e.options)||void 0===Lt?void 0:Lt.valueC:"",value:t?null===(Rt=t.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[2])}))||void 0===Rt?void 0:Rt.value:""}))),null===e||void 0===e||null===(Ut=e.options)||void 0===Ut?void 0:Ut.notes):"Tiles"===(null===e||void 0===e||null===(Ft=e.options)||void 0===Ft?void 0:Ft.selection)?u.createElement("div",{style:{width:"100%",fontSize:"16px"}},K.find(l=>{var o;return l.id===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.component_id)}).name,u.createElement("div",{style:{width:ml.tq?"100%":"50%"}},u.createElement(Ne.default,{rowStyleSelected:{border:"2px solid black"},initialSelected:i.map(l=>{var o;return l[null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.output]}).indexOf(null===e||void 0===e?void 0:e.value),modern:!0,isReport:!1,"app-variant-is-mobile":"true",columns:null===e||void 0===e||null===(Wt=e.options)||void 0===Wt?void 0:Wt.names,list:i.map(e=>{const l=e;return e.component.component_fields.filter(e=>{l[e.field_name]=e.value}),l}),onListItemClick:o=>{var t,n,d,a,r;o&&(null===e||void 0===e||null===(r=e.options)||void 0===r||r.list.map(e=>{const l=$l({field_name:e});var i,t;-1!=l&&(D.selected_fields[l].value=null!==(i=null===(t=o.component.component_fields.find(l=>l.field_name===e))||void 0===t?void 0:t.value)&&void 0!==i?i:"",D.selected_fields[l].disabled=!0)}));eo(o),A(null!==(t=null===i||void 0===i||null===(n=i.find(e=>e.value===o.value))||void 0===n||null===(d=n.component.component_fields)||void 0===d||null===(a=d.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.output)}))||void 0===a?void 0:a.value)&&void 0!==t?t:null,l)}}))):u.createElement("div",{style:{width:"100%",fontSize:"16px"}},u.createElement("div",{style:{width:"inherit",border:"1px solid gray"}},u.createElement(y.Z,{key:l,visible:null===e||void 0===e?void 0:e.visible,mandatory:null===e||void 0===e?void 0:e.mandatory,items:i,loading:ne,error:"",className:c.Z.dropdownClassContainer,onClicked:e=>Se(e?"100px":"50px"),onChange:o=>{var t,n,d,a;o&&(null===e||void 0===e||null===(d=e.options)||void 0===d||null===(a=d.list)||void 0===a||a.map(e=>{const l=$l({field_name:e});var t,n;-1!=l&&(D.selected_fields[l].value=null!==(t=null===(n=i.find(e=>e.value===o).component.component_fields.find(l=>l.field_name===e))||void 0===n?void 0:n.value)&&void 0!==t?t:"",D.selected_fields[l].disabled=!0)}));ee.start=!0,Se("50px"),eo(o),A(null!==(t=null===i||void 0===i?void 0:i.find(e=>e.value===o)[null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.output])&&void 0!==t?t:null,l)},selectionType:(null===e||void 0===e||null===(qt=e.options)||void 0===qt?void 0:qt.selection.length)>0?null===e||void 0===e||null===(Yt=e.options)||void 0===Yt?void 0:Yt.selection:null===e||void 0===e||null===(Bt=e.options)||void 0===Bt?void 0:Bt.type,backgroundColor:null!==e&&void 0!==e&&null!==(Ht=e.options)&&void 0!==Ht&&Ht.valueC&&null!==e&&void 0!==e&&e.value?null===e||void 0===e||null===(jt=e.options)||void 0===jt?void 0:jt.valueC:"",value:null!==(Vt=null===(Gt=t)||void 0===Gt?void 0:Gt.label)&&void 0!==Vt?Vt:""})))}if("Filters"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(d=e.options)||void 0===d||null===(a=d.component_id)||void 0===a?void 0:a.length)>0){var sn,un,cn,pn,mn,fn,_n,yn,gn,hn,bn,xn,En,Cn,wn,Mn,Sn,kn,Zn,In,Nn,Dn,Tn,Pn,On,An,zn,Ln,Rn,Un,Fn,Wn,qn,Yn,Bn,Hn,jn;const o=(null!==e&&void 0!==e&&null!==(sn=e.options)&&void 0!==sn&&sn.global?lo(null===e||void 0===e?void 0:e.data_type_name):$).filter(l=>l.component_fields.filter(l=>{var o;return l.component_blueprint_id===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.component_id)}).length>0),i=o.map(l=>{var o,i;return{label:l.title,value:l.id,component:l,[null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.output]:null===(i=l.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.output)}))||void 0===i?void 0:i.value}});let t;if(o.length>0){if(e.value){if(t=o.find(l=>l.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.output)&&l.value===e.value})),t){var Vn,Gn,Jn;eo(null===(Vn=t)||void 0===Vn?void 0:Vn.id);const e=[...null!==(Gn=null===(Jn=z.currentStep)||void 0===Jn?void 0:Jn.component_blueprints)&&void 0!==Gn?Gn:[]];e&&(z.newStepComponents=e)}}else if(1==i.length&&1==(null===e||void 0===e?void 0:e.mandatory)&&(t=o[0],t)){var Qn,Kn,Xn;eo(null===(Qn=t)||void 0===Qn?void 0:Qn.id);const e=[...null!==(Kn=null===(Xn=z.currentStep)||void 0===Xn?void 0:Xn.component_blueprints)&&void 0!==Kn?Kn:[]];e&&(z.newStepComponents=e)}if(1==i.length||e.value){var $n,ed,ld,od;if((null===e||void 0===e||null===($n=e.options)||void 0===$n?void 0:$n.filters.length)>0)ye[null===e||void 0===e||null===(ld=e.options)||void 0===ld?void 0:ld.filters[0]]=Re.Z(Ue.Z("value"))(o.map(l=>{const o=null===l||void 0===l?void 0:l.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[1])});return{label:null===o||void 0===o?void 0:o.value,value:null===o||void 0===o?void 0:o.value,component:l}}));if((null===e||void 0===e||null===(ed=e.options)||void 0===ed?void 0:ed.filters.length)>1)ye[null===e||void 0===e||null===(od=e.options)||void 0===od?void 0:od.filters[1]]=Re.Z(Ue.Z("value"))(o.map(l=>{const o=l.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[2])});return{label:null===o||void 0===o?void 0:o.value,value:null===o||void 0===o?void 0:o.value,component:l}}))}}return u.createElement("div",{key:l,className:c.Z.filtersContainer,style:{width:"inherit",display:null!==e&&void 0!==e&&e.visible?"":"none",pointerEvents:ii}},null===(un=K.find(l=>{var o;return l.id===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.component_id)}))||void 0===un?void 0:un.name,u.createElement("br",null),u.createElement("br",null),!t&&(null===e||void 0===e?void 0:e.value)&&u.createElement("div",{key:l},"A record ( ".concat(null===e||void 0===e?void 0:e.value," ) was previously selected but not found. Press the refresh button on the upper right side to retrieve the missing record. If record is still not found, please check with your admin.")),(null===e||void 0===e||null===(cn=e.options)||void 0===cn||null===(pn=cn.filters)||void 0===pn?void 0:pn.length)>0&&u.createElement("div",{style:{display:null!==e&&void 0!==e&&e.visible?"":"none",marginBottom:"10px"}},u.createElement("label",{style:{fontWeight:"normal",fontSize:"15px"}},null===e||void 0===e||null===(mn=e.options)||void 0===mn?void 0:mn.filters[0]),u.createElement(y.Z,{visible:null===e||void 0===e?void 0:e.visible,className:c.Z.dropdownSelectComponent,mandatory:1==(null===e||void 0===e||null===(fn=e.options)||void 0===fn||null===(_n=fn.filters)||void 0===_n?void 0:_n.length)&&(null===e||void 0===e?void 0:e.mandatory),items:Re.Z(Ue.Z("value"))(null===(yn=o.map(l=>{const o=l.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[0])});return{label:null===o||void 0===o?void 0:o.value,value:null===o||void 0===o?void 0:o.value,component:l}}))||void 0===yn?void 0:yn.concat({label:"...More",value:"more"})),loading:ne,error:1==(null===e||void 0===e||null===(gn=e.options)||void 0===gn||null===(hn=gn.filters)||void 0===hn?void 0:hn.length)?null===e||void 0===e?void 0:e.errors:"",onChange:i=>{var t,n,d,a,r;"more"!==i?(null===e||void 0===e||null===(t=e.options)||void 0===t||null===(n=t.filters)||void 0===n?void 0:n.length)>1?(A(void 0,l),Ee(!1),be(!1),setTimeout(()=>{be(!0),Ee(!0)},10),ge({[null===e||void 0===e||null===(d=e.options)||void 0===d?void 0:d.filters[0]]:Re.Z(Ue.Z("value"))(o.map(l=>{const o=l.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[1])});return{label:null===o||void 0===o?void 0:o.value,value:null===o||void 0===o?void 0:o.value,component:l,selected:i}}).filter(l=>l.component.component_fields.filter(l=>{var o;return l.value===i&&l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[0])}).length>0))})):(Se("50px"),A(null!==(a=o.find(e=>e.value===i)[null===e||void 0===e||null===(r=e.options)||void 0===r?void 0:r.output])&&void 0!==a?a:null,l),eo(o.find(e=>e.value===i).component.id)):oo()},backgroundColor:null!==e&&void 0!==e&&null!==(bn=e.options)&&void 0!==bn&&bn.valueC&&null!==e&&void 0!==e&&e.value?null===e||void 0===e||null===(xn=e.options)||void 0===xn?void 0:xn.valueC:"",value:t?null===(En=t.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[0])}))||void 0===En?void 0:En.value:""})),u.createElement("div",{style:{display:null!==e&&void 0!==e&&e.visible?"":"none",marginBottom:"10px"}},(null===e||void 0===e||null===(Cn=e.options)||void 0===Cn||null===(wn=Cn.filters)||void 0===wn?void 0:wn.length)>1&&he&&u.createElement(u.Fragment,null,u.createElement("label",{style:{fontWeight:"normal",fontSize:"15px"}},null===e||void 0===e||null===(Mn=e.options)||void 0===Mn?void 0:Mn.filters[1]),u.createElement(y.Z,{className:c.Z.dropdownSelectComponent,visible:null===e||void 0===e?void 0:e.visible,mandatory:2==(null===e||void 0===e||null===(Sn=e.options)||void 0===Sn||null===(kn=Sn.filters)||void 0===kn?void 0:kn.length)&&(null===e||void 0===e?void 0:e.mandatory),items:null!==(Zn=ye[null===e||void 0===e||null===(In=e.options)||void 0===In?void 0:In.filters[0]])&&void 0!==Zn?Zn:[],loading:ne,error:2==(null===e||void 0===e||null===(Nn=e.options)||void 0===Nn||null===(Dn=Nn.filters)||void 0===Dn?void 0:Dn.length)?null===e||void 0===e?void 0:e.errors:"",onClicked:e=>Se(e?"180px":"50px"),onChange:i=>{var t,n,d,a,r,v,u,c,p;(null===e||void 0===e||null===(t=e.options)||void 0===t||null===(n=t.filters)||void 0===n?void 0:n.length)>2?(Ee(!1),setTimeout(()=>Ee(!0),10),ge((0,s.Z)((0,s.Z)({},ye),{},{[null===e||void 0===e||null===(d=e.options)||void 0===d?void 0:d.filters[1]]:null!==(a=Re.Z(Ue.Z("value"))(o.map(l=>{const o=l.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[2])});return{label:null===o||void 0===o?void 0:o.value,value:null===o||void 0===o?void 0:o.value,component:l}}).filter(l=>l.component.component_fields.filter(l=>{var o;return l.value===i&&l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[1])}).length>0).filter(l=>l.component.component_fields.filter(l=>{var o,i;return l.value===ye[null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[0]][0].component.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[0])}).value&&l.field_name===(null===e||void 0===e||null===(i=e.options)||void 0===i?void 0:i.filters[0])}).length>0)))&&void 0!==a?a:[]}))):(Se("50px"),ee.start=!0,A(null!==(r=null===(v=ye[null===e||void 0===e||null===(c=e.options)||void 0===c?void 0:c.filters[0]])||void 0===v||null===(u=v.find(e=>e.value===i))||void 0===u?void 0:u.component.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.output)}).value)&&void 0!==r?r:null,l),eo(ye[null===e||void 0===e||null===(p=e.options)||void 0===p?void 0:p.filters[0]].find(e=>e.value===i).component.id))},backgroundColor:null!==e&&void 0!==e&&null!==(Tn=e.options)&&void 0!==Tn&&Tn.valueC&&null!==e&&void 0!==e&&e.value?null===e||void 0===e||null===(Pn=e.options)||void 0===Pn?void 0:Pn.valueC:"",value:t?null===(On=t.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[1])}))||void 0===On?void 0:On.value:""}))),u.createElement("div",{style:{display:null!==e&&void 0!==e&&e.visible?"":"none",marginBottom:"10px"}},(null===e||void 0===e||null===(An=e.options)||void 0===An||null===(zn=An.filters)||void 0===zn?void 0:zn.length)>2&&xe&&u.createElement(u.Fragment,null,u.createElement("label",{style:{fontWeight:"normal",fontSize:"15px"}},null===e||void 0===e||null===(Ln=e.options)||void 0===Ln?void 0:Ln.filters[2]),u.createElement(y.Z,{visible:null===e||void 0===e?void 0:e.visible,className:c.Z.dropdownSelectComponent,mandatory:3==(null===e||void 0===e||null===(Rn=e.options)||void 0===Rn||null===(Un=Rn.filters)||void 0===Un?void 0:Un.length)&&(null===e||void 0===e?void 0:e.mandatory),items:null!==(Fn=ye[null===e||void 0===e||null===(Wn=e.options)||void 0===Wn?void 0:Wn.filters[1]])&&void 0!==Fn?Fn:[],loading:ne,error:3==(null===e||void 0===e||null===(qn=e.options)||void 0===qn||null===(Yn=qn.filters)||void 0===Yn?void 0:Yn.length)?null===e||void 0===e?void 0:e.errors:"",onClicked:e=>Se(e?"180px":"50px"),onChange:o=>{var i,t,n,d,a;Se("50px"),ee.start=!0,A(null!==(i=null===(t=ye[null===e||void 0===e||null===(d=e.options)||void 0===d?void 0:d.filters[1]])||void 0===t||null===(n=t.find(e=>e.value===o))||void 0===n?void 0:n.component.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.output)}).value)&&void 0!==i?i:null,l),eo(ye[null===e||void 0===e||null===(a=e.options)||void 0===a?void 0:a.filters[1]].find(e=>e.value===o).component.id)},backgroundColor:null!==e&&void 0!==e&&null!==(Bn=e.options)&&void 0!==Bn&&Bn.valueC&&null!==e&&void 0!==e&&e.value?null===e||void 0===e||null===(Hn=e.options)||void 0===Hn?void 0:Hn.valueC:"",value:t?null===(jn=t.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[2])}))||void 0===jn?void 0:jn.value:""}))))}if("Global"===(null===e||void 0===e?void 0:e.data_type_name)||"Connector"===(null===e||void 0===e?void 0:e.data_type_name)||"Emails"===(null===e||void 0===e?void 0:e.data_type_name)||"Template"===(null===e||void 0===e?void 0:e.data_type_name));else if("Print"!==(null===e||void 0===e?void 0:e.data_type_name)){var id,td,nd,dd,ad,rd,vd,sd,ud,cd,pd,md,fd,_d,yd,gd,hd;if("GoogleAI Assistant"===(null===e||void 0===e?void 0:e.data_type_name))return u.createElement("div",{key:l,style:{display:e.visible?"":"none",color:"var(--app-color-gray-dark)",height:"inherit",width:ml.tq?"100%":"80%",flexDirection:"column",marginTop:"50px"}},u.createElement("textarea",{className:c.Z.fullLengthTextarea,type:e.data_type,onFocus:()=>{},disabled:e.options.fixed,autoComplete:"none",onChange:e=>{P(e.target.value,l)},placeholder:"Enter your question here",value:1==e.options.fixed?null===e||void 0===e||null===(id=e.options)||void 0===id?void 0:id.analyze:e.value}),u.createElement("div",{style:{display:"flex"}},u.createElement(x.zx,{light:!0,loading:ne,title:"Ask Assistant ",clicked:()=>{0==e.options.fixed&&(e.options.analyze=e.value),Xl(e.options)}},u.createElement("img",{src:"https://ai.google/static/images/share.png",height:"90px",width:"140px"})),(null===vl||void 0===vl?void 0:vl.candidates.length)>0&&u.createElement(x.zx,{title:"Clear",clicked:()=>{xl({candidates:[]}),P(void 0,l)}})));if("Info"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(_=e.options)||void 0===_||null===(E=_.list)||void 0===E?void 0:E.length)>0&&(null===e||void 0===e||null===(k=e.options)||void 0===k||null===(Z=k.component_id)||void 0===Z?void 0:Z.length)>0&&null!==e&&void 0!==e&&e.visible){var bd,xd,Ed,Cd,wd,Md,Sd;const l=$.find(l=>l.id===(null===e||void 0===e?void 0:e.value)),o={};var kd;if(l)null===e||void 0===e||null===(kd=e.options)||void 0===kd||kd.list.map((e,i)=>{var t,n,d,a;if(0==l.component_fields.length)return u.createElement("div",{key:i});const r=l.component_fields.find(l=>l.field_name===e);var v;"Link"===(null===r||void 0===r?void 0:r.data_type_name)&&(null!==r&&void 0!==r&&null!==(t=r.value)&&void 0!==t&&t.includes("jpg")||null!==r&&void 0!==r&&null!==(n=r.value)&&void 0!==n&&n.includes("jpeg")||null!==r&&void 0!==r&&null!==(d=r.options)&&void 0!==d&&d.image||null!==r&&void 0!==r&&null!==(a=r.value)&&void 0!==a&&a.includes("png"))?o[e]=u.createElement("div",{onClick:()=>window.open(null===r||void 0===r?void 0:r.value,"_blank")},u.createElement("img",{alt:"lg",onError:e=>e.target.src="https://i.quotev.com/b2gtjqawaaaa.jpg",src:null===r||void 0===r?void 0:r.value,style:{width:"30px",height:"30px",cursor:"pointer"}})):o[e]=null!==(v=null===r||void 0===r?void 0:r.value)&&void 0!==v?v:""});return l&&("rows"===(null===e||void 0===e||null===(bd=e.options)||void 0===bd?void 0:bd.orientation)?u.createElement($e.Z,{className:c.Z.mobileTable_ii,style:{width:"100%"},tableHostSimple:c.Z.tableHostSimple,columns:null!==(xd=null===e||void 0===e||null===(Ed=e.options)||void 0===Ed?void 0:Ed.list)&&void 0!==xd?xd:[],list:[o]}):u.createElement("div",{className:c.Z.filtersContainer,style:{color:"var(--app-color-gray-light)",height:"inherit",width:"100%",display:null!==e&&void 0!==e&&e.visible?"":"none"}},u.createElement("div",{style:{color:"var(--app-color-gray-dark)"}},"Additional Information"),u.createElement("hr",{style:{margin:"20px 0",borderTop:"1px solid #D2D2D2"}}),Object.keys(o).length>0&&(null===e||void 0===e||null===(Cd=e.options)||void 0===Cd?void 0:Cd.list.map((o,i)=>{var t,n,d,a,r,v,s;if(0==l.component_fields.length)return u.createElement("div",{key:i,style:{width:"inherit"}});const p=l.component_fields.find(e=>e.field_name===o);return u.createElement(m.Z,{style:{border:"0"},key:i,fieldLabel:o,fieldIcon:e.icon,isProcess:!0,visible:!0,mandatory:e.mandatory,error:e.errors,notes:null===e||void 0===e||null===(t=e.options)||void 0===t?void 0:t.notes},"Link"===(null===p||void 0===p?void 0:p.data_type_name)&&(null!==p&&void 0!==p&&null!==(n=p.value)&&void 0!==n&&n.includes("jpg")||null!==p&&void 0!==p&&null!==(d=p.value)&&void 0!==d&&d.includes("jpeg")||null!==p&&void 0!==p&&null!==(a=p.options)&&void 0!==a&&a.image||null!==p&&void 0!==p&&null!==(r=p.value)&&void 0!==r&&r.includes("png"))?u.createElement("div",{style:{width:"inherit"},onClick:()=>window.open(null===p||void 0===p?void 0:p.value,"_blank")},u.createElement("img",{onError:e=>e.target.src="https://i.quotev.com/b2gtjqawaaaa.jpg",src:null===p||void 0===p?void 0:p.value,style:{fit:"scale-down",width:"100%",height:"auto",cursor:"pointer"}})):null!==e&&void 0!==e&&null!==(v=e.value)&&void 0!==v&&v.includes("pdf")?u.createElement("div",{style:{width:"inherit"},onClick:()=>window.open(null===p||void 0===p?void 0:p.value,"_blank")},u.createElement("embed",{src:"".concat(null===p||void 0===p?void 0:p.value,"#toolbar=0&navpanes=0&scrollbar=0&zoom=100%"),width:"100%",height:"1000px"})):(null===p||void 0===p||null===(s=p.value)||void 0===s?void 0:s.length)<50||void 0===p?u.createElement("input",{onBlur:l=>Pl(e.data_type_name,l.target.value,O,i,z),type:e.data_type,value:p?p.value:"",autoComplete:"none",className:c.Z.fieldTypeInput,name:e.field_name,readOnly:!0,style:{width:"inherit",border:"1px dashed rgba(234, 231, 231, 0.91)",height:"40px",fontSize:"18px",backgroundColor:"rgba(234, 231, 231, 0.91)"}}):u.createElement("textarea",{className:c.Z.fieldTypeTextarea,type:e.data_type,value:p?p.value:"",onFocus:()=>{},autoComplete:"none",onChange:e=>{},readOnly:!0,style:{width:"inherit",backgroundColor:"rgba(234, 231, 231, 0.91)",height:"auto",fontSize:"18px"}}))})),!0===(null===D||void 0===D||null===(wd=D.options)||void 0===wd?void 0:wd.allowMultipleInputs)&&(null===(Md=X.processModule.module.options)||void 0===Md||null===(Sd=Md.computes)||void 0===Sd?void 0:Sd.map((o,i)=>{var t,n;const d=null===$||void 0===$||null===(t=$.filter(e=>e.module_id===o.module_id))||void 0===t?void 0:t.find(o=>o.component_fields.filter(o=>{var i,t;return o.value===(null!==(i=null===(t=l.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.key)}))||void 0===t?void 0:t.value)&&void 0!==i?i:"#$")}).length>0),a=null===d||void 0===d?void 0:d.component_fields.find(e=>e.procedure_step_blueprint_field_id===o.field_id);return u.createElement(m.Z,{style:{display:a?"":"none",border:"0"},key:i,fieldLabel:null===a||void 0===a?void 0:a.field_name,fieldIcon:e.icon,isProcess:!0,visible:!0,mandatory:e.mandatory,error:e.errors,notes:null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.notes},u.createElement("input",{onBlur:l=>Pl(e.data_type_name,l.target.value,O,i,z),type:e.data_type,value:null===a||void 0===a?void 0:a.value,autoComplete:"none",className:c.Z.fieldTypeInput,name:e.field_name,disabled:!0,style:{border:"1px dashed rgba(234, 231, 231, 0.91)",height:"40px",fontSize:"18px",backgroundColor:"rgba(234, 231, 231, 0.91)"}}))}))))}if("Details"===(null===e||void 0===e?void 0:e.data_type_name)&&null!==e&&void 0!==e&&null!==(I=e.options)&&void 0!==I&&I.component){var Zd,Id,Nd,Dd,Td,Pd,Od;const l=$.find(l=>{var o;return l.id===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.component)}),o=null===(Zd=l.component_fields)||void 0===Zd?void 0:Zd.find(e=>{var l,o,i;return(null===(l=e.value)||void 0===l?void 0:l.includes("jpg"))||(null===(o=e.value)||void 0===o?void 0:o.includes("jpeg"))||(null===(i=e.value)||void 0===i?void 0:i.includes("png"))});return u.createElement("div",{style:{width:"100%"}},l?u.createElement(ll.Z,{photo:null===o||void 0===o?void 0:o.value,noPhoto:!o,height:"auto",width:"100%",firstName:(null===e||void 0===e||null===(Id=e.options)||void 0===Id||null===(Nd=Id.fields)||void 0===Nd?void 0:Nd.length)>0?null===l||void 0===l||null===(Dd=l.component_fields)||void 0===Dd||null===(Td=Dd.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.fields[0])&&(null===l||void 0===l?void 0:l.value)}))||void 0===Td?void 0:Td.value:""},u.createElement("div",{className:c.Z.simpleNames,style:{pointerEvents:"none",padding:"20px 10px 0 10px",color:"gray"}},u.createElement(Ne.default,{rowStyleSelected:{border:"2px solid var(--app-color-gray-light)"},card:!0,isReport:!1,"app-variant-is-mobile":"true",columns:null===e||void 0===e||null===(Pd=e.options)||void 0===Pd?void 0:Pd.fields,list:[(null!==(Od=null===l||void 0===l?void 0:l.component_fields)&&void 0!==Od?Od:[]).reduce((e,l)=>(0,s.Z)((0,s.Z)({},e),{},{[l.field_name]:l.value}),{})]}))):"No information found")}if("Details"===(null===e||void 0===e?void 0:e.data_type_name)){var Ad,zd,Ld,Rd,Ud,Fd,Wd;const l=null===(Ad=z.newStepComponents.find(l=>l.selected_fields.find(l=>{var o,i,t;return l.field_name===(null!==(o=null===(i=e.options)||void 0===i?void 0:i.field)&&void 0!==o?o:null===(t=e.options)||void 0===t?void 0:t.key)&&l.value})))||void 0===Ad||null===(zd=Ad.selected_fields)||void 0===zd?void 0:zd.find(l=>{var o,i,t;return l.field_name===(null!==(o=null===(i=e.options)||void 0===i?void 0:i.field)&&void 0!==o?o:null===(t=e.options)||void 0===t?void 0:t.key)});let o=$.find(o=>{var i;return o.module_id===(null===(i=e.options)||void 0===i?void 0:i.module_id)&&o.component_fields.find(o=>{var i;return o.value===(null===l||void 0===l?void 0:l.value)&&o.field_name===(null===(i=e.options)||void 0===i?void 0:i.key)})});if(!o){var qd,Yd;const l=null===(qd=z.components.find(l=>l.selected_fields.find(l=>{var o;return l.field_name===(null===(o=e.options)||void 0===o?void 0:o.key)&&l.value})))||void 0===qd||null===(Yd=qd.selected_fields)||void 0===Yd?void 0:Yd.find(l=>{var o;return l.field_name===(null===(o=e.options)||void 0===o?void 0:o.key)});l&&(o=$.find(o=>{var i;return o.module_id===(null===(i=e.options)||void 0===i?void 0:i.module_id)&&o.component_fields.find(o=>{var i;return o.value===(null===l||void 0===l?void 0:l.value)&&o.field_name===(null===(i=e.options)||void 0===i?void 0:i.key)})}))}return u.createElement("div",{style:{width:"100%"}},o?u.createElement($e.Z,{modern:!(!ml.tq&&null!==e&&void 0!==e&&null!==(Ld=e.options)&&void 0!==Ld&&Ld.table),tableHostSimple:c.Z.itemsContainer_ii,style:{width:"100%"},layeredColumns:null===e||void 0===e||null===(Rd=e.options)||void 0===Rd||null===(Ud=Rd.fields)||void 0===Ud?void 0:Ud.map(e=>({label:e})),list:[(null!==(Fd=null===(Wd=o)||void 0===Wd?void 0:Wd.component_fields)&&void 0!==Fd?Fd:[]).reduce((e,l)=>(0,s.Z)((0,s.Z)({},e),{},{[l.field_name]:l.value}),{})]}):"No information found")}if("Calendar"===(null===e||void 0===e?void 0:e.data_type_name))return u.createElement("div",{id:e.field_name,style:{width:"inherit",marginBottom:"160px"}},u.createElement(x.zx,{light:!0,clicked:()=>{var e,l;de(!0),(0,rl.Mk)(null!==(e=null===T||void 0===T||null===(l=T.created_by)||void 0===l?void 0:l.id)&&void 0!==e?e:V.id,!0).pipe((0,b.q)(1)).subscribe({next:()=>{de(!1)}})},loading:ne,icon:u.createElement("img",{src:p.Fd})}),!(wl||ne)&&u.createElement(fl.Scheduler,{height:1800,events:J.length>0?null===J||void 0===J||null===(td=J.filter(e=>{var l,o;return(null===e||void 0===e||null===(l=e.add_info)||void 0===l?void 0:l.module_id)===(null===(o=X.processModule)||void 0===o?void 0:o.module_id)}))||void 0===td?void 0:td.map(e=>{var l,o;return{event_id:e.id,title:e.description,start:new Date(Date.parse(null===(l=e.add_info)||void 0===l?void 0:l.start)),end:null!==e&&void 0!==e&&e.completed_at?new Date(Date.parse(e.completed_at)):new Date(Date.parse(null===(o=e.add_info)||void 0===o?void 0:o.end)),admin_id:2,color:"#50b500",editable:!1,deletable:!1}}):[],navigation:!0,view:Ll,agenda:(null===T||void 0===T||null===(nd=T.created_by)||void 0===nd?void 0:nd.id)!==V.id&&!(null===T||void 0===T||null===(dd=T.created_by)||void 0===dd||!dd.id),day:{startHour:0,endHour:24,cellRenderer:e=>{let{height:l,start:o,onClick:i}=e;const t=!1,n=(0,v.Z)(e,kl);return u.createElement(x.zx,(0,r.Z)({style:{height:"100%",background:"transparent",cursor:"pointer"},clicked:()=>{Dl(!0),zl(void 0)},disabled:t},n))}},month:(null===T||void 0===T||null===(ad=T.created_by)||void 0===ad?void 0:ad.id)!==V.id&&void 0!==(null===T||void 0===T?void 0:T.created_by)?null:{cellRenderer:e=>{let{height:l,start:o,onClick:i}=e;const t=!1,n=(0,v.Z)(e,Zl);return u.createElement(x.zx,(0,r.Z)({style:{height:"100%",background:"transparent",cursor:"pointer"},clicked:()=>{Dl(!0),zl(void 0)},disabled:t},n))}},week:(null===T||void 0===T||null===(rd=T.created_by)||void 0===rd?void 0:rd.id)!==V.id&&void 0!==(null===T||void 0===T?void 0:T.created_by)?null:{weekDays:[0,1,2,3,4,5],weekStartOn:6,startHour:0,endHour:25,step:60,cellRenderer:e=>{let{height:l,start:o,onClick:i}=e;const t=!1,n=(0,v.Z)(e,Il);return u.createElement(x.zx,(0,r.Z)({style:{height:"100%",background:"transparent",cursor:"pointer"},clicked:()=>{re(o),Dl(!0),zl(void 0)},disabled:t},n))}},onEventClick:e=>{Dl(!0),zl(null===J||void 0===J?void 0:J.find(l=>l.id===e.event_id))},onViewChange:e=>Rl(e)}),wl&&u.createElement(al.Z,{modalVisible:wl,heading:null!==(vd=null===e||void 0===e||null===(sd=e.options)||void 0===sd?void 0:sd.header)&&void 0!==vd?vd:Al?"Update Calendar":"Create New Calendar",labels:null===e||void 0===e?void 0:e.options,task:Al,isProcess:!0,blured:!1,onClose:()=>Dl(!1),isEdit:!!Al,statuses:null===e||void 0===e||null===(ud=e.options)||void 0===ud?void 0:ud.list,priority:null===e||void 0===e||null===(cd=e.options)||void 0===cd?void 0:cd.priority,span:null===e||void 0===e||null===(pd=e.options)||void 0===pd?void 0:pd.span,start_date:ae}));if("Lookup"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(N=e.options)||void 0===N||null===(ve=N.list)||void 0===ve?void 0:ve.length)>0&&(null===e||void 0===e||null===(ce=e.options)||void 0===ce||null===(hl=ce.source_id)||void 0===hl?void 0:hl.length)>0&&null!==e&&void 0!==e&&null!==(bl=e.options)&&void 0!==bl&&null!==(Cl=bl.target_id)&&void 0!==Cl&&Cl.length){var Bd,Hd,jd,Vd,Gd,Jd,Qd,Kd,Xd,$d,ea,la,oa,ia,ta,na,da,aa;const o=((e,l)=>{var o,i;if(!z)return;let t=null===(o=X.processModule.module)||void 0===o||null===(i=o.options)||void 0===i?void 0:i.global;var n,d,a,r,v,s,u;return t||(t=null===(n=z.components.find(l=>l.selected_fields.filter(l=>1==l.visible&&l.field_name===e).length>0))||void 0===n||null===(d=n.selected_fields.find(l=>l.field_name===e))||void 0===d?void 0:d.value),t||(t=null===(a=Oe.Z(Ae.Z("component_blueprints"),ze.Z)(null!==(s=null===X||void 0===X||null===(u=X.processModule)||void 0===u?void 0:u.completeSteps)&&void 0!==s?s:[]).find(l=>l.selected_fields.filter(l=>l.field_name===e&&"Value"===l.data_type_name).length>0))||void 0===a||null===(r=a.selected_fields.find(l=>l.field_name===e))||void 0===r||null===(v=r.options)||void 0===v?void 0:v.value),t?l.filter(l=>l[e]===t):l})(null===e||void 0===e||null===(Bd=e.options)||void 0===Bd?void 0:Bd.global,function(e,l,o){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],t=arguments.length>4?arguments[4]:void 0,n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],d=arguments.length>6&&void 0!==arguments[6]?arguments[6]:$;const a=d.filter(e=>{var l;return(null===(l=e.component_fields)||void 0===l?void 0:l.filter(e=>e.component_blueprint_id===o).length)>0});let r=[];return d.filter(l=>l.component_fields.filter(l=>l.component_blueprint_id===e).length>0).map(e=>{const o={};i.map(l=>{var i;o[l]=null===(i=e.component_fields.find(e=>e.field_name===l))||void 0===i?void 0:i.value});const d=e.component_fields.find(e=>e.field_name===l);void 0!==d&&a.filter(e=>e.component_fields.filter(e=>e.value===d.value&&e.field_name===l).length>0).map(l=>{var i,d,a;const v=null!==(i=null===(d=l.component_fields.find(e=>-1!==n.indexOf(e.field_name)))||void 0===d?void 0:d.value)&&void 0!==i?i:"";let u={};n.length>0&&n.map(e=>{const o=l.component_fields.find(l=>l.field_name===e);o&&(u[e]=o.value)});let c={};t.length>0&&t.map(o=>{const i=l.component_fields.find(e=>e.field_name===o);if(i)c[o]=i.value;else{const l=e.component_fields.find(e=>e.field_name===o);l&&(c[o]=l.value)}}),r=[...r,(0,s.Z)((0,s.Z)((0,s.Z)({label:v,value:l.id,field:l,grouping:(null===(a=Object.values(o))||void 0===a?void 0:a.length)>0?Object.values(o)[0]:"Fields"},o),c),u)]})}),r}(null===e||void 0===e||null===(Hd=e.options)||void 0===Hd?void 0:Hd.source_id,null===e||void 0===e||null===(jd=e.options)||void 0===jd?void 0:jd.common_field,null===e||void 0===e||null===(Vd=e.options)||void 0===Vd?void 0:Vd.target_id,null===e||void 0===e||null===(Gd=e.options)||void 0===Gd?void 0:Gd.sourceLabel,null===e||void 0===e||null===(Jd=e.options)||void 0===Jd?void 0:Jd.list,null!==(Qd=null===e||void 0===e||null===(Kd=e.options)||void 0===Kd?void 0:Kd.rlist)&&void 0!==Qd?Qd:[]));return u.createElement(u.Fragment,null,u.createElement("div",{id:e.field_name,style:{width:"100%",border:"Dropdown"===(null===e||void 0===e||null===(Xd=e.options)||void 0===Xd?void 0:Xd.selection)?"1px solid var(--app-color-gray-light)":"none"}},"Dropdown"===(null===e||void 0===e||null===($d=e.options)||void 0===$d?void 0:$d.selection)?u.createElement(Pe.yV,{items:o,groupedBy:"grouping",groupname:"grouping",triggerType:"chevron",title:fe,className:c.Z.dropdownClassContainer,inputClassName:c.Z.peoplePositionsSelectInput,molclassname:c.Z.peoplePositionsSelectMenuOverlay,moliclassname:c.Z.peoplePositionsSelectMenuOverlayItem,notags:"true",onChange:o=>{var i;o.length>0&&(null===e||void 0===e||null===(i=e.options)||void 0===i||i.list.map(l=>{const i=$l({field_name:l});if(-1!=i){const t=$.find(e=>e.id===o[0].value),n=t.component_fields.find(e=>e.field_name===l);if(void 0==n){const o=t.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.common_field)}),n=$.find(l=>l.component_fields.filter(l=>{var i;return l.value===o.value&&l.component_blueprint_id===(null===e||void 0===e||null===(i=e.options)||void 0===i?void 0:i.source_id)}).length>0);if(void 0!=n){const e=n.component_fields.find(e=>e.field_name===l);void 0!=e?(D.selected_fields[i].value=e.value,D.selected_fields[i].disabled=!0):D.selected_fields[i].value=""}else D.selected_fields[i].value=""}else D.selected_fields[i].value=n.value,D.selected_fields[i].disabled=!0}}),A("".concat(o[0].label,",").concat(o[0].value),l),_e("".concat(o[0].grouping)))}}):"Tiles"===(null===e||void 0===e||null===(ea=e.options)||void 0===ea?void 0:ea.selection)?u.createElement(Pe.qq,{items:o,columns:null===e||void 0===e||null===(la=e.options)||void 0===la?void 0:la.rlist,columnsG:null!==(oa=null===e||void 0===e||null===(ia=e.options)||void 0===ia?void 0:ia.sourceLabel)&&void 0!==oa?oa:[],initialSelected:null===e||void 0===e?void 0:e.value,selectedItems:null!==e&&void 0!==e&&null!==(ta=e.options)&&void 0!==ta&&ta.showAll?o:ye,showAll:1==(null===e||void 0===e||null===(na=e.options)||void 0===na?void 0:na.showAll),groupedBy:"grouping",groupname:"grouping",className:c.Z.peoplePositionsSelect,onGroupChange:e=>{ge(o.filter(l=>l.grouping===e))},onChange:o=>{var i;o&&(null===e||void 0===e||null===(i=e.options)||void 0===i||i.list.map(l=>{const i=$l({field_name:l});if(-1!=i){const t=$.find(e=>e.id===o.value),n=t.component_fields.find(e=>e.field_name===l);if(void 0==n){const o=t.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.common_field)}),n=$.find(l=>l.component_fields.filter(l=>{var i;return l.value===o.value&&l.component_blueprint_id===(null===e||void 0===e||null===(i=e.options)||void 0===i?void 0:i.source_id)}).length>0);if(void 0!=n){const e=n.component_fields.find(e=>e.field_name===l);void 0!=e?(D.selected_fields[i].value=e.value,D.selected_fields[i].disabled=!0):D.selected_fields[i].value=""}else D.selected_fields[i].value=""}else D.selected_fields[i].value=n.value,D.selected_fields[i].disabled=!0}}),A("".concat(o.label,",").concat(o.value),l))}}):u.createElement("div",{className:c.Z.openSelectWithSearchHost},u.createElement(Xe.Z,{title:null===e||void 0===e||null===(da=e.options)||void 0===da?void 0:da.sourceLabel,triggerType:"eyeglass",className:c.Z.openSelectWithSearch,molclassname:c.Z.menuOverlayList,moliclassname:c.Z.menuOverlayListItem,inputClassName:c.Z.menuOverlayListItemInput,inputContainerClassName:c.Z.menuOverlayListItemInputContainerClassName,items:Re.Z(Ue.Z("grouping"))(o).map(e=>({label:e.grouping,value:e.grouping})),onChange:l=>{document.getElementById(e.field_name).style.height="80px",ge(o.filter(e=>e.grouping===l.value))}}),u.createElement(Xe.Z,{title:null===e||void 0===e||null===(aa=e.options)||void 0===aa?void 0:aa.referenceLabel,triggerType:"eyeglass",className:c.Z.openSelectWithSearch,molclassname:c.Z.menuOverlayList,moliclassname:c.Z.menuOverlayListItem,inputClassName:c.Z.menuOverlayListItemInput,inputContainerClassName:c.Z.menuOverlayListItemInputContainerClassName,items:ye,onChange:o=>{var i;(document.getElementById(e.field_name).style.height="80px",o)&&(null===e||void 0===e||null===(i=e.options)||void 0===i||i.list.map(l=>{const i=$l({field_name:l});if(-1!=i){const t=$.find(e=>e.id===o.value),n=t.component_fields.find(e=>e.field_name===l);if(void 0==n){const o=t.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.common_field)}),n=$.find(l=>l.component_fields.filter(l=>{var i;return l.value===o.value&&l.component_blueprint_id===(null===e||void 0===e||null===(i=e.options)||void 0===i?void 0:i.source_id)}).length>0);if(void 0!=n){const e=n.component_fields.find(e=>e.field_name===l);void 0!=e?(D.selected_fields[i].value=e.value,D.selected_fields[i].disabled=!0):D.selected_fields[i].value=""}else D.selected_fields[i].value=""}else D.selected_fields[i].value=n.value,D.selected_fields[i].disabled=!0}}),A("".concat(o.label,",").concat(o.value),l))}}))))}if(("Step List"===(null===e||void 0===e?void 0:e.data_type_name)||"Component List"===(null===e||void 0===e?void 0:e.data_type_name))&&(null===e||void 0===e||null===(Ml=e.options)||void 0===Ml||null===(Nl=Ml.list)||void 0===Nl?void 0:Nl.length)>0&&(null===e||void 0===e||null===(Hl=e.options)||void 0===Hl||null===(no=Hl.component_id)||void 0===no?void 0:no.length)>0)return u.createElement("div",{style:{width:"100%",display:1==e.visible?"":"none",padding:ml.tq?"0":"50px"}},u.createElement(Ne.default,{columns:["No"].concat(null===e||void 0===e||null===(md=e.options)||void 0===md?void 0:md.list),list:(cc=null===e||void 0===e?void 0:e.options,z.components.filter(e=>e.id===cc.component_id).map((e,l)=>null===cc||void 0===cc?void 0:cc.list.reduce((o,i)=>(0,s.Z)((0,s.Z)({},o),{},{[i]:e.selected_fields.find(e=>e.field_name===i).value,temp_id:e.temp_id,No:l+1}),{}))),onListItemClick:e=>{B(e),D.selected_fields.map((l,o)=>{"output"!==l.data_type&&("Text"===l.data_type_name||"Date"===l.data_type_name||"Number"===l.data_type_name||"Link"===l.data_type_name?P(e[l.field_name],o):A(e[l.field_name],o),l.value=e[l.field_name],l.field.value=e[l.field_name])})}}));if("Checkbox"===(null===e||void 0===e?void 0:e.data_type_name))return u.createElement("div",{style:{display:"flex",fontWeight:"normal",width:"100%",padding:"10px 0 20px 0"}},(null===e||void 0===e||null===(fd=e.options)||void 0===fd?void 0:fd.landscape)&&(null===e||void 0===e||null===(_d=e.options)||void 0===_d?void 0:_d.value),u.createElement(el.X,{defaultChecked:null!==(yd=e.value)&&void 0!==yd&&yd,onChange:e=>{A(e.target.checked,l)}}),!(null!==e&&void 0!==e&&null!==(gd=e.options)&&void 0!==gd&&gd.landscape)&&(null===e||void 0===e||null===(hd=e.options)||void 0===hd?void 0:hd.value));if("Module"===(null===e||void 0===e?void 0:e.data_type_name)&&null!==(ao=e.options)&&void 0!==ao&&ao.module_id){var ra,va;const l=Q.find(l=>l.id===e.options.module_id);return u.createElement(u.Fragment,null,u.createElement("div",{style:{width:"inherit"}},u.createElement("div",{className:c.Z.iconsContainer,style:{display:"flex",alignContent:"space-between",justifyContent:"space-between",width:"100%"}},u.createElement(x.zx,{light:!0,title:null===e||void 0===e?void 0:e.field_name,message:"Preparing ".concat(l.name," entry..."),loading:ne,clicked:()=>{de(!0),(0,gl.zJ)(l.procedure.id).pipe((0,h.P)()).subscribe({next:l=>{var o;if(null!==e&&void 0!==e&&null!==(o=e.options)&&void 0!==o&&o.cmp){var i,t,n;const o=null===l||void 0===l||null===(i=l.steps)||void 0===i?void 0:i.find(e=>e.component_blueprints.filter(e=>{var l,o;return(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.allowMultipleInputs)&&(null===(o=e.selected_fields)||void 0===o?void 0:o.find(e=>"Transaction List"===e.data_type_name))}).length>0),a=null===o||void 0===o||null===(t=o.component_blueprints)||void 0===t?void 0:t.find(e=>{var l;return(null===(l=e.selected_fields)||void 0===l?void 0:l.filter(e=>"Transaction List"===e.data_type_name&&!0===e.visible).length)>0}),r=null===a||void 0===a||null===(n=a.selected_fields)||void 0===n?void 0:n.filter(e=>{var l;return null===(l=e.options)||void 0===l?void 0:l.mapToItem}).reduce((e,l)=>{const o=Fe.Z(We.Z("field_name",l.field_name),ze.Z(Ae.Z("selected_fields",z.components.concat(z.newStepComponents))));var i;return o&&(null===o||void 0===o?void 0:o.data_type_name)===l.data_type_name?(0,s.Z)((0,s.Z)({},e),{},{[null===(i=l.options)||void 0===i?void 0:i.mapToItem]:o.value}):e},{});var d;if(Object.values(r).length>0)(0,f.r6)(null===e||void 0===e||null===(d=e.options)||void 0===d?void 0:d.cmp).pipe((0,h.P)()).subscribe({next:o=>{var i,t;(0,f.np)((0,s.Z)((0,s.Z)({},r),{},{index:null===(i=o.component_items)||void 0===i?void 0:i.length,id:(0,w.mR)()}),null===e||void 0===e||null===(t=e.options)||void 0===t?void 0:t.cmp).pipe((0,h.P)()).subscribe({next:i=>{de(!1),yl.h.dispatch((0,ke.q4)((0,s.Z)((0,s.Z)({},l),{},{completeSteps:l.steps,steps:l.steps,stepIndex:0,module_id:e.options.module_id,module:Q.find(l=>l.id===e.options.module_id),selectedComponent:o}))),L({action:M._U.setModuleItems,value:[]}),L({action:M._U.setModuleNewStepComponents,value:[]}),L({action:M._U.setComponents,value:[]})},error:()=>{}})},error:()=>{}});else de(!1)}else de(!1),z.components=[],z.newStepComponents=[],e.options.fields.filter(e=>{var o,i;const t=null===(o=T.component_fields.find(l=>l.field_name===e))||void 0===o?void 0:o.value;null===(i=l.steps)||void 0===i||i.forEach(l=>{var o;null===l||void 0===l||null===(o=l.component_blueprints)||void 0===o||o.filter(e=>{var l;return!(null!==(l=e.options)&&void 0!==l&&l.asModuleList)}).forEach(l=>{const o=l.selected_fields.find(l=>l.field_name===e&&1==l.visible);o&&(o.value=t)}),l.component_blueprints.find(l=>l.selected_fields.filter(l=>l.field_name===e).length>0)&&L({action:M._U.addNewComponent,value:l.component_blueprints.filter(l=>l.selected_fields.filter(l=>l.field_name===e).length>0)})})}),yl.h.dispatch((0,ke.q4)((0,s.Z)((0,s.Z)({},l),{},{completeSteps:l.steps,steps:l.steps,stepIndex:1,module_id:e.options.module_id,module:Q.find(l=>l.id===e.options.module_id)}))),L({action:M._U.setCurrentStep,value:l.steps[1]}),L({action:M._U.setModuleItems,value:[]}),Yl("/begin-module")}})}}),(null===e||void 0===e||null===(ra=e.options)||void 0===ra?void 0:ra.showL)&&u.createElement(x.zx,{light:!0,clicked:()=>{de(!0),ie.componentsByModule[l.name]=0,(0,ul.vC)(l,w.Qc,w.R6,1).pipe((0,b.q)(1)).subscribe({next:e=>{var o;ie.componentsByModule[l.name]=(0,Qe.now)(),l.lastUpdate=(0,Qe.now)(),l.count=null!==(o=null===e||void 0===e?void 0:e.total)&&void 0!==o?o:0,de(!1)},complete:()=>{},error:()=>de(!1)})},icon:u.createElement("img",{src:p.Fd}),loading:ne,message:"Fetching ".concat(l.name,"...")})),(null===e||void 0===e||null===(va=e.options)||void 0===va?void 0:va.showL)&&u.createElement(Ne.default,{modern:!!ml.tq,className:c.Z.itemsContainer,columns:["Transaction","Date Created","Status"],list:qe.Z([Ye.Z(Be.Z("created_date"))])($.filter(e=>e.module_id===l.id)).filter(l=>{var o,i,t;const n=null===(o=Fe.Z(We.Z("field_name",null!==(i=null===(t=e.options)||void 0===t?void 0:t.key)&&void 0!==i?i:""),ze.Z(Ae.Z("selected_fields",z.components))))||void 0===o?void 0:o.value;return l.component_fields.find(l=>{var o;return l.value===n&&l.field_name===(null===(o=e.options)||void 0===o?void 0:o.key)})}).map(e=>({id:e.id,Transaction:e.title,"Date Created":"".concat(Ke()(new Date(e.created_date)).format("DD MMM YYYY h:mm a")),Status:e.status})),onCellClick:o=>{var i;if(null!==e&&void 0!==e&&null!==(i=e.options)&&void 0!==i&&i.viewable){const e=$.find(e=>e.id===o.data.id),i=te.find(e=>e.id===l.procedure.id&&e.steps.length>0);i?((0,f.DA)(i,e,void 0,L,Q,"New"===e.status||"None"===e.status||"Reopen"===e.status||V.id===i.user_id?1:0),Yl("/begin-module")):(0,gl.zJ)(l.procedure.id).pipe((0,h.P)()).subscribe({next:l=>{(0,f.DA)(l,$.find(e=>e.id===o.data.id),void 0,L,Q,"New"===e.status||"None"===e.status||"Reopen"===e.status||V.id===i.user_id?1:0),Yl("/begin-module")}})}}})))}if("Transaction List"===(null===e||void 0===e?void 0:e.data_type_name)&&null!==e&&void 0!==e&&null!==(ro=e.options)&&void 0!==ro&&ro.simple){var sa,ua,ca,pa,ma,fa,_a,ya,ga,ha;const o=qe.Z([He.Z(Be.Z("index"))])(null!==(sa=null!==e&&void 0!==e&&null!==(ua=e.options)&&void 0!==ua&&ua.type?z.items.filter(l=>{var o;return l.type===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.type)}):z.items)&&void 0!==sa?sa:[]);return u.createElement($e.Z,{tableStyle:{marginBottom:z.items.find(e=>e.edit)?"160px":"0"},style:{width:"100%",border:"0",minWidth:"70vw"},modern:!(!ml.tq&&"vertical"!==(null===e||void 0===e||null===(ca=e.options)||void 0===ca?void 0:ca.table)),tableHostSimple:c.Z.itemsContainer_ii,layeredColumns:null===D||void 0===D||null===(pa=D.selected_fields)||void 0===pa?void 0:pa.filter(e=>{var l;return null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.mapToItem}).map(e=>{var l,o;return null!==(l=e.options)&&void 0!==l&&l.group?{label:null===(o=e.options)||void 0===o?void 0:o.group,subColumns:[{label:e.field_name}]}:{label:e.field_name}}).concat((null===o||void 0===o?void 0:o.length)>0?[{label:"Actions"}]:[]),list:null===o||void 0===o?void 0:o.map((l,o)=>{var i,t;let n={index:o,Actions:u.createElement("div",{style:{display:"flex",justifyContent:"space-evenly",minWidth:"80px",margin:null!==l&&void 0!==l&&l.edit?"0":"20px 10px",maxWidth:"120px"}},!(null!==l&&void 0!==l&&l.edit)&&u.createElement(se.G,{icon:ue.IwR,onClick:()=>{l.edit=!0,L({action:M._U.setModuleItems,value:z.items}),ql(l)}}),(null===l||void 0===l?void 0:l.edit)&&u.createElement(se.G,{icon:ue.EsX,onClick:()=>{var o;l.edit=!1,L({action:M._U.setModuleItems,value:z.items}),null!==T&&void 0!==T&&T.id&&null!==e&&void 0!==e&&null!==(o=e.options)&&void 0!==o&&o.asap&&(0,f.np)(l,T.id).subscribe({})}}),(null===l||void 0===l?void 0:l.edit)&&u.createElement(se.G,{icon:ue.$aW,onClick:()=>{L({action:M._U.setModuleItems,value:z.items.filter(e=>e.id!==l.id).map((e,l)=>(0,s.Z)((0,s.Z)({},e),{},{index:l}))})}}))};return(null!==(i=null===D||void 0===D||null===(t=D.selected_fields)||void 0===t?void 0:t.filter(e=>{var l;return null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.mapToItem}))&&void 0!==i?i:[]).forEach(e=>{var i,t,d;const a=(0,w.sO)(l[e.options.mapToItem])?JSON.parse(null!==(i=l[e.options.mapToItem])&&void 0!==i?i:"{}"):{};n[e.field_name]=u.createElement("div",{style:{padding:"0"}},u.createElement(io,{item:l,index:o,enabled:!0,edit:null!==(t=null===l||void 0===l?void 0:l.edit)&&void 0!==t&&t,isItem:!0,field:(0,s.Z)((0,s.Z)({},e),{},{visible:!0,value:null!==(d=a[e.field_name])&&void 0!==d?d:""}),withLabel:!1,handleItem:(o,i)=>{a[e.field_name]=o,l[e.options.mapToItem]=JSON.stringify(a),L({action:M._U.setModuleItems,value:[...z.items.filter(e=>e.id!==l.id),l]})}}))}),n}),footer:(null===o||void 0===o?void 0:o.length)>0&&null!==(ma=e.options)&&void 0!==ma&&ma.footer?null===D||void 0===D||null===(fa=D.selected_fields)||void 0===fa?void 0:fa.filter(e=>{var l;return null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.mapToItem}).map((l,o)=>{var i,t;return null!==l&&void 0!==l&&null!==(i=l.options)&&void 0!==i&&i.footer?u.createElement("div",{style:{margin:"20px 0"}},to(null!==e&&void 0!==e&&null!==(t=e.options)&&void 0!==t&&t.type?z.items.filter(l=>{var o;return l.type===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.type)}):z.items,l,e)):0===o?"Totals:":""}).concat([""]):[]},(null===D||void 0===D||null===(_a=D.options)||void 0===_a?void 0:_a.allowMultipleInputs)&&u.createElement("div",{className:c.Z.iconsContainer,style:{display:"flex",justifyContent:"space-between"}},u.createElement(x.zx,{light:!0,style:{width:"32px"},clicked:()=>{var l,o;const i={id:(0,w.mR)(),item_code:"",value:"",alt_value:"",quantity:"",total:"",type:null!==(l=null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.type)&&void 0!==l?l:"",edit:!0,index:z.items.length};L({action:M._U.setModuleItems,value:[...z.items,i]}),ql(i)}},u.createElement(p.mm,null)),(null===(ya=e.options)||void 0===ya?void 0:ya.export)&&Kl(null===T||void 0===T?void 0:T.component_items,["item_code","quantity","value","alt_value","total"])),Wl&&u.createElement(x.U7,{hasCloseIcon:!0,blured:!1,scrollable:!0,isOpen:!!Wl,shadowedContainerStyle:{width:ml.tq?"100%":"35%"},onClose:()=>ql(void 0)},u.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",marginTop:"30px",padding:"10px"}},(null!==(ga=null===D||void 0===D||null===(ha=D.selected_fields)||void 0===ha?void 0:ha.filter(e=>{var l;return null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.mapToItem}))&&void 0!==ga?ga:[]).map((e,o)=>{var i,t;const n=(0,w.sO)(Wl[e.options.mapToItem])?JSON.parse(null!==(i=Wl[e.options.mapToItem])&&void 0!==i?i:"{}"):{};return u.createElement("div",{key:o,style:{padding:"0",display:"flex",marginBottom:"20px",alignItems:"left",width:"100%"}},u.createElement("p",{style:{fontWeight:"bold",width:"30%"}},e.field_name),u.createElement(io,{item:e,index:l,enabled:!0,edit:!0,isItem:!0,field:(0,s.Z)((0,s.Z)({},e),{},{visible:!0,value:null!==(t=n[e.field_name])&&void 0!==t?t:""}),withLabel:!1,handleItem:(l,o)=>{n[e.field_name]=l,Wl[e.options.mapToItem]=JSON.stringify(n),L({action:M._U.setModuleItems,value:[...z.items.filter(e=>e.id!==Wl.id),Wl]})}}))}),u.createElement(x.zx,{title:"Update",clicked:()=>{Wl.edit=!1,ql(void 0)},style:{width:"100px"}}))))}if("Transaction List"!==(null===e||void 0===e?void 0:e.data_type_name)||null===e||void 0===e||null===(vo=e.options)||void 0===vo||!vo.map||null!==e&&void 0!==e&&null!==(so=e.options)&&void 0!==so&&so.simple){if("ID"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(uo=e.options)||void 0===uo||null===(co=uo.id)||void 0===co?void 0:co.length)>0){var ba;const o=void 0===e.value||null===e.value?"".concat(null===e||void 0===e?void 0:e.options.id).concat(null===(null===ee||void 0===ee?void 0:ee.misc_info)?1:null!==(ba=null===ee||void 0===ee?void 0:ee.misc_info[null===e||void 0===e?void 0:e.field_name])&&void 0!==ba?ba:1):e.value;return e.value=o,e.field.value=o,z.id=o,u.createElement("input",{onBlur:o=>Pl(e.data_type_name,o.target.value,O,l,z),type:e.data_type,autoComplete:"none",value:o,className:c.Z.fieldTypeID,name:e.field_name,disabled:!0})}var xa,Ea,Ca,wa,Ma,Sa,ka,Za,Ia,Na,Da,Ta,Pa,Oa,Aa,za,La,Ra,Ua,Fa,Wa,qa,Ya,Ba,Ha,ja,Va,Ga,Ja,Qa,Ka,Xa,$a,er,lr,or,ir,tr,nr,dr,ar,rr,vr,sr,ur,cr,pr,mr,fr,_r,yr,gr,hr,br;if("Value Button"===(null===e||void 0===e?void 0:e.data_type_name))return u.createElement(Ne.default,{rowStyleSelected:{border:null!==e&&void 0!==e&&e.value?"2px solid black":"1px dashed black"},initialSelected:(null===(xa=e.options)||void 0===xa?void 0:xa.value)===(null===e||void 0===e?void 0:e.value)?0:void 0,modern:!0,isReport:!1,"app-variant-is-mobile":"true",columns:["Name","Description","Image"],list:[{Name:null===(Ea=e.options)||void 0===Ea?void 0:Ea.label,Description:null!==(Ca=null===e||void 0===e||null===(wa=e.options)||void 0===wa?void 0:wa.notes)&&void 0!==Ca?Ca:e.field_name,Image:null===(Ma=e.options)||void 0===Ma?void 0:Ma.image}],onListItemClick:()=>{var o;null!==e&&void 0!==e&&e.value?P(void 0,l):(null===D||void 0===D||null===(o=D.selected_fields)||void 0===o||o.filter(e=>"Value Button"===(null===e||void 0===e?void 0:e.data_type_name)).map(e=>{e.value=void 0}),P(e.options.value,l))}});if("Notes"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(po=e.options)||void 0===po||null===(mo=po.value)||void 0===mo?void 0:mo.length)>0)return null!==e&&void 0!==e&&null!==(Sa=e.options)&&void 0!==Sa&&Sa.rich?u.createElement(El(),{modules:{toolbar:!1},style:{width:"100%",fontFamily:"var(--app-text-main-font)"},readOnly:!0,defaultValue:null===e||void 0===e||null===(ka=e.options)||void 0===ka?void 0:ka.value,theme:"snow"}):u.createElement("p",{key:l,className:c.Z.labelInput,style:{width:"100%",marginTop:"10px"}},"".concat(null===e||void 0===e||null===(Za=e.options)||void 0===Za?void 0:Za.value));if("List Filter"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(fo=e.options)||void 0===fo||null===(_o=fo.value)||void 0===_o?void 0:_o.length)>0)return u.createElement(u.Fragment,null);if("Value"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(yo=e.options)||void 0===yo||null===(go=yo.module_id)||void 0===go?void 0:go.length)>0&&(null===e||void 0===e||null===(ho=e.options)||void 0===ho||null===(bo=ho.component_id)||void 0===bo?void 0:bo.length)>0)return u.createElement(u.Fragment,null,!0===(null===e||void 0===e||null===(Ia=e.options)||void 0===Ia?void 0:Ia.chart)?u.createElement(cl.Z,{title:e.field_name,series:null===(Na=D.selected_fields[l])||void 0===Na||null===(Da=Na.value)||void 0===Da?void 0:Da.split(",").map(e=>+e),labels:null!==e&&void 0!==e&&null!==(Ta=e.options)&&void 0!==Ta&&Ta.notes?null===e||void 0===e||null===(Pa=e.options)||void 0===Pa||null===(Oa=Pa.notes)||void 0===Oa?void 0:Oa.split(","):["To accomplish","Done"]}):u.createElement("input",{value:null===e||void 0===e||null===(Aa=e.options)||void 0===Aa?void 0:Aa.value,className:c.Z.fieldTypeInput,name:e.field_name,disabled:!0}));if("Value"===(null===e||void 0===e?void 0:e.data_type_name)){var xr,Er,Cr,wr;const l=null===(xr=z.newStepComponents)||void 0===xr||null===(Er=xr.find(l=>{var o;return null===(o=l.selected_fields)||void 0===o?void 0:o.find(l=>l.field_name===(null===e||void 0===e?void 0:e.field_name))}))||void 0===Er||null===(Cr=Er.selected_fields)||void 0===Cr?void 0:Cr.find(l=>l.field_name===(null===e||void 0===e?void 0:e.field_name));return u.createElement("label",{className:c.Z.fieldTypeInput},null!==e&&void 0!==e&&null!==(wr=e.options)&&void 0!==wr&&wr.date?Ke()(new Date(null===l||void 0===l?void 0:l.value)).format("MMM DD YYYY"):null===l||void 0===l?void 0:l.value)}if("URL"===e.data_type_name)return u.createElement(u.Fragment,null,null!==e&&void 0!==e&&null!==(za=e.options.value)&&void 0!==za&&za.includes("jpg")||null!==e&&void 0!==e&&null!==(La=e.options.value)&&void 0!==La&&La.includes("jpeg")||null!==e&&void 0!==e&&null!==(Ra=e.options)&&void 0!==Ra&&Ra.image||null!==e&&void 0!==e&&null!==(Ua=e.options.value)&&void 0!==Ua&&Ua.includes("png")?u.createElement("div",{onClick:()=>window.open(null===e||void 0===e?void 0:e.options.value,"_blank")},u.createElement("img",{alt:"lg",onError:e=>e.target.src="https://i.quotev.com/b2gtjqawaaaa.jpg",src:null===e||void 0===e?void 0:e.options.value,style:{width:"100%",height:"100%",cursor:"pointer"}})):null!==e&&void 0!==e&&null!==(Fa=e.options.value)&&void 0!==Fa&&Fa.includes("pdf")?u.createElement("div",{style:{width:"inherit"},onClick:()=>window.open(null===e||void 0===e?void 0:e.options.value,"_blank")},u.createElement("embed",{src:"".concat(null===e||void 0===e?void 0:e.options.value,"#toolbar=0&navpanes=0&scrollbar=0&zoom=100%"),width:"100%",height:"1000px"})):u.createElement("div",{style:{width:"inherit"},onClick:()=>window.open(null===e||void 0===e?void 0:e.options.value,"_blank")},u.createElement("textarea",{disabled:!0,onChange:()=>{},autoComplete:"none",value:null===(null===e||void 0===e?void 0:e.options.value)?"":null===e||void 0===e?void 0:e.options.value,className:c.Z.fieldTypeInput,style:{height:"auto",width:"inherit",cursor:"pointer"},name:e.field_name})));if("Chart"===e.data_type_name){var Mr,Sr,kr,Zr,Ir,Nr,Dr,Tr,Pr,Or,Ar,zr,Lr,Rr,Ur,Fr;const l=null===(Mr=z.newStepComponents.find(l=>l.id===e.options.component_id))||void 0===Mr||null===(Sr=Mr.selected_fields.find(l=>l.field_name===e.options.key))||void 0===Sr?void 0:Sr.value,o=null!==(kr=null===e||void 0===e||null===(Zr=e.options)||void 0===Zr?void 0:Zr.config)&&void 0!==kr?kr:w.HR;let i=[],t=[];if($.filter(l=>l.module_id===(null===e||void 0===e?void 0:e.module_id)).filter(l=>{var o;const i=(null!==(o=null===l||void 0===l?void 0:l.component_fields)&&void 0!==o?o:[]).find(l=>l.field_name===(null===e||void 0===e?void 0:e.options.key));i&&(t=[...t,i.value])}),"Line"===(null===e||void 0===e||null===(Ir=e.options)||void 0===Ir?void 0:Ir.orientation)||"area"===(null===o||void 0===o||null===(Nr=o.chart)||void 0===Nr?void 0:Nr.type)||"Column"===(null===e||void 0===e||null===(Dr=e.options)||void 0===Dr?void 0:Dr.orientation)||"bar"===(null===o||void 0===o||null===(Tr=o.chart)||void 0===Tr?void 0:Tr.type))[...new Set(t)].map(e=>{i=[...i,{name:e,data:[]}]});else if("Donut"===(null===e||void 0===e||null===(Pr=e.options)||void 0===Pr?void 0:Pr.orientation)||"donut"===(null===o||void 0===o||null===(Or=o.chart)||void 0===Or?void 0:Or.type)){var Wr,qr,Yr;i=l?null===l||void 0===l?void 0:l.split(",").map(e=>+e):[...new Set(t)].map(l=>{var o,i,n,d,a;return"occurences"===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.operation)?t.filter(e=>e===l).length:null!==e&&void 0!==e&&null!==(i=e.options)&&void 0!==i&&i.items?null===(d=Oe.Z(Ae.Z("component_items"),ze.Z)($.filter(o=>o.module_id===e.module_id&&o.component_fields.find(o=>o.field_name===e.options.key&&o.value===l))).map(l=>{var o;return+l[null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.items[0]]}))||void 0===d?void 0:d.reduce((e,l)=>e+l,0):null!==e&&void 0!==e&&null!==(n=e.options)&&void 0!==n&&n.list?null===(a=Oe.Z(Ae.Z("component_fields"),ze.Z)($.filter(o=>o.module_id===e.module_id&&o.component_fields.find(o=>o.field_name===e.options.key&&o.value===l))).map(l=>l.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.list[0])}).value))||void 0===a?void 0:a.reduce((e,l)=>e+ +l,0):0}),o.labels=null!==e&&void 0!==e&&null!==(Wr=e.options)&&void 0!==Wr&&Wr.notes?null===e||void 0===e||null===(qr=e.options)||void 0===qr||null===(Yr=qr.notes)||void 0===Yr?void 0:Yr.split(","):[...new Set(t)],o.plotOptions.pie.donut.labels.total.label=e.field_name}return u.createElement(u.Fragment,null,l&&u.createElement("div",{className:"grid grid-cols-12 gap-4 md:gap-6 2xl:gap-7.5",style:{display:"flex",width:"inherit",border:"1px dashed gray",justifyContent:"center",padding:"20px 0"}},u.createElement(pl.Z,{config:o,type:null!==(Ar=null===o||void 0===o||null===(zr=o.chart)||void 0===zr?void 0:zr.type)&&void 0!==Ar?Ar:"",orientation:null===e||void 0===e||null===(Lr=e.options)||void 0===Lr?void 0:Lr.orientation,series:i,title:e.field_name,labels:null!==e&&void 0!==e&&null!==(Rr=e.options)&&void 0!==Rr&&Rr.notes?null===e||void 0===e||null===(Ur=e.options)||void 0===Ur||null===(Fr=Ur.notes)||void 0===Fr?void 0:Fr.split(","):["Target","Actual"]})))}if("Item Formula"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(xo=e.options)||void 0===xo||null===(Eo=xo.operator)||void 0===Eo?void 0:Eo.length)>0&&!1===H&&null!==e&&void 0!==e&&e.visible)return null;if("Formula"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(Co=e.options)||void 0===Co||null===(wo=Co.operator)||void 0===wo?void 0:wo.length)>0&&!1===H&&null!==e&&void 0!==e&&e.visible){var Br,Hr,jr,Vr,Gr;const l=z.newStepComponents.filter(e=>null===e.options||(void 0===e.allowMultipleInputs||!1===e.options.allowMultipleInputs)),o=(0,w.LV)(null===e||void 0===e?void 0:e.options,D.selected_fields.filter(l=>e.options.list.includes(l.field_name)&&!l.options.mapToItem),[...z.components.filter(e=>l.every(l=>l.id!==e.id)),...Le.Z(e=>e.selected_fields.filter(e=>""===e.value).length>0,l)],null!==(Br=null===z||void 0===z?void 0:z.items)&&void 0!==Br?Br:[],null!==(Hr=null===z||void 0===z?void 0:z.newStepComponents)&&void 0!==Hr?Hr:[]);return void 0!==o&&(e.value=o,e.field.value=o),"bar"===(null===e||void 0===e||null===(jr=e.options)||void 0===jr?void 0:jr.display)?u.createElement("div",{style:{display:"flex",height:"30px",width:"100%"}},u.createElement("div",{style:{height:"30px",width:"100%",backgroundColor:null===e||void 0===e||null===(Vr=e.options)||void 0===Vr?void 0:Vr.maxC,display:"flex",flexDirection:"column"}},u.createElement("input",{value:o||0,className:c.Z.fieldTypeInput,name:e.field_name,disabled:!0,style:{color:"transparent",height:"30px",width:"".concat(+o/+e.options.max*100,"%"),backgroundColor:null===e||void 0===e||null===(Gr=e.options)||void 0===Gr?void 0:Gr.barC}})),u.createElement("label",{className:c.Z.fieldTypeInput,style:{width:"2%"}},"".concat(+o/+e.options.max*100,"%"))):u.createElement("input",{value:o||0,className:c.Z.fieldTypeInput,name:e.field_name,disabled:!0,style:{border:"1px solid var(--app-color-gray-light)"}})}if("Radio"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(Mo=e.options)||void 0===Mo||null===(So=Mo.list)||void 0===So?void 0:So.length)>0)return u.createElement("div",{style:{width:"100%",border:"1px solid var(--app-color-gray-light)",padding:"20px",fontSize:"16px",display:"flex",flexDirection:"column",marginTop:"10px"}},null===e||void 0===e||null===(Wa=e.options)||void 0===Wa?void 0:Wa.list.map((o,i)=>u.createElement("div",{key:i,style:{display:"flex",padding:"20px 0"}},u.createElement("input",{style:{margin:"0 20px"},type:"radio",id:o,name:e.field_name,value:o,checked:(null===e||void 0===e?void 0:e.value)===o,onChange:e=>{var o;return A(null===(o=e.target)||void 0===o?void 0:o.value,l)}}),u.createElement("label",{htmlFor:o,for:o},o))));if("Dropdown"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(ko=e.options)||void 0===ko||null===(Zo=ko.list)||void 0===Zo?void 0:Zo.length)>0)return u.createElement("div",{style:{width:"100%",border:"1px solid var(--app-color-gray-light)"}},u.createElement(y.Z,{key:l,visible:e.visible,mandatory:e.mandatory,items:null===e||void 0===e||null===(qa=e.options)||void 0===qa?void 0:qa.list.map(e=>({label:e,value:e})),className:c.Z.dropdownClassContainer,error:e.errors,onClicked:e=>Se(e?"180px":"50px"),onChange:e=>{Se("50px"),A(e,l)},max:+(null!==(Ya=null===e||void 0===e||null===(Ba=e.options)||void 0===Ba?void 0:Ba.max)&&void 0!==Ya?Ya:0),selectionType:null===e||void 0===e||null===(Ha=e.options)||void 0===Ha?void 0:Ha.type,fieldIcon:e.icon,backgroundColor:null!==e&&void 0!==e&&null!==(ja=e.options)&&void 0!==ja&&ja.valueC&&null!==e&&void 0!==e&&e.value?null===e||void 0===e||null===(Va=e.options)||void 0===Va?void 0:Va.valueC:"",value:void 0===e.value||null===e.value?"":e.value}));if("Dropdown"===(null===e||void 0===e?void 0:e.data_type_name)&&"modules"===(null===e||void 0===e||null===(Io=e.options)||void 0===Io?void 0:Io.type))return u.createElement("div",{style:{width:"100%",border:"1px solid var(--app-color-gray-light)"}},u.createElement(y.Z,{key:l,visible:e.visible,mandatory:e.mandatory,items:Q.map(e=>({label:e.name,value:e.id})),className:c.Z.dropdownClassContainer,error:e.errors,onClicked:e=>Se(e?"180px":"50px"),onChange:e=>{Se("50px"),A(e,l)},selectionType:null===e||void 0===e||null===(Ga=e.options)||void 0===Ga?void 0:Ga.type,fieldIcon:e.icon,backgroundColor:null!==e&&void 0!==e&&null!==(Ja=e.options)&&void 0!==Ja&&Ja.valueC&&null!==e&&void 0!==e&&e.value?null===e||void 0===e||null===(Qa=e.options)||void 0===Qa?void 0:Qa.valueC:"",value:void 0===e.value||null===e.value?"":null===(Ka=Q.map(e=>({label:e.name,value:e.id})).find(l=>l.value===e.value))||void 0===Ka?void 0:Ka.label}));if("Payments"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(No=e.options)||void 0===No||null===(Do=No.list)||void 0===Do?void 0:Do.length)>0)return u.createElement("div",{style:{width:"100%",border:"0px solid var(--app-color-gray-dark)",pointerEvents:!0===(null===X||void 0===X||null===(Xa=X.processModule)||void 0===Xa?void 0:Xa.isUpdating)&&null!==e&&void 0!==e&&e.value?"none":""}},null!==T&&void 0!==T&&null!==($a=T.payments)&&void 0!==$a&&$a.stripe_id?u.createElement("div",{style:{padding:"10px 5px 10px 5px",width:"100%",border:"1px solid var(--app-color-gray-lighter)"}},"".concat(null===e||void 0===e?void 0:e.value,", PID: ").concat(null===T||void 0===T||null===(rr=T.payments)||void 0===rr?void 0:rr.stripe_id.slice(0,6))):u.createElement(y.Z,{key:l,className:c.Z.dropdownSelectComponent,visible:e.visible,mandatory:e.mandatory,items:!0===(null===(er=X.processModule)||void 0===er||null===(lr=er.module)||void 0===lr||null===(or=lr.options)||void 0===or?void 0:or.credits)?[...null!==(ir=null===e||void 0===e||null===(tr=e.options)||void 0===tr?void 0:tr.list.map(e=>({label:e,value:e})))&&void 0!==ir?ir:[],{label:"Wallet",value:"Wallet"}]:null===e||void 0===e||null===(nr=e.options)||void 0===nr?void 0:nr.list.map(e=>({label:e,value:e})),error:0===Ze.length?e.errors:Ze,onClicked:e=>Se(e?"180px":"50px"),onChange:o=>{if(o){var i,t,n,d,a,r,v,s,u,c,p,m,f,_;const C=null===(i=z.newStepComponents.find(l=>l.selected_fields.filter(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.paymentField)}).length>0))||void 0===i||null===(t=i.selected_fields)||void 0===t?void 0:t.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.paymentField)}),w=null===(n=z.components.find(l=>l.selected_fields.filter(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.paymentField)}).length>0))||void 0===n||null===(d=n.selected_fields)||void 0===d?void 0:d.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.paymentField)}),M=null===(a=z.currentStep)||void 0===a||null===(r=a.component_blueprints)||void 0===r||null===(v=r.find(l=>{var o;return null===l||void 0===l||null===(o=l.selected_fields)||void 0===o?void 0:o.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.paymentField)})}))||void 0===v||null===(s=v.selected_fields)||void 0===s?void 0:s.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.paymentField)});if(Ze[l]="",+(null!==(u=null===C||void 0===C?void 0:C.value)&&void 0!==u?u:0)>0)z.total=C.value,z.plan=C.value;else if(+(null!==(c=null===w||void 0===w?void 0:w.value)&&void 0!==c?c:0)>0)z.total=w.value,z.plan=w.value;else{if(!(+(null!==(p=null===M||void 0===M?void 0:M.value)&&void 0!==p?p:0)>0))return Ze[l]="Please enter a payment amount in the designated field",De([]),void setTimeout(()=>De(Ze));z.total=M.value,z.plan=M.value}var y,g,h,b,x,E;if(1==(null===(m=X.processModule)||void 0===m||null===(f=m.module)||void 0===f||null===(_=f.options)||void 0===_?void 0:_.credits)&&"Wallet"===o){if(+(null!==(y=V.wallet)&&void 0!==y?y:0)<+z.total)return Ze[l]="Insufficient wallet balance",De([]),void setTimeout(()=>De(Ze))}else if(1==(null===(g=X.processModule)||void 0===g||null===(h=g.module)||void 0===h||null===(b=h.options)||void 0===b?void 0:b.credits)&&"Points"===o)if(+(null!==(x=null===(E=V.options)||void 0===E?void 0:E.points)&&void 0!==x?x:0)<+z.total)return Ze[l]="Insufficient points balance",De([]),void setTimeout(()=>De(Ze));De([]),Se("50px"),A(o,l)}},selectionType:"Dropdown",fieldIcon:e.icon,backgroundColor:null!==e&&void 0!==e&&null!==(dr=e.options)&&void 0!==dr&&dr.valueC&&null!==e&&void 0!==e&&e.value?null===e||void 0===e||null===(ar=e.options)||void 0===ar?void 0:ar.valueC:"",value:void 0===e.value||null===e.value?"":e.value,placeholder:""}));if("Positions"===(null===e||void 0===e?void 0:e.data_type_name)&&"multiple"===(null===e||void 0===e||null===(To=e.options)||void 0===To?void 0:To.type))return u.createElement("div",{style:{width:"100%",border:"1px solid var(--app-color-gray-dark)"}},u.createElement(y.Z,{onOpen:e=>{Se("50px"===Me?"180px":"50px")},visible:null===e||void 0===e?void 0:e.visible,mandatory:null===e||void 0===e?void 0:e.mandatory,className:c.Z.dropdownClassContainer,items:oe.filter(l=>{var o,i;return null===e||void 0===e||null===(o=e.options)||void 0===o||null===(i=o.position_id)||void 0===i?void 0:i.includes(null===l||void 0===l?void 0:l.value)}),backgroundColor:null!==e&&void 0!==e&&null!==(vr=e.options)&&void 0!==vr&&vr.valueC&&null!==e&&void 0!==e&&e.value?null===e||void 0===e||null===(sr=e.options)||void 0===sr?void 0:sr.valueC:"",value:e.value,loading:ne,error:null===e||void 0===e?void 0:e.errors,onChange:e=>{A(e,l)},selectionType:"multiple",fieldIcon:null===e||void 0===e?void 0:e.icon,placeholder:""}));if("Positions"===(null===e||void 0===e?void 0:e.data_type_name)&&null!==e&&void 0!==e&&null!==(Po=e.options)&&void 0!==Po&&Po.calendar){var Jr,Qr,Kr,Xr,$r,ev,lv,ov,iv,tv,nv,dv,av,rv,vv;const o=JSON.parse(null!==(Jr=null===e||void 0===e?void 0:e.value)&&void 0!==Jr?Jr:JSON.stringify({user:0})),i=J.find(e=>e.id===(null===o||void 0===o?void 0:o.task)),t=null===J||void 0===J?void 0:J.filter(e=>{var l,i,t,n;return(null===e||void 0===e||null===(l=e.add_info)||void 0===l?void 0:l.module_id)===(null===(i=X.processModule)||void 0===i?void 0:i.module_id)&&e.creator.id===(null===o||void 0===o?void 0:o.user)&&!(null!==e&&void 0!==e&&null!==(t=e.assignee)&&void 0!==t&&t.id)&&Ke()((0,Qe.now)()).diff(Ke()(null===e||void 0===e||null===(n=e.add_info)||void 0===n?void 0:n.start),"seconds")<0});return u.createElement("div",{style:{display:"flex",flexDirection:"column",width:"100%"}},u.createElement("div",{style:{width:"100%",border:"1px solid var(--app-color-gray-dark)"}},u.createElement(y.Z,{visible:null===e||void 0===e?void 0:e.visible,mandatory:null===e||void 0===e?void 0:e.mandatory,className:"multiple"===(null===e||void 0===e||null===(Qr=e.options)||void 0===Qr?void 0:Qr.type)?c.Z.dropdownHeightClassContainer:c.Z.dropdownClassContainer,items:oe.filter(l=>{var o,i;return null===e||void 0===e||null===(o=e.options)||void 0===o||null===(i=o.position_id)||void 0===i?void 0:i.includes(null===l||void 0===l?void 0:l.value)}),backgroundColor:null!==e&&void 0!==e&&null!==(Kr=e.options)&&void 0!==Kr&&Kr.valueC&&null!==e&&void 0!==e&&e.value?null===e||void 0===e||null===(Xr=e.options)||void 0===Xr?void 0:Xr.valueC:"",value:null===($r=oe.find(e=>e.value===(null===o||void 0===o?void 0:o.pos)))||void 0===$r?void 0:$r.label,loading:ne,error:null===e||void 0===e?void 0:e.errors,onChange:e=>{e.length>0&&(o.pos=void 0,o.user=void 0,A(JSON.stringify(o),l),(0,g.n0)([e]).pipe((0,b.q)(1)).subscribe({next:i=>{Vl(i),setTimeout(()=>{o.pos=e,A(JSON.stringify(o),l)},10)}}))},selectionType:null===e||void 0===e||null===(ev=e.options)||void 0===ev?void 0:ev.type,fieldIcon:null===e||void 0===e?void 0:e.icon})),u.createElement("div",{style:{width:"100%"}},0==(null===jl||void 0===jl?void 0:jl.length)&&u.createElement("p",null,"No ".concat(e.field_name," found")),!i&&u.createElement(Ne.default,{rowStyleSelected:{border:"2px solid black"},initialSelected:null!==e&&void 0!==e&&e.value?jl.filter(e=>{var l,i;return(null===e||void 0===e||null===(l=e.user)||void 0===l||null===(i=l.positions)||void 0===i?void 0:i.filter(e=>(null===o||void 0===o?void 0:o.pos)===(null===e||void 0===e?void 0:e.id)).length)>0}).map(e=>e.value).indexOf(null===o||void 0===o?void 0:o.user):void 0,card:!0,isReport:!1,"app-variant-is-mobile":"true",columns:["Name","Location","About","Photo","Ratings"],list:jl.filter(e=>{var l,i;return(null===e||void 0===e||null===(l=e.user)||void 0===l||null===(i=l.positions)||void 0===i?void 0:i.filter(e=>(null===o||void 0===o?void 0:o.pos)===(null===e||void 0===e?void 0:e.id)).length)>0}).map(e=>{var l,o,i,t,n,d,a,r;const v=null===e||void 0===e||null===(l=e.user)||void 0===l||null===(o=l.ratings)||void 0===o?void 0:o.map(e=>+e.ratings);return{Name:"".concat(e.user.first_name," ").concat(e.user.last_name),Location:null===(i=e.user)||void 0===i?void 0:i.city,About:null!==(t=null===(n=e.user.options)||void 0===n?void 0:n.info)&&void 0!==t?t:null===(d=e.user)||void 0===d?void 0:d.positions.map(e=>e.name).toString().replace(",",", "),id:e.user.id,Photo:null!=(null===(a=e.user)||void 0===a?void 0:a.photo)?null===(r=e.user)||void 0===r?void 0:r.photo:null===ee||void 0===ee?void 0:ee.logo,Ratings:(null===v||void 0===v?void 0:v.length)>0&&u.createElement("div",{className:c.Z.simpleNames},Array(Math.round(je.Z(Ve.Z,[Ge.Z,Je.Z])(v))).fill(0).map((e,l)=>u.createElement(se.G,{key:l,icon:ue.Tab,style:{color:"var(--app-color-blue)"}})),Array(5-Math.round(je.Z(Ve.Z,[Ge.Z,Je.Z])(v))).fill(0).map((e,l)=>u.createElement(se.G,{key:l,icon:ue.Tab,style:{color:"lightgray"}})))}}),onListItemClick:e=>{if(e){const i=jl.find(l=>l.value===e.id);o.user=null===i||void 0===i?void 0:i.value,A(JSON.stringify(o),l),(0,rl.Mk)(null===i||void 0===i?void 0:i.value,!0).pipe((0,b.q)(1)).subscribe({})}}},(null===t||void 0===t?void 0:t.length)>0&&u.createElement("p",null,"Schedules"),(null===t||void 0===t?void 0:t.length)>0&&u.createElement(dl.tq,{slidesPerView:3,centeredSlides:!0,spaceBetween:5,initialSlide:1,pagination:{clickable:!0,dynamicBullets:!0},modules:[nl.pt,nl.tl],className:"mySwiper",style:{border:"0.8px dashed gray",padding:"5px",height:"200px"}},null===t||void 0===t?void 0:t.map((e,l)=>u.createElement(dl.o5,{key:l+100,className:c.Z.swiperslide},u.createElement("div",{className:c.Z.dashboardCard,onClick:()=>{Dl(!0),zl(e)}},u.createElement("div",{style:{fontSize:"10px"}},Ke()(new Date(e.add_info.start)).format("h:mm a")),e.add_info.end!==e.add_info.start&&u.createElement("div",{style:{fontSize:"10px"}},Ke()(new Date(e.add_info.end)).format("h:mm a")),u.createElement("hr",{style:{border:"0.8px dashed gray"}}),u.createElement("p",{style:{fontSize:"12px",fontWeight:"bold"}},Ke()(new Date(e.add_info.start)).format("MMM")),u.createElement("div",{style:{fontSize:"20px",fontWeight:"bold"}},Ke()(new Date(e.add_info.start)).format("DD"))))))),i&&u.createElement(Ne.default,{modern:!0,isReport:!1,"app-variant-is-mobile":"true",columns:["Responsible",null!==(lv=null===e||void 0===e||null===(ov=e.options)||void 0===ov?void 0:ov.header)&&void 0!==lv?lv:"Name",null!==(iv=null===e||void 0===e||null===(tv=e.options)||void 0===tv?void 0:tv.start)&&void 0!==iv?iv:"Date","Photo"],list:[i].map(l=>{var o,i,t,n,d,a;return{[null!==(o=null===e||void 0===e||null===(i=e.options)||void 0===i?void 0:i.header)&&void 0!==o?o:"Name"]:l.name,[null!==(t=null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.start)&&void 0!==t?t:"Date"]:Ke()(new Date(null===(d=l.add_info)||void 0===d?void 0:d.start)).format("MMM DD h:mm a"),Responsible:"".concat(l.creator.first_name," ").concat(l.creator.last_name),Photo:null===(a=l.creator)||void 0===a?void 0:a.photo}}),onListItemClick:e=>{e&&(Dl(!0),zl(i))}}),wl&&u.createElement(al.Z,{save:!1,modalVisible:wl,heading:null!==(nv=null===e||void 0===e||null===(dv=e.options)||void 0===dv?void 0:dv.header)&&void 0!==nv?nv:Al?"Update Calendar":"Create New Calendar",labels:null===e||void 0===e?void 0:e.options,task:Al,isProcess:!0,blured:!1,onClose:()=>Dl(!1),isEdit:!!Al,statuses:null===e||void 0===e||null===(av=e.options)||void 0===av?void 0:av.list,priority:null===e||void 0===e||null===(rv=e.options)||void 0===rv?void 0:rv.priority,span:null===e||void 0===e||null===(vv=e.options)||void 0===vv?void 0:vv.span,start_date:ae,onUpdate:i=>{if(i.creator.id!==(null===V||void 0===V?void 0:V.id)&&(null===i||void 0===i?void 0:i.assignee_id)===(null===V||void 0===V?void 0:V.id)){var t;if(z.assigned_to=i.creator.id,o.task=null===i||void 0===i?void 0:i.id,null!==i&&void 0!==i&&null!==(t=i.add_info)&&void 0!==t&&t.value){var n,d,a,r,v,s,u,c,p;o.value=null===i||void 0===i||null===(n=i.add_info)||void 0===n?void 0:n.value;const l=null===(d=z.components.find(l=>l.selected_fields.find(l=>{var o;return l.field_name===(null===(o=e.options)||void 0===o?void 0:o.valueL)})))||void 0===d?void 0:d.selected_fields.find(l=>{var o;return l.field_name===(null===(o=e.options)||void 0===o?void 0:o.valueL)});var m;if(l)l.value=null===i||void 0===i||null===(m=i.add_info)||void 0===m?void 0:m.value;const t=null===(a=z.newStepComponents.find(l=>l.selected_fields.find(l=>{var o;return l.field_name===(null===(o=e.options)||void 0===o?void 0:o.valueL)})))||void 0===a?void 0:a.selected_fields.find(l=>{var o;return l.field_name===(null===(o=e.options)||void 0===o?void 0:o.valueL)});var f;if(t)t.value=null===i||void 0===i||null===(f=i.add_info)||void 0===f?void 0:f.value;const y=null===(r=X.processModule)||void 0===r||null===(v=r.steps)||void 0===v||null===(s=v.find(l=>{var o;return null===(o=l.component_blueprints)||void 0===o?void 0:o.find(l=>{var o;return null===l||void 0===l||null===(o=l.selected_fields)||void 0===o?void 0:o.find(l=>{var o;return l.field_name===(null===(o=e.options)||void 0===o?void 0:o.valueL)})})}))||void 0===s||null===(u=s.component_blueprints)||void 0===u||null===(c=u.find(l=>{var o;return null===l||void 0===l||null===(o=l.selected_fields)||void 0===o?void 0:o.find(l=>{var o;return l.field_name===(null===(o=e.options)||void 0===o?void 0:o.valueL)})}))||void 0===c||null===(p=c.selected_fields)||void 0===p?void 0:p.find(l=>{var o;return l.field_name===(null===(o=e.options)||void 0===o?void 0:o.valueL)});var _;if(y)y.value=null===i||void 0===i||null===(_=i.add_info)||void 0===_?void 0:_.value}A(JSON.stringify(o),l)}}})))}if("Positions"===(null===e||void 0===e?void 0:e.data_type_name))return u.createElement("div",{style:{width:"100%",border:"1px solid var(--app-color-gray-light)"}},u.createElement(y.Z,{visible:null===e||void 0===e?void 0:e.visible,mandatory:null===e||void 0===e?void 0:e.mandatory,className:"multiple"===(null===e||void 0===e||null===(ur=e.options)||void 0===ur?void 0:ur.type)?c.Z.dropdownHeightClassContainer:c.Z.dropdownClassContainer,items:oe.filter(l=>{var o,i;return null===e||void 0===e||null===(o=e.options)||void 0===o||null===(i=o.position_id)||void 0===i?void 0:i.includes(null===l||void 0===l?void 0:l.value)}),backgroundColor:null!==e&&void 0!==e&&null!==(cr=e.options)&&void 0!==cr&&cr.valueC&&null!==e&&void 0!==e&&e.value?null===e||void 0===e||null===(pr=e.options)||void 0===pr?void 0:pr.valueC:"",value:null===(mr=oe.find(l=>l.value===e.value))||void 0===mr?void 0:mr.label,loading:ne,error:null===e||void 0===e?void 0:e.errors,onChange:o=>{var i;A(o,l),null!==e&&void 0!==e&&null!==(i=e.options)&&void 0!==i&&i.addToPos&&(0,g.Vy)(V,(0,s.Z)((0,s.Z)({},null===V||void 0===V?void 0:V.options),{},{selPos:o})).pipe((0,h.P)()).subscribe({next:e=>{(0,tl.aT)(o,null===V||void 0===V?void 0:V.id).subscribe({next:()=>{var l;(V.options.selPos&&V.options.selPos!==o?(0,tl._s)(V.options.selPos,null===V||void 0===V?void 0:V.id).subscribe({next:()=>{window.scrollTo({top:0,behavior:"smooth"})}}):window.scrollTo({top:0,behavior:"smooth"}),null!==e&&void 0!==e&&e.user)||(V.options.selPos=null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.selPos)}})}})},selectionType:null===e||void 0===e||null===(fr=e.options)||void 0===fr?void 0:fr.type,fieldIcon:null===e||void 0===e?void 0:e.icon}));if("People"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(Oo=e.options)||void 0===Oo||null===(Ao=Oo.position_id)||void 0===Ao?void 0:Ao.length)>0&&null!==e&&void 0!==e&&null!==(zo=e.options)&&void 0!==zo&&zo.calendar){var sv,uv,cv,pv,mv,fv,_v,yv,gv,hv,bv,xv,Ev,Cv,wv,Mv,Sv,kv,Zv,Iv,Nv;let o;try{var Dv;o=JSON.parse(null!==(Dv=null===e||void 0===e?void 0:e.value)&&void 0!==Dv?Dv:JSON.stringify({user:0}))}catch(pc){}const i=J.find(e=>{var l;return e.id===(null===(l=o)||void 0===l?void 0:l.task)}),t=null===J||void 0===J?void 0:J.filter(e=>{var l,i,t,n,d;return(null===e||void 0===e||null===(l=e.add_info)||void 0===l?void 0:l.module_id)===(null===(i=X.processModule)||void 0===i?void 0:i.module_id)&&e.creator.id===(null===(t=o)||void 0===t?void 0:t.user)&&!(null!==e&&void 0!==e&&null!==(n=e.assignee)&&void 0!==n&&n.id)&&Ke()((0,Qe.now)()).diff(Ke()(null===e||void 0===e||null===(d=e.add_info)||void 0===d?void 0:d.start),"seconds")<0});return u.createElement("div",{style:{width:"100%"}},(null===e||void 0===e||null===(sv=e.options)||void 0===sv||null===(uv=sv.dropdown)||void 0===uv?void 0:uv.length)>0&&u.createElement("div",{style:{width:"100%",border:"1px solid var(--app-color-gray-dark)"}},u.createElement(y.Z,{visible:null===e||void 0===e?void 0:e.visible,mandatory:null===e||void 0===e?void 0:e.mandatory,className:c.Z.dropdownClassContainer,items:null===e||void 0===e||null===(cv=e.options)||void 0===cv||null===(pv=cv.dropdown)||void 0===pv?void 0:pv.map(e=>({label:e,value:e})),backgroundColor:null!==e&&void 0!==e&&null!==(mv=e.options)&&void 0!==mv&&mv.valueC&&null!==e&&void 0!==e&&e.value?null===e||void 0===e||null===(fv=e.options)||void 0===fv?void 0:fv.valueC:"",value:null===(_v=o)||void 0===_v?void 0:_v.pos,loading:ne,error:null===e||void 0===e?void 0:e.errors,onChange:i=>{var t,n;i.length>0&&(o.pos=void 0,o.user=void 0,A(JSON.stringify(o),l),(0,g.FY)(null===e||void 0===e||null===(t=e.options)||void 0===t?void 0:t.position_id,null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.filter,i).pipe((0,b.q)(1)).subscribe({next:e=>{Vl(e),setTimeout(()=>{o.pos=i,A(JSON.stringify(o),l)},0)}}))},selectionType:null===e||void 0===e||null===(yv=e.options)||void 0===yv?void 0:yv.type,fieldIcon:null===e||void 0===e?void 0:e.icon})),0==(null===jl||void 0===jl?void 0:jl.length)&&u.createElement("p",null,"No ".concat(e.field_name," found")),!i&&u.createElement(Ne.default,{style:{width:"100%"},rowStyleSelected:{border:"2px solid var(--app-color-gray-light)"},initialSelected:null!==e&&void 0!==e&&e.value?jl.filter(l=>{var o,i;return(null===l||void 0===l||null===(o=l.user)||void 0===o||null===(i=o.positions)||void 0===i?void 0:i.filter(l=>{var o,i;return null===e||void 0===e||null===(o=e.options)||void 0===o||null===(i=o.position_id)||void 0===i?void 0:i.includes(null===l||void 0===l?void 0:l.id)}).length)>0}).map(e=>e.value).indexOf(null===(gv=o)||void 0===gv?void 0:gv.user):void 0,card:!0,isReport:!1,"app-variant-is-mobile":"true",columns:["Name","Info","About",...null!==(hv=null===ee||void 0===ee||null===(bv=ee.misc_info)||void 0===bv?void 0:bv.profile)&&void 0!==hv?hv:["Rate"],"Location","Photo","Ratings"],list:jl.filter(l=>{var o,i;return(null===l||void 0===l||null===(o=l.user)||void 0===o||null===(i=o.positions)||void 0===i?void 0:i.filter(l=>{var o,i;return null===e||void 0===e||null===(o=e.options)||void 0===o||null===(i=o.position_id)||void 0===i?void 0:i.includes(null===l||void 0===l?void 0:l.id)}).length)>0}).map(e=>{var l,o,i,t,n,d,a,r,v;const p=null===e||void 0===e||null===(l=e.user)||void 0===l||null===(o=l.ratings)||void 0===o?void 0:o.map(e=>+e.ratings);return(0,s.Z)((0,s.Z)({},null!==(i=null===(t=e.user)||void 0===t||null===(n=t.options)||void 0===n?void 0:n.add_info)&&void 0!==i?i:{}),{},{Name:"".concat(e.user.first_name," ").concat(e.user.last_name),Location:u.createElement("div",{style:{marginTop:"10px",fontWeight:"bolder",fontSize:"12px"}},null===(d=e.user)||void 0===d?void 0:d.city),Info:null===(a=e.user.options)||void 0===a?void 0:a.info,id:e.user.id,Photo:null!=(null===(r=e.user)||void 0===r?void 0:r.photo)?null===(v=e.user)||void 0===v?void 0:v.photo:null===ee||void 0===ee?void 0:ee.logo,Ratings:(null===p||void 0===p?void 0:p.length)>0&&u.createElement("div",{className:c.Z.simpleNames},Array(Math.round(je.Z(Ve.Z,[Ge.Z,Je.Z])(p))).fill(0).map((e,l)=>u.createElement(se.G,{key:l,icon:ue.Tab,style:{color:"var(--app-color-blue)"}})),Array(5-Math.round(je.Z(Ve.Z,[Ge.Z,Je.Z])(p))).fill(0).map((e,l)=>u.createElement(se.G,{key:l,icon:ue.Tab,style:{color:"lightgray"}})))})}),onListItemClick:e=>{if(e){const i=jl.find(l=>l.value===e.id);o.user=null===i||void 0===i?void 0:i.value,A(JSON.stringify(o),l),(0,rl.Mk)(null===i||void 0===i?void 0:i.value,!0).pipe((0,b.q)(1)).subscribe({next:()=>de(!1)})}}},(null===t||void 0===t?void 0:t.length)>0&&u.createElement("p",null,"Schedules"),(null===t||void 0===t?void 0:t.length)>0?u.createElement(dl.tq,{slidesPerView:3,centeredSlides:!0,spaceBetween:10,pagination:{clickable:!0,dynamicBullets:!0},modules:[nl.pt,nl.tl],className:"mySwiper",style:{border:"0.8px dashed gray",padding:"5px",height:"200px",display:(null===t||void 0===t?void 0:t.length)>0?"":"none",zIndex:"0"}},null===t||void 0===t?void 0:t.map((e,l)=>u.createElement(dl.o5,{key:l+200,className:c.Z.swiperslide},u.createElement("div",{className:c.Z.dashboardCard,onClick:()=>{Dl(!0),zl(e)}},u.createElement("div",{style:{fontSize:"10px"}},Ke()(new Date(e.add_info.start)).format("h:mm a")),e.add_info.end!==e.add_info.start&&u.createElement("div",{style:{fontSize:"10px"}},Ke()(new Date(e.add_info.end)).format("h:mm a")),u.createElement("hr",{style:{border:"0.8px dashed gray"}}),u.createElement("p",{style:{fontSize:"12px",fontWeight:"bold"}},Ke()(new Date(e.add_info.start)).format("MMM")),u.createElement("div",{style:{fontSize:"20px",fontWeight:"bold"}},Ke()(new Date(e.add_info.start)).format("DD")))))):null!==(xv=o)&&void 0!==xv&&xv.user?u.createElement("p",{style:{fontSize:"12px"}},"No Schedules Found"):u.createElement("div",null)),i&&u.createElement(Ne.default,{modern:!0,isReport:!1,"app-variant-is-mobile":"true",columns:["Responsible",null!==(Ev=null===e||void 0===e||null===(Cv=e.options)||void 0===Cv?void 0:Cv.header)&&void 0!==Ev?Ev:"Name",null!==(wv=null===e||void 0===e||null===(Mv=e.options)||void 0===Mv?void 0:Mv.start)&&void 0!==wv?wv:"Date","Photo"],list:[i].map(l=>{var o,i,t,n,d,a;return{[null!==(o=null===e||void 0===e||null===(i=e.options)||void 0===i?void 0:i.header)&&void 0!==o?o:"Name"]:l.name,[null!==(t=null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.start)&&void 0!==t?t:"Date"]:Ke()(new Date(null===(d=l.add_info)||void 0===d?void 0:d.start)).format("MMM DD h:mm a"),Responsible:"".concat(l.creator.first_name," ").concat(l.creator.last_name),Position:"",Photo:null===(a=l.creator)||void 0===a?void 0:a.photo}}),onListItemClick:e=>{e&&(Dl(!0),zl(i))}}),wl&&u.createElement(al.Z,{save:!1,modalVisible:wl,heading:null!==(Sv=null===e||void 0===e||null===(kv=e.options)||void 0===kv?void 0:kv.header)&&void 0!==Sv?Sv:Al?"Update Calendar":"Create New Calendar",labels:null===e||void 0===e?void 0:e.options,task:Al,isProcess:!0,blured:!1,onClose:()=>Dl(!1),isEdit:!!Al,statuses:null===e||void 0===e||null===(Zv=e.options)||void 0===Zv?void 0:Zv.list,priority:null===e||void 0===e||null===(Iv=e.options)||void 0===Iv?void 0:Iv.priority,span:null===e||void 0===e||null===(Nv=e.options)||void 0===Nv?void 0:Nv.span,start_date:ae,onUpdate:i=>{if(i.creator.id!==(null===V||void 0===V?void 0:V.id)&&(null===i||void 0===i?void 0:i.assignee_id)===(null===V||void 0===V?void 0:V.id)){var t;if(z.assigned_to=i.creator.id,o.task=null===i||void 0===i?void 0:i.id,null!==i&&void 0!==i&&null!==(t=i.add_info)&&void 0!==t&&t.value){var n,d,a,r,v,s,u,c,p;o.value=null===i||void 0===i||null===(n=i.add_info)||void 0===n?void 0:n.value;const l=null===(d=z.components.find(l=>l.selected_fields.find(l=>{var o;return l.field_name===(null===(o=e.options)||void 0===o?void 0:o.valueL)})))||void 0===d?void 0:d.selected_fields.find(l=>{var o;return l.field_name===(null===(o=e.options)||void 0===o?void 0:o.valueL)});var m;if(l)l.value=null===i||void 0===i||null===(m=i.add_info)||void 0===m?void 0:m.value;const t=null===(a=z.newStepComponents.find(l=>l.selected_fields.find(l=>{var o;return l.field_name===(null===(o=e.options)||void 0===o?void 0:o.valueL)})))||void 0===a?void 0:a.selected_fields.find(l=>{var o;return l.field_name===(null===(o=e.options)||void 0===o?void 0:o.valueL)});var f;if(t)t.value=null===i||void 0===i||null===(f=i.add_info)||void 0===f?void 0:f.value;const y=null===(r=X.processModule)||void 0===r||null===(v=r.steps)||void 0===v||null===(s=v.find(l=>{var o;return null===(o=l.component_blueprints)||void 0===o?void 0:o.find(l=>{var o;return null===l||void 0===l||null===(o=l.selected_fields)||void 0===o?void 0:o.find(l=>{var o;return l.field_name===(null===(o=e.options)||void 0===o?void 0:o.valueL)})})}))||void 0===s||null===(u=s.component_blueprints)||void 0===u||null===(c=u.find(l=>{var o;return null===l||void 0===l||null===(o=l.selected_fields)||void 0===o?void 0:o.find(l=>{var o;return l.field_name===(null===(o=e.options)||void 0===o?void 0:o.valueL)})}))||void 0===c||null===(p=c.selected_fields)||void 0===p?void 0:p.find(l=>{var o;return l.field_name===(null===(o=e.options)||void 0===o?void 0:o.valueL)});var _;if(y)y.value=null===i||void 0===i||null===(_=i.add_info)||void 0===_?void 0:_.value}A(JSON.stringify(o),l)}}}))}if("People"===(null===e||void 0===e?void 0:e.data_type_name)&&(!0===(null===e||void 0===e||null===(Lo=e.options)||void 0===Lo?void 0:Lo.slider)||Ul)&&(null===le||void 0===le?void 0:le.length)>0)return u.createElement(dl.tq,{slidesPerView:1,centeredSlides:!0,spaceBetween:10,initialSlide:1,pagination:{clickable:!0,dynamicBullets:!0},modules:[nl.pt,nl.tl],className:"mySwiper"},le.filter(l=>{var o;return(null===l||void 0===l||null===(o=l.positions)||void 0===o?void 0:o.filter(l=>{var o,i;return null===e||void 0===e||null===(o=e.options)||void 0===o||null===(i=o.position_id)||void 0===i?void 0:i.includes(null===l||void 0===l?void 0:l.id)}).length)>0}).map((o,i)=>{var t,n,d,a,r,v,p,m,f,_,y;const g=null===o||void 0===o||null===(t=o.ratings)||void 0===t?void 0:t.map(e=>+e.ratings);return u.createElement(dl.o5,{key:i,className:c.Z.swiperslide},u.createElement("div",{style:{padding:"5px",width:"100%"},onClick:()=>{var i;e.open=null===e||void 0===e||!e.open,e.idx=l,null!==e&&void 0!==e&&null!==(i=e.options)&&void 0!==i&&i.skip?Fl(e.open):A(null===o||void 0===o?void 0:o.id,l)}},u.createElement(ll.Z,{photo:null===o||void 0===o?void 0:o.photo,height:null!==e&&void 0!==e&&e.open?"auto":"260px",width:"100%",firstName:"".concat(null===o||void 0===o?void 0:o.first_name," ").concat(null===o||void 0===o?void 0:o.last_name),position:u.createElement("div",{style:{marginTop:"10px"}},null===o||void 0===o?void 0:o.city),email:null===(n=o.options)||void 0===n?void 0:n.info},(null===g||void 0===g?void 0:g.length)>0&&u.createElement("div",{className:c.Z.simpleNames},Array(Math.round(je.Z(Ve.Z,[Ge.Z,Je.Z])(g))).fill(0).map((e,l)=>u.createElement(se.G,{key:l,icon:ue.Tab,style:{color:"var(--app-color-blue)"}})),Array(5-Math.round(je.Z(Ve.Z,[Ge.Z,Je.Z])(g))).fill(0).map((e,l)=>u.createElement(se.G,{key:l,icon:ue.Tab,style:{color:"lightgray"}}))),u.createElement("div",{className:c.Z.simpleNames,style:{pointerEvents:"none",padding:"20px 10px 0 10px",color:"gray"}},(null===(d=e.options)||void 0===d?void 0:d.info)&&(null===e||void 0===e?void 0:e.open)&&(null===e||void 0===e?void 0:e.idx)==l&&u.createElement(u.Fragment,null,u.createElement("p",null,"General Info:"),u.createElement(Ne.default,{rowStyleSelected:{border:"2px solid var(--app-color-gray-light)"},card:!0,isReport:!1,"app-variant-is-mobile":"true",columns:["First Name","Last Name","Phone","Address","City","Postal","Bio"],list:[o].map(e=>{var l,o,i,t,n,d;return{"First Name":"".concat(null!==(l=null===e||void 0===e?void 0:e.first_name)&&void 0!==l?l:""),"Last Name":"".concat(null!==(o=null===e||void 0===e?void 0:e.last_name)&&void 0!==o?o:""),Phone:"".concat(null!==(i=null===e||void 0===e?void 0:e.phone)&&void 0!==i?i:""),Address:"".concat(null!==(t=null===e||void 0===e?void 0:e.address)&&void 0!==t?t:""),City:"".concat(null!==(n=null===e||void 0===e?void 0:e.city)&&void 0!==n?n:""),Postal:"".concat(null!==(d=null===e||void 0===e?void 0:e.postal)&&void 0!==d?d:"")}})})),(null===(a=e.options)||void 0===a?void 0:a.other)&&(null===e||void 0===e?void 0:e.open)&&(null===e||void 0===e?void 0:e.idx)==l&&Object.keys(null!==(r=null===o||void 0===o||null===(v=o.options)||void 0===v?void 0:v.add_info)&&void 0!==r?r:{}).length>1&&u.createElement(u.Fragment,null,u.createElement("p",null,"More Info:"),u.createElement(Ne.default,{rowStyleSelected:{border:"2px solid var(--app-color-gray-light)"},card:!0,isReport:!1,"app-variant-is-mobile":"true",columns:Object.keys(null!==(p=null===o||void 0===o||null===(m=o.options)||void 0===m?void 0:m.add_info)&&void 0!==p?p:{}),list:[o].map(e=>{var l,o;return(0,s.Z)((0,s.Z)({},null!==(l=null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.add_info)&&void 0!==l?l:{}),{},{Rate:""})})})),(null===(f=e.options)||void 0===f?void 0:f.info)&&(null===e||void 0===e?void 0:e.open)&&(null===o||void 0===o||null===(_=o.ratings)||void 0===_?void 0:_.length)>0&&u.createElement(u.Fragment,null,u.createElement("p",null,"What other users say:"),u.createElement(Ne.default,{rowStyleSelected:{border:"2px solid var(--app-color-gray-light)"},card:!0,isReport:!1,columns:["Feedback"],list:null===o||void 0===o||null===(y=o.ratings)||void 0===y?void 0:y.map((e,l)=>({Feedback:'"'.concat(e.comments,'"')}))}))))))}));if("People"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(Ro=e.options)||void 0===Ro||null===(Uo=Ro.position_id)||void 0===Uo?void 0:Uo.length)>0)return u.createElement("div",{style:{width:"100%",border:"1px solid var(--app-color-gray-light)"}},u.createElement(y.Z,{onOpen:e=>{Se("50px"===Me?"180px":"50px")},onFocus:()=>{var l;return 0==jl.length&&Ql(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.position_id)},visible:null===e||void 0===e?void 0:e.visible,mandatory:null===e||void 0===e?void 0:e.mandatory,className:c.Z.dropdownClassContainer,items:jl.filter(l=>{var o,i;return(null===l||void 0===l||null===(o=l.user)||void 0===o||null===(i=o.positions)||void 0===i?void 0:i.filter(l=>{var o,i;return null===e||void 0===e||null===(o=e.options)||void 0===o||null===(i=o.position_id)||void 0===i?void 0:i.includes(null===l||void 0===l?void 0:l.id)}).length)>0}),backgroundColor:null!==e&&void 0!==e&&null!==(_r=e.options)&&void 0!==_r&&_r.valueC&&null!==e&&void 0!==e&&e.value?null===e||void 0===e||null===(yr=e.options)||void 0===yr?void 0:yr.valueC:"",value:"single"===(null===e||void 0===e||null===(gr=e.options)||void 0===gr?void 0:gr.type)?null===(hr=jl.find(l=>l.label===(null===e||void 0===e?void 0:e.value)))||void 0===hr?void 0:hr.label:e.value,loading:ne,error:null===e||void 0===e?void 0:e.errors,onChange:o=>{var i;if("single"===(null===e||void 0===e||null===(i=e.options)||void 0===i?void 0:i.type)){var t;const i=jl.find(e=>e.value===o);var n;if(1==(null===e||void 0===e||null===(t=e.options)||void 0===t?void 0:t.email))e.email=null===i||void 0===i||null===(n=i.user)||void 0===n?void 0:n.email;A(null===i||void 0===i?void 0:i.label,l)}else A(o,l);Se("50px")},onClicked:e=>Se(e?"180px":"50px"),selectionType:null===e||void 0===e||null===(br=e.options)||void 0===br?void 0:br.type,fieldIcon:null===e||void 0===e?void 0:e.icon,placeholder:"Select user..."}));if("People"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(Fo=e.options)||void 0===Fo||null===(Wo=Fo.componentF)||void 0===Wo?void 0:Wo.length)>0&&(null===e||void 0===e||null===(qo=e.options)||void 0===qo||null===(Yo=qo.componentO)||void 0===Yo?void 0:Yo.length)>0){var Tv,Pv,Ov,Av,zv,Lv,Rv;const o=null===(Tv=z.components.find(l=>l.selected_fields.filter(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.componentF)}).length>0))||void 0===Tv?void 0:Tv.selected_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.componentF)}),i=$.find(l=>{var i;return l.component_fields.filter(e=>e.value===(null===o||void 0===o?void 0:o.value)).length>0&&l.module_id===(null===e||void 0===e||null===(i=e.options)||void 0===i?void 0:i.module_id)}),t=null===i||void 0===i?void 0:i.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.componentO)});return u.createElement("div",{style:{width:"100%",border:"1px solid var(--app-color-gray-light)"}},u.createElement(y.Z,{onFocus:()=>{var l;return 0==jl.length&&Ql(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.position_id)},visible:null===e||void 0===e?void 0:e.visible,mandatory:null===e||void 0===e?void 0:e.mandatory,className:"multiple"===(null===e||void 0===e||null===(Pv=e.options)||void 0===Pv?void 0:Pv.type)?c.Z.dropdownHeightClassContainer:c.Z.dropdownClassContainer,items:jl.filter(e=>{var l,o;return(null===e||void 0===e||null===(l=e.user)||void 0===l||null===(o=l.positions)||void 0===o?void 0:o.filter(e=>{var l;return null===t||void 0===t||null===(l=t.value)||void 0===l?void 0:l.split(",").includes(null===e||void 0===e?void 0:e.name)}).length)>0}),backgroundColor:null!==e&&void 0!==e&&null!==(Ov=e.options)&&void 0!==Ov&&Ov.valueC&&null!==e&&void 0!==e&&e.value?null===e||void 0===e||null===(Av=e.options)||void 0===Av?void 0:Av.valueC:"",value:"single"===(null===e||void 0===e||null===(zv=e.options)||void 0===zv?void 0:zv.type)?null===(Lv=jl.find(l=>l.label===(null===e||void 0===e?void 0:e.value)))||void 0===Lv?void 0:Lv.label:e.value,loading:ne,error:null===e||void 0===e?void 0:e.errors,onChange:o=>{var i;if("single"===(null===e||void 0===e||null===(i=e.options)||void 0===i?void 0:i.type)){var t;const i=jl.find(e=>e.value===o);var n;if(1==(null===e||void 0===e||null===(t=e.options)||void 0===t?void 0:t.email))e.email=null===i||void 0===i||null===(n=i.user)||void 0===n?void 0:n.email;A(null===i||void 0===i?void 0:i.label,l)}else A(o,l);Se("50px")},onClicked:e=>Se(e?"180px":"50px"),selectionType:null===e||void 0===e||null===(Rv=e.options)||void 0===Rv?void 0:Rv.type,fieldIcon:null===e||void 0===e?void 0:e.icon,placeholder:"Select user..."}))}if("People"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(Bo=e.options)||void 0===Bo||null===(Ho=Bo.componentF)||void 0===Ho?void 0:Ho.length)>0&&(null===e||void 0===e||null===(jo=e.options)||void 0===jo||null===(Vo=jo.componentUO)||void 0===Vo?void 0:Vo.length)>0){var Uv,Fv,Wv,qv,Yv,Bv,Hv;const o=null===(Uv=z.components.find(l=>l.selected_fields.filter(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.componentF)}).length>0))||void 0===Uv?void 0:Uv.selected_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.componentF)}),i=$.filter(l=>{var o;return l.module_id===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.module_id)}).find(e=>e.component_fields.filter(e=>(null===e||void 0===e?void 0:e.value)===(null===o||void 0===o?void 0:o.value)).length>0),t=i?null===i||void 0===i?void 0:i.component_fields.find(l=>{var o;return l.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.componentUO)}):"";return u.createElement("div",{style:{width:"100%",border:"1px solid var(--app-color-gray-light)"}},u.createElement(y.Z,{onFocus:()=>{var l;return 0==jl.length&&Ql(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.position_id)},visible:null===e||void 0===e?void 0:e.visible,mandatory:null===e||void 0===e?void 0:e.mandatory,className:"multiple"===(null===e||void 0===e||null===(Fv=e.options)||void 0===Fv?void 0:Fv.type)?c.Z.dropdownHeightClassContainer:c.Z.dropdownClassContainer,items:jl.filter(e=>{var l;return null===t||void 0===t||null===(l=t.value)||void 0===l?void 0:l.split(",").includes(null===e||void 0===e?void 0:e.label)}),backgroundColor:null!==e&&void 0!==e&&null!==(Wv=e.options)&&void 0!==Wv&&Wv.valueC&&null!==e&&void 0!==e&&e.value?null===e||void 0===e||null===(qv=e.options)||void 0===qv?void 0:qv.valueC:"",value:"single"===(null===e||void 0===e||null===(Yv=e.options)||void 0===Yv?void 0:Yv.type)?null===(Bv=jl.find(l=>l.label===(null===e||void 0===e?void 0:e.value)))||void 0===Bv?void 0:Bv.label:e.value,loading:ne,error:null===e||void 0===e?void 0:e.errors,onChange:o=>{var i;if("single"===(null===e||void 0===e||null===(i=e.options)||void 0===i?void 0:i.type)){var t;const i=jl.find(e=>e.value===o);var n;if(1==(null===e||void 0===e||null===(t=e.options)||void 0===t?void 0:t.email))e.email=null===i||void 0===i||null===(n=i.user)||void 0===n?void 0:n.email;A(null===i||void 0===i?void 0:i.label,l)}else A(o,l);Se("50px")},onClicked:e=>Se(e?"180px":"50px"),selectionType:null===e||void 0===e||null===(Hv=e.options)||void 0===Hv?void 0:Hv.type,fieldIcon:null===e||void 0===e?void 0:e.icon,placeholder:"Select user..."}))}if("Status"===(null===e||void 0===e?void 0:e.data_type_name)){var jv,Vv,Gv,Jv,Qv,Kv,Xv,$v,es,ls,os,is,ts,ns,ds;let o=(null===(jv=e.options)||void 0===jv||null===(Vv=jv.list)||void 0===Vv?void 0:Vv.length)>0?null===(Gv=e.options)||void 0===Gv||null===(Jv=Gv.list)||void 0===Jv?void 0:Jv.map(e=>({label:e,value:e})):1==(null===X||void 0===X||null===(Qv=X.processModule)||void 0===Qv||null===(Kv=Qv.module)||void 0===Kv||null===(Xv=Kv.options)||void 0===Xv?void 0:Xv.asGraphical)?[{label:"Show",value:"Show"},{label:"Hide",value:"Hide"}]:(null===ee||void 0===ee||null===($v=ee.misc_info)||void 0===$v||null===(es=$v.status)||void 0===es?void 0:es.length)>0?null===ee||void 0===ee||null===(ls=ee.misc_info)||void 0===ls?void 0:ls.status:w.MO;var as;if((null===ee||void 0===ee||null===(os=ee.misc_info)||void 0===os||null===(is=os.rules)||void 0===is?void 0:is.length)>0)null===ee||void 0===ee||null===(as=ee.misc_info)||void 0===as||as.rules.filter(e=>"status"===e.type).filter(l=>{l.valueCondition===e.value&&(o="0"===l.allow?o.filter(o=>{var i;return l.values.concat(null===(i=e.options)||void 0===i?void 0:i.list).includes(o.value)}):o.filter(o=>{var i;return!l.values.concat(null===(i=e.options)||void 0===i?void 0:i.list).includes(o.value)}))});return u.createElement(y.Z,{key:l,visible:e.visible,mandatory:e.mandatory,backgroundColor:null!==e&&void 0!==e&&null!==(ts=e.options)&&void 0!==ts&&ts.valueC&&null!==e&&void 0!==e&&e.value?null===e||void 0===e||null===(ns=e.options)||void 0===ns?void 0:ns.valueC:"",value:null!==(ds=e.value)&&void 0!==ds?ds:"",items:o,error:e.errors,className:c.Z.dropdownSelectComponent,onClicked:e=>Se(e?"180px":"50px"),onChange:e=>{ee.start=!0,Se("50px"),A(e,l);const o=D.selected_fields.find(l=>"Date"===l.data_type_name&l.field_name===e);o&&(o.value=new Date(Ke().now()))},fieldIcon:e.icon,placeholder:"Select status..."})}if("Action Button"===(null===e||void 0===e?void 0:e.data_type_name)||"Ratings"===(null===e||void 0===e?void 0:e.data_type_name))return u.createElement("div",{key:l});if("Video"===(null===e||void 0===e?void 0:e.data_type_name)&&null!==e&&void 0!==e&&null!==(Go=e.options)&&void 0!==Go&&Go.start)return u.createElement("div",{style:{width:"100%",height:"auto",border:"1px solid var(--app-color-gray-light)"}},u.createElement("div",{id:"custom-input",style:{cursor:"pointer",display:"flex",justifyContent:"center",width:"100%",alignItems:"stretch",padding:"5px",border:"0px solid var(--app-color-gray-lighter)"}},u.createElement("input",{value:e.value?Ke()(e.value).format("DD MMMM YYYY HH:mm"):"",disabled:!0,type:"text",style:{flex:1,marginTop:"auto",marginBottom:"auto",outline:"none",fontFamily:"var(--app-text-main-font)",fontSize:"16px",lineHeight:"20px",color:"#4A4A4A",textAlign:"left",maxWidth:"98%",border:"0px"},onChange:e=>{}}),u.createElement(se.G,{icon:ue.WRo,style:{width:"14px",height:"14px"}})),u.createElement(_l.Z,{payload:{name:null===T||void 0===T?void 0:T.id}}));if("Video"!==(null===e||void 0===e?void 0:e.data_type_name)||null!==e&&void 0!==e&&null!==(Jo=e.options)&&void 0!==Jo&&Jo.start){var rs,vs,ss,us,cs,ps,ms,fs,_s,ys,gs,hs,bs,xs,Es,Cs,ws,Ms,Ss,ks,Zs,Is,Ns,Ds,Ts,Ps,Os,As,zs,Ls,Rs,Us,Fs,Ws,qs,Ys,Bs,Hs,js,Vs,Gs,Js,Qs,Ks,Xs,$s,eu,lu,ou,iu,tu,nu,du,au,ru,vu,su,uu,cu,pu,mu,fu,_u,yu,gu,hu,bu,xu,Eu,Cu,wu,Mu,Su;if("Clock"===(null===e||void 0===e?void 0:e.data_type_name))return u.createElement("div",{className:c.Z.centerDiv,style:{width:"100%",height:"auto",border:"1px dashed var(--app-color-gray-light)",padding:"20px",flexDirection:"column",fontSize:"16px"}},"".concat(j.format("MMMM DD YYYY")),u.createElement("p",{className:c.Z.timer},"".concat(j.format("HH:mm:ss"))),u.createElement("div",{className:c.Z.centerDiv,style:{display:"flex",flexDirection:"row"}},u.createElement("input",{readOnly:!0,autoComplete:"off",value:null!==e&&void 0!==e&&e.value?Ke()(new Date(+(null!==(rs=e.value)&&void 0!==rs?rs:0))).format("DD MMM YYYY h:mm a"):"",className:c.Z.currencyInput,style:{border:"1px solid var(--app-color-gray-light)",maxWidth:"220px",marginRight:"10px",textAlign:"center"}}),u.createElement(x.zx,{light:!0,title:"Set",clicked:()=>{P((0,Qe.now)(),l)}})));if("Profile"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(Qo=e.options)||void 0===Qo||null===(Ko=Qo.type)||void 0===Ko?void 0:Ko.length)>0&&e.visible){var ku,Zu,Iu,Nu,Du,Tu,Pu,Ou,Au,zu,Lu,Ru,Uu,Fu,Wu,qu;let o=V.id;var Yu;if("creator"!==e.options.type&&"wallet"!==e.options.type||null===T||void 0===T||null===(ku=T.created_by)||void 0===ku||!ku.id)if("creator"!==e.options.type&&"wallet"!==e.options.type||null!==T&&void 0!==T&&null!==(Zu=T.created_by)&&void 0!==Zu&&Zu.id)if("owner"===e.options.type){var Bu;o=null!==T&&void 0!==T&&T.options?null===(Bu=JSON.parse(null===T||void 0===T?void 0:T.options))||void 0===Bu?void 0:Bu.owner:""}else{if("custom"!==e.options.type)return null;var Hu;o=null===e||void 0===e||null===(Hu=e.options)||void 0===Hu?void 0:Hu.id}else o=V.id;else o=null===(Yu=T.created_by)||void 0===Yu?void 0:Yu.id;const i=le.concat([V]).find(e=>e.id===o),t=null===i||void 0===i||null===(Iu=i.ratings)||void 0===Iu?void 0:Iu.map(e=>+e.ratings);return i?u.createElement("div",{className:c.Z.centerDiv,key:l},"wallet"===e.options.type?u.createElement(ll.Z,{simple:!0,height:"100px",photo:i.photo,noPhoto:0==(null===e||void 0===e||null===(Nu=e.options)||void 0===Nu?void 0:Nu.show),firstName:"".concat(null===i||void 0===i?void 0:i.first_name," ").concat(null===i||void 0===i?void 0:i.last_name),lastName:"(".concat(null===(Du=null!==(Tu=i.wallet)&&void 0!==Tu?Tu:0)||void 0===Du?void 0:Du.toFixed(2),")"),position:null===i||void 0===i||null===(Pu=i.positions)||void 0===Pu||null===(Ou=Pu.slice(0,1))||void 0===Ou?void 0:Ou.map(e=>e.name),email:null===i||void 0===i?void 0:i.email,cardClicked:()=>{},width:"100%"}):u.createElement(ll.Z,{photo:i.photo,height:"auto",noPhoto:!1,firstName:"".concat(null===i||void 0===i?void 0:i.first_name),lastName:"".concat(null===i||void 0===i?void 0:i.last_name),position:null===i||void 0===i||null===(Au=i.positions)||void 0===Au||null===(zu=Au.slice(0,1))||void 0===zu?void 0:zu.map(e=>e.name),email:null===i||void 0===i?void 0:i.email,cardClicked:()=>{},width:"100%"},(null===t||void 0===t?void 0:t.length)>0&&u.createElement("div",{className:c.Z.centerDiv},Array(Math.round(je.Z(Ve.Z,[Ge.Z,Je.Z])(t))).fill(0).map((e,l)=>u.createElement(se.G,{key:l,icon:ue.Tab,style:{height:"15px",width:"15px",color:"var(--app-color-blue)"}})),Array(5-Math.round(je.Z(Ve.Z,[Ge.Z,Je.Z])(t))).fill(0).map((e,l)=>u.createElement(se.G,{key:l,icon:ue.Tab,style:{height:"15px",width:"15px",color:"lightgray"}}))),u.createElement("div",{className:c.Z.simpleNames,style:{pointerEvents:"none",padding:"20px 10px 0 10px",color:"gray"}},u.createElement("p",{style:{fontSize:"14px"}},"General Info:"),u.createElement(Ne.default,{rowStyleSelected:{border:"2px solid var(--app-color-gray-light)"},card:!0,isReport:!1,"app-variant-is-mobile":"true",columns:["First Name","Last Name","Phone","Address","City","Postal","Bio"],list:[i].map(e=>{var l,o,i,t,n,d;return{"First Name":"".concat(null!==(l=null===e||void 0===e?void 0:e.first_name)&&void 0!==l?l:""),"Last Name":"".concat(null!==(o=null===e||void 0===e?void 0:e.last_name)&&void 0!==o?o:""),Phone:"".concat(null!==(i=null===e||void 0===e?void 0:e.phone)&&void 0!==i?i:""),Address:"".concat(null!==(t=null===e||void 0===e?void 0:e.address)&&void 0!==t?t:""),City:"".concat(null!==(n=null===e||void 0===e?void 0:e.city)&&void 0!==n?n:""),Postal:"".concat(null!==(d=null===e||void 0===e?void 0:e.postal)&&void 0!==d?d:"")}})}),Object.keys(null!==(Lu=null===i||void 0===i||null===(Ru=i.options)||void 0===Ru?void 0:Ru.add_info)&&void 0!==Lu?Lu:{}).length>1&&u.createElement(u.Fragment,null,u.createElement("p",{style:{fontSize:"14px"}},"More Info:"),u.createElement(Ne.default,{rowStyleSelected:{border:"2px solid var(--app-color-gray-light)"},card:!0,isReport:!1,"app-variant-is-mobile":"true",columns:Object.keys(null!==(Uu=null===i||void 0===i||null===(Fu=i.options)||void 0===Fu?void 0:Fu.add_info)&&void 0!==Uu?Uu:{}),list:[i].map(e=>{var l,o;return(0,s.Z)((0,s.Z)({},null!==(l=null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.add_info)&&void 0!==l?l:{}),{},{Rate:""})})})),(null===i||void 0===i||null===(Wu=i.ratings)||void 0===Wu?void 0:Wu.length)>0&&u.createElement(u.Fragment,null,u.createElement("p",{style:{fontSize:"14px"}},"What other users say:"),u.createElement(Ne.default,{rowStyleSelected:{border:"2px solid var(--app-color-gray-light)"},card:!0,isReport:!1,columns:["Feedback"],list:null===i||void 0===i||null===(qu=i.ratings)||void 0===qu?void 0:qu.map((e,l)=>({Feedback:'"'.concat(e.comments,'"')}))}))))):"owner"===e.options.type&&u.createElement("p",null,"No user has accepted this transaction")}if("Summary"===(null===e||void 0===e?void 0:e.data_type_name)){var ju;let e={};return z.components.map(l=>l.selected_fields.filter(e=>(null===e||void 0===e?void 0:e.value)&&!("Pin"===e.data_type_name||"Lookup"===e.data_type_name||"Record"===e.data_type_name||"Ratings"===e.data_type_name||"People"===e.data_type_name||"Positions"===e.data_type_name||"Notes"===e.data_type_name||"URL"===e.data_type_name||"Summary"===e.data_type_name||"Info"===e.data_type_name)&&1==e.visible).map(l=>{var o;e[l.field_name]="".concat(null!==(o=null===l||void 0===l?void 0:l.value)&&void 0!==o?o:"")})),(null!==(ju=null===T||void 0===T?void 0:T.component_fields)&&void 0!==ju?ju:[]).filter(e=>(null===e||void 0===e?void 0:e.value)&&!("Pin"===e.data_type_name||"Lookup"===e.data_type_name||"Record"===e.data_type_name||"Ratings"===e.data_type_name||"People"===e.data_type_name||"Positions"===e.data_type_name||"Notes"===e.data_type_name||"URL"===e.data_type_name||"Summary"===e.data_type_name||"Info"===e.data_type_name)).forEach(l=>{var o;return e[l.field_name]="".concat(null!==(o=null===l||void 0===l?void 0:l.value)&&void 0!==o?o:"")}),u.createElement("div",{key:l,style:{width:ml.tq?"%100":"50%"}},u.createElement($e.Z,{hideHeaders:!0,className:c.Z.tableHostMobile,style:{width:"100%"},tableHostSimple:c.Z.leagueTable,columns:["1","2"],list:Object.keys(e).map(l=>({1:l,2:e[l]}))}))}if("Pin"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(Xo=e.options)||void 0===Xo||null===($o=Xo.pintype)||void 0===$o?void 0:$o.length)>0)return null!==e&&void 0!==e&&null!==(vs=e.options)&&void 0!==vs&&vs.source||null!==(ss=e.options)&&void 0!==ss&&ss.destination?u.createElement("div",{style:{color:"var(--app-color-gray-dark)",height:"inherit",width:"100%",display:null!==e&&void 0!==e&&e.visible?"":"none"}},u.createElement("div",{key:l,className:c.Z.filtersContainer,style:{color:"var(--app-color-gray-dark)",height:"inherit",width:"100%",display:null!==e&&void 0!==e&&e.visible?"":"none"}},u.createElement("div",{className:c.Z.actionsContainer,style:{fontSize:"12px"},onClick:()=>{we({source:!0,destination:!1,field:e,index:l})}},u.createElement("div",{style:{width:"100px"}},1==(null===e||void 0===e||null===(us=e.options)||void 0===us?void 0:us.destination)?"From":"Pin",":"),u.createElement("div",null,null!==e&&void 0!==e&&e.value?null===(cs=JSON.parse(e.value))||void 0===cs||null===(ps=cs.source)||void 0===ps?void 0:ps.address:"")),1==(null===e||void 0===e||null===(ms=e.options)||void 0===ms?void 0:ms.destination)&&u.createElement("hr",{style:{borderTop:"0.5px solid #D2D2D2"}}),1==(null===e||void 0===e||null===(fs=e.options)||void 0===fs?void 0:fs.destination)&&u.createElement("div",{className:c.Z.actionsContainer,style:{fontSize:"12px"},onClick:()=>{we({source:!1,destination:!0,field:e,index:l})}},u.createElement("div",{style:{width:"100px"}},"To",":"),u.createElement("div",null,null!==e&&void 0!==e&&e.value?null===(_s=JSON.parse(e.value))||void 0===_s||null===(ys=_s.destination)||void 0===ys?void 0:ys.address:""))),u.createElement("div",{style:{display:null!==(gs=e.options)&&void 0!==gs&&gs.source?"flex":"none",width:"100%"}},u.createElement(x.zx,{icon:u.createElement(se.G,{icon:ue.W3K,style:{width:"20px",height:"20px"}}),clicked:()=>{we({source:!0,destination:!1,field:e,index:l})},style:{backgroundColor:"blue",width:"100%"},title:1==(null===e||void 0===e||null===(hs=e.options)||void 0===hs?void 0:hs.destination)?"Origin from":"Pin location"})),1==(null===e||void 0===e||null===(bs=e.options)||void 0===bs?void 0:bs.destination)&&u.createElement("div",{style:{display:null!==(xs=e.options)&&void 0!==xs&&xs.destination?"flex":"none",width:"100%"}},u.createElement(x.zx,{icon:u.createElement(se.G,{icon:ue.opg,style:{width:"20px",height:"20px"}}),clicked:()=>{we({source:!1,destination:!0,field:e,index:l})},style:{backgroundColor:"green",width:"100%"},title:"Destination"})),(null===Ce||void 0===Ce?void 0:Ce.source)&&u.createElement(x.U7,{hasCloseIcon:!0,blured:!1,scrollable:!0,isOpen:Ce.source,shadowedContainerStyle:{width:ml.tq?"100%":"50%"},onClose:()=>we({source:!1,destination:!1})},u.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",marginTop:"30px"}},u.createElement("div",{className:c.Z.title},null!==(Es=null===Ce||void 0===Ce||null===(Cs=Ce.field)||void 0===Cs?void 0:Cs.field_name)&&void 0!==Es?Es:"Origin:"),u.createElement(S.Z,{zoom:null===e||void 0===e||null===(ws=e.options)||void 0===ws?void 0:ws.zoom,value:null===(Ms=JSON.parse(null!==(Ss=null===Ce||void 0===Ce||null===(ks=Ce.field)||void 0===ks?void 0:ks.value)&&void 0!==Ss?Ss:JSON.stringify({source:{},destination:{}})))||void 0===Ms?void 0:Ms.source,onChange:o=>{var i,t,n,d,a,r,v,s,u,c;const p=null!==Ce&&void 0!==Ce&&null!==(i=Ce.field)&&void 0!==i&&i.value?JSON.parse(null===Ce||void 0===Ce||null===(t=Ce.field)||void 0===t?void 0:t.value):{source:{lat:0,lng:0,address:""},destination:{lat:0,lng:0,address:""}};if(p.source.lat=o.geometry.location.lat,p.source.lng=o.geometry.location.lng,p.source.address=o.formatted_address,null!==Ce&&void 0!==Ce&&Ce.field&&(null===(n=e.options)||void 0===n||!n.compute))return P(JSON.stringify(p),Ce.index),void we({source:!1,destination:!1});let m=null===D||void 0===D||null===(d=D.selected_fields)||void 0===d?void 0:d.find(e=>{var l;return"distance"===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.mapToItem)});var f,_,y,g,h,b,x,E,C,M,S,k;m||(m=null===(f=z.newStepComponents)||void 0===f||null===(_=f.find(e=>{var l;return(null===(l=e.selected_fields)||void 0===l?void 0:l.filter(e=>{var l;return"distance"===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.mapToItem)}).length)>0}))||void 0===_||null===(y=_.selected_fields)||void 0===y?void 0:y.find(e=>{var l;return"distance"===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.mapToItem)}),m||(m=null===(g=z.components)||void 0===g||null===(h=g.find(e=>{var l;return(null===(l=e.selected_fields)||void 0===l?void 0:l.filter(e=>{var l;return"distance"===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.mapToItem)}).length)>0}))||void 0===h||null===(b=h.selected_fields)||void 0===b?void 0:b.find(e=>{var l;return"distance"===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.mapToItem)}),m||(m=null===(x=X.processModule)||void 0===x||null===(E=x.steps[null!==(S=null===(k=X.processModule)||void 0===k?void 0:k.stepIndex)&&void 0!==S?S:1].component_blueprints)||void 0===E||null===(C=E.find(e=>{var l;return(null===(l=e.selected_fields)||void 0===l?void 0:l.filter(e=>{var l;return"distance"===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.mapToItem)}).length)>0}))||void 0===C||null===(M=C.selected_fields)||void 0===M?void 0:M.find(e=>{var l;return"distance"===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.mapToItem)}))));if(null!==p&&void 0!==p&&p.source&&null!==(a=e.options)&&void 0!==a&&a.compute&&0==(null===(r=e.options)||void 0===r?void 0:r.destination))p.distance=(0,w.Iw)(p.source.lat,p.source.lng,G.latitude,G.longitude),p.duration=0,m&&(m.value=p.distance,m.disabled=!0),P(JSON.stringify(p),l);else if(null!==(v=p.source)&&void 0!==v&&v.address&&null!==Ce&&void 0!==Ce&&null!==(s=Ce.field.options)&&void 0!==s&&s.compute){var Z;null===(Z=(0,ol.Y)(p.source.address,p.destination.address))||void 0===Z||Z.subscribe({next:e=>{var l;if((null===e||void 0===e||null===(l=e.routes)||void 0===l?void 0:l.length)>0){var o;const l=e.routes[0];var i,t,n,d;if((null===l||void 0===l||null===(o=l.legs)||void 0===o?void 0:o.length)>0)p.distance=(null===(i=l.legs[0])||void 0===i||null===(t=i.distance)||void 0===t?void 0:t.value)/1e3,p.duration=null===(n=l.legs[0])||void 0===n||null===(d=n.duration)||void 0===d?void 0:d.value,p.steps=l.legs[0].steps,m&&(m.value=p.distance,m.disabled=!0)}},error:e=>{p.distance=(0,w.Iw)(p.source.lat,p.source.lng,p.destination.lat,p.destination.lng),p.duration=0,m&&(m.value=p.distance,m.disabled=!0)}})}else null!==(u=p.source)&&void 0!==u&&u.address&&(p.distance=(0,w.Iw)(p.source.lat,p.source.lng,p.destination.lat,p.destination.lng),p.duration=0,m&&(m.value=p.distance));P(JSON.stringify(p),null!==(c=null===Ce||void 0===Ce?void 0:Ce.index)&&void 0!==c?c:l),we({source:!1,destination:!1})},mapkey:null===(Zs=ee.misc_info)||void 0===Zs?void 0:Zs.map}),u.createElement("br",null),u.createElement(x.zx,{clicked:()=>we({source:!1,destination:!1}),title:"Close",style:{width:"80%",backgroundColor:"orange"}}))),(null===Ce||void 0===Ce?void 0:Ce.destination)&&u.createElement(x.U7,{hasCloseIcon:!0,blured:!1,scrollable:!0,isOpen:Ce.destination,shadowedContainerStyle:{width:ml.tq?"100%":"50%"},shadowedContainerClassname:c.Z.mappopup,onClose:()=>we({source:!1,destination:!1})},u.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"}},u.createElement("div",{className:c.Z.title},null!==(Is=null===Ce||void 0===Ce||null===(Ns=Ce.field)||void 0===Ns?void 0:Ns.field_name)&&void 0!==Is?Is:"Destination:"),u.createElement(S.Z,{value:null===(Ds=JSON.parse(null!==(Ts=null===Ce||void 0===Ce||null===(Ps=Ce.field)||void 0===Ps?void 0:Ps.value)&&void 0!==Ts?Ts:JSON.stringify({source:{},destination:{}})))||void 0===Ds?void 0:Ds.destination,zoom:null===e||void 0===e||null===(Os=e.options)||void 0===Os?void 0:Os.zoom,onChange:e=>{var l,o,i,t,n,d;const a=null!==Ce&&void 0!==Ce&&null!==(l=Ce.field)&&void 0!==l&&l.value?JSON.parse(null===Ce||void 0===Ce||null===(o=Ce.field)||void 0===o?void 0:o.value):{destination:{lat:0,lng:0,address:""},source:{lat:0,lng:0,address:""}};let r=null===D||void 0===D||null===(i=D.selected_fields)||void 0===i?void 0:i.find(e=>{var l;return"distance"===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.mapToItem)});var v,s,u,c,p,m,f;r||(r=null===(v=z.newStepComponents)||void 0===v||null===(s=v.find(e=>{var l;return(null===(l=e.selected_fields)||void 0===l?void 0:l.filter(e=>{var l;return"distance"===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.mapToItem)}).length)>0}))||void 0===s||null===(u=s.selected_fields)||void 0===u?void 0:u.find(e=>{var l;return"distance"===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.mapToItem)}),r||(r=null===(c=z.components)||void 0===c||null===(p=c.find(e=>{var l;return(null===(l=e.selected_fields)||void 0===l?void 0:l.filter(e=>{var l;return"distance"===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.mapToItem)}).length)>0}))||void 0===p||null===(m=p.selected_fields)||void 0===m?void 0:m.find(e=>{var l;return"distance"===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.mapToItem)})));(a.destination.lat=e.geometry.location.lat,a.destination.lng=e.geometry.location.lng,a.destination.address=e.formatted_address,null!==(t=a.destination)&&void 0!==t&&t.address&&null!==Ce&&void 0!==Ce&&null!==(n=Ce.field.options)&&void 0!==n&&n.compute)?null===(f=(0,ol.Y)(a.source.address,a.destination.address))||void 0===f||f.subscribe({next:e=>{var l;if((null===e||void 0===e||null===(l=e.routes)||void 0===l?void 0:l.length)>0){var o;const l=e.routes[0];var i,t,n,d;if((null===l||void 0===l||null===(o=l.legs)||void 0===o?void 0:o.length)>0)a.distance=(null===(i=l.legs[0])||void 0===i||null===(t=i.distance)||void 0===t?void 0:t.value)/1e3,a.duration=null===(n=l.legs[0])||void 0===n||null===(d=n.duration)||void 0===d?void 0:d.value,a.steps=l.legs[0].steps,r&&(r.value=a.distance)}},error:e=>{a.distance=(0,w.Iw)(a.source.lat,a.source.lng,a.destination.lat,a.destination.lng),a.duration=0,r&&(r.value=a.distance)}}):null!==(d=a.destination)&&void 0!==d&&d.address&&(a.distance=(0,w.Iw)(a.source.lat,a.source.lng,a.destination.lat,a.destination.lng),a.duration=0,r&&(r.value=a.distance));P(JSON.stringify(a),null===Ce||void 0===Ce?void 0:Ce.index),we({source:!1,destination:!1})},mapkey:null===(As=ee.misc_info)||void 0===As?void 0:As.map}),u.createElement("br",null),u.createElement(x.zx,{clicked:()=>we({source:!1,destination:!1}),title:"Close",style:{width:"80%",backgroundColor:"orange"}})))):u.createElement(S.Z,{zoom:null===Ce||void 0===Ce||null===(zs=Ce.field)||void 0===zs||null===(Ls=zs.options)||void 0===Ls?void 0:Ls.zoom,key:l,value:null===D||void 0===D?void 0:D.selected_fields[l].value,onLocationChange:e=>q(e,l),mapkey:null===(Rs=ee.misc_info)||void 0===Rs?void 0:Rs.map});if("Map"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(ei=e.options)||void 0===ei||null===(li=ei.maptype)||void 0===li?void 0:li.length)>0)return u.createElement(Ie,{apikey:null===ee||void 0===ee||null===(Us=ee.misc_info)||void 0===Us?void 0:Us.map,search:null!==(Fs=null===e||void 0===e||null===(Ws=e.options)||void 0===Ws?void 0:Ws.search)&&void 0!==Fs&&Fs});if("YesNo"===(null===e||void 0===e?void 0:e.data_type_name))return u.createElement(u.Fragment,null,u.createElement("div",{class:"checkbox-wrapper-21"},u.createElement("div",{style:{display:"flex",justifyContent:"space-between",margin:"20px 0px"}},u.createElement("input",{id:"check-23",type:"checkbox",checked:null!==(qs=null===e||void 0===e?void 0:e.value)&&void 0!==qs&&qs,onChange:e=>A(e.target.checked,l),style:{marginRight:"20px"}}),u.createElement("label",null,e.field_name))));if("Freehand"===(null===e||void 0===e?void 0:e.data_type_name))return u.createElement(m.Z,{enabled:ii,style:{border:"0.5px dashed gray",padding:"10px"},width:ml.tq?"100%":"".concat(null!==(Ys=null===e||void 0===e||null===(Bs=e.options)||void 0===Bs?void 0:Bs.width)&&void 0!==Ys?Ys:40,"%"),height:"400px",editMode:Y,key:l,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors},null!==e&&void 0!==e&&e.value?u.createElement("img",{alt:"lg",src:null===e||void 0===e?void 0:e.value,style:{width:"500px",height:"300px",cursor:"pointer"}}):u.createElement(sl(),{penColor:"green",canvasProps:{width:400,height:200,className:"sigCanvas"},ref:Bl,onEnd:()=>P(Bl.current.toDataURL("image/png"),l)}));if("User Wallet"===(null===e||void 0===e?void 0:e.data_type_name)){var Vu,Gu,Ju,Qu,Ku,Xu;const o=null!==(Vu=null===le||void 0===le?void 0:le.find(e=>{var l;return e.id===(null===T||void 0===T||null===(l=T.created_by)||void 0===l?void 0:l.id)}))&&void 0!==Vu?Vu:V;return u.createElement("div",{style:{width:"100%",border:"1px dashed gray",padding:"20px",marginTop:"10px"}},u.createElement(ll.Z,{simple:!0,height:"100px",photo:o.photo,firstName:"".concat(null===o||void 0===o?void 0:o.first_name," ").concat(null===o||void 0===o?void 0:o.last_name),lastName:"(".concat(null===(Gu=null!==(Ju=o.wallet)&&void 0!==Ju?Ju:0)||void 0===Gu?void 0:Gu.toFixed(2),")"),position:null===o||void 0===o||null===(Qu=o.positions)||void 0===Qu||null===(Ku=Qu.slice(0,1))||void 0===Ku?void 0:Ku.map(e=>e.name),email:null===o||void 0===o?void 0:o.email,cardClicked:()=>{},width:ml.tq?"100%":""}),u.createElement("input",{type:"number",autoComplete:"off",value:null!==(Xu=null===e||void 0===e?void 0:e.value)&&void 0!==Xu?Xu:0,className:c.Z.currencyInput,style:{border:"1px solid black",padding:"0",margin:"0",width:"100%"},onChange:e=>{P(e.target.value,l)}}),u.createElement(x.zx,{loading:ne,clear:!0,title:"Release amount",style:{color:"white",backgroundColor:"green",display:e.visible&&null!==e&&void 0!==e&&e.value?"":"none",width:"100%"},clicked:()=>{de(!0),(0,il.e_)({user_id:o.id,id:(0,w.mR)(),total:-+(null===e||void 0===e?void 0:e.value),product:"Withdrawal",notes:"Withdrawal",quantity:1}).pipe((0,h.P)()).subscribe({next:()=>{o.wallet=+(+(null===o||void 0===o?void 0:o.wallet)-(null===e||void 0===e?void 0:e.value)),e.visible=!1,de(!1)}})}}))}return"Currency"===(null===e||void 0===e?void 0:e.data_type_name)&&null!==e&&void 0!==e&&null!==(oi=e.options)&&void 0!==oi&&oi.currency_type?u.createElement("div",{style:{border:"1px solid var(--app-color-gray-light)",width:"inherit",display:"flex"}},u.createElement("div",{onClick:()=>de(!ne),className:c.Z.currencySymbol},null!==e&&void 0!==e&&null!==(Hs=e.options)&&void 0!==Hs&&Hs.symbol?null===e||void 0===e||null===(js=e.options)||void 0===js?void 0:js.symbol:""," "),ne&&u.createElement(x.Ld,{items:w.s3,defaultSelectedItem:{label:null===e||void 0===e||null===(Vs=e.options)||void 0===Vs?void 0:Vs.currency_type,value:null===e||void 0===e||null===(Gs=e.options)||void 0===Gs?void 0:Gs.country_code},triggerType:"chevron",placeholder:"Select curency...",className:c.Z.currencySelectComponent,inputClassName:c.Z.currencySearchInput,inputContainerClassName:c.Z.currencyInputContainerClassName,clearControlsClassName:c.Z.currencyClearControlsClassName,molclassname:c.Z.currencySelectMenuOverlayList,moliclassname:c.Z.currencySelectMenuOverlayListItem,onChange:e=>{z.currency=e.value,W(e,l),de(!1)}}),!ne&&u.createElement("input",{type:"number",autoComplete:"off",value:null!==(Js=D.selected_fields[l].value)&&void 0!==Js?Js:0,className:c.Z.currencyInput,onChange:e=>{P(e.target.value,l)}})):"Phone"===(null===e||void 0===e?void 0:e.data_type_name)?u.createElement(C(),{specialLabel:"",value:D.selected_fields[l].value,country:null===e||void 0===e||null===(Qs=e.options)||void 0===Qs?void 0:Qs.country_code,onChange:(e,o,i)=>{F(o,l,i.target.value)},inputClass:c.Z.phoneIInput}):u.createElement("div",{style:{width:"100%",border:null!==(Ks=e.options)&&void 0!==Ks&&Ks.rich?"1px solid var(--app-color-gray-light)":"0"}},"file"===e.data_type?u.createElement(Ol,{field_id:e.id,value:null===e||void 0===e?void 0:e.value,isInherited:R,checkIfAreMandatoryErrored:U,options:null===e||void 0===e?void 0:e.options,index:l,indexInContextArray:O}):"date"===e.data_type||null!==e&&void 0!==e&&null!==(Xs=e.options)&&void 0!==Xs&&Xs.country_code||null!==e&&void 0!==e&&null!==($s=e.options)&&void 0!==$s&&$s.currency_type||"Number"===e.data_type_name?u.createElement("div",{className:c.Z.fieldTypeInput,style:{border:"1px solid var(--app-color-gray-light)",height:"auto"}},"date"===e.data_type?"Range"===(null===e||void 0===e||null===(eu=e.options)||void 0===eu?void 0:eu.type)?u.createElement(x.$m,{inputContainerClassName:c.Z.inputContainerClassName,dateChangeHandler:e=>Gl(e,l),startDate:pe,endDate:me}):null!==e&&void 0!==e&&null!==(lu=e.options)&&void 0!==lu&&lu.time?u.createElement("div",{style:{width:"100%",height:"auto",border:"0"}},u.createElement(Te(),{selected:null!==e&&void 0!==e&&e.value?new Date(null===e||void 0===e?void 0:e.value):new Date,showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:15,customInput:u.createElement("div",{style:{cursor:"pointer",display:"flex",justifyContent:"center",width:"100%",alignItems:"stretch",padding:"5px",border:"0px solid var(--app-color-gray-lighter)"}},u.createElement("input",{value:e.value?Ke()(e.value).format("DD MMMM YYYY HH:mm"):"",className:c.Z.inputValue,type:"text",style:{flex:1,marginTop:"auto",marginBottom:"auto",outline:"none",fontFamily:"var(--app-text-main-font)",fontSize:"14px",fontWeight:"bold",lineHeight:"20px",color:"#4A4A4A",textAlign:"left",maxWidth:"98%",border:"0px"},onChange:e=>{}}),u.createElement(se.G,{icon:ue.WRo,style:{margin:"0 10px",width:"14px",height:"14px"}})),className:c.Z.singleInputContainer,onChange:e=>{P(e,l)}})):u.createElement(x.X9,{toggleDP:e=>Se(!0===e?"240px":"50px"),value:void 0==e.value?"":Ke()(new Date(e.value)).format("Do MMMM YYYY"),dateChangeHandler:e=>Jl(e,l),selected:new Date(Ke()(ae,"YYYY-MM-DD")),iconClassName:c.Z.calendar,inputContainerClassName:c.Z.singleInputContainer,inputStyle:{textAlign:"left",border:"none",fontSize:"16px"},hasCalendarIcon:!0}):u.createElement(u.Fragment,null,u.createElement("input",{onBlur:o=>Pl(e.data_type_name,o.target.value,O,l,z),type:e.data_type,onChange:e=>{P(e.target.value,l)},autoComplete:"none",value:D.selected_fields[l].value?D.selected_fields[l].value:""===Tl(null===e||void 0===e?void 0:e.options)?"":Tl(null===e||void 0===e?void 0:e.options),className:c.Z.fieldTypeInput,name:e.field_name,style:{height:"33px",backgroundColor:null!==e&&void 0!==e&&null!==(ou=e.options)&&void 0!==ou&&ou.valueC&&null!==e&&void 0!==e&&e.value?null===e||void 0===e||null===(iu=e.options)||void 0===iu?void 0:iu.valueC:""},disabled:null!==(tu=D.selected_fields[l].disabled)&&void 0!==tu&&tu}),!0===(null===e||void 0===e||null===(nu=e.options)||void 0===nu?void 0:nu.chart)&&u.createElement(cl.Z,{title:e.field_name,series:null===(du=D.selected_fields[l].value)||void 0===du?void 0:du.split(",").map(e=>+e),labels:null!==e&&void 0!==e&&null!==(au=e.options)&&void 0!==au&&au.notes?null===e||void 0===e||null===(ru=e.options)||void 0===ru||null===(vu=ru.notes)||void 0===vu?void 0:vu.split(","):["Incomplete","Completed"]}),"bar"===(null===e||void 0===e||null===(su=e.options)||void 0===su?void 0:su.display)&&"Number"===(null===e||void 0===e?void 0:e.data_type_name)&&u.createElement("div",{style:{height:"30px",width:"100%",backgroundColor:null===e||void 0===e||null===(uu=e.options)||void 0===uu?void 0:uu.maxC,display:"flex",flexDirection:"column"}},u.createElement("input",{value:null===(cu=D.selected_fields[l])||void 0===cu?void 0:cu.value,className:c.Z.fieldTypeInput,name:e.field_name,disabled:!0,style:{color:"transparent",height:"30px",width:"".concat(+(null===(pu=D.selected_fields[l])||void 0===pu?void 0:pu.value)/+e.options.max*100,"%"),backgroundColor:null===e||void 0===e||null===(mu=e.options)||void 0===mu?void 0:mu.barC}})))):"Long Text"===e.data_type_name?null!==(fu=e.options)&&void 0!==fu&&fu.rich?u.createElement(Sl.Z,{handleChange:e=>{P(e,l)}}):u.createElement("textarea",{className:c.Z.fieldTypeTextarea,style:{padding:"10px",border:"1px solid var(--app-color-gray-light)",backgroundColor:null!==e&&void 0!==e&&null!==(_u=e.options)&&void 0!==_u&&_u.valueC&&null!==e&&void 0!==e&&e.value?null===e||void 0===e||null===(yu=e.options)||void 0===yu?void 0:yu.valueC:""},onBlur:o=>Pl(e.data_type_name,o.target.value,O,l,z),type:e.data_type,value:D.selected_fields[l].value?D.selected_fields[l].value:""===Tl(null===e||void 0===e?void 0:e.options)?"":Tl(null===e||void 0===e?void 0:e.options),onFocus:()=>{},disabled:null!==(gu=D.selected_fields[l].disabled)&&void 0!==gu&&gu,autoComplete:"none",onChange:e=>{P(e.target.value,l)},name:e.field_name}):"Link"===e.data_type_name?u.createElement("div",{style:{width:"inherit",display:"flex",flexDirection:"column"}},(null===e||void 0===e?void 0:e.value)&&((null===e||void 0===e||null===(hu=e.value)||void 0===hu?void 0:hu.includes("jpg"))||(null===e||void 0===e||null===(bu=e.value)||void 0===bu?void 0:bu.includes("jpeg"))||(null===e||void 0===e||null===(xu=e.options)||void 0===xu?void 0:xu.image)||(null===e||void 0===e||null===(Eu=e.value)||void 0===Eu?void 0:Eu.includes("png")))&&u.createElement("img",{alt:"lg",onError:e=>e.target.src="https://i.quotev.com/b2gtjqawaaaa.jpg",src:null===e||void 0===e?void 0:e.value,style:{width:"100%",height:"100%",cursor:"pointer"}}),H&&u.createElement("img",{alt:"lg",onError:e=>e.target.src="https://i.quotev.com/b2gtjqawaaaa.jpg",src:"https://i.quotev.com/b2gtjqawaaaa.jpg",style:{width:"100%",height:"100%",cursor:"pointer"}}),u.createElement("textarea",{onBlur:o=>Pl(e.data_type_name,o.target.value,O,l,z),type:e.data_type,onChange:e=>{P(e.target.value,l)},autoComplete:"none",value:D.selected_fields[l].value?D.selected_fields[l].value:""===Tl(null===e||void 0===e?void 0:e.options)?"":Tl(null===e||void 0===e?void 0:e.options),className:c.Z.fieldTypeTextarea,style:{border:"1px solid var(--app-color-gray-light)"},name:e.field_name,disabled:null!==(Cu=D.selected_fields[l].disabled)&&void 0!==Cu&&Cu})):"Image"===e.data_type_name?u.createElement("div",{style:{width:"inherit",display:"flex",flexDirection:"column"}},u.createElement(Ol,{field_id:e.id,value:null===e||void 0===e?void 0:e.value,isInherited:R,checkIfAreMandatoryErrored:U,options:null===e||void 0===e?void 0:e.options,index:l,indexInContextArray:O})):u.createElement("input",{onBlur:o=>Pl(e.data_type_name,o.target.value,O,l,z),type:e.data_type,onChange:e=>{P(e.target.value,l)},autoComplete:"none",value:D.selected_fields[l].value?D.selected_fields[l].value:""===Tl(null===e||void 0===e?void 0:e.options)?"":Tl(null===e||void 0===e?void 0:e.options),className:c.Z.fieldTypeInput,style:{border:"1px solid var(--app-color-gray-light)",backgroundColor:null!==e&&void 0!==e&&null!==(wu=e.options)&&void 0!==wu&&wu.valueC&&null!==e&&void 0!==e&&e.value?null===e||void 0===e||null===(Mu=e.options)||void 0===Mu?void 0:Mu.valueC:"",paddingLeft:"5px"},name:e.field_name,disabled:null!==(Su=D.selected_fields[l].disabled)&&void 0!==Su&&Su}))}return u.createElement("div",{style:{width:"100%",height:"auto",border:"1px solid var(--app-color-gray-light)"}},u.createElement(Te(),{showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:5,customInput:u.createElement("div",{id:"custom-input",style:{cursor:"pointer",display:"flex",justifyContent:"center",width:"100%",alignItems:"stretch",padding:"5px",border:"0px solid var(--app-color-gray-lighter)"}},u.createElement("input",{value:e.value?Ke()(e.value).format("DD MMMM YYYY HH:mm"):"",disabled:!0,type:"text",style:{flex:1,marginTop:"auto",marginBottom:"auto",outline:"none",fontFamily:"var(--app-text-main-font)",fontSize:"16px",lineHeight:"20px",color:"#4A4A4A",textAlign:"left",maxWidth:"98%",border:"0px"},onChange:e=>{}}),u.createElement(se.G,{icon:ue.WRo,style:{marginLeft:"10px",width:"14px",height:"14px"}})),className:c.Z.singleInputContainer,selected:null!==e&&void 0!==e&&e.value?new Date(Ke()(null===e||void 0===e?void 0:e.value)):(0,Qe.now)(),onChange:e=>{e>(0,Qe.now)()&&Jl(e,l)}}))}{var $u,ec,lc,oc,ic,tc,nc,dc,ac,rc,vc,sc,uc;const o={item_code:null,quantity:null,value:null,alt_value:null,total:null},i=Object.entries(Object.assign(o,e.options.map)).reduce((e,l)=>{let[o,i]=l;return null===i||(e[o]=i),e},{});return u.createElement($e.Z,{tableStyle:{marginBottom:z.items.find(e=>e.edit)?"160px":"0"},style:{width:"100%",border:"0",minWidth:"50vw"},modern:!(!ml.tq&&"vertical"!==(null===e||void 0===e||null===($u=e.options)||void 0===$u?void 0:$u.table)),tableHostSimple:c.Z.itemsContainer_ii,layeredColumns:null===D||void 0===D||null===(ec=D.selected_fields)||void 0===ec?void 0:ec.filter(e=>{var l;return null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.mapToItem}).map(e=>{var l,o;return null!==(l=e.options)&&void 0!==l&&l.group?{label:null===(o=e.options)||void 0===o?void 0:o.group,subColumns:[{label:e.field_name}]}:{label:e.field_name}}).concat((null===(lc=z.items)||void 0===lc?void 0:lc.length)>0?[{label:"Actions"}]:[]),list:null===(oc=qe.Z([He.Z(Be.Z("index"))])(null!==(ic=null!==e&&void 0!==e&&null!==(tc=e.options)&&void 0!==tc&&tc.type?z.items.filter(l=>{var o;return l.type===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.type)}):z.items)&&void 0!==ic?ic:[]))||void 0===oc?void 0:oc.map((l,o)=>{let t={index:o,Actions:u.createElement("div",{style:{display:"flex",justifyContent:"space-evenly",alignContent:"center",minWidth:"80px",maxWidth:"120px",margin:null!==l&&void 0!==l&&l.edit?"0":"20px 10px"}},!(null!==l&&void 0!==l&&l.edit)&&u.createElement(se.G,{icon:ue.IwR,onClick:()=>{l.edit=!0,L({action:M._U.setModuleItems,value:z.items}),ql(l)}}),(null===l||void 0===l?void 0:l.edit)&&u.createElement(se.G,{icon:ue.EsX,onClick:()=>{var o;l.edit=!1,L({action:M._U.setModuleItems,value:z.items}),null!==T&&void 0!==T&&T.id&&null!==e&&void 0!==e&&null!==(o=e.options)&&void 0!==o&&o.asap&&(0,f.np)(l,T.id).subscribe({})}}),(null===l||void 0===l?void 0:l.edit)&&u.createElement(se.G,{icon:ue.$aW,onClick:()=>{L({action:M._U.setModuleItems,value:z.items.filter(e=>e.id!==l.id).map((e,l)=>(0,s.Z)((0,s.Z)({},e),{},{index:l}))})}}))};return Object.entries(null!==i&&void 0!==i?i:[]).forEach(e=>{var i,n,d;t[e[1]]=u.createElement("div",{style:{padding:"0"}},u.createElement(io,{index:o,enabled:!0,edit:null!==(i=null===l||void 0===l?void 0:l.edit)&&void 0!==i&&i,isItem:!0,item:l,field:(0,s.Z)((0,s.Z)({},null!==(n=null===D||void 0===D||null===(d=D.selected_fields)||void 0===d?void 0:d.find(l=>{var o;return(null===l||void 0===l||null===(o=l.options)||void 0===o?void 0:o.mapToItem)===e[0]}))&&void 0!==n?n:{}),{},{visible:!0,value:l[e[0]]}),withLabel:!1,handleItem:(o,i)=>{l[e[0]]!==o&&(l[e[0]]=o,L({action:M._U.setModuleItems,value:[...z.items.filter(e=>e.id!==l.id),l]}))}}))}),t}),footer:(null===(nc=z.items)||void 0===nc?void 0:nc.length)>0&&null!==(dc=e.options)&&void 0!==dc&&dc.footer?null===D||void 0===D||null===(ac=D.selected_fields)||void 0===ac?void 0:ac.filter(e=>{var l;return null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.mapToItem}).map((l,o)=>{var i,t;return null!==l&&void 0!==l&&null!==(i=l.options)&&void 0!==i&&i.footer?u.createElement("div",{style:{margin:"20px 0px"}},to(null!==e&&void 0!==e&&null!==(t=e.options)&&void 0!==t&&t.type?z.items.filter(l=>{var o;return l.type===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.type)}):z.items,l,e)):0===o?"Totals:":""}).concat([""]):[]},(null===D||void 0===D||null===(rc=D.options)||void 0===rc?void 0:rc.allowMultipleInputs)&&u.createElement("div",{className:c.Z.iconsContainer,style:{display:"flex",justifyContent:"space-between"}},u.createElement(x.zx,{light:!0,style:{width:"32px"},clicked:()=>{var l,o;L({action:M._U.setModuleItems,value:[...z.items,{id:(0,w.mR)(),item_code:"",value:"",alt_value:"",quantity:"",total:"",type:null!==(l=null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.type)&&void 0!==l?l:"",edit:!0,index:z.items.length}]})}},u.createElement(p.mm,null)),(null===(vc=e.options)||void 0===vc?void 0:vc.export)&&Kl(null===T||void 0===T?void 0:T.component_items,["item_code","quantity","value","alt_value","total"])),Wl&&u.createElement(x.U7,{hasCloseIcon:!0,blured:!1,scrollable:!0,isOpen:!!Wl,shadowedContainerStyle:{width:ml.tq?"100%":"35%"},onClose:()=>ql(void 0)},u.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",marginTop:"30px",padding:"10px"}},(null!==(sc=null===D||void 0===D||null===(uc=D.selected_fields)||void 0===uc?void 0:uc.filter(e=>{var l;return null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.mapToItem}))&&void 0!==sc?sc:[]).map((e,o)=>{var i;return u.createElement("div",{key:o,style:{padding:"0",display:"flex",marginBottom:"20px",alignItems:"left",width:"100%"}},u.createElement("p",{style:{fontWeight:"bold",width:"30%"}},e.field_name),u.createElement(io,{item:e,index:l,enabled:!0,edit:!0,isItem:!0,field:(0,s.Z)((0,s.Z)({},e),{},{visible:!0,value:null!==(i=Wl[e.options.mapToItem])&&void 0!==i?i:""}),withLabel:!1,handleItem:(l,o)=>{Wl[e.options.mapToItem]=l,L({action:M._U.setModuleItems,value:[...z.items.filter(e=>e.id!==Wl.id),Wl]})}}))}),u.createElement(x.zx,{title:"Update",clicked:()=>{Wl.edit=!1,ql(void 0)},style:{width:"100px"}}))))}}var cc},ao=(null===D||void 0===D||null===(o=D.selected_fields)||void 0===o?void 0:o.length)>0&&(null===D||void 0===D||null===(i=D.selected_fields)||void 0===i?void 0:i.sort((e,l)=>e.index-l.index).map((e,l)=>{var o,i,t,n,d,a,r,v,c,p,f,_,y,g,h,b,x,E,C,w,M;const S=(0,s.Z)((0,s.Z)({},e),{},{visible:null===e||void 0===e?void 0:e.visible,field:e});return u.createElement(m.Z,{landscape:!ml.tq&&(null===S||void 0===S||null===(o=S.options)||void 0===o?void 0:o.landscape),enabled:null===S||void 0===S?void 0:S.enabled,width:"Transaction List"===(null===S||void 0===S?void 0:S.data_type_name)||"Step List"===(null===S||void 0===S?void 0:S.data_type_name)||"Component List"===(null===S||void 0===S?void 0:S.data_type_name)||"Module"===(null===S||void 0===S?void 0:S.data_type_name)||"rows"===(null===S||void 0===S||null===(i=S.options)||void 0===i?void 0:i.orientation)&&"Info"===(null===S||void 0===S?void 0:S.data_type_name)||"GoogleAI Assistant"===(null===S||void 0===S?void 0:S.data_type_name)||"Calendar"===(null===S||void 0===S?void 0:S.data_type_name)||"Video"===(null===S||void 0===S?void 0:S.data_type_name)&&null!==S&&void 0!==S&&null!==(t=S.options)&&void 0!==t&&t.start||"Summary"===(null===S||void 0===S?void 0:S.data_type_name)||"Record"===(null===S||void 0===S?void 0:S.data_type_name)&&"Tiles"===(null===S||void 0===S||null===(n=S.options)||void 0===n?void 0:n.selection)||ml.tq?"100%":"Tiles"===(null===S||void 0===S||null===(d=S.options)||void 0===d?void 0:d.selection)&&"Lookup"===(null===S||void 0===S?void 0:S.data_type_name)||"Formula"===(null===S||void 0===S?void 0:S.data_type_name)||"People"===(null===S||void 0===S?void 0:S.data_type_name)?"50%":"".concat(null!==(a=null===S||void 0===S||null===(r=S.options)||void 0===r?void 0:r.width)&&void 0!==a?a:(null===D||void 0===D||null===(v=D.selected_fields)||void 0===v?void 0:v.filter(e=>!0===e.visible).length)<5?"50":Nl,"%"),editMode:Y,key:l,fieldLabel:"Checkbox"===(null===S||void 0===S?void 0:S.data_type_name)?null!==S&&void 0!==S&&null!==(c=S.options)&&void 0!==c&&c.value?"":S.field_name:"Info"===(null===S||void 0===S?void 0:S.data_type_name)||"Module"===(null===S||void 0===S?void 0:S.data_type_name)||"Record"===(null===S||void 0===S?void 0:S.data_type_name)&&(null===S||void 0===S||null===(p=S.options)||void 0===p||null===(f=p.filters)||void 0===f?void 0:f.length)>0||"Filters"===(null===S||void 0===S?void 0:S.data_type_name)&&(null===S||void 0===S||null===(_=S.options)||void 0===_||null===(y=_.filters)||void 0===y?void 0:y.length)>0||"Profile"===(null===S||void 0===S?void 0:S.data_type_name)||"Chart"===(null===S||void 0===S?void 0:S.data_type_name)||"URL"===(null===S||void 0===S?void 0:S.data_type_name)||"Print"===(null===S||void 0===S?void 0:S.data_type_name)||null!==S&&void 0!==S&&null!==(g=S.options)&&void 0!==g&&g.rich?"":null!==(h=null===(b=S.options)||void 0===b?void 0:b.label)&&void 0!==h?h:S.field_name,fieldIcon:S.icon,isProcess:!0,visible:!("Global"===(null===S||void 0===S?void 0:S.data_type_name)||"Connector"===(null===S||void 0===S?void 0:S.data_type_name)||"Emails"===(null===S||void 0===S?void 0:S.data_type_name)||"Template"===(null===S||void 0===S?void 0:S.data_type_name)||"List Filter"===(null===S||void 0===S?void 0:S.data_type_name)&&(null===S||void 0===S||null===(x=S.options)||void 0===x||null===(E=x.value)||void 0===E?void 0:E.length)>0||"Action Button"===(null===S||void 0===S?void 0:S.data_type_name)||"Ratings"===(null===S||void 0===S?void 0:S.data_type_name))&&S.visible,mandatory:S.mandatory,error:(null===(C=S.errors)||void 0===C?void 0:C.length)>0?"".concat(S.errors,"."):"",notes:"Value Button"===(null===S||void 0===S?void 0:S.data_type_name)?"":null===S||void 0===S||null===(w=S.options)||void 0===w?void 0:w.notes,showWidth:"Transaction List"===(null===S||void 0===S?void 0:S.data_type_name)?e=>{S.options=(0,s.Z)((0,s.Z)({},S.options),{},{width:"".concat(e,"px")})}:()=>{},dragEnd:"People"===(null===S||void 0===S?void 0:S.data_type_name)?l=>{var o;const i=null===(o=document.getElementById(null===D||void 0===D?void 0:D.name))||void 0===o?void 0:o.getBoundingClientRect();document.getElementById(e.field_name).style.position="absolute",document.getElementById(e.field_name).style.top="".concat(l.top-i.top,"px"),document.getElementById(e.field_name).style.left="".concat(l.left-i.left,"px")}:()=>{},style:{border:"0"},customStyle:ml.tq?{}:null===S||void 0===S||null===(M=S.options)||void 0===M?void 0:M.style},no(S,l))})),ro=(null===D||void 0===D||null===(t=D.selected_fields)||void 0===t?void 0:t.length)>0&&(null===D||void 0===D||null===(n=D.selected_fields)||void 0===n?void 0:n.sort((e,l)=>e.index-l.index).map((e,l)=>{var o,i,t,n,d,a,r,v,c,p,f,_,y,g,h,b,x,E,C,w,M,S;const k=(0,s.Z)((0,s.Z)({},e),{},{visible:!(null===e||void 0===e||!e.visible)&&(!((null===D||void 0===D||null===(o=D.options)||void 0===o||null===(i=o.left)||void 0===i||null===(t=i.find(l=>l===e.field_name))||void 0===t?void 0:t.length)>0)&&e.visible),field:e});return u.createElement(m.Z,{landscape:!ml.tq&&(null===k||void 0===k||null===(n=k.options)||void 0===n?void 0:n.landscape),enabled:null===k||void 0===k?void 0:k.enabled,width:"Transaction List"===(null===k||void 0===k?void 0:k.data_type_name)||"Step List"===(null===k||void 0===k?void 0:k.data_type_name)||"Component List"===(null===k||void 0===k?void 0:k.data_type_name)||"Module"===(null===k||void 0===k?void 0:k.data_type_name)||"rows"===(null===k||void 0===k||null===(d=k.options)||void 0===d?void 0:d.orientation)&&"Info"===(null===k||void 0===k?void 0:k.data_type_name)||"GoogleAI Assistant"===(null===k||void 0===k?void 0:k.data_type_name)||"Calendar"===(null===k||void 0===k?void 0:k.data_type_name)||"Video"===(null===k||void 0===k?void 0:k.data_type_name)&&null!==k&&void 0!==k&&null!==(a=k.options)&&void 0!==a&&a.start||"Summary"===(null===k||void 0===k?void 0:k.data_type_name)||"Record"===(null===k||void 0===k?void 0:k.data_type_name)&&"Tiles"===(null===k||void 0===k||null===(r=k.options)||void 0===r?void 0:r.selection)||ml.tq?"100%":"Tiles"===(null===k||void 0===k||null===(v=k.options)||void 0===v?void 0:v.selection)&&"Lookup"===(null===k||void 0===k?void 0:k.data_type_name)||"Formula"===(null===k||void 0===k?void 0:k.data_type_name)?"50%":"".concat(null!==(c=null===k||void 0===k||null===(p=k.options)||void 0===p?void 0:p.width)&&void 0!==c?c:(null===D||void 0===D||null===(f=D.selected_fields)||void 0===f?void 0:f.filter(e=>!0===e.visible).length)<5?"50":Nl,"%"),editMode:Y,key:l,fieldLabel:"Checkbox"===(null===k||void 0===k?void 0:k.data_type_name)?null!==k&&void 0!==k&&null!==(_=k.options)&&void 0!==_&&_.value?"":k.field_name:"Info"===(null===k||void 0===k?void 0:k.data_type_name)||"Module"===(null===k||void 0===k?void 0:k.data_type_name)||"Record"===(null===k||void 0===k?void 0:k.data_type_name)&&(null===k||void 0===k||null===(y=k.options)||void 0===y||null===(g=y.filters)||void 0===g?void 0:g.length)>0||"Filters"===(null===k||void 0===k?void 0:k.data_type_name)&&(null===k||void 0===k||null===(h=k.options)||void 0===h||null===(b=h.filters)||void 0===b?void 0:b.length)>0||"Profile"===(null===k||void 0===k?void 0:k.data_type_name)||"Chart"===(null===k||void 0===k?void 0:k.data_type_name)||"URL"===(null===k||void 0===k?void 0:k.data_type_name)?"":null!==(x=null===(E=k.options)||void 0===E?void 0:E.label)&&void 0!==x?x:k.field_name,fieldIcon:k.icon,isProcess:!0,visible:!("Global"===(null===k||void 0===k?void 0:k.data_type_name)||"Connector"===(null===k||void 0===k?void 0:k.data_type_name)||"Emails"===(null===k||void 0===k?void 0:k.data_type_name)||"Template"===(null===k||void 0===k?void 0:k.data_type_name)||"List Filter"===(null===k||void 0===k?void 0:k.data_type_name)&&(null===k||void 0===k||null===(C=k.options)||void 0===C||null===(w=C.value)||void 0===w?void 0:w.length)>0||"Action Button"===(null===k||void 0===k?void 0:k.data_type_name)||"Ratings"===(null===k||void 0===k?void 0:k.data_type_name))&&k.visible,mandatory:k.mandatory,error:(null===(M=k.errors)||void 0===M?void 0:M.length)>0?"".concat(k.errors,"."):"",notes:"Value Button"===(null===k||void 0===k?void 0:k.data_type_name)?"":null===k||void 0===k||null===(S=k.options)||void 0===S?void 0:S.notes,showWidth:"Transaction List"===(null===k||void 0===k?void 0:k.data_type_name)?e=>{k.options=(0,s.Z)((0,s.Z)({},k.options),{},{width:"".concat(e,"px")})}:()=>{},dragEnd:"People"===(null===k||void 0===k?void 0:k.data_type_name)?l=>{var o;const i=null===(o=document.getElementById(null===D||void 0===D?void 0:D.name))||void 0===o?void 0:o.getBoundingClientRect();document.getElementById(e.field_name).style.position="absolute",document.getElementById(e.field_name).style.top="".concat(l.top-i.top,"px"),document.getElementById(e.field_name).style.left="".concat(l.left-i.left,"px")}:()=>{},style:{border:"0"}},no(k,l))})),vo=(null===D||void 0===D||null===(d=D.selected_fields)||void 0===d?void 0:d.length)>0&&(null===D||void 0===D||null===(a=D.selected_fields)||void 0===a?void 0:a.sort((e,l)=>e.index-l.index).map((e,l)=>{var o,i,t,n,d,a,r,v,c,p,f,_,y,g,h,b,x,E,C,w,M;const S=(0,s.Z)((0,s.Z)({},e),{},{visible:!!e.visible&&((null===D||void 0===D||null===(o=D.options)||void 0===o||null===(i=o.left)||void 0===i||null===(t=i.find(l=>l===e.field_name))||void 0===t?void 0:t.length)>0&&e.visible),field:e});return u.createElement(m.Z,{landscape:!1,enabled:null===S||void 0===S?void 0:S.enabled,width:"Transaction List"===(null===S||void 0===S?void 0:S.data_type_name)||"Step List"===(null===S||void 0===S?void 0:S.data_type_name)||"Component List"===(null===S||void 0===S?void 0:S.data_type_name)||"Module"===(null===S||void 0===S?void 0:S.data_type_name)||"rows"===(null===S||void 0===S||null===(n=S.options)||void 0===n?void 0:n.orientation)&&"Info"===(null===S||void 0===S?void 0:S.data_type_name)||"GoogleAI Assistant"===(null===S||void 0===S?void 0:S.data_type_name)||"Calendar"===(null===S||void 0===S?void 0:S.data_type_name)||"Video"===(null===S||void 0===S?void 0:S.data_type_name)&&null!==S&&void 0!==S&&null!==(d=S.options)&&void 0!==d&&d.start||"Summary"===(null===S||void 0===S?void 0:S.data_type_name)||"Record"===(null===S||void 0===S?void 0:S.data_type_name)&&"Tiles"===(null===S||void 0===S||null===(a=S.options)||void 0===a?void 0:a.selection)||ml.tq?"100%":"Tiles"===(null===S||void 0===S||null===(r=S.options)||void 0===r?void 0:r.selection)&&"Lookup"===(null===S||void 0===S?void 0:S.data_type_name)||"Formula"===(null===S||void 0===S?void 0:S.data_type_name)?"50%":"".concat(null!==(v=null===S||void 0===S||null===(c=S.options)||void 0===c?void 0:c.width)&&void 0!==v?v:(null===D||void 0===D||null===(p=D.selected_fields)||void 0===p?void 0:p.filter(e=>!0===e.visible).length)<5?"50":Nl,"%"),editMode:Y,key:l,fieldLabel:"Checkbox"===(null===S||void 0===S?void 0:S.data_type_name)?null!==S&&void 0!==S&&null!==(f=S.options)&&void 0!==f&&f.value?"":S.field_name:"Info"===(null===S||void 0===S?void 0:S.data_type_name)||"Module"===(null===S||void 0===S?void 0:S.data_type_name)||"Record"===(null===S||void 0===S?void 0:S.data_type_name)&&(null===S||void 0===S||null===(_=S.options)||void 0===_||null===(y=_.filters)||void 0===y?void 0:y.length)>0||"Filters"===(null===S||void 0===S?void 0:S.data_type_name)&&(null===S||void 0===S||null===(g=S.options)||void 0===g||null===(h=g.filters)||void 0===h?void 0:h.length)>0||"Profile"===(null===S||void 0===S?void 0:S.data_type_name)||"Chart"===(null===S||void 0===S?void 0:S.data_type_name)||"URL"===(null===S||void 0===S?void 0:S.data_type_name)?"":null!==(b=null===(x=S.options)||void 0===x?void 0:x.label)&&void 0!==b?b:S.field_name,fieldIcon:S.icon,isProcess:!0,visible:!("Global"===(null===S||void 0===S?void 0:S.data_type_name)||"Connector"===(null===S||void 0===S?void 0:S.data_type_name)||"Emails"===(null===S||void 0===S?void 0:S.data_type_name)||"Template"===(null===S||void 0===S?void 0:S.data_type_name)||"List Filter"===(null===S||void 0===S?void 0:S.data_type_name)&&(null===S||void 0===S||null===(E=S.options)||void 0===E||null===(C=E.value)||void 0===C?void 0:C.length)>0||"Action Button"===(null===S||void 0===S?void 0:S.data_type_name)||"Ratings"===(null===S||void 0===S?void 0:S.data_type_name))&&S.visible,mandatory:S.mandatory,error:(null===(w=S.errors)||void 0===w?void 0:w.length)>0?"".concat(S.errors,". Try to select again"):"",notes:"Value Button"===(null===S||void 0===S?void 0:S.data_type_name)?"":null===S||void 0===S||null===(M=S.options)||void 0===M?void 0:M.notes,showWidth:"Transaction List"===(null===S||void 0===S?void 0:S.data_type_name)?e=>{S.options=(0,s.Z)((0,s.Z)({},S.options),{},{width:"".concat(e,"px")})}:()=>{},dragEnd:"People"===(null===S||void 0===S?void 0:S.data_type_name)?l=>{var o;const i=null===(o=document.getElementById(null===D||void 0===D?void 0:D.name))||void 0===o?void 0:o.getBoundingClientRect();document.getElementById(e.field_name).style.position="absolute",document.getElementById(e.field_name).style.top="".concat(l.top-i.top,"px"),document.getElementById(e.field_name).style.left="".concat(l.left-i.left,"px")}:()=>{},style:{border:"0"}},no(S,l))}));return u.createElement("div",{style:{width:"inherit"}},u.createElement("div",{ref:Hl,id:null===D||void 0===D?void 0:D.name,className:c.Z.emulatedFlexGap,style:{width:ml.tq?"100%":"",position:"relative",marginBottom:Me}},(null===D||void 0===D?void 0:D.selected_fields.filter(e=>{var l,o;return null===D||void 0===D||null===(l=D.options)||void 0===l||null===(o=l.left)||void 0===o?void 0:o.find(l=>l===e.field_name)}).length)>0&&!ml.tq?u.createElement("div",{style:{display:ml.tq?"block":"flex",width:"100%"}},u.createElement("div",{style:{width:ml.tq?"100%":"30%",overflow:"auto"}},vo),u.createElement("div",{className:c.Z.emulatedFlexGap,style:{width:ml.tq?"100%":"80%",overflow:"auto",padding:"0",margin:"0"}},ro)):ao,(null===vl||void 0===vl||null===(E=vl.candidates)||void 0===E?void 0:E.length)>0&&u.createElement(m.Z,{width:"80%",fieldLabel:"Response",visible:!0},u.createElement("textarea",{className:c.Z.fullLengthTextarea,type:"text",onFocus:()=>{},disabled:!0,value:null===vl||void 0===vl||null===(k=vl.candidates[0])||void 0===k||null===(I=k.content.parts[0])||void 0===I?void 0:I.text}))),(null===D||void 0===D||null===(N=D.selected_fields)||void 0===N?void 0:N.find(e=>"Print"===e.data_type_name))&&u.createElement(Ml(),{trigger:()=>u.createElement("button",{className:c.Z.singleButton},"Print"),content:()=>Hl.current}))});function Tl(e){return null!==e&&void 0!==e&&e.country_prefix?null===e||void 0===e?void 0:e.country_prefix:null!==e&&void 0!==e&&e.currency_value?(null===e||void 0===e?void 0:e.currency_value)+" ":""}const Pl=(e,l,o,i,t)=>{var n,d,a;const r=[...null!==(n=null===(d=t.currentStep)||void 0===d?void 0:d.component_blueprints)&&void 0!==n?n:[]],v=null===(a=r[o])||void 0===a?void 0:a.selected_fields[i];switch(e){case"Link":!function(e){let l;try{l=new URL(e)}catch(o){return!1}return"http:"===l.protocol||"https:"===l.protocol}(l)?v.errors="This field should contain a link!":v.errors="";break;case"E-mail":case"Email":new RegExp(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/).test(l)?v.errors="":v.errors="This field should contain an valid email address!";break;case"Phone":new RegExp(/^[+]?[(]?[0-9]{3}[)]?[-\s.]?[0-9]{3}[-\s.]?[0-9]{4,6}$/im).test(l)?v.errors="":v.errors="This field should contain an valid phone number!";break;case"Email Recipient":new RegExp(/^([a-z0-9!#$%&'*+/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*)(([, ]+[a-z0-9!#$%&'*+/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])\.([a-z0-9]([a-z0-9-]*[a-z0-9]))*)?)*$/).test(l)?v.errors="":v.errors="This field should contain an valid email address!";break;case"Number":var s;if(null!==v&&void 0!==v&&null!==(s=v.options)&&void 0!==s&&s.maxF){var u;const e=null===(u=r.find(e=>e.selected_fields.find(e=>{var l;return e.field_name===(null===v||void 0===v||null===(l=v.options)||void 0===l?void 0:l.maxF)})))||void 0===u?void 0:u.selected_fields.find(e=>{var l;return e.field_name===(null===v||void 0===v||null===(l=v.options)||void 0===l?void 0:l.maxF)});+l<+(null===e||void 0===e?void 0:e.value)?(v.errors="Value is too low. Increase the value.",v.value=void 0):v.errors=""}}},Ol=e=>{var l;const{options:o,field_id:i,index:t,indexInContextArray:n,value:d,checkIfAreMandatoryErrored:a}=e,[r,v]=(0,u.useState)(),[s,p]=(0,u.useState)(!1),[m,_]=(0,M.pQ)(),y=(null===d||void 0===d?void 0:d.includes("jpg"))||(null===d||void 0===d?void 0:d.includes("jpeg"))||(null===o||void 0===o?void 0:o.image)||(null===d||void 0===d?void 0:d.includes("png"));return u.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center",flex:"1 1",overflow:"hidden",border:"1px solid var(--app-color-gray-light)",padding:"10px"}},y&&u.createElement("img",{alt:"lg",onError:e=>e.target.src="https://i.quotev.com/b2gtjqawaaaa.jpg",src:d,style:{width:"100%",height:"100%",cursor:"pointer"},onClick:()=>navigator.clipboard.writeText(d)}),u.createElement("u",{onClick:y?()=>{var e,l;const o=d.indexOf("/files/"),i=d.substring(o+1),a=[...null!==(e=null===(l=m.currentStep)||void 0===l?void 0:l.component_blueprints)&&void 0!==e?e:[]];a[n].selected_fields[t].value=void 0,_({action:M._U.setComponentBlueprints,value:a}),_({action:M._U.setModuleNewStepComponents,value:a}),p(!0),(0,f.cv)(i).subscribe({next:()=>{p(!1)},error:e=>{p(!1)}})}:()=>{var e;null===(e=document.getElementById("file-change-".concat(i)))||void 0===e||e.click()},style:{cursor:"pointer",marginLeft:"20px",wordWrap:"break-word"}},y?"Remove":null!==r&&void 0!==r&&r.name||d?(null===r||void 0===r?void 0:r.name)||d:"Click to upload file..."),u.createElement("input",{accept:"."+(null===o||void 0===o||null===(l=o.accepted_mimes)||void 0===l?void 0:l.replace(/,/g,",.")),type:"file",onChange:()=>(e=>{var l,o;const d=document.getElementById("file-change-".concat(i)).files[0],r=((null===d||void 0===d?void 0:d.size)/1024/1024).toFixed(4),s=(e/1024).toFixed(4);p(!0);const u=[...null!==(l=null===(o=m.currentStep)||void 0===o?void 0:o.component_blueprints)&&void 0!==l?l:[]];r>s?alert("File is too big!"):(0,f.kf)(d,i).subscribe({next:e=>{v(d),p(!1),u[n].selected_fields[t].value=null===e||void 0===e?void 0:e.file_url,u[n].selected_fields[t].value&&u[n].selected_fields[t].mandatory&&(u[n].selected_fields[t].errors=""),a(),_({action:M._U.setComponentBlueprints,value:u}),_({action:M._U.setModuleNewStepComponents,value:u})}})})(null===o||void 0===o?void 0:o.max_file_size),style:{position:"absolute",visibility:"hidden",width:"0px"},id:"file-change-".concat(i),className:c.Z.fieldTypeInput}),s&&u.createElement(x.zx,{clear:!0,title:"Uploading",loading:!!s}))}},63864:(e,l,o)=>{"use strict";o.d(l,{Z:()=>I});var i=o(1413),t=o(67861),n=o(48929);const d="SelectAndMultiselect_selectAndMultiselectHost__JL5Qu",a="SelectAndMultiselect_tiles__GNuMU",r="SelectAndMultiselect_fieldLabel__LpRMc",v="SelectAndMultiselect_multiselectComponent__0I85T",s="SelectAndMultiselect_multiselectMenuOverlayList__4knAb",u="SelectAndMultiselect_multiselectMenuOverlayListItem__fBe0B",c="SelectAndMultiselect_dropdownSelectMenuOverlayList__MRf2l",p="SelectAndMultiselect_dropdownSelectComponent__0UNAl",m="SelectAndMultiselect_dropdownInput__BPcW7",f="SelectAndMultiselect_menuButtonPlaceholder__V0wnB",_="SelectAndMultiselect_dropdownSelectMenuOverlayListItem__NM5xS",y="SelectAndMultiselect_center__Dukva";var g=o(64967),h=o(27436);const b="Card_statusCardContainer__m5Upe",x="Card_statusCard__3ICe3",E="Card_statusTitleContainer__C4HCR",C="Card_statusDescriptionContainer__E3WnX";var w=o(47144),M=o.n(w),S=o(67861);const k=e=>{const{onClick:l,cardTitle:o,subtitle:i="",className:t}=e;return S.createElement("div",{className:M()(b,t),style:{display:"inline-block"},onClick:()=>l()},S.createElement("div",{className:x},S.createElement("div",{style:{padding:"15px"}},S.createElement("div",{className:E},S.createElement("p",null,o)),S.createElement("div",{className:C},S.createElement("p",null,i)))))},Z=o(66918),I=e=>{const{selectionType:l="Dropdown",items:o,fieldIcon:b,placeholder:x,fieldLabel:E,onChange:C,visible:w=!0,mandatory:M=!1,error:S,loading:I,onFocus:N,onClicked:D=()=>{},value:T,className:P,onClose:O=()=>{},onOpen:A=()=>{},titleProps:z={},children:L,backgroundColor:R,max:U}=e,[F,W]=(0,t.useState)(!0);return t.createElement("div",{onFocus:N,onClick:A,className:d,style:{display:w?"":"none"}},E?t.createElement("label",{className:r,style:(0,i.Z)({},z)},E," ",M&&t.createElement("span",null,"*")):t.createElement(t.Fragment,null),t.createElement("div",{className:a},"Tiles"===l&&o.map((e,l)=>t.createElement(k,{cardTitle:e.label,key:l,onClick:()=>{C("".concat(e.value))}}))),"multiple"===l&&t.createElement(n.NU,{loading:I,items:null!==o&&void 0!==o?o:[],toggleLeftIcon:b,notags:!0,error:!!S,style:{backgroundColor:null!==R&&void 0!==R?R:""},initialSelectedValues:T&&Z.split(",",T),itemType:"checkboxes",tmiClassName:m,className:P||v,molclassname:s,moliclassname:u,menuButtonPlaceholder:P||f,placeholder:x,checkboxEmplacement:"right",onOpen:e=>D(e),onChange:e=>{C(e.map(e=>e.label).toString())},selectionLimit:U},L),("single"===l||"Dropdown"===l||"decision"===l||"modules"===l)&&t.createElement(g.M,{style:{backgroundColor:R},className:P||p,tmiClassName:m,molclassname:c,moliclassname:_,menuButtonPlaceholder:f,selectType:"checkbox",loading:I,title:"",error:S,placeholder:x,onOpen:e=>D(e),onChange:e=>{C("".concat(e.value))},items:null!==o&&void 0!==o?o:[],defaultSelected:T&&o.find(e=>e.label===T)},L),I&&F?t.createElement(n.U7,{blured:!0,scrollable:!0,isOpen:I&&F,shadowedContainerStyle:{width:"200px"}},t.createElement("div",{className:y,style:{width:"200px",height:"50px"},onClick:()=>W(!1)},t.createElement(n.$j,{type:"BallTriangle",color:"black",height:30,width:"30px",style:{marginRight:"30px"}}),"Processing...")):null,S&&t.createElement(h.Z,{message:S}))}},52950:(e,l,o)=>{"use strict";o.d(l,{Z:()=>A});var i=o(67861),t=(o(83381),o(48929)),n=o(1413),d=o(50981),a=o.n(d),r=o(9825),v=o.n(r),s=o(39518),u=o(23280),c=o(63077),p=o(79492),m=o.n(p),f=o(85692),_=o(51481),y=o(49465),g=o(40694);const h="TaskForm_newTaskFormHost__8YIFH",b="TaskForm_buttonsContainer__Y5EGp",x="TaskForm_datePickerWrapper__vAFgZ",E="TaskForm_saveButton__6OqA+",C="TaskForm_calendarSVG__bXc-+";var w=o(27436);o(79633);o(66918);const M=e=>{const{isOpen:l,onClose:o,loading:n,removeTask:d,taskId:a}=e;return i.createElement(t.U7,{isOpen:l,onClose:()=>o(!1),backdropColor:!0,blured:!0,scrollable:!0,shadowedContainerStyle:{width:"35%"}},i.createElement("div",null,i.createElement("p",{style:{textAlign:"center",fontSize:"20px",color:"#4A4A4A",fontFamily:"var(--app-text-main-font)"}},"Are you sure do you want to delete this task?"),i.createElement(g.Z,{loading:n,clicked:()=>d(a),title:"Yes, Delete",style:{fontWeight:"500",marginLeft:"auto",marginRight:"auto"}}),i.createElement("p",{style:{cursor:"pointer",textAlign:"center",fontSize:"16px",fontWeight:600,color:"#4A4A4A",fontFamily:"var(--app-text-main-font)"},onClick:()=>o(!1),className:"go-back-text"},"No, Go Back")))},S=(0,s.$j)(e=>{const{selectedProcess:l,companyUsersArray:o,companyProcesses:i,allModules:t,begunModule:n,companyData:d}=e.flowReducer,{user:a}=e.sessionReducer;return{selectedProcess:l,companyUsersArray:o,companyProcesses:i,allModules:t,user:a,begunModule:n,companyData:d}})(function(e){var l,o,t,d,r,s,p,S,k,Z,I,N,D,T,P,O,A,z,L,R,U,F,W,q,Y,B,H,j,V,G,J,Q,K,X,$,ee,le,oe,ie,te,ne,de,ae,re,ve,se,ue,ce,pe,me,fe,_e,ye,ge,he,be;(0,u.s0)();const{showPriority:xe=!0,selectedProcess:Ee,isProcess:Ce,statuses:we,companyUsersArray:Me,task:Se,isEdit:ke,assigneeId:Ze,setDisplayModal:Ie,begunModule:Ne,onClose:De,user:Te,start_date:Pe=(new Date).setDate((new Date).getDate()),span:Oe=!0,setTaskLabels:Ae,allModules:ze,onModuleSelect:Le=()=>{},companyData:Re}=e,[Ue,Fe]=(0,i.useState)(null!==Se&&void 0!==Se&&null!==(l=Se.assignee)&&void 0!==l&&l.id?{assignee_id:null===Se||void 0===Se||null===(o=Se.assignee)||void 0===o?void 0:o.id}:""),[We,qe]=(0,i.useState)(null!==Se&&void 0!==Se&&null!==(t=Se.process)&&void 0!==t&&t.id?{process:null===Se||void 0===Se||null===(d=Se.process)||void 0===d?void 0:d.id}:""),[Ye,Be]=(0,i.useState)((null===Se||void 0===Se?void 0:Se.name)||""),[He,je]=(0,i.useState)((null===Se||void 0===Se?void 0:Se.status)||""),[Ve,Ge]=(0,i.useState)((null===Se||void 0===Se?void 0:Se.description)||""),[Je,Qe]=(0,i.useState)(null!==Se&&void 0!==Se&&null!==(r=Se.add_info)&&void 0!==r&&r.end?new Date(null===Se||void 0===Se||null===(s=Se.add_info)||void 0===s?void 0:s.end):null!==Se&&void 0!==Se&&Se.due_date?new Date(null===Se||void 0===Se?void 0:Se.due_date):(new Date).setDate((new Date).getDate())+36e5),[Ke,Xe]=(0,i.useState)(null!==Se&&void 0!==Se&&null!==(p=Se.add_info)&&void 0!==p&&p.start?new Date(null===Se||void 0===Se||null===(S=Se.add_info)||void 0===S?void 0:S.start):Pe),[$e,el]=(0,i.useState)(null!==Se&&void 0!==Se&&null!==(k=Se.add_info)&&void 0!==k&&k.end?new Date(null===Se||void 0===Se||null===(Z=Se.add_info)||void 0===Z?void 0:Z.end):Pe),[ll,ol]=(0,i.useState)(""),[il,tl]=(0,i.useState)(!1),[nl,dl]=(0,i.useState)(!1),[al,rl]=(0,i.useState)(!1),[vl,sl]=(0,i.useState)(!1),[ul,cl]=(0,i.useState)(Ce),[pl,ml]=(0,i.useState)((null===Se||void 0===Se||null===(I=Se.add_info)||void 0===I?void 0:I.priority)||""),fl=(null===Me||void 0===Me?void 0:Me.length)>0?Me.map(e=>({label:e.first_name+" "+e.last_name,value:e.id})):[];(0,i.useEffect)(()=>(rl(!0),()=>{rl(!1)}),[]),(0,i.useEffect)(()=>{if(ul&&null!==Ee&&void 0!==Ee&&Ee.id&&al){(()=>{qe({procedure_id:Ee.id}),Ge(Ee.description)})()}},[ul,al,Ee.description,Ee.id]);const _l={control:(e,l)=>(0,n.Z)((0,n.Z)({},e),{},{boxShadow:"none","&:hover":{border:"1px solid var(--app-color-gray-lighter)"},position:"relative",height:"60px",width:"100%",border:"var(--app-color-gray-lighter) solid 1px",padding:"3px",paddingLeft:"10px",fontFamily:"var(--app-text-main-font)",fontSize:"1.4em",fontWeight:"700",color:"#4A4A4A",textAlign:"left",flex:"1 1 auto",justifyContent:"center",alignItems:"center",alignContent:"center",alignSelf:"center",margin:"10px 0 0 0 ",marginBottom:"20px"}),input:(e,l)=>(0,n.Z)((0,n.Z)({},e),{},{fontFamily:"var(--app-text-main-font)",color:"#4A4A4A",width:"100%",textAlign:"left",fontSize:"0.8em",fontWeight:"700",alignSelf:"center"}),menu:(e,l)=>(0,n.Z)((0,n.Z)({},e),{},{justifyContent:"center",alignItems:"center",verticalTextAlign:"center",alignContent:"center"}),menulist:(e,l)=>(0,n.Z)((0,n.Z)({},e),{},{justifyContent:"center",alignItems:"center",verticalTextAlign:"center",alignContent:"center",fontFamily:"var(--app-text-main-font)"}),option:(e,l)=>(0,n.Z)((0,n.Z)({},e),{},{minHeight:15,paddingTop:0,fontSize:"1.1em",color:"black",verticalTextAlign:"center",justifyContent:"center",alignItems:"center",alignContent:"center",fontFamily:"var(--app-text-main-font)"}),placeholder:(e,l)=>(0,n.Z)((0,n.Z)({},e),{},{fontSize:"0.75em",lineHeight:"20px",color:"#4A4A4A",fontWeight:400,overflow:"hidden",fontFamily:"var(--app-text-main-font)"}),singleValue:(e,l)=>{const o=l.isDisabled?.5:1;return(0,n.Z)((0,n.Z)({},e),{},{opacity:o,transition:"opacity 300ms",marginLeft:"0px",fontSize:"0.75em",lineHeight:"20px",color:"#4A4A4A",fontFamily:"var(--app-text-main-font)"})},indicatorsContainer:(e,l)=>{let{_data:o}=l;return(0,n.Z)((0,n.Z)({},e),{},{marginTop:"auto",marginBottom:"auto",color:"#4A4A4A",size:7,":hover":{color:"gray"},width:"65px",height:"45px"})}},yl=we?we.map(e=>({label:e,value:e})):[{label:"Done",value:"Done"},{label:"Ongoing",value:"Ongoing"},{label:"In Review",value:"In Review"},{label:"Approved",value:"Approved"},{label:"Postponed",value:"Postponed"},{label:"Moved",value:"Moved"},{label:"Cancelled",value:"Cancelled"}];return i.createElement("div",{className:h},i.createElement(m(),{style:{flex:1}},ze.find(e=>{var l;return null===(l=e.options)||void 0===l?void 0:l.task})&&i.createElement("div",{style:{marginBottom:"30px"}},i.createElement("p",null,"Module"),null!==Se&&void 0!==Se&&null!==(N=Se.add_info)&&void 0!==N&&N.module_id||null!==Se&&void 0!==Se&&Se.completed_at?i.createElement("input",{style:{cursor:"auto"},defaultValue:null===(D=ze.find(e=>{var l;return e.id===(null===Se||void 0===Se||null===(l=Se.add_info)||void 0===l?void 0:l.module_id)}))||void 0===D?void 0:D.name,readOnly:!0}):i.createElement(c.ZP,{onFocus:()=>ol(""),key:"module",styles:_l,components:{DropdownIndicator:y.ms},placeholder:"",options:ze.filter(e=>{var l;return null===(l=e.options)||void 0===l?void 0:l.task}).map(e=>({label:e.name,value:e.id,module:e})),onChange:e=>{Ne.processModule=(0,n.Z)((0,n.Z)({},e.module.procedure),{},{module_id:e.value}),Ae({valueL:"Value"}),Le(e.module)}}),i.createElement("div",{style:{fontWeight:"lighter"}},"Optional: You can tag this task to a specific process or module."),ll&&(null===ll||void 0===ll||null===(T=ll.errors)||void 0===T?void 0:T.procedure_id)&&i.createElement(w.Z,{message:ll.errors.procedure_id})),i.createElement("div",{style:{marginBottom:"10px"}},i.createElement("label",{style:{color:null!==ll&&void 0!==ll&&null!==(P=ll.errors)&&void 0!==P&&P.name?"var(--app-color-error)":"",display:(null!==Se&&void 0!==Se&&Se.completed_at,"")}},i.createElement("p",null,"Name"),i.createElement("textarea",{readOnly:void 0!==(null===Se||void 0===Se?void 0:Se.id)&&(!(null===Se||void 0===Se||!Se.completed_at)||Te.id!==(null===Se||void 0===Se||null===(O=Se.creator)||void 0===O?void 0:O.id)),required:null===ll||void 0===ll||null===(A=ll.errors)||void 0===A?void 0:A.name,onFocus:()=>ol(""),value:Ye,onChange:e=>Be(e.target.value)})),ll&&(null===ll||void 0===ll||null===(z=ll.errors)||void 0===z?void 0:z.name)&&i.createElement(w.Z,{message:ll.errors.name})),i.createElement("div",{style:{marginBottom:"10px"}},i.createElement("label",{style:{color:null!==ll&&void 0!==ll&&null!==(L=ll.errors)&&void 0!==L&&L.description?"var(--app-color-error)":""}},"Description",i.createElement("textarea",{style:{marginTop:"10px"},disabled:!(null===Se||void 0===Se||!Se.completed_at),onFocus:()=>ol(""),required:null===ll||void 0===ll||null===(R=ll.errors)||void 0===R?void 0:R.description,value:Ve,onChange:e=>Ge(e.target.value)})),ll&&(null===ll||void 0===ll||null===(U=ll.errors)||void 0===U?void 0:U.description)&&i.createElement(w.Z,{message:ll.errors.description})),Ce?i.createElement("div",{style:{marginBottom:"10px"}},i.createElement("label",{style:{color:null!==ll&&void 0!==ll&&null!==(F=ll.errors)&&void 0!==F&&F.due_date?"var(--app-color-error)":""}},"Start Date",i.createElement("div",null,i.createElement(v(),{showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:15,disabled:void 0!==(null===Se||void 0===Se?void 0:Se.id)&&(!(null===Se||void 0===Se||!Se.completed_at)||Te.id!==(null===Se||void 0===Se||null===(W=Se.creator)||void 0===W?void 0:W.id)),placeholderText:"Start Date",customInput:i.createElement("div",{id:"custom-input",style:{cursor:"pointer",display:"flex",justifyContent:"center",width:"100%",alignItems:"stretch",border:"1px solid",borderColor:"var(--app-color-gray-lighter)"}},i.createElement("input",{disabled:!0,readOnly:void 0!==(null===Se||void 0===Se?void 0:Se.id)&&(!(null===Se||void 0===Se||!Se.completed_at)||Te.id!==(null===Se||void 0===Se||null===(q=Se.creator)||void 0===q?void 0:q.id)),onFocus:()=>ol(""),value:a()(Ke).format("DD MMMM YYYY HH:mm"),type:"text",required:null===ll||void 0===ll||null===(Y=ll.errors)||void 0===Y?void 0:Y.startDate,id:"start-date",style:{flex:1,marginTop:"auto",marginBottom:"auto",outline:"none",border:"none",fontFamily:"var(--app-text-main-font)",fontSize:"16px",lineHeight:"20px",color:"#4A4A4A",textAlign:(null===Ke||void 0===Ke?void 0:Ke.length)>0?"center":"left",maxWidth:"98%"},placeholder:"Start Date",onChange:e=>{}}),i.createElement(f.f,{className:C})),className:x,selected:Ke,onChange:e=>{a()(e).diff(a()($e),"minutes")<1&&Xe(e)}}))),i.createElement("br",null),i.createElement("label",{style:{color:null!==ll&&void 0!==ll&&null!==(B=ll.errors)&&void 0!==B&&B.due_date?"var(--app-color-error)":""}},"End Date",i.createElement("div",null,i.createElement(v(),{showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:15,disabled:void 0!==(null===Se||void 0===Se?void 0:Se.id)&&(!(null===Se||void 0===Se||!Se.completed_at)||Te.id!==(null===Se||void 0===Se||null===(H=Se.creator)||void 0===H?void 0:H.id)),placeholderText:"End Date",customInput:i.createElement("div",{id:"custom-input",style:{cursor:"pointer",display:"flex",justifyContent:"center",width:"100%",alignItems:"stretch",border:"1px solid",borderColor:null!==ll&&void 0!==ll&&null!==(j=ll.errors)&&void 0!==j&&j.endDate?"var(--app-color-error)":"var(--app-color-gray-lighter)"}},i.createElement("input",{disabled:!0,readOnly:void 0!==(null===Se||void 0===Se?void 0:Se.id)&&(!(null===Se||void 0===Se||!Se.completed_at)||Te.id!==(null===Se||void 0===Se||null===(V=Se.creator)||void 0===V?void 0:V.id)),onFocus:()=>ol(""),value:a()($e).format("DD MMMM YYYY HH:mm"),type:"text",required:null===ll||void 0===ll||null===(G=ll.errors)||void 0===G?void 0:G.endDate,id:"due-date",style:{flex:1,marginTop:"auto",marginBottom:"auto",outline:"none",border:"none",fontFamily:"var(--app-text-main-font)",fontSize:"16px",lineHeight:"20px",color:"#4A4A4A",textAlign:(null===$e||void 0===$e?void 0:$e.length)>0?"center":"left",maxWidth:"98%"},placeholder:"Due Date",onChange:e=>{}}),i.createElement(f.f,{className:C})),className:x,selected:$e,onChange:e=>{a()(e).diff(a()(Ke),"minutes")>0?!1===Oe?a()(e).format("DD")===a()($e).format("DD")?el(e):el($e):el(e):el($e)}}))),ll&&(null===ll||void 0===ll||null===(J=ll.errors)||void 0===J?void 0:J.due_date)&&i.createElement(w.Z,{message:ll.errors.endDate})):i.createElement("div",{style:{marginBottom:"10px"}},i.createElement("label",{style:{color:null!==ll&&void 0!==ll&&null!==(Q=ll.errors)&&void 0!==Q&&Q.due_date?"var(--app-color-error)":""}},"Due Date",i.createElement("div",{style:{marginTop:"10px"}},i.createElement(v(),{showTimeSelect:!0,timeIntervals:15,disabled:void 0!==(null===Se||void 0===Se?void 0:Se.id)&&(!(null===Se||void 0===Se||!Se.completed_at)||Te.id!==(null===Se||void 0===Se||null===(K=Se.creator)||void 0===K?void 0:K.id)),placeholderText:"Due Date",customInput:i.createElement("div",{id:"custom-input",style:{cursor:"pointer",display:"flex",justifyContent:"center",width:"100%",alignItems:"stretch",border:"1px solid",borderColor:null!==ll&&void 0!==ll&&null!==(X=ll.errors)&&void 0!==X&&X.due_date?"var(--app-color-error)":"var(--app-color-gray-lighter)"}},i.createElement("input",{readOnly:void 0!==(null===Se||void 0===Se?void 0:Se.id)&&(!(null===Se||void 0===Se||!Se.completed_at)||Te.id!==(null===Se||void 0===Se||null===($=Se.creator)||void 0===$?void 0:$.id)),onFocus:()=>ol(""),value:a()(Je).format("DD MMMM YYYY HH:mm"),type:"text",required:null===ll||void 0===ll||null===(ee=ll.errors)||void 0===ee?void 0:ee.due_date,id:"due-date",style:{flex:1,marginTop:"auto",marginBottom:"auto",outline:"none",border:"none",fontFamily:"var(--app-text-main-font)",fontSize:"16px",lineHeight:"20px",color:"#4A4A4A",textAlign:(null===Je||void 0===Je?void 0:Je.length)>0?"center":"left",maxWidth:"98%"},placeholder:"Due Date",onChange:e=>{}}),i.createElement(f.f,{className:C})),className:x,selected:Je,onChange:e=>{Qe(e)}}))),ll&&(null===ll||void 0===ll||null===(le=ll.errors)||void 0===le?void 0:le.due_date)&&i.createElement(w.Z,{message:ll.errors.due_date})),i.createElement("div",{style:{marginBottom:"10px"}},i.createElement("label",{style:{color:null!==ll&&void 0!==ll&&null!==(oe=ll.errors)&&void 0!==oe&&oe.assignee_id?"var(--app-color-error)":""}},"Assignee",null!==Se&&void 0!==Se&&Se.completed_at?i.createElement("div",null,i.createElement("input",{style:{cursor:"auto"},defaultValue:(null===Se||void 0===Se?void 0:Se.assignee.first_name)+" "+(null===Se||void 0===Se?void 0:Se.assignee.last_name),readOnly:!0})):i.createElement(c.ZP,{onFocus:()=>ol(""),isSearchable:!1,key:"Assignee",styles:_l,defaultInputValue:"",components:{DropdownIndicator:y.ms},placeholder:"",value:fl[fl.findIndex(e=>e.value===Ue.assignee_id)],options:fl.concat([{label:"None",value:""}]),onChange:e=>{e&&Fe(l=>(0,n.Z)((0,n.Z)({},l),{},{assignee_id:e.value}))}})),ll&&(null===ll||void 0===ll||null===(ie=ll.errors)||void 0===ie?void 0:ie.assignee_id)&&i.createElement(w.Z,{message:ll.errors.assignee_id})),(null===e||void 0===e||null===(te=e.task)||void 0===te?void 0:te.creator)&&i.createElement("div",{style:{marginBottom:"10px"}},i.createElement("label",null,i.createElement("p",null,"Creator"),i.createElement("input",{style:{cursor:"auto"},defaultValue:(null===Se||void 0===Se?void 0:Se.creator.first_name)+" "+(null===Se||void 0===Se?void 0:Se.creator.last_name),readOnly:!0})),i.createElement("label",null,i.createElement("p",null,"Created Date"),i.createElement("input",{style:{cursor:"auto"},defaultValue:a()(null===Se||void 0===Se?void 0:Se.created_at).format("DD MMMM YYYY"),readOnly:!0}))),i.createElement("div",{style:{marginBottom:"10px"}},xe&&i.createElement("label",{style:{color:null!==ll&&void 0!==ll&&null!==(ne=ll.errors)&&void 0!==ne&&ne.procedure_id?"var(--app-color-error)":""}},i.createElement("p",null,"Priority"),null!==Se&&void 0!==Se&&Se.completed_at?i.createElement("input",{style:{cursor:"auto"},defaultValue:null!==(de=null===Se||void 0===Se?void 0:Se.priority)&&void 0!==de?de:"Medium",readOnly:!0}):i.createElement(c.ZP,{onFocus:()=>ol(""),key:"priority",styles:_l,defaultInputValue:"",components:{DropdownIndicator:y.ms},placeholder:"",value:y._l.find(e=>e.value===pl),options:y._l,onChange:e=>ml(e.value)})),i.createElement("label",{style:{color:null!==ll&&void 0!==ll&&null!==(ae=ll.errors)&&void 0!==ae&&ae.procedure_id?"var(--app-color-error)":""}},i.createElement("p",null,"Status"),null!==Se&&void 0!==Se&&Se.completed_at?i.createElement("input",{style:{cursor:"auto"},defaultValue:null!==(re=null===Se||void 0===Se?void 0:Se.status)&&void 0!==re?re:"No status set",readOnly:!0}):i.createElement(c.ZP,{onFocus:()=>ol(""),key:"status",styles:_l,defaultInputValue:"",components:{DropdownIndicator:y.ms},placeholder:"",value:yl.find(e=>e.value===He),options:Te.id===(null===Se||void 0===Se||null===(ve=Se.creator)||void 0===ve?void 0:ve.id)?[...yl,{label:null!==(se=null===(ue=Ne.processModule)||void 0===ue||null===(ce=ue.module)||void 0===ce||null===(pe=ce.options)||void 0===pe?void 0:pe.lock)&&void 0!==se?se:null===Re||void 0===Re||null===(me=Re.misc_info)||void 0===me?void 0:me.lock,value:null!==(fe=null===(_e=Ne.processModule)||void 0===_e||null===(ye=_e.module)||void 0===ye||null===(ge=ye.options)||void 0===ge?void 0:ge.lock)&&void 0!==fe?fe:null===Re||void 0===Re||null===(he=Re.misc_info)||void 0===he?void 0:he.lock},{label:"No status",value:""}]:yl,onChange:e=>je(e.value)})),ll&&(null===ll||void 0===ll||null===(be=ll.errors)||void 0===be?void 0:be.procedure_id)&&i.createElement(w.Z,{message:ll.errors.procedure_id})),ll&&(null===ll||void 0===ll?void 0:ll.message)&&i.createElement(w.Z,{message:ll.message})),null!==Se&&void 0!==Se&&Se.completed_at?i.createElement("div",{className:b},i.createElement(g.Z,{clicked:De,className:E,titleStyle:{color:"white"},title:"Close"})):ke?i.createElement("div",{className:b},i.createElement(g.Z,{clicked:De,className:E,titleStyle:{color:"white"},title:"Close"}),i.createElement(g.Z,{light:!0,clicked:()=>(()=>{var l,o;tl(!0);let i=Ue?Ue.assignee_id:Ze;(0,_.xJ)({assignee_id:i,name:Ye,description:Ve,dueDate:a()(Je).format("YYYY-MM-DD HH:mm"),status:null!==He&&void 0!==He?He:"",add_info:(0,n.Z)((0,n.Z)({},null===e||void 0===e||null===(l=e.task)||void 0===l?void 0:l.add_info),{},{priority:null!==pl&&void 0!==pl?pl:"",start:Ke,end:$e})},null===e||void 0===e||null===(o=e.task)||void 0===o?void 0:o.id).subscribe({next:e=>{tl(!1),Ie(!1)},error:e=>{e&&(ol(e.data),tl(!1))},complete:()=>{}})})(),className:E,title:"Update",loading:il}),i.createElement(g.Z,{light:!0,clicked:()=>(()=>{var e,l;tl(!0),(0,_.vr)({newAssignee:{assignee_id:null===Se||void 0===Se||null===(e=Se.assignee)||void 0===e?void 0:e.id},taskName:Se.name,taskDescription:Se.description,add_info:null===Se||void 0===Se?void 0:Se.add_info,taskProcess:{id:null===Se||void 0===Se||null===(l=Se.process)||void 0===l?void 0:l.id}}).subscribe({next:e=>{De()},error:e=>{e&&(ol(e.data),tl(!1))},complete:()=>{tl(!1),!ul&&Ie(!1)}})})(),className:E,title:"Copy",loading:il}),i.createElement(g.Z,{clear:!0,clicked:()=>sl(!0),className:E,title:"Delete",style:{backgroundColor:"red"},titleStyle:{color:"white"}})):i.createElement("div",{className:b},i.createElement(g.Z,{clicked:De,className:E,titleStyle:{color:"white"},title:"Close"}),i.createElement(g.Z,{light:!0,clicked:()=>(tl(!0),void(0,_.vr)({newAssignee:Ue,taskName:Ye,taskDescription:Ve,dueDate:a()(Je).format("YYYY-MM-DD HH:mm"),add_info:{priority:null!==pl&&void 0!==pl?pl:""}}).subscribe({next:e=>{De()},error:e=>{e&&(ol(e.data),tl(!1))},complete:()=>{tl(!1),!ul&&Ie(!1)}})),className:E,title:"Save",loading:il})),vl&&i.createElement(M,{taskId:Se.id,isOpen:vl,removeTask:e=>{dl(!0),(0,_._5)(e).subscribe({next:e=>{dl(!1),sl(!1)},error:e=>{dl(!1)},complete:()=>{Ie(!1)}})},loading:nl,onClose:sl}))});var k=o(10103);o(66918);const Z=e=>{const{isOpen:l,onClose:o,loading:n,removeTask:d,taskId:a}=e;return i.createElement(t.U7,{isOpen:l,onClose:()=>o(!1),backdropColor:!0,blured:!0,scrollable:!0,shadowedContainerStyle:{width:"35%"}},i.createElement("div",null,i.createElement("p",{style:{textAlign:"center",fontSize:"16px",color:"#4A4A4A",fontFamily:"var(--app-text-main-font)"}},"Are you sure do you want to delete this task?"),i.createElement("div",{style:{display:"flex",justifyContent:"space-evenly"}},i.createElement(g.Z,{loading:n,clicked:()=>d(a),title:"Yes, Delete"}),i.createElement(g.Z,{light:!0,loading:n,clicked:()=>o(!1),title:"No, Go Back"}))))},I=(0,s.$j)(e=>{const{selectedProcess:l,companyUsersArray:o,companyProcesses:i,allModules:t,begunModule:n,companyData:d}=e.flowReducer,{user:a}=e.sessionReducer;return{selectedProcess:l,companyUsersArray:o,companyProcesses:i,allModules:t,user:a,begunModule:n,companyData:d}})(function(e){var l,o,t,d,r,s,u,p,M,S,I,N,D,T,P,O,A,z,L,R,U,F,W,q,Y,B,H,j,V,G,J,Q,K,X,$,ee,le,oe,ie,te,ne,de,ae,re,ve,se,ue,ce,pe,me,fe,_e,ye,ge,he,be,xe,Ee,Ce,we,Me,Se,ke,Ze,Ie,Ne,De,Te;const{selectedProcess:Pe,isProcess:Oe,statuses:Ae,companyUsersArray:ze,task:Le,isEdit:Re,assigneeId:Ue,setDisplayModal:Fe,begunModule:We,onClose:qe,user:Ye,start_date:Be=(new Date).setDate((new Date).getDate()),span:He=!0,labels:je,onUpdate:Ve=()=>{},companyData:Ge,save:Je=!0}=e,[Qe,Ke]=(0,i.useState)(null!==Le&&void 0!==Le&&null!==(l=Le.assignee)&&void 0!==l&&l.id?{assignee_id:null===Le||void 0===Le||null===(o=Le.assignee)||void 0===o?void 0:o.id}:""),[Xe,$e]=(0,i.useState)(null!==Le&&void 0!==Le&&null!==(t=Le.process)&&void 0!==t&&t.id?{process:null===Le||void 0===Le||null===(d=Le.process)||void 0===d?void 0:d.id}:""),[el,ll]=(0,i.useState)((null===Le||void 0===Le?void 0:Le.name)||""),[ol,il]=(0,i.useState)((null===Le||void 0===Le?void 0:Le.status)||""),[tl,nl]=(0,i.useState)((null===Le||void 0===Le?void 0:Le.description)||""),[dl,al]=(0,i.useState)(null!==Le&&void 0!==Le&&Le.due_date?new Date(null===Le||void 0===Le?void 0:Le.due_date):(new Date).setDate((new Date).getDate())+36e5),[rl,vl]=(0,i.useState)(null!==Le&&void 0!==Le&&null!==(r=Le.add_info)&&void 0!==r&&r.start?new Date(null===Le||void 0===Le||null===(s=Le.add_info)||void 0===s?void 0:s.start):void 0),[sl,ul]=(0,i.useState)(null!==Le&&void 0!==Le&&null!==(u=Le.add_info)&&void 0!==u&&u.end?new Date(null===Le||void 0===Le||null===(p=Le.add_info)||void 0===p?void 0:p.end):void 0),[cl,pl]=(0,i.useState)(null!==Le&&void 0!==Le&&null!==(M=Le.add_info)&&void 0!==M&&M.endRepeat?new Date(null===Le||void 0===Le||null===(S=Le.add_info)||void 0===S?void 0:S.endRepeat):void 0),[ml,fl]=(0,i.useState)(null===Le||void 0===Le||null===(I=Le.add_info)||void 0===I?void 0:I.repeat),[_l,yl]=(0,i.useState)(null===Le||void 0===Le||null===(N=Le.add_info)||void 0===N?void 0:N.value),[gl,hl]=(0,i.useState)(null!==(D=null===Le||void 0===Le||null===(T=Le.add_info)||void 0===T?void 0:T.pos)&&void 0!==D?D:null===Ye||void 0===Ye||null===(P=Ye.positions[0])||void 0===P?void 0:P.id),[bl,xl]=(0,i.useState)(""),[El,Cl]=(0,i.useState)(!1),[wl,Ml]=(0,i.useState)(!1),[Sl,kl]=(0,i.useState)(!1),[Zl,Il]=(0,i.useState)(!1),[Nl,Dl]=(0,i.useState)(Oe),[Tl,Pl]=(0,i.useState)((null===Le||void 0===Le||null===(O=Le.add_info)||void 0===O?void 0:O.priority)||""),Ol=(null===ze||void 0===ze?void 0:ze.length)>0?Re&&(null===Le||void 0===Le||null===(A=Le.creator)||void 0===A?void 0:A.id)!==Ye.id?[{label:Ye.first_name+" "+Ye.last_name,value:Ye.id}]:ze.map(e=>({label:e.first_name+" "+e.last_name,value:e.id})):[],Al=[{label:"Does not repeat",value:"none"},{label:"Hourly",value:"hourly"},{label:"Every 2 Hours",value:"2hours"},{label:"Daily",value:"daily"},{label:"Weekly",value:"weekly"}];(0,i.useEffect)(()=>(kl(!0),()=>{kl(!1)}),[]),(0,i.useEffect)(()=>{if(Nl&&null!==Pe&&void 0!==Pe&&Pe.id&&Sl){(()=>{$e({procedure_id:Pe.id}),nl(Pe.description)})()}},[Nl,Sl,Pe.description,Pe.id]);const zl={control:(e,l)=>(0,n.Z)((0,n.Z)({},e),{},{boxShadow:"none","&:hover":{border:"1px solid var(--app-color-gray-lighter)"},position:"relative",height:"60px",width:"100%",border:"var(--app-color-gray-lighter) solid 1px",padding:"3px",fontFamily:"var(--app-text-main-font)",fontSize:"1.4em",fontWeight:"700",color:"#4A4A4A",textAlign:"left",flex:"1 1 auto",justifyContent:"center",alignItems:"center",alignContent:"center",alignSelf:"center"}),input:(e,l)=>(0,n.Z)((0,n.Z)({},e),{},{fontFamily:"var(--app-text-main-font)",color:"#4A4A4A",width:"100%",textAlign:"left",fontSize:"0.8em",fontWeight:"700",alignSelf:"center"}),menu:(e,l)=>(0,n.Z)((0,n.Z)({},e),{},{justifyContent:"center",alignItems:"center",verticalTextAlign:"center",alignContent:"center"}),menulist:(e,l)=>(0,n.Z)((0,n.Z)({},e),{},{justifyContent:"center",alignItems:"center",verticalTextAlign:"center",alignContent:"center",fontFamily:"var(--app-text-main-font)"}),option:(e,l)=>(0,n.Z)((0,n.Z)({},e),{},{minHeight:15,paddingTop:0,fontSize:"1.1em",color:"black",verticalTextAlign:"center",justifyContent:"center",alignItems:"center",alignContent:"center",fontFamily:"var(--app-text-main-font)",fontWeight:"bold"}),placeholder:(e,l)=>(0,n.Z)((0,n.Z)({},e),{},{fontSize:"0.75em",lineHeight:"20px",color:"#4A4A4A",fontWeight:400,overflow:"hidden",fontFamily:"var(--app-text-main-font)"}),singleValue:(e,l)=>{const o=l.isDisabled?.5:1;return(0,n.Z)((0,n.Z)({},e),{},{opacity:o,transition:"opacity 300ms",marginLeft:"0px",fontSize:"0.75em",lineHeight:"20px",color:"#4A4A4A",fontFamily:"var(--app-text-main-font)"})},indicatorsContainer:(e,l)=>{let{_data:o}=l;return(0,n.Z)((0,n.Z)({},e),{},{marginTop:"auto",marginBottom:"auto",color:"#4A4A4A",size:7,":hover":{color:"gray"},width:"65px",height:"45px"})}},Ll=Ae?Ae.map(e=>({label:e,value:e})):[{label:"Ongoing",value:"Ongoing"},{label:"In Review",value:"In Review"},{label:"Approved",value:"Approved"},{label:"Postponed",value:"Postponed"},{label:"Moved",value:"Moved"},{label:"Cancelled",value:"Cancelled"}];return i.createElement("div",{className:h},i.createElement(m(),{style:{flex:1}},i.createElement("div",{style:{marginBottom:"10px"}},i.createElement("p",null,null!==(z=null===je||void 0===je?void 0:je.title)&&void 0!==z?z:"Event Name"),i.createElement("textarea",{readOnly:void 0!==(null===Le||void 0===Le?void 0:Le.id)&&(!(null===Le||void 0===Le||!Le.completed_at)||Ye.id!==(null===Le||void 0===Le||null===(L=Le.creator)||void 0===L?void 0:L.id)),required:null===bl||void 0===bl||null===(R=bl.errors)||void 0===R?void 0:R.name,onFocus:()=>xl(""),value:el,onChange:e=>ll(e.target.value)}),bl&&(null===bl||void 0===bl||null===(U=bl.errors)||void 0===U?void 0:U.name)&&i.createElement(w.Z,{message:bl.errors.name})),i.createElement("div",{style:{marginBottom:"10px"}},i.createElement("p",null,null!==(F=null===je||void 0===je?void 0:je.description)&&void 0!==F?F:"Description"),i.createElement("textarea",{style:{minHeight:"200px"},readOnly:void 0!==(null===Le||void 0===Le?void 0:Le.id)&&(!(null===Le||void 0===Le||!Le.completed_at)||Ye.id!==(null===Le||void 0===Le||null===(W=Le.creator)||void 0===W?void 0:W.id)),required:null===bl||void 0===bl||null===(q=bl.errors)||void 0===q?void 0:q.description,onFocus:()=>xl(""),value:tl,onChange:e=>nl(e.target.value)}),bl&&(null===bl||void 0===bl||null===(Y=bl.errors)||void 0===Y?void 0:Y.name)&&i.createElement(w.Z,{message:bl.errors.description})),i.createElement("div",{style:{marginBottom:"10px"}},i.createElement("p",null,null!==(B=null===je||void 0===je?void 0:je.start)&&void 0!==B?B:"Start Date"),i.createElement(v(),{showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:15,disabled:!(void 0===(null===Le||void 0===Le?void 0:Le.id)||!(null!==Le&&void 0!==Le&&Le.completed_at||Ye.id!==(null===Le||void 0===Le||null===(H=Le.creator)||void 0===H?void 0:H.id))),placeholderText:"Start Date",customInput:i.createElement("div",{id:"custom-input",style:{cursor:"pointer",display:"flex",justifyContent:"center",width:"100%",alignItems:"stretch",border:"1px solid",borderColor:"var(--app-color-gray-lighter)"}},i.createElement("input",{disabled:!0,readOnly:void 0!==(null===Le||void 0===Le?void 0:Le.id)&&(!(null===Le||void 0===Le||!Le.completed_at)||Ye.id!==(null===Le||void 0===Le||null===(j=Le.creator)||void 0===j?void 0:j.id)),onFocus:()=>xl(""),value:void 0!==(null===Le||void 0===Le?void 0:Le.id)&&(null!==Le&&void 0!==Le&&Le.completed_at||Ye.id!==(null===Le||void 0===Le||null===(V=Le.creator)||void 0===V?void 0:V.id))?"".concat(a()(rl).format("DD MMMM YYYY HH:mm")):void 0===rl?rl:a()(rl).format("DD MMMM YYYY HH:mm"),type:"text",required:null===bl||void 0===bl||null===(G=bl.errors)||void 0===G?void 0:G.startDate,id:"start-date",style:{flex:1,marginTop:"auto",marginBottom:"auto",outline:"none",border:"none",fontFamily:"var(--app-text-main-font)",fontSize:"16px",lineHeight:"20px",color:"#4A4A4A",textAlign:(null===rl||void 0===rl?void 0:rl.length)>0?"center":"left",maxWidth:"98%"},onChange:e=>{}}),i.createElement(f.f,{className:C})),className:x,selected:rl,onChange:e=>{a()(e).diff(a()(sl),"minutes")<1?vl(e):(vl(e),ul(e))}})),(void 0===(null===Le||void 0===Le?void 0:Le.id)||!(null!==Le&&void 0!==Le&&Le.completed_at)&&Ye.id===(null===Le||void 0===Le||null===(J=Le.creator)||void 0===J?void 0:J.id))&&rl&&i.createElement("div",{style:{marginBottom:"10px"}},i.createElement("p",null,null!==(Q=null===je||void 0===je?void 0:je.end)&&void 0!==Q?Q:"End Date"),i.createElement(v(),{showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:15,disabled:void 0!==(null===Le||void 0===Le?void 0:Le.id)&&(!(null===Le||void 0===Le||!Le.completed_at)||Ye.id!==(null===Le||void 0===Le||null===(K=Le.creator)||void 0===K?void 0:K.id)),placeholderText:"End Date",customInput:i.createElement("div",{id:"custom-input",style:{cursor:"pointer",display:"flex",justifyContent:"center",width:"100%",alignItems:"stretch",border:"1px solid",borderColor:null!==bl&&void 0!==bl&&null!==(X=bl.errors)&&void 0!==X&&X.endDate?"var(--app-color-error)":"var(--app-color-gray-lighter)"}},i.createElement("input",{disabled:!0,readOnly:void 0!==(null===Le||void 0===Le?void 0:Le.id)&&(!(null===Le||void 0===Le||!Le.completed_at)||Ye.id!==(null===Le||void 0===Le||null===($=Le.creator)||void 0===$?void 0:$.id)),onFocus:()=>xl(""),value:void 0===sl?sl:a()(sl).format("DD MMMM YYYY HH:mm"),type:"text",required:null===bl||void 0===bl||null===(ee=bl.errors)||void 0===ee?void 0:ee.endDate,id:"due-date",style:{flex:1,marginTop:"auto",marginBottom:"auto",outline:"none",border:"none",fontFamily:"var(--app-text-main-font)",fontSize:"16px",lineHeight:"20px",color:"#4A4A4A",textAlign:(null===sl||void 0===sl?void 0:sl.length)>0?"center":"left",maxWidth:"98%"},onChange:e=>{}}),i.createElement(f.f,{className:C})),className:x,selected:sl,onChange:e=>{a()(e).diff(a()(rl),"minutes")>0?!1===He?a()(e).format("DD")===a()(sl).format("DD")?ul(e):ul(sl):ul(e):ul(sl)}})),bl&&(null===bl||void 0===bl||null===(le=bl.errors)||void 0===le?void 0:le.due_date)&&i.createElement(w.Z,{message:bl.errors.endDate}),sl&&void 0===(null===Le||void 0===Le?void 0:Le.id)&&i.createElement("div",{style:{marginBottom:"10px"}},i.createElement("p",null,"Repeat"),i.createElement(c.ZP,{onFocus:()=>xl(""),isSearchable:!1,key:"Repeat",styles:zl,defaultInputValue:"",components:{DropdownIndicator:y.ms},placeholder:"",value:Al.find(e=>e.value===ml),options:Al,onChange:e=>{fl(e.value),"none"!==e.value?pl(sl):"none"===e.value&&(pl(void 0),fl(void 0))}}),bl&&(null===bl||void 0===bl||null===(oe=bl.errors)||void 0===oe?void 0:oe.repeat)&&i.createElement(w.Z,{message:bl.errors.repeat})),ml&&"none"!==ml&&i.createElement("div",{style:{marginBottom:"10px"}},i.createElement("p",null,"End Repeat"),i.createElement(v(),{showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:15,disabled:void 0!==(null===Le||void 0===Le?void 0:Le.id)&&(!(null===Le||void 0===Le||!Le.completed_at)||Ye.id!==(null===Le||void 0===Le||null===(ie=Le.creator)||void 0===ie?void 0:ie.id)),placeholderText:"End Date",customInput:i.createElement("div",{id:"custom-input",style:{cursor:"pointer",display:"flex",justifyContent:"center",width:"100%",alignItems:"stretch",border:"1px solid",borderColor:null!==bl&&void 0!==bl&&null!==(te=bl.errors)&&void 0!==te&&te.endRepeat?"var(--app-color-error)":"var(--app-color-gray-lighter)"}},i.createElement("input",{disabled:!0,readOnly:void 0!==(null===Le||void 0===Le?void 0:Le.id)&&(!(null===Le||void 0===Le||!Le.completed_at)||Ye.id!==(null===Le||void 0===Le||null===(ne=Le.creator)||void 0===ne?void 0:ne.id)),onFocus:()=>xl(""),value:void 0===cl?cl:a()(cl).format("DD MMMM YYYY HH:mm"),type:"text",required:null===bl||void 0===bl||null===(de=bl.errors)||void 0===de?void 0:de.endRepeat,id:"due-date",style:{flex:1,marginTop:"auto",marginBottom:"auto",outline:"none",border:"none",fontFamily:"var(--app-text-main-font)",fontSize:"16px",lineHeight:"20px",color:"#4A4A4A",textAlign:(null===cl||void 0===cl?void 0:cl.length)>0?"center":"left",maxWidth:"98%"},onChange:e=>{}}),i.createElement(f.f,{className:C})),className:x,selected:cl,onChange:e=>{a()(e).diff(a()(rl),"minutes")>0&&pl(e)}})),i.createElement("div",{style:{marginBottom:"10px"}},i.createElement("p",null,null!==(ae=null===je||void 0===je?void 0:je.assignee)&&void 0!==ae?ae:"Assignee"),null!==Le&&void 0!==Le&&Le.completed_at?i.createElement("div",null,i.createElement("input",{style:{cursor:"auto"},placeholder:(null===Le||void 0===Le?void 0:Le.assignee.first_name)+" "+(null===Le||void 0===Le?void 0:Le.assignee.last_name),readOnly:!0})):i.createElement(c.ZP,{onFocus:()=>xl(""),isSearchable:!1,key:"Assignee",styles:zl,defaultInputValue:"",components:{DropdownIndicator:y.ms},placeholder:"",value:Ol[Ol.findIndex(e=>e.value===Qe.assignee_id)],options:Ol.concat([{label:"None",value:""}]),onChange:e=>{e&&Ke(l=>(0,n.Z)((0,n.Z)({},l),{},{assignee_id:e.value}))}}),bl&&(null===bl||void 0===bl||null===(re=bl.errors)||void 0===re?void 0:re.assignee_id)&&i.createElement(w.Z,{message:bl.errors.assignee_id})),(null===je||void 0===je?void 0:je.valueL)&&i.createElement("div",{style:{marginBottom:"30px"}},i.createElement("p",null,null===je||void 0===je?void 0:je.valueL),i.createElement("input",{readOnly:void 0!==(null===Le||void 0===Le?void 0:Le.id)&&(!(null===Le||void 0===Le||!Le.completed_at)||Ye.id!==(null===Le||void 0===Le||null===(ve=Le.creator)||void 0===ve?void 0:ve.id)),onFocus:()=>xl(""),value:_l,onChange:e=>yl(e.target.value),onBlur:()=>{var e,l,o;null!==We&&void 0!==We&&null!==(e=We.processModule)&&void 0!==e&&null!==(l=e.module)&&void 0!==l&&null!==(o=l.options)&&void 0!==o&&o.credits&&+_l>+(null===Ye||void 0===Ye?void 0:Ye.wallet)&&(yl("0.00"),xl({errors:{value:"You have insufficient funds in your wallet. You currently have ".concat(null===Ye||void 0===Ye?void 0:Ye.wallet,".")}}))}}),"Value"===(null===je||void 0===je?void 0:je.valueL)&&i.createElement("div",{style:{fontWeight:"lighter"}},"Note: This is a quantitative equivalent, weight or cost for the task."),bl&&(null===bl||void 0===bl||null===(se=bl.errors)||void 0===se?void 0:se.value)&&i.createElement(w.Z,{message:bl.errors.value})),(null===Ye||void 0===Ye||null===(ue=Ye.positions)||void 0===ue?void 0:ue.length)>1&&(Ye.id===(null===Le||void 0===Le||null===(ce=Le.creator)||void 0===ce?void 0:ce.id)||void 0===(null===Le||void 0===Le?void 0:Le.id))&&i.createElement("div",{style:{marginBottom:"10px"}},i.createElement("p",null,"Role"),null!==Le&&void 0!==Le&&null!==(pe=Le.add_info)&&void 0!==pe&&pe.pos||null!==Le&&void 0!==Le&&Le.completed_at?i.createElement("input",{style:{cursor:"auto",border:"0px solid var(--app-color-gray-lighter)",backgroundColor:"var(--app-color-gray-lightest)"},defaultValue:null===Ye||void 0===Ye||null===(me=Ye.positions.find(e=>{var l;return e.id===(null===Le||void 0===Le||null===(l=Le.add_info)||void 0===l?void 0:l.pos)}))||void 0===me?void 0:me.name,readOnly:!0}):i.createElement(c.ZP,{onFocus:()=>xl(""),key:"pos",styles:zl,components:{DropdownIndicator:y.ms},placeholder:"",options:null===Ye||void 0===Ye?void 0:Ye.positions.map(e=>({label:e.name,value:e.id,pos:e})),onChange:e=>{hl(e.value)}}),i.createElement("div",{style:{fontWeight:"lighter"}},"Note: Your role when making this task"),bl&&(null===bl||void 0===bl||null===(fe=bl.errors)||void 0===fe?void 0:fe.procedure_id)&&i.createElement(w.Z,{message:bl.errors.procedure_id})),((null===Le||void 0===Le?void 0:Le.completed_at)||Ye.id===(null===Le||void 0===Le||null===(_e=Le.creator)||void 0===_e?void 0:_e.id))&&i.createElement("div",{style:{marginBottom:"10px"}},i.createElement("p",null,"Status"),null!==Le&&void 0!==Le&&Le.completed_at?i.createElement("input",{style:{cursor:"auto"},placeholder:null!==(ye=null===Le||void 0===Le?void 0:Le.status)&&void 0!==ye?ye:"No status set",readOnly:!0}):Ye.id===(null===Le||void 0===Le||null===(ge=Le.creator)||void 0===ge?void 0:ge.id)?i.createElement(c.ZP,{onFocus:()=>xl(""),key:"status",isSearchable:!1,styles:zl,defaultInputValue:"",components:{DropdownIndicator:y.ms},placeholder:"",value:Ll.find(e=>e.value===ol),options:Ye.id===(null===Le||void 0===Le||null===(he=Le.creator)||void 0===he?void 0:he.id)?[...Ll,{label:null!==(be=null===(xe=We.processModule)||void 0===xe||null===(Ee=xe.module)||void 0===Ee||null===(Ce=Ee.options)||void 0===Ce?void 0:Ce.lock)&&void 0!==be?be:null===Ge||void 0===Ge||null===(we=Ge.misc_info)||void 0===we?void 0:we.lock,value:null!==(Me=null===(Se=We.processModule)||void 0===Se||null===(ke=Se.module)||void 0===ke||null===(Ze=ke.options)||void 0===Ze?void 0:Ze.lock)&&void 0!==Me?Me:null===Ge||void 0===Ge||null===(Ie=Ge.misc_info)||void 0===Ie?void 0:Ie.lock},{label:"No status",value:""}]:Ll,onChange:e=>il(e.value)}):i.createElement("input",{style:{cursor:"auto"},placeholder:null!==(Ne=null===Le||void 0===Le?void 0:Le.status)&&void 0!==Ne?Ne:"No status set",readOnly:!0}),bl&&(null===bl||void 0===bl||null===(De=bl.errors)||void 0===De?void 0:De.procedure_id)&&i.createElement(w.Z,{message:bl.errors.procedure_id})),bl&&(null===bl||void 0===bl?void 0:bl.message)&&i.createElement(w.Z,{message:bl.message})),null!==Le&&void 0!==Le&&Le.completed_at?i.createElement("div",{className:b},i.createElement(g.Z,{clicked:qe,className:E,titleStyle:{color:"white"},title:"Close"})):Re?i.createElement("div",{className:b},i.createElement(g.Z,{clicked:qe,className:E,titleStyle:{color:"white"},title:"Close"}),Je&&i.createElement(g.Z,{light:!0,clicked:()=>(()=>{var l,o;Cl(!0);let i=Qe?Qe.assignee_id:Ue;(0,_.xJ)({assignee_id:i,name:el,description:tl,dueDate:a()(sl).format("YYYY-MM-DD HH:mm"),status:null!==ol&&void 0!==ol?ol:"",add_info:(0,n.Z)((0,n.Z)({},null===e||void 0===e||null===(l=e.task)||void 0===l?void 0:l.add_info),{},{priority:null!==Tl&&void 0!==Tl?Tl:"",start:rl,end:sl,value:_l,pos:gl,repeat:ml,endRepeat:cl})},null===e||void 0===e||null===(o=e.task)||void 0===o?void 0:o.id).subscribe({next:e=>{Ve(e),Cl(!1),Fe(!1)},error:e=>{e&&(xl(e.data),Cl(!1))},complete:()=>{}})})(),className:E,title:"Update",loading:El}),!Je&&i.createElement(g.Z,{title:"Assign",light:!0,clicked:()=>{var l;Ve((0,n.Z)((0,n.Z)({},null===e||void 0===e?void 0:e.task),{},{assignee_id:Qe?Qe.assignee_id:Ue,name:el,description:tl,due_date:a()(dl).format("YYYY-MM-DD HH:mm"),status:null!==ol&&void 0!==ol?ol:"",add_info:(0,n.Z)((0,n.Z)({},null===e||void 0===e||null===(l=e.task)||void 0===l?void 0:l.add_info),{},{priority:null!==Tl&&void 0!==Tl?Tl:"",start:rl,end:sl,value:_l,repeat:ml,endRepeat:cl})})),Fe(!1)},className:E}),Je&&i.createElement(g.Z,{light:!0,clicked:()=>(()=>{var e,l,o;Cl(!0),(0,_.vr)({newAssignee:{assignee_id:null===Le||void 0===Le||null===(e=Le.assignee)||void 0===e?void 0:e.id},taskName:Le.name,taskDescription:Le.description,dueDate:a()(null===Le||void 0===Le||null===(l=Le.add_info)||void 0===l?void 0:l.end).format("YYYY-MM-DD HH:mm"),add_info:null===Le||void 0===Le?void 0:Le.add_info,taskProcess:{id:null===Le||void 0===Le||null===(o=Le.process)||void 0===o?void 0:o.id}}).subscribe({next:e=>{qe()},error:e=>{e&&(xl(e.data),Cl(!1))},complete:()=>{Cl(!1),!Nl&&Fe(!1)}})})(),className:E,title:"Copy",loading:El}),Je&&Ye.id===(null===(Te=Le.creator)||void 0===Te?void 0:Te.id)&&i.createElement(g.Z,{light:!0,clicked:()=>Il(!0),className:E,title:"Delete",style:{backgroundColor:"red"},titleStyle:{color:"white"}})):i.createElement("div",{className:b},i.createElement(g.Z,{clicked:qe,className:E,titleStyle:{color:"white"},title:"Close"}),i.createElement(g.Z,{light:!0,clicked:()=>(Cl(!0),void(0,_.vr)({newAssignee:Qe,taskProcess:null===We||void 0===We?void 0:We.processModule,taskName:el,taskDescription:null!==tl&&void 0!==tl?tl:"-",dueDate:a()(sl).format("YYYY-MM-DD HH:mm"),add_info:{module_id:null===We||void 0===We?void 0:We.processModule.module_id,priority:Tl,start:a()(rl).format("YYYY-MM-DD HH:mm"),end:a()(sl).format("YYYY-MM-DD HH:mm"),value:_l,pos:gl,repeat:ml,endRepeat:a()(cl).format("YYYY-MM-DD HH:mm")}}).subscribe({next:e=>{null!==e&&void 0!==e&&e.start&&(0,_.km)(Ye.id,y.RI).pipe((0,k.q)(1)).subscribe({}),qe()},error:e=>{e&&(xl(e.data),Cl(!1))},complete:()=>{Cl(!1),!Nl&&Fe(!1)}})),className:E,title:"Save",loading:El})),Zl&&i.createElement(Z,{taskId:Le.id,isOpen:Zl,removeTask:e=>{Ml(!0),(0,_._5)(e).subscribe({next:e=>{Ml(!1),Il(!1)},error:e=>{Ml(!1)},complete:()=>{Fe(!1)}})},loading:wl,onClose:Il}))});var N=o(73500),D=(o(64967),o(75105)),T=o(11577),P=o(88374),O=o(88827);const A=(0,s.$j)(e=>{const{allModules:l,begunModule:o,companyUsersArray:i}=e.flowReducer,{user:t}=e.sessionReducer;return{allModules:l,user:t,begunModule:o,companyUsersArray:i}})(e=>{const{isEdit:l,modalVisible:o,heading:n,onClose:d,isProcess:a,setIsProcessBegin:r,task:v,priority:s=!0,shadowedContainerStyle:u,statuses:c,start_date:p,span:m,labels:f={},onUpdate:_=()=>{},save:y=!0,companyUsersArray:g}=e,[h,b]=(0,i.useState)(f),[x,E]=(0,i.useState)(a),[C,w]=(0,i.useState)(n);return(0,i.useEffect)(()=>{let e=[];if(v){var l,o;if(!g.find(e=>{var l;return e.id===(null===v||void 0===v||null===(l=v.creator)||void 0===l?void 0:l.id)}))e=e.concat(null===(l=v.creator)||void 0===l?void 0:l.id);if(!g.find(e=>{var l;return e.id===(null===v||void 0===v||null===(l=v.assignee)||void 0===l?void 0:l.id)}))e=e.concat(null===(o=v.assignee)||void 0===o?void 0:o.id);e.length>0&&(0,D.VG)(e).pipe((0,T.P)()).subscribe({next:e=>{O.h.dispatch((0,P.NY)(g.concat(e)))}})}},[]),i.createElement("div",null,i.createElement(t.U7,{scrollable:!0,shadowedContainerStyle:u||{width:N.tq?"96%":"35%"},isOpen:o,onClose:()=>{},blured:!1},x?i.createElement("div",null,i.createElement("p",{style:{fontFamily:"var(--app-text-main-font)",fontSize:N.tq?"20px":"30px",fontWeight:"bold",color:"#4A4A4A",marginTop:"50px",marginBottom:"5px",textAlign:"center"}},null!==v&&void 0!==v&&v.completed_at?"Completed Task":C.toUpperCase()),i.createElement(I,{labels:h,showPriority:s,statuses:c,task:v,setIsProcessBegin:r,setDisplayModal:d,isProcess:x,isEdit:l,onClose:()=>d(),start_date:p,span:m,onUpdate:_,save:y})):i.createElement("div",{style:{padding:"20px 20px"}},i.createElement("p",{style:{fontFamily:"var(--app-text-main-font)",fontSize:"20px",fontWeight:"bold",color:"#4A4A4A",marginTop:"10px",marginBottom:"5px",textAlign:"center"}},null!==v&&void 0!==v&&v.completed_at?"Completed Task":C),l&&i.createElement("p",{style:{fontFamily:"var(--app-text-main-font)",fontSize:"15px",fontWeight:"700",color:"#4A4A4A",marginTop:"5px",marginBottom:"5px",textAlign:"center"}},"Task ID: ".concat(v.id.slice(-6))),i.createElement(S,{showPriority:s,statuses:c,task:v,setIsProcessBegin:r,setDisplayModal:d,isProcess:x,isEdit:l,onClose:()=>d(),start_date:p,span:m,setTaskLabels:b,onModuleSelect:e=>{E(!0),w("New Task for ".concat(e.name))}}))))})},11217:(e,l,o)=>{"use strict";o.d(l,{s:()=>d});var i=o(1413),t=o(22148),n=o.n(t);const d=async function(e){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";try{const o=await n().post("https://routes.googleapis.com/directions/v2:computeRoutes",(e=>(0,i.Z)((0,i.Z)({},e),{},{polylineQuality:"high_quality",computeAlternativeRoutes:!0}))(e),{headers:{"x-goog-api-key":l,"x-goog-fieldmask":"routes.duration,routes.distanceMeters,routes.polyline.encodedPolyline,routes.optimizedIntermediateWaypointIndex,routes.travelAdvisory.speedReadingIntervals"}});return o.data}catch(o){throw console.error("Error fetching directions:",o),o}}},29960:(e,l,o)=>{"use strict";o.d(l,{Z:()=>m});var i=o(81235),t=o(84878),n=o(67861),d=o(54868),a=o(12075),r=o(52902),v=o(40694),s=o(39518),u=o(88827),c=o(88374),p=o(67861);o(66918);const m=e=>{var l,o,m,f,_;const{onLocationChange:y=()=>{},value:g,mapkey:h="",onChange:b=()=>{},placeholder:x="",zoom:E=10}=e,{currentLocation:C}=(0,s.v9)(e=>e.flowReducer),[w,M]=(0,n.useState)(null!==(l=null===g||void 0===g?void 0:g.address)&&void 0!==l?l:""),[S,k]=(0,n.useState)([]),[Z,I]=(0,n.useState)({}),[N,D]=(0,n.useState)(""),[T,P]=(0,n.useState)({id:1,title:null!==g&&void 0!==g&&g.lat?"Target Location":"Current Location",lat:null!==(o=null!==(m=null===g||void 0===g?void 0:g.lat)&&void 0!==m?m:null===C||void 0===C?void 0:C.latitude)&&void 0!==o?o:0,lng:null!==(f=null!==(_=null===g||void 0===g?void 0:g.lng)&&void 0!==_?_:null===C||void 0===C?void 0:C.longitude)&&void 0!==f?f:0});(0,n.useEffect)(()=>{(0,d.setKey)(h),navigator.geolocation.getCurrentPosition(e=>{null!==g&&void 0!==g&&g.lat&&null!==g&&void 0!==g&&g.lng||e&&(P({id:1,title:"Current Location",lat:e.coords.latitude,lng:e.coords.longitude}),I({id:1,title:"Current Location",lat:e.coords.latitude,lng:e.coords.longitude}),u.h.dispatch((0,c.Rb)({latitude:e.coords.latitude,longitude:e.coords.longitude})))},e=>console.log(e))},[]);const O=e=>{let{text:l,tooltip:o}=e;return p.createElement("div",{className:t.Z.xcircle},p.createElement("span",{className:t.Z.circleText,title:o},p.createElement(a.G,{icon:r.opg,style:{color:"green",width:"50px",height:"50px"}}),l))},A=e=>{let{text:l,tooltip:o}=e;return p.createElement(a.G,{icon:r.diR,style:{color:"red",width:"10px",height:"10px"}})};return p.createElement("div",{style:{height:S.length>0?"":"600px",width:"100%",margin:"20px",textAlign:"center"}},p.createElement("div",{style:{display:"flex",width:"100%",margin:"auto",border:"1px dashed black"}},p.createElement(v.Z,{clear:!0,style:{width:"10%",height:"20px"},clicked:()=>{Object.keys(Z).length>0&&(P(Z),(0,d.fromLatLng)(Z.lat,Z.lng).then(e=>{let{results:l}=e;M(l[0].formatted_address),k(l.map(e=>({label:e.formatted_address,value:e.formatted_address,res:e})))}).catch(console.error))},icon:p.createElement(a.G,{icon:r.TqS,style:{swidth:"20px",height:"20px"}})}),p.createElement("input",{onBlur:e=>{e.target.value.length>3?(0,d.geocode)(d.RequestType.ADDRESS,w).then(e=>{let{results:l}=e;const{lat:o,lng:i}=l[0].geometry.location;P({id:1,title:"Target Location",lat:o,lng:i}),k(l.map(e=>({label:e.formatted_address,value:e.formatted_address,res:e})))}).catch(()=>D("Address need more details")):k([])},type:"text",onChange:e=>{M(e.target.value)},value:w,autoComplete:"none",className:t.Z.fieldTypeInput,style:{width:"74%",border:"0"},placeholder:"Type address"}),p.createElement(v.Z,{clear:!0,style:{width:"10%",height:"20px"},icon:p.createElement(a.G,{icon:r.wn1,style:{swidth:"20px",height:"20px"},clicked:()=>{w.length>3&&(0,d.geocode)(d.RequestType.ADDRESS,w).then(e=>{let{results:l}=e;const{lat:o,lng:i}=l[0].geometry.location;P({id:1,title:"Target Location",lat:o,lng:i}),k(l.map(e=>({label:e.formatted_address,value:e})))}).catch(()=>{})}})})),p.createElement("p",{onClick:()=>D("")},N),S.slice(0,5).map((e,l)=>p.createElement("div",{key:l},p.createElement(v.Z,{light:!0,title:e.value,style:{height:"100px",width:"100%"},titleStyle:{textAlign:"left"},clicked:()=>{b(null===e||void 0===e?void 0:e.res)}}))),p.createElement("div",{style:{marginTop:"20px",height:"80%",width:"100%"}},p.createElement(i.ZP,{onClick:e=>{(0,d.fromLatLng)(e.lat,e.lng).then(e=>{let{results:l}=e;M(l[0].formatted_address),k(l.map(e=>({label:e.formatted_address,value:e.formatted_address,res:e})))}).catch(console.error),P({id:1,title:"Target Location",lat:e.lat,lng:e.lng})},bootstrapURLKeys:{key:h,language:"en",region:"US"},center:{lat:+T.lat,lng:+T.lng},defaultZoom:E,distanceToMouse:(e,l)=>{if(e&&l)return Math.sqrt((e.x-l.x)*(e.x-l.x)+(e.y-l.y)*(e.y-l.y))}},C&&p.createElement(A,{key:1e3,lat:C.latitude,lng:C.longitude,tooltip:"Current Location"}),"Current Location"!==T.title&&p.createElement(O,{key:T.id,lat:T.lat,lng:T.lng,tooltip:T.title}))))}},31266:(e,l,o)=>{"use strict";o.d(l,{Z:()=>a});var i=o(1413),t=o(67861),n=o(61058),d=o(49465);const a=e=>{const{series:l,categories:o}=e,[a,r]=(0,t.useState)({series:l}),v=(0,i.Z)((0,i.Z)({},d.NE),{},{xaxis:(0,i.Z)((0,i.Z)({},d.NE),{},{categories:o})});return t.createElement("div",null,t.createElement("div",{id:"chartOne",className:"-ml-5"},t.createElement(n.Z,{options:v,series:a.series,type:"area",height:350})))}},30519:(e,l,o)=>{"use strict";o.d(l,{Z:()=>a});var i=o(1413),t=o(67861),n=o(61058),d=o(49465);const a=e=>{const{series:l,labels:o,title:a="Total"}=e,[r,v]=(0,t.useState)({series:l}),s=(0,i.Z)((0,i.Z)({},d.HR),{},{labels:o,plotOptions:(0,i.Z)((0,i.Z)({},d.HR.plotOptions),{},{pie:(0,i.Z)((0,i.Z)({},d.HR.plotOptions.pie),{},{donut:(0,i.Z)((0,i.Z)({},d.HR.plotOptions.pie.donut),{},{labels:(0,i.Z)((0,i.Z)({},d.HR.plotOptions.pie.donut.labels),{},{total:(0,i.Z)((0,i.Z)({},d.HR.plotOptions.pie.donut.labels.total),{},{label:a})})})})})});return t.createElement("div",{className:"mb-2"},t.createElement("div",{id:"chartThree",className:"mx-auto flex justify-center"},t.createElement(n.Z,{options:s,series:r.series,type:"donut"})))}},84952:(e,l,o)=>{"use strict";o.d(l,{Z:()=>a});var i=o(1413),t=o(67861),n=o(61058),d=o(49465);const a=e=>{const{series:l,categories:o}=e,[a,r]=(0,t.useState)({series:l}),v=(0,i.Z)((0,i.Z)({},d.AM),{},{xaxis:(0,i.Z)((0,i.Z)({},d.AM),{},{categories:o})});return t.createElement("div",null,t.createElement("div",{id:"chartTwo",className:"-ml-5 -mb-9"},t.createElement(n.Z,{options:v,series:a.series,type:"bar",height:350})))}},20089:(e,l,o)=>{"use strict";o.d(l,{Z:()=>r});var i=o(61058),t=o(31266),n=o(84952),d=o(30519),a=(o(73500),o(67861));const r=e=>{const{orientation:l,series:o,labels:r,config:v,title:s,type:u,width:c,height:p}=e;return a.createElement(a.Fragment,null,"Line"===l&&a.createElement(t.Z,{series:o}),"Column"===l&&a.createElement(n.Z,{series:o}),"Donut"===l&&a.createElement(d.Z,{title:s,series:o,labels:r}),"Bar"===l&&a.createElement("div",{className:"mb-2"},a.createElement("div",{id:"reactApexChart",className:"mx-auto flex justify-center"},a.createElement(i.Z,{options:v,series:o,type:u,width:c,height:p}))),"Custom"===l&&a.createElement("div",{className:"mb-2"},a.createElement("div",{id:"reactApexChart",className:"mx-auto flex justify-center"},a.createElement(i.Z,{options:v,series:o,type:u}))))}},84910:(e,l,o)=>{"use strict";o.d(l,{Z:()=>u});var i=o(67861),t=o(41756),n=o.n(t),d=(o(16207),o(30575)),a=o.n(d),r=o(67861);t.Quill.register("modules/imageResize",a());const v=t.Quill.import("attributors/style/font");v.whitelist=["Sans Serif","Montserrat","Nunito Sans","Tahoma","Roboto","Arial"],t.Quill.register(v,!0);class s extends i.Component{constructor(e){super(e),this.state={editorHtml:""},this.handleChange=this.handleChange.bind(this)}handleChange(e){this.setState({editorHtml:e}),this.props.handleChange(e)}render(){return r.createElement(n(),{theme:this.state.theme,onChange:this.handleChange,defaultValue:this.props.defaultValue,modules:s.modules,formats:s.formats,bounds:"#root",placeholder:this.props.placeholder})}}s.modules={toolbar:[[{header:"1"},{header:"2"},{font:v.whitelist}],[{size:[]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],["link","image","video"],[{align:[]}],["clean"]],clipboard:{matchVisual:!1},imageResize:{parchment:t.Quill.import("parchment"),modules:["Resize","DisplaySize"]}},s.formats=["header","font","size","bold","italic","underline","strike","blockquote","list","bullet","indent","link","image","video","direction","align"];const u=s},91426:(e,l,o)=>{"use strict";o.d(l,{Z:()=>m});var i=o(87462),t=o(1413),n=o(45987),d=o(47144),a=o.n(d),r=o(88239),v=o(67861),s=o(85692),u=o(64468);const c={host:"OpenSelectWithSearch_host__AREPA",toggleMenuControlsIcons:"OpenSelectWithSearch_toggleMenuControlsIcons__1MKyC",toggleMenuButton:"OpenSelectWithSearch_toggleMenuButton__bFOLO",inputContainer:"OpenSelectWithSearch_inputContainer__1riPP",input:"OpenSelectWithSearch_input__moy3y",menuOverlayList:"OpenSelectWithSearch_menuOverlayList__FgGKF",menuOverlayListItem:"OpenSelectWithSearch_menuOverlayListItem__uRq1S",title:"OpenSelectWithSearch_title__IiTec"},p=["defaultSelectedItem","items","title","id","placeholder","hasMandatoryIndicator","responsiveOnChange","errorMessage","itemType","onChange","onDropDownClosed","focusSelectedMenuItem","className","inputContainerClassName","inputClassName","clearControlsClassName","molclassname","moliclassname","inputStyle","menuOverlayListStyle","menuOverlayListItemStyle","triggerType","isClearable"],m=e=>{const{defaultSelectedItem:l,items:o,title:d,id:m=(null===d||void 0===d?void 0:d.replace(/ /g,"-")),placeholder:f,hasMandatoryIndicator:_,responsiveOnChange:y,errorMessage:g,itemType:h,onChange:b,onDropDownClosed:x,focusSelectedMenuItem:E,className:C,inputContainerClassName:w,inputClassName:M,clearControlsClassName:S,molclassname:k,moliclassname:Z,inputStyle:I,menuOverlayListStyle:N,menuOverlayListItemStyle:D,triggerType:T,isClearable:P}=e,O=(0,n.Z)(e,p),[A,z]=(0,v.useState)(o),[L,R]=(0,v.useState)(!1),U=e=>R(e),F=null!=g,{isOpen:W,getToggleButtonProps:q,getLabelProps:Y,getMenuProps:B,getInputProps:H,getComboboxProps:j,highlightedIndex:V,getItemProps:G,selectedItem:J,openMenu:Q,closeMenu:K,selectItem:X}=(0,r.Kb)({items:A,id:m,defaultSelectedItem:l,stateReducer:(e,l)=>{const{type:i,changes:n}=l;switch(i){case r.Kb.stateChangeTypes.ToggleButtonClick:case r.Kb.stateChangeTypes.InputBlur:return(0,t.Z)((0,t.Z)({},n),{},{inputValue:""});case r.Kb.stateChangeTypes.FunctionOpenMenu:return z(o),(0,t.Z)((0,t.Z)({},n),{},{highlightedIndex:e.selectedItem?o.indexOf(e.selectedItem):-1})}return n},itemToString:e=>{var l;return null!==(l=null===e||void 0===e?void 0:e.label)&&void 0!==l?l:""},onSelectedItemChange:e=>null===b||void 0===b?void 0:b(e.selectedItem),onInputValueChange:e=>{let{inputValue:l}=e;l&&z(o.filter(e=>{var o,i;return null===e||void 0===e||null===(o=e.label)||void 0===o||null===(i=o.toLowerCase())||void 0===i?void 0:i.includes(l.toLowerCase())}))}});(0,v.useEffect)(()=>{y&&W&&X({value:"",label:""})},[W,X]),(0,v.useEffect)(()=>{W&&J&&E&&requestAnimationFrame(()=>{const e=document.querySelector("#".concat(m,"-item-").concat(o.indexOf(J)));null===e||void 0===e||e.scrollIntoView({behavior:"smooth",block:"center"})})},[m,W,o,J]);const $=(0,v.useCallback)(()=>{L&&(null===x||void 0===x||x(J))},[x,J,L]);return(0,v.useEffect)(()=>{W?U(!0):($(),U(!1)),Q()},[W,$]),v.createElement("div",(0,i.Z)({className:a()(c.host,C)},O),v.createElement("div",{className:c.title,style:{padding:"10px 0 0 26px"}},d.toUpperCase()),v.createElement(u.fv,(0,i.Z)({},j(),{isActive:W,hasError:F,className:a()(c.inputContainer,w)}),v.createElement(u.II,(0,i.Z)({className:a()(c.input,M),style:I},H({placeholder:f,"aria-invalid":null!=g||void 0,onFocus:()=>{var l;W||Q(),null===e||void 0===e||null===(l=e.onFocus)||void 0===l||l.call(e)}}))),P&&(null===J||void 0===J?void 0:J.label)&&v.createElement("div",{className:S,onClick:e=>{e.stopPropagation(),e.preventDefault(),X(null)}},v.createElement(s.KF,{className:c.toggleMenuControlsIcons})),v.createElement(u.LG,(0,i.Z)({triggerType:T,isOpen:W,onClick:()=>W?K():Q()},q()))),v.createElement(u.ai,(0,i.Z)({},B(),{className:a()(c.menuOverlayList,k),"app-is-visible":W?"true":"false",style:N}),W&&(null===A||void 0===A?void 0:A.map((e,l)=>v.createElement(u.q_,(0,i.Z)({itemType:h,isVisible:!0,key:"".concat(e).concat(l),className:a()(c.menuOverlayListItem,Z),style:D,isHighlighted:V===l},G({item:e,index:l})),e.label,v.createElement("pre",{className:c.currencySymbol},null===e||void 0===e?void 0:e.symbol," "))))),g&&v.createElement(u.Bc,null,g))}},60179:(e,l,o)=>{"use strict";o.d(l,{iA:()=>C,z0:()=>w,zx:()=>M});var i,t,n,d,a,r=o(87462),v=o(30168),s=o(67861),u=o(43745),c=o(49866),p=o(33613),m=o(79602),f=o(66624),_=o(90369),y=o(67861);const g=u.ZP.div(i||(i=(0,v.Z)(["\n\theight: 1rem;\n\tvertical-align: bottom;\n\tdisplay: inline-block;\n\tmargin-right: 0.5rem;\n\tsvg {\n\t\twidth: 100%;\n\t\theight: 100%;\n\t}\n\tcursor: ",";\n"])),e=>{let{isDragging:l}=e;return l?"grabbing":"grab"}),h=e=>y.createElement(g,e,y.createElement("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"grip-vertical",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512"},y.createElement("path",{fill:"currentColor",fillOpacity:"0.1",d:"M96 32H32C14.33 32 0 46.33 0 64v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32V64c0-17.67-14.33-32-32-32zm0 160H32c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32v-64c0-17.67-14.33-32-32-32zm0 160H32c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32v-64c0-17.67-14.33-32-32-32zM288 32h-64c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32V64c0-17.67-14.33-32-32-32zm0 160h-64c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32v-64c0-17.67-14.33-32-32-32zm0 160h-64c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32v-64c0-17.67-14.33-32-32-32z"}))),b=u.ZP.td(t||(t=(0,v.Z)(["\n\tbackground: rgba(127, 207, 250, 0.3);\n"]))),x=u.ZP.td(n||(n=(0,v.Z)(["\n\tbackground: white;\n\t&:first-of-type {\n\t\tmin-width: 20ch;\n\t}\n"]))),E=e=>{let{row:l}=e;const{attributes:o,listeners:i,transform:t,transition:n,setNodeRef:d,isDragging:a}=(0,c.nB)({id:l.original.id}),v={transform:p.ux.Transform.toString(t),transition:n};return y.createElement("tr",(0,r.Z)({ref:d,style:v},l.getRowProps()),a?y.createElement(b,{colSpan:1},"\xa0"):l.cells.map((e,l)=>{if(0===l)return y.createElement(x,(0,r.Z)({key:l},e.getCellProps()),y.createElement(h,(0,r.Z)({},o,i)),y.createElement("span",null,e.render("Cell")))}))};function C(e){let{columns:l,data:o,onhandleDragEnd:i}=e;const[,t]=(0,s.useState)(),n=(0,s.useMemo)(()=>null===o||void 0===o?void 0:o.map(e=>{let{id:l}=e;return l}),[o]),{getTableProps:d,getTableBodyProps:a,rows:r,prepareRow:v}=(0,_.useTable)({columns:l,data:o}),u=(0,m.Dy)((0,m.VT)(m.MA,{}),(0,m.VT)(m.LO,{}),(0,m.VT)(m.Lg,{}));return y.createElement(m.LB,{sensors:u,onDragEnd:function(e){const{active:l,over:d}=e;if(l.id!==d.id){const e=n.indexOf(l.id),t=n.indexOf(d.id),a=(0,c.Rp)(o,e,t);i(a)}t(null)},onDragStart:function(e){t(e.active.id)},onDragCancel:function(){t(null)},collisionDetection:m.pE,modifiers:[f.DL]},y.createElement("table",d(),y.createElement("tbody",a(),y.createElement(c.Fo,{items:n,strategy:c.qw},r.map(e=>(v(e),y.createElement(E,{key:e.original.id,row:e})))))))}const w=u.ZP.div(d||(d=(0,v.Z)(["\n\t\n\toverflow:auto;\n\tpadding: 0rem;\n\ttable {\n\t\tborder-spacing: 0;\n\t\tborder: 0px dashed black;\n\n\t\ttr {\n\t\t\t:last-child {\n\t\t\t\ttd {\n\t\t\t\t\tborder-bottom: 0;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tth,\n\t\ttd {\n\t\t\tmargin: 0;\n\t\t\twidth: 200rem;\n\t\t\tpadding: 0rem;\n\n\t\t\t:last-child {\n\t\t\t\tborder-right: 0;\n\t\t\t}\n\t\t}\n\t}\n"]))),M=u.ZP.div(a||(a=(0,v.Z)(["\n\tmax-height: 100vh; \n\toverflow:auto;\n\tpadding: 0rem;\n\ttable {\n\t\tborder-spacing: 0;\n\t\tborder: 0px dashed black;\n\n\t\ttr {\n\t\t\t:last-child {\n\t\t\t\ttd {\n\t\t\t\t\tborder-bottom: 0;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tth,\n\t\ttd {\n\t\t\tmargin: 0;\n\t\t\twidth: 200rem;\n\t\t\tpadding: 0rem;\n\n\t\t\t:last-child {\n\t\t\t\tborder-right: 0;\n\t\t\t}\n\t\t}\n\t}\n"])))},59401:(e,l,o)=>{"use strict";o.d(l,{sM:()=>a});var i=o(1413),t=o(92957);const n="SET_SELECTED_COMPONENT",[d,a]=(0,t.Z)((e,l)=>{const{action:o,value:t}=l;return o===n?(0,i.Z)((0,i.Z)({},e),{},{selectedComponent:t}):(0,i.Z)({},e)},{selectedComponent:[]})},94667:(e,l,o)=>{"use strict";o.d(l,{hd:()=>r});var i=o(1413),t=(o(56031),o(95256)),n=o(88827),d=o(30994),a=o(96332);const r=e=>{const{sessionSettings:{last_access_token:l}}=n.h.getState().authReducer,o={analyze:e},r=(0,i.Z)({},d.ns.search.geminiAI(l)),v=(0,i.Z)((0,i.Z)({},r),{},{data:o,handlerEnabled:!0,forwardAllErrors:!0});return new t.y(e=>(0,a.b)(v).then(l=>{null!==l&&void 0!==l&&l.data&&(e.next(l.data),e.complete())}).catch(l=>{e.error(l)}))}},11488:()=>{},143:()=>{},84878:(e,l,o)=>{"use strict";o.d(l,{Z:()=>i});const i={App:"MapPin_App__ttDFM",circle:"MapPin_circle__XymBg",circleText:"MapPin_circleText__wjHtA",fieldTypeInput:"MapPin_fieldTypeInput__qK41G",selectText:"MapPin_selectText__OZhje",inputField:"MapPin_inputField__OXU+c",industryMOLI:"MapPin_industryMOLI__PLA7r",multiselectComponent:"MapPin_multiselectComponent__03G3Z",dropdownClassContainer:"MapPin_dropdownClassContainer__5871O"}},55382:()=>{},72095:()=>{},61219:()=>{}}]);
//# sourceMappingURL=3573.410d89fb.chunk.js.map