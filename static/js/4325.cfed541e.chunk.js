(self.webpackChunkflowhero=self.webpackChunkflowhero||[]).push([[4325],{32422:function(e,n,t){"use strict";t.d(n,{rr:function(){return He},ZP:function(){return Je}});var o=t(4942),l=t(1413),i=t(93433),d=t(29439),a=t(67861),u={processStepHost:"ModuleStep_processStepHost__fdU12",listContainer:"ModuleStep_listContainer__+T0XF",detailContainer:"ModuleStep_detailContainer__EFIwE",centeredCardMargin:"ModuleStep_centeredCardMargin__eYosE",centeredSpinner:"ModuleStep_centeredSpinner__sOFdo",emptyElementsSection:"ModuleStep_emptyElementsSection__ehjx-",stepCounter:"ModuleStep_stepCounter__mD22I",clockIcon:"ModuleStep_clockIcon__TY0er",stepTitle:"ModuleStep_stepTitle__f9SxJ",stepTitleSmaller:"ModuleStep_stepTitleSmaller__Ng9ym",stepGuidance:"ModuleStep_stepGuidance__aWqq0",stepGuidanceSmaller:"ModuleStep_stepGuidanceSmaller__IKIF+",inputContainer:"ModuleStep_inputContainer__s9qZ2",selectInput:"ModuleStep_selectInput__LcokN",multiselectWithSearch:"ModuleStep_multiselectWithSearch__qMOzq",smoMultiselectParent:"ModuleStep_smoMultiselectParent__Pweb-",selectMenuItem:"ModuleStep_selectMenuItem__i73KN",inputClassName:"ModuleStep_inputClassName__VI3pY",toggleMenuInputButton:"ModuleStep_toggleMenuInputButton__gcFHY",goToNextStep:"ModuleStep_goToNextStep__ePl+k",nextStepsContainer:"ModuleStep_nextStepsContainer__zcpA0",nextStepImageContainer:"ModuleStep_nextStepImageContainer__55MGd",nextStepWrapper:"ModuleStep_nextStepWrapper__ZtiNA",tasksTableHost:"ModuleStep_tasksTableHost__AZ6rT",headerContainer:"ModuleStep_headerContainer__4kozo",content:"ModuleStep_content__ClnRX","react-grid-layout":"ModuleStep_react-grid-layout__21OCf",layoutJSON:"ModuleStep_layoutJSON__tFPI9",columns:"ModuleStep_columns__dPw3m","react-grid-item":"ModuleStep_react-grid-item__tFcr7","react-grid-placeholder":"ModuleStep_react-grid-placeholder__canbf",resizing:"ModuleStep_resizing__xUUDG",static:"ModuleStep_static__IPrAy",text:"ModuleStep_text__MzRSh",minMax:"ModuleStep_minMax__SkZxD",add:"ModuleStep_add__aOZYV","react-grid-dragHandleExample":"ModuleStep_react-grid-dragHandleExample__iEu5W",cssTransforms:"ModuleStep_cssTransforms__aN9IT","react-draggable-dragging":"ModuleStep_react-draggable-dragging__epzS0","react-resizable-handle":"ModuleStep_react-resizable-handle__XaFka",singleButton:"ModuleStep_singleButton__+BXaC",menuRightButtons:"ModuleStep_menuRightButtons__r-OPw",menuButtons:"ModuleStep_menuButtons__TsY6r",menuAccordionButtons:"ModuleStep_menuAccordionButtons__4QNWj",detailLabel:"ModuleStep_detailLabel__hVTU1",subLabel:"ModuleStep_subLabel__6PFJJ",modalHeaderTitle:"ModuleStep_modalHeaderTitle__hDlRr",p:"ModuleStep_p__njhI7",accordionContainer:"ModuleStep_accordionContainer__oW7nH",itemsTable:"ModuleStep_itemsTable__ttZKV",sharesTable:"ModuleStep_sharesTable__Gy1CG",peoplePositionsSelect:"ModuleStep_peoplePositionsSelect__jXRrK",peoplePositionsSelectInput:"ModuleStep_peoplePositionsSelectInput__NSg8e",peoplePositionsSelectMenuOverlay:"ModuleStep_peoplePositionsSelectMenuOverlay__S0xqm",peoplePositionsSelectMenuOverlayItem:"ModuleStep_peoplePositionsSelectMenuOverlayItem__Vuo-D",deleteText:"ModuleStep_deleteText__XIVyR",deleteButton:"ModuleStep_deleteButton__PhwaV",searchContainer:"ModuleStep_searchContainer__s1Y37",searchInput:"ModuleStep_searchInput__XukKm",emailInput:"ModuleStep_emailInput__sTwU9",actionsContainer:"ModuleStep_actionsContainer__jWMeW",detailButton:"ModuleStep_detailButton__w7F3v",detailButtonTitleContainer:"ModuleStep_detailButtonTitleContainer__8ffTu",fetchingLatestP:"ModuleStep_fetchingLatestP__gnf89",modalTitle:"ModuleStep_modalTitle__T4SaB",modalSubTitle:"ModuleStep_modalSubTitle__SIFKS",dropdownSelectComponent:"ModuleStep_dropdownSelectComponent__L66Sz",dropdownSelectComponentL:"ModuleStep_dropdownSelectComponentL__wOEsz",dropdownSelectOperation:"ModuleStep_dropdownSelectOperation__DEwuW",dropdownSelectReport:"ModuleStep_dropdownSelectReport__g2+2D",cardTitle:"ModuleStep_cardTitle__h24lD",customButton:"ModuleStep_customButton__sVkp5",fieldTypeInput:"ModuleStep_fieldTypeInput__q1+bw",fieldRowContainer:"ModuleStep_fieldRowContainer__5hIbd",templateInformation:"ModuleStep_templateInformation__UjdWL",emulatedFlexGap:"ModuleStep_emulatedFlexGap__yE15Q","mobile-navbar":"ModuleStep_mobile-navbar__P0z8E","mobile-navbar-close":"ModuleStep_mobile-navbar-close__5fZ-y","hamb-icon":"ModuleStep_hamb-icon__lSxYR","open-nav":"ModuleStep_open-nav__39a-n",description:"ModuleStep_description__GUBFo",tableHostSimple:"ModuleStep_tableHostSimple__VmM5x",imageCard:"ModuleStep_imageCard__HGrB9",imageLogoPrint:"ModuleStep_imageLogoPrint__I5-r0"},r=t(9969),s=t(71302),c=t(39518),v=t(10904),p=t(6073),m=t(93389),f=t(34710),_=t(88827),y=t(88374),h=t(11577),g=t(10103),b=t(88550),M=t(49119),Z="StaticAccordionModule_section__E+rSn",E="StaticAccordionModule_accordionContainer__6xeqD",C="StaticAccordionModule_active__39RQh",S="StaticAccordionModule_content__-a1q1",w="StaticAccordionModule_fieldTypeInput__78Qbk",x="StaticAccordionModule_fieldTypeTextarea__RF3xI",k="StaticAccordionModule_emulatedFlexGap__F5FQC",I="StaticAccordionModule_cardTitle__lJnSQ",N="StaticAccordionModule_filtersContainer__oSB5G",P="StaticAccordionModule_actionsContainer__WXbu6",D="StaticAccordionModule_avatarContentContainer__Kd+Dg",T="StaticAccordionModule_avatarUrlImg__6oG4I",A="StaticAccordionModule_itemsContainer_ii__cqIFU",q=t(79633),O=(t(20777),t(73500)),U=t(47144),R=t.n(U),Y=t(27436),B=(t(68140),t(12308)),L=t(35606),F=t(13397),j=t(98032),z=t(74369),V=t(50981),W=t.n(V),G=t(27426),H=t(32562),J=t(12075),X=t(52902),Q=(t(65947),t(89293)),K=t(60534),$=(0,a.memo)((function(e){var n,t,i=e.component,d=e.components,u=e.companyData,r=e.allComponents,s=e.companyUsersArray,p=e.selectedComponent,m=(0,c.v9)((function(e){return e.flowReducer})),f=m.allModules,_=m.allTasks,y=m.companyPositionsArray,h=m.map,g=(null===i||void 0===i||null===(n=i.selected_fields)||void 0===n?void 0:n.length)>0&&L.Z([F.Z(j.Z("index"))])(null===i||void 0===i||null===(t=i.selected_fields)||void 0===t?void 0:t.filter((function(e){return!0!==e.value||void 0!==(null===e||void 0===e?void 0:e.value)||"Transaction List"===(null===e||void 0===e?void 0:e.data_type_name)}))).map((function(e,n){var t,c,m,g,b,M,Z=null===(t=p.component_fields.find((function(n){return n.field_name===(null===e||void 0===e?void 0:e.field_name)&&n.data_type_name===(null===e||void 0===e?void 0:e.data_type_name)})))||void 0===t?void 0:t.value;if((null===e||void 0===e||null===(c=e.options)||void 0===c||null===(m=c.list)||void 0===m?void 0:m.length)>0&&(null===e||void 0===e||null===(g=e.options)||void 0===g||null===(b=g.component_id)||void 0===b?void 0:b.length)>0&&("Step List"===(null===e||void 0===e?void 0:e.data_type_name)||"Component List"===(null===e||void 0===e?void 0:e.data_type_name)))return a.createElement("div",{key:n,style:{width:"100%"}},a.createElement(B.default,{columns:e.options.list,list:(ce=e.options,d.filter((function(e){return e.id===ce.component_id})).map((function(e){var n={};return ce.list.map((function(t){n=(0,l.Z)((0,l.Z)({},n),{},(0,o.Z)({},t,e.selected_fields.find((function(e){return e.field_name===t})).value))})),n})))}));if("output"===e.data_type&&"Formula"!==e.data_type_name&&"Item Formula"!==e.data_type_name&&"Record"!==e.data_type_name&&"Filters"!==e.data_type_name)return null;if("Info"===e.data_type_name)return null;if("Transaction List"===e.data_type_name)return null;if("URL"===e.data_type_name)return null;if("Ratings"===e.data_type_name)return null;if("Rewards"===e.data_type_name)return null;if("Map"===e.data_type_name){var C,S,k,I=JSON.parse(Z||(null!==(C=null===e||void 0===e?void 0:e.value)&&void 0!==C?C:"{}"));if(null!==I&&void 0!==I&&null!==(S=I.routes)&&void 0!==S&&S.DRIVE)h.routes={DRIVE:I.routes.DRIVE},h.pins=null!==(k=null===I||void 0===I?void 0:I.pins)&&void 0!==k?k:[];else null!==I&&void 0!==I&&I.pins&&(h.pins=null===I||void 0===I?void 0:I.pins,h.routes={DRIVE:[]});return a.createElement("div",{key:n})}if("Lookup"===e.data_type_name)return null;if("Calendar"===e.data_type_name)return null;if("Summary"===e.data_type_name)return null;if("ID"===e.data_type_name)return a.createElement(q.Z,{key:n,width:O.tq?"100%":"50%",fieldLabel:e.field_name,style:{border:"0"},fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:!1,error:e.errors,customIconBgColor:"white",enabled:!1},a.createElement("input",{readOnly:!0,style:{pointerEvents:"none"},type:e.data_type,onChange:function(){},autoComplete:"none",value:null!==(M=Z)&&void 0!==M?M:null===e||void 0===e?void 0:e.value,className:w,name:e.field_name}));var D,T,A,U,R,Y,L,F,j,z,Q,K,$,ee,ne,te,oe,le,ie,de,ae,ue,re,se,ce,ve=null===i||void 0===i||null===(D=i.selected_fields)||void 0===D?void 0:D.find((function(e){return"Info"===e.data_type_name&&!0===e.visible}));if(ve){var pe,me,fe=r.find((function(e){return(null===e||void 0===e?void 0:e.component_fields.filter((function(e){return e.component_blueprint_id===ve.options.component_id&&e.value===Z})).length)>0}));if(fe)return null===ve||void 0===ve||null===(pe=ve.options)||void 0===pe||null===(me=pe.list)||void 0===me?void 0:me.map((function(t,o){var l,i,d=null!==(l=null===(i=fe.component_fields.find((function(e){return e.field_name===t})))||void 0===i?void 0:i.value)&&void 0!==l?l:"";return null!==d&&void 0!==d&&d.includes("jpg")||null!==d&&void 0!==d&&d.includes("jpeg")||null!==d&&void 0!==d&&d.includes("png")?a.createElement(q.Z,{width:O.tq?"100%":"50%",style:{border:"0"},key:n,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:!1,error:e.errors,customIconBgColor:"white"},a.createElement("div",{className:E,onClick:function(){return window.open(Z,"_blank")}},a.createElement("img",{alt:"lg",onError:function(e){return e.target.src="https://i.quotev.com/b2gtjqawaaaa.jpg"},src:d,style:{width:"100%",height:"100%",cursor:"pointer"}}))):a.createElement(q.Z,{enabled:!1,width:O.tq?"100%":"50%",key:o,style:{border:"0"},fieldLabel:t,fieldIcon:e.icon,isProcess:!0,visible:void 0!==(null===e||void 0===e?void 0:e.value)||e.visible,mandatory:!1,error:e.errors},d.length>55?a.createElement("textarea",{className:x,type:e.data_type,value:d,onFocus:function(){},autoComplete:"none",onChange:function(e){},readOnly:!0,style:{backgroundColor:"rgba(234, 231, 231, 0.91)",height:"auto",padding:"10px"}}):a.createElement("input",{readOnly:!0,style:{pointerEvents:"none"},autoComplete:"none",value:d,className:w,name:e.field_name}))}))}if("Pin"===e.data_type_name&&Z){var _e,ye,he,ge,be,Me,Ze,Ee=JSON.parse(Z);return a.createElement("div",{key:n,style:{display:"",width:"100%",pointerEvents:"none"}},e.field_name,a.createElement(G.Z,{mapkey:null===(_e=u.misc_info)||void 0===_e?void 0:_e.map,pins:null!==Ee&&void 0!==Ee&&Ee.realtime?null!==Ee&&void 0!==Ee&&null!==(ye=Ee.destination)&&void 0!==ye&&ye.address?[(0,l.Z)((0,l.Z)({},Ee.destination),{},{type:"destination"}),(0,l.Z)((0,l.Z)({},Ee.source),{},{type:"source"}),(0,l.Z)((0,l.Z)({},Ee.realtime),{},{type:"realtime"})]:[(0,l.Z)((0,l.Z)({},Ee.source),{},{type:"source"}),(0,l.Z)((0,l.Z)({},Ee.realtime),{},{type:"realtime"})]:null!==Ee&&void 0!==Ee&&null!==(he=Ee.destination)&&void 0!==he&&he.address?[(0,l.Z)((0,l.Z)({},Ee.destination),{},{type:"destination"}),(0,l.Z)((0,l.Z)({},Ee.source),{},{type:"source"})]:[(0,l.Z)((0,l.Z)({},Ee.source),{},{type:"source"})]}),a.createElement("div",{className:N,style:{color:"var(--app-color-gray-dark)",height:"inherit",width:"100%",display:null!==e&&void 0!==e&&e.visible?"":"none"}},a.createElement("div",{className:P,style:{fontSize:"12px"}},null!==Ee&&void 0!==Ee&&null!==(ge=Ee.destination)&&void 0!==ge&&ge.address?a.createElement("div",{style:{width:"100px",fontWeight:"normal",fontSize:"14px"}},"From",":"):a.createElement(J.G,{icon:X.opg,style:{color:"green",height:"20px",width:"20px"}}),a.createElement("div",null,Ee.source.address)),(null===Ee||void 0===Ee||null===(be=Ee.destination)||void 0===be?void 0:be.address)&&a.createElement("hr",{style:{borderTop:"0.5px solid #D2D2D2"}}),(null===Ee||void 0===Ee||null===(Me=Ee.destination)||void 0===Me?void 0:Me.address)&&a.createElement("div",{className:P,style:{fontSize:"12px"}},a.createElement("div",{style:{width:"100px",fontWeight:"normal"}},"To",":"),a.createElement("div",null,null===Ee||void 0===Ee||null===(Ze=Ee.destination)||void 0===Ze?void 0:Ze.address))))}if("Action Button"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(T=e.options)||void 0===T||null===(A=T.action)||void 0===A?void 0:A.length)>0){var Ce,Se,we,xe=null===s||void 0===s?void 0:s.find((function(e){return e.id===Z}));return a.createElement(q.Z,{width:O.tq?"100%":"50%",key:n,style:{border:"0"},isProcess:!0,fieldLabel:null!==(Ce=e.options)&&void 0!==Ce&&Ce.notes?null===(Se=e.options)||void 0===Se?void 0:Se.notes:e.field_name,enabled:!1,visible:e.visible,mandatory:!1,error:e.errors},"user"===e.options.action&&a.createElement("input",{style:{pointerEvents:"none"},onChange:function(){},autoComplete:"none",value:xe?"".concat(null===xe||void 0===xe?void 0:xe.first_name," ").concat(null===xe||void 0===xe?void 0:xe.last_name):null!==(we=null===e||void 0===e?void 0:e.value)&&void 0!==we?we:"-",className:w,name:e.field_name}))}if("Link"===e.data_type_name)return a.createElement(q.Z,{width:O.tq?"100%":"50%",style:{border:"0"},key:n,fieldIcon:e.icon,isProcess:!0,visible:void 0!==(null===e||void 0===e?void 0:e.value)||e.visible,mandatory:!1,error:e.errors,customIconBgColor:"white"},null!==(j=Z)&&void 0!==j&&j.includes("jpg")||null!==(z=Z)&&void 0!==z&&z.includes("jpeg")||null!==(Q=Z)&&void 0!==Q&&Q.includes("png")||null!==e&&void 0!==e&&null!==(K=e.options)&&void 0!==K&&K.image?a.createElement("div",{className:E,onClick:function(){return window.open(Z,"_blank")}},a.createElement("img",{alt:"lg",onError:function(e){return e.target.src="https://i.quotev.com/b2gtjqawaaaa.jpg"},src:null!==($=Z)&&void 0!==$?$:"https://i.quotev.com/b2gtjqawaaaa.jpg",style:{width:"100%",height:"100%",cursor:"pointer"}})):null!==(ee=Z)&&void 0!==ee&&ee.includes("pdf")?a.createElement("div",{className:E,onClick:function(){return window.open(Z,"_blank")}},a.createElement("embed",{onClick:function(){return window.open(Z,"_blank")},src:"".concat(Z,"#toolbar=0&navpanes=0&scrollbar=0"),width:"400px",height:"500px"})):a.createElement("div",{style:{width:"inherit",textDecoration:"underline",textAlign:"center",cursor:"pointer"},onClick:function(){return window.open(Z,"_blank")}},"Link"));if("Freehand"===e.data_type_name)return a.createElement(q.Z,{width:O.tq?"100%":"50%",style:{border:"0"},key:n,fieldIcon:e.icon,isProcess:!0,visible:void 0!==(null===e||void 0===e?void 0:e.value)||e.visible,mandatory:!1,error:e.errors,customIconBgColor:"white"},a.createElement("div",{className:E,onClick:function(){return window.open(Z,"_blank")}},a.createElement("img",{alt:"lg",onError:function(e){return e.target.src="https://i.quotev.com/b2gtjqawaaaa.jpg"},src:null!==(ne=Z)&&void 0!==ne?ne:"https://i.quotev.com/b2gtjqawaaaa.jpg",style:{width:"100%",height:"100%",cursor:"pointer"}})));if("Checkbox"===e.data_type_name)return a.createElement(q.Z,{width:O.tq?"100%":"50%",key:n,style:{border:"0"},fieldLabel:e.options.value,fieldIcon:e.icon,isProcess:!0,visible:void 0!==(null===e||void 0===e?void 0:e.value)||e.visible,mandatory:!1,error:e.errors,customIconBgColor:"white",enabled:!1},a.createElement("input",{style:{pointerEvents:"none"},onChange:function(){},autoComplete:"none",value:void 0===Z?"":1==Z?"Yes":"No",className:w,name:e.field_name}));if("YesNo"===e.data_type_name)return a.createElement(q.Z,{width:O.tq?"100%":"50%",key:n,style:{border:"0.5px dashed gray",padding:"10px"},fieldIcon:e.icon,isProcess:!0,visible:void 0!==(null===e||void 0===e?void 0:e.value)||e.visible,mandatory:!1,error:e.errors,customIconBgColor:"white",enabled:!1},a.createElement("div",{style:{display:"flex",justifyContent:"space-between",margin:"20px 0px"}},a.createElement("input",{id:"check-23",type:"checkbox",readOnly:!0,checked:!!Z}),a.createElement("label",null,e.field_name)));if("Upload"===e.data_type_name)return a.createElement(q.Z,{key:n,fieldLabel:e.field_name,fieldIcon:e.icon,isProcess:!0,visible:void 0!==Z||(null===(te=Z)||void 0===te?void 0:te.length)>0,mandatory:!1,error:e.errors,customIconBgColor:"white",style:{border:"0",marginRight:"10px"}},a.createElement("a",{key:n,href:Z,download:"Example-PDF-document",target:"_blank",rel:"noreferrer"},a.createElement(v.zx,{clear:!0,title:"Download File"})));if("Status"===e.data_type_name)return a.createElement(q.Z,{width:O.tq?"100%":"50%",key:n,style:{border:"0"},fieldLabel:e.field_name,fieldIcon:e.icon,isProcess:!0,visible:void 0!==(null===e||void 0===e?void 0:e.value)||e.visible,mandatory:!1,error:e.errors,customIconBgColor:"white",enabled:!1},a.createElement("input",{readOnly:!0,style:{pointerEvents:"none"},onChange:function(){},autoComplete:"none",value:null!==(oe=null===p||void 0===p?void 0:p.status)&&void 0!==oe?oe:null!==(le=null===e||void 0===e?void 0:e.value)&&void 0!==le?le:Z,className:w,name:e.field_name}));if("Dropdown"===e.data_type_name&&"modules"===e.options&&(Z=null===(ie=f.find((function(e){return e.id===Z})))||void 0===ie?void 0:ie.name),"Positions"===e.data_type_name&&(Z=null===y||void 0===y||null===(de=y.find((function(e){return e.value===Z})))||void 0===de?void 0:de.label),"People"===e.data_type_name)if(e.options.calendar){var ke,Ie,Ne=JSON.parse(null!==(ke=Z)&&void 0!==ke?ke:null!==(Ie=null===e||void 0===e?void 0:e.value)&&void 0!==Ie?Ie:JSON.stringify({})),Pe=s.find((function(e){return e.id===(null===Ne||void 0===Ne?void 0:Ne.user)}));if(Z=Pe?"".concat(Pe.first_name," ").concat(Pe.last_name):"",null!==Ne&&void 0!==Ne&&Ne.task){var De,Te=_.find((function(e){return e.id===Ne.task}));return a.createElement(q.Z,{enabled:!1,width:O.tq?"100%":"50%",key:n,style:{border:"0"},fieldLabel:e.field_name,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:!1,error:e.errors},a.createElement("div",{style:{display:"flex",flexDirection:"column",width:"inherit"}},a.createElement("input",{style:{pointerEvents:"none"},autoComplete:"none",value:Z,readOnly:!0,className:w,name:e.field_name}),Te&&a.createElement("input",{style:{pointerEvents:"none"},autoComplete:"none",value:null===Te||void 0===Te?void 0:Te.name,readOnly:!0,className:w,name:e.field_name}),Te&&a.createElement("input",{style:{pointerEvents:"none"},autoComplete:"none",value:W()(new Date(null===Te||void 0===Te||null===(De=Te.add_info)||void 0===De?void 0:De.start)).format("DD MMM YYYY h:mm a"),readOnly:!0,className:w,name:e.field_name}),(null===Te||void 0===Te?void 0:Te.status)&&a.createElement("input",{style:{pointerEvents:"none"},autoComplete:"none",value:null===Te||void 0===Te?void 0:Te.status,readOnly:!0,className:w,name:e.field_name})))}}else if(!Z){var Ae=s.find((function(n){return n.id===e.value}));Z=Ae?"".concat(Ae.first_name," ").concat(Ae.last_name):""}return"Video"===e.data_type_name&&(null===p||void 0===p?void 0:p.status)===(null!==(U=null===e||void 0===e||null===(R=e.options)||void 0===R?void 0:R.status)&&void 0!==U?U:"New")&&(null!==e&&void 0!==e&&e.value||Z)&&W()(null!==(ae=null===e||void 0===e?void 0:e.value)&&void 0!==ae?ae:Z)<=(0,V.now)()&&(0,V.now)()<W()(null!==(ue=null===e||void 0===e?void 0:e.value)&&void 0!==ue?ue:Z).add("minutes",+(null!==(re=null===e||void 0===e||null===(se=e.options)||void 0===se?void 0:se.expiry)&&void 0!==re?re:30))?a.createElement(q.Z,{width:"100%",key:n,style:{border:"1px dashed gray"},fieldLabel:e.field_name,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:!1,error:e.errors},a.createElement("div",{className:P,style:{display:"flex",justifyContent:"center",fontSize:"12px"}},a.createElement(H.Z,{payload:{name:p.id}}))):a.createElement(q.Z,{enabled:!1,width:O.tq?"100%":"50%",key:n,style:{border:"0"},fieldLabel:e.field_name,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:!1,error:e.errors},(null===(Y=Z)||void 0===Y?void 0:Y.length)>50?a.createElement("textarea",{readOnly:!0,className:x,style:{padding:"10px",pointerEvents:"none"},onFocus:function(){},required:!0,value:null===Z||void 0===Z?"":"Date"===e.data_type_name||"Video"===e.data_type_name?W()(new Date(Z)).format("DD MMM YYYY"):Z,onChange:function(e){}}):a.createElement("input",{readOnly:!0,style:{pointerEvents:"none"},onChange:function(){},autoComplete:"none",value:null===Z||void 0===Z?"":"Dropdown"===e.data_type_name&&"modules"===(null===(L=e.options)||void 0===L?void 0:L.type)?null===(F=f.find((function(n){return n.id===e.value})))||void 0===F?void 0:F.name:"Date"===e.data_type_name||"Video"===e.data_type_name?"Invalid date"===W()(new Date(Z)).format("DD MMM YYYY")?"":W()(new Date(Z)).format("DD MMM YYYY h:mm a"):Z,className:w,name:e.field_name}))}));return a.createElement("div",{className:k,style:{width:O.tq?"100%":""}},g)})),ee=function(e){var n,t,o=e.component,l=e.blueprintIndex,i=e.companyData,u=e.components,r=e.allComponents,s=e.companyUsersArray,c=e.selectedComponent,v=(0,b.pQ)(),p=(0,d.Z)(v,1)[0],m=(0,a.useState)(C),f=(0,d.Z)(m,1)[0],_=(0,a.useState)(""),y=(0,d.Z)(_,1)[0],h=(0,a.useRef)(null),g=null===(n=p.currentStep)||void 0===n?void 0:n.component_blueprints.findIndex((function(e){return e.id===o.id})),M=o.selected_fields.filter((function(e){return"Pin"===e.data_type_name||"Map"===e.data_type_name})).length>0;return a.createElement("div",{id:"accordion",className:Z,key:l},a.createElement("div",{className:R()(E,f),"app-variant-has-error":y?"error":"",style:O.tq?M?{padding:"0",border:"0"}:{border:"0"}:{}},!(M&&O.tq)&&a.createElement("p",{className:I},null===o||void 0===o?void 0:o.name),a.createElement("div",{ref:h,style:{maxHeight:f===C?"":"0px",display:"flex"},className:S},a.createElement($,{components:u,allComponents:r,component:o,handleInputChange:function(){},handlePrefixChange:function(){},handleCurrencyChange:function(){},checkIfAreMandatoryErrored:!1,handleCheckbox:function(){},isInherited:!1,indexInContextArray:g,handleLocationChange:function(){},processTaskContext:p,companyData:i,companyUsersArray:s,selectedComponent:c}))),y&&(null===y||void 0===y||null===(t=y.errors)||void 0===t?void 0:t.title)&&a.createElement(Y.Z,{message:y.errors.title}),y&&(null===y||void 0===y?void 0:y.message)&&a.createElement(Y.Z,{message:y.message}))},ne=function(e){var n,t,o=(0,a.useState)(!1),l=(0,d.Z)(o,2),i=l[0],u=l[1],r=e.component;return a.createElement("div",{className:E,style:{border:O.tq?"0":""}},a.createElement("div",{className:k,style:{width:(O.tq,"100%")}},a.createElement(q.Z,{width:O.tq?"100%":"50%",fieldLabel:"Created By",style:{border:"0"},isProcess:!0,visible:!0},a.createElement("input",{onClick:function(){return u(!i)},readOnly:!0,onChange:function(){},autoComplete:"none",value:"".concat(null===(n=r.created_by)||void 0===n?void 0:n.first_name," ").concat(null===(t=r.created_by)||void 0===t?void 0:t.last_name),className:w})),a.createElement(q.Z,{width:O.tq?"100%":"50%",fieldLabel:"Created Date",style:{border:"0"},isProcess:!0,visible:!0},a.createElement("input",{style:{pointerEvents:"none"},onChange:function(){},autoComplete:"none",value:W()(new Date(r.created_date)).format("DD MMM YYYY h:mm a"),className:w,name:"Created Date"})),a.createElement(q.Z,{width:O.tq?"100%":"50%",fieldLabel:"Transaction ID",style:{border:"0"},isProcess:!0,visible:i},a.createElement("input",{onChange:function(){},autoComplete:"none",value:r.id,className:w,name:"CID"}))))},te=function(e){var n,t,o,l=e.component;return a.createElement("div",{className:E,style:{border:O.tq?"0":"",display:l.payments?"":"none"}},a.createElement("div",{className:k,style:{width:(O.tq,"100%")}},a.createElement(q.Z,{width:O.tq?"100%":"50%",fieldLabel:"Payments",style:{border:"0"},isProcess:!0,visible:!0},a.createElement("input",{style:{pointerEvents:"none"},onChange:function(){},autoComplete:"none",value:"".concat(null===(n=l.payments)||void 0===n?void 0:n.stripe_product,", ID: ").concat(null===(t=l.payments)||void 0===t?void 0:t.stripe_id.substring(0,13)),className:w})),a.createElement(q.Z,{width:O.tq?"100%":"50%",fieldLabel:"Amount Paid",style:{border:"0"},isProcess:!0,visible:!0},a.createElement("input",{style:{pointerEvents:"none"},onChange:function(){},autoComplete:"none",value:"".concat(null===(o=l.payments)||void 0===o?void 0:o.stripe_price),className:w}))))},oe=function(e){var n,t,o,i,u,r=e.field,s=e.selectedComponent,c=e.companyUsersArray,v=e.component,p=function(e){var n,t,o,l,i,d,u,r,s,p,m,f,_,y,h,g,b,M=e.field,Z=(e.index,e.item);if("People"===(null===M||void 0===M?void 0:M.data_type_name)&&(null===M||void 0===M||null===(n=M.options)||void 0===n||null===(t=n.position_id)||void 0===t?void 0:t.length)>0){var E=c.find((function(e){return(null===M||void 0===M?void 0:M.value)==="".concat(e.first_name," ").concat(e.last_name)}));return a.createElement("div",{style:{display:"flex",justifyContent:"center"}},E&&a.createElement("div",{className:D},a.createElement("img",{alt:"lg",src:null===E||void 0===E?void 0:E.photo,className:T})))}if("Link"===(null===M||void 0===M?void 0:M.data_type_name)||"URL"===(null===M||void 0===M?void 0:M.data_type_name))return null!==M&&void 0!==M&&null!==(s=M.value)&&void 0!==s&&s.includes("jpg")||null!==M&&void 0!==M&&null!==(p=M.value)&&void 0!==p&&p.includes("jpeg")||null!==M&&void 0!==M&&null!==(m=M.value)&&void 0!==m&&m.includes("png")?a.createElement("div",{style:{display:"flex",justifyContent:"center"}},a.createElement("div",{className:D},a.createElement("img",{alt:"lg",src:null===M||void 0===M?void 0:M.value,className:T}))):a.createElement("div",null,null===M||void 0===M?void 0:M.value);if("date"===M.data_type||null!==M&&void 0!==M&&null!==(o=M.options)&&void 0!==o&&o.country_code||null!==M&&void 0!==M&&null!==(l=M.options)&&void 0!==l&&l.currency_type||"Number"===M.data_type_name)return"bar"===(null===M||void 0===M||null===(f=M.options)||void 0===f?void 0:f.display)?a.createElement("div",{className:w,style:{paddingLeft:"0px",border:"none",height:"auto"}},a.createElement("div",{style:{height:"30px",width:"100%",backgroundColor:null===M||void 0===M||null===(_=M.options)||void 0===_?void 0:_.maxC,display:"flex",flexDirection:"row",border:"none"}},a.createElement("input",{defaultValue:"",className:w,name:M.field_name,style:{color:"transparent",border:"none",height:"30px",width:"".concat(+(null===M||void 0===M?void 0:M.value)/+M.options.max*100,"%"),backgroundColor:null!==M&&void 0!==M&&M.value?"0"===(null===M||void 0===M?void 0:M.value)?"transparent":null===M||void 0===M||null===(y=M.options)||void 0===y?void 0:y.barC:"transparent"}}))):a.createElement("div",{style:{backgroundColor:null!==M&&void 0!==M&&null!==(h=M.options)&&void 0!==h&&h.valueC?null===M||void 0===M||null===(g=M.options)||void 0===g?void 0:g.valueC:""}},"date"===(null===M||void 0===M?void 0:M.data_type)?W()(M.value).format(null!==M&&void 0!==M&&null!==(b=M.options)&&void 0!==b&&b.time?"DD MMMM YYYY HH:mm":"DD MMMM YYYY"):null===M||void 0===M?void 0:M.value);if("Item Formula"===(null===M||void 0===M?void 0:M.data_type_name)&&(null===M||void 0===M||null===(i=M.options)||void 0===i||null===(d=i.operator)||void 0===d?void 0:d.length)>0){var C,S,x=(0,Q.LV)(null===M||void 0===M?void 0:M.options,v.selected_fields.filter((function(e){return M.options.list.includes(e.field_name)&&e.options.mapToItem})),[],[],Z,!0);return a.createElement("div",{style:{backgroundColor:null!==M&&void 0!==M&&null!==(C=M.options)&&void 0!==C&&C.valueC?null===M||void 0===M||null===(S=M.options)||void 0===S?void 0:S.valueC:""}},x)}return a.createElement("div",{style:{backgroundColor:null!==M&&void 0!==M&&null!==(u=M.options)&&void 0!==u&&u.valueC?null===M||void 0===M||null===(r=M.options)||void 0===r?void 0:r.valueC:""}},null===M||void 0===M?void 0:M.value)},m={item_code:null,quantity:null,value:null,alt_value:null,total:null},f=Object.entries(Object.assign(m,r.options.map)).reduce((function(e,n){var t=(0,d.Z)(n,2),o=t[0],l=t[1];return null===l||(e[o]=l),e}),{}),_=Object.entries(Object.assign(m,r.options.map)).reduce((function(e,n){var t=(0,d.Z)(n,2),o=t[0],l=t[1];return null===l||(e[o]=l),e}),{});Object.keys(f).map((function(e){var n;"item_code"===e?_.item_code="Totals:":"quantity"===e?_[e]="".concat(z.Z((function(n,t){var o;return null!==(o=+n+ +t[e])&&void 0!==o?o:0}),0,null!==(n=null===s||void 0===s?void 0:s.component_items)&&void 0!==n?n:[])):("alt_value"===e||"value"===e||"total"===e)&&(_[e]="")}));var y=null!==r&&void 0!==r&&null!==(n=r.options)&&void 0!==n&&n.group?null!==(t=null===v||void 0===v||null===(o=v.selected_fields)||void 0===o||null===(i=o.find((function(e){var n,t;return(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.mapToItem)===(null===r||void 0===r||null===(t=r.options)||void 0===t?void 0:t.groupL)&&"Dropdown"===e.data_type_name})))||void 0===i||null===(u=i.options)||void 0===u?void 0:u.list)&&void 0!==t?t:[]:[void 0];return a.createElement("div",{style:{width:"100%",border:"1px dashed gray",borderRadius:"10px",padding:"40px",fontFamily:"var(--app-text-main-font)",margin:"20px 0"}},a.createElement("p",{style:{fontSize:"20px",fontFamily:"var(--app-text-main-font)",fontWeight:"bold",color:"var(--app-color-gray-dark)"}},r.field_name),null===y||void 0===y?void 0:y.map((function(e,n){var t,o,i,d,u,c,m,f=null===(t=L.Z([F.Z(j.Z("index"))])(null!==(o=null===s||void 0===s||null===(i=s.component_items)||void 0===i?void 0:i.filter((function(n){var t;return n[null===r||void 0===r||null===(t=r.options)||void 0===t?void 0:t.groupL]===e})))&&void 0!==o?o:[]))||void 0===t?void 0:t.map((function(e,n){var t;e.index=n;var o={index:n};return null===v||void 0===v||null===(t=v.selected_fields)||void 0===t||t.filter((function(e){var n;return null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.mapToItem})).map((function(t){var i,d=(0,Q.sO)(e[t.options.mapToItem])?JSON.parse(null!==(i=e[t.options.mapToItem])&&void 0!==i?i:"{}")[t.field_name]:e[t.options.mapToItem];o[t.field_name]=a.createElement(p,{index:n,item:e,field:(0,l.Z)((0,l.Z)({},t),{},{visible:!0,value:null!==d&&void 0!==d?d:""})})})),o}));return a.createElement(a.Fragment,null,a.createElement(K.Z,{key:n,withColumns:0!==f.length,style:{width:"100%"},tableHostSimple:A,layeredColumns:null===(d=L.Z([F.Z(j.Z("index"))])(null===v||void 0===v?void 0:v.selected_fields))||void 0===d?void 0:d.filter((function(e){var n;return null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.mapToItem})).map((function(e){var n,t;return null!==(n=e.options)&&void 0!==n&&n.group?{label:null===(t=e.options)||void 0===t?void 0:t.group,subColumns:[{label:e.field_name}]}:{label:e.field_name}})).slice(0,O.tq?3:8),list:f,footer:null!==(u=r.options)&&void 0!==u&&u.footer?null===v||void 0===v||null===(c=v.selected_fields)||void 0===c?void 0:c.filter((function(e){var n;return null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.mapToItem})).map((function(e,n){var t,o;return null!==e&&void 0!==e&&null!==(t=e.options)&&void 0!==t&&t.footer?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0,t=arguments.length>2?arguments[2]:void 0;return 0==(null===e||void 0===e?void 0:e.length)?0:e.reduce((function(e,o){var l,i,d,a,u,r,s,c,v;if(null===o[null===n||void 0===n||null===(l=n.options)||void 0===l?void 0:l.mapToItem]||""===o[null===n||void 0===n||null===(i=n.options)||void 0===i?void 0:i.mapToItem])return e;var p=null!==(d=null!==t&&void 0!==t&&null!==(a=t.options)&&void 0!==a&&a.simple?JSON.parse(null!==(u=o[null===n||void 0===n||null===(r=n.options)||void 0===r?void 0:r.mapToItem])&&void 0!==u?u:"{}")[n.field_name]:o[null===n||void 0===n||null===(s=n.options)||void 0===s?void 0:s.mapToItem])&&void 0!==d?d:0;return"itemsum"===(null===n||void 0===n||null===(c=n.options)||void 0===c?void 0:c.footer)?e+ +(""===p?0:"".concat(p)):"itemdiff"===(null===n||void 0===n||null===(v=n.options)||void 0===v?void 0:v.footer)?e-+(""===p?0:"".concat(p)):0}),0)}(null!==r&&void 0!==r&&null!==(o=r.options)&&void 0!==o&&o.type?null===s||void 0===s?void 0:s.component_items.filter((function(e){var n;return e.type===(null===r||void 0===r||null===(n=r.options)||void 0===n?void 0:n.type)})):null===s||void 0===s?void 0:s.component_items,e,r):0===n?"Totals:":""})):[]},(null===r||void 0===r||null===(m=r.options)||void 0===m?void 0:m.group)&&a.createElement("p",{style:{fontSize:"16px",fontFamily:"var(--app-text-main-font)",fontWeight:"bold",color:"var(--app-color-gray-dark)"}},e)),0===f.length&&a.createElement("p",null,"No items found"))})))},le=t(51330),ie=t(48963),de=function(e){var n,t=e.component,o=e.isMandatoryError,l=e.nextButtonClicked,i=e.setIsMandatoryError,u=(0,b.pQ)(),s=(0,d.Z)(u,1)[0],c=(0,a.useState)(""),v=(0,d.Z)(c,1)[0],p=(0,a.useRef)(null);(0,a.useEffect)((function(){m()}),[l]);var m=function(){var e;null!==t&&void 0!==t&&null!==(e=t.selected_fields)&&void 0!==e&&e.some((function(e){var n;return!0===e.mandatory&&!0===e.visible&&(!e.value||(null===e||void 0===e||null===(n=e.value)||void 0===n?void 0:n.length)<1)}))?i(!0):i(!1)},f=function(e,n){var t,o;0==n?s.newProduct={name:e,product_code:null===s||void 0===s||null===(t=s.newProduct)||void 0===t?void 0:t.product_code}:s.newProduct={product_code:e,name:null===s||void 0===s||null===(o=s.newProduct)||void 0===o?void 0:o.name}};return a.createElement("div",{id:"accordion",className:ie.Z.section},a.createElement("div",{className:R()(ie.Z.accordionContainer,!0),"app-variant-has-error":v?"error":""},a.createElement("div",{style:{display:"flex"}},a.createElement("p",{className:ie.Z.title,style:{color:o&&l?"var(--app-color-error)":""}},"New Product Details")),a.createElement("div",{ref:p,style:{maxHeight:"",display:"flex",padding:"0px 0px 20px 0px"},className:ie.Z.content},a.createElement(q.Z,{fieldIcon:r.MQR,fieldLabel:"Product Name",isProcess:!0,visible:!0,mandatory:!0,customIconBgColor:"white"},a.createElement("div",{className:ie.Z.fieldRowContainer},a.createElement("input",{type:"text",onChange:function(e){f(e.target.value,0)},autoComplete:"none",className:ie.Z.fieldTypeInput,name:"field.field_name"}))),a.createElement("div",{style:{width:"10px"}}),a.createElement(q.Z,{fieldIcon:r.MQR,fieldLabel:"Product Code",isProcess:!0,visible:!0,mandatory:!0,customIconBgColor:"white"},a.createElement("div",{className:ie.Z.fieldRowContainer},a.createElement("input",{type:"text",onChange:function(e){f(e.target.value,1)},autoComplete:"none",className:ie.Z.fieldTypeInput,name:"field.field_name"}))))),v&&(null===v||void 0===v||null===(n=v.errors)||void 0===n?void 0:n.title)&&a.createElement(Y.Z,{message:v.errors.title}),v&&(null===v||void 0===v?void 0:v.message)&&a.createElement(Y.Z,{message:v.message}))},ae=t(41131),ue=t(40694),re=t(81330),se=t.n(re),ce=t(63864),ve="GeneralCard_userCard__0SOp0",pe="GeneralCard_userCardContainer__wJA5U",me="GeneralCard_userCardBottomContainer__0WoR6",fe="GeneralCard_fullName__QizQf",_e="GeneralCard_position__3X6Ea",ye="GeneralCard_email__U8cda",he=function(e){var n=e.cardClicked,t=e.title,o=e.subtitle,l=e.children,i=e.description,d=e.customClass,u=void 0===d?ve:d,r=e.customStyle;return a.createElement("div",{className:u,onClick:n,style:r},a.createElement("div",{className:pe},a.createElement("div",{className:me},a.createElement("p",{className:fe},t),a.createElement("p",{className:ye},i),a.createElement("p",{className:_e},o),l)))},ge=t(60761),be=t(29937),Me=t(4358),Ze=t(1542),Ee=t(49523),Ce=t(25403),Se=t(4292),we=t(9204),xe=t(32086),ke=t(53431),Ie=t(68218),Ne=t(84634),Pe=t(79544),De=t(62169),Te=t(88346),Ae=t(8284),qe=(t(67055),t(71901),t(95007)),Oe=t(87424),Ue=t(23280),Re=t(27658),Ye=t(75105),Be=t(51481),Le=t(41757),Fe=t(44408),je=t(23910),ze=t(46415);t(60940),t(56120),t(37704),t(72666),t(68623),t(3863),t(95361);e=t.hmd(e);var Ve=t(456);var We=(0,a.memo)((function(e){var n,t,o,i,r,s,c,p,f,_,y=e.step,g=e.isMandatoryError,b=e.nextButtonClicked,Z=e.setIsMandatoryError,E=e.begunModule,C=e.companyData,S=e.components,w=e.isEditing,x=e.companyUsersArray,k=e.setUsers,I=e.setPositions,N=void 0===I?function(){}:I,P=e.products,D=e.selectedComponent,T=e.goToNextStep,A=e.authenticatedUser,q=e.setIsCompleted,O=e.companyPositionsArray,U=(e.cart,e.blueprints),R=e.allModules,Y=e.usersArray,B=e.editMode,L=((0,M.WidthProvider)(M.Responsive),(0,a.useState)(null===(n=null===D||void 0===D?void 0:D.is_complete)||void 0===n||n)),F=(0,d.Z)(L,1)[0],j=[],z=a.createElement(ze.mQ,{style:{width:"100%",marginTop:"50px",minHeight:"100vh"}},a.createElement(ze.td,{style:{fontSize:"20px",fontWeight:"lightest",fontFamily:"var(--app-text-main-font)"}},null===y||void 0===y?void 0:y.component_blueprints.filter((function(e){return e.selected_fields.filter((function(e){return 1==e.visible})).length>0})).map((function(e,n){return a.createElement(ze.OK,{key:n},e.name)}))),(null===y||void 0===y||null===(t=y.component_blueprints)||void 0===t?void 0:t.length)>0?null===y||void 0===y?void 0:y.component_blueprints.filter((function(e){return e.selected_fields.filter((function(e){return 1==e.visible})).length>0})).map((function(e,n){var t=e.selected_fields.find((function(e){return"Template"===e.data_type_name&&1==e.visible})),o=e.selected_fields.find((function(e){return"Video"===e.data_type_name&&1==e.visible}));return t?a.createElement(ze.x4,{key:n},a.createElement(ae.ZP,{templateName:t.field_name,nextButtonClicked:b,isMandatoryError:g,blueprintIndex:n,setIsMandatoryError:Z,component:e,companyData:C,components:S,products:P,selectedComponent:D,component_blueprint:e,editMode:B,blueprints:U,allModules:R,authenticatedUser:A,companyUsersArray:x,companyPositionsArray:O,begunModule:E})):e.selected_fields.filter((function(e){return 1==e.visible})).length>0?a.createElement(ze.x4,{key:n,style:{margin:"30px 0 0 0"}},a.createElement(le.Z,{editMode:B,nextButtonClicked:b,isMandatoryError:g,blueprintIndex:n,setIsMandatoryError:Z,blueprints:U,component:e,companyData:C,components:S,allModules:R,products:P,authenticatedUser:A,selectedComponent:D,companyUsersArray:x,companyPositionsArray:O,begunModule:E}),(null===D||void 0===D?void 0:D.id)&&(null===o||void 0===o?void 0:o.value)&&W()(null===o||void 0===o?void 0:o.value)<=(0,V.now)()&&(0,V.now)()<W()(null===o||void 0===o?void 0:o.value).add("minutes",10)&&a.createElement(le.Z,{editMode:B,nextButtonClicked:b,isMandatoryError:g,blueprintIndex:n,setIsMandatoryError:Z,blueprints:U,component:(0,l.Z)((0,l.Z)({},e),{},{name:"Video Call",selected_fields:[(0,l.Z)((0,l.Z)({},o),{},{options:(0,l.Z)((0,l.Z)({},o.options),{},{start:!0})})]}),companyData:C,components:S,allModules:R,products:P,authenticatedUser:A,selectedComponent:D,companyUsersArray:x,companyPositionsArray:O,begunModule:E,shouldDisplay:!0,isEnabled:!0})):a.createElement(ze.x4,null)})):a.createElement(ze.x4,null)),G=(null===y||void 0===y||null===(o=y.component_blueprints)||void 0===o?void 0:o.length)>0?null===y||void 0===y?void 0:y.component_blueprints.map((function(e,n){var t=e.selected_fields.find((function(e){return"Template"===e.data_type_name&&1==e.visible})),o=e.selected_fields.find((function(e){return"Video"===e.data_type_name&&1==e.visible}));return t?a.createElement("div",{key:n},a.createElement(ae.ZP,{templateName:t.field_name,nextButtonClicked:b,isMandatoryError:g,blueprintIndex:n,setIsMandatoryError:Z,component:e,companyData:C,components:S,products:P,selectedComponent:D,component_blueprint:e,editMode:B,blueprints:U,allModules:R,authenticatedUser:A,companyUsersArray:x,companyPositionsArray:O,begunModule:E})):e.selected_fields.filter((function(e){return 1==e.visible})).length>0?a.createElement("div",{key:n,style:{margin:"30px 0 0 0"}},a.createElement(le.Z,{editMode:B,nextButtonClicked:b,isMandatoryError:g,blueprintIndex:n,setIsMandatoryError:Z,blueprints:U,component:e,companyData:C,components:S,allModules:R,products:P,authenticatedUser:A,selectedComponent:D,companyUsersArray:x,companyPositionsArray:O,begunModule:E}),(null===D||void 0===D?void 0:D.id)&&(null===o||void 0===o?void 0:o.value)&&W()(null===o||void 0===o?void 0:o.value)<=(0,V.now)()&&(0,V.now)()<W()(null===o||void 0===o?void 0:o.value).add("minutes",10)&&a.createElement(le.Z,{editMode:B,nextButtonClicked:b,isMandatoryError:g,blueprintIndex:n,setIsMandatoryError:Z,blueprints:U,component:(0,l.Z)((0,l.Z)({},e),{},{name:"Video Call",selected_fields:[(0,l.Z)((0,l.Z)({},o),{},{options:(0,l.Z)((0,l.Z)({},o.options),{},{start:!0})})]}),companyData:C,components:S,allModules:R,products:P,authenticatedUser:A,selectedComponent:D,companyUsersArray:x,companyPositionsArray:O,begunModule:E,shouldDisplay:!0,isEnabled:!0})):a.createElement(a.Fragment,null)})):a.createElement(a.Fragment,null),H=(0,a.useState)({currentBreakpoint:"lg",compactType:"vertical",mounted:!1,layouts:{lg:y.options.layout},editing:w}),J=(0,d.Z)(H,2),X=J[0],Q=J[1];return a.createElement("div",null,a.createElement(v.j3,{permissions:[v.po.processes.create]},a.createElement("button",{onClick:function(){j=X.layouts.lg.map((function(e){return(0,l.Z)((0,l.Z)({},e),{},{static:!1})})),Q((0,l.Z)((0,l.Z)({},X),{},{layouts:{lg:j},editing:!X.editing}))},hidden:!X.editing},"Edit Layout"),a.createElement("button",{onClick:function(){var e=j.map((function(e){return(0,l.Z)((0,l.Z)({},e),{},{static:!0})}));(0,m.T5)({options:(0,l.Z)((0,l.Z)({},y.options),{},{layout:e})},y.id,!0).pipe((0,h.P)()).subscribe({next:function(n){Q((0,l.Z)((0,l.Z)({},X),{},{layouts:{lg:e},editing:!X.editing}))},error:function(e){Q((0,l.Z)((0,l.Z)({},X),{},{layouts:{lg:y.options.layout},editing:!X.editing}))}})},hidden:!X.editing},"Save Layout")),null!==y&&void 0!==y&&null!==(i=y.options)&&void 0!==i&&i.tabbed?z:G,"product"===(null===(r=E.processModule.module)||void 0===r?void 0:r.options.outputTo)&&(null===y||void 0===y?void 0:y.is_end)&&a.createElement(de,{nextButtonClicked:b,isMandatoryError:g,setIsMandatoryError:Z,component:{}}),(null===(s=E.processModule.module)||void 0===s?void 0:s.options.forSpecificUsers)&&(null===y||void 0===y?void 0:y.is_end)&&function(){var e;return a.createElement(v.jL,{ungrouped:!0,ttitle:"Select users to share this item:",columned:!0,withAckButton:!1},a.createElement("p",{style:{fontFamily:"var(--app-text-main-font)",fontSize:"16px",fontWeight:"bold",color:"var(--app-color-gray-dark)"}},"Select users to share this item:"),a.createElement(Me.Cm,{style:{width:"50%"},id:"Users",tagEmplacement:"inlined",searchable:!1,items:Y,groupedBy:"department",groupname:"department",triggerType:"chevron",initialSelectedValues:null===D||void 0===D||null===(e=D.shared_users)||void 0===e?void 0:e.map((function(e){return Y.find((function(n){return n.value===e.id}))})),className:u.peoplePositionsSelect,inputClassName:u.peoplePositionsSelectInput,molclassname:u.peoplePositionsSelectMenuOverlay,moliclassname:u.peoplePositionsSelectMenuOverlayItem,onChange:function(e){e.length>0?(k(null===e||void 0===e?void 0:e.map((function(e){return null===e||void 0===e?void 0:e.value}))),null!==D&&void 0!==D&&D.id&&(D.shared_users=null===e||void 0===e?void 0:e.map((function(e){return{id:null===e||void 0===e?void 0:e.value}})))):k([])}}))}(),(null===(c=E.processModule.module)||void 0===c?void 0:c.options.forSpecificUsers)&&(null===y||void 0===y?void 0:y.is_end)&&function(){var e;return a.createElement(v.jL,{ungrouped:!0,columned:!0,withAckButton:!1},a.createElement("p",{style:{fontFamily:"var(--app-text-main-font)",fontSize:"16px",fontWeight:"bold",color:"var(--app-color-gray-dark)"}},"Select positions to share this item:"),a.createElement(Me.Cm,{style:{width:"50%"},id:"Positions",tagEmplacement:"inlined",searchable:!1,items:O,groupedBy:"department",groupname:"department",triggerType:"chevron",initialSelectedValues:null===D||void 0===D||null===(e=D.shared_positions)||void 0===e?void 0:e.map((function(e){return O.find((function(n){return n.value===e.id}))})),className:u.peoplePositionsSelect,inputClassName:u.peoplePositionsSelectInput,molclassname:u.peoplePositionsSelectMenuOverlay,moliclassname:u.peoplePositionsSelectMenuOverlayItem,onChange:function(e){e.length>0?(N(null===e||void 0===e?void 0:e.map((function(e){return null===e||void 0===e?void 0:e.value}))),null!==D&&void 0!==D&&D.id&&(D.shared_positions=null===e||void 0===e?void 0:e.map((function(e){return{id:null===e||void 0===e?void 0:e.value}})))):N([])}}))}(),(null===(p=E.processModule.module)||void 0===p?void 0:p.options.forSpecificUsers)&&(null===y||void 0===y?void 0:y.is_end)&&a.createElement("div",{style:{height:"200px"}}),(null===y||void 0===y?void 0:y.is_end)&&(void 0===(null===D||void 0===D?void 0:D.is_complete)||0==(null===D||void 0===D?void 0:D.is_complete))&&a.createElement("div",{className:u.emptyElementsSection,style:{width:"260px",padding:"0px 0px 0px 20px"}},a.createElement(v.pd,{id:"draft",title:"Save as draft?",ungrouped:!0,withAckButton:!1,style:{margin:"20px 2.5% 10px 5px",width:"auto",display:""},value:!F,toggleSelected:function(e){q(!e)}})),(null===y||void 0===y||null===(f=y.pathway_steps)||void 0===f?void 0:f.length)>0&&function(){var e=y.pathway_steps.map((function(e){return{label:"".concat(e.name),value:e.id}})),n=x.map((function(e){return{label:"".concat(e.first_name," ").concat(e.last_name),value:e.id}}));return a.createElement("div",{className:u.emptyElementsSection,style:{width:"60%",padding:"20px 20px 20px 20px",height:"".concat(n.length*n.length>4?70:200,"px")}},a.createElement(ce.Z,{visible:!0,mandatory:!1,items:e,onChange:function(e){T(e)},placeholder:"Continue to this step..."}))}(),(null===y||void 0===y||null===(_=y.pathway_processes)||void 0===_?void 0:_.length)>0&&function(){var e=y.pathway_processes.map((function(e){return{label:"".concat(e.name),value:e.id}})),n=x.map((function(e){return{label:"".concat(e.first_name," ").concat(e.last_name),value:e.id}}));return a.createElement("div",{className:u.emptyElementsSection,style:{width:"60%",padding:"20px 20px 20px 20px",height:"".concat(n.length*n.length>4?70:200,"px")}},a.createElement(ce.Z,{visible:!0,mandatory:!1,items:e,onChange:function(){},placeholder:"Continue to this process..."}))}(),e.children)})),Ge=function(e){var n,t,l,i,d,r,s=e.selectedComponent,c=e.companyPositionsArray,v=e.companyUsersArray;return a.createElement("div",null,((null===s||void 0===s||null===(n=s.shared_users)||void 0===n?void 0:n.length)>0||(null===s||void 0===s||null===(t=s.shared_positions)||void 0===t?void 0:t.length)>0)&&a.createElement("div",{className:u.accordionContainer},a.createElement("p",{className:u.cardTitle},"Shares"),a.createElement("div",{style:{display:"flex"}},(null===s||void 0===s||null===(l=s.shared_positions)||void 0===l?void 0:l.length)>0&&a.createElement(B.default,{className:u.sharesTable,columns:["Position"],list:null===s||void 0===s||null===(i=s.shared_positions)||void 0===i?void 0:i.map((function(e){var n=null===c||void 0===c?void 0:c.find((function(n){return n.value===e.id}));return(0,o.Z)({},"Position",null===n||void 0===n?void 0:n.label)}))}),(null===s||void 0===s||null===(d=s.shared_users)||void 0===d?void 0:d.length)>0&&a.createElement(B.default,{className:u.sharesTable,columns:["User"],list:null===s||void 0===s||null===(r=s.shared_users)||void 0===r?void 0:r.map((function(e){var n=null===v||void 0===v?void 0:v.find((function(n){return n.id===e.id}));return(0,o.Z)({},"User","".concat(null===n||void 0===n?void 0:n.first_name," ").concat(null===n||void 0===n?void 0:n.last_name))}))}))))},He=a.forwardRef((function(e,n){var t=e.begunModule,o=e.allModules,r=e.companyData,s=e.selectedComponent,c=e.companyUsersArray,v=e.companyPositionsArray,p=e.print,m=e.components,f=void 0===m?[]:m,_=e.bypassCustom,y=void 0!==_&&_,h=(0,a.useState)([]),g=(0,d.Z)(h,2),b=g[0],M=g[1],Z=function(){var e,n,o,i,d=null===t||void 0===t||null===(e=t.processModule)||void 0===e||null===(n=e.steps)||void 0===n?void 0:n.find((function(e){return e.component_blueprints.filter((function(e){var n,t;return(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.allowMultipleInputs)&&(null===(t=e.selected_fields)||void 0===t?void 0:t.find((function(e){return"Transaction List"===e.data_type_name})))})).length>0})),u=null===d||void 0===d||null===(o=d.component_blueprints)||void 0===o?void 0:o.find((function(e){var n;return(null===(n=e.selected_fields)||void 0===n?void 0:n.filter((function(e){return"Transaction List"===e.data_type_name&&!0===e.visible})).length)>0}));return u&&a.createElement(oe,{field:null===(i=u.selected_fields)||void 0===i?void 0:i.find((function(e){return"Transaction List"===e.data_type_name})),selectedComponent:s,companyUsersArray:c,component:(0,l.Z)((0,l.Z)({},u),{},{created_date:s.created_date,values:[]})})};return(0,a.useEffect)((function(){var d,m,_,h=[];if(Ie.Z(Ne.Z("group"))(null!==(d=null===s||void 0===s?void 0:s.component_fields)&&void 0!==d?d:[]).map((function(e){h=[].concat((0,i.Z)(h),[{id:e.component_blueprint_id,selected_fields:Te.Z(Ae.Z("group",e.group))(s.component_fields)}])})),(null===t||void 0===t||null===(m=t.processModule)||void 0===m||null===(_=m.completeSteps)||void 0===_?void 0:_.length)>0){var g,b,E,C,S,w,x,k,I,N,P=[a.createElement("div",{key:0,style:{display:null!==e&&void 0!==e&&e.noHeader?"none":"",height:"auto",padding:"20px"}},p&&(null!==r&&void 0!==r&&r.logo?a.createElement("img",{className:u.imageLogoPrint,alt:"lg",onError:function(e){return e.target.src="https://i.quotev.com/b2gtjqawaaaa.jpg"},src:null!==(g=null===r||void 0===r?void 0:r.logo)&&void 0!==g?g:"https://i.quotev.com/b2gtjqawaaaa.jpg"}):a.createElement("div",{style:{padding:"20px"}},(0,Q.lh)("30px","var(--app-color-gray-dark)","bold"),a.createElement("div",{style:{fontSize:"12px",fontWeight:"normal",fontFamily:"var(--app-text-main-font)"}},null===r||void 0===r||null===(b=r.display_name)||void 0===b?void 0:b.toUpperCase())))),Z()];if(t.processModule.completeSteps.map((function(e){e.component_blueprints.filter((function(e){var n,t;return 0==(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.asModuleList)||void 0==(null===e||void 0===e||null===(t=e.options)||void 0===t?void 0:t.asModuleList)})).map((function(n,d){var u,v,p,m,_,y,g=null!==(u=null===s||void 0===s||null===(v=s.component_fields)||void 0===v?void 0:v.filter((function(e){return e.component_blueprint_id===n.id})))&&void 0!==u?u:[];null===g||void 0===g||g.find((function(e){return!(""===e.value||void 0===e.value||null===e.value)}));(null===g||void 0===g?void 0:g.length)>0&&(null===(p=n.selected_fields)||void 0===p?void 0:p.filter((function(e){return 1==e.visible})).length)>0&&(P=null!==n.options?[].concat((0,i.Z)(P),[a.createElement("div",{key:P.length,style:{display:""}},a.createElement(ee,{step:e,isInherited:!1,nextButtonClicked:function(){},isMandatoryError:!1,stepId:e.id,blueprintIndex:d,setIsMandatoryError:function(){},component:(0,l.Z)((0,l.Z)({},n),{},{created_date:s.created_date,values:null!==(m=null===(_=h.find((function(e){return e.id===n.id})))||void 0===_?void 0:_.selected_fields)&&void 0!==m?m:[]}),begunModule:t,allModules:o,companyData:r,components:h,allComponents:f,companyUsersArray:c,selectedComponent:s}))]):[].concat((0,i.Z)(P),[a.createElement("div",{key:P.length},a.createElement(ee,{step:e,isInherited:!1,nextButtonClicked:function(){},isMandatoryError:!1,stepId:e.id,blueprintIndex:d,setIsMandatoryError:function(){},component:(0,l.Z)((0,l.Z)({},n),{},{created_date:s.created_date,values:null===(y=h.find((function(e){return e.id===n.id})))||void 0===y?void 0:y.selected_fields}),begunModule:t,allModules:o,companyData:r,components:h,allComponents:f,companyUsersArray:c,selectedComponent:s}))]))}))})),null!==t&&void 0!==t&&null!==(E=t.processModule)&&void 0!==E&&null!==(C=E.completeSteps)&&void 0!==C&&C.find((function(e){var n;return(null===(n=e.component_blueprints)||void 0===n?void 0:n.filter((function(e){return e.selected_fields.filter((function(e){return"Template"===e.data_type_name})).length>0})).length)>0&&0==y})))M(a.createElement(ae.C6,{ref:n,print:p,begunModule:t,allModules:o,companyData:r,components:f,selectedComponent:s,companyUsersArray:c,companyPositionsArray:v,payments:a.createElement(te,{component:s}),creator:a.createElement(ne,{component:s}),shares:(null===t||void 0===t||null===(S=t.processModule)||void 0===S||null===(w=S.module)||void 0===w||null===(x=w.options)||void 0===x?void 0:x.forSpecificUsers)&&a.createElement(Ge,{key:P.length+3,selectedComponent:s,companyUsersArray:c,companyPositionsArray:v})},P));else M([].concat((0,i.Z)(P),[a.createElement(te,{component:s,key:P.length+1}),a.createElement(ne,{component:s,key:P.length+2}),(null===t||void 0===t||null===(k=t.processModule)||void 0===k||null===(I=k.module)||void 0===I||null===(N=I.options)||void 0===N?void 0:N.forSpecificUsers)&&a.createElement(Ge,{key:P.length+3,selectedComponent:s,companyUsersArray:c,companyPositionsArray:v})]))}}),[s,p]),a.createElement("div",{ref:n,style:{padding:p?"50px 0px 50px 0px":"",alignSelf:"center",width:"100%"}},b)})),Je=(0,c.$j)((function(e){var n=e.flowReducer,t=n.begunModule,o=n.allModules,l=n.companyData,i=n.components,d=n.rememberPath,a=n.lastUpdates,u=n.companyUsersArray,r=n.products,s=n.transactions,c=n.companyProcesses,v=n.companyPositionsArray,p=n.cart,m=n.blueprints,f=n.allTasks,_=n.axiosAbort;return{begunModule:t,allModules:o,companyData:l,components:i,rememberPath:d,lastUpdates:a,companyUsersArray:u,products:r,transactions:s,companyProcesses:c,authenticatedUser:e.authReducer.authenticatedUser,companyPositionsArray:v,cart:p,blueprints:m,allTasks:f,axiosAbort:_}}),(function(e){return{onSetSelectedProcess:function(n){return e((0,y.Xu)(n))}}}))((function(n){var t,c,m,M,Z,E,C,S,w,x,k,I,N,P,D,T,A,q,U,R,z,G,H,K,$,ee,ne,te,oe,le,ie,de,ae,re,ve,pe,me,fe,_e,ye,ze,Ge,Je,Xe,Qe,Ke,$e,en,nn,tn,on,ln,dn,an,un,rn,sn,cn,vn,pn,mn,fn,_n,yn,hn,gn,bn,Mn,Zn,En,Cn,Sn,wn,xn,kn,In,Nn,Pn,Dn,Tn,An,qn,On,Un,Rn,Yn,Bn=n.navigateTo,Ln=n.begunModule,Fn=n.allModules,jn=n.companyData,zn=n.components,Vn=n.isEditing,Wn=n.lastUpdates,Gn=n.companyUsersArray,Hn=n.products,Jn=n.onSetSelectedProcess,Xn=n.children,Qn=n.authenticatedUser,Kn=n.companyPositionsArray,$n=n.cart,et=n.blueprints,nt=n.paymentID,tt=n.companyProcesses,ot=n.allTasks,lt=(n.axiosAbort,(0,a.useState)(1)),it=(0,d.Z)(lt,1)[0],dt=(0,a.useState)(!1),at=(0,d.Z)(dt,2),ut=at[0],rt=at[1],st=(0,a.useState)(!1),ct=(0,d.Z)(st,2),vt=ct[0],pt=ct[1],mt=(0,a.useState)(""),ft=(0,d.Z)(mt,2),_t=ft[0],yt=ft[1],ht=(0,a.useState)(!1),gt=(0,d.Z)(ht,2),bt=gt[0],Mt=gt[1],Zt=(0,b.pQ)(),Et=(0,d.Z)(Zt,2),Ct=Et[0],St=Et[1],wt=(0,a.useState)(!1),xt=(0,d.Z)(wt,2),kt=xt[0],It=xt[1],Nt=(0,a.useState)(1==(null===Ln||void 0===Ln||null===(t=Ln.processModule)||void 0===t?void 0:t.isUpdating)),Pt=(0,d.Z)(Nt,2),Dt=Pt[0],Tt=Pt[1],At=(0,a.useState)(null!==(c=null===Ln||void 0===Ln||null===(m=Ln.processModule)||void 0===m?void 0:m.selectedComponent)&&void 0!==c?c:{}),qt=(0,d.Z)(At,2),Ot=qt[0],Ut=qt[1],Rt=(0,a.useState)(null===(M=null===Ot||void 0===Ot?void 0:Ot.is_complete)||void 0===M||M),Yt=(0,d.Z)(Rt,2),Bt=Yt[0],Lt=Yt[1],Ft=(0,a.useState)([]),jt=(0,d.Z)(Ft,2),zt=jt[0],Vt=jt[1],Wt=(0,a.useState)([]),Gt=(0,d.Z)(Wt,2),Ht=Gt[0],Jt=Gt[1],Xt=(0,a.useState)(!1),Qt=(0,d.Z)(Xt,2),Kt=Qt[0],$t=Qt[1],eo=(0,a.useState)(!1),no=(0,d.Z)(eo,2),to=no[0],oo=no[1],lo=(0,a.useState)(!1),io=(0,d.Z)(lo,2),ao=io[0],uo=io[1],ro=(0,a.useState)(!1),so=(0,d.Z)(ro,2),co=so[0],vo=so[1],po=(0,a.useState)(!1),mo=(0,d.Z)(po,2),fo=mo[0],_o=mo[1],yo=(0,a.useState)(!1),ho=(0,d.Z)(yo,2),go=ho[0],bo=ho[1],Mo=(0,a.useState)(!1),Zo=(0,d.Z)(Mo,2),Eo=Zo[0],Co=Zo[1],So=(0,a.useState)(!1),wo=(0,d.Z)(So,2),xo=wo[0],ko=wo[1],Io=(0,a.useState)(!1),No=(0,d.Z)(Io,2),Po=No[0],Do=No[1],To=(0,a.useState)(!1),Ao=(0,d.Z)(To,2),qo=Ao[0],Oo=Ao[1],Uo=(0,a.useState)([]),Ro=(0,d.Z)(Uo,2),Yo=Ro[0],Bo=Ro[1],Lo=(0,a.useState)([]),Fo=(0,d.Z)(Lo,2),jo=Fo[0],zo=Fo[1],Vo=(0,a.useState)([]),Wo=(0,d.Z)(Vo,2),Go=Wo[0],Ho=Wo[1],Jo=(0,a.useState)({list:[],operator:"AND"}),Xo=(0,d.Z)(Jo,2),Qo=Xo[0],Ko=Xo[1],$o=(0,a.useState)([]),el=(0,d.Z)($o,2),nl=el[0],tl=el[1],ol=(0,a.useState)([]),ll=(0,d.Z)(ol,2),il=ll[0],dl=ll[1],al=(0,a.useState)(!1),ul=(0,d.Z)(al,2),rl=ul[0],sl=ul[1],cl=(0,a.useState)(!1),vl=(0,d.Z)(cl,2),pl=vl[0],ml=vl[1],fl=(0,a.useState)(!1),_l=(0,d.Z)(fl,2),yl=_l[0],hl=_l[1],gl=(0,a.useState)(!1),bl=(0,d.Z)(gl,2),Ml=bl[0],Zl=bl[1],El=(0,a.useState)("false"!==localStorage.getItem("showAds")&&(null!==(Z=W()(+localStorage.getItem("showAdsDate")).format("DD MMM YYYY")!==W()((0,V.now)()).format("DD MMM YYYY"))&&void 0!==Z&&Z)),Cl=(0,d.Z)(El,2),Sl=Cl[0],wl=Cl[1],xl=(0,a.useState)(1),kl=(0,d.Z)(xl,2),Il=(kl[0],kl[1],(0,Ue.s0)()),Nl=(null===Ln||void 0===Ln||null===(E=Ln.processModule)||void 0===E||null===(C=E.steps)||void 0===C?void 0:C.length)>0?null===Ln||void 0===Ln||null===(S=Ln.processModule)||void 0===S?void 0:S.steps[Ln.processModule.stepIndex]:{},Pl=(null===Ln||void 0===Ln||null===(w=Ln.processModule)||void 0===w||null===(x=w.steps)||void 0===x?void 0:x.length)>0?null===(k=Ln.processModule.steps[Ln.processModule.stepIndex])||void 0===k?void 0:k.pathway_steps:[],Dl=(null===Ln||void 0===Ln||null===(I=Ln.processModule)||void 0===I||null===(N=I.steps)||void 0===N?void 0:N.length)>0?null===(P=Ln.processModule.steps[Ln.processModule.stepIndex])||void 0===P?void 0:P.pathway_processes:[],Tl=(0,a.useRef)();(0,a.useEffect)((function(){var e=Gn.filter((function(e){return 0==e.departments.length})).map((function(e){return{label:"".concat(e.first_name," ").concat(e.last_name),value:e.id,department:"General",user:e}}));Gn.filter((function(e){return e.departments.length>0})).filter((function(n){n.departments.filter((function(t){e=[].concat((0,i.Z)(e),[{label:"".concat(n.first_name," ").concat(n.last_name),value:n.id,department:null===t||void 0===t?void 0:t.name,user:n}])}))})),tl(e)}),[Gn]),(0,a.useEffect)((function(){var e,n;if((null===Ln||void 0===Ln||null===(e=Ln.processModule)||void 0===e||null===(n=e.steps)||void 0===n?void 0:n.length)>0&&!qo){var t,o;Ko({list:[],operator:"AND"}),void 0!==(null===Bn||void 0===Bn?void 0:Bn.key)?Bo(Fl(null===Ln||void 0===Ln||null===(t=Ln.processModule)||void 0===t||null===(o=t.module)||void 0===o?void 0:o.id,zn,Bn.value,Bn.key)):Bo(zn.filter((function(e){var n,t;return e.module_id===(null===Ln||void 0===Ln||null===(n=Ln.processModule)||void 0===n||null===(t=n.module)||void 0===t?void 0:t.id)})));var l={id:""},i=[],d=[];we.Z((function(e){e.component_fields.map((function(n){var t,o;e.procedure_id!==(null===Ve||void 0===Ve?void 0:Ve.id)&&(null!==(t=l=tt.find((function(n){return n.id===e.procedure_id})))&&void 0!==t&&t.steps&&(i=Ee.Z(Ce.Z("component_blueprints"),Se.Z)(null===(o=l)||void 0===o?void 0:o.steps),d=Ee.Z(Ce.Z("selected_fields"),Se.Z)(i)));var a,u=d.find((function(e){return e.procedure_step_blueprint_field_id===n.procedure_step_blueprint_field_id}));u&&(n.data_type_name=u.data_type_name,n.data_type=u.data_type,n.field_name=u.field_name,n.options=u.options,n.component_blueprint_id=null===(a=i.find((function(e){return e.selected_fields.filter((function(e){return e.procedure_step_blueprint_field_id===n.procedure_step_blueprint_field_id})).length>0})))||void 0===a?void 0:a.id)}))}),zn.filter((function(e){var n;return(null!==(n=null===e||void 0===e?void 0:e.component_fields)&&void 0!==n?n:[]).filter((function(e){return void 0===(null===e||void 0===e?void 0:e.field_name)})).length>0})))}}),[null===Ln||void 0===Ln||null===(D=Ln.processModule)||void 0===D?void 0:D.steps,zn]),(0,a.useEffect)((function(){if(nt){var e,n=null===(e=Ot.component_fields)||void 0===e?void 0:e.find((function(e){return"Payments"===e.data_type_name}));if(n){var t,o,l,i,d,a=null===(t=Ot.component_fields)||void 0===t?void 0:t.find((function(e){return e.field_name===n.options.paymentField}));if(a)oo(!0),(0,Re.e_)({user_id:Qn.id,id:Ot.id,total:null!==(o=+(null===a||void 0===a?void 0:a.value))&&void 0!==o?o:0,product:"CR-".concat(null!==(l=null===Ot||void 0===Ot?void 0:Ot.title)&&void 0!==l?l:null===Ln||void 0===Ln||null===(i=Ln.processModule)||void 0===i||null===(d=i.module)||void 0===d?void 0:d.name),notes:"E-Payment",quantity:1}).pipe((0,h.P)()).subscribe({next:function(){var e,n,t,o;oo(!1),Do((null===Ln||void 0===Ln||null===(e=Ln.processModule)||void 0===e||null===(n=e.module)||void 0===n||null===(t=n.options)||void 0===t||null===(o=t.message)||void 0===o?void 0:o.length)>0)}})}}}),[nt]),(0,a.useEffect)((function(){var e,n,t,o;(null===Ln||void 0===Ln||null===(e=Ln.processModule)||void 0===e||null===(n=e.steps)||void 0===n?void 0:n.length)>0&&!qo&&(void 0!==Bn.key||""!==Bn.key)&&Bo(Fl(null===Ln||void 0===Ln||null===(t=Ln.processModule)||void 0===t||null===(o=t.module)||void 0===o?void 0:o.id,zn,Bn.value))}),[Bn]),(0,a.useEffect)((function(){localStorage.getItem("transaction")&&!kt&&localStorage.getItem("transaction")===Ot.id&&hl(!0)}),[Ot,kt]);var Al=(0,a.useCallback)((function(){var e=!1;return Nl.component_blueprints.filter((function(e){var n,t;return null===e.options||(!1===(null===(n=e.options)||void 0===n?void 0:n.allowMultipleInputs)||void 0===(null===(t=e.options)||void 0===t?void 0:t.allowMultipleInputs))})).some((function(e){var n;return!0===(null===(n=e.selected_fields)||void 0===n?void 0:n.filter((function(e){return"Profile"!==e.data_type_name&&"ID"!==e.data_type_name&&"Info"!==e.data_type_name&&"Notes"!==e.data_type_name&&"URL"!==e.data_type_name&&"Emails"!==e.data_type_name&&"Template"!==e.data_type_name&&"Global"!==e.data_type_name&&"Chart"!==e.data_type_name&&"Value"!==e.data_type_name})).some((function(e){var n;return!0===e.mandatory&&!0===e.visible&&(!e.value||(null===e||void 0===e||null===(n=e.value)||void 0===n?void 0:n.length)<1)})))}))&&(e=!0),!0===e?(pt(!0),!0):(yt(""),pt(!1),!1)}),[Nl]),ql=function(e){Mt(!0),Al()&&!1===Dt?Ll():Ul(e)},Ol=function(e){Ct.components=[],Ct.items=[],Ct.currentStep={},Ct.newStepComponents=[],Ln.processModule.steps.filter((function(e){return e.component_blueprints.filter((function(e){return e.selected_fields.filter((function(e){return e.value=void 0}))}))})),Ln.processModule.isUpdating=!1,_.h.dispatch((0,y.wM)({routes:{},pins:""})),Tt(!1),It(!1),Mt(!0),Ul(e),jn.start=!1,(0,f.aK)().pipe((0,h.P)()).subscribe({next:function(){}})},Ul=function(e){Mt(!1),pt(!1),rt(!1);var n={};if(void 0===e){if(void 0===(n=Ln.processModule.steps[Ln.processModule.stepIndex+1]))return void _.h.dispatch((0,y.Xc)({show:!0,message:"Misconfigured next step, please contact your administrator",color:"red",bottom:!0}));St({action:b._U.setCurrentStep,value:n}),_.h.dispatch((0,y.q4)((0,l.Z)((0,l.Z)({},Ln.processModule),{},{stepIndex:Ln.processModule.stepIndex+1})))}else{if(void 0==(n=Ln.processModule.steps.find((function(n){return n.id===e}))))n=Ln.processModule.steps[Ln.processModule.stepIndex+1],_.h.dispatch((0,y.q4)((0,l.Z)((0,l.Z)({},Ln.processModule),{},{stepIndex:Ln.processModule.stepIndex+1})));else{var t,o,d=Ln.processModule.steps[(null===(t=n)||void 0===t?void 0:t.rank)-1];if(void 0===d)return void _.h.dispatch((0,y.Xc)({show:!0,message:"Misconfigured next step, please contact your administrator",color:"red",bottom:!0}));_.h.dispatch((0,y.q4)((0,l.Z)((0,l.Z)({},Ln.processModule),{},{stepIndex:(null===(o=n)||void 0===o?void 0:o.rank)-1})))}St({action:b._U.setCurrentStep,value:n})}var a=Ct.newStepComponents.filter((function(e){return null===e.options||(void 0===e.allowMultipleInputs||!1===e.options.allowMultipleInputs)}));St({action:b._U.setComponents,value:[].concat((0,i.Z)(Ct.components.filter((function(e){return a.every((function(n){return n.id!==e.id}))}))),(0,i.Z)(xe.Z((function(e){return e.selected_fields.filter((function(e){return""===e.value})).length>0}),a)))}),St({action:b._U.setModuleNewStepComponents,value:n.component_blueprints.filter((function(e){return e.selected_fields.filter((function(e){return"Status"===e.data_type_name||"ID"===e.data_type_name||"Value"===e.data_type_name})).length>0}))})},Rl=function(){St({action:b._U.setModuleItems,value:[]}),St({action:b._U.setComponents,value:[]}),St({action:b._U.addModuleComponents,value:[]}),St({action:b._U.setModuleNewStepComponents,value:[]}),Ol(Ln.processModule.steps[0].id)},Yl=function(){var e,n,t,o,d,a,u,r,s,c,v,m,f;if(Al())return yt("Fill up all the required fields"),window.scrollTo({top:0,behavior:"smooth"}),void rt(!1);var g,b,M=Ct.newStepComponents.filter((function(e){var n,t;return null===e.options||(!1===(null===(n=e.options)||void 0===n?void 0:n.allowMultipleInputs)||void 0===(null===(t=e.options)||void 0===t?void 0:t.allowMultipleInputs))})),Z=[].concat((0,i.Z)(Ct.components.filter((function(e){return M.every((function(n){return n.id!==e.id}))}))),(0,i.Z)(xe.Z((function(e){return e.selected_fields.filter((function(e){return""===e.value})).length>0}),M))),E=[],C=[],S="",w="",x=!1,k=Dt?null===Ot||void 0===Ot?void 0:Ot.status:"None",I=[],N=null===Ot||void 0===Ot?void 0:Ot.status,P={},D=Dt?(null!==(e=ke.Z(Math.max,Ce.Z("group",Ie.Z(Ne.Z("group"))(null!==(n=null===Ot||void 0===Ot?void 0:Ot.component_fields)&&void 0!==n?n:[]))))&&void 0!==e?e:-1)+1:0;Z.map((function(e,n){var t,o,d=n,a=null===(t=e.selected_fields.filter((function(e){return"Record"===e.data_type_name||"Filters"===e.data_type_name})))||void 0===t?void 0:t.find((function(e){return+(null===e||void 0===e?void 0:e.group)>=0}));a&&Dt?d=a.group:Dt&&(d=D,D++),e.selected_fields.filter((function(e){return("Record"===e.data_type_name||"Filters"===e.data_type_name)&&!0===e.visible})).map((function(e,n){var t;if(null!==e.value&&void 0!==e.value&&1!=(null===(t=e.options)||void 0===t?void 0:t.skip)){var o,a;C=[].concat((0,i.Z)(C),[(0,l.Z)((0,l.Z)({},e),{},{index:n,group:d})]),S=e.value,P[e.field_name]=e.value;var u=null===(o=zn.find((function(n){return n.component_fields.filter((function(n){var t;return n.component_blueprint_id===(null===e||void 0===e||null===(t=e.options)||void 0===t?void 0:t.component_id)&&(null===n||void 0===n?void 0:n.value)===S})).length>0})))||void 0===o||null===(a=o.component_fields.find((function(e){return"Email Recipient"===e.data_type_name})))||void 0===a?void 0:a.value;u&&(g=u)}}));var u=null===(o=e.selected_fields.filter((function(e){return!("Record"===e.data_type_name||"Filters"===e.data_type_name)})))||void 0===o?void 0:o.find((function(e){return+(null===e||void 0===e?void 0:e.group)>=0}));u&&Dt?d=u.group:Dt&&(d=D,D++),e.selected_fields.filter((function(e){return!("Record"===e.data_type_name||"Filters"===e.data_type_name||"Module"===e.data_type_name)})).map((function(e,n){var t,o,a,u;if(null!==e.value&&void 0!==e.value&&1!=(null===(t=e.options)||void 0===t?void 0:t.skip)){if(P[e.field_name]=e.value,"ID"===(null===e||void 0===e?void 0:e.data_type_name))null!==Ln&&void 0!==Ln&&null!==(a=Ln.processModule)&&void 0!==a&&a.isUpdating?C=[].concat((0,i.Z)(C),[(0,l.Z)((0,l.Z)({},e),{},{index:n,group:d})]):(C=[].concat((0,i.Z)(C),[(0,l.Z)((0,l.Z)({},e),{},{index:n,group:d,value:"".concat(null===e||void 0===e?void 0:e.options.id).concat(null===(null===jn||void 0===jn?void 0:jn.misc_info)?1:null!==(u=null===jn||void 0===jn?void 0:jn.misc_info[null===e||void 0===e?void 0:e.field_name])&&void 0!==u?u:1)})]),E=[].concat((0,i.Z)(E),["".concat(e.field_name)]));else if("Value"===(null===e||void 0===e?void 0:e.data_type_name)){var r;C=[].concat((0,i.Z)(C),[(0,l.Z)((0,l.Z)({},e),{},{index:n,value:null===e||void 0===e||null===(r=e.options)||void 0===r?void 0:r.value,group:d})])}else if("Email Recipient"===(null===e||void 0===e?void 0:e.data_type_name))C=[].concat((0,i.Z)(C),[(0,l.Z)((0,l.Z)({},e),{},{index:n,value:e.value.replace(/ /g,""),group:d})]);else if("Product Lookup"===e.data_type_name)C=(0,i.Z)(C);else if("Status"===e.data_type_name&&"Draft"===e.value&&1==Bt)x=!0,C=[].concat((0,i.Z)(C),[(0,l.Z)((0,l.Z)({},e),{},{index:n,value:"New",group:d})]),k="New";else if("Status"===e.data_type_name)C=[].concat((0,i.Z)(C),[(0,l.Z)((0,l.Z)({},e),{},{index:n,value:null===e||void 0===e?void 0:e.value,group:d})]),k=null===e||void 0===e?void 0:e.value;else if("Positions"===e.data_type_name&&!0===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.share))C=[].concat((0,i.Z)(C),[(0,l.Z)((0,l.Z)({},e),{},{index:n,value:null===e||void 0===e?void 0:e.value,group:d})]),I=[null===e||void 0===e?void 0:e.value];else if("Formula"===e.data_type_name){var s,c=null!==Ln&&void 0!==Ln&&null!==(s=Ln.processModule)&&void 0!==s&&s.isUpdating?(0,Q.LV)(null===e||void 0===e?void 0:e.options,Ot.component_fields.filter((function(n){var t;return null===(t=e.options)||void 0===t?void 0:t.list.includes(n.field_name)})),Z,Ct.items):e.value;C=[].concat((0,i.Z)(C),[(0,l.Z)((0,l.Z)({},e),{},{index:n,value:c.toString(),group:d})])}else if("output"!==e.data_type){var v,p,m,f;if("People"===e.data_type_name){var _,y,h,M;if(!0===(null===(_=e.options)||void 0===_?void 0:_.email)){var S,N,D=null===(S=nl.find((function(n){return n.label===(null===e||void 0===e?void 0:e.value)})))||void 0===S||null===(N=S.user)||void 0===N?void 0:N.email;w=D?w.concat(w.length>0?",".concat(D):D):w,e.email=void 0}if(!0===(null===(y=e.options)||void 0===y?void 0:y.assign))b=null===(h=nl.find((function(n){return n.label===(null===e||void 0===e?void 0:e.value)})))||void 0===h||null===(M=h.user)||void 0===M?void 0:M.id,Dt&&(Ot.assigned_to={id:b})}"email"===(null===e||void 0===e||null===(v=e.options)||void 0===v?void 0:v.actionToPerform2)&&null!==e&&void 0!==e&&null!==(p=e.options)&&void 0!==p&&null!==(m=p.valueToMatch2)&&void 0!==m&&null!==(f=m.split(","))&&void 0!==f&&f.includes(null===e||void 0===e?void 0:e.value)&&g&&(x=!0,w=w.concat(w.length>0?",".concat(g):g)),C=[].concat((0,i.Z)(C),[(0,l.Z)((0,l.Z)({},e),{},{index:n,group:d})])}}else if("Status"===(null===e||void 0===e?void 0:e.data_type_name))1==Bt?(C=[].concat((0,i.Z)(C),[(0,l.Z)((0,l.Z)({},e),{},{index:n,value:"New",group:d})]),k="New"):(C=[].concat((0,i.Z)(C),[(0,l.Z)((0,l.Z)({},e),{},{index:n,value:"Draft",group:d})]),k="Draft"),P[e.field_name]=e.value;else if("Action Button"===(null===e||void 0===e?void 0:e.data_type_name)){var T,A,q;C=(0,i.Z)(C),P[e.field_name]=e.value,"status"===(null===e||void 0===e||null===(T=e.options)||void 0===T?void 0:T.action)?k=e.value:"user"!==(null===(A=e.options)||void 0===A?void 0:A.action)&&"creator"!==(null===(q=e.options)||void 0===q?void 0:q.action)||(Ot.assigned_to=null===e||void 0===e?void 0:e.value)}}))}));var T,A,q,O,U,R,Y,B,L,F,j,z,V,G,H,J,X="";(null===(t=Ln.processModule)||void 0===t||null===(o=t.module)||void 0===o||null===(d=o.options)||void 0===d||null===(a=d.title)||void 0===a?void 0:a.length)>0?(null===(T=Ln.processModule)||void 0===T||null===(A=T.module)||void 0===A||null===(q=A.options)||void 0===q||null===(O=q.title)||void 0===O||O.map((function(e){if("Info"!==e){var n,t,o,l,i=C.find((function(n){return n.field_name===e}));if("Date"===(null===i||void 0===i?void 0:i.data_type_name)||"Calendar"===(null===i||void 0===i?void 0:i.data_type_name))X=""===X?"".concat(W()(null===i||void 0===i?void 0:i.value).format("DD MMMM YYYY")):"".concat(null!==(n=X)&&void 0!==n?n:"","  ").concat(W()(null===i||void 0===i?void 0:i.value).format("DD MMMM YYYY"));else X=""===X?"".concat(null!==(t=null===i||void 0===i?void 0:i.value)&&void 0!==t?t:""):"".concat(null!==(o=X)&&void 0!==o?o:"","  ").concat(null!==(l=null===i||void 0===i?void 0:i.value)&&void 0!==l?l:"")}else{var d=Ln.processModule.steps.find((function(e){var n;return(null===(n=e.component_blueprints.filter((function(e){var n;return(null===(n=e.selected_fields.filter((function(e){return"Info"===e.data_type_name})))||void 0===n?void 0:n.length)>0})))||void 0===n?void 0:n.length)>0}));if(void 0!==d){var a,u,r,s,c,v,p,m,f,_=null===(a=d.component_blueprints)||void 0===a||null===(u=a.find((function(e){var n;return(null===(n=e.selected_fields.filter((function(e){return"Info"===e.data_type_name})))||void 0===n?void 0:n.length)>0})).selected_fields)||void 0===u?void 0:u.find((function(e){return"Info"===e.data_type_name})),y=zn.find((function(e){var n;return(null===(n=e.component_fields.filter((function(e){var n;return e.component_blueprint_id===_.options.component_id&&(e.value===P[_.field_name]||e.value===P[null===(n=_.options)||void 0===n?void 0:n.key])})))||void 0===n?void 0:n.length)>0}));if(y)if((null===_||void 0===_||null===(r=_.options)||void 0===r||null===(s=r.list)||void 0===s?void 0:s.length)>0)X=""===X?"".concat(null!==(c=null===(v=y.component_fields.find((function(e){var n;return e.field_name===(null===_||void 0===_||null===(n=_.options)||void 0===n?void 0:n.list[0])})))||void 0===v?void 0:v.value)&&void 0!==c?c:""):"".concat(null!==(p=X)&&void 0!==p?p:"","  ").concat(null!==(m=null===(f=y.component_fields.find((function(e){var n;return e.field_name===(null===_||void 0===_||null===(n=_.options)||void 0===n?void 0:n.list[0])})))||void 0===f?void 0:f.value)&&void 0!==m?m:"")}}})),null!==(U=Ln.processModule)&&void 0!==U&&null!==(R=U.module)&&void 0!==R&&null!==(Y=R.options)&&void 0!==Y&&Y.title.find((function(e){return"UUID"===e}))&&(X="".concat(Dt?Ot.id:(0,Q.mR)())),null!==(B=Ln.processModule)&&void 0!==B&&null!==(L=B.module)&&void 0!==L&&null!==(F=L.options)&&void 0!==F&&F.title.find((function(e){return"Module Name"===e}))&&(X=" ".concat(null===(j=Ln.processModule)||void 0===j||null===(z=j.module)||void 0===z?void 0:z.name," - ").concat(null!==(V=X)&&void 0!==V?V:""))):X=Dt?Ot.id:(0,Q.mR)();var K,$,ee,ne,te,oe,le,ie,de,ae,ue,re,se,ce,ve,pe,me,fe,_e,ye,he,ge={};if(!0===(null===(u=Ln.processModule)||void 0===u||null===(r=u.module)||void 0===r||null===(s=r.options)||void 0===s?void 0:s.emailOutputs)){var be,Me,Ze,Ee,Se=Ln.processModule.steps.find((function(e){var n;return(null===(n=e.component_blueprints.filter((function(e){var n;return(null===(n=e.selected_fields.filter((function(e){return"Info"===e.data_type_name&&1==e.options.email})))||void 0===n?void 0:n.length)>0})))||void 0===n?void 0:n.length)>0}));if(void 0!==Se){var we,Pe,De=null===(we=Se.component_blueprints)||void 0===we||null===(Pe=we.find((function(e){var n;return(null===(n=e.selected_fields.filter((function(e){var n;return"Info"===e.data_type_name&&1==(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.email)})))||void 0===n?void 0:n.length)>0})).selected_fields)||void 0===Pe?void 0:Pe.find((function(e){var n;return"Info"===e.data_type_name&&!0===(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.email)})),Te=zn.find((function(e){var n;return(null===(n=e.component_fields.filter((function(e){return e.component_blueprint_id===De.options.component_id&&e.value===S})))||void 0===n?void 0:n.length)>0}));Te&&(H=De.id,G=Te.id)}if(void 0!==(Se=Ln.processModule.steps.find((function(e){var n;return!0===e.is_end&&(null===(n=e.component_blueprints.filter((function(e){var n;return(null===(n=e.selected_fields.filter((function(e){return"Emails"===e.data_type_name})))||void 0===n?void 0:n.length)>0})))||void 0===n?void 0:n.length)>0}))))(null===(Ze=Se.component_blueprints)||void 0===Ze?void 0:Ze.find((function(e){var n;return(null===(n=e.selected_fields.filter((function(e){return"Emails"===e.data_type_name})))||void 0===n?void 0:n.length)>0}))).selected_fields.filter((function(e){return"Emails"===e.data_type_name})).filter((function(e){var n;C.find((function(n){return n.value===e.options.valueToMatch&&n.field_name===e.options.fieldToMatch}))&&(g&&(J=e,x=!0,!0===(null===(n=e.options)||void 0===n?void 0:n.copyEmailRecip)&&(w=w.concat(w.length>0?",".concat(g):g))))}));if(w=""===w?[]:null!==(be=w.split(","))&&void 0!==be?be:[],(il.length>0||w.length>0)&&(w=Dt?!0===x?[].concat((0,i.Z)(il),(0,i.Z)(w)):(0,i.Z)(il):[].concat((0,i.Z)(il),(0,i.Z)(w))),w.length>0&&(ge={emailTo:w}),H&&G&&(ge=(0,l.Z)((0,l.Z)({},ge),{},{info:H,target:G})),(null===(Me=J)||void 0===Me?void 0:Me.id.length)>0)ge=(0,l.Z)((0,l.Z)({},ge),{},{template:null===(Ee=J)||void 0===Ee?void 0:Ee.id})}if(!0===(null===(c=Ln.processModule)||void 0===c||null===(v=c.module)||void 0===v||null===(m=v.options)||void 0===m?void 0:m.rewards)&&N!==k){var Ae,qe,Oe,Ue,Le,Fe,je=Ln.processModule.steps.find((function(e){var n;return(null===(n=e.component_blueprints.filter((function(e){var n;return(null===(n=e.selected_fields.filter((function(e){return"Rewards"===e.data_type_name})))||void 0===n?void 0:n.length)>0})))||void 0===n?void 0:n.length)>0}));if(void 0!==je)if((K=null===(Ae=je.component_blueprints)||void 0===Ae||null===(qe=Ae.find((function(e){var n;return(null===(n=e.selected_fields.filter((function(e){return"Rewards"===e.data_type_name})))||void 0===n?void 0:n.length)>0})).selected_fields)||void 0===qe?void 0:qe.find((function(e){return"Rewards"===e.data_type_name}))).options.status===k)Qn.options.rewards=+(null!==(Oe=null===Qn||void 0===Qn||null===(Ue=Qn.options)||void 0===Ue?void 0:Ue.rewards)&&void 0!==Oe?Oe:0)+ +(null===(Le=K)||void 0===Le||null===(Fe=Le.options)||void 0===Fe?void 0:Fe.points)}(null===(f=C)||void 0===f?void 0:f.length)>0?(oo(!0),Dt?(Ot.options=ge,Ot.status=k,null!==Ct&&void 0!==Ct&&Ct.assigned_to&&(Ot.assigned_to={id:null===Ct||void 0===Ct?void 0:Ct.assigned_to}),(0,p.KL)((0,l.Z)((0,l.Z)({},Ot),{},{selected_fields:(0,i.Z)(C),component_items:Ct.items}),Ot.id,null===Ot||void 0===Ot||null===($=Ot.shared_users)||void 0===$?void 0:$.map((function(e){return null===e||void 0===e?void 0:e.id})),X,Bt,(null===(ee=Ln.processModule)||void 0===ee||null===(ne=ee.module)||void 0===ne||null===(te=ne.options)||void 0===te||null===(oe=te.shares)||void 0===oe?void 0:oe.length)>0?[].concat((0,i.Z)(null!==(le=null===(ie=Ln.processModule)||void 0===ie||null===(de=ie.module)||void 0===de||null===(ae=de.options)||void 0===ae?void 0:ae.shares)&&void 0!==le?le:[]),(0,i.Z)(I)):[].concat((0,i.Z)(null!==(ue=null===Ot||void 0===Ot||null===(re=Ot.shared_positions)||void 0===re?void 0:re.map((function(e){return null===e||void 0===e?void 0:e.id})))&&void 0!==ue?ue:[]),(0,i.Z)(I))).subscribe({error:function(e){_.h.dispatch((0,y.Xc)({show:!0,message:"Errors found",color:"red"}))},next:function(e){var n,t,o,i,d,a;if(null!==(n=Ln.processModule)&&void 0!==n&&null!==(t=n.module)&&void 0!==t&&null!==(o=t.options)&&void 0!==o&&o.single)return localStorage.setItem(null===(d=Ln.processModule)||void 0===d?void 0:d.module.id,JSON.stringify(null===e||void 0===e?void 0:e.data)),void Ul(null===(a=Ln.processModule.steps[0])||void 0===a?void 0:a.id);var u=C.find((function(e){var n;return"People"===e.data_type_name&&!0===(null===(n=e.options)||void 0===n?void 0:n.calendar)}));if(u){var r,s,c,v=JSON.parse(null!==(r=null===u||void 0===u?void 0:u.value)&&void 0!==r?r:{task:0}),p=ot.find((function(e){return e.id===(null===v||void 0===v?void 0:v.task)}));if(p)(0,Be.xJ)((0,l.Z)((0,l.Z)({},p),{},{assignee_id:null===e||void 0===e||null===(s=e.data)||void 0===s||null===(c=s.created_by)||void 0===c?void 0:c.id}),null===p||void 0===p?void 0:p.id).pipe((0,h.P)()).subscribe({})}var m=C.find((function(e){return"Payments"===e.data_type_name})),f=C.find((function(e){var n;return e.field_name===(null===m||void 0===m||null===(n=m.options)||void 0===n?void 0:n.paymentField)}));if(!m||null!==e&&void 0!==e&&null!==(i=e.data.payments)&&void 0!==i&&i.stripe_id||"Cash"===(null===m||void 0===m?void 0:m.value)||"Wallet"===(null===m||void 0===m?void 0:m.value)||"Points"===(null===m||void 0===m?void 0:m.value))if(m){var g,b;if(f&&"Cash"!==(null===m||void 0===m?void 0:m.value)&&k===(null===(g=jn.misc_info)||void 0===g?void 0:g.lock)&&Qn.id===(null===Ot||void 0===Ot||null===(b=Ot.assigned_to)||void 0===b?void 0:b.id)&&N!==k){var M,Z,E=+(null===f||void 0===f?void 0:f.value)-+(null===f||void 0===f?void 0:f.value)*+(null!==(M=null===jn||void 0===jn||null===(Z=jn.misc_info)||void 0===Z?void 0:Z.rate)&&void 0!==M?M:.2);(0,Re.e_)({user_id:Qn.id,id:(0,Q.mR)(),total:E,product:"CR-".concat(X),notes:"Wallet",quantity:1}).pipe((0,h.P)()).subscribe({next:function(){var e;Qn.wallet=+(+(null!==(e=null===Qn||void 0===Qn?void 0:Qn.wallet)&&void 0!==e?e:0)+E),Rl()}})}else K?(0,Ye.Vy)(Qn,null===Qn||void 0===Qn?void 0:Qn.options).pipe((0,h.P)()).subscribe({next:function(){Rl()},error:function(){return _.h.dispatch((0,y.Xc)({show:!0,message:"Errors found",color:"red"}))}}):Rl()}else Rl();else Ct.total=+(null===f||void 0===f?void 0:f.value),Ct.plan=+(null===f||void 0===f?void 0:f.value),ml(!0),oo(!1)},complete:function(){oo(!1)}})):(0,p.LM)({id:Z[0].id,selected_fields:(0,i.Z)(C),component_items:Ct.items,options:ge,status:k,assigned_to:null!==(se=null===Ct||void 0===Ct?void 0:Ct.assigned_to)&&void 0!==se?se:b},"",Ln.processModule.module_id,zt,X,Bt,(null===(ce=Ln.processModule)||void 0===ce||null===(ve=ce.module)||void 0===ve||null===(pe=ve.options)||void 0===pe||null===(me=pe.shares)||void 0===me?void 0:me.length)>0?[].concat((0,i.Z)(null!==(fe=null===(_e=Ln.processModule)||void 0===_e||null===(ye=_e.module)||void 0===ye||null===(he=ye.options)||void 0===he?void 0:he.shares)&&void 0!==fe?fe:[]),(0,i.Z)(I)):[].concat((0,i.Z)(Ht),(0,i.Z)(I))).subscribe({next:function(e){var n,t,o,i,d;if(Ct.id=null===e||void 0===e?void 0:e.id,null!==(n=Ln.processModule)&&void 0!==n&&null!==(t=n.module)&&void 0!==t&&null!==(o=t.options)&&void 0!==o&&o.single)return localStorage.setItem(null===(i=Ln.processModule)||void 0===i?void 0:i.module.id,JSON.stringify(e)),void Ul(null===(d=Ln.processModule.steps[0])||void 0===d?void 0:d.id);E.length>0&&Bl(E),Ln.processModule.selectedComponent=e;var a=C.find((function(e){var n;return"People"===e.data_type_name&&!0===(null===(n=e.options)||void 0===n?void 0:n.calendar)}));if(a){var u,r,s=JSON.parse(null!==(u=null===a||void 0===a?void 0:a.value)&&void 0!==u?u:{task:0}),c=ot.find((function(e){return e.id===(null===s||void 0===s?void 0:s.task)}));if(c)(0,Be.xJ)((0,l.Z)((0,l.Z)({},c),{},{assignee_id:null===e||void 0===e||null===(r=e.created_by)||void 0===r?void 0:r.id}),null===c||void 0===c?void 0:c.id).pipe((0,h.P)()).subscribe({})}if(C.filter((function(e){return!("Cash"===(null===e||void 0===e?void 0:e.value)||"Wallet"===(null===e||void 0===e?void 0:e.value)||"Points"===(null===e||void 0===e?void 0:e.value))&&"Payments"===e.data_type_name})).length>0)oo(!1),ml(!0);else if(C.filter((function(e){return("Wallet"===(null===e||void 0===e?void 0:e.value)||"Points"===(null===e||void 0===e?void 0:e.value))&&"Payments"===e.data_type_name})).length>0){var v,p=C.find((function(e){return"Payments"===e.data_type_name}));(0,Re.e_)({user_id:Qn.id,id:(0,Q.mR)(),total:-Ct.total,product:"DB-".concat(X),notes:null!==(v=null===p||void 0===p?void 0:p.value)&&void 0!==v?v:"Wallet",quantity:1}).pipe((0,h.P)()).subscribe({next:function(){var n,t;(0,Ye.Vy)(Qn,(0,l.Z)((0,l.Z)({},null===Qn||void 0===Qn?void 0:Qn.options),{},{points:+(+(null!==(n=null===Qn||void 0===Qn||null===(t=Qn.options)||void 0===t?void 0:t.points)&&void 0!==n?n:0)-("Points"===(null===p||void 0===p?void 0:p.value)?+Ct.total:0))})).pipe((0,h.P)()).subscribe({next:function(n){var t,o,l,i;Qn.options=n.options,Do((null===Ln||void 0===Ln||null===(t=Ln.processModule)||void 0===t||null===(o=t.module)||void 0===o||null===(l=o.options)||void 0===l||null===(i=l.message)||void 0===i?void 0:i.length)>0&&1==e.is_complete),_.h.dispatch((0,y.RV)({})),Rl()}})}})}else{var m,f,g,b;oo(!1),Do((null===Ln||void 0===Ln||null===(m=Ln.processModule)||void 0===m||null===(f=m.module)||void 0===f||null===(g=f.options)||void 0===g||null===(b=g.message)||void 0===b?void 0:b.length)>0&&1==e.is_complete),_.h.dispatch((0,y.RV)({})),Rl()}},error:function(e){var n,t,o,l;null!==e&&void 0!==e&&e.data&&(_.h.dispatch((0,y.Xc)({show:!0,message:"Errors found",color:"red"})),null!==E&&Bl(E),Do((null===Ln||void 0===Ln||null===(n=Ln.processModule)||void 0===n||null===(t=n.module)||void 0===t||null===(o=t.options)||void 0===o||null===(l=o.message)||void 0===l?void 0:l.length)>0&&1==(null===e||void 0===e?void 0:e.data.is_complete)),_.h.dispatch((0,y.RV)({})),Rl())},complete:function(){oo(!1)}})):(_.h.dispatch((0,y.Xc)({show:!0,message:"There are no items to be saved",color:"red"})),window.scrollTo({top:0,behavior:"smooth"}))},Bl=function(e){if((null===e||void 0===e?void 0:e.length)>0){var n,t=null!==(n=jn.misc_info)&&void 0!==n?n:{};e.filter((function(e){var n;t[e]=+(null!==(n=t[e])&&void 0!==n?n:1)+1})),oo(!0),(0,f.x5)({misc_info:t}).pipe((0,h.P)()).subscribe({})}},Ll=function(){yt("Fill up all the required fields"),window.scrollTo({top:0,behavior:"smooth"}),rt(!1)},Fl=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=arguments.length>2?arguments[2]:void 0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],i=n.filter((function(n){return n.module_id===e})).filter((function(e){var n,i;return l.length>0?l.includes(e.id):""===t?e:(null===(n=e.title)||void 0===n?void 0:n.toUpperCase().includes(null===t||void 0===t?void 0:t.toUpperCase()))||(null===(i=e.component_fields.filter((function(e){var n,l,i,d,a,u;return"Record"===e.data_type_name?null===(n=zn.find((function(n){var t;return(null===(t=n.component_fields.filter((function(n){return n.field_name===e.options.output&&n.component_blueprint_id===e.options.component_id&&n.value===(null===e||void 0===e?void 0:e.value)})))||void 0===t?void 0:t.length)>0})))||void 0===n||null===(l=n.component_fields.find((function(n){var t;return null===(t=e.options)||void 0===t?void 0:t.names.includes(n.field_name)})).value)||void 0===l?void 0:l.toUpperCase().includes(null===t||void 0===t?void 0:t.toUpperCase()):void 0!==o?("date"===e.data_type?null===(i=W()(new Date(null===e||void 0===e?void 0:e.value)))||void 0===i?void 0:i.format("DD MMM YYYY").includes(t):null===e||void 0===e||null===(d=e.value)||void 0===d?void 0:d.includes(t))&&e.field_name===o:"date"===e.data_type?null===(a=W()(new Date(null===e||void 0===e?void 0:e.value)))||void 0===a?void 0:a.format("DD MMM YYYY").includes(t):null===e||void 0===e||null===(u=e.value)||void 0===u?void 0:u.toUpperCase().includes(null===t||void 0===t?void 0:t.toUpperCase())})))||void 0===i?void 0:i.length)>0}));return i},jl=function(e){var n,t,d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Yo,a=L.Z([Pe.Z(j.Z("created_date"))])(d.filter((function(e){return e.created_by.id===(null===Qn||void 0===Qn?void 0:Qn.id)?e:"Expired"!==e.status}))).map((function(n){var t,i,d,a,u,r,s,c,v,p,m={};e.list.map((function(e){var t=n.component_fields.find((function(n){return n.field_name===e}));if(void 0!=t)if("People"===t.data_type_name)m=(0,l.Z)((0,l.Z)({},m),{},(0,o.Z)({},e,t.value));else if("Positions"===t.data_type_name){var i,d;m=(0,l.Z)((0,l.Z)({},m),{},(0,o.Z)({},e,null!==(i=null===(d=Kn.find((function(e){return e.value===t.value})))||void 0===d?void 0:d.label)&&void 0!==i?i:""))}else if("Date"===t.data_type_name){var a,u=new Date(null===t||void 0===t||null===(a=t.value)||void 0===a?void 0:a.split(",")[0]);m=(0,l.Z)((0,l.Z)({},m),{},(0,o.Z)({},e,W()(u).format("DD MMM YYYY")))}else if("Record"===t.data_type_name||"Component"===t.data_type_name){var r=zn.find((function(e){var n;return(null===(n=e.component_fields.filter((function(e){return e.field_name===t.options.output&&e.component_blueprint_id===t.options.component_id&&e.value===(null===t||void 0===t?void 0:t.value)})))||void 0===n?void 0:n.length)>0}));r&&(m[e]=null===r||void 0===r?void 0:r.component_fields.filter((function(e){var n,o;return null===t||void 0===t||null===(n=t.options)||void 0===n||null===(o=n.names)||void 0===o?void 0:o.find((function(n){return e.field_name===n}))})).map((function(e){return e.value})).toString(),m["".concat(e," ID")]=null===t||void 0===t?void 0:t.value)}else if("Filters"===t.data_type_name){var s;m=(0,l.Z)((0,l.Z)({},m),{},(0,o.Z)({},e,O.tq?"".concat(null===t||void 0===t?void 0:t.value.slice(1,20)):"".concat(null===t||void 0===t?void 0:t.value))),null===(s=zn.find((function(e){var n;return(null===(n=e.component_fields.filter((function(e){return e.field_name===t.options.output&&e.component_blueprint_id===t.options.component_id&&e.value===(null===t||void 0===t?void 0:t.value)})))||void 0===n?void 0:n.length)>0})))||void 0===s||s.component_fields.filter((function(e){m=(0,l.Z)((0,l.Z)({},m),{},(0,o.Z)({},e.field_name,O.tq?e.value.slice(1,20):e.value))}))}else if("Status"===t.data_type_name){var c;if(0==n.is_complete)m=(0,l.Z)((0,l.Z)({},m),{},(0,o.Z)({},e,"Draft"));else m=(0,l.Z)((0,l.Z)({},m),{},(0,o.Z)({},e,"".concat(null!==(c=null===n||void 0===n?void 0:n.status)&&void 0!==c?c:null===t||void 0===t?void 0:t.value)))}else{var v,p;m=(0,l.Z)((0,l.Z)({},m),{},(0,o.Z)({},e,O.tq?null===t||void 0===t||null===(v=t.value)||void 0===v?void 0:v.slice(1,20).split(",")[0]:null===t||void 0===t||null===(p=t.value)||void 0===p?void 0:p.split(",")[0]))}})),(null===n||void 0===n||null===(t=n.component_items)||void 0===t?void 0:t.length)>0&&(m=(0,l.Z)((0,l.Z)({},m),{},(0,o.Z)({},"Total Qty",n.component_items.reduce((function(e,n){return e+ +n.quantity}),0)))),(null===n||void 0===n||null===(i=n.shared_positions)||void 0===i?void 0:i.length)>0&&(m=(0,l.Z)((0,l.Z)({},m),{},{Shares:null===n||void 0===n?void 0:n.shared_positions.map((function(e){var n;return null===(n=Kn.find((function(n){return n.value===e.id})))||void 0===n?void 0:n.label})).toString()}));var f=new Date(n.created_date);return m=(0,l.Z)((0,l.Z)({},m),{},(v={id:n.id},(0,o.Z)(v,"Created By","".concat(null===n||void 0===n||null===(d=n.created_by)||void 0===d?void 0:d.first_name," ").concat(null===n||void 0===n||null===(a=n.created_by)||void 0===a?void 0:a.last_name)),(0,o.Z)(v,"Created Date",W()(f).format("DD MMM YYYY")),(0,o.Z)(v,"Assigned To","".concat(null!==(u=null===n||void 0===n||null===(r=n.assigned_to)||void 0===r?void 0:r.first_name)&&void 0!==u?u:""," ").concat(null!==(s=null===n||void 0===n||null===(c=n.assigned_to)||void 0===c?void 0:c.last_name)&&void 0!==s?s:"")),(0,o.Z)(v,"Status",0==n.is_complete?"Draft":null===n||void 0===n?void 0:n.status),(0,o.Z)(v,"Title",n.title),(0,o.Z)(v,"items",n.component_items),(0,o.Z)(v,Ln.processModule.module.name,n.title),v)),null===e||void 0===e||null===(p=e.reports)||void 0===p||p.filter((function(e){return"Formula"===e.data_type_name})).map((function(e){var t=(0,Q.LV)(e.options,e.options.list.map((function(e){var n;return{value:null!==(n=m[e])&&void 0!==n?n:0}})),zn.filter((function(e){var n,t;return e.module_id===(null===Ln||void 0===Ln||null===(n=Ln.processModule)||void 0===n||null===(t=n.module)||void 0===t?void 0:t.id)})),null===n||void 0===n?void 0:n.component_items);m=(0,l.Z)((0,l.Z)({},m),{},(0,o.Z)({},e.field_name,"".concat(t)))})),m}));null===e||void 0===e||null===(n=e.reports)||void 0===n||n.filter((function(e){return"List Filter"===e.data_type_name})).map((function(e){a=a.filter((function(n){var t,o;return n[null===(t=e.options)||void 0===t?void 0:t.field]===(null===(o=e.options)||void 0===o?void 0:o.value)}))}));var u=null===e||void 0===e||null===(t=e.reports)||void 0===t?void 0:t.find((function(e){return"Transaction List"===e.data_type_name}));if(u){var r=[];a.map((function(e){e.items.filter((function(n){var t=(0,l.Z)({},e);Object.keys(u.options.map).map((function(e){t[u.options.map[e]]=n[e]})),r=[].concat((0,i.Z)(r),[t])})),delete e.items})),a=r}return a},zl=function(){var e,n,t;return a.createElement(ue.Z,{light:!0,style:{display:1!=(null===Ln||void 0===Ln||null===(e=Ln.processModule)||void 0===e||null===(n=e.module)||void 0===n||null===(t=n.options)||void 0===t?void 0:t.readOnly)||"manager"===Qn.user_type||"admin"===Qn.user_type?"":"none"},clicked:function(){Ol(),Ut({})},icon:a.createElement("img",{src:r.IHx})})},Vl=function(){return(0,i.Z)(new Set(jo.filter((function(e){return void 0!==e.Status})).map((function(e){return e.Status})))).map((function(e){return{label:e,value:e}}))},Wl=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:jo,t=JSON.parse(JSON.stringify(n));e.filter((function(e,o){"status"===e.type?t="OR"===Qo.operator?[].concat((0,i.Z)(0==o?[]:t),(0,i.Z)(n.filter((function(n){return n.Status===e.value})))):t.filter((function(n){return n.Status===e.value})):"user"===e.type?t="OR"===Qo.operator?[].concat((0,i.Z)(0==o?[]:t),(0,i.Z)(n.filter((function(n){return n["Created By"]===e.label})))):t.filter((function(n){return n["Created By"]===e.label})):"fields"===e.type&&(t="OR"===Qo.operator?[].concat((0,i.Z)(0==o?[]:t),(0,i.Z)(n.filter((function(n){return n[e.filter]===e.value})))):t.filter((function(n){return n[e.filter]===e.value})))})),zo(t)},Gl=function(){var e;return a.createElement("div",{style:{display:""}},a.createElement(ce.Z,{value:null!==(e=Qo.operator)&&void 0!==e?e:"AND",className:u.dropdownSelectOperation,items:[{label:"AND",value:"AND"},{label:"OR",value:"OR"}],onChange:function(e){Ko((0,l.Z)((0,l.Z)({},Qo),{},{operator:e}))}}))},Hl=function(){return a.createElement("div",{style:{alignSelf:"flex-end",display:Nl.component_blueprints.filter((function(e){var n;return 1==(null===(n=e.options)||void 0===n?void 0:n.asReport)})).length>0?"flex":"none"}},a.createElement(ue.Z,{light:!0,clicked:function(){qo?(Ko({list:[],operator:"AND"}),Bo(zn.filter((function(e){var n,t;return e.module_id===(null===Ln||void 0===Ln||null===(n=Ln.processModule)||void 0===n||null===(t=n.module)||void 0===t?void 0:t.id)})))):Bo([]),Ho([]),Oo(!qo)},style:qo?{height:"36px"}:{},icon:a.createElement("img",{src:qo?r.hFT:s.aRA})}),1==qo&&a.createElement(a.Fragment,null,a.createElement(ce.Z,{className:u.dropdownSelectReport,items:Nl.component_blueprints.filter((function(e){var n,t,o;return 1==(null===(n=e.options)||void 0===n?void 0:n.asReport)&&(void 0===(null===(t=e.options)||void 0===t?void 0:t.showOnly)||0==(null===(o=e.options)||void 0===o?void 0:o.showOnly.length)||Qn.positions.filter((function(n){var t,o;return null===(t=e.options)||void 0===t||null===(o=t.showOnly)||void 0===o?void 0:o.includes(n.id)})).length>0)})).map((function(e){return{label:null===e||void 0===e?void 0:e.name,value:e.id,blueprint:e}})),visible:!0,onChange:function(e){var n,t;Bo(zn.filter((function(e){var n,t;return e.module_id===(null===Ln||void 0===Ln||null===(n=Ln.processModule)||void 0===n||null===(t=n.module)||void 0===t?void 0:t.id)})));var o=[];L.Z([F.Z(j.Z("index"))])(Nl.component_blueprints.find((function(n){return n.id===e})).selected_fields.filter((function(e){return 1==e.visible}))).map((function(e){o=[].concat((0,i.Z)(o),[e.field_name]),"Info"===e.data_type_name?e.options.list.map((function(e){return o=[].concat((0,i.Z)(o),[e])})):"Transaction List"===e.data_type_name&&Object.values(e.options.map).map((function(e){return o=[].concat((0,i.Z)(o),[e])}))})),Ko({list:(0,i.Z)(new Set(o)),title:null===(n=Nl.component_blueprints.find((function(n){return n.id===e})))||void 0===n?void 0:n.name,reports:L.Z([Pe.Z(j.Z("index"))])(Nl.component_blueprints.find((function(n){return n.id===e})).selected_fields).map((function(e){return{field_name:e.field_name,data_type_name:e.data_type_name,options:e.options}})),operator:"AND"}),zo(jl({list:(0,i.Z)(new Set(o)),title:null===(t=Nl.component_blueprints.find((function(n){return n.id===e})))||void 0===t?void 0:t.name,reports:L.Z([Pe.Z(j.Z("index"))])(Nl.component_blueprints.find((function(n){return n.id===e})).selected_fields).map((function(e){return{field_name:e.field_name,data_type_name:e.data_type_name,options:e.options}})),operator:"AND"},zn.filter((function(e){var n,t;return e.module_id===(null===Ln||void 0===Ln||null===(n=Ln.processModule)||void 0===n||null===(t=n.module)||void 0===t?void 0:t.id)}))))},placeholder:"Reports"})))},Jl=function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.keys(n[0]),l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null===(e=Ln.processModule.module)||void 0===e?void 0:e.name;return a.createElement(ue.Z,{light:!0,title:(null===Qo||void 0===Qo?void 0:Qo.title)&&"Export as file",clicked:function(){var e,d,a,u=qo?t:1==(null===(e=Ln.processModule.module)||void 0===e||null===(d=e.options)||void 0===d?void 0:d.isMaster)?[].concat((0,i.Z)(t),["Shares","Title"]):t,r=qe.utils.book_new(),s=qe.utils.json_to_sheet([]);qe.utils.sheet_add_aoa(s,[u]),qe.utils.sheet_add_json(s,n.map((function(e){return Object.assign.apply(Object,[{}].concat((0,i.Z)(u.map((function(n){return(0,o.Z)({},n,e[n])})))))})),{origin:"A2",skipHeader:!0}),qe.utils.book_append_sheet(r,s,"".concat(null===(a=Ln.processModule.module)||void 0===a?void 0:a.name)),(0,qe.writeFile)(r,"".concat(l).concat((0,V.now)(),".xlsx"))},cicon:a.createElement("img",{src:s.so})},a.createElement("img",{src:s.so}))},Xl=null===Ot||void 0===Ot||null===(T=Ot.component_fields)||void 0===T?void 0:T.find((function(e){return"Status"===e.data_type_name})),Ql=[];null===Ln||void 0===Ln||null===(A=Ln.processModule)||void 0===A||null===(q=A.steps)||void 0===q||q.filter((function(e){return null===e||void 0===e?void 0:e.component_blueprints.filter((function(e){var n,t;return(null===(n=e.options)||void 0===n||null===(t=n.showOnly)||void 0===t?void 0:t.length)>0}))})).filter((function(e){e.component_blueprints.filter((function(e){var n,t;return(null===(n=e.options)||void 0===n||null===(t=n.showOnly)||void 0===t?void 0:t.length)>0})).filter((function(e){e.options.showOnly.filter((function(e){Ql=[].concat((0,i.Z)(Ql),[e])}))}))}));var Kl=(null===Ln||void 0===Ln||null===(U=Ln.processModule)||void 0===U||null===(R=U.steps)||void 0===R?void 0:R.length)>0?null===Ln||void 0===Ln||null===(z=Ln.processModule)||void 0===z||null===(G=z.steps)||void 0===G||null===(H=G.find((function(e){return(null===e||void 0===e?void 0:e.component_blueprints.filter((function(e){return e.selected_fields.filter((function(e){return"Freehand"===e.data_type_name})).length>0})).length)>0})))||void 0===H||null===(K=H.component_blueprints.find((function(e){var n;return(null===(n=e.selected_fields.filter((function(e){return"Freehand"===e.data_type_name})))||void 0===n?void 0:n.length)>0})))||void 0===K||null===($=K.options)||void 0===$?void 0:$.showOnly:void 0,$l=(null===Ln||void 0===Ln||null===(ee=Ln.processModule)||void 0===ee||null===(ne=ee.steps)||void 0===ne?void 0:ne.length)>0?null===Ln||void 0===Ln||null===(te=Ln.processModule)||void 0===te||null===(oe=te.steps)||void 0===oe||null===(le=oe.find((function(e){return(null===e||void 0===e?void 0:e.component_blueprints.filter((function(e){return e.selected_fields.filter((function(e){return"Action Button"===e.data_type_name})).length>0})).length)>0})))||void 0===le||null===(ie=le.component_blueprints.find((function(e){var n;return(null===(n=e.selected_fields.filter((function(e){return"Action Button"===e.data_type_name})))||void 0===n?void 0:n.length)>0})))||void 0===ie||null===(de=ie.options)||void 0===de?void 0:de.showOnly:void 0;return a.createElement("div",{className:u.processStepHost},a.createElement("div",{className:u.centeredCardMargin,"app-variant-is-mobile":O.tq?"true":"false"},1==(null===Nl||void 0===Nl?void 0:Nl.rank)&&a.createElement(he,{title:null===Ln||void 0===Ln||null===(ae=Ln.processModule)||void 0===ae||null===(re=ae.module)||void 0===re?void 0:re.name,subtitle:O.tq?"":null===Ln||void 0===Ln||null===(ve=Ln.processModule)||void 0===ve?void 0:ve.description,customStyle:{width:O.tq?"100%":"94%",minWidth:O.tq?"100px":"94%"},cardClicked:function(){Jn(null===Ln||void 0===Ln?void 0:Ln.processModule),uo(!ao)}})),ao&&1==(null===Nl||void 0===Nl?void 0:Nl.rank)&&a.createElement("div",{className:u.centeredCardMargin,"app-variant-is-mobile":O.tq?"true":"false"},a.createElement(he,{description:"Steps:",customStyle:{width:O.tq?"100%":"94%",minWidth:O.tq?"100px":"94%"}},a.createElement(be.FZ,null,a.createElement(ge.Z,null)))),Xn,a.createElement("div",{className:u.centeredCardMargin,"app-variant-is-mobile":O.tq?"true":"false"},1===it&&void 0===(null===Nl||void 0===Nl?void 0:Nl.component_blueprints)?a.createElement("div",{className:u.centeredSpinner},a.createElement(v.$j,{size:80,type:"ThreeDots"})):(null===Nl||void 0===Nl||null===(pe=Nl.component_blueprints)||void 0===pe?void 0:pe.filter((function(e){var n;return 1==(null===(n=e.options)||void 0===n?void 0:n.asModuleList)})).length)>0?null===Nl||void 0===Nl||null===(me=Nl.component_blueprints)||void 0===me?void 0:me.filter((function(e){var n,t,o;return 1==e.options.asModuleList&&(Qn.positions.filter((function(n){var t,o;return null===(t=e.options)||void 0===t||null===(o=t.showOnly)||void 0===o?void 0:o.includes(n.id)})).length>0||0==(null===(n=e.options)||void 0===n||null===(t=n.showOnly)||void 0===t?void 0:t.length)||void 0===(null===(o=e.options)||void 0===o?void 0:o.showOnly))})).map((function(e,n){var t;return a.createElement(a.Fragment,{key:n},a.createElement(B.default,{className:u.listContainer,isReport:qo,"app-variant-is-mobile":O.tq?"true":"false",title:qo?"Reports":null===Nl||void 0===Nl?void 0:Nl.name,columns:(null===(t=zn.filter((function(e){var n,t;return e.module_id===(null===Ln||void 0===Ln||null===(n=Ln.processModule)||void 0===n||null===(t=n.module)||void 0===t?void 0:t.id)})))||void 0===t?void 0:t.filter((function(e){var n;return 0===(null===(n=e.component_fields)||void 0===n?void 0:n.length)})).length)>0||O.tq?[Ln.processModule.module.name]:(0,i.Z)(new Set(e.selected_fields.filter((function(e){return 1==e.visible&&"Info"===e.data_type_name})).map((function(e){var n;return null===(n=e.options)||void 0===n?void 0:n.list})).flat().concat(qo?Qo.list:L.Z([F.Z(j.Z("index"))])(e.selected_fields.filter((function(e){return 1==e.visible&&"Info"!==e.data_type_name}))).map((function(e){return e.field_name}))))),list:qo?jo:jl({list:e.selected_fields.filter((function(e){return"Info"===e.data_type_name})).map((function(e){var n,t;return null!==(n=null===e||void 0===e||null===(t=e.options)||void 0===t?void 0:t.key)&&void 0!==n?n:e.field_name})).concat(e.selected_fields.filter((function(e){return 1==e.visible})).map((function(e){return e.field_name})))}),addClicked:function(){Ol(),Ut({})},onListItemClick:function(e){var n,t;if(!qo){var o,l,d,a,u=zn.find((function(n){return n.id===e.id}));if(0===(null===(n=u.component_fields)||void 0===n?void 0:n.length))return oo(!0),void(0,p.r6)(u.id).pipe((0,h.P)()).subscribe({next:function(e){Ut(e),Lt(e.is_complete),It(!0),$t(!1),oo(!1)},error:function(){}});if(Ut(u),Lt(u.is_complete),$t(!1),null!==u&&void 0!==u&&null!==(t=u.assigned_to)&&void 0!==t&&t.id&&!Gn.find((function(e){var n;return e.id===(null===u||void 0===u||null===(n=u.assigned_to)||void 0===n?void 0:n.id)})))(0,Ye.VG)(Gn.find((function(e){var n;return e.id===(null===(n=u.created_by)||void 0===n?void 0:n.id)}))?[null===u||void 0===u||null===(o=u.assigned_to)||void 0===o?void 0:o.id]:[null===u||void 0===u||null===(l=u.assigned_to)||void 0===l?void 0:l.id,null===u||void 0===u||null===(d=u.created_by)||void 0===d?void 0:d.id]).pipe((0,h.P)()).subscribe({next:function(e){_.h.dispatch((0,y.NY)(Gn.concat(e))),It(!0)}});else if(Ln.processModule.user_id!==Qn.id&&null!==(a=Ln.processModule.module.options)&&void 0!==a&&a.skipDetail){var r,s,c,v,m;It(!1),Tt(!0),Ln.processModule.isUpdating=!0,(null===Ln||void 0===Ln||null===(r=Ln.processModule)||void 0===r||null===(s=r.steps)||void 0===s?void 0:s.length)>0&&(null===Ln||void 0===Ln||null===(c=Ln.processModule)||void 0===c||null===(v=c.steps)||void 0===v||v.filter((function(e){var n;return null===e||void 0===e||null===(n=e.component_blueprints)||void 0===n?void 0:n.filter((function(e){return e.selected_fields.filter((function(e){return e.value=void 0}))}))})));var f=[];Ie.Z(Ne.Z("group"))(null!==(m=null===Ot||void 0===Ot?void 0:Ot.component_fields)&&void 0!==m?m:[]).map((function(e){f=[].concat((0,i.Z)(f),[{id:e.component_blueprint_id,temp_id:e.id,selected_fields:Te.Z(Ae.Z("group",e.group))(Ot.component_fields)}])})),Ln.processModule.steps.filter((function(e){e.component_blueprints.filter((function(e){var n,t,o,l,i,d;return(0==(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.asDashboard)||!(null!==e&&void 0!==e&&null!==(t=e.options)&&void 0!==t&&t.asDashboard))&&(0==(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.asReport)||!(null!==e&&void 0!==e&&null!==(l=e.options)&&void 0!==l&&l.asReport))&&(0==(null===e||void 0===e||null===(i=e.options)||void 0===i?void 0:i.asModuleList)||!(null!==e&&void 0!==e&&null!==(d=e.options)&&void 0!==d&&d.asModuleList))})).filter((function(e){e.selected_fields.filter((function(e){var n=Ot.component_fields.find((function(n){return n.field_name===e.field_name}));if(void 0!=n)e.value=n.value,e.group=n.group;else if("Record"===e.data_type_name){var t=Ot.component_fields.find((function(n){return n.field_name===e.options.name}));void 0!=t&&(e.value=t.value,e.value=t.group)}}))}))})),Ct.components=f,Ct.items=JSON.parse(JSON.stringify(Ot.component_items)),Ct.newStepComponents=[],jn.start=!0,Ul()}else It(!0)}},pages:Ln.processModule.module.count,onPageClicked:function(e){var n=zn.filter((function(e){return e.module_id===Ln.processModule.module.id}));if(12345===e){var t;n.length<(null===(t=Ln.processModule.module)||void 0===t?void 0:t.count)&&(0,Ze.vC)(Ln.processModule.module,Q.Qc,999999,1).pipe((0,g.q)(1)).subscribe({next:function(e){var n;oo(!1),Ln.processModule.module.lastUpdate=0,Ln.processModule.module.count=null!==(n=null===e||void 0===e?void 0:e.total)&&void 0!==n?n:0}})}else{var o,l,i=Math.ceil((null!==(o=Ln.processModule.module)&&void 0!==o&&o.count?+(null===(l=Ln.processModule.module)||void 0===l?void 0:l.count):n.length)/Q.ZP);O.tq&&i>7&&(i=7);var d=Math.ceil(n.length/Q.ZP),a=e;a>d&&(oo(!0),Wn.componentsByModule[Ln.processModule.module.name]=0,(0,Ze.vC)(Ln.processModule.module,Q.Qc,a-d<=1?Q.ZP:Q.ZP*a,a-d<=1?a:1).pipe((0,g.q)(1)).subscribe({next:function(e){var n;oo(!1),Wn.componentsByModule[Ln.processModule.module.name]=(0,V.now)(),Ln.processModule.module.lastUpdate=0,Ln.processModule.module.count=null!==(n=null===e||void 0===e?void 0:e.total)&&void 0!==n?n:0}}))}}},a.createElement("div",null,a.createElement("div",{style:{display:"flex"}},Go.length>0&&a.createElement(ue.Z,{title:"Show all",clicked:function(){Bo(zn.filter((function(e){var n,t;return e.module_id===(null===Ln||void 0===Ln||null===(n=Ln.processModule)||void 0===n||null===(t=n.module)||void 0===t?void 0:t.id)}))),Ko((0,l.Z)((0,l.Z)({},Qo),{},{filter:void 0})),zo(jl((0,l.Z)((0,l.Z)({},Qo),{},{filter:void 0})))},style:{height:"30px",width:"140px"}}),Go.map((function(e,n){return a.createElement(ue.Z,{className:u.customButton,icon:a.createElement("img",{src:r.C7j,style:{height:"16px",width:"16px"}}),clicked:function(){Ho(Go.filter((function(n){return n.value!==e.value}))),Wl(Go.filter((function(n){return n.value!==e.value})),jl((0,l.Z)((0,l.Z)({},Qo),{},{filter:void 0})))},key:n,style:{height:"30px",width:"inherit"}},"".concat(0==n?"":e.operator," ").concat(e.label))})),Go.length>0&&a.createElement(ue.Z,{title:"Apply",style:{height:"30px",width:"160px"},clicked:function(){Wl(Go,jl((0,l.Z)((0,l.Z)({},Qo),{},{filter:void 0})))},light:!0})),qo&&a.createElement("div",{style:{display:"flex"}},Gl(),Vl().length>0&&a.createElement(ce.Z,{className:u.dropdownSelectComponent,items:Vl(),onChange:function(e){Go.map((function(e){return e.label})).includes(e)||Ho([].concat((0,i.Z)(Go),[{label:e,value:e,type:"status",operator:Qo.operator}]))},placeholder:"Status"}),qo&&a.createElement(ce.Z,{className:u.dropdownSelectComponent,items:Qo.list.map((function(e){return{label:e,value:e}})),onChange:function(e){Ko((0,l.Z)((0,l.Z)({},Qo),{},{filter:void 0})),setTimeout((function(){return Ko((0,l.Z)((0,l.Z)({},Qo),{},{filter:e}))}),10)},placeholder:"Filter by fields"}),1==qo&&void 0!==(null===Qo||void 0===Qo?void 0:Qo.filter)&&a.createElement(ce.Z,{className:u.dropdownSelectComponentL,items:(0,i.Z)(new Set(jl(Qo).map((function(e){return e[Qo.filter]})))).map((function(e){return{label:e,value:e}})),onChange:function(e){Go.map((function(e){return e.value})).includes(e)||Ho([].concat((0,i.Z)(Go),[{label:"".concat(Qo.filter,": ").concat(e),value:e,type:"fields",filter:Qo.filter,operator:Qo.operator}]))},placeholder:"Field value"}),1==qo&&a.createElement(ce.Z,{className:u.dropdownSelectComponent,items:Gn.map((function(e){return{label:"".concat(e.first_name," ").concat(e.last_name),value:e.id}})),onChange:function(e){if(!Go.map((function(e){return e.label})).includes(e)){var n=Gn.find((function(n){return n.id===e}));Ho([].concat((0,i.Z)(Go),[{label:"".concat(n.first_name," ").concat(n.last_name),value:e,type:"user",operator:Qo.operator}]))}},placeholder:"Created by"}))),a.createElement("div",{className:u.actionsContainer},!(null!==Qo&&void 0!==Qo&&Qo.title)&&qo&&a.createElement("label",{style:{padding:"20px 0px 20px 5px",fontSize:"12px"}},"OR"===Qo.operator?"Selecting OR will select all instances of selected value":"Selecting AND will only include instances of selected value"),qo?(null===Qo||void 0===Qo?void 0:Qo.title)&&Jl(jo,Qo.list,Qo.title):a.createElement("div",{className:u.searchContainer},a.createElement(J.G,{icon:X.wn1,style:{width:"25px",height:"25px",padding:"5px"}}),a.createElement("input",{placeholder:"Search",className:u.searchInput,onChange:function(e){var n,t,o;if("deleteContentBackward"===e.nativeEvent.inputType)Bo(Fl(null===Ln||void 0===Ln||null===(t=Ln.processModule)||void 0===t||null===(o=t.module)||void 0===o?void 0:o.id,zn,e.target.value));else if((null===(n=e.target.value)||void 0===n?void 0:n.length)>0){var l,i;Bo(Fl(null===Ln||void 0===Ln||null===(l=Ln.processModule)||void 0===l||null===(i=l.module)||void 0===i?void 0:i.id,Yo,e.target.value))}else 0==e.target.value.length&&Bo(zn.filter((function(e){var n,t;return e.module_id===(null===Ln||void 0===Ln||null===(n=Ln.processModule)||void 0===n||null===(t=n.module)||void 0===t?void 0:t.id)})))}})),qo&&Hl(),a.createElement("div",{style:{display:qo?"none":"flex",alignSelf:"flex-end"}},!("trial_ended"===jn.status||"inactive"===jn.status||"free"===jn.status||"on_trial"===jn.status)&&zl(),"on_trial"===jn.status&&zn.filter((function(e){return e.module_id===Ln.processModule.module.id&&W()(new Date(e.created_date)).format("DDMMYYYY")===W()(new Date).format("DDMMYYYY")})).length<5&&zl(),"free"===jn.status&&zn.filter((function(e){return W()(new Date(e.created_date)).format("DDMMYYYY")===W()(new Date).format("DDMMYYYY")})).length<3&&zl(),!O.tq&&Hl(),!O.tq&&Jl(jl({list:e.selected_fields.filter((function(e){return 1==e.visible})).map((function(e){return e.field_name}))}),e.selected_fields.filter((function(e){return 1==e.visible})).map((function(e){return e.field_name}))),a.createElement(ue.Z,{light:!0,clicked:function(){oo(!0);var e=Fn.find((function(e){return e.id===Ln.processModule.module_id}));Wn.componentsByModule[e.name]=0,(0,Ze.vC)(e,Q.Qc,Q.R6,1).pipe((0,g.q)(1)).subscribe({next:function(n){var t,o=null!==n&&void 0!==n&&n.data?null===n||void 0===n?void 0:n.data:n;_.h.dispatch((0,y.mK)(De.Z(j.Z("created_date"),[].concat((0,i.Z)(zn.filter((function(e){return e.module_id!==Ln.processModule.module_id}))),(0,i.Z)(o))),Q.KI,et.map((function(e){return e.fields})).flat(1))),Wn.componentsByModule[e.name]=(0,V.now)(),e.lastUpdate=(0,V.now)(),e.count=null!==(t=null===n||void 0===n?void 0:n.total)&&void 0!==t?t:0,oo(!1)},complete:function(){},error:function(){return oo(!1)}})},icon:a.createElement("img",{src:r.Fdh}),loading:to,message:"Fetching ".concat(Ln.processModule.module.name,"...")})))))})):a.createElement("div",{className:u.listContainer,"app-variant-is-mobile":O.tq?"true":"false"},a.createElement("div",{style:{display:"flex",justifyContent:"space-between",width:"100%"}},a.createElement("p",{className:u.stepTitleSmaller},null===Nl||void 0===Nl?void 0:Nl.name),a.createElement(ue.Z,{clear:!0,clicked:function(){var n,t,o;oo(!0),null===(n=Ln.processModule.module)||void 0===n||null===(t=n.options)||void 0===t||null===(o=t.supporting)||void 0===o||o.filter((function(n,t){var o,l,i;oo(!0),(0,Ze.vC)({id:n,name:null!==(o="".concat(null===Fn||void 0===Fn||null===(l=Fn.find((function(e){return e.id===n})))||void 0===l?void 0:l.name).concat(t))&&void 0!==o?o:"".concat(null===(i=e)||void 0===i?void 0:i.name).concat(t)},Q.Qc,Q.R6,1).pipe((0,g.q)(1)).subscribe({next:function(e){var n,o,l,i;(null===(n=Ln.processModule.module)||void 0===n||null===(o=n.options)||void 0===o||null===(l=o.supporting)||void 0===l?void 0:l.length)==t+1&&(oo(!1),Ul(null===(i=Ln.processModule.steps[Ln.processModule.stepIndex-1])||void 0===i?void 0:i.id))},error:function(){return oo(!1)}})}))},icon:a.createElement("img",{src:r.Fdh}),loading:to})),a.createElement("br",null),a.createElement("label",{className:u.stepGuidanceSmaller},null===Nl||void 0===Nl?void 0:Nl.guidance),_t&&a.createElement(Y.Z,{message:_t,onClick:function(){return yt("")}}),a.createElement(We,{nextButtonClicked:bt,step:Nl,setIsMandatoryError:pt,isMandatoryError:vt,begunModule:Ln,companyData:jn,blueprints:et,components:zn,products:Hn,authenticatedUser:Qn,isEditing:Vn,companyUsersArray:Gn,usersArray:nl,setUsers:Vt,setPositions:Jt,setIsCompleted:Lt,selectedComponent:Ot,goToNextStep:Ul,companyPositionsArray:Kn,cart:$n,allModules:Fn,editMode:rl},a.createElement("div",{className:u.menuRightButtons}),function(){var e,n,t,o;return a.createElement("div",{className:u.menuAccordionButtons},Ln.processModule.stepIndex>0&&a.createElement(ue.Z,{title:"Cancel",light:!0,clicked:function(){Ct.components.length>0||Ct.newStepComponents.length>0?Zl(!0):(Ln.processModule.back_array=[],Bo(zn.filter((function(e){var n,t;return e.module_id===(null===Ln||void 0===Ln||null===(n=Ln.processModule)||void 0===n||null===(t=n.module)||void 0===t?void 0:t.id)}))),Ul(Ln.processModule.steps[0].id),sl(!1))}}),Ln.processModule.stepIndex>0&&a.createElement(ue.Z,{title:"Back",light:!0,style:{width:"80px"},clicked:function(){var e,n,t;if(1==Ln.processModule.stepIndex&&Bo(zn.filter((function(e){var n,t;return e.module_id===(null===Ln||void 0===Ln||null===(n=Ln.processModule)||void 0===n||null===(t=n.module)||void 0===t?void 0:t.id)}))),1==(null===Nl||void 0===Nl||null===(e=Nl.options)||void 0===e?void 0:e.deleteOnBack)&&Nl.component_blueprints.filter((function(e){return e.selected_fields.filter((function(e){return"output"!==e.data_type})).map((function(e){e.value=void 0}))})),(null===Ln||void 0===Ln||null===(n=Ln.processModule)||void 0===n||null===(t=n.back_array)||void 0===t?void 0:t.length)>0){var o,l=null===Ln||void 0===Ln||null===(o=Ln.processModule)||void 0===o?void 0:o.back_array.pop();l&&Ul(l)}else{var i;Ul(null===(i=Ln.processModule.steps[Ln.processModule.stepIndex-1])||void 0===i?void 0:i.id)}}}),!0===(null===Nl||void 0===Nl?void 0:Nl.is_end)?a.createElement(ue.Z,{disabled:!1===(null===jn||void 0===jn?void 0:jn.start),title:Dt?"Update":Bt&&null!==(e=null===Ln||void 0===Ln||null===(n=Ln.processModule)||void 0===n||null===(t=n.module)||void 0===t||null===(o=t.options)||void 0===o?void 0:o.save)&&void 0!==e?e:"Save",loading:to,style:{marginLeft:"0px",display:Ct.components.length>0||Ct.newStepComponents.length>0?"":"none"},clicked:function(){var e,n,t,o,l,i;return rl?yt("Saving is not allowed in Edit Mode"):1==(null===Ln||void 0===Ln||null===(e=Ln.processModule)||void 0===e||null===(n=e.module)||void 0===n||null===(t=n.options)||void 0===t?void 0:t.emailOutputs)&&1==(null===Ln||void 0===Ln||null===(o=Ln.processModule)||void 0===o||null===(l=o.module)||void 0===l||null===(i=l.options)||void 0===i?void 0:i.selectiveEmail)&&Bt?bo(!0):Yl()}}):a.createElement(ue.Z,{disabled:!1===(null===jn||void 0===jn?void 0:jn.start),title:"Next",style:{width:"80px"},clicked:function(){var e,n,t,o,l,i,d,a,u;Array.isArray(null===Ln||void 0===Ln||null===(e=Ln.processModule)||void 0===e?void 0:e.back_array)||(Ln.processModule.back_array=[]),null===Ln||void 0===Ln||null===(n=Ln.processModule)||void 0===n||n.back_array.push(null===Ct||void 0===Ct||null===(t=Ct.currentStep)||void 0===t?void 0:t.id);var r,s,c,v,p,m=null===(o=Nl.component_blueprints.find((function(e){return e.selected_fields.filter((function(e){var n,t;return"Dropdown"===e.data_type_name&&(null===(n=e.options)||void 0===n?void 0:n.jump1)&&"decision"===(null===(t=e.options)||void 0===t?void 0:t.type)})).length>0})))||void 0===o||null===(l=o.selected_fields)||void 0===l?void 0:l.find((function(e){var n;return"Dropdown"===e.data_type_name&&(null===(n=e.options)||void 0===n?void 0:n.jump1)})),f=null===(i=Nl.component_blueprints.find((function(e){return e.selected_fields.filter((function(e){var n;return"Value Button"===e.data_type_name&&(null===(n=e.options)||void 0===n?void 0:n.jump1)})).length>0})))||void 0===i||null===(d=i.selected_fields)||void 0===d?void 0:d.filter((function(e){var n;return"Value Button"===e.data_type_name&&(null===(n=e.options)||void 0===n?void 0:n.jump1)}));if(null!==m&&void 0!==m&&null!==(a=m.options)&&void 0!==a&&a.jump1&&null!==m&&void 0!==m&&null!==(u=m.options)&&void 0!==u&&u.jump2)if(0==(null===m||void 0===m||null===(r=m.options)||void 0===r?void 0:r.list.indexOf(null===m||void 0===m?void 0:m.value)))ql(null===(c=tt.find((function(e){var n;return e.id===(null===m||void 0===m||null===(n=m.options)||void 0===n?void 0:n.process)})))||void 0===c||null===(v=c.steps)||void 0===v||null===(p=v.find((function(e){return e.id===(null===m||void 0===m?void 0:m.options.jump1)})))||void 0===p?void 0:p.id);else if(1==(null===m||void 0===m||null===(s=m.options)||void 0===s?void 0:s.list.indexOf(null===m||void 0===m?void 0:m.value))){var h,g,b;ql(null===(h=tt.find((function(e){var n;return e.id===(null===m||void 0===m||null===(n=m.options)||void 0===n?void 0:n.process)})))||void 0===h||null===(g=h.steps)||void 0===g||null===(b=g.find((function(e){return e.id===(null===m||void 0===m?void 0:m.options.jump2)})))||void 0===b?void 0:b.id)}else{var M;null===Ln||void 0===Ln||null===(M=Ln.processModule)||void 0===M||M.back_array.pop(),_.h.dispatch((0,y.Xc)({show:!0,message:"Please select a value for ".concat(null===m||void 0===m?void 0:m.field_name),color:"red",bottom:!1}))}else if((null===f||void 0===f?void 0:f.length)>0){var Z,E,C,S,w,x=f.filter((function(e){return void 0!==e.value}));if(1==x.length)ql(null===(Z=tt.find((function(e){var n,t;return e.id===(null===(n=x[0])||void 0===n||null===(t=n.options)||void 0===t?void 0:t.process)})))||void 0===Z||null===(E=Z.steps)||void 0===E||null===(C=E.find((function(e){var n;return e.id===(null===(n=x[0])||void 0===n?void 0:n.options.jump1)})))||void 0===C?void 0:C.id);else null===Ln||void 0===Ln||null===(S=Ln.processModule)||void 0===S||null===(w=S.back_array)||void 0===w||w.pop(),_.h.dispatch((0,y.Xc)({show:!0,message:"A selection is required",color:"red",bottom:!1})),window.scrollTo({top:0,behavior:"smooth"})}else if((null===Nl||void 0===Nl?void 0:Nl.next_steps.length)>1||Pl.length>1||Dl.length>1)rt(!ut);else if(1===Nl.next_steps.length){var k;ql(null===Nl||void 0===Nl||null===(k=Nl.next_steps[0])||void 0===k?void 0:k.id)}else{var I;ql(null===(I=Ln.processModule.steps[Ln.processModule.steps.findIndex((function(e){return e.id===Nl.id}))+1])||void 0===I?void 0:I.id)}}}),ut&&a.createElement("div",{className:u.goToNextStep},null===Nl||void 0===Nl?void 0:Nl.next_steps.map((function(e,n){return a.createElement("div",{key:n,onClick:function(){return ql(e.id)},className:u.nextStepsContainer},a.createElement("div",{className:u.nextStepImageContainer},a.createElement("img",{alt:"",src:r.c6V})),a.createElement("p",null,null===e||void 0===e?void 0:e.name))})),null===Pl||void 0===Pl?void 0:Pl.map((function(e,n){return a.createElement("div",{key:n,onClick:function(){return ql(e.id)},className:u.nextStepsContainer},a.createElement("div",{className:u.nextStepImageContainer},a.createElement("img",{alt:"",src:r.th9})),a.createElement("p",null,null===e||void 0===e?void 0:e.name))})),null===Dl||void 0===Dl?void 0:Dl.map((function(e,n){return a.createElement("div",{key:n,onClick:function(){return function(e){_.h.dispatch((0,y.pU)(e)),rt(!1)}(e)},className:u.nextStepsContainer},a.createElement("div",{className:u.nextStepImageContainer},a.createElement("img",{alt:"",src:r.IR8})),a.createElement("p",null,null===e||void 0===e?void 0:e.name))}))))}())),(null===Ln||void 0===Ln||null===(fe=Ln.processModule)||void 0===fe||null===(_e=fe.module)||void 0===_e||null===(ye=_e.options)||void 0===ye?void 0:ye.ads)&&Sl&&0==(null===Nl||void 0===Nl||null===(ze=Nl.component_blueprints)||void 0===ze?void 0:ze.filter((function(e){var n;return 1==(null===(n=e.options)||void 0===n?void 0:n.asModuleList)})).length)&&a.createElement("div",{style:{textAlign:"center"}},function(e){if(e){var n=L.Z([Pe.Z(j.Z("created_date"))])(zn.filter((function(n){return n.module_id===e.id}))).filter((function(e){var n;return(null===(n=e.component_fields)||void 0===n?void 0:n.filter((function(e){var n;return"Status"===e.data_type_name&&!(e.value===(null===(n=jn.misc_info)||void 0===n?void 0:n.lock)||"Closed"===e.value||"Cancelled"===e.value||"Hide"===e.value)})).length)>0})).map((function(e,n){var t,o,l,i,d=e.component_fields.find((function(e){var n,t,o;return"Link"===e.data_type_name&&((null!==(n=null===e||void 0===e?void 0:e.value)&&void 0!==n?n:"").includes("jpg")||(null!==(t=null===e||void 0===e?void 0:e.value)&&void 0!==t?t:"").includes("png")||(null!==(o=null===e||void 0===e?void 0:e.value)&&void 0!==o?o:"").includes("pdf"))}));return a.createElement("div",{key:n,className:u.imageCard,onClick:function(){}},d&&(null!==(t="".concat(null===d||void 0===d?void 0:d.value))&&void 0!==t&&t.includes("jpg")||null!==(o="".concat(null===d||void 0===d?void 0:d.value))&&void 0!==o&&o.includes("jpeg")||null!==(l="".concat(null===d||void 0===d?void 0:d.value))&&void 0!==l&&l.includes("png")||null!==(i="".concat(null===d||void 0===d?void 0:d.value))&&void 0!==i&&i.includes("pdf"))&&null!==d&&void 0!==d&&d.value.includes("pdf")?a.createElement("embed",{src:"".concat(null===d||void 0===d?void 0:d.value,"#toolbar=0&navpanes=0&scrollbar=0&zoom=100%"),width:"1000px",height:"1000px"}):a.createElement("img",{alt:"lg",src:null===d||void 0===d?void 0:d.value,style:{objectFit:"contain",height:"100vh",borderRadius:"5px"}}))}));return(null===n||void 0===n?void 0:n.length)>0&&a.createElement(v.U7,{isOpen:Sl,onClose:function(){localStorage.setItem("showAdsDate",(0,V.now)()),wl(!1)},backdropColor:!0,blured:!1,scrollable:!0,shadowedContainerStyle:{width:"60%",minWidth:"600px",backgroundColor:"var(--app-color-gray-lightest)"}},a.createElement("div",{className:u.center,style:{display:(null===n||void 0===n?void 0:n.length)>0?"":"none",flexDirection:"column"}},(null===n||void 0===n?void 0:n.length)>1?a.createElement(je.tq,{slidesPerView:"auto",centeredSlides:!0,spaceBetween:200,initialSlide:1,pagination:{clickable:!0,dynamicBullets:!0},autoplay:{delay:1e4,disableOnInteraction:!0},modules:[Fe.pt,Fe.tl],className:"mySwiper"},(null===n||void 0===n?void 0:n.length)>0&&n.map((function(e,n){return a.createElement(je.o5,{key:n,className:u.swiperslide},e)}))):n),a.createElement(v.pd,{title:"Do not show popup again?",style:{margin:"0px 20% 20px 20%",width:"auto",backgroundColor:"var(--app-color-gray-lightest)",padding:"10px 50px 10px 50px"},value:!Sl,toggleSelected:function(e){localStorage.setItem("showAdsDate",(0,V.now)()),localStorage.setItem("showAds",!e),wl(!1)}}))}return a.createElement(a.Fragment,null)}(Fn.find((function(e){var n,t,o;return e.id===(null===Ln||void 0===Ln||null===(n=Ln.processModule)||void 0===n||null===(t=n.module)||void 0===t||null===(o=t.options)||void 0===o?void 0:o.ads)})))),Ml&&a.createElement(Le.Z,{openModal:Ml,setOpenModal:Zl,dialogHandler:function(){Ln.processModule.back_array=[],Bo(zn.filter((function(e){var n,t;return e.module_id===(null===Ln||void 0===Ln||null===(n=Ln.processModule)||void 0===n||null===(t=n.module)||void 0===t?void 0:t.id)}))),Ul(Ln.processModule.steps[0].id),sl(!1),Zl(!1)},title:"You have unsaved items. Are you sure you want to cancel?",proceedTitle:"Yes",cancelTitle:"No, return back",loading:to}),yl&&Ln.processModule.stepIndex>0&&a.createElement(v.U7,{isOpen:yl,onClose:function(){return hl(!1)},backdropColor:!0,blured:!0,scrollable:!0,shadowedContainerStyle:{width:O.tq?"100%":"40%"}},a.createElement("div",{style:{padding:"30px"}},a.createElement("p",{className:u.deleteText},"There were unsaved data for ".concat(Ot.title,". Do you want to restore them?")),a.createElement("div",{style:{display:"flex",justifyContent:"center"}},a.createElement(ue.Z,{title:"Yes, restore",clicked:function(){_.h.dispatch((0,y.Xc)({show:!0,message:"Reverting to saved data from the cache. Press Save to permanently save these records. Cancel to revert back",color:"red",spinner:!1,bottom:!0})),Ct.items=JSON.parse(localStorage.getItem("items")),Ct.newStepComponents=JSON.parse(localStorage.getItem("newStepComponents")),localStorage.removeItem("transaction"),hl(!1)}}),a.createElement(ue.Z,{title:"No, use the current data as is",light:!0,clicked:function(){localStorage.removeItem("transaction"),hl(!1)}})))),co&&a.createElement(v.U7,{isOpen:p.v7,onClose:function(){},backdropColor:!0,blured:!0,scrollable:!0,shadowedContainerStyle:{width:O.tq?"100%":"20%"}},a.createElement("div",null,a.createElement("p",{className:u.deleteText},"Are you sure you want to delete ".concat(Ot.title,"?")),a.createElement("div",{style:{display:"flex",justifyContent:"center"}},a.createElement(ue.Z,{title:"Delete",clicked:function(){ko(!0),(0,p.v7)(Ot.id).pipe((0,h.P)()).subscribe({next:function(){ko(!1),It(!1),vo(!1)},complete:function(){},error:function(){ko(!1),vo(!1)}})},loading:xo}),a.createElement(ue.Z,{title:"No",light:!0,clicked:function(){return vo(!1)}})))),fo&&a.createElement(v.U7,{isOpen:fo,onClose:function(){},backdropColor:!0,blured:!0,scrollable:!0,shadowedContainerStyle:{width:O.tq?"100%":"20%"}},a.createElement("div",null,a.createElement("p",{className:u.deleteText},"Are you sure you want to copy ".concat(Ot.title,"? This will create a new copy")),a.createElement("div",{style:{display:"flex",justifyContent:"center"}},a.createElement(ue.Z,{title:"Yes, copy",clicked:function(){var e;It(!1),_o(!1),Ol();var n=[];Ie.Z(Ne.Z("group"))(null!==(e=null===Ot||void 0===Ot?void 0:Ot.component_fields)&&void 0!==e?e:[]).map((function(e){n=[].concat((0,i.Z)(n),[{id:e.component_blueprint_id,temp_id:e.id,selected_fields:Te.Z(Ae.Z("group",e.group))(Ot.component_fields)}])})),Ln.processModule.steps.filter((function(e){e.component_blueprints.filter((function(e){e.selected_fields.filter((function(e){var n=Ot.component_fields.find((function(n){return n.procedure_step_blueprint_field_id===e.procedure_step_blueprint_field_id}));if(void 0!=n)"ID"===e.data_type_name||"Status"===e.data_type_name?e.value=void 0:e.value=n.value;else if("Record"===e.data_type_name){var t=Ot.component_fields.find((function(n){return n.field_name===e.options.name}));void 0!=t&&(e.value=t.value)}}))}))})),St({action:b._U.addModuleComponents,value:n}),St({action:b._U.setModuleItems,value:Ot.component_items}),Tt(!1),Ln.processModule.isUpdating=!1,Ut({})}}),a.createElement(ue.Z,{title:"No",light:!0,clicked:function(){return _o(!1)}})))),Eo&&a.createElement(v.U7,{isOpen:Eo,onClose:function(){},backdropColor:!0,blured:!1,scrollable:!0,shadowedContainerStyle:{width:O.tq?"100%":"20%"}},a.createElement("div",null,a.createElement("p",{className:u.deleteText},"Cannot delete ".concat(Ot.title,". Some transactions and master data are using this item")),a.createElement("div",{style:{display:"flex",justifyContent:"center"}},a.createElement(ue.Z,{title:"Close",light:!0,clicked:function(){return Co(!1)}}))))),pl&&a.createElement(v.U7,{isOpen:pl,onClose:function(){},backdropColor:!0,blured:!1,scrollable:!0,shadowedContainerStyle:{width:O.tq?"100%":"80%"}},a.createElement(Oe.default,{hasCloseIcon:!0,label:null===Ln||void 0===Ln||null===(Ge=Ln.processModule)||void 0===Ge||null===(Je=Ge.module)||void 0===Je?void 0:Je.name,withBack:!1,paymentPath:"begin-module",onClose:function(){return ml(!1)},companyData:jn,subscriptionInfo:{user_id:Qn.id,ref:Ct.id,plan_price:null!==(Xe=null===Ct||void 0===Ct?void 0:Ct.plan)&&void 0!==Xe?Xe:0,currency:null!==(Qe=null===Ct||void 0===Ct?void 0:Ct.currency)&&void 0!==Qe?Qe:"PHP",plan:"CC-".concat(Ct.id),total:null!==(Ke=+(null===Ct||void 0===Ct?void 0:Ct.total))&&void 0!==Ke?Ke:0,billable_users:[Qn],duration:0,dlabel:Ct.id},onError:function(e){yt(e),pt(!0),ml(!1),_.h.dispatch((0,y.Xc)({show:!0,message:"Transaction was created but the selected payment mode encountered an issue. Please select another payment option. You may also manually attach your proof of payment",color:"red",bottom:!0})),_.h.dispatch((0,y.RV)({})),Rl()}})),go&&a.createElement(v.U7,{isOpen:go,onClose:function(){return bo(!1)},backdropColor:!0,blured:!0,scrollable:!0,shadowedContainerStyle:{width:O.tq?"100%":"15%"}},a.createElement("div",null,a.createElement(v.jL,{ungrouped:!0,title:"nonmanager"===Qn.user_type?"Type an email address to send copy of this transaction (optional)":"Select users to email this transaction (Optional)",columned:!0,withAckButton:!1},"nonmanager"===Qn.user_type?a.createElement("input",{placeholder:"Use comma, no space, for multiple email addresses",className:u.emailInput,onChange:function(e){new RegExp(/^([a-z0-9!#$%&'*+/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*)(([, ]+[a-z0-9!#$%&'*+/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])\.([a-z0-9]([a-z0-9-]*[a-z0-9]))*)?)*$/).test(e.target.value)&&dl(e.target.value.split(","))}}):a.createElement(Me.Cm,{id:"Users",tagEmplacement:"inlined",searchable:!1,items:nl.filter((function(e){var n;return e.department===(null===(n=Qn.departments[0])||void 0===n?void 0:n.name)})),groupedBy:"department",groupname:"department",triggerType:"chevron",initialSelectedValues:[],className:u.peoplePositionsSelect,inputClassName:u.peoplePositionsSelectInput,molclassname:u.peoplePositionsSelectMenuOverlay,moliclassname:u.peoplePositionsSelectMenuOverlayItem,onChange:function(e){e.length>0?dl(null===e||void 0===e?void 0:e.map((function(e){return null===e||void 0===e?void 0:e.user.email}))):dl([])}})),a.createElement("div",{style:{display:"flex",justifyContent:"center"}},a.createElement(ue.Z,{title:"Back",light:!0,clicked:function(){return bo(!1)}}),a.createElement(ue.Z,{disabled:!1===(null===jn||void 0===jn?void 0:jn.start),title:Dt?"Update":Bt&&null!==($e=null===Ln||void 0===Ln||null===(en=Ln.processModule)||void 0===en||null===(nn=en.module)||void 0===nn||null===(tn=nn.options)||void 0===tn?void 0:tn.save)&&void 0!==$e?$e:"Save",loading:to,style:{marginLeft:"0px"},clicked:function(){bo(!1),Yl()}})))),kt&&a.createElement(v.U7,{isOpen:kt,onClose:function(){return It(!1)},hasCloseIcon:!!O.tq,backdropColor:!0,blured:!1,scrollable:!0,shadowedContainerStyle:{width:O.tq||Kt?"100%":"50%",height:"auto",minWidth:O.tq?"100%":"1000px"}},a.createElement("div",{"app-variant-is-mobile":O.tq?"true":"false",style:{display:"flex",justifyContent:"center",flexDirection:"column"}},a.createElement(He,{ref:Tl,begunModule:Ln,allModules:Fn,companyData:jn,components:zn,selectedComponent:Ot,companyUsersArray:Gn,print:Kt,step:r.Nbs,companyPositionsArray:Kn}),(null===Ot||void 0===Ot||null===(on=Ot.component_fields)||void 0===on?void 0:on.length)>0&&a.createElement("div",{style:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"center"}},!O.tq&&a.createElement(ue.Z,{title:"Close",style:{width:O.tq?"100%":"100px"},clicked:function(){It(!1),$t(!1)}}),(null===Ot||void 0===Ot||null===(ln=Ot.component_fields)||void 0===ln?void 0:ln.length)>0&&a.createElement(a.Fragment,null,(0,Q.cQ)(null===Ot||void 0===Ot?void 0:Ot.status,$l,Ot,Qn,Ln,jn)&&(null===Ln||void 0===Ln||null===(dn=Ln.processModule)||void 0===dn||null===(an=dn.steps)||void 0===an||null===(un=an.find((function(e){return e.component_blueprints.filter((function(e){return e.selected_fields.filter((function(e){return"Action Button"===e.data_type_name})).length>0})).length>0})))||void 0===un||null===(rn=un.component_blueprints.find((function(e){return e.selected_fields.filter((function(e){return"Action Button"===e.data_type_name})).length>0})))||void 0===rn?void 0:rn.selected_fields.filter((function(e){return"Action Button"===e.data_type_name})).map((function(e,n){var t,o,i,d;if("status"===e.options.action){var r,s,c,v,m,f,g,b,M,Z=(null===jn||void 0===jn||null===(r=jn.misc_info)||void 0===r||null===(s=r.status)||void 0===s?void 0:s.length)>0?null===jn||void 0===jn||null===(c=jn.misc_info)||void 0===c?void 0:c.status:[{label:"Ongoing",value:"Ongoing"},{label:"Pending",value:"Pending"},{label:"Awaiting Payment",value:"Awaiting Payment"},{label:"Awaiting Fulfillment",value:"Awaiting Fulfillment"},{label:"Awaiting Shipment",value:"Awaiting Shipment"},{label:"Awaiting Pickup",value:"Awaiting Pickup"},{label:"Partially Shipped",value:"Partially Shipped"},{label:"Completed",value:"Completed"},{label:"Shipped",value:"Shipped"},{label:"Cancelled",value:"Cancelled"},{label:"Declined",value:"Declined"},{label:"Refunded",value:"Refunded"},{label:"Disputed",value:"Disputed"},{label:"Done",value:"Done"},{label:"Closed (Will lock Edit)",value:"Closed"}];if((null===jn||void 0===jn||null===(v=jn.misc_info)||void 0===v||null===(m=v.rules)||void 0===m?void 0:m.length)>0)null===jn||void 0===jn||null===(M=jn.misc_info)||void 0===M||M.rules.filter((function(e){return"status"===e.type})).filter((function(n){n.valueCondition===e.value&&(Z="0"===n.allow?Z.filter((function(e){return n.values.includes(e.value)})):Z.filter((function(e){return!n.values.includes(e.value)})))}));return a.createElement("div",{key:n,style:{width:"100%",display:"user"===e.options.action&&null!==(f=Ot.component_fields)&&void 0!==f&&null!==(g=f.find((function(n){return n.procedure_step_blueprint_field_id===e.procedure_step_blueprint_field_id})))&&void 0!==g&&g.value?"none":""}},a.createElement(ce.Z,{titleProps:{fontSize:"16px",color:"var(--app-color-gray-light)"},className:u.multiselectComponent,key:n,visible:e.visible,mandatory:e.mandatory,value:null!==(b=e.value)&&void 0!==b?b:"",items:Z,error:e.errors,onChange:function(n){var t,o,i,d;if(null!==(t=Ln.processModule)&&void 0!==t&&null!==(o=t.module)&&void 0!==o&&null!==(i=o.options)&&void 0!==i&&i.credits&&(n===(null===(d=jn.options)||void 0===d?void 0:d.lock)||"Closed"===n)){var a,u,r,s,c,v,m,f,g,b,M=null===Ln||void 0===Ln||null===(a=Ln.processModule)||void 0===a||null===(u=a.steps)||void 0===u||null===(r=u.find((function(e){return e.component_blueprints.filter((function(e){return e.selected_fields.filter((function(e){return"Payments"===e.data_type_name})).length>0})).length>0})))||void 0===r||null===(s=r.component_blueprints.find((function(e){return e.selected_fields.filter((function(e){return"Payments"===e.data_type_name})).length>0})))||void 0===s?void 0:s.selected_fields.find((function(e){return"Payments"===e.data_type_name})),Z=null===(c=Ct.newStepComponents.concat(Ct.components).find((function(e){return e.selected_fields.filter((function(e){var n;return e.field_name===(null===M||void 0===M||null===(n=M.options)||void 0===n?void 0:n.paymentField)})).length>0})))||void 0===c||null===(v=c.selected_fields)||void 0===v?void 0:v.find((function(e){var n;return e.field_name===(null===M||void 0===M||null===(n=M.options)||void 0===n?void 0:n.paymentField)})),E=0;if(null===(m=Ln.processModule)||void 0===m||null===(f=m.selectedComponent.payments)||void 0===f||!f.stripe_id)return It(!1),Ln.processModule.showDetail=!1,void _.h.dispatch((0,y.Xc)({show:!0,message:"Check support payment docs",color:"red",spinner:!1,bottom:!0}));if(!(+(null!==(g=null===Z||void 0===Z?void 0:Z.value)&&void 0!==g?g:0)>0))return void _.h.dispatch((0,y.Xc)({show:!0,message:"No amount found",color:"red",spinner:!1,bottom:!0}));E=+(null!==(b=null===Z||void 0===Z?void 0:Z.value)&&void 0!==b?b:0),"Cash"!==(null===M||void 0===M?void 0:M.value)&&(0,Re.e_)({user_id:Qn.id,id:(0,Q.mR)(),total:E,product:"CR-".concat(null===Ot||void 0===Ot?void 0:Ot.title),notes:"Wallet",quantity:1}).pipe((0,h.P)()).subscribe({next:function(){var e;Qn.wallet=+(+(null!==(e=null===Qn||void 0===Qn?void 0:Qn.wallet)&&void 0!==e?e:0)+E)}})}jn.start=!0,oo(!0),(0,p.C0)({component_id:Ot.id,index:0,group:99,value:n,procedure_step_blueprint_field_id:e.procedure_step_blueprint_field_id}).subscribe({next:function(e){oo(!1),It(!1),_.h.dispatch((0,y.q4)((0,l.Z)((0,l.Z)({},Ln.processModule),{},{showDetail:!1})))},error:function(){},complete:function(){}})},fieldIcon:e.icon,fieldLabel:e.field_name,placeholder:"Select status..."}))}return a.createElement("div",{key:n,style:{display:"flex",flexDirection:O.tq?"column":"row"}},a.createElement(ue.Z,{light:!0,title:e.field_name,loading:to,clicked:function(){if("user"===e.options.action||"creator"===e.options.action){var n,t,o,i="user"===e.options.action?Qn:Gn.find((function(e){var n;return e.id===(null===(n=Ot.created_by)||void 0===n?void 0:n.id)}));if(null!==(n=Ln.processModule)&&void 0!==n&&null!==(t=n.module)&&void 0!==t&&null!==(o=t.options)&&void 0!==o&&o.credits){var d,a,u,r,s,c,v,m,f,g=null===(d=Ot.component_fields)||void 0===d?void 0:d.find((function(e){return"Payments"===e.data_type_name&&(null===e||void 0===e?void 0:e.value)})),b=null===(a=Ct.newStepComponents.concat(Ct.components).find((function(e){return e.selected_fields.filter((function(e){var n;return e.field_name===(null===g||void 0===g||null===(n=g.options)||void 0===n?void 0:n.paymentField)})).length>0})))||void 0===a||null===(u=a.selected_fields)||void 0===u?void 0:u.find((function(e){var n;return e.field_name===(null===g||void 0===g||null===(n=g.options)||void 0===n?void 0:n.paymentField)}));if(!b)b=null===(f=Ot.component_fields)||void 0===f?void 0:f.find((function(e){var n;return e.field_name===(null===g||void 0===g||null===(n=g.options)||void 0===n?void 0:n.paymentField)}));var M=0;if(void 0===(null===i||void 0===i?void 0:i.wallet)||0===(null===i||void 0===i?void 0:i.wallet))return _.h.dispatch((0,y.Xc)({show:!0,message:"You need to setup funds for your wallet",color:"red",spinner:!1,bottom:!0})),Ln.processModule.showDetail=!1,void It(!1);if(+(null!==(r=null===(s=b)||void 0===s?void 0:s.value)&&void 0!==r?r:0)>0&&"Cash"===(null===g||void 0===g?void 0:g.value)){var Z,E,C,S;if((null!==(Z=+(null===i||void 0===i?void 0:i.wallet))&&void 0!==Z?Z:0)<+(null===(E=b)||void 0===E?void 0:E.value))return _.h.dispatch((0,y.Xc)({show:!0,message:"Insufficient funds in wallet",color:"red",spinner:!1,bottom:!0})),Ln.processModule.showDetail=!1,void It(!1);M=null!==(C=null===(S=b)||void 0===S?void 0:S.value)&&void 0!==C?C:0}else if(null===(c=Ln.processModule)||void 0===c||null===(v=c.selectedComponent)||void 0===v||null===(m=v.payments)||void 0===m||!m.stripe_id)return It(!1),Ln.processModule.showDetail=!1,void _.h.dispatch((0,y.Xc)({show:!0,message:"Check support payment docs",color:"red",spinner:!1,bottom:!0}));"Cash"===(null===g||void 0===g?void 0:g.value)&&(0,Re.e_)({user_id:Qn.id,id:(0,Q.mR)(),total:-M,product:"DB-".concat(null===Ot||void 0===Ot?void 0:Ot.title),notes:"Wallet",quantity:1}).pipe((0,h.P)()).subscribe({next:function(){var e;return i.wallet=+(+(null!==(e=null===i||void 0===i?void 0:i.wallet)&&void 0!==e?e:0)-M)},error:function(){return _.h.dispatch((0,y.Xc)({show:!0,message:"Purchase error encountered",color:"red",spinner:!1,bottom:!0}))}})}oo(!0),(0,p.C0)({component_id:Ot.id,index:0,group:99,value:i.id,procedure_step_blueprint_field_id:e.procedure_step_blueprint_field_id}).subscribe({next:function(e){(0,p.dn)(Ot.id,i.id).subscribe({next:function(e){oo(!1),It(!1),_.h.dispatch((0,y.q4)((0,l.Z)((0,l.Z)({},Ln.processModule),{},{showDetail:!1})))}})},error:function(){},complete:function(){}})}else"status"===e.options.action||"date"===e.options.action||e.options.action,oo(!1)},style:{backgroundColor:"green",color:"white",width:O.tq?"100%":"100px",display:"user"===e.options.action&&null!==(t=Ot.component_fields)&&void 0!==t&&null!==(o=t.find((function(n){return n.procedure_step_blueprint_field_id===e.procedure_step_blueprint_field_id})))&&void 0!==o&&o.value?"none":""}}),a.createElement(ue.Z,{title:"Decline",light:!0,loading:to,clicked:function(){var e,n;Tt(!0),oo(!0);var t=Ot.component_fields.find((function(e){var n;return"People"===e.data_type_name&&!0===(null===(n=e.options)||void 0===n?void 0:n.calendar)}));(0,p.KL)((0,l.Z)((0,l.Z)({},Ot),{},{selected_fields:t?Ot.component_fields.filter((function(e){return e.id!==t.id})):Ot.component_fields,assigned_to:{id:""}}),Ot.id,null===(e=Ot.shared_users)||void 0===e?void 0:e.map((function(e){return null===e||void 0===e?void 0:e.id})),Ot.title,Ot.is_complete,null===(n=Ot.shared_positions)||void 0===n?void 0:n.map((function(e){return null===e||void 0===e?void 0:e.id}))).subscribe({error:function(e){_.h.dispatch((0,y.Xc)({show:!0,message:"Errors found",color:"red"}))},next:function(e){_.h.dispatch((0,y.aT)(Ot.id)),oo(!1),It(!1),_.h.dispatch((0,y.q4)((0,l.Z)((0,l.Z)({},Ln.processModule),{},{showDetail:!1})))}})},style:{backgroundColor:"red",color:"white",width:O.tq?"100%":"100px",display:"user"===e.options.action&&null!==(i=Ot.component_fields)&&void 0!==i&&null!==(d=i.find((function(n){return n.procedure_step_blueprint_field_id===e.procedure_step_blueprint_field_id})))&&void 0!==d&&d.value?"none":""}}))})))),!Kt&&a.createElement(ue.Z,{title:"Print",style:{width:"100px",display:O.tq?"none":""},light:!0,clicked:function(){$t(!0)}}),Kt&&a.createElement(se(),{trigger:function(){return a.createElement("button",{className:u.singleButton},"Send to Printer")},content:function(){return Tl.current}}),(void 0===(null===Ot||void 0===Ot?void 0:Ot.status)&&((null===(sn=Ql)||void 0===sn?void 0:sn.filter((function(e){return Qn.positions.map((function(e){return e.id})).indexOf(e)>-1})).length)>0||(null===Kl||void 0===Kl?void 0:Kl.filter((function(e){return Qn.positions.map((function(e){return e.id})).indexOf(e)>-1})).length)>0)||(void 0===(null===Ot||void 0===Ot?void 0:Ot.status)||"New"===(null===Ot||void 0===Ot?void 0:Ot.status)||"Show"===(null===Ot||void 0===Ot?void 0:Ot.status)||"None"===(null===Ot||void 0===Ot?void 0:Ot.status))&&((null===Ot||void 0===Ot||null===(cn=Ot.created_by)||void 0===cn?void 0:cn.id)===(null===Qn||void 0===Qn?void 0:Qn.id)||(null===Ot||void 0===Ot||null===(vn=Ot.assigned_to)||void 0===vn?void 0:vn.id)===(null===Qn||void 0===Qn?void 0:Qn.id))||void 0!==(null===Ot||void 0===Ot?void 0:Ot.status)&&!("Hide"===(null===Ot||void 0===Ot?void 0:Ot.status)||"Closed"===(null===Ot||void 0===Ot?void 0:Ot.status)||(null===Ot||void 0===Ot?void 0:Ot.status)===(null===jn||void 0===jn||null===(pn=jn.misc_info)||void 0===pn?void 0:pn.lock)||"Cancelled"===(null===Ot||void 0===Ot?void 0:Ot.status))&&((null===(mn=Ql)||void 0===mn?void 0:mn.filter((function(e){return Qn.positions.map((function(e){return e.id})).indexOf(e)>-1})).length)>0||(null===Kl||void 0===Kl?void 0:Kl.filter((function(e){return Qn.positions.map((function(e){return e.id})).indexOf(e)>-1})).length)>0)&&(1!=(null===Ln||void 0===Ln||null===(fn=Ln.processModule)||void 0===fn||null===(_n=fn.module)||void 0===_n||null===(yn=_n.options)||void 0===yn?void 0:yn.strict)||(null===Ot||void 0===Ot||null===(hn=Ot.created_by)||void 0===hn?void 0:hn.id)!==(null===Qn||void 0===Qn?void 0:Qn.id))||(!1===(null===Ot||void 0===Ot?void 0:Ot.is_complete)||(null===Xl||void 0===Xl||null===(gn=Xl.options)||void 0===gn?void 0:gn.control))&&(null===Ot||void 0===Ot||null===(bn=Ot.created_by)||void 0===bn?void 0:bn.id)===(null===Qn||void 0===Qn?void 0:Qn.id))&&a.createElement(a.Fragment,null,a.createElement(ue.Z,{title:"Edit",style:{backgroundColor:O.tq?"var(--app-color-blue)":"",color:O.tq?"white":"",width:(O.tq,"100px"),display:"trial_ended"===jn.status||"inactive"===jn.status?"none":0===(null===(Mn=Ot.component_fields)||void 0===Mn?void 0:Mn.filter((function(e){return"Action Button"===e.data_type_name&&"user"===e.options.action})).length)||0===(null===(Zn=Ot.component_fields)||void 0===Zn?void 0:Zn.filter((function(e){return"Action Button"===e.data_type_name&&"user"===e.options.action&&void 0===e.value})).length)&&((null===(En=Ot.component_fields)||void 0===En?void 0:En.filter((function(e){return"Action Button"===e.data_type_name&&"user"===e.options.action&&e.value===(null===Qn||void 0===Qn?void 0:Qn.id)})).length)>0||(null===Ot||void 0===Ot||null===(Cn=Ot.assigned_to)||void 0===Cn?void 0:Cn.id)===(null===Qn||void 0===Qn?void 0:Qn.id))?"":"none"},light:!0,clicked:function(){var e,n,t,o,l;It(!1),Tt(!0),Ln.processModule.isUpdating=!0,(null===Ln||void 0===Ln||null===(e=Ln.processModule)||void 0===e||null===(n=e.steps)||void 0===n?void 0:n.length)>0&&(null===Ln||void 0===Ln||null===(t=Ln.processModule)||void 0===t||null===(o=t.steps)||void 0===o||o.filter((function(e){var n;return null===e||void 0===e||null===(n=e.component_blueprints)||void 0===n?void 0:n.filter((function(e){return e.selected_fields.filter((function(e){return e.value=void 0}))}))})));var d=[];Ie.Z(Ne.Z("group"))(null!==(l=null===Ot||void 0===Ot?void 0:Ot.component_fields)&&void 0!==l?l:[]).map((function(e){d=[].concat((0,i.Z)(d),[{id:e.component_blueprint_id,temp_id:e.id,selected_fields:Te.Z(Ae.Z("group",e.group))(Ot.component_fields)}])})),Ln.processModule.steps.filter((function(e){e.component_blueprints.filter((function(e){var n,t,o,l,i,d;return(0==(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.asDashboard)||!(null!==e&&void 0!==e&&null!==(t=e.options)&&void 0!==t&&t.asDashboard))&&(0==(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.asReport)||!(null!==e&&void 0!==e&&null!==(l=e.options)&&void 0!==l&&l.asReport))&&(0==(null===e||void 0===e||null===(i=e.options)||void 0===i?void 0:i.asModuleList)||!(null!==e&&void 0!==e&&null!==(d=e.options)&&void 0!==d&&d.asModuleList))})).filter((function(e){e.selected_fields.filter((function(e){var n=Ot.component_fields.find((function(n){return n.field_name===e.field_name}));if(void 0!=n)e.value=n.value,e.group=n.group;else if("Record"===e.data_type_name){var t=Ot.component_fields.find((function(n){return n.field_name===e.options.name}));void 0!=t&&(e.value=t.value,e.value=t.group)}}))}))})),Ct.components=d,Ct.items=JSON.parse(JSON.stringify(Ot.component_items)),Ct.newStepComponents=[],jn.start=!0,Ul()}}),(null===Ln||void 0===Ln||null===(Sn=Ln.processModule)||void 0===Sn||null===(wn=Sn.module)||void 0===wn||null===(xn=wn.options)||void 0===xn?void 0:xn.canCancel)&&"New"===Ot.status&&!(null!==(kn=Ot.assigned_to)&&void 0!==kn&&kn.id)&&a.createElement(ue.Z,{title:"Cancel",style:{backgroundColor:"red",color:"white",width:O.tq?"100%":"100px"},clear:!0,clicked:function(){(0,p.tE)(null===Ot||void 0===Ot?void 0:Ot.id,"Cancelled").pipe((0,h.P)()).subscribe({next:function(e){}})}})),(null===Ln||void 0===Ln||null===(In=Ln.processModule)||void 0===In||null===(Nn=In.module)||void 0===Nn||null===(Pn=Nn.options)||void 0===Pn?void 0:Pn.canCancel)&&("New"===Ot.status||"Unassigned"===Ot.status)&&!(null!==(Dn=Ot.assigned_to)&&void 0!==Dn&&Dn.id)&&a.createElement(ue.Z,{loading:to,title:"Cancel Transaction",style:{backgroundColor:"red",color:"white",width:"100%"},clear:!0,clicked:function(){oo(!0),(0,p.tE)(null===Ot||void 0===Ot?void 0:Ot.id,"Cancelled").pipe((0,h.P)()).subscribe({next:function(e){var n;if(oo(!1),null!==e&&void 0!==e&&null!==(n=e.data.payments)&&void 0!==n&&n.stripe_id){var t,o=Math.abs(+(null===e||void 0===e||null===(t=e.data.payments)||void 0===t?void 0:t.stripe_price));(0,Re.e_)({user_id:Qn.id,id:(0,Q.mR)(),total:o,product:"RF-".concat(Ot.title),notes:"Wallet",quantity:1}).pipe((0,h.P)()).subscribe({next:function(){var e;Qn.wallet=+(+(null!==(e=null===Qn||void 0===Qn?void 0:Qn.wallet)&&void 0!==e?e:0)+o),oo(!1),It(!1)}})}else oo(!1),It(!1),$t(!1)}})}}),!0===(null===(Tn=Ln.processModule.module)||void 0===Tn?void 0:Tn.options.copyOutputs)&&(null===Ot||void 0===Ot||null===(An=Ot.created_by)||void 0===An?void 0:An.id)===Qn.id&&a.createElement(ue.Z,{title:"Copy",style:{width:(O.tq,"100px"),backgroundColor:O.tq?"green":"",color:O.tq?"white":""},light:!0,clicked:function(){_o(!0)}}),!0===(null===Qn||void 0===Qn?void 0:Qn.is_admin)&&a.createElement(ue.Z,{title:"Delete",style:{width:(O.tq,"100px"),backgroundColor:O.tq?"red":"",color:O.tq?"white":""},light:!0,clicked:function(){var e,n,t;if(!0===(null===Ln||void 0===Ln||null===(e=Ln.processModule)||void 0===e||null===(n=e.module)||void 0===n||null===(t=n.options)||void 0===t?void 0:t.isMaster)){var o=zn.filter((function(e){return e.module_id!==Ot.module_id})).filter((function(e){return-1!=Fn.filter((function(e){var n;return!0===(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.isMaster)})).map((function(e){return e.id})).indexOf(e.module_id)})),l=zn.filter((function(e){return-1!=Fn.filter((function(e){var n;return 1!=(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.isMaster)})).map((function(e){return e.id})).indexOf(e.module_id)})),i=o.filter((function(e){return e.component_fields.filter((function(e){return-1!=Ot.component_fields.map((function(e){return e.value})).indexOf(e.value)})).length>0})).length>0||l.filter((function(e){return e.component_items.filter((function(e){return-1!=Ot.component_fields.map((function(e){return e.value})).indexOf(e.item_code)})).length>0})).length>0||l.filter((function(e){return e.component_fields.filter((function(e){return"output"!==e.data_type&&-1!=Ot.component_fields.map((function(e){return e.value})).indexOf(e.value)})).length>0})).length>0;Co(i),vo(!i)}else vo(!0)}})))),Po&&a.createElement(v.U7,{isOpen:Po,hasCloseIcon:!0,onClose:function(){return nt?Il("/"):Do(!1)},backdropColor:!0,blured:!1,scrollable:!0,shadowedContainerStyle:{width:O.tq?"100%":"30%",height:"auto"}},a.createElement("div",{style:{textAlign:"center",padding:"0 20px"}},a.createElement("p",{className:u.modalTitle},null===(qn=Ln.processModule.module)||void 0===qn?void 0:qn.name),a.createElement("p",{className:u.modalSubTitle},null!==(On=null===Ln||void 0===Ln||null===(Un=Ln.processModule)||void 0===Un||null===(Rn=Un.module)||void 0===Rn||null===(Yn=Rn.options)||void 0===Yn?void 0:Yn.message)&&void 0!==On?On:"Transaction saved"))))}))},55382:function(){},72095:function(){},61219:function(){}}]);
//# sourceMappingURL=4325.cfed541e.chunk.js.map