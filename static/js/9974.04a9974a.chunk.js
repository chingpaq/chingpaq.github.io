"use strict";(self.webpackChunkflowhero=self.webpackChunkflowhero||[]).push([[9974],{40317:function(e,t,n){n.r(t),n.d(t,{default:function(){return z},randomisedColor:function(){return U}});var i=n(93433),a=n(29439),l=n(67861),o=n(39518),r=n(23280),s=n(11577),c=n(10103),u=n(85692),d=n(71982),m=n(75105),p=n(14170),v=n(32588),f=n(40694),y=n(71871),g=n(63789),h=n(1413),x=(n(83381),n(73500)),E=n(79492),Z=n.n(E),C=n(70847),N=n(88374),S=n(34710),b=n(89293),I=n(67861),w=n(66918),_=(0,o.$j)((function(e){var t=e.flowReducer;return{inviteColleguesList:t.inviteColleguesList,companyPositionsArray:t.companyPositionsArray,companyData:t.companyData,companyUsersArray:t.companyUsersArray}}),(function(e){return{onSetInviteColleguesList:function(t){return e((0,N.vj)(t))},onTutorialModalOpen:function(t){return e((0,d.ay)(t))}}}))((function(e){var t,n,i,r,s,u,d,v=e.closeButtonAction,f=e.onContinueButtonAction,y=e.onCancel,g=e.inviteColleguesList,E=e.companyPositionsArray,_=e.companyUsersArray,A=(0,l.useState)({companyEmail:"",firstName:"",lastName:"",position:"",position_id:""}),k=(0,a.Z)(A,2),F=k[0],D=k[1],U=(0,l.useState)({companyEmail:"",firstName:"",lastName:"",position:""}),z=(0,a.Z)(U,2),j=z[0],P=z[1],T=(0,l.useState)("Hongkong"),L=(0,a.Z)(T,2),X=L[0],H=L[1],W=(0,l.useState)(""),B=(0,a.Z)(W,2),M=B[0],R=B[1],q=(0,l.useState)(!1),O=(0,a.Z)(q,2),V=O[0],Y=O[1],$=(0,l.useState)(!1),J=(0,a.Z)($,2),G=J[0],K=J[1],Q=(0,o.I0)();(0,l.useEffect)((function(){}),[g]),(0,l.useEffect)((function(){(0,S.hj)().subscribe({})}),[]);var ee=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};e&&(P((0,h.Z)((0,h.Z)({},M),{},{companyEmail:""})),K(!0),(0,m.fu)({email:e}).pipe((0,c.q)(1)).subscribe({next:function(e){P((0,h.Z)((0,h.Z)({},M),{},{companyEmail:"Email already exists and being used. Please choose another email"})),K(!1)},error:function(e){K(!1),t()}}))},te=(0,l.useCallback)((function(){var e,t,n;if(_.filter((function(e){return e.email===F.companyEmail})).length>0)P((function(e){return(0,h.Z)((0,h.Z)({},e),{},{companyEmail:"Email already exists and being used."})}));else{P({companyEmail:"",firstName:"",lastName:"",position:""}),R("");var i=!0;if((0,C.isEmail)(F.companyEmail)||(i=!1,P((function(e){return(0,h.Z)((0,h.Z)({},e),{},{companyEmail:"Invalid Company email"})}))),(null===(e=F.firstName)||void 0===e?void 0:e.length)<2&&(i=!1,P((function(e){return(0,h.Z)((0,h.Z)({},e),{},{firstName:"Invalid First name"})}))),(null===(t=F.lastName)||void 0===t?void 0:t.length)<2&&(i=!1,P((function(e){return(0,h.Z)((0,h.Z)({},e),{},{lastName:"Invalid Last name"})}))),(null===(n=F.position)||void 0===n?void 0:n.length)<2&&(i=!1,P((function(e){return(0,h.Z)((0,h.Z)({},e),{},{position:"Position id is not considered valid"})}))),i){var a={email:F.companyEmail,first_name:F.firstName,last_name:F.lastName,position_id:F.position_id};K(!0),(0,S.x7)(a).subscribe({next:function(e){Q((0,N.Xc)({show:!0,message:"You have successfully created an invitation to ".concat(F.firstName," "),top:"0"})),f()},error:function(e){var t,n,i,a,l,o,r,s,c;e&&P({companyEmail:(null===e||void 0===e||null===(n=e.data)||void 0===n||null===(i=n.errors)||void 0===i?void 0:i.email)||"",firstName:(null===e||void 0===e||null===(a=e.data)||void 0===a||null===(l=a.errors)||void 0===l?void 0:l.first_name)||"",lastName:(null===e||void 0===e||null===(o=e.data)||void 0===o||null===(r=o.errors)||void 0===r?void 0:r.last_name)||"",position:(null===e||void 0===e||null===(s=e.data)||void 0===s||null===(c=s.errors)||void 0===c?void 0:c.position_id)||""});R("status ".concat(null===e||void 0===e?void 0:e.status,": ").concat(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)),K(!1)},complete:function(){return K(!1)}})}}}),[F]),ne=function(){_.filter((function(e){return e.email===F.companyEmail})).length>0?P((function(e){return(0,h.Z)((0,h.Z)({},e),{},{companyEmail:"Email already exists"})})):_.filter((function(e){return e.username===F.username})).length>0?P((function(e){return(0,h.Z)((0,h.Z)({},e),{},{username:"Username already exists"})})):(Y(!0),(0,m.r4)({email:F.companyEmail,username:F.username,first_name:F.firstName,last_name:F.lastName,timezone:X,position_id:[F.position_id]}).subscribe({next:function(e){Q((0,N.Xc)({show:!0,message:"You have successfully created ".concat(F.firstName,'. Default password is "P@ssw0rd"'),top:"0"})),f()},error:function(e){var t,n,i,a,l,o,r,s,c,u,d;e&&P({companyEmail:(null===e||void 0===e||null===(n=e.data)||void 0===n||null===(i=n.errors)||void 0===i?void 0:i.email)||"",firstName:(null===e||void 0===e||null===(a=e.data)||void 0===a||null===(l=a.errors)||void 0===l?void 0:l.first_name)||"",lastName:(null===e||void 0===e||null===(o=e.data)||void 0===o||null===(r=o.errors)||void 0===r?void 0:r.last_name)||"",position:(null===e||void 0===e||null===(s=e.data)||void 0===s||null===(c=s.errors)||void 0===c?void 0:c.position_id)||"",username:(null===e||void 0===e||null===(u=e.data)||void 0===u?void 0:u.errors.username)||"",timezone:(null===e||void 0===e||null===(d=e.data)||void 0===d?void 0:d.errors.timezone)||""});R("status ".concat(null===e||void 0===e?void 0:e.status,": ").concat(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)),Y(!1)},complete:function(){return Y(!1)}}))};return I.createElement("div",{style:{width:"inherit",minWidth:"300px"}},I.createElement(p.U7,{scrollable:!0,shadowedContainerStyle:{width:x.tq?"100%":"30%",minWidth:"450px"},isOpen:e.modalVisible,modalClosed:y,blured:e.blured},I.createElement("div",{style:{position:"relative",display:"flex",height:"96%",flexDirection:"column",justifyContent:"flex-start",alignItems:"stretch",margin:"2% 10% 2% 10%"}},I.createElement("div",{style:{margin:"0px 0 0px 0",alignSelf:"stretch",display:"flex",flexDirection:"row",width:"100%",justifyContent:e.headingCentered?"center":"flex-start",alignItems:e.headingCentered?"center":"stretch"}},e.headingImage&&I.createElement("img",{alt:"",src:e.headingImage,style:{alignSelf:"center",height:"30px",width:"32px"}}),I.createElement("h1",{style:{color:"#4A4A4A",fontFamily:"var(--app-text-main-font)",fontSize:"2em",lineHeight:"2em",margin:"0",padding:"0 0 0 10px",textAlign:"center",width:"100%"}},"Add Users")),I.createElement("div",{className:"subheadingContainer_IX"},I.createElement("p",{className:"subheading_IX"},"Fill the email, name and position of the user you\u2019d like to add. For invites, user will need to accept via email sent")),I.createElement("div",{style:{minHeight:"500px",display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"stretch"}},I.createElement(Z(),null,I.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-evenly",alignItems:"center"}},I.createElement("div",{style:{marginRight:"10px",width:"100%",height:"100%",flex:1,display:"flex",flexDirection:"column",justifyContent:"space-evenly",alignItems:"center",boxSizing:"border-box",minHeight:"480px",minWidth:"351px",backgroundColor:"#FFFFFF"}},I.createElement("div",{style:{margin:"10px 0px 0 0",dispay:"flex",width:"100%",flexDirection:"column",justifyContent:"space-evenly",alignItems:"center"}},I.createElement("input",{type:"text",name:"comapny-name",className:"inputStyle_IX",placeholder:"Email",value:F.companyEmail,onChange:function(e){D((function(t){return(0,h.Z)((0,h.Z)({},t),{},{companyEmail:e.target.value})}))},onFocus:function(){P((function(e){return(0,h.Z)((0,h.Z)({},e),{},{companyEmail:""})}))}}),(null===j||void 0===j||null===(t=j.companyEmail)||void 0===t?void 0:t.length)>0&&I.createElement("p",{style:{margin:"1px 0 1px 2px ",fontFamily:"var(--app-text-main-font)",fontSize:"14px",color:"var(--app-color-error)"}},null===j||void 0===j?void 0:j.companyEmail)),(null===j||void 0===j||null===(n=j.username)||void 0===n?void 0:n.length)>0&&I.createElement("div",{style:{margin:"10px 0px 0 0",dispay:"flex",width:"100%",flexDirection:"column",justifyContent:"space-evenly",alignItems:"center"}},I.createElement("input",{type:"text",name:"user-name",className:"inputStyle_IX",placeholder:"Username",value:F.username,onChange:function(e){D((function(t){return(0,h.Z)((0,h.Z)({},t),{},{username:e.target.value})}))}}),(null===j||void 0===j||null===(i=j.username)||void 0===i?void 0:i.length)>0&&I.createElement("p",{style:{margin:"1px 0 1px 2px ",fontFamily:"var(--app-text-main-font)",fontSize:"14px",color:"var(--app-color-error)"}},null===j||void 0===j?void 0:j.username)),I.createElement("div",{style:{margin:"10px 0px 0 0",dispay:"flex",width:"100%",flexDirection:"column",justifyContent:"space-evenly",alignItems:"center"}},I.createElement(p.Ld,{triggerType:"chevron",molclassname:"menuOverlayList_IX",moliclassname:"menuOverlayListItem_IX",title:"",placeholder:"Position",onChange:function(e){e&&D((function(t){return(0,h.Z)((0,h.Z)({},t),{},{position:e.label,position_id:e.value})}))},items:E}),(null===j||void 0===j||null===(r=j.position)||void 0===r?void 0:r.length)>0&&I.createElement("p",{style:{margin:"1px 0 1px 2px ",fontFamily:"var(--app-text-main-font)",fontSize:"14px",color:"var(--app-color-error)"}},null===j||void 0===j?void 0:j.position)),I.createElement("div",{style:{margin:"10px 0px 0 0",dispay:"flex",width:"100%",flexDirection:"column",justifyContent:"space-evenly",alignItems:"center"}},I.createElement("input",{type:"text",name:"first-name",className:"inputStyle_IX",placeholder:"First Name",value:F.firstName,onChange:function(e){D((function(t){return(0,h.Z)((0,h.Z)({},t),{},{firstName:e.target.value})}))},onFocus:function(){P((function(e){return(0,h.Z)((0,h.Z)({},e),{},{firstName:""})}))}}),(null===j||void 0===j||null===(s=j.firstName)||void 0===s?void 0:s.length)>0&&I.createElement("p",{style:{margin:"1px 0 1px 2px ",fontFamily:"var(--app-text-main-font)",fontSize:"14px",color:"var(--app-color-error)"}},null===j||void 0===j?void 0:j.firstName)),I.createElement("div",{style:{margin:"10px 0px 0 0",dispay:"flex",width:"100%",flexDirection:"column",justifyContent:"space-evenly",alignItems:"center"}},I.createElement("input",{type:"text",name:"last-name",className:"inputStyle_IX",placeholder:"Last Name",value:F.lastName,onChange:function(e){D((function(t){return(0,h.Z)((0,h.Z)({},t),{},{lastName:e.target.value})}))},onFocus:function(){P((function(e){return(0,h.Z)((0,h.Z)({},e),{},{lastName:""})}))}}),(null===j||void 0===j||null===(u=j.lastName)||void 0===u?void 0:u.length)>0&&I.createElement("p",{style:{margin:"1px 0 1px 2px ",fontFamily:"var(--app-text-main-font)",fontSize:"14px",color:"var(--app-color-error)"}},null===j||void 0===j?void 0:j.lastName)),I.createElement("div",{style:{margin:"10px 0px 0 0",dispay:"flex",width:"100%",flexDirection:"column",justifyContent:"space-evenly",alignItems:"center"}},I.createElement(p.Ld,{inputStyle:{pointerEvents:"none"},items:b.LY,defaultSelectedItem:w.find(w.propEq("value",X))(b.LY),triggerType:"chevron",placeholder:"Select timezone",onChange:function(e){H(null===e||void 0===e?void 0:e.value)}}),(null===j||void 0===j||null===(d=j.timezone)||void 0===d?void 0:d.length)>0&&I.createElement("p",{style:{margin:"1px 0 1px 2px ",fontFamily:"var(--app-text-main-font)",fontSize:"14px",color:"var(--app-color-error)"}},null===j||void 0===j?void 0:j.timezone))))),I.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",alignSelf:"center"}},I.createElement(p.zx,{title:"Close",clicked:v,style:{width:"100px"}}),I.createElement(p.zx,{title:"Invite User",light:!0,disabled:!1,loading:G,clicked:function(){ee(F.companyEmail,te)},style:{width:"140px"}}),I.createElement(p.zx,{title:"Create User",light:!0,disabled:!1,loading:V,clicked:function(){return ee(F.companyEmail,ne)},style:{width:"140px"}}))))))})),A=n(61616);document.title="Users | ".concat(b.iC);n(66918),n(84813);var k,F,D=String((k=10,F=245,k=Math.ceil(k),F=Math.floor(F),Math.floor(Math.random()*(F-k))+k)),U={color:"rgb(".concat(D,",").concat(D,",").concat(D,")")||0},z=(0,o.$j)((function(e){var t=e.authReducer.authenticatedUser.position,n=e.sessionReducer.user,i=e.flowReducer;return{companyData:i.companyData,companyPositionsArray:i.companyPositionsArray,position:t,allTasks:i.allTasks,allCompletedTasks:i.allCompletedTasks,allCompletedTasksPaginated:i.allCompletedTasksPaginated,user:n,companyUsersArray:i.companyUsersArray}}),(function(e){return{onSetOnBoardingVisible:function(t){return e((0,d.DJ)(t))},onToggleModalVisibility:function(t){return e((0,d.$6)(t))}}}))((function(e){var t=(0,r.TH)(),n=e.user,d=e.companyUsersArray,h=e.profile,x=void 0!==h&&h,E=e.companyData,Z=(0,l.useState)(!1),C=(0,a.Z)(Z,2),S=C[0],b=C[1],I=(0,l.useState)(d),w=(0,a.Z)(I,2),k=w[0],F=w[1],D=(0,l.useState)([]),U=(0,a.Z)(D,2),z=(U[0],U[1]),j=(0,l.useState)(!1),P=(0,a.Z)(j,2),T=P[0],L=P[1],X=(0,l.useState)(!1),H=(0,a.Z)(X,2),W=H[0],B=H[1],M=(0,l.useState)(""),R=(0,a.Z)(M,2),q=R[0],O=(R[1],(0,l.useState)([])),V=(0,a.Z)(O,2),Y=(V[0],V[1]),$=(0,l.useState)({filterActive:!1,departments_filteredIds:[],positions_filteredIds:[]}),J=(0,a.Z)($,2),G=J[0],K=(J[1],(0,l.useState)(!1)),Q=(0,a.Z)(K,2),ee=Q[0],te=Q[1],ne=(0,o.I0)(),ie=(0,r.s0)();(0,l.useEffect)((function(){b(!0),(0,m.pH)().pipe((0,s.P)()).subscribe({next:function(e){z(e)}}),ne((0,N.IW)(!x)),0==d.length&&(te(!0),(0,m.AW)().pipe((0,c.q)(1)).subscribe({next:function(e){0===e.length||F((0,i.Z)(e)),te(!1)},error:function(e){te(!1)},complete:function(){te(!1)}}))}),[]),(0,l.useEffect)((function(){var e=null===k||void 0===k?void 0:k.find((function(e){return e.id==new URLSearchParams(null===t||void 0===t?void 0:t.search).get("userId")}));e&&ae(e)}),[null===t||void 0===t?void 0:t.search,k]),(0,l.useEffect)((function(){if(G.filterActive){var e=[].concat((0,i.Z)(G.departments_filteredIds),(0,i.Z)(G.positions_filteredIds));(null===e||void 0===e?void 0:e.length)>0&&Y((0,i.Z)(e))}}),[G]);var ae=function(e){ie("/user-profile",{state:{user:e}})},le=function(){B(!0)};return l.createElement("div",{className:y.Z.usersHost},l.createElement("div",{style:{margin:"100px 0 0 0"}},l.createElement(A.Z,{headerTitle:x?"My Profile":"Users",targetProcessing:!1})),S&&l.createElement("span",{className:y.Z.loadingIndicator},l.createElement(p.$j,{type:"BallTriangle",color:"var(--app-color-gray-dark)",height:30,width:"".concat(30,"px")})),l.createElement("br",null),l.createElement("div",{style:{display:x?"none":"flex"}},("free"===(null===E||void 0===E?void 0:E.status)||"on_trial"===(null===E||void 0===E?void 0:E.status))&&(null===d||void 0===d?void 0:d.length)<=3&&l.createElement(f.Z,{title:"Add Users",clicked:le,style:{width:"150px"}}),"active"===(null===E||void 0===E?void 0:E.status)&&l.createElement(f.Z,{title:"Add Users",clicked:le,style:{width:"150px"}}),l.createElement(f.Z,{light:!0,clicked:function(){te(!0),(0,m.AW)(!0).pipe((0,c.q)(1)).subscribe({next:function(e){0===e.length||F((0,i.Z)(e)),te(!1)},error:function(e){te(!1)},complete:function(){te(!1)}})},icon:l.createElement("img",{src:u.Fd}),loading:ee})),l.createElement("br",null),l.createElement("div",{className:y.Z.colleaguesSection},l.createElement("div",{className:y.Z.rightSideContainer},x?l.createElement("div",{style:{padding:"10px"}},l.createElement(v.Z,{photo:n.photo,firstName:null===n||void 0===n?void 0:n.first_name,lastName:null===n||void 0===n?void 0:n.last_name,position:null===n||void 0===n?void 0:n.phone,email:null===n||void 0===n?void 0:n.email,cardClicked:function(){}})):(null===d||void 0===d?void 0:d.length)>0&&(null===d||void 0===d?void 0:d.map((function(e,t){var n,i;return l.createElement("div",{key:t,style:{padding:"10px"}},l.createElement(v.Z,{photo:e.photo,firstName:null===e||void 0===e?void 0:e.first_name,lastName:null===e||void 0===e?void 0:e.last_name,position:null===e||void 0===e||null===(n=e.positions)||void 0===n||null===(i=n.slice(0,1))||void 0===i?void 0:i.map((function(e){return e.name})),email:null===e||void 0===e?void 0:e.email,cardClicked:function(){return ae(e)}}))}))))),T&&l.createElement(g.Z,{isVisible:T,activeItem:q,handleClose:function(){L(!1)},isAdmin:n.is_admin}),W&&l.createElement(_,{hasTutorial:!0,modalVisible:W,closeButtonAction:function(){return B(!1)},backButtonAction:function(){return B(!1)},shadowedContainerStyle:{minWidth:"1110px",minHeight:"725px"},modalWrapperStyle:{minWidth:"1110px",minHeight:"725px"},onContinueButtonAction:function(){B(!1)},onCancel:function(){return B(!1)}}))}))}}]);
//# sourceMappingURL=9974.04a9974a.chunk.js.map