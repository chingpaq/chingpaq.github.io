"use strict";(self.webpackChunkflowhero=self.webpackChunkflowhero||[]).push([[3389],{93389:function(e,t,n){n.d(t,{Ac:function(){return P},HP:function(){return E},QK:function(){return x},QN:function(){return w},T5:function(){return R},gQ:function(){return Z},hI:function(){return I},vo:function(){return _},yx:function(){return B},zJ:function(){return k}});var a=n(93433),o=n(1413),s=n(56031),i=n(88502),r=n.n(i),d=n(62169),u=n(98032),c=n(95256),l=n(11577),v=n(88374),p=n(88827),h=n(30994),f=n(96332),g=(n(50981),n(1542)),m=n(89293),y=n(75105),S=n(34665),b=n(71982),w=function(e,t,n){var s=p.h.getState().authReducer.sessionSettings.last_access_token,i=new FormData;i.append("name",e),(null===t||void 0===t?void 0:t.length)>0&&i.append("description",t),i.append("type",n);var r=(0,o.Z)({},h.ns.processes.createNewProcess(s)),l=(0,o.Z)((0,o.Z)({},r),{},{data:i,handlerEnabled:!0,forwardAllErrors:!0}),g=p.h.getState().flowReducer.companyProcesses;return new c.y((function(e){return(0,f.b)(l).then((function(t){var n;if(null!==t&&void 0!==t&&t.data&&null!==t&&void 0!==t&&null!==(n=t.data)&&void 0!==n&&n.data){var s,i=g.length>0?d.Z(u.Z("name"),[].concat((0,a.Z)(g),[t.data.data])):[];p.h.dispatch((0,v.an)(i,1)),p.h.dispatch((0,v.Xu)((0,o.Z)((0,o.Z)({},null===t||void 0===t||null===(s=t.data)||void 0===s?void 0:s.data),{},{registered:!0}))),p.h.dispatch((0,v.Xc)({show:!0,message:"You have successfully created new process"})),e.next(t.data.data),e.complete()}})).catch((function(t){e.error(t)}))}))},Z=function(e,t,n,s){var i=p.h.getState().authReducer.sessionSettings.last_access_token,d=r().stringify({name:t,description:n,type:s}),u=(0,o.Z)({},h.ns.processes.updateProcessById(i,e)),l=(0,o.Z)((0,o.Z)({},u),{},{headers:(0,o.Z)({},u.headers),data:d,handlerEnabled:!0}),g=p.h.getState().flowReducer.companyProcesses;return new c.y((function(n){return(0,f.b)(l).then((function(s){var i,r,d;200==(null===s||void 0===s?void 0:s.status)&&null!==s&&void 0!==s&&s.data&&null!==s&&void 0!==s&&null!==(i=s.data)&&void 0!==i&&i.data&&(p.h.dispatch((0,v.an)([].concat((0,a.Z)(g.filter((function(t){return t.id!==e}))),[null===s||void 0===s||null===(r=s.data)||void 0===r?void 0:r.data]),1)),p.h.dispatch((0,v.Xu)((0,o.Z)((0,o.Z)({},null===s||void 0===s||null===(d=s.data)||void 0===d?void 0:d.data),{},{registered:!0}))),p.h.dispatch((0,v.Xc)({show:!0,message:"You have successfully updated ".concat(t)})),n.next(s.data.data),n.complete())})).catch((function(e){n.error(e)}))}))},_=function(e){var t=p.h.getState().authReducer.sessionSettings.last_access_token,n=(0,o.Z)({},h.ns.processes.deleteProcessById(t,e)),a=(0,o.Z)((0,o.Z)({},n),{},{headers:(0,o.Z)({},n.headers)}),s=p.h.getState().flowReducer.companyProcesses;return new c.y((function(t){return(0,f.b)(a).then((function(n){200==(null===n||void 0===n?void 0:n.status)&&null!==n&&void 0!==n&&n.data&&(t.next(n.data),t.complete(),p.h.dispatch((0,v.an)(s.filter((function(t){return t.id!==e})),1)),p.h.dispatch((0,v.Xc)({show:!0,message:"You have successfully deleted process",color:"red"})))})).catch((function(e){t.error(e)}))}))},x=function(e,t){var n=p.h.getState().authReducer.sessionSettings.last_access_token,a=JSON.stringify({positions:t}),s=(0,o.Z)((0,o.Z)({},h.ns.processes.shareProcessToSeveralPositions(n,e)),{},{data:a,handlerEnabled:!0,forwardAllErrors:!0});return new c.y((function(e){return(0,f.b)(s).then((function(t){200==(null===t||void 0===t?void 0:t.status)&&null!==t&&void 0!==t&&t.data&&(e.next(t.data),e.complete())})).catch((function(t){return e.error(t)}))}))},k=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=p.h.getState().authReducer.sessionSettings.last_access_token,a=(0,o.Z)((0,o.Z)({},h.ns.processes.getProcessById(n,e,t)),{},{handlerEnabled:!0});return new c.y((function(e){return(0,f.b)(a).then((function(t){var n,a;200==(null===t||void 0===t?void 0:t.status)&&null!==t&&void 0!==t&&t.data&&null!==t&&void 0!==t&&null!==(n=t.data)&&void 0!==n&&n.data&&(p.h.dispatch((0,v.dW)(null===t||void 0===t||null===(a=t.data)||void 0===a?void 0:a.data)),e.next(t.data.data),e.complete())})).catch((function(t){e.error(t)}))}))},P=function(e){var t=p.h.getState().authReducer.sessionSettings.last_access_token,n=JSON.stringify(e),a=(0,o.Z)((0,o.Z)({},h.ns.processSteps.createNewProcStepUsingRawJson(t)),{},{handlerEnabled:!0,data:n});return new c.y((function(e){return(0,f.b)(a).then((function(t){var n,a;(null===(n=[200,201])||void 0===n?void 0:n.indexOf(null===t||void 0===t?void 0:t.status))>-1&&null!==t&&void 0!==t&&t.data&&null!==t&&void 0!==t&&null!==(a=t.data)&&void 0!==a&&a.data&&(e.next(t.data.data),e.complete())})).catch((function(t){e.error(t)}))}))},R=function(e,t,n){var a=p.h.getState().authReducer.sessionSettings.last_access_token,s=JSON.stringify(e),i=(0,o.Z)((0,o.Z)({},h.ns.processSteps.updateProcessStepByIdUsingJson(a,t.concat(n?"?all=1":""))),{},{handlerEnabled:!0,data:s});return new c.y((function(e){return(0,f.b)(i).then((function(t){var n,a;(null===(n=[200,201])||void 0===n?void 0:n.indexOf(null===t||void 0===t?void 0:t.status))>-1&&null!==t&&void 0!==t&&t.data&&null!==t&&void 0!==t&&null!==(a=t.data)&&void 0!==a&&a.data&&(e.next(t.data.data),e.complete(),p.h.dispatch((0,v.Xc)({show:!0,message:"You have successfully updated a step"})))})).catch((function(t){e.error(t)}))}))},I=function(e){var t=p.h.getState().authReducer.sessionSettings.last_access_token,n=e.processId,a=e.forStepId,i=e.pathways,r=e.parentsOnly,d=e.details,u=s.stringify({pathways:i,forStepId:a,parentsOnly:r,details:d},{skipNull:!0}),l=(0,o.Z)((0,o.Z)({},h.ns.processSteps.getStepsByProcessId(t,n+((null===u||void 0===u?void 0:u.length)>0?"?"+u:""))),{},{handlerEnabled:!0});return new c.y((function(e){return(0,f.b)(l).then((function(t){var n;200==(null===t||void 0===t?void 0:t.status)&&null!==t&&void 0!==t&&t.data&&(null!==t&&void 0!==t&&null!==(n=t.data)&&void 0!==n&&n.data?(e.next(t.data.data),e.complete()):(e.next(t.data),e.complete()))})).catch((function(t){e.error(t)}))}))},E=function(e){var t=p.h.getState().authReducer.sessionSettings.last_access_token,n=(0,o.Z)((0,o.Z)({},h.ns.processSteps.deleteStepById(t,e)),{},{handlerEnabled:!0});p.h.getState().flowReducer.companyProcesses;return new c.y((function(e){return(0,f.b)(n).then((function(t){var n;200==(null===t||void 0===t?void 0:t.status)&&null!==t&&void 0!==t&&t.data&&null!==t&&void 0!==t&&null!==(n=t.data)&&void 0!==n&&n.message&&(e.next(t.data.message),e.complete())})).catch((function(t){e.error(t)}))}))},B=function(e){var t=p.h.getState().flowReducer.companyProcesses,n=p.h.getState().modalsReducer,a=n.onBoardingModalsVisibility,s=(n.onBoardingCompleted,a.templatesSecond);return new c.y((function(n){return w("".concat(e.name,"*"),e.description,null===e||void 0===e?void 0:e.type).pipe((0,l.P)()).subscribe({next:function(a){var i=[];e.steps.map((function(r,d){var u,w,Z;P({name:null===r||void 0===r?void 0:r.name,procedure_id:a.id,guidance:null===r||void 0===r?void 0:r.guidance,rank:null===r||void 0===r?void 0:r.rank,options:null===r||void 0===r?void 0:r.options,is_start:null!==(u=null===r||void 0===r?void 0:r.is_start)&&void 0!==u&&u,is_end:null!==(w=null===r||void 0===r?void 0:r.is_end)&&void 0!==w&&w,component_blueprints:null===r||void 0===r||null===(Z=r.component_blueprints)||void 0===Z?void 0:Z.map((function(e){var t;return(0,o.Z)((0,o.Z)({},e),{},{selected_fields:null===e||void 0===e||null===(t=e.selected_fields)||void 0===t?void 0:t.map((function(e){return{id:e.id,mandatory:e.mandatory,visible:e.visible,index:e.index}}))})}))}).pipe((0,l.P)()).subscribe({next:function(r){i.push(r),e.steps.length==d+1&&(0,g.nB)("".concat(e.name,"*"),a.id,{outputTo:"component"}).subscribe({next:function(r){e.steps.map((function(r,d){var u,g;(null===r||void 0===r||null===(u=r.parent_steps)||void 0===u?void 0:u.length)>0||(null===r||void 0===r||null===(g=r.pathway_steps)||void 0===g?void 0:g.length)>0?function(e,t){var n=p.h.getState().authReducer.sessionSettings.last_access_token,a=JSON.stringify(e),s=(0,o.Z)((0,o.Z)({},h.ns.processSteps.updateProcessStepByIdUsingJson(n,t)),{},{handlerEnabled:!0,data:a});return new c.y((function(e){return(0,f.b)(s).then((function(t){var n,a;(null===(n=[200,201])||void 0===n?void 0:n.indexOf(null===t||void 0===t?void 0:t.status))>-1&&null!==t&&void 0!==t&&t.data&&null!==t&&void 0!==t&&null!==(a=t.data)&&void 0!==a&&a.data&&(e.next(t.data.data),e.complete(),p.h.dispatch((0,v.Xc)({show:!0,message:"You have successfully updated a step"})))})).catch((function(t){e.error(t)}))}))}({parent_steps:null===r||void 0===r?void 0:r.parent_steps.map((function(e){return i.find((function(t){return t.name===e.name&&t.rank===e.rank})).id})),pathway_steps:null===r||void 0===r?void 0:r.pathway_steps.map((function(e){return i.find((function(t){return t.name===e.name&&t.rank===e.rank})).id}))},i.find((function(e){return e.name===r.name&&e.rank===r.rank})).id).pipe((0,l.P)()).subscribe({next:function(){e.steps.length==d+1&&(p.h.dispatch((0,v.an)(t.filter((function(e){return e.id!==a.id})),m.KI)),(0,y.IC)().pipe((0,l.P)()).subscribe({next:function(e){s&&p.h.dispatch((0,b.$6)({templatesLastVisible:!0})),S.Fc.saveUser((0,o.Z)({},e)),n.next(a)}}))}}):e.steps.length==d+1&&n.next(a)}))},error:function(e){e&&n.error(e)}})},error:function(e){return n.error(e)}})}))},error:function(e){return n.error(e)}})}))}}}]);
//# sourceMappingURL=3389.943442c1.chunk.js.map