"use strict";(self.webpackChunkflowhero=self.webpackChunkflowhero||[]).push([[3799],{36957:(e,l,t)=>{t.r(l),t.d(l,{default:()=>cn});var n=t(1413),o=t(67861),a=t(39518),i=t(11577),d=t(13845),s=t(95242),r=t(29937),u=t(88374),c=t(93389),m=t(49465),p=t(48929),v=t(85718);const y="ProcessOptionsModal_host__4xb31",h="ProcessOptionsModal_target__Cmhw-",f="ProcessOptionsModal_title__JOTDc",C="ProcessOptionsModal_elementTextInput__8yK8r",g="ProcessOptionsModal_optionSection__Vj7zH",b="ProcessOptionsModal_controls__aDMTt",S="ProcessOptionsModal_controls2__fRbTq",E="ProcessOptionsModal_errorContainer__YQXXM",_="ProcessOptionsModal_messageContainer__ca1I4",w="ProcessOptionsModal_selectComponentContainer__aYCuu",N="ProcessOptionsModal_multiSelectContainer__ee4zs",L="ProcessOptionsModal_multiSelectSearchInput__xCVpC",Z="ProcessOptionsModal_multiSelectMenuOverlayList__bP915",x="ProcessOptionsModal_multiSelectMenuOverlayListItem__Gaoic";var I=t(63077),M=t(88827),k=t(73500),O=t(27436),T=t(7162),P=t(46034),B=t(27197),F=t(90252);var D=t(34710),A=t(12075),W=t(52902),V=t(71982),z=t(67861);t(66918);const R=e=>{const{children:l}=e;return z.createElement("div",{className:g},l)},j=(0,a.$j)(e=>{const{companyProcesses:l,companyPositionsArray:t,allModules:n,components:o,onBoardingCompleted:a,companyData:i}=e.flowReducer,{onBoardingModalsVisibility:d}=e.modalsReducer;return{companyProcesses:l,companyPositionsArray:t,allModules:n,components:o,onBoardingCompleted:a,companyData:i,onBoardingModalsVisibility:d}})(e=>{var l,t,a;const{onClose:d=()=>{},onCreate:s=()=>{},isOpen:v,companyProcesses:g,selectedProcess:k,selectedProcessId:j="",shadowedContainerStyle:U,onBoardingCompleted:q,companyData:H,onSkip:K,companyPositionsArray:X,onBoardingModalsVisibility:G}=e,[Y,J]=(0,o.useState)(""!==(null===k||void 0===k?void 0:k.id)),[Q,$]=(0,o.useState)(""),[ee,le]=(0,o.useState)(k||void 0),[te,ne]=(0,o.useState)(k?k.name:""),[oe,ae]=(0,o.useState)(k?k.description:""),[ie,de]=(0,o.useState)(""),[,se]=(0,r._M)(),[re,ue]=(0,o.useState)(!1),[ce,me]=(0,o.useState)(!1),[pe,ve]=(0,o.useState)(!1),[ye,he]=(0,o.useState)(null!==X&&void 0!==X?X:[]),[fe,Ce]=(0,o.useState)(null!==(l=null===k||void 0===k||null===(t=k.shared_positions)||void 0===t?void 0:t.map(e=>({label:null===e||void 0===e?void 0:e.name,value:e.id})))&&void 0!==l?l:[]),[ge,be]=(0,o.useState)(!0),[Se,Ee]=(0,o.useState)([]),[_e,we]=(0,o.useState)("");(0,o.useEffect)(()=>{1==Y&&((0,c.zJ)(j).pipe((0,i.P)()).subscribe({next:e=>{var l,t;const n=null!==(l=null===e||void 0===e||null===(t=e.shared_positions)||void 0===t?void 0:t.map(e=>({label:null===e||void 0===e?void 0:e.name,value:e.id})))&&void 0!==l?l:[];Ce([...n]),be(!1)},error:e=>{be(!1)}}),0==(null===X||void 0===X?void 0:X.length)&&(ve(!0),be(!0),(0,D.OW)().pipe((0,i.P)()).subscribe({next:e=>{he(null===e||void 0===e?void 0:e.map(e=>({label:null===e||void 0===e?void 0:e.name,value:e.id}))),ve(!1)},error:e=>{ve(!1)}})))},[Y,j]);const Ne=(0,o.useCallback)(()=>{ue(!0),we(""),"superadmin"!==(null===H||void 0===H?void 0:H.status)?(0,c.QK)(j,null===Se||void 0===Se?void 0:Se.map(e=>null===e||void 0===e?void 0:e.value)).pipe((0,i.P)(),function(e,l,t){var n=(0,T.m)(e)||l||t?{next:e,error:l,complete:t}:e;return n?(0,P.e)(function(e,l){var t;null===(t=n.subscribe)||void 0===t||t.call(n);var o=!0;e.subscribe((0,B.x)(l,function(e){var t;null===(t=n.next)||void 0===t||t.call(n,e),l.next(e)},function(){var e;o=!1,null===(e=n.complete)||void 0===e||e.call(n),l.complete()},function(e){var t;o=!1,null===(t=n.error)||void 0===t||t.call(n,e),l.error(e)},function(){var e,l;o&&(null===(e=n.unsubscribe)||void 0===e||e.call(n)),null===(l=n.finalize)||void 0===l||l.call(n)}))}):F.y}({next:()=>{},complete:()=>{}})).subscribe({next:e=>{Ie()},error:e=>{we(Le(e))}}):Ie()},[j,Se,te,oe]),Le=(0,o.useCallback)(e=>{var l,t,n,o;if(!(null!==e&&void 0!==e&&null!==(l=e.data)&&void 0!==l&&l.errors||null===(t=e.data)||void 0===t)&&t.message)return null===(n=e.data)||void 0===n?void 0:n.message;if(null!==e&&void 0!==e&&null!==(o=e.data)&&void 0!==o&&o.errors){var a,i,d,s,r=/^(?:\D*\d)/g;return(null===(a=Object.values(null===e||void 0===e||null===(d=e.data)||void 0===d?void 0:d.errors))||void 0===a||null===(i=a.map(e=>{const l=null===e||void 0===e?void 0:e.map(e=>{var l;const t=e.match(/\d/g)[0];return(null===e||void 0===e?void 0:e.replace(r,null===(l=Se[t])||void 0===l?void 0:l.label))+"\n"});return null===l||void 0===l?void 0:l.join("")}))||void 0===i?void 0:i.join(""))+(null===(s=e.data)||void 0===s?void 0:s.message)}return""},[Se]),Ze=(null===g||void 0===g?void 0:g.length)>0?g.map(e=>({label:e.name,value:e,process:e})):[],xe=()=>{se({type:r.Cb.setAllSteps,value:[]}),ue(!0),(0,c.QN)(te,oe,null===ee||void 0===ee?void 0:ee.type).pipe((0,i.P)()).subscribe({next:e=>{ue(!1),M.h.dispatch((0,u.Xu)(e)),G.seventhModalVisible&&M.h.dispatch((0,V.$6)({eightModalVisible:!0})),se({type:r.Cb.addNewStep,value:e.id}),s()},error:e=>{},complete:()=>{}})},Ie=(0,o.useCallback)(()=>{ue(!0),(0,c.gQ)(null===ee||void 0===ee?void 0:ee.id,te,oe,null===ee||void 0===ee?void 0:ee.type).pipe((0,i.P)()).subscribe({next:e=>{ue(!1),M.h.dispatch((0,u.Xu)(e)),q?null===d||void 0===d||d():s()}})},[ee,te,oe]),Me={control:(e,l)=>(0,n.Z)((0,n.Z)({},e),{},{boxShadow:"none","&:hover":{border:"1px solid var(--app-color-gray-lighter)"},position:"relative",height:"60px",width:"101%",border:"var(--app-color-gray-lighter) solid 1px",borderRadius:"8px",padding:"3px",fontFamily:"var(--app-text-main-font)",fontSize:"1.4em",color:"#4A4A4A",textAlign:"left",flex:"1 1 auto",justifyContent:"center",alignItems:"center",alignContent:"center",alignSelf:"center",margin:"0px 0 0 0 ",marginBottom:"20px"}),input:(e,l)=>(0,n.Z)((0,n.Z)({},e),{},{fontFamily:"var(--app-text-main-font)",color:"#4A4A4A",width:"100%",textAlign:"left",fontSize:"0.8em",alignSelf:"center",padding:"0",marginLeft:0,textIndent:"0"}),menu:(e,l)=>(0,n.Z)((0,n.Z)({},e),{},{justifyContent:"center",alignItems:"center",verticalTextAlign:"center",alignContent:"center",fontFamily:"var(--app-text-main-font)"}),menulist:(e,l)=>(0,n.Z)((0,n.Z)({},e),{},{justifyContent:"center",alignItems:"center",verticalTextAlign:"center",alignContent:"center",fontFamily:"var(--app-text-main-font)"}),option:(e,l)=>(0,n.Z)((0,n.Z)({},e),{},{minHeight:15,paddingTop:0,fontSize:"1.1em",verticalTextAlign:"center",justifyContent:"center",alignItems:"center",alignContent:"center",fontFamily:"var(--app-text-main-font)"}),placeholder:(e,l)=>(0,n.Z)((0,n.Z)({},e),{},{fontSize:"0.75em",lineHeight:"20px",color:"#4A4A4A",fontWeight:400,overflow:"hidden",fontFamily:"var(--app-text-main-font)"}),singleValue:(e,l)=>{const t=l.isDisabled?.5:1;return(0,n.Z)((0,n.Z)({},e),{},{opacity:t,transition:"opacity 300ms",marginLeft:"0px",fontSize:"0.75em",lineHeight:"20px",color:"#4A4A4A",fontFamily:"var(--app-text-main-font)"})},indicatorsContainer:(e,l)=>{let{_data:t}=l;return(0,n.Z)((0,n.Z)({},e),{},{marginTop:"auto",marginBottom:"auto",color:"#4A4A4A",size:7,":hover":{color:"gray"},width:"65px",height:"45px",fontFamily:"var(--app-text-main-font)"})}};return z.createElement(p.U7,{isOpen:v,blured:!0,scrollable:!0,shadowedContainerStyle:U},z.createElement("div",{className:y},z.createElement("div",{className:h},z.createElement("p",{className:f,style:{display:q?"":"none"}},(null===k||void 0===k||null===(a=k.id)||void 0===a?void 0:a.length)>0?"edit":"create new"," ","workflow"),z.createElement(R,null,e.children,z.createElement(p.Lb,{title:"Name of workflow"}),z.createElement("input",{type:"text",name:"element-name",value:te,onChange:e=>ne(e.target.value),className:C,style:{marginBottom:"10px"}}),z.createElement(p.Lb,{title:"Description of workflow"}),z.createElement("textarea",{type:"text",name:"element-name",value:oe,onChange:e=>ae(e.target.value),className:C,style:{marginBottom:"10px",height:"100px"}}),Y&&z.createElement(p.Lb,{title:"Show workflow to positions"}),Y&&z.createElement("div",{className:w},z.createElement(p.gK,{labelsTag:!0,tagCloseButtonType:"X",tagEmplacement:"inlined",items:ye,itemType:"checkboxes",checkboxEmplacement:"left",initialSelectedItems:fe,className:N,inputClassName:L,molclassname:Z,moliclassname:x,placeholder:"Select...",onChange:e=>{Ee(e)}},z.createElement(A.G,{icon:W.ptq,style:{marginRight:"10px"}})),(null===_e||void 0===_e?void 0:_e.length)>0&&z.createElement("span",{className:E},_e)),z.createElement("br",null),z.createElement("br",null),Ze.length>0&&z.createElement(p.Lb,{title:"Select Another Workflow to Edit"}),Ze.length>0&&z.createElement(I.ZP,{onFocus:()=>$(""),isSearchable:!1,key:"Workflow",styles:Me,placeholder:"Select workflow to edit...",components:{DropdownIndicator:m.ms},options:Ze,onChange:e=>{"New Workflow"!==e.label?(le(e.process),ne(e.process.name),ae(e.process.description),M.h.dispatch((0,u.Xu)(e.process)),J(!0)):(M.h.dispatch((0,u.Xu)({description:"",id:"",is_pinned:!1,name:"",user_id:"",registered:!1,type:!1,steps:[]})),le({description:"",id:"",is_pinned:!1,name:"",user_id:"",registered:!1,type:!1,steps:[]}),ne(""),ae(""),J(!1))}})),(null===ie||void 0===ie?void 0:ie.length)>0&&z.createElement(O.Z,{message:ie,onClick:()=>de("")}),(null===Q||void 0===Q?void 0:Q.length)>0&&z.createElement("span",{className:_,onClick:()=>$("")},Q)),z.createElement("div",{className:q?b:S},q&&z.createElement(p.zx,{title:"Close",clicked:d}),!q&&z.createElement(p.zx,{light:!0,title:"Back",clicked:d}),!Y&&q&&z.createElement(p.zx,{light:!0,title:"Save",loading:re,clicked:xe}),z.createElement("div",{style:{display:"flex"}},!Y&&!q&&z.createElement(p.zx,{title:"Skip",loading:ce,clicked:()=>{me(!0),K()}}),!Y&&!q&&z.createElement(p.zx,{title:"Create",loading:re,clicked:xe})),Y&&z.createElement(p.zx,{light:!0,title:"Update",loading:re,clicked:Ne}))))}),U="WorkflowTemplatesModal_host__Q3zbH",q="WorkflowTemplatesModal_header__N8ZLt",H="WorkflowTemplatesModal_title__23bdy",K="WorkflowTemplatesModal_subtitle__oBjjB",X="WorkflowTemplatesModal_controls__ajc+K",G="WorkflowTemplatesModal_trialTitle__dTNg9",Y="WorkflowTemplatesModal_subTitle__Bzxqf",J="WorkflowTemplatesModal_trialText__c0htd",Q="WorkflowTemplatesModal_currentInvoicesContainer__-k6ew";var $=t(23280),ee=t(60761),le=t(35606),te=t(13397),ne=t(98032),oe=t(67861);const ae=(0,a.$j)(e=>{const{companyProcesses:l,companyPositionsArray:t,allModules:n,components:o,onBoardingCompleted:a,workflowTemplates:i}=e.flowReducer;return{companyProcesses:l,companyPositionsArray:t,allModules:n,components:o,onBoardingCompleted:a,workflowTemplates:i}})(e=>{const{isOpen:l,shadowedContainerStyle:t,onCreateBlank:n,gotoProcess:d,workflowTemplates:s,gotoComponents:v}=e,[y,h]=(0,o.useState)(!1),[f,C]=(0,o.useState)({name:"",steps:[]}),{onBoardingModalsVisibility:g,isOnboarding:b}=(0,a.v9)(e=>e.modalsReducer),{secondModalVisible:S,fourthModalVisible:E,sixthModalVisible:_,templatesFirst:w}=g,N=(0,a.I0)();document.title="New Workflow | ".concat(m.iC);const L=(0,$.s0)(),Z=()=>{N((0,u.Xu)(void 0)),M.h.dispatch((0,u.Xc)({show:!1,message:""})),L("/")};return oe.createElement(r.FZ,null,oe.createElement(p.U7,{isOpen:l,blured:!1,scrollable:!0,shadowedContainerStyle:t,onClose:Z},oe.createElement("div",{className:U},oe.createElement("div",{style:{display:"flex",alignItems:"center"}},oe.createElement("p",{className:H},"New Workflow"),oe.createElement(p.zx,{clear:!0,loading:y})),oe.createElement("p",{className:K},"Start a new workflow or select from any of our predefined workflow templates"),oe.createElement("div",{style:{display:""===(null===f||void 0===f?void 0:f.name)||y?"none":"",width:"100%"}},oe.createElement("div",{style:{display:"flex",justifyContent:"space-between",padding:"0 30px 0 30px"}},oe.createElement(p.zx,{title:"Hide",light:!0,clicked:()=>{C({name:""}),h(!1),N((0,u.Xu)({name:"",steps:[]}))}}),oe.createElement(p.zx,{title:"Create",light:!0,style:{color:"white",backgroundColor:"green"},clicked:()=>{h(!0),(0,c.yx)(f).pipe((0,i.P)()).subscribe({next:e=>{h(!1),d(e)},error:e=>{h(!1)}})}})),oe.createElement(ee.Z,null)),oe.createElement("div",{className:Q,style:{maxWidth:"40%",minWidth:"260px",width:"30%",backgroundColor:S||E?"lightblue":"",height:"30vh"}},oe.createElement("p",{className:G},"Components"),oe.createElement("hr",{style:{borderTop:"1px solid #D2D2D2",marginBottom:"20px"}}),oe.createElement("div",{className:q},oe.createElement("p",{className:J},"Create Components"),oe.createElement(p.zx,{disabled:y,title:"Open",style:{width:"80px",minWidth:"80px"},clicked:()=>{S&&N((0,V.$6)({thirdModalVisible:!0})),E&&N((0,V.$6)({fifthModalVisible:!0})),v()}})),oe.createElement("br",null),oe.createElement("br",null),oe.createElement("p",{className:Y},"Components are objects that workflows use to input or output informations. In forms they are usally called fields.")),oe.createElement("div",{className:Q,style:{maxWidth:"40%",minWidth:"260px",width:"30%",backgroundColor:_?"lightblue":"",height:"30vh"}},oe.createElement("p",{className:G},"New Workflow"),oe.createElement("hr",{style:{borderTop:"1px solid #D2D2D2",marginBottom:"20px"}}),oe.createElement("div",{className:q},oe.createElement("p",{className:J},"Blank Workflow"),oe.createElement(p.zx,{disabled:y,title:"Open",style:{width:"80px",minWidth:"80px"},clicked:()=>{_&&N((0,V.$6)({seventhModalVisible:!0})),n()}})),oe.createElement("br",null),oe.createElement("br",null),oe.createElement("p",{className:Y},"Create your workflow using a blank canvass")),null===s||void 0===s?void 0:s.filter(e=>"Employee Master"===e.name).map((e,l)=>oe.createElement("div",{className:Q,style:{maxWidth:"40%",minWidth:"260px",width:"30%",backgroundColor:w&&"Customer Creation"===e.name?"lightblue":"",height:"30vh"},key:l},oe.createElement("p",{className:G},"Workflow Template"),oe.createElement("hr",{style:{borderTop:"1px solid #D2D2D2",marginBottom:"20px"}}),!y&&oe.createElement("div",{style:{display:"flex",width:"100%",justifyContent:"space-between"}},oe.createElement("div",{className:J},"".concat(e.name)),oe.createElement(p.zx,{disabled:y,title:(null===f||void 0===f?void 0:f.name)===e.name?"Create":"View",style:{display:(null===f||void 0===f?void 0:f.name)===e.name?"none":"",backgroundColor:(null===f||void 0===f?void 0:f.name)===e.name?"green":"rgb(83, 159, 234)",width:"80px",minWidth:"80px"},clicked:()=>{(null===f||void 0===f?void 0:f.name)!==e.name?(window.scrollTo({top:0,behavior:"smooth"}),C(e),N((0,u.Xu)(e)),w&&N((0,V.$6)({templatesSecond:!0}))):(h(!0),(0,c.yx)(f).pipe((0,i.P)()).subscribe({next:e=>{h(!1),d(e)},error:e=>{h(!1)}}))}})),oe.createElement("br",null),oe.createElement("p",{className:Y},"".concat(e.description)))),(()=>{var e;return null===(e=le.Z([te.Z(ne.Z("name"))])(s))||void 0===e?void 0:e.filter(e=>"Employee Master"!==e.name).map((e,l)=>oe.createElement("div",{className:Q,style:{maxWidth:"40%",minWidth:"260px",width:"30%",backgroundColor:w&&"Customer Creation"===e.name?"lightblue":""},key:l},oe.createElement("p",{className:G},"Workflow Template"),oe.createElement("hr",{style:{borderTop:"1px solid #D2D2D2",marginBottom:"20px"}}),!y&&oe.createElement("div",{style:{display:"flex",width:"100%",justifyContent:"space-between"}},oe.createElement("div",{className:J},"".concat(e.name)),oe.createElement(p.zx,{disabled:y,title:(null===f||void 0===f?void 0:f.name)===e.name?"Create":"View",style:{display:(null===f||void 0===f?void 0:f.name)===e.name?"none":"",backgroundColor:(null===f||void 0===f?void 0:f.name)===e.name?"green":"rgb(83, 159, 234)",width:"80px",minWidth:"80px"},clicked:()=>{(null===f||void 0===f?void 0:f.name)!==e.name?(window.scrollTo({top:0,behavior:"smooth"}),C(e),N((0,u.Xu)(e)),w&&N((0,V.$6)({templatesSecond:!0}))):(h(!0),(0,c.yx)(f).pipe((0,i.P)()).subscribe({next:e=>{h(!1),d(e)},error:e=>{h(!1)}}))}})),oe.createElement("br",null),oe.createElement("p",{className:Y},"".concat(e.description))))})()),oe.createElement("div",{className:X},oe.createElement(p.zx,{disabled:y,loading:y,title:"Close",clicked:Z}))))});var ie=t(87546),de=(t(66596),t(6073)),se=t(4358);const re="ComponentsModal_host__d5q2n",ue="ComponentsModal_title__1eiWg",ce="ComponentsModal_fieldRow__gg9Nz",me="ComponentsModal_fieldRowContent__Ylhmb",pe="ComponentsModal_fieldRowControls__F17z0",ve="ComponentsModal_typeText__58xUE",ye="ComponentsModal_fieldTypeInput__Pyosc",he="ComponentsModal_warningContainer__V1j68",fe="ComponentsModal_peoplePositionsSelect__6lG4K",Ce="ComponentsModal_peoplePositionsSelectInput__O5Mfe",ge="ComponentsModal_peoplePositionsSelectMenuOverlay__oF43q",be="ComponentsModal_peoplePositionsSelectMenuOverlayItem__efdLS",Se="ComponentsModal_selectedFieldsContainer__SaWzh",Ee="ComponentsModal_elementTextInput__JbVsI",_e="ComponentsModal_fieldType__ifgEs";var we=t(47144),Ne=t.n(we),Le=t(66180),Ze=t.n(Le),xe=t(85692);const Ie={host:"FieldOptionsModal_host__+NDEc",closeContainer:"FieldOptionsModal_closeContainer__VBxuW",closeElement:"FieldOptionsModal_closeElement__xlo+y",closeIcon:"FieldOptionsModal_closeIcon__ga2TN",target:"FieldOptionsModal_target__ruE2b",optionSection:"FieldOptionsModal_optionSection__aAlGM",optionSettings:"FieldOptionsModal_optionSettings__py99w",title:"FieldOptionsModal_title__jqNO1",subtitle:"FieldOptionsModal_subtitle__26Gfa",elementInputTitle:"FieldOptionsModal_elementInputTitle__AAoAr",readOnlyTextInput:"FieldOptionsModal_readOnlyTextInput__Gff1d",elementTextArea:"FieldOptionsModal_elementTextArea__MCisO",elementTextInput:"FieldOptionsModal_elementTextInput__ywFdu",unfocusableWrapper:"FieldOptionsModal_unfocusableWrapper__sul2H",numberOptionsContainer:"FieldOptionsModal_numberOptionsContainer__9Adnt",renderBooleansOptions:"FieldOptionsModal_renderBooleansOptions__R4F-q",phonePrefixContainer:"FieldOptionsModal_phonePrefixContainer__X-k-T",phonePrefixSelectContainer:"FieldOptionsModal_phonePrefixSelectContainer__XK7PK",phoneIDropdown:"FieldOptionsModal_phoneIDropdown__f5MvN",phoneISearch:"FieldOptionsModal_phoneISearch__d42v9",phonePrefixText:"FieldOptionsModal_phonePrefixText__yi1yt",phoneIContainer:"FieldOptionsModal_phoneIContainer__YguKy",phoneIInput:"FieldOptionsModal_phoneIInput__xTFtX",phoneIButton:"FieldOptionsModal_phoneIButton__d4ccV","react-tel-input":"FieldOptionsModal_react-tel-input__Vdvqo","country-list":"FieldOptionsModal_country-list__bWUIZ","selected-flag":"FieldOptionsModal_selected-flag__RSASJ",open:"FieldOptionsModal_open__tDETU",currencySelectContainer:"FieldOptionsModal_currencySelectContainer__Vd4e9",currencySymbol:"FieldOptionsModal_currencySymbol__6RUaW",currencySelectComponent:"FieldOptionsModal_currencySelectComponent__BofG5",currencySelectMenuOverlayList:"FieldOptionsModal_currencySelectMenuOverlayList__xNU7C",currencySelectMenuOverlayListItem:"FieldOptionsModal_currencySelectMenuOverlayListItem__Z+vtS",currencySearchInput:"FieldOptionsModal_currencySearchInput__SKNfN",currencyClearControlsClassName:"FieldOptionsModal_currencyClearControlsClassName__Tsou1",uploadSelectComponent:"FieldOptionsModal_uploadSelectComponent__aIDW9",multiselectContainer:"FieldOptionsModal_multiselectContainer__VfjNY",uploadSearchInput:"FieldOptionsModal_uploadSearchInput__SM79r",maxFileSizeInput:"FieldOptionsModal_maxFileSizeInput__f2cLT",uploadFileSizeMeasureUnit:"FieldOptionsModal_uploadFileSizeMeasureUnit__FzVcE",uploadSelectMenuOverlayList:"FieldOptionsModal_uploadSelectMenuOverlayList__BCrMO",uploadSelectMenuOverlayListItem:"FieldOptionsModal_uploadSelectMenuOverlayListItem__Qkdru",dateTimePickerContainer:"FieldOptionsModal_dateTimePickerContainer__qjVxA",dateTimePickerTrigger:"FieldOptionsModal_dateTimePickerTrigger__judgV",dateAutosizeInput:"FieldOptionsModal_dateAutosizeInput__CsxLi",dateOptionsContainer:"FieldOptionsModal_dateOptionsContainer__Haxqc",dropdownElementHost:"FieldOptionsModal_dropdownElementHost__E7zgm",dropdownSymbol:"FieldOptionsModal_dropdownSymbol__5ABYM",dropdownSelectComponent:"FieldOptionsModal_dropdownSelectComponent__nArXq",dropdownSelectMenuOverlayList:"FieldOptionsModal_dropdownSelectMenuOverlayList__5n+3u",dropdownSelectMenuOverlayListItem:"FieldOptionsModal_dropdownSelectMenuOverlayListItem__QEn6G",dropdownInput:"FieldOptionsModal_dropdownInput__U3JY1",dropdownClearControlsClassName:"FieldOptionsModal_dropdownClearControlsClassName__FjsP5",dropdownListContainer:"FieldOptionsModal_dropdownListContainer__I6Y7K",dropDownButtonContainer:"FieldOptionsModal_dropDownButtonContainer__9K7oX",addDropdownOptionButton:"FieldOptionsModal_addDropdownOptionButton__EAca1",addDropdownOptionIcon:"FieldOptionsModal_addDropdownOptionIcon__XYMOa",dropDownNewListItemInputContainer:"FieldOptionsModal_dropDownNewListItemInputContainer__QgqO+",dropDownNewListItemInput:"FieldOptionsModal_dropDownNewListItemInput__u4m7R",dropdownInputButtonSaveNewItem:"FieldOptionsModal_dropdownInputButtonSaveNewItem__Wj4Cc",dropdownListItemsContainer:"FieldOptionsModal_dropdownListItemsContainer__yUWal",renderEditableListContainer:"FieldOptionsModal_renderEditableListContainer__H4aqe",renderEditableListItemInput:"FieldOptionsModal_renderEditableListItemInput__KLSTJ",renderEditableListItemDeleteButton:"FieldOptionsModal_renderEditableListItemDeleteButton__+u21c",peopleContainer:"FieldOptionsModal_peopleContainer__pfgvy",peopleBooleansOptions:"FieldOptionsModal_peopleBooleansOptions__OJGc9",peoplePositionSelectContainer:"FieldOptionsModal_peoplePositionSelectContainer__WVMlT",peoplePositionsSelect:"FieldOptionsModal_peoplePositionsSelect__WvnuB",peoplePositionsSelectMenuOverlay:"FieldOptionsModal_peoplePositionsSelectMenuOverlay__MhaEf",peoplePositionsSelectMenuOverlayItem:"FieldOptionsModal_peoplePositionsSelectMenuOverlayItem__n-2C5",controls:"FieldOptionsModal_controls__bDTZg",deleteButton:"FieldOptionsModal_deleteButton__YT1QH",errorContainer:"FieldOptionsModal_errorContainer__Pvvt9",componentsSelectContainer:"FieldOptionsModal_componentsSelectContainer__y8BMn",componentsSymbol:"FieldOptionsModal_componentsSymbol__sqPYL",componentsSelectComponent:"FieldOptionsModal_componentsSelectComponent__WhkRj",componentsSelectMenuOverlayList:"FieldOptionsModal_componentsSelectMenuOverlayList__tR9cX",componentsSelectMenuOverlayListItem:"FieldOptionsModal_componentsSelectMenuOverlayListItem__ptRPc",componentsSearchInput:"FieldOptionsModal_componentsSearchInput__MTz6p",ccomponentsClearControlsClassName:"FieldOptionsModal_ccomponentsClearControlsClassName__WMR5x",checkboxLabelClass:"FieldOptionsModal_checkboxLabelClass__zMstz"};t(41756);var Me=t(84910);const ke=t(66918),Oe=[{label:"Display as text",value:"text"},{label:"Display as Horizontal Bar",value:"bar"}],Te=e=>{var l,t,i,s,r,u,c,v,y,h,f,C,g,b,S,E,_,w,N,L,Z,x,I,M,k,O,T,P,B,F,D,A,W,V,z,R,j,U,q,H,K,X,G,Y,J,Q,$,ee,le,te,ne,oe,ae,ie,de,se,re,ue,ce,me,pe,ve,ye,he,fe,Ce,ge,be,Se,Ee,_e,we,Le,Ze,xe,Me,Te,sl,fl,Cl,gl,bl,Sl,El,_l,wl,Nl,Ll,Zl,xl,Il,Ml,kl,Ol,Tl,Pl,Bl,Fl,Dl,Al,Wl,Vl,zl,Rl,jl,Ul,ql,Hl,Kl,Xl,Gl,Yl,Jl,Ql,$l,et,lt,tt,nt,ot,at,it,dt,st,rt,ut,ct,mt,pt,vt,yt,ht,ft,Ct,gt,bt,St,Et,_t,wt,Nt,Lt,Zt,xt,It,Mt,kt,Ot,Tt,Pt,Bt,Ft,Dt,At,Wt;const{onClose:Vt,isOpen:zt,leftControlLoading:Rt,leftControlAction:jt,centralControlAction:Ut,centralControlLoading:qt,modalStyle:Ht,allModules:Kt,blueprints:Xt,selectedFields:Gt,components:Yt,products:Jt,companyProcesses:Qt,readOnly:$t=!1}=e,[en]=(0,d.aL)(),{field_type:ln={},id:tn,value:nn,options:on}=(null===en||void 0===en?void 0:en.selectedFieldFromSelectedBlueprintComponent)||{},[an,dn]=(0,o.useState)(nn),[sn,rn]=(0,o.useState)(!1),[un,cn]=(0,o.useState)((0,n.Z)({},on)),[mn,pn]=(0,o.useState)({}),{companyPositionsArray:vn,companyDepartments:yn,companyUsersArray:hn}=(0,a.v9)(e=>e.flowReducer),[fn]=(0,o.useState)(ke.sortWith([ke.ascend(ke.prop("department_name"))])(null===vn||void 0===vn?void 0:vn.map(e=>{var l;return{label:e.label,value:e.value,department_name:e.department,department_id:null===(l=yn.find(l=>l.label==e.department))||void 0===l?void 0:l.value}}))),[Cn,gn]=(0,o.useState)(null===on||void 0===on?void 0:on.interval),[bn,Sn]=(0,o.useState)(null===on||void 0===on?void 0:on.field),[En]=(0,o.useState)([{label:"Firstname",value:"first_name"},{label:"Lastname",value:"last_name"},{label:"Username",value:"username"},{label:"Email",value:"email"},{label:"Address",value:"address"},{label:"City",value:"city"},{label:"Postal",value:"postal"},{label:"Phone",value:"phone"},{label:"Timezone",value:"timezone"}]),_n=(0,o.useCallback)(()=>{var e;let l={general:"",name:"",list:"",type:""};var t;((null===an||void 0===an||null===(e=an.trim())||void 0===e?void 0:e.length)<1&&(l.name="Element name must have at least one letter character"),ln&&ke.has("options")(ln))&&(null===ln||void 0===ln||null===(t=ln.options)||void 0===t||t.forEach(e=>{var t;"object"!==typeof e&&(ke.has(null===e||void 0===e?void 0:e.toString())(un)||(l.general="Mandatory fields are not completed,"),(!un[e]||null!==un&&void 0!==un&&un[e]&&(null===(t=un[e])||void 0===t?void 0:t.length)<1)&&(l[e]=" ".concat(e," was not provided")))}));return pn(l),!!Object.values(l).every(e=>""===e)},[un,an,ln,on]),wn=(0,o.useCallback)(()=>{sn&&_n()},[sn,_n]);(0,o.useEffect)(()=>{wn()},[wn]);const Nn=(0,o.useCallback)(()=>{rn(!0),_n()&&(null===Ut||void 0===Ut||Ut({id:tn,value:an,options:un}))},[Ut,un,an,tn,_n]),Ln=Kt.map(e=>({label:e.name,value:e.id,module:e}));return o.createElement(p.U7,{isOpen:zt,blured:!0,scrollable:!0,shadowedContainerStyle:Ht},o.createElement("div",{className:Ie.host},o.createElement("div",{className:Ie.target},o.createElement("p",{className:Ie.title},"edit ".concat(null===ln||void 0===ln?void 0:ln.name)),o.createElement(Fe,{errorMessage:Object.values(mn).length>0?Object.values(mn).filter(e=>""!==e):""}),o.createElement(Fe,null,o.createElement(p.Lb,{title:"Field Name"}),o.createElement("input",{type:"text",name:"element-name",value:an,onChange:e=>{return l=e.target.value,void dn(l);var l},className:Ie.elementTextInput,readOnly:"Template"===ln.name})),"number"===(null===ln||void 0===ln||null===(l=ln.name)||void 0===l?void 0:l.toLowerCase())&&o.createElement(o.Fragment,null,o.createElement(De,{validationErrors:mn,defaultValue:"numeric"==(null===on||void 0===on?void 0:on.type),onChangeType:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{type:e}))}}),o.createElement(Fe,{errorMessage:null===mn||void 0===mn?void 0:mn.type},o.createElement(p.Lb,{title:"Output display"}),o.createElement(p.sm,{"apps-variant":null!==mn&&void 0!==mn&&mn.type?"error":"normal",className:Ie.unfocusableWrapper},o.createElement(p.Ld,{triggerType:"chevron",items:Oe,defaultSelectedItem:Oe.find(e=>e.value===(null===un||void 0===un?void 0:un.display)),className:Ie.componentsSelectComponent,inputClassName:Ie.componentsSearchInput,clearControlsClassName:Ie.componentsClearControlsClassName,molclassname:Ie.componentsSelectMenuOverlayList,moliclassname:Ie.componentsSelectMenuOverlayListItem,inputStyle:{color:"var(--app-color-gray-dark)",fontSize:"1rem"},onChange:e=>{"bar"===(null===e||void 0===e?void 0:e.value)?cn((0,n.Z)((0,n.Z)({},un),{},{display:null===e||void 0===e?void 0:e.value,chart:!1})):(null===un||void 0===un||delete un.barC,null===un||void 0===un||delete un.maxC,null===un||void 0===un||delete un.max,cn((0,n.Z)((0,n.Z)({},un),{},{display:null===e||void 0===e?void 0:e.value})))}}))),"bar"===(null===un||void 0===un?void 0:un.display)&&o.createElement(Fe,{errorMessage:null===mn||void 0===mn?void 0:mn.name},o.createElement(p.Lb,{title:"Maximum Value"}),o.createElement("input",{type:"text",name:"element-name",value:un.max,onBlur:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{max:e.target.value}))},className:Ie.elementTextInput}),o.createElement(p.Lb,{title:"Color - Formula Value"}),o.createElement("input",{type:"text",className:Ie.elementTextInput,style:{borderRight:"white"===(null===un||void 0===un?void 0:un.barC)?"white":"50px solid ".concat(null!==(t=null===un||void 0===un?void 0:un.barC)&&void 0!==t?t:"#F6F4EC")},defaultValue:null!==(i=null===un||void 0===un?void 0:un.barC)&&void 0!==i?i:"#F6F4EC",onBlur:e=>cn((0,n.Z)((0,n.Z)({},un),{},{barC:e.target.value}))}),o.createElement(p.Lb,{title:"Color - Formula Max Value"}),o.createElement("input",{type:"text",className:Ie.elementTextInput,style:{borderRight:"white"===(null===un||void 0===un?void 0:un.maxC)?"white":"50px solid ".concat(null!==(s=null===un||void 0===un?void 0:un.maxC)&&void 0!==s?s:"yellow")},defaultValue:null!==(r=null===un||void 0===un?void 0:un.maxC)&&void 0!==r?r:"yellow",onBlur:e=>cn((0,n.Z)((0,n.Z)({},un),{},{maxC:e.target.value}))})),"percentage"===(null===un||void 0===un?void 0:un.type)&&"bar"!==(null===un||void 0===un?void 0:un.display)&&o.createElement(p.pd,{id:"Show chart for percentage value",title:"Show chart for percentage value",ungrouped:!0,withAckButton:!1,style:{margin:"10px 0px",width:"auto"},value:null===un||void 0===un?void 0:un.chart,toggleSelected:e=>{cn(e?(0,n.Z)((0,n.Z)({},un),{},{chart:!0}):(0,n.Z)((0,n.Z)({},un),{},{chart:!1}))}})),"url"===(null===ln||void 0===ln||null===(u=ln.name)||void 0===u?void 0:u.toLowerCase())&&o.createElement(We,{validationErrors:mn,defaultType:"image"==(null===on||void 0===on?void 0:on.type),defaultValue:null!==(c=null===on||void 0===on?void 0:on.value)&&void 0!==c?c:"",onChangeType:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{type:e}))},onChangeValue:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{value:e}))}}),"checkbox"===(null===ln||void 0===ln||null===(v=ln.name)||void 0===v?void 0:v.toLowerCase())&&o.createElement(Ve,{validationErrors:mn,defaultValue:null!==(y=null===on||void 0===on?void 0:on.value)&&void 0!==y?y:"",onChangeValue:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{value:e}))}}),"phone"===(null===ln||void 0===ln||null===(h=ln.name)||void 0===h?void 0:h.toLowerCase())&&o.createElement(ze,{validationErrors:mn,countryCode:null===on||void 0===on?void 0:on.country_code,defaultValue:(null===on||void 0===on?void 0:on.country_prefix)+" "+(null===on||void 0===on?void 0:on.country_name),onChange:e=>cn(e)}),"currency"===(null===ln||void 0===ln||null===(f=ln.name)||void 0===f?void 0:f.toLowerCase())&&o.createElement(Re,{validationErrors:mn,defaultValue:ke.find(ke.propEq("value",null===on||void 0===on?void 0:on.currency_value))(m.s3),onCurrencySelected:e=>{cn({currency_type:null===e||void 0===e?void 0:e.label,currency_value:null===e||void 0===e?void 0:e.value,symbol:null===e||void 0===e?void 0:e.symbol})}}),"action button"===(null===ln||void 0===ln||null===(C=ln.name)||void 0===C?void 0:C.toLowerCase())&&o.createElement(je,{validationErrors:mn,defaultValue:null===on||void 0===on?void 0:on.action,onActionSelected:e=>{cn({action:null===e||void 0===e?void 0:e.value})}}),"value button"===(null===ln||void 0===ln||null===(g=ln.name)||void 0===g?void 0:g.toLowerCase())&&o.createElement(o.Fragment,null,o.createElement(Fe,null,o.createElement(p.Lb,{title:"Button label to use"}),o.createElement(p.sm,{className:Ie.unfocusableWrapper},o.createElement("input",{type:"text",className:Ie.dropDownNewListItemInput,value:null===un||void 0===un?void 0:un.label,onChange:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{label:e.target.value}))}}))),o.createElement(Fe,null,o.createElement(p.Lb,{title:"Button Image (Optional)"}),o.createElement(p.sm,{className:Ie.unfocusableWrapper},o.createElement("input",{type:"text",className:Ie.dropDownNewListItemInput,value:null===un||void 0===un?void 0:un.image,onChange:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{image:e.target.value}))}}))),o.createElement(Fe,null,o.createElement(p.Lb,{title:"Value to set"}),o.createElement(p.sm,{className:Ie.unfocusableWrapper},o.createElement("input",{type:"text",className:Ie.dropDownNewListItemInput,value:null===un||void 0===un?void 0:un.value,onChange:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{value:e.target.value}))}}))),o.createElement("label",{className:Ie.checkboxLabelClass},"Use selection as decision for step?",o.createElement("input",{type:"checkbox",defaultChecked:null===on||void 0===on?void 0:on.decision,onChange:e=>e.target.checked?cn((0,n.Z)((0,n.Z)({},un),{},{decision:e.target.checked})):cn((0,n.Z)((0,n.Z)({},un),{},{decision:!1,jump1:void 0}))})),(null===un||void 0===un?void 0:un.decision)&&o.createElement(Fe,{errorMessage:null===mn||void 0===mn?void 0:mn.position_id},o.createElement(p.Lb,{title:"Process where to look for step"}),o.createElement(p.sm,{"app-variant":null!==mn&&void 0!==mn&&mn.position_id?"error":"normal",className:Ne()(Ie.unfocusableWrapper,Ie.peoplePositionSelectContainer)},o.createElement(p.rk,{items:Qt.map(e=>({label:e.name,value:e.id,process:e})),defaultSelected:{label:null===(b=Qt.find(e=>e.id===(null===un||void 0===un?void 0:un.process)))||void 0===b?void 0:b.name},className:Ie.dropdownSelectComponent,tmiClassName:Ie.dropdownInput,molclassname:Ie.dropdownSelectMenuOverlayList,moliclassname:Ie.dropdownSelectMenuOverlayListItem,onChange:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{process:e.value}))}}))),(null===un||void 0===un?void 0:un.decision)&&(null===un||void 0===un?void 0:un.process)&&o.createElement(Fe,{errorMessage:null===mn||void 0===mn?void 0:mn.position_id},o.createElement(p.Lb,{title:"Selection jumps to step"}),o.createElement(p.sm,{"app-variant":null!==mn&&void 0!==mn&&mn.position_id?"error":"normal",className:Ne()(Ie.unfocusableWrapper,Ie.peoplePositionSelectContainer)},o.createElement(p.rk,{items:null===(S=Qt.find(e=>e.id===(null===un||void 0===un?void 0:un.process)))||void 0===S||null===(E=S.steps)||void 0===E?void 0:E.map(e=>({label:e.name,value:e.id,step:e})),defaultSelected:{label:null===(_=Qt.find(e=>e.id===(null===un||void 0===un?void 0:un.process)))||void 0===_||null===(w=_.steps)||void 0===w||null===(N=w.find(e=>e.id===un.jump1))||void 0===N?void 0:N.name},className:Ie.dropdownSelectComponent,tmiClassName:Ie.dropdownInput,molclassname:Ie.dropdownSelectMenuOverlayList,moliclassname:Ie.dropdownSelectMenuOverlayListItem,onChange:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{jump1:e.value}))}})))),"profile"===(null===ln||void 0===ln||null===(L=ln.name)||void 0===L?void 0:L.toLowerCase())&&o.createElement(Ue,{companyUsersArray:hn,validationErrors:mn,defaultValue:null===on||void 0===on?void 0:on.type,defaultOption:un,onProfileSelected:e=>{cn({type:null===e||void 0===e?void 0:e.value})}}),"upload"===(null===ln||void 0===ln||null===(Z=ln.name)||void 0===Z?void 0:Z.toLowerCase())&&o.createElement(dl,{validationErrors:mn,defaultMaxSize:null!==(x=+(null===on||void 0===on?void 0:on.max_file_size)/1024)&&void 0!==x?x:51200,onMaxFileSizeChanged:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{max_file_size:1024*+e}))},defaultList:on.accepted_mimes,onListSelected:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{accepted_mimes:e}))}}),"image"===(null===ln||void 0===ln||null===(I=ln.name)||void 0===I?void 0:I.toLowerCase())&&o.createElement(dl,{validationErrors:mn,defaultMaxSize:null!==(M=+(null===on||void 0===on?void 0:on.max_file_size)/1024)&&void 0!==M?M:51200,onMaxFileSizeChanged:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{max_file_size:1024*+e}))},defaultList:on.accepted_mimes,onListSelected:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{accepted_mimes:e}))}}),"date"===(null===ln||void 0===ln||null===(k=ln.name)||void 0===k?void 0:k.toLowerCase())&&o.createElement(Ae,{validationErrors:mn,defaultValue:"single"==(null===un||void 0===un?void 0:un.type),defaultAuto:null===un||void 0===un?void 0:un.auto,defaultTime:null===un||void 0===un?void 0:un.time,onChangeType:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{type:e}))},onExceeded:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{auto:e}))},withTime:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{time:e}))}}),"people"===(null===ln||void 0===ln||null===(O=ln.name)||void 0===O?void 0:O.toLowerCase())&&o.createElement(o.Fragment,null,o.createElement(cl,{validationErrors:mn,allModules:Kt,defaultType:null===un||void 0===un?void 0:un.type,defaultAssign:null===un||void 0===un?void 0:un.assign,defaultEmail:null===un||void 0===un?void 0:un.email,defaultCalendar:null===un||void 0===un?void 0:un.calendar,defaultSlider:null===un||void 0===un?void 0:un.slider,onChangeSlider:e=>{1==e?cn((0,n.Z)((0,n.Z)({},un),{},{slider:!0,calendar:!1})):0==e&&cn((0,n.Z)((0,n.Z)({},un),{},{slider:!1,info:!1,other:!1}))},onCalendar:e=>{1==e?cn((0,n.Z)((0,n.Z)({},un),{},{calendar:!0,slider:!1,assign:!1,info:!1,other:!1})):0==e&&cn((0,n.Z)((0,n.Z)({},un),{},{calendar:!1}))},defaultModule:Kt.map(e=>({label:e.name,value:e.id,module:e})).find(e=>{var l;return(null===e||void 0===e?void 0:e.value)===(null!==(l=null===un||void 0===un?void 0:un.module_id)&&void 0!==l?l:"")}),defaultPositions:null!==(T=null===un||void 0===un?void 0:un.position_id)&&void 0!==T?T:[],onChangeType:e=>{e&&cn((0,n.Z)((0,n.Z)({},un),{},{type:e}))},onChangeEmail:e=>{e&&cn((0,n.Z)((0,n.Z)({},un),{},{email:e}))},onChangeAssign:e=>{e&&cn((0,n.Z)((0,n.Z)({},un),{},{assign:e}))},onChangeList:e=>{e.length>0?cn((0,n.Z)((0,n.Z)({},un),{},{position_id:[...e]})):0==e.length&&delete un.position_id},onModuleSelected:e=>{e&&cn((0,n.Z)((0,n.Z)({},un),{},{module_id:e.value}))},options:on,onOptionsSelected:e=>{cn((0,n.Z)((0,n.Z)({},un),e))},fieldOption:un}),(null===un||void 0===un?void 0:un.slider)&&o.createElement("label",{className:Ie.checkboxLabelClass},"Display user info?",o.createElement("input",{type:"checkbox",defaultChecked:null===on||void 0===on?void 0:on.info,onChange:e=>cn((0,n.Z)((0,n.Z)({},un),{},{info:e.target.checked}))})),(null===un||void 0===un?void 0:un.slider)&&o.createElement("label",{className:Ie.checkboxLabelClass},"Display other user info?",o.createElement("input",{type:"checkbox",defaultChecked:null===on||void 0===on?void 0:on.other,onChange:e=>cn((0,n.Z)((0,n.Z)({},un),{},{other:e.target.checked}))})),(null===un||void 0===un?void 0:un.position_id)&&o.createElement(Fe,null,o.createElement(p.Lb,{title:"Field in users to use as filter"}),o.createElement(p.sm,{className:Ie.unfocusableWrapper},o.createElement(p.rk,{items:En,defaultSelected:En.find(e=>e.value===un.filter),className:Ie.dropdownSelectComponent,tmiClassName:Ie.dropdownInput,molclassname:Ie.dropdownSelectMenuOverlayList,moliclassname:Ie.dropdownSelectMenuOverlayListItem,onChange:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{filter:e.value}))}}))),(null===un||void 0===un?void 0:un.position_id)&&o.createElement(He,{title:"Filter Selections",validationErrors:mn,defaultList:(null===un||void 0===un||null===(P=un.dropdown)||void 0===P?void 0:P.length)>0?null===un||void 0===un?void 0:un.dropdown:void 0,onListSelected:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{dropdown:e}))}}),o.createElement("div",{style:{display:null!==un&&void 0!==un&&un.calendar?"":"none"}},o.createElement(Fe,null,o.createElement(p.Lb,{title:"Header label to use"}),o.createElement(p.sm,{className:Ie.unfocusableWrapper},o.createElement("input",{type:"text",className:Ie.dropDownNewListItemInput,value:null===un||void 0===un?void 0:un.header,onChange:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{header:e.target.value}))}}))),o.createElement(Fe,null,o.createElement(p.Lb,{title:"Title label to use in tasks"}),o.createElement(p.sm,{className:Ie.unfocusableWrapper},o.createElement("input",{type:"text",className:Ie.dropDownNewListItemInput,value:null!==(B=null===un||void 0===un?void 0:un.title)&&void 0!==B?B:"Event Name",onChange:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{title:e.target.value}))}}))),o.createElement(Fe,null,o.createElement(p.Lb,{title:"Description label to use in tasks"}),o.createElement(p.sm,{className:Ie.unfocusableWrapper},o.createElement("input",{type:"text",className:Ie.dropDownNewListItemInput,value:null!==(F=null===un||void 0===un?void 0:un.description)&&void 0!==F?F:"Description",onChange:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{description:e.target.value}))}}))),o.createElement(Fe,null,o.createElement(p.Lb,{title:"Assignee label to use in tasks"}),o.createElement(p.sm,{className:Ie.unfocusableWrapper},o.createElement("input",{type:"text",className:Ie.dropDownNewListItemInput,value:null!==(D=null===un||void 0===un?void 0:un.assignee)&&void 0!==D?D:"Assigned to",onChange:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{assignee:e.target.value}))}}))),o.createElement(Fe,null,o.createElement(p.Lb,{title:"Start date label to use in tasks"}),o.createElement(p.sm,{className:Ie.unfocusableWrapper},o.createElement("input",{type:"text",className:Ie.dropDownNewListItemInput,value:null!==(A=null===un||void 0===un?void 0:un.start)&&void 0!==A?A:"Start Date",onChange:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{start:e.target.value}))}}))),o.createElement(Fe,null,o.createElement(p.Lb,{title:"End date label to use in tasks"}),o.createElement(p.sm,{className:Ie.unfocusableWrapper},o.createElement("input",{type:"text",className:Ie.dropDownNewListItemInput,value:null!==(W=null===un||void 0===un?void 0:un.end)&&void 0!==W?W:"End Date",onChange:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{end:e.target.value}))}}))),o.createElement(Fe,null,o.createElement(p.Lb,{title:"Value label to use  in tasks (Optional)"}),o.createElement(p.sm,{className:Ie.unfocusableWrapper},o.createElement("input",{type:"text",className:Ie.dropDownNewListItemInput,value:null===un||void 0===un?void 0:un.valueL,onChange:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{valueL:e.target.value}))}})),o.createElement("p",{className:Ie.optionSettings},"Note: If set, ensure label is set in calendar")),o.createElement(Fe,null,o.createElement(p.Lb,{title:"Display users in assigned to from these positions (Optional)"}),o.createElement("div",{style:{border:"1px solid var(--app-color-gray-lighter)"}},o.createElement(p.gK,{triggerType:"chevron",labelsTag:!0,tagCloseButtonType:"circleX",tagType:"shadowed",tagEmplacement:"inlined",items:fn,itemType:"checkboxes",checkboxEmplacement:"left",initialSelectedItems:(null===un||void 0===un?void 0:un.aList)&&(null===fn||void 0===fn?void 0:fn.filter(e=>(null===un||void 0===un?void 0:un.aList.indexOf(e.value))>-1)),className:Ie.uploadSelectComponent,inputClassName:Ie.uploadSearchInput,molclassname:Ie.uploadSelectMenuOverlayList,moliclassname:Ie.uploadSelectMenuOverlayListItem,onChange:e=>{e.length>0?cn((0,n.Z)((0,n.Z)({},un),{},{aList:null===e||void 0===e?void 0:e.map(e=>null===e||void 0===e?void 0:e.value)})):0==e.length&&(null===un||void 0===un||delete un.aList)}}))),o.createElement(He,{validationErrors:mn,defaultList:(null===on||void 0===on||null===(V=on.list)||void 0===V?void 0:V.length)>0?null===on||void 0===on?void 0:on.list:void 0,onListSelected:e=>{e.length>0?cn((0,n.Z)((0,n.Z)({},un),{},{list:e})):0==e.length&&cn((0,n.Z)((0,n.Z)({},un),{},{list:[]}))}}))),"positions"===(null===ln||void 0===ln||null===(z=ln.name)||void 0===z?void 0:z.toLowerCase())&&o.createElement(o.Fragment,null,o.createElement(ml,{validationErrors:mn,allModules:Kt,defaultType:null===on||void 0===on?void 0:on.type,defaultAssign:null===on||void 0===on?void 0:on.assign,defaultEmail:null===on||void 0===on?void 0:on.email,defaultCalendar:null===on||void 0===on?void 0:on.calendar,defaultSlider:null===on||void 0===on?void 0:on.slider,onChangeSlider:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{slider:e}))},onCalendar:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{calendar:e}))},defaultModule:Kt.map(e=>({label:e.name,value:e.id,module:e})).find(e=>{var l;return(null===e||void 0===e?void 0:e.value)===(null!==(l=null===on||void 0===on?void 0:on.module_id)&&void 0!==l?l:"")}),defaultPositions:null!==(R=null===on||void 0===on?void 0:on.position_id)&&void 0!==R?R:[],onChangeType:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{type:e}))},onChangeEmail:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{email:e}))},onChangeAssign:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{assign:e}))},onChangeList:e=>{e.length>0?cn((0,n.Z)((0,n.Z)({},un),{},{position_id:[...e]})):delete un.position_id},onModuleSelected:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{module_id:e.value}))},options:on,onOptionsSelected:e=>{cn(e)},fieldOption:un}),o.createElement("div",null,o.createElement(p.pd,{id:"Fetch users when item is selected",title:"Fetch users when item is selected?",ungrouped:!0,withAckButton:!1,style:{margin:"10px 0px",width:"auto"},value:null===un||void 0===un?void 0:un.fetch,toggleSelected:e=>{cn(e?(0,n.Z)((0,n.Z)({},un),{},{fetch:!0}):(0,n.Z)((0,n.Z)({},un),{},{fetch:!1}))}})),o.createElement("div",null,o.createElement(p.pd,{id:"Share transaction to position when item is selected",title:"Share transaction to position when item is selected?",ungrouped:!0,withAckButton:!1,style:{margin:"40px 0px 20px 0px",width:"auto"},value:null===un||void 0===un?void 0:un.share,toggleSelected:e=>{cn(e?(0,n.Z)((0,n.Z)({},un),{},{share:!0}):(0,n.Z)((0,n.Z)({},un),{},{share:!1}))}})),o.createElement("div",null,o.createElement(p.pd,{id:"AddUserPosition",title:"Add user to selected position?",ungrouped:!0,withAckButton:!1,style:{margin:"40px 0px 20px 0px",width:"auto"},value:null!==(j=null===un||void 0===un?void 0:un.addToPos)&&void 0!==j&&j,toggleSelected:e=>{cn(e?(0,n.Z)((0,n.Z)({},un),{},{addToPos:!0,share:!1,calendar:!1,fetch:!1}):(0,n.Z)((0,n.Z)({},un),{},{addToPos:!1}))}})),o.createElement("div",{style:{display:null!==un&&void 0!==un&&un.calendar?"":"none"}},o.createElement(Fe,null,o.createElement(p.Lb,{title:"Header label to use"}),o.createElement(p.sm,{className:Ie.unfocusableWrapper},o.createElement("input",{type:"text",className:Ie.dropDownNewListItemInput,value:null===un||void 0===un?void 0:un.header,onChange:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{header:e.target.value}))}}))),o.createElement(Fe,null,o.createElement(p.Lb,{title:"Title label to use"}),o.createElement(p.sm,{className:Ie.unfocusableWrapper},o.createElement("input",{type:"text",className:Ie.dropDownNewListItemInput,value:null!==(U=null===un||void 0===un?void 0:un.title)&&void 0!==U?U:"Event Name",onChange:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{title:e.target.value}))}}))),o.createElement(Fe,null,o.createElement(p.Lb,{title:"Description label to use"}),o.createElement(p.sm,{className:Ie.unfocusableWrapper},o.createElement("input",{type:"text",className:Ie.dropDownNewListItemInput,value:null!==(q=null===un||void 0===un?void 0:un.description)&&void 0!==q?q:"Description",onChange:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{description:e.target.value}))}}))),o.createElement(Fe,null,o.createElement(p.Lb,{title:"Assignee label to use"}),o.createElement(p.sm,{className:Ie.unfocusableWrapper},o.createElement("input",{type:"text",className:Ie.dropDownNewListItemInput,value:null!==(H=null===un||void 0===un?void 0:un.assignee)&&void 0!==H?H:"Assigned to",onChange:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{assignee:e.target.value}))}}))),o.createElement(Fe,null,o.createElement(p.Lb,{title:"Start date label to use"}),o.createElement(p.sm,{className:Ie.unfocusableWrapper},o.createElement("input",{type:"text",className:Ie.dropDownNewListItemInput,value:null!==(K=null===un||void 0===un?void 0:un.start)&&void 0!==K?K:"Start Date",onChange:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{start:e.target.value}))}}))),o.createElement(Fe,null,o.createElement(p.Lb,{title:"End date label to use"}),o.createElement(p.sm,{className:Ie.unfocusableWrapper},o.createElement("input",{type:"text",className:Ie.dropDownNewListItemInput,value:null!==(X=null===un||void 0===un?void 0:un.end)&&void 0!==X?X:"End Date",onChange:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{end:e.target.value}))}}))),o.createElement(Fe,null,o.createElement(p.Lb,{title:"Value label to use (Optional)"}),o.createElement(p.sm,{className:Ie.unfocusableWrapper},o.createElement("input",{type:"text",className:Ie.dropDownNewListItemInput,value:null===un||void 0===un?void 0:un.valueL,onChange:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{valueL:e.target.value}))}})),o.createElement("p",{className:Ie.optionSettings},"Note: If set, ensure label is set in calendar")),o.createElement(He,{validationErrors:mn,defaultList:(null===on||void 0===on||null===(G=on.list)||void 0===G?void 0:G.length)>0?null===on||void 0===on?void 0:on.list:void 0,onListSelected:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{list:e}))}}))),"dropdown"===(null===ln||void 0===ln||null===(Y=ln.name)||void 0===Y?void 0:Y.toLowerCase())&&o.createElement(qe,{validationErrors:mn,defaultType:m.YX.find(e=>{var l;return(null===e||void 0===e?void 0:e.value)==(null!==(l=null===on||void 0===on?void 0:on.type)&&void 0!==l?l:"single")}),defaultList:(null===on||void 0===on||null===(J=on.list)||void 0===J?void 0:J.length)>0?null===on||void 0===on?void 0:on.list:void 0,defaultPr:null!==(Q=null===on||void 0===on?void 0:on.process)&&void 0!==Q?Q:"",defaultJ1:null!==($=null===on||void 0===on?void 0:on.jump1)&&void 0!==$?$:"",defaultJ2:null!==(ee=null===on||void 0===on?void 0:on.jump2)&&void 0!==ee?ee:"",options:un,onTypeSelected:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{type:e.value}))},onListSelected:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{list:e}))},onJump1Selected:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{jump1:e}))},onJump2Selected:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{jump2:e}))},onProcSelected:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{process:e}))},companyProcesses:Qt}),"radio"===(null===ln||void 0===ln||null===(le=ln.name)||void 0===le?void 0:le.toLowerCase())&&o.createElement(qe,{validationErrors:mn,defaultList:(null===on||void 0===on||null===(te=on.list)||void 0===te?void 0:te.length)>0?null===on||void 0===on?void 0:on.list:void 0,defaultPr:null!==(ne=null===on||void 0===on?void 0:on.process)&&void 0!==ne?ne:"",defaultJ1:null!==(oe=null===on||void 0===on?void 0:on.jump1)&&void 0!==oe?oe:"",defaultJ2:null!==(ae=null===on||void 0===on?void 0:on.jump2)&&void 0!==ae?ae:"",onListSelected:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{list:e}))},onJump1Selected:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{jump1:e}))},onJump2Selected:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{jump2:e}))},onProcSelected:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{process:e}))},companyProcesses:Qt}),"status"===(null===ln||void 0===ln||null===(ie=ln.name)||void 0===ie?void 0:ie.toLowerCase())&&o.createElement(o.Fragment,null,o.createElement(He,{validationErrors:mn,defaultList:(null===on||void 0===on||null===(de=on.list)||void 0===de?void 0:de.length)>0?null===on||void 0===on?void 0:on.list:void 0,onListSelected:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{list:e}))}}),o.createElement("label",{className:Ie.checkboxLabelClass},"Control transaction with this field?",o.createElement("input",{type:"checkbox",defaultChecked:null===on||void 0===on?void 0:on.control,onChange:e=>cn((0,n.Z)((0,n.Z)({},un),{},{control:e.target.checked}))}))),("list"===(null===ln||void 0===ln||null===(se=ln.name)||void 0===se?void 0:se.toLowerCase())||"module list"===(null===ln||void 0===ln||null===(re=ln.name)||void 0===re?void 0:re.toLowerCase()))&&o.createElement(Xe,{allModules:Kt,validationErrors:mn,defaultType:{label:null!==(ue=null===on||void 0===on?void 0:on.type)&&void 0!==ue?ue:"Table",value:null!==(ce=null===on||void 0===on?void 0:on.type)&&void 0!==ce?ce:"Table"},defaultTypeX:on,defaultModule:Kt.map(e=>({label:e.name,value:e.id,module:e})).find(e=>{var l;return(null===e||void 0===e?void 0:e.value)===(null!==(l=null===on||void 0===on?void 0:on.module_id)&&void 0!==l?l:"")}),defaultList:(null===on||void 0===on||null===(me=on.list)||void 0===me?void 0:me.length)>0?null===on||void 0===on?void 0:on.list:void 0,onTypeSelected:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{type:e.value}))},onModuleSelected:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{module_id:e.module.id}))},onChangeList:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{list:[...e]}))},multiSelectLabel:""===(null===on||void 0===on?void 0:on.module_id)?"":null===(pe=Kt.map(e=>({label:e.name,value:e.id,module:e})).find(e=>{var l;return(null===e||void 0===e?void 0:e.value)===(null!==(l=null===on||void 0===on?void 0:on.module_id)&&void 0!==l?l:"")}))||void 0===pe?void 0:pe.label}),"transaction list"===(null===ln||void 0===ln||null===(ve=ln.name)||void 0===ve?void 0:ve.toLowerCase())&&o.createElement(o.Fragment,null,o.createElement(p.Lb,{title:"Note: Make sure Allow Mutiple Inputs in Step configuration is set to YES to allow creation of items",style:{margin:"30px 5px"}}),o.createElement("label",{className:Ie.checkboxLabelClass},"The list uses six or more columns?",o.createElement("input",{type:"checkbox",defaultChecked:null===on||void 0===on?void 0:on.simple,onChange:e=>{e.target.checked&&(null===un||void 0===un||delete un.id,null===un||void 0===un||delete un.module_id,null===un||void 0===un||delete un.type,null===un||void 0===un||delete un.map),cn((0,n.Z)((0,n.Z)({},un),{},{simple:e.target.checked}))}})),(null===un||void 0===un?void 0:un.simple)&&o.createElement(Fe,{errorMessage:null===mn||void 0===mn?void 0:mn.type},o.createElement(p.Lb,{title:"Module to list"}),o.createElement(p.sm,{"app-variant":null!==mn&&void 0!==mn&&mn.type?"error":"normal",className:Ie.unfocusableWrapper},o.createElement(p.rk,{items:Ln,defaultSelected:Kt.map(e=>({label:e.name,value:e.id,module:e})).find(e=>{var l;return(null===e||void 0===e?void 0:e.value)===(null!==(l=null===un||void 0===un?void 0:un.module_id)&&void 0!==l?l:"")}),className:Ie.dropdownSelectComponent,tmiClassName:Ie.dropdownInput,molclassname:Ie.dropdownSelectMenuOverlayList,moliclassname:Ie.dropdownSelectMenuOverlayListItem,onChange:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{module_id:e.module.id}))}}))),o.createElement(Fe,null,o.createElement(p.Lb,{title:"Type (Optional)"}),o.createElement(p.sm,{className:Ie.unfocusableWrapper},o.createElement("input",{type:"text",className:Ie.dropDownNewListItemInput,defaultValue:null===on||void 0===on?void 0:on.type,onChange:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{type:e.target.value}))}}))),!(null!==un&&void 0!==un&&un.simple)&&o.createElement(o.Fragment,null,o.createElement(Fe,null,o.createElement(p.Lb,{title:"List ID"}),o.createElement(p.sm,{className:Ie.unfocusableWrapper},o.createElement("input",{type:"text",className:Ie.dropDownNewListItemInput,value:null===on||void 0===on?void 0:on.id,onChange:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{id:e.target.value}))}}))),o.createElement(Pe,{blueprints:Xt,allModules:Kt,companyProcesses:Qt,validationErrors:mn,defaultTable:{label:null!==(ye=null===on||void 0===on?void 0:on.table)&&void 0!==ye?ye:"Table",value:null!==(he=null===on||void 0===on?void 0:on.table)&&void 0!==he?he:"Table"},options:un,defaultMap:null!==(fe=null===un||void 0===un?void 0:un.map)&&void 0!==fe?fe:{},defaultModule:Kt.map(e=>({label:e.name,value:e.id,module:e})).find(e=>{var l;return(null===e||void 0===e?void 0:e.value)===(null!==(l=null===un||void 0===un?void 0:un.module_id)&&void 0!==l?l:"")}),defaultList:(null===un||void 0===un||null===(Ce=un.list)||void 0===Ce?void 0:Ce.length)>0?null===un||void 0===un?void 0:un.list:void 0,onTableSelected:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{table:e.value}))},onModuleSelected:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{module_id:e.module.id}))},onChangeMapping:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{map:e}))},multiSelectLabel:""===(null===un||void 0===un?void 0:un.module_id)?"":null===(ge=Kt.map(e=>({label:e.name,value:e.id,module:e})).find(e=>{var l;return(null===e||void 0===e?void 0:e.value)===(null!==(l=null===un||void 0===un?void 0:un.module_id)&&void 0!==l?l:"")}))||void 0===ge?void 0:ge.label,setFieldOption:cn})),o.createElement("label",{className:Ie.checkboxLabelClass},"Show footer?",o.createElement("input",{type:"checkbox",defaultChecked:null===on||void 0===on?void 0:on.footer,onChange:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{footer:e.target.checked}))}})),o.createElement("label",{className:Ie.checkboxLabelClass},"Immediately save item as added?",o.createElement("input",{type:"checkbox",defaultChecked:null===on||void 0===on?void 0:on.asap,onChange:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{asap:e.target.checked}))}})),o.createElement("label",{className:Ie.checkboxLabelClass},"Add File Export?",o.createElement("input",{type:"checkbox",defaultChecked:null===on||void 0===on?void 0:on.export,onChange:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{export:e.target.checked}))}}))),("step list"===(null===ln||void 0===ln||null===(be=ln.name)||void 0===be?void 0:be.toLowerCase())||"component list"===(null===ln||void 0===ln||null===(Se=ln.name)||void 0===Se?void 0:Se.toLowerCase()))&&o.createElement(Ge,{blueprints:Xt.filter(e=>{var l;return(null===e||void 0===e?void 0:e.id)!==(null!==(l=null===on||void 0===on?void 0:on.component_id)&&void 0!==l?l:"")}),validationErrors:mn,defaultList:(null===on||void 0===on||null===(Ee=on.list)||void 0===Ee?void 0:Ee.length)>0?null===on||void 0===on?void 0:on.list:void 0,defaultType:Xt.map(e=>({label:e.name,value:e.id,module:e})).find(e=>{var l;return(null===e||void 0===e?void 0:e.value)===(null!==(l=null===on||void 0===on?void 0:on.component_id)&&void 0!==l?l:"")}),onTypeSelected:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{component_id:e.component.id}))},defaultKey:null!==(_e=null===on||void 0===on?void 0:on.key)&&void 0!==_e?_e:"Key",onKeySelected:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{key:e}))},onChangeList:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{list:[...e]}))},multiSelectLabel:""===(null===on||void 0===on?void 0:on.component_id)?"":null===(we=Xt.map(e=>({label:e.name,value:e.id,module:e})).find(e=>{var l;return(null===e||void 0===e?void 0:e.value)===(null!==(l=null===on||void 0===on?void 0:on.component_id)&&void 0!==l?l:"")}))||void 0===we?void 0:we.label}),"product"===(null===ln||void 0===ln||null===(Le=ln.name)||void 0===Le?void 0:Le.toLowerCase())&&o.createElement(Ke,{products:Jt,validationErrors:mn,defaultList:(null===on||void 0===on||null===(Ze=on.list)||void 0===Ze?void 0:Ze.length)>0?null===on||void 0===on?void 0:on.list:void 0,onChangeList:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{list:[...e]}))}}),"record"===(null===ln||void 0===ln||null===(xe=ln.name)||void 0===xe?void 0:xe.toLowerCase())&&o.createElement(o.Fragment,null,o.createElement(Fe,{errorMessage:null===mn||void 0===mn?void 0:mn.type},o.createElement(p.Lb,{title:"Conduct lookup from these transactions:"}),o.createElement(p.sm,{"app-variant":null!==mn&&void 0!==mn&&mn.type?"error":"normal",className:Ie.unfocusableWrapper},o.createElement(p.Ld,{triggerType:"chevron",items:Kt.map(e=>({label:e.name,value:e.id})),defaultSelectedItem:Kt.map(e=>({label:e.name,value:e.id})).find(e=>e.value===(null===on||void 0===on?void 0:on.module_id)),className:Ie.componentsSelectComponent,inputClassName:Ie.componentsSearchInput,inputStyle:{color:"var(--app-color-gray-dark)",fontSize:"1rem",cursor:"pointer"},clearControlsClassName:Ie.componentsClearControlsClassName,molclassname:Ie.componentsSelectMenuOverlayList,moliclassname:Ie.componentsSelectMenuOverlayListItem,onChange:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{module_id:null===e||void 0===e?void 0:e.value}))}}))),o.createElement(rl,{defaultFilters:null===on||void 0===on?void 0:on.filters,validationErrors:mn,field_type:ln,blueprints:Xt,nameValues:(null===on||void 0===on||null===(Me=on.names)||void 0===Me?void 0:Me.length)>0?null===on||void 0===on?void 0:on.names:[],defaultType:(null===on||void 0===on||null===(Te=on.selection)||void 0===Te?void 0:Te.length)>0?{label:null===on||void 0===on?void 0:on.selection}:void 0,defaultList:(null===on||void 0===on||null===(sl=on.list)||void 0===sl?void 0:sl.length)>0?null===on||void 0===on?void 0:on.list:[],defaultValue:{label:void 0===en.allBlueprintComponents.find(e=>{var l;return e.id===(null===(l=en.selectedFieldFromSelectedBlueprintComponent.options)||void 0===l?void 0:l.component_id)})?"":en.allBlueprintComponents.find(e=>{var l;return e.id===(null===(l=en.selectedFieldFromSelectedBlueprintComponent.options)||void 0===l?void 0:l.component_id)}).name},defaultOutputField:(null===on||void 0===on||null===(fl=on.output)||void 0===fl?void 0:fl.length)>0?{label:null===on||void 0===on?void 0:on.output}:void 0,defaultGlobal:null===on||void 0===on?void 0:on.global,onGlobalSelected:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{global:e}))},onListSelected:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{list:e}))},onComponentSelected:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{component_id:e.blueprint.id}))},onTypeSelected:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{selection:e}))},onNamesSelected:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{names:e}))},onOutputFieldSelected:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{output:e}))},onFilterList:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{filters:e}))}})),"googleai assistant"===(null===ln||void 0===ln||null===(Cl=ln.name)||void 0===Cl?void 0:Cl.toLowerCase())&&o.createElement(pl,{defaultCurrent:null===on||void 0===on?void 0:on.current,defaultDescription:null===on||void 0===on?void 0:on.description,defaultValue:null===on||void 0===on?void 0:on.analyze,defaultFixed:null===on||void 0===on?void 0:on.fixed,defaultModule:{label:void 0===Kt.find(e=>e.id===(null===on||void 0===on?void 0:on.module_id))?"":Kt.find(e=>e.id===(null===on||void 0===on?void 0:on.module_id)).name},defaultModule2:{label:void 0===Kt.find(e=>e.id===(null===on||void 0===on?void 0:on.module2_id))?"":Kt.find(e=>e.id===(null===on||void 0===on?void 0:on.module2_id)).name},defaultModule3:{label:void 0===Kt.find(e=>e.id===(null===on||void 0===on?void 0:on.module3_id))?"":Kt.find(e=>e.id===(null===on||void 0===on?void 0:on.module3_id)).name},setFieldValue:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{analyze:e}))},setDefaultCurrent:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{current:e}))},setDefaultDescription:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{description:e}))},onModule1Select:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{module_id:null===e||void 0===e?void 0:e.value}))},onModule2Select:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{module2_id:null===e||void 0===e?void 0:e.value}))},onModule3Select:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{module3_id:null===e||void 0===e?void 0:e.value}))},setDefaultFixed:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{fixed:e}))},validationErrors:mn,allModules:Kt}),"value"===(null===ln||void 0===ln||null===(gl=ln.name)||void 0===gl?void 0:gl.toLowerCase())&&o.createElement(o.Fragment,null,o.createElement(ul,{field_type:ln,allModules:Kt,components:Yt,defaultModule:(null===on||void 0===on||null===(bl=on.module_id)||void 0===bl?void 0:bl.length)>0?{label:Kt.find(e=>e.id===(null===on||void 0===on?void 0:on.module_id)).name,value:null===on||void 0===on?void 0:on.module_id}:void 0,defaultOutput:null===Yt||void 0===Yt?void 0:Yt.filter(e=>e.module_id===(null===on||void 0===on?void 0:on.module_id)).map(e=>({label:"".concat(e.title),value:e.id})),defaultValue:{label:null===on||void 0===on?void 0:on.value,slabel:void 0===en.allBlueprintComponents.find(e=>{var l,t;return e.id===(null===(l=en.selectedFieldFromSelectedBlueprintComponent)||void 0===l||null===(t=l.options)||void 0===t?void 0:t.component_id)})?"":en.allBlueprintComponents.find(e=>e.id===en.selectedFieldFromSelectedBlueprintComponent.options.component_id).name},onModuleSelected:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{module_id:e.value}))},onOutputSelected:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{component_id:e.value}))},onFieldValueSelected:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{value:e.value}))}}),o.createElement("label",{className:Ie.checkboxLabelClass},"Show chart for selected value?",o.createElement("input",{type:"checkbox",defaultChecked:null===on||void 0===on?void 0:on.chart,onChange:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{chart:e.target.checked}))}})),o.createElement("label",{className:Ie.checkboxLabelClass},"Set as date?",o.createElement("input",{type:"checkbox",defaultChecked:null===on||void 0===on?void 0:on.date,onChange:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{date:e.target.checked}))}}))),"formula"===(null===ln||void 0===ln||null===(Sl=ln.name)||void 0===Sl?void 0:Sl.toLowerCase())&&o.createElement(o.Fragment,null,o.createElement(Je,{setFieldOption:cn,fieldOption:un,selectedFields:Gt,validationErrors:mn,defaultValue:(null===on||void 0===on||null===(El=on.operator)||void 0===El?void 0:El.length)>0?null===on||void 0===on?void 0:on.operator:void 0,defaultList:(null===on||void 0===on||null===(_l=on.list)||void 0===_l?void 0:_l.length)>0?null===on||void 0===on?void 0:on.list:void 0,defaultSearchText:(null===on||void 0===on||null===(wl=on.searchtext)||void 0===wl?void 0:wl.length)>0?null===on||void 0===on?void 0:on.searchtext:void 0,onOperatorSelected:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{operator:e}))},onChangeList:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{list:[...e]}))},onChangeSearchText:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{searchtext:e}))},blueprints:Xt}),"freesum"===(null===un||void 0===un?void 0:un.operator)&&o.createElement(He,{title:"Add fields to compute",validationErrors:mn,defaultList:(null===on||void 0===on||null===(Nl=on.list)||void 0===Nl?void 0:Nl.length)>0?null===on||void 0===on?void 0:on.list:void 0,onListSelected:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{list:e}))}})),"item formula"===(null===ln||void 0===ln||null===(Ll=ln.name)||void 0===Ll?void 0:Ll.toLowerCase())&&o.createElement(o.Fragment,null,o.createElement(Qe,{setFieldOption:cn,fieldOption:un,selectedFields:Gt,validationErrors:mn,defaultValue:(null===on||void 0===on||null===(Zl=on.operator)||void 0===Zl?void 0:Zl.length)>0?null===on||void 0===on?void 0:on.operator:void 0,defaultList:(null===on||void 0===on||null===(xl=on.list)||void 0===xl?void 0:xl.length)>0?null===on||void 0===on?void 0:on.list:void 0,defaultSearchText:(null===on||void 0===on||null===(Il=on.searchtext)||void 0===Il?void 0:Il.length)>0?null===on||void 0===on?void 0:on.searchtext:void 0,onOperatorSelected:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{operator:e}))},onChangeList:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{list:[...e]}))},onChangeSearchText:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{searchtext:e}))},blueprints:Xt}),"freesum"===(null===un||void 0===un?void 0:un.operator)&&o.createElement(He,{title:"Add fields to compute",validationErrors:mn,defaultList:(null===on||void 0===on||null===(Ml=on.list)||void 0===Ml?void 0:Ml.length)>0?null===on||void 0===on?void 0:on.list:void 0,onListSelected:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{list:e}))}})),"list filter"===(null===ln||void 0===ln||null===(kl=ln.name)||void 0===kl?void 0:kl.toLowerCase())&&o.createElement(el,{selectedFields:Gt,validationErrors:mn,defaultField:(null===on||void 0===on||null===(Ol=on.field)||void 0===Ol?void 0:Ol.length)>0?null===on||void 0===on?void 0:on.field:void 0,defaultValue:(null===on||void 0===on||null===(Tl=on.value)||void 0===Tl?void 0:Tl.length)>0?null===on||void 0===on?void 0:on.value:void 0,onChangeField:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{field:e}))},onChangeValue:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{value:e}))},blueprints:Xt}),"connector"===(null===ln||void 0===ln||null===(Pl=ln.name)||void 0===Pl?void 0:Pl.toLowerCase())&&o.createElement(il,{selectedFields:Gt,validationErrors:mn,defaultComponent1:(null===on||void 0===on||null===(Bl=on.component1_id)||void 0===Bl?void 0:Bl.length)>0?{label:en.allBlueprintComponents.find(e=>e.id===(null===on||void 0===on?void 0:on.component1_id)).name}:void 0,defaultComponent2:(null===on||void 0===on||null===(Fl=on.component2_id)||void 0===Fl?void 0:Fl.length)>0?{label:en.allBlueprintComponents.find(e=>e.id===(null===on||void 0===on?void 0:on.component2_id)).name}:void 0,defaultComponent3:(null===on||void 0===on||null===(Dl=on.component3_id)||void 0===Dl?void 0:Dl.length)>0?{label:en.allBlueprintComponents.find(e=>e.id===(null===on||void 0===on?void 0:on.component3_id)).name}:void 0,defaultCommon12:(null===on||void 0===on||null===(Al=on.common_field_12)||void 0===Al?void 0:Al.length)>0?{label:null===on||void 0===on?void 0:on.common_field_12}:void 0,defaultInputComponent1:(null===on||void 0===on||null===(Wl=on.component1_input)||void 0===Wl?void 0:Wl.length)>0?{label:null===on||void 0===on?void 0:on.component1_input}:void 0,defaultCommon23:(null===on||void 0===on||null===(Vl=on.common_field_23)||void 0===Vl?void 0:Vl.length)>0?{label:null===on||void 0===on?void 0:on.common_field_23}:void 0,defaultOutputs:(null===on||void 0===on||null===(zl=on.outputs)||void 0===zl?void 0:zl.length)>0?null===on||void 0===on?void 0:on.outputs:[],onComponent1InputSelected:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{component1_input:e}))},onComponent1Selected:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{component1_id:e}))},onComponent2Selected:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{component2_id:e}))},onCommon12Selected:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{common_field_12:e}))},onComponent3Selected:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{component3_id:e}))},onCommon23Selected:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{common_field_23:e}))},onOutputsSelected:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{outputs:[...e]}))},bpContext:en}),"payments"===(null===ln||void 0===ln||null===(Rl=ln.name)||void 0===Rl?void 0:Rl.toLowerCase())&&o.createElement(hl,{validationErrors:mn,defaultValue:(null===on||void 0===on||null===(jl=on.type)||void 0===jl?void 0:jl.length)>0?{label:en.allBlueprintComponents.find(e=>e.id===(null===on||void 0===on?void 0:on.type)).name}:void 0,defaultSrcName:(null===on||void 0===on||null===(Ul=on.paymentField)||void 0===Ul?void 0:Ul.length)>0?{label:null===on||void 0===on?void 0:on.paymentField}:void 0,onSourceSelected:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{type:e}))},onSourceLabel:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{paymentField:e}))},bpContext:en,defaultList:(null===on||void 0===on||null===(ql=on.list)||void 0===ql?void 0:ql.length)>0?null===on||void 0===on?void 0:on.list:void 0,onListSelected:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{list:e}))}}),"lookup"===(null===ln||void 0===ln||null===(Hl=ln.name)||void 0===Hl?void 0:Hl.toLowerCase())&&o.createElement(al,{selectedFields:Gt,validationErrors:mn,defaultGlobal:(null===on||void 0===on||null===(Kl=on.global)||void 0===Kl?void 0:Kl.length)>0?null===on||void 0===on?void 0:on.global:void 0,defaultValue:(null===on||void 0===on||null===(Xl=on.source_id)||void 0===Xl?void 0:Xl.length)>0?{label:en.allBlueprintComponents.find(e=>e.id===(null===on||void 0===on?void 0:on.source_id)).name}:void 0,defaultTarget:(null===on||void 0===on||null===(Gl=on.target_id)||void 0===Gl?void 0:Gl.length)>0?{label:en.allBlueprintComponents.find(e=>e.id===(null===on||void 0===on?void 0:on.target_id)).name}:void 0,defaultType:(null===on||void 0===on||null===(Yl=on.selection)||void 0===Yl?void 0:Yl.length)>0?{label:null===on||void 0===on?void 0:on.selection}:void 0,defaultCommon:(null===on||void 0===on||null===(Jl=on.common_field)||void 0===Jl?void 0:Jl.length)>0?{label:null===on||void 0===on?void 0:on.common_field}:void 0,defaultList:(null===on||void 0===on||null===(Ql=on.list)||void 0===Ql?void 0:Ql.length)>0?null===on||void 0===on?void 0:on.list:void 0,defaultRefList:(null===on||void 0===on||null===($l=on.rlist)||void 0===$l?void 0:$l.length)>0?null===on||void 0===on?void 0:on.rlist:void 0,defaultRefName:(null===on||void 0===on||null===(et=on.referenceLabel)||void 0===et?void 0:et.length)>0?{label:null===on||void 0===on?void 0:on.referenceLabel}:void 0,defaultSrcName:(null===on||void 0===on||null===(lt=on.sourceLabel)||void 0===lt?void 0:lt.length)>0?null===on||void 0===on?void 0:on.sourceLabel:void 0,onSourceSelected:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{source_id:e}))},onTargetSelected:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{target_id:e}))},onFieldSelected:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{common_field:e}))},onChangeList:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{list:[...e]}))},onChangeRList:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{rlist:[...e]}))},onTypeSelected:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{selection:e}))},onSourceLabel:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{sourceLabel:[...e]}))},onReferenceLabel:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{referenceLabel:e}))},onGlobalSelected:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{global:e}))},onSetShowAll:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{showAll:e}))},showAllDefault:null===on||void 0===on?void 0:on.showAll,bpContext:en}),"emails"===(null===ln||void 0===ln||null===(tt=ln.name)||void 0===tt?void 0:tt.toLowerCase())&&o.createElement($e,{validationErrors:mn,options:on,setFieldOption:cn,fieldOption:un,blueprints:Xt}),"product lookup"===(null===ln||void 0===ln||null===(nt=ln.name)||void 0===nt?void 0:nt.toLowerCase())&&o.createElement(ll,{validationErrors:mn,defaultTarget:en.allBlueprintComponents.find(e=>e.id===(null===on||void 0===on?void 0:on.component_id)),defaultRefName:null===on||void 0===on?void 0:on.referenceLabel,defaultList:null===on||void 0===on?void 0:on.list,defaultType:(null===on||void 0===on||null===(ot=on.selection)||void 0===ot?void 0:ot.length)>0?{label:null===on||void 0===on?void 0:on.selection}:void 0,onTargetSelected:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{component_id:e}))},onChangeList:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{list:[...e]}))},onTypeSelected:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{selection:e}))},onReferenceLabel:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{referenceLabel:e}))},bpContext:en}),"id"===(null===ln||void 0===ln||null===(at=ln.name)||void 0===at?void 0:at.toLowerCase())&&o.createElement(Fe,null,o.createElement(p.Lb,{title:"ID series to automatically generate"}),o.createElement("div",{style:{display:"flex",flexDirection:"row"}},o.createElement(vl,{defaultValue:(null===on||void 0===on||null===(it=on.id)||void 0===it?void 0:it.length)>0?{label:null===on||void 0===on?void 0:on.id}:{label:""},onSetIdGenerator:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{id:e,value:e}))}}))),"notes"===(null===ln||void 0===ln||null===(dt=ln.name)||void 0===dt?void 0:dt.toLowerCase())&&o.createElement(Fe,null,o.createElement(p.Lb,{title:"Notes automatically generate"}),o.createElement("div",{style:{display:"flex",flexDirection:"row"}},o.createElement(yl,{fieldOption:un,setFieldOption:cn,defaultValue:on.value.length>0?{label:on.value}:{label:""},onNotesGenerator:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{value:e}))}})),o.createElement(p.pd,{id:"Use rich text?",title:"Use rich text",ungrouped:!0,withAckButton:!1,style:{margin:"20px 0px 0px 0px",width:"auto"},value:!!un.rich,toggleSelected:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{rich:e}))}})),"filters"===(null===ln||void 0===ln||null===(st=ln.name)||void 0===st?void 0:st.toLowerCase())&&o.createElement(tl,{validationErrors:mn,defaultTarget:en.allBlueprintComponents.find(e=>e.id===(null===on||void 0===on?void 0:on.component_id)),defaultFilters:null===on||void 0===on?void 0:on.filters,defaultOutput:null===on||void 0===on?void 0:on.output,defaultGlobal:null===on||void 0===on?void 0:on.global,onGlobalSelected:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{global:e}))},onTargetSelected:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{component_id:e}))},onFilterList:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{filters:e}))},onOutputSelected:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{output:e}))},bpContext:en}),"module"===(null===ln||void 0===ln||null===(rt=ln.name)||void 0===rt?void 0:rt.toLowerCase())&&o.createElement(o.Fragment,null,o.createElement(nl,{validationErrors:mn,fieldOption:un,setFieldOption:e=>cn((0,n.Z)((0,n.Z)({},un),e)),defaultModule:null===un||void 0===un?void 0:un.module_id,defaultFields:null===un||void 0===un?void 0:un.fields,onFieldsSelected:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{fields:e}))},bpContext:en,companyProcesses:Qt,onModuleSelected:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{module_id:e.value}))},components:Yt})),"details"===(null===ln||void 0===ln||null===(ut=ln.name)||void 0===ut?void 0:ut.toLowerCase())&&o.createElement(o.Fragment,null,o.createElement(ol,{validationErrors:mn,fieldOption:un,setFieldOption:e=>cn((0,n.Z)((0,n.Z)({},un),e)),defaultModule:null===un||void 0===un?void 0:un.module_id,defaultFields:null===un||void 0===un?void 0:un.fields,onFieldsSelected:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{fields:e}))},bpContext:en,companyProcesses:Qt,onModuleSelected:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{module_id:e.value}))},components:Yt}),!(null!==un&&void 0!==un&&un.cmp)&&o.createElement("label",{className:Ie.checkboxLabelClass},"Display in Table",o.createElement("input",{type:"checkbox",defaultChecked:null===un||void 0===un?void 0:un.table,onChange:e=>cn((0,n.Z)((0,n.Z)({},un),{},{table:e.target.checked}))}))),"pin"===(null===ln||void 0===ln||null===(ct=ln.name)||void 0===ct?void 0:ct.toLowerCase())&&o.createElement(o.Fragment,null,o.createElement("label",{className:Ie.checkboxLabelClass},"Pin a second location",o.createElement("input",{type:"checkbox",defaultChecked:null===un||void 0===un?void 0:un.destination,onChange:e=>cn((0,n.Z)((0,n.Z)({},un),{},{destination:e.target.checked}))})),o.createElement("label",{className:Ie.checkboxLabelClass},"Compute distance ".concat(1==(null===un||void 0===un?void 0:un.destination)?"between two pins":"with current location"),o.createElement("input",{type:"checkbox",defaultChecked:null===un||void 0===un?void 0:un.compute,onChange:e=>cn((0,n.Z)((0,n.Z)({},un),{},{compute:e.target.checked}))})),o.createElement("label",{className:Ie.checkboxLabelClass},"Show real-time location",o.createElement("input",{type:"checkbox",defaultChecked:null===un||void 0===un?void 0:un.realtime,onChange:e=>cn((0,n.Z)((0,n.Z)({},un),{},{realtime:e.target.checked}))})),1==(null===un||void 0===un?void 0:un.realtime)&&o.createElement(Fe,null,o.createElement(p.Lb,{title:"Interval"}),o.createElement(p.sm,{className:Ie.unfocusableWrapper},o.createElement("input",{type:"number",className:Ie.dropDownNewListItemInput,value:Cn,name:"Interval",onChange:e=>{gn(e.target.value),cn((0,n.Z)((0,n.Z)({},un),{},{interval:+e.target.value}))}}))),o.createElement(Fe,null,o.createElement(p.Lb,{title:"Zoom"}),o.createElement(p.sm,{className:Ie.unfocusableWrapper},o.createElement("input",{type:"number",className:Ie.dropDownNewListItemInput,defaultValue:null===un||void 0===un?void 0:un.zoom,name:"Zoom",onChange:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{zoom:+e.target.value}))}})))),"ratings"===(null===ln||void 0===ln||null===(mt=ln.name)||void 0===mt?void 0:mt.toLowerCase())&&o.createElement(o.Fragment,null,o.createElement(Fe,null,o.createElement(p.Lb,{title:"Field to lookup user ID"}),o.createElement(p.sm,{className:Ie.unfocusableWrapper},o.createElement("input",{type:"text",className:Ie.dropDownNewListItemInput,value:bn,name:"Field to lookup user ID",onChange:e=>{Sn(e.target.value),cn((0,n.Z)((0,n.Z)({},un),{},{field:e.target.value}))}}))),o.createElement("label",{className:Ie.checkboxLabelClass},"Add comments field?",o.createElement("input",{type:"checkbox",defaultChecked:null===un||void 0===un?void 0:un.comments,onChange:e=>cn((0,n.Z)((0,n.Z)({},un),{},{comments:e.target.checked}))})),o.createElement("label",{className:Ie.checkboxLabelClass},"Allow users to view rating?",o.createElement("input",{type:"checkbox",defaultChecked:null===un||void 0===un?void 0:un.view,onChange:e=>cn((0,n.Z)((0,n.Z)({},un),{},{view:e.target.checked}))}))),"rewards"===(null===ln||void 0===ln||null===(pt=ln.name)||void 0===pt?void 0:pt.toLowerCase())&&o.createElement(o.Fragment,null,o.createElement(Fe,null,o.createElement(p.Lb,{title:"Apply rewards when status matches"}),o.createElement(p.sm,{className:Ie.unfocusableWrapper},o.createElement("input",{type:"text",className:Ie.dropDownNewListItemInput,value:null!==(vt=null===un||void 0===un?void 0:un.status)&&void 0!==vt?vt:"Closed",name:"Status to compare",onChange:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{status:e.target.value}))}}))),o.createElement(Fe,null,o.createElement(p.Lb,{title:"Reward points to apply"}),o.createElement(p.sm,{className:Ie.unfocusableWrapper},o.createElement("input",{type:"number",className:Ie.dropDownNewListItemInput,value:null!==(yt=null===un||void 0===un?void 0:un.points)&&void 0!==yt?yt:1,name:"Reward points to apply",onChange:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{points:+e.target.value}))}}))),o.createElement(Fe,null,o.createElement(p.Lb,{title:"Equivalent wallet value to apply"}),o.createElement(p.sm,{className:Ie.unfocusableWrapper},o.createElement("input",{type:"number",className:Ie.dropDownNewListItemInput,value:null!==(ht=null===un||void 0===un?void 0:un.equiv)&&void 0!==ht?ht:1,name:"Equivalent wallet value to apply",onChange:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{equiv:+e.target.value}))}}))),o.createElement("label",{className:Ie.checkboxLabelClass},"Apply rewards to transaction creator?",o.createElement("input",{type:"checkbox",defaultChecked:null===un||void 0===un?void 0:un.creator,onChange:e=>cn((0,n.Z)((0,n.Z)({},un),{},{creator:e.target.checked}))}))),"link"===(null===ln||void 0===ln||null===(ft=ln.name)||void 0===ft?void 0:ft.toLowerCase())&&o.createElement(o.Fragment,null,o.createElement("label",{className:Ie.checkboxLabelClass},"Show link as an image?",o.createElement("input",{type:"checkbox",defaultChecked:null===un||void 0===un?void 0:un.image,onChange:e=>cn((0,n.Z)((0,n.Z)({},un),{},{image:e.target.checked}))}))),"long text"===(null===ln||void 0===ln||null===(Ct=ln.name)||void 0===Ct?void 0:Ct.toLowerCase())&&o.createElement(o.Fragment,null,o.createElement("label",{className:Ie.checkboxLabelClass},"Use Rich Text?",o.createElement("input",{type:"checkbox",defaultChecked:null===un||void 0===un?void 0:un.rich,onChange:e=>cn((0,n.Z)((0,n.Z)({},un),{},{rich:e.target.checked}))}))),"video"===(null===ln||void 0===ln||null===(gt=ln.name)||void 0===gt?void 0:gt.toLowerCase())&&o.createElement(o.Fragment,null,o.createElement(Fe,null,o.createElement(p.Lb,{title:"Status to match"}),o.createElement(p.sm,{className:Ie.unfocusableWrapper},o.createElement("input",{type:"text",className:Ie.dropDownNewListItemInput,value:null===un||void 0===un?void 0:un.status,onChange:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{status:e.target.value}))}}))),o.createElement(Fe,null,o.createElement(p.Lb,{title:"Time that join button is available (mins)"}),o.createElement(p.sm,{className:Ie.unfocusableWrapper},o.createElement("input",{type:"number",className:Ie.dropDownNewListItemInput,value:null!==(bt=null===un||void 0===un?void 0:un.expiry)&&void 0!==bt?bt:10,onChange:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{expiry:+e.target.value}))}})))),"calendar"===(null===ln||void 0===ln||null===(St=ln.name)||void 0===St?void 0:St.toLowerCase())&&o.createElement(o.Fragment,null,o.createElement(Fe,null,o.createElement(p.Lb,{title:"Header label to use"}),o.createElement(p.sm,{className:Ie.unfocusableWrapper},o.createElement("input",{type:"text",className:Ie.dropDownNewListItemInput,value:null===un||void 0===un?void 0:un.header,onChange:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{header:e.target.value}))}}))),o.createElement(Fe,null,o.createElement(p.Lb,{title:"Title label to use"}),o.createElement(p.sm,{className:Ie.unfocusableWrapper},o.createElement("input",{type:"text",className:Ie.dropDownNewListItemInput,value:null!==(Et=null===un||void 0===un?void 0:un.title)&&void 0!==Et?Et:"Event Name",onChange:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{title:e.target.value}))}}))),o.createElement(Fe,null,o.createElement(p.Lb,{title:"Description label to use"}),o.createElement(p.sm,{className:Ie.unfocusableWrapper},o.createElement("input",{type:"text",className:Ie.dropDownNewListItemInput,value:null!==(_t=null===un||void 0===un?void 0:un.description)&&void 0!==_t?_t:"Description",onChange:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{description:e.target.value}))}}))),o.createElement(Fe,null,o.createElement(p.Lb,{title:"Assignee label to use"}),o.createElement(p.sm,{className:Ie.unfocusableWrapper},o.createElement("input",{type:"text",className:Ie.dropDownNewListItemInput,value:null!==(wt=null===un||void 0===un?void 0:un.assignee)&&void 0!==wt?wt:"Assigned to",onChange:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{assignee:e.target.value}))}}))),o.createElement(Fe,null,o.createElement(p.Lb,{title:"Start date label to use"}),o.createElement(p.sm,{className:Ie.unfocusableWrapper},o.createElement("input",{type:"text",className:Ie.dropDownNewListItemInput,value:null!==(Nt=null===un||void 0===un?void 0:un.start)&&void 0!==Nt?Nt:"Start Date",onChange:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{start:e.target.value}))}}))),o.createElement(Fe,null,o.createElement(p.Lb,{title:"End date label to use"}),o.createElement(p.sm,{className:Ie.unfocusableWrapper},o.createElement("input",{type:"text",className:Ie.dropDownNewListItemInput,value:null!==(Lt=null===un||void 0===un?void 0:un.end)&&void 0!==Lt?Lt:"End Date",onChange:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{end:e.target.value}))}}))),o.createElement(Fe,null,o.createElement(p.Lb,{title:"Value label to use (Optional)"}),o.createElement(p.sm,{className:Ie.unfocusableWrapper},o.createElement("input",{type:"text",className:Ie.dropDownNewListItemInput,value:null===un||void 0===un?void 0:un.valueL,onChange:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{valueL:e.target.value}))}}))),o.createElement(He,{validationErrors:mn,defaultList:(null===on||void 0===on||null===(Zt=on.list)||void 0===Zt?void 0:Zt.length)>0?null===on||void 0===on?void 0:on.list:void 0,onListSelected:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{list:e}))}}),o.createElement("label",{className:Ie.checkboxLabelClass},"Retrieve calendar of transaction creator only?",o.createElement("input",{type:"checkbox",defaultChecked:null===un||void 0===un?void 0:un.creator,onChange:e=>cn((0,n.Z)((0,n.Z)({},un),{},{creator:e.target.checked}))})),o.createElement("label",{className:Ie.checkboxLabelClass},"Limit calendar to module it is attached to?",o.createElement("input",{type:"checkbox",defaultChecked:null===un||void 0===un?void 0:un.limited,onChange:e=>cn((0,n.Z)((0,n.Z)({},un),{},{limited:e.target.checked}))})),o.createElement("label",{className:Ie.checkboxLabelClass},"Allow event to span multiple dates?",o.createElement("input",{type:"checkbox",defaultChecked:null===un||void 0===un?void 0:un.span,onChange:e=>cn((0,n.Z)((0,n.Z)({},un),{},{span:e.target.checked}))})),o.createElement("label",{className:Ie.checkboxLabelClass},"Show calendar priority?",o.createElement("input",{type:"checkbox",defaultChecked:null===un||void 0===un?void 0:un.priority,onChange:e=>cn((0,n.Z)((0,n.Z)({},un),{},{priority:e.target.checked}))}))),"info"===(null===ln||void 0===ln||null===(xt=ln.name)||void 0===xt?void 0:xt.toLowerCase())&&o.createElement(o.Fragment,null,o.createElement(Ge,{defaultOrientation:null!==(It=null===on||void 0===on?void 0:on.orientation)&&void 0!==It?It:"Rows",defaultKey:null!==(Mt=null===on||void 0===on?void 0:on.key)&&void 0!==Mt?Mt:"Product ID",onKeySelected:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{key:e}))},blueprints:Xt,validationErrors:mn,defaultList:(null===on||void 0===on||null===(kt=on.list)||void 0===kt?void 0:kt.length)>0?null===on||void 0===on?void 0:on.list:void 0,defaultType:Xt.map(e=>({label:e.name,value:e.id,module:e})).find(e=>{var l;return(null===e||void 0===e?void 0:e.value)===(null!==(l=null===on||void 0===on?void 0:on.component_id)&&void 0!==l?l:"")}),onTypeSelected:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{component_id:e.component.id}))},onChangeList:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{list:[...e]}))},onChangeOrientation:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{orientation:e}))},multiSelectLabel:""===(null===on||void 0===on?void 0:on.component_id)?"":null===(Ot=Xt.map(e=>({label:e.name,value:e.id,module:e})).find(e=>{var l;return(null===e||void 0===e?void 0:e.value)===(null!==(l=null===on||void 0===on?void 0:on.component_id)&&void 0!==l?l:"")}))||void 0===Ot?void 0:Ot.label}),o.createElement("label",{className:Ie.checkboxLabelClass},"Show this info in emails?",o.createElement("input",{type:"checkbox",defaultChecked:null===un||void 0===un?void 0:un.email,onChange:e=>cn((0,n.Z)((0,n.Z)({},un),{},{email:e.target.checked}))}))),"chart"===(null===ln||void 0===ln||null===(Tt=ln.name)||void 0===Tt?void 0:Tt.toLowerCase())&&o.createElement(o.Fragment,null,o.createElement(Ye,{setFieldOption:cn,fieldOption:un,defaultOrientation:null!==(Pt=null===on||void 0===on?void 0:on.orientation)&&void 0!==Pt?Pt:"Rows",defaultKey:null!==(Bt=null===on||void 0===on?void 0:on.key)&&void 0!==Bt?Bt:"",defaultConfig:null!==(Ft=null===on||void 0===on?void 0:on.config)&&void 0!==Ft?Ft:m.HR,onConfigSelected:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{config:e}))},onKeySelected:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{key:e}))},blueprints:Xt,validationErrors:mn,defaultList:(null===on||void 0===on||null===(Dt=on.list)||void 0===Dt?void 0:Dt.length)>0?null===on||void 0===on?void 0:on.list:void 0,defaultItemList:(null===on||void 0===on||null===(At=on.items)||void 0===At?void 0:At.length)>0?null===on||void 0===on?void 0:on.items:void 0,defaultType:Xt.map(e=>({label:e.name,value:e.id,module:e})).find(e=>{var l;return(null===e||void 0===e?void 0:e.value)===(null!==(l=null===on||void 0===on?void 0:on.component_id)&&void 0!==l?l:"")}),onTypeSelected:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{component_id:e.component.id}))},onChangeList:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{list:[...e]}))},onChangeListItems:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{items:[...e]}))},onChangeOrientation:e=>{cn((0,n.Z)((0,n.Z)({},un),{},{orientation:e}))},multiSelectLabel:""===(null===on||void 0===on?void 0:on.component_id)?"":Xt.map(e=>({label:e.name,value:e.id,module:e})).find(e=>{var l;return(null===e||void 0===e?void 0:e.value)===(null!==(l=null===on||void 0===on?void 0:on.component_id)&&void 0!==l?l:"")}).label}))),"emails"!==(null===ln||void 0===ln||null===(Wt=ln.name)||void 0===Wt?void 0:Wt.toLowerCase())&&o.createElement(Be,{isOutput:0===(null===ln||void 0===ln?void 0:ln.io_type),selectedFields:Gt,options:un,fieldType:null===ln||void 0===ln?void 0:ln.name,onOptionsSelected:e=>{cn(e)},fieldOption:un}),o.createElement("div",{className:Ie.controls},o.createElement(p.zx,{title:"Close",clicked:Vt}),!$t&&o.createElement(p.zx,{light:!0,title:"Save",loading:qt,clicked:Nn}),!$t&&jt&&o.createElement(p.zx,{title:"Delete",light:!0,loading:Rt,clicked:()=>jt(tn)}))))},Pe=e=>{const{setFieldOption:l,options:t,defaultTable:a,defaultModule:i,defaultMap:d,onModuleSelected:s,onTableSelected:r,defaultList:u,validationErrors:c,allModules:m,onChangeMapping:v,multiSelectLabel:y="Default",companyProcesses:h,blueprints:f}=e,[C,g]=(0,o.useState)(void 0),[b]=(0,o.useState)(null!==d&&void 0!==d?d:{}),[S,E]=(0,o.useState)(!1),[_,w]=(0,o.useState)(void 0===u||0===u.length?[]:u.map(e=>{var l;return{label:e,value:e,blueprint_name:null!==(l=null===i||void 0===i?void 0:i.label)&&void 0!==l?l:"Others"}}));(0,o.useEffect)(()=>{N()},[]);const N=()=>{if(f.length>0){let e=[];f.filter(l=>{l.fields.filter(l=>{e=[...e,l.value]})}),e=[...new Set(e)].map(e=>({label:e,value:e,blueprint_name:e})),w([...ke.sortWith([ke.ascend(ke.prop("label"))])(e)])}},L=m.map(e=>({label:e.name,value:e.id,module:e})),Z=[{label:"Item Code",value:"item_code"},{label:"Quantity",value:"quantity"},{label:"Value",value:"value"},{label:"Alt Value",value:"alt_value"},{label:"Type",value:"type"}];return o.createElement("div",{className:Ie.dropdownElementHost},o.createElement(Fe,{errorMessage:null===c||void 0===c?void 0:c.type},o.createElement(p.Lb,{title:"Module to list"}),o.createElement(p.sm,{"app-variant":null!==c&&void 0!==c&&c.type?"error":"normal",className:Ie.unfocusableWrapper},o.createElement(p.rk,{items:L,defaultSelected:i,className:Ie.dropdownSelectComponent,tmiClassName:Ie.dropdownInput,molclassname:Ie.dropdownSelectMenuOverlayList,moliclassname:Ie.dropdownSelectMenuOverlayListItem,onChange:e=>{(e=>{if(h.length>0&&void 0!==e){var l,t;let n=[];null===(l=h.find(l=>l.id===e))||void 0===l||null===(t=l.steps)||void 0===t||t.filter(e=>{e.component_blueprints.filter(e=>{e.selected_fields.filter(e=>1==e.visible).filter(e=>{n=[...n,e.field_name]})})}),n=[...new Set(n)].map(e=>{var l;return{label:e,value:e,blueprint_name:null!==(l=null===i||void 0===i?void 0:i.label)&&void 0!==l?l:"Others"}}),w([...ke.sortWith([ke.ascend(ke.prop("label"))])(n),{label:"None",value:"none"}])}})(e.module.procedure.id),g(e),null===s||void 0===s||s(e),null!==e&&void 0!==e&&e.symbol?E(!1):E(!0)}}))),o.createElement(Fe,{errorMessage:null===c||void 0===c?void 0:c.accepted_mimes},o.createElement(p.Lb,{title:"Field to map with Item Code"}),o.createElement("div",{className:Ie.currencySelectContainer},o.createElement(p.Ld,{triggerType:"chevron",items:_,defaultSelectedItem:null!==d&&void 0!==d&&d.item_code?{label:d.item_code,value:d.item_code}:null,className:Ie.componentsSelectComponent,inputClassName:Ie.componentsSearchInput,inputStyle:{color:"var(--app-color-gray-dark)",fontSize:"1rem"},clearControlsClassName:Ie.componentsClearControlsClassName,molclassname:Ie.componentsSelectMenuOverlayList,moliclassname:Ie.componentsSelectMenuOverlayListItem,onChange:e=>{"none"===e.value?null===b||void 0===b||delete b.item_code:b.item_code=e.value,l((0,n.Z)((0,n.Z)({},t),{},{map:b}))}}))),o.createElement(Fe,{errorMessage:null===c||void 0===c?void 0:c.accepted_mimes},o.createElement(p.Lb,{title:"Field to map with Quantity"}),o.createElement("div",{className:Ie.currencySelectContainer},o.createElement(p.Ld,{triggerType:"chevron",items:_,defaultSelectedItem:null!==d&&void 0!==d&&d.quantity?{label:d.quantity,value:d.quantity}:null,className:Ie.componentsSelectComponent,inputClassName:Ie.componentsSearchInput,inputStyle:{color:"var(--app-color-gray-dark)",fontSize:"1rem"},clearControlsClassName:Ie.componentsClearControlsClassName,molclassname:Ie.componentsSelectMenuOverlayList,moliclassname:Ie.componentsSelectMenuOverlayListItem,onChange:e=>{"none"===e.value?null===b||void 0===b||delete b.quantity:b.quantity=e.value,l((0,n.Z)((0,n.Z)({},t),{},{map:b}))}}))),o.createElement(Fe,{errorMessage:null===c||void 0===c?void 0:c.accepted_mimes},o.createElement(p.Lb,{title:"Field to map with Value"}),o.createElement("div",{className:Ie.currencySelectContainer},o.createElement(p.Ld,{triggerType:"chevron",items:_,defaultSelectedItem:null!==d&&void 0!==d&&d.value?{label:d.value,value:d.value}:null,className:Ie.componentsSelectComponent,inputClassName:Ie.componentsSearchInput,inputStyle:{color:"var(--app-color-gray-dark)",fontSize:"1rem"},clearControlsClassName:Ie.componentsClearControlsClassName,molclassname:Ie.componentsSelectMenuOverlayList,moliclassname:Ie.componentsSelectMenuOverlayListItem,onChange:e=>{"none"===e.value?null===b||void 0===b||delete b.value:b.value=e.value,l((0,n.Z)((0,n.Z)({},t),{},{map:b}))}}))),o.createElement(Fe,{errorMessage:null===c||void 0===c?void 0:c.accepted_mimes},o.createElement(p.Lb,{title:"Field to map with Other Value"}),o.createElement("div",{className:Ie.currencySelectContainer},o.createElement(p.Ld,{triggerType:"chevron",items:_,defaultSelectedItem:null!==d&&void 0!==d&&d.alt_value?{label:d.alt_value,value:d.alt_value}:null,className:Ie.componentsSelectComponent,inputClassName:Ie.componentsSearchInput,inputStyle:{color:"var(--app-color-gray-dark)",fontSize:"1rem"},clearControlsClassName:Ie.componentsClearControlsClassName,molclassname:Ie.componentsSelectMenuOverlayList,moliclassname:Ie.componentsSelectMenuOverlayListItem,onChange:e=>{"none"===e.value?null===b||void 0===b||delete b.alt_value:b.alt_value=e.value,l((0,n.Z)((0,n.Z)({},t),{},{map:b}))}}))),o.createElement(Fe,{errorMessage:null===c||void 0===c?void 0:c.accepted_mimes},o.createElement(p.Lb,{title:"Field to map with Total"}),o.createElement("div",{className:Ie.currencySelectContainer},o.createElement(p.Ld,{triggerType:"chevron",items:_,defaultSelectedItem:null!==d&&void 0!==d&&d.total?{label:d.total,value:d.total}:null,className:Ie.componentsSelectComponent,inputClassName:Ie.componentsSearchInput,inputStyle:{color:"var(--app-color-gray-dark)",fontSize:"1rem"},clearControlsClassName:Ie.componentsClearControlsClassName,molclassname:Ie.componentsSelectMenuOverlayList,moliclassname:Ie.componentsSelectMenuOverlayListItem,onChange:e=>{"none"===e.value?null===b||void 0===b||delete b.total:b.total=e.value,l((0,n.Z)((0,n.Z)({},t),{},{map:b}))}}))),o.createElement(Fe,{errorMessage:null===c||void 0===c?void 0:c.accepted_mimes},o.createElement(p.Lb,{title:"Field to map with Type"}),o.createElement("div",{className:Ie.currencySelectContainer},o.createElement(p.Ld,{triggerType:"chevron",items:_,defaultSelectedItem:null!==d&&void 0!==d&&d.type?{label:d.type,value:d.type}:null,className:Ie.componentsSelectComponent,inputClassName:Ie.componentsSearchInput,inputStyle:{color:"var(--app-color-gray-dark)",fontSize:"1rem"},clearControlsClassName:Ie.componentsClearControlsClassName,molclassname:Ie.componentsSelectMenuOverlayList,moliclassname:Ie.componentsSelectMenuOverlayListItem,onChange:e=>{"none"===e.value?null===b||void 0===b||delete b.type:b.type=e.value,l((0,n.Z)((0,n.Z)({},t),{},{map:b}))}}))),(null===t||void 0===t?void 0:t.group)&&o.createElement(Fe,{errorMessage:null===c||void 0===c?void 0:c.type},o.createElement(p.Lb,{title:"Group By"}),o.createElement(p.sm,{"app-variant":null!==c&&void 0!==c&&c.type?"error":"normal",className:Ie.unfocusableWrapper},o.createElement(p.rk,{items:Z,defaultSelected:null===Z||void 0===Z?void 0:Z.find(e=>e.value===(null===t||void 0===t?void 0:t.groupL)),className:Ie.dropdownSelectComponent,tmiClassName:Ie.dropdownInput,molclassname:Ie.dropdownSelectMenuOverlayList,moliclassname:Ie.dropdownSelectMenuOverlayListItem,onChange:e=>{l((0,n.Z)((0,n.Z)({},t),{},{groupL:null===e||void 0===e?void 0:e.value}))}}))),o.createElement("label",{className:Ie.checkboxLabelClass},"Group items?",o.createElement("input",{type:"checkbox",defaultChecked:null===t||void 0===t?void 0:t.group,onChange:e=>l((0,n.Z)((0,n.Z)({},t),{},{group:e.target.checked}))})),o.createElement(Fe,{errorMessage:null===c||void 0===c?void 0:c.type},o.createElement(p.Lb,{title:"List type"}),o.createElement(p.sm,{"app-variant":null!==c&&void 0!==c&&c.type?"error":"normal",className:Ie.unfocusableWrapper},o.createElement(p.rk,{items:[{label:"Table (Horizontal fields)",value:"Table"},{label:"List (max 4 fields displayed)",value:"List"},{label:"Vertical",value:"vertical"}],defaultSelected:a,className:Ie.dropdownSelectComponent,tmiClassName:Ie.dropdownInput,molclassname:Ie.dropdownSelectMenuOverlayList,moliclassname:Ie.dropdownSelectMenuOverlayListItem,onChange:e=>{null===r||void 0===r||r(e),null!==e&&void 0!==e&&e.symbol?E(!1):E(!0)}}))))},Be=e=>{var l,t,a,i;const{fieldType:d,selectedFields:s,fieldOption:r,errorMessage:u,noBorder:c,options:v,onOptionsSelected:y,isOutput:h}=e,[f,C]=(0,o.useState)(((null===v||void 0===v?void 0:v.valueToMatch)||(null===v||void 0===v?void 0:v.valueToMatch2))&&(null===v||void 0===v?void 0:v.fieldToMatch)||(null===v||void 0===v?void 0:v.mapToItem)||(null===v||void 0===v?void 0:v.notes)||(null===v||void 0===v?void 0:v.width)||(null===v||void 0===v?void 0:v.landscape)||(null===v||void 0===v?void 0:v.style)||(null===v||void 0===v?void 0:v.label)),[g,b]=(0,o.useState)(null===v||void 0===v?void 0:v.valueToMatch),[S,E]=(0,o.useState)(null===v||void 0===v?void 0:v.valueToMatch2),[_,w]=(0,o.useState)(null===v||void 0===v?void 0:v.fieldToMatch),[N,L]=(0,o.useState)(null===v||void 0===v?void 0:v.notes),[Z,x]=(0,o.useState)(null===v||void 0===v?void 0:v.label),I=[{label:"Make field visible and mandatory",value:"visman"},{label:"Make field visible",value:"visible"},{label:"Make field hidden",value:"hidden"},{label:"Make field mandatory",value:"mandatory"},{label:"Make field optional",value:"optional"},{label:"Disable the field",value:"disable"},{label:"Enable the field",value:"enable"}],M=[{label:"Make field visible and mandatory",value:"visman"},{label:"Show the field",value:"visible"},{label:"Hide the field",value:"hide"},{label:"Make field mandatory",value:"mandatory"},{label:"Make field optional",value:"optional"},{label:"Disable the field",value:"disable"},{label:"Enable the field",value:"enable"},{label:"Trigger an email during save",value:"email"}],k=[{label:"Set date today",value:"today",type:"Date"},{label:"Set date tomorrow",value:"tomorrow",type:"Date"},{label:"Set date one month from today",value:"month",type:"Date"},{label:"Set date one week from today",value:"week",type:"Date"},{label:"None",value:"none",type:"Date"}],O=[{label:"Total Sum per line item variable (A1+A2+An)",id:6,value:"itemsum",type:"items"},{label:"Total Difference per line item variable (A1-A2-An)",id:7,value:"itemdiff",type:"items"},{label:"Count occurrences of string in line item variable selected",id:12,value:"countocc",type:"items"},{label:"None",id:14,value:"none",type:"items"}];s.map(e=>({label:e.value,value:e.value,field:e}));return o.createElement("div",{className:Ie.optionSettings,"app-container-variant":c?"noBorder":"border","app-variant":(null===u||void 0===u?void 0:u.length)>0?"error":"normal"},!("GoogleAI Assistant"===d||"OpenAI Assistant"===d)&&o.createElement(p.pd,{id:"Show additional options?",title:"Show additional options?",ungrouped:!0,withAckButton:!1,style:{margin:"10px 0px",width:"auto"},value:!!f,toggleSelected:e=>{C(e)}}),f&&o.createElement("div",null,o.createElement(Fe,null,o.createElement(p.Lb,{title:"Field Label (leave blank if same with field name)"}),o.createElement("textarea",{type:"text",className:Ie.elementTextInput,style:{minWidth:"100%"},value:Z,name:"matched to field",onChange:e=>{x(e.target.value),y((0,n.Z)((0,n.Z)({},r),{},{label:e.target.value}))}}))),f&&o.createElement("div",null,o.createElement(Fe,null,o.createElement(p.Lb,{title:"Add Notes"}),o.createElement("textarea",{type:"text",className:Ie.elementTextInput,style:{minWidth:"100%"},value:N,name:"matched to field",onChange:e=>{L(e.target.value),y((0,n.Z)((0,n.Z)({},r),{},{notes:e.target.value}))}}))),f&&o.createElement(Fe,null,o.createElement(p.Lb,{title:"Field name to match values"}),o.createElement(p.sm,{className:Ie.unfocusableWrapper},o.createElement("input",{type:"text",className:Ie.dropDownNewListItemInput,value:_,name:"matched to field",onChange:e=>{w(e.target.value),y((0,n.Z)((0,n.Z)({},r),{},{fieldToMatch:e.target.value}))}}))),f&&(null===_||void 0===_?void 0:_.length)>2&&o.createElement(Fe,null,o.createElement(p.Lb,{title:"Values (A) to be matched to field. (Note: Use ' , ' to seperate)"}),o.createElement(p.sm,{className:Ie.unfocusableWrapper},o.createElement("input",{type:"text",className:Ie.dropDownNewListItemInput,value:g,name:"matched to field",onChange:e=>{b(e.target.value),y((0,n.Z)((0,n.Z)({},r),{},{valueToMatch:e.target.value}))}}))),f&&(null===g||void 0===g?void 0:g.length)>2&&o.createElement(Fe,null,o.createElement(p.Lb,{title:"Perform this action when matched with (A)"}),o.createElement(p.sm,{className:Ie.unfocusableWrapper},o.createElement(p.Ld,{triggerType:"chevron",items:M.filter(e=>"email"!==e.value),defaultSelectedItem:M.find(e=>e.value===(null===v||void 0===v?void 0:v.actionToPerform)),className:Ie.componentsSelectComponent,inputClassName:Ie.componentsSearchInput,inputStyle:{color:"var(--app-color-gray-dark)",fontSize:"1rem"},clearControlsClassName:Ie.componentsClearControlsClassName,molclassname:Ie.componentsSelectMenuOverlayList,moliclassname:Ie.componentsSelectMenuOverlayListItem,onChange:e=>{y((0,n.Z)((0,n.Z)({},r),{},{actionToPerform:e.value}))}}))),f&&(null===g||void 0===g?void 0:g.length)>2&&o.createElement(Fe,null,o.createElement(p.Lb,{title:"Perform this action when not matched with (A)"}),o.createElement(p.sm,{className:Ie.unfocusableWrapper},o.createElement(p.Ld,{triggerType:"chevron",items:I,defaultSelectedItem:I.find(e=>e.value===(null===v||void 0===v?void 0:v.initialState)),className:Ie.componentsSelectComponent,inputClassName:Ie.componentsSearchInput,inputStyle:{color:"var(--app-color-gray-dark)",fontSize:"1rem"},clearControlsClassName:Ie.componentsClearControlsClassName,molclassname:Ie.componentsSelectMenuOverlayList,moliclassname:Ie.componentsSelectMenuOverlayListItem,onChange:e=>{y((0,n.Z)((0,n.Z)({},r),{},{initialState:e.value}))}}))),f&&(null===_||void 0===_?void 0:_.length)>2&&o.createElement(Fe,null,o.createElement(p.Lb,{title:"Values (B) to be matched to field. (Note: Use ' , ' to seperate)"}),o.createElement(p.sm,{className:Ie.unfocusableWrapper},o.createElement("input",{type:"text",className:Ie.dropDownNewListItemInput,value:S,name:"matched to field",onChange:e=>{E(e.target.value),y((0,n.Z)((0,n.Z)({},r),{},{valueToMatch2:e.target.value}))}}))),f&&(null===S||void 0===S?void 0:S.length)>2&&"Date"===d&&o.createElement(Fe,null,o.createElement(p.Lb,{title:"Change to this value when matched with (B)"}),o.createElement(p.sm,{className:Ie.unfocusableWrapper},o.createElement(p.Ld,{triggerType:"chevron",items:k,defaultSelectedItem:k.filter(e=>e.type===d).find(e=>e.value===(null===v||void 0===v?void 0:v.value)),className:Ie.componentsSelectComponent,inputClassName:Ie.componentsSearchInput,inputStyle:{color:"var(--app-color-gray-dark)",fontSize:"1rem"},clearControlsClassName:Ie.componentsClearControlsClassName,molclassname:Ie.componentsSelectMenuOverlayList,moliclassname:Ie.componentsSelectMenuOverlayListItem,onChange:e=>{y((0,n.Z)((0,n.Z)({},r),{},{value:e.value}))}}))),f&&(null===S||void 0===S?void 0:S.length)>2&&("Text"===d||"Status"===d)&&o.createElement(Fe,null,o.createElement(p.Lb,{title:"Change to this value when matched"}),o.createElement(p.sm,{className:Ie.unfocusableWrapper},o.createElement("input",{type:d.toLowerCase(),className:Ie.dropDownNewListItemInput,placeholder:null===v||void 0===v?void 0:v.value,name:"matched to field",onChange:e=>{y((0,n.Z)((0,n.Z)({},r),{},{value:e.target.value}))}}))),f&&(null===S||void 0===S?void 0:S.length)>2&&o.createElement(Fe,null,o.createElement(p.Lb,{title:"Perform action to field when matched with (B)"}),o.createElement(p.sm,{className:Ie.unfocusableWrapper},o.createElement(p.Ld,{triggerType:"chevron",items:null!==v&&void 0!==v&&v.actionToPerform?M.filter(e=>!(e.value===(null===v||void 0===v?void 0:v.actionToPerform)||e.value===(null===v||void 0===v?void 0:v.initialState))):M,defaultSelectedItem:M.find(e=>e.value===(null===v||void 0===v?void 0:v.actionToPerform2)),className:Ie.componentsSelectComponent,inputClassName:Ie.componentsSearchInput,inputStyle:{color:"var(--app-color-gray-dark)",fontSize:"1rem"},clearControlsClassName:Ie.componentsClearControlsClassName,molclassname:Ie.componentsSelectMenuOverlayList,moliclassname:Ie.componentsSelectMenuOverlayListItem,onChange:e=>{y((0,n.Z)((0,n.Z)({},r),{},{actionToPerform2:e.value}))}}))),f&&o.createElement(Fe,null,o.createElement(p.Lb,{title:"Map this field to line item field"}),o.createElement(p.sm,{className:Ie.unfocusableWrapper},o.createElement(p.Ld,{triggerType:"chevron",items:[{label:"Item Codes",value:"item_code"},{label:"Numbers",value:"quantity"},{label:"Basic Text",value:"value"},{label:"Other Text",value:"alt_value"},{label:"Totals",value:"total"},{label:"Type",value:"type"},{label:"Distance",value:"distance"},{label:"None",value:"none"}],defaultSelectedItem:[{label:"Item Codes",value:"item_code"},{label:"Numbers",value:"quantity"},{label:"Text",value:"value"},{label:"More Text",value:"alt_value"},{label:"Totals",value:"total"},{label:"Type",value:"type"},{label:"Distance",value:"distance"}].find(e=>e.value===(null===v||void 0===v?void 0:v.mapToItem)),className:Ie.componentsSelectComponent,inputClassName:Ie.componentsSearchInput,inputStyle:{color:"var(--app-color-gray-dark)",fontSize:"1rem",cursor:"pointer"},clearControlsClassName:Ie.componentsClearControlsClassName,molclassname:Ie.componentsSelectMenuOverlayList,moliclassname:Ie.componentsSelectMenuOverlayListItem,onChange:e=>{"none"===e.value?(delete r.mapToItem,delete r.footer):y((0,n.Z)((0,n.Z)({},r),{},{mapToItem:e.value}))}}))),f&&r.mapToItem&&o.createElement(Fe,null,o.createElement(p.Lb,{title:"Compute and display as footer value"}),o.createElement(p.sm,{className:Ie.unfocusableWrapper},o.createElement(p.Ld,{triggerType:"chevron",items:O,defaultSelectedItem:O.find(e=>e.value===(null===v||void 0===v?void 0:v.footer)),className:Ie.componentsSelectComponent,inputClassName:Ie.componentsSearchInput,inputStyle:{color:"var(--app-color-gray-dark)",fontSize:"1rem",cursor:"pointer"},clearControlsClassName:Ie.componentsClearControlsClassName,molclassname:Ie.componentsSelectMenuOverlayList,moliclassname:Ie.componentsSelectMenuOverlayListItem,onChange:e=>{"none"===e.value?delete r.footer:y((0,n.Z)((0,n.Z)({},r),{},{footer:e.value}))}}))),f&&r.mapToItem&&o.createElement(Fe,null,o.createElement(p.Lb,{title:"Item Group Header"}),o.createElement("input",{type:"text",className:Ie.elementTextInput,defaultValue:null===r||void 0===r?void 0:r.group,onBlur:e=>y((0,n.Z)((0,n.Z)({},r),{},{group:e.target.value}))})),f&&!h&&o.createElement(Fe,null,o.createElement(p.Lb,{title:"Apply color for values"}),o.createElement("input",{type:"text",className:Ie.elementTextInput,style:{borderRight:"white"===(null===r||void 0===r?void 0:r.valueC)?"white":"".concat(null!==r&&void 0!==r&&r.valueC?"50px":"1px"," solid ").concat(null!==(l=null===r||void 0===r?void 0:r.valueC)&&void 0!==l?l:"var(--app-color-gray-lighter)")},defaultValue:null===r||void 0===r?void 0:r.valueC,onBlur:e=>y((0,n.Z)((0,n.Z)({},r),{},{valueC:e.target.value}))})),f&&o.createElement(o.Fragment,null,o.createElement(Fe,null,o.createElement(p.Lb,{title:"Custom Style"}),o.createElement("textarea",{type:"text",id:"Styling",className:Ie.elementTextInput,style:{minWidth:"100%"},onBlur:e=>{var l;(0,m.sO)(null===(l=document.getElementById("Styling"))||void 0===l?void 0:l.value)&&y((0,n.Z)((0,n.Z)({},r),{},{style:JSON.parse(e.target.value)}))},defaultValue:JSON.stringify(null!==(t=null===r||void 0===r?void 0:r.style)&&void 0!==t?t:{}),onChange:e=>{(0,m.sO)(e.target.value)?document.getElementById("Styling").style.borderColor="var(--app-color-gray-lighter)":document.getElementById("Styling").style.borderColor="red"}}))),f&&o.createElement(Fe,null,o.createElement("br",null),o.createElement(p.Lb,{title:"Field width (min 15%, will fit 4 fields in row)"}),o.createElement("div",{style:{display:"flex",width:"100%"}},o.createElement("input",{type:"range",min:"15",max:"100",step:"5",style:{width:"90%"},defaultValue:null!==(a=null===v||void 0===v?void 0:v.width)&&void 0!==a?a:"0",onChange:e=>{y((0,n.Z)((0,n.Z)({},r),{},{width:e.target.value}))}}),o.createElement("label",{style:{width:"10%"}},null!==(i=null===r||void 0===r?void 0:r.width)&&void 0!==i?i:null===v||void 0===v?void 0:v.width,"%")),o.createElement("br",null)),f&&o.createElement(p.pd,{id:"Show label in landscape?",title:"Show label in landscape?",ungrouped:!0,withAckButton:!1,style:{margin:"10px 0px",width:"auto"},value:null===v||void 0===v?void 0:v.landscape,toggleSelected:e=>{y((0,n.Z)((0,n.Z)({},r),{},{landscape:e}))}}),f&&!h&&o.createElement(p.pd,{id:"Do not save this value?",title:"Do not save this value?",ungrouped:!0,withAckButton:!1,style:{margin:"10px 0px",width:"auto"},value:null===v||void 0===v?void 0:v.skip,toggleSelected:e=>{y((0,n.Z)((0,n.Z)({},r),{},{skip:e}))}}),f&&!h&&o.createElement(p.pd,{id:"Read only?",title:"Read only?",ungrouped:!0,withAckButton:!1,style:{margin:"10px 0px",width:"auto"},value:null===v||void 0===v?void 0:v.read,toggleSelected:e=>{y((0,n.Z)((0,n.Z)({},r),{},{read:e}))}}))},Fe=e=>{const{children:l,errorMessage:t,noBorder:n}=e;return o.createElement("div",{className:Ie.optionSection,"app-container-variant":n?"noBorder":"border","app-variant":(null===t||void 0===t?void 0:t.length)>0?"error":"normal"},l,(null===t||void 0===t?void 0:t.length)>0&&o.createElement("span",{className:Ie.errorContainer},t))},De=e=>{const{defaultValue:l,onChangeType:t,validationErrors:n}=e,[a,i]=(0,o.useState)(null!==l&&void 0!==l&&l);return o.createElement(Fe,{errorMessage:null===n||void 0===n?void 0:n.type},o.createElement(p.Lb,{title:"Type of Number"}),o.createElement(p.sm,{"app-variant":null!==n&&void 0!==n&&n.type?"error":"normal","app-container-variant":"noBorder",className:Ie.numberOptionsContainer},o.createElement(p.nd,{selected:a,setSelected:e=>{i(e),t(e?"numeric":"percentage")},first:"123 Value",second:"% Percentage",extraClassName:Ie.renderBooleansOptions})))},Ae=e=>{const{defaultValue:l,defaultAuto:t,defaultTime:n,onChangeType:a,onExceeded:i,withTime:d,validationErrors:s}=e,[r,u]=(0,o.useState)(null!==l&&void 0!==l&&l);return o.createElement(Fe,{errorMessage:null===s||void 0===s?void 0:s.type},o.createElement(p.Lb,{title:"Type of Element"}),o.createElement(p.sm,{"app-variant":null!==s&&void 0!==s&&s.type?"error":"normal","app-container-variant":"noBorder",className:Ie.dateOptionsContainer},o.createElement(p.nd,{selected:r,setSelected:e=>{u(e),a(e?"single":"range")},first:"Single date",second:"Date Range",extraClassName:Ie.renderBooleansOptions})),o.createElement(p.pd,{id:"Add Time",title:"With Time?",ungrouped:!0,withAckButton:!1,style:{margin:"10px 0px",width:"auto"},value:n,toggleSelected:e=>{d(e)}}),o.createElement(p.pd,{id:"Auto-close when date is exceeded",title:"Auto-close when date is exceeded?",ungrouped:!0,withAckButton:!1,style:{margin:"10px 0px",width:"auto"},value:t,toggleSelected:e=>{i(e)}}))},We=e=>{const{defaultValue:l,defaultType:t,onChangeType:n,onChangeValue:a,validationErrors:i}=e,[d,s]=(0,o.useState)(null!==t&&void 0!==t&&t),[r,u]=(0,o.useState)(l);return o.createElement(Fe,{errorMessage:null===i||void 0===i?void 0:i.type},o.createElement(p.Lb,{title:"URL Link"}),o.createElement("input",{type:"text",name:"element-name",value:r,onChange:e=>{a(e.target.value),u(e.target.value)},className:Ie.elementTextInput}),o.createElement(p.Lb,{title:"Type of Element"}),o.createElement(p.sm,{"app-variant":null!==i&&void 0!==i&&i.type?"error":"normal","app-container-variant":"noBorder",className:Ie.numberOptionsContainer},o.createElement(p.nd,{selected:d,setSelected:e=>{s(e),n(e?"image":"link")},first:"Image",second:"Link",extraClassName:Ie.renderBooleansOptions})))},Ve=e=>{const{defaultValue:l,onChangeValue:t,validationErrors:n}=e,[a,i]=(0,o.useState)(l);return o.createElement(Fe,{errorMessage:null===n||void 0===n?void 0:n.type},o.createElement(p.Lb,{title:"Label"}),o.createElement("input",{type:"text",name:"element-name",value:a,onChange:e=>{t(e.target.value),i(e.target.value)},className:Ie.elementTextInput}))},ze=e=>{const{onChange:l,countryCode:t,defaultValue:n,validationErrors:a}=e,[i,d]=(0,o.useState)(n);return o.createElement(Fe,{errorMessage:null===a||void 0===a?void 0:a.country_prefix},o.createElement(p.Lb,{title:"Phone Number Prefix"}),o.createElement(p.sm,{"app-variant":null!==a&&void 0!==a&&a.country_prefix?"error":"normal",className:Ie.unfocusableWrapper,onClickOutside:()=>{},onClick:()=>{const e=document.getElementsByClassName("selected-flag");var l;e[0]&&(null===(l=e[0])||void 0===l||l.click())}},o.createElement(Ze(),{specialLabel:"",enableSearch:!0,country:null!==t&&void 0!==t?t:"ph",onChange:(e,t,n)=>{const o="+"+t.dialCode+" "+t.name;d(o),null===l||void 0===l||l({country_prefix:"+".concat(null===t||void 0===t?void 0:t.dialCode),country_code:null===t||void 0===t?void 0:t.countryCode,country_name:null===t||void 0===t?void 0:t.name})},value:i,inputProps:{name:"phone",required:!1,autoFocus:!1},countryCodeEditable:!1,containerClass:Ne()(Ie.phoneIContainer,Ie.borderClass),inputClass:Ie.phoneIInput,buttonClass:Ie.phoneIButton,dropdownClass:Ie.phoneIDropdown,searchClass:Ie.phoneISearch}),o.createElement("p",{className:Ie.phonePrefixText},null!==i&&void 0!==i?i:"+44 United Kingdom")))},Re=e=>{const{defaultValue:l,onCurrencySelected:t,validationErrors:n}=e,[a,i]=(0,o.useState)(void 0),[d,s]=(0,o.useState)(!1);return o.createElement(Fe,{errorMessage:null===n||void 0===n?void 0:n.currency_type},o.createElement(p.Lb,{title:"Currency Type"}),o.createElement(p.sm,{"app-variant":null!==n&&void 0!==n&&n.currency_type?"error":"normal",className:Ie.unfocusableWrapper},o.createElement("pre",{className:Ie.currencySymbol},null!==a&&void 0!==a&&a.symbol?null===a||void 0===a?void 0:a.symbol:d?"":null===l||void 0===l?void 0:l.symbol," "),o.createElement(p.Ld,{items:m.s3,defaultSelectedItem:l,triggerType:"chevron",className:Ie.currencySelectComponent,inputClassName:Ie.currencySearchInput,clearControlsClassName:Ie.currencyClearControlsClassName,molclassname:Ie.currencySelectMenuOverlayList,moliclassname:Ie.currencySelectMenuOverlayListItem,inputStyle:{color:"var(--app-color-gray-dark)",fontSize:"1rem"},onChange:e=>{i(e),t(e),null!==e&&void 0!==e&&e.symbol?s(!1):s(!0)}})))},je=e=>{const{defaultValue:l,onActionSelected:t,validationErrors:n}=e,[a,i]=(0,o.useState)(void 0),[d,s]=(0,o.useState)(!1);return o.createElement(Fe,{errorMessage:null===n||void 0===n?void 0:n.currency_type},o.createElement(p.Lb,{title:"Action Type"}),o.createElement(p.sm,{"app-variant":null!==n&&void 0!==n&&n.currency_type?"error":"normal",className:Ie.unfocusableWrapper},o.createElement(p.Ld,{items:m.D0,defaultSelectedItem:m.D0.find(e=>e.value===l),triggerType:"chevron",className:Ie.currencySelectComponent,inputClassName:Ie.currencySearchInput,clearControlsClassName:Ie.currencyClearControlsClassName,molclassname:Ie.currencySelectMenuOverlayList,moliclassname:Ie.currencySelectMenuOverlayListItem,inputStyle:{color:"var(--app-color-gray-dark)",fontSize:"1rem"},onChange:e=>{i(e),t(e),null!==e&&void 0!==e&&e.symbol?s(!1):s(!0)}})),o.createElement("br",null),o.createElement(p.Lb,{title:"Notes: The Action Button is only shown in the detail popup screen"}))},Ue=e=>{const{defaultValue:l,defaultOption:t,onProfileSelected:n,validationErrors:a,companyUsersArray:i}=e,[d,s]=(0,o.useState)(void 0),[r,u]=(0,o.useState)(void 0),[c,m]=(0,o.useState)(!1),v=[{label:"User that made the transaction",value:"creator"},{label:"Wallet of user that made the transaction",value:"wallet"},{label:"User that accepted the transaction",value:"owner"},{label:"Custom",value:"custom"}];return o.createElement(Fe,{errorMessage:null===a||void 0===a?void 0:a.currency_type},o.createElement(p.Lb,{title:"Show profile of user"}),o.createElement(p.sm,{"app-variant":null!==a&&void 0!==a&&a.currency_type?"error":"normal",className:Ie.unfocusableWrapper},o.createElement(p.Ld,{items:v,defaultSelectedItem:v.find(e=>e.value===l),triggerType:"chevron",className:Ie.currencySelectComponent,inputClassName:Ie.currencySearchInput,clearControlsClassName:Ie.currencyClearControlsClassName,molclassname:Ie.currencySelectMenuOverlayList,moliclassname:Ie.currencySelectMenuOverlayListItem,inputStyle:{color:"var(--app-color-gray-dark)",fontSize:"1rem"},onChange:e=>{s(e),n(e),null!==e&&void 0!==e&&e.symbol?m(!1):m(!0)}})),("custom"===(null===d||void 0===d?void 0:d.value)||"custom"===l)&&o.createElement(o.Fragment,null,o.createElement(p.Lb,{title:"Select user"}),o.createElement(p.sm,{"app-variant":null!==a&&void 0!==a&&a.currency_type?"error":"normal",className:Ie.unfocusableWrapper},o.createElement(p.Ld,{items:i.map(e=>({label:"".concat(e.first_name," ").concat(e.last_name),value:e.id})),defaultSelectedItem:i.map(e=>({label:"".concat(e.first_name," ").concat(e.last_name),value:e.id})).find(e=>e.value===(null===t||void 0===t?void 0:t.id)),triggerType:"chevron",className:Ie.currencySelectComponent,inputClassName:Ie.currencySearchInput,clearControlsClassName:Ie.currencyClearControlsClassName,molclassname:Ie.currencySelectMenuOverlayList,moliclassname:Ie.currencySelectMenuOverlayListItem,inputStyle:{color:"var(--app-color-gray-dark)",fontSize:"1rem"},onChange:e=>{t.id=e.value}}))),o.createElement(p.pd,{id:"Show profile picture",title:"Show profile picture?",ungrouped:!0,withAckButton:!1,style:{margin:"10px 0px",width:"auto"},value:null===t||void 0===t?void 0:t.show,toggleSelected:e=>{t.show=e}}))},qe=e=>{var l,t,n,a,i,d,s,r,u,c;const{defaultPr:v,defaultJ1:y,defaultJ2:h,defaultType:f,onTypeSelected:C,defaultList:g,onListSelected:b,validationErrors:S,onJump1Selected:E=()=>{},onJump2Selected:_=()=>{},companyProcesses:w,onProcSelected:N=()=>{},options:L}=e,[Z,x]=(0,o.useState)(void 0),[I,M]=(0,o.useState)(!1),[k,O]=(0,o.useState)(null!==g&&void 0!==g?g:[]),[T,P]=(0,o.useState)(!0),[B,F]=(0,o.useState)(""),[D,V]=(0,o.useState)(y),[z,R]=(0,o.useState)(h),[j,U]=(0,o.useState)(v),q=(0,o.useCallback)(()=>{P(!0),O(e=>[...e,B]),F(""),null===b||void 0===b||b([...k,B])},[k,B,b]),H=(0,o.useCallback)(e=>{O(l=>[...ke.reject(ke.equals(e),l)]),null===b||void 0===b||b([...ke.reject(ke.equals(e),k)])},[k,b]);return o.createElement("div",{className:Ie.dropdownElementHost},C&&o.createElement(Fe,{errorMessage:null===S||void 0===S?void 0:S.type},o.createElement(p.Lb,{title:"Dropdown Type"}),o.createElement(p.sm,{"app-variant":null!==S&&void 0!==S&&S.type?"error":"normal",className:Ie.unfocusableWrapper},o.createElement("pre",{className:Ie.dropdownSymbol},null!==Z&&void 0!==Z&&Z.icon?null===Z||void 0===Z?void 0:Z.icon:I?"":null===f||void 0===f?void 0:f.icon," "),o.createElement(p.rk,{items:m.YX,defaultSelected:f,className:Ie.dropdownSelectComponent,tmiClassName:Ie.dropdownInput,molclassname:Ie.dropdownSelectMenuOverlayList,moliclassname:Ie.dropdownSelectMenuOverlayListItem,onChange:e=>{x(e),null===C||void 0===C||C(null!==e&&void 0!==e?e:"single"),null!==e&&void 0!==e&&e.symbol?M(!1):M(!0)}}))),("multiple"===(null===Z||void 0===Z?void 0:Z.value)||"multiple"===(null===f||void 0===f?void 0:f.value))&&o.createElement(Fe,{errorMessage:null===S||void 0===S?void 0:S.list},o.createElement(p.Lb,{title:"Limit on multiple selections (leave blank or 0 for unlimted selections)"}),o.createElement("input",{type:"number",name:"element-name",defaultValue:null===L||void 0===L?void 0:L.max,onBlur:e=>{L.max=e.target.value},className:Ie.elementTextInput})),o.createElement(Fe,{errorMessage:null===S||void 0===S?void 0:S.list},o.createElement(p.Lb,{title:"Dropdown Options"}),o.createElement(p.sm,{className:Ie.dropdownListContainer,onClickOutside:(0,o.useCallback)(()=>{null===b||void 0===b||b(k)},[k,b])},T?o.createElement("div",{className:Ie.dropDownButtonContainer},o.createElement(p.zx,{light:!0,title:"Add Dropdown Option",clicked:()=>P(!1)})):o.createElement("div",{className:Ie.dropDownNewListItemInputContainer},o.createElement("input",{type:"text",className:Ie.dropDownNewListItemInput,value:B,name:"newItem",placeholder:"Type name",onChange:e=>{F(e.target.value)}}),(null===B||void 0===B?void 0:B.length)>0&&o.createElement("button",{type:"button",onClick:q,className:Ie.dropdownInputButtonSaveNewItem},o.createElement(A.G,{icon:W.g6h}))),o.createElement("div",{className:Ie.dropdownListItemsContainer},k&&(null===k||void 0===k?void 0:k.map((e,l)=>o.createElement(sl,{key:e+l,item:e,isOverflow:(null===k||void 0===k?void 0:k.length)>3,onItemChanged:e=>{O(t=>[...ke.update(l)(e)(t)])},onItemRemoved:()=>H(e)})))))),(D||"decision"===(null===Z||void 0===Z?void 0:Z.value))&&o.createElement(Fe,{errorMessage:null===S||void 0===S?void 0:S.position_id},o.createElement(p.Lb,{title:"Process where to look for step"}),o.createElement(p.sm,{"app-variant":null!==S&&void 0!==S&&S.position_id?"error":"normal",className:Ne()(Ie.unfocusableWrapper,Ie.peoplePositionSelectContainer)},o.createElement(p.rk,{items:w.map(e=>({label:e.name,value:e.id,process:e})),defaultSelected:{label:null===(l=w.find(e=>e.id===j))||void 0===l?void 0:l.name},className:Ie.dropdownSelectComponent,tmiClassName:Ie.dropdownInput,molclassname:Ie.dropdownSelectMenuOverlayList,moliclassname:Ie.dropdownSelectMenuOverlayListItem,onChange:e=>{U(e.value),null===N||void 0===N||N(e.value)}}))),(D||"decision"===(null===Z||void 0===Z?void 0:Z.value))&&j&&o.createElement(Fe,{errorMessage:null===S||void 0===S?void 0:S.position_id},o.createElement(p.Lb,{title:"Dropdown option 1 jumps to step"}),o.createElement(p.sm,{"app-variant":null!==S&&void 0!==S&&S.position_id?"error":"normal",className:Ne()(Ie.unfocusableWrapper,Ie.peoplePositionSelectContainer)},o.createElement(p.rk,{items:null===(t=w.find(e=>e.id===j))||void 0===t||null===(n=t.steps)||void 0===n?void 0:n.map(e=>({label:e.name,value:e.id,step:e})),defaultSelected:{label:null===(a=w.find(e=>e.id===j))||void 0===a||null===(i=a.steps)||void 0===i||null===(d=i.find(e=>e.id===D))||void 0===d?void 0:d.name},className:Ie.dropdownSelectComponent,tmiClassName:Ie.dropdownInput,molclassname:Ie.dropdownSelectMenuOverlayList,moliclassname:Ie.dropdownSelectMenuOverlayListItem,onChange:e=>{V(e.value),null===E||void 0===E||E(e.value)}}))),(z||"decision"===(null===Z||void 0===Z?void 0:Z.value))&&j&&o.createElement(Fe,{errorMessage:null===S||void 0===S?void 0:S.position_id},o.createElement(p.Lb,{title:"Dropdown option 2 jumps to step"}),o.createElement(p.sm,{"app-variant":null!==S&&void 0!==S&&S.position_id?"error":"normal",className:Ne()(Ie.unfocusableWrapper,Ie.peoplePositionSelectContainer)},o.createElement(p.rk,{items:null===(s=w.find(e=>e.id===j))||void 0===s?void 0:s.steps.map(e=>({label:e.name,value:e.id,step:e})),defaultSelected:{label:null===(r=w.find(e=>e.id===j))||void 0===r||null===(u=r.steps)||void 0===u||null===(c=u.find(e=>e.id===z))||void 0===c?void 0:c.name},className:Ie.dropdownSelectComponent,tmiClassName:Ie.dropdownInput,molclassname:Ie.dropdownSelectMenuOverlayList,moliclassname:Ie.dropdownSelectMenuOverlayListItem,onChange:e=>{R(e.value),null===_||void 0===_||_(e.value)}}))))},He=e=>{const{defaultList:l,onListSelected:t,validationErrors:n,title:a="Dropdown Options"}=e,[i,d]=(0,o.useState)(null!==l&&void 0!==l?l:[]),[s,r]=(0,o.useState)(!0),[u,c]=(0,o.useState)(""),m=(0,o.useCallback)(()=>{r(!0),d(e=>[...e,u]),c(""),null===t||void 0===t||t([...i,u])},[i,u,t]),v=(0,o.useCallback)(e=>{d(l=>[...ke.reject(ke.equals(e),l)]),null===t||void 0===t||t([...ke.reject(ke.equals(e),i)])},[i,t]);return o.createElement("div",{className:Ie.dropdownElementHost},o.createElement(Fe,{errorMessage:null===n||void 0===n?void 0:n.list},o.createElement(p.Lb,{title:a}),o.createElement(p.sm,{"app-variant":null!==n&&void 0!==n&&n.list?"error":"normal",className:Ie.dropdownListContainer,onClickOutside:(0,o.useCallback)(()=>{null===t||void 0===t||t(i)},[i,t])},s?o.createElement("div",{className:Ie.dropDownButtonContainer},o.createElement(p.zx,{light:!0,title:"Add Options",clicked:()=>r(!1)})):o.createElement("div",{className:Ie.dropDownNewListItemInputContainer},o.createElement("input",{type:"text",className:Ie.dropDownNewListItemInput,value:u,name:"newItem",placeholder:"Type name",onChange:e=>{c(e.target.value)}}),(null===u||void 0===u?void 0:u.length)>0&&o.createElement("button",{type:"button",onClick:m,className:Ie.dropdownInputButtonSaveNewItem},o.createElement(A.G,{icon:W.g6h}))),o.createElement("div",{className:Ie.dropdownListItemsContainer},i&&(null===i||void 0===i?void 0:i.map((e,l)=>o.createElement(sl,{key:e+l,item:e,isOverflow:(null===i||void 0===i?void 0:i.length)>3,onItemChanged:e=>{d(t=>[...ke.update(l)(e)(t)])},onItemRemoved:()=>v(e)})))))))},Ke=e=>{const{defaultList:l,validationErrors:t,onChangeList:n,products:a}=e;return o.createElement("div",{className:Ie.dropdownElementHost},o.createElement(Fe,{errorMessage:null===t||void 0===t?void 0:t.position_id},o.createElement(p.Lb,{title:"What products to display?"}),o.createElement(p.sm,{"app-variant":null!==t&&void 0!==t&&t.position_id?"error":"normal",className:Ne()(Ie.unfocusableWrapper,Ie.peoplePositionSelectContainer)},o.createElement(p.gK,{labelsTag:!0,tagCloseButtonType:"circleX",tagType:"shadowed",tagEmplacement:"inlined",items:a.map(e=>({label:e.name,value:e.product_code})),itemType:"checkboxes",checkboxEmplacement:"left",initialSelectedItems:void 0===l||0===l.length?[]:l.map(e=>{const l=a.find(l=>l.product_code===e);return{label:null===l||void 0===l?void 0:l.name,value:null===l||void 0===l?void 0:l.product_code}}),className:Ie.uploadSelectComponent,inputClassName:Ie.uploadSearchInput,molclassname:Ie.uploadSelectMenuOverlayList,moliclassname:Ie.uploadSelectMenuOverlayListItem,onChange:e=>{null===n||void 0===n||n(null===e||void 0===e?void 0:e.map(e=>null===e||void 0===e?void 0:e.value))}}))))},Xe=e=>{const{defaultType:l,defaultModule:t,onModuleSelected:n,onTypeSelected:a,defaultList:d,validationErrors:s,allModules:r,onChangeList:u,multiSelectLabel:m="Default"}=e,[v,y]=(0,o.useState)(void 0),[h,f]=(0,o.useState)(!1),[,C]=(0,o.useState)(!1),[g,b]=(0,o.useState)(void 0===d||0===d.length?[]:d.map(e=>({label:e,value:e,blueprint_name:m}))),S=r.map(e=>({label:e.name,value:e.id,module:e}));return o.createElement("div",{className:Ie.dropdownElementHost},o.createElement(Fe,{errorMessage:null===s||void 0===s?void 0:s.type},o.createElement(p.Lb,{title:"Module to list"}),o.createElement(p.sm,{"app-variant":null!==s&&void 0!==s&&s.type?"error":"normal",className:Ie.unfocusableWrapper},o.createElement("pre",{className:Ie.dropdownSymbol},null!==v&&void 0!==v&&v.icon?null===v||void 0===v?void 0:v.icon:h?"":null===t||void 0===t?void 0:t.icon," "),o.createElement(p.rk,{items:S,defaultSelected:t,className:Ie.dropdownSelectComponent,tmiClassName:Ie.dropdownInput,molclassname:Ie.dropdownSelectMenuOverlayList,moliclassname:Ie.dropdownSelectMenuOverlayListItem,onChange:e=>{var l;l=e.module.procedure.id,(0,c.zJ)(l).pipe((0,i.P)()).subscribe({next:e=>{var l;let t=[];null===(l=e.steps)||void 0===l||l.filter(e=>{e.component_blueprints.filter(e=>{e.selected_fields.filter(l=>{t=[...t,{label:l.field_name,value:l.field_name,blueprint_name:e.name,blueprint_id:e.id}]})})}),b([...ke.sortWith([ke.ascend(ke.prop("blueprint_name"))])(t),{label:"Created Date",value:"Created Date",blueprint_name:"Others"},{label:"Total Qty",value:"Total Qty",blueprint_name:"Others"}]),C(!1)},error:e=>{}}),y(e),null===n||void 0===n||n(e),null!==e&&void 0!==e&&e.symbol?f(!1):f(!0)}}))),o.createElement(Fe,{errorMessage:null===s||void 0===s?void 0:s.position_id},o.createElement(p.Lb,{title:"What fields to display?"}),o.createElement(p.sm,{"app-variant":null!==s&&void 0!==s&&s.position_id?"error":"normal",className:Ne()(Ie.unfocusableWrapper,Ie.peoplePositionSelectContainer)},o.createElement(se.Cm,{items:g,groupedBy:"blueprint_name",groupname:"blueprint_name",triggerType:"chevron",initialSelectedValues:void 0===d||0===d.length?[]:d.map(e=>({label:e,value:e,blueprint_name:m})),className:Ie.peoplePositionsSelect,inputClassName:Ie.peoplePositionsSelectInput,molclassname:Ie.peoplePositionsSelectMenuOverlay,moliclassname:Ie.peoplePositionsSelectMenuOverlayItem,onChange:e=>{null===u||void 0===u||u(null===e||void 0===e?void 0:e.map(e=>null===e||void 0===e?void 0:e.value))}}))),o.createElement(Fe,{errorMessage:null===s||void 0===s?void 0:s.type},o.createElement(p.Lb,{title:"List type"}),o.createElement(p.sm,{"app-variant":null!==s&&void 0!==s&&s.type?"error":"normal",className:Ie.unfocusableWrapper},o.createElement(p.rk,{items:[{label:"Table",value:"Table"},{label:"List (max 4 fields displayed)",value:"List"}],defaultSelected:l,className:Ie.dropdownSelectComponent,tmiClassName:Ie.dropdownInput,molclassname:Ie.dropdownSelectMenuOverlayList,moliclassname:Ie.dropdownSelectMenuOverlayListItem,onChange:e=>{null===a||void 0===a||a(e),null!==e&&void 0!==e&&e.symbol?f(!1):f(!0)}}))))},Ge=e=>{const{defaultOrientation:l,defaultKey:t,defaultType:n,defaultList:i,onKeySelected:d,onTypeSelected:s,validationErrors:r,blueprints:u,onChangeList:c,multiSelectLabel:m="Default",onChangeOrientation:v,fieldOption:y,setFieldOption:h}=e,{isOnboarding:f}=(0,a.v9)(e=>e.modalsReducer),[C,g]=(0,o.useState)(void 0),[b,S]=(0,o.useState)(!1),[,E]=(0,o.useState)(!0),[_,w]=(0,o.useState)(void 0===i||0===i.length?[]:i.map(e=>({label:e,value:e,blueprint_name:m}))),N=f?u.map(e=>({label:e.name,value:e.id,component:e})):u.filter(e=>!1===e.readonly).map(e=>({label:e.name,value:e.id,component:e})),L=[{label:"Rows",value:"rows"},{label:"Columns",value:"Columns"}];return o.createElement("div",{className:Ie.dropdownElementHost},o.createElement(Fe,{errorMessage:null===r||void 0===r?void 0:r.type},o.createElement(p.Lb,{title:"Component where to conduct lookup"}),o.createElement(p.sm,{"app-variant":null!==r&&void 0!==r&&r.type?"error":"normal",className:Ie.unfocusableWrapper},o.createElement(p.rk,{items:N,defaultSelected:n,className:Ie.dropdownSelectComponent,tmiClassName:Ie.dropdownInput,molclassname:Ie.dropdownSelectMenuOverlayList,moliclassname:Ie.dropdownSelectMenuOverlayListItem,onChange:e=>{(e=>{let l=[];e.fields.filter(t=>{l=[...l,{label:t.value,value:t.value,blueprint_name:e.name,blueprint_id:e.id}]}),w([...ke.sortWith([ke.ascend(ke.prop("blueprint_name"))])(l),{label:"Created Date",value:"created_date",blueprint_name:"Others"}]),E(!1)})(e.component),g(e),null===s||void 0===s||s(null!==e&&void 0!==e?e:"single"),null!==e&&void 0!==e&&e.symbol?S(!1):S(!0)}}))),o.createElement(Fe,{errorMessage:null===r||void 0===r?void 0:r.position_id},o.createElement(p.Lb,{title:"What key to use?"}),o.createElement(p.sm,{"app-variant":null!==r&&void 0!==r&&r.position_id?"error":"normal",className:Ne()(Ie.unfocusableWrapper,Ie.peoplePositionSelectContainer)},o.createElement(p.rk,{items:_,defaultSelected:{label:t},className:Ie.dropdownSelectComponent,tmiClassName:Ie.dropdownInput,molclassname:Ie.dropdownSelectMenuOverlayList,moliclassname:Ie.dropdownSelectMenuOverlayListItem,onChange:e=>{var l;null===d||void 0===d||d(null!==(l=e.value)&&void 0!==l?l:"Key")}}))),o.createElement(Fe,{errorMessage:null===r||void 0===r?void 0:r.position_id},o.createElement(p.Lb,{title:"What fields to display?"}),o.createElement(p.sm,{"app-variant":null!==r&&void 0!==r&&r.position_id?"error":"normal",className:Ne()(Ie.unfocusableWrapper,Ie.peoplePositionSelectContainer)},o.createElement(se.Cm,{items:_,groupedBy:"blueprint_name",groupname:"blueprint_name",triggerType:"chevron",initialSelectedValues:void 0===i||0===i.length?[]:i.map(e=>({label:e,value:e,blueprint_name:m})),className:Ie.peoplePositionsSelect,inputClassName:Ie.peoplePositionsSelectInput,molclassname:Ie.peoplePositionsSelectMenuOverlay,moliclassname:Ie.peoplePositionsSelectMenuOverlayItem,onChange:e=>{null===c||void 0===c||c(null===e||void 0===e?void 0:e.map(e=>null===e||void 0===e?void 0:e.value))}}))),o.createElement(Fe,{errorMessage:null===r||void 0===r?void 0:r.type},o.createElement(p.Lb,{title:"Interface Orientation"}),o.createElement("div",{className:Ie.currencySelectContainer},o.createElement(p.Ld,{triggerType:"chevron",items:L,defaultSelectedItem:L.find(e=>e.value===l),className:Ie.componentsSelectComponent,inputClassName:Ie.componentsSearchInput,inputStyle:{color:"var(--app-color-gray-dark)",fontSize:"1rem"},clearControlsClassName:Ie.componentsClearControlsClassName,molclassname:Ie.componentsSelectMenuOverlayList,moliclassname:Ie.componentsSelectMenuOverlayListItem,onChange:e=>{v(e.value),null!==e&&void 0!==e&&e.symbol?S(!1):S(!0)}}))))},Ye=e=>{var l,t,i,d,s;const{defaultOrientation:r,defaultKey:u,defaultType:c,defaultList:m,defaultItemList:v,defaultConfig:y,onConfigSelected:h,onKeySelected:f,onTypeSelected:C,validationErrors:g,blueprints:b,onChangeList:S,onChangeListItems:E,multiSelectLabel:_="Default",onChangeOrientation:w,setFieldOption:N,fieldOption:L}=e,{isOnboarding:Z}=(0,a.v9)(e=>e.modalsReducer),[x,I]=(0,o.useState)(void 0),[M,k]=(0,o.useState)(!1),[,O]=(0,o.useState)(!0),[T,P]=(0,o.useState)(null!==r&&void 0!==r?r:"Donut"),[B,F]=(0,o.useState)(c?ke.sortWith([ke.ascend(ke.prop("blueprint_name"))])(b.find(e=>e.id===(null===c||void 0===c?void 0:c.value)).fields.map(e=>{const l=b.find(e=>e.id===(null===c||void 0===c?void 0:c.value));return{label:e.value,value:e.value,blueprint_name:l.name,blueprint_id:l.id}})):[]),D=Z?ke.sortWith([ke.ascend(ke.prop("name"))])(b).map(e=>({label:e.name,value:e.id,component:e})):ke.sortWith([ke.ascend(ke.prop("name"))])(b).filter(e=>!1===e.readonly).map(e=>({label:e.name,value:e.id,component:e})),A=[{label:"Donut (using transaction field)",value:"Donut"},{label:"Bar (using line items field)",value:"Bar"},{label:"Column (using line items field)",value:"Column"},{label:"Donut (using line items field)",value:"Custom"}],W=[{label:"Count Occurences",value:"occurences"},{label:"Total Quantity",value:"quantity"},{label:"Quantity of latest (Bar only)",value:"latest"}],V=[{label:"Item Code",value:"item_code",blueprint_name:"Items"},{label:"Quantity",value:"quantity",blueprint_name:"Items"},{label:"Value",value:"value",blueprint_name:"Items"},{label:"Value 2",value:"alt_value",blueprint_name:"Items"},{label:"Total",value:"total",blueprint_name:"Items"},{label:"Type",value:"type",blueprint_name:"Items"}];return o.createElement("div",{className:Ie.dropdownElementHost},o.createElement(Fe,{errorMessage:null===g||void 0===g?void 0:g.type},o.createElement(p.Lb,{title:"Chart Type"}),o.createElement("div",{className:Ie.currencySelectContainer},o.createElement(p.Ld,{triggerType:"chevron",items:A,defaultSelectedItem:A.find(e=>e.value===r),className:Ie.componentsSelectComponent,inputClassName:Ie.componentsSearchInput,inputStyle:{color:"var(--app-color-gray-dark)",fontSize:"1rem"},clearControlsClassName:Ie.componentsClearControlsClassName,molclassname:Ie.componentsSelectMenuOverlayList,moliclassname:Ie.componentsSelectMenuOverlayListItem,onChange:e=>{N((0,n.Z)((0,n.Z)({},L),{},{orientation:e.value,list:[],items:[]})),P(e.value),null!==e&&void 0!==e&&e.symbol?k(!1):k(!0)}}))),o.createElement(Fe,{errorMessage:null===g||void 0===g?void 0:g.type},o.createElement(p.Lb,{title:"Component where to get fields"}),o.createElement(p.sm,{"app-variant":null!==g&&void 0!==g&&g.type?"error":"normal",className:Ie.unfocusableWrapper},o.createElement(p.rk,{items:D,defaultSelected:c,className:Ie.dropdownSelectComponent,tmiClassName:Ie.dropdownInput,molclassname:Ie.dropdownSelectMenuOverlayList,moliclassname:Ie.dropdownSelectMenuOverlayListItem,onChange:e=>{var l;l=e.component,F([...ke.sortWith([ke.ascend(ke.prop("blueprint_name"))])(l.fields.map(e=>({label:e.value,value:e.value,blueprint_name:l.name,blueprint_id:l.id}))),{label:"Created Date",value:"created_date",blueprint_name:"Others"}]),O(!1),I(e),null===C||void 0===C||C(null!==e&&void 0!==e?e:"single"),null!==e&&void 0!==e&&e.symbol?k(!1):k(!0)}}))),o.createElement(Fe,{errorMessage:null===g||void 0===g?void 0:g.position_id},o.createElement(p.Lb,{title:"What key to use?"}),o.createElement(p.sm,{"app-variant":null!==g&&void 0!==g&&g.position_id?"error":"normal",className:Ne()(Ie.unfocusableWrapper,Ie.peoplePositionSelectContainer)},o.createElement(p.rk,{items:B,defaultSelected:{label:u},className:Ie.dropdownSelectComponent,tmiClassName:Ie.dropdownInput,molclassname:Ie.dropdownSelectMenuOverlayList,moliclassname:Ie.dropdownSelectMenuOverlayListItem,onChange:e=>{var l;null===f||void 0===f||f(null!==(l=e.value)&&void 0!==l?l:"Key")}}))),"Custom"===T&&o.createElement(Fe,null,o.createElement(p.Lb,{title:"Chart Config"}),o.createElement("textarea",{id:"chart config",type:"text",name:"element-name",defaultValue:JSON.stringify(y),onChange:e=>{},onBlur:()=>{var e,l,t;(e=>{try{JSON.parse(e)}catch(l){return!1}return!0})(null===(e=document.getElementById("chart config"))||void 0===e?void 0:e.value)?(h(JSON.parse(null===(l=document.getElementById("chart config"))||void 0===l?void 0:l.value)),document.getElementById("chart config").style.borderColor="var(--app-color-gray-lighter)"):0===(null===(t=document.getElementById("chart config"))||void 0===t?void 0:t.value.length)?(document.getElementById("chart config").value=JSON.stringify({}),document.getElementById("chart config").style.borderColor="pink"):document.getElementById("chart config").style.borderColor="red"},className:Ie.elementTextInput,style:{minHeight:"200px"}})),("Donut"!==T||"Donut"===T&&"quantity"===(null===L||void 0===L?void 0:L.operation))&&0===(null===L||void 0===L||null===(l=L.items)||void 0===l?void 0:l.length)&&o.createElement(Fe,{errorMessage:null===g||void 0===g?void 0:g.position_id},o.createElement(p.Lb,{title:"Option 1: What field to use to compute?"}),o.createElement(p.sm,{"app-variant":null!==g&&void 0!==g&&g.position_id?"error":"normal",className:Ne()(Ie.unfocusableWrapper,Ie.peoplePositionSelectContainer)},o.createElement(p.rk,{items:B,defaultSelected:1===(null===m||void 0===m?void 0:m.length)?{label:m[0]}:void 0,className:Ie.dropdownSelectComponent,tmiClassName:Ie.dropdownInput,molclassname:Ie.dropdownSelectMenuOverlayList,moliclassname:Ie.dropdownSelectMenuOverlayListItem,onChange:e=>{N((0,n.Z)((0,n.Z)({},L),{},{list:[e.value],items:[]}))}}))),("Donut"!==T||"Donut"===T&&"quantity"===(null===L||void 0===L?void 0:L.operation))&&0===(null===L||void 0===L||null===(t=L.list)||void 0===t?void 0:t.length)&&o.createElement(Fe,{errorMessage:null===g||void 0===g?void 0:g.position_id},o.createElement(p.Lb,{title:"Option 2: What item field to use to compute?"}),o.createElement(p.sm,{"app-variant":null!==g&&void 0!==g&&g.position_id?"error":"normal",className:Ne()(Ie.unfocusableWrapper,Ie.peoplePositionSelectContainer)},o.createElement(p.rk,{items:V,defaultSelected:(null===v||void 0===v?void 0:v.length)>1?null===V||void 0===V?void 0:V.find(e=>e.value===v[0]):void 0,className:Ie.dropdownSelectComponent,tmiClassName:Ie.dropdownInput,molclassname:Ie.dropdownSelectMenuOverlayList,moliclassname:Ie.dropdownSelectMenuOverlayListItem,onChange:e=>{N((0,n.Z)((0,n.Z)({},L),{},{items:[e.value],list:[]}))}}))),(null===L||void 0===L||null===(i=L.items)||void 0===i?void 0:i.length)>0&&"latest"===(null===L||void 0===L?void 0:L.operation)&&0===(null===L||void 0===L||null===(d=L.list)||void 0===d?void 0:d.length)&&o.createElement(Fe,{errorMessage:null===g||void 0===g?void 0:g.position_id},o.createElement(p.Lb,{title:"What item field to use as label?"}),o.createElement(p.sm,{"app-variant":null!==g&&void 0!==g&&g.position_id?"error":"normal",className:Ne()(Ie.unfocusableWrapper,Ie.peoplePositionSelectContainer)},o.createElement(p.rk,{items:V,defaultSelected:(null===L||void 0===L||null===(s=L.labels)||void 0===s?void 0:s.length)>0?null===V||void 0===V?void 0:V.find(e=>e.value===(null===L||void 0===L?void 0:L.labels[0])):void 0,className:Ie.dropdownSelectComponent,tmiClassName:Ie.dropdownInput,molclassname:Ie.dropdownSelectMenuOverlayList,moliclassname:Ie.dropdownSelectMenuOverlayListItem,onChange:e=>{N((0,n.Z)((0,n.Z)({},L),{},{labels:[e.value],list:[]}))}}))),o.createElement(Fe,{errorMessage:null===g||void 0===g?void 0:g.type},o.createElement(p.Lb,{title:"Operation to be used"}),o.createElement("div",{className:Ie.currencySelectContainer},o.createElement(p.Ld,{triggerType:"chevron",items:W,defaultSelectedItem:W.find(e=>e.value===(null===L||void 0===L?void 0:L.operation)),className:Ie.componentsSelectComponent,inputClassName:Ie.componentsSearchInput,inputStyle:{color:"var(--app-color-gray-dark)",fontSize:"1rem"},clearControlsClassName:Ie.componentsClearControlsClassName,molclassname:Ie.componentsSelectMenuOverlayList,moliclassname:Ie.componentsSelectMenuOverlayListItem,onChange:e=>{N((0,n.Z)((0,n.Z)({},L),{},{operation:null===e||void 0===e?void 0:e.value}))}}))))},Je=e=>{var l,t,a,i,d;const{defaultValue:s,defaultList:r,defaultSearchText:u,onChangeSearchText:c,onChangeList:m,onOperatorSelected:v,validationErrors:y,selectedFields:h,blueprints:f,selectLabel:C="Fields",setFieldOption:g,fieldOption:b}=e,[S,E]=(0,o.useState)(void 0===s?"":s),[_]=(0,o.useState)(void 0===r?[]:r),[w,N]=(0,o.useState)(void 0===u?"":u),L=[{label:"Sum of the fields (A+B)",id:0,value:"sum",type:"fields"},{label:"Sum of custom fields (F1+..Fn)",id:15,value:"freesum",type:"fields"},{label:"Difference between fields (A-B)",id:1,value:"difference",type:"fields"},{label:"Multiply the fields (A*B)",id:2,value:"multiply",type:"fields"},{label:"Divide the fields (A/B)",id:3,value:"divide",type:"fields"},{label:"Total Difference per field (A1-A2-An)",id:4,value:"tdiff",type:"fields"},{label:"Total Sum per field (A1+A2+An)",id:5,value:"tsum",type:"fields"},{label:"Total Sum per line item variable (A1+A2+An)",id:6,value:"itemsum",type:"items"},{label:"Total Difference per line item variable (A1-A2-An)",id:7,value:"itemdiff",type:"items"},{label:"Difference between dates (D1-D2-Dn, in days)",id:10,value:"datesdiff",type:"date"},{label:"Difference between today and date (Today-Dn, in days)",id:11,value:"datenowdiff",type:"date"},{label:"Count occurrences of string in field selected",id:12,value:"countocc",type:"fields"},{label:"Count occurrences of date in field selected",id:13,value:"countdateocc",type:"date"},{label:"Compute the distance between two pins",id:14,value:"cmpdistance",type:"pin"}],Z=[{label:"Quantity",id:6,value:"qty",type:"items"},{label:"Total",id:8,value:"total",type:"items"},{label:"Value",id:8,value:"value",type:"items"},{label:"Alt Value",id:9,value:"altvalue",type:"items"}],x=[{label:"Set date today",value:"today",type:"Date"},{label:"Set date tomorrow",value:"tomorrow",type:"Date"},{label:"Set date one month from today",value:"month",type:"Date"},{label:"Set date one week from today",value:"week",type:"Date"},{label:"None",value:"none",type:"Date"}],I=h.filter(e=>""!=e.value&&("Value Button"===e.field_type.name||"Number"===e.field_type.name||"Formula"===e.field_type.name||"Item Formula"===e.field_type.name)).map(e=>({label:e.value,value:e.id,field_name:e.field_type.name})),M=h.filter(e=>""!=e.value&&"Date"===e.field_type.name).map(e=>({label:e.value,value:e.id,field_name:"Dates"})),k=[].concat.apply([],f.map(e=>[].concat.apply([],e.fields))).map(e=>({label:e.value,value:e.id,type:e.name}));return o.createElement("div",{className:Ie.dropdownElementHost},o.createElement(Fe,{errorMessage:null===y||void 0===y?void 0:y.type},o.createElement(p.Lb,{title:"Operation to perform"}),o.createElement(p.sm,{"apps-variant":null!==y&&void 0!==y&&y.type?"error":"normal",className:Ie.unfocusableWrapper},o.createElement(p.Ld,{triggerType:"chevron",items:L,defaultSelectedItem:L.find(e=>e.value===S),className:Ie.componentsSelectComponent,inputClassName:Ie.componentsSearchInput,clearControlsClassName:Ie.componentsClearControlsClassName,molclassname:Ie.componentsSelectMenuOverlayList,moliclassname:Ie.componentsSelectMenuOverlayListItem,inputStyle:{color:"var(--app-color-gray-dark)",fontSize:"1rem"},onChange:e=>{E(e.value),v(e.value)}}))),"freesum"!==S&&o.createElement(Fe,{errorMessage:null===y||void 0===y?void 0:y.accepted_mimes},o.createElement(p.Lb,{title:"sum"===S||"difference"===S||"multiply"===S||"divide"===S?"Fields to perform selected operation":"Field to perform selected operation"}),o.createElement(p.sm,{"app-variant":null!==y&&void 0!==y&&y.accepted_mimes?"error":"normal",className:Ne()(Ie.unfocusableWrapper,Ie.multiselectContainer)},"datesdiff"===S||"datenowdiff"===S||"sum"===S||"difference"===S||"multiply"===S||"divide"===S?o.createElement(se.Cm,{items:"datesdiff"===S||"datenowdiff"===S?M:I,groupedBy:"field_name",groupname:"field_name",triggerType:"chevron",initialSelectedValues:"datesdiff"===S||"datenowdiff"===S?M.filter(e=>(null===_||void 0===_?void 0:_.indexOf(null===e||void 0===e?void 0:e.label))>-1):I.filter(e=>(null===_||void 0===_?void 0:_.indexOf(null===e||void 0===e?void 0:e.label))>-1),className:Ie.peoplePositionsSelect,inputClassName:Ie.peoplePositionsSelectInput,molclassname:Ie.peoplePositionsSelectMenuOverlay,moliclassname:Ie.peoplePositionsSelectMenuOverlayItem,onChange:e=>{null===m||void 0===m||m(null===e||void 0===e?void 0:e.map(e=>null===e||void 0===e?void 0:e.label))}}):"itemdiff"===S||"itemsum"===S?o.createElement(p.Ld,{triggerType:"chevron",items:Z,defaultSelectedItem:_.length>0&&null!==(l=Z.find(e=>e.value===_[0]))&&void 0!==l?l:{},className:Ie.componentsSelectComponent,inputClassName:Ie.componentsSearchInput,clearControlsClassName:Ie.componentsClearControlsClassName,molclassname:Ie.componentsSelectMenuOverlayList,moliclassname:Ie.componentsSelectMenuOverlayListItem,inputStyle:{color:"var(--app-color-gray-dark)",fontSize:"1rem"},onChange:e=>{null===m||void 0===m||m([null===e||void 0===e?void 0:e.value])}}):"cmpdistance"===S?o.createElement(se.Cm,{items:k.filter(e=>"Pin"===e.type),groupedBy:"type",groupname:"type",triggerType:"chevron",initialSelectedValues:k.filter(e=>"Pin"===e.type).filter(e=>(null===_||void 0===_?void 0:_.indexOf(null===e||void 0===e?void 0:e.label))>-1),className:Ie.peoplePositionsSelect,inputClassName:Ie.peoplePositionsSelectInput,molclassname:Ie.peoplePositionsSelectMenuOverlay,moliclassname:Ie.peoplePositionsSelectMenuOverlayItem,onChange:e=>{null===m||void 0===m||m(null===e||void 0===e?void 0:e.map(e=>null===e||void 0===e?void 0:e.label))}}):o.createElement(p.Ld,{triggerType:"chevron",items:ke.sortWith([ke.ascend(ke.prop("label"))])([...new Set(k.filter(e=>"countdateocc"===S?"Date"===e.type:"Text"===e.type&&"countocc"===S||"Number"===e.type||"Status"===e.type||"Formula"===e.type||"Item Formula"===e.type||"Currency"===e.type).map(e=>e.label))].map(e=>({label:e,value:e}))),defaultSelectedItem:_.length>0?{label:_[0]}:{},className:Ie.componentsSelectComponent,inputClassName:Ie.componentsSearchInput,clearControlsClassName:Ie.componentsClearControlsClassName,molclassname:Ie.componentsSelectMenuOverlayList,moliclassname:Ie.componentsSelectMenuOverlayListItem,inputStyle:{color:"var(--app-color-gray-dark)",fontSize:"1rem"},onChange:e=>{null===m||void 0===m||m([null===e||void 0===e?void 0:e.label])}}))),"countocc"===S&&o.createElement(Fe,{errorMessage:null===y||void 0===y?void 0:y.name},o.createElement(p.Lb,{title:"Input text to search"}),o.createElement("input",{type:"text",name:"element-name",value:w,onChange:e=>{N(e.target.value),c(e.target.value)},className:Ie.elementTextInput})),"countdateocc"===S&&o.createElement(Fe,{errorMessage:null===y||void 0===y?void 0:y.name},o.createElement(p.Lb,{title:"Select date to match with"}),o.createElement(p.sm,{"app-variant":null!==y&&void 0!==y&&y.accepted_mimes?"error":"normal",className:Ne()(Ie.unfocusableWrapper,Ie.multiselectContainer)},o.createElement(p.Ld,{triggerType:"chevron",items:x,defaultSelectedItem:u&&x.find(e=>e.value===u),className:Ie.componentsSelectComponent,inputClassName:Ie.componentsSearchInput,clearControlsClassName:Ie.componentsClearControlsClassName,molclassname:Ie.componentsSelectMenuOverlayList,moliclassname:Ie.componentsSelectMenuOverlayListItem,inputStyle:{color:"var(--app-color-gray-dark)",fontSize:"1rem"},onChange:e=>{c(null===e||void 0===e?void 0:e.value)}}))),o.createElement(Fe,{errorMessage:null===y||void 0===y?void 0:y.type},o.createElement(p.Lb,{title:"Output display"}),o.createElement(p.sm,{"apps-variant":null!==y&&void 0!==y&&y.type?"error":"normal",className:Ie.unfocusableWrapper},o.createElement(p.Ld,{triggerType:"chevron",items:Oe,defaultSelectedItem:Oe.find(e=>e.value===(null===b||void 0===b?void 0:b.display)),className:Ie.componentsSelectComponent,inputClassName:Ie.componentsSearchInput,clearControlsClassName:Ie.componentsClearControlsClassName,molclassname:Ie.componentsSelectMenuOverlayList,moliclassname:Ie.componentsSelectMenuOverlayListItem,inputStyle:{color:"var(--app-color-gray-dark)",fontSize:"1rem"},onChange:e=>{g((0,n.Z)((0,n.Z)({},b),{},{display:null===e||void 0===e?void 0:e.value}))}}))),"bar"===(null===b||void 0===b?void 0:b.display)&&o.createElement(Fe,{errorMessage:null===y||void 0===y?void 0:y.name},o.createElement(p.Lb,{title:"Maximum Value"}),o.createElement("input",{type:"text",name:"element-name",value:b.max,onBlur:e=>{g((0,n.Z)((0,n.Z)({},b),{},{max:e.target.value}))},className:Ie.elementTextInput}),o.createElement(p.Lb,{title:"Color - Formula Value"}),o.createElement("input",{type:"text",className:Ie.elementTextInput,style:{borderRight:"white"===(null===b||void 0===b?void 0:b.barC)?"white":"50px solid ".concat(null!==(t=null===b||void 0===b?void 0:b.barC)&&void 0!==t?t:"#F6F4EC")},defaultValue:null!==(a=null===b||void 0===b?void 0:b.barC)&&void 0!==a?a:"#F6F4EC",onBlur:e=>g((0,n.Z)((0,n.Z)({},b),{},{barC:e.target.value}))}),o.createElement(p.Lb,{title:"Color - Formula Max Value"}),o.createElement("input",{type:"text",className:Ie.elementTextInput,style:{borderRight:"white"===(null===b||void 0===b?void 0:b.maxC)?"white":"50px solid ".concat(null!==(i=null===b||void 0===b?void 0:b.maxC)&&void 0!==i?i:"yellow")},defaultValue:null!==(d=null===b||void 0===b?void 0:b.maxC)&&void 0!==d?d:"yellow",onBlur:e=>g((0,n.Z)((0,n.Z)({},b),{},{maxC:e.target.value}))})),o.createElement("br",null),o.createElement("p",{className:Ie.elementInputTitle},"Ensure fields are set to the appropriate type (number, dates, currency, etc)"))},Qe=e=>{var l,t,a,i;const{defaultValue:d,defaultList:s,defaultSearchText:r,onChangeSearchText:u,onChangeList:c,onOperatorSelected:m,validationErrors:v,selectedFields:y,blueprints:h,selectLabel:f="Fields",setFieldOption:C,fieldOption:g}=e,[b,S]=(0,o.useState)(void 0===d?"":d),[E]=(0,o.useState)(void 0===s?[]:s),[_,w]=(0,o.useState)(void 0===r?"":r),N=[{label:"Sum of the fields (A+B)",id:0,value:"sum",type:"fields"},{label:"Difference between fields (A-B)",id:1,value:"difference",type:"fields"},{label:"Multiply the fields (A*B)",id:2,value:"multiply",type:"fields"},{label:"Divide the fields (A/B)",id:3,value:"divide",type:"fields"}],L=[{label:"Set date today",value:"today",type:"Date"},{label:"Set date tomorrow",value:"tomorrow",type:"Date"},{label:"Set date one month from today",value:"month",type:"Date"},{label:"Set date one week from today",value:"week",type:"Date"},{label:"None",value:"none",type:"Date"}],Z=y.filter(e=>""!=e.value&&("Value Button"===e.field_type.name||"Number"===e.field_type.name||"Formula"===e.field_type.name||"Item Formula"===e.field_type.name)).map(e=>({label:e.value,value:e.id,field_name:e.field_type.name})),x=y.filter(e=>""!=e.value&&"Date"===e.field_type.name).map(e=>({label:e.value,value:e.id,field_name:"Dates"}));[].concat.apply([],h.map(e=>[].concat.apply([],e.fields))).map(e=>({label:e.value,value:e.id,type:e.name}));return o.createElement("div",{className:Ie.dropdownElementHost},o.createElement(Fe,{errorMessage:null===v||void 0===v?void 0:v.type},o.createElement(p.Lb,{title:"Operation to perform"}),o.createElement(p.sm,{"apps-variant":null!==v&&void 0!==v&&v.type?"error":"normal",className:Ie.unfocusableWrapper},o.createElement(p.Ld,{triggerType:"chevron",items:N,defaultSelectedItem:N.find(e=>e.value===b),className:Ie.componentsSelectComponent,inputClassName:Ie.componentsSearchInput,clearControlsClassName:Ie.componentsClearControlsClassName,molclassname:Ie.componentsSelectMenuOverlayList,moliclassname:Ie.componentsSelectMenuOverlayListItem,inputStyle:{color:"var(--app-color-gray-dark)",fontSize:"1rem"},onChange:e=>{S(e.value),m(e.value)}}))),"freesum"!==b&&o.createElement(Fe,{errorMessage:null===v||void 0===v?void 0:v.accepted_mimes},o.createElement(p.Lb,{title:"sum"===b||"difference"===b||"multiply"===b||"divide"===b?"Fields to perform selected operation":"Field to perform selected operation"}),o.createElement(p.sm,{"app-variant":null!==v&&void 0!==v&&v.accepted_mimes?"error":"normal",className:Ne()(Ie.unfocusableWrapper,Ie.multiselectContainer)},o.createElement(se.Cm,{items:"datesdiff"===b||"datenowdiff"===b?x:Z,groupedBy:"field_name",groupname:"field_name",triggerType:"chevron",initialSelectedValues:"datesdiff"===b||"datenowdiff"===b?x.filter(e=>(null===E||void 0===E?void 0:E.indexOf(null===e||void 0===e?void 0:e.label))>-1):Z.filter(e=>(null===E||void 0===E?void 0:E.indexOf(null===e||void 0===e?void 0:e.label))>-1),className:Ie.peoplePositionsSelect,inputClassName:Ie.peoplePositionsSelectInput,molclassname:Ie.peoplePositionsSelectMenuOverlay,moliclassname:Ie.peoplePositionsSelectMenuOverlayItem,onChange:e=>{null===c||void 0===c||c(null===e||void 0===e?void 0:e.map(e=>null===e||void 0===e?void 0:e.label))}}))),"countocc"===b&&o.createElement(Fe,{errorMessage:null===v||void 0===v?void 0:v.name},o.createElement(p.Lb,{title:"Input text to search"}),o.createElement("input",{type:"text",name:"element-name",value:_,onChange:e=>{w(e.target.value),u(e.target.value)},className:Ie.elementTextInput})),"countdateocc"===b&&o.createElement(Fe,{errorMessage:null===v||void 0===v?void 0:v.name},o.createElement(p.Lb,{title:"Select date to match with"}),o.createElement(p.sm,{"app-variant":null!==v&&void 0!==v&&v.accepted_mimes?"error":"normal",className:Ne()(Ie.unfocusableWrapper,Ie.multiselectContainer)},o.createElement(p.Ld,{triggerType:"chevron",items:L,defaultSelectedItem:r&&L.find(e=>e.value===r),className:Ie.componentsSelectComponent,inputClassName:Ie.componentsSearchInput,clearControlsClassName:Ie.componentsClearControlsClassName,molclassname:Ie.componentsSelectMenuOverlayList,moliclassname:Ie.componentsSelectMenuOverlayListItem,inputStyle:{color:"var(--app-color-gray-dark)",fontSize:"1rem"},onChange:e=>{u(null===e||void 0===e?void 0:e.value)}}))),o.createElement(Fe,{errorMessage:null===v||void 0===v?void 0:v.type},o.createElement(p.Lb,{title:"Output display"}),o.createElement(p.sm,{"apps-variant":null!==v&&void 0!==v&&v.type?"error":"normal",className:Ie.unfocusableWrapper},o.createElement(p.Ld,{triggerType:"chevron",items:Oe,defaultSelectedItem:Oe.find(e=>e.value===(null===g||void 0===g?void 0:g.display)),className:Ie.componentsSelectComponent,inputClassName:Ie.componentsSearchInput,clearControlsClassName:Ie.componentsClearControlsClassName,molclassname:Ie.componentsSelectMenuOverlayList,moliclassname:Ie.componentsSelectMenuOverlayListItem,inputStyle:{color:"var(--app-color-gray-dark)",fontSize:"1rem"},onChange:e=>{C((0,n.Z)((0,n.Z)({},g),{},{display:null===e||void 0===e?void 0:e.value}))}}))),"bar"===(null===g||void 0===g?void 0:g.display)&&o.createElement(Fe,{errorMessage:null===v||void 0===v?void 0:v.name},o.createElement(p.Lb,{title:"Maximum Value"}),o.createElement("input",{type:"text",name:"element-name",value:g.max,onBlur:e=>{C((0,n.Z)((0,n.Z)({},g),{},{max:e.target.value}))},className:Ie.elementTextInput}),o.createElement(p.Lb,{title:"Color - Formula Value"}),o.createElement("input",{type:"text",className:Ie.elementTextInput,style:{borderRight:"white"===(null===g||void 0===g?void 0:g.barC)?"white":"50px solid ".concat(null!==(l=null===g||void 0===g?void 0:g.barC)&&void 0!==l?l:"#F6F4EC")},defaultValue:null!==(t=null===g||void 0===g?void 0:g.barC)&&void 0!==t?t:"#F6F4EC",onBlur:e=>C((0,n.Z)((0,n.Z)({},g),{},{barC:e.target.value}))}),o.createElement(p.Lb,{title:"Color - Formula Max Value"}),o.createElement("input",{type:"text",className:Ie.elementTextInput,style:{borderRight:"white"===(null===g||void 0===g?void 0:g.maxC)?"white":"50px solid ".concat(null!==(a=null===g||void 0===g?void 0:g.maxC)&&void 0!==a?a:"yellow")},defaultValue:null!==(i=null===g||void 0===g?void 0:g.maxC)&&void 0!==i?i:"yellow",onBlur:e=>C((0,n.Z)((0,n.Z)({},g),{},{maxC:e.target.value}))})),o.createElement("br",null),o.createElement("p",{className:Ie.elementInputTitle},"Ensure fields are set to the appropriate type (number, dates, currency, etc)"))},$e=e=>{var l,t,a,i,d,s;const{options:r,setFieldOption:u,fieldOption:c,validationErrors:m}=e,[v,y]=(0,o.useState)(null!==(l=r.subject)&&void 0!==l?l:""),[h,f]=(0,o.useState)(null!==(t=r.message)&&void 0!==t?t:""),[C,g]=(0,o.useState)(null!==(a=r.message2)&&void 0!==a?a:""),[b,S]=(0,o.useState)(null!==(i=r.valueToMatch)&&void 0!==i?i:""),[E,_]=(0,o.useState)(null!==(d=r.copyEmailRecip)&&void 0!==d?d:""),[w,N]=(0,o.useState)(null!==(s=r.fieldToMatch)&&void 0!==s?s:"");return o.createElement("div",{className:Ie.dropdownElementHost},o.createElement(Fe,{errorMessage:null===m||void 0===m?void 0:m.name},o.createElement(p.Lb,{title:"Email subject"}),o.createElement("input",{type:"text",name:"element-name",value:null!==v&&void 0!==v?v:"",onChange:e=>{u((0,n.Z)((0,n.Z)({},c),{},{message2:C,message:h,subject:e.target.value,copyEmailRecip:E})),y(e.target.value)},className:Ie.elementTextInput})),o.createElement(Fe,{errorMessage:null===m||void 0===m?void 0:m.name},o.createElement(p.Lb,{title:"Custom email message to selected recipients"}),o.createElement("textarea",{type:"text",name:"element-name",value:null!==h&&void 0!==h?h:"",onChange:e=>{u((0,n.Z)((0,n.Z)({},c),{},{subject:v,message:e.target.value,message2:C,copyEmailRecip:E})),f(e.target.value)},className:Ie.elementTextInput,style:{height:"100px"}})),o.createElement(Fe,{errorMessage:null===m||void 0===m?void 0:m.name},o.createElement(p.Lb,{title:"Custom email message to creator"}),o.createElement("textarea",{type:"text",name:"element-name",value:null!==C&&void 0!==C?C:"",onChange:e=>{u((0,n.Z)((0,n.Z)({},c),{},{subject:v,message:h,message2:e.target.value,copyEmailRecip:E})),g(e.target.value)},className:Ie.elementTextInput,style:{height:"100px"}})),o.createElement(Fe,null,o.createElement(p.Lb,{title:"Field to check to trigger email"}),o.createElement(p.sm,{className:Ie.unfocusableWrapper},o.createElement("input",{type:"text",className:Ie.dropDownNewListItemInput,value:w,name:"matched to field",onChange:e=>{N(e.target.value),u((0,n.Z)((0,n.Z)({},c),{},{subject:v,message:h,message2:C,fieldToMatch:e.target.value,valueToMatch:b,copyEmailRecip:E}))}}))),o.createElement(Fe,null,o.createElement(p.Lb,{title:"Values of field to trigger the email (Note: Use ' , ' to seperate)"}),o.createElement(p.sm,{className:Ie.unfocusableWrapper},o.createElement("input",{type:"text",className:Ie.dropDownNewListItemInput,value:b,name:"matched to field",onChange:e=>{S(e.target.value),u((0,n.Z)((0,n.Z)({},c),{},{subject:v,message:h,message2:C,fieldToMatch:w,valueToMatch:e.target.value,copyEmailRecip:E}))}}))),o.createElement(p.pd,{id:"Copy default email recipients",title:"Copy default email recipients?",ungrouped:!0,withAckButton:!1,style:{margin:"10px 0px",width:"auto"},value:E,toggleSelected:e=>{_(e),u((0,n.Z)((0,n.Z)({},c),{},{subject:v,message:h,message2:C,fieldToMatch:w,valueToMatch:b,copyEmailRecip:e}))}}))},el=e=>{const{defaultValue:l,defaultField:t,onChangeField:n,onChangeValue:a,validationErrors:i,blueprints:d}=e,[s,r]=(0,o.useState)(void 0===l?"":l),[u]=(0,o.useState)(void 0===t?"":t),c=[].concat.apply([],d.map(e=>[].concat.apply([],e.fields))).map(e=>({label:e.value,value:e.id,type:e.name}));return o.createElement("div",{className:Ie.dropdownElementHost},o.createElement(Fe,{errorMessage:null===i||void 0===i?void 0:i.accepted_mimes},o.createElement(p.Lb,{title:"Field to perform filter"}),o.createElement(p.sm,{"app-variant":null!==i&&void 0!==i&&i.accepted_mimes?"error":"normal",className:Ne()(Ie.unfocusableWrapper,Ie.multiselectContainer)},o.createElement(p.Ld,{triggerType:"chevron",items:c,defaultSelectedItem:u.length>0?{label:u}:{},className:Ie.componentsSelectComponent,inputClassName:Ie.componentsSearchInput,inputStyle:{color:"var(--app-color-gray-dark)",fontSize:"1rem"},clearControlsClassName:Ie.componentsClearControlsClassName,molclassname:Ie.componentsSelectMenuOverlayList,moliclassname:Ie.componentsSelectMenuOverlayListItem,onChange:e=>{null===n||void 0===n||n(null===e||void 0===e?void 0:e.label)}}))),o.createElement(Fe,{errorMessage:null===i||void 0===i?void 0:i.name},o.createElement(p.Lb,{title:"Input text to search"}),o.createElement("input",{type:"text",name:"element-name",value:s,onChange:e=>{a(e.target.value),r(e.target.value)},className:Ie.elementTextInput})),o.createElement("br",null))},ll=e=>{var l;const{defaultRefName:t,onReferenceLabel:n,validationErrors:a,onTargetSelected:i,onChangeList:d,onTypeSelected:s,defaultTarget:r,defaultType:u,bpContext:c,defaultList:m}=e,[,v]=(0,o.useState)(!1),[,y]=(0,o.useState)({}),[h,f]=(0,o.useState)(void 0==r?[]:null===r||void 0===r||null===(l=r.fields)||void 0===l?void 0:l.map(e=>({label:e.value,value:e.value}))),[C,g]=(0,o.useState)(void 0==m?[]:(null===m||void 0===m?void 0:m.length)>0?m.map(e=>({label:e,value:e,component_name:"Fields"})):[]),[b]=(0,o.useState)(c.allBlueprintComponents.filter(e=>!1===e.readonly).filter(e=>e.fields.filter(e=>"Product ID"===e.value).length>0).map(e=>({label:e.name,value:e.id,blueprint:e})));return o.createElement("div",{className:Ie.dropdownElementHost},o.createElement(Fe,{errorMessage:null===a||void 0===a?void 0:a.type},o.createElement(p.Lb,{title:"Component where to conduct lookup of Product"}),o.createElement("div",{className:Ie.currencySelectContainer},o.createElement(p.Ld,{triggerType:"chevron",items:b,defaultSelectedItem:{label:null===r||void 0===r?void 0:r.name,value:null===r||void 0===r?void 0:r.id},className:Ie.componentsSelectComponent,inputClassName:Ie.componentsSearchInput,inputStyle:{color:"var(--app-color-gray-dark)",fontSize:"1rem",cursor:"pointer"},clearControlsClassName:Ie.componentsClearControlsClassName,molclassname:Ie.componentsSelectMenuOverlayList,moliclassname:Ie.componentsSelectMenuOverlayListItem,onChange:e=>{f(e.blueprint.fields.map(e=>({label:e.value,value:e.value}))),g(e.blueprint.fields.map(e=>({label:e.value,value:e.value}))),y(e),i(e.value),null!==e&&void 0!==e&&e.symbol?v(!1):v(!0)}}))),o.createElement(Fe,{errorMessage:null===a||void 0===a?void 0:a.type},o.createElement(p.Lb,{title:"Display label for Components found"}),o.createElement("div",{className:Ie.currencySelectContainer},o.createElement(p.Ld,{triggerType:"chevron",items:h,defaultSelectedItem:{label:t,value:t},className:Ie.componentsSelectComponent,inputClassName:Ie.componentsSearchInput,inputStyle:{color:"var(--app-color-gray-dark)",fontSize:"1rem"},clearControlsClassName:Ie.componentsClearControlsClassName,molclassname:Ie.componentsSelectMenuOverlayList,moliclassname:Ie.componentsSelectMenuOverlayListItem,onChange:e=>{n(e.value)}}))),o.createElement(Fe,{errorMessage:null===a||void 0===a?void 0:a.accepted_mimes},o.createElement(p.Lb,{title:"Fields to output"}),o.createElement(p.sm,{"app-variant":null!==a&&void 0!==a&&a.accepted_mimes?"error":"normal",className:Ne()(Ie.unfocusableWrapper,Ie.multiselectContainer)},o.createElement(p.gK,{labelsTag:!0,tagCloseButtonType:"circleX",tagType:"shadowed",tagEmplacement:"inlined",items:C,itemType:"checkboxes",checkboxEmplacement:"left",initialSelectedItems:0===(null===m||void 0===m?void 0:m.length)?[]:m.map(e=>({label:e,value:e})),className:Ie.uploadSelectComponent,inputClassName:Ie.uploadSearchInput,molclassname:Ie.uploadSelectMenuOverlayList,moliclassname:Ie.uploadSelectMenuOverlayListItem,onChange:e=>{null===d||void 0===d||d(null===e||void 0===e?void 0:e.map(e=>null===e||void 0===e?void 0:e.value))}}))),o.createElement(Fe,{errorMessage:null===a||void 0===a?void 0:a.type},o.createElement(p.Lb,{title:"Interface Type"}),o.createElement("div",{className:Ie.currencySelectContainer},o.createElement(p.Ld,{triggerType:"chevron",items:[{label:"Dropdown",value:"Dropdown"},{label:"Tiles",value:"Tiles"},{label:"Columns",value:"Columns"}],defaultSelectedItem:u,className:Ie.componentsSelectComponent,inputClassName:Ie.componentsSearchInput,inputStyle:{color:"var(--app-color-gray-dark)",fontSize:"1rem"},clearControlsClassName:Ie.componentsClearControlsClassName,molclassname:Ie.componentsSelectMenuOverlayList,moliclassname:Ie.componentsSelectMenuOverlayListItem,onChange:e=>{s(e.value),null!==e&&void 0!==e&&e.symbol?v(!1):v(!0)}}))))},tl=e=>{const{validationErrors:l,onTargetSelected:t,onOutputSelected:n,onGlobalSelected:i,defaultTarget:d,defaultGlobal:s,bpContext:r,onFilterList:u,defaultFilters:c,defaultOutput:m}=e,{isOnboarding:v}=(0,a.v9)(e=>e.modalsReducer),[,y]=(0,o.useState)(!1),[,h]=(0,o.useState)({}),[f,C]=(0,o.useState)(void 0==c?[]:(null===c||void 0===c?void 0:c.length)>0?c.map(e=>({label:e,value:e,component_name:"Fields"})):[]),[g]=(0,o.useState)(v?r.allBlueprintComponents.map(e=>({label:e.name,value:e.id,blueprint:e})):r.allBlueprintComponents.filter(e=>!1===e.readonly).map(e=>({label:e.name,value:e.id,blueprint:e}))),[b,S]=(0,o.useState)(void 0==d?[]:d.fields.map(e=>({label:e.value,value:e.value})));return o.createElement("div",{className:Ie.dropdownElementHost},o.createElement(Fe,{errorMessage:null===l||void 0===l?void 0:l.type},o.createElement(p.Lb,{title:"Component where to conduct lookup"}),o.createElement("div",{className:Ie.currencySelectContainer},o.createElement(p.Ld,{triggerType:"chevron",items:g,defaultSelectedItem:{label:null===d||void 0===d?void 0:d.name,value:null===d||void 0===d?void 0:d.id},className:Ie.componentsSelectComponent,inputClassName:Ie.componentsSearchInput,inputStyle:{color:"var(--app-color-gray-dark)",fontSize:"1rem",cursor:"pointer"},clearControlsClassName:Ie.componentsClearControlsClassName,molclassname:Ie.componentsSelectMenuOverlayList,moliclassname:Ie.componentsSelectMenuOverlayListItem,onChange:e=>{C(e.blueprint.fields.map(e=>({label:e.value,value:e.value}))),S(e.blueprint.fields.map(e=>({label:e.value,value:e.value}))),h(e),t(e.value),null!==e&&void 0!==e&&e.symbol?y(!1):y(!0)}}))),o.createElement(Fe,null,o.createElement(p.Lb,{title:"Fields to filter (enter in order of filter, max 3)"}),o.createElement(p.sm,{"app-variant":null!==l&&void 0!==l&&l.accepted_mimes?"error":"normal",className:Ne()(Ie.unfocusableWrapper,Ie.multiselectContainer)},o.createElement(p.gK,{labelsTag:!0,tagCloseButtonType:"circleX",tagType:"shadowed",tagEmplacement:"inlined",items:f,itemType:"checkboxes",checkboxEmplacement:"left",initialSelectedItems:0===(null===c||void 0===c?void 0:c.length)?[]:null===c||void 0===c?void 0:c.map(e=>({label:e,value:e})),className:Ie.uploadSelectComponent,inputClassName:Ie.uploadSearchInput,molclassname:Ie.uploadSelectMenuOverlayList,moliclassname:Ie.uploadSelectMenuOverlayListItem,onChange:e=>{null===u||void 0===u||u(null===e||void 0===e?void 0:e.map(e=>null===e||void 0===e?void 0:e.value))}}))),o.createElement(Fe,{errorMessage:null===l||void 0===l?void 0:l.accepted_mimes},o.createElement(p.Lb,{title:"Use a global field to filter components (Optional)"}),o.createElement("div",{className:Ie.currencySelectContainer},o.createElement(p.Ld,{triggerType:"chevron",items:b,defaultSelectedItem:{label:s,value:s},className:Ie.componentsSelectComponent,inputClassName:Ie.componentsSearchInput,inputStyle:{color:"var(--app-color-gray-dark)",fontSize:"1rem",cursor:"pointer"},clearControlsClassName:Ie.componentsClearControlsClassName,molclassname:Ie.componentsSelectMenuOverlayList,moliclassname:Ie.componentsSelectMenuOverlayListItem,onChange:e=>{i(e.value)}}))),o.createElement(Fe,{errorMessage:null===l||void 0===l?void 0:l.accepted_mimes},o.createElement(p.Lb,{title:"Field value to save as output"}),o.createElement("div",{className:Ie.currencySelectContainer},o.createElement(p.Ld,{triggerType:"chevron",items:b,defaultSelectedItem:{label:m,value:m},className:Ie.componentsSelectComponent,inputClassName:Ie.componentsSearchInput,inputStyle:{color:"var(--app-color-gray-dark)",fontSize:"1rem",cursor:"pointer"},clearControlsClassName:Ie.componentsClearControlsClassName,molclassname:Ie.componentsSelectMenuOverlayList,moliclassname:Ie.componentsSelectMenuOverlayListItem,onChange:e=>{n(e.value)}}))))},nl=e=>{var l,t;const{validationErrors:i,fieldOption:d,setFieldOption:s,onModuleSelected:r,defaultModule:u,defaultFields:c,onFieldsSelected:m,components:v}=e,{allModules:y,companyProcesses:h}=(0,a.v9)(e=>e.flowReducer),[f,C]=(0,o.useState)(h.length>0&&u&&h.find(e=>{var l,t;return e.id===(null===y||void 0===y||null===(l=y.find(e=>e.id===u))||void 0===l||null===(t=l.procedure)||void 0===t?void 0:t.id)})?[...ke.sortWith([ke.ascend(ke.prop("label"))])(ke.map(e=>{var l;return{label:e,value:e,blueprint_name:null!==(l=null===u||void 0===u?void 0:u.label)&&void 0!==l?l:"Others"}},[...new Set(ke.map(e=>e.field_name,ke.flatten(ke.pluck("selected_fields",ke.flatten(ke.pluck("component_blueprints",null===(l=h.find(e=>{var l,t;return e.id===(null===y||void 0===y||null===(l=y.find(e=>e.id===u))||void 0===l||null===(t=l.procedure)||void 0===t?void 0:t.id)}))||void 0===l?void 0:l.steps))))))])),{label:"None",value:"none"}]:[]),g=y.map(e=>({label:e.name,value:e.id,module:e}));return o.createElement("div",{className:Ie.dropdownElementHost},o.createElement(Fe,{errorMessage:null===i||void 0===i?void 0:i.type},o.createElement(Fe,{errorMessage:null===i||void 0===i?void 0:i.type},o.createElement(p.Lb,{title:"Module to process"}),o.createElement(p.sm,{"app-variant":null!==i&&void 0!==i&&i.type?"error":"normal",className:Ie.unfocusableWrapper},o.createElement(p.rk,{items:g,defaultSelected:g.find(e=>e.value===u),className:Ie.dropdownSelectComponent,tmiClassName:Ie.dropdownInput,molclassname:Ie.dropdownSelectMenuOverlayList,moliclassname:Ie.dropdownSelectMenuOverlayListItem,onChange:e=>{(e=>{var l;h.length>0&&void 0!==e&&C([...ke.sortWith([ke.ascend(ke.prop("label"))])(ke.map(e=>{var l;return{label:e,value:e,blueprint_name:null!==(l=null===u||void 0===u?void 0:u.label)&&void 0!==l?l:"Others"}},[...new Set(ke.map(e=>e.field_name,ke.flatten(ke.pluck("selected_fields",ke.flatten(ke.pluck("component_blueprints",null===(l=h.find(l=>l.id===e))||void 0===l?void 0:l.steps))))))])),{label:"None",value:"none"}])})(e.module.procedure.id),null===r||void 0===r||r(e)}}))),o.createElement(Fe,{errorMessage:null===i||void 0===i?void 0:i.accepted_mimes},o.createElement(p.Lb,{title:"Fields to transfer to module"}),o.createElement(p.sm,{"app-variant":null!==i&&void 0!==i&&i.accepted_mimes?"error":"normal",className:Ne()(Ie.unfocusableWrapper,Ie.multiselectContainer)},o.createElement(p.gK,{labelsTag:!0,tagCloseButtonType:"circleX",tagType:"shadowed",tagEmplacement:"inlined",items:f,itemType:"checkboxes",checkboxEmplacement:"left",initialSelectedItems:0===(null===c||void 0===c?void 0:c.length)?[]:null===c||void 0===c?void 0:c.map(e=>({label:e,value:e})),className:Ie.componentsSelectComponent,inputClassName:Ie.componentsSearchInput,inputStyle:{color:"var(--app-color-gray-dark)",fontSize:"1rem"},clearControlsClassName:Ie.componentsClearControlsClassName,molclassname:Ie.componentsSelectMenuOverlayList,moliclassname:Ie.componentsSelectMenuOverlayListItem,onChange:e=>{null===m||void 0===m||m(null===e||void 0===e?void 0:e.map(e=>null===e||void 0===e?void 0:e.value))}}))),o.createElement(Fe,{errorMessage:null===i||void 0===i?void 0:i.type},o.createElement(p.Lb,{title:"Key to use in list"}),o.createElement(p.sm,{"app-variant":null!==i&&void 0!==i&&i.type?"error":"normal",className:Ie.unfocusableWrapper},o.createElement(p.rk,{items:f,defaultSelected:f.find(e=>e.value===d.key),className:Ie.dropdownSelectComponent,tmiClassName:Ie.dropdownInput,molclassname:Ie.dropdownSelectMenuOverlayList,moliclassname:Ie.dropdownSelectMenuOverlayListItem,onChange:e=>{s((0,n.Z)((0,n.Z)({},d),{},{key:e.value}))}}))),o.createElement(Fe,{errorMessage:null===i||void 0===i?void 0:i.type},o.createElement(p.Lb,{title:"Add an item to this existing module transaction (Optional)"}),o.createElement(p.sm,{"app-variant":null!==i&&void 0!==i&&i.type?"error":"normal",className:Ie.unfocusableWrapper},o.createElement(p.rk,{items:[{label:"None",value:"none"},...v.filter(e=>e.module_id===(null===d||void 0===d?void 0:d.module_id)).map(e=>({label:e.title,value:e.id}))],defaultSelected:v.find(e=>e.id===d.cmp)?{label:null===(t=v.find(e=>e.id===d.cmp))||void 0===t?void 0:t.title,value:d.cmp}:{label:d.cmp,value:d.cmp},className:Ie.dropdownSelectComponent,tmiClassName:Ie.dropdownInput,molclassname:Ie.dropdownSelectMenuOverlayList,moliclassname:Ie.dropdownSelectMenuOverlayListItem,onChange:e=>{"none"===e.value?s((0,n.Z)((0,n.Z)({},d),{},{cmp:void 0})):s((0,n.Z)((0,n.Z)({},d),{},{cmp:e.value,showL:!1}))}})))),o.createElement(Fe,{errorMessage:null===i||void 0===i?void 0:i.type},o.createElement("label",{className:Ie.checkboxLabelClass},"Save transaction before calling this module",o.createElement("input",{type:"checkbox",defaultChecked:null===d||void 0===d?void 0:d.save,onChange:e=>s((0,n.Z)((0,n.Z)({},d),{},{save:e.target.checked}))})),o.createElement("label",{className:Ie.checkboxLabelClass},"Allow transactions to be viewed",o.createElement("input",{type:"checkbox",defaultChecked:null===d||void 0===d?void 0:d.viewable,onChange:e=>s((0,n.Z)((0,n.Z)({},d),{},{viewable:e.target.checked}))})),o.createElement("label",{className:Ie.checkboxLabelClass},"Show Module List",o.createElement("input",{type:"checkbox",defaultChecked:null===d||void 0===d?void 0:d.showL,onChange:e=>s((0,n.Z)((0,n.Z)({},d),{},{showL:e.target.checked}))})),o.createElement("label",{className:Ie.checkboxLabelClass},"Show Button in Detail View",o.createElement("input",{type:"checkbox",defaultChecked:null===d||void 0===d?void 0:d.detail,onChange:e=>s((0,n.Z)((0,n.Z)({},d),{},{detail:e.target.checked}))}))))},ol=e=>{var l;const{validationErrors:t,fieldOption:i,setFieldOption:d,onModuleSelected:s,defaultModule:r,companyProcesses:u,defaultFields:c,onFieldsSelected:m,components:v}=e,{allModules:y}=(0,a.v9)(e=>e.flowReducer),[h,f]=(0,o.useState)({label:r}),[C,g]=(0,o.useState)(u.length>0&&r&&u.find(e=>{var l,t;return e.id===(null===y||void 0===y||null===(l=y.find(e=>e.id===r))||void 0===l||null===(t=l.procedure)||void 0===t?void 0:t.id)})?[...ke.sortWith([ke.ascend(ke.prop("label"))])(ke.map(e=>{var l;return{label:e,value:e,blueprint_name:null!==(l=null===r||void 0===r?void 0:r.label)&&void 0!==l?l:"Others"}},[...new Set(ke.map(e=>e.field_name,ke.flatten(ke.pluck("selected_fields",ke.flatten(ke.pluck("component_blueprints",null===(l=u.find(e=>{var l,t;return e.id===(null===y||void 0===y||null===(l=y.find(e=>e.id===r))||void 0===l||null===(t=l.procedure)||void 0===t?void 0:t.id)}))||void 0===l?void 0:l.steps))))))])),{label:"None",value:"none"}]:[]),b=y.map(e=>({label:e.name,value:e.id,module:e}));return o.createElement("div",{className:Ie.dropdownElementHost},o.createElement(Fe,{errorMessage:null===t||void 0===t?void 0:t.type},o.createElement(Fe,{errorMessage:null===t||void 0===t?void 0:t.type},o.createElement(p.Lb,{title:"Module to process"}),o.createElement(p.sm,{"app-variant":null!==t&&void 0!==t&&t.type?"error":"normal",className:Ie.unfocusableWrapper},o.createElement(p.rk,{items:b,defaultSelected:b.find(e=>e.value===r),className:Ie.dropdownSelectComponent,tmiClassName:Ie.dropdownInput,molclassname:Ie.dropdownSelectMenuOverlayList,moliclassname:Ie.dropdownSelectMenuOverlayListItem,onChange:e=>{(e=>{var l;u.length>0&&void 0!==e&&g([...ke.sortWith([ke.ascend(ke.prop("label"))])(ke.map(e=>{var l;return{label:e,value:e,blueprint_name:null!==(l=null===r||void 0===r?void 0:r.label)&&void 0!==l?l:"Others"}},[...new Set(ke.map(e=>e.field_name,ke.flatten(ke.pluck("selected_fields",ke.flatten(ke.pluck("component_blueprints",null===(l=u.find(l=>l.id===e))||void 0===l?void 0:l.steps))))))])),{label:"None",value:"none"}])})(e.module.procedure.id),null===s||void 0===s||s(e),f(e)}}))),h&&o.createElement(Fe,null,o.createElement(p.Lb,{title:"Option 1: Select specific transaction"}),o.createElement("div",{style:{display:"flex",flexDirection:"row"}},o.createElement("div",{className:Ie.currencySelectContainer},o.createElement(p.Ld,{triggerType:"chevron",items:null===v||void 0===v?void 0:v.filter(e=>e.module_id===h.value).map(e=>({label:"".concat(e.title),value:e.id})),defaultSelectedItem:{label:null===i||void 0===i?void 0:i.component,value:null===i||void 0===i?void 0:i.component},className:Ie.componentsSelectComponent,inputClassName:Ie.componentsSearchInput,inputStyle:{color:"var(--app-color-gray-dark)",fontSize:"1rem"},clearControlsClassName:Ie.componentsClearControlsClassName,molclassname:Ie.componentsSelectMenuOverlayList,moliclassname:Ie.componentsSelectMenuOverlayListItem,onChange:e=>{d((0,n.Z)((0,n.Z)({},i),{},{component:e.value}))}})))),!(null!==i&&void 0!==i&&i.component)&&o.createElement(o.Fragment,null,o.createElement(Fe,{errorMessage:null===t||void 0===t?void 0:t.type},o.createElement(p.Lb,{title:"Option 2: Key to use in list"}),o.createElement(p.sm,{"app-variant":null!==t&&void 0!==t&&t.type?"error":"normal",className:Ie.unfocusableWrapper},o.createElement(p.rk,{items:C,defaultSelected:C.find(e=>e.value===i.key),className:Ie.dropdownSelectComponent,tmiClassName:Ie.dropdownInput,molclassname:Ie.dropdownSelectMenuOverlayList,moliclassname:Ie.dropdownSelectMenuOverlayListItem,onChange:e=>{d((0,n.Z)((0,n.Z)({},i),{},{key:e.value}))}}))),o.createElement(Fe,{errorMessage:null===t||void 0===t?void 0:t.type},o.createElement(p.Lb,{title:"Field to use in transaction"}),o.createElement(p.sm,{"app-variant":null!==t&&void 0!==t&&t.type?"error":"normal",className:Ie.unfocusableWrapper},o.createElement("input",{type:"text",className:Ie.renderEditableListItemInput,defaultValue:i.field,onBlur:e=>{d((0,n.Z)((0,n.Z)({},i),{},{field:e.target.value}))}})),o.createElement("p",null,"Note: If left blank, list key will be used"))),o.createElement(Fe,{errorMessage:null===t||void 0===t?void 0:t.accepted_mimes},o.createElement(p.Lb,{title:"Fields to display"}),o.createElement(p.sm,{"app-variant":null!==t&&void 0!==t&&t.accepted_mimes?"error":"normal",className:Ne()(Ie.unfocusableWrapper,Ie.multiselectContainer)},o.createElement(p.gK,{labelsTag:!0,tagCloseButtonType:"circleX",tagType:"shadowed",tagEmplacement:"inlined",items:C,itemType:"checkboxes",checkboxEmplacement:"left",initialSelectedItems:0===(null===c||void 0===c?void 0:c.length)?[]:null===c||void 0===c?void 0:c.map(e=>({label:e,value:e})),className:Ie.componentsSelectComponent,inputClassName:Ie.componentsSearchInput,inputStyle:{color:"var(--app-color-gray-dark)",fontSize:"1rem"},clearControlsClassName:Ie.componentsClearControlsClassName,molclassname:Ie.componentsSelectMenuOverlayList,moliclassname:Ie.componentsSelectMenuOverlayListItem,onChange:e=>{null===m||void 0===m||m(null===e||void 0===e?void 0:e.map(e=>null===e||void 0===e?void 0:e.value))}})))))},al=e=>{const{defaultGlobal:l,defaultRefName:t,defaultSrcName:n,onSourceLabel:i,onReferenceLabel:d,defaultValue:s,validationErrors:r,onSourceSelected:u,onTargetSelected:c,onFieldSelected:m,onChangeList:v,onTypeSelected:y,defaultCommon:h,defaultTarget:f,defaultType:C,bpContext:g,defaultList:b,defaultRefList:S,onChangeRList:E,onGlobalSelected:_,onSetShowAll:w,showAllDefault:N}=e,[L,Z]=(0,o.useState)("none"),{isOnboarding:x}=(0,a.v9)(e=>e.modalsReducer),[,I]=(0,o.useState)(!1),[M,k]=(0,o.useState)({}),[,O]=(0,o.useState)({}),[,T]=(0,o.useState)({}),[P,B]=(0,o.useState)([]),[F,D]=(0,o.useState)([]),[A,W]=(0,o.useState)([]),[V,z]=(0,o.useState)(void 0===S||0===S.length?[]:S.map(e=>({label:e,value:e,component_name:"Fields"}))),[R,j]=(0,o.useState)(void 0===b||0===b.length?[]:b.map(e=>({label:e,value:e,component_name:"Fields"}))),[U,q]=(0,o.useState)([]);(0,o.useEffect)(()=>{H()},[]);const H=(0,o.useCallback)(()=>{const e=x?g.allBlueprintComponents.map(e=>({label:e.name,value:e.id,blueprint:e})):g.allBlueprintComponents.filter(e=>0==e.readonly).map(e=>({label:e.name,value:e.id,blueprint:e}));if(q(e),s&&e){var l;const u=null===(l=e.find(e=>e.label===s.label))||void 0===l?void 0:l.blueprint.fields.map(e=>({label:e.value,value:e.id,field:e})),c=e.find(e=>e.label===s.label);if(B(c.blueprint.fields.map(e=>{var l;return{label:e.value,value:e.id,field:e,component_name:null===(l=c.blueprint)||void 0===l?void 0:l.name}})),h&&(null===u||void 0===u?void 0:u.length)>0){const l=null===e||void 0===e?void 0:e.filter(e=>{var l;return(null===e||void 0===e||null===(l=e.blueprint.fields)||void 0===l?void 0:l.filter(e=>e.value===h.label).length)>0}).filter(e=>e.label!==s.label).map(e=>({label:e.label,value:e.value,component:e.blueprint}));if(D(l),f&&(null===l||void 0===l?void 0:l.length)>0){var t,n,o,a,i,d,r;W(null!==(t=null===l||void 0===l||null===(n=l.find(e=>e.label===f.label))||void 0===n||null===(o=n.component)||void 0===o||null===(a=o.fields)||void 0===a?void 0:a.map(e=>({label:e.value,value:e.value,component_name:f.label})))&&void 0!==t?t:[]);const u=e.find(e=>e.label===s.label);j(null!==(i=null===l||void 0===l||null===(d=l.find(e=>e.label===f.label))||void 0===d||null===(r=d.component.fields)||void 0===r?void 0:r.map(e=>({label:e.value,value:e.value,component_name:f.label})).concat(null===u||void 0===u?void 0:u.blueprint.fields.map(e=>({label:e.value,value:e.value,component_name:u.label}))))&&void 0!==i?i:[])}}}setTimeout(()=>Z(""))});return""===L&&o.createElement("div",{className:Ie.dropdownElementHost,style:{display:L}},o.createElement(Fe,{errorMessage:null===r||void 0===r?void 0:r.type},o.createElement(p.Lb,{title:"Category Component"}),o.createElement("div",{className:Ie.currencySelectContainer},o.createElement(p.Ld,{triggerType:"chevron",items:U,defaultSelectedItem:s,className:Ie.componentsSelectComponent,inputClassName:Ie.componentsSearchInput,inputStyle:{color:"var(--app-color-gray-dark)",fontSize:"1rem"},clearControlsClassName:Ie.componentsClearControlsClassName,molclassname:Ie.componentsSelectMenuOverlayList,moliclassname:Ie.componentsSelectMenuOverlayListItem,onChange:e=>{const l=U.find(l=>l.value===e.value);B(l.blueprint.fields.map(e=>{var t;return{label:e.value,value:e.id,field:e,component_name:null===(t=l.blueprint)||void 0===t?void 0:t.name}})),k(e),u(e.value)}}))),o.createElement(Fe,null,o.createElement(p.Lb,{title:"Display label for Category Component"}),o.createElement(p.sm,{"app-variant":"normal",className:Ne()(Ie.unfocusableWrapper,Ie.multiselectContainer)},o.createElement(se.Cm,{tagEmplacement:"inlined",items:null!==P&&void 0!==P?P:[],groupedBy:"component_name",groupname:"component_name",triggerType:"chevron",initialSelectedValues:void 0===n||0===n.length?[]:n.map(e=>null===P||void 0===P?void 0:P.find(l=>l.label===e)),className:Ie.peoplePositionsSelect,inputClassName:Ie.peoplePositionsSelectInput,molclassname:Ie.peoplePositionsSelectMenuOverlay,moliclassname:Ie.peoplePositionsSelectMenuOverlayItem,onChange:e=>{null===i||void 0===i||i(null===e||void 0===e?void 0:e.map(e=>null===e||void 0===e?void 0:e.label))}}))),o.createElement(Fe,{errorMessage:null===r||void 0===r?void 0:r.type},o.createElement(p.Lb,{title:"Common field for lookup"}),o.createElement("div",{className:Ie.currencySelectContainer},o.createElement(p.Ld,{triggerType:"chevron",items:P,defaultSelectedItem:h,className:Ie.componentsSelectComponent,inputClassName:Ie.componentsSearchInput,inputStyle:{color:"var(--app-color-gray-dark)",fontSize:"1rem"},clearControlsClassName:Ie.componentsClearControlsClassName,molclassname:Ie.componentsSelectMenuOverlayList,moliclassname:Ie.componentsSelectMenuOverlayListItem,onChange:e=>{if(e){const l=x?U.filter(l=>{var t,n;return(null===l||void 0===l||null===(t=l.blueprint)||void 0===t||null===(n=t.fields)||void 0===n?void 0:n.filter(l=>l.value===e.label).length)>0}):U.filter(e=>!1===e.blueprint.readonly).filter(l=>{var t,n;return(null===l||void 0===l||null===(t=l.blueprint)||void 0===t||null===(n=t.fields)||void 0===n?void 0:n.filter(l=>l.value===e.label).length)>0});D(l.filter(e=>e.label!==M.label).map(e=>({label:e.label,value:e.value,component:e.blueprint}))),T(e),m(e.label),null!==e&&void 0!==e&&e.symbol?I(!1):I(!0)}}}))),o.createElement(Fe,{errorMessage:null===r||void 0===r?void 0:r.type},o.createElement(p.Lb,{title:"Component where to conduct lookup"}),o.createElement("div",{className:Ie.currencySelectContainer},o.createElement(p.Ld,{triggerType:"chevron",items:F,defaultSelectedItem:f,className:Ie.componentsSelectComponent,inputClassName:Ie.componentsSearchInput,inputStyle:{color:"var(--app-color-gray-dark)",fontSize:"1rem",cursor:"pointer"},clearControlsClassName:Ie.componentsClearControlsClassName,molclassname:Ie.componentsSelectMenuOverlayList,moliclassname:Ie.componentsSelectMenuOverlayListItem,onChange:e=>{var l;W(null!==(l=e.component.fields.map(l=>({label:l.value,value:l.value,component_name:e.label})))&&void 0!==l?l:[]),j(e.component.fields.map(l=>({label:l.value,value:l.value,component_name:e.label})).concat(M.blueprint.fields.map(e=>({label:e.value,value:e.value,component_name:M.label})))),O(e),c(e.value),null!==e&&void 0!==e&&e.symbol?I(!1):I(!0)}}))),o.createElement(Fe,null,o.createElement(p.Lb,{title:"Use a global field to filter components (Optional)"}),o.createElement("div",{className:Ie.currencySelectContainer},o.createElement(p.Ld,{triggerType:"chevron",items:R,defaultSelectedItem:{label:l,value:l},className:Ie.componentsSelectComponent,inputClassName:Ie.componentsSearchInput,inputStyle:{color:"var(--app-color-gray-dark)",fontSize:"1rem",cursor:"pointer"},clearControlsClassName:Ie.componentsClearControlsClassName,molclassname:Ie.componentsSelectMenuOverlayList,moliclassname:Ie.componentsSelectMenuOverlayListItem,onChange:e=>{_(e.value)}}))),o.createElement(Fe,null,o.createElement(p.Lb,{title:"Fields to display for Components found"}),o.createElement(p.sm,{"app-variant":"normal",className:Ne()(Ie.unfocusableWrapper,Ie.multiselectContainer)},o.createElement(se.Cm,{tagEmplacement:"inlined",items:null!==A&&void 0!==A?A:[],groupedBy:"component_name",groupname:"component_name",triggerType:"chevron",initialSelectedValues:void 0===S||0===S.length?[]:S.map(e=>({label:e,value:e,component_name:"Fields"})),className:Ie.peoplePositionsSelect,inputClassName:Ie.peoplePositionsSelectInput,molclassname:Ie.peoplePositionsSelectMenuOverlay,moliclassname:Ie.peoplePositionsSelectMenuOverlayItem,onChange:e=>{null===E||void 0===E||E(null===e||void 0===e?void 0:e.map(e=>null===e||void 0===e?void 0:e.value))}}))),o.createElement(Fe,{errorMessage:null===r||void 0===r?void 0:r.accepted_mimes},o.createElement(p.Lb,{title:"Fields to output"}),o.createElement(p.sm,{"app-variant":null!==r&&void 0!==r&&r.accepted_mimes?"error":"normal",className:Ne()(Ie.unfocusableWrapper,Ie.multiselectContainer)},o.createElement(se.Cm,{tagEmplacement:"inlined",items:R,groupedBy:"component_name",groupname:"component_name",triggerType:"chevron",initialSelectedValues:null===R||void 0===R?void 0:R.filter(e=>-1!==(null===b||void 0===b?void 0:b.indexOf(e.label))),className:Ie.peoplePositionsSelect,inputClassName:Ie.peoplePositionsSelectInput,molclassname:Ie.peoplePositionsSelectMenuOverlay,moliclassname:Ie.peoplePositionsSelectMenuOverlayItem,onChange:e=>{null===v||void 0===v||v(null===e||void 0===e?void 0:e.map(e=>null===e||void 0===e?void 0:e.value))}}))),o.createElement(Fe,{errorMessage:null===r||void 0===r?void 0:r.type},o.createElement(p.Lb,{title:"Interface Type"}),o.createElement("div",{className:Ie.currencySelectContainer},o.createElement(p.Ld,{triggerType:"chevron",items:[{label:"Dropdown",value:"Dropdown"},{label:"Tiles",value:"Tiles"}],defaultSelectedItem:C,className:Ie.componentsSelectComponent,inputClassName:Ie.componentsSearchInput,inputStyle:{color:"var(--app-color-gray-dark)",fontSize:"1rem"},clearControlsClassName:Ie.componentsClearControlsClassName,molclassname:Ie.componentsSelectMenuOverlayList,moliclassname:Ie.componentsSelectMenuOverlayListItem,onChange:e=>{y(e.value),null!==e&&void 0!==e&&e.symbol?I(!1):I(!0)}}))),o.createElement(p.pd,{id:"Show all choices immediately",title:"Show all choices immediately?",ungrouped:!0,withAckButton:!1,style:{margin:"10px 0px",width:"auto"},value:N,toggleSelected:e=>{w(e)}}))},il=e=>{const{defaultInputComponent1:l,defaultComponent1:t,defaultComponent2:n,defaultComponent3:i,defaultCommon12:d,defaultCommon23:s,defaultOutputs:r=[],onComponent1Selected:u,onComponent1InputSelected:c,onComponent2Selected:m,onComponent3Selected:v,onCommon12Selected:y,onCommon23Selected:h,onOutputsSelected:f,validationErrors:C,bpContext:g}=e,{isOnboarding:b}=(0,a.v9)(e=>e.modalsReducer),[S]=(0,o.useState)(b?g.allBlueprintComponents.map(e=>({label:e.name,value:e.id,blueprint:e})):g.allBlueprintComponents.filter(e=>!1===e.readonly).map(e=>({label:e.name,value:e.id,blueprint:e}))),[,E]=(0,o.useState)(!1),[_,w]=(0,o.useState)({}),[N,L]=(0,o.useState)(t?S.find(e=>e.label===t.label).blueprint.fields.map(e=>({label:e.value,value:e.id,field:e,component_name:t.label})):[]),[Z,x]=(0,o.useState)(n?S.find(e=>e.label===n.label).blueprint.fields.map(e=>({label:e.value,value:e.id,field:e,component_name:n.label})):[]),[I,M]=(0,o.useState)([]),[k,O]=(0,o.useState)([]);return o.createElement("div",{className:Ie.dropdownElementHost},o.createElement(Fe,{errorMessage:null===C||void 0===C?void 0:C.type},o.createElement(p.Lb,{title:"Input Component (A)"}),o.createElement("div",{className:Ie.currencySelectContainer},o.createElement(p.Ld,{triggerType:"chevron",items:S,defaultSelectedItem:t,className:Ie.componentsSelectComponent,inputClassName:Ie.componentsSearchInput,inputStyle:{color:"var(--app-color-gray-dark)",fontSize:"1rem"},clearControlsClassName:Ie.componentsClearControlsClassName,molclassname:Ie.componentsSelectMenuOverlayList,moliclassname:Ie.componentsSelectMenuOverlayListItem,onChange:e=>{const l=S.find(l=>l.value===e.value);L(l.blueprint.fields.map(e=>({label:e.value,value:e.id,field:e}))),w(e),u(e.value)}}))),o.createElement(Fe,{errorMessage:null===C||void 0===C?void 0:C.type},o.createElement(p.Lb,{title:"Input field to use with component (A)"}),o.createElement("div",{className:Ie.currencySelectContainer},o.createElement(p.Ld,{triggerType:"chevron",items:N,defaultSelectedItem:l,className:Ie.componentsSelectComponent,inputClassName:Ie.componentsSearchInput,inputStyle:{color:"var(--app-color-gray-dark)",fontSize:"1rem"},clearControlsClassName:Ie.componentsClearControlsClassName,molclassname:Ie.componentsSelectMenuOverlayList,moliclassname:Ie.componentsSelectMenuOverlayListItem,onChange:e=>{c(e.label),null!==e&&void 0!==e&&e.symbol?E(!1):E(!0)}}))),o.createElement(Fe,{errorMessage:null===C||void 0===C?void 0:C.type},o.createElement(p.Lb,{title:"Common field for first lookup, A + B"}),o.createElement("div",{className:Ie.currencySelectContainer},o.createElement(p.Ld,{triggerType:"chevron",items:N,defaultSelectedItem:d,className:Ie.componentsSelectComponent,inputClassName:Ie.componentsSearchInput,inputStyle:{color:"var(--app-color-gray-dark)",fontSize:"1rem"},clearControlsClassName:Ie.componentsClearControlsClassName,molclassname:Ie.componentsSelectMenuOverlayList,moliclassname:Ie.componentsSelectMenuOverlayListItem,onChange:e=>{const l=S.filter(l=>l.blueprint.fields.filter(l=>l.value===e.label).length>0);M(l.filter(e=>e.label!==_.label).map(e=>({label:e.label,value:e.value,component:e.blueprint}))),y(e.label),null!==e&&void 0!==e&&e.symbol?E(!1):E(!0)}}))),o.createElement(Fe,{errorMessage:null===C||void 0===C?void 0:C.type},o.createElement(p.Lb,{title:"Target component (B) where value will come from"}),o.createElement("div",{className:Ie.currencySelectContainer},o.createElement(p.Ld,{triggerType:"chevron",items:I,defaultSelectedItem:n,className:Ie.componentsSelectComponent,inputClassName:Ie.componentsSearchInput,inputStyle:{color:"var(--app-color-gray-dark)",fontSize:"1rem"},clearControlsClassName:Ie.componentsClearControlsClassName,molclassname:Ie.componentsSelectMenuOverlayList,moliclassname:Ie.componentsSelectMenuOverlayListItem,onChange:e=>{const l=S.find(l=>l.value===e.value);x(l.blueprint.fields.map(e=>({label:e.value,value:e.id,field:e,component_name:l.blueprint.name}))),m(e.value),null!==e&&void 0!==e&&e.symbol?E(!1):E(!0)}}))),o.createElement(Fe,{errorMessage:null===C||void 0===C?void 0:C.type},o.createElement(p.Lb,{title:"Common field for second lookup, B + C"}),o.createElement("div",{className:Ie.currencySelectContainer},o.createElement(p.Ld,{triggerType:"chevron",items:Z,defaultSelectedItem:s,className:Ie.componentsSelectComponent,inputClassName:Ie.componentsSearchInput,inputStyle:{color:"var(--app-color-gray-dark)",fontSize:"1rem"},clearControlsClassName:Ie.componentsClearControlsClassName,molclassname:Ie.componentsSelectMenuOverlayList,moliclassname:Ie.componentsSelectMenuOverlayListItem,onChange:e=>{const l=S.filter(l=>l.blueprint.fields.filter(l=>l.value===e.label).length>0);O(l.filter(e=>e.label!==_.label).map(e=>({label:e.label,value:e.value,component:e.blueprint}))),h(e.label),null!==e&&void 0!==e&&e.symbol?E(!1):E(!0)}}))),o.createElement(Fe,{errorMessage:null===C||void 0===C?void 0:C.type},o.createElement(p.Lb,{title:"Component (C) where to conduct second lookup"}),o.createElement("div",{className:Ie.currencySelectContainer},o.createElement(p.Ld,{triggerType:"chevron",items:k,defaultSelectedItem:i,className:Ie.componentsSelectComponent,inputClassName:Ie.componentsSearchInput,inputStyle:{color:"var(--app-color-gray-dark)",fontSize:"1rem"},clearControlsClassName:Ie.componentsClearControlsClassName,molclassname:Ie.componentsSelectMenuOverlayList,moliclassname:Ie.componentsSelectMenuOverlayListItem,onChange:e=>{v(e.value),null!==e&&void 0!==e&&e.symbol?E(!1):E(!0)}}))),o.createElement(Fe,{errorMessage:null===C||void 0===C?void 0:C.accepted_mimes},o.createElement(p.Lb,{title:"Fields to display from target component (B)"}),o.createElement(p.sm,{"app-variant":null!==C&&void 0!==C&&C.accepted_mimes?"error":"normal",className:Ne()(Ie.unfocusableWrapper,Ie.multiselectContainer)},o.createElement(se.Cm,{tagEmplacement:"inlined",items:Z,groupedBy:"component_name",groupname:"component_name",triggerType:"chevron",initialSelectedValues:void 0===r||0===r.length?[]:r.map(e=>{var l;return{label:e,value:null===(l=Z.find(l=>l.label===e))||void 0===l?void 0:l.value,component_name:n.label}}),className:Ie.peoplePositionsSelect,inputClassName:Ie.peoplePositionsSelectInput,molclassname:Ie.peoplePositionsSelectMenuOverlay,moliclassname:Ie.peoplePositionsSelectMenuOverlayItem,onChange:e=>{null===f||void 0===f||f(null===e||void 0===e?void 0:e.map(e=>null===e||void 0===e?void 0:e.label))}}))))},dl=e=>{var l;const{defaultMaxSize:t,onMaxFileSizeChanged:n,defaultList:a,onListSelected:i,validationErrors:d}=e,[s,r]=(0,o.useState)(null===(l=null!==t&&void 0!==t?t:0)||void 0===l?void 0:l.toString());return o.createElement("div",{className:Ie.dropdownElementHost},o.createElement(Fe,{errorMessage:null===d||void 0===d?void 0:d.max_file_size},o.createElement(p.Lb,{title:"Maximum file size"}),o.createElement(p.sm,{"app-variant":null!==d&&void 0!==d&&d.max_file_size?"error":"normal",className:Ie.unfocusableWrapper},o.createElement("input",{type:"text",placeholder:"Insert max size in MB",className:Ie.maxFileSizeInput,value:s,name:"file max size",onChange:e=>{const l=e.target.value;Number(+l)?(r(l),null===n||void 0===n||n(l)):""===l&&(r(""),null===n||void 0===n||n("0"))}}),o.createElement("pre",{className:Ie.uploadFileSizeMeasureUnit},"MB"))),o.createElement(Fe,{errorMessage:null===d||void 0===d?void 0:d.accepted_mimes},o.createElement(p.Lb,{title:"Type of Files"}),o.createElement(p.sm,{"app-variant":null!==d&&void 0!==d&&d.accepted_mimes?"error":"normal",className:Ne()(Ie.unfocusableWrapper,Ie.multiselectContainer)},o.createElement(p.gK,{labelsTag:!0,tagCloseButtonType:"circleX",tagType:"shadowed",tagEmplacement:"top",items:m.cH,itemType:"checkboxes",checkboxEmplacement:"left",initialSelectedItems:null===m.cH||void 0===m.cH?void 0:m.cH.filter(e=>{var l;return(null===a||void 0===a?void 0:a.indexOf(null===e||void 0===e||null===(l=e.value)||void 0===l?void 0:l.replaceAll(".","")))>-1}),className:Ie.uploadSelectComponent,inputClassName:Ie.uploadSearchInput,molclassname:Ie.uploadSelectMenuOverlayList,moliclassname:Ie.uploadSelectMenuOverlayListItem,onChange:e=>{null===i||void 0===i||i(e.map(e=>{var l;return null===e||void 0===e||null===(l=e.value)||void 0===l?void 0:l.replaceAll(".","")}).join(","))}}))))},sl=e=>{const{item:l,onItemChanged:t,onItemRemoved:n,isOverflow:a}=e,[i,d]=(0,o.useState)(l),[s,r]=(0,o.useState)(!1);return o.createElement(p.sm,{className:Ie.renderEditableListContainer,"app-variant":a?"overflow":"",onClickOutside:()=>{r(!1),d(l)}},o.createElement("input",{onFocus:()=>{r(!0)},type:"text",className:Ie.renderEditableListItemInput,value:i,name:"editItem",onChange:e=>{r(!0),d(e.target.value)}}),s&&o.createElement("button",{type:"button",onClick:e=>{null===t||void 0===t||t(i)},className:Ie.renderEditableListItemDeleteButton},o.createElement(xe.nQ,null)),s&&o.createElement("button",{type:"button",onClick:e=>{null===n||void 0===n||n(l)},className:Ie.renderEditableListItemDeleteButton},o.createElement(xe.EU,null)))},rl=e=>{var l,t,n,i,d,s,r,u;const{defaultFilters:c,defaultValue:m,nameValues:v,defaultList:y,onListSelected:h,onComponentSelected:f,onGlobalSelected:C,blueprints:g,onTypeSelected:b,defaultType:S,defaultOutputField:E,defaultGlobal:_,onNamesSelected:w,onOutputFieldSelected:N,onFilterList:L,validationErrors:Z,allModules:x,setFieldOption:I,fieldOption:M}=e,{isOnboarding:k}=(0,a.v9)(e=>e.modalsReducer),[O,T]=(0,o.useState)(void 0),[P,B]=(0,o.useState)(!1),[F]=(0,o.useState)(k?null!==(l=null===g||void 0===g?void 0:g.map(e=>({label:e.name,value:e.id,blueprint:e})))&&void 0!==l?l:[]:g.filter(e=>!1===e.readonly).length>0?g.filter(e=>!1===e.readonly).map(e=>({label:e.name,value:e.id,blueprint:e})):null!==(t=null===g||void 0===g?void 0:g.map(e=>({label:e.name,value:e.id,blueprint:e})))&&void 0!==t?t:[]),[D,V]=(0,o.useState)(void 0==c?[]:(null===c||void 0===c?void 0:c.length)>0?c.map(e=>({label:e,value:e,component_name:"Fields"})):[]),[z,R]=(0,o.useState)(null!==m&&void 0!==m&&m.label?0==g.length?[]:k?null===(n=g.find(e=>e.name===m.label))||void 0===n||null===(i=n.fields)||void 0===i?void 0:i.map(e=>({label:e.value,value:e.value})):null===(d=g.filter(e=>!1===e.readonly).find(e=>e.name===m.label))||void 0===d||null===(s=d.fields)||void 0===s?void 0:s.map(e=>({label:e.value,value:e.value})):[]);return o.createElement(o.Fragment,null,o.createElement(Fe,null,o.createElement(p.Lb,{title:"Interface Type"}),o.createElement("div",{className:Ie.currencySelectContainer},o.createElement(p.Ld,{triggerType:"chevron",items:[{label:"Dropdown",value:"Dropdown"},{label:"Tiles",value:"Tiles"}],defaultSelectedItem:S,className:Ie.componentsSelectComponent,inputClassName:Ie.componentsSearchInput,inputStyle:{color:"var(--app-color-gray-dark)",fontSize:"1rem",cursor:"pointer"},clearControlsClassName:Ie.componentsClearControlsClassName,molclassname:Ie.componentsSelectMenuOverlayList,moliclassname:Ie.componentsSelectMenuOverlayListItem,onChange:e=>{b(e.value),null!==e&&void 0!==e&&e.symbol?B(!1):B(!0)}}))),o.createElement(Fe,null,o.createElement(p.Lb,{title:"Component where to conduct lookup"}),o.createElement("div",{style:{display:"flex",flexDirection:"row"}},o.createElement("div",{className:Ie.currencySelectContainer},o.createElement(p.Ld,{triggerType:"chevron",items:F,defaultSelectedItem:m,className:Ie.componentsSelectComponent,inputClassName:Ie.componentsSearchInput,inputStyle:{color:"var(--app-color-gray-dark)",fontSize:"1rem",cursor:"pointer"},clearControlsClassName:Ie.componentsClearControlsClassName,molclassname:Ie.componentsSelectMenuOverlayList,moliclassname:Ie.componentsSelectMenuOverlayListItem,onChange:e=>{T(e),f(e),null!==e&&void 0!==e&&e.symbol?B(!1):B(!0),R(e.blueprint.fields.map(e=>({label:e.value,value:e.value}))),V(e.blueprint.fields.map(e=>({label:e.value,value:e.value})))}})))),o.createElement(Fe,null,o.createElement(p.Lb,{title:"Values to display"}),o.createElement("div",{className:Ie.currencySelectContainer},o.createElement(p.gK,{triggerType:"chevron",labelsTag:!0,tagCloseButtonType:"circleX",tagType:"shadowed",tagEmplacement:"inlined",items:null!==z&&void 0!==z?z:[],itemType:"checkboxes",checkboxEmplacement:"left",inputStyle:{cursor:"pointer"},initialSelectedItems:null===(r=null!==z&&void 0!==z?z:[])||void 0===r?void 0:r.filter(e=>(null===v||void 0===v?void 0:v.indexOf(e.label))>-1),className:Ie.uploadSelectComponent,inputClassName:Ie.uploadSearchInput,molclassname:Ie.uploadSelectMenuOverlayList,moliclassname:Ie.uploadSelectMenuOverlayListItem,onChange:e=>{null===w||void 0===w||w(null===e||void 0===e?void 0:e.map(e=>null===e||void 0===e?void 0:e.value))}}))),o.createElement(Fe,null,o.createElement(p.Lb,{title:"Fields to filter, enter in order of filter, max 3 (Optional)"}),o.createElement(p.sm,{"app-variant":"normal",className:Ne()(Ie.unfocusableWrapper,Ie.multiselectContainer)},o.createElement(p.gK,{labelsTag:!0,tagCloseButtonType:"circleX",tagType:"shadowed",tagEmplacement:"inlined",items:null!==D&&void 0!==D?D:[],itemType:"checkboxes",checkboxEmplacement:"left",initialSelectedItems:0===(null===c||void 0===c?void 0:c.length)?[]:null===c||void 0===c?void 0:c.map(e=>({label:e,value:e})),className:Ie.uploadSelectComponent,inputClassName:Ie.uploadSearchInput,inputStyle:{cursor:"pointer"},molclassname:Ie.uploadSelectMenuOverlayList,moliclassname:Ie.uploadSelectMenuOverlayListItem,onChange:e=>{null===L||void 0===L||L(null===e||void 0===e?void 0:e.map(e=>null===e||void 0===e?void 0:e.value))}},o.createElement(A.G,{className:"fa-icon",icon:W.ptq,style:{marginRight:"20px",color:"gray"}})))),o.createElement(Fe,null,o.createElement(p.Lb,{title:"Use a global field to filter components (Optional)"}),o.createElement("div",{style:{display:"flex",flexDirection:"row"}},o.createElement("div",{className:Ie.currencySelectContainer},o.createElement(p.Ld,{triggerType:"chevron",items:z,defaultSelectedItem:{label:_,value:_},className:Ie.componentsSelectComponent,inputStyle:{color:"var(--app-color-gray-dark)",fontSize:"1rem",cursor:"pointer"},inputClassName:Ie.componentsSearchInput,clearControlsClassName:Ie.componentsClearControlsClassName,molclassname:Ie.componentsSelectMenuOverlayList,moliclassname:Ie.componentsSelectMenuOverlayListItem,onChange:e=>{C(e.value)}})))),o.createElement(Fe,null,o.createElement(p.Lb,{title:"Field value to save"}),o.createElement("div",{style:{display:"flex",flexDirection:"row"}},o.createElement("div",{className:Ie.currencySelectContainer},o.createElement(p.Ld,{triggerType:"chevron",items:z,defaultSelectedItem:E,className:Ie.componentsSelectComponent,inputStyle:{color:"var(--app-color-gray-dark)",fontSize:"1rem",cursor:"pointer"},inputClassName:Ie.componentsSearchInput,clearControlsClassName:Ie.componentsClearControlsClassName,molclassname:Ie.componentsSelectMenuOverlayList,moliclassname:Ie.componentsSelectMenuOverlayListItem,onChange:e=>{N(e.value)}})))),o.createElement(Fe,null,o.createElement(p.Lb,{title:"Field values to share"}),o.createElement("div",{className:Ie.currencySelectContainer},o.createElement(p.gK,{triggerType:"chevron",labelsTag:!0,tagCloseButtonType:"circleX",tagType:"shadowed",tagEmplacement:"inlined",items:null!==z&&void 0!==z?z:[],itemType:"checkboxes",checkboxEmplacement:"left",inputStyle:{cursor:"pointer"},initialSelectedItems:null===(u=null!==z&&void 0!==z?z:[])||void 0===u?void 0:u.filter(e=>(null===y||void 0===y?void 0:y.indexOf(e.label))>-1),className:Ie.uploadSelectComponent,inputClassName:Ie.uploadSearchInput,molclassname:Ie.uploadSelectMenuOverlayList,moliclassname:Ie.uploadSelectMenuOverlayListItem,onChange:e=>{null===h||void 0===h||h(null===e||void 0===e?void 0:e.map(e=>null===e||void 0===e?void 0:e.value))}}))))},ul=e=>{var l,t,n;const{defaultValue:a,onModuleSelected:i,field_type:d,onOutputSelected:s,onFieldValueSelected:r,defaultOutput:u,defaultModule:c,components:m=[],allModules:v,fieldOption:y,setFieldOption:h}=e,[f,C]=(0,o.useState)(void 0),[g,b]=(0,o.useState)(c?{value:""}:void 0),[S]=(0,o.useState)(v.map(e=>({label:e.name,value:e.id,module:e})));return o.createElement(o.Fragment,null,o.createElement(Fe,null,o.createElement(p.Lb,{title:"Select Module:"}),o.createElement("div",{style:{display:"flex",flexDirection:"row"}},o.createElement("div",{className:Ie.currencySelectContainer},o.createElement(p.Ld,{triggerType:"chevron",items:S,defaultSelectedItem:c,className:Ie.componentsSelectComponent,inputClassName:Ie.componentsSearchInput,inputStyle:{color:"var(--app-color-gray-dark)",fontSize:"1rem"},clearControlsClassName:Ie.componentsClearControlsClassName,molclassname:Ie.componentsSelectMenuOverlayList,moliclassname:Ie.componentsSelectMenuOverlayListItem,onChange:e=>{C(e),i(e)}})))),f&&o.createElement(Fe,null,o.createElement(p.Lb,{title:"Select Output:"}),o.createElement("div",{style:{display:"flex",flexDirection:"row"}},o.createElement("div",{className:Ie.currencySelectContainer},o.createElement(p.Ld,{triggerType:"chevron",items:null===m||void 0===m?void 0:m.filter(e=>e.module_id===f.value).map(e=>({label:"".concat(e.title),value:e.id})),defaultSelectedItem:u,className:Ie.componentsSelectComponent,inputClassName:Ie.componentsSearchInput,inputStyle:{color:"var(--app-color-gray-dark)",fontSize:"1rem"},clearControlsClassName:Ie.componentsClearControlsClassName,molclassname:Ie.componentsSelectMenuOverlayList,moliclassname:Ie.componentsSelectMenuOverlayListItem,onChange:e=>{b(e),s(e)}})))),g&&o.createElement(Fe,null,o.createElement(p.Lb,{title:"Select Field Value:"}),o.createElement("div",{style:{display:"flex",flexDirection:"row"}},o.createElement("div",{className:Ie.currencySelectContainer},o.createElement(p.Ld,{triggerType:"chevron",items:null!==(l=null===m||void 0===m||null===(t=m.find(e=>e.id===g.value))||void 0===t||null===(n=t.component_fields)||void 0===n?void 0:n.map(e=>({label:"".concat(e.field_name," = ").concat(e.value),value:e.value})))&&void 0!==l?l:[],defaultSelectedItem:a,className:Ie.componentsSelectComponent,inputClassName:Ie.componentsSearchInput,inputStyle:{color:"var(--app-color-gray-dark)",fontSize:"1rem"},clearControlsClassName:Ie.componentsClearControlsClassName,molclassname:Ie.componentsSelectMenuOverlayList,moliclassname:Ie.componentsSelectMenuOverlayListItem,onChange:e=>{r(e)}})))))},cl=e=>{const{defaultCalendar:l,defaultSlider:t,defaultAssign:i,defaultEmail:d,defaultType:s,defaultPositions:r,onChangeSlider:u,onChangeList:c,onChangeType:v,onChangeEmail:y,onChangeAssign:h,validationErrors:f,allModules:C,onModuleSelected:g,defaultModule:b,options:S,onOptionsSelected:E,fieldOption:_,onCalendar:w}=e,[N,L]=(0,o.useState)("single"==s),[Z,x]=(0,o.useState)(!1),[I,M]=(0,o.useState)(null===S||void 0===S?void 0:S.componentF),[k,O]=(0,o.useState)(null===S||void 0===S?void 0:S.componentO),[T,P]=(0,o.useState)(null===S||void 0===S?void 0:S.componentUO),[B,F]=(0,o.useState)(r),[A,W]=(0,o.useState)(null===S||void 0===S?void 0:S.module_id),V=C.map(e=>({label:e.name,value:e.id,module:e})),{companyPositionsArray:z,companyDepartments:R}=(0,a.v9)(e=>e.flowReducer),[j,U]=(0,o.useState)(ke.sortWith([ke.ascend(ke.prop("department_name"))])(null===z||void 0===z?void 0:z.map(e=>{var l;return{label:e.label,value:e.value,department_name:e.department,department_id:null===(l=R.find(l=>l.label==e.department))||void 0===l?void 0:l.value}})));return(0,o.useEffect)(()=>{const e=(0,D.OW)().subscribe({next:e=>{(0,D.xt)().subscribe({next:l=>{const t=null===e||void 0===e?void 0:e.map(e=>{var t;return{label:e.name,value:e.id,department_name:null===(t=l.find(l=>l.id==e.department_id))||void 0===t?void 0:t.name,department_id:e.department_id}});U(ke.sortWith([ke.ascend(ke.prop("department_name"))])(t)),x(!1)},error:e=>{x(!1)}})},error:e=>{x(!1)}});return()=>{(0,m.zK)(e)}},[]),o.createElement("div",{className:Ie.peopleContainer},o.createElement(Fe,{errorMessage:null===f||void 0===f?void 0:f.type},o.createElement(p.Lb,{title:"How many People can be placed in this position?"}),o.createElement(p.sm,{"app-variant":null!==f&&void 0!==f&&f.type?"error":"normal","app-container-variant":"noBorder",className:Ne()(Ie.unfocusableWrapper)},o.createElement(p.nd,{selected:N,setSelected:e=>{L(e),null===v||void 0===v||v(e?"single":"multiple")},first:"One Person",second:"Multiple People",extraClassName:Ie.renderBooleansOptions}))),(void 0!==I||0!==(null===I||void 0===I?void 0:I.length))&&o.createElement(Fe,{errorMessage:null===f||void 0===f?void 0:f.position_id},o.createElement(p.Lb,{title:"Option 1: Display users from these positions:"}),o.createElement(p.sm,{"app-variant":null!==f&&void 0!==f&&f.position_id?"error":"normal",className:Ne()(Ie.unfocusableWrapper,Ie.peoplePositionSelectContainer)},Z?o.createElement(p.$j,{size:30,type:"ThreeDots"}):(null===j||void 0===j?void 0:j.length)>0?o.createElement(p.gK,{triggerType:"chevron",labelsTag:!0,tagCloseButtonType:"circleX",tagType:"shadowed",tagEmplacement:"inlined",items:j,itemType:"checkboxes",checkboxEmplacement:"left",initialSelectedItems:null===j||void 0===j?void 0:j.filter(e=>(null===r||void 0===r?void 0:r.indexOf(e.value))>-1),className:Ie.uploadSelectComponent,inputClassName:Ie.uploadSearchInput,molclassname:Ie.uploadSelectMenuOverlayList,moliclassname:Ie.uploadSelectMenuOverlayListItem,onChange:e=>{F(null===e||void 0===e?void 0:e.map(e=>null===e||void 0===e?void 0:e.value)),null===c||void 0===c||c(null===e||void 0===e?void 0:e.map(e=>null===e||void 0===e?void 0:e.value))}}):null)),0==B.length&&o.createElement(Fe,{errorMessage:null===f||void 0===f?void 0:f.type},o.createElement(p.Lb,{title:"Option 2: Display users based from a lookup in:"}),o.createElement(p.sm,{"app-variant":null!==f&&void 0!==f&&f.type?"error":"normal",className:Ie.unfocusableWrapper},o.createElement(p.rk,{items:V,defaultSelected:b,className:Ie.dropdownSelectComponent,tmiClassName:Ie.dropdownInput,molclassname:Ie.dropdownSelectMenuOverlayList,moliclassname:Ie.dropdownSelectMenuOverlayListItem,onChange:e=>{W(e.module.id),null===g||void 0===g||g(e)}}))),0==B.length&&o.createElement(Fe,null,o.createElement(p.Lb,{title:"Field set in the steps where to lookup"}),o.createElement(p.sm,{className:Ie.unfocusableWrapper},o.createElement("input",{type:"text",className:Ie.dropDownNewListItemInput,value:I,name:"matched to field",onChange:e=>{M(e.target.value),E((0,n.Z)((0,n.Z)({},_),{},{componentF:e.target.value,module_id:A}))}}))),0==B.length&&o.createElement(Fe,null,o.createElement(p.Lb,{title:"Field from lookup where to get positions and users"}),o.createElement(p.sm,{className:Ie.unfocusableWrapper},o.createElement("input",{type:"text",className:Ie.dropDownNewListItemInput,value:k,name:"matched to field",onChange:e=>{O(e.target.value),E((0,n.Z)((0,n.Z)({},_),{},{componentO:e.target.value,module_id:A}))}}))),0==B.length&&o.createElement(Fe,null,o.createElement(p.Lb,{title:"Field from lookup where to get users (direct user list)"}),o.createElement(p.sm,{className:Ie.unfocusableWrapper},o.createElement("input",{type:"text",className:Ie.dropDownNewListItemInput,value:T,name:"matched to field",onChange:e=>{P(e.target.value),E((0,n.Z)((0,n.Z)({},_),{},{componentUO:e.target.value}))}}))),!l&&o.createElement("label",{className:Ie.checkboxLabelClass},"Display as slider?",o.createElement("input",{type:"checkbox",defaultChecked:!!t,onChange:e=>{1==e.target.checked?E((0,n.Z)((0,n.Z)({},_),{},{slider:!0,calendar:!1})):0==e.target.checked&&E((0,n.Z)((0,n.Z)({},_),{},{slider:!1,info:!1,other:!1}))}})),o.createElement("label",{className:Ie.checkboxLabelClass},"Trigger an email to selected user during save?",o.createElement("input",{type:"checkbox",defaultChecked:!!d,onChange:e=>{y(e.target.checked)}})),!l&&o.createElement("label",{className:Ie.checkboxLabelClass},"Assign the user selected to transaction?",o.createElement("input",{type:"checkbox",defaultChecked:!!i,onChange:e=>{E((0,n.Z)((0,n.Z)({},_),{},{assign:e.target.checked}))}})),!l&&o.createElement("label",{className:Ie.checkboxLabelClass},"Share this transaction to the user selected?",o.createElement("input",{type:"checkbox",defaultChecked:!(null===_||void 0===_||!_.share),onChange:e=>{E((0,n.Z)((0,n.Z)({},_),{},{share:e.target.checked}))}})),!t&&o.createElement("label",{className:Ie.checkboxLabelClass},"Display as calendar?",o.createElement("input",{type:"checkbox",defaultChecked:!!l,onChange:e=>{w(e.target.checked)}})))},ml=e=>{var l,t,i,d,s,r;const{defaultCalendar:u,defaultSlider:c,defaultAssign:v,defaultEmail:y,defaultType:h,defaultPositions:f,onChangeSlider:C,onChangeList:g,onChangeType:b,onChangeEmail:S,onChangeAssign:E,validationErrors:_,allModules:w,onModuleSelected:N,defaultModule:L,options:Z,onOptionsSelected:x,fieldOption:I,onCalendar:M,setFieldOption:k}=e,[O,T]=(0,o.useState)("single"==h),[P,B]=(0,o.useState)(!1),[F,A]=(0,o.useState)(null===Z||void 0===Z?void 0:Z.componentF),[W,V]=(0,o.useState)(null===Z||void 0===Z?void 0:Z.componentO),[z,R]=(0,o.useState)(null===Z||void 0===Z?void 0:Z.componentUO),[j,U]=(0,o.useState)(f),[q,H]=(0,o.useState)(null===Z||void 0===Z?void 0:Z.module_id),{companyPositionsArray:K,companyDepartments:X}=(w.map(e=>({label:e.name,value:e.id,module:e})),(0,a.v9)(e=>e.flowReducer)),[G,Y]=(0,o.useState)(ke.sortWith([ke.ascend(ke.prop("department_name"))])(null===K||void 0===K?void 0:K.map(e=>{var l;return{label:e.label,value:e.value,department_name:e.department,department_id:null===(l=X.find(l=>l.label==e.department))||void 0===l?void 0:l.value}})));return(0,o.useEffect)(()=>{const e=(0,D.OW)().subscribe({next:e=>{(0,D.xt)().subscribe({next:l=>{const t=null===e||void 0===e?void 0:e.map(e=>{var t;return{label:e.name,value:e.id,department_name:null===(t=l.find(l=>l.id==e.department_id))||void 0===t?void 0:t.name,department_id:e.department_id}});Y(ke.sortWith([ke.ascend(ke.prop("department_name"))])(t)),B(!1)},error:e=>{B(!1)}})},error:e=>{B(!1)}});return()=>{(0,m.zK)(e)}},[]),o.createElement("div",{className:Ie.peopleContainer},o.createElement(Fe,{errorMessage:null===_||void 0===_?void 0:_.type},o.createElement(p.Lb,{title:"How many Positions can be selected?"}),o.createElement(p.sm,{"app-variant":null!==_&&void 0!==_&&_.type?"error":"normal","app-container-variant":"noBorder",className:Ne()(Ie.unfocusableWrapper)},o.createElement(p.nd,{selected:O,setSelected:e=>{T(e),null===b||void 0===b||b(e?"single":"multiple")},first:"Single",second:"Multiple",extraClassName:Ie.renderBooleansOptions}))),(void 0!==F||0!==(null===F||void 0===F?void 0:F.length))&&o.createElement(Fe,{errorMessage:null===_||void 0===_?void 0:_.position_id},o.createElement(p.Lb,{title:"Display these positions:"}),o.createElement(p.sm,{"app-variant":null!==_&&void 0!==_&&_.position_id?"error":"normal",className:Ne()(Ie.unfocusableWrapper,Ie.peoplePositionSelectContainer)},P?o.createElement(p.$j,{size:30,type:"ThreeDots"}):(null===G||void 0===G?void 0:G.length)>0?o.createElement(p.gK,{triggerType:"chevron",labelsTag:!0,tagCloseButtonType:"circleX",tagType:"shadowed",tagEmplacement:"inlined",items:G,itemType:"checkboxes",checkboxEmplacement:"left",initialSelectedItems:null===G||void 0===G?void 0:G.filter(e=>(null===f||void 0===f?void 0:f.indexOf(e.value))>-1),className:Ie.uploadSelectComponent,inputClassName:Ie.uploadSearchInput,molclassname:Ie.uploadSelectMenuOverlayList,moliclassname:Ie.uploadSelectMenuOverlayListItem,onChange:e=>{U(null===e||void 0===e?void 0:e.map(e=>null===e||void 0===e?void 0:e.value)),null===g||void 0===g||g(null===e||void 0===e?void 0:e.map(e=>null===e||void 0===e?void 0:e.value))}}):null)),!c&&o.createElement(p.pd,{id:"Display as calendar",title:"Display as calendar?",ungrouped:!0,withAckButton:!1,style:{margin:"10px 0px",width:"auto"},value:!!u,toggleSelected:e=>{M(e)}}),o.createElement("div",null,o.createElement("label",{className:Ie.checkboxLabelClass},"Fetch users when item is selected?",o.createElement("input",{type:"checkbox",defaultChecked:null===Z||void 0===Z?void 0:Z.fetch,onChange:e=>k((0,n.Z)((0,n.Z)({},Z),{},{fetch:e.target.checked}))}))),o.createElement("div",null,o.createElement("label",{className:Ie.checkboxLabelClass},"Share transaction to position when item is selected?",o.createElement("input",{type:"checkbox",defaultChecked:null===Z||void 0===Z?void 0:Z.share,onChange:e=>k((0,n.Z)((0,n.Z)({},Z),{},{share:e.target.checked}))}))),o.createElement("div",null,o.createElement("label",{className:Ie.checkboxLabelClass},"Add user to selected position?",o.createElement("input",{type:"checkbox",defaultChecked:null===Z||void 0===Z?void 0:Z.addToPos,onChange:e=>e.target.checked?k((0,n.Z)((0,n.Z)({},Z),{},{addToPos:e.target.checked,share:!1,calendar:!1,fetch:!1})):k((0,n.Z)((0,n.Z)({},I),{},{addToPos:!1}))}))),o.createElement("div",{style:{display:null!==I&&void 0!==I&&I.calendar?"":"none"}},o.createElement(Fe,null,o.createElement(p.Lb,{title:"Header label to use"}),o.createElement(p.sm,{className:Ie.unfocusableWrapper},o.createElement("input",{type:"text",className:Ie.dropDownNewListItemInput,value:null===I||void 0===I?void 0:I.header,onChange:e=>{k((0,n.Z)((0,n.Z)({},I),{},{header:e.target.value}))}}))),o.createElement(Fe,null,o.createElement(p.Lb,{title:"Title label to use"}),o.createElement(p.sm,{className:Ie.unfocusableWrapper},o.createElement("input",{type:"text",className:Ie.dropDownNewListItemInput,value:null!==(l=null===I||void 0===I?void 0:I.title)&&void 0!==l?l:"Event Name",onChange:e=>{k((0,n.Z)((0,n.Z)({},I),{},{title:e.target.value}))}}))),o.createElement(Fe,null,o.createElement(p.Lb,{title:"Description label to use"}),o.createElement(p.sm,{className:Ie.unfocusableWrapper},o.createElement("input",{type:"text",className:Ie.dropDownNewListItemInput,value:null!==(t=null===I||void 0===I?void 0:I.description)&&void 0!==t?t:"Description",onChange:e=>{k((0,n.Z)((0,n.Z)({},I),{},{description:e.target.value}))}}))),o.createElement(Fe,null,o.createElement(p.Lb,{title:"Assignee label to use"}),o.createElement(p.sm,{className:Ie.unfocusableWrapper},o.createElement("input",{type:"text",className:Ie.dropDownNewListItemInput,value:null!==(i=null===I||void 0===I?void 0:I.assignee)&&void 0!==i?i:"Assigned to",onChange:e=>{k((0,n.Z)((0,n.Z)({},I),{},{assignee:e.target.value}))}}))),o.createElement(Fe,null,o.createElement(p.Lb,{title:"Start date label to use"}),o.createElement(p.sm,{className:Ie.unfocusableWrapper},o.createElement("input",{type:"text",className:Ie.dropDownNewListItemInput,value:null!==(d=null===I||void 0===I?void 0:I.start)&&void 0!==d?d:"Start Date",onChange:e=>{k((0,n.Z)((0,n.Z)({},I),{},{start:e.target.value}))}}))),o.createElement(Fe,null,o.createElement(p.Lb,{title:"End date label to use"}),o.createElement(p.sm,{className:Ie.unfocusableWrapper},o.createElement("input",{type:"text",className:Ie.dropDownNewListItemInput,value:null!==(s=null===I||void 0===I?void 0:I.end)&&void 0!==s?s:"End Date",onChange:e=>{k((0,n.Z)((0,n.Z)({},I),{},{end:e.target.value}))}}))),o.createElement(Fe,null,o.createElement(p.Lb,{title:"Value label to use (Optional)"}),o.createElement(p.sm,{className:Ie.unfocusableWrapper},o.createElement("input",{type:"text",className:Ie.dropDownNewListItemInput,value:null===I||void 0===I?void 0:I.valueL,onChange:e=>{k((0,n.Z)((0,n.Z)({},I),{},{valueL:e.target.value}))}})),o.createElement("p",{className:Ie.optionSettings},"Note: If set, ensure label is set in calendar")),o.createElement(He,{validationErrors:_,defaultList:(null===Z||void 0===Z||null===(r=Z.list)||void 0===r?void 0:r.length)>0?null===Z||void 0===Z?void 0:Z.list:void 0,onListSelected:e=>{k((0,n.Z)((0,n.Z)({},I),{},{list:e}))}})))},pl=e=>{const{defaultCurrent:l,defaultFixed:t,defaultDescription:n,defaultValue:a,defaultModule:i,defaultModule2:d,defaultModule3:s,allModules:r,onModule1Select:u,onModule2Select:c,onModule3Select:m,setFieldValue:v,setDefaultDescription:y,setDefaultFixed:h,setDefaultCurrent:f}=e,[C,g]=(0,o.useState)(null!==t&&void 0!==t&&t),[b,S]=(0,o.useState)(a),[E,_]=(0,o.useState)(n),[w,N]=(0,o.useState)(1!=l&&""!==(null===i||void 0===i?void 0:i.label)),[L,Z]=(0,o.useState)(l),x=r.map(e=>({label:e.name,value:e.id,module:e}));return o.createElement(o.Fragment,null,o.createElement(Fe,null,o.createElement(p.Lb,{title:"Description"}),o.createElement("div",{style:{display:"flex",flexDirection:"row"}},o.createElement("textarea",{type:"text",className:Ie.elementTextArea,value:E,name:"element-desc",onChange:e=>{y(e.target.value),_(e.target.value)}}))),o.createElement(p.pd,{id:"Use records for the AI to analyze",title:"Use records for the AI to analyze?",ungrouped:!0,withAckButton:!1,style:{margin:"10px 0px",width:"auto"},value:!!w,toggleSelected:e=>{N(e),1==e&&(Z(!1),f(!1))}}),!w&&o.createElement(p.pd,{id:"Use current transaction for the AI to analyze",title:"Use current transaction for the AI to analyze",ungrouped:!0,withAckButton:!1,style:{margin:"10px 0px",width:"auto"},value:!!L,toggleSelected:e=>{Z(e),f(e)}}),w&&o.createElement(Fe,null,o.createElement(p.Lb,{title:"Records to use as source A"}),o.createElement(p.sm,{className:Ie.unfocusableWrapper},o.createElement(p.rk,{items:x,defaultSelected:i,className:Ie.dropdownSelectComponent,tmiClassName:Ie.dropdownInput,molclassname:Ie.dropdownSelectMenuOverlayList,moliclassname:Ie.dropdownSelectMenuOverlayListItem,onChange:e=>{null===u||void 0===u||u(e)}}))),w&&o.createElement(Fe,null,o.createElement(p.Lb,{title:"Records to use as source B (Optional)"}),o.createElement(p.sm,{className:Ie.unfocusableWrapper},o.createElement(p.rk,{items:x,defaultSelected:d,className:Ie.dropdownSelectComponent,tmiClassName:Ie.dropdownInput,molclassname:Ie.dropdownSelectMenuOverlayList,moliclassname:Ie.dropdownSelectMenuOverlayListItem,onChange:e=>{null===c||void 0===c||c(e)}}))),w&&o.createElement(Fe,null,o.createElement(p.Lb,{title:"Records to use as source C (Optional)"}),o.createElement(p.sm,{className:Ie.unfocusableWrapper},o.createElement(p.rk,{items:x,defaultSelected:s,className:Ie.dropdownSelectComponent,tmiClassName:Ie.dropdownInput,molclassname:Ie.dropdownSelectMenuOverlayList,moliclassname:Ie.dropdownSelectMenuOverlayListItem,onChange:e=>{null===m||void 0===m||m(e)}}))),1==C&&o.createElement(Fe,null,o.createElement(p.Lb,{title:"Fixed query to use ".concat(w?"with the records selected":"")}),o.createElement("div",{style:{display:"flex",flexDirection:"row"}},o.createElement("textarea",{type:"text",className:Ie.elementTextArea,value:b,name:"element-query",onChange:e=>{v(e.target.value),S(e.target.value)}}))),o.createElement(p.pd,{id:"Use a fixed query?",title:"Use a fixed query",ungrouped:!0,withAckButton:!1,style:{margin:"20px 0px 0px 0px",width:"auto"},value:C,toggleSelected:e=>{g(e),h(e)}}))},vl=e=>{const{onSetIdGenerator:l,defaultValue:t}=e,[n,a]=(0,o.useState)(t.label);return o.createElement("div",{className:Ie.currencySelectContainer},o.createElement("input",{type:"text",placeholder:"Enter prefix of ID",className:Ie.elementTextInput,value:n,name:"element-name",onChange:e=>{a(e.target.value),(e=>{l(e)})(e.target.value)}}))},yl=e=>{const{onNotesGenerator:l,defaultValue:t,fieldOption:n,setFieldOption:a}=e,[i,d]=(0,o.useState)(t.label),s=e=>l(e);return o.createElement("div",{className:Ie.currencySelectContainer},n.rich?o.createElement(Me.Z,{handleChange:e=>{d(e),s(e)},defaultValue:i}):o.createElement("textarea",{type:"text",placeholder:"Enter Notes to display",className:Ie.elementTextArea,value:i,name:"element-name",onChange:e=>{d(e.target.value),s(e.target.value)}}))},hl=e=>{const{defaultList:l,defaultSrcName:t,onSourceLabel:n,defaultValue:i,validationErrors:d,onSourceSelected:s,bpContext:r,onListSelected:u=()=>{}}=e,{isOnboarding:c}=(0,a.v9)(e=>e.modalsReducer),[m,v]=(0,o.useState)(null!==l&&void 0!==l?l:[]),[y,h]=(0,o.useState)(""),[f,C]=(0,o.useState)([]),[g,b]=(0,o.useState)(!0),[S,E]=(0,o.useState)([]);(0,o.useEffect)(()=>{_()},[]);const _=(0,o.useCallback)(()=>{E(c?r.allBlueprintComponents.map(e=>({label:e.name,value:e.id,blueprint:e})):r.allBlueprintComponents.filter(e=>!1===e.readonly).map(e=>({label:e.name,value:e.id,blueprint:e})))}),w=(0,o.useCallback)(()=>{b(!0),v(e=>[...e,y]),h(""),null===u||void 0===u||u([...m,y])},[m,y,u]),N=(0,o.useCallback)(e=>{v(l=>[...ke.reject(ke.equals(e),l)]),null===u||void 0===u||u([...ke.reject(ke.equals(e),m)])},[m,u]);return o.createElement("div",{className:Ie.dropdownElementHost},o.createElement(Fe,{errorMessage:null===d||void 0===d?void 0:d.type},o.createElement(p.Lb,{title:"Select Component where field to use as payment amount is found"}),o.createElement("div",{className:Ie.currencySelectContainer},o.createElement(p.Ld,{triggerType:"chevron",items:S,defaultSelectedItem:i,className:Ie.componentsSelectComponent,inputClassName:Ie.componentsSearchInput,inputStyle:{color:"var(--app-color-gray-dark)",fontSize:"1rem"},clearControlsClassName:Ie.componentsClearControlsClassName,molclassname:Ie.componentsSelectMenuOverlayList,moliclassname:Ie.componentsSelectMenuOverlayListItem,onChange:e=>{const l=S.find(l=>l.value===e.value);C(l.blueprint.fields.filter(e=>"Number"===e.name||"Formula"===e.name||"Item Formula"===e.name).map(e=>({label:e.value,value:e.id,field:e}))),s(e.value)}}))),o.createElement(Fe,{errorMessage:null===d||void 0===d?void 0:d.type},o.createElement(p.Lb,{title:"Field to use for payment amount"}),o.createElement("div",{className:Ie.currencySelectContainer},o.createElement(p.Ld,{triggerType:"chevron",items:f,defaultSelectedItem:t,className:Ie.componentsSelectComponent,inputClassName:Ie.componentsSearchInput,inputStyle:{color:"var(--app-color-gray-dark)",fontSize:"1rem"},clearControlsClassName:Ie.componentsClearControlsClassName,molclassname:Ie.componentsSelectMenuOverlayList,moliclassname:Ie.componentsSelectMenuOverlayListItem,onChange:e=>{n(e.label)}}))),o.createElement(Fe,{errorMessage:null===d||void 0===d?void 0:d.list},o.createElement(p.Lb,{title:"Payment Options"}),o.createElement(p.sm,{"app-variant":null!==d&&void 0!==d&&d.list?"error":"normal",className:Ie.dropdownListContainer,onClickOutside:(0,o.useCallback)(()=>{null===u||void 0===u||u(m)},[m,u])},g?o.createElement("div",{className:Ie.dropDownButtonContainer},o.createElement(p.zx,{light:!0,title:"Add Payment Option",clicked:()=>b(!1)})):o.createElement("div",{className:Ie.dropDownNewListItemInputContainer},o.createElement("input",{type:"text",className:Ie.dropDownNewListItemInput,value:y,name:"newItem",placeholder:"Type name",onChange:e=>{h(e.target.value)}}),(null===y||void 0===y?void 0:y.length)>0&&o.createElement("button",{type:"button",onClick:w,className:Ie.dropdownInputButtonSaveNewItem},o.createElement(A.G,{icon:W.g6h}))),o.createElement("div",{className:Ie.dropdownListItemsContainer},m&&(null===m||void 0===m?void 0:m.map((e,l)=>o.createElement(sl,{key:e+l,item:e,isOverflow:(null===m||void 0===m?void 0:m.length)>3,onItemChanged:e=>{v(t=>[...ke.update(l)(e)(t)])},onItemRemoved:()=>N(e)})))))))};var fl=t(67861);const Cl=(0,o.memo)(e=>{var l,t,a,i,s,r,c,v,y,h,f,C,g,b,S,E,_,w,N;const{visible:L,onUpdate:Z,onClose:x,authenticatedUser:I,allModules:T,blueprints:P,componentTypes:B,components:F,products:D,companyData:z,companyProcesses:R,selectedComponent:j}=e,[U,q]=(0,d.aL)(),[H,K]=(0,o.useState)(!1),[X,G]=(0,o.useState)(!1),[Y,J]=(0,o.useState)(!1),[Q,$]=(0,o.useState)(!1),[ee,oe]=(0,o.useState)(!1),[ae,me]=(0,o.useState)(!1),[,pe]=(0,o.useState)({name:"",fields:"",components:""}),[ve,ye]=(0,o.useState)(!1),[we,Ne]=(0,o.useState)(""),[Le,Ze]=(0,o.useState)(!0),[xe,Ie]=(0,o.useState)(!1),[Me,ke]=(0,o.useState)(""),{onBoardingModalsVisibility:Oe}=e;(0,o.useEffect)(()=>{Ne(""),q({type:d.qY.setAllBlueprintsComponents,value:P})},[U.selectedBlueprintComponent.fields]),(0,o.useEffect)(()=>{void 0!==j&&(q({type:d.qY.setSelectedBlueprintComponent,value:P.find(e=>e.id===j)}),Ze(!1))},[]);const Pe=()=>{pe({name:"",components:""}),Ne("")},Be=(0,o.useCallback)(e=>{J(!0),(0,de._u)(e.id,e).subscribe({next:()=>{J(!1),M.h.dispatch((0,u.Xc)({show:!0,message:"You have successfully updated ".concat(e.name)})),null===Z||void 0===Z||Z(!0),null===x||void 0===x||x(!0)},error:e=>{var l,t,n,o,a,i,d,s,r;null!==e&&void 0!==e&&null!==(l=e.data)&&void 0!==l&&l.errors&&pe({name:null===e||void 0===e||null===(t=e.data)||void 0===t||null===(n=t.errors)||void 0===n||null===(o=n.name)||void 0===o?void 0:o.join("; "),components:null===e||void 0===e||null===(a=e.data)||void 0===a||null===(i=a.errors)||void 0===i||null===(d=i.components)||void 0===d?void 0:d.join("; ")});null!==e&&void 0!==e&&e.data&&Ne(null!==(s=null===e||void 0===e||null===(r=e.data)||void 0===r?void 0:r.message)&&void 0!==s?s:null===e||void 0===e?void 0:e.data);J(!1)}})},[x]),De=(0,o.useCallback)(e=>{J(!0),(0,de.Bp)(e).subscribe({next:()=>{null!==Oe&&void 0!==Oe&&Oe.thirdModalVisible?M.h.dispatch((0,V.$6)({fourthModalVisible:!0})):null!==Oe&&void 0!==Oe&&Oe.fifthModalVisible?M.h.dispatch((0,V.$6)({sixthModalVisible:!0})):M.h.dispatch((0,u.Xc)({show:!0,message:"You have successfully created ".concat(e.name)})),J(!1),null===Z||void 0===Z||Z(!0),null===x||void 0===x||x(!!Le),Ne("You have successfully created ".concat(e.name,". Press the close button"))},error:e=>{var l,t,n,o,a,i,d,s,r;null!==e&&void 0!==e&&null!==(l=e.data)&&void 0!==l&&l.errors&&pe({name:null===e||void 0===e||null===(t=e.data)||void 0===t||null===(n=t.errors)||void 0===n||null===(o=n.name)||void 0===o?void 0:o.join("; "),components:null===e||void 0===e||null===(a=e.data)||void 0===a||null===(i=a.errors)||void 0===i||null===(d=i.components)||void 0===d?void 0:d.join("; ")});null!==e&&void 0!==e&&e.data&&Ne(null!==(s=null===e||void 0===e||null===(r=e.data)||void 0===r?void 0:r.message)&&void 0!==s?s:null===e||void 0===e?void 0:e.data);J(!1)}})},[x]),Ae=((0,o.useCallback)(e=>{J(!0),(0,de.zs)(e.id,e.name).subscribe({next:()=>{J(!1),M.h.dispatch((0,u.Xc)({show:!0,message:"You have successfully duplicated component"})),null===Z||void 0===Z||Z(!0),null===x||void 0===x||x(!0)},error:e=>{var l,t,n,o,a,i,d,s,r;null!==e&&void 0!==e&&null!==(l=e.data)&&void 0!==l&&l.errors&&pe({name:null===e||void 0===e||null===(t=e.data)||void 0===t||null===(n=t.errors)||void 0===n||null===(o=n.name)||void 0===o?void 0:o.join("; "),components:null===e||void 0===e||null===(a=e.data)||void 0===a||null===(i=a.errors)||void 0===i||null===(d=i.components)||void 0===d?void 0:d.join("; ")});null!==e&&void 0!==e&&e.data&&Ne(null!==(s=null===e||void 0===e||null===(r=e.data)||void 0===r?void 0:r.message)&&void 0!==s?s:null===e||void 0===e?void 0:e.data);J(!1)}})},[x]),(0,o.useCallback)(()=>{var e,l;const{name:t,fields:o}=U.validation;if("superadmin"!==(null===I||void 0===I?void 0:I.user_type)&&(t||(null===o||void 0===o?void 0:o.length)>0||(null===(e=U.selectedBlueprintComponent.fields)||void 0===e?void 0:e.length)<1)){var a,i,d,s,r,u,c,m;let e="";if((null===(a=U.selectedBlueprintComponent.fields)||void 0===a?void 0:a.length)<1&&(e="Component must have at least one field"),(null===o||void 0===o?void 0:o.length)>0&&(e="Check options of red fields"),null!==U&&void 0!==U&&null!==(i=U.selectedBlueprintComponent)&&void 0!==i&&null!==(d=i.fields)&&void 0!==d&&d.some(e=>{var l,t;return 0==(null===e||void 0===e||null===(l=e.options)||void 0===l||null===(t=l.list)||void 0===t?void 0:t.length)})&&(e="Element's option list must have at least one entry"),null!==U&&void 0!==U&&null!==(s=U.selectedBlueprintComponent)&&void 0!==s&&null!==(r=s.fields)&&void 0!==r&&r.some(e=>{var l,t;return 0==(null===e||void 0===e||null===(l=e.options)||void 0===l||null===(t=l.type)||void 0===t?void 0:t.length)})&&(e="Element's option type is mandatory"),null!==U&&void 0!==U&&null!==(u=U.selectedBlueprintComponent)&&void 0!==u&&null!==(c=u.fields)&&void 0!==c&&c.some(e=>{var l;return 0==(null===e||void 0===e||null===(l=e.value)||void 0===l?void 0:l.length)})&&(e="Name is mandatory for each element"),pe({name:t?"Add a component name":"",fields:e}),(null===(m=e)||void 0===m?void 0:m.length)>0){const e=document.querySelectorAll('[app-field-row-has-error="error"]');var p,v;if(e)if((null===e||void 0===e?void 0:e.length)>0)null===(p=[...e])||void 0===p||null===(v=p.reverse()[(null===e||void 0===e?void 0:e.length)-1])||void 0===v||v.scrollIntoView({block:"start",behavior:"smooth"})}return void((null===o||void 0===o?void 0:o.length)>0&&ye(!0))}J(!0),Pe();const y={components:U.selectedBlueprintComponent.components,fields:U.selectedBlueprintComponent.fields.map(e=>{var l;return(null===(l=e.id)||void 0===l?void 0:l.length)>20?(0,n.Z)({},e):ie.Z("id")(e)}),name:U.selectedBlueprintComponent.name};(null===(l=U.selectedBlueprintComponent.id)||void 0===l?void 0:l.length)>0?Be((0,n.Z)((0,n.Z)({},y),{},{id:U.selectedBlueprintComponent.id})):De(y)},[U.selectedBlueprintComponent.components,U.selectedBlueprintComponent.fields,U.selectedBlueprintComponent.id,U.selectedBlueprintComponent.name,U.validation,De,Be])),We=(0,o.useCallback)(()=>{var e;if((null===(e=U.selectedBlueprintComponent.id)||void 0===e?void 0:e.length)>0){J(!0),Pe();const e={components:U.selectedBlueprintComponent.components,fields:U.selectedBlueprintComponent.fields.map(e=>{var l;return(null===(l=e.id)||void 0===l?void 0:l.length)>20?(0,n.Z)({},e):ie.Z("id")(e)}),name:"Copy of ".concat(U.selectedBlueprintComponent.name)};De(e)}},[U.selectedBlueprintComponent.components,U.selectedBlueprintComponent.fields,U.selectedBlueprintComponent.id,U.selectedBlueprintComponent.name,U.validation,De,Be]),Ve=e=>{q({type:d.qY.setSelectedBlueprintComponentName,value:e})};return fl.createElement(fl.Fragment,null,fl.createElement(p.U7,{id:"edit-component-modal",blured:!0,scrollable:!1,isOpen:L,shadowedContainerStyle:{minWidth:"500px",width:k.tq?"100%":"38%"}},fl.createElement("div",{className:re},fl.createElement("div",{className:ue},fl.createElement("p",null,1==(null===U||void 0===U||null===(l=U.selectedBlueprintComponent)||void 0===l?void 0:l.readonly)?"Template Component":Le?"New Component":"Edit Component")),fl.createElement("p",{className:_e},"A component is an object within a step that groups your various fields. You can only use a component one step at a time in a workflow"),1==(null===U||void 0===U||null===(t=U.selectedBlueprintComponent)||void 0===t?void 0:t.readonly)&&fl.createElement("p",{className:_e},"Note: You are working on a Template Component, if you want to add more fields or rename a field, we encourage to duplicate/copy this component and make your changes there instead. Remove then this template component from the step where this is attached and add your copied component.  "),fl.createElement(Fe,null,Le&&fl.createElement("div",null,fl.createElement(p.Lb,{title:"Name"}),fl.createElement("input",{type:"text",name:"element-name",value:null===(a=U.selectedBlueprintComponent)||void 0===a?void 0:a.name,onChange:e=>{Ve(e.target.value)},onClick:()=>{},className:Ee})),xe&&fl.createElement("div",null,fl.createElement(p.Lb,{title:"Name"}),fl.createElement("input",{type:"text",name:"element-name",value:null===(i=U.selectedBlueprintComponent)||void 0===i?void 0:i.name,onChange:e=>{Ve(e.target.value)},onClick:()=>{},className:Ee})),!xe&&fl.createElement("div",{style:{display:"flex",flexDirection:"column",width:"100%",maxHeight:"100%",border:"0px solid var(--app-color-gray-lighter)",marginTop:"10px"}},fl.createElement(p.Lb,{title:j?"Name":"Select Component to Edit"}),fl.createElement("div",{className:ce},fl.createElement(se.yV,{placeholder:null!==(s=U.selectedBlueprintComponent)&&void 0!==s&&s.name&&!Le?null===(r=U.selectedBlueprintComponent)||void 0===r?void 0:r.name:"Or selelct a Component to edit...",items:j?[]:B?[...le.Z([te.Z(ne.Z("name"))])(P).map(e=>({label:"".concat(null===e||void 0===e?void 0:e.name),value:null===e||void 0===e?void 0:e.id,type:"".concat(!0===e.readonly?"Templates":(0,m.m)(null===e||void 0===e?void 0:e.name))}))]:[],initialSelectedValues:[],groupedBy:"type",groupname:"type",inputStyle:{blank:!0,cursor:"pointer"},className:fe,inputClassName:Ce,molclassname:ge,moliclassname:be,onChange:e=>{1==e.length&&(q({type:d.qY.setSelectedBlueprintComponent,value:P.find(l=>l.id===e[0].value)}),Ze(!1))}},!j&&fl.createElement(A.G,{className:"fa-icon",icon:W.ptq,style:{marginRight:"20px",color:"gray"}})))),fl.createElement("br",null),!xe&&fl.createElement("div",{style:{display:"flex",flexDirection:"column",width:"100%",maxHeight:"100%",border:"0px solid var(--app-color-gray-lighter)"}},fl.createElement(p.Lb,{title:"Fields Selection"}),fl.createElement("div",{className:ce},fl.createElement(se.yV,{placeholder:"Click and select field to add ...",items:B?[...le.Z([te.Z(ne.Z("name"))])(B.filter(e=>{var l,t;return!(null!==z&&void 0!==z&&null!==(l=z.misc_info)&&void 0!==l&&null!==(t=l.blueprints)&&void 0!==t&&t.includes(null===e||void 0===e?void 0:e.name))&&(0==e.io_type||1==e.io_type)})).map(e=>({label:e.name,value:e.id,type:0==e.io_type?"Output":"Input"})),...null!==z&&void 0!==z&&null!==(c=z.misc_info)&&void 0!==c&&c.templates?z.misc_info.templates.map(e=>({label:e,value:e,type:"Templates"})):[]]:[],initialSelectedValues:[],groupedBy:"type",groupname:"type",inputStyle:{blank:!0,cursor:"pointer"},className:fe,inputClassName:Ce,molclassname:ge,moliclassname:be,onChange:e=>{if(e.length>0){let l=[e[0]];l=((e,l,t)=>{var n,o,a,i,d,s;return"Battery Order Template"===e[0].value?null===l||void 0===l||null===(n=l.misc_info)||void 0===n?void 0:n.templatesData.find(e=>"Battery Order Template"===e.name).config.map(e=>({value:t.find(l=>l.name===e.value).id,label:e.label,mapToItem:null===e||void 0===e?void 0:e.mapToItem})):"Battery Template"===e[0].value?null===l||void 0===l||null===(o=l.misc_info)||void 0===o?void 0:o.templatesData.find(e=>"Battery Template"===e.name).config.map(e=>({value:t.find(l=>l.name===e.value).id,label:e.label,mapToItem:null===e||void 0===e?void 0:e.mapToItem})):null!==(a=null===l||void 0===l||null===(i=l.misc_info)||void 0===i||null===(d=i.templatesData.find(l=>l.name===e[0].value))||void 0===d||null===(s=d.config)||void 0===s?void 0:s.map(e=>({value:t.find(l=>l.name===e.value).id,label:e.label,mapToItem:null===e||void 0===e?void 0:e.mapToItem})))&&void 0!==a?a:[]})(e,z,B),0==l.length&&(ke(""),l=[e[0]]),l.map(e=>{var l,t,o,a,i,s,r,u,c,p,v,y,h,f,C,g,b,S,E,_,w,N,L,Z,x,I,M,k,O,T,P,F,D,A,W,V,z,R,j;const H=B.find(l=>l.id===e.value);let K={field_type:(0,n.Z)({},H)};var X;("number"===(null===H||void 0===H||null===(l=H.name)||void 0===l?void 0:l.toLowerCase())&&(K={field_type:(0,n.Z)({},H),options:{type:"numeric",display:"text"}}),"phone"===(null===H||void 0===H||null===(t=H.name)||void 0===t?void 0:t.toLowerCase())&&(K={field_type:(0,n.Z)({},H),options:{country_prefix:"+44",country_code:"gb",country_name:"United Kingdom"}}),"currency"===(null===H||void 0===H||null===(o=H.name)||void 0===o?void 0:o.toLowerCase())&&(K={field_type:(0,n.Z)({},H),options:{currency_type:"British Pound Sterling",currency_value:"GBP",symbol:"\xa3"}}),"action button"===(null===H||void 0===H||null===(a=H.name)||void 0===a?void 0:a.toLowerCase())&&(K={field_type:(0,n.Z)({},H),options:{action:"creator"}}),"profile"===(null===H||void 0===H||null===(i=H.name)||void 0===i?void 0:i.toLowerCase())&&(K={field_type:(0,n.Z)({},H),options:{type:"user"}}),"upload"===(null===H||void 0===H||null===(s=H.name)||void 0===s?void 0:s.toLowerCase())&&(K={field_type:(0,n.Z)({},H),options:{accepted_mimes:m.cH.map(e=>{var l;return null===(l=e.value)||void 0===l?void 0:l.replaceAll(".","")}).join(","),max_file_size:51200}}),"people"===(null===H||void 0===H||null===(r=H.name)||void 0===r?void 0:r.toLowerCase())&&(K={field_type:(0,n.Z)({},H),options:{position_id:[],type:"single"}}),"date"===(null===H||void 0===H||null===(u=H.name)||void 0===u?void 0:u.toLowerCase())&&(K={field_type:(0,n.Z)({},H),options:{type:"single"}}),"dropdown"===(null===H||void 0===H||null===(c=H.name)||void 0===c?void 0:c.toLowerCase())&&(K={field_type:(0,n.Z)({},H),options:{list:[],type:"single"}}),"payments"===(null===H||void 0===H||null===(p=H.name)||void 0===p?void 0:p.toLowerCase())&&(K={field_type:(0,n.Z)({},H),options:{list:["Credit Card","GCash","Cash"]}}),"pin"===(null===H||void 0===H||null===(v=H.name)||void 0===v?void 0:v.toLowerCase())&&(K={field_type:(0,n.Z)({},H),options:{pintype:"single",realtime:!0,destination:!1,source:!0}}),"record"===(null===H||void 0===H||null===(y=H.name)||void 0===y?void 0:y.toLowerCase())&&(K={field_type:(0,n.Z)({},H),options:{component_id:[],type:"single",selection:"",filters:[]}}),"status"===(null===H||void 0===H||null===(h=H.name)||void 0===h?void 0:h.toLowerCase())&&(K={field_type:(0,n.Z)({},H),options:{list:[]}}),"list filter"===(null===H||void 0===H||null===(f=H.name)||void 0===f?void 0:f.toLowerCase())&&(K={field_type:(0,n.Z)({},H),options:{field:"",value:""}}),"id"===(null===H||void 0===H||null===(C=H.name)||void 0===C?void 0:C.toLowerCase())&&(K={field_type:(0,n.Z)({},H),options:{id:"",value:0}}),"list"===(null===H||void 0===H||null===(g=H.name)||void 0===g?void 0:g.toLowerCase())&&(K={field_type:(0,n.Z)({},H),options:{module_id:"",list:[]}}),"module list"===(null===H||void 0===H||null===(b=H.name)||void 0===b?void 0:b.toLowerCase())&&(K={field_type:(0,n.Z)({},H),options:{module_id:"",list:[]}}),"step list"===(null===H||void 0===H||null===(S=H.name)||void 0===S?void 0:S.toLowerCase())&&(K={field_type:(0,n.Z)({},H),options:{component_id:"",list:[]}}),"component list"===(null===H||void 0===H||null===(E=H.name)||void 0===E?void 0:E.toLowerCase())&&(K={field_type:(0,n.Z)({},H),options:{component_id:"",list:[]}}),"transaction list"===(null===H||void 0===H||null===(_=H.name)||void 0===_?void 0:_.toLowerCase())&&(K={field_type:(0,n.Z)({},H),options:{map:{}}}),"lookup"===(null===H||void 0===H||null===(w=H.name)||void 0===w?void 0:w.toLowerCase())&&(K={field_type:(0,n.Z)({},H),options:{source_id:"",target_id:"",common_field:"",list:[],selection:""}}),"rewards"===(null===H||void 0===H||null===(N=H.name)||void 0===N?void 0:N.toLowerCase())&&(K={field_type:(0,n.Z)({},H),options:{status:"Closed",points:1,equiv:1,creator:!0}}),"calendar"===(null===H||void 0===H||null===(L=H.name)||void 0===L?void 0:L.toLowerCase())&&(K={field_type:(0,n.Z)({},H),options:{limit:!0,creator:!0,priority:!0,span:!1}}),"connectors"===(null===H||void 0===H||null===(Z=H.name)||void 0===Z?void 0:Z.toLowerCase())&&(K={field_type:(0,n.Z)({},H),options:{component1_id:"",component2_id:"",common_field_12:"",component3_id:"",common_field_23:"",outputs:""}}),"map"===(null===H||void 0===H||null===(x=H.name)||void 0===x?void 0:x.toLowerCase())&&(K={field_type:(0,n.Z)({},H),options:{maptype:"region"}}),"formula"===(null===H||void 0===H||null===(I=H.name)||void 0===I?void 0:I.toLowerCase())&&(K={field_type:(0,n.Z)({},H),options:{operator:"",list:[],display:"text"}}),"item formula"===(null===H||void 0===H||null===(M=H.name)||void 0===M?void 0:M.toLowerCase())&&(K={field_type:(0,n.Z)({},H),options:{operator:"",list:[],display:"text"}}),"emails"===(null===H||void 0===H||null===(k=H.name)||void 0===k?void 0:k.toLowerCase())&&(K={field_type:(0,n.Z)({},H),options:{subject:"",message:""}}),"product"===(null===H||void 0===H||null===(O=H.name)||void 0===O?void 0:O.toLowerCase())&&(K={field_type:(0,n.Z)({},H),options:{list:[]}}),"product lookup"===(null===H||void 0===H||null===(T=H.name)||void 0===T?void 0:T.toLowerCase())&&(K={field_type:(0,n.Z)({},H),options:{selection:"",component_id:"",list:[]}}),"filters"===(null===H||void 0===H||null===(P=H.name)||void 0===P?void 0:P.toLowerCase())&&(K={field_type:(0,n.Z)({},H),options:{component_id:"",list:[],filters:[]}}),"info"===(null===H||void 0===H||null===(F=H.name)||void 0===F?void 0:F.toLowerCase())&&(K={field_type:(0,n.Z)({},H),options:{component_id:"",list:[]}}),"details"===(null===H||void 0===H||null===(D=H.name)||void 0===D?void 0:D.toLowerCase())&&(K={field_type:(0,n.Z)({},H),options:{module_id:"",list:[]}}),"chart"===(null===H||void 0===H||null===(A=H.name)||void 0===A?void 0:A.toLowerCase())&&(K={field_type:(0,n.Z)({},H),options:{component_id:"",list:[]}}),"value"===(null===H||void 0===H||null===(W=H.name)||void 0===W?void 0:W.toLowerCase())&&(K={field_type:(0,n.Z)({},H),options:{module_id:"",component_id:"",value:""}}),"notes"===(null===H||void 0===H||null===(V=H.name)||void 0===V?void 0:V.toLowerCase())&&(K={field_type:(0,n.Z)({},H),options:{value:""}}),"url"===(null===H||void 0===H||null===(z=H.name)||void 0===z?void 0:z.toLowerCase())&&(K={field_type:(0,n.Z)({},H),options:{type:"image"}}),"googleai assistant"===(null===H||void 0===H||null===(R=H.name)||void 0===R?void 0:R.toLowerCase())&&(K={field_type:(0,n.Z)({},H),options:{description:"",fixed:!0,current:!1}}),null!==e&&void 0!==e&&e.mapToItem&&(console.log(e.mapToItem),K.options=(0,n.Z)((0,n.Z)({},K.options),{},{mapToItem:e.mapToItem})),(null===U||void 0===U||null===(j=U.selectedBlueprintComponent)||void 0===j?void 0:j.fields.length)<20)?(Pe(),q({type:d.qY.setSelectedBlueprintComponentNewField,value:(0,n.Z)((0,n.Z)({},K),{},{label:null!==(X=e.label)&&void 0!==X?X:""})})):Ne("You can only add a maximum of 20 fields per component. ")})}}},fl.createElement(A.G,{className:"fa-icon",icon:W.ptq,style:{marginRight:"20px",color:"gray"}}))),fl.createElement("br",null),fl.createElement("div",{className:Se},Le?"Selected Fields:":"Available Fields:"),fl.createElement("div",{style:{display:"flex",flexDirection:"column"}},null===U||void 0===U||null===(v=U.selectedBlueprintComponent)||void 0===v||null===(y=v.fields)||void 0===y?void 0:y.map((e,l)=>{var t,o,a,i,s,r,u,c;return fl.createElement(bl,{key:l,id:e.id,name:1===(null===e||void 0===e||null===(t=e.field_type)||void 0===t?void 0:t.io_type)?null!==e&&void 0!==e&&null!==(o=e.options)&&void 0!==o&&o.mapToItem?"".concat(null===e||void 0===e||null===(a=e.field_type)||void 0===a?void 0:a.name," (").concat(null===e||void 0===e||null===(i=e.options)||void 0===i?void 0:i.mapToItem,")"):null===e||void 0===e||null===(s=e.field_type)||void 0===s?void 0:s.name:"Template"===(null===e||void 0===e||null===(r=e.field_type)||void 0===r?void 0:r.name)?null===e||void 0===e||null===(u=e.field_type)||void 0===u?void 0:u.name:"".concat(null===e||void 0===e||null===(c=e.field_type)||void 0===c?void 0:c.name," (Out)"),settingsClicked:()=>{var l;q({type:d.qY.setSelectedFieldFromSelectedBlueprintComponent,value:(0,n.Z)((0,n.Z)({},e),{},{index:null===e||void 0===e||null===(l=e.field_type)||void 0===l?void 0:l.index})}),G(!0)},renderError:ve,hasSettingsBtn:!0},fl.createElement(gl,e))})),fl.createElement("p",{className:Se},0==(null===U||void 0===U||null===(h=U.selectedBlueprintComponent)||void 0===h||null===(f=h.fields)||void 0===f?void 0:f.length)?"No fields available. Select and add by clicking above":"You can add a maximum of 20 fields per component."),fl.createElement("br",null)),(null===we||void 0===we?void 0:we.length)>0&&fl.createElement(O.Z,{message:we,onClick:()=>Ne("")}),(null===Me||void 0===Me?void 0:Me.length)>0&&fl.createElement(O.Z,{withError:!1,extraClassName:he,message:Me,onClick:()=>ke("")})),fl.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",paddingTop:"10px",width:"100%",overflow:"auto"}},fl.createElement(p.zx,{loading:Y,title:"Close",clicked:()=>x(),titleStyle:{fontSize:"14px"},style:{width:"100%",maxWidth:"180px",display:xe?"none":""}}),fl.createElement(p.zx,{disabled:!((null===U||void 0===U||null===(C=U.selectedBlueprintComponent)||void 0===C?void 0:C.fields.length)>0&&null!==(g=U.selectedBlueprintComponent)&&void 0!==g&&g.name),light:!0,title:Le?"Save":"Update",loading:Y,clicked:Ae,titleStyle:{fontSize:"14px"},style:{width:"100%",maxWidth:"180px",display:1==(null===U||void 0===U||null===(b=U.selectedBlueprintComponent)||void 0===b?void 0:b.readonly)&&"superadmin"!==z.status?"none":(null===U||void 0===U||null===(S=U.selectedBlueprintComponent)||void 0===S?void 0:S.fields.length)>0&&null!==(E=U.selectedBlueprintComponent)&&void 0!==E&&E.name?"":"none"}}),!Le&&fl.createElement(p.j3,{permissions:[p.po.blueprints.components.delete]},fl.createElement(p.zx,{light:!0,title:xe?"Back":"Rename",clicked:()=>Ie(!xe),titleStyle:{fontSize:"14px"},style:{width:"100%",maxWidth:"180px",display:1==(null===U||void 0===U||null===(_=U.selectedBlueprintComponent)||void 0===_?void 0:_.readonly)&&"superadmin"!==z.status?"none":""}})),!Le&&!xe&&fl.createElement(p.j3,{permissions:[p.po.blueprints.components.delete]},fl.createElement(p.zx,{light:!0,title:"Copy",clicked:We,titleStyle:{fontSize:"14px"},style:{width:"100%",maxWidth:"180px"}})),!Le&&!xe&&0==(null===U||void 0===U||null===(w=U.selectedBlueprintComponent)||void 0===w?void 0:w.readonly)&&fl.createElement(fl.Fragment,null,fl.createElement(p.j3,{permissions:[p.po.blueprints.components.delete]},fl.createElement(p.zx,{light:!0,title:"New",clicked:()=>{Ze(!0),q({type:d.qY.resetSelectedBlueprintComponent})},titleStyle:{fontSize:"14px"},style:{width:"100%",maxWidth:"180px"}}),0===F.filter(e=>e.component_fields.filter(e=>{var l;return e.component_blueprint_id===(null===(l=U.selectedBlueprintComponent)||void 0===l?void 0:l.id)}).length>0).length&&fl.createElement(p.zx,{light:!0,title:"Delete",loading:Q,clicked:()=>{$(!0),(0,de.bp)(U.selectedBlueprintComponent.id).subscribe({next:()=>{M.h.dispatch((0,u.Xc)({show:!0,message:"You have successfully deleted ".concat(U.selectedBlueprintComponent.name),color:"red"})),null===Z||void 0===Z||Z(!0)},complete:()=>{$(!1),null===x||void 0===x||x(!0)}})},titleStyle:{fontSize:"14px"},style:{width:"100%",maxWidth:"180px"}})))))),X&&fl.createElement(Te,{onClose:()=>{q({type:d.qY.setSelectedFieldFromSelectedBlueprintComponent,value:null}),oe(!1),me(!1),G(!1)},isOpen:X,modalStyle:{minWidth:"500px",width:k.tq?"100%":"38%"},leftControlAction:e=>(e=>{me(!0),q({type:d.qY.removeSelectedFieldFromSelectedBlueprintComponent,value:{id:e}}),me(!1),G(!1)})(e),leftControlLoading:ae,centralControlAction:e=>{oe(!0),q({type:d.qY.setSelectedBlueprintComponentSpecificField,value:e}),oe(!1),G(!1)},centralControlLoading:ee,allModules:T,blueprints:P,components:F,companyProcesses:R,products:D,selectedFields:U.selectedBlueprintComponent.fields,readOnly:(null===U||void 0===U||null===(N=U.selectedBlueprintComponent)||void 0===N?void 0:N.readonly)&&"superadmin"!==z.status}))}),gl=e=>{var l,t;const{id:n,value:o,field_type:a}=e,{companyData:i}=M.h.getState().flowReducer,[,s]=(0,d.aL)();switch(null===a||void 0===a?void 0:a.data_type){case"file":case"date":return fl.createElement("input",{type:"input",placeholder:null===a||void 0===a?void 0:a.name,className:ye,value:o,name:null===a||void 0===a?void 0:a.name,onChange:e=>{s({type:d.qY.setSelectedBlueprintComponentSpecificField,value:{id:n,value:e.target.value}})}});case"text":return fl.createElement("input",{type:null===a||void 0===a?void 0:a.data_type,placeholder:"Input name for "+(null===a||void 0===a?void 0:a.name),className:ye,value:o,name:null===a||void 0===a?void 0:a.name,onChange:e=>{let l=e.target.value;s({type:d.qY.setSelectedBlueprintComponentSpecificField,value:{id:n,value:l}})}});case"output":return fl.createElement("input",{type:null===a||void 0===a?void 0:a.data_type,placeholder:"Insert value for "+(null===a||void 0===a||null===(l=a.name)||void 0===l?void 0:l.toLowerCase())+" element...",className:ye,value:o,name:null===a||void 0===a?void 0:a.name,readOnly:"-"!==(null===i||void 0===i?void 0:i.id)&&"Template"===(null===a||void 0===a?void 0:a.name),onChange:e=>{let l=e.target.value;s({type:d.qY.setSelectedBlueprintComponentSpecificField,value:{id:n,value:l}})}});default:return fl.createElement("input",{type:null===a||void 0===a?void 0:a.data_type,placeholder:"Insert value for "+(null===a||void 0===a||null===(t=a.name)||void 0===t?void 0:t.toLowerCase())+" element...",className:ye,value:o,name:null===a||void 0===a?void 0:a.name,onChange:e=>{let l=e.target.value;s({type:d.qY.setSelectedBlueprintComponentSpecificField,value:{id:n,value:l}})}})}},bl=e=>{const{id:l,renderError:t,fieldIcon:n,children:a,hasSettingsBtn:i,settingsClicked:s,name:r}=e,[u]=(0,d.aL)(),[c,m]=(0,o.useState)(!1),p=(0,o.useCallback)(()=>{var e;return m(t&&(null===(e=u.validation.fields)||void 0===e?void 0:e.some(e=>(null===e||void 0===e?void 0:e.toString())===(null===l||void 0===l?void 0:l.toString()))))},[t,u.validation.fields,l]);return(0,o.useEffect)(()=>{p()},[t,l,u.validation.fields,p]),fl.createElement("div",{className:ce,"app-field-row-has-error":c?"error":""},fl.createElement("div",{className:me},a),fl.createElement("p",{className:ve},r),i&&fl.createElement("button",{className:pe,onClick:()=>s()},fl.createElement(A.G,{icon:W.gr5,style:{width:"20px",height:"20px",color:"gray"}})))},Sl=(0,a.$j)(e=>{const{blueprints:l,allStatutes:t,selectedBlueprintComponent:n,allModules:o,componentTypes:a,components:i,products:d,companyData:s,companyProcesses:r}=e.flowReducer,{authenticatedUser:u}=e.authReducer,{onBoardingModalsVisibility:c,isOnboarding:m}=e.modalsReducer;return{blueprints:l,allStatutes:t,selectedBlueprintComponent:n,allModules:o,componentTypes:a,components:i,products:d,companyData:s,companyProcesses:r,onBoardingModalsVisibility:c,isOnboarding:m,authenticatedUser:u}},e=>({onSetSelectedProStep:l=>e((0,u.Sc)(l))}))(Cl);var El=t(22590),_l=t(28550),wl=t(88846),Nl=t(62169),Ll=t(84634),Zl=t(9204),xl=t(30401),Il=t(62498),Ml=t(51791),kl=t(97606),Ol=t(8284),Tl=t(12653),Pl=t(80121),Bl=t(31510),Fl=t(97293),Dl=t(45987),Al=t(87462);let Wl=!1;const Vl="data-dev-focus";let zl=!1;if("undefined"!==typeof window&&"undefined"!==typeof document)try{const e=document.createElement("div");e.addEventListener("focus",function(e){e.preventDefault(),e.stopPropagation()},!0),e.focus(Object.defineProperty({},"preventScroll",{get:function(){zl=!0}}))}catch(mn){}const Rl=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.activeElement;try{return e.matches(":focus-visible")}catch(l){}return!1},jl=e=>{const l=e.target&&"getAttribute"in e.target&&e.target;l&&null!=l.getAttribute(Vl)&&requestAnimationFrame(()=>{l.removeAttribute(Vl)})},Ul=()=>{Wl||(Wl=!0,document.addEventListener("blur",jl,!0))},ql="StepComponents_renderComponent__+z3XW",Hl="StepComponents_wrapper__3JMC9",Kl="StepComponents_mainContainer__zd1cq",Xl="StepComponents_firstRow__XX+Ep",Gl="StepComponents_pLabel__NLkqd",Yl="StepComponents_icoContainer__RDLt2",Jl="StepComponents_renderFieldOfComponent__YckNH",Ql="StepComponents_inheritedFieldNameContainer__OP5us",$l="StepComponents_inheritedFieldName__Z3BI3",et="StepComponents_inheritedFieldMandatoryMark__3Oe+t",lt="StepComponents_optionsContainer__yY3PK",tt="StepComponents_mandatoryContainer__CFmJm",nt="StepComponents_mandatoryIconContainer__CHSuP",ot="StepComponents_mandatorySVG__SrpT7",at="StepComponents_notMandatory__fegWP",it="StepComponents_mandatoryText__iZ04J",dt="StepComponents_typeText__+A6OQ",st="StepComponents_visibilityContainer__er+Sk",rt="StepComponents_renderComponents__PxNBA",ut="StepComponents_noContentWrapperNewComponents__dQHs8",ct="StepComponents_noContentWrapperContainerNewComponents__C+epL",mt="StepComponents_noContentParagraphNewComponents__9soSj",pt="StepComponents_firstRowControls__QK4Eb",vt="StepComponents_renderSearchComponentsHost__LM0BX",yt="StepComponents_showSearchComponentContainer__O7l8b",ht="StepComponents_showSearchComponentSelectWithSearchContainer__S0y1p",ft="StepComponents_showSearchComponentSelectWithSearchAddComponentButton__5gcm8",Ct="StepComponents_errorContainer__gR5Ss",gt="StepComponents_peoplePositionsSelectBorderless__iOTkZ",bt="StepComponents_peoplePositionsSelect__kisVR",St="StepComponents_peoplePositionsSelectInput__PuuvP",Et="StepComponents_peoplePositionsSelectMenuOverlay__mivFp",_t="StepComponents_peoplePositionsSelectMenuOverlayItem__mpsra",wt="StepComponents_listContainer__bnutj",Nt="StepComponents_accordionContainer__h-Kjc";var Lt=t(60179),Zt=t(71600),xt=t(67861);const It=t(66918),Mt=(0,o.memo)(e=>{const{selectedProcess:l,blueprints:t,companyPositionsArray:n,showAddButton:a=!0,onEditChange:d=()=>{}}=e,[s,u]=(0,r._M)(),[c,v]=(0,o.useState)([]),[y,h]=(0,o.useState)(!1),f=(0,o.useCallback)(()=>{var e,l,t,n;if(!(null!==s&&void 0!==s&&null!==(e=s.selectedStep)&&void 0!==e&&null!==(l=e.component_blueprints)&&void 0!==l&&l.length)>0)return v([]);const o=It.compose(It.map(It.assoc("hasStatus",(null===(t=It.pathOr("",["status","id"]))||void 0===t?void 0:t.length)>0)),It.map(It.assoc("hasTitle",(null===(n=It.flip(It.prop("title")))||void 0===n?void 0:n.length)>0)))(s.selectedStep.component_blueprints);v([...o.map(e=>({value:e.id,uuid:e._uuid,title:e.title,component:e}))])},[s.selectedStep.component_blueprints]);(0,o.useEffect)(()=>{f()},[s.selectedStep.component_blueprints,f]);const C=(0,o.useCallback)(e=>{(0,de.vG)(e.value).pipe((0,i.P)()).subscribe({next:e=>{const l={id:e.id,is_active:!0,is_inherited:!1,name:e.name,selected_fields:e.fields.map(e=>{var l,t,n,o,a;return{data_type:null===e||void 0===e||null===(l=e.field_type)||void 0===l?void 0:l.data_type,data_type_name:null===e||void 0===e||null===(t=e.field_type)||void 0===t?void 0:t.name,field_name:null!==(n=null===e||void 0===e?void 0:e.value)&&void 0!==n?n:null===e||void 0===e||null===(o=e.field_type)||void 0===o?void 0:o.name,id:e.id,index:e.index,mandatory:!1,options:null!==(a=null===e||void 0===e?void 0:e.options)&&void 0!==a?a:[],process_step_blueprint_field_id:e.id}}),status:{id:"",name:""},title:"",hasStatus:!1,hasTitle:!1,_uuid:(0,m.mR)(),new:!0};u({type:r.Cb.addNewComponentAtStep,value:l}),h(e=>!e)},error:e=>{}})},[u]);return xt.createElement("div",{className:rt},(null===c||void 0===c?void 0:c.length)>0&&(null===c||void 0===c?void 0:c.map((e,l)=>{var t;return xt.createElement(kt,{onEditChange:l=>{d(l,e.component.id)},key:l+e.uuid,value:e.value,compUUID:e.uuid,title:(null===(t=e.title)||void 0===t?void 0:t.length)>0?e.title:"Select title...",companyPositionsArray:n})})),y?xt.createElement(Tt,{onComponentSelect:C,blueprint_components:It.sortWith([It.ascend(It.prop("name"))])(t.filter(e=>It.not(It.includes(e.id,It.pipe(It.pluck("component_blueprints"),It.flatten,It.pipe(It.pluck("id")))(s.steps)))).filter(e=>It.not(It.includes(e.id,It.pipe(It.pluck("value"))(c)))))}):xt.createElement("div",{className:ut,style:{display:0==a?"none":""}},xt.createElement("div",{className:ct},t.length>0?xt.createElement(p.zx,{style:{height:"30px"},title:"Attach Component",clicked:()=>h(e=>!e)}):xt.createElement("p",{className:mt},"There are no available components. Create one first!"))))}),kt=(0,o.memo)(e=>{var l,t,a,d,s,u,c,m,v,y,h,f,C,g,b,S,E,_,w,N,L,Z,x,I,M,k,O,T,P,B,F,D,A,W,V,z,R,j,U,q,H,K,X,G,Y,J,Q,$,ee,le,te,ne;const{value:oe,title:ae,compUUID:ie,companyPositionsArray:re,show:ue=!1,onEditChange:ce=()=>{}}=e,me=(0,o.useRef)(null),[pe,ve]=(0,r._M)(),[ye,he]=(0,o.useState)(It.find(It.allPass([It.propEq("_uuid",ie)]))(null!==(l=null===pe||void 0===pe||null===(t=pe.selectedStep)||void 0===t?void 0:t.component_blueprints)&&void 0!==l?l:[])),[fe,Ce]=(0,o.useState)(""),[,ge]=(0,o.useState)(!1),[be,Se]=(0,o.useState)(null!==(a=(null===ye||void 0===ye||null===(d=ye.options)||void 0===d||null===(s=d.showOnly)||void 0===s?void 0:s.length)>0)&&void 0!==a&&a),[Ee,_e]=(0,o.useState)(null===ye||void 0===ye||null===(u=ye.options)||void 0===u?void 0:u.statusOnly),[we,Ne]=(0,o.useState)(!1),[Le,Ze]=(0,o.useState)(!1),[Ie,Me]=(0,o.useState)(null!==(c=null===ye||void 0===ye?void 0:ye.new)&&void 0!==c?c:ue),[ke,Oe]=(0,o.useState)(()=>{var e;return 0===(null===ye||void 0===ye||null===(e=ye.selected_fields)||void 0===e?void 0:e.length)?[]:It.sortWith([It.ascend(It.prop("index"))])(ye.selected_fields).map((e,l)=>(0,n.Z)({},{id:"row-".concat(e.id),component:xt.createElement(Ot,{key:"field-".concat(null===e||void 0===e?void 0:e.id).concat(l),fieldId:null===e||void 0===e?void 0:e.id,compId:oe,compUUID:ie,componentTitle:null===ye||void 0===ye?void 0:ye.title,isKeyClicked:()=>{var l;const t=null===pe||void 0===pe||null===(l=pe.selectedStep)||void 0===l?void 0:l.component_blueprints.find(e=>e.id===oe);t.options.key=e.field_name,ve({type:r.Cb.updateComponentKeyValue,value:{compBluePrintUUID:ie,compBluePrintId:oe,options:t.options}})},isLeftClicked:()=>{var l,t,o;const a=null===pe||void 0===pe||null===(l=pe.selectedStep)||void 0===l?void 0:l.component_blueprints.find(e=>e.id===oe);var i,d,s;null!==(t=a.options)&&void 0!==t&&null!==(o=t.left)&&void 0!==o&&o.find(l=>l===e.field_name)?a.options=(0,n.Z)((0,n.Z)({},a.options),{},{left:null===(i=a.options)||void 0===i?void 0:i.left.filter(l=>l!==e.field_name)}):a.options=(0,n.Z)((0,n.Z)({},a.options),{},{left:[...null!==(d=null===(s=a.options)||void 0===s?void 0:s.left)&&void 0!==d?d:[],e.field_name]});ve({type:r.Cb.updateComponentKeyValue,value:{compBluePrintUUID:ie,compBluePrintId:oe,isInherited:!1,options:a.options}})},component:ye})}))});(0,o.useEffect)(()=>{var e,l;const t=It.find(It.allPass([It.propEq("_uuid",ie)]))(null!==(e=null===pe||void 0===pe||null===(l=pe.selectedStep)||void 0===l?void 0:l.component_blueprints)&&void 0!==e?e:[]);he(t)},[null===pe||void 0===pe||null===(m=pe.selectedStep)||void 0===m?void 0:m.component_blueprints,oe]);const Te=(0,o.useCallback)(()=>{Ne(!0),(0,de.vG)(ye.id).pipe((0,i.P)()).subscribe({next:e=>{Ne(!1);const l=e.fields.map(e=>{const l=ye.selected_fields.find(l=>l.id===e.id);return l?(l.options=null===e||void 0===e?void 0:e.options,l):(Ce({title:"Change in fields found, please save this step"}),Me(!0),{data_type:null===e||void 0===e||null===(t=e.field_type)||void 0===t?void 0:t.data_type,data_type_name:null===e||void 0===e||null===(n=e.field_type)||void 0===n?void 0:n.name,field_name:null!==(o=null===e||void 0===e?void 0:e.value)&&void 0!==o?o:null===e||void 0===e||null===(a=e.field_type)||void 0===a?void 0:a.name,id:e.id,index:e.index,mandatory:!1,options:null!==(i=null===e||void 0===e?void 0:e.options)&&void 0!==i?i:[],process_step_blueprint_field_id:e.id});var t,n,o,a,i});l.length<ye.selected_fields.length&&(Ce({title:"A field was removed, please save this step"}),Me(!0)),ye.selected_fields=l,ve({type:r.Cb.updateComponentAtStep,value:ye}),Oe(()=>{var e;return 0===(null===ye||void 0===ye||null===(e=ye.selected_fields)||void 0===e?void 0:e.length)?[]:It.sortWith([It.ascend(It.prop("index"))])(ye.selected_fields).map((e,l)=>{var t,o,a;return(0,n.Z)({},{id:"row-".concat(e.id),component:xt.createElement(Ot,{key:"field-".concat(null===e||void 0===e?void 0:e.id).concat(l),fieldId:null===e||void 0===e?void 0:e.id,compId:oe,compUUID:ie,componentTitle:null===ye||void 0===ye?void 0:ye.title,isKeyClicked:()=>{he((0,n.Z)((0,n.Z)({},ye),{},{options:(0,n.Z)((0,n.Z)({},null===ye||void 0===ye?void 0:ye.options),{},{key:e.field_name})})),ve({type:r.Cb.updateComponentKeyValue,value:{compBluePrintUUID:ie,compBluePrintId:ye.id,isInherited:!1,options:(0,n.Z)((0,n.Z)({},null===ye||void 0===ye?void 0:ye.options),{},{key:e.field_name})}})},isKey:(null===ye||void 0===ye||null===(t=ye.options)||void 0===t?void 0:t.key)===e.field_name,isLeft:!(null===ye||void 0===ye||null===(o=ye.options)||void 0===o||null===(a=o.left)||void 0===a||!a.find(l=>l===e.field_name)),isLeftClicked:()=>{var l,t,o,a,i,d,s,u,c,m;null!==ye&&void 0!==ye&&null!==(l=ye.options)&&void 0!==l&&null!==(t=l.left)&&void 0!==t&&t.find(l=>l===e.field_name)?(he((0,n.Z)((0,n.Z)({},ye),{},{options:(0,n.Z)((0,n.Z)({},null===ye||void 0===ye?void 0:ye.options),{},{left:null===ye||void 0===ye||null===(o=ye.options)||void 0===o||null===(a=o.left)||void 0===a?void 0:a.filter(l=>l!==e.field_name)})})),ve({type:r.Cb.updateComponentKeyValue,value:{compBluePrintUUID:ie,compBluePrintId:ye.id,isInherited:!1,options:(0,n.Z)((0,n.Z)({},null===ye||void 0===ye?void 0:ye.options),{},{left:null===ye||void 0===ye||null===(i=ye.options)||void 0===i||null===(d=i.left)||void 0===d?void 0:d.filter(l=>l!==e.field_name)})}})):(he((0,n.Z)((0,n.Z)({},ye),{},{options:(0,n.Z)((0,n.Z)({},null===ye||void 0===ye?void 0:ye.options),{},{left:[...null!==(s=null===ye||void 0===ye||null===(u=ye.options)||void 0===u?void 0:u.left)&&void 0!==s?s:[],e.field_name]})})),ve({type:r.Cb.updateComponentKeyValue,value:{compBluePrintUUID:ie,compBluePrintId:ye.id,isInherited:!1,options:(0,n.Z)((0,n.Z)({},null===ye||void 0===ye?void 0:ye.options),{},{left:[...null!==(c=null===ye||void 0===ye||null===(m=ye.options)||void 0===m?void 0:m.left)&&void 0!==c?c:[],e.field_name]})}}))},component:ye})})})}),he((0,n.Z)((0,n.Z)({},ye),{},{selected_fields:l}))},error:e=>{Ne(!1)}})},[ve]),Pe=(0,o.useCallback)(()=>{ve({type:r.Cb.removeComponentFromStep,value:{uuid:ie}})},[ie]);(0,o.useEffect)(()=>{!function(e,l){!e||arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&!zl||(l&&(!0===l&&(l='a[href], button, input:not([type="hidden"]), [tabindex="0"], select, textarea'),e=e.querySelector(l)),null!=e&&requestAnimationFrame(()=>{e&&(-1==e.tabIndex&&null==e.getAttribute("tabindex")&&(e.tabIndex=-1),Rl()||(e.setAttribute(Vl,""),Wl||Ul()),e.focus({preventScroll:!0}))}))}(null===me||void 0===me?void 0:me.current,!0)},[null===ye||void 0===ye?void 0:ye.title]);const Be=(0,o.useMemo)(()=>[{Header:"Component",columns:[{Header:"Component",accessor:"component"}]}],[]);return xt.createElement(p.sm,{key:oe+ae,className:ql,"comp-in-edit-mode":Ie?"true":null,"app-variant":(null===(v=fe.title)||void 0===v?void 0:v.length)>0||(null===(y=fe.status)||void 0===y?void 0:y.length)>0?"error":"normal",onClickOutside:()=>{ge(!0)}},xt.createElement(p.gc,{title:"".concat(1==(null===ye||void 0===ye||null===(h=ye.options)||void 0===h?void 0:h.allowMultipleInputs)?"Transaction":!0===(null===ye||void 0===ye||null===(f=ye.options)||void 0===f?void 0:f.asReport)?"Report":!0===(null===ye||void 0===ye||null===(C=ye.options)||void 0===C?void 0:C.asDashboard)?"Dashboard":!0===(null===ye||void 0===ye||null===(g=ye.options)||void 0===g?void 0:g.asModuleList)?"Main List":"Component",":")}),xt.createElement("div",{className:Hl},xt.createElement("div",{className:Kl},xt.createElement("div",{className:Xl},xt.createElement("p",{className:Gl,onClick:()=>ce(ye.id)},null===ye||void 0===ye?void 0:ye.name),xt.createElement("div",{className:pt},Ie&&xt.createElement(p.zx,{loadingIn:we,light:!0,icon:xt.createElement("img",{src:xe.Fd}),style:{height:"30px"},clicked:()=>Te()}),Ie&&xt.createElement(p.zx,{light:!0,style:{height:"30px"},title:"Remove",clicked:()=>Pe()}),xt.createElement("div",{className:Yl,onClick:()=>{Me(e=>!e)}},xt.createElement(xe.Kn,{style:{transform:Ie?"rotate(180deg)":"rotate(0deg)"}})))),(null===(b=fe.title)||void 0===b?void 0:b.length)>0&&xt.createElement("span",{className:Ct},fe.title))),Le&&xt.createElement(p.U7,{hasCloseIcon:!0,onClose:()=>Ze(!1),scrollable:!0,shadowedContainerStyle:{minWidth:"500px",width:"100%"},isOpen:Le,blured:!0},xt.createElement("div",{style:{backgroundColor:"rgb(246, 244, 236)",width:"inherit"}},xt.createElement("div",{className:wt,style:{display:"flex",margin:"150px 50px 50px 50px"}},xt.createElement("div",{className:Nt,style:{margin:"30px 0 0 0"}},xt.createElement(Zt.g,{component:ye,selectedComponent:{id:"",name:""},isDraft:!0,setTaskProcessContext:()=>{},processTaskContext:{components:[],newStepComponents:[]}}))))),Ie&&xt.createElement("div",{style:{flex:1,width:"100%"}},xt.createElement(p.jL,{ref:me,ungrouped:!0,title:"Drag to arrange Component Fields:",columned:!0,withAckButton:!1},xt.createElement("br",null),xt.createElement(Lt.z0,null,xt.createElement(Lt.iA,{columns:Be,data:ke,onhandleDragEnd:e=>{e.map((e,l)=>{ve({type:r.Cb.updateComponentFieldIndexKeyValue,value:{compBluePrintUUID:e.component.props.compUUID,compBluePrintId:e.component.props.compId,fieldId:e.component.props.fieldId,index:l}})}),Oe(e)}}))),xt.createElement(p.pd,{id:"moduleList",title:"Use as Transactions List?",ungrouped:!0,withAckButton:!1,style:{margin:"20px 2.5% 10px 5px",width:"auto",display:null!==pe&&void 0!==pe&&null!==(S=pe.selectedStep)&&void 0!==S&&null!==(E=S.options)&&void 0!==E&&E.templateName||1!=(null===pe||void 0===pe||null===(_=pe.selectedStep)||void 0===_?void 0:_.rank)||1==(null===ye||void 0===ye||null===(w=ye.options)||void 0===w?void 0:w.asDashboard)||1==(null===ye||void 0===ye||null===(N=ye.options)||void 0===N?void 0:N.asReport)?"none":""},value:null!==(L=null===ye||void 0===ye||null===(Z=ye.options)||void 0===Z?void 0:Z.asModuleList)&&void 0!==L&&L,toggleSelected:e=>{he((0,n.Z)((0,n.Z)({},ye),{},{options:(0,n.Z)((0,n.Z)({},null===ye||void 0===ye?void 0:ye.options),{},{asReport:!1,asDashboard:!1,asModuleList:e})})),ve({type:r.Cb.updateComponentKeyValue,value:{compBluePrintUUID:ie,compBluePrintId:ye.id,isInherited:!1,options:(0,n.Z)((0,n.Z)({},null===ye||void 0===ye?void 0:ye.options),{},{asReport:!1,asDashboard:!1,asModuleList:e})}})}}),xt.createElement(p.pd,{id:"asReport",title:"Use as a report?",ungrouped:!0,withAckButton:!1,style:{margin:"20px 2.5% 10px 5px",width:"auto",display:null!==pe&&void 0!==pe&&null!==(x=pe.selectedStep)&&void 0!==x&&null!==(I=x.options)&&void 0!==I&&I.templateName||1!=(null===pe||void 0===pe||null===(M=pe.selectedStep)||void 0===M?void 0:M.rank)||1==(null===ye||void 0===ye||null===(k=ye.options)||void 0===k?void 0:k.asModuleList)||1==(null===ye||void 0===ye||null===(O=ye.options)||void 0===O?void 0:O.asDashboard)?"none":""},value:null!==(T=null===ye||void 0===ye||null===(P=ye.options)||void 0===P?void 0:P.asReport)&&void 0!==T&&T,toggleSelected:e=>{he((0,n.Z)((0,n.Z)({},ye),{},{options:(0,n.Z)((0,n.Z)({},null===ye||void 0===ye?void 0:ye.options),{},{asModuleList:!1,asDashboard:!1,asReport:e})})),ve({type:r.Cb.updateComponentKeyValue,value:{compBluePrintUUID:ie,compBluePrintId:ye.id,isInherited:!1,options:(0,n.Z)((0,n.Z)({},null===ye||void 0===ye?void 0:ye.options),{},{asModuleList:!1,asDashboard:!1,asReport:e})}})}}),xt.createElement(p.pd,{id:"asDashboard",title:"View as dashboard?",ungrouped:!0,withAckButton:!1,style:{margin:"20px 2.5% 10px 5px",width:"auto",display:null!==pe&&void 0!==pe&&null!==(B=pe.selectedStep)&&void 0!==B&&null!==(F=B.options)&&void 0!==F&&F.templateName||1!=(null===pe||void 0===pe||null===(D=pe.selectedStep)||void 0===D?void 0:D.rank)||1==(null===ye||void 0===ye||null===(A=ye.options)||void 0===A?void 0:A.asModuleList)||1==(null===ye||void 0===ye||null===(W=ye.options)||void 0===W?void 0:W.asReport)?"none":""},value:null!==(V=null===ye||void 0===ye||null===(z=ye.options)||void 0===z?void 0:z.asDashboard)&&void 0!==V&&V,toggleSelected:e=>{he((0,n.Z)((0,n.Z)({},ye),{},{options:(0,n.Z)((0,n.Z)({},null===ye||void 0===ye?void 0:ye.options),{},{asReport:!1,asModuleList:!1,asDashboard:e})})),ve({type:r.Cb.updateComponentKeyValue,value:{compBluePrintUUID:ie,compBluePrintId:ye.id,isInherited:!1,options:(0,n.Z)((0,n.Z)({},null===ye||void 0===ye?void 0:ye.options),{},{asReport:!1,asModuleList:!1,asDashboard:e})}})}}),xt.createElement(p.pd,{id:"multipleInputs",title:"Allow multiple inputs?",ungrouped:!0,withAckButton:!1,style:{margin:"20px 2.5% 10px 5px",width:"auto",display:null!==pe&&void 0!==pe&&null!==(R=pe.selectedStep)&&void 0!==R&&null!==(j=R.options)&&void 0!==j&&j.templateName||1==(null===ye||void 0===ye||null===(U=ye.options)||void 0===U?void 0:U.asModuleList)||1==(null===ye||void 0===ye||null===(q=ye.options)||void 0===q?void 0:q.asReport)||1==(null===ye||void 0===ye||null===(H=ye.options)||void 0===H?void 0:H.asDashboard)?"none":ye.selected_fields.filter(e=>{var l;return null===(l=e.options)||void 0===l?void 0:l.mapToItem}).length>0&&ye.selected_fields.find(e=>"Transaction List"===e.data_type_name)?"":"none"},value:null!==(K=null===ye||void 0===ye||null===(X=ye.options)||void 0===X?void 0:X.allowMultipleInputs)&&void 0!==K&&K,toggleSelected:e=>{he((0,n.Z)((0,n.Z)({},ye),{},{options:(0,n.Z)((0,n.Z)({},null===ye||void 0===ye?void 0:ye.options),{},{allowMultipleInputs:e})})),ve({type:r.Cb.updateComponentKeyValue,value:{compBluePrintUUID:ie,compBluePrintId:ye.id,isInherited:!1,options:(0,n.Z)((0,n.Z)({},null===ye||void 0===ye?void 0:ye.options),{},{allowMultipleInputs:e})}})}}),xt.createElement(p.pd,{id:"showAll",title:"Show component to all?",ungrouped:!0,withAckButton:!1,style:{margin:"20px 2.5% 10px 5px",width:"auto",display:null!==pe&&void 0!==pe&&null!==(G=pe.selectedStep)&&void 0!==G&&null!==(Y=G.options)&&void 0!==Y&&Y.templateName?"none":""},value:!be,toggleSelected:e=>{Se(!e)}}),xt.createElement(p.jL,{style:{display:null!==pe&&void 0!==pe&&null!==(J=pe.selectedStep)&&void 0!==J&&null!==(Q=J.options)&&void 0!==Q&&Q.templateName?"none":be?"":"none"},ref:me,ungrouped:!0,title:"Only show this component to:",columned:!0,withAckButton:!1},xt.createElement("br",null),xt.createElement(se.Cm,{tagEmplacement:"inlined",searchable:!1,items:re,groupedBy:"department",groupname:"department",triggerType:"chevron",initialSelectedValues:null===ye||void 0===ye||null===($=ye.options)||void 0===$||null===(ee=$.showOnly)||void 0===ee?void 0:ee.map(e=>re.find(l=>l.value===e)),className:bt,inputClassName:St,molclassname:Et,moliclassname:_t,onChange:e=>{he((0,n.Z)((0,n.Z)({},ye),{},{options:(0,n.Z)((0,n.Z)({},null===ye||void 0===ye?void 0:ye.options),{},{showOnly:null===e||void 0===e?void 0:e.map(e=>null===e||void 0===e?void 0:e.value)})})),ve({type:r.Cb.updateComponentKeyValue,value:{compBluePrintUUID:ie,compBluePrintId:ye.id,isInherited:!1,options:(0,n.Z)((0,n.Z)({},null===ye||void 0===ye?void 0:ye.options),{},{showOnly:null===e||void 0===e?void 0:e.map(e=>null===e||void 0===e?void 0:e.value)})}})}})),xt.createElement(p.jL,{style:{display:null!==pe&&void 0!==pe&&null!==(le=pe.selectedStep)&&void 0!==le&&null!==(te=le.options)&&void 0!==te&&te.templateName?"none":Ee||be?"":"none"},ref:me,ungrouped:!0,title:"Only show this component to status:",columned:!0,withAckButton:!1},xt.createElement("br",null),xt.createElement("input",{type:"text",className:bt,style:{padding:"15px 10px",fontSize:"16px",border:"1px solid var(--app-color-gray-lighter)"},defaultValue:null===ye||void 0===ye||null===(ne=ye.options)||void 0===ne?void 0:ne.statusOnly,onBlur:e=>{he((0,n.Z)((0,n.Z)({},ye),{},{options:(0,n.Z)((0,n.Z)({},null===ye||void 0===ye?void 0:ye.options),{},{statusOnly:e.target.value})})),ve({type:r.Cb.updateComponentKeyValue,value:{compBluePrintUUID:ie,compBluePrintId:ye.id,isInherited:!1,options:(0,n.Z)((0,n.Z)({},null===ye||void 0===ye?void 0:ye.options),{},{statusOnly:e.target.value})}})}}))))},(e,l)=>l.props===e.props),Ot=(0,o.memo)(e=>{var l,t,n,a,i,d,s,u,c,m,p;const{fieldId:v,compId:y,compUUID:h,componentTitle:f,isKeyClicked:C,isLeftClicked:g}=e,[b,S]=(0,r._M)(),[E,_]=(0,o.useState)(!1),w=(0,o.useCallback)(()=>{var e,l,t;const n=function(e){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return It.find(It.propEq("_uuid",e))(l)}(h,null!==(e=null===b||void 0===b||null===(l=b.selectedStep)||void 0===l?void 0:l.component_blueprints)&&void 0!==e?e:[]);return function(e){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return It.find(It.propEq("id",e))(l)}(v,null!==(t=null===n||void 0===n?void 0:n.selected_fields)&&void 0!==t?t:[])},[y,v,null===b||void 0===b||null===(l=b.selectedStep)||void 0===l?void 0:l.component_blueprints]),N=e=>_(e),[L,Z]=(0,o.useState)(w());(0,o.useEffect)(()=>{Z(w())},[w,b.selectedStep.component_blueprints]);const x=(0,o.useCallback)(()=>{var e,l;N(!1);(null===(e=null!==(l=null===f||void 0===f?void 0:f.split(", "))&&void 0!==l?l:[])||void 0===e?void 0:e.some(e=>(null===e||void 0===e?void 0:e.toLowerCase())==(null===L||void 0===L?void 0:L.field_name.toLowerCase())))&&N(!0)},[f,null===L||void 0===L?void 0:L.field_name]);(0,o.useEffect)(()=>{x()},[]),(0,o.useEffect)(()=>{var e,l;N(!1);(null===(e=null!==(l=null===f||void 0===f?void 0:f.split(", "))&&void 0!==l?l:[])||void 0===e?void 0:e.some(e=>(null===e||void 0===e?void 0:e.toLowerCase())==(null===L||void 0===L?void 0:L.field_name.toLowerCase())))&&N(!0)},[y,f,x,null===L||void 0===L?void 0:L.field_name,null===b||void 0===b||null===(t=b.selectedStep)||void 0===t?void 0:t.component_blueprints]);const I=(0,o.useCallback)(e=>{!E&&(null===y||void 0===y?void 0:y.length)>0&&S({type:r.Cb.updateComponentFieldKeyValue,value:{compBluePrintUUID:h,compBluePrintId:y,isInherited:!1,fieldId:v,visible:e,index:null===L||void 0===L?void 0:L.index,mandatory:0!=e&&("output"!==L.data_type&&(null===L||void 0===L?void 0:L.mandatory))}})},[y,h,null===L||void 0===L?void 0:L.mandatory,v,E,S,null===L||void 0===L?void 0:L.index]),M=(0,o.useCallback)(e=>{!E&&(null===y||void 0===y?void 0:y.length)>0&&S({type:r.Cb.updateComponentFieldKeyValue,value:{compBluePrintUUID:h,compBluePrintId:y,isInherited:!1,fieldId:v,mandatory:"output"!==L.data_type&&e,index:null===L||void 0===L?void 0:L.index,visible:1==e||(null===L||void 0===L?void 0:L.visible)}})},[y,h,null===L||void 0===L?void 0:L.visible,v,E,S,null===L||void 0===L?void 0:L.index]);return xt.createElement("div",{className:Jl,"app-variant":E?"read-only":"editable","app-color":null!==L&&void 0!==L&&L.visible?"active":"inactive",tabIndex:"0"},xt.createElement("div",{className:Ql},xt.createElement("p",{className:$l},null===L||void 0===L?void 0:L.field_name),xt.createElement("p",{className:et},(null===L||void 0===L?void 0:L.mandatory)&&"*")),xt.createElement("p",{className:dt},L.data_type_name),xt.createElement("span",{className:lt},xt.createElement("div",{className:tt,onClick:()=>{M(!(null!==L&&void 0!==L&&L.mandatory))}},"output"!==L.data_type&&"ID"!==L.data_type_name&&xt.createElement("span",{className:nt},null!==L&&void 0!==L&&L.mandatory?xt.createElement(xe.H_,{className:ot}):xt.createElement("div",{className:at})),"output"!==L.data_type&&"ID"!==L.data_type_name&&xt.createElement("p",{className:it},E?"":"Required")),"output"!==L.data_type&&"ID"!==L.data_type_name&&xt.createElement(A.G,{icon:W.DD4,style:{marginRight:"5px",color:(null===b||void 0===b||null===(n=b.selectedStep)||void 0===n||null===(a=n.component_blueprints)||void 0===a||null===(i=a.find(e=>e.id===y))||void 0===i||null===(d=i.options)||void 0===d?void 0:d.key)===(null===L||void 0===L?void 0:L.field_name)?"black":"lightgray"},onClick:C}),xt.createElement(A.G,{icon:W.AiD,style:{marginRight:"5px",color:null!==b&&void 0!==b&&null!==(s=b.selectedStep)&&void 0!==s&&null!==(u=s.component_blueprints)&&void 0!==u&&null!==(c=u.find(e=>e.id===y))&&void 0!==c&&null!==(m=c.options)&&void 0!==m&&null!==(p=m.left)&&void 0!==p&&p.find(e=>e===(null===L||void 0===L?void 0:L.field_name))?"black":"lightgray"},onClick:g}),xt.createElement("div",{className:st,onClick:()=>{I(!(null!==L&&void 0!==L&&L.visible))}},void 0==(null===L||void 0===L?void 0:L.visible)||null!==L&&void 0!==L&&L.visible?xt.createElement(xe.Ch,null):xt.createElement(xe.vV,null))))}),Tt=e=>{var l;const{onComponentSelect:t,blueprint_components:n}=e,[a]=(0,o.useState)(n),[i,d]=(0,o.useState)(!0),[s,r]=(0,o.useState)({});return xt.createElement("div",{className:vt},i?xt.createElement("div",{className:yt,"app-display-variant":i?"table-row":"none"},xt.createElement("div",{className:ht},xt.createElement(se.yV,{placeholder:"Select component to attach ...",items:a.map(e=>({value:null===e||void 0===e?void 0:e.id,label:null===e||void 0===e?void 0:e.name,type:!0===(null===e||void 0===e?void 0:e.readonly)?"Template":(0,m.m)(null===e||void 0===e?void 0:e.name)})),id:"select-step-new-blueprint-component",initialSelectedValues:[],groupedBy:"type",groupname:"type",inputStyle:{cursor:"pointer"},className:gt,inputClassName:St,molclassname:Et,moliclassname:_t,onChange:e=>{(null===e||void 0===e?void 0:e.length)>0?r(e[0]):r({value:"",label:""})}},xt.createElement(A.G,{className:"fa-icon",icon:W.ptq,style:{marginRight:"20px",color:"gray"}})),(null===s||void 0===s||null===(l=s.value)||void 0===l?void 0:l.length)>0&&xt.createElement("button",{type:"button",className:ft},xt.createElement(xe.H_,{onClick:()=>{t(s),d(e=>!e)}})))):xt.createElement("p",{style:{textAlign:"center",marginBottom:"auto",color:"var(--app-color-gray-light)",fontFamily:"var(--app-text-main-font)",fontSize:"16px",marginTop:"20px",lineHeight:"32px"}},"Finish adding your previous component to add another."))};var Pt=t(64468);const Bt="StepData_multiselectWithSearch__FVnWX",Ft="StepData_smoMultiselectParent__kAn4t",Dt="StepData_selectMenuItem__i040a",At="StepData_inputClassName__U3j-5",Wt="StepData_peoplePositionsSelect__FZEAk",Vt="StepData_peoplePositionsSelectInput__4N5AT",zt="StepData_peoplePositionsSelectMenuOverlay__VU2s4",Rt="StepData_peoplePositionsSelectMenuOverlayItem__xI2Zj",jt=(0,o.createRef)(null),Ut={parentSteps:{id:"parentStep",title:"Parent Step",placeholder:"Select steps here...",defaultHighlighted:!0,withAckButton:!1,useContext:r.QJ},stepName:{id:"stepName",title:"Step Name",defaultHighlighted:!0,withAckButton:!1,useContext:r.QJ},guidance:{id:"guidance",title:"Description",defaultHighlighted:!0,withAckButton:!1,useContext:r.QJ},rank:{id:"rank",title:"Rank",defaultHighlighted:!0,withAckButton:!1,useContext:r.QJ},newComponents:{id:"newComponents",title:"Components to be used in this step",defaultHighlighted:!0,readOnly:!0,otherContent:!0,withAckButton:!1,useContext:r.QJ},pathwayOptions:{id:"pathwayOptions",title:"Branch to the following steps",defaultHighlighted:!0,withAckButton:!1,useContext:r.QJ},isFinalStep:{id:"isFinalStep",title:"Is this the final step of this workflow?",ungrouped:!0,withAckButton:!1,useContext:r.QJ},stepTemplate:{id:"stepTemplate",title:"Custom Template",defaultHighlighted:!0,withAckButton:!1,useContext:r.QJ},showStepAll:{id:"showStep",title:"Show step to all?",ungrouped:!0,withAckButton:!1,useContext:r.QJ},showStepAuthor:{id:"showStepAuthor",title:"Only show step to author?",ungrouped:!0,withAckButton:!1,useContext:r.QJ},showAsTabbed:{id:"showAsTabbed",title:"Use tabs for components?",ungrouped:!0,withAckButton:!1,useContext:r.QJ},deleteOnBack:{id:"deleteOnBack",title:"Delete step inputs made on back?",ungrouped:!0,withAckButton:!1,useContext:r.QJ}};var qt=t(74369),Ht=t(32086),Kt=t(67861);const Xt=["percentualWidth","children","style"],Gt=e=>{const{percentualWidth:l,children:t,style:o}=e,a=(0,Dl.Z)(e,Xt);return Kt.createElement("div",(0,Al.Z)({style:(0,n.Z)({width:l},o)},a),t)},Yt=(0,a.$j)(e=>{const{blueprints:l,allStatutes:t,selectedProcess:n,selectedProStep:o,companyData:a,companyPositionsArray:i}=e.flowReducer;return{blueprints:l,allStatutes:t,selectedProcess:n,selectedProStep:o,companyData:a,companyPositionsArray:i}},e=>({onSetSelectedProStep:l=>e((0,u.Sc)(l)),onSetSelectedProStepOptions:l=>e((0,u.Jk)(l))}))(e=>{var l,t,a,d,s,u,v,y,h,f,C,g,b,S,E,_,w,N,L,Z,x,I,M,k,O,T,P,B,F,D,A,W,V,z,R,j,U,q,H,K,X,G;const{onSetSelectedProStep:Y,selectedProcess:J,companyPositionsArray:Q,blueprints:$,companyData:ee,onEditChange:le=()=>{}}=e,[te,ne]=(0,r._M)(),[oe,ae]=(0,o.useState)([]),[ie,de]=(0,o.useState)(!1),[re,ue]=(0,o.useState)([]),[ce,me]=(0,o.useState)(!1),[pe,ve]=(0,o.useState)([]),[ye,he]=(0,o.useState)(null!==(l=null===(t=te.selectedStep)||void 0===t||null===(a=t.options)||void 0===a?void 0:a.useCustomTemplate)&&void 0!==l&&l),[fe,Ce]=(0,o.useState)({parentSteps:"",stepName:"",estimatedTime:"",guidance:"",inheritedComponents:"",newComponents:"",pathwayOptions:""}),ge=(0,m.DJ)();(0,o.useEffect)(()=>{var e,l;0==(null===(e=te.selectedStep)||void 0===e||null===(l=e.options)||void 0===l?void 0:l.is_start_next_process)&&ne({type:r.Cb.updateSelectedStepPathways,value:[...te.selectedStep.pathway_steps]})},[null===(d=te.selectedStep)||void 0===d||null===(s=d.options)||void 0===s?void 0:s.is_start_next_process]),(0,o.useEffect)(()=>{Se()},[te.selectedStep]),(0,o.useEffect)(()=>{de(!0),(0,c.hI)({processId:J.id,parentsOnly:1}).pipe((0,i.P)()).subscribe({next:e=>{var l,t;(null===e||void 0===e?void 0:e.length)>0?ge()&&ae([...wl.Z(qt.Z((e,l)=>e.concat({rank:l.rank,label:l.name,value:l.id}),[]),Ht.Z(Ol.Z("id",null===(t=te.selectedStep)||void 0===t?void 0:t.id)))(e)]):null!==(l=te.selectedStep)&&void 0!==l&&l.isNewStep&&!kl.Z(Ol.Z("is_start",!0))(null===te||void 0===te?void 0:te.steps)&&ge()&&ae([]);ge()&&de(!1),ge()&&be()},error:e=>{ge()&&de(!1)}})},[]);const be=()=>{var e,l,t;"newDefaultStep"!==(null===(e=te.selectedStep)||void 0===e?void 0:e.id)&&""!==(null===te||void 0===te||null===(l=te.selectedStep)||void 0===l?void 0:l.id)&&(me(!0),(0,c.hI)({processId:J.id,pathways:1,forStepId:null===(t=te.selectedStep)||void 0===t?void 0:t.id}).pipe((0,i.P)()).subscribe({next:e=>{if(e)try{var l,t,n,o,a,i;const d=Ht.Z(Ol.Z("id",null===te||void 0===te||null===(l=te.selectedStep)||void 0===l?void 0:l.id),null!==(t=null===e||void 0===e?void 0:e.steps)&&void 0!==t?t:[]),s=null!==(n=Ht.Z(Ol.Z("id",J.id),null!==(o=e.processes)&&void 0!==o?o:[]))&&void 0!==n?n:[],r=[...null!==(a=null===d||void 0===d?void 0:d.map(e=>({value:null===e||void 0===e?void 0:e.id,label:null===e||void 0===e?void 0:e.name,rank:null===e||void 0===e?void 0:e.rank,icon:xe.CH,type:"step"})))&&void 0!==a?a:[],...null!==(i=null===s||void 0===s?void 0:s.map(e=>({value:null===e||void 0===e?void 0:e.id,label:null===e||void 0===e?void 0:e.name,icon:xe.IR,type:"process"})))&&void 0!==i?i:[]];r&&(me(!1),ue(r),me(!1)),ve([...d,...s])}catch(d){me(!1)}else ae([]),me(!1)},error:e=>{me(!1)}}))},Se=(0,o.useCallback)(()=>{},[te.steps,te.selectedStep]),Ee=[...qt.Z((e,l)=>e.concat({value:l.id,label:l.name}),[])(null!==(u=null===te||void 0===te||null===(v=te.selectedStep)||void 0===v?void 0:v.parent_steps)&&void 0!==u?u:[])],_e=null===te||void 0===te||null===(y=te.selectedStep)||void 0===y||null===(h=y.pathway_processes)||void 0===h?void 0:h.concat(null===te||void 0===te||null===(f=te.selectedStep)||void 0===f?void 0:f.pathway_steps),we=((null===_e||void 0===_e?void 0:_e.length)>0&&(null===(C=Bl.Z(_e))||void 0===C||C.map(e=>null===e||void 0===e?void 0:e.name).join(", ")),(0,o.useCallback)(function(){var e,l,t,o,a,i,d,s,r,u,c,m,p,v,y,h,f,C;let g=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all";const b="Step name is mandatory",S="Short description of step is mandatory",E="Some inherited component have missing required information",_="Some new component have missing required informations",w="Error inside Pathway Options";let N=(0,n.Z)({},fe);if(g)switch(g){case"stepName":N.stepName="string"==typeof(null===te||void 0===te||null===(e=te.selectedStep)||void 0===e?void 0:e.name)&&(null===te||void 0===te||null===(l=te.selectedStep)||void 0===l||null===(t=l.name)||void 0===t?void 0:t.length)>0?"":b;break;case"guidance":N.guidance="string"==typeof(null===te||void 0===te||null===(o=te.selectedStep)||void 0===o?void 0:o.guidance)&&(null===te||void 0===te||null===(a=te.selectedStep)||void 0===a||null===(i=a.guidance)||void 0===i?void 0:i.length)>0?"":S;break;case"newComponents":var L,Z,x,I,M;N.newComponents=Array.isArray(null===te||void 0===te||null===(L=te.selectedStep)||void 0===L?void 0:L.component_blueprints)?_:"";(null===te||void 0===te||null===(Z=te.selectedStep)||void 0===Z||null===(x=Z.component_blueprints)||void 0===x?void 0:x.find(e=>{var l;return!(null!==e&&void 0!==e&&e.status)||""==(null===e||void 0===e?void 0:e.status)||""==(null===e||void 0===e||null===(l=e.status)||void 0===l?void 0:l.id)}))&&(N.newComponents="Invalid status in new blueprints components");(null===te||void 0===te||null===(I=te.selectedStep)||void 0===I||null===(M=I.component_blueprints)||void 0===M?void 0:M.find(e=>!(null!==e&&void 0!==e&&e.title)||""==(null===e||void 0===e?void 0:e.title)))&&(N.newComponents+="\nInvalid title in new blueprints components");break;case"pathwayOptions":N.pathwayOptions=Array.isArray(null===te||void 0===te||null===(d=te.selectedStep)||void 0===d?void 0:d.pathway_steps)&&Array.isArray(null===te||void 0===te||null===(s=te.selectedStep)||void 0===s?void 0:s.pathway_processes)?"":w;break;default:N.stepName="string"==typeof(null===te||void 0===te||null===(r=te.selectedStep)||void 0===r?void 0:r.name)&&(null===te||void 0===te||null===(u=te.selectedStep)||void 0===u||null===(c=u.name)||void 0===c?void 0:c.length)>0?"":b,N.guidance="string"==typeof(null===te||void 0===te||null===(m=te.selectedStep)||void 0===m?void 0:m.guidance)&&(null===te||void 0===te||null===(p=te.selectedStep)||void 0===p||null===(v=p.guidance)||void 0===v?void 0:v.length)>0?"":S,N.inheritedComponents=Array.isArray(null===te||void 0===te||null===(y=te.selectedStep)||void 0===y?void 0:y.component_blueprints)?"":E,N.newComponents=Array.isArray(null===te||void 0===te||null===(h=te.selectedStep)||void 0===h?void 0:h.component_blueprints)?"":_,N.pathwayOptions=Array.isArray(null===te||void 0===te||null===(f=te.selectedStep)||void 0===f?void 0:f.pathway_steps)&&Array.isArray(null===te||void 0===te||null===(C=te.selectedStep)||void 0===C?void 0:C.pathway_processes)?"":w}return Ce(N),N},[null===te||void 0===te?void 0:te.selectedStep,fe])),Ne=!kl.Z(Ol.Z("is_start",!0))(Ht.Z(Ol.Z("id",te.selectedStep.id),null===te||void 0===te?void 0:te.steps))||1==(null===te||void 0===te||null===(g=te.selectedStep)||void 0===g?void 0:g.is_start);return Kt.createElement("div",null,Kt.createElement(Gt,{percentualWidth:"100%",style:{marginBottom:"10px"}},Kt.createElement(p.Lb,{title:"Step Name"}),Kt.createElement(p.n2,(0,Al.Z)({},Ut.stepName,{title:"",value:null===(b=te.selectedStep)||void 0===b?void 0:b.name,sectionError:fe.stepName,onOpenChanged:e=>{!e&&we("stepName")}}),Kt.createElement(p.WH,{onControlTouched:()=>{},placeholder:"Insert step name...",text:null===(S=te.selectedStep)||void 0===S?void 0:S.name,onTextChanged:e=>{ne({type:r.Cb.updateSelectedStepKeyValue,value:{name:e}}),Y({name:e})}}))),Kt.createElement(Gt,{percentualWidth:"100%"},Kt.createElement(p.Lb,{title:"Description"}),Kt.createElement(p.n2,(0,Al.Z)({},Ut.guidance,{title:"",value:null===(E=te.selectedStep)||void 0===E?void 0:E.guidance,sectionError:fe.guidance}),Kt.createElement(p.WH,{plcHoffset:"0px",text:null===(_=te.selectedStep)||void 0===_?void 0:_.guidance,placeholder:"Add description for step here...",onTextChanged:e=>{ne({type:r.Cb.updateSelectedStepKeyValue,value:{guidance:e}}),Y({guidance:e})}}))),Kt.createElement(Gt,{percentualWidth:"100%",style:{display:1==Ne?"none":""}},Kt.createElement(p.Lb,{title:"Connect Step To"}),Kt.createElement(p.n2,(0,Al.Z)({},Ut.parentSteps,{title:"",readOnly:Ne,value:(null===(w=te.selectedStep)||void 0===w||null===(N=w.parent_steps)||void 0===N?void 0:N.length)>0?qt.Z((e,l)=>e.concat(l.name),[])(Bl.Z(null===(L=te.selectedStep)||void 0===L?void 0:L.parent_steps)).map((e,l)=>Kt.createElement(Pt.Vp,{key:"tag"+l},e)):Ne?Kt.createElement(Pt.Vp,null,"Start of Workflow"):null,sectionError:fe.parentSteps,onOpenChanged:e=>{!e&&!Ne&&we("parentSteps")}}),ie&&Kt.createElement("span",{style:{display:"flex",width:"100%",justifyContent:"center",alignItems:"center"}},Kt.createElement(p.$j,{size:30,type:"ThreeDots"})),(null===oe||void 0===oe?void 0:oe.length)>0&&!Ne&&Kt.createElement(p.gK,{labelsTag:!0,tagCloseButtonType:"X",tagType:"step-plated",tagEmplacement:"inlined",triggerType:"eyeglass",initialSelectedItems:Ee,placeholder:"Search steps here...",className:Bt,inputClassName:At,molclassname:Ft,moliclassname:Dt,menuOverlayListItemStyle:{padding:"10px",maxWidth:"100%"},onChange:e=>{ne({type:r.Cb.updateSelectedStepParentSteps,value:[...qt.Z((e,l)=>e.concat({rank:l.rank,name:l.label,id:l.value}),[])(e)]}),setTimeout(Se(),0)},items:oe}),0!=(null===oe||void 0===oe?void 0:oe.length)||ie||1!=(null===te||void 0===te?void 0:te.selectedStep.isNewStep)?null:Kt.createElement(Pt.Vp,{tagType:"step-plated"},"Start of Workflow"))),Kt.createElement(Gt,{percentualWidth:"100%",style:{marginTop:"20px"}},Kt.createElement(p.Lb,{title:Ut.newComponents.title}),Kt.createElement(Mt,{onEditChange:(e,l)=>le(e,l),showAddButton:!ye,selectedProcess:J,blueprints:$,companyPositionsArray:Q})),Kt.createElement(Gt,{percentualWidth:"100%",style:{marginTop:"20px"}},Kt.createElement(p.pd,(0,Al.Z)({},Ut.showAsTabbed,{style:{margin:"20px 2.5% 0 5px",width:"auto"},value:null!==(Z=null===(x=te.selectedStep)||void 0===x||null===(I=x.options)||void 0===I?void 0:I.tabbed)&&void 0!==Z&&Z,toggleSelected:e=>{var l,t;ne({type:r.Cb.updateSelectedStepKeyValue,value:{options:(0,n.Z)((0,n.Z)({},null===(l=te.selectedStep)||void 0===l?void 0:l.options),{},{tabbed:e})}}),Y({options:(0,n.Z)((0,n.Z)({},null===(t=te.selectedStep)||void 0===t?void 0:t.options),{},{tabbed:e})})}}))),Kt.createElement(Gt,{percentualWidth:"100%",style:{marginTop:"20px",display:1==(null===(M=te.selectedStep)||void 0===M?void 0:M.is_end)||1==(null===(k=te.selectedStep)||void 0===k?void 0:k.is_start)?"none":""}},Kt.createElement(p.pd,(0,Al.Z)({},Ut.deleteOnBack,{style:{margin:"20px 2.5% 0 5px",width:"auto"},value:null!==(O=null===(T=te.selectedStep)||void 0===T||null===(P=T.options)||void 0===P?void 0:P.deleteOnBack)&&void 0!==O&&O,toggleSelected:e=>{var l,t;ne({type:r.Cb.updateSelectedStepKeyValue,value:{options:(0,n.Z)((0,n.Z)({},null===(l=te.selectedStep)||void 0===l?void 0:l.options),{},{deleteOnBack:e})}}),Y({options:(0,n.Z)((0,n.Z)({},null===(t=te.selectedStep)||void 0===t?void 0:t.options),{},{deleteOnBack:e})})}}))),Kt.createElement(Gt,{percentualWidth:"100%",style:{marginTop:"20px",display:1==(null===(B=te.selectedStep)||void 0===B?void 0:B.is_end)?"none":""}},Kt.createElement(p.pd,(0,Al.Z)({},Ut.showStepAll,{style:{margin:"20px 2.5% 0 5px",width:"auto"},value:null===(F=null===(D=te.selectedStep)||void 0===D||null===(A=D.options)||void 0===A?void 0:A.showStepAll)||void 0===F||F,toggleSelected:e=>{var l,t;ne({type:r.Cb.updateSelectedStepKeyValue,value:{options:(0,n.Z)((0,n.Z)({},null===(l=te.selectedStep)||void 0===l?void 0:l.options),{},{showOnly:[],showStepAll:e})}}),Y({options:(0,n.Z)((0,n.Z)({},null===(t=te.selectedStep)||void 0===t?void 0:t.options),{},{showOnly:[],showStepAll:e})})}}))),Kt.createElement(Gt,{percentualWidth:"100%",style:{marginTop:"20px",display:0==(null===(W=te.selectedStep)||void 0===W||null===(V=W.options)||void 0===V?void 0:V.showStepAll)?"":"none"}},Kt.createElement(p.pd,(0,Al.Z)({},Ut.showStepAuthor,{style:{margin:"20px 2.5% 0 5px",width:"auto"},value:null!==(z=null===(R=te.selectedStep)||void 0===R||null===(j=R.options)||void 0===j?void 0:j.showStepAuthor)&&void 0!==z&&z,toggleSelected:e=>{var l,t;ne({type:r.Cb.updateSelectedStepKeyValue,value:{options:(0,n.Z)((0,n.Z)({},null===(l=te.selectedStep)||void 0===l?void 0:l.options),{},{showOnly:[],showStepAuthor:e})}}),Y({options:(0,n.Z)((0,n.Z)({},null===(t=te.selectedStep)||void 0===t?void 0:t.options),{},{showOnly:[],showStepAuthor:e})})}}))),Kt.createElement(p.jL,{style:{display:0==(null===(U=te.selectedStep)||void 0===U||null===(q=U.options)||void 0===q?void 0:q.showStepAll)?"":"none",paddingLeft:"10px"},ungrouped:!0,title:"Only show this step to:",columned:!0,withAckButton:!1},Kt.createElement("br",null),Kt.createElement(se.Cm,{tagEmplacement:"inlined",searchable:!1,items:Q,groupedBy:"department",groupname:"department",triggerType:"chevron",initialSelectedValues:null===(H=te.selectedStep)||void 0===H||null===(K=H.options)||void 0===K||null===(X=K.showOnly)||void 0===X?void 0:X.map(e=>Q.find(l=>l.value===e)),className:Wt,inputClassName:Vt,molclassname:zt,moliclassname:Rt,onChange:e=>{var l,t;ne({type:r.Cb.updateSelectedStepKeyValue,value:{options:(0,n.Z)((0,n.Z)({},null===(l=te.selectedStep)||void 0===l?void 0:l.options),{},{showStepAuthor:!1,showOnly:null===e||void 0===e?void 0:e.map(e=>null===e||void 0===e?void 0:e.value)})}}),Y({options:(0,n.Z)((0,n.Z)({},null===(t=te.selectedStep)||void 0===t?void 0:t.options),{},{showStepAuthor:!1,showOnly:null===e||void 0===e?void 0:e.map(e=>null===e||void 0===e?void 0:e.value)})})}})),Kt.createElement(p.pd,(0,Al.Z)({},Ut.isFinalStep,{style:{margin:"20px 2.5% 0 5px",width:"auto"},value:null===(G=te.selectedStep)||void 0===G?void 0:G.is_end,toggleSelected:e=>{var l,t;1==e?(Y({child_steps:[]}),ne({type:r.Cb.updateSelectedStepKeyValue,value:{is_end:e,options:(0,n.Z)((0,n.Z)({},null===(l=te.selectedStep)||void 0===l?void 0:l.options),{},{showOnly:[],showStepAll:!0})}}),Y({is_end:e,options:(0,n.Z)((0,n.Z)({},null===(t=te.selectedStep)||void 0===t?void 0:t.options),{},{showOnly:[],showStepAll:!0})})):(ne({type:r.Cb.updateSelectedStepKeyValue,value:{is_end:e}}),Y({is_end:e}))}})))}),Jt="StepModal_host__e9qAE",Qt="StepModal_titleContainer__rQtrC",$t="StepModal_contentContainer__ySA3D",en="StepModal_saveButtonContainer__ysY+S",ln="StepModal_controls2__7XszY";t(55859);var tn=t(67861);const nn=(0,o.memo)(e=>{var l,t,a,d,s,v,y,h,f,C,g,b,S,E,_,w,N,L,Z;const[x,I]=(0,o.useState)(""),{visible:k,onClose:T,onSave:P,selectedProcess:B,companyProcesses:F,shadowedContainerStyle:D={minWidth:"500px",width:""===x?"34%":"90%"},onBoardingCompleted:A,onEditChange:W=()=>{}}=e,[z,R]=(0,r._M)(),[j]=(0,o.useState)(z.selectedStep),[,U]=(0,r.QJ)(),[q,H]=(0,o.useState)(!1),[K,X]=(0,o.useState)(!1),[G,Y]=(0,o.useState)(""),{onBoardingModalsVisibility:J,isOnboarding:Q}=e,{eightModalVisible:$,tenthModalVisible:ee}=J,le=(0,o.useCallback)(e=>{R({type:r.Cb.unsetSelectedStep}),T&&T(e)},[T,R]),te=(0,o.useCallback)((e,l)=>U({open:!0,activeElement:e,errors:{[e]:l}}),[U]),oe=(0,o.useCallback)(e=>{var l,t,n;let o=!0,a=[];var i,d;0==e.is_start&&0==(null===e||void 0===e||null===(l=e.parent_steps)||void 0===l?void 0:l.length)&&(o=!1,a.push({[null===Ut||void 0===Ut||null===(i=Ut.parent_steps)||void 0===i?void 0:i.id]:"Invalid parent(s)"}),te(null===Ut||void 0===Ut||null===(d=Ut.parentSteps)||void 0===d?void 0:d.id,"Invalid parent(s)"));return 1==e.is_start&&(null===(t=e.parent_steps)||void 0===t?void 0:t.length)>0&&(o=!1,a.push({[Ut.parentSteps.id]:"Invalid parent(s)"}),te(Ut.parentSteps.id,"Invalid parent(s)")),(null===(n=e.name)||void 0===n?void 0:n.length)<1&&(o=!1,a.push({[Ut.stepName.id]:"Invalid name"}),te(Ut.stepName.id)),o},[null===z||void 0===z||null===(l=z.selectedStep)||void 0===l?void 0:l.component_blueprints,te]),ae=(0,o.useCallback)(()=>{X(!0),(0,c.hI)({processId:null===B||void 0===B?void 0:B.id}).pipe((0,i.P)()).subscribe({next:e=>{if(e.length>0){const l=e=>_l.Z("_uuid",(0,m.mR)(),e);R({type:r.Cb.setAllSteps,value:wl.Z(Nl.Z(Ll.Z("rank")),Zl.Z(xl.Z(Il.Z("component_blueprints"),Zl.Z(l))))(e)})}},error:e=>{X(!1)}})},[B.id,R]),ie=(0,o.useCallback)(()=>{const e=z.selectedStep;if(oe(e)){var l,t,o,a,d,s,r,u,m,p;X(!0);const v=wl.Z(Ml.Z(["id"]),kl.Z(Ol.Z("is_start",!0)))(z.steps),y=(null===v||void 0===v?void 0:v.length)>0&&v==(null===e||void 0===e?void 0:e.id)&&0===(null===e||void 0===e||null===(l=e.parent_steps)||void 0===l?void 0:l.length),h={name:null===e||void 0===e?void 0:e.name,guidance:null===e||void 0===e?void 0:e.guidance,procedure_id:null===B||void 0===B?void 0:B.id,duration:null===e||void 0===e?void 0:e.duration,is_start:y||(null===e||void 0===e?void 0:e.is_start),is_end:e.is_end,options:(0,n.Z)((0,n.Z)({},null===e||void 0===e?void 0:e.options),{},{layout:null!==(t=null===e||void 0===e?void 0:e.layout)&&void 0!==t?t:{}}),parent_steps:[...Zl.Z(Ml.Z(["id"]))(null!==(o=null===e||void 0===e?void 0:e.parent_steps)&&void 0!==o?o:[])],pathway_steps:null!==(a=null===e||void 0===e||null===(d=e.pathway_processes)||void 0===d?void 0:d.map(e=>e.id))&&void 0!==a?a:[],pathway_processes:null!==(s=null===e||void 0===e||null===(r=e.pathway_processes)||void 0===r?void 0:r.map(e=>e.id))&&void 0!==s?s:[],component_blueprints:[...(null!==(u=null===e||void 0===e?void 0:e.component_blueprints)&&void 0!==u?u:[]).map(e=>(0,n.Z)((0,n.Z)({},Tl.Z(["_uuid"])(e)),{},{selected_fields:[...Zl.Z(Pl.Z(["id","index","mandatory","visible","procedure_step_blueprint_field_id"]))(e.selected_fields)]}))],rank:+(null!==(m=null===e||void 0===e||null===(p=e.parent_steps)||void 0===p?void 0:p.reduce((e,l)=>e<=+l.rank?e=+(null===l||void 0===l?void 0:l.rank):null,0))&&void 0!==m?m:0)+1};(0,c.Ac)(h).pipe((0,i.P)()).subscribe({next:e=>{$?M.h.dispatch((0,V.$6)({ninthModalVisible:!0})):ee&&M.h.dispatch((0,V.$6)({eleventhModalVisible:!0})),ae(),X(!1),A?le(!0):P()},error:e=>{X(!1)}})}},[z,oe,ae,le]),de=(0,o.useCallback)(()=>{const e=z.selectedStep;if(oe(e)){var l,t,o,a,d,s,p,v;X(!0);const y=wl.Z(Ml.Z(["id"]),kl.Z(Ol.Z("is_start",!0)))(z.steps),h=(null===y||void 0===y?void 0:y.length)>0&&y==(null===e||void 0===e?void 0:e.id)&&0===(null===e||void 0===e||null===(l=e.parent_steps)||void 0===l?void 0:l.length),f=(0,n.Z)({name:null===e||void 0===e||null===(t=e.name)||void 0===t?void 0:t.trim(),guidance:null===e||void 0===e?void 0:e.guidance,procedure_id:null===e||void 0===e?void 0:e.procedure_id,duration:null===e||void 0===e?void 0:e.duration,is_start:h||(null===e||void 0===e?void 0:e.is_start),is_end:e.is_end,options:(0,n.Z)((0,n.Z)({},e.options),{},{layout:null!==(o=null===e||void 0===e?void 0:e.layout)&&void 0!==o?o:{}}),parent_steps:Bl.Z([...Zl.Z(Ml.Z(["id"]))(null===e||void 0===e?void 0:e.parent_steps)]),pathway_steps:null!==(a=null===e||void 0===e||null===(d=e.pathway_steps)||void 0===d?void 0:d.map(e=>e.id))&&void 0!==a?a:[],pathway_processes:null!==(s=null===e||void 0===e||null===(p=e.pathway_processes)||void 0===p?void 0:p.map(e=>e.id))&&void 0!==s?s:[],component_blueprints:[...e.component_blueprints.map(e=>(0,n.Z)((0,n.Z)({},Tl.Z(["_uuid"])(e)),{},{status:null,selected_fields:[...Zl.Z(Pl.Z(["id","index","mandatory","visible","procedure_step_blueprint_field_id"]))(e.selected_fields)]}))],rank:+e.rank},Fl.Z({ranking_steps:null===(v=Zl.Z(Fl.Z({id:Ml.Z(["id"]),rank:ne.Z("rank")})).ranking_steps)||void 0===v?void 0:v.map(e=>{var l;return{id:e.id,rank:null!==(l=e.rank)&&void 0!==l?l:1e3}})})(z.steps));(0,c.T5)(f,e.id,!0).pipe((0,i.P)()).subscribe({next:l=>{if(l.length>0){const e=e=>_l.Z("_uuid",(0,m.mR)(),e);R({type:r.Cb.setAllSteps,value:wl.Z(Nl.Z(Ll.Z("rank")),Zl.Z(xl.Z(Il.Z("component_blueprints"),Zl.Z(e))))(l)})}M.h.dispatch((0,u.an)([...F.filter(l=>l.id!==e.procedure_id),(0,n.Z)((0,n.Z)({},B),{},{steps:l})],1)),X(!1),le(!0)},error:e=>{Y(e.data),X(!1)}})}},[le,z.selectedStep,z.steps,ae,R,oe]),se=(0,o.useCallback)(()=>{var e,l,t;const n={},o="Please connect to a step",a="Step name is mandatory";var i,d,s;(null===z||void 0===z?void 0:z.steps.length)>0&&(n.parentSteps=kl.Z(Ol.Z("is_start",!0))(null===z||void 0===z?void 0:z.steps)&&(null===z||void 0===z||null===(i=z.selectedStep)||void 0===i||null===(d=i.parent_steps)||void 0===d?void 0:d.length)>0||1==(null===z||void 0===z||null===(s=z.selectedStep)||void 0===s?void 0:s.is_start)?"":o);n.stepName="string"==typeof(null===z||void 0===z||null===(e=z.selectedStep)||void 0===e?void 0:e.name)&&(null===z||void 0===z||null===(l=z.selectedStep)||void 0===l||null===(t=l.name)||void 0===t?void 0:t.length)>0?"":a;const r=Object.values(n).every(e=>""===e);var u;((null===z||void 0===z?void 0:z.steps.length)>0&&te(Ut.parentSteps.id,n.parentSteps),te(Ut.parentSteps.id,n.parentSteps),te(Ut.stepName.id,n.stepName),te(Ut.newComponents.id,n.newComponents),r)||Y("".concat(null!==(u=n.stepName)&&void 0!==u?u:""," ").concat(n.parentSteps));return r},[q,null===z||void 0===z||null===(t=z.selectedStep)||void 0===t?void 0:t.pathway_processes,null===z||void 0===z||null===(a=z.selectedStep)||void 0===a?void 0:a.pathway_steps,null===z||void 0===z||null===(d=z.selectedStep)||void 0===d?void 0:d.component_blueprints,null===z||void 0===z||null===(s=z.selectedStep)||void 0===s?void 0:s.name,null===z||void 0===z||null===(v=z.selectedStep)||void 0===v||null===(y=v.parent_steps)||void 0===y?void 0:y.length,null===z||void 0===z?void 0:z.steps]),re=(0,o.useCallback)(async()=>{var e;H(!0);se()&&(null!==z&&void 0!==z&&null!==(e=z.selectedStep)&&void 0!==e&&e.isNewStep?ie():de())},[se,j,ie,de]),ue=(0,o.useCallback)(()=>{var e;(null===j||void 0===j||null===(e=j.id)||void 0===e?void 0:e.length)>0&&("newDefaultStep"===(null===j||void 0===j?void 0:j.id)&&le(),(0,c.HP)(null===j||void 0===j?void 0:j.id).pipe((0,i.P)()).subscribe({next:e=>{var l;ae(),R({type:r.Cb.removeStepById,value:null===(l=z.selectedStep)||void 0===l?void 0:l.id}),le(!0)},error:()=>{}}))},[le,null===(h=z.selectedStep)||void 0===h?void 0:h.id,ae,null===j||void 0===j?void 0:j.id,j.is_start,R]);return tn.createElement(p.U7,{scrollable:!0,shadowedContainerStyle:D,isOpen:k,blured:!0},tn.createElement("div",{style:{display:"flex"}},tn.createElement("div",{style:{width:""===x?"100%":"30%"}},tn.createElement("div",{className:Jt},e.children,tn.createElement("div",{id:"scrollableDiv",ref:jt,className:$t},A&&tn.createElement("div",{className:Qt},tn.createElement("p",null,"newDefaultStep"!==(null===z||void 0===z||null===(f=z.selectedStep)||void 0===f?void 0:f.id)&&""!==(null===z||void 0===z||null===(C=z.selectedStep)||void 0===C?void 0:C.id)?"Edit Step #".concat(null===z||void 0===z||null===(g=z.selectedStep)||void 0===g?void 0:g.rank):"New Step")),tn.createElement("div",{style:{flex:1}},tn.createElement(Yt,{onEditChange:(e,l)=>W(e,l),selectedProcess:B})),G&&tn.createElement(O.Z,{message:G,onClick:()=>Y("")}),tn.createElement("div",{className:A?en:ln},!A&&tn.createElement(p.zx,{clear:!0,title:"",clicked:()=>{}}),T&&!A&&tn.createElement(p.zx,{light:!0,title:"Back",clicked:le}),T&&A&&tn.createElement(p.zx,{title:"Close",clicked:le}),(null===z||void 0===z||null===(b=z.selectedStep)||void 0===b||null===(S=b.name)||void 0===S?void 0:S.length)>3&&!A&&tn.createElement(p.zx,{title:null!==z&&void 0!==z&&null!==(E=z.selectedStep)&&void 0!==E&&E.isNewStep?"Save":"Update",loading:K,clicked:re}),(null===z||void 0===z||null===(_=z.selectedStep)||void 0===_||null===(w=_.name)||void 0===w?void 0:w.length)>3&&A&&tn.createElement(p.zx,{light:!0,title:null!==z&&void 0!==z&&null!==(N=z.selectedStep)&&void 0!==N&&N.isNewStep?"Save":"Update",loading:K,clicked:re}),"newDefaultStep"!==(null===z||void 0===z||null===(L=z.selectedStep)||void 0===L?void 0:L.id)&&""!==(null===z||void 0===z||null===(Z=z.selectedStep)||void 0===Z?void 0:Z.id)&&tn.createElement(p.zx,{light:!0,title:"Delete",clicked:ue})))))))}),on=(0,a.$j)(e=>{const{allStatutes:l,selectedProcess:t,companyProcesses:n,onBoardingCompleted:o}=e.flowReducer,{onBoardingModalsVisibility:a}=e.modalsReducer;return{allStatutes:l,selectedProcess:t,companyProcesses:n,onBoardingCompleted:o,onBoardingModalsVisibility:a}},e=>({onSetSelectedProStep:l=>e((0,u.Sc)(l))}))(nn);var an=t(67861);const dn=e=>{var l,t;const a=(0,$.s0)(),{onClose:s,selectedProcess:y,onResetSelectedProStep:h,blueprints:f,allModules:C,companyProcesses:g,workflowTemplates:b,onBoardingModalsVisibility:S}=e,[,E]=(0,o.useState)(!1),[_,w]=(0,o.useState)(!1),[N,L]=(0,o.useState)(!1),[Z,x]=(0,o.useState)(!1),[I,O]=(0,o.useState)(!1),[T,P]=(0,o.useState)(!1),[B,F]=(0,o.useState)(!1),[D,z]=(0,o.useState)(!1),[R,U]=(0,o.useState)(!1),[q,H]=(0,d.aL)(),[K,X]=(0,r._M)(),[G,Y]=(0,o.useState)(!1),[J,Q]=(0,o.useState)(!1),[le,te]=(0,o.useState)();document.title="".concat(y.name," | ").concat(m.iC);const ne=()=>{1==R&&((0,c.zJ)(y.id).pipe((0,i.P)()).subscribe({}),(0,de.d7)(m.KI,m.RI).pipe((0,i.P)()).subscribe({})),M.h.dispatch((0,u.Xc)({show:!1,message:""})),M.h.dispatch((0,u.IW)(!1)),a("/workflows")};return(0,o.useEffect)(()=>{var e,l,t,n,o;""!==(null===y||void 0===y?void 0:y.name)&&((null===y||void 0===y||null===(e=y.steps)||void 0===e?void 0:e.length)>0||(null===y||void 0===y?void 0:y.steps)>0||(null===K||void 0===K||null===(l=K.steps)||void 0===l?void 0:l.length)>0)?0===(null===(t=C.filter(e=>e.procedure.id===(null===y||void 0===y?void 0:y.id)))||void 0===t?void 0:t.length)?M.h.dispatch((0,u.Xc)({show:!0,message:"You can now create modules. Modules are pages where your users can interact with the workflows and components you created. This is where transactions are created."})):(null===(n=C.filter(e=>e.procedure.id===(null===y||void 0===y?void 0:y.id)))||void 0===n?void 0:n.length)>0&&1==(null===y||void 0===y||null===(o=y.steps)||void 0===o?void 0:o.length)&&M.h.dispatch((0,u.Xc)({show:!0,message:"To edit your step, click the box of your target step. The edit step modal will appear. There you can edit and update your step."})):""!==(null===y||void 0===y?void 0:y.name)&&(null===f||void 0===f?void 0:f.length)>0?1==y.created&&M.h.dispatch((0,u.Xc)({show:!0,message:"You have just created ".concat(null===y||void 0===y?void 0:y.name," workflow and modules. Kindly configure Modules. After doing this you can now use your workflow module.")})):""===(null===y||void 0===y?void 0:y.name)&&0==b.length&&(null===f||void 0===f?void 0:f.length)>0?(M.h.dispatch((0,u.Xc)({show:!0,message:"To begin building your Workflow, click the Edit button, enter name, description and save. You can also build components before creating your workflow."})),L(!0)):""===(null===y||void 0===y?void 0:y.name)&&b.length>0&&(null===f||void 0===f?void 0:f.length)>0?Q(!0):0===(null===f||void 0===f?void 0:f.length)&&""===(null===y||void 0===y?void 0:y.name)&&M.h.dispatch((0,u.Xc)({show:!0,message:"To begin buiding your Workflow, start by creating blueprint components. Components are field data that you can use to gather information on your steps",action:()=>{O(!0)}}))},[C,y,f]),an.createElement(an.Fragment,null,an.createElement("div",{className:El.Z.host},an.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},an.createElement("div",{style:k.tq?{padding:"0 0 0 10px",position:"fixed",bottom:"0"}:{padding:"0 0 0 10px"}},an.createElement(p.zx,{title:"Close",clicked:()=>ne()})),an.createElement("div",{style:k.tq?{display:"flex"}:{xposition:"flex",right:"0",top:"0",display:"flex",flexDirection:"row",padding:"0 10px 0 0px"}},""!==(null===y||void 0===y?void 0:y.name)&&(null===K||void 0===K||null===(l=K.steps)||void 0===l?void 0:l.length)>0&&""!==(null===y||void 0===y?void 0:y.name)&&an.createElement(un,{onAddNewModule:()=>{(null===S||void 0===S?void 0:S.eleventhModalVisible)&&M.h.dispatch((0,V.$6)({twelvthModalVisible:!0})),z(!0)}}),an.createElement(rn,{onAddNewProcess:()=>{L(!0)}}),an.createElement(sn,{onAddNewComponent:()=>{te(void 0),H({type:d.qY.resetSelectedBlueprintComponent}),O(!0)}}),0===(null===y||void 0===y||null===(t=y.steps)||void 0===t?void 0:t.length)&&an.createElement(p.zx,{light:!0,icon:an.createElement("img",{src:xe.Nb}),style:{width:"100px"},clicked:()=>{X({type:r.Cb.addNewStep,value:y.id}),w(!0)},loading:G}),0===C.filter(e=>e.procedure.id===(null===y||void 0===y?void 0:y.id)).length&&""!==(null===y||void 0===y?void 0:y.name)&&an.createElement(p.j3,{permissions:[p.po.blueprints.process.delete]},an.createElement(p.zx,{light:!0,icon:an.createElement(A.G,{icon:W.$aW,style:{width:"20px",height:"20px"}}),clicked:()=>x(!0),style:{width:"100px"}}),an.createElement("span",{className:El.Z.control})),an.createElement(p.zx,{light:!0,icon:an.createElement("img",{src:xe.Fd}),style:{width:"50px"},clicked:()=>{Y(!0),(0,c.zJ)(y.id).pipe((0,i.P)()).subscribe({next:e=>{M.h.dispatch((0,u.Xu)(e)),M.h.dispatch((0,u.an)([...g.filter(l=>l.id!==e.id),e],1)),Y(!1)}}),(0,de.d7)(m.KI,m.RI).pipe((0,i.P)()).subscribe({})},loading:G}))),(null===f||void 0===f?void 0:f.length)>0&&an.createElement("div",{className:El.Z.processNameContainer}),an.createElement(ee.Z,{edit:!1,onEditStep:()=>{(null===S||void 0===S?void 0:S.ninthModalVisible)&&M.h.dispatch((0,V.$6)({tenthModalVisible:!0})),w(!0)},onEditStepEnded:_,updateParent:(e,l,t)=>{((e,l,t)=>{const n=null===K||void 0===K?void 0:K.steps.find(l=>l.id===e);if(!n)return;Y(!0);const o={name:n.name,parent_steps:1==t?Bl.Z([...Bl.Z([...Zl.Z(Ml.Z(["id"]))(null===n||void 0===n?void 0:n.parent_steps)]),l]):Bl.Z([...Zl.Z(Ml.Z(["id"]))(null===n||void 0===n?void 0:n.parent_steps.filter(e=>e.id!==l))])};(0,c.T5)(o,n.id,!0).pipe((0,i.P)()).subscribe({next:e=>{(0,c.zJ)(y.id).pipe((0,i.P)()).subscribe({next:e=>M.h.dispatch((0,u.Xu)(e))}),Y(!1)},error:e=>{Y(!1)}})})(e,l,t)},updateStep:e=>{(e=>{const l=e;if(!l)return;const t={options:null===l||void 0===l?void 0:l.options};(0,c.T5)(t,l.id,!0).pipe((0,i.P)()).subscribe({next:e=>{Y(!1),M.h.dispatch((0,u.an)([...g.filter(e=>e.id!==l.procedure_id),(0,n.Z)((0,n.Z)({},y),{},{steps:e})],1))}})})(e)}})),_&&an.createElement(on,{visible:_,onClose:e=>{U(e),h(),w(!1),L(!1),F(!1)},onEditChange:(e,l)=>{O(!0),te(e)}}),Z&&an.createElement(p.U7,{isOpen:Z,onClose:()=>x(!1),backdropColor:!0,blured:!0,shadowedContainerStyle:{minWidth:"600px",width:k.tq?"100%":"40%",height:"160px"}},an.createElement("div",{className:El.Z.deleteModalContainer},an.createElement("div",{className:El.Z.deleteModalTextContainer},an.createElement("p",{className:El.Z.deteteModalText},"Are you sure you want to delete this workflow?")),an.createElement("div",{className:El.Z.deleteModalButtonContainer},an.createElement(p.zx,{title:"Delete",clicked:()=>(()=>{var e;!(null!==y&&void 0!==y&&null!==(e=y.id)&&void 0!==e&&e.length)>0||(Y(!0),(0,c.vo)(null===y||void 0===y?void 0:y.id).pipe((0,i.P)()).subscribe({next:e=>{x(!1),Y(!1),U(!0),ne()},error:e=>{Y(!1),x(!1)}}))})(),loading:G}),an.createElement(p.zx,{light:!0,title:"No, Go back",clicked:()=>x(!1)})))),I&&an.createElement(Sl,{selectedComponent:le,visible:I,onClose:e=>{U(e),O(!1)},onUpdate:e=>{M.h.dispatch((0,u.an)(g.filter(e=>e.id!==y.id),1))}}),T&&an.createElement(Sl,{visible:T,onClose:()=>{L(!1),Q(!0),P(!1)},onUpdate:()=>{M.h.dispatch((0,u.an)(g.filter(e=>e.id!==y.id),1))}}),D&&an.createElement(v.ZP,{onClose:()=>z(!1),isOpen:D,modalStyle:{maxWidth:"500px"},selectedProcessId:null===y||void 0===y?void 0:y.id}),N&&an.createElement(j,{onCreate:()=>{L(!1),w(!0)},onClose:()=>L(!1),isOpen:N,modalStyle:{maxWidth:"500px"},selectedProcessId:null===y||void 0===y?void 0:y.id,selectedProcess:y,shadowedContainerStyle:{width:k.tq?"100%":"30%"}}),B&&an.createElement(j,{onCreate:()=>{L(!1),w(!0)},onClose:()=>{a("/")},isOpen:B,modalStyle:{maxWidth:"500px"},selectedProcessId:null===y||void 0===y?void 0:y.id,selectedProcess:y,shadowedContainerStyle:{width:k.tq?"100%":"30%"}}),J&&an.createElement(ae,{isOpen:J,onCreateBlank:()=>{F(!0),Q(!1)},onClose:()=>{Q(!1)},gotoProcess:e=>{L(!1),Q(!1),M.h.dispatch((0,u.Xu)({name:null===e||void 0===e?void 0:e.name,description:null===e||void 0===e?void 0:e.description,id:e.id,is_pinned:null===e||void 0===e?void 0:e.is_pinned,user_id:null===e||void 0===e?void 0:e.user_id,registered:!0,type:null===e||void 0===e?void 0:e.type,steps:null===e||void 0===e?void 0:e.steps,shared_positions:null===e||void 0===e?void 0:e.shared_positions,created:!0}))},gotoComponents:()=>{L(!1),Q(!1),P(!0),H({type:d.qY.resetSelectedBlueprintComponent})},modalStyle:{maxWidth:"500px"},selectedProcessId:null===y||void 0===y?void 0:y.id,selectedProcess:y,shadowedContainerStyle:{width:"65%",minWidth:"400px"}}))},sn=e=>{const{onAddNewComponent:l}=e;return an.createElement(p.zx,{light:!0,clicked:l,icon:an.createElement(A.G,{icon:W.Zrf,style:{margin:"0px",width:"20px",height:"20px"}}),style:{width:"100px"}})},rn=e=>{const{onAddNewProcess:l}=e;return an.createElement(p.zx,{light:!0,titleStyle:{fontWeight:"normal",fontSize:"14px"},clicked:l,icon:an.createElement(A.G,{icon:W.gr5,style:{margin:"0px",width:"20px",height:"20px"}}),style:{width:"100px"}})},un=e=>{const{onAddNewModule:l}=e;return an.createElement(p.zx,{titleStyle:{fontWeight:"normal"},clicked:l,style:{width:"100px"},icon:an.createElement(A.G,{icon:W.mh3,style:{margin:"0px",width:"20px",height:"20px"}})})},cn=(0,a.$j)(e=>{const{selectedProcess:l,blueprints:t,allModules:n,companyProcesses:o,workflowTemplates:a}=e.flowReducer,{onBoardingModalsVisibility:i}=e.modalsReducer;return{selectedProcess:l,blueprints:t,allModules:n,companyProcesses:o,workflowTemplates:a,onBoardingModalsVisibility:i}},e=>({onSetSelectedProStep:l=>e((0,u.Sc)(l)),onResetSelectedProStep:()=>e((0,u.wv)())}))(e=>an.createElement(s.jm,null,an.createElement(r.FZ,null,an.createElement(r.s_,null,an.createElement(d.ij,null,an.createElement(d.Xr,null,an.createElement(dn,e)))))))},22590:(e,l,t)=>{t.d(l,{Z:()=>n});const n={host:"ProcessInfo_host__+oaqg",processControls:"ProcessInfo_processControls__2tdBF",sharePosition:"ProcessInfo_sharePosition__FqHsX",addStep:"ProcessInfo_addStep__uYhIL",addComponent:"ProcessInfo_addComponent__ZNJnb",buttonWrapper:"ProcessInfo_buttonWrapper__TYYT4",addStepTooltip:"ProcessInfo_addStepTooltip__rWSLm",addComponentTooltip:"ProcessInfo_addComponentTooltip__x6Vlz",messageContainer:"ProcessInfo_messageContainer__Ymk+d",title:"ProcessInfo_title__6a6i3",message:"ProcessInfo_message__kMz1c",customCheckbox:"ProcessInfo_customCheckbox__OHBxP",checkmark:"ProcessInfo_checkmark__jqo8a",closeButton:"ProcessInfo_closeButton__Xqtn-",control:"ProcessInfo_control__tSGLd",processNameContainer:"ProcessInfo_processNameContainer__EsIer",tutorialWrapper:"ProcessInfo_tutorialWrapper__Ijpgx",tutorialContainer:"ProcessInfo_tutorialContainer__6VGmK",processChartWrapper:"ProcessInfo_processChartWrapper__Q4jCW","react-tabs__tab--selected":"ProcessInfo_react-tabs__tab--selected__kT6jO","css-1hwfws3":"ProcessInfo_css-1hwfws3__oWVI5","css-1okebmr-indicatorSeparator":"ProcessInfo_css-1okebmr-indicatorSeparator__-YC+I","css-1gsw4b3":"ProcessInfo_css-1gsw4b3__9qcid","process-name":"ProcessInfo_process-name__nJ2CH","process-description":"ProcessInfo_process-description__C24Ws",container:"ProcessInfo_container__0EX6d",arrow_type2:"ProcessInfo_arrow_type2__VA3Ze","combined-shape":"ProcessInfo_combined-shape__WjWTZ","saved-description":"ProcessInfo_saved-description__Z5PuF",helper:"ProcessInfo_helper__7xoR9","rectangle-copy-4":"ProcessInfo_rectangle-copy-4__yjPo2",rectangle:"ProcessInfo_rectangle__kG0GD","rectangle-2":"ProcessInfo_rectangle-2__g+vZ8","rectangle-copy-3":"ProcessInfo_rectangle-copy-3__27bVn","new-step-modal":"ProcessInfo_new-step-modal__ur8v3","process-name-container":"ProcessInfo_process-name-container__noEII","input-search":"ProcessInfo_input-search__WA0Hv","editable-rectangle":"ProcessInfo_editable-rectangle__GgZ++",shareProcessHost:"ProcessInfo_shareProcessHost__k6ClQ",shareModalCloseButtonContainer:"ProcessInfo_shareModalCloseButtonContainer__4RcY9",shareModalCloseButton:"ProcessInfo_shareModalCloseButton__d19L0",shareModalClosebuttonImage:"ProcessInfo_shareModalClosebuttonImage__ctaAE",shareImage:"ProcessInfo_shareImage__MMQSA",shareProcessTitle:"ProcessInfo_shareProcessTitle__NcNb-",selectComponentContainer:"ProcessInfo_selectComponentContainer__ZGHp7",selectComponentTite:"ProcessInfo_selectComponentTite__HIPH3",selectComponent:"ProcessInfo_selectComponent__AqNdw",selectClearControlsClassName:"ProcessInfo_selectClearControlsClassName__2JBX7",selectListContainer:"ProcessInfo_selectListContainer__P13gF",shareButtonContainer:"ProcessInfo_shareButtonContainer__EmjbT",multiSelectContainer:"ProcessInfo_multiSelectContainer__cJOx5",multiselectComponent:"ProcessInfo_multiselectComponent__gZpac",multiSelectSearchInput:"ProcessInfo_multiSelectSearchInput__YmtV7",multiSelectMenuOverlayList:"ProcessInfo_multiSelectMenuOverlayList__MgB5l",multiSelectMenuOverlayListItem:"ProcessInfo_multiSelectMenuOverlayListItem__gW5lT",showTutorialContainer:"ProcessInfo_showTutorialContainer__pHXUK",deleteModalContainer:"ProcessInfo_deleteModalContainer__zJS6K",deleteModalTextContainer:"ProcessInfo_deleteModalTextContainer__23irp",deleteModalImage:"ProcessInfo_deleteModalImage__blHCS",deteteModalText:"ProcessInfo_deteteModalText__fp5WW",deleteModalButtonContainer:"ProcessInfo_deleteModalButtonContainer__dBunM",deleteModalCancelButton:"ProcessInfo_deleteModalCancelButton__9lDvo",errorContainer:"ProcessInfo_errorContainer__50zTL",paragraphNameContainer:"ProcessInfo_paragraphNameContainer__qBr8V",paragraphDescriptionContainer:"ProcessInfo_paragraphDescriptionContainer__1YFKM",rightSideContainer:"ProcessInfo_rightSideContainer__NWma5",usersHost:"ProcessInfo_usersHost__kRtg+"}}}]);
//# sourceMappingURL=3799.22ad0c61.chunk.js.map