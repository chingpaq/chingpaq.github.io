(self.webpackChunkflowhero=self.webpackChunkflowhero||[]).push([[315,246],{65895:function(e,n,o){"use strict";o.d(n,{C:function(){return ie},Z:function(){return le}});var l=o(1413),i=o(93433),t=o(29439),d=o(67861),a="CustomTemplateModule_section__S+Ga8",u="CustomTemplateModule_accordionContainer__Eooxm",r="CustomTemplateModule_active__x9Y6U",s="CustomTemplateModule_content__3auE3",v=o(47144),c=o.n(v),p=o(27436),m=o(39518),f=o(89293),_=o(88550),h=o(51330),y=o(4942),g=o(73500),b=o(46415),x=o(96189),E={mobilepopup:"CustomSportsClub_mobilepopup__efO50",mobilepopupopen:"CustomSportsClub_mobilepopupopen__R9HZu",mobilePopupActionContainer:"CustomSportsClub_mobilePopupActionContainer__9+kzH",filtersContainer:"CustomSportsClub_filtersContainer__GwQ7c",centerDiv:"CustomSportsClub_centerDiv__oTWCq"},C=o(6073),Z=o(12308),w=(o(75105),o(11577)),M=o(41771),S=o(12075),k=o(52902),I=o(32588),P=o(50981),N=o.n(P),T=o(88827),D=o(88374),A=o(93389),U=o(58535),L=o(85508),O=o(63864),R=o(27658),z=o(9825),q=o.n(z),B=(0,m.$j)((function(e){var n=e.authReducer,o=(n.authenticatedUser.position,n.authenticatedUser),l=e.sessionReducer.user,i=e.flowReducer;return{begunModule:i.begunModule,allModules:i.allModules,companyData:i.companyData,companyUsersArray:i.companyUsersArray,companyPositionsArray:i.companyPositionsArray,components:i.components,authenticatedUser:o,user:l,companyProcesses:i.companyProcesses}}))((function(e){var n,o,a,u,r,s,v,c,p,m,h,S,k,P,U,O,R,z,q,B,F,W,j,H=e.begunModule,J=e.allModules,G=e.companyData,V=e.companyUsersArray,Q=e.goto,X=e.components,K=e.authenticatedUser,$=e.user,ee=e.companyProcesses,ne=(e.template,e.title),oe=e.selectedComponent,le=e.setSelectedComponent,ie=(e.step,(0,d.useState)(!1)),te=(0,t.Z)(ie,2),de=te[0],ae=te[1],ue=(0,d.useState)((null===(n=oe.shared_users)||void 0===n||null===(o=n.filter((function(e){return(null===e||void 0===e?void 0:e.id)===(null===K||void 0===K?void 0:K.id)})))||void 0===o?void 0:o.length)>0),re=(0,t.Z)(ue,2),se=re[0],ve=re[1],ce=(0,d.useState)((null===(a=oe.component_items)||void 0===a||null===(u=a.filter((function(e){var n,o;return(null===e||void 0===e?void 0:e.value)===(null===K||void 0===K?void 0:K.id)&&"Join"===(null===e||void 0===e?void 0:e.type)&&(null===e||void 0===e?void 0:e.item_code)===(null===H||void 0===H||null===(n=H.processModule)||void 0===n||null===(o=n.module)||void 0===o?void 0:o.id)})))||void 0===u?void 0:u.length)>0),pe=(0,t.Z)(ce,2),me=pe[0],fe=pe[1],_e=(0,d.useState)(!1),he=(0,t.Z)(_e,2),ye=he[0],ge=he[1],be=(0,d.useState)(!1),xe=(0,t.Z)(be,2),Ee=xe[0],Ce=xe[1],Ze=(0,d.useState)(!1),we=(0,t.Z)(Ze,2),Me=(we[0],we[1]),Se=(0,d.useState)(!1),ke=(0,t.Z)(Se,2),Ie=(ke[0],ke[1]),Pe=(0,_.pQ)(),Ne=(0,t.Z)(Pe,2),Te=(Ne[0],Ne[1]),De=(null===K||void 0===K?void 0:K.id)===(null===oe||void 0===oe||null===(r=oe.created_by)||void 0===r?void 0:r.id),Ae=null!==(s=oe.component_fields.find((function(e){return"Private"===e.field_name})))&&void 0!==s&&s,Ue=null!==(v=null===(c=oe.component_fields.find((function(e){return"My Community"===e.field_name})))||void 0===c?void 0:c.value)&&void 0!==v?v:"Metro Manila",Le=null===(p=oe.component_fields.find((function(e){return"Club Description"===e.field_name})))||void 0===p?void 0:p.value,Oe="Yes"===(null===(m=oe.component_fields.find((function(e){return"Basketball"===e.field_name})))||void 0===m?void 0:m.value)?"Basketball":"Yes"===(null===(h=oe.component_fields.find((function(e){return"Pickleball"===e.field_name})))||void 0===h?void 0:h.value)?"Pickleball":"All Sports",Re=null===J||void 0===J?void 0:J.find((function(e){return"Meets"===(null===e||void 0===e?void 0:e.name)}));return d.createElement("div",null,d.createElement("div",{style:{fontFamily:"var(--app-text-mobile-font)",fontSize:"18px",fontWeight:"bold"}},ne),d.createElement("div",{style:{fontFamily:"var(--app-text-mobile-font)",fontSize:"12px",marginTop:"5px"}},"".concat(Ae?"Private":"Public"," \u25e6 ").concat(Oe," \u25e6 ").concat(Ue)),Le&&d.createElement("div",{style:{fontFamily:"var(--app-text-mobile-font)",fontSize:"12px",margin:"40px 0"}},"".concat(Le)),se&&d.createElement("p",{style:{fontFamily:"var(--app-text-mobile-font)",fontSize:"14px",fontWeight:"bold",marginTop:"30px"}},"You are a member of this club"),De&&d.createElement("p",{style:{fontFamily:"var(--app-text-mobile-font)",fontSize:"14px",fontWeight:"bold",marginTop:"30px"}},"You are the admin of this club"),d.createElement(b.mQ,{style:{width:"100%",fontSize:g.tq?"16px":"20px",marginTop:"20px"}},d.createElement(b.td,{style:{fontFamily:"var(--app-text-mobile-font)",fontSize:g.tq?"14px":"16px"}},De&&d.createElement(b.OK,null,"DETAILS"),d.createElement(b.OK,null,"MEMBERS"),d.createElement(b.OK,null,"MEETS")),De&&d.createElement(b.x4,{id:"DETAILS"},d.createElement("div",{style:{width:"100%",minHeight:"50vh",overflow:"auto"}},e.children)),d.createElement(b.x4,{id:"MEMBERS"},d.createElement("div",{style:{width:"100%",minHeight:"100vh",overflow:"auto"}},d.createElement("div",{className:E.centeredDiv,style:{width:"inherit",fontSize:"14px",marginTop:"20px"}},d.createElement("div",{style:{fontFamily:"var(--app-text-main-font)",fontWeight:"bold",color:"var(--app-color-gray-dark)",paddingLeft:"5px"}},"Club Admin"),d.createElement("div",{className:E.filtersContainer},d.createElement(I.Z,{simple:!0,photo:null!==(S=null===K||void 0===K?void 0:K.photo)&&void 0!==S?S:"https://s3-symbol-logo.tradingview.com/logo-yazilim--600.png",email:"Founded club: ".concat(N()(new Date(oe.created_date)).format("DD MMM YYYY")),position:null!==(k=null===K||void 0===K||null===(P=K.options)||void 0===P?void 0:P.info)&&void 0!==k?k:"",firstName:d.createElement("div",{style:{fontWeight:"bold"}},"".concat(null===oe||void 0===oe||null===(U=oe.created_by)||void 0===U?void 0:U.first_name," ").concat(null===oe||void 0===oe||null===(O=oe.created_by)||void 0===O?void 0:O.last_name)),cardClicked:function(){},width:"100%"}))),(null===oe||void 0===oe||null===(R=oe.shared_users)||void 0===R?void 0:R.length)>0&&d.createElement(d.Fragment,null,d.createElement("p",{style:{fontSize:"14px",fontFamily:"var(--app-text-main-font)",fontWeight:"bold",color:"var(--app-color-gray-dark)",paddingLeft:"5px"}},"Members ( ".concat(null===oe||void 0===oe||null===(z=oe.shared_users)||void 0===z?void 0:z.length," )")),d.createElement(Z.default,{className:E.sharesTable,withColumns:!1,modern:!0,columns:["User","Photo","Bio"],list:null===oe||void 0===oe||null===(q=oe.shared_users)||void 0===q?void 0:q.map((function(e){var n,o,l,i,t=V.find((function(n){return n.id===e.id}));return t?(i={},(0,y.Z)(i,"User",d.createElement("div",{style:{fontWeight:"bold"}},"".concat(null===t||void 0===t?void 0:t.first_name," ").concat(null===t||void 0===t?void 0:t.last_name))),(0,y.Z)(i,"Photo",null!==(n=null===t||void 0===t?void 0:t.photo)&&void 0!==n?n:null===G||void 0===G?void 0:G.logo),(0,y.Z)(i,"Bio",null!==(o=null===t||void 0===t||null===(l=t.options)||void 0===l?void 0:l.info)&&void 0!==o?o:""),i):{User:null===e||void 0===e?void 0:e.id}}))})),De&&(null===oe||void 0===oe||null===(B=oe.component_items)||void 0===B?void 0:B.filter((function(e){return"Join"===e.type||"Invite"===e.type})).length)>0&&d.createElement(d.Fragment,null,d.createElement("p",{style:{fontSize:"14px",fontFamily:"var(--app-text-main-font)",fontWeight:"bold",color:"var(--app-color-gray-dark)",paddingLeft:"5px"}},"Invited ( ".concat(null===oe||void 0===oe||null===(F=oe.component_items)||void 0===F?void 0:F.filter((function(e){return"Join"===e.type||"Invite"===e.type})).length," )")),d.createElement(Z.default,{className:E.sharesTable,withColumns:!1,modern:!0,columns:["User","Photo","Bio"],list:null===oe||void 0===oe||null===(W=oe.component_items)||void 0===W||null===(j=W.filter((function(e){return"Join"===e.type||"Invite"===e.type})))||void 0===j?void 0:j.map((function(e){var n,o,l,i,t=V.find((function(n){return n.id===e.value}));return i={},(0,y.Z)(i,"User","".concat(null===t||void 0===t?void 0:t.first_name," ").concat(null===t||void 0===t?void 0:t.last_name)),(0,y.Z)(i,"Photo",null!==(n=null===t||void 0===t?void 0:t.photo)&&void 0!==n?n:null===G||void 0===G?void 0:G.logo),(0,y.Z)(i,"Bio",null!==(o=null===t||void 0===t||null===(l=t.options)||void 0===l?void 0:l.info)&&void 0!==o?o:""),i}))})),!(se||me||De)&&Ae&&d.createElement(x.zx,{title:"Request to Join Club",clicked:function(){var e,n,o;ae(!0),(0,C.np)({index:null===oe||void 0===oe||null===(e=oe.component_items)||void 0===e?void 0:e.length,item_code:null===H||void 0===H||null===(n=H.processModule)||void 0===n||null===(o=n.module)||void 0===o?void 0:o.id,type:"Join",value:null===K||void 0===K?void 0:K.id},oe.id).subscribe({next:function(){fe(!0),ae(!1)},error:function(){return ae(!1)}})},style:{width:"100%"},loading:de}),!(se||De)&&!Ae&&d.createElement(x.zx,{title:"Join Club",clicked:function(){var e,n,o,t,d;ae(!0),(0,C.KL)((0,l.Z)((0,l.Z)({},oe),{},{component_items:oe.component_items.filter((function(e){return("Invite"===e.type||"Join"===e.type)&&e.value!==K.id}))}),oe.id,[].concat((0,i.Z)(null!==(e=null===(n=oe.shared_users)||void 0===n?void 0:n.map((function(e){return e.id})))&&void 0!==e?e:[]),[null===K||void 0===K?void 0:K.id]),ne,null===oe||void 0===oe?void 0:oe.is_complete,null===(o=H.processModule)||void 0===o||null===(t=o.module)||void 0===t||null===(d=t.options)||void 0===d?void 0:d.shares).subscribe({next:function(e){var n;oe.shared_users=null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.shared_users,ve(!0),ae(!1)},error:function(){return ae(!1)}})},style:{width:"100%"},loading:de}),De&&d.createElement(x.zx,{title:"Invite Players",clicked:function(){Ce(!0)},style:{width:"100%",backgroundColor:"green"},loading:de})),se&&!De&&d.createElement(x.zx,{title:"Leave Club",clicked:function(){var e,n,o;ae(!0),(0,C.KL)(oe,oe.id,oe.shared_users.filter((function(e){return e.id!==(null===K||void 0===K?void 0:K.id)})).map((function(e){return e.id})),ne,null===oe||void 0===oe?void 0:oe.is_complete,null===(e=H.processModule)||void 0===e||null===(n=e.module)||void 0===n||null===(o=n.options)||void 0===o?void 0:o.shares).subscribe({next:function(e){var n;oe.shared_users=null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.shared_users,le(oe),ve(!1),ae(!1)},error:function(){return ae(!1)}})},style:{width:"100%",backgroundColor:"red"},loading:de})),d.createElement(b.x4,{id:"MEETS"},d.createElement("div",{style:{width:"100%",minHeight:"60vh",overflow:"auto",zIndex:"-1"}},d.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end"}},d.createElement(x.zx,{light:!0,style:{display:De?"":"none"},clicked:function(){ge(!0)},icon:d.createElement("img",{src:M.IHx})})),!ye&&d.createElement(Y,{events:X.filter((function(e){return"Expired"!==e.status&&e.module_id===(null===Re||void 0===Re?void 0:Re.id)})),isAdmin:De,onEventClick:function(e){var n=X.find((function(n){return n.id===(null===e||void 0===e?void 0:e.event_id)}));Q&&(0,L.navigateToTransaction)(ee,le,Me,G,n,Te,K,H,$,J,Ie,V,Re)}})))),d.createElement("div",{className:Ee?E.mobilepopupopen:E.mobilepopup,style:{display:Ee?"":"none"}},d.createElement("div",{style:{width:"100%",height:"50vh",backgroundColor:"white",opacity:"0.9"},onClick:function(){return Ce(!1)}}),d.createElement("div",{className:E.mobilePopupActionContainer,style:{padding:"20px"}},d.createElement("p",{style:{fontSize:"14px",fontFamily:"var(--app-text-main-font)",fontWeight:"bold",color:"var(--app-color-gray-dark)",paddingLeft:"5px"}},"Invite"),d.createElement(Z.default,{className:E.sharesTable,withColumns:!1,modern:!0,columns:["User","Photo","Bio"],list:V.filter((function(e){var n,o,l;return!(null!==oe&&void 0!==oe&&null!==(n=oe.shared_users)&&void 0!==n&&null!==(o=n.map((function(e){return e.id})))&&void 0!==o&&o.includes(e.id)||null!==oe&&void 0!==oe&&null!==(l=oe.component_items.filter((function(e){return"Invite"===e.type})).map((function(e){return e.value})))&&void 0!==l&&l.includes(e.id))})).map((function(e){var n,o,l,i;return i={},(0,y.Z)(i,"User","".concat(null===e||void 0===e?void 0:e.first_name," ").concat(null===e||void 0===e?void 0:e.last_name)),(0,y.Z)(i,"Photo",null!==(n=null===e||void 0===e?void 0:e.photo)&&void 0!==n?n:null===G||void 0===G?void 0:G.logo),(0,y.Z)(i,"Bio",null!==(o=null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.info)&&void 0!==o?o:""),(0,y.Z)(i,"id",e.id),i})),onListItemClick:function(e){var n,o,l;ae(!0),(0,C.np)({index:null===oe||void 0===oe||null===(n=oe.component_items)||void 0===n?void 0:n.length,item_code:null===H||void 0===H||null===(o=H.processModule)||void 0===o||null===(l=o.module)||void 0===l?void 0:l.id,type:"Invite",value:null===e||void 0===e?void 0:e.id},oe.id).subscribe({next:function(){ae(!1)},error:function(){return ae(!1)}})}}))),d.createElement("div",{className:ye?E.mobilepopupopen:E.mobilepopup,style:{display:ye?"":"none"}},d.createElement("div",{style:{width:"100%",height:"50vh",backgroundColor:"white",opacity:"0.9"},onClick:function(){return ge(!1)}}),d.createElement("div",{className:E.mobilePopupActionContainer},d.createElement(x.zx,{title:"Create one-off meet",style:{width:"100%"},clicked:function(){var e=function(e){var n,o,t,d,a,u,r=e.steps.filter((function(n){var o,l,i,t,d,a;return void 0==(null===n||void 0===n||null===(o=n.options)||void 0===o?void 0:o.showStepAll)||1==(null===n||void 0===n||null===(l=n.options)||void 0===l?void 0:l.showStepAll)||0==(null===n||void 0===n||null===(i=n.options)||void 0===i?void 0:i.showStepAll)&&(null===n||void 0===n||null===(t=n.options)||void 0===t||null===(d=t.showOnly)||void 0===d?void 0:d.filter((function(e){return K.positions.map((function(e){return e.id})).indexOf(e)>-1})).length)>0||(null===n||void 0===n||null===(a=n.options)||void 0===a?void 0:a.showStepAuthor)&&(null===K||void 0===K?void 0:K.id)===(null===e||void 0===e?void 0:e.user_id)})).map((function(e,n){return(0,l.Z)((0,l.Z)({},e),{},{rank:n+1})}));T.h.dispatch((0,D.q4)(e)),T.h.dispatch((0,D.an)([e],f.Qc)),T.h.dispatch((0,D.q4)((0,l.Z)((0,l.Z)({},e),{},{completeSteps:e.steps,steps:r,stepIndex:2,module_id:Re.id,module:Re,isUpdating:!1}))),Te({action:_._U.setCurrentStep,value:null===e||void 0===e?void 0:e.steps[2]}),Te({action:_._U.setModuleItems,value:oe.component_items}),Te({action:_._U.setModuleNewStepComponents,value:[]}),Te({action:_._U.setComponents,value:[]});var s=(0,i.Z)(null!==(n=null===(o=r[2])||void 0===o?void 0:o.component_blueprints)&&void 0!==n?n:[]);if((null===s||void 0===s?void 0:s.length)>0){var v,c,p=null===(v=s.find((function(e){return e.selected_fields.find((function(e){return"Club"===e.field_name}))})))||void 0===v?void 0:v.selected_fields.find((function(e){return"Club"===e.field_name}));p&&(p.value=ne),(p=null===(c=s.find((function(e){return e.selected_fields.find((function(e){return"Sport"===e.field_name}))})))||void 0===c?void 0:c.selected_fields.find((function(e){return"Sport"===e.field_name})))&&(p.value=Oe),Te({action:_._U.setComponentBlueprints,value:s}),Te({action:_._U.setModuleNewStepComponents,value:s})}(null===H||void 0===H||null===(t=H.processModule)||void 0===t||null===(d=t.steps)||void 0===d?void 0:d.length)>0&&(null===H||void 0===H||null===(a=H.processModule)||void 0===a||null===(u=a.steps)||void 0===u||u.filter((function(e){var n;return null===e||void 0===e||null===(n=e.component_blueprints)||void 0===n?void 0:n.filter((function(e){return e.selected_fields.filter((function(e){return e.value=void 0}))}))})))};ee.find((function(e){return e.id===Re.procedure.id}))?e(ee.find((function(e){return e.id===Re.procedure.id}))):(ae(!0),(0,A.zJ)(Re.procedure.id).pipe((0,w.P)()).subscribe({next:function(n){ae(!1),e(n)},error:function(e){}}))}}),d.createElement(x.zx,{title:"Create recurring schedule",clicked:function(){return ge(!1)},style:{width:"100%"}}))))})),F=function(e){var n,o,a,u,r,s,v,c,p,_,h,T,D,A,U,L,z,B,F,W,Y,j,H,J,G,V,Q,X,K,$,ee,ne,oe,le,ie,te,de,ae,ue,re=e.selectedComponent,se=e.begunModule,ve=e.goto,ce=(0,m.v9)((function(e){return e.flowReducer})),pe=ce.companyData,me=ce.companyUsersArray,fe=ce.components,_e=(0,m.v9)((function(e){return e.authReducer})),he=_e.authenticatedUser,ye=(0,d.useState)(!1),ge=(0,t.Z)(ye,2),be=ge[0],xe=ge[1],Ee=(0,d.useState)((null===re||void 0===re||null===(n=re.shared_users)||void 0===n||null===(o=n.filter((function(e){return(null===e||void 0===e?void 0:e.id)===(null===he||void 0===he?void 0:he.id)})))||void 0===o?void 0:o.length)>0),Ce=(0,t.Z)(Ee,2),Ze=Ce[0],we=Ce[1],Me=(0,d.useState)((null===re||void 0===re||null===(a=re.component_items)||void 0===a||null===(u=a.filter((function(e){var n,o;return(null===e||void 0===e?void 0:e.value)===(null===he||void 0===he?void 0:he.id)&&("Request"===(null===e||void 0===e?void 0:e.type)||"Waitlist"===(null===e||void 0===e?void 0:e.type))&&(null===e||void 0===e?void 0:e.item_code)===(null===se||void 0===se||null===(n=se.processModule)||void 0===n||null===(o=n.module)||void 0===o?void 0:o.id)})))||void 0===u?void 0:u.length)>0),Se=(0,t.Z)(Me,2),ke=Se[0],Ie=Se[1],Pe=(0,d.useState)(null===re||void 0===re?void 0:re.component_fields.find((function(e){return"Status"===e.field_name}))),Ne=(0,t.Z)(Pe,1)[0],Te=(0,d.useState)(null===re||void 0===re||null===(r=re.component_items)||void 0===r?void 0:r.find((function(e){return"Payments"===e.type&&(null===e||void 0===e?void 0:e.value)===(null===he||void 0===he?void 0:he.id)}))),De=(0,t.Z)(Te,2),Ae=De[0],Ue=De[1],Le=(0,d.useState)(""),Oe=(0,t.Z)(Le,2),Re=Oe[0],ze=Oe[1],qe=(0,d.useState)(!1),Be=(0,t.Z)(qe,2),Fe=Be[0],We=Be[1],Ye=(0,d.useState)({type:"Match"}),je=(0,t.Z)(Ye,2),He=je[0],Je=je[1],Ge=(0,d.useState)(),Ve=(0,t.Z)(Ge,2),Qe=Ve[0],Xe=Ve[1],Ke=(null===he||void 0===he?void 0:he.id)===(null===re||void 0===re||null===(s=re.created_by)||void 0===s?void 0:s.id),$e=(null===re||void 0===re||null===(v=re.component_fields.find((function(e){return"Sport"===e.field_name})))||void 0===v||v.value,null===re||void 0===re||null===(c=re.component_fields.find((function(e){return"Type"===e.field_name})))||void 0===c||c.value,null===re||void 0===re||null===(p=re.component_fields.find((function(e){return"Notes"===e.field_name})))||void 0===p||p.value,null===re||void 0===re?void 0:re.component_fields.find((function(e){return"Club"===e.field_name}))),en=fe.find((function(e){var n;return e.module_id===(null===$e||void 0===$e||null===(n=$e.options)||void 0===n?void 0:n.module_id)&&(null===e||void 0===e?void 0:e.component_fields.find((function(e){return e.value===(null===$e||void 0===$e?void 0:$e.value)})))})),nn=(null===en||void 0===en||en.component_fields.find((function(e){return"Value Button"===e.data_type_name&&(null===e||void 0===e?void 0:e.value)})),_=null===en||void 0===en||null===(h=en.component_fields.find((function(e){return"My Community"===e.field_name})))||void 0===h?void 0:h.value,null!==(T=null===re||void 0===re?void 0:re.component_fields.find((function(e){return"Private"===e.field_name})))&&void 0!==T&&T),on="".concat(N()(new Date(null===re||void 0===re||null===(D=re.component_fields.find((function(e){return"Meet Date"===e.field_name})))||void 0===D?void 0:D.value)).format("DD MMM YYYY hh:mm A")),ln=null===re||void 0===re?void 0:re.component_fields.find((function(e){return"Fee"===e.field_name})),tn=function(){return d.createElement("div",null,!(Ze||Ke)&&!nn&&!("Closed"===(null===re||void 0===re?void 0:re.status)||"Done"===(null===re||void 0===re?void 0:re.status)||"Cancelled"===(null===re||void 0===re?void 0:re.status)||"Expired"===(null===re||void 0===re?void 0:re.status))&&d.createElement(x.zx,{title:"Join Meet",clicked:function(){var e,n,o,t,d;xe(!0),(0,C.KL)((0,l.Z)((0,l.Z)({},re),{},{component_items:re.component_items.filter((function(e){return e.value!==he.id&&"Unavailable"===e.type}))}),re.id,[].concat((0,i.Z)(null!==(e=null===(n=re.shared_users)||void 0===n?void 0:n.map((function(e){return e.id})))&&void 0!==e?e:[]),[null===he||void 0===he?void 0:he.id]),null===re||void 0===re?void 0:re.title,null===re||void 0===re?void 0:re.is_complete,null===(o=se.processModule)||void 0===o||null===(t=o.module)||void 0===t||null===(d=t.options)||void 0===d?void 0:d.shares).subscribe({next:function(e){var n;re.shared_users=null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.shared_users,we(!0),xe(!1)},error:function(){return xe(!1)}})},style:{width:"100%",backgroundColor:"green"},loading:be}),Ze&&ln&&!Ke&&!Ae&&d.createElement(x.zx,{disabled:+(null===he||void 0===he?void 0:he.wallet)<+(null===ln||void 0===ln?void 0:ln.value),title:"Pay ".concat(null===ln||void 0===ln?void 0:ln.field_name),clicked:function(){+(null===he||void 0===he?void 0:he.wallet)>+(null===ln||void 0===ln?void 0:ln.value)?(xe(!0),(0,R.e_)({user_id:he.id,id:(0,f.mR)(),total:-+(null===ln||void 0===ln?void 0:ln.value),product:"PY-".concat(null===re||void 0===re?void 0:re.id),notes:"Wallet",quantity:1}).pipe((0,w.P)()).subscribe({next:function(){var e,n,o,l,i;he.wallet=+(+(null!==(e=null===he||void 0===he?void 0:he.wallet)&&void 0!==e?e:0)-+(null===ln||void 0===ln?void 0:ln.value)),(0,C.np)({index:null===re||void 0===re||null===(n=re.component_items)||void 0===n?void 0:n.length,item_code:null===se||void 0===se||null===(o=se.processModule)||void 0===o||null===(l=o.module)||void 0===l?void 0:l.id,type:"Payments",value:null===he||void 0===he?void 0:he.id,alt_value:null===re||void 0===re||null===(i=re.created_by)||void 0===i?void 0:i.id,total:null===ln||void 0===ln?void 0:ln.value},re.id).subscribe({next:function(e){var n,o;Ue(null===e||void 0===e||null===(n=e.component_items)||void 0===n?void 0:n.find((function(e){return"Payments"===e.type&&(null===e||void 0===e?void 0:e.value)===(null===he||void 0===he?void 0:he.id)}))),(0,R.e_)({user_id:null===re||void 0===re||null===(o=re.created_by)||void 0===o?void 0:o.id,id:(0,f.mR)(),total:+(null===ln||void 0===ln?void 0:ln.value),product:"CR-".concat(null===re||void 0===re?void 0:re.id),notes:"Wallet",quantity:1}).pipe((0,w.P)()).subscribe({next:function(){return xe(!1)},error:function(){return xe(!1)}})},error:function(){return xe(!1)}})}})):ze("Insufficient wallet balance. ( Available: ".concat(null===he||void 0===he?void 0:he.wallet,")"))},style:{width:"100%",backgroundColor:"green"},loading:be}),Re&&d.createElement("p",{style:{fontFamily:"var(--app-text-mobile-font)",fontSize:"14px",fontWeight:"bold"},onClick:function(){return ze("")}},Re),Ze&&!Ke&&!("Closed"===(null===re||void 0===re?void 0:re.status)||"Done"===(null===re||void 0===re?void 0:re.status)||"Cancelled"===(null===re||void 0===re?void 0:re.status)||"Expired"===(null===re||void 0===re?void 0:re.status))&&d.createElement(x.zx,{title:"Cant Join",clicked:function(){var e,n,o,t,d,a,u,r,s;xe(!0),(0,C.KL)((0,l.Z)((0,l.Z)({},re),{},{component_items:[].concat((0,i.Z)(null!==(e=null===re||void 0===re?void 0:re.component_items)&&void 0!==e?e:[]),[{index:null===re||void 0===re||null===(n=re.component_items)||void 0===n?void 0:n.length,item_code:null===se||void 0===se||null===(o=se.processModule)||void 0===o||null===(t=o.module)||void 0===t?void 0:t.id,type:"Unavailable",value:null===he||void 0===he?void 0:he.id}])}),re.id,null===(d=re.shared_users)||void 0===d||null===(a=d.filter((function(e){return e.id!==(null===he||void 0===he?void 0:he.id)})))||void 0===a?void 0:a.map((function(e){return e.id})),null===re||void 0===re?void 0:re.title,null===re||void 0===re?void 0:re.is_complete,null===(u=se.processModule)||void 0===u||null===(r=u.module)||void 0===r||null===(s=r.options)||void 0===s?void 0:s.shares).subscribe({next:function(e){var n,o;re.shared_users=null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.shared_users,re.component_items=null===e||void 0===e||null===(o=e.data)||void 0===o?void 0:o.component_items,we(!1),xe(!1)},error:function(){return xe(!1)}})},style:{width:"100%"},loading:be}),!(Ze||Ke)&&!ke&&nn&&!("Closed"===(null===re||void 0===re?void 0:re.status)||"Done"===(null===re||void 0===re?void 0:re.status)||"Cancelled"===(null===re||void 0===re?void 0:re.status)||"Expired"===(null===re||void 0===re?void 0:re.status))&&d.createElement(x.zx,{title:"Request to Join Meet",clicked:function(){var e,n,o;xe(!0),(0,C.np)({index:null===re||void 0===re||null===(e=re.component_items)||void 0===e?void 0:e.length,item_code:null===se||void 0===se||null===(n=se.processModule)||void 0===n||null===(o=n.module)||void 0===o?void 0:o.id,type:"Request",value:null===he||void 0===he?void 0:he.id},re.id).subscribe({next:function(){Ie(!0),xe(!1)},error:function(){return xe(!1)}})},style:{width:"100%",backgroundColor:"var(--app-color-blue)"},loading:be}))},dn=function(e){var n,o=[].concat((0,i.Z)(me),[he]).find((function(e){return e.id===He.value})),t=[].concat((0,i.Z)(me),[he]).find((function(e){return e.id===He.alt_value})),a=JSON.parse(He.item_code);return d.createElement("div",{className:E.mobilePopupActionContainer},d.createElement("div",{style:{fontFamily:"var(--app-text-mobile-font)",fontSize:"18px",fontWeight:"bold"}},null===a||void 0===a?void 0:a.round),d.createElement("div",{style:{fontFamily:"var(--app-text-mobile-font)",fontSize:"12px",marginTop:"5px"}},"Date: ".concat(N()(null===a||void 0===a?void 0:a.date).format("DD MMMM YYYY HH:mm"))),d.createElement("div",{style:{fontFamily:"var(--app-text-mobile-font)",fontSize:"12px",marginTop:"5px"}},"Venue: ".concat(null===a||void 0===a?void 0:a.court)),d.createElement("hr",null),d.createElement("div",{style:{display:"flex",justifyContent:"space-between",width:"100%"}},d.createElement("p",{style:{fontSize:"14px",fontFamily:"var(--app-text-main-font)",fontWeight:"bold",marginRight:"20px",width:"50%"}},"".concat(null===o||void 0===o?void 0:o.first_name," ").concat(null===o||void 0===o?void 0:o.last_name)),d.createElement("p",{style:{textAlign:"right",fontSize:"14px",fontFamily:"var(--app-text-main-font)",fontWeight:"bold",marginRight:"20px",width:"50%"}},"".concat(null===t||void 0===t?void 0:t.first_name," ").concat(null===t||void 0===t?void 0:t.last_name))),null===a||void 0===a||null===(n=a.matches)||void 0===n?void 0:n.map((function(e,n){return d.createElement("div",{key:n,style:{display:"flex",justifyContent:"space-between",width:"100%"}},d.createElement("input",{defaultValue:null===e||void 0===e?void 0:e.p1,style:{textAlign:"center",width:"50px",height:"50px",margin:"10px"},onChange:function(n){e.p1=n.target.value,He.item_code=JSON.stringify(a)}}),d.createElement("p",{style:{fontSize:"14px",fontFamily:"var(--app-text-main-font)"}},"SET ",e.set),d.createElement("input",{defaultValue:null===e||void 0===e?void 0:e.p2,style:{textAlign:"center",width:"50px",height:"50px",margin:"10px"},onChange:function(n){e.p2=n.target.value,He.item_code=JSON.stringify(a)}}))})),d.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},d.createElement(x.zx,{light:!0,style:{display:"",backgroundColor:"rgb(246,244,236)"},clicked:function(){xe(!0),(0,C.np)(He,re.id).subscribe({next:function(e){re.component_items=e.data.component_items,xe(!1),We(!1)},error:function(){return xe(!1)}})},title:"UPDATE",loading:be}),d.createElement(x.zx,{light:!0,style:{display:"",backgroundColor:"rgb(246,244,236)"},clicked:function(){var e;a.matches.push({p1:0,p2:0,set:(null===a||void 0===a||null===(e=a.matches)||void 0===e?void 0:e.length)+1}),Je((0,l.Z)((0,l.Z)({},He),{},{item_code:JSON.stringify(a)}))},title:"ADD SET"})))};return d.createElement("div",null,d.createElement("div",{style:{fontFamily:"var(--app-text-mobile-font)",fontSize:"18px",fontWeight:"bold"}},null===re||void 0===re?void 0:re.title),d.createElement("div",{style:{fontFamily:"var(--app-text-mobile-font)",fontSize:"12px",marginTop:"5px"}},on),d.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},Ze&&d.createElement("p",{style:{fontFamily:"var(--app-text-mobile-font)",fontSize:"14px",fontWeight:"bold",marginTop:"30px"}},"You are a participant of this meet"),!Ke&&ln&&d.createElement("p",{style:{fontFamily:"var(--app-text-mobile-font)",fontSize:"14px",fontWeight:"bold",marginTop:"30px"}},Ae?"PAID":"FEE (".concat(null===ln||void 0===ln?void 0:ln.value,")"))),d.createElement(b.mQ,{style:{width:"100%",fontSize:g.tq?"16px":"20px",marginTop:"20px"}},d.createElement(b.td,{style:{fontFamily:"var(--app-text-mobile-font)",fontSize:g.tq?"14px":"16px"}},d.createElement(b.OK,null,"DETAILS"),d.createElement(b.OK,null,"PARTICIPANTS"),!("New"===re.status||"None"===re.status)&&d.createElement(b.OK,null,"GAMES")),d.createElement(b.x4,{id:"DETAILS"},d.createElement("div",{style:{width:"100%",minHeight:"60vh",overflow:"auto"}},d.createElement("div",{className:E.centeredDiv,style:{width:"inherit",fontSize:"14px",marginTop:"20px"}},e.children,Ke&&"Expired"!==(null===re||void 0===re?void 0:re.status)&&d.createElement("div",{style:{width:"100%",display:""}},d.createElement(O.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-light)"},className:E.multiselectComponent,visible:!0,mandatory:!1,value:null===Ne||void 0===Ne?void 0:Ne.value,items:null===Ne||void 0===Ne||null===(A=Ne.options)||void 0===A||null===(U=A.list)||void 0===U?void 0:U.map((function(e){return{label:e,value:e}})),onChange:function(e){var n,o,l,i;re.status=e,Ne.value=e,xe(!0),(0,C.KL)(re,re.id,null===(n=re.shared_users)||void 0===n?void 0:n.map((function(e){return e.id})),null===re||void 0===re?void 0:re.title,null===re||void 0===re?void 0:re.is_complete,null===(o=se.processModule)||void 0===o||null===(l=o.module)||void 0===l||null===(i=l.options)||void 0===i?void 0:i.shares).subscribe({next:function(e){xe(!1)},error:function(){return xe(!1)}})},fieldLabel:"Status",placeholder:"Select status..."}))),d.createElement(tn,null))),d.createElement(b.x4,{id:"PARTICIPANTS"},d.createElement("div",{style:{width:"100%",minHeight:"50vh",overflow:"auto"}},d.createElement("p",{style:{fontSize:"14px",fontFamily:"var(--app-text-main-font)",fontWeight:"bold",color:"var(--app-color-gray-dark)",paddingLeft:"5px"}},"Organizer"),d.createElement("div",{className:E.filtersContainer},d.createElement(I.Z,{simple:!0,photo:null!==(L=null===he||void 0===he?void 0:he.photo)&&void 0!==L?L:"https://s3-symbol-logo.tradingview.com/logo-yazilim--600.png",email:"",position:null!==(z=null===he||void 0===he||null===(B=he.options)||void 0===B?void 0:B.info)&&void 0!==z?z:"",firstName:d.createElement("div",{style:{fontWeight:"bold"}},"".concat(null===re||void 0===re||null===(F=re.created_by)||void 0===F?void 0:F.first_name," ").concat(null===re||void 0===re||null===(W=re.created_by)||void 0===W?void 0:W.last_name)),cardClicked:function(){},width:"100%"})),(null===re||void 0===re||null===(Y=re.shared_users)||void 0===Y?void 0:Y.length)>0&&d.createElement(d.Fragment,null,d.createElement("p",{style:{fontSize:"14px",fontFamily:"var(--app-text-main-font)",fontWeight:"bold",color:"var(--app-color-gray-dark)",paddingLeft:"5px"}},"Participants ( ".concat(null===re||void 0===re||null===(j=re.shared_users)||void 0===j?void 0:j.length," )")),d.createElement(Z.default,{className:E.sharesTable,withColumns:!1,modern:!0,columns:["User","Photo","Bio","Pay"],list:null===re||void 0===re||null===(H=re.shared_users)||void 0===H?void 0:H.map((function(e){var n,o,l,i,t,a=me.find((function(n){return n.id===e.id}));return a?(t={},(0,y.Z)(t,"User",d.createElement("div",{style:{fontWeight:"bold"}},"".concat(null===a||void 0===a?void 0:a.first_name," ").concat(null===a||void 0===a?void 0:a.last_name))),(0,y.Z)(t,"Photo",null!==(n=null===a||void 0===a?void 0:a.photo)&&void 0!==n?n:null===pe||void 0===pe?void 0:pe.logo),(0,y.Z)(t,"Bio",null!==(o=null===a||void 0===a||null===(l=a.options)||void 0===l?void 0:l.info)&&void 0!==o?o:""),(0,y.Z)(t,"Pay",ln&&Ke?null!==re&&void 0!==re&&null!==(i=re.component_items)&&void 0!==i&&i.find((function(e){return"Payments"===e.type&&(null===e||void 0===e?void 0:e.value)===(null===a||void 0===a?void 0:a.id)}))?"Paid":d.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},d.createElement("p",{style:{fontFamily:"var(--app-text-mobile-font)",fontSize:"14px",fontWeight:"bold"}},"Unpaid"),d.createElement(x.zx,{title:"Remove",clicked:function(){var e,n,o,l;xe(!0),(0,C.KL)(re,re.id,null===(e=re.shared_users)||void 0===e?void 0:e.filter((function(e){return e.id!==(null===a||void 0===a?void 0:a.id)})).map((function(e){return e.id})),null===re||void 0===re?void 0:re.title,null===re||void 0===re?void 0:re.is_complete,null===(n=se.processModule)||void 0===n||null===(o=n.module)||void 0===o||null===(l=o.options)||void 0===l?void 0:l.shares).subscribe({next:function(e){var n;re.component_items=null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.component_items,we(!1),xe(!1)},error:function(){return xe(!1)}})},style:{width:"100px"},loading:be})):""),t):{User:null===e||void 0===e?void 0:e.id}}))})),Ke&&(null===re||void 0===re||null===(J=re.component_items)||void 0===J?void 0:J.filter((function(e){return"Unavailable"===e.type})).length)>0&&d.createElement(d.Fragment,null,d.createElement("p",{style:{fontSize:"14px",fontFamily:"var(--app-text-main-font)",fontWeight:"bold",color:"var(--app-color-gray-dark)",paddingLeft:"5px"}},"Unavailable ( ".concat(null===re||void 0===re||null===(G=re.component_items)||void 0===G?void 0:G.filter((function(e){return"Unavailable"===e.type})).length," )")),d.createElement(Z.default,{className:E.sharesTable,withColumns:!1,modern:!0,columns:["User","Photo","Bio"],list:null===re||void 0===re||null===(V=re.component_items)||void 0===V||null===(Q=V.filter((function(e){return"Unavailable"===e.type})))||void 0===Q?void 0:Q.map((function(e){var n,o,l,i,t=me.find((function(n){return n.id===e.value}));return i={},(0,y.Z)(i,"User","".concat(null===t||void 0===t?void 0:t.first_name," ").concat(null===t||void 0===t?void 0:t.last_name)),(0,y.Z)(i,"Photo",null!==(n=null===t||void 0===t?void 0:t.photo)&&void 0!==n?n:null===pe||void 0===pe?void 0:pe.logo),(0,y.Z)(i,"Bio",null!==(o=null===t||void 0===t||null===(l=t.options)||void 0===l?void 0:l.info)&&void 0!==o?o:""),i}))})),Ke&&(null===re||void 0===re||null===(X=re.component_items)||void 0===X?void 0:X.filter((function(e){return"Request"===e.type||"Waitlist"===e.type})).length)>0&&d.createElement(d.Fragment,null,d.createElement("p",{style:{fontSize:"14px",fontFamily:"var(--app-text-main-font)",fontWeight:"bold",color:"var(--app-color-gray-dark)",paddingLeft:"5px"}},"Request to Join ( ".concat(null===re||void 0===re||null===(K=re.component_items)||void 0===K?void 0:K.filter((function(e){return"Request"===e.type||"Waitlist"===e.type})).length," )")),null===re||void 0===re||null===($=re.component_items)||void 0===$||null===(ee=$.filter((function(e){return"Request"===e.type||"Waitlist"===e.type})))||void 0===ee?void 0:ee.map((function(e,n){var o=me.find((function(n){return n.id===e.value}));return d.createElement("div",{key:n,style:{display:"flex"},className:E.filtersContainer},d.createElement("p",{style:{fontSize:"14px",fontFamily:"var(--app-text-main-font)",width:"200px",marginRight:"20px"}},"".concat(null===o||void 0===o?void 0:o.first_name," ").concat(null===o||void 0===o?void 0:o.last_name)),d.createElement(x.zx,{title:"Approve",clicked:function(){var e,n,t,d,a;xe(!0),(0,C.KL)((0,l.Z)((0,l.Z)({},re),{},{component_items:re.component_items.filter((function(e){return e.value!==o.id&&("Request"===e.type||"Waitlist"===e.type)}))}),re.id,[].concat((0,i.Z)(null!==(e=null===(n=re.shared_users)||void 0===n?void 0:n.map((function(e){return e.id})))&&void 0!==e?e:[]),[null===o||void 0===o?void 0:o.id]),null===re||void 0===re?void 0:re.title,null===re||void 0===re?void 0:re.is_complete,null===(t=se.processModule)||void 0===t||null===(d=t.module)||void 0===d||null===(a=d.options)||void 0===a?void 0:a.shares).subscribe({next:function(e){var n,o;re.shared_users=null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.shared_users,re.component_items=null===e||void 0===e||null===(o=e.data)||void 0===o?void 0:o.component_items,xe(!1)},error:function(){return xe(!1)}})},style:{width:"100px",backgroundColor:"green",fontSize:"10px"},titleStyle:{fontSize:"10px"},loading:be}),d.createElement(x.zx,{title:"Decline",clicked:function(){var e,n,i,t;xe(!0),(0,C.KL)((0,l.Z)((0,l.Z)({},re),{},{component_items:re.component_items.filter((function(e){return e.value!==o.id&&("Request"===e.type||"Waitlist"===e.type)}))}),re.id,null===(e=re.shared_users)||void 0===e?void 0:e.map((function(e){return e.id})),null===re||void 0===re?void 0:re.title,null===re||void 0===re?void 0:re.is_complete,null===(n=se.processModule)||void 0===n||null===(i=n.module)||void 0===i||null===(t=i.options)||void 0===t?void 0:t.shares).subscribe({next:function(e){var n;re.component_items=null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.component_items,we(!1),xe(!1)},error:function(){return xe(!1)}})},style:{width:"100px"},titleStyle:{fontSize:"10px"},loading:be}),"Request"===e.type?d.createElement(x.zx,{title:"Waitlist",clicked:function(){xe(!0),(0,C.np)((0,l.Z)((0,l.Z)({},e),{},{type:"Waitlist"}),re.id).subscribe({next:function(n){e.type="Waitlist",xe(!1)},error:function(){return xe(!1)}})},style:{width:"100px",backgroundColor:"orange"},titleStyle:{fontSize:"10px"},loading:be}):d.createElement("p",{style:{fontSize:"16px",fontFamily:"var(--app-text-main-font)",fontWeight:"bold"}},"Waitlisted"))}))),ke&&d.createElement(d.Fragment,null,d.createElement("p",{style:{fontSize:"14px",fontFamily:"var(--app-text-main-font)",fontWeight:"bold",color:"var(--app-color-gray-dark)",paddingLeft:"5px"}},(null===(ne=re.component_items)||void 0===ne||null===(oe=ne.filter((function(e){var n,o;return(null===e||void 0===e?void 0:e.value)===(null===he||void 0===he?void 0:he.id)&&"Request"===(null===e||void 0===e?void 0:e.type)&&(null===e||void 0===e?void 0:e.item_code)===(null===se||void 0===se||null===(n=se.processModule)||void 0===n||null===(o=n.module)||void 0===o?void 0:o.id)})))||void 0===oe?void 0:oe.length)>0?"Pending Request":"Waitlisted"),d.createElement("div",{className:E.filtersContainer},d.createElement(I.Z,{simple:!0,photo:null!==(le=null===he||void 0===he?void 0:he.photo)&&void 0!==le?le:"https://s3-symbol-logo.tradingview.com/logo-yazilim--600.png",email:"",position:null!==(ie=null===he||void 0===he||null===(te=he.options)||void 0===te?void 0:te.info)&&void 0!==ie?ie:"",firstName:d.createElement("div",{style:{fontWeight:"bold"}},"".concat(null===he||void 0===he?void 0:he.first_name," ").concat(null===he||void 0===he?void 0:he.last_name)),cardClicked:function(){},width:"100%"}))),d.createElement(tn,null))),!("New"===re.status||"None"===re.status)&&d.createElement(b.x4,{id:"GAMES"},d.createElement("div",{style:{width:"100%",minHeight:"50vh",overflow:"auto"}},ve&&d.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end"}},d.createElement(x.zx,{light:!0,style:{display:""},clicked:function(){We(!0),Je({type:"Match"})},icon:d.createElement("img",{src:M.IHx})})),d.createElement("p",{style:{fontSize:"14px",fontFamily:"var(--app-text-main-font)",fontWeight:"bold",color:"var(--app-color-gray-dark)",paddingLeft:"5px"}},"Matches ( ".concat(null===re||void 0===re||null===(de=re.component_items)||void 0===de?void 0:de.filter((function(e){return"Match"===e.type})).length," )")),null===re||void 0===re||null===(ae=re.component_items)||void 0===ae||null===(ue=ae.filter((function(e){return"Match"===e.type})))||void 0===ue?void 0:ue.map((function(e,n){var o=[].concat((0,i.Z)(me),[he]).find((function(n){return n.id===e.value})),l=[].concat((0,i.Z)(me),[he]).find((function(n){return n.id===e.alt_value})),t=JSON.parse(e.item_code),a=t.matches.map((function(e){return"  ".concat(e.p1,"-").concat(e.p2,"  ")})).toString();return d.createElement("div",{key:n,className:E.filtersContainer,onClick:function(){Je(e),We(!0)}},d.createElement("div",{style:{display:"flex",width:"100%",justifyContent:"space-between"}},d.createElement("div",{style:{fontSize:"14px",fontFamily:"var(--app-text-main-font)",fontWeight:"bold",marginRight:"20px"}},"".concat(null===t||void 0===t?void 0:t.round)),d.createElement("div",{style:{fontSize:"14px",fontFamily:"var(--app-text-main-font)",fontWeight:"bold",marginRight:"20px"}},"".concat(a))),d.createElement("hr",null),d.createElement("div",{style:{display:"flex",marginTop:"5px",width:"100%",justifyContent:"space-between"}},d.createElement("div",{style:{fontSize:"14px",fontFamily:"var(--app-text-main-font)",fontWeight:"bold",marginRight:"20px"}},"".concat(null===l||void 0===l?void 0:l.first_name," ").concat(null===l||void 0===l?void 0:l.last_name)),d.createElement("div",{style:{fontSize:"14px",fontFamily:"var(--app-text-main-font)",fontWeight:"bold",marginRight:"20px"}},"".concat(null===o||void 0===o?void 0:o.first_name," ").concat(null===o||void 0===o?void 0:o.last_name))))}))),d.createElement("div",{className:Fe?E.mobilepopupopen:E.mobilepopup,style:{display:Fe?"":"none"}},d.createElement("div",{style:{width:"100%",height:"20vh",backgroundColor:"white",opacity:"0.9"},onClick:function(){return We(!1)}}),null!==He&&void 0!==He&&He.id?d.createElement(dn,null):d.createElement("div",{className:E.mobilePopupActionContainer},d.createElement(O.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-light)"},className:E.multiselectComponent,visible:!0,mandatory:!1,items:[].concat((0,i.Z)(re.shared_users.map((function(e){var n=me.find((function(n){return n.id===e.id}));return{label:"".concat(n.first_name," ").concat(n.last_name),value:e.id}}))),[{label:"".concat(he.first_name," ").concat(he.last_name),value:he.id}]),onChange:function(e){Je((0,l.Z)((0,l.Z)({},He),{},{value:e}))},fieldLabel:"Player 1",placeholder:"Select player 1"}),d.createElement(O.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-light)"},className:E.multiselectComponent,visible:!0,mandatory:!1,items:[].concat((0,i.Z)(re.shared_users.map((function(e){var n=me.find((function(n){return n.id===e.id}));return{label:"".concat(n.first_name," ").concat(n.last_name),value:e.id}}))),[{label:"".concat(he.first_name," ").concat(he.last_name),value:he.id}]),onChange:function(e){Je((0,l.Z)((0,l.Z)({},He),{},{alt_value:e}))},fieldLabel:"Player 2",placeholder:"Select player 2"}),d.createElement(O.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-light)"},className:E.multiselectComponent,visible:!0,mandatory:!1,items:[{label:"Round 1",value:"Round 1"},{label:"Round 2",value:"Round 2"},{label:"Round 3",value:"Round 3"},{label:"Round 4",value:"Round 4"},{label:"Round 5",value:"Round 5"},{label:"Round 6",value:"Round 6"},{label:"Round 7",value:"Round 7"},{label:"Round 8",value:"Round 8"},{label:"Round 9",value:"Round 9"}],onChange:function(e){var n,o=JSON.parse(null!==(n=null===He||void 0===He?void 0:He.item_code)&&void 0!==n?n:"{}");o.round=e,o.matches=[{p1:0,p2:0,set:1}],Je((0,l.Z)((0,l.Z)({},He),{},{item_code:JSON.stringify(o)}))},fieldLabel:"Round",placeholder:"Select Round"}),d.createElement("label",{className:E.fieldLabel,style:{color:"var(--app-color-gray-light",fontSize:"12px",marginTop:"10px"}},"Date and Time"),d.createElement("div",{className:E.filtersContainer,style:{height:"60px",border:"2px solid var(--app-color-gray-lighter)",padding:"10px",marginTop:"10px"}},d.createElement(q(),{showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:5,customInput:d.createElement("div",{id:"custom-input",style:{cursor:"pointer",display:"flex",justifyContent:"center",width:"100%",alignItems:"stretch",padding:"5px",border:"0px solid var(--app-color-gray-lighter)",backgroundColor:"rgb(246,244,236)"}},d.createElement(S.G,{icon:k.WRo,style:{marginLeft:"10px",width:"20px",height:"20px"}}),d.createElement("input",{value:Qe?N()(Qe).format("DD MMMM YYYY HH:mm"):"",disabled:!0,type:"text",style:{flex:1,outline:"none",fontFamily:"var(--app-text-main-font)",fontSize:"16px",fontWeight:"bold",lineHeight:"20px",color:"#4A4A4A",textAlign:"left",maxWidth:"98%",border:"0px",backgroundColor:"rgb(246,244,236)"},onChange:function(e){}})),className:E.singleInputContainer,selected:Qe?new Date(N()(Qe)):(0,P.now)(),onChange:function(e){if(e>(0,P.now)()){var n;Xe(e);var o=JSON.parse(null!==(n=null===He||void 0===He?void 0:He.item_code)&&void 0!==n?n:"{}");o.date=e,o.matches=[{p1:0,p2:0,set:1}],Je((0,l.Z)((0,l.Z)({},He),{},{item_code:JSON.stringify(o)}))}}})),d.createElement(O.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-light)"},className:E.multiselectComponent,visible:!0,mandatory:!1,items:[{label:"Court 1",value:"Court 1"},{label:"Court 2",value:"Court 2"},{label:"Court 3",value:"Court 3"},{label:"Court 4",value:"Court 4"},{label:"Court 5",value:"Court 5"},{label:"Court 6",value:"Court 6"},{label:"Court 7",value:"Court 7"},{label:"Court 8",value:"Court 8"},{label:"Court 9",value:"Court 9"}],onChange:function(e){var n,o=JSON.parse(null!==(n=null===He||void 0===He?void 0:He.item_code)&&void 0!==n?n:"{}");o.court=e,o.matches=[{p1:0,p2:0,set:1}],Je((0,l.Z)((0,l.Z)({},He),{},{item_code:JSON.stringify(o)}))},fieldLabel:"Court",placeholder:"Select Court"}),(null===He||void 0===He?void 0:He.value)&&(null===He||void 0===He?void 0:He.alt_value)&&(null===He||void 0===He?void 0:He.item_code)&&d.createElement(x.zx,{title:"Create match",style:{width:"100%"},clicked:function(){var e;xe(!0),(0,C.np)((0,l.Z)((0,l.Z)({},He),{},{index:null===re||void 0===re||null===(e=re.component_items)||void 0===e?void 0:e.length}),re.id).subscribe({next:function(e){re.component_items=e.data.component_items,xe(!1),We(!1)},error:function(){return xe(!1)}})},loading:be}))))))},W=function(e){var n=e.begunModule,o=e.authenticatedUser,a=(e.user,e.template,(0,m.v9)((function(e){return e.flowReducer}))),u=(a.companyData,a.companyUsersArray,a.components),r=(a.companyPositionsArray,a.allModules,a.companyProcesses,(0,d.useState)(!1)),s=(0,t.Z)(r,2)[1],v=u.filter((function(e){return e.module_id===n.processModule.module_id&&e.component_items.find((function(e){return("Invite"===e.type||"Join"===e.type)&&e.value===o.id}))})).map((function(e){return(0,l.Z)((0,l.Z)({},e.component_items.find((function(e){return("Invite"===e.type||"Join"===e.type)&&e.value===o.id}))),{},{club:e})}));return d.createElement("div",{style:{width:"100%",padding:"0 20px",fontFamily:"var(--app-text-main-font)"}},null===v||void 0===v?void 0:v.map((function(e,t){return d.createElement("div",{className:E.filtersContainer,key:t},d.createElement(I.Z,{simple:!0,photo:"https://s3-symbol-logo.tradingview.com/logo-yazilim--600.png",firstName:d.createElement("div",{style:{fontWeight:"bold"}},"".concat(e.club.title)),email:"",position:"has invited you to join their club",cardClicked:function(){var t,d,a,u,r,v;s(!0),(0,C.KL)((0,l.Z)((0,l.Z)({},e.club),{},{component_items:e.club.component_items.filter((function(n){return n.id!==e.id}))}),e.club.id,[].concat((0,i.Z)(null!==(t=null===(d=e.club.shared_users)||void 0===d?void 0:d.map((function(e){return e.id})))&&void 0!==t?t:[]),[null===o||void 0===o?void 0:o.id]),e.club.title,null===(a=e.club)||void 0===a?void 0:a.is_complete,null===(u=n.processModule)||void 0===u||null===(r=u.module)||void 0===r||null===(v=r.options)||void 0===v?void 0:v.shares).subscribe({next:function(n){var o;e.club.shared_users=null===n||void 0===n||null===(o=n.data)||void 0===o?void 0:o.shared_users,s(!1)},error:function(){return s(!1)}})},width:"100%"}))})))},Y=function(e){var n=e.events,o=e.onEventClick,l=e.isAdmin,i=void 0===l||l,a=(0,d.useState)("day"),u=(0,t.Z)(a,2),r=u[0],s=u[1];return d.createElement(U.Scheduler,{style:{fontFamily:"var(--app-text-main-font)",fontSize:"30px"},events:null===n||void 0===n?void 0:n.map((function(e){var n,o,l=null===(n=e.component_fields.find((function(e){return"Meet Date"===e.field_name&&"Date"===e.data_type_name})))||void 0===n?void 0:n.value,i=null===(o=e.component_fields.find((function(e){return"Ends"===e.field_name&&"Date"===e.data_type_name})))||void 0===o?void 0:o.value;return{event_id:e.id,title:e.title,start:new Date(Date.parse(l)),end:new Date(Date.parse(i)),admin_id:e.id,editable:!1,deletable:!1}})),agenda:!0,navigation:i,alwaysShowAgendaDays:!1,view:r,onEventClick:o,onViewChange:function(e){return s(e)}})},j=o(67598),H=o(60534),J=o(68218),G=o(84634),V=o(74369),Q=o(67861),X=function(e){var n,o,d,a,u,r,s,v,c,p,m,h,b,E,Z,w,S,k,I,P,N,T,D,A,U,L=(0,_.pQ)(),O=(0,t.Z)(L,2),R=O[0],z=O[1],q=e.user,B=e.favorites,F=e.creating,W=e.items,Y=e.templateName,X=e.field,K=e.showSecond,$=e.listItems,ee=e.orderItems,ne=e.setShowSecond,oe=e.components,le=e.template,ie=e.component,te=e.showFavorites,de=e.companyData,ae=e.setShowFavorites,ue=e.setListItems,re=e.setOrderItems,se=e.setSelectedItems,ve=e.selectedItems,ce=null!==(n=null===le||void 0===le||null===(o=le.config.find((function(e){return"quantity"===e.key})))||void 0===o?void 0:o.label)&&void 0!==n?n:"Quantity",pe=null!==(d=null===le||void 0===le||null===(a=le.config.find((function(e){return"alt_value"===e.key})))||void 0===a?void 0:a.label)&&void 0!==d?d:"Actual",me=null!==(u=null===le||void 0===le||null===(r=le.config.find((function(e){return"item_code"===e.key})))||void 0===r?void 0:r.label)&&void 0!==u?u:"Product ID",fe=null!==(s=null===le||void 0===le?void 0:le.list)&&void 0!==s?s:[],_e=function(e){var n,o=[];e.filter((function(e){var n=null===W||void 0===W?void 0:W.find((function(n){var o;return(null===(o=n.component_fields.filter((function(n){return n.value===e.component_id})))||void 0===o?void 0:o.length)>0}));n&&(o=[].concat((0,i.Z)(o),[n]))})),ue(o),re(null===(n=o)||void 0===n?void 0:n.map((function(e){var n={};return ie.selected_fields.filter((function(o){var i,t;"Text"!==o.data_type_name&&"Number"!==o.data_type_name||(n=(0,l.Z)((0,l.Z)({},n),{},(0,y.Z)({},o.field_name,null!==(i=null===(t=e.component_fields.find((function(e){return e.field_name===o.field_name})))||void 0===t?void 0:t.value)&&void 0!==i?i:0)))})),n})))},he=function(e,n,o){var l,i=e.component_fields.find((function(e){var n;return e.field_name===(null===ie||void 0===ie||null===(n=ie.options)||void 0===n?void 0:n.key)})),t=null===R||void 0===R||null===(l=R.items)||void 0===l?void 0:l.find((function(e){return e.item_code===i.value}));if(void 0===t){var d,a,u,r={alt_value:null!==(d=ee[n][pe])&&void 0!==d?d:0,quantity:null!==(a=ee[n][ce])&&void 0!==a?a:0,item_code:i.value,id:(0,f.mR)(),value:null!==(u=parseFloat(o*+ee[n][ce]).toFixed(2))&&void 0!==u?u:0};z({action:_._U.addModuleItems,value:r})}else{var s;if(0==+ee[n][ce])z({action:_._U.removeModuleItems,value:t});else t.quantity=ee[n][ce],t.alt_value=ee[n][pe],t.value=null!==(s=parseFloat(o*+ee[n][ce]).toFixed(2))&&void 0!==s?s:0,z({action:_._U.updateModuleItems,value:t})}};return Q.createElement("div",{style:{width:"100%",justifyContent:"center"}},Q.createElement("div",null,Q.createElement("div",{style:{display:"flex",flexDirection:"row",marginTop:"50px",width:"100%"}},Q.createElement("div",{style:{disabled:!0,width:"250px",display:g.tq?"none":"flex",flexDirection:"column",marginRight:"20px",marginTop:"".concat(280+60*(null!==(v=null===R||void 0===R||null===(c=R.items)||void 0===c?void 0:c.length)&&void 0!==v?v:1),"px"),fontSize:"18px"}},"Filters:",(null===X||void 0===X||null===(p=X.options)||void 0===p||null===(m=p.filters)||void 0===m?void 0:m.length)>0&&Q.createElement("div",{className:j.Z.dropdownContainer},Q.createElement(x.rk,{items:W?J.Z(G.Z("value"))(W.map((function(e){var n=e.component_fields.find((function(e){var n;return e.field_name===(null===X||void 0===X||null===(n=X.options)||void 0===n?void 0:n.filters[0])}));return{label:null===n||void 0===n?void 0:n.value,value:null===n||void 0===n?void 0:n.value,component:e}}))):[],onChange:function(e){var n,o,i;ae(!1),re([]),se((0,y.Z)({},null===X||void 0===X||null===(n=X.options)||void 0===n?void 0:n.filters[0],e.value)),ue([]),ne(!1),setTimeout((function(){return ne(!0)}),10),ue(null===W||void 0===W?void 0:W.filter((function(n){var o;return(null===(o=n.component_fields.filter((function(n){return n.value===e.value})))||void 0===o?void 0:o.length)>0}))),z({action:_._U.setModuleNewStepComponents,value:null!==(o=null===(i=R.currentStep)||void 0===i?void 0:i.component_blueprints)&&void 0!==o?o:[]}),re(null===W||void 0===W?void 0:W.filter((function(n){var o;return(null===(o=n.component_fields.filter((function(n){return n.value===e.value})))||void 0===o?void 0:o.length)>0})).map((function(e){var n={};return ie.selected_fields.filter((function(o){var i,t;"Text"!==o.data_type_name&&"Number"!==o.data_type_name||(n=(0,l.Z)((0,l.Z)({},n),{},(0,y.Z)({},o.field_name,null!==(i=null===(t=e.component_fields.find((function(e){return e.field_name===o.field_name})))||void 0===t?void 0:t.value)&&void 0!==i?i:0)))})),n})))},placeholder:null===X||void 0===X||null===(h=X.options)||void 0===h?void 0:h.filters[0],moliclassname:j.Z.componentsSelectMenuOverlayListItem,className:j.Z.currencyInput})),Q.createElement("div",{style:{height:"10px"}}),(null===X||void 0===X||null===(b=X.options)||void 0===b||null===(E=b.filters)||void 0===E?void 0:E.length)>1&&!g.tq&&K&&Q.createElement("div",{className:j.Z.dropdownContainer},Q.createElement(x.rk,{items:ve[null===X||void 0===X||null===(Z=X.options)||void 0===Z?void 0:Z.filters[0]]?J.Z(G.Z("value"))(W.map((function(e){var n=e.component_fields.find((function(e){var n;return e.field_name===(null===X||void 0===X||null===(n=X.options)||void 0===n?void 0:n.filters[1])}));return{label:null===n||void 0===n?void 0:n.value,value:null===n||void 0===n?void 0:n.value,component:e}})).filter((function(e){return e.component.component_fields.filter((function(e){var n,o;return e.value===ve[null===X||void 0===X||null===(n=X.options)||void 0===n?void 0:n.filters[0]]&&e.field_name===(null===X||void 0===X||null===(o=X.options)||void 0===o?void 0:o.filters[0])})).length>0}))):[],onChange:function(e){var n,o,i;ae(!1),z({action:_._U.setModuleNewStepComponents,value:null!==(n=null===(o=R.currentStep)||void 0===o?void 0:o.component_blueprints)&&void 0!==n?n:[]}),se((0,l.Z)((0,l.Z)({},ve),{},(0,y.Z)({},null===X||void 0===X||null===(i=X.options)||void 0===i?void 0:i.filters[1],e.value))),re(null===W||void 0===W?void 0:W.filter((function(n){var o;return(null===(o=n.component_fields.filter((function(n){return n.value===e.value})))||void 0===o?void 0:o.length)>0})).filter((function(e){var n;return(null===(n=e.component_fields.filter((function(e){var n;return e.value===ve[null===X||void 0===X||null===(n=X.options)||void 0===n?void 0:n.filters[0]]})))||void 0===n?void 0:n.length)>0})).map((function(e){var n={};return ie.selected_fields.filter((function(o){var i,t;"Text"!==o.data_type_name&&"Number"!==o.data_type_name||(n=(0,l.Z)((0,l.Z)({},n),{},(0,y.Z)({},o.field_name,null!==(i=null===(t=e.component_fields.find((function(e){return e.field_name===o.field_name})))||void 0===t?void 0:t.value)&&void 0!==i?i:0)))})),n}))),ue(null===W||void 0===W?void 0:W.filter((function(n){var o;return(null===(o=n.component_fields.filter((function(n){return n.value===e.value})))||void 0===o?void 0:o.length)>0})).filter((function(e){var n;return(null===(n=e.component_fields.filter((function(e){var n;return e.value===ve[null===X||void 0===X||null===(n=X.options)||void 0===n?void 0:n.filters[0]]})))||void 0===n?void 0:n.length)>0})))},placeholder:null===X||void 0===X||null===(w=X.options)||void 0===w?void 0:w.filters[1],style:{fontSize:"16px"},moliclassname:j.Z.componentsSelectMenuOverlayListItem}))),Q.createElement("div",{style:{display:"flex",flexDirection:"column",width:g.tq?"100%":"80%"}},"Orders",Q.createElement(H.Z,{className:j.Z.listContainer,highlights:"var(--app-color-gray-lighter)",columns:g.tq?null===de||void 0===de||null===(S=de.misc_info)||void 0===S||null===(k=S.templatesData.find((function(e){return e.name===Y})).config)||void 0===k?void 0:k.filter((function(e){return"Text"===e.value||"Number"===e.value||"Connector"===e.value})).map((function(e){return e.label})).slice(0,2):null===de||void 0===de||null===(I=de.misc_info)||void 0===I||null===(P=I.templatesData.find((function(e){return e.name===Y})).config)||void 0===P?void 0:P.filter((function(e){return"Text"===e.value||"Number"===e.value||"Connector"===e.value})).map((function(e){return e.label})),footer:g.tq?["Totals","".concat(V.Z((function(e,n){var o;return null!==(o=+e+ +n.quantity)&&void 0!==o?o:0}),0,null!==(N=null===R||void 0===R?void 0:R.items)&&void 0!==N?N:[]))]:["Totals:","".concat(V.Z((function(e,n){var o;return null!==(o=+e+ +n.quantity)&&void 0!==o?o:0}),0,null!==(T=null===R||void 0===R?void 0:R.items)&&void 0!==T?T:[])),"".concat(V.Z((function(e,n){var o;return+e+(isNaN(+n.alt_value)?0:null!==(o=+n.alt_value)&&void 0!==o?o:0)}),0,null!==(D=null===R||void 0===R?void 0:R.items)&&void 0!==D?D:[]))],list:null===R||void 0===R||null===(A=R.items)||void 0===A?void 0:A.map((function(e){var n,o,l,i=e.item_code,t=null!==(n=e.quantity)&&void 0!==n?n:0,d=null!==(o=e.alt_value)&&void 0!==o?o:0;return l={List:Q.createElement("div",{className:j.Z.templateInformation,style:{display:"flex",flex:"1"}},Q.createElement("div",{style:{width:"40%"}},i),Q.createElement("div",{style:{width:"20%"}},t))},(0,y.Z)(l,null===ie||void 0===ie?void 0:ie.options.key,Q.createElement("div",{className:j.Z.templateInformation},Q.createElement("span",null,i))),(0,y.Z)(l,"Quantity",Q.createElement("div",{className:j.Z.templateInformation},Q.createElement("span",null,t))),(0,y.Z)(l,"Actual",Q.createElement("div",{className:j.Z.templateInformation},Q.createElement("span",null,d))),(0,y.Z)(l,"id",e.id),(0,y.Z)(l,"code",i),l})),onListItemClick:function(e){re(null===W||void 0===W?void 0:W.filter((function(n){var o;return(null===(o=n.component_fields.filter((function(n){return n.value===e.code})))||void 0===o?void 0:o.length)>0})).map((function(e){var n,o={};ie.selected_fields.filter((function(n){var i,t;"Text"!==n.data_type_name&&"Number"!==n.data_type_name||(o=(0,l.Z)((0,l.Z)({},o),{},(0,y.Z)({},n.field_name,null!==(i=null===(t=e.component_fields.find((function(e){return e.field_name===n.field_name})))||void 0===t?void 0:t.value)&&void 0!==i?i:0)))}));var i=null===R||void 0===R||null===(n=R.items)||void 0===n?void 0:n.find((function(e){return e.item_code===o[me]}));return o[pe]=i.alt_value,o[ce]=i.quantity,o}))),ue(null===oe||void 0===oe?void 0:oe.filter((function(n){var o;return(null===(o=n.component_fields.filter((function(n){return n.value===e.code})))||void 0===o?void 0:o.length)>0})))}}),Q.createElement("br",null),Q.createElement("div",{className:j.Z.searchContainer,style:{display:te?"none":""}},Q.createElement(M.Oaj,null),Q.createElement("input",{placeholder:"Search",className:j.Z.searchInput,onChange:function(e){var n,o,i;(null===(n=e.target.value)||void 0===n?void 0:n.length)>1?(re(null===(i=oe.filter((function(e){return e.component_fields.filter((function(e){return e.component_blueprint_id===X.options.component_id})).length>0})))||void 0===i?void 0:i.filter((function(n){var o;return(null===(o=n.component_fields.filter((function(n){return n.value.includes(e.target.value)})))||void 0===o?void 0:o.length)>0})).map((function(e){var n={};return ie.selected_fields.filter((function(o){var i,t;"Text"!==o.data_type_name&&"Number"!==o.data_type_name||(n=(0,l.Z)((0,l.Z)({},n),{},(0,y.Z)({},o.field_name,null!==(i=null===(t=e.component_fields.find((function(e){return e.field_name===o.field_name})))||void 0===t?void 0:t.value)&&void 0!==i?i:0)))})),n}))),ue(null===W||void 0===W?void 0:W.filter((function(n){var o;return(null===(o=n.component_fields.filter((function(n){return n.value.includes(e.target.value)})))||void 0===o?void 0:o.length)>0})))):0==(null===(o=e.target.value)||void 0===o?void 0:o.length)&&(re([]),ue([]))}})),Q.createElement(H.Z,{className:j.Z.mobileTable,style:{width:"100%"},columns:g.tq?[null!==(U=null===ie||void 0===ie?void 0:ie.name)&&void 0!==U?U:"Item"]:(0,i.Z)(fe),list:$.map((function(e,n){var o,l,t,d,a,u,r,s,v,c="".concat(null===(o=e.component_fields.find((function(e){return"Name"===e.field_name})))||void 0===o?void 0:o.value),p="".concat(null===(l=e.component_fields.find((function(e){return"Range"===e.field_name})))||void 0===l?void 0:l.value),m="".concat(null===(t=e.component_fields.find((function(e){return"Application"===e.field_name})))||void 0===t?void 0:t.value),f=null===(d=e.component_fields.find((function(e){return"Link"===e.data_type_name&&"Picture"!==e.field_name})))||void 0===d?void 0:d.value,_=null===(a=e.component_fields.find((function(e){return"Link"===e.data_type_name&&"Picture"===e.field_name})))||void 0===a?void 0:a.value,h=null===de||void 0===de||null===(u=de.misc_info)||void 0===u?void 0:u.templatesData.find((function(e){return"Battery Order Template"===e.name})).config.find((function(e){return e.label===(null===ie||void 0===ie?void 0:ie.options.key)})),y=null===R||void 0===R||null===(r=R.items)||void 0===r?void 0:r.find((function(e){return e[h.key]===ee[n][null===ie||void 0===ie?void 0:ie.options.key]})),g=y?+y.quantity:0,b=y?+y.alt_value:0,E={};return fe.filter((function(n){var o,l;E[n]=Q.createElement("div",{className:j.Z.templateInformation},"".concat(null!==(o=null===(l=e.component_fields.find((function(e){return e.field_name===n})))||void 0===l?void 0:l.value)&&void 0!==o?o:""))})),E[null!==(s=null===ie||void 0===ie?void 0:ie.name)&&void 0!==s?s:"Item"]=Q.createElement("div",null,Q.createElement("div",{style:{display:"flex"}},Q.createElement("div",{style:{display:"",width:"70%"}},Q.createElement("div",{className:j.Z.templateInformation},c)),Q.createElement("input",{autoComplete:"off",className:j.Z.templateInput,style:{border:"1px solid var(--app-color-gray-light)",width:"30%",height:"30px"},placeholder:g,onChange:function(e){+e.target.value>-1&&(ee[n][ce]=+e.target.value)},onBlur:function(){re((0,i.Z)(ee)),he(e,n,0)}}))),E.Quantity=F?Q.createElement("div",{className:j.Z.templateAddBox},Q.createElement(x.zx,{clear:!0,className:j.Z.templatePlus,clicked:function(){g>0&&(ee[n][ce]=g-1,ee[n][pe]=b-1,re((0,i.Z)(ee)),he(e,n,0))}},"-"),Q.createElement("input",{autoComplete:"off",className:j.Z.templateInput,placeholder:y?y.quantity:0,onChange:function(e){+e.target.value>-1&&(ee[n][ce]=+e.target.value,ee[n][pe]=+e.target.value)},onBlur:function(){re((0,i.Z)(ee)),he(e,n,0)}}),Q.createElement(x.zx,{clear:!0,className:j.Z.templatePlus,clicked:function(){ee[n][ce]=g+1,ee[n][pe]=b+1,re((0,i.Z)(ee)),he(e,n,0)}},"+")):Q.createElement("div",{className:j.Z.templateInput},y?y.quantity:0),E.Action=Q.createElement(x.zx,{title:(null===(v=B.filter((function(e){return e.component_id===c})))||void 0===v?void 0:v.length)>0?"Remove from Favorites":"Add to Favorites",clicked:function(){var e;(null===(e=B.filter((function(e){return e.component_id===c})))||void 0===e?void 0:e.length)>0?(0,C.Ni)(B.find((function(e){return e.component_id===c})).id).subscribe({next:function(){_e(B.filter((function(e){return e.component_id!==c})))}}):(0,C.Ic)(q.id,c,"components").subscribe({})},titleStyle:{fontSize:"12px"},style:{width:"200px",height:"30px"}}),E.Info=Q.createElement("img",{alt:"lg",src:_,className:j.Z.templatePicture,onClick:function(){return window.open(f,"_blank")}}),E.Name=Q.createElement("div",{className:j.Z.templateInformation},c),E.Application=Q.createElement("div",{className:j.Z.templateInformation},m),E.Range=Q.createElement("div",{className:j.Z.templateInformation},p),E.Actual=Q.createElement("div",{className:j.Z.templateAddBox,style:{padding:"0 10px 0 10px",border:F?"0":"1px solid var(--app-color-gray-lighter)"}},Q.createElement("input",{disabled:F,autoComplete:"off",className:j.Z.templateInput,placeholder:b,onChange:function(e){+e.target.value>-1&&(ee[n][pe]=+e.target.value,ee[n][ce]=g)},onBlur:function(){re((0,i.Z)(ee)),he(e,n,0)}})),E}))}),0===(null===$||void 0===$?void 0:$.length)&&Q.createElement("p",{style:{fontSize:g.tq?"16px":""}},"Please select an item"),Q.createElement(x.zx,{light:!0,title:te?"Hide Favorites":"Show Favorites",clicked:function(){ae(!te),!1===te?_e(B):(re([]),ue([]))},style:{width:"180px",display:g.tq?"none":""}}))),g.tq&&Q.createElement("div",{className:j.Z.dropdownContainer},Q.createElement(x.rk,{items:J.Z(G.Z("value"))(W.map((function(e){var n=e.component_fields.find((function(e){var n;return e.field_name===(null===X||void 0===X||null===(n=X.options)||void 0===n?void 0:n.filters[0])}));return{label:null===n||void 0===n?void 0:n.value,value:null===n||void 0===n?void 0:n.value,component:e}}))),onChange:function(e){var n,o,i;ae(!1),re([]),se((0,y.Z)({},null===X||void 0===X||null===(n=X.options)||void 0===n?void 0:n.filters[0],e.value)),ue([]),ne(!1),setTimeout((function(){return ne(!0)}),10),ue(null===W||void 0===W?void 0:W.filter((function(n){var o;return(null===(o=n.component_fields.filter((function(n){return n.value===e.value})))||void 0===o?void 0:o.length)>0}))),z({action:_._U.setModuleNewStepComponents,value:null!==(o=null===(i=R.currentStep)||void 0===i?void 0:i.component_blueprints)&&void 0!==o?o:[]}),re(null===W||void 0===W?void 0:W.filter((function(n){var o;return(null===(o=n.component_fields.filter((function(n){return n.value===e.value})))||void 0===o?void 0:o.length)>0})).map((function(e){var n={};return ie.selected_fields.filter((function(o){var i,t;"Text"!==o.data_type_name&&"Number"!==o.data_type_name||(n=(0,l.Z)((0,l.Z)({},n),{},(0,y.Z)({},o.field_name,null!==(i=null===(t=e.component_fields.find((function(e){return e.field_name===o.field_name})))||void 0===t?void 0:t.value)&&void 0!==i?i:0)))})),n})))},style:{fontSize:"16px"},moliclassname:j.Z.componentsSelectMenuOverlayListItem})),Q.createElement("br",null)))},K=function(e){var n,o,d,a,u,r,s,v,c,p,m,h,b,E,C,Z,w,S,k,I,P,N,T,D=(0,_.pQ)(),A=(0,t.Z)(D,2),U=A[0],L=A[1],O=e.creating,R=e.showSecond,z=e.listItems,q=e.orderItems,B=e.setShowSecond,F=e.components,W=e.template,Y=e.component,X=e.showFavorites,K=e.begunModule,$=e.setShowFavorites,ee=e.setListItems,ne=e.setOrderItems,oe=e.setSelectedItems,le=e.selectedItems,ie=Y.selected_fields.find((function(e){return"Record"===e.data_type_name})),te=F.filter((function(e){var n;return(null===(n=e.component_fields.filter((function(e){var n;return e.component_blueprint_id===(null===ie||void 0===ie||null===(n=ie.options)||void 0===n?void 0:n.component_id)})))||void 0===n?void 0:n.length)>0})),de=function(e,n,o,t,d,a){var u;if("Number"===n)return O?Q.createElement("input",{autoComplete:"off",type:"number",className:j.Z.templateIIInput,style:{border:"1px solid var(--app-color-gray-light)",width:"50%",height:"30px"},placeholder:null!==e&&void 0!==e?e:"0",onChange:function(e){+e.target.value>-1&&(q[o][d]=+e.target.value,q[o][a]=+e.target.value)},onBlur:function(){ne((0,i.Z)(q)),function(e,n,o){var i,t,d,a,u=e.component_fields.find((function(e){var n;return e.field_name===(null===W||void 0===W||null===(n=W.key)||void 0===n?void 0:n.label)})),r=null===U||void 0===U||null===(i=U.items)||void 0===i?void 0:i.find((function(e){var n;return e[null===W||void 0===W||null===(n=W.key)||void 0===n?void 0:n.key]===u.value}));if(void 0===r){if(void 0==+(null===(t=q[n])||void 0===t?void 0:t.quantity)||+(null===(d=q[n])||void 0===d?void 0:d.quantity)>0){var s={};null===W||void 0===W||W.slist.filter((function(e){var o,i,t;s=(0,l.Z)((0,l.Z)({},s),{},(t={},(0,y.Z)(t,e.key,null!==(o=q[n][e.key])&&void 0!==o?o:""),(0,y.Z)(t,"id",(0,f.mR)()),(0,y.Z)(t,"options",null!==(i=null===e||void 0===e?void 0:e.options)&&void 0!==i?i:{}),t))})),L({action:_._U.addModuleItems,value:s})}}else 0==+(null===(a=q[n])||void 0===a?void 0:a.quantity)?L({action:_._U.removeModuleItems,value:r}):(null===W||void 0===W||W.slist.filter((function(e){r[e.key]=q[n][e.key]})),L({action:_._U.updateModuleItems,value:r}))}(t,o)}}):Q.createElement("div",{className:j.Z.templateInput},null!==(u=e.value)&&void 0!==u?u:"0");if("Action"===n)return Q.createElement("div",null);if("Link"===n){var r="".concat(e);return null!==r&&void 0!==r&&r.includes(".jpg")||null!==r&&void 0!==r&&r.includes(".png")||null!==r&&void 0!==r&&r.includes(".jpeg")?Q.createElement("img",{alt:"lg",src:r,className:j.Z.templateIIPicture}):Q.createElement("p",{className:j.Z.templateURL,onClick:function(){return window.open(r,"_blank")}},"View")}return"Info"===n||"Text"===n?Q.createElement("div",{className:j.Z.templateInformation,style:{textAlign:"center"}},null!==e&&void 0!==e?e:""):Q.createElement("div",null,null!==e&&void 0!==e?e:"")};return Q.createElement("div",{style:{width:"100%",justifyContent:"center"}},Q.createElement("div",{style:{margin:"auto",width:"inherit"}},Q.createElement("div",{style:{width:"inherit"}},Q.createElement("p",null,null!==(n=null===W||void 0===W||null===(o=W.config)||void 0===o||null===(d=o.find((function(e){return"tlist"===e.key})))||void 0===d?void 0:d.label)&&void 0!==n?n:"ORDERS:"),Q.createElement(H.Z,{className:j.Z.itemsTable_ii,style:{width:(null===W||void 0===W||null===(a=W.tlist)||void 0===a?void 0:a.length)>4?"100%":"70%"},highlights:"var(--app-color-gray-lighter)",columns:g.tq?null===W||void 0===W?void 0:W.tlist.filter((function(e){var n;return"Number"===e.value||e.key===(null===W||void 0===W||null===(n=W.key)||void 0===n?void 0:n.key)||"Info"===e.value||"Text"===e.value})).map((function(e){return e.label})):null===W||void 0===W||null===(u=W.tlist)||void 0===u?void 0:u.map((function(e){return e.label})),footer:["Items: ".concat(null===U||void 0===U||null===(r=U.items)||void 0===r?void 0:r.length),"".concat(V.Z((function(e,n){var o;return null!==(o=+e+ +n.quantity)&&void 0!==o?o:0}),0,null!==(s=null===U||void 0===U?void 0:U.items)&&void 0!==s?s:[]))],list:null===U||void 0===U||null===(v=U.items)||void 0===v?void 0:v.map((function(e){var n={id:e.id};return null===W||void 0===W||W.tlist.filter((function(o){n=(0,l.Z)((0,l.Z)({},n),{},(0,y.Z)({},o.label,e[o.key]))})),n})),onListItemClick:function(e){ne(null===te||void 0===te?void 0:te.filter((function(n){var o;return(null===(o=n.component_fields.filter((function(n){var o;return n.value===e[null===W||void 0===W||null===(o=W.key)||void 0===o?void 0:o.label]})))||void 0===o?void 0:o.length)>0})).map((function(e){var n={};return null===W||void 0===W||W.slist.filter((function(o){var i,t,d,a,u;n=(0,l.Z)((0,l.Z)({},n),{},(u={},(0,y.Z)(u,o.label,null!==(i=null===(t=e.component_fields.find((function(e){return e.field_name===o.label})))||void 0===t?void 0:t.value)&&void 0!==i?i:0),(0,y.Z)(u,o.key,null!==(d=null===(a=e.component_fields.find((function(e){return e.field_name===o.label})))||void 0===a?void 0:a.value)&&void 0!==d?d:0),u))})),n}))),ee(null===te||void 0===te?void 0:te.filter((function(n){var o;return(null===(o=n.component_fields.filter((function(n){var o;return n.value===e[null===W||void 0===W||null===(o=W.key)||void 0===o?void 0:o.label]})))||void 0===o?void 0:o.length)>0})))}}),Q.createElement("br",null),Q.createElement("div",{style:{width:"100%",display:g.tq?"":X?"none":"flex",flexDirection:"row",justifyContent:"center",fontSize:"18px"}},(null===ie||void 0===ie||null===(c=ie.options)||void 0===c||null===(p=c.filters)||void 0===p?void 0:p.length)>0&&Q.createElement("div",{className:j.Z.dropdownContainer,style:{border:"1px solid var(--app-color-gray-dark)",width:g.tq?"100%":"25%"}},Q.createElement(x.rk,{items:te?J.Z(G.Z("value"))(te.map((function(e){var n=e.component_fields.find((function(e){var n;return e.field_name===(null===ie||void 0===ie||null===(n=ie.options)||void 0===n?void 0:n.filters[0])}));return{label:null===n||void 0===n?void 0:n.value,value:null===n||void 0===n?void 0:n.value,component:e}}))):[],onChange:function(e){var n,o,i;$(!1),ne([]),oe((0,y.Z)({},null===ie||void 0===ie||null===(n=ie.options)||void 0===n?void 0:n.filters[0],e.value)),ee([]),B(!1),setTimeout((function(){return B(!0)}),10),ee(null===te||void 0===te?void 0:te.filter((function(n){var o;return(null===(o=n.component_fields.filter((function(n){return n.value===e.value})))||void 0===o?void 0:o.length)>0}))),L({action:_._U.setModuleNewStepComponents,value:null!==(o=null===(i=U.currentStep)||void 0===i?void 0:i.component_blueprints)&&void 0!==o?o:[]}),ne(null===te||void 0===te?void 0:te.filter((function(n){var o;return(null===(o=n.component_fields.filter((function(n){return n.value===e.value})))||void 0===o?void 0:o.length)>0})).map((function(e){var n={};return null===W||void 0===W||W.slist.filter((function(o){var i,t,d,a=null!==(i=null===(t=e.component_fields.find((function(e){return e.field_name===o.label})))||void 0===t?void 0:t.value)&&void 0!==i?i:"";n=(0,l.Z)((0,l.Z)({},n),{},(d={},(0,y.Z)(d,o.label,a),(0,y.Z)(d,o.key,a),d))})),n})))},placeholder:null===ie||void 0===ie||null===(m=ie.options)||void 0===m?void 0:m.filters[0],moliclassname:j.Z.componentsSelectMenuOverlayListItem,style:{fontSize:"16px"},className:j.Z.currencyInput})),(null===ie||void 0===ie||null===(h=ie.options)||void 0===h||null===(b=h.filters)||void 0===b?void 0:b.length)>1&&!g.tq&&R&&Q.createElement("div",{className:j.Z.dropdownContainer,style:{marginLeft:"10px",border:"1px solid var(--app-color-gray-dark)",width:"25%"}},Q.createElement(x.rk,{items:le[null===ie||void 0===ie||null===(E=ie.options)||void 0===E?void 0:E.filters[0]]?J.Z(G.Z("value"))(te.map((function(e){var n=e.component_fields.find((function(e){var n;return e.field_name===(null===ie||void 0===ie||null===(n=ie.options)||void 0===n?void 0:n.filters[1])}));return{label:null===n||void 0===n?void 0:n.value,value:null===n||void 0===n?void 0:n.value,component:e}})).filter((function(e){return e.component.component_fields.filter((function(e){var n,o;return e.value===le[null===ie||void 0===ie||null===(n=ie.options)||void 0===n?void 0:n.filters[0]]&&e.field_name===(null===ie||void 0===ie||null===(o=ie.options)||void 0===o?void 0:o.filters[0])})).length>0}))):[],onChange:function(e){var n,o,i;$(!1),L({action:_._U.setModuleNewStepComponents,value:null!==(n=null===(o=U.currentStep)||void 0===o?void 0:o.component_blueprints)&&void 0!==n?n:[]}),oe((0,l.Z)((0,l.Z)({},le),{},(0,y.Z)({},null===ie||void 0===ie||null===(i=ie.options)||void 0===i?void 0:i.filters[1],e.value))),ne(null===te||void 0===te?void 0:te.filter((function(n){var o;return(null===(o=n.component_fields.filter((function(n){return n.value===e.value})))||void 0===o?void 0:o.length)>0})).filter((function(e){var n;return(null===(n=e.component_fields.filter((function(e){var n;return e.value===le[null===ie||void 0===ie||null===(n=ie.options)||void 0===n?void 0:n.filters[0]]})))||void 0===n?void 0:n.length)>0})).map((function(e){var n={};return null===W||void 0===W||W.slist.filter((function(o){var i,t,d,a=null!==(i=null===(t=e.component_fields.find((function(e){return e.field_name===o.label})))||void 0===t?void 0:t.value)&&void 0!==i?i:0;n=(0,l.Z)((0,l.Z)({},n),{},(d={},(0,y.Z)(d,o.label,a),(0,y.Z)(d,o.key,a),d))})),n}))),ee(null===te||void 0===te?void 0:te.filter((function(n){var o;return(null===(o=n.component_fields.filter((function(n){return n.value===e.value})))||void 0===o?void 0:o.length)>0})).filter((function(e){var n;return(null===(n=e.component_fields.filter((function(e){var n;return e.value===le[null===ie||void 0===ie||null===(n=ie.options)||void 0===n?void 0:n.filters[0]]})))||void 0===n?void 0:n.length)>0})))},placeholder:null===ie||void 0===ie||null===(C=ie.options)||void 0===C?void 0:C.filters[1],style:{fontSize:"16px"},moliclassname:j.Z.componentsSelectMenuOverlayListItem}))),Q.createElement("div",{className:j.Z.searchContainer,style:{display:X?"none":"",width:g.tq?"100%":"400px"}},Q.createElement(M.Oaj,null),Q.createElement("input",{placeholder:"Search",className:j.Z.searchInput,onChange:function(e){var n,o;(null===(n=e.target.value)||void 0===n?void 0:n.length)>1?(ee(null===te||void 0===te?void 0:te.filter((function(n){var o;return(null===(o=n.component_fields.filter((function(n){return n.value.includes(e.target.value)})))||void 0===o?void 0:o.length)>0}))),ne(null===te||void 0===te?void 0:te.filter((function(n){var o;return(null===(o=n.component_fields.filter((function(n){return n.value.includes(e.target.value)})))||void 0===o?void 0:o.length)>0})).map((function(e){var n={};return null===W||void 0===W||W.slist.filter((function(o){var i,t,d,a=null!==(i=null===(t=e.component_fields.find((function(e){return e.field_name===o.label})))||void 0===t?void 0:t.value)&&void 0!==i?i:"";n=(0,l.Z)((0,l.Z)({},n),{},(d={},(0,y.Z)(d,o.label,a),(0,y.Z)(d,o.key,a),d))})),n})))):0==(null===(o=e.target.value)||void 0===o?void 0:o.length)&&(ne([]),ee([]))}})),Q.createElement(H.Z,{className:j.Z.mobileTable_ii,style:{width:g.tq||(null===W||void 0===W||null===(Z=W.slist)||void 0===Z?void 0:Z.length)>4?"100%":"70%"},tableHostSimple:j.Z.tableHostSimple,columns:g.tq?null===W||void 0===W?void 0:W.slist.filter((function(e){var n;return"Number"===e.value||e.key===(null===W||void 0===W||null===(n=W.key)||void 0===n?void 0:n.key)})).map((function(e){return e.label})):(null===(w=K.processModule.module.options)||void 0===w||null===(S=w.computes)||void 0===S?void 0:S.length)>0?[].concat((0,i.Z)(null!==(k=null===W||void 0===W?void 0:W.slist.map((function(e){return e.label})))&&void 0!==k?k:[]),(0,i.Z)(null!==(I=null===(P=K.processModule.module.options)||void 0===P||null===(N=P.computes)||void 0===N?void 0:N.map((function(e){var n,o=null===(n=F.filter((function(n){return n.module_id===e.module_id})))||void 0===n?void 0:n.find((function(n){return n.component_fields.filter((function(n){return n.procedure_step_blueprint_field_id===e.field_id})).length>0}));return(null===o||void 0===o?void 0:o.component_fields.find((function(n){return n.procedure_step_blueprint_field_id===e.field_id}))).field_name})))&&void 0!==I?I:[])):(0,i.Z)(null!==(T=null===W||void 0===W?void 0:W.slist.map((function(e){return e.label})))&&void 0!==T?T:[]),list:z.map((function(e,n){var o,l,i,t,d,a={};null===W||void 0===W||null===(o=W.slist)||void 0===o||o.filter((function(o){var l,i;a[o.label]=de("".concat(null!==(l=null===(i=e.component_fields.find((function(e){return e.field_name===o.label})))||void 0===i?void 0:i.value)&&void 0!==l?l:""),o.value,n,e,o.key,o.label)}));var u,r,s=null!==(l=null===U||void 0===U||null===(i=U.items)||void 0===i?void 0:i.find((function(e){var o,l;return e[null===W||void 0===W||null===(o=W.key)||void 0===o?void 0:o.key]===q[n][null===W||void 0===W||null===(l=W.key)||void 0===l?void 0:l.key]})))&&void 0!==l?l:void 0;(void 0!==s&&Object.keys(s).filter((function(o){var l,i=null===W||void 0===W||null===(l=W.slist)||void 0===l?void 0:l.find((function(e){return e.key===o}));i&&(a[i.label]=de(s[o],i.value,n,e,i.key,i.label))})),(null===(t=K.processModule.module.options)||void 0===t||null===(d=t.computes)||void 0===d?void 0:d.length)>0)&&(null===(u=K.processModule.module.options)||void 0===u||null===(r=u.computes)||void 0===r||r.map((function(n){var o,l=null===F||void 0===F||null===(o=F.filter((function(e){return e.module_id===n.module_id})))||void 0===o?void 0:o.find((function(n){return n.component_fields.filter((function(n){var o,l;return n.value===(null!==(o=null===(l=e.component_fields.find((function(e){var n;return e.field_name===(null===W||void 0===W||null===(n=W.key)||void 0===n?void 0:n.label)})))||void 0===l?void 0:l.value)&&void 0!==o?o:"#$")})).length>0})),i=null===l||void 0===l?void 0:l.component_fields.find((function(e){return e.procedure_step_blueprint_field_id===n.field_id}));i&&(a[i.field_name]=null===i||void 0===i?void 0:i.value)})));return a}))}),0===(null===z||void 0===z?void 0:z.length)&&Q.createElement("p",null,"No Items Selected"))),Q.createElement("br",null))},$=o(6341),ee=o(32086),ne=o(8284),oe=(o(68140),o(60940),(0,d.memo)((function(e){var n,o,l,i,a=e.component,u=e.allComponents,r=e.components,s=e.favorites,v=void 0===s?[]:s,c=e.user,p=e.companyData,m=e.selectedComponent,f=e.templateName,_=e.begunModule,y=e.nextButtonClicked,g=e.isMandatoryError,b=e.index,x=e.component_blueprint,E=e.setIsMandatoryError,C=e.editMode,Z=e.blueprints,w=e.allModules,M=e.authenticatedUser,S=e.companyUsersArray,k=e.companyPositionsArray,I=e.products,P=(0,d.useState)({}),N=(0,t.Z)(P,2),T=N[0],D=N[1],A=(0,d.useState)([]),U=(0,t.Z)(A,2),L=U[0],O=U[1],R=(0,d.useState)([]),z=(0,t.Z)(R,2),q=z[0],B=z[1],F=(0,d.useState)([]),Y=(0,t.Z)(F,2),j=Y[0],H=Y[1],J=(0,d.useState)(null!==(n=+localStorage.getItem("timer"))&&void 0!==n?n:0),G=(0,t.Z)(J,2),V=G[0],Q=G[1],ee=(0,d.useState)(null===a||void 0===a||null===(o=a.selected_fields)||void 0===o?void 0:o.filter((function(e){return"Record"===e.data_type_name}))),ne=(0,t.Z)(ee,2),oe=ne[0],le=(ne[1],(0,d.useState)(!1)),ie=(0,t.Z)(le,2),te=ie[0],de=ie[1],ae=(0,d.useState)(),ue=(0,t.Z)(ae,2),re=ue[0],se=ue[1],ve=(0,d.useState)(),ce=(0,t.Z)(ve,2),pe=ce[0],me=ce[1],fe=(0,d.useState)(!1),_e=(0,t.Z)(fe,2),he=_e[0],ye=_e[1],ge=a.selected_fields.find((function(e){return"Filters"===e.data_type_name||"Record"===e.data_type_name})),be=r.filter((function(e){return e.component_fields.filter((function(e){var n;return e.component_blueprint_id===(null===ge||void 0===ge||null===(n=ge.options)||void 0===n?void 0:n.component_id)})).length>0})),xe=(null===m||void 0===m||null===(l=m.created_by)||void 0===l?void 0:l.id)===c.id||void 0===(null===m||void 0===m?void 0:m.created_by),Ee=null===p||void 0===p||null===(i=p.misc_info)||void 0===i?void 0:i.templatesData.find((function(e){return e.name===f}));return"Scoresheet Template"===f?d.createElement($.tF,{showSecond:re,listItems:q,orderItems:L,selectedComponent:m,action:pe,setAction:me,setShowSecond:se,components:r,records:oe,template:Ee,component:a,allComponents:u,generalArray:j,showFavorites:te,setGeneralArray:H,setTimer:Q,timer:V,index:b,begunModule:_,companyData:p,setShowFavorites:de,loading:he,setLoading:ye,setListItems:B,setOrderItems:O,setSelectedItems:D,selectedItems:T}):"Meets Template"===f?d.createElement("div",{style:{width:"100%"}}):"Club Template"===f?d.createElement(W,{allModules:w,components:r,begunModule:_,authenticatedUser:M,companyUsersArray:S}):"Battery Order Template"===f?d.createElement(X,{showSecond:re,listItems:q,orderItems:L,selectedComponent:m,action:pe,setAction:me,setShowSecond:se,components:r,records:oe,template:Ee,component:a,allComponents:u,generalArray:j,showFavorites:te,setGeneralArray:H,setTimer:Q,timer:V,index:b,begunModule:_,companyData:p,setShowFavorites:de,loading:he,setLoading:ye,setListItems:B,setOrderItems:O,setSelectedItems:D,selectedItems:T,templateName:f,items:be,field:ge,user:c,favorites:v,creating:xe}):"Order Template"===f?d.createElement(K,{showSecond:re,listItems:q,orderItems:L,selectedComponent:m,action:pe,setAction:me,setShowSecond:se,components:r,records:oe,template:Ee,component:a,allComponents:u,generalArray:j,showFavorites:te,setGeneralArray:H,setTimer:Q,timer:V,index:b,begunModule:_,companyData:p,setShowFavorites:de,loading:he,setLoading:ye,setListItems:B,setOrderItems:O,setSelectedItems:D,selectedItems:T,templateName:f,items:be,field:ge,user:c,favorites:v,creating:xe}):d.createElement("div",{style:{width:"100%"}},d.createElement(h.Z,{editMode:C,nextButtonClicked:y,isMandatoryError:g,blueprintIndex:b,setIsMandatoryError:E,blueprints:Z,component:x,companyData:p,components:r,allModules:w,products:I,authenticatedUser:M,selectedComponent:m,companyUsersArray:S,companyPositionsArray:k,begunModule:_}))}))),le=(0,m.$j)((function(e){var n=e.authReducer.authenticatedUser,o=e.flowReducer;return{authenticatedUser:n,favorites:o.favorites,begunModule:o.begunModule}}))((function(e){var n,o,v=e.component,m=e.blueprintIndex,h=e.setIsMandatoryError,y=e.companyData,g=e.components,b=e.favorites,x=e.products,E=e.authenticatedUser,C=e.begunModule,Z=e.selectedComponent,w=e.setSelectedComponent,M=e.templateName,S=e.editMode,k=e.blueprints,I=e.allModules,P=e.companyUsersArray,N=e.companyPositionsArray,T=e.nextButtonClicked,D=e.isMandatoryError,A=e.index,U=e.component_blueprint,L=(0,_.pQ)(),O=(0,t.Z)(L,2),R=O[0],z=O[1],q=(0,d.useState)(r),B=(0,t.Z)(q,1)[0],F=(0,d.useState)(""),W=(0,t.Z)(F,2),Y=W[0],j=W[1],H=(0,d.useRef)(null),J=null===(n=R.currentStep)||void 0===n||null===(o=n.component_blueprints)||void 0===o?void 0:o.findIndex((function(e){return e.id===(null===v||void 0===v?void 0:v.id)})),G=function(){var e;null!==v&&void 0!==v&&null!==(e=v.selected_fields)&&void 0!==e&&e.some((function(e){var n;return!0===e.mandatory&&!0===e.visible&&(!e.value||(null===e||void 0===e||null===(n=e.value)||void 0===n?void 0:n.length)<1)}))?h(!0):h(!1)},V=function(e){var n=R.components.find((function(e){return e.selected_fields.filter((function(e){return"Formula"===e.data_type_name})).length>0}));if(void 0!==n){var o=n.selected_fields.find((function(e){return"Formula"===e.data_type_name})),t=(0,f.LV)(o.options,v.selected_fields.filter((function(e){return o.options.list.includes(e.field_name)})),[].concat((0,i.Z)(R.components),[e]));o.value="".concat(t.toString())}else{var d=R.currentStep.component_blueprints.find((function(e){return e.selected_fields.filter((function(e){return"Formula"===e.data_type_name})).length>0}));if(void 0!==d){var a=d.selected_fields.find((function(e){return"Formula"===e.data_type_name})),u=(0,f.LV)(a.options,v.selected_fields.filter((function(e){return a.options.list.includes(e.field_name)})),[].concat((0,i.Z)(R.components),[e]));a.value="".concat(u.toString());var r=JSON.parse(JSON.stringify((0,l.Z)((0,l.Z)({},d),{},{temp_id:(0,f.mR)(),selected_fields:d.selected_fields})));z({action:_._U.addModuleComponents,value:r})}}},Q=function(e,n){var o,l,t,d=(0,i.Z)(null!==(o=null===(l=R.currentStep)||void 0===l?void 0:l.component_blueprints)&&void 0!==o?o:[]),a=null===(t=d[J])||void 0===t?void 0:t.selected_fields[n];"Number"===(null===a||void 0===a?void 0:a.data_type_name)?Number(+e)?a.value=e:""===e&&(a.value=""):a.value=e,a.value&&a.mandatory&&(a.errors=""),G(),z({action:_._U.setComponentBlueprints,value:d}),z({action:_._U.setModuleNewStepComponents,value:d})},X=(0,d.useCallback)((function(e,n,o){var l,t,d,a=(0,i.Z)(null!==(l=null===(t=R.currentStep)||void 0===t?void 0:t.component_blueprints)&&void 0!==l?l:[]),u=null===(d=a[J])||void 0===d?void 0:d.selected_fields[n];u.options.country_code=null===e||void 0===e?void 0:e.countryCode,u.options.country_name=null===e||void 0===e?void 0:e.name,u.options.country_prefix="+".concat(null===e||void 0===e?void 0:e.dialCode),z({action:_._U.setComponentBlueprints,value:a}),z({action:_._U.setModuleNewStepComponents,value:a}),Q(o,n)}),[]),K=(0,d.useCallback)((function(e,n){var o,l,t,d=(0,i.Z)(null!==(o=null===(l=R.currentStep)||void 0===l?void 0:l.component_blueprints)&&void 0!==o?o:[]),a=null===(t=d[J])||void 0===t?void 0:t.selected_fields[n];a.options.currency_type=null===e||void 0===e?void 0:e.label,a.options.currency_value=null===e||void 0===e?void 0:e.value,a.options.symbol=null===e||void 0===e?void 0:e.symbol,z({action:_._U.setComponentBlueprints,value:d}),z({action:_._U.setModuleNewStepComponents,value:d})}),[]);return(0,d.useEffect)((function(){var e;z({action:_._U.setModuleNewStepComponents,value:null===(e=R.currentStep)||void 0===e?void 0:e.component_blueprints})}),[R.currentStep]),d.createElement("div",{id:"accordion",className:a,key:m},d.createElement("div",{className:c()(u,B),"app-variant-has-error":Y?"error":""},d.createElement("div",{ref:H,style:{maxHeight:B===r?"":"0px",display:"flex"},className:s},d.createElement(oe,{templateName:M,component:v,handleInputChange:Q,handlePrefixChange:X,handleCurrencyChange:K,checkIfAreMandatoryErrored:G,handleCheckbox:function(e,n){var o,l,t,d=(0,i.Z)(null!==(o=null===(l=R.currentStep)||void 0===l?void 0:l.component_blueprints)&&void 0!==o?o:[]),a=null===(t=d[J])||void 0===t?void 0:t.selected_fields[n];a.value=e,a.value&&a.mandatory&&(a.errors=""),z({action:_._U.setComponentBlueprints,value:d}),z({action:_._U.setModuleNewStepComponents,value:d}),G()},isInherited:!1,indexInContextArray:J,handleLocationChange:function(e,n){var o,l,t,d=(0,i.Z)(null!==(o=null===(l=R.currentStep)||void 0===l?void 0:l.component_blueprints)&&void 0!==o?o:[]);(null===(t=d[J])||void 0===t?void 0:t.selected_fields[n]).value="".concat(e.lat,", ").concat(e.lng),z({action:_._U.setComponentBlueprints,value:d}),z({action:_._U.setModuleNewStepComponents,value:d})},processTaskContext:R,setTaskProcessContext:z,companyData:y,components:function(){var e,n,o=null===(e=R.components.find((function(e){return e.selected_fields.filter((function(e){var n,o;return"Global"===e.data_type_name&&1==e.visible&&e.field_name===(null===(n=v.selected_fields.find((function(e){return("Filters"===e.data_type_name||"Record"===e.data_type_name)&&1==e.visible})))||void 0===n||null===(o=n.options)||void 0===o?void 0:o.global)})).length>0})))||void 0===e||null===(n=e.selected_fields.find((function(e){return"Global"===e.data_type_name})))||void 0===n?void 0:n.value;return o?g.filter((function(e){return e.component_fields.filter((function(e){var n,l,i;return(null===e||void 0===e||null===(n=e.value)||void 0===n?void 0:n.toUpperCase())===(null===o||void 0===o?void 0:o.toUpperCase())&&e.field_name===(null===(l=v.selected_fields.find((function(e){return"Filters"===e.data_type_name||"Record"===e.data_type_name})))||void 0===l||null===(i=l.options)||void 0===i?void 0:i.global)})).length>0})):g}(),products:x,saveButtonAction:function(){var e=JSON.parse(JSON.stringify((0,l.Z)((0,l.Z)({},v),{},{temp_id:(0,f.mR)(),selected_fields:v.selected_fields})));V(e),z({action:_._U.addModuleComponents,value:e}),j(""),v.selected_fields.map((function(e,n){Q("",n)})),z({action:_._U.setModuleNewStepComponents,value:(0,i.Z)(ee.Z((function(e){return e.selected_fields.filter((function(e){return""===e.value})).length>0}),(0,i.Z)(ee.Z(ne.Z("id",v.id))(R.newStepComponents))))})},updateFormula:V,favorites:b,user:E,begunModule:C,selectedComponent:Z,setSelectedComponent:w,allComponents:g,nextButtonClicked:T,isMandatoryError:D,index:A,component_blueprint:U,setIsMandatoryError:h,editMode:S,blueprints:k,allModules:I,authenticatedUser:E,companyUsersArray:P,companyPositionsArray:N}))),Y&&(null===Y||void 0===Y?void 0:Y.message)&&d.createElement(p.Z,{message:Y.message}))})),ie=d.forwardRef((function(e,n){var o,l,i,a,u,r,s,v=e.begunModule,c=e.goto,p=e.companyData,m=e.selectedComponent,f=e.setSelectedComponent,_=(e.companyUsersArray,e.companyPositionsArray,e.components),h=void 0===_?[]:_,y=e.step,g=e.print,b=void 0!==g&&g,x=(0,d.useState)(0),E=(0,t.Z)(x,2),C=E[0],Z=E[1],w=(0,d.useState)(),M=(0,t.Z)(w,2),S=M[0],k=M[1],I=(0,d.useState)(),P=(0,t.Z)(I,2),N=P[0],T=P[1],D=(0,d.useState)([]),A=(0,t.Z)(D,2),U=A[0],L=A[1],O=(0,d.useState)([]),R=(0,t.Z)(O,2),z=R[0],q=R[1],W=(0,d.useState)([]),Y=(0,t.Z)(W,2),j=Y[0],H=Y[1],J=null===v||void 0===v||null===(o=v.processModule)||void 0===o||null===(l=o.completeSteps)||void 0===l||null===(i=l.find((function(e){var n;return(null===e||void 0===e||null===(n=e.component_blueprints)||void 0===n?void 0:n.filter((function(e){return e.selected_fields.filter((function(e){return"Template"===e.data_type_name})).length>0})).length)>0})))||void 0===i||null===(a=i.component_blueprints.find((function(e){return e.selected_fields.find((function(e){return"Template"===e.data_type_name&&1==e.visible}))})))||void 0===a||null===(u=a.selected_fields.find((function(e){return"Template"===e.data_type_name&&1==e.visible})))||void 0===u?void 0:u.field_name,G=null===p||void 0===p||null===(r=p.misc_info)||void 0===r?void 0:r.templatesData.find((function(e){return e.name===J})),V=(0,d.useState)(null===m||void 0===m||null===(s=m.component_fields)||void 0===s?void 0:s.filter((function(e){return"Record"===e.data_type_name}))),Q=(0,t.Z)(V,2),X=Q[0],K=Q[1];return"Scoresheet Template"===J?d.createElement($.mr,{setRecords:K,selectedComponent:m,template:G,setListItems:q,components:h,setOrderItems:L,setSelectedIndex:k,records:X,listItems:z,orderItems:U,begunModule:v,selectedTabIndex:C,setSelectedTabIndex:Z,selectedItems:N,setSelectedItems:T,selectedIndex:S,generalArray:j,setGeneralArray:H,print:b}):"Player Profile Template"===J?d.createElement($.yX,{selectedComponent:m,template:G,components:h,setListItems:q,begunModule:v,listItems:z}):"League Template"===J?d.createElement($.Dr,{selectedComponent:m,template:G,components:h}):"Club Template"===J?d.createElement(B,{title:m.title,selectedComponent:m,setSelectedComponent:f,step:y,template:G,goto:c},e.children):"Meets Template"===J?d.createElement(F,{selectedComponent:m,begunModule:v,goto:c},e.children):d.createElement("div",null,e.children)}))},85508:function(e,n,o){"use strict";o.r(n),o.d(n,{default:function(){return Y},navigateToTransaction:function(){return j}});var l=o(4942),i=o(93433),t=o(1413),d=o(29439),a=o(67861),u=o(23280),r=o(40694),s=o(88374),v=o(93389),c=o(6073),p=o(89293),m=o(88827),f=o(10103),_=o(11577),h=o(1542),y=o(96189),g=o(88550),b=o(73500),x=o(39518),E=o(50981),C=o.n(E),Z=o(43984),w=o(52902),M=o(12075),S=o(63124),k=o(87424),I=o(27658),P=o(75105),N=o(91605),T=o(30994),D=o(28014),A=o(29304),U=o(87453),L=o(12308),O=o(41771),R=o(51481),z=o(34665),q=o(44408),B=o(23910),F={host:"DashboardMobile_host__FXUjc",dashboardPanel:"DashboardMobile_dashboardPanel__lXz07",headerContainer:"DashboardMobile_headerContainer__JAcuY",title:"DashboardMobile_title__UJq7q",modalTitle:"DashboardMobile_modalTitle__yR3Zx",singleButton:"DashboardMobile_singleButton__h-dk5",fieldRowContainer:"DashboardMobile_fieldRowContainer__VvOwp",fieldTypeInput:"DashboardMobile_fieldTypeInput__Qmlee",dashboardCard:"DashboardMobile_dashboardCard__uJUtM",componentCard:"DashboardMobile_componentCard__9UsrE",componentCardv2:"DashboardMobile_componentCardv2__EqNmf",imageCard:"DashboardMobile_imageCard__J6I0d",searchContainer:"DashboardMobile_searchContainer__nrcHL",searchInput:"DashboardMobile_searchInput__GQHtE",ongoingtx:"DashboardMobile_ongoingtx__tEDSh",dropdownSelectComponent:"DashboardMobile_dropdownSelectComponent__RUoXR",dropdownSelectMenuOverlayList:"DashboardMobile_dropdownSelectMenuOverlayList__T2zDR",dropdownSelectMenuOverlayListItem:"DashboardMobile_dropdownSelectMenuOverlayListItem__twu8t",dropdownInput:"DashboardMobile_dropdownInput__CB8Ta",dropdownClearControlsClassName:"DashboardMobile_dropdownClearControlsClassName__TMP-7",listContainer:"DashboardMobile_listContainer__ASOGR",dropdownListContainer:"DashboardMobile_dropdownListContainer__J4smE",dropDownButtonContainer:"DashboardMobile_dropDownButtonContainer__oeCll",searchResults:"DashboardMobile_searchResults__RB3VY",pageContainer:"DashboardMobile_pageContainer__ep2wY",emulatedFlexGap:"DashboardMobile_emulatedFlexGap__mHKc9",popup:"DashboardMobile_popup__wqxbT",profilepopup:"DashboardMobile_profilepopup__0SibL",userCardContainerTop:"DashboardMobile_userCardContainerTop__bT3XW",userCardInnerContainer:"DashboardMobile_userCardInnerContainer__u0yVs",avatarUrlImg:"DashboardMobile_avatarUrlImg__1MY4w",center:"DashboardMobile_center__wR7QQ",moduleTitle:"DashboardMobile_moduleTitle__itg2E",filtersContainer:"DashboardMobile_filtersContainer__Mz0UE",wallet:"DashboardMobile_wallet__QzTMZ",userPanelRows:"DashboardMobile_userPanelRows__XQVNr",actionsContainer:"DashboardMobile_actionsContainer__65lpT",appsTitle:"DashboardMobile_appsTitle__a80ai",stepTitle:"DashboardMobile_stepTitle__FV3ye"},W=(o(143),o(60940),o(56120),o(37704),o(72666),o(68623),o(3863),o(95361),o(3841),o(66918)),Y=(0,x.$j)((function(e){var n=e.flowReducer,o=n.begunModule,l=n.allTasks,i=n.allCompletedTasks,t=n.allCompletedTasksPaginated,d=n.companyProcesses,a=n.allModules,u=n.components,r=n.companyData,s=n.companyUsersArray,v=n.blueprints,c=n.payable,p=n.lastUpdates,m=e.sessionReducer,f=m.user,_=m.authenticated;return{begunModule:o,allTasks:l,allCompletedTasks:i,allCompletedTasksPaginated:t,companyProcesses:d,allModules:a,components:u,companyData:r,companyUsersArray:s,user:f,authenticatedUser:e.authReducer.authenticatedUser,authenticated:_,blueprints:v,payable:c,lastUpdates:p}}),(function(e){return{onSetSelectedProcess:function(n){return e((0,s.Xu)(n))}}}))((function(e){var n,o,Y,H,J,G,V,Q,X,K,$,ee,ne,oe,le,ie,te,de,ae,ue,re,se,ve,ce,pe,me,fe,_e,he,ye,ge,be;(0,D.z2)();var xe=e.authenticated,Ee=e.authenticatedUser,Ce=e.user,Ze=e.companyProcesses,we=e.allModules,Me=e.components,Se=e.companyData,ke=e.begunModule,Ie=e.blueprints,Pe=e.payable,Ne=e.companyUsersArray,Te=e.lastUpdates,De=e.allTasks,Ae=(0,a.useState)(!1),Ue=(0,d.Z)(Ae,2),Le=Ue[0],Oe=Ue[1],Re=(0,a.useState)({}),ze=(0,d.Z)(Re,2),qe=ze[0],Be=ze[1],Fe=(0,a.useState)(!1),We=(0,d.Z)(Fe,2),Ye=We[0],je=We[1],He=(0,a.useState)(!1),Je=(0,d.Z)(He,2),Ge=Je[0],Ve=Je[1],Qe=(0,a.useState)(!1),Xe=(0,d.Z)(Qe,2),Ke=Xe[0],$e=Xe[1],en=(0,a.useState)(!1),nn=(0,d.Z)(en,2),on=nn[0],ln=nn[1],tn=(0,a.useState)(),dn=(0,d.Z)(tn,2),an=dn[0],un=dn[1],rn=(0,a.useState)(!1),sn=(0,d.Z)(rn,2),vn=(sn[0],sn[1]),cn=(0,a.useState)({}),pn=(0,d.Z)(cn,2),mn=pn[0],fn=pn[1],_n=(0,a.useState)(!1),hn=(0,d.Z)(_n,2),yn=hn[0],gn=hn[1],bn=(0,a.useState)({}),xn=(0,d.Z)(bn,2),En=(xn[0],xn[1]),Cn=(0,a.useState)(!1),Zn=(0,d.Z)(Cn,2),wn=Zn[0],Mn=Zn[1],Sn=(0,a.useState)(-1),kn=(0,d.Z)(Sn,2),In=kn[0],Pn=kn[1],Nn=(0,a.useState)([]),Tn=(0,d.Z)(Nn,2),Dn=Tn[0],An=Tn[1],Un=(0,a.useState)(!1),Ln=(0,d.Z)(Un,2),On=Ln[0],Rn=Ln[1],zn=(0,a.useState)(!1),qn=(0,d.Z)(zn,2),Bn=qn[0],Fn=qn[1],Wn=(0,g.pQ)(),Yn=(0,d.Z)(Wn,2),jn=Yn[0],Hn=Yn[1],Jn=(0,a.useState)(!(null===ke||void 0===ke||null===(n=ke.processModule)||void 0===n||null===(o=n.module)||void 0===o||!o.id)&&(null===Ce||void 0===Ce||null===(Y=Ce.positions)||void 0===Y||null===(H=Y.filter((function(e){var n,o,l,i;return(null===ke||void 0===ke||null===(n=ke.processModule)||void 0===n||null===(o=n.module)||void 0===o||null===(l=o.options)||void 0===l||null===(i=l.processors)||void 0===i?void 0:i.indexOf(e.id))>-1})))||void 0===H?void 0:H.length)>0),Gn=(0,d.Z)(Jn,2),Vn=Gn[0],Qn=Gn[1],Xn=(0,x.I0)(),Kn=(0,u.s0)(),$n=(0,u.UO)(),eo=$n.paymentID,no=$n.walletID;document.title="Dashboard | ".concat(p.iC," Mobile");var oo=(0,a.useCallback)((function(e,n,o){var l=function(l){var i,d,a,u,r,v,_,y,b,x,C,Z,w,M,S,k,I,N=l.steps.filter((function(e){var n,o,i,t,d,a;return void 0==(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.showStepAll)||1==(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.showStepAll)||0==(null===e||void 0===e||null===(i=e.options)||void 0===i?void 0:i.showStepAll)&&(null===e||void 0===e||null===(t=e.options)||void 0===t||null===(d=t.showOnly)||void 0===d?void 0:d.filter((function(e){return Ee.positions.map((function(e){return e.id})).indexOf(e)>-1})).length)>0||(null===e||void 0===e||null===(a=e.options)||void 0===a?void 0:a.showStepAuthor)&&(null===Ee||void 0===Ee?void 0:Ee.id)===(null===l||void 0===l?void 0:l.user_id)})).map((function(e,n){return(0,t.Z)((0,t.Z)({},e),{},{rank:n+1})}));(m.h.dispatch((0,s.q4)(l)),m.h.dispatch((0,s.an)([l],p.Qc)),m.h.dispatch((0,s.q4)((0,t.Z)((0,t.Z)({},l),{},{completeSteps:l.steps,steps:N,stepIndex:o?0:(null===l||void 0===l||null===(i=l.steps)||void 0===i?void 0:i.length)>0?(null===l||void 0===l||null===(d=l.steps[0])||void 0===d||null===(a=d.component_blueprints)||void 0===a?void 0:a.filter((function(e){var n;return 1==(null===(n=e.options)||void 0===n?void 0:n.asModuleList)})).length)>0?1:0:1,module_id:n.id,module:e.find((function(e){return e.id===n.id})),isUpdating:!1}))),Hn({action:g._U.setCurrentStep,value:null===l||void 0===l?void 0:l.steps[o?0:(null===l||void 0===l||null===(u=l.steps)||void 0===u?void 0:u.length)>0?(null===l||void 0===l||null===(r=l.steps[0])||void 0===r||null===(v=r.component_blueprints)||void 0===v?void 0:v.filter((function(e){var n;return 1==(null===(n=e.options)||void 0===n?void 0:n.asModuleList)})).length)>0?1:0:1]}),Hn({action:g._U.setModuleItems,value:qe.component_items}),Hn({action:g._U.setModuleNewStepComponents,value:[]}),Hn({action:g._U.setComponents,value:[]}),(null===ke||void 0===ke||null===(_=ke.processModule)||void 0===_||null===(y=_.steps)||void 0===y?void 0:y.length)>0&&(null===ke||void 0===ke||null===(b=ke.processModule)||void 0===b||null===(x=b.steps)||void 0===x||x.filter((function(e){var n;return null===e||void 0===e||null===(n=e.component_blueprints)||void 0===n?void 0:n.filter((function(e){return e.selected_fields.filter((function(e){return e.value=void 0}))}))}))),(0,h.vC)(n,p.Qc,p.M4,1,!1).pipe((0,f.q)(1)).subscribe({next:function(e){var o;Oe(!1),n.lastUpdate=0,n.count=null!==(o=null===e||void 0===e?void 0:e.total)&&void 0!==o?o:0,(0,c.OQ)(!0,!1).pipe((0,f.q)(1)).subscribe({complete:function(){(0,c.ew)().pipe((0,f.q)(1)).subscribe({})}})}}),null===n||void 0===n||null===(C=n.options)||void 0===C||null===(Z=C.supporting)||void 0===Z||Z.filter((function(e,o){var l,i;(0,h.vC)({id:e,name:null!==(l="".concat(null===we||void 0===we||null===(i=we.find((function(n){return n.id===e})))||void 0===i?void 0:i.name).concat(o))&&void 0!==l?l:"".concat(null===n||void 0===n?void 0:n.name).concat(o)},p.Qc,p.R6,1).pipe((0,f.q)(1)).subscribe({next:function(l){var i,t;Te.componentsByModule[null!==(i="".concat(null===we||void 0===we||null===(t=we.find((function(n){return n.id===e})))||void 0===t?void 0:t.name).concat(o))&&void 0!==i?i:"".concat(null===n||void 0===n?void 0:n.name).concat(o)]=(0,E.now)()}})})),(null===n||void 0===n||null===(w=n.options)||void 0===w||null===(M=w.positions)||void 0===M?void 0:M.length)>0)&&(0,P.n0)(null===n||void 0===n||null===(k=n.options)||void 0===k?void 0:k.positions,5*(null===n||void 0===n||null===(I=n.options)||void 0===I?void 0:I.positions.length)).pipe((0,f.q)(1)).subscribe({});if(null!==n&&void 0!==n&&null!==(S=n.options)&&void 0!==S&&S.single){var T=localStorage.getItem(n.id);to(l,T?JSON.parse(T):Me.find((function(e){return e.module_id===n.id})))}};Ze.find((function(e){return e.id===n.procedure.id}))?l(Ze.find((function(e){return e.id===n.procedure.id}))):(Oe(!0),(0,v.zJ)(n.procedure.id).pipe((0,_.P)()).subscribe({next:function(e){Oe(!1),l(e)},error:function(e){}}))}),[ke]);(0,a.useEffect)((function(){history.pushState(null,null,location.href),window.onpopstate=function(e){history.go(1)},Xn((0,s.tR)(!1)),Xn((0,s.IW)(!1))}),[Ke]),(0,a.useEffect)((function(){if(xe){if("trial_ended"!==(null===Se||void 0===Se?void 0:Se.status)&&"inactive"!==(null===Se||void 0===Se?void 0:Se.status)&&(null===we||void 0===we?void 0:we.length)>0){var e=null===we||void 0===we?void 0:we.filter((function(e){var n;return!0===(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.asMobileApp)}));if(1===(null===e||void 0===e?void 0:e.length)){var n,o,l=(null===Ce||void 0===Ce||null===(n=Ce.positions)||void 0===n||null===(o=n.filter((function(n){var o,l,i;return(null===(o=e[0])||void 0===o||null===(l=o.options)||void 0===l||null===(i=l.processors)||void 0===i?void 0:i.indexOf(n.id))>-1})))||void 0===o?void 0:o.length)>0;Qn(l),oo(we,e[0],l)}else if((null===e||void 0===e?void 0:e.length)>0){var i,t,d,a,u=Ee.positions.find((function(e){return"1"===e.standards})),r=u&&e.find((function(e){return e.name===u.name})),v=(null===Ce||void 0===Ce||null===(i=Ce.positions)||void 0===i||null===(t=i.filter((function(n){var o,l,i;return(null===(o=e[0])||void 0===o||null===(l=o.options)||void 0===l||null===(i=l.processors)||void 0===i?void 0:i.indexOf(n.id))>-1})))||void 0===t?void 0:t.length)>0;if(r)v=(null===Ce||void 0===Ce||null===(d=Ce.positions)||void 0===d||null===(a=d.filter((function(e){var n,o;return(null===r||void 0===r||null===(n=r.options)||void 0===n||null===(o=n.processors)||void 0===o?void 0:o.indexOf(e.id))>-1})))||void 0===a?void 0:a.length)>0,oo(we,r,v);else oo(we,e[0],v);Qn(v),gn(!0)}}""===(null===Ce||void 0===Ce?void 0:Ce.id)&&(Xn((0,Z.ci)()),Xn((0,s.mb)())),"geolocation"in navigator&&navigator.geolocation.getCurrentPosition((function(e){m.h.dispatch((0,s.Rb)({latitude:e.coords.latitude,longitude:e.coords.longitude}))}))}}),[xe,we]),(0,a.useEffect)((function(){we.length>0&&we.filter((function(e){var n;return void 0===Ze.find((function(n){var o;return n.id===(null===e||void 0===e||null===(o=e.procedure)||void 0===o?void 0:o.id)}))&&(0,v.zJ)(null===e||void 0===e||null===(n=e.procedure)||void 0===n?void 0:n.id).pipe((0,_.P)()).subscribe({next:function(){return window.scrollTo({top:-10})}})})),we.length>0&&we.filter((function(e){var n;return(C()((0,E.now)()).diff(C()(null!==(n=Te.componentsByModule[e.name])&&void 0!==n?n:(0,E.now)()),"minutes")>10||void 0===Te.componentsByModule[e.name]||0===Me.filter((function(n){return n.module_id===e.id})).length)&&(0,h.vC)(e,p.Qc,p.Zp,1,!1).pipe((0,f.q)(1)).subscribe({next:function(n){Te.componentsByModule[e.name]=(0,E.now)(),window.scrollTo({top:-10})}})}))}),[we]),(0,a.useEffect)((function(){xe&&(null===Pe||void 0===Pe?void 0:Pe.length)>0&&void 0!==no&&void 0===eo&&Pe.filter((function(e){return e.user_id===(null===Ee||void 0===Ee?void 0:Ee.id)})).map((function(e,n){var o,l;Oe(!0),(0,I.e_)({user_id:null===e||void 0===e?void 0:e.user_id,id:null===e||void 0===e?void 0:e.id,total:Math.abs(+(null!==(o=null===e||void 0===e?void 0:e.amount)&&void 0!==o?o:0)),product:null!==(l=null===e||void 0===e?void 0:e.description)&&void 0!==l?l:null===e||void 0===e?void 0:e.product,notes:null===e||void 0===e?void 0:e.product,quantity:1}).pipe((0,_.P)()).subscribe({next:function(){if(Oe(!1),e.paymentID===no){var o,l,i=(null!==(o=null===Ce||void 0===Ce?void 0:Ce.wallet)&&void 0!==o?o:0)+Math.abs(null!==(l=+(null===e||void 0===e?void 0:e.amount))&&void 0!==l?l:0);Ce.wallet=i}n+1==Pe.length&&(m.h.dispatch((0,s.Wy)([])),Kn("/mobile"))}})}))}),[no,xe]);var lo=(0,a.useCallback)((function(e){var n,o,l,i,d,u,v;return a.createElement("div",{className:"tabbar-section"},e.children,a.createElement("div",{className:"mobile-nav"},a.createElement(r.Z,{clear:!0,loading:Le,clicked:function(){var e,n,o;m.h.dispatch((0,s.q4)((0,t.Z)((0,t.Z)({},ke.processModule),{},{stepIndex:Vn||null!==(e=ke.processModule)&&void 0!==e&&null!==(n=e.module)&&void 0!==n&&null!==(o=n.options)&&void 0!==o&&o.single?0:1,isUpdating:!1}))),we.filter((function(e){var n;return!0===(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.asMobileApp)})).length>1&&gn(!0),$e(!1),ln(!1)}},a.createElement("div",{style:{color:"var(--app-color-gray-dark)"}},a.createElement(M.G,{icon:w.J9Y,className:"tabbar-icon"}),a.createElement("div",{style:{fontSize:"10px",height:"14px"}},"Home")))),(null===Ce||void 0===Ce||null===(n=Ce.ui_permissions)||void 0===n?void 0:n.find((function(e){return"view-dashboard-task"===e})))&&a.createElement("div",{className:"mobile-nav"},a.createElement(r.Z,{clear:!0,clicked:function(){ln(!0),$e(!1)}},a.createElement("div",{style:{color:"var(--app-color-gray-dark)"}},a.createElement(M.G,{icon:w.fT7,className:"tabbar-icon"}),a.createElement("div",{style:{fontSize:"10px",height:"14px"}},"Tasks")))),!(null!==ke&&void 0!==ke&&null!==(o=ke.processModule)&&void 0!==o&&null!==(l=o.module)&&void 0!==l&&null!==(i=l.options)&&void 0!==i&&i.single)&&a.createElement("div",{className:"mobile-nav"},a.createElement(r.Z,{clear:!0,clicked:function(){m.h.dispatch((0,s.q4)((0,t.Z)((0,t.Z)({},ke.processModule),{},{stepIndex:0,isUpdating:!1}))),Ve(!0),gn(!1),setTimeout((function(){return Ve(!1)})),fn({}),vn(!0),$e(!1),ln(!1)}},a.createElement("div",{style:{color:"var(--app-color-gray-dark)"}},a.createElement(M.G,{icon:w.Zrf,className:"tabbar-icon"}),a.createElement("br",null),a.createElement("div",{style:{fontSize:"10px",height:"14px"}},null!==(d=null===(u=ke.processModule)||void 0===u||null===(v=u.module)||void 0===v?void 0:v.name)&&void 0!==d?d:"Transactions")))),a.createElement("div",{className:"mobile-nav"},a.createElement(r.Z,{clear:!0,clicked:function(){$e(!0),ln(!1)}},a.createElement("div",{style:{color:"var(--app-color-gray-dark)"}},a.createElement(M.G,{icon:w.ILF,className:"tabbar-icon"}),a.createElement("div",{style:{fontSize:"10px",height:"14px"}},"Profile")))))}),[Bn,Le,jn,Me]),io=(0,a.useCallback)((function(e){var n,o,l,i,d=function(){Fn(!Bn)};return a.createElement("div",{className:"navbar-section"},a.createElement("div",{className:"mobile-nav"},a.createElement(r.Z,{style:{marginLeft:"5px"},clear:!0,clicked:function(){var e,n;Oe(!1),(null===jn||void 0===jn||null===(e=jn.components)||void 0===e?void 0:e.length)>0||(null===jn||void 0===jn||null===(n=jn.newStepComponents)||void 0===n?void 0:n.length)>0?En({open:!0,handler:d}):d(),d()}},a.createElement(M.G,{icon:w.Ljc,className:"hamb-icon"}))),a.createElement("div",{className:F.moduleTitle},a.createElement("div",{style:{width:"100%"}},(0,p.lh)("16px","var(--app-color-gray-dark)","light")),a.createElement("div",{style:{width:"100%",fontSize:"10px",fontWeight:""}},"".concat((null!==(n=Se.display_name)&&void 0!==n?n:"").toUpperCase()).concat(Vn?"*":"")," ")),a.createElement("div",{className:F.userCardContainerTop},xe&&we.length>0&&Ze.length>0?a.createElement(U.ZP,null,a.createElement(A.T$,null)):a.createElement(y.$j,{type:"BallTriangle",color:"black",height:20,width:"20px"})),a.createElement("div",{className:"mobile-navbar ".concat(Bn?"open-nav":""),style:{width:"100%",backgroundColor:"transparent"}},a.createElement("div",{className:"mobile-navbar ".concat(Bn?"open-nav":""),style:{height:"inherit",width:"60%",boxShadow:"0px 2px 20px 5px rgba(0, 0, 0, 0.1)"}},a.createElement("div",{onClick:d,className:"mobile-navbar-close"},a.createElement(M.G,{icon:w.QQm,className:"hamb-icon",style:{color:"var(--app-color-gray)",width:"25px",height:"25px"}})),a.createElement("ul",{className:"mobile-navbar-links"},a.createElement("li",null,a.createElement("a",{style:{fontFamily:"Montserrat, serif"},onClick:function(){m.h.dispatch((0,s.q4)((0,t.Z)((0,t.Z)({},ke.processModule),{},{stepIndex:0,isUpdating:!1}))),Ve(!0),gn(!1),setTimeout((function(){return Ve(!1)})),fn({}),vn(!0),ln(!1),$e(!1),d()}},"TRANSACTIONS")),a.createElement("li",null,a.createElement("a",{style:{fontFamily:"Montserrat, serif"},onClick:function(){ln(!1),$e(!0),d()}},"PROFILE")),(null===(o=ke.processModule)||void 0===o||null===(l=o.module)||void 0===l||null===(i=l.options)||void 0===i?void 0:i.credits)&&a.createElement("li",null,a.createElement("a",{style:{fontFamily:"Montserrat, serif"},onClick:function(){(0,P.IC)().pipe((0,_.P)()).subscribe({next:function(e){var n;Ee.wallet=null===e||void 0===e?void 0:e.wallet,Ee.options=null===e||void 0===e?void 0:e.options,Ee.departments=null===e||void 0===e?void 0:e.departments,Ee.positions=null===e||void 0===e?void 0:e.positions,Ee.pinned_modules=null===e||void 0===e?void 0:e.pinned_modules,null===z.Fc||void 0===z.Fc||null===(n=z.Fc.saveUser)||void 0===n||n.call(z.Fc,Ee).then((function(){}))}}),ln(!1),$e(!1),Mn(!0),d()}},"WALLET")),a.createElement("li",null,a.createElement("a",{style:{fontFamily:"Montserrat, serif"},onClick:function(){je(!0),$e(!1),d()}},"LOGOUT"))))))}),[Bn,Le,jn,Me]),to=function(e,n){var o,l;if(n){var d=[],a=0;(null===e||void 0===e||null===(o=e.steps)||void 0===o?void 0:o.length)>0&&(null===e||void 0===e||null===(l=e.steps)||void 0===l||l.filter((function(e){var n;return null===e||void 0===e||null===(n=e.component_blueprints)||void 0===n?void 0:n.filter((function(e){return e.selected_fields.filter((function(e){return e.value=void 0}))}))}))),W.uniqWith(W.eqProps("group"))(n.component_fields).map((function(e){d=[].concat((0,i.Z)(d),[{id:e.component_blueprint_id,temp_id:e.id,selected_fields:W.filter(W.propEq("group",e.group))(n.component_fields)}])})),e.steps.filter((function(e){e.component_blueprints.filter((function(o){o.selected_fields.filter((function(o){var l=n.component_fields.find((function(e){return e.field_name===o.field_name}));if("Status"===o.data_type_name&&void 0!==status&&(a=+e.rank-1),void 0!=l)o.value=l.value;else if("Record"===o.data_type_name){var i=n.component_fields.find((function(e){return e.field_name===o.options.name}));void 0!=i&&(o.value=i.value)}}))}))})),Hn({action:g._U.setComponents,value:d}),Hn({action:g._U.setModuleItems,value:n.component_items}),m.h.dispatch((0,s.q4)((0,t.Z)((0,t.Z)({},e),{},{steps:e.steps,stepIndex:a,module_id:n.module_id,module:we.find((function(e){return e.id===n.module_id})),isUpdating:!0,selectedComponent:n}))),Be(n)}},ao=(0,a.memo)((function(){var e;return a.createElement("div",{style:{padding:"0 5px"}},a.createElement("div",{style:{display:"flex",textAlign:"left"}},a.createElement("p",{className:F.stepTitle},"My Tasks"),a.createElement(r.Z,{light:!0,clicked:function(){Oe(!0),(0,R.km)(Ce.id,!0).pipe((0,f.q)(1)).subscribe({complete:function(){return Oe(!1)}})},icon:a.createElement("img",{src:O.Fdh})}),a.createElement(r.Z,{light:!0,style:{display:null!==Ce&&void 0!==Ce&&null!==(e=Ce.ui_permissions)&&void 0!==e&&e.find((function(e){return"view-dashboard-task"===e}))?"":"none"},clicked:function(){un(!0)},icon:a.createElement("img",{src:O.IHx})})),a.createElement(L.default,{title:"",card:!0,className:F.listContainer,isReport:!1,"app-variant-is-mobile":"true",columns:["Name","Status","Due"],list:De.filter((function(e){return"Done"!==e.status})).map((function(e){var n,o,i,t,d,a,u,r,s,v,c;return c={Name:e.name,Description:e.description,Status:null!==(n=e.status)&&void 0!==n?n:"New",Due:C()(null===(o=e.add_info)||void 0===o?void 0:o.end).format("DD MMMM h:mm a")},(0,l.Z)(c,"Created By","".concat(null!==(i=null===(t=e.creator)||void 0===t?void 0:t.first_name)&&void 0!==i?i:""," ").concat(null!==(d=null===(a=e.creator)||void 0===a?void 0:a.last_name)&&void 0!==d?d:"")),(0,l.Z)(c,"Assigned To","".concat(null!==(u=null===(r=e.assignee)||void 0===r?void 0:r.first_name)&&void 0!==u?u:""," ").concat(null!==(s=null===(v=e.assignee)||void 0===v?void 0:v.last_name)&&void 0!==s?s:"")),(0,l.Z)(c,"task",e),c})),onListItemClick:function(e){un(e.task)}}))}));return a.createElement("div",{className:F.center,style:{flexDirection:"column",alignItems:"center"}},void 0==(null===ke||void 0===ke||null===(J=ke.processModule)||void 0===J?void 0:J.stepIndex)||(null===ke||void 0===ke||null===(G=ke.processModule)||void 0===G?void 0:G.stepIndex)<2?we.length>0&&!Ke&&!on&&function(e){var n=e?function(e){return W.sortWith([W.descend(W.prop("created_date"))])(Me.filter((function(n){return n.module_id===e.id}))).filter((function(e){return!("Closed"===(null===e||void 0===e?void 0:e.status)||"Cancelled"===(null===e||void 0===e?void 0:e.status)||"Expired"===(null===e||void 0===e?void 0:e.status)||"None"===(null===e||void 0===e?void 0:e.status))})).filter((function(n){var o,l,i,t;return!((null===(o=e.options)||void 0===o?void 0:o.activeFor)>0&&C()((0,E.now)()).diff(C()(n.created_date),"minutes")>+(null===(l=e.options)||void 0===l?void 0:l.activeFor))||!("New"===n.status||"Unassigned"===n.status)||(null===(i=n.assigned_to)||void 0===i?void 0:i.id)||(null===n||void 0===n||null===(t=n.payments)||void 0===t?void 0:t.id)})).map((function(n,o){var l;return a.createElement("div",{key:o,className:F.componentCardv2,style:{display:"flex",fontWeight:"normal"},"app-color-variant":"".concat(o%5+1),onClick:function(){j(Ze,Be,vn,Se,n,Hn,Ee,ke,Ce,we,Ve,Ne,e)}},a.createElement("div",{style:{width:"100%",fontSize:(null===n||void 0===n||null===(l=n.title)||void 0===l?void 0:l.length)>18?"14px":"16px",ffontWeight:"normal",padding:"10px"}},"".concat(n.title," (").concat(n.status,")")))}))}(e):[];return a.createElement("div",{className:F.center,style:{height:(null===n||void 0===n?void 0:n.length)>0?"":"0px",width:"100%",minWidth:"360px",backgroundColor:"var(--app-color-gray-lightest)",flexDirection:"column"}},a.createElement(B.tq,{slidesPerView:1,centeredSlides:!0,spaceBetween:10,initialSlide:1,pagination:{clickable:!0,dynamicBullets:!0},modules:[q.pt,q.tl],className:"mySwiper"},(null===n||void 0===n?void 0:n.length)>0&&n.map((function(e,n){return a.createElement(B.o5,{key:n},e)}))))}(null!==(V=null===ke||void 0===ke||null===(Q=ke.processModule)||void 0===Q?void 0:Q.module)&&void 0!==V?V:null===we||void 0===we?void 0:we.find((function(e){var n;return!0===(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.asMobileApp)}))):a.createElement("br",null),void 0==(null===ke||void 0===ke||null===(X=ke.processModule)||void 0===X?void 0:X.stepIndex)||(null===ke||void 0===ke||null===(K=ke.processModule)||void 0===K?void 0:K.stepIndex)<2?we.length>0&&a.createElement(io,null):a.createElement("div",null),0!==(null===ke||void 0===ke||null===($=ke.processModule)||void 0===$?void 0:$.stepIndex)&&0===(null===we||void 0===we?void 0:we.length)&&a.createElement(io,null),0!==(null===ke||void 0===ke||null===(ee=ke.processModule)||void 0===ee?void 0:ee.stepIndex)&&0===(null===we||void 0===we?void 0:we.length)&&a.createElement("div",{style:{display:"flex",margin:"auto",width:"100%",height:"500px",alignContent:"center",alignItems:"center",justifyItems:"center",justifyContent:"center"}},(0,p.lh)("30px")),void 0==(null===ke||void 0===ke||null===(ne=ke.processModule)||void 0===ne?void 0:ne.stepIndex)||(null===ke||void 0===ke||null===(oe=ke.processModule)||void 0===oe?void 0:oe.stepIndex)<2?we.length>0&&!Ke&&!on&&yn&&function(e){var n=we.length>0?function(){var e=[];if(we.filter((function(e){var n,o;return e.id===(null===ke||void 0===ke||null===(n=ke.processModule)||void 0===n||null===(o=n.module)||void 0===o?void 0:o.id)})).filter((function(n){return Ze.filter((function(e){var o;return n.procedure.id===e.id&&e.steps.length>0&&(null===e||void 0===e||null===(o=e.steps)||void 0===o?void 0:o.filter((function(e){return e.component_blueprints.filter((function(e){var n;return 1==(null===(n=e.options)||void 0===n?void 0:n.asDashboard)}))})))})).filter((function(o){return o.steps.filter((function(e){return e.component_blueprints.filter((function(e){var n;return 1==(null===(n=e.options)||void 0===n?void 0:n.asDashboard)}))})).filter((function(l){return l.component_blueprints.filter((function(e){var n;return 1==(null===(n=e.options)||void 0===n?void 0:n.asDashboard)})).filter((function(l){return l.selected_fields.filter((function(e){return 1==e.visible&&"Formula"===e.data_type_name})).map((function(d){var a,u,r,s;e=(null===Ce||void 0===Ce||null===(a=Ce.positions)||void 0===a?void 0:a.filter((function(e){var n,o;return null===(n=l.options)||void 0===n||null===(o=n.showOnly)||void 0===o?void 0:o.includes(e.id)})).length)>0||0==(null===(u=l.options)||void 0===u||null===(r=u.showOnly)||void 0===r?void 0:r.length)||void 0===(null===(s=l.options)||void 0===s?void 0:s.showOnly)?[].concat((0,i.Z)(e),[(0,t.Z)((0,t.Z)({},d),{},{module_id:n.id,procedure:o,module:n})]):(0,i.Z)(e)}))}))}))}))})),e.length>0){1==b.tq&&(e=e.slice(0,2));var n=e.map((function(e,n){var o,l=null!==(o=e.value)&&void 0!==o?o:0;return"Formula"===e.data_type_name&&(l=(0,p.LV)(e.options,Me,[],[],[])),a.createElement("div",{key:n,className:F.dashboardCard,style:{display:"flex",flexDirection:"column",justifyContent:"center"},"app-color-variant":"".concat(n%5+1),onClick:function(){var n,o,l;m.h.dispatch((0,s.IW)(!1)),m.h.dispatch((0,s.q4)((0,t.Z)((0,t.Z)({},e.procedure),{},{stepIndex:0,module_id:e.module_id,module:e.module}))),"countdateocc"===(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.operator)?fn({module_id:e.module_id,key:e.options.list.length>0?e.options.list[0]:"Status",value:C()((0,p.Ob)(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.searchtext)).format("DD MMM YYYY")}):fn({module_id:e.module_id,key:e.options.list.length>0?e.options.list[0]:"Status",value:null!==(l=e.options.searchtext)&&void 0!==l?l:""}),m.h.dispatch((0,s.q4)((0,t.Z)((0,t.Z)({},ke.processModule),{},{stepIndex:0,isUpdating:!1}))),vn(!0),Ve(!0),ln(!1),$e(!1),setTimeout((function(){return Ve(!1)}))}},a.createElement("div",{style:{fontSize:"12px"}},"Dashboard"),a.createElement("h3",null,e.field_name),l)}));return null!==n&&void 0!==n?n:[]}}():[],o=e?function(e){return W.sortWith([W.descend(W.prop("created_date"))])(Me.filter((function(n){return n.module_id===e.id}))).filter((function(e){return"None"===(null===e||void 0===e?void 0:e.status)})).filter((function(n){var o,l,i,t;return!((null===(o=e.options)||void 0===o?void 0:o.activeFor)>0&&C()((0,E.now)()).diff(C()(n.created_date),"minutes")>+(null===(l=e.options)||void 0===l?void 0:l.activeFor))||!("New"===n.status||"Unassigned"===n.status)||(null===(i=n.assigned_to)||void 0===i?void 0:i.id)||(null===n||void 0===n||null===(t=n.payments)||void 0===t?void 0:t.id)})).map((function(n,o){n.component_fields.find((function(e){return"Action Button"===e.data_type_name}));var l,i,t,d,u,r=n.component_fields.find((function(e){return"Value Button"===e.data_type_name&&(null===e||void 0===e?void 0:e.value)})),s=null===(l=ke.processModule.completeSteps[0].component_blueprints)||void 0===l||null===(i=l.find((function(e){var n,o,l;return 1==e.options.asModuleList&&(Ee.positions.filter((function(n){var o,l;return null===(o=e.options)||void 0===o||null===(l=o.showOnly)||void 0===l?void 0:l.includes(n.id)})).length>0||0==(null===(n=e.options)||void 0===n||null===(o=n.showOnly)||void 0===o?void 0:o.length)||void 0===(null===(l=e.options)||void 0===l?void 0:l.showOnly))})))||void 0===i||null===(t=i.selected_fields)||void 0===t?void 0:t.map((function(e){return e.field_name}));return a.createElement("div",{key:o,className:F.componentCard,style:{display:"flex",border:"0.6px solid var(--app-color-gray-lighter)",fontWeight:"normal",ppadding:"60px"},"app-color-variant":"".concat(o%5+1),onClick:function(){j(Ze,Be,vn,Se,n,Hn,Ee,ke,Ce,we,Ve,Ne,e)}},a.createElement("div",{style:{width:r?"85%":"100%",fontFamily:"var(--app-text-mobile-font)"}},s.map((function(e,o){var l;return a.createElement("div",{key:o,style:{fontSize:0==o?"16px":"12px",fontWeight:0==o?"bolder":""}},null===(l=n.component_fields.find((function(n){return n.field_name===e})))||void 0===l?void 0:l.value)}))),r&&a.createElement("div",{style:{width:"15%"}},a.createElement("img",{alt:"lg",onError:function(e){return e.target.src=null===Se||void 0===Se?void 0:Se.logo},src:null!==(d=null===(u=r.options)||void 0===u?void 0:u.image)&&void 0!==d?d:null===Se||void 0===Se?void 0:Se.logo,className:F.avatarUrlImg})))}))}(e):[];return a.createElement("div",{className:F.center,style:{display:(null===o||void 0===o?void 0:o.length)>0?"":"none",height:(null===n||void 0===n?void 0:n.length)>0||(null===o||void 0===o?void 0:o.length)>0?"":"0px",width:"100%",minWidth:"360px",backgroundColor:"var(--app-color-gray-lightest)",flexDirection:"column",textAlign:"left"}},a.createElement(B.tq,{slidesPerView:1,centeredSlides:!0,spaceBetween:10,initialSlide:0,pagination:{clickable:!0,dynamicBullets:!0},modules:[q.pt,q.tl],className:"mySwiper"},(null===o||void 0===o?void 0:o.length)>0&&o.map((function(e,n){return a.createElement(B.o5,{key:n,className:F.swiperslide},e)}))))}(null!==(le=null===ke||void 0===ke||null===(ie=ke.processModule)||void 0===ie?void 0:ie.module)&&void 0!==le?le:null===we||void 0===we?void 0:we.find((function(e){var n;return!0===(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.asMobileApp)}))):a.createElement("br",null),void 0==(null===ke||void 0===ke||null===(te=ke.processModule)||void 0===te?void 0:te.stepIndex)||(null===ke||void 0===ke||null===(de=ke.processModule)||void 0===de?void 0:de.stepIndex)<2?we.length>0&&!Ke&&!on&&yn&&function(){var e=we.length>0?function(){var e=we.find((function(e){var n;return 1==(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.asGraphical)}));return void 0===e?[]:W.sortWith([W.descend(W.prop("created_date"))])(Me.filter((function(n){return n.module_id===e.id}))).filter((function(e){var n;return(null===(n=e.component_fields)||void 0===n?void 0:n.filter((function(e){var n;return"Status"===e.data_type_name&&!(e.value===(null===(n=Se.misc_info)||void 0===n?void 0:n.lock)||"Closed"===e.value||"Cancelled"===e.value)})).length)>0})).map((function(e,n){var o,l,i,t,d=e.component_fields.find((function(e){return"Link"===e.data_type_name}));return a.createElement("div",{key:n,className:F.imageCard},d&&((null===(o="".concat(null===d||void 0===d?void 0:d.value))||void 0===o?void 0:o.includes("jpg"))||(null===(l="".concat(null===d||void 0===d?void 0:d.value))||void 0===l?void 0:l.includes("jpeg"))||(null===(i="".concat(null===d||void 0===d?void 0:d.value))||void 0===i?void 0:i.includes("png"))||(null===d||void 0===d||null===(t=d.options)||void 0===t?void 0:t.image))&&a.createElement("img",{alt:"lg",src:null===d||void 0===d?void 0:d.value,style:{objectFit:"fill",height:"200px",borderRadius:"14px"}}))}))}():[];return a.createElement("div",{className:F.center,style:{display:(null===e||void 0===e?void 0:e.length)>0?"":"none",width:"100%",minWidth:"360px",backgroundColor:"var(--app-color-gray-lightest)",flexDirection:"column",marginTop:"0px"}},a.createElement(B.tq,{slidesPerView:"auto",centeredSlides:!0,spaceBetween:1,initialSlide:1,pagination:{clickable:!0,dynamicBullets:!0},modules:[q.pt,q.tl],className:"mySwiper"},(null===e||void 0===e?void 0:e.length)>0&&e.map((function(e,n){return a.createElement(B.o5,{key:n,className:F.swiperslide},e)}))))}():a.createElement("br",null),(null===ke||void 0===ke||null===(ae=ke.processModule)||void 0===ae?void 0:ae.stepIndex)<2&&yn&&!Ke?function(){var e=we.filter((function(e){var n;return!0===(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.asMobileApp)}));return a.createElement("div",{className:F.center,style:{textAlign:"left",height:e.length>4?"".concat(52,"vh"):"15vh",padding:"0px 10px 0px 20px ",width:"100%",flexDirection:"column",marginTop:"0px"}},a.createElement(B.tq,{slidesPerView:e.length>4?4:e.length,grid:{rows:e.length>4?2:1},spaceBetween:1,pagination:{clickable:!0},modules:[q.rj,q.tl],style:{display:"flex",flexDirection:"column"}},e.map((function(e,n){var o;return a.createElement(B.o5,{key:n},a.createElement(r.Z,{clear:!0,clicked:function(){var n,o,l=(null===Ce||void 0===Ce||null===(n=Ce.positions)||void 0===n||null===(o=n.filter((function(n){var o,l;return(null===e||void 0===e||null===(o=e.options)||void 0===o||null===(l=o.processors)||void 0===l?void 0:l.indexOf(n.id))>-1})))||void 0===o?void 0:o.length)>0;Qn(l),oo(we,e,l),gn(!0),$e(!1),ln(!1)},style:{fontSize:"12px",fontFamily:"var(--app-text-mobile-font)",width:"100%",height:"10vh",flexDirection:"column",boxShadow:"1px 1px 8px 0px rgba(0, 0, 0, 0.1)"}},a.createElement("img",{alt:"lg",src:null===(o=e.options)||void 0===o?void 0:o.background,style:{objectFit:"contain",width:"10vh",height:"8vh",borderRadius:"5px"}}),e.name))}))))}(null!==(ue=null===ke||void 0===ke||null===(re=ke.processModule)||void 0===re?void 0:re.module)&&void 0!==ue||(null===we||void 0===we||we.find((function(e){var n;return!0===(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.asMobileApp)})))):a.createElement("br",null),!(Ke||on)&&a.createElement("div",{className:F.host,style:{display:"inactive"===Se.status?"none":"",width:"100%"}},a.createElement("div",{className:F.dashboardPanel,style:{display:"flex",margin:"0px 0 0 0"}},(null===ke||void 0===ke||null===(se=ke.processModule)||void 0===se||null===(ve=se.steps)||void 0===ve?void 0:ve.length)>0&&Ie.length>0&&!Ge?a.createElement(S.ZP,{isProcessorOnly:Vn,paymentID:eo,navigateTo:mn,selectedComponent:null!==qe&&void 0!==qe?qe:{},setSelectedComponent:Be,selectedProcess:ke.processModule,onCancel:function(){vn(!1),Ve(!0),setTimeout((function(){return Ve(!1)}))}}):a.createElement(y.$j,{type:"BallTriangle",color:"black",height:40,width:"40px"}))),Ke&&a.createElement("div",{style:{width:"100%",padding:"0 40px"}},a.createElement(N.default,null)),on&&a.createElement("div",{style:{width:"100%",padding:"0 10px"}},a.createElement(ao,null)),(void 0==(null===ke||void 0===ke||null===(ce=ke.processModule)||void 0===ce?void 0:ce.stepIndex)||(null===ke||void 0===ke||null===(pe=ke.processModule)||void 0===pe?void 0:pe.stepIndex)<2)&&we.length>0&&a.createElement("div",{style:{display:"flex",position:"fixed",bottom:"0",width:"100%"}},a.createElement(lo,null)),wn&&a.createElement(y.U7,{hasCloseIcon:!0,isOpen:wn,onClose:function(){Mn(!1),Pn(-1)},backdropColor:!0,blured:!1,scrollable:!0,shadowedContainerStyle:{width:"100%"}},a.createElement("div",{className:F.userPanelRows,style:{height:"auto",minHeight:"540px",marginTop:"20px",display:In>0?"none":""}},a.createElement(N.LabeledContainer,{label:"Billing & Payments"}),a.createElement("div",{className:F.wallet},a.createElement("div",{style:{color:"white",fontSize:"14px"}},"Reward Points:"),a.createElement("div",{style:{color:"white",fontSize:"20px",fontWeight:"bold",margin:"5px 0 20px"}},null!==(me=null===Ce||void 0===Ce||null===(fe=Ce.options)||void 0===fe||null===(_e=fe.points)||void 0===_e?void 0:_e.toFixed(2))&&void 0!==me?me:"0.00"," Pts"),a.createElement("div",{style:{color:"white",fontSize:"14px"}},"Payments Wallet:"),a.createElement("div",{style:{color:"white",fontSize:"20px",fontWeight:"bold",margin:"5px 0 80px"}},"Php ",null!==(he=null===Ee||void 0===Ee||null===(ye=Ee.wallet)||void 0===ye?void 0:ye.toFixed(2))&&void 0!==he?he:"0.00"),a.createElement("div",{className:F.actionsContainer},a.createElement(r.Z,{clear:!0,title:"Top Up",clicked:function(){return Pn(0)},style:{backgroundColor:"var(--app-color-blue)",color:"white",width:"140px",display:In>-1?"none":""}})),a.createElement("div",{style:{width:"inherit",display:-1===In?"none":""}},a.createElement("div",{style:{color:"white"},onClick:function(){return Pn(-1)}},"Select your denomination:"),a.createElement(r.Z,{light:!0,title:"Php 500.00",clicked:function(){return Pn(500)},style:{width:"100%"}}),a.createElement(r.Z,{light:!0,title:"Php 1000.00",clicked:function(){return Pn(1e3)},style:{width:"100%"}}),a.createElement(r.Z,{light:!0,title:"Php 2000.00",clicked:function(){return Pn(2e3)},style:{width:"100%"}}),a.createElement(r.Z,{light:!0,title:"Php 3000.00",clicked:function(){return Pn(3e3)},style:{width:"100%"}}))),a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},a.createElement(r.Z,{loading:Le,light:!0,title:On?"Hide":"Show Recent Payments",style:{marginRight:"40px"},clicked:function(){On?Rn(!1):(Oe(!0),(0,I.GP)().pipe((0,_.P)()).subscribe({next:function(e){Oe(!1),Rn(!0),An(e.data)},error:function(){}}))}})),a.createElement("div",{style:{display:On?"":"none",padding:"20px 0px"}},"Recent Payments:",a.createElement("br",null),a.createElement("br",null),a.createElement(L.default,{title:"",card:!0,className:F.listContainer,isReport:!1,"app-variant-is-mobile":"true",columns:["Date","ID","Source","Amount"],list:Dn.map((function(e){var n;return{Date:"".concat(C()(e.starts_at).format("YY MMM DD h:mm a")),ID:"".concat(e.stripe_product),Source:"".concat(e.stripe_status),Amount:"".concat(null===(n=+e.stripe_price)||void 0===n?void 0:n.toFixed(2))}}))}))),In>0?a.createElement(k.default,{label:" ",withBack:!1,paymentPath:"wallet",onClose:function(){return Mn(!1)},companyData:Se,subscriptionInfo:{user_id:Ee.id,ref:Ee.id,plan_price:In,currency:"PHP",description:"Credits",plan:"Wallet",total:In,billable_users:[Ce],duration:0,dlabel:"Flowhero",id:(0,p.mR)()},onError:function(){return Mn(!1)}}):a.createElement(a.Fragment,null,a.createElement("p",{style:{fontSize:"10px"}},""!==T.lw?"Payments by":""),a.createElement("img",{src:"https://files.readme.io/7586db8-small-paymongo_api_white.png",style:{backgroundColor:"black",height:"30px",width:"140px"}}))),an&&a.createElement(S.pz,{modalVisible:an,heading:"Task for ".concat(null===ke||void 0===ke||null===(ge=ke.processModule)||void 0===ge||null===(be=ge.module)||void 0===be?void 0:be.name),task:!0===an?{}:an,isProcess:!0,blured:!0,shadowedContainerStyle:{width:"100%"},onClose:function(){return un(!1)},isEdit:!0!==an,labels:{valueL:"Value"}}),Ye&&a.createElement(y.P9,{openModal:Ye,setOpenModal:je,slug:null===Se||void 0===Se?void 0:Se.slug}))})),j=function(e,n,o,l,d,a,u,r,v,c,f,h,y){!function(){var b,x,E,C,Z,w,M,S,k,I,N,T,D,A,U,L,O,R,z,q,B,F,Y,j,H,J,G=e.find((function(e){return e.id===y.procedure.id}));n(d),o(!0),l.start=!0;var V=[];(null===G||void 0===G||null===(b=G.steps)||void 0===b?void 0:b.length)>0&&(null===G||void 0===G||null===(x=G.steps)||void 0===x||x.filter((function(e){var n;return null===e||void 0===e||null===(n=e.component_blueprints)||void 0===n?void 0:n.filter((function(e){return e.selected_fields.filter((function(e){return e.value=void 0}))}))}))),W.uniqWith(W.eqProps("group"))(d.component_fields).map((function(e){V=[].concat((0,i.Z)(V),[{id:e.component_blueprint_id,temp_id:e.id,selected_fields:W.filter(W.propEq("group",e.group))(d.component_fields)}])})),G.steps.filter((function(e){e.component_blueprints.filter((function(e){e.selected_fields.filter((function(e){var n,o=null===(n=d.component_fields)||void 0===n?void 0:n.find((function(n){return n.field_name===e.field_name}));if(void 0!=o)e.value=o.value,e.group=o.group;else if("Record"===e.data_type_name){var l,i=null===(l=d.component_fields)||void 0===l?void 0:l.find((function(n){return n.field_name===e.options.name}));void 0!=i&&(e.value=i.value,e.group=i.group)}}))}))})),a({action:g._U.setComponents,value:V}),a({action:g._U.setModuleItems,value:JSON.parse(JSON.stringify(d.component_items))});var Q,X,K,$=G.steps.filter((function(e){var n,o,l,i,t,d;return void 0==(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.showStepAll)||1==(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.showStepAll)||0==(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.showStepAll)&&(null===e||void 0===e||null===(i=e.options)||void 0===i||null===(t=i.showOnly)||void 0===t?void 0:t.filter((function(e){return u.positions.map((function(e){return e.id})).indexOf(e)>-1})).length)>0||(null===e||void 0===e||null===(d=e.options)||void 0===d?void 0:d.showStepAuthor)&&(null===u||void 0===u?void 0:u.id)===(null===G||void 0===G?void 0:G.user_id)})).map((function(e,n){return(0,t.Z)((0,t.Z)({},e),{},{rank:n+1})})),ee=(null===r||void 0===r||null===(E=r.processModule)||void 0===E||null===(C=E.steps)||void 0===C?void 0:C.length)>0?null===r||void 0===r||null===(Z=r.processModule)||void 0===Z||null===(w=Z.steps)||void 0===w||null===(M=w.find((function(e){return(null===e||void 0===e?void 0:e.component_blueprints.filter((function(e){return e.selected_fields.filter((function(e){return"Status"===e.data_type_name})).length>0})).length)>0})))||void 0===M||null===(S=M.component_blueprints)||void 0===S||null===(k=S.find((function(e){return e.selected_fields.filter((function(e){return"Status"===e.data_type_name})).length>0})))||void 0===k||null===(I=k.options)||void 0===I?void 0:I.showOnly:[],ne=(null===r||void 0===r||null===(N=r.processModule)||void 0===N||null===(T=N.steps)||void 0===T?void 0:T.length)>0?null===r||void 0===r||null===(D=r.processModule)||void 0===D||null===(A=D.steps)||void 0===A||null===(U=A.find((function(e){return(null===e||void 0===e?void 0:e.component_blueprints.filter((function(e){return e.selected_fields.filter((function(e){return"Action Button"===e.data_type_name})).length>0})).length)>0})))||void 0===U||null===(L=U.component_blueprints.find((function(e){var n;return(null===(n=e.selected_fields.filter((function(e){return"Action Button"===e.data_type_name})))||void 0===n?void 0:n.length)>0})))||void 0===L||null===(O=L.options)||void 0===O?void 0:O.showOnly:[],oe=void 0===d.status&&((null===v||void 0===v?void 0:v.id)===(null===G||void 0===G?void 0:G.user_id)||(null===ee||void 0===ee?void 0:ee.filter((function(e){var n;return(null===u||void 0===u||null===(n=u.positions)||void 0===n?void 0:n.map((function(e){return e.id})).indexOf(e))>-1})).length)>0)||(void 0===d.status||"New"===d.status)&&(null===d||void 0===d||null===(R=d.created_by)||void 0===R?void 0:R.id)===(null===u||void 0===u?void 0:u.id)||void 0!==d.status&&!("Closed"===d.status||d.status===(null===l||void 0===l||null===(z=l.misc_info)||void 0===z?void 0:z.lock))&&(null===ee||void 0===ee?void 0:ee.filter((function(e){var n;return(null===u||void 0===u||null===(n=u.positions)||void 0===n?void 0:n.map((function(e){return e.id})).indexOf(e))>-1})).length)>0&&(1!=(null===c||void 0===c||null===(q=c.find((function(e){return e.id===d.module_id})))||void 0===q||null===(B=q.options)||void 0===B?void 0:B.strict)||(null===d||void 0===d||null===(F=d.created_by)||void 0===F?void 0:F.id)!==(null===v||void 0===v?void 0:v.id))||!1===(null===d||void 0===d?void 0:d.is_complete)&&(null===d||void 0===d||null===(Y=d.created_by)||void 0===Y?void 0:Y.id)===(null===v||void 0===v?void 0:v.id),le=(0,p.cQ)(d.status,ne,d,v,r,l),ie=null!==(j=null===(H=d.component_fields.find((function(e){return"Action Button"===e.data_type_name})))||void 0===H?void 0:H.value)&&void 0!==j?j:"";(m.h.dispatch((0,s.q4)((0,t.Z)((0,t.Z)({},G),{},{completeSteps:G.steps,steps:$,stepIndex:1==oe&&d.created_by.id===u.id&&ie||(!oe||d.created_by.id!==u.id&&G.user_id!==u.id)&&(!le||ie!==u.id&&G.user_id!==u.id)?0:1,canEdit:!(1==oe&&d.created_by.id===u.id&&ie||(!oe||d.created_by.id!==u.id&&G.user_id!==u.id)&&(!le||ie!==u.id&&G.user_id!==u.id)),status:d.status,back_array:$.length>0?[$[0].id]:[],module_id:d.module_id,module:null===c||void 0===c?void 0:c.find((function(e){return e.id===d.module_id})),isUpdating:!0,selectedComponent:d,showDetail:!0}))),f(!0),null!==d&&void 0!==d&&null!==(J=d.assigned_to)&&void 0!==J&&J.id&&!h.find((function(e){var n;return e.id===(null===d||void 0===d||null===(n=d.assigned_to)||void 0===n?void 0:n.id)})))?(0,P.VG)(h.find((function(e){var n;return e.id===(null===(n=d.created_by)||void 0===n?void 0:n.id)}))?[null===d||void 0===d||null===(Q=d.assigned_to)||void 0===Q?void 0:Q.id]:[null===d||void 0===d||null===(X=d.assigned_to)||void 0===X?void 0:X.id,null===d||void 0===d||null===(K=d.created_by)||void 0===K?void 0:K.id]).pipe((0,_.P)()).subscribe({next:function(e){m.h.dispatch((0,s.NY)(h.concat(e))),setTimeout((function(){f(!1),window.scrollTo({top:0,behavior:"smooth"})}))}}):setTimeout((function(){f(!1),window.scrollTo({top:0,behavior:"smooth"})}))}()}},3841:function(e,n,o){"use strict";o.r(n),o.d(n,{default:function(){return $}});var l,i,t,d,a,u,r,s,v=o(87462),c=o(1413),p=o(29439),m=o(67861),f="BeginModule_headerContainer__6l-gP",_="BeginModule_modalLabelHeader__EVne0",h="BeginModule_modalLabel__WZVSY",y="BeginModule_modalButtons__bAjdy",g="BeginModule_importArea__2hmJ7",b="BeginModule_importText__YhRY+",x=o(39518),E=o(10103),C=o(11577),Z=o(65019),w=o(88550),M=o(93389),S=o(43004),k=o(88827),I=o(88374),P=o(32422),N=o(96189),T=o(73500),D=o(1542),A=o(6073),U=o(43984),L=o(75105),O=o(34665),R=o(23280),z=o(59401),q=o(29118),B=o(41771),F=o(30168),W=o(43745),Y=W.ZP.div(l||(l=(0,F.Z)(["\n\twidth: 100%;\n\t\n\tmargin: 0 auto;\n\tpadding: 0 16px;\n\tpadding 0 8% 0 8%;\n"]))),j=W.ZP.div(i||(i=(0,F.Z)(["\n\tdisplay: flex;\n\tjustify-content: space-between;\n\tposition: relative;\n\tmargin-top: 40px;\n\t:before {\n\t\tcontent: '';\n\t\tposition: absolute;\n\t\tbackground: var(--app-color-gray-lighter);\n\t\theight: 4px;\n\t\twidth: 100%;\n\t\ttop: 50%;\n\t\ttransform: translateY(-50%);\n\t\topacity: 0.3;\n\t\tleft: 0;\n\t}\n\t:after {\n\t\tcontent: '';\n\t\tposition: absolute;\n\t\tbackground: #4a154b;\n\t\theight: 4px;\n\t\twidth: ",";\n\t\ttop: 50%;\n\t\ttransition: 0.4s ease;\n\t\ttransform: translateY(-50%);\n\t\tleft: 0;\n\t}\n"])),(function(e){return e.width})),H=W.ZP.div(t||(t=(0,F.Z)(["\n\tposition: relative;\n\tz-index: 1;\n"]))),J=W.ZP.div(d||(d=(0,F.Z)(["\n\twidth: 40px;\n\theight: 40px;\n\tborder-radius: 50%;\n\tbackground-color: #ffffff;\n\tborder: 3px solid ",";\n\ttransition: 0.4s ease;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n"])),(function(e){return"completed"===e.step?"black":"var(--app-color-gray-dark)"})),G=W.ZP.span(a||(a=(0,F.Z)(["\n\tfont-size: 19px;\n\tcolor: var(--app-color-gray-dark);\n\t@media (max-width: 600px) {\n\t\tfont-size: 16px;\n\t}\n"]))),V=W.ZP.div(u||(u=(0,F.Z)(["\n\tposition: absolute;\n\twidth: 300px;\n\ttop: 66px;\n\tleft: 50%;\n\ttransform: translate(-50%, -50%);\n"]))),Q=W.ZP.span(r||(r=(0,F.Z)(["\n\tfont-size: 10px;\n\tcolor: var(--app-color-gray-dark);\n\n\t@media (max-width: 800px) {\n\t\tfont-size: 16px;\n\t}\n\t@media (max-width: 600px) {\n\t\tfont-size: 8px;\n\t}\n"]))),X=W.ZP.div(s||(s=(0,F.Z)(["\n\tfont-size: 26px;\n\tfont-weight: 600;\n\tcolor: #4a154b;\n\t-ms-transform: scaleX(-1) rotate(-46deg); /* IE 9 */\n\t-webkit-transform: scaleX(-1) rotate(-46deg); /* Chrome, Safari, Opera */\n\ttransform: scaleX(-1) rotate(-46deg);\n"]))),K=function(e){var n=e.steps,o=e.activeStep,l=void 0===o?1:o,i=n.length,t="".concat(100/(i-1)*(l-1),"%");return m.createElement(Y,null,m.createElement(j,{width:t},n.map((function(e){var n=e.rank,o=e.name;return m.createElement(H,{key:n-1},m.createElement(J,{step:l>=n-1?"completed":"incomplete"},l>n-1?m.createElement(X,null,"L"):m.createElement(G,null,n-1)),m.createElement(V,null,m.createElement(Q,{key:n-1},o)))}))))},$=(0,x.$j)((function(e){var n=e.flowReducer,o=n.begunModule,l=n.companyProcesses,i=n.cart;return{begunModule:o,user:e.sessionReducer.user,companyProcesses:l,cart:i}}),(function(e){return{onSetAuthenticatedUser:function(n){return e((0,U.IF)(n))}}}))((function(e){var n,o,l,i,t,d,a,u,r,s,x,U,F,W,Y,j,H,J,G,V=e.begunModule,Q=e.user,X=e.companyProcesses,$=e.cart,ee=(0,m.useState)(""),ne=(0,p.Z)(ee,2),oe=ne[0],le=ne[1],ie=(0,m.useState)(!1),te=(0,p.Z)(ie,2),de=te[0],ae=te[1],ue=(0,m.useState)(!1),re=(0,p.Z)(ue,2),se=re[0],ve=re[1],ce=(0,w.pQ)(),pe=(0,p.Z)(ce,2),me=pe[0],fe=pe[1],_e=(0,m.useState)(!1),he=(0,p.Z)(_e,2),ye=he[0],ge=he[1],be=(0,m.useState)(!1),xe=(0,p.Z)(be,2),Ee=xe[0],Ce=xe[1],Ze=(0,R.UO)(),we=Ze.moduleID,Me=Ze.paymentID,Se=(0,R.TH)(),ke=(0,m.useCallback)((function(e){e.forEach((function(e){var n;if(-1!==["xls","xlsx","csv"].indexOf(null===e||void 0===e||null===(n=e.name)||void 0===n?void 0:n.toString().split(".")[1])){var o=new FileReader;o.onabort=function(){},o.onerror=function(){},o.onload=function(e){},o.readAsBinaryString(e),o.onloadend=function(n){var o,l;Ce(!0),(0,D._)(e,null===V||void 0===V||null===(o=V.processModule)||void 0===o||null===(l=o.module)||void 0===l?void 0:l.id).subscribe({next:function(){Ce(!1),(0,A.OQ)(!1,!0).pipe((0,E.q)(1)).subscribe({})},complete:function(){Ce(!1)},error:function(e){Ce(!1)}})}}}))}),[null===V||void 0===V||null===(n=V.processModule)||void 0===n?void 0:n.module]),Ie=(0,q.uI)({onDrop:ke}),Pe=Ie.getRootProps,Ne=Ie.getInputProps,Te=Ie.isDragActive,De=(0,R.s0)();(0,m.useEffect)((function(){var e,n;if(void 0===(null===V||void 0===V||null===(e=V.processModule)||void 0===e?void 0:e.isUpdating)){var o=X.find((function(e){return e.id===V.processModule.id}));if(o&&o.steps.length>0){var l,i=(0,c.Z)((0,c.Z)((0,c.Z)({},V.processModule),o),{},{completeSteps:o.steps,steps:o.steps.filter((function(e){var n,l,i,t,d,a;return void 0==(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.showStepAll)||1==(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.showStepAll)||0==(null===e||void 0===e||null===(i=e.options)||void 0===i?void 0:i.showStepAll)&&(null===e||void 0===e||null===(t=e.options)||void 0===t||null===(d=t.showOnly)||void 0===d?void 0:d.filter((function(e){return Q.positions.map((function(e){return e.id})).indexOf(e)>-1})).length)>0||(null===e||void 0===e||null===(a=e.options)||void 0===a?void 0:a.showStepAuthor)&&(null===Q||void 0===Q?void 0:Q.id)===(null===o||void 0===o?void 0:o.user_id)})).map((function(e,n){return(0,c.Z)((0,c.Z)({},e),{},{rank:n+1})}))});k.h.dispatch((0,I.q4)(i)),fe({action:w._U.setCurrentStep,value:i.steps[null!==(l=V.processModule.stepIndex)&&void 0!==l?l:0]})}else(0,M.zJ)(V.processModule.id).pipe((0,C.P)()).subscribe({next:function(e){var n,o=(0,c.Z)((0,c.Z)((0,c.Z)({},V.processModule),e),{},{completeSteps:e.steps,steps:e.steps.filter((function(n){var o,l,i,t,d,a;return void 0==(null===n||void 0===n||null===(o=n.options)||void 0===o?void 0:o.showStepAll)||1==(null===n||void 0===n||null===(l=n.options)||void 0===l?void 0:l.showStepAll)||0==(null===n||void 0===n||null===(i=n.options)||void 0===i?void 0:i.showStepAll)&&(null===n||void 0===n||null===(t=n.options)||void 0===t||null===(d=t.showOnly)||void 0===d?void 0:d.filter((function(e){return Q.positions.map((function(e){return e.id})).indexOf(e)>-1})).length)>0||(null===n||void 0===n||null===(a=n.options)||void 0===a?void 0:a.showStepAuthor)&&(null===Q||void 0===Q?void 0:Q.id)===(null===e||void 0===e?void 0:e.user_id)}))});k.h.dispatch((0,I.q4)(o)),fe({action:w._U.setCurrentStep,value:o.steps[null!==(n=V.processModule.stepIndex)&&void 0!==n?n:0]})},error:function(e){}})}else if(!0===(null===V||void 0===V||null===(n=V.processModule)||void 0===n?void 0:n.isUpdating)){var t;fe({action:w._U.setCurrentStep,value:V.processModule.steps[null!==(t=V.processModule.stepIndex)&&void 0!==t?t:0]})}if(we){var d=new URLSearchParams(null===Se||void 0===Se?void 0:Se.search);le({key:d.get("key"),value:d.get("value")})}}),[]);return(0,S.Z)(!0,"Are you sure want to leave this "),m.createElement(Z.LN,null,m.createElement(z.sM,null,m.createElement("div",{className:f},m.createElement("div",null),!T.tq&&(null===me||void 0===me||null===(o=me.currentStep)||void 0===o?void 0:o.rank)>1&&(null===(l=V.processModule.steps)||void 0===l?void 0:l.length)>2&&m.createElement("div",{className:_,style:{width:(null===(i=V.processModule.steps)||void 0===i?void 0:i.length)>4?"100%":"50%",paddingBottom:"20px"}},m.createElement(K,{steps:null===(t=V.processModule)||void 0===t||null===(d=t.steps)||void 0===d?void 0:d.slice(1),activeStep:null!==(a=(null===me||void 0===me||null===(u=me.currentStep)||void 0===u?void 0:u.rank)-1)&&void 0!==a?a:0})),m.createElement("div",{style:{display:"flex",minWidth:"100px"}},m.createElement(N.j3,{permissions:[N.po.blueprints.process.create]},!0===(null===V||void 0===V||null===(r=V.processModule)||void 0===r||null===(s=r.module)||void 0===s||null===(x=s.options)||void 0===x?void 0:x.allowImport)&&1==(null===me||void 0===me||null===(U=me.currentStep)||void 0===U?void 0:U.rank)&&m.createElement(N.zx,{title:ye?"Hide":"Import",style:{marginLeft:"0px"},clicked:function(){return ge(!ye)}})),m.createElement(N.zx,{title:(null===Q||void 0===Q||null===(F=Q.pinned_modules)||void 0===F?void 0:F.filter((function(e){return e.id===V.processModule.module_id})).length)>0?"Unpin":"Pin",loading:se,style:{marginLeft:"0px",width:"100px",display:(null===me||void 0===me||null===(W=me.currentStep)||void 0===W?void 0:W.rank)>1?"none":""},clicked:function(){var e;ve(!0),(null===Q||void 0===Q||null===(e=Q.pinned_modules)||void 0===e?void 0:e.filter((function(e){return e.id===V.processModule.module_id})).length)>0?(0,D.Ev)(V.processModule.module_id).pipe((0,C.P)()).subscribe({next:function(){(0,L.IC)().pipe((0,C.P)()).subscribe({next:function(e){O.Fc.saveUser((0,c.Z)({},e)),ve(!1)}})}}):(0,D.tq)(V.processModule.module_id).pipe((0,C.P)()).subscribe({next:function(){(0,L.IC)().pipe((0,C.P)()).subscribe({next:function(e){O.Fc.saveUser((0,c.Z)({},e)),ve(!1),k.h.dispatch((0,I.IW)(!0)),De("/dashboard")}})}})}}),m.createElement(N.zx,{title:"Close",style:{marginLeft:"5px",width:"80px",display:(null===me||void 0===me||null===(Y=me.currentStep)||void 0===Y?void 0:Y.rank)>1?"none":""},clicked:function(){var e,n,o;(setTimeout((function(){k.h.dispatch((0,I.IW)(!0)),k.h.dispatch((0,I.Xc)({show:!1,message:""}))}),10),(null===me||void 0===me||null===(e=me.items)||void 0===e?void 0:e.length)>0)?!0!==(null===(n=V.processModule.module)||void 0===n||null===(o=n.options)||void 0===o?void 0:o.saveCart)||!1!==V.processModule.isUpdating&&void 0!==V.processModule.isUpdating?(De("/dashboard"),k.h.dispatch((0,I.q4)(""))):ae(!0):(De("/dashboard"),k.h.dispatch((0,I.q4)("")))}}))),ye&&m.createElement("div",{className:g},m.createElement("div",Pe(),m.createElement("input",(0,v.Z)({},Ne(),{style:{display:"none",alignContent:"center",outline:"none"}})),Te?m.createElement("div",{className:b},m.createElement("img",{alt:"",src:B.P8c}),m.createElement("p",null,"Drop the files here ...")):m.createElement("div",{className:b},!Ee&&m.createElement("img",{alt:"",src:B.P8c}),m.createElement("p",null,Ee?m.createElement(N.$j,{size:80,type:"ThreeDots"}):"Click or drag your file here to begin import. (ex .csv)")))),m.createElement(P.ZP,{navigateTo:oe,isEditing:!1,paymentID:Me}),m.createElement(N.U7,{id:"pending-component-modal",blured:!0,scrollable:!1,isOpen:de,shadowedContainerStyle:{width:T.tq?"100%":"30%"}},m.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"}},m.createElement("p",{className:_},"Are you working on a transaction?"),m.createElement("div",{className:h},"You can press ".concat((null===$||void 0===$||null===(j=$.items)||void 0===j?void 0:j.length)>0?"'Update Cart'":"'Add to Cart'"," to save any transaction you are working on without submitting it. You can resume it by clicking the cart icon on the menu bar. ").concat((null===$||void 0===$||null===(H=$.items)||void 0===H?void 0:H.length)>0?"Pressing 'Empty Cart' will clear previous contents of your cart, and exit":"")),m.createElement("div",{className:y},m.createElement(N.zx,{title:"Close only",style:{width:"120px"},clicked:function(){fe({action:w._U.clearOngoingTransaction}),window.history.back(),k.h.dispatch((0,I.q4)(""))}}),m.createElement(N.zx,{title:(null===$||void 0===$||null===(J=$.items)||void 0===J?void 0:J.length)>0?"Update Cart":"Add to Cart",light:!0,style:{width:"130px"},clicked:function(){var e,n,o,l;me.components.filter((function(e){return e.selected_fields.filter((function(e){return"ID"===e.data_type_name})).forEach((function(e){return e.value=void 0}))})),me.newStepComponents.filter((function(e){return e.selected_fields.filter((function(e){return"ID"===e.data_type_name})).forEach((function(e){return e.value=void 0}))})),(null===V||void 0===V||null===(e=V.processModule)||void 0===e||null===(n=e.steps)||void 0===n?void 0:n.length)>0&&(null===V||void 0===V||null===(o=V.processModule)||void 0===o||null===(l=o.steps)||void 0===l||l.filter((function(e){var n;return null===e||void 0===e||null===(n=e.component_blueprints)||void 0===n?void 0:n.filter((function(e){return e.selected_fields.filter((function(e){return"ID"===e.data_type_name})).filter((function(e){return e.value=void 0}))}))})));var i=JSON.parse(JSON.stringify({components:me.components,newStepComponents:me.newStepComponents,items:me.items,begunModule:(0,c.Z)((0,c.Z)({},V.processModule),{},{stepIndex:1})}));k.h.dispatch((0,I.RV)(i)),fe({action:w._U.clearOngoingTransaction}),window.history.back(),k.h.dispatch((0,I.q4)(""))}}),m.createElement(N.zx,{title:"Empty Cart",light:!0,style:{width:"120px",display:(null===$||void 0===$||null===(G=$.items)||void 0===G?void 0:G.length)>0?"":"none"},clicked:function(){k.h.dispatch((0,I.RV)({})),fe({action:w._U.clearOngoingTransaction}),window.history.back(),k.h.dispatch((0,I.q4)(""))}}))))))}))},32422:function(e,n,o){"use strict";o.d(n,{rr:function(){return Ye},ZP:function(){return je}});var l=o(4942),i=o(1413),t=o(93433),d=o(29439),a=o(67861),u={processStepHost:"ModuleStep_processStepHost__fdU12",listContainer:"ModuleStep_listContainer__+T0XF",detailContainer:"ModuleStep_detailContainer__EFIwE",centeredCardMargin:"ModuleStep_centeredCardMargin__eYosE",centeredSpinner:"ModuleStep_centeredSpinner__sOFdo",emptyElementsSection:"ModuleStep_emptyElementsSection__ehjx-",stepCounter:"ModuleStep_stepCounter__mD22I",clockIcon:"ModuleStep_clockIcon__TY0er",stepTitle:"ModuleStep_stepTitle__f9SxJ",stepTitleSmaller:"ModuleStep_stepTitleSmaller__Ng9ym",stepGuidance:"ModuleStep_stepGuidance__aWqq0",stepGuidanceSmaller:"ModuleStep_stepGuidanceSmaller__IKIF+",inputContainer:"ModuleStep_inputContainer__s9qZ2",selectInput:"ModuleStep_selectInput__LcokN",multiselectWithSearch:"ModuleStep_multiselectWithSearch__qMOzq",smoMultiselectParent:"ModuleStep_smoMultiselectParent__Pweb-",selectMenuItem:"ModuleStep_selectMenuItem__i73KN",inputClassName:"ModuleStep_inputClassName__VI3pY",toggleMenuInputButton:"ModuleStep_toggleMenuInputButton__gcFHY",goToNextStep:"ModuleStep_goToNextStep__ePl+k",nextStepsContainer:"ModuleStep_nextStepsContainer__zcpA0",nextStepImageContainer:"ModuleStep_nextStepImageContainer__55MGd",nextStepWrapper:"ModuleStep_nextStepWrapper__ZtiNA",tasksTableHost:"ModuleStep_tasksTableHost__AZ6rT",headerContainer:"ModuleStep_headerContainer__4kozo",content:"ModuleStep_content__ClnRX","react-grid-layout":"ModuleStep_react-grid-layout__21OCf",layoutJSON:"ModuleStep_layoutJSON__tFPI9",columns:"ModuleStep_columns__dPw3m","react-grid-item":"ModuleStep_react-grid-item__tFcr7","react-grid-placeholder":"ModuleStep_react-grid-placeholder__canbf",resizing:"ModuleStep_resizing__xUUDG",static:"ModuleStep_static__IPrAy",text:"ModuleStep_text__MzRSh",minMax:"ModuleStep_minMax__SkZxD",add:"ModuleStep_add__aOZYV","react-grid-dragHandleExample":"ModuleStep_react-grid-dragHandleExample__iEu5W",cssTransforms:"ModuleStep_cssTransforms__aN9IT","react-draggable-dragging":"ModuleStep_react-draggable-dragging__epzS0","react-resizable-handle":"ModuleStep_react-resizable-handle__XaFka",singleButton:"ModuleStep_singleButton__+BXaC",menuRightButtons:"ModuleStep_menuRightButtons__r-OPw",menuButtons:"ModuleStep_menuButtons__TsY6r",menuAccordionButtons:"ModuleStep_menuAccordionButtons__4QNWj",detailLabel:"ModuleStep_detailLabel__hVTU1",subLabel:"ModuleStep_subLabel__6PFJJ",modalHeaderTitle:"ModuleStep_modalHeaderTitle__hDlRr",p:"ModuleStep_p__njhI7",accordionContainer:"ModuleStep_accordionContainer__oW7nH",itemsTable:"ModuleStep_itemsTable__ttZKV",sharesTable:"ModuleStep_sharesTable__Gy1CG",peoplePositionsSelect:"ModuleStep_peoplePositionsSelect__jXRrK",peoplePositionsSelectInput:"ModuleStep_peoplePositionsSelectInput__NSg8e",peoplePositionsSelectMenuOverlay:"ModuleStep_peoplePositionsSelectMenuOverlay__S0xqm",peoplePositionsSelectMenuOverlayItem:"ModuleStep_peoplePositionsSelectMenuOverlayItem__Vuo-D",deleteText:"ModuleStep_deleteText__XIVyR",deleteButton:"ModuleStep_deleteButton__PhwaV",searchContainer:"ModuleStep_searchContainer__s1Y37",searchInput:"ModuleStep_searchInput__XukKm",emailInput:"ModuleStep_emailInput__sTwU9",actionsContainer:"ModuleStep_actionsContainer__jWMeW",detailButton:"ModuleStep_detailButton__w7F3v",detailButtonTitleContainer:"ModuleStep_detailButtonTitleContainer__8ffTu",fetchingLatestP:"ModuleStep_fetchingLatestP__gnf89",modalTitle:"ModuleStep_modalTitle__T4SaB",modalSubTitle:"ModuleStep_modalSubTitle__SIFKS",dropdownSelectComponent:"ModuleStep_dropdownSelectComponent__L66Sz",dropdownSelectComponentL:"ModuleStep_dropdownSelectComponentL__wOEsz",dropdownSelectOperation:"ModuleStep_dropdownSelectOperation__DEwuW",dropdownSelectReport:"ModuleStep_dropdownSelectReport__g2+2D",cardTitle:"ModuleStep_cardTitle__h24lD",customButton:"ModuleStep_customButton__sVkp5",fieldTypeInput:"ModuleStep_fieldTypeInput__q1+bw",fieldRowContainer:"ModuleStep_fieldRowContainer__5hIbd",templateInformation:"ModuleStep_templateInformation__UjdWL",emulatedFlexGap:"ModuleStep_emulatedFlexGap__yE15Q","mobile-navbar":"ModuleStep_mobile-navbar__P0z8E","mobile-navbar-close":"ModuleStep_mobile-navbar-close__5fZ-y","hamb-icon":"ModuleStep_hamb-icon__lSxYR","open-nav":"ModuleStep_open-nav__39a-n",description:"ModuleStep_description__GUBFo",tableHostSimple:"ModuleStep_tableHostSimple__VmM5x",imageCard:"ModuleStep_imageCard__HGrB9"},r=o(41771),s=o(71302),v=o(39518),c=o(96189),p=o(6073),m=o(93389),f=o(66284),_=o(34710),h=o(88827),y=o(88374),g=o(11577),b=o(10103),x=o(88550),E=o(49119),C="StaticAccordionModule_section__E+rSn",Z="StaticAccordionModule_accordionContainer__6xeqD",w="StaticAccordionModule_active__39RQh",M="StaticAccordionModule_icon__Uc3dg",S="StaticAccordionModule_content__-a1q1",k="StaticAccordionModule_fieldTypeInput__78Qbk",I="StaticAccordionModule_fieldTypeTextarea__RF3xI",P="StaticAccordionModule_emulatedFlexGap__F5FQC",N="StaticAccordionModule_cardTitle__lJnSQ",T="StaticAccordionModule_filtersContainer__oSB5G",D="StaticAccordionModule_actionsContainer__WXbu6",A=o(79633),U=(o(20777),o(73500)),L=o(47144),O=o.n(L),R=o(27436),z=(o(68140),o(12308)),q=o(50981),B=o.n(q),F=o(43077),W=o(35307),Y=(0,a.memo)((function(e){var n,o,t=e.component,d=e.components,u=e.companyData,r=e.allComponents,s=e.companyUsersArray,p=e.selectedComponent,m=(0,v.v9)((function(e){return e.flowReducer})),f=m.allModules,_=m.allTasks,h=(null===t||void 0===t||null===(n=t.selected_fields)||void 0===n?void 0:n.length)>0&&(null===t||void 0===t||null===(o=t.selected_fields)||void 0===o?void 0:o.filter((function(e){return!0!==e.value||void 0!==(null===e||void 0===e?void 0:e.value)})).map((function(e,n){var o,v,m,h,y,g,b=null===(o=p.component_fields.find((function(n){return n.field_name===(null===e||void 0===e?void 0:e.field_name)&&n.data_type_name===(null===e||void 0===e?void 0:e.data_type_name)})))||void 0===o?void 0:o.value;if((null===e||void 0===e||null===(v=e.options)||void 0===v||null===(m=v.list)||void 0===m?void 0:m.length)>0&&(null===e||void 0===e||null===(h=e.options)||void 0===h||null===(y=h.component_id)||void 0===y?void 0:y.length)>0&&("Step List"===(null===e||void 0===e?void 0:e.data_type_name)||"Component List"===(null===e||void 0===e?void 0:e.data_type_name)))return a.createElement("div",{key:n,style:{width:"100%"}},a.createElement(z.default,{columns:e.options.list,list:(oe=e.options,d.filter((function(e){return e.id===oe.component_id})).map((function(e){var n={};return oe.list.map((function(o){n=(0,i.Z)((0,i.Z)({},n),{},(0,l.Z)({},o,e.selected_fields.find((function(e){return e.field_name===o})).value))})),n})))}));if("output"===e.data_type&&"Formula"!==e.data_type_name&&"Record"!==e.data_type_name&&"Filters"!==e.data_type_name)return null;if("Info"===e.data_type_name)return null;if("URL"===e.data_type_name)return null;if("Ratings"===e.data_type_name)return null;if("Rewards"===e.data_type_name)return null;if("Map"===e.data_type_name)return null;if("Lookup"===e.data_type_name)return null;if("Calendar"===e.data_type_name)return null;if("Summary"===e.data_type_name)return null;if("ID"===e.data_type_name)return a.createElement(A.Z,{key:n,width:U.tq?"100%":"50%",fieldLabel:e.field_name,style:{border:"0"},fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:!1,error:e.errors,customIconBgColor:"white"},a.createElement("input",{pointerEvents:"none",type:e.data_type,onChange:function(){},autoComplete:"none",value:null!==(g=b)&&void 0!==g?g:null===e||void 0===e?void 0:e.value,className:k,name:e.field_name}));var x,E,C,w,M,S,P,N,L,O,R,Y,j,H,J,G,V,Q,X,K,$,ee,ne,oe,le=null===t||void 0===t||null===(x=t.selected_fields)||void 0===x?void 0:x.find((function(e){return"Info"===e.data_type_name}));if(le){var ie,te,de=r.find((function(e){return(null===e||void 0===e?void 0:e.component_fields.filter((function(e){return e.component_blueprint_id===le.options.component_id&&e.value===b})).length)>0}));if(de)return null===le||void 0===le||null===(ie=le.options)||void 0===ie||null===(te=ie.list)||void 0===te?void 0:te.map((function(o,l){var i,t,d=null!==(i=null===(t=de.component_fields.find((function(e){return e.field_name===o})))||void 0===t?void 0:t.value)&&void 0!==i?i:"";return null!==d&&void 0!==d&&d.includes("jpg")||null!==d&&void 0!==d&&d.includes("jpeg")||null!==d&&void 0!==d&&d.includes("png")?a.createElement(A.Z,{width:U.tq?"100%":"50%",style:{border:"0"},key:n,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:!1,error:e.errors,customIconBgColor:"white"},a.createElement("div",{className:Z,onClick:function(){return window.open(b,"_blank")}},a.createElement("img",{alt:"lg",onError:function(e){return e.target.src="https://i.quotev.com/b2gtjqawaaaa.jpg"},src:d,style:{width:"100%",height:"100%",cursor:"pointer"}}))):a.createElement(A.Z,{width:U.tq?"100%":"50%",key:l,style:{border:"0"},fieldLabel:o,fieldIcon:e.icon,isProcess:!0,visible:void 0!==(null===e||void 0===e?void 0:e.value)||e.visible,mandatory:!1,error:e.errors},d.length>55?a.createElement("textarea",{className:I,type:e.data_type,value:d,onFocus:function(){},autoComplete:"none",onChange:function(e){},disabled:!0,style:{backgroundColor:"rgba(234, 231, 231, 0.91)",height:"auto",padding:"10px"}}):a.createElement("input",{pointerEvents:"none",autoComplete:"none",value:d,className:k,name:e.field_name}))}))}if("Pin"===e.data_type_name&&b){var ae,ue,re=JSON.parse(b);return a.createElement("div",{key:n,style:{display:"",width:"100%"}},a.createElement(F.Z,{mapkey:null===(ae=u.misc_info)||void 0===ae?void 0:ae.map,pins:null!==re&&void 0!==re&&re.realtime?[(0,i.Z)((0,i.Z)({},re.destination),{},{type:"destination"}),(0,i.Z)((0,i.Z)({},re.source),{},{type:"source"}),(0,i.Z)((0,i.Z)({},re.realtime),{},{type:"realtime"})]:[(0,i.Z)((0,i.Z)({},re.destination),{},{type:"destination"}),(0,i.Z)((0,i.Z)({},re.source),{},{type:"source"})]}),a.createElement("div",{key:n,className:T,style:{color:"var(--app-color-gray-dark)",height:"inherit",width:"100%",display:null!==e&&void 0!==e&&e.visible?"":"none"}},a.createElement("div",{className:D,style:{fontSize:"12px"}},a.createElement("div",{style:{width:"100px"}},"From",":"),a.createElement("div",null,re.source.address)),a.createElement("hr",{style:{borderTop:"0.5px solid #D2D2D2"}}),a.createElement("div",{className:D,style:{fontSize:"12px"}},a.createElement("div",{style:{width:"100px"}},"To",":"),a.createElement("div",null,null===re||void 0===re||null===(ue=re.destination)||void 0===ue?void 0:ue.address))))}if("Action Button"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(E=e.options)||void 0===E||null===(C=E.action)||void 0===C?void 0:C.length)>0){var se,ve,ce,pe=null===s||void 0===s?void 0:s.find((function(e){return e.id===b}));return a.createElement(A.Z,{width:U.tq?"100%":"50%",key:n,style:{border:"0"},isProcess:!0,fieldLabel:null!==(se=e.options)&&void 0!==se&&se.notes?null===(ve=e.options)||void 0===ve?void 0:ve.notes:e.field_name,visible:e.visible,mandatory:!1,error:e.errors},"user"===e.options.action&&a.createElement("input",{key:n,pointerEvents:"none",onChange:function(){},autoComplete:"none",value:pe?"".concat(null===pe||void 0===pe?void 0:pe.first_name," ").concat(null===pe||void 0===pe?void 0:pe.last_name):null!==(ce=null===e||void 0===e?void 0:e.value)&&void 0!==ce?ce:"-",className:k,name:e.field_name}))}if("Link"===e.data_type_name)return a.createElement(A.Z,{width:U.tq?"100%":"50%",style:{border:"0"},key:n,fieldIcon:e.icon,isProcess:!0,visible:void 0!==(null===e||void 0===e?void 0:e.value)||e.visible,mandatory:!1,error:e.errors,customIconBgColor:"white"},null!==(L=b)&&void 0!==L&&L.includes("jpg")||null!==(O=b)&&void 0!==O&&O.includes("jpeg")||null!==(R=b)&&void 0!==R&&R.includes("png")||null!==e&&void 0!==e&&null!==(Y=e.options)&&void 0!==Y&&Y.image?a.createElement("div",{className:Z,onClick:function(){return window.open(b,"_blank")}},a.createElement("img",{alt:"lg",onError:function(e){return e.target.src="https://i.quotev.com/b2gtjqawaaaa.jpg"},src:null!==(j=b)&&void 0!==j?j:"https://i.quotev.com/b2gtjqawaaaa.jpg",style:{width:"100%",height:"100%",cursor:"pointer"}})):null!==(H=b)&&void 0!==H&&H.includes("pdf")?a.createElement("div",{className:Z,onClick:function(){return window.open(b,"_blank")}},a.createElement("embed",{onClick:function(){return window.open(b,"_blank")},src:"".concat(b,"#toolbar=0&navpanes=0&scrollbar=0"),width:"400px",height:"500px"})):a.createElement("div",{style:{width:"inherit",textDecoration:"underline",textAlign:"center",cursor:"pointer"},onClick:function(){return window.open(b,"_blank")}},"Link"));if("Freehand"===e.data_type_name)return a.createElement(A.Z,{width:U.tq?"100%":"50%",style:{border:"0"},key:n,fieldIcon:e.icon,isProcess:!0,visible:void 0!==(null===e||void 0===e?void 0:e.value)||e.visible,mandatory:!1,error:e.errors,customIconBgColor:"white"},a.createElement("div",{className:Z,onClick:function(){return window.open(b,"_blank")}},a.createElement("img",{alt:"lg",onError:function(e){return e.target.src="https://i.quotev.com/b2gtjqawaaaa.jpg"},src:null!==(J=b)&&void 0!==J?J:"https://i.quotev.com/b2gtjqawaaaa.jpg",style:{width:"100%",height:"100%",cursor:"pointer"}})));if("Checkbox"===e.data_type_name)return a.createElement(A.Z,{width:U.tq?"100%":"50%",key:n,style:{border:"0"},fieldLabel:e.options.value,fieldIcon:e.icon,isProcess:!0,visible:void 0!==(null===e||void 0===e?void 0:e.value)||e.visible,mandatory:!1,error:e.errors,customIconBgColor:"white"},a.createElement("input",{pointerEvents:"none",onChange:function(){},autoComplete:"none",value:void 0===b?"":1==b?"Yes":"No",className:k,name:e.field_name}));if("YesNo"===e.data_type_name)return a.createElement(A.Z,{width:U.tq?"100%":"50%",key:n,style:{border:"0.5px dashed gray",padding:"10px"},fieldIcon:e.icon,isProcess:!0,visible:void 0!==(null===e||void 0===e?void 0:e.value)||e.visible,mandatory:!1,error:e.errors,customIconBgColor:"white"},a.createElement("div",{style:{display:"flex",justifyContent:"space-between",margin:"20px 0px"}},a.createElement("input",{id:"check-23",type:"checkbox",readOnly:!0,checked:!!b}),a.createElement("label",null,e.field_name)));if("Upload"===e.data_type_name)return a.createElement(A.Z,{key:n,fieldLabel:e.field_name,fieldIcon:e.icon,isProcess:!0,visible:void 0!==b||(null===(G=b)||void 0===G?void 0:G.length)>0,mandatory:!1,error:e.errors,customIconBgColor:"white",style:{border:"0",marginRight:"10px"}},a.createElement("a",{key:n,href:b,download:"Example-PDF-document",target:"_blank",rel:"noreferrer"},a.createElement(c.zx,{clear:!0,title:"Download File"})));if("Status"===e.data_type_name)return a.createElement(A.Z,{width:U.tq?"100%":"50%",key:n,style:{border:"0"},fieldLabel:e.field_name,fieldIcon:e.icon,isProcess:!0,visible:void 0!==(null===e||void 0===e?void 0:e.value)||e.visible,mandatory:!1,error:e.errors,customIconBgColor:"white"},a.createElement("input",{pointerEvents:"none",onChange:function(){},autoComplete:"none",value:null!==(V=null===p||void 0===p?void 0:p.status)&&void 0!==V?V:null!==(Q=null===e||void 0===e?void 0:e.value)&&void 0!==Q?Q:b,className:k,name:e.field_name}));if("Dropdown"===e.data_type_name&&"modules"===e.options&&(b=null===(X=f.find((function(e){return e.id===b})))||void 0===X?void 0:X.name),"People"===e.data_type_name)if(e.options.calendar){var me,fe,_e=JSON.parse(null!==(me=b)&&void 0!==me?me:null!==(fe=null===e||void 0===e?void 0:e.value)&&void 0!==fe?fe:JSON.stringify({})),he=s.find((function(e){return e.id===(null===_e||void 0===_e?void 0:_e.user)}));if(b=he?"".concat(he.first_name," ").concat(he.last_name):"",null!==_e&&void 0!==_e&&_e.task){var ye,ge=_.find((function(e){return e.id===_e.task}));return a.createElement(A.Z,{width:U.tq?"100%":"50%",key:n,style:{border:"0"},fieldLabel:e.field_name,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:!1,error:e.errors},a.createElement("div",{style:{display:"flex",flexDirection:"column",width:"inherit"}},a.createElement("input",{pointerEvents:"none",autoComplete:"none",value:b,className:k,name:e.field_name}),ge&&a.createElement("input",{pointerEvents:"none",autoComplete:"none",value:null===ge||void 0===ge?void 0:ge.name,className:k,name:e.field_name}),ge&&a.createElement("input",{pointerEvents:"none",autoComplete:"none",value:B()(new Date(null===ge||void 0===ge||null===(ye=ge.add_info)||void 0===ye?void 0:ye.start)).format("DD MMM YYYY h:mm a"),className:k,name:e.field_name}),(null===ge||void 0===ge?void 0:ge.status)&&a.createElement("input",{pointerEvents:"none",autoComplete:"none",value:null===ge||void 0===ge?void 0:ge.status,className:k,name:e.field_name})))}}else{var be=s.find((function(n){var o;return n.id===(null!==(o=b)&&void 0!==o?o:e.value)}));b=be?"".concat(be.first_name," ").concat(be.last_name):""}return"Video"===e.data_type_name&&(null===p||void 0===p?void 0:p.status)===(null!==(w=null===e||void 0===e||null===(M=e.options)||void 0===M?void 0:M.status)&&void 0!==w?w:"New")&&(null!==e&&void 0!==e&&e.value||b)&&B()(null!==(K=null===e||void 0===e?void 0:e.value)&&void 0!==K?K:b)<=(0,q.now)()&&(0,q.now)()<B()(null!==($=null===e||void 0===e?void 0:e.value)&&void 0!==$?$:b).add("minutes",+(null!==(ee=null===e||void 0===e||null===(ne=e.options)||void 0===ne?void 0:ne.expiry)&&void 0!==ee?ee:30))?a.createElement(A.Z,{width:"100%",key:n,style:{border:"1px dashed gray"},fieldLabel:e.field_name,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:!1,error:e.errors},a.createElement("div",{className:D,style:{display:"flex",justifyContent:"center",fontSize:"12px"}},a.createElement(W.Z,{payload:{name:p.id}}))):a.createElement(A.Z,{width:U.tq?"100%":"50%",key:n,style:{border:"0"},fieldLabel:e.field_name,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:!1,error:e.errors},(null===(S=b)||void 0===S?void 0:S.length)>55?a.createElement("textarea",{className:I,style:{padding:"10px"},pointerEvents:"none",onFocus:function(){},required:!0,value:null===b||void 0===b?"":"Date"===e.data_type_name||"Video"===e.data_type_name?B()(new Date(b)).format("DD MMM YYYY"):b,onChange:function(e){}}):a.createElement("input",{pointerEvents:"none",onChange:function(){},autoComplete:"none",value:null===b||void 0===b?"":"Dropdown"===e.data_type_name&&"modules"===(null===(P=e.options)||void 0===P?void 0:P.type)?null===(N=f.find((function(n){return n.id===e.value})))||void 0===N?void 0:N.name:"Date"===e.data_type_name||"Video"===e.data_type_name?"Invalid date"===B()(new Date(b)).format("DD MMM YYYY")?"":B()(new Date(b)).format("DD MMM YYYY h:mm a"):b,className:k,name:e.field_name}))})));return a.createElement("div",{className:P,style:{width:U.tq?"100%":""}},h)})),j=function(e){var n,o,l=e.component,i=e.blueprintIndex,t=(e.isMandatoryError,e.nextButtonClicked,e.companyData),u=e.components,r=e.allComponents,s=e.companyUsersArray,v=e.selectedComponent,c=(0,x.pQ)(),p=(0,d.Z)(c,1)[0],m=(0,a.useState)(w),f=(0,d.Z)(m,2),_=f[0],h=(f[1],(0,a.useState)("0px")),y=((0,d.Z)(h,2)[1],(0,a.useState)(M)),g=(0,d.Z)(y,2),b=(g[0],g[1],(0,a.useState)(!1)),E=((0,d.Z)(b,1)[0],(0,a.useState)("")),k=(0,d.Z)(E,1)[0],I=(0,a.useRef)(null),P=null===(n=p.currentStep)||void 0===n?void 0:n.component_blueprints.findIndex((function(e){return e.id===l.id})),T=l.selected_fields.filter((function(e){return"Pin"===e.data_type_name||"Map"===e.data_type_name})).length>0;return a.createElement("div",{id:"accordion",className:C,key:i},a.createElement("div",{className:O()(Z,_),"app-variant-has-error":k?"error":"",style:U.tq?T?{padding:"0",border:"0"}:{border:"0"}:{}},!(T&&U.tq)&&a.createElement("p",{className:N},null===l||void 0===l?void 0:l.name),a.createElement("div",{ref:I,style:{maxHeight:_===w?"":"0px",display:"flex"},className:S},a.createElement(Y,{components:u,allComponents:r,component:l,handleInputChange:function(){},handlePrefixChange:function(){},handleCurrencyChange:function(){},checkIfAreMandatoryErrored:!1,handleCheckbox:function(){},isInherited:!1,indexInContextArray:P,handleLocationChange:function(){},processTaskContext:p,companyData:t,companyUsersArray:s,selectedComponent:v}))),k&&(null===k||void 0===k||null===(o=k.errors)||void 0===o?void 0:o.title)&&a.createElement(R.Z,{message:k.errors.title}),k&&(null===k||void 0===k?void 0:k.message)&&a.createElement(R.Z,{message:k.message}))},H=function(e){var n,o,l=(0,a.useState)(!1),i=(0,d.Z)(l,2),t=i[0],u=i[1],r=e.component;return a.createElement("div",{className:Z,style:{border:U.tq?"0":""}},a.createElement("div",{className:P,style:{width:(U.tq,"100%")},onClick:function(){return u(!t)}},a.createElement(A.Z,{width:U.tq?"100%":"50%",fieldLabel:"Created By",style:{border:"0"},isProcess:!0,visible:!0},a.createElement("input",{pointerEvents:"none",onChange:function(){},autoComplete:"none",value:"".concat(null===(n=r.created_by)||void 0===n?void 0:n.first_name," ").concat(null===(o=r.created_by)||void 0===o?void 0:o.last_name),className:k})),a.createElement(A.Z,{width:U.tq?"100%":"50%",fieldLabel:"Created Date",style:{border:"0"},isProcess:!0,visible:!0},a.createElement("input",{pointerEvents:"none",onChange:function(){},autoComplete:"none",value:B()(new Date(r.created_date)).format("DD MMM YYYY h:mm a"),className:k,name:"Created Date"})),a.createElement(A.Z,{width:U.tq?"100%":"50%",fieldLabel:"Transaction ID",style:{border:"0"},isProcess:!0,visible:t},a.createElement("input",{pointerEvents:"none",onChange:function(){},autoComplete:"none",value:r.id,className:k,name:"CID"}))))},J=function(e){var n,o,l,i=e.component;return a.createElement("div",{className:Z,style:{border:U.tq?"0":"",display:i.payments?"":"none"}},a.createElement("div",{className:P,style:{width:(U.tq,"100%")}},a.createElement(A.Z,{width:U.tq?"100%":"50%",fieldLabel:"Payments",style:{border:"0"},isProcess:!0,visible:!0},a.createElement("input",{pointerEvents:"none",onChange:function(){},autoComplete:"none",value:"".concat(null===(n=i.payments)||void 0===n?void 0:n.stripe_product,", ID: ").concat(null===(o=i.payments)||void 0===o?void 0:o.stripe_id.substring(0,13)),className:k})),a.createElement(A.Z,{width:U.tq?"100%":"50%",fieldLabel:"Amount Paid",style:{border:"0"},isProcess:!0,visible:!0},a.createElement("input",{pointerEvents:"none",onChange:function(){},autoComplete:"none",value:"".concat(null===(l=i.payments)||void 0===l?void 0:l.stripe_price),className:k}))))},G=o(51330),V=o(48963),Q=function(e){var n,o=e.component,l=e.isMandatoryError,i=e.nextButtonClicked,t=e.setIsMandatoryError,u=(0,x.pQ)(),s=(0,d.Z)(u,1)[0],v=(0,a.useState)(""),c=(0,d.Z)(v,1)[0],p=(0,a.useRef)(null);(0,a.useEffect)((function(){m()}),[i]);var m=function(){var e;null!==o&&void 0!==o&&null!==(e=o.selected_fields)&&void 0!==e&&e.some((function(e){var n;return!0===e.mandatory&&!0===e.visible&&(!e.value||(null===e||void 0===e||null===(n=e.value)||void 0===n?void 0:n.length)<1)}))?t(!0):t(!1)},f=function(e,n){var o,l;0==n?s.newProduct={name:e,product_code:null===s||void 0===s||null===(o=s.newProduct)||void 0===o?void 0:o.product_code}:s.newProduct={product_code:e,name:null===s||void 0===s||null===(l=s.newProduct)||void 0===l?void 0:l.name}};return a.createElement("div",{id:"accordion",className:V.Z.section},a.createElement("div",{className:O()(V.Z.accordionContainer,!0),"app-variant-has-error":c?"error":""},a.createElement("div",{style:{display:"flex"}},a.createElement("p",{className:V.Z.title,style:{color:l&&i?"var(--app-color-error)":""}},"New Product Details")),a.createElement("div",{ref:p,style:{maxHeight:"",display:"flex",padding:"0px 0px 20px 0px"},className:V.Z.content},a.createElement(A.Z,{fieldIcon:r.MQR,fieldLabel:"Product Name",isProcess:!0,visible:!0,mandatory:!0,customIconBgColor:"white"},a.createElement("div",{className:V.Z.fieldRowContainer},a.createElement("input",{type:"text",onChange:function(e){f(e.target.value,0)},autoComplete:"none",className:V.Z.fieldTypeInput,name:"field.field_name"}))),a.createElement("div",{style:{width:"10px"}}),a.createElement(A.Z,{fieldIcon:r.MQR,fieldLabel:"Product Code",isProcess:!0,visible:!0,mandatory:!0,customIconBgColor:"white"},a.createElement("div",{className:V.Z.fieldRowContainer},a.createElement("input",{type:"text",onChange:function(e){f(e.target.value,1)},autoComplete:"none",className:V.Z.fieldTypeInput,name:"field.field_name"}))))),c&&(null===c||void 0===c||null===(n=c.errors)||void 0===n?void 0:n.title)&&a.createElement(R.Z,{message:c.errors.title}),c&&(null===c||void 0===c?void 0:c.message)&&a.createElement(R.Z,{message:c.message}))},X=o(65895),K=o(40694),$=o(81330),ee=o.n($),ne=o(63864),oe="GeneralCard_userCard__0SOp0",le="GeneralCard_userCardContainer__wJA5U",ie="GeneralCard_userCardBottomContainer__0WoR6",te="GeneralCard_fullName__QizQf",de="GeneralCard_position__3X6Ea",ae="GeneralCard_email__U8cda",ue=function(e){var n=e.cardClicked,o=e.title,l=e.subtitle,i=e.children,t=e.description,d=e.customClass,u=void 0===d?oe:d,r=e.customStyle;return a.createElement("div",{className:u,onClick:n,style:r},a.createElement("div",{className:le},a.createElement("div",{className:ie},a.createElement("p",{className:te},o),a.createElement("p",{className:ae},t),a.createElement("p",{className:de},l),i)))},re=o(99554),se=o(60534),ve=o(89293),ce=o(29937),pe=o(4358),me=o(1542),fe=o(49523),_e=o(25403),he=o(4292),ye=o(9204),ge=o(32086),be=o(53431),xe=o(68218),Ee=o(84634),Ce=o(35606),Ze=o(79544),we=o(98032),Me=o(62169),Se=o(13397),ke=o(88346),Ie=o(8284),Pe=o(74369),Ne=(o(67055),o(71901),o(95007)),Te=o(87424),De=o(23280),Ae=o(27658),Ue=o(52902),Le=o(12075),Oe=o(75105),Re=o(51481),ze=o(41757),qe=o(44408),Be=o(23910);o(60940),o(56120),o(37704),o(72666),o(68623),o(3863),o(95361);e=o.hmd(e);var Fe=o(456);var We=(0,a.memo)((function(e){var n,o,l,t,r,s,v,p,f=e.step,_=e.isMandatoryError,h=e.nextButtonClicked,y=e.setIsMandatoryError,b=e.begunModule,x=e.companyData,C=e.components,Z=e.isEditing,w=e.companyUsersArray,M=e.setUsers,S=e.setPositions,k=void 0===S?function(){}:S,I=e.products,P=e.selectedComponent,N=e.goToNextStep,T=e.authenticatedUser,D=e.setIsCompleted,A=e.companyPositionsArray,U=(e.cart,e.blueprints),L=e.allModules,O=e.usersArray,R=e.editMode,z=((0,E.WidthProvider)(E.Responsive),(0,a.useState)(null===(n=null===P||void 0===P?void 0:P.is_complete)||void 0===n||n)),F=(0,d.Z)(z,1)[0],W=[],Y=(null===f||void 0===f||null===(o=f.component_blueprints)||void 0===o?void 0:o.length)>0?null===f||void 0===f?void 0:f.component_blueprints.map((function(e,n){var o=e.selected_fields.find((function(e){return"Template"===e.data_type_name&&1==e.visible})),l=e.selected_fields.find((function(e){return"Video"===e.data_type_name&&1==e.visible}));return o?a.createElement("div",{key:n},a.createElement(X.Z,{templateName:o.field_name,nextButtonClicked:h,isMandatoryError:_,blueprintIndex:n,setIsMandatoryError:y,component:e,companyData:x,components:C,products:I,selectedComponent:P,component_blueprint:e,editMode:R,blueprints:U,allModules:L,authenticatedUser:T,companyUsersArray:w,companyPositionsArray:A,begunModule:b})):e.selected_fields.filter((function(e){return 1==e.visible})).length>0?a.createElement("div",{key:n,style:{margin:"30px 0 0 0"}},a.createElement(G.Z,{editMode:R,nextButtonClicked:h,isMandatoryError:_,blueprintIndex:n,setIsMandatoryError:y,blueprints:U,component:e,companyData:x,components:C,allModules:L,products:I,authenticatedUser:T,selectedComponent:P,companyUsersArray:w,companyPositionsArray:A,begunModule:b}),(null===P||void 0===P?void 0:P.id)&&(null===l||void 0===l?void 0:l.value)&&B()(null===l||void 0===l?void 0:l.value)<=(0,q.now)()&&(0,q.now)()<B()(null===l||void 0===l?void 0:l.value).add("minutes",10)&&a.createElement(G.Z,{editMode:R,nextButtonClicked:h,isMandatoryError:_,blueprintIndex:n,setIsMandatoryError:y,blueprints:U,component:(0,i.Z)((0,i.Z)({},e),{},{name:"Video Call",selected_fields:[(0,i.Z)((0,i.Z)({},l),{},{options:(0,i.Z)((0,i.Z)({},l.options),{},{start:!0})})]}),companyData:x,components:C,allModules:L,products:I,authenticatedUser:T,selectedComponent:P,companyUsersArray:w,companyPositionsArray:A,begunModule:b,shouldDisplay:!0,isEnabled:!0})):a.createElement("div",{key:n,className:u.emptyElementsSection})})):a.createElement("div",{className:u.emptyElementsSection}),j=(0,a.useState)({currentBreakpoint:"lg",compactType:"vertical",mounted:!1,layouts:{lg:f.options.layout},editing:Z}),H=(0,d.Z)(j,2),J=H[0],V=H[1];return a.createElement("div",null,a.createElement(c.j3,{permissions:[c.po.processes.create]},a.createElement("button",{onClick:function(){W=J.layouts.lg.map((function(e){return(0,i.Z)((0,i.Z)({},e),{},{static:!1})})),V((0,i.Z)((0,i.Z)({},J),{},{layouts:{lg:W},editing:!J.editing}))},hidden:!J.editing},"Edit Layout"),a.createElement("button",{onClick:function(){var e=W.map((function(e){return(0,i.Z)((0,i.Z)({},e),{},{static:!0})}));(0,m.T5)({options:(0,i.Z)((0,i.Z)({},f.options),{},{layout:e})},f.id,!0).pipe((0,g.P)()).subscribe({next:function(n){V((0,i.Z)((0,i.Z)({},J),{},{layouts:{lg:e},editing:!J.editing}))},error:function(e){V((0,i.Z)((0,i.Z)({},J),{},{layouts:{lg:f.options.layout},editing:!J.editing}))}})},hidden:!J.editing},"Save Layout")),Y,"product"===(null===(l=b.processModule.module)||void 0===l?void 0:l.options.outputTo)&&(null===f||void 0===f?void 0:f.is_end)&&a.createElement(Q,{nextButtonClicked:h,isMandatoryError:_,setIsMandatoryError:y,component:{}}),(null===(t=b.processModule.module)||void 0===t?void 0:t.options.forSpecificUsers)&&(null===f||void 0===f?void 0:f.is_end)&&function(){var e;return a.createElement(c.jL,{ungrouped:!0,title:"Select users to share this item:",columned:!0,withAckButton:!1},a.createElement(pe.Cm,{style:{width:"50%"},id:"Users",tagEmplacement:"inlined",searchable:!1,items:O,groupedBy:"department",groupname:"department",triggerType:"chevron",initialSelectedValues:null===P||void 0===P||null===(e=P.shared_users)||void 0===e?void 0:e.map((function(e){return O.find((function(n){return n.value===e.id}))})),className:u.peoplePositionsSelect,inputClassName:u.peoplePositionsSelectInput,molclassname:u.peoplePositionsSelectMenuOverlay,moliclassname:u.peoplePositionsSelectMenuOverlayItem,onChange:function(e){e.length>0?(M(null===e||void 0===e?void 0:e.map((function(e){return null===e||void 0===e?void 0:e.value}))),null!==P&&void 0!==P&&P.id&&(P.shared_users=null===e||void 0===e?void 0:e.map((function(e){return{id:null===e||void 0===e?void 0:e.value}})))):M([])}}))}(),(null===(r=b.processModule.module)||void 0===r?void 0:r.options.forSpecificUsers)&&(null===f||void 0===f?void 0:f.is_end)&&function(){var e;return a.createElement(c.jL,{ungrouped:!0,title:"Select positions to share this item:",columned:!0,withAckButton:!1},a.createElement(pe.Cm,{style:{width:"50%"},id:"Positions",tagEmplacement:"inlined",searchable:!1,items:A,groupedBy:"department",groupname:"department",triggerType:"chevron",initialSelectedValues:null===P||void 0===P||null===(e=P.shared_positions)||void 0===e?void 0:e.map((function(e){return A.find((function(n){return n.value===e.id}))})),className:u.peoplePositionsSelect,inputClassName:u.peoplePositionsSelectInput,molclassname:u.peoplePositionsSelectMenuOverlay,moliclassname:u.peoplePositionsSelectMenuOverlayItem,onChange:function(e){e.length>0?(k(null===e||void 0===e?void 0:e.map((function(e){return null===e||void 0===e?void 0:e.value}))),null!==P&&void 0!==P&&P.id&&(P.shared_positions=null===e||void 0===e?void 0:e.map((function(e){return{id:null===e||void 0===e?void 0:e.value}})))):k([])}}))}(),(null===(s=b.processModule.module)||void 0===s?void 0:s.options.forSpecificUsers)&&(null===f||void 0===f?void 0:f.is_end)&&a.createElement("div",{style:{height:"200px"}}),(null===f||void 0===f?void 0:f.is_end)&&(void 0===(null===P||void 0===P?void 0:P.is_complete)||0==(null===P||void 0===P?void 0:P.is_complete))&&a.createElement("div",{className:u.emptyElementsSection,style:{width:"260px",padding:"0px 0px 0px 20px"}},a.createElement(c.pd,{id:"draft",title:"Save as draft?",ungrouped:!0,withAckButton:!1,style:{margin:"20px 2.5% 10px 5px",width:"auto",display:""},value:!F,toggleSelected:function(e){D(!e)}})),(null===f||void 0===f||null===(v=f.pathway_steps)||void 0===v?void 0:v.length)>0&&function(){var e=f.pathway_steps.map((function(e){return{label:"".concat(e.name),value:e.id}})),n=w.map((function(e){return{label:"".concat(e.first_name," ").concat(e.last_name),value:e.id}}));return a.createElement("div",{className:u.emptyElementsSection,style:{width:"60%",padding:"20px 20px 20px 20px",height:"".concat(n.length*n.length>4?70:200,"px")}},a.createElement(ne.Z,{visible:!0,mandatory:!1,items:e,onChange:function(e){N(e)},placeholder:"Continue to this step..."}))}(),(null===f||void 0===f||null===(p=f.pathway_processes)||void 0===p?void 0:p.length)>0&&function(){var e=f.pathway_processes.map((function(e){return{label:"".concat(e.name),value:e.id}})),n=w.map((function(e){return{label:"".concat(e.first_name," ").concat(e.last_name),value:e.id}}));return a.createElement("div",{className:u.emptyElementsSection,style:{width:"60%",padding:"20px 20px 20px 20px",height:"".concat(n.length*n.length>4?70:200,"px")}},a.createElement(ne.Z,{visible:!0,mandatory:!1,items:e,onChange:function(){},placeholder:"Continue to this process..."}))}(),e.children)})),Ye=a.forwardRef((function(e,n){var o,r,s,v,c,p,m,f,_,h=e.begunModule,y=e.allModules,g=e.companyData,b=e.selectedComponent,x=e.companyUsersArray,E=e.companyPositionsArray,C=e.print,Z=e.components,w=void 0===Z?[]:Z,M=e.bypassCustom,S=void 0!==M&&M,k=(0,a.useState)([]),I=(0,d.Z)(k,2),P=I[0],N=I[1],T=function(){var e,n,o,t,d,r,s,v,c,p,m,f,_,y,x,E,C,Z,w,M,S,k,I=null===h||void 0===h||null===(e=h.processModule)||void 0===e||null===(n=e.steps)||void 0===n?void 0:n.find((function(e){return e.component_blueprints.filter((function(e){var n;return(null===(n=e.selected_fields)||void 0===n?void 0:n.filter((function(e){var n;return"item_code"===(null===(n=e.options)||void 0===n?void 0:n.mapToItem)||"Transactions Field"===e.data_type_name||"Template"===e.data_type_name})).length)>0})).length>0})),P=null!==(o=null!==(t=null!==(d=null===I||void 0===I||null===(r=I.component_blueprints)||void 0===r?void 0:r.find((function(e){var n;return(null===(n=e.selected_fields)||void 0===n?void 0:n.filter((function(e){var n;return"item_code"===(null===(n=e.options)||void 0===n?void 0:n.mapToItem)})).length)>0})))&&void 0!==d?d:null===I||void 0===I||null===(s=I.component_blueprints)||void 0===s?void 0:s.find((function(e){var n;return(null===(n=e.selected_fields)||void 0===n?void 0:n.filter((function(e){return"Transactions Field"===e.data_type_name})).length)>0})))&&void 0!==t?t:null===I||void 0===I||null===(v=I.component_blueprints)||void 0===v?void 0:v.find((function(e){var n;return(null===(n=e.selected_fields)||void 0===n?void 0:n.filter((function(e){return"Template"===e.data_type_name})).length)>0})))&&void 0!==o?o:void 0,N=P?null===(c=P.selected_fields)||void 0===c||null===(p=c.find((function(e){return"Template"===e.data_type_name})))||void 0===p?void 0:p.field_name:"",T=null===g||void 0===g||null===(m=g.misc_info)||void 0===m||null===(f=m.templatesData)||void 0===f?void 0:f.find((function(e){return e.name===N})),D=T?(null===T||void 0===T||null===(_=T.tlist)||void 0===_?void 0:_.length)>0?null===T||void 0===T?void 0:T.tlist:null===(y=T.config)||void 0===y?void 0:y.filter((function(e){return"Text"===e.value||"Number"===e.value||"Connector"===e.value})):P?P.selected_fields.filter((function(e){var n,o,l;return 1==e.visible&&1==e.mandatory&&!(""===(null===(n=e.options)||void 0===n?void 0:n.mapToItem)||void 0==(null===(o=e.options)||void 0===o?void 0:o.mapToItem)||null==(null===(l=e.options)||void 0===l?void 0:l.mapToItem))})):[];return(null===b||void 0===b||null===(x=b.component_items)||void 0===x?void 0:x.length)>0&&D&&a.createElement("div",{className:u.accordionContainer,style:{border:U.tq?"0":"",padding:U.tq?"0":"50px"},key:1},a.createElement("p",{className:u.cardTitle},"Items"),a.createElement(se.Z,{className:u.itemsTable,tableHostSimple:u.tableHostSimple,tableStyle:{minWidth:U.tq?"100px":"730px",width:U.tq?"100%":""},columns:D?D.map((function(e){return T?e.label:e.field_name})):["Product ID","Quantity","Price"],footer:D?(null===b||void 0===b||null===(E=b.component_items)||void 0===E?void 0:E.length)>0?isNaN(+(null===(C=b.component_items[0])||void 0===C?void 0:C.quantity))||isNaN(+(null===(Z=b.component_items[0])||void 0===Z?void 0:Z.value))||isNaN(+(null===(w=b.component_items[0])||void 0===w?void 0:w.alt_value))?void 0:D.map((function(e){var n,o,l;return T?"item_code"===e.key?"Totals":"".concat(Pe.Z((function(n,o){var l;return null!==(l=+n+ +o[e.key])&&void 0!==l?l:0}),0,null!==(n=b.component_items)&&void 0!==n?n:[])):"item_code"===(null===(o=e.options)||void 0===o?void 0:o.mapToItem)?"Totals":"".concat(Pe.Z((function(n,o){var l,i;return null!==(l=+n+ +o[null===(i=e.options)||void 0===i?void 0:i.mapToItem])&&void 0!==l?l:0}),0,null!==(l=b.component_items)&&void 0!==l?l:[]))})):void 0:["Totals","".concat(Pe.Z((function(e,n){var o;return null!==(o=+e+ +n.quantity)&&void 0!==o?o:0}),0,null!==(M=b.component_items)&&void 0!==M?M:[])),"".concat(Pe.Z((function(e,n){var o;return null!==(o=+e+ +n.value)&&void 0!==o?o:0}),0,null!==(S=b.component_items)&&void 0!==S?S:[]))],list:null===b||void 0===b||null===(k=b.component_items)||void 0===k?void 0:k.map((function(e){var n,o,t,d,r,s,v,c,p,m,f,_,h,y,g,b,x,E,C,Z,w,M,S,k,I,P,N,A,U;if((null===T||void 0===T||null===(n=T.tlist)||void 0===n?void 0:n.length)>0){var L={};return T.tlist.filter((function(n){L=(0,i.Z)((0,i.Z)({},L),{},(0,l.Z)({},null===n||void 0===n?void 0:n.label,e[null===n||void 0===n?void 0:n.key]))})),L}var O=e.item_code,R=e.quantity,z=null!==(o=e.alt_value)&&void 0!==o?o:0,q=null!==(t=e.value)&&void 0!==t?t:0,B=null!==(d=e.total)&&void 0!==d?d:0;return void 0!=T?(g={},(0,l.Z)(g,null!==(r=null===(s=T.config.find((function(e){return"item_code"===e.key})))||void 0===s?void 0:s.label)&&void 0!==r?r:"Item Code",a.createElement("div",{className:u.templateInformation},O)),(0,l.Z)(g,null!==(v=null===(c=T.config.find((function(e){return"value"===e.key})))||void 0===c?void 0:c.label)&&void 0!==v?v:"Price",a.createElement("div",{className:u.templateInformation},q)),(0,l.Z)(g,null!==(p=null===(m=T.config.find((function(e){return"total"===e.key})))||void 0===m?void 0:m.label)&&void 0!==p?p:"Total",a.createElement("div",{className:u.templateInformation},B)),(0,l.Z)(g,null!==(f=null===(_=T.config.find((function(e){return"quantity"===e.key})))||void 0===_?void 0:_.label)&&void 0!==f?f:"Quantity",a.createElement("div",{className:u.templateInformation},R)),(0,l.Z)(g,null!==(h=null===(y=T.config.find((function(e){return"alt_value"===e.key})))||void 0===y?void 0:y.label)&&void 0!==h?h:"Discount",a.createElement("div",{className:u.templateInformation},z)),(0,l.Z)(g,"id",e.id),g):null!==D&&void 0!==D&&D.find((function(e){var n,o,l,i,t;return"item_code"===(null===(n=e.options)||void 0===n?void 0:n.mapToItem)||"value"===(null===(o=e.options)||void 0===o?void 0:o.mapToItem)||"total"===(null===(l=e.options)||void 0===l?void 0:l.mapToItem)||"quantity"===(null===(i=e.options)||void 0===i?void 0:i.mapToItem)||"alt_value"===(null===(t=e.options)||void 0===t?void 0:t.mapToItem)}))?(A={},(0,l.Z)(A,null!==(b=null===(x=D.find((function(e){var n;return"item_code"===(null===(n=e.options)||void 0===n?void 0:n.mapToItem)})))||void 0===x?void 0:x.field_name)&&void 0!==b?b:"Product ID",a.createElement("div",{className:u.templateInformation},O)),(0,l.Z)(A,null!==(E=null===(C=D.find((function(e){var n;return"value"===(null===(n=e.options)||void 0===n?void 0:n.mapToItem)})))||void 0===C?void 0:C.field_name)&&void 0!==E?E:"Price",a.createElement("div",{className:u.templateInformation},q)),(0,l.Z)(A,null!==(Z=null===(w=D.find((function(e){var n;return"total"===(null===(n=e.options)||void 0===n?void 0:n.mapToItem)})))||void 0===w?void 0:w.field_name)&&void 0!==Z?Z:"Total",a.createElement("div",{className:u.templateInformation},B)),(0,l.Z)(A,null!==(M=null===(S=D.find((function(e){var n;return"quantity"===(null===(n=e.options)||void 0===n?void 0:n.mapToItem)})))||void 0===S?void 0:S.field_name)&&void 0!==M?M:"Quantity",a.createElement("div",{className:u.templateInformation},R)),(0,l.Z)(A,null!==(k=null===(I=D.find((function(e){var n;return"alt_value"===(null===(n=e.options)||void 0===n?void 0:n.mapToItem)})))||void 0===I?void 0:I.field_name)&&void 0!==k?k:"Discount",a.createElement("div",{className:u.templateInformation},z)),(0,l.Z)(A,null!==(P=null===(N=D.find((function(e){var n;return"alt_value"===(null===(n=e.options)||void 0===n?void 0:n.mapToItem)})))||void 0===N?void 0:N.field_name)&&void 0!==P?P:"Actual",a.createElement("div",{className:u.templateInformation},z)),(0,l.Z)(A,"id",e.id),A):(U={},(0,l.Z)(U,"Product ID",O),(0,l.Z)(U,"Quantity",R),(0,l.Z)(U,"Price",q),U)}))}))};(0,a.useEffect)((function(){var o,l,d,r=[];if(xe.Z(Ee.Z("group"))(null!==(o=null===b||void 0===b?void 0:b.component_fields)&&void 0!==o?o:[]).map((function(e){r=[].concat((0,t.Z)(r),[{id:e.component_blueprint_id,selected_fields:ke.Z(Ie.Z("group",e.group))(b.component_fields)}])})),(null===h||void 0===h||null===(l=h.processModule)||void 0===l||null===(d=l.completeSteps)||void 0===d?void 0:d.length)>0){var s,v,c,p,m,f=[a.createElement("div",{key:0,style:{display:null!==e&&void 0!==e&&e.noHeader?"none":"",height:"auto"}},C&&a.createElement("img",{alt:"lg",onError:function(e){return e.target.src="https://i.quotev.com/b2gtjqawaaaa.jpg"},src:null!==(s=null===g||void 0===g?void 0:g.logo)&&void 0!==s?s:"https://i.quotev.com/b2gtjqawaaaa.jpg"}),C&&a.createElement("p",{className:u.detailLabel,style:{fontSize:"26px"}},null===h||void 0===h||null===(v=h.processModule)||void 0===v||null===(c=v.module)||void 0===c?void 0:c.name)),T()];h.processModule.completeSteps.map((function(e){e.component_blueprints.filter((function(e){var n,o;return 0==(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.asModuleList)||void 0==(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.asModuleList)})).map((function(n,o){var l,d,u,s,v,c,p=null!==(l=null===b||void 0===b||null===(d=b.component_fields)||void 0===d?void 0:d.filter((function(e){return e.component_blueprint_id===n.id})))&&void 0!==l?l:[],m=!(null===p||void 0===p||!p.find((function(e){return!(""===e.value||void 0===e.value||null===e.value)})));(null===p||void 0===p?void 0:p.length)>0&&(null===(u=n.selected_fields)||void 0===u?void 0:u.filter((function(e){return 1==e.visible})).length)>0&&(null!==n.options?!1!==n.options.allowMultipleInputs&&void 0!==n.options.allowMultipleInputs&&null!==n.options.allowMultipleInputs||(f=[].concat((0,t.Z)(f),[a.createElement("div",{key:f.length,style:{display:m?"":"none"}},a.createElement(j,{step:e,isInherited:!1,nextButtonClicked:function(){},isMandatoryError:!1,stepId:e.id,blueprintIndex:o,setIsMandatoryError:function(){},component:(0,i.Z)((0,i.Z)({},n),{},{created_date:b.created_date,values:null!==(s=null===(v=r.find((function(e){return e.id===n.id})))||void 0===v?void 0:v.selected_fields)&&void 0!==s?s:[]}),begunModule:h,allModules:y,companyData:g,components:r,allComponents:w,companyUsersArray:x,selectedComponent:b}))])):f=[].concat((0,t.Z)(f),[a.createElement("div",{key:f.length},a.createElement(j,{step:e,isInherited:!1,nextButtonClicked:function(){},isMandatoryError:!1,stepId:e.id,blueprintIndex:o,setIsMandatoryError:function(){},component:(0,i.Z)((0,i.Z)({},n),{},{created_date:b.created_date,values:null===(c=r.find((function(e){return e.id===n.id})))||void 0===c?void 0:c.selected_fields}),begunModule:h,allModules:y,companyData:g,components:r,allComponents:w,companyUsersArray:x,selectedComponent:b}))]))}))})),null!==h&&void 0!==h&&null!==(p=h.processModule)&&void 0!==p&&null!==(m=p.completeSteps)&&void 0!==m&&m.find((function(e){var n;return(null===(n=e.component_blueprints)||void 0===n?void 0:n.filter((function(e){return e.selected_fields.filter((function(e){return"Template"===e.data_type_name})).length>0})).length)>0&&0==S}))?N(a.createElement(X.C,{ref:n,print:C,begunModule:h,allModules:y,companyData:g,components:w,selectedComponent:b,companyUsersArray:x,companyPositionsArray:E},f,a.createElement(J,{component:b}),a.createElement(H,{component:b}))):N([].concat((0,t.Z)(f),[a.createElement(J,{component:b,key:f.length+1}),a.createElement(H,{component:b,key:f.length+2})]))}}),[b,C]);var D=a.createElement("div",null,((null===b||void 0===b||null===(o=b.shared_users)||void 0===o?void 0:o.length)>0||(null===b||void 0===b||null===(r=b.shared_positions)||void 0===r?void 0:r.length)>0)&&a.createElement("div",{className:u.accordionContainer},a.createElement("p",{className:u.cardTitle},"Shares"),a.createElement("div",{style:{display:"flex"}},(null===b||void 0===b||null===(s=b.shared_positions)||void 0===s?void 0:s.length)>0&&a.createElement(z.default,{className:u.sharesTable,columns:["Position"],list:null===b||void 0===b||null===(v=b.shared_positions)||void 0===v?void 0:v.map((function(e){var n=null===E||void 0===E?void 0:E.find((function(n){return n.value===e.id}));return(0,l.Z)({},"Position",null===n||void 0===n?void 0:n.label)}))}),(null===b||void 0===b||null===(c=b.shared_users)||void 0===c?void 0:c.length)>0&&a.createElement(z.default,{className:u.sharesTable,columns:["User"],list:null===b||void 0===b||null===(p=b.shared_users)||void 0===p?void 0:p.map((function(e){var n=null===x||void 0===x?void 0:x.find((function(n){return n.id===e.id}));return(0,l.Z)({},"User","".concat(null===n||void 0===n?void 0:n.first_name," ").concat(null===n||void 0===n?void 0:n.last_name))}))}))));return a.createElement("div",{ref:n,style:{padding:C?"50px 0px 50px 0px":"",alignSelf:"center",width:"100%"}},P,(null===h||void 0===h||null===(m=h.processModule)||void 0===m||null===(f=m.module)||void 0===f||null===(_=f.options)||void 0===_?void 0:_.forSpecificUsers)&&D)})),je=(0,v.$j)((function(e){var n=e.flowReducer,o=n.begunModule,l=n.allModules,i=n.companyData,t=n.components,d=n.rememberPath,a=n.lastUpdates,u=n.companyUsersArray,r=n.products,s=n.transactions,v=n.companyProcesses,c=n.companyPositionsArray,p=n.cart,m=n.blueprints,f=n.allTasks;return{begunModule:o,allModules:l,companyData:i,components:t,rememberPath:d,lastUpdates:a,companyUsersArray:u,products:r,transactions:s,companyProcesses:v,authenticatedUser:e.authReducer.authenticatedUser,companyPositionsArray:c,cart:p,blueprints:m,allTasks:f}}),(function(e){return{onSetSelectedProcess:function(n){return e((0,y.Xu)(n))}}}))((function(n){var o,v,m,E,C,Z,w,M,S,k,I,P,N,T,D,A,L,O,F,W,Y,j,H,J,G,V,Q,X,$,oe,le,ie,te,de,ae,se,Pe,je,He,Je,Ge,Ve,Qe,Xe,Ke,$e,en,nn,on,ln,tn,dn,an,un,rn,sn,vn,cn,pn,mn,fn,_n,hn,yn,gn,bn,xn,En,Cn,Zn,wn,Mn,Sn,kn,In,Pn,Nn,Tn,Dn,An,Un,Ln,On,Rn,zn,qn,Bn,Fn,Wn,Yn,jn=n.navigateTo,Hn=n.begunModule,Jn=n.allModules,Gn=n.companyData,Vn=n.components,Qn=n.isEditing,Xn=n.lastUpdates,Kn=n.companyUsersArray,$n=n.products,eo=n.onSetSelectedProcess,no=n.children,oo=n.authenticatedUser,lo=n.companyPositionsArray,io=n.cart,to=n.blueprints,ao=n.paymentID,uo=n.companyProcesses,ro=n.allTasks,so=(0,a.useState)(1),vo=(0,d.Z)(so,1)[0],co=(0,a.useState)(!1),po=(0,d.Z)(co,2),mo=po[0],fo=po[1],_o=(0,a.useState)(!1),ho=(0,d.Z)(_o,2),yo=ho[0],go=ho[1],bo=(0,a.useState)(""),xo=(0,d.Z)(bo,2),Eo=xo[0],Co=xo[1],Zo=(0,a.useState)(!1),wo=(0,d.Z)(Zo,2),Mo=wo[0],So=wo[1],ko=(0,x.pQ)(),Io=(0,d.Z)(ko,2),Po=Io[0],No=Io[1],To=(0,a.useState)(!1),Do=(0,d.Z)(To,2),Ao=Do[0],Uo=Do[1],Lo=(0,a.useState)(1==(null===Hn||void 0===Hn||null===(o=Hn.processModule)||void 0===o?void 0:o.isUpdating)),Oo=(0,d.Z)(Lo,2),Ro=Oo[0],zo=Oo[1],qo=(0,a.useState)(null!==(v=null===Hn||void 0===Hn||null===(m=Hn.processModule)||void 0===m?void 0:m.selectedComponent)&&void 0!==v?v:{}),Bo=(0,d.Z)(qo,2),Fo=Bo[0],Wo=Bo[1],Yo=(0,a.useState)(null===(E=null===Fo||void 0===Fo?void 0:Fo.is_complete)||void 0===E||E),jo=(0,d.Z)(Yo,2),Ho=jo[0],Jo=jo[1],Go=(0,a.useState)([]),Vo=(0,d.Z)(Go,2),Qo=Vo[0],Xo=Vo[1],Ko=(0,a.useState)([]),$o=(0,d.Z)(Ko,2),el=$o[0],nl=$o[1],ol=(0,a.useState)(!1),ll=(0,d.Z)(ol,2),il=ll[0],tl=ll[1],dl=(0,a.useState)(!1),al=(0,d.Z)(dl,2),ul=al[0],rl=al[1],sl=(0,a.useState)(!1),vl=(0,d.Z)(sl,2),cl=vl[0],pl=vl[1],ml=(0,a.useState)(!1),fl=(0,d.Z)(ml,2),_l=fl[0],hl=fl[1],yl=(0,a.useState)(!1),gl=(0,d.Z)(yl,2),bl=gl[0],xl=gl[1],El=(0,a.useState)(!1),Cl=(0,d.Z)(El,2),Zl=Cl[0],wl=Cl[1],Ml=(0,a.useState)(!1),Sl=(0,d.Z)(Ml,2),kl=Sl[0],Il=Sl[1],Pl=(0,a.useState)(!1),Nl=(0,d.Z)(Pl,2),Tl=Nl[0],Dl=Nl[1],Al=(0,a.useState)(!1),Ul=(0,d.Z)(Al,2),Ll=Ul[0],Ol=Ul[1],Rl=(0,a.useState)([]),zl=(0,d.Z)(Rl,2),ql=zl[0],Bl=zl[1],Fl=(0,a.useState)([]),Wl=(0,d.Z)(Fl,2),Yl=Wl[0],jl=Wl[1],Hl=(0,a.useState)([]),Jl=(0,d.Z)(Hl,2),Gl=Jl[0],Vl=Jl[1],Ql=(0,a.useState)({list:[],operator:"AND"}),Xl=(0,d.Z)(Ql,2),Kl=Xl[0],$l=Xl[1],ei=(0,a.useState)([]),ni=(0,d.Z)(ei,2),oi=ni[0],li=ni[1],ii=(0,a.useState)([]),ti=(0,d.Z)(ii,2),di=ti[0],ai=ti[1],ui=(0,a.useState)(!1),ri=(0,d.Z)(ui,2),si=ri[0],vi=ri[1],ci=(0,a.useState)(!1),pi=(0,d.Z)(ci,2),mi=pi[0],fi=pi[1],_i=(0,a.useState)(!1),hi=(0,d.Z)(_i,2),yi=hi[0],gi=hi[1],bi=(0,a.useState)(!1),xi=(0,d.Z)(bi,2),Ei=xi[0],Ci=xi[1],Zi=(0,a.useState)("false"!==localStorage.getItem("showAds")&&(null!==(C=B()(+localStorage.getItem("showAdsDate")).format("DD MMM YYYY")!==B()((0,q.now)()).format("DD MMM YYYY"))&&void 0!==C&&C)),wi=(0,d.Z)(Zi,2),Mi=wi[0],Si=wi[1],ki=(0,a.useState)(1),Ii=(0,d.Z)(ki,2),Pi=(Ii[0],Ii[1],(0,De.s0)()),Ni=(null===Hn||void 0===Hn||null===(Z=Hn.processModule)||void 0===Z||null===(w=Z.steps)||void 0===w?void 0:w.length)>0?null===Hn||void 0===Hn||null===(M=Hn.processModule)||void 0===M?void 0:M.steps[Hn.processModule.stepIndex]:{},Ti=(null===Hn||void 0===Hn||null===(S=Hn.processModule)||void 0===S||null===(k=S.steps)||void 0===k?void 0:k.length)>0?null===(I=Hn.processModule.steps[Hn.processModule.stepIndex])||void 0===I?void 0:I.pathway_steps:[],Di=(null===Hn||void 0===Hn||null===(P=Hn.processModule)||void 0===P||null===(N=P.steps)||void 0===N?void 0:N.length)>0?null===(T=Hn.processModule.steps[Hn.processModule.stepIndex])||void 0===T?void 0:T.pathway_processes:[],Ai=(0,a.useRef)();(0,a.useEffect)((function(){var e=Kn.filter((function(e){return 0==e.departments.length})).map((function(e){return{label:"".concat(e.first_name," ").concat(e.last_name),value:e.id,department:"General",user:e}}));Kn.filter((function(e){return e.departments.length>0})).filter((function(n){n.departments.filter((function(o){e=[].concat((0,t.Z)(e),[{label:"".concat(n.first_name," ").concat(n.last_name),value:n.id,department:null===o||void 0===o?void 0:o.name,user:n}])}))})),li(e)}),[Kn]),(0,a.useEffect)((function(){var e,n;if((null===Hn||void 0===Hn||null===(e=Hn.processModule)||void 0===e||null===(n=e.steps)||void 0===n?void 0:n.length)>0&&!Ll){var o,l;$l({list:[],operator:"AND"}),void 0!==(null===jn||void 0===jn?void 0:jn.key)?Bl(Wi(null===Hn||void 0===Hn||null===(o=Hn.processModule)||void 0===o||null===(l=o.module)||void 0===l?void 0:l.id,Vn,jn.value,jn.key)):Bl(Vn.filter((function(e){var n,o;return e.module_id===(null===Hn||void 0===Hn||null===(n=Hn.processModule)||void 0===n||null===(o=n.module)||void 0===o?void 0:o.id)})));var i={id:""},t=[],d=[];ye.Z((function(e){e.component_fields.map((function(n){var o,l;e.procedure_id!==(null===Fe||void 0===Fe?void 0:Fe.id)&&(null!==(o=i=uo.find((function(n){return n.id===e.procedure_id})))&&void 0!==o&&o.steps&&(t=fe.Z(_e.Z("component_blueprints"),he.Z)(null===(l=i)||void 0===l?void 0:l.steps),d=fe.Z(_e.Z("selected_fields"),he.Z)(t)));var a,u=d.find((function(e){return e.procedure_step_blueprint_field_id===n.procedure_step_blueprint_field_id}));u&&(n.data_type_name=u.data_type_name,n.data_type=u.data_type,n.field_name=u.field_name,n.options=u.options,n.component_blueprint_id=null===(a=t.find((function(e){return e.selected_fields.filter((function(e){return e.procedure_step_blueprint_field_id===n.procedure_step_blueprint_field_id})).length>0})))||void 0===a?void 0:a.id)}))}),Vn.filter((function(e){var n;return(null!==(n=null===e||void 0===e?void 0:e.component_fields)&&void 0!==n?n:[]).filter((function(e){return void 0===(null===e||void 0===e?void 0:e.field_name)})).length>0})))}}),[null===Hn||void 0===Hn||null===(D=Hn.processModule)||void 0===D?void 0:D.steps,Vn]),(0,a.useEffect)((function(){if(ao){var e,n=null===(e=Fo.component_fields)||void 0===e?void 0:e.find((function(e){return"Payments"===e.data_type_name}));if(n){var o,l,i,t,d,a=null===(o=Fo.component_fields)||void 0===o?void 0:o.find((function(e){return e.field_name===n.options.paymentField}));if(a)rl(!0),(0,Ae.e_)({user_id:oo.id,id:Fo.id,total:null!==(l=+(null===a||void 0===a?void 0:a.value))&&void 0!==l?l:0,product:"CR-".concat(null!==(i=null===Fo||void 0===Fo?void 0:Fo.title)&&void 0!==i?i:null===Hn||void 0===Hn||null===(t=Hn.processModule)||void 0===t||null===(d=t.module)||void 0===d?void 0:d.name),notes:"E-Payment",quantity:1}).pipe((0,g.P)()).subscribe({next:function(){var e,n,o,l;rl(!1),Dl((null===Hn||void 0===Hn||null===(e=Hn.processModule)||void 0===e||null===(n=e.module)||void 0===n||null===(o=n.options)||void 0===o||null===(l=o.message)||void 0===l?void 0:l.length)>0)}})}}}),[ao]),(0,a.useEffect)((function(){var e,n,o,l;(null===Hn||void 0===Hn||null===(e=Hn.processModule)||void 0===e||null===(n=e.steps)||void 0===n?void 0:n.length)>0&&!Ll&&(void 0!==jn.key||""!==jn.key)&&Bl(Wi(null===Hn||void 0===Hn||null===(o=Hn.processModule)||void 0===o||null===(l=o.module)||void 0===l?void 0:l.id,Vn,jn.value))}),[jn]),(0,a.useEffect)((function(){localStorage.getItem("transaction")&&!Ao&&localStorage.getItem("transaction")===Fo.id&&gi(!0)}),[Fo,Ao]);var Ui=(0,a.useCallback)((function(){var e=!1;return Ni.component_blueprints.filter((function(e){var n,o;return null===e.options||(!1===(null===(n=e.options)||void 0===n?void 0:n.allowMultipleInputs)||void 0===(null===(o=e.options)||void 0===o?void 0:o.allowMultipleInputs))})).some((function(e){var n;return!0===(null===(n=e.selected_fields)||void 0===n?void 0:n.filter((function(e){return"Profile"!==e.data_type_name&&"ID"!==e.data_type_name&&"Info"!==e.data_type_name&&"Notes"!==e.data_type_name&&"URL"!==e.data_type_name&&"Emails"!==e.data_type_name&&"Template"!==e.data_type_name&&"Global"!==e.data_type_name&&"Chart"!==e.data_type_name})).some((function(e){var n;return!0===e.mandatory&&!0===e.visible&&(!e.value||(null===e||void 0===e||null===(n=e.value)||void 0===n?void 0:n.length)<1)})))}))&&(e=!0),!0===e?(go(!0),!0):(Co(""),go(!1),!1)}),[Ni]),Li=function(e){So(!0),Ui()&&!1===Ro?Fi():Ri(e)},Oi=function(e){Po.components=[],Po.items=[],Po.currentStep={},Po.newStepComponents=[],Hn.processModule.steps.filter((function(e){return e.component_blueprints.filter((function(e){return e.selected_fields.filter((function(e){return e.value=void 0}))}))})),Hn.processModule.isUpdating=!1,zo(!1),Uo(!1),So(!0),Ri(e),Gn.start=!1,(0,_.aK)().pipe((0,g.P)()).subscribe({next:function(){}})},Ri=function(e){So(!1),go(!1),fo(!1);var n={};if(void 0===e){if(void 0===(n=Hn.processModule.steps[Hn.processModule.stepIndex+1]))return void h.h.dispatch((0,y.Xc)({show:!0,message:"Misconfigured next step, please contact your administrator",color:"red",bottom:!0}));No({action:x._U.setCurrentStep,value:n}),h.h.dispatch((0,y.q4)((0,i.Z)((0,i.Z)({},Hn.processModule),{},{stepIndex:Hn.processModule.stepIndex+1})))}else{if(void 0==(n=Hn.processModule.steps.find((function(n){return n.id===e}))))n=Hn.processModule.steps[Hn.processModule.stepIndex+1],h.h.dispatch((0,y.q4)((0,i.Z)((0,i.Z)({},Hn.processModule),{},{stepIndex:Hn.processModule.stepIndex+1})));else{var o,l,d=Hn.processModule.steps[(null===(o=n)||void 0===o?void 0:o.rank)-1];if(void 0===d)return void h.h.dispatch((0,y.Xc)({show:!0,message:"Misconfigured next step, please contact your administrator",color:"red",bottom:!0}));h.h.dispatch((0,y.q4)((0,i.Z)((0,i.Z)({},Hn.processModule),{},{stepIndex:(null===(l=n)||void 0===l?void 0:l.rank)-1})))}No({action:x._U.setCurrentStep,value:n})}var a=Po.newStepComponents.filter((function(e){return null===e.options||(void 0===e.allowMultipleInputs||!1===e.options.allowMultipleInputs)}));No({action:x._U.setComponents,value:[].concat((0,t.Z)(Po.components.filter((function(e){return a.every((function(n){return n.id!==e.id}))}))),(0,t.Z)(ge.Z((function(e){return e.selected_fields.filter((function(e){return""===e.value})).length>0}),a)))}),No({action:x._U.setModuleNewStepComponents,value:n.component_blueprints.filter((function(e){return e.selected_fields.filter((function(e){return"Status"===e.data_type_name||"ID"===e.data_type_name||"Value"===e.data_type_name})).length>0}))})},zi=function(){No({action:x._U.setModuleItems,value:[]}),No({action:x._U.setComponents,value:[]}),No({action:x._U.addModuleComponents,value:[]}),No({action:x._U.setModuleNewStepComponents,value:[]}),Oi(Hn.processModule.steps[0].id)},qi=function(){var e,n,o,l,d,a,u,r,s,v,c,m,_,b,x,E;if(Ui())return Co("Fill up all the required fields"),window.scrollTo({top:0,behavior:"smooth"}),void fo(!1);var C,Z,w=Po.newStepComponents.filter((function(e){var n,o;return null===e.options||(!1===(null===(n=e.options)||void 0===n?void 0:n.allowMultipleInputs)||void 0===(null===(o=e.options)||void 0===o?void 0:o.allowMultipleInputs))})),M=[].concat((0,t.Z)(Po.components.filter((function(e){return w.every((function(n){return n.id!==e.id}))}))),(0,t.Z)(ge.Z((function(e){return e.selected_fields.filter((function(e){return""===e.value})).length>0}),w))),S=[],k=[],I="",P="",N=!1,T=Ro?null===Fo||void 0===Fo?void 0:Fo.status:"None",D=null===Fo||void 0===Fo?void 0:Fo.status,A={},U=Ro?(null!==(e=be.Z(Math.max,_e.Z("group",xe.Z(Ee.Z("group"))(null!==(n=null===Fo||void 0===Fo?void 0:Fo.component_fields)&&void 0!==n?n:[]))))&&void 0!==e?e:-1)+1:0;M.map((function(e,n){var o,l,d=n,a=null===(o=e.selected_fields.filter((function(e){return"Record"===e.data_type_name||"Filters"===e.data_type_name})))||void 0===o?void 0:o.find((function(e){return+(null===e||void 0===e?void 0:e.group)>=0}));a&&Ro?d=a.group:Ro&&(d=U,U++),e.selected_fields.filter((function(e){return"Record"===e.data_type_name||"Filters"===e.data_type_name})).map((function(e,n){var o;if(null!==e.value&&void 0!==e.value&&1!=(null===(o=e.options)||void 0===o?void 0:o.skip)){var l,a;k=[].concat((0,t.Z)(k),[(0,i.Z)((0,i.Z)({},e),{},{index:n,group:d})]),I=e.value,A[e.field_name]=e.value;var u=null===(l=Vn.find((function(n){return n.component_fields.filter((function(n){var o;return n.component_blueprint_id===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.component_id)&&(null===n||void 0===n?void 0:n.value)===I})).length>0})))||void 0===l||null===(a=l.component_fields.find((function(e){return"Email Recipient"===e.data_type_name})))||void 0===a?void 0:a.value;u&&(C=u)}}));var u=null===(l=e.selected_fields.filter((function(e){return!("Record"===e.data_type_name||"Filters"===e.data_type_name)})))||void 0===l?void 0:l.find((function(e){return+(null===e||void 0===e?void 0:e.group)>=0}));u&&Ro?d=u.group:Ro&&(d=U,U++),e.selected_fields.filter((function(e){return!("Record"===e.data_type_name||"Filters"===e.data_type_name)})).map((function(e,n){var o,l,a;if(null!==e.value&&void 0!==e.value&&1!=(null===(o=e.options)||void 0===o?void 0:o.skip)){if(A[e.field_name]=e.value,"ID"===(null===e||void 0===e?void 0:e.data_type_name))null!==Hn&&void 0!==Hn&&null!==(l=Hn.processModule)&&void 0!==l&&l.isUpdating?k=[].concat((0,t.Z)(k),[(0,i.Z)((0,i.Z)({},e),{},{index:n,group:d})]):(k=[].concat((0,t.Z)(k),[(0,i.Z)((0,i.Z)({},e),{},{index:n,group:d,value:"".concat(null===e||void 0===e?void 0:e.options.id).concat(null===(null===Gn||void 0===Gn?void 0:Gn.misc_info)?1:null!==(a=null===Gn||void 0===Gn?void 0:Gn.misc_info[null===e||void 0===e?void 0:e.field_name])&&void 0!==a?a:1)})]),S=[].concat((0,t.Z)(S),["".concat(e.field_name)]));else if("Value"===(null===e||void 0===e?void 0:e.data_type_name)){var u;k=[].concat((0,t.Z)(k),[(0,i.Z)((0,i.Z)({},e),{},{index:n,value:null===e||void 0===e||null===(u=e.options)||void 0===u?void 0:u.value,group:d})])}else if("Email Recipient"===(null===e||void 0===e?void 0:e.data_type_name))k=[].concat((0,t.Z)(k),[(0,i.Z)((0,i.Z)({},e),{},{index:n,value:e.value.replace(/ /g,""),group:d})]);else if("Product Lookup"===e.data_type_name)k=(0,t.Z)(k);else if("Status"===e.data_type_name&&"Draft"===e.value&&1==Ho)N=!0,k=[].concat((0,t.Z)(k),[(0,i.Z)((0,i.Z)({},e),{},{index:n,value:"New",group:d})]),T="New";else if("Status"===e.data_type_name)k=[].concat((0,t.Z)(k),[(0,i.Z)((0,i.Z)({},e),{},{index:n,value:null===e||void 0===e?void 0:e.value,group:d})]),T=null===e||void 0===e?void 0:e.value;else if("Formula"===e.data_type_name){var r,s=null!==Hn&&void 0!==Hn&&null!==(r=Hn.processModule)&&void 0!==r&&r.isUpdating?(0,ve.LV)(null===e||void 0===e?void 0:e.options,Fo.component_fields.filter((function(n){var o;return null===(o=e.options)||void 0===o?void 0:o.list.includes(n.field_name)})),M,Po.items):e.value;k=[].concat((0,t.Z)(k),[(0,i.Z)((0,i.Z)({},e),{},{index:n,value:s.toString(),group:d})])}else if("output"!==e.data_type){var v,c,p,m;if("People"===e.data_type_name){var f,_,h,y;if(!0===(null===(f=e.options)||void 0===f?void 0:f.email)){var g,b,x=null===(g=oi.find((function(n){return n.label===(null===e||void 0===e?void 0:e.value)})))||void 0===g||null===(b=g.user)||void 0===b?void 0:b.email;P=x?P.concat(P.length>0?",".concat(x):x):P,e.email=void 0}if(!0===(null===(_=e.options)||void 0===_?void 0:_.assign))Z=null===(h=oi.find((function(n){return n.label===(null===e||void 0===e?void 0:e.value)})))||void 0===h||null===(y=h.user)||void 0===y?void 0:y.id,Ro&&(Fo.assigned_to={id:Z})}"email"===(null===e||void 0===e||null===(v=e.options)||void 0===v?void 0:v.actionToPerform2)&&null!==e&&void 0!==e&&null!==(c=e.options)&&void 0!==c&&null!==(p=c.valueToMatch2)&&void 0!==p&&null!==(m=p.split(","))&&void 0!==m&&m.includes(null===e||void 0===e?void 0:e.value)&&C&&(N=!0,P=P.concat(P.length>0?",".concat(C):C)),k=[].concat((0,t.Z)(k),[(0,i.Z)((0,i.Z)({},e),{},{index:n,group:d})])}}else if("Status"===(null===e||void 0===e?void 0:e.data_type_name))1==Ho?(k=[].concat((0,t.Z)(k),[(0,i.Z)((0,i.Z)({},e),{},{index:n,value:"New",group:d})]),T="New"):(k=[].concat((0,t.Z)(k),[(0,i.Z)((0,i.Z)({},e),{},{index:n,value:"Draft",group:d})]),T="Draft"),A[e.field_name]=e.value;else if("Action Button"===(null===e||void 0===e?void 0:e.data_type_name)){var E,w,I;k=(0,t.Z)(k),A[e.field_name]=e.value,"status"===(null===e||void 0===e||null===(E=e.options)||void 0===E?void 0:E.action)?T=e.value:"user"!==(null===(w=e.options)||void 0===w?void 0:w.action)&&"creator"!==(null===(I=e.options)||void 0===I?void 0:I.action)||(Fo.assigned_to=null===e||void 0===e?void 0:e.value)}}))}));var L,O,R,z,q,B,F,W,Y,j,H="";(null===(o=Hn.processModule)||void 0===o||null===(l=o.module)||void 0===l||null===(d=l.options)||void 0===d||null===(a=d.title)||void 0===a?void 0:a.length)>0?(null===(L=Hn.processModule)||void 0===L||null===(O=L.module)||void 0===O||null===(R=O.options)||void 0===R||null===(z=R.title)||void 0===z||z.map((function(e){if("Info"!==e){var n,o,l,i,t;H=""===H?"".concat(null!==(n=null===(o=k.find((function(n){return n.field_name===e})))||void 0===o?void 0:o.value)&&void 0!==n?n:""):"".concat(null!==(l=H)&&void 0!==l?l:"","  ").concat(null!==(i=null===(t=k.find((function(n){return n.field_name===e})))||void 0===t?void 0:t.value)&&void 0!==i?i:"")}else{var d=Hn.processModule.steps.find((function(e){var n;return(null===(n=e.component_blueprints.filter((function(e){var n;return(null===(n=e.selected_fields.filter((function(e){return"Info"===e.data_type_name})))||void 0===n?void 0:n.length)>0})))||void 0===n?void 0:n.length)>0}));if(void 0!==d){var a,u,r,s,v,c,p,m,f,_=null===(a=d.component_blueprints)||void 0===a||null===(u=a.find((function(e){var n;return(null===(n=e.selected_fields.filter((function(e){return"Info"===e.data_type_name})))||void 0===n?void 0:n.length)>0})).selected_fields)||void 0===u?void 0:u.find((function(e){return"Info"===e.data_type_name})),h=Vn.find((function(e){var n;return(null===(n=e.component_fields.filter((function(e){var n;return e.component_blueprint_id===_.options.component_id&&(e.value===A[_.field_name]||e.value===A[null===(n=_.options)||void 0===n?void 0:n.key])})))||void 0===n?void 0:n.length)>0}));if(h)if((null===_||void 0===_||null===(r=_.options)||void 0===r||null===(s=r.list)||void 0===s?void 0:s.length)>0)H=""===H?"".concat(null!==(v=null===(c=h.component_fields.find((function(e){var n;return e.field_name===(null===_||void 0===_||null===(n=_.options)||void 0===n?void 0:n.list[0])})))||void 0===c?void 0:c.value)&&void 0!==v?v:""):"".concat(null!==(p=H)&&void 0!==p?p:"","  ").concat(null!==(m=null===(f=h.component_fields.find((function(e){var n;return e.field_name===(null===_||void 0===_||null===(n=_.options)||void 0===n?void 0:n.list[0])})))||void 0===f?void 0:f.value)&&void 0!==m?m:"")}}})),null!==(q=Hn.processModule)&&void 0!==q&&null!==(B=q.module)&&void 0!==B&&null!==(F=B.options)&&void 0!==F&&F.title.find((function(e){return"UUID"===e}))&&(H="".concat(Ro?Fo.id:(0,ve.mR)()))):H=Ro?Fo.id:(0,ve.mR)();var J,G,V,Q,X,K,$,ee,ne,oe,le,ie,te,de,ae,ue,re,se,ce,pe={};if(!0===(null===(u=Hn.processModule)||void 0===u||null===(r=u.module)||void 0===r||null===(s=r.options)||void 0===s?void 0:s.emailOutputs)){var me,fe,he,ye,Ce=Hn.processModule.steps.find((function(e){var n;return(null===(n=e.component_blueprints.filter((function(e){var n;return(null===(n=e.selected_fields.filter((function(e){return"Info"===e.data_type_name&&1==e.options.email})))||void 0===n?void 0:n.length)>0})))||void 0===n?void 0:n.length)>0}));if(void 0!==Ce){var Ze,we,Me=null===(Ze=Ce.component_blueprints)||void 0===Ze||null===(we=Ze.find((function(e){var n;return(null===(n=e.selected_fields.filter((function(e){var n;return"Info"===e.data_type_name&&1==(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.email)})))||void 0===n?void 0:n.length)>0})).selected_fields)||void 0===we?void 0:we.find((function(e){var n;return"Info"===e.data_type_name&&!0===(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.email)})),Se=Vn.find((function(e){var n;return(null===(n=e.component_fields.filter((function(e){return e.component_blueprint_id===Me.options.component_id&&e.value===I})))||void 0===n?void 0:n.length)>0}));Se&&(Y=Me.id,W=Se.id)}if(void 0!==(Ce=Hn.processModule.steps.find((function(e){var n;return!0===e.is_end&&(null===(n=e.component_blueprints.filter((function(e){var n;return(null===(n=e.selected_fields.filter((function(e){return"Emails"===e.data_type_name})))||void 0===n?void 0:n.length)>0})))||void 0===n?void 0:n.length)>0}))))(null===(he=Ce.component_blueprints)||void 0===he?void 0:he.find((function(e){var n;return(null===(n=e.selected_fields.filter((function(e){return"Emails"===e.data_type_name})))||void 0===n?void 0:n.length)>0}))).selected_fields.filter((function(e){return"Emails"===e.data_type_name})).filter((function(e){var n;k.find((function(n){return n.value===e.options.valueToMatch&&n.field_name===e.options.fieldToMatch}))&&(C&&(j=e,N=!0,!0===(null===(n=e.options)||void 0===n?void 0:n.copyEmailRecip)&&(P=P.concat(P.length>0?",".concat(C):C))))}));if(P=null!==(me=P.split(","))&&void 0!==me?me:[],(di.length>0||P.length>0)&&(P=Ro?!0===N?[].concat((0,t.Z)(di),(0,t.Z)(P)):(0,t.Z)(di):[].concat((0,t.Z)(di),(0,t.Z)(P))),P.length>0&&(pe={emailTo:P}),Y&&W&&(pe=(0,i.Z)((0,i.Z)({},pe),{},{info:Y,target:W})),(null===(fe=j)||void 0===fe?void 0:fe.id.length)>0)pe=(0,i.Z)((0,i.Z)({},pe),{},{template:null===(ye=j)||void 0===ye?void 0:ye.id})}if(!0===(null===(v=Hn.processModule)||void 0===v||null===(c=v.module)||void 0===c||null===(m=c.options)||void 0===m?void 0:m.rewards)&&D!==T){var ke,Ie,Pe,Ne,Te,De,Ue=Hn.processModule.steps.find((function(e){var n;return(null===(n=e.component_blueprints.filter((function(e){var n;return(null===(n=e.selected_fields.filter((function(e){return"Rewards"===e.data_type_name})))||void 0===n?void 0:n.length)>0})))||void 0===n?void 0:n.length)>0}));if(void 0!==Ue)if((J=null===(ke=Ue.component_blueprints)||void 0===ke||null===(Ie=ke.find((function(e){var n;return(null===(n=e.selected_fields.filter((function(e){return"Rewards"===e.data_type_name})))||void 0===n?void 0:n.length)>0})).selected_fields)||void 0===Ie?void 0:Ie.find((function(e){return"Rewards"===e.data_type_name}))).options.status===T)oo.options.rewards=+(null!==(Pe=null===oo||void 0===oo||null===(Ne=oo.options)||void 0===Ne?void 0:Ne.rewards)&&void 0!==Pe?Pe:0)+ +(null===(Te=J)||void 0===Te||null===(De=Te.options)||void 0===De?void 0:De.points)}"product"!==(null===(_=Hn.processModule)||void 0===_||null===(b=_.module)||void 0===b||null===(x=b.options)||void 0===x?void 0:x.outputTo)||Ro||null!==Po&&void 0!==Po&&null!==(G=Po.newProduct)&&void 0!==G&&G.name&&null!==Po&&void 0!==Po&&null!==(V=Po.newProduct)&&void 0!==V&&V.product_code&&(0,f.ry)(null===Po||void 0===Po||null===(Q=Po.newProduct)||void 0===Q?void 0:Q.name,null===Po||void 0===Po||null===(X=Po.newProduct)||void 0===X?void 0:X.product_code).subscribe({error:function(e){},next:function(){rl(!0),h.h.dispatch((0,y.C2)((0,i.Z)((0,i.Z)({},Xn),{},{products:0})))},complete:function(){}});(null===(E=k)||void 0===E?void 0:E.length)>0?(rl(!0),Ro?(Fo.options=pe,Fo.status=T,null!==Po&&void 0!==Po&&Po.assigned_to&&(Fo.assigned_to={id:null===Po||void 0===Po?void 0:Po.assigned_to}),(0,p.KL)((0,i.Z)((0,i.Z)({},Fo),{},{selected_fields:(0,t.Z)(k),component_items:Po.items}),Fo.id,null===Fo||void 0===Fo||null===(K=Fo.shared_users)||void 0===K?void 0:K.map((function(e){return null===e||void 0===e?void 0:e.id})),H,Ho,(null===($=Hn.processModule)||void 0===$||null===(ee=$.module)||void 0===ee||null===(ne=ee.options)||void 0===ne||null===(oe=ne.shares)||void 0===oe?void 0:oe.length)>0?null===(le=Hn.processModule)||void 0===le||null===(ie=le.module)||void 0===ie||null===(te=ie.options)||void 0===te?void 0:te.shares:null===Fo||void 0===Fo||null===(de=Fo.shared_positions)||void 0===de?void 0:de.map((function(e){return null===e||void 0===e?void 0:e.id}))).subscribe({error:function(e){h.h.dispatch((0,y.Xc)({show:!0,message:"Errors found",color:"red"}))},next:function(e){var n,o,l,t,d,a;if(null!==(n=Hn.processModule)&&void 0!==n&&null!==(o=n.module)&&void 0!==o&&null!==(l=o.options)&&void 0!==l&&l.single)return localStorage.setItem(null===(d=Hn.processModule)||void 0===d?void 0:d.module.id,JSON.stringify(null===e||void 0===e?void 0:e.data)),void Ri(null===(a=Hn.processModule.steps[0])||void 0===a?void 0:a.id);var u=k.find((function(e){var n;return"People"===e.data_type_name&&!0===(null===(n=e.options)||void 0===n?void 0:n.calendar)}));if(u){var r,s,v,c=JSON.parse(null!==(r=null===u||void 0===u?void 0:u.value)&&void 0!==r?r:{task:0}),p=ro.find((function(e){return e.id===(null===c||void 0===c?void 0:c.task)}));if(p)(0,Re.xJ)((0,i.Z)((0,i.Z)({},p),{},{assignee_id:null===e||void 0===e||null===(s=e.data)||void 0===s||null===(v=s.created_by)||void 0===v?void 0:v.id}),null===p||void 0===p?void 0:p.id).pipe((0,g.P)()).subscribe({})}var m=k.find((function(e){return"Payments"===e.data_type_name})),f=k.find((function(e){var n;return e.field_name===(null===m||void 0===m||null===(n=m.options)||void 0===n?void 0:n.paymentField)}));if(!m||null!==e&&void 0!==e&&null!==(t=e.data.payments)&&void 0!==t&&t.stripe_id||"Cash"===(null===m||void 0===m?void 0:m.value)||"Wallet"===(null===m||void 0===m?void 0:m.value)||"Points"===(null===m||void 0===m?void 0:m.value))if(m){var _,b;if(f&&"Cash"!==(null===m||void 0===m?void 0:m.value)&&T===(null===(_=Gn.misc_info)||void 0===_?void 0:_.lock)&&oo.id===(null===Fo||void 0===Fo||null===(b=Fo.assigned_to)||void 0===b?void 0:b.id)&&D!==T){var x,E,C=+(null===f||void 0===f?void 0:f.value)-+(null===f||void 0===f?void 0:f.value)*+(null!==(x=null===Gn||void 0===Gn||null===(E=Gn.misc_info)||void 0===E?void 0:E.rate)&&void 0!==x?x:.2);(0,Ae.e_)({user_id:oo.id,id:(0,ve.mR)(),total:C,product:"CR-".concat(H),notes:"Wallet",quantity:1}).pipe((0,g.P)()).subscribe({next:function(){var e;oo.wallet=+(+(null!==(e=null===oo||void 0===oo?void 0:oo.wallet)&&void 0!==e?e:0)+C),zi()}})}else J?(0,Oe.Vy)(oo,null===oo||void 0===oo?void 0:oo.options).pipe((0,g.P)()).subscribe({next:function(){zi()},error:function(){return h.h.dispatch((0,y.Xc)({show:!0,message:"Errors found",color:"red"}))}}):zi()}else zi();else Po.total=+(null===f||void 0===f?void 0:f.value),Po.plan=+(null===f||void 0===f?void 0:f.value),fi(!0),rl(!1)},complete:function(){rl(!1)}})):(0,p.LM)({id:M[0].id,selected_fields:(0,t.Z)(k),component_items:Po.items,options:pe,status:T,assigned_to:null!==(ae=null===Po||void 0===Po?void 0:Po.assigned_to)&&void 0!==ae?ae:Z},"",Hn.processModule.module_id,Qo,H,Ho,null!==(ue=null===(re=Hn.processModule)||void 0===re||null===(se=re.module)||void 0===se||null===(ce=se.options)||void 0===ce?void 0:ce.shares)&&void 0!==ue?ue:el).subscribe({next:function(e){var n,o,l,t,d;if(null!==(n=Hn.processModule)&&void 0!==n&&null!==(o=n.module)&&void 0!==o&&null!==(l=o.options)&&void 0!==l&&l.single)return localStorage.setItem(null===(t=Hn.processModule)||void 0===t?void 0:t.module.id,JSON.stringify(e)),void Ri(null===(d=Hn.processModule.steps[0])||void 0===d?void 0:d.id);S.length>0&&Bi(S),Hn.processModule.selectedComponent=e;var a=k.find((function(e){var n;return"People"===e.data_type_name&&!0===(null===(n=e.options)||void 0===n?void 0:n.calendar)}));if(a){var u,r,s=JSON.parse(null!==(u=null===a||void 0===a?void 0:a.value)&&void 0!==u?u:{task:0}),v=ro.find((function(e){return e.id===(null===s||void 0===s?void 0:s.task)}));if(v)(0,Re.xJ)((0,i.Z)((0,i.Z)({},v),{},{assignee_id:null===e||void 0===e||null===(r=e.created_by)||void 0===r?void 0:r.id}),null===v||void 0===v?void 0:v.id).pipe((0,g.P)()).subscribe({})}if(k.filter((function(e){return!("Cash"===(null===e||void 0===e?void 0:e.value)||"Wallet"===(null===e||void 0===e?void 0:e.value)||"Points"===(null===e||void 0===e?void 0:e.value))&&"Payments"===e.data_type_name})).length>0)rl(!1),fi(!0);else if(k.filter((function(e){return("Wallet"===(null===e||void 0===e?void 0:e.value)||"Points"===(null===e||void 0===e?void 0:e.value))&&"Payments"===e.data_type_name})).length>0){var c,p=k.find((function(e){return"Payments"===e.data_type_name}));(0,Ae.e_)({user_id:oo.id,id:(0,ve.mR)(),total:-Po.total,product:"DB-".concat(H),notes:null!==(c=null===p||void 0===p?void 0:p.value)&&void 0!==c?c:"Wallet",quantity:1}).pipe((0,g.P)()).subscribe({next:function(){var n,o;(0,Oe.Vy)(oo,(0,i.Z)((0,i.Z)({},null===oo||void 0===oo?void 0:oo.options),{},{points:+(+(null!==(n=null===oo||void 0===oo||null===(o=oo.options)||void 0===o?void 0:o.points)&&void 0!==n?n:0)-("Points"===(null===p||void 0===p?void 0:p.value)?+Po.total:0))})).pipe((0,g.P)()).subscribe({next:function(n){var o,l,i,t;oo.options=n.options,Dl((null===Hn||void 0===Hn||null===(o=Hn.processModule)||void 0===o||null===(l=o.module)||void 0===l||null===(i=l.options)||void 0===i||null===(t=i.message)||void 0===t?void 0:t.length)>0&&1==e.is_complete),h.h.dispatch((0,y.RV)({})),zi()}})}})}else{var m,f,_,b;rl(!1),Dl((null===Hn||void 0===Hn||null===(m=Hn.processModule)||void 0===m||null===(f=m.module)||void 0===f||null===(_=f.options)||void 0===_||null===(b=_.message)||void 0===b?void 0:b.length)>0&&1==e.is_complete),h.h.dispatch((0,y.RV)({})),zi()}},error:function(e){var n,o,l,i;null!==e&&void 0!==e&&e.data&&(h.h.dispatch((0,y.Xc)({show:!0,message:"Errors found",color:"red"})),null!==S&&Bi(S),Dl((null===Hn||void 0===Hn||null===(n=Hn.processModule)||void 0===n||null===(o=n.module)||void 0===o||null===(l=o.options)||void 0===l||null===(i=l.message)||void 0===i?void 0:i.length)>0&&1==(null===e||void 0===e?void 0:e.data.is_complete)),h.h.dispatch((0,y.RV)({})),zi())},complete:function(){rl(!1)}})):(h.h.dispatch((0,y.Xc)({show:!0,message:"There are no items to be saved",color:"red"})),window.scrollTo({top:0,behavior:"smooth"}))},Bi=function(e){if((null===e||void 0===e?void 0:e.length)>0){var n,o=null!==(n=Gn.misc_info)&&void 0!==n?n:{};e.filter((function(e){var n;o[e]=+(null!==(n=o[e])&&void 0!==n?n:1)+1})),rl(!0),(0,_.x5)({misc_info:o}).pipe((0,g.P)()).subscribe({})}},Fi=function(){Co("Fill up all the required fields"),window.scrollTo({top:0,behavior:"smooth"}),fo(!1)},Wi=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o=arguments.length>2?arguments[2]:void 0,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],t=n.filter((function(n){return n.module_id===e})).filter((function(e){var n,t;return i.length>0?i.includes(e.id):""===o?e:(null===(n=e.title)||void 0===n?void 0:n.toUpperCase().includes(null===o||void 0===o?void 0:o.toUpperCase()))||(null===(t=e.component_fields.filter((function(e){var n,i,t,d,a,u;return"Record"===e.data_type_name?null===(n=Vn.find((function(n){var o;return(null===(o=n.component_fields.filter((function(n){return n.field_name===e.options.output&&n.component_blueprint_id===e.options.component_id&&n.value===(null===e||void 0===e?void 0:e.value)})))||void 0===o?void 0:o.length)>0})))||void 0===n||null===(i=n.component_fields.find((function(n){var o;return null===(o=e.options)||void 0===o?void 0:o.names.includes(n.field_name)})).value)||void 0===i?void 0:i.toUpperCase().includes(null===o||void 0===o?void 0:o.toUpperCase()):void 0!==l?("date"===e.data_type?null===(t=B()(new Date(null===e||void 0===e?void 0:e.value)))||void 0===t?void 0:t.format("DD MMM YYYY").includes(o):null===e||void 0===e||null===(d=e.value)||void 0===d?void 0:d.includes(o))&&e.field_name===l:"date"===e.data_type?null===(a=B()(new Date(null===e||void 0===e?void 0:e.value)))||void 0===a?void 0:a.format("DD MMM YYYY").includes(o):null===e||void 0===e||null===(u=e.value)||void 0===u?void 0:u.toUpperCase().includes(null===o||void 0===o?void 0:o.toUpperCase())})))||void 0===t?void 0:t.length)>0}));return t},Yi=function(e){var n,o,d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ql,a=Ce.Z([Ze.Z(we.Z("created_date"))])(d).map((function(n){var o,t,d,a,u,r,s,v,c,p,m={};e.list.map((function(e){var o=n.component_fields.find((function(n){return n.field_name===e}));if(void 0!=o)if("People"===o.data_type_name)m=(0,i.Z)((0,i.Z)({},m),{},(0,l.Z)({},e,o.value));else if("Date"===o.data_type_name){var t,d=new Date(null===o||void 0===o||null===(t=o.value)||void 0===t?void 0:t.split(",")[0]);m=(0,i.Z)((0,i.Z)({},m),{},(0,l.Z)({},e,B()(d).format("DD MMM YYYY")))}else if("Record"===o.data_type_name||"Component"===o.data_type_name){var a;m=(0,i.Z)((0,i.Z)({},m),{},(0,l.Z)({},e,U.tq?"".concat(null===o||void 0===o?void 0:o.value.slice(1,20)):"".concat(null===o||void 0===o?void 0:o.value))),null===(a=Vn.find((function(e){var n;return(null===(n=e.component_fields.filter((function(e){return e.field_name===o.options.output&&e.component_blueprint_id===o.options.component_id&&e.value===(null===o||void 0===o?void 0:o.value)})))||void 0===n?void 0:n.length)>0})))||void 0===a||a.component_fields.filter((function(e){m=(0,i.Z)((0,i.Z)({},m),{},(0,l.Z)({},e.field_name,U.tq?e.value.slice(1,20):e.value))}))}else if("Filters"===o.data_type_name){var u;m=(0,i.Z)((0,i.Z)({},m),{},(0,l.Z)({},e,U.tq?"".concat(null===o||void 0===o?void 0:o.value.slice(1,20)):"".concat(null===o||void 0===o?void 0:o.value))),null===(u=Vn.find((function(e){var n;return(null===(n=e.component_fields.filter((function(e){return e.field_name===o.options.output&&e.component_blueprint_id===o.options.component_id&&e.value===(null===o||void 0===o?void 0:o.value)})))||void 0===n?void 0:n.length)>0})))||void 0===u||u.component_fields.filter((function(e){m=(0,i.Z)((0,i.Z)({},m),{},(0,l.Z)({},e.field_name,U.tq?e.value.slice(1,20):e.value))}))}else if("Status"===o.data_type_name){var r;if(0==n.is_complete)m=(0,i.Z)((0,i.Z)({},m),{},(0,l.Z)({},e,"Draft"));else m=(0,i.Z)((0,i.Z)({},m),{},(0,l.Z)({},e,"".concat(null!==(r=null===n||void 0===n?void 0:n.status)&&void 0!==r?r:null===o||void 0===o?void 0:o.value)))}else{var s,v;m=(0,i.Z)((0,i.Z)({},m),{},(0,l.Z)({},e,U.tq?null===o||void 0===o||null===(s=o.value)||void 0===s?void 0:s.slice(1,20).split(",")[0]:null===o||void 0===o||null===(v=o.value)||void 0===v?void 0:v.split(",")[0]))}})),(null===n||void 0===n||null===(o=n.component_items)||void 0===o?void 0:o.length)>0&&(m=(0,i.Z)((0,i.Z)({},m),{},(0,l.Z)({},"Total Qty",n.component_items.reduce((function(e,n){return e+ +n.quantity}),0)))),(null===n||void 0===n||null===(t=n.shared_positions)||void 0===t?void 0:t.length)>0&&(m=(0,i.Z)((0,i.Z)({},m),{},{Shares:null===n||void 0===n?void 0:n.shared_positions.map((function(e){var n;return null===(n=lo.find((function(n){return n.value===e.id})))||void 0===n?void 0:n.label})).toString()}));var f=new Date(n.created_date);return m=(0,i.Z)((0,i.Z)({},m),{},(c={id:n.id},(0,l.Z)(c,"Created By","".concat(null===n||void 0===n||null===(d=n.created_by)||void 0===d?void 0:d.first_name," ").concat(null===n||void 0===n||null===(a=n.created_by)||void 0===a?void 0:a.last_name)),(0,l.Z)(c,"Created Date",B()(f).format("DD MMM YYYY")),(0,l.Z)(c,"Assigned To","".concat(null!==(u=null===n||void 0===n||null===(r=n.assigned_to)||void 0===r?void 0:r.first_name)&&void 0!==u?u:""," ").concat(null!==(s=null===n||void 0===n||null===(v=n.assigned_to)||void 0===v?void 0:v.last_name)&&void 0!==s?s:"")),(0,l.Z)(c,"Status",0==n.is_complete?"Draft":null===n||void 0===n?void 0:n.status),(0,l.Z)(c,"Title",n.title),(0,l.Z)(c,"items",n.component_items),(0,l.Z)(c,Hn.processModule.module.name,n.title),c)),null===e||void 0===e||null===(p=e.reports)||void 0===p||p.filter((function(e){return"Formula"===e.data_type_name})).map((function(e){var o=(0,ve.LV)(e.options,e.options.list.map((function(e){var n;return{value:null!==(n=m[e])&&void 0!==n?n:0}})),Vn.filter((function(e){var n,o;return e.module_id===(null===Hn||void 0===Hn||null===(n=Hn.processModule)||void 0===n||null===(o=n.module)||void 0===o?void 0:o.id)})),null===n||void 0===n?void 0:n.component_items);m=(0,i.Z)((0,i.Z)({},m),{},(0,l.Z)({},e.field_name,"".concat(o)))})),m}));null===e||void 0===e||null===(n=e.reports)||void 0===n||n.filter((function(e){return"List Filter"===e.data_type_name})).map((function(e){a=a.filter((function(n){var o,l;return n[null===(o=e.options)||void 0===o?void 0:o.field]===(null===(l=e.options)||void 0===l?void 0:l.value)}))}));var u=null===e||void 0===e||null===(o=e.reports)||void 0===o?void 0:o.find((function(e){return"Transaction List"===e.data_type_name}));if(u){var r=[];a.map((function(e){e.items.filter((function(n){var o=(0,i.Z)({},e);Object.keys(u.options.map).map((function(e){o[u.options.map[e]]=n[e]})),r=[].concat((0,t.Z)(r),[o])})),delete e.items})),a=r}return a},ji=function(){return(0,t.Z)(new Set(Yl.filter((function(e){return void 0!==e.Status})).map((function(e){return e.Status})))).map((function(e){return{label:e,value:e}}))},Hi=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Yl,o=JSON.parse(JSON.stringify(n));e.filter((function(e,l){"status"===e.type?o="OR"===Kl.operator?[].concat((0,t.Z)(0==l?[]:o),(0,t.Z)(n.filter((function(n){return n.Status===e.value})))):o.filter((function(n){return n.Status===e.value})):"user"===e.type?o="OR"===Kl.operator?[].concat((0,t.Z)(0==l?[]:o),(0,t.Z)(n.filter((function(n){return n["Created By"]===e.label})))):o.filter((function(n){return n["Created By"]===e.label})):"fields"===e.type&&(o="OR"===Kl.operator?[].concat((0,t.Z)(0==l?[]:o),(0,t.Z)(n.filter((function(n){return n[e.filter]===e.value})))):o.filter((function(n){return n[e.filter]===e.value})))})),jl(o)},Ji=function(){var e;return a.createElement("div",{style:{display:""}},a.createElement(ne.Z,{value:null!==(e=Kl.operator)&&void 0!==e?e:"AND",className:u.dropdownSelectOperation,items:[{label:"AND",value:"AND"},{label:"OR",value:"OR"}],onChange:function(e){$l((0,i.Z)((0,i.Z)({},Kl),{},{operator:e}))}}))},Gi=function(){return a.createElement("div",{style:{alignSelf:"flex-end",display:Ni.component_blueprints.filter((function(e){var n;return 1==(null===(n=e.options)||void 0===n?void 0:n.asReport)})).length>0?"flex":"none"}},a.createElement(K.Z,{light:!0,clicked:function(){Ll?($l({list:[],operator:"AND"}),Bl(Vn.filter((function(e){var n,o;return e.module_id===(null===Hn||void 0===Hn||null===(n=Hn.processModule)||void 0===n||null===(o=n.module)||void 0===o?void 0:o.id)})))):Bl([]),Vl([]),Ol(!Ll)},style:Ll?{height:"36px"}:{},icon:a.createElement("img",{src:Ll?r.hFT:s.aRA})}),1==Ll&&a.createElement(a.Fragment,null,a.createElement(ne.Z,{className:u.dropdownSelectReport,items:Ni.component_blueprints.filter((function(e){var n,o,l;return 1==(null===(n=e.options)||void 0===n?void 0:n.asReport)&&(void 0===(null===(o=e.options)||void 0===o?void 0:o.showOnly)||0==(null===(l=e.options)||void 0===l?void 0:l.showOnly.length)||oo.positions.filter((function(n){var o,l;return null===(o=e.options)||void 0===o||null===(l=o.showOnly)||void 0===l?void 0:l.includes(n.id)})).length>0)})).map((function(e){return{label:null===e||void 0===e?void 0:e.name,value:e.id,blueprint:e}})),visible:!0,onChange:function(e){var n,o;Bl(Vn.filter((function(e){var n,o;return e.module_id===(null===Hn||void 0===Hn||null===(n=Hn.processModule)||void 0===n||null===(o=n.module)||void 0===o?void 0:o.id)})));var l=[];Ce.Z([Se.Z(we.Z("index"))])(Ni.component_blueprints.find((function(n){return n.id===e})).selected_fields.filter((function(e){return 1==e.visible}))).map((function(e){l=[].concat((0,t.Z)(l),[e.field_name]),"Info"===e.data_type_name?e.options.list.map((function(e){return l=[].concat((0,t.Z)(l),[e])})):"Transaction List"===e.data_type_name&&Object.values(e.options.map).map((function(e){return l=[].concat((0,t.Z)(l),[e])}))})),$l({list:(0,t.Z)(new Set(l)),title:null===(n=Ni.component_blueprints.find((function(n){return n.id===e})))||void 0===n?void 0:n.name,reports:Ce.Z([Ze.Z(we.Z("index"))])(Ni.component_blueprints.find((function(n){return n.id===e})).selected_fields).map((function(e){return{field_name:e.field_name,data_type_name:e.data_type_name,options:e.options}})),operator:"AND"}),jl(Yi({list:(0,t.Z)(new Set(l)),title:null===(o=Ni.component_blueprints.find((function(n){return n.id===e})))||void 0===o?void 0:o.name,reports:Ce.Z([Ze.Z(we.Z("index"))])(Ni.component_blueprints.find((function(n){return n.id===e})).selected_fields).map((function(e){return{field_name:e.field_name,data_type_name:e.data_type_name,options:e.options}})),operator:"AND"},Vn.filter((function(e){var n,o;return e.module_id===(null===Hn||void 0===Hn||null===(n=Hn.processModule)||void 0===n||null===(o=n.module)||void 0===o?void 0:o.id)}))))},placeholder:"Reports"})))},Vi=function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.keys(n[0]),i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null===(e=Hn.processModule.module)||void 0===e?void 0:e.name;return a.createElement(K.Z,{light:!0,title:(null===Kl||void 0===Kl?void 0:Kl.title)&&"Export as file",clicked:function(){var e,d,a,u=Ll?o:1==(null===(e=Hn.processModule.module)||void 0===e||null===(d=e.options)||void 0===d?void 0:d.isMaster)?[].concat((0,t.Z)(o),["Shares","Title"]):o,r=Ne.utils.book_new(),s=Ne.utils.json_to_sheet([]);Ne.utils.sheet_add_aoa(s,[u]),Ne.utils.sheet_add_json(s,n.map((function(e){return Object.assign.apply(Object,[{}].concat((0,t.Z)(u.map((function(n){return(0,l.Z)({},n,e[n])})))))})),{origin:"A2",skipHeader:!0}),Ne.utils.book_append_sheet(r,s,"".concat(null===(a=Hn.processModule.module)||void 0===a?void 0:a.name)),(0,Ne.writeFile)(r,"".concat(i).concat((0,q.now)(),".xlsx"))},cicon:a.createElement("img",{src:s.so})},a.createElement("img",{src:s.so}))},Qi=null===Fo||void 0===Fo||null===(A=Fo.component_fields)||void 0===A||null===(L=A.find((function(e){return"Status"===e.data_type_name})))||void 0===L?void 0:L.value,Xi=[];null===Hn||void 0===Hn||null===(O=Hn.processModule)||void 0===O||null===(F=O.steps)||void 0===F||F.filter((function(e){return null===e||void 0===e?void 0:e.component_blueprints.filter((function(e){var n,o;return(null===(n=e.options)||void 0===n||null===(o=n.showOnly)||void 0===o?void 0:o.length)>0}))})).filter((function(e){e.component_blueprints.filter((function(e){var n,o;return(null===(n=e.options)||void 0===n||null===(o=n.showOnly)||void 0===o?void 0:o.length)>0})).filter((function(e){e.options.showOnly.filter((function(e){Xi=[].concat((0,t.Z)(Xi),[e])}))}))}));var Ki=(null===Hn||void 0===Hn||null===(W=Hn.processModule)||void 0===W||null===(Y=W.steps)||void 0===Y?void 0:Y.length)>0?null===Hn||void 0===Hn||null===(j=Hn.processModule)||void 0===j||null===(H=j.steps)||void 0===H||null===(J=H.find((function(e){return(null===e||void 0===e?void 0:e.component_blueprints.filter((function(e){return e.selected_fields.filter((function(e){return"Freehand"===e.data_type_name})).length>0})).length)>0})))||void 0===J||null===(G=J.component_blueprints.find((function(e){var n;return(null===(n=e.selected_fields.filter((function(e){return"Freehand"===e.data_type_name})))||void 0===n?void 0:n.length)>0})))||void 0===G||null===(V=G.options)||void 0===V?void 0:V.showOnly:void 0,$i=(null===Hn||void 0===Hn||null===(Q=Hn.processModule)||void 0===Q||null===(X=Q.steps)||void 0===X?void 0:X.length)>0?null===Hn||void 0===Hn||null===($=Hn.processModule)||void 0===$||null===(oe=$.steps)||void 0===oe||null===(le=oe.find((function(e){return(null===e||void 0===e?void 0:e.component_blueprints.filter((function(e){return e.selected_fields.filter((function(e){return"Action Button"===e.data_type_name})).length>0})).length)>0})))||void 0===le||null===(ie=le.component_blueprints.find((function(e){var n;return(null===(n=e.selected_fields.filter((function(e){return"Action Button"===e.data_type_name})))||void 0===n?void 0:n.length)>0})))||void 0===ie||null===(te=ie.options)||void 0===te?void 0:te.showOnly:void 0,et=function(){var e,n,o,l;return a.createElement("div",{className:u.menuAccordionButtons},Hn.processModule.stepIndex>0&&a.createElement(K.Z,{title:"Cancel",light:!0,clicked:function(){Po.components.length>0||Po.newStepComponents.length>0?Ci(!0):(Hn.processModule.back_array=[],Bl(Vn.filter((function(e){var n,o;return e.module_id===(null===Hn||void 0===Hn||null===(n=Hn.processModule)||void 0===n||null===(o=n.module)||void 0===o?void 0:o.id)}))),Ri(Hn.processModule.steps[0].id),vi(!1))}}),Hn.processModule.stepIndex>0&&a.createElement(K.Z,{title:"Back",light:!0,style:{width:"80px"},clicked:function(){var e,n,o;if(1==Hn.processModule.stepIndex&&Bl(Vn.filter((function(e){var n,o;return e.module_id===(null===Hn||void 0===Hn||null===(n=Hn.processModule)||void 0===n||null===(o=n.module)||void 0===o?void 0:o.id)}))),1==(null===Ni||void 0===Ni||null===(e=Ni.options)||void 0===e?void 0:e.deleteOnBack)&&Ni.component_blueprints.filter((function(e){return e.selected_fields.filter((function(e){return"output"!==e.data_type})).map((function(e){e.value=void 0}))})),(null===Hn||void 0===Hn||null===(n=Hn.processModule)||void 0===n||null===(o=n.back_array)||void 0===o?void 0:o.length)>0){var l,i=null===Hn||void 0===Hn||null===(l=Hn.processModule)||void 0===l?void 0:l.back_array.pop();i&&Ri(i)}else{var t;Ri(null===(t=Hn.processModule.steps[Hn.processModule.stepIndex-1])||void 0===t?void 0:t.id)}}}),!0===(null===Ni||void 0===Ni?void 0:Ni.is_end)?a.createElement(K.Z,{disabled:!1===(null===Gn||void 0===Gn?void 0:Gn.start),title:Ro?"Update":Ho&&null!==(e=null===Hn||void 0===Hn||null===(n=Hn.processModule)||void 0===n||null===(o=n.module)||void 0===o||null===(l=o.options)||void 0===l?void 0:l.save)&&void 0!==e?e:"Save",loading:ul,style:{width:"160px",marginLeft:"0px",display:Po.components.length>0||Po.newStepComponents.length>0?"":"none"},clicked:function(){var e,n,o,l,i,t;return si?Co("Saving is not allowed in Edit Mode"):1==(null===Hn||void 0===Hn||null===(e=Hn.processModule)||void 0===e||null===(n=e.module)||void 0===n||null===(o=n.options)||void 0===o?void 0:o.emailOutputs)&&1==(null===Hn||void 0===Hn||null===(l=Hn.processModule)||void 0===l||null===(i=l.module)||void 0===i||null===(t=i.options)||void 0===t?void 0:t.selectiveEmail)&&Ho?xl(!0):qi()}}):a.createElement(K.Z,{disabled:!1===(null===Gn||void 0===Gn?void 0:Gn.start),title:"Next",style:{width:"80px"},clicked:function(){var e,n,o,l,i,t,d,a,u;Array.isArray(null===Hn||void 0===Hn||null===(e=Hn.processModule)||void 0===e?void 0:e.back_array)||(Hn.processModule.back_array=[]),null===Hn||void 0===Hn||null===(n=Hn.processModule)||void 0===n||n.back_array.push(null===Po||void 0===Po||null===(o=Po.currentStep)||void 0===o?void 0:o.id);var r,s,v,c,p,m=null===(l=Ni.component_blueprints.find((function(e){return e.selected_fields.filter((function(e){var n,o;return"Dropdown"===e.data_type_name&&(null===(n=e.options)||void 0===n?void 0:n.jump1)&&"decision"===(null===(o=e.options)||void 0===o?void 0:o.type)})).length>0})))||void 0===l||null===(i=l.selected_fields)||void 0===i?void 0:i.find((function(e){var n;return"Dropdown"===e.data_type_name&&(null===(n=e.options)||void 0===n?void 0:n.jump1)})),f=null===(t=Ni.component_blueprints.find((function(e){return e.selected_fields.filter((function(e){var n;return"Value Button"===e.data_type_name&&(null===(n=e.options)||void 0===n?void 0:n.jump1)})).length>0})))||void 0===t||null===(d=t.selected_fields)||void 0===d?void 0:d.filter((function(e){var n;return"Value Button"===e.data_type_name&&(null===(n=e.options)||void 0===n?void 0:n.jump1)}));if(null!==m&&void 0!==m&&null!==(a=m.options)&&void 0!==a&&a.jump1&&null!==m&&void 0!==m&&null!==(u=m.options)&&void 0!==u&&u.jump2)if(0==(null===m||void 0===m||null===(r=m.options)||void 0===r?void 0:r.list.indexOf(null===m||void 0===m?void 0:m.value)))Li(null===(v=uo.find((function(e){var n;return e.id===(null===m||void 0===m||null===(n=m.options)||void 0===n?void 0:n.process)})))||void 0===v||null===(c=v.steps)||void 0===c||null===(p=c.find((function(e){return e.id===(null===m||void 0===m?void 0:m.options.jump1)})))||void 0===p?void 0:p.id);else if(1==(null===m||void 0===m||null===(s=m.options)||void 0===s?void 0:s.list.indexOf(null===m||void 0===m?void 0:m.value))){var _,g,b;Li(null===(_=uo.find((function(e){var n;return e.id===(null===m||void 0===m||null===(n=m.options)||void 0===n?void 0:n.process)})))||void 0===_||null===(g=_.steps)||void 0===g||null===(b=g.find((function(e){return e.id===(null===m||void 0===m?void 0:m.options.jump2)})))||void 0===b?void 0:b.id)}else{var x;null===Hn||void 0===Hn||null===(x=Hn.processModule)||void 0===x||x.back_array.pop(),h.h.dispatch((0,y.Xc)({show:!0,message:"Please select a value for ".concat(null===m||void 0===m?void 0:m.field_name),color:"red",bottom:!1}))}else if((null===f||void 0===f?void 0:f.length)>0){var E,C,Z,w,M,S=f.filter((function(e){return void 0!==e.value}));if(1==S.length)Li(null===(E=uo.find((function(e){var n,o;return e.id===(null===(n=S[0])||void 0===n||null===(o=n.options)||void 0===o?void 0:o.process)})))||void 0===E||null===(C=E.steps)||void 0===C||null===(Z=C.find((function(e){var n;return e.id===(null===(n=S[0])||void 0===n?void 0:n.options.jump1)})))||void 0===Z?void 0:Z.id);else null===Hn||void 0===Hn||null===(w=Hn.processModule)||void 0===w||null===(M=w.back_array)||void 0===M||M.pop(),h.h.dispatch((0,y.Xc)({show:!0,message:"A selection is required",color:"red",bottom:!1})),window.scrollTo({top:0,behavior:"smooth"})}else if((null===Ni||void 0===Ni?void 0:Ni.next_steps.length)>1||Ti.length>1||Di.length>1)fo(!mo);else if(1===Ni.next_steps.length){var k;Li(null===Ni||void 0===Ni||null===(k=Ni.next_steps[0])||void 0===k?void 0:k.id)}else{var I;Li(null===(I=Hn.processModule.steps[Hn.processModule.steps.findIndex((function(e){return e.id===Ni.id}))+1])||void 0===I?void 0:I.id)}}}),mo&&a.createElement("div",{className:u.goToNextStep},null===Ni||void 0===Ni?void 0:Ni.next_steps.map((function(e,n){return a.createElement("div",{key:n,onClick:function(){return Li(e.id)},className:u.nextStepsContainer},a.createElement("div",{className:u.nextStepImageContainer},a.createElement("img",{alt:"",src:r.c6V})),a.createElement("p",null,null===e||void 0===e?void 0:e.name))})),null===Ti||void 0===Ti?void 0:Ti.map((function(e,n){return a.createElement("div",{key:n,onClick:function(){return Li(e.id)},className:u.nextStepsContainer},a.createElement("div",{className:u.nextStepImageContainer},a.createElement("img",{alt:"",src:r.th9})),a.createElement("p",null,null===e||void 0===e?void 0:e.name))})),null===Di||void 0===Di?void 0:Di.map((function(e,n){return a.createElement("div",{key:n,onClick:function(){return function(e){h.h.dispatch((0,y.pU)(e)),fo(!1)}(e)},className:u.nextStepsContainer},a.createElement("div",{className:u.nextStepImageContainer},a.createElement("img",{alt:"",src:r.IR8})),a.createElement("p",null,null===e||void 0===e?void 0:e.name))}))))};return a.createElement("div",{className:u.processStepHost,style:{backgroundColor:U.tq?"":!0===(null===Ni||void 0===Ni||null===(de=Ni.options)||void 0===de?void 0:de.popup)?"var(--app-color-white-lightest)":""}},a.createElement("div",{className:u.centeredCardMargin,"app-variant-is-mobile":U.tq?"true":"false"},1==(null===Ni||void 0===Ni?void 0:Ni.rank)&&a.createElement(ue,{title:null===Hn||void 0===Hn||null===(ae=Hn.processModule)||void 0===ae||null===(se=ae.module)||void 0===se?void 0:se.name,subtitle:U.tq?"":null===Hn||void 0===Hn||null===(Pe=Hn.processModule)||void 0===Pe?void 0:Pe.description,customStyle:{width:U.tq?"100%":"94%",minWidth:U.tq?"100px":"94%"},cardClicked:function(){eo(null===Hn||void 0===Hn?void 0:Hn.processModule),pl(!cl)}})),cl&&1==(null===Ni||void 0===Ni?void 0:Ni.rank)&&a.createElement("div",{className:u.centeredCardMargin,"app-variant-is-mobile":U.tq?"true":"false"},a.createElement(ue,{description:"Steps:",customStyle:{width:U.tq?"100%":"94%",minWidth:U.tq?"100px":"94%"}},a.createElement(ce.FZ,null,a.createElement(re.Z,null)))),no,a.createElement("div",{className:u.centeredCardMargin,"app-variant-is-mobile":U.tq?"true":"false"},1===vo&&void 0===(null===Ni||void 0===Ni?void 0:Ni.component_blueprints)?a.createElement("div",{className:u.centeredSpinner},a.createElement(c.$j,{size:80,type:"ThreeDots"})):(null===Ni||void 0===Ni||null===(je=Ni.component_blueprints)||void 0===je?void 0:je.filter((function(e){var n;return 1==(null===(n=e.options)||void 0===n?void 0:n.asModuleList)})).length)>0?null===Ni||void 0===Ni||null===(He=Ni.component_blueprints)||void 0===He?void 0:He.filter((function(e){var n,o,l;return 1==e.options.asModuleList&&(oo.positions.filter((function(n){var o,l;return null===(o=e.options)||void 0===o||null===(l=o.showOnly)||void 0===l?void 0:l.includes(n.id)})).length>0||0==(null===(n=e.options)||void 0===n||null===(o=n.showOnly)||void 0===o?void 0:o.length)||void 0===(null===(l=e.options)||void 0===l?void 0:l.showOnly))})).map((function(e,n){var o;return a.createElement(a.Fragment,null,a.createElement(z.default,{className:u.listContainer,isReport:Ll,"app-variant-is-mobile":U.tq?"true":"false",title:Ll?"Reports":null===Ni||void 0===Ni?void 0:Ni.name,columns:(null===(o=Vn.filter((function(e){var n,o;return e.module_id===(null===Hn||void 0===Hn||null===(n=Hn.processModule)||void 0===n||null===(o=n.module)||void 0===o?void 0:o.id)})))||void 0===o?void 0:o.filter((function(e){var n;return 0===(null===(n=e.component_fields)||void 0===n?void 0:n.length)})).length)>0||U.tq?[Hn.processModule.module.name]:(0,t.Z)(new Set(e.selected_fields.filter((function(e){return 1==e.visible&&"Info"===e.data_type_name})).map((function(e){var n;return null===(n=e.options)||void 0===n?void 0:n.list})).flat().concat(Ll?Kl.list:Ce.Z([Se.Z(we.Z("index"))])(e.selected_fields.filter((function(e){return 1==e.visible&&"Info"!==e.data_type_name}))).map((function(e){return e.field_name}))))),list:Ll?Yl:Yi({list:e.selected_fields.filter((function(e){return"Info"===e.data_type_name})).map((function(e){var n,o;return null!==(n=null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.key)&&void 0!==n?n:e.field_name})).concat(e.selected_fields.filter((function(e){return 1==e.visible})).map((function(e){return e.field_name})))}),addClicked:function(){Oi(),Wo({})},onListItemClick:function(e){var n,o;if(!Ll){var l,i,t,d=Vn.find((function(n){return n.id===e.id}));if(0===(null===(n=d.component_fields)||void 0===n?void 0:n.length))return rl(!0),void(0,p.r6)(d.id).pipe((0,g.P)()).subscribe({next:function(e){Wo(e),Jo(e.is_complete),Uo(!0),tl(!1),rl(!1)},error:function(){}});if(Wo(d),Jo(d.is_complete),tl(!1),null!==d&&void 0!==d&&null!==(o=d.assigned_to)&&void 0!==o&&o.id&&!Kn.find((function(e){var n;return e.id===(null===d||void 0===d||null===(n=d.assigned_to)||void 0===n?void 0:n.id)})))(0,Oe.VG)(Kn.find((function(e){var n;return e.id===(null===(n=d.created_by)||void 0===n?void 0:n.id)}))?[null===d||void 0===d||null===(l=d.assigned_to)||void 0===l?void 0:l.id]:[null===d||void 0===d||null===(i=d.assigned_to)||void 0===i?void 0:i.id,null===d||void 0===d||null===(t=d.created_by)||void 0===t?void 0:t.id]).pipe((0,g.P)()).subscribe({next:function(e){h.h.dispatch((0,y.NY)(Kn.concat(e))),Uo(!0)}});else Uo(!0)}},pages:Hn.processModule.module.count,onPageClicked:function(e){var n=Vn.filter((function(e){return e.module_id===Hn.processModule.module.id}));if(12345===e){var o;n.length<(null===(o=Hn.processModule.module)||void 0===o?void 0:o.count)&&(0,me.vC)(Hn.processModule.module,ve.Qc,999999,1).pipe((0,b.q)(1)).subscribe({next:function(e){var n;rl(!1),Hn.processModule.module.lastUpdate=0,Hn.processModule.module.count=null!==(n=null===e||void 0===e?void 0:e.total)&&void 0!==n?n:0}})}else{var l,i,t=Math.ceil((null!==(l=Hn.processModule.module)&&void 0!==l&&l.count?+(null===(i=Hn.processModule.module)||void 0===i?void 0:i.count):n.length)/ve.ZP);U.tq&&t>7&&(t=7);var d=Math.ceil(n.length/ve.ZP),a=e;a>d&&(rl(!0),Xn.componentsByModule[Hn.processModule.module.name]=0,(0,me.vC)(Hn.processModule.module,ve.Qc,a-d<=1?ve.ZP:ve.ZP*a,a-d<=1?a:1).pipe((0,b.q)(1)).subscribe({next:function(e){var n;rl(!1),Xn.componentsByModule[Hn.processModule.module.name]=(0,q.now)(),Hn.processModule.module.lastUpdate=0,Hn.processModule.module.count=null!==(n=null===e||void 0===e?void 0:e.total)&&void 0!==n?n:0}}))}}},a.createElement("div",null,a.createElement("div",{style:{display:"flex"}},Gl.length>0&&a.createElement(K.Z,{title:"Show all",clicked:function(){Bl(Vn.filter((function(e){var n,o;return e.module_id===(null===Hn||void 0===Hn||null===(n=Hn.processModule)||void 0===n||null===(o=n.module)||void 0===o?void 0:o.id)}))),$l((0,i.Z)((0,i.Z)({},Kl),{},{filter:void 0})),jl(Yi((0,i.Z)((0,i.Z)({},Kl),{},{filter:void 0})))},style:{height:"30px",width:"140px"}}),Gl.map((function(e,n){return a.createElement(K.Z,{className:u.customButton,icon:a.createElement("img",{src:r.C7j,style:{height:"16px",width:"16px"}}),clicked:function(){Vl(Gl.filter((function(n){return n.value!==e.value}))),Hi(Gl.filter((function(n){return n.value!==e.value})),Yi((0,i.Z)((0,i.Z)({},Kl),{},{filter:void 0})))},key:n,style:{height:"30px",width:"inherit"}},"".concat(0==n?"":e.operator," ").concat(e.label))})),Gl.length>0&&a.createElement(K.Z,{title:"Apply",style:{height:"30px",width:"160px"},clicked:function(){Hi(Gl,Yi((0,i.Z)((0,i.Z)({},Kl),{},{filter:void 0})))},light:!0})),Ll&&a.createElement("div",{style:{display:"flex"}},Ji(),ji().length>0&&a.createElement(ne.Z,{className:u.dropdownSelectComponent,items:ji(),onChange:function(e){Gl.map((function(e){return e.label})).includes(e)||Vl([].concat((0,t.Z)(Gl),[{label:e,value:e,type:"status",operator:Kl.operator}]))},placeholder:"Status"}),Ll&&a.createElement(ne.Z,{className:u.dropdownSelectComponent,items:Kl.list.map((function(e){return{label:e,value:e}})),onChange:function(e){$l((0,i.Z)((0,i.Z)({},Kl),{},{filter:void 0})),setTimeout((function(){return $l((0,i.Z)((0,i.Z)({},Kl),{},{filter:e}))}),10)},placeholder:"Filter by fields"}),1==Ll&&void 0!==(null===Kl||void 0===Kl?void 0:Kl.filter)&&a.createElement(ne.Z,{className:u.dropdownSelectComponentL,items:(0,t.Z)(new Set(Yi(Kl).map((function(e){return e[Kl.filter]})))).map((function(e){return{label:e,value:e}})),onChange:function(e){Gl.map((function(e){return e.value})).includes(e)||Vl([].concat((0,t.Z)(Gl),[{label:"".concat(Kl.filter,": ").concat(e),value:e,type:"fields",filter:Kl.filter,operator:Kl.operator}]))},placeholder:"Field value"}),1==Ll&&a.createElement(ne.Z,{className:u.dropdownSelectComponent,items:Kn.map((function(e){return{label:"".concat(e.first_name," ").concat(e.last_name),value:e.id}})),onChange:function(e){if(!Gl.map((function(e){return e.label})).includes(e)){var n=Kn.find((function(n){return n.id===e}));Vl([].concat((0,t.Z)(Gl),[{label:"".concat(n.first_name," ").concat(n.last_name),value:e,type:"user",operator:Kl.operator}]))}},placeholder:"Created by"}))),a.createElement("div",{className:u.actionsContainer},!(null!==Kl&&void 0!==Kl&&Kl.title)&&Ll&&a.createElement("label",{style:{padding:"20px 0px 20px 5px",fontSize:"12px"}},"OR"===Kl.operator?"Selecting OR will select all instances of selected value":"Selecting AND will only include instances of selected value"),Ll?(null===Kl||void 0===Kl?void 0:Kl.title)&&Vi(Yl,Kl.list,Kl.title):a.createElement("div",{className:u.searchContainer},a.createElement(Le.G,{icon:Ue.wn1,style:{width:"25px",height:"25px",padding:"5px"}}),a.createElement("input",{placeholder:"Search",className:u.searchInput,onChange:function(e){var n,o,l;if("deleteContentBackward"===e.nativeEvent.inputType)Bl(Wi(null===Hn||void 0===Hn||null===(o=Hn.processModule)||void 0===o||null===(l=o.module)||void 0===l?void 0:l.id,Vn,e.target.value));else if((null===(n=e.target.value)||void 0===n?void 0:n.length)>0){var i,t;Bl(Wi(null===Hn||void 0===Hn||null===(i=Hn.processModule)||void 0===i||null===(t=i.module)||void 0===t?void 0:t.id,ql,e.target.value))}else 0==e.target.value.length&&Bl(Vn.filter((function(e){var n,o;return e.module_id===(null===Hn||void 0===Hn||null===(n=Hn.processModule)||void 0===n||null===(o=n.module)||void 0===o?void 0:o.id)})))}})),Ll&&Gi(),a.createElement("div",{style:{display:Ll?"none":"flex",alignSelf:"flex-end"}},!("trial_ended"===Gn.status||"inactive"===Gn.status)&&function(){var e,n,o;return a.createElement(K.Z,{light:!0,style:{display:1!=(null===Hn||void 0===Hn||null===(e=Hn.processModule)||void 0===e||null===(n=e.module)||void 0===n||null===(o=n.options)||void 0===o?void 0:o.readOnly)||"manager"===oo.user_type||"admin"===oo.user_type?"":"none"},clicked:function(){Oi(),Wo({})},icon:a.createElement("img",{src:r.IHx})})}(),!U.tq&&Gi(),!U.tq&&Vi(Yi({list:e.selected_fields.filter((function(e){return 1==e.visible})).map((function(e){return e.field_name}))}),e.selected_fields.filter((function(e){return 1==e.visible})).map((function(e){return e.field_name}))),a.createElement(K.Z,{light:!0,clicked:function(){rl(!0);var e=Jn.find((function(e){return e.id===Hn.processModule.module_id}));Xn.componentsByModule[e.name]=0,(0,me.vC)(e,ve.Qc,ve.R6,1).pipe((0,b.q)(1)).subscribe({next:function(n){var o,l,i,d,a=null!==n&&void 0!==n&&n.data?null===n||void 0===n?void 0:n.data:n;h.h.dispatch((0,y.mK)(Me.Z(we.Z("created_date"),[].concat((0,t.Z)(Vn.filter((function(e){return e.module_id!==Hn.processModule.module_id}))),(0,t.Z)(a))),ve.KI,to.map((function(e){return e.fields})).flat(1))),Xn.componentsByModule[e.name]=(0,q.now)(),e.lastUpdate=(0,q.now)(),e.count=null!==(o=null===n||void 0===n?void 0:n.total)&&void 0!==o?o:0,rl(!1),null===(l=Hn.processModule.module)||void 0===l||null===(i=l.options)||void 0===i||null===(d=i.supporting)||void 0===d||d.filter((function(n,o){var l,i;rl(!0),(0,me.vC)({id:n,name:null!==(l="".concat(null===Jn||void 0===Jn||null===(i=Jn.find((function(e){return e.id===n})))||void 0===i?void 0:i.name).concat(o))&&void 0!==l?l:"".concat(null===e||void 0===e?void 0:e.name).concat(o)},ve.Qc,ve.R6,1).pipe((0,b.q)(1)).subscribe({next:function(e){var n,l,i;(null===(n=Hn.processModule.module)||void 0===n||null===(l=n.options)||void 0===l||null===(i=l.supporting)||void 0===i?void 0:i.length)==o+1&&rl(!1)},error:function(){return rl(!1)}})}))},complete:function(){},error:function(){return rl(!1)}})},icon:a.createElement("img",{src:r.Fdh}),loading:ul})))))})):a.createElement("div",{className:u.listContainer,"app-variant-is-mobile":U.tq?"true":"false",style:{boxShadow:U.tq?"":1==(null===Ni||void 0===Ni||null===(Je=Ni.options)||void 0===Je?void 0:Je.popup)?"0 var(--app-color-white-lightest)":""}},a.createElement("div",{style:{display:"flex",justifyContent:"space-between",width:"100%"}},a.createElement("p",{className:u.stepTitleSmaller},null===Ni||void 0===Ni?void 0:Ni.name),a.createElement(K.Z,{clear:!0,clicked:function(){var n,o,l;rl(!0),null===(n=Hn.processModule.module)||void 0===n||null===(o=n.options)||void 0===o||null===(l=o.supporting)||void 0===l||l.filter((function(n,o){var l,i,t;rl(!0),(0,me.vC)({id:n,name:null!==(l="".concat(null===Jn||void 0===Jn||null===(i=Jn.find((function(e){return e.id===n})))||void 0===i?void 0:i.name).concat(o))&&void 0!==l?l:"".concat(null===(t=e)||void 0===t?void 0:t.name).concat(o)},ve.Qc,ve.R6,1).pipe((0,b.q)(1)).subscribe({next:function(e){var n,l,i,t;(null===(n=Hn.processModule.module)||void 0===n||null===(l=n.options)||void 0===l||null===(i=l.supporting)||void 0===i?void 0:i.length)==o+1&&(rl(!1),Ri(null===(t=Hn.processModule.steps[Hn.processModule.stepIndex-1])||void 0===t?void 0:t.id))},error:function(){return rl(!1)}})}))},icon:a.createElement("img",{src:r.Fdh}),loading:ul})),a.createElement("br",null),a.createElement("label",{className:u.stepGuidanceSmaller},null===Ni||void 0===Ni?void 0:Ni.guidance),Eo&&a.createElement(R.Z,{message:Eo,onClick:function(){return Co("")}}),a.createElement(c.U7,{blured:!1,scrollable:!1,isOpen:!U.tq&&(null!==(Ge=null===Ni||void 0===Ni||null===(Ve=Ni.options)||void 0===Ve?void 0:Ve.popup)&&void 0!==Ge&&Ge),shadowedContainerStyle:{width:U.tq?"100%":"70%",minWidth:"50%"}},a.createElement(We,{nextButtonClicked:Mo,step:Ni,setIsMandatoryError:go,isMandatoryError:yo,begunModule:Hn,companyData:Gn,blueprints:to,components:Vn,products:$n,authenticatedUser:oo,isEditing:Qn,companyUsersArray:Kn,usersArray:oi,setUsers:Xo,setPositions:nl,setIsCompleted:Jo,selectedComponent:Fo,goToNextStep:Ri,companyPositionsArray:lo,cart:io,allModules:Jn,editMode:si},a.createElement("div",{className:u.menuRightButtons}),et())),(!0!==(null===Ni||void 0===Ni||null===(Qe=Ni.options)||void 0===Qe?void 0:Qe.popup)||U.tq)&&a.createElement(We,{nextButtonClicked:Mo,step:Ni,setIsMandatoryError:go,isMandatoryError:yo,begunModule:Hn,companyData:Gn,blueprints:to,components:Vn,products:$n,authenticatedUser:oo,isEditing:Qn,companyUsersArray:Kn,usersArray:oi,setUsers:Xo,setPositions:nl,setIsCompleted:Jo,selectedComponent:Fo,goToNextStep:Ri,companyPositionsArray:lo,cart:io,allModules:Jn,editMode:si},a.createElement("div",{className:u.menuRightButtons}),et())),(null===Hn||void 0===Hn||null===(Xe=Hn.processModule)||void 0===Xe||null===(Ke=Xe.module)||void 0===Ke||null===($e=Ke.options)||void 0===$e?void 0:$e.ads)&&Mi&&0==(null===Ni||void 0===Ni||null===(en=Ni.component_blueprints)||void 0===en?void 0:en.filter((function(e){var n;return 1==(null===(n=e.options)||void 0===n?void 0:n.asModuleList)})).length)&&a.createElement("div",{style:{textAlign:"center"}},function(e){if(e){var n=Ce.Z([Ze.Z(we.Z("created_date"))])(Vn.filter((function(n){return n.module_id===e.id}))).filter((function(e){var n;return(null===(n=e.component_fields)||void 0===n?void 0:n.filter((function(e){var n;return"Status"===e.data_type_name&&!(e.value===(null===(n=Gn.misc_info)||void 0===n?void 0:n.lock)||"Closed"===e.value||"Cancelled"===e.value||"Hide"===e.value)})).length)>0})).map((function(e,n){var o,l,i,t,d=e.component_fields.find((function(e){var n,o,l;return"Link"===e.data_type_name&&((null!==(n=null===e||void 0===e?void 0:e.value)&&void 0!==n?n:"").includes("jpg")||(null!==(o=null===e||void 0===e?void 0:e.value)&&void 0!==o?o:"").includes("png")||(null!==(l=null===e||void 0===e?void 0:e.value)&&void 0!==l?l:"").includes("pdf"))}));return a.createElement("div",{key:n,className:u.imageCard,onClick:function(){}},d&&(null!==(o="".concat(null===d||void 0===d?void 0:d.value))&&void 0!==o&&o.includes("jpg")||null!==(l="".concat(null===d||void 0===d?void 0:d.value))&&void 0!==l&&l.includes("jpeg")||null!==(i="".concat(null===d||void 0===d?void 0:d.value))&&void 0!==i&&i.includes("png")||null!==(t="".concat(null===d||void 0===d?void 0:d.value))&&void 0!==t&&t.includes("pdf"))&&null!==d&&void 0!==d&&d.value.includes("pdf")?a.createElement("embed",{src:"".concat(null===d||void 0===d?void 0:d.value,"#toolbar=0&navpanes=0&scrollbar=0&zoom=100%"),width:"1000px",height:"1000px"}):a.createElement("img",{alt:"lg",src:null===d||void 0===d?void 0:d.value,style:{objectFit:"contain",height:"100vh",borderRadius:"5px"}}))}));return(null===n||void 0===n?void 0:n.length)>0&&a.createElement(c.U7,{isOpen:Mi,onClose:function(){localStorage.setItem("showAdsDate",(0,q.now)()),Si(!1)},backdropColor:!0,blured:!1,scrollable:!0,shadowedContainerStyle:{width:"60%",minWidth:"600px",backgroundColor:"var(--app-color-gray-lightest)"}},a.createElement("div",{className:u.center,style:{display:(null===n||void 0===n?void 0:n.length)>0?"":"none",flexDirection:"column"}},(null===n||void 0===n?void 0:n.length)>1?a.createElement(Be.tq,{slidesPerView:"auto",centeredSlides:!0,spaceBetween:200,initialSlide:1,pagination:{clickable:!0,dynamicBullets:!0},autoplay:{delay:1e4,disableOnInteraction:!0},modules:[qe.pt,qe.tl],className:"mySwiper"},(null===n||void 0===n?void 0:n.length)>0&&n.map((function(e,n){return a.createElement(Be.o5,{key:n,className:u.swiperslide},e)}))):n),a.createElement(c.pd,{title:"Do not show popup again?",style:{margin:"0px 20% 20px 20%",width:"auto",backgroundColor:"var(--app-color-gray-lightest)",padding:"10px 50px 10px 50px"},value:!Mi,toggleSelected:function(e){localStorage.setItem("showAdsDate",(0,q.now)()),localStorage.setItem("showAds",!e),Si(!1)}}))}return a.createElement(a.Fragment,null)}(Jn.find((function(e){var n,o,l;return e.id===(null===Hn||void 0===Hn||null===(n=Hn.processModule)||void 0===n||null===(o=n.module)||void 0===o||null===(l=o.options)||void 0===l?void 0:l.ads)})))),Ei&&a.createElement(ze.Z,{openModal:Ei,setOpenModal:Ci,dialogHandler:function(){Hn.processModule.back_array=[],Bl(Vn.filter((function(e){var n,o;return e.module_id===(null===Hn||void 0===Hn||null===(n=Hn.processModule)||void 0===n||null===(o=n.module)||void 0===o?void 0:o.id)}))),Ri(Hn.processModule.steps[0].id),vi(!1),Ci(!1)},title:"There are unsaved items, are you sure you want to cancel?",proceedTitle:"Yes",cancelTitle:"No, return back",loading:ul}),yi&&Hn.processModule.stepIndex>0&&a.createElement(c.U7,{isOpen:yi,onClose:function(){return gi(!1)},backdropColor:!0,blured:!0,scrollable:!0,shadowedContainerStyle:{width:U.tq?"100%":"40%"}},a.createElement("div",{style:{padding:"30px"}},a.createElement("p",{className:u.deleteText},"There were unsaved data for ".concat(Fo.title,". Do you want to restore them?")),a.createElement("div",{style:{display:"flex",justifyContent:"center"}},a.createElement(K.Z,{title:"Yes, restore",clicked:function(){h.h.dispatch((0,y.Xc)({show:!0,message:"Reverting to saved data from the cache. Press Save to permanently save these records. Cancel to revert back",color:"red",spinner:!1,bottom:!0})),Po.items=JSON.parse(localStorage.getItem("items")),Po.newStepComponents=JSON.parse(localStorage.getItem("newStepComponents")),localStorage.removeItem("transaction"),gi(!1)}}),a.createElement(K.Z,{title:"No, use the current data as is",light:!0,clicked:function(){localStorage.removeItem("transaction"),gi(!1)}})))),_l&&a.createElement(c.U7,{isOpen:p.v7,onClose:function(){},backdropColor:!0,blured:!0,scrollable:!0,shadowedContainerStyle:{width:U.tq?"100%":"20%"}},a.createElement("div",null,a.createElement("p",{className:u.deleteText},"Are you sure you want to delete ".concat(Fo.title,"?")),a.createElement("div",{style:{display:"flex",justifyContent:"center"}},a.createElement(K.Z,{title:"Delete",clicked:function(){Il(!0),(0,p.v7)(Fo.id).pipe((0,g.P)()).subscribe({next:function(){Il(!1),Uo(!1),hl(!1)},complete:function(){},error:function(){Il(!1),hl(!1)}})},loading:kl}),a.createElement(K.Z,{title:"No",light:!0,clicked:function(){return hl(!1)}})))),Zl&&a.createElement(c.U7,{isOpen:Zl,onClose:function(){},backdropColor:!0,blured:!1,scrollable:!0,shadowedContainerStyle:{width:U.tq?"100%":"20%"}},a.createElement("div",null,a.createElement("p",{className:u.deleteText},"Cannot delete ".concat(Fo.title,". Some transactions and master data are using this item")),a.createElement("div",{style:{display:"flex",justifyContent:"center"}},a.createElement(K.Z,{title:"Close",light:!0,clicked:function(){return wl(!1)}}))))),mi&&a.createElement(c.U7,{isOpen:mi,onClose:function(){},backdropColor:!0,blured:!1,scrollable:!0,shadowedContainerStyle:{width:U.tq?"100%":"80%"}},a.createElement(Te.default,{hasCloseIcon:!0,label:null===Hn||void 0===Hn||null===(nn=Hn.processModule)||void 0===nn||null===(on=nn.module)||void 0===on?void 0:on.name,withBack:!1,paymentPath:"begin-module",onClose:function(){return fi(!1)},companyData:Gn,subscriptionInfo:{user_id:oo.id,ref:Po.id,plan_price:null!==(ln=null===Po||void 0===Po?void 0:Po.plan)&&void 0!==ln?ln:0,currency:null!==(tn=null===Po||void 0===Po?void 0:Po.currency)&&void 0!==tn?tn:"PHP",plan:"CC-".concat(Po.id),total:null!==(dn=+(null===Po||void 0===Po?void 0:Po.total))&&void 0!==dn?dn:0,billable_users:[oo],duration:0,dlabel:Po.id},onError:function(e){Co(e),go(!0),fi(!1),h.h.dispatch((0,y.Xc)({show:!0,message:"Transaction was created but the selected payment mode encountered an issue. Please select another payment option. You may also manually attach your proof of payment",color:"red",bottom:!0})),h.h.dispatch((0,y.RV)({})),zi()}})),bl&&a.createElement(c.U7,{isOpen:bl,onClose:function(){return xl(!1)},backdropColor:!0,blured:!0,scrollable:!0,shadowedContainerStyle:{width:U.tq?"100%":"15%"}},a.createElement("div",null,a.createElement(c.jL,{ungrouped:!0,title:"nonmanager"===oo.user_type?"Type an email address to send copy of this transaction (optional)":"Select users to email this transaction (Optional)",columned:!0,withAckButton:!1},"nonmanager"===oo.user_type?a.createElement("input",{placeholder:"Use comma, no space, for multiple email addresses",className:u.emailInput,onChange:function(e){new RegExp(/^([a-z0-9!#$%&'*+/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*)(([, ]+[a-z0-9!#$%&'*+/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])\.([a-z0-9]([a-z0-9-]*[a-z0-9]))*)?)*$/).test(e.target.value)&&ai(e.target.value.split(","))}}):a.createElement(pe.Cm,{id:"Users",tagEmplacement:"inlined",searchable:!1,items:oi.filter((function(e){var n;return e.department===(null===(n=oo.departments[0])||void 0===n?void 0:n.name)})),groupedBy:"department",groupname:"department",triggerType:"chevron",initialSelectedValues:[],className:u.peoplePositionsSelect,inputClassName:u.peoplePositionsSelectInput,molclassname:u.peoplePositionsSelectMenuOverlay,moliclassname:u.peoplePositionsSelectMenuOverlayItem,onChange:function(e){e.length>0?ai(null===e||void 0===e?void 0:e.map((function(e){return null===e||void 0===e?void 0:e.user.email}))):ai([])}})),a.createElement("div",{style:{display:"flex",justifyContent:"center"}},a.createElement(K.Z,{title:"Back",light:!0,clicked:function(){return xl(!1)}}),a.createElement(K.Z,{disabled:!1===(null===Gn||void 0===Gn?void 0:Gn.start),title:Ro?"Update":Ho&&null!==(an=null===Hn||void 0===Hn||null===(un=Hn.processModule)||void 0===un||null===(rn=un.module)||void 0===rn||null===(sn=rn.options)||void 0===sn?void 0:sn.save)&&void 0!==an?an:"Save",loading:ul,style:{width:"160px",marginLeft:"0px"},clicked:function(){xl(!1),qi()}})))),Ao&&a.createElement(c.U7,{isOpen:Ao,onClose:function(){return Uo(!1)},hasCloseButton:!!U.tq||0==(null===Fo||void 0===Fo||null===(vn=Fo.component_fields)||void 0===vn?void 0:vn.length),backdropColor:!0,blured:!1,scrollable:!0,shadowedContainerStyle:{width:U.tq||il?"100%":"50%",height:"auto",minWidth:U.tq?"100%":"1000px"}},a.createElement("div",{"app-variant-is-mobile":U.tq?"true":"false",style:{display:"flex",justifyContent:"center",flexDirection:"column"}},a.createElement(Ye,{ref:Ai,begunModule:Hn,allModules:Jn,companyData:Gn,components:Vn,selectedComponent:Fo,companyUsersArray:Kn,print:il,step:r.Nbs,companyPositionsArray:lo}),(null===Fo||void 0===Fo||null===(cn=Fo.component_fields)||void 0===cn?void 0:cn.length)>0&&a.createElement("div",{style:{width:(U.tq,"100%"),display:"flex",flexDirection:U.tq?"column":"row",justifyContent:"center"}},a.createElement(K.Z,{title:"Close",style:{width:U.tq?"100%":"100px"},clicked:function(){Uo(!1),tl(!1)}}),(null===Fo||void 0===Fo||null===(pn=Fo.component_fields)||void 0===pn?void 0:pn.length)>0&&a.createElement(a.Fragment,null,(0,ve.cQ)(Qi,$i,Fo,oo,Hn,Gn)&&(null===Hn||void 0===Hn||null===(mn=Hn.processModule)||void 0===mn||null===(fn=mn.steps)||void 0===fn||null===(_n=fn.find((function(e){return e.component_blueprints.filter((function(e){return e.selected_fields.filter((function(e){return"Action Button"===e.data_type_name})).length>0})).length>0})))||void 0===_n||null===(hn=_n.component_blueprints.find((function(e){return e.selected_fields.filter((function(e){return"Action Button"===e.data_type_name})).length>0})))||void 0===hn?void 0:hn.selected_fields.filter((function(e){return"Action Button"===e.data_type_name})).map((function(e,n){var o,l,t,d;if("status"===e.options.action){var r,s,v,c,m,f,_,b,x,E=(null===Gn||void 0===Gn||null===(r=Gn.misc_info)||void 0===r||null===(s=r.status)||void 0===s?void 0:s.length)>0?null===Gn||void 0===Gn||null===(v=Gn.misc_info)||void 0===v?void 0:v.status:[{label:"Ongoing",value:"Ongoing"},{label:"Pending",value:"Pending"},{label:"Awaiting Payment",value:"Awaiting Payment"},{label:"Awaiting Fulfillment",value:"Awaiting Fulfillment"},{label:"Awaiting Shipment",value:"Awaiting Shipment"},{label:"Awaiting Pickup",value:"Awaiting Pickup"},{label:"Partially Shipped",value:"Partially Shipped"},{label:"Completed",value:"Completed"},{label:"Shipped",value:"Shipped"},{label:"Cancelled",value:"Cancelled"},{label:"Declined",value:"Declined"},{label:"Refunded",value:"Refunded"},{label:"Disputed",value:"Disputed"},{label:"Done",value:"Done"},{label:"Closed (Will lock Edit)",value:"Closed"}];if((null===Gn||void 0===Gn||null===(c=Gn.misc_info)||void 0===c||null===(m=c.rules)||void 0===m?void 0:m.length)>0)null===Gn||void 0===Gn||null===(x=Gn.misc_info)||void 0===x||x.rules.filter((function(e){return"status"===e.type})).filter((function(n){n.valueCondition===e.value&&(E="0"===n.allow?E.filter((function(e){return n.values.includes(e.value)})):E.filter((function(e){return!n.values.includes(e.value)})))}));return a.createElement("div",{key:n,style:{width:"100%",display:"user"===e.options.action&&null!==(f=Fo.component_fields)&&void 0!==f&&null!==(_=f.find((function(n){return n.procedure_step_blueprint_field_id===e.procedure_step_blueprint_field_id})))&&void 0!==_&&_.value?"none":""}},a.createElement(ne.Z,{titleProps:{fontSize:"16px",color:"var(--app-color-gray-light)"},className:u.multiselectComponent,key:n,visible:e.visible,mandatory:e.mandatory,value:null!==(b=e.value)&&void 0!==b?b:"",items:E,error:e.errors,onChange:function(n){var o,l,t,d;if(null!==(o=Hn.processModule)&&void 0!==o&&null!==(l=o.module)&&void 0!==l&&null!==(t=l.options)&&void 0!==t&&t.credits&&(n===(null===(d=Gn.options)||void 0===d?void 0:d.lock)||"Closed"===n)){var a,u,r,s,v,c,m,f,_,b,x=null===Hn||void 0===Hn||null===(a=Hn.processModule)||void 0===a||null===(u=a.steps)||void 0===u||null===(r=u.find((function(e){return e.component_blueprints.filter((function(e){return e.selected_fields.filter((function(e){return"Payments"===e.data_type_name})).length>0})).length>0})))||void 0===r||null===(s=r.component_blueprints.find((function(e){return e.selected_fields.filter((function(e){return"Payments"===e.data_type_name})).length>0})))||void 0===s?void 0:s.selected_fields.find((function(e){return"Payments"===e.data_type_name})),E=null===(v=Po.newStepComponents.concat(Po.components).find((function(e){return e.selected_fields.filter((function(e){var n;return e.field_name===(null===x||void 0===x||null===(n=x.options)||void 0===n?void 0:n.paymentField)})).length>0})))||void 0===v||null===(c=v.selected_fields)||void 0===c?void 0:c.find((function(e){var n;return e.field_name===(null===x||void 0===x||null===(n=x.options)||void 0===n?void 0:n.paymentField)})),C=0;if(null===(m=Hn.processModule)||void 0===m||null===(f=m.selectedComponent.payments)||void 0===f||!f.stripe_id)return Uo(!1),Hn.processModule.showDetail=!1,void h.h.dispatch((0,y.Xc)({show:!0,message:"Check support payment docs",color:"red",spinner:!1,bottom:!0}));if(!(+(null!==(_=null===E||void 0===E?void 0:E.value)&&void 0!==_?_:0)>0))return void h.h.dispatch((0,y.Xc)({show:!0,message:"No amount found",color:"red",spinner:!1,bottom:!0}));C=+(null!==(b=null===E||void 0===E?void 0:E.value)&&void 0!==b?b:0),"Cash"!==(null===x||void 0===x?void 0:x.value)&&(0,Ae.e_)({user_id:oo.id,id:(0,ve.mR)(),total:C,product:"CR-".concat(null===Fo||void 0===Fo?void 0:Fo.title),notes:"Wallet",quantity:1}).pipe((0,g.P)()).subscribe({next:function(){var e;oo.wallet=+(+(null!==(e=null===oo||void 0===oo?void 0:oo.wallet)&&void 0!==e?e:0)+C)}})}Gn.start=!0,rl(!0),(0,p.C0)({component_id:Fo.id,index:0,group:99,value:n,procedure_step_blueprint_field_id:e.procedure_step_blueprint_field_id}).subscribe({next:function(e){rl(!1),Uo(!1),h.h.dispatch((0,y.q4)((0,i.Z)((0,i.Z)({},Hn.processModule),{},{showDetail:!1})))},error:function(){},complete:function(){}})},fieldIcon:e.icon,fieldLabel:e.field_name,placeholder:"Select status..."}))}return a.createElement("div",{key:n,style:{display:"flex",flexDirection:U.tq?"column":"row"}},a.createElement(K.Z,{light:!0,title:e.field_name,loading:ul,clicked:function(){if("user"===e.options.action||"creator"===e.options.action){var n,o,l,t="user"===e.options.action?oo:Kn.find((function(e){var n;return e.id===(null===(n=Fo.created_by)||void 0===n?void 0:n.id)}));if(null!==(n=Hn.processModule)&&void 0!==n&&null!==(o=n.module)&&void 0!==o&&null!==(l=o.options)&&void 0!==l&&l.credits){var d,a,u,r,s,v,c,m,f,_=null===(d=Fo.component_fields)||void 0===d?void 0:d.find((function(e){return"Payments"===e.data_type_name&&(null===e||void 0===e?void 0:e.value)})),b=null===(a=Po.newStepComponents.concat(Po.components).find((function(e){return e.selected_fields.filter((function(e){var n;return e.field_name===(null===_||void 0===_||null===(n=_.options)||void 0===n?void 0:n.paymentField)})).length>0})))||void 0===a||null===(u=a.selected_fields)||void 0===u?void 0:u.find((function(e){var n;return e.field_name===(null===_||void 0===_||null===(n=_.options)||void 0===n?void 0:n.paymentField)}));if(!b)b=null===(f=Fo.component_fields)||void 0===f?void 0:f.find((function(e){var n;return e.field_name===(null===_||void 0===_||null===(n=_.options)||void 0===n?void 0:n.paymentField)}));var x=0;if(void 0===(null===t||void 0===t?void 0:t.wallet)||0===(null===t||void 0===t?void 0:t.wallet))return h.h.dispatch((0,y.Xc)({show:!0,message:"You need to setup funds for your wallet",color:"red",spinner:!1,bottom:!0})),Hn.processModule.showDetail=!1,void Uo(!1);if(+(null!==(r=null===(s=b)||void 0===s?void 0:s.value)&&void 0!==r?r:0)>0&&"Cash"===(null===_||void 0===_?void 0:_.value)){var E,C,Z,w;if((null!==(E=+(null===t||void 0===t?void 0:t.wallet))&&void 0!==E?E:0)<+(null===(C=b)||void 0===C?void 0:C.value))return h.h.dispatch((0,y.Xc)({show:!0,message:"Insufficient funds in wallet",color:"red",spinner:!1,bottom:!0})),Hn.processModule.showDetail=!1,void Uo(!1);x=null!==(Z=null===(w=b)||void 0===w?void 0:w.value)&&void 0!==Z?Z:0}else if(null===(v=Hn.processModule)||void 0===v||null===(c=v.selectedComponent)||void 0===c||null===(m=c.payments)||void 0===m||!m.stripe_id)return Uo(!1),Hn.processModule.showDetail=!1,void h.h.dispatch((0,y.Xc)({show:!0,message:"Check support payment docs",color:"red",spinner:!1,bottom:!0}));"Cash"===(null===_||void 0===_?void 0:_.value)&&(0,Ae.e_)({user_id:oo.id,id:(0,ve.mR)(),total:-x,product:"DB-".concat(null===Fo||void 0===Fo?void 0:Fo.title),notes:"Wallet",quantity:1}).pipe((0,g.P)()).subscribe({next:function(){var e;return t.wallet=+(+(null!==(e=null===t||void 0===t?void 0:t.wallet)&&void 0!==e?e:0)-x)},error:function(){return h.h.dispatch((0,y.Xc)({show:!0,message:"Purchase error encountered",color:"red",spinner:!1,bottom:!0}))}})}rl(!0),(0,p.C0)({component_id:Fo.id,index:0,group:99,value:t.id,procedure_step_blueprint_field_id:e.procedure_step_blueprint_field_id}).subscribe({next:function(e){(0,p.dn)(Fo.id,t.id).subscribe({next:function(e){rl(!1),Uo(!1),h.h.dispatch((0,y.q4)((0,i.Z)((0,i.Z)({},Hn.processModule),{},{showDetail:!1})))}})},error:function(){},complete:function(){}})}else"status"===e.options.action||"date"===e.options.action||e.options.action,rl(!1)},style:{backgroundColor:"green",color:"white",width:U.tq?"100%":"100px",display:"user"===e.options.action&&null!==(o=Fo.component_fields)&&void 0!==o&&null!==(l=o.find((function(n){return n.procedure_step_blueprint_field_id===e.procedure_step_blueprint_field_id})))&&void 0!==l&&l.value?"none":""}}),a.createElement(K.Z,{title:"Decline",light:!0,loading:ul,clicked:function(){var e,n;zo(!0),rl(!0);var o=Fo.component_fields.find((function(e){var n;return"People"===e.data_type_name&&!0===(null===(n=e.options)||void 0===n?void 0:n.calendar)}));(0,p.KL)((0,i.Z)((0,i.Z)({},Fo),{},{selected_fields:o?Fo.component_fields.filter((function(e){return e.id!==o.id})):Fo.component_fields,assigned_to:{id:""}}),Fo.id,null===(e=Fo.shared_users)||void 0===e?void 0:e.map((function(e){return null===e||void 0===e?void 0:e.id})),Fo.title,Fo.is_complete,null===(n=Fo.shared_positions)||void 0===n?void 0:n.map((function(e){return null===e||void 0===e?void 0:e.id}))).subscribe({error:function(e){h.h.dispatch((0,y.Xc)({show:!0,message:"Errors found",color:"red"}))},next:function(e){h.h.dispatch((0,y.aT)(Fo.id)),rl(!1),Uo(!1),h.h.dispatch((0,y.q4)((0,i.Z)((0,i.Z)({},Hn.processModule),{},{showDetail:!1})))}})},style:{backgroundColor:"red",color:"white",width:U.tq?"100%":"100px",display:"user"===e.options.action&&null!==(t=Fo.component_fields)&&void 0!==t&&null!==(d=t.find((function(n){return n.procedure_step_blueprint_field_id===e.procedure_step_blueprint_field_id})))&&void 0!==d&&d.value?"none":""}}))})))),!il&&a.createElement(K.Z,{title:"Print",style:{width:"100px",display:U.tq?"none":""},light:!0,clicked:function(){tl(!0)}}),il&&a.createElement(ee(),{trigger:function(){return a.createElement("button",{className:u.singleButton},"Print Now")},content:function(){return Ai.current}}),(void 0===Qi&&((null===(yn=Xi)||void 0===yn?void 0:yn.filter((function(e){return oo.positions.map((function(e){return e.id})).indexOf(e)>-1})).length)>0||(null===Ki||void 0===Ki?void 0:Ki.filter((function(e){return oo.positions.map((function(e){return e.id})).indexOf(e)>-1})).length)>0)||(void 0===Qi||"New"===Qi||"Show"===Qi)&&(null===Fo||void 0===Fo||null===(gn=Fo.created_by)||void 0===gn?void 0:gn.id)===(null===oo||void 0===oo?void 0:oo.id)||void 0!==Qi&&!("Hide"===Qi||"Closed"===Qi||Qi===(null===Gn||void 0===Gn||null===(bn=Gn.misc_info)||void 0===bn?void 0:bn.lock)||"Cancelled"===Qi)&&((null===(xn=Xi)||void 0===xn?void 0:xn.filter((function(e){return oo.positions.map((function(e){return e.id})).indexOf(e)>-1})).length)>0||(null===Ki||void 0===Ki?void 0:Ki.filter((function(e){return oo.positions.map((function(e){return e.id})).indexOf(e)>-1})).length)>0)&&(1!=(null===Hn||void 0===Hn||null===(En=Hn.processModule)||void 0===En||null===(Cn=En.module)||void 0===Cn||null===(Zn=Cn.options)||void 0===Zn?void 0:Zn.strict)||(null===Fo||void 0===Fo||null===(wn=Fo.created_by)||void 0===wn?void 0:wn.id)!==(null===oo||void 0===oo?void 0:oo.id))||!1===(null===Fo||void 0===Fo?void 0:Fo.is_complete)&&(null===Fo||void 0===Fo||null===(Mn=Fo.created_by)||void 0===Mn?void 0:Mn.id)===(null===oo||void 0===oo?void 0:oo.id))&&a.createElement(a.Fragment,null,a.createElement(K.Z,{title:"Edit",style:{backgroundColor:U.tq?"var(--app-color-blue)":"",color:U.tq?"white":"",width:U.tq?"100%":"100px",display:"trial_ended"===Gn.status||"inactive"===Gn.status?"none":0===(null===(Sn=Fo.component_fields)||void 0===Sn?void 0:Sn.filter((function(e){return"Action Button"===e.data_type_name&&"user"===e.options.action})).length)||0===(null===(kn=Fo.component_fields)||void 0===kn?void 0:kn.filter((function(e){return"Action Button"===e.data_type_name&&"user"===e.options.action&&void 0===e.value})).length)&&(null===(In=Fo.component_fields)||void 0===In?void 0:In.filter((function(e){return"Action Button"===e.data_type_name&&"user"===e.options.action&&e.value===(null===oo||void 0===oo?void 0:oo.id)})).length)>0?"":"none"},light:!0,clicked:function(){var e,n,o,l,i;Uo(!1),zo(!0),Hn.processModule.isUpdating=!0,(null===Hn||void 0===Hn||null===(e=Hn.processModule)||void 0===e||null===(n=e.steps)||void 0===n?void 0:n.length)>0&&(null===Hn||void 0===Hn||null===(o=Hn.processModule)||void 0===o||null===(l=o.steps)||void 0===l||l.filter((function(e){var n;return null===e||void 0===e||null===(n=e.component_blueprints)||void 0===n?void 0:n.filter((function(e){return e.selected_fields.filter((function(e){return e.value=void 0}))}))})));var d=[];xe.Z(Ee.Z("group"))(null!==(i=null===Fo||void 0===Fo?void 0:Fo.component_fields)&&void 0!==i?i:[]).map((function(e){d=[].concat((0,t.Z)(d),[{id:e.component_blueprint_id,temp_id:e.id,selected_fields:ke.Z(Ie.Z("group",e.group))(Fo.component_fields)}])})),Hn.processModule.steps.filter((function(e){e.component_blueprints.filter((function(e){var n,o,l,i,t,d;return(0==(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.asDashboard)||!(null!==e&&void 0!==e&&null!==(o=e.options)&&void 0!==o&&o.asDashboard))&&(0==(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.asReport)||!(null!==e&&void 0!==e&&null!==(i=e.options)&&void 0!==i&&i.asReport))&&(0==(null===e||void 0===e||null===(t=e.options)||void 0===t?void 0:t.asModuleList)||!(null!==e&&void 0!==e&&null!==(d=e.options)&&void 0!==d&&d.asModuleList))})).filter((function(e){e.selected_fields.filter((function(e){var n=Fo.component_fields.find((function(n){return n.field_name===e.field_name}));if(void 0!=n)e.value=n.value,e.group=n.group;else if("Record"===e.data_type_name){var o=Fo.component_fields.find((function(n){return n.field_name===e.options.name}));void 0!=o&&(e.value=o.value,e.value=o.group)}}))}))})),Po.components=d,Po.items=JSON.parse(JSON.stringify(Fo.component_items)),Po.newStepComponents=[],Gn.start=!0,Ri()}}),(null===Hn||void 0===Hn||null===(Pn=Hn.processModule)||void 0===Pn||null===(Nn=Pn.module)||void 0===Nn||null===(Tn=Nn.options)||void 0===Tn?void 0:Tn.canCancel)&&"New"===Fo.status&&!(null!==(Dn=Fo.assigned_to)&&void 0!==Dn&&Dn.id)&&a.createElement(K.Z,{title:"Cancel",style:{backgroundColor:"red",color:"white",width:U.tq?"100%":"100px"},clear:!0,clicked:function(){(0,p.tE)(null===Fo||void 0===Fo?void 0:Fo.id,"Cancelled").pipe((0,g.P)()).subscribe({next:function(e){}})}})),(null===Hn||void 0===Hn||null===(An=Hn.processModule)||void 0===An||null===(Un=An.module)||void 0===Un||null===(Ln=Un.options)||void 0===Ln?void 0:Ln.canCancel)&&("New"===Fo.status||"Unassigned"===Fo.status)&&!(null!==(On=Fo.assigned_to)&&void 0!==On&&On.id)&&a.createElement(K.Z,{loading:ul,title:"Cancel Transaction",style:{backgroundColor:"red",color:"white",width:"100%"},clear:!0,clicked:function(){rl(!0),(0,p.tE)(null===Fo||void 0===Fo?void 0:Fo.id,"Cancelled").pipe((0,g.P)()).subscribe({next:function(e){var n;if(rl(!1),null!==e&&void 0!==e&&null!==(n=e.data.payments)&&void 0!==n&&n.stripe_id){var o,l=Math.abs(+(null===e||void 0===e||null===(o=e.data.payments)||void 0===o?void 0:o.stripe_price));(0,Ae.e_)({user_id:oo.id,id:(0,ve.mR)(),total:l,product:"RF-".concat(Fo.title),notes:"Wallet",quantity:1}).pipe((0,g.P)()).subscribe({next:function(){var e;oo.wallet=+(+(null!==(e=null===oo||void 0===oo?void 0:oo.wallet)&&void 0!==e?e:0)+l),rl(!1),Uo(!1)}})}else rl(!1),Uo(!1),tl(!1)}})}}),!0===(null===(Rn=Hn.processModule.module)||void 0===Rn?void 0:Rn.options.copyOutputs)&&(null===Fo||void 0===Fo||null===(zn=Fo.created_by)||void 0===zn?void 0:zn.id)===oo.id&&a.createElement(K.Z,{title:"Duplicate",style:{width:U.tq?"100%":"",backgroundColor:U.tq?"var(--app-color-blue)":"",color:U.tq?"white":""},light:!0,clicked:function(){var e;Uo(!1),Oi();var n=[];xe.Z(Ee.Z("group"))(null!==(e=null===Fo||void 0===Fo?void 0:Fo.component_fields)&&void 0!==e?e:[]).map((function(e){n=[].concat((0,t.Z)(n),[{id:e.component_blueprint_id,temp_id:e.id,selected_fields:ke.Z(Ie.Z("group",e.group))(Fo.component_fields)}])})),Hn.processModule.steps.filter((function(e){e.component_blueprints.filter((function(e){e.selected_fields.filter((function(e){var n=Fo.component_fields.find((function(n){return n.procedure_step_blueprint_field_id===e.procedure_step_blueprint_field_id}));if(void 0!=n)"ID"===e.data_type_name||"Status"===e.data_type_name?e.value=void 0:e.value=n.value;else if("Record"===e.data_type_name){var o=Fo.component_fields.find((function(n){return n.field_name===e.options.name}));void 0!=o&&(e.value=o.value)}}))}))})),No({action:x._U.addModuleComponents,value:n}),No({action:x._U.setModuleItems,value:Fo.component_items}),zo(!1),Hn.processModule.isUpdating=!1,Wo({})}}),!0===(null===oo||void 0===oo?void 0:oo.is_admin)&&a.createElement(K.Z,{title:"Delete",style:{width:U.tq?"100%":"100px",backgroundColor:U.tq?"red":"",color:U.tq?"white":""},light:!0,clicked:function(){var e,n,o;if(!0===(null===Hn||void 0===Hn||null===(e=Hn.processModule)||void 0===e||null===(n=e.module)||void 0===n||null===(o=n.options)||void 0===o?void 0:o.isMaster)){var l=Vn.filter((function(e){return e.module_id!==Fo.module_id})).filter((function(e){return-1!=Jn.filter((function(e){var n;return!0===(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.isMaster)})).map((function(e){return e.id})).indexOf(e.module_id)})),i=Vn.filter((function(e){return-1!=Jn.filter((function(e){var n;return 1!=(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.isMaster)})).map((function(e){return e.id})).indexOf(e.module_id)})),t=l.filter((function(e){return e.component_fields.filter((function(e){return-1!=Fo.component_fields.map((function(e){return e.value})).indexOf(e.value)})).length>0})).length>0||i.filter((function(e){return e.component_items.filter((function(e){return-1!=Fo.component_fields.map((function(e){return e.value})).indexOf(e.item_code)})).length>0})).length>0||i.filter((function(e){return e.component_fields.filter((function(e){return"output"!==e.data_type&&-1!=Fo.component_fields.map((function(e){return e.value})).indexOf(e.value)})).length>0})).length>0;wl(t),hl(!t)}else hl(!0)}})))),Tl&&a.createElement(c.U7,{isOpen:Tl,hasCloseIcon:!0,onClose:function(){return ao?Pi("/"):Dl(!1)},backdropColor:!0,blured:!1,scrollable:!0,shadowedContainerStyle:{width:U.tq?"100%":"30%",height:"auto"}},a.createElement("div",{style:{textAlign:"center",padding:"20px"}},a.createElement("p",{className:u.modalTitle},null===(qn=Hn.processModule.module)||void 0===qn?void 0:qn.name),a.createElement("p",{className:u.modalSubTitle},null!==(Bn=null===Hn||void 0===Hn||null===(Fn=Hn.processModule)||void 0===Fn||null===(Wn=Fn.module)||void 0===Wn||null===(Yn=Wn.options)||void 0===Yn?void 0:Yn.message)&&void 0!==Bn?Bn:"Transaction saved"))))}))},63124:function(e,n,o){"use strict";o.d(n,{pz:function(){return nn},ZP:function(){return tn}});var l=o(87462),i=o(45987),t=o(4942),d=o(93433),a=o(1413),u=o(29439),r=o(67861),s=o(39518),v=o(11577),c=o(10103),p=o(65019),m=o(88550),f=o(88827),_=o(88374),h=o(96189),y=o(73500),g=o(6073),b=o(43984),x=o(23280),E=o(59401),C=o(41771),Z=o(93389),w=o(34710),M=o(49119),S=o(12308),k=o(65895),I=o(27436),P=o(63864),N=o(60534),T=o(63077),D=o(79492),A=o.n(D),U=o(89293),L=o(4358),O=o(1542),R=(o(83381),o(66918)),z=o(49523),q=o(25403),B=o(4292),F=o(9204),W=o(32086),Y=o(53431),j=o(68218),H=o(84634),J=o(35606),G=o(79544),V=o(98032),Q=o(62169),X=o(13397),K=o(88346),$=o(8284),ee=o(74369),ne=o(3616),oe=o(90421),le=o(7538),ie=o(77802),te=o(97606),de=(o(67055),o(71901),o(50981)),ae=o.n(de),ue=o(87424),re=o(27658),se=o(52902),ve=o(12075),ce=o(44408),pe=o(23910),me=(o(56120),o(37704),o(72666),o(68623),o(3863),o(95361),{ProcessModuleContainer:"ProcessModule_ProcessModuleContainer__FsiP8",modalLabelHeader:"ProcessModule_modalLabelHeader__RSEXx",processStepHost:"ProcessModule_processStepHost__jnVYj",processModuleContainer:"ProcessModule_processModuleContainer__T-efO",renderComponentContainer:"ProcessModule_renderComponentContainer__MQMoJ",accordionModuleContainer:"ProcessModule_accordionModuleContainer__QQQn5",detailContainer:"ProcessModule_detailContainer__yrECc",leftCardMargin:"ProcessModule_leftCardMargin__+5cc+",centeredCardMargin:"ProcessModule_centeredCardMargin__8ns+o",centeredSpinner:"ProcessModule_centeredSpinner__T1+25",emptyElementsSection:"ProcessModule_emptyElementsSection__LP79x",stepCounter:"ProcessModule_stepCounter__BLQiH",clockIcon:"ProcessModule_clockIcon__Iq90d",stepTitle:"ProcessModule_stepTitle__92AhY",stepGuidanceSmaller:"ProcessModule_stepGuidanceSmaller__fbek+",stepTitleSmaller:"ProcessModule_stepTitleSmaller__o-RAS",stepGuidance:"ProcessModule_stepGuidance__VN9ID",inputContainer:"ProcessModule_inputContainer__ov5HE",selectInput:"ProcessModule_selectInput__gIlsq",multiselectWithSearch:"ProcessModule_multiselectWithSearch__HPDWF",smoMultiselectParent:"ProcessModule_smoMultiselectParent__XMpxu",selectMenuItem:"ProcessModule_selectMenuItem__D9YuM",inputClassName:"ProcessModule_inputClassName__FaizJ",toggleMenuInputButton:"ProcessModule_toggleMenuInputButton__u2LB6",goToNextStep:"ProcessModule_goToNextStep__5FEFk",nextStepsContainer:"ProcessModule_nextStepsContainer__0lDZ4",nextStepImageContainer:"ProcessModule_nextStepImageContainer__ESZoP",nextStepWrapper:"ProcessModule_nextStepWrapper__8aQAo",tasksTableHost:"ProcessModule_tasksTableHost__jF7kU",headerContainer:"ProcessModule_headerContainer__B9M39",content:"ProcessModule_content__TwxRx","react-grid-layout":"ProcessModule_react-grid-layout__kuSHy",layoutJSON:"ProcessModule_layoutJSON__swsUL",columns:"ProcessModule_columns__74Ypn","react-grid-item":"ProcessModule_react-grid-item__SV1zr","react-grid-placeholder":"ProcessModule_react-grid-placeholder__RsO19",resizing:"ProcessModule_resizing__lsJHw",static:"ProcessModule_static__fjtpd",text:"ProcessModule_text__JRaDx",minMax:"ProcessModule_minMax__n6Nqc",add:"ProcessModule_add__73-R8","react-grid-dragHandleExample":"ProcessModule_react-grid-dragHandleExample__ifaCX",cssTransforms:"ProcessModule_cssTransforms__Tj9J0","react-draggable-dragging":"ProcessModule_react-draggable-dragging__df7gg","react-resizable-handle":"ProcessModule_react-resizable-handle__HFiOI",singleButton:"ProcessModule_singleButton__VBAVx",menuRightButtons:"ProcessModule_menuRightButtons__YMGk1",menuButtons:"ProcessModule_menuButtons__t3peI",menuAccordionButtons:"ProcessModule_menuAccordionButtons__IwPeb",detailLabel:"ProcessModule_detailLabel__ujv54",subLabel:"ProcessModule_subLabel__ljjWe",modalHeaderTitle:"ProcessModule_modalHeaderTitle__20ZkP",p:"ProcessModule_p__fq5W3",itemsTable:"ProcessModule_itemsTable__Lhi8m",sharesTable:"ProcessModule_sharesTable__0LY0Q",peoplePositionsSelect:"ProcessModule_peoplePositionsSelect__3PUST",peoplePositionsSelectInput:"ProcessModule_peoplePositionsSelectInput__uW3vb",peoplePositionsSelectMenuOverlay:"ProcessModule_peoplePositionsSelectMenuOverlay__7WF9K",peoplePositionsSelectMenuOverlayItem:"ProcessModule_peoplePositionsSelectMenuOverlayItem__thx5T",deleteText:"ProcessModule_deleteText__LHcJR",deleteButton:"ProcessModule_deleteButton__Vd-mb",searchContainer:"ProcessModule_searchContainer__7U0ti",searchInput:"ProcessModule_searchInput__21v+N",emailInput:"ProcessModule_emailInput__OSseh",actionsContainer:"ProcessModule_actionsContainer__dN4VO",detailButton:"ProcessModule_detailButton__hsMZQ",detailButtonTitleContainer:"ProcessModule_detailButtonTitleContainer__9vGQV",fetchingLatestP:"ProcessModule_fetchingLatestP__w43Ah",modalTitle:"ProcessModule_modalTitle__ZzDzz",modalSubTitle:"ProcessModule_modalSubTitle__iCPup",dropdownSelectComponent:"ProcessModule_dropdownSelectComponent__fwabj",dropdownSelectComponentL:"ProcessModule_dropdownSelectComponentL__UjHu+",dropdownSelectOperation:"ProcessModule_dropdownSelectOperation__Z0sof",dropdownSelectReport:"ProcessModule_dropdownSelectReport__VhkMx",cardTitle:"ProcessModule_cardTitle__5UI1u",customButton:"ProcessModule_customButton__EmZ3f",fieldRowContainer:"ProcessModule_fieldRowContainer__w-2m5",templateInformation:"ProcessModule_templateInformation__diTyj",emulatedFlexGap:"ProcessModule_emulatedFlexGap__0zLFx",selectAndMultiselectHost:"ProcessModule_selectAndMultiselectHost__heH79",selectAndMultiselectHostTiles:"ProcessModule_selectAndMultiselectHostTiles__iC2AB",section:"ProcessModule_section__wECKG",accordionContainer:"ProcessModule_accordionContainer__ivI1e",active:"ProcessModule_active__krZBG",title:"ProcessModule_title__ePgXX",customTitleInput:"ProcessModule_customTitleInput__ONvpq",icon:"ProcessModule_icon__OW9E6",loaderContainer:"ProcessModule_loaderContainer__zN3G3",host:"ProcessModule_host__95lCJ",iconsContainer:"ProcessModule_iconsContainer__ktO+d",rotate:"ProcessModule_rotate__gwBr5",fieldTypeInput:"ProcessModule_fieldTypeInput__+x8RA",fieldMapInput:"ProcessModule_fieldMapInput__TyyrY",fieldTypeDate:"ProcessModule_fieldTypeDate__yjKi1",labelInput:"ProcessModule_labelInput__HMbSI",accordion:"ProcessModule_accordion__Er3uD",regularAccordion:"ProcessModule_regularAccordion__FpzQa",singleInputContainer:"ProcessModule_singleInputContainer__jGXcH",dateInputContainer:"ProcessModule_dateInputContainer__gXUmg",inputContainerClassName:"ProcessModule_inputContainerClassName__T8Rwy",phoneIInput:"ProcessModule_phoneIInput__DrOHj",currencySelectContainer:"ProcessModule_currencySelectContainer__w+Q8U",currencySymbol:"ProcessModule_currencySymbol__hnqlD",currencySelectComponent:"ProcessModule_currencySelectComponent__DiSZQ",currencySelectMenuOverlayList:"ProcessModule_currencySelectMenuOverlayList__eWmgR",currencySelectMenuOverlayListItem:"ProcessModule_currencySelectMenuOverlayListItem__HJNGm",currencySearchInput:"ProcessModule_currencySearchInput__QNuK3",currencyClearControlsClassName:"ProcessModule_currencyClearControlsClassName__cQ2JL",currencyInputContainerClassName:"ProcessModule_currencyInputContainerClassName__jjeME",currencyInput:"ProcessModule_currencyInput__ockL5",peopleContainer:"ProcessModule_peopleContainer__qhRGZ",peopleBooleansOptions:"ProcessModule_peopleBooleansOptions__1QKZY",peoplePositionSelectContainer:"ProcessModule_peoplePositionSelectContainer__Dek6h",unfocusableWrapper:"ProcessModule_unfocusableWrapper__lYnko",menuOverlayList:"ProcessModule_menuOverlayList__stXtG",menuOverlayListItem:"ProcessModule_menuOverlayListItem__q5Cp8",menuOverlayListItemInput:"ProcessModule_menuOverlayListItemInput__mGtmf",menuOverlayListItemInputContainerClassName:"ProcessModule_menuOverlayListItemInputContainerClassName__c2qiO",openSelectWithSearchHost:"ProcessModule_openSelectWithSearchHost__GVLkU",openSelectWithSearch:"ProcessModule_openSelectWithSearch__zQUZm",dropdownClassContainer:"ProcessModule_dropdownClassContainer__4rFl4",dropdownHeightClassContainer:"ProcessModule_dropdownHeightClassContainer__6Rqku",fieldTypeTextarea:"ProcessModule_fieldTypeTextarea__9rSMB",fullLengthTextarea:"ProcessModule_fullLengthTextarea__eYuTp",filtersContainer:"ProcessModule_filtersContainer__ZXr-v",filtersContainerII:"ProcessModule_filtersContainerII__7cIxb",customMenuOverlayListItemCheckboxCheckedMark:"ProcessModule_customMenuOverlayListItemCheckboxCheckedMark__vi6VV",customMenuOverlayListItemNormalCheckedMark:"ProcessModule_customMenuOverlayListItemNormalCheckedMark__U5+ho",checkbox:"ProcessModule_checkbox__iHQvz",listContainer:"ProcessModule_listContainer__gwweI",tableHostMobile:"ProcessModule_tableHostMobile__j-DPP",tableHostSimple:"ProcessModule_tableHostSimple__Vct0M",action:"ProcessModule_action__iCvd1",mobileTable_ii:"ProcessModule_mobileTable_ii__vrooR",centerDiv:"ProcessModule_centerDiv__DT2hU",calendar:"ProcessModule_calendar__dkHMo",multiselectComponent:"ProcessModule_multiselectComponent__nKtu7",multiselectComponentNoBorder:"ProcessModule_multiselectComponentNoBorder__E-5tg",infoTitle:"ProcessModule_infoTitle__ZuUto",mappopup:"ProcessModule_mappopup__jQF6G",popup:"ProcessModule_popup__UhrxE",ratingsDiv:"ProcessModule_ratingsDiv__CRzxP",slider:"ProcessModule_slider__Le7zs",ratingsInput:"ProcessModule_ratingsInput__TJzIX",swiperslide:"ProcessModule_swiperslide__rHvXl",dashboardCard:"ProcessModule_dashboardCard__8GAEl",buttonsContainer:"ProcessModule_buttonsContainer__IZ5YN"}),fe=o(58535),_e=o(9825),he=o.n(_e),ye=o(79633),ge=o(94667),be=o(47144),xe=o.n(be),Ee=o(75105),Ce=o(66180),Ze=o.n(Ce),we=o(29960),Me=o(13721),Se=o(20777),ke=o(91426),Ie=o(48630),Pe=o(32588),Ne=(o(68140),o(43077)),Te=o(51481),De=o(31266),Ae=o(84952),Ue=o(30519),Le=o(35307),Oe=o(41757);e=o.hmd(e);var Re=o(456),ze=["height","start","onClick"],qe=["height","start","onClick"],Be=["height","start","onClick"],Fe=(0,r.memo)((function(e){var n,o,l,i,t,d=e.step,s=e.isMandatoryError,c=e.nextButtonClicked,p=e.setIsMandatoryError,m=e.begunModule,f=e.companyData,_=e.components,y=e.isEditing,g=e.companyUsersArray,b=e.products,x=e.selectedComponent,E=e.goToNextStep,C=e.authenticatedUser,w=(e.setIsCompleted,e.companyPositionsArray),S=e.blueprints,I=e.allModules,N=e.editMode,T=e.isProcessorOnly,D=((0,M.WidthProvider)(M.Responsive),(0,r.useState)(null===(n=null===x||void 0===x?void 0:x.is_complete)||void 0===n||n)),A=((0,u.Z)(D,1)[0],[]),U=(null===d||void 0===d||null===(o=d.component_blueprints)||void 0===o?void 0:o.length)>0?null===d||void 0===d?void 0:d.component_blueprints.map((function(e,n){var o=e.selected_fields.find((function(e){return"Template"===e.data_type_name&&1==e.visible})),l=e.selected_fields.find((function(e){return"Video"===e.data_type_name&&1==e.visible}));return o?r.createElement("div",{key:n,style:{padding:"0px"}},r.createElement(k.Z,{templateName:o.field_name,nextButtonClicked:c,isMandatoryError:s,blueprintIndex:n,setIsMandatoryError:p,component:e,companyData:f,components:_,products:b,selectedComponent:x})):e.selected_fields.filter((function(e){return 1==e.visible})).length>0?r.createElement("div",{key:n,className:me.renderComponentContainer},r.createElement(Ye,{editMode:N,nextButtonClicked:c,isMandatoryError:s,blueprintIndex:n,setIsMandatoryError:p,blueprints:S,component:e,companyData:f,components:_,allModules:I,products:b,authenticatedUser:C,selectedComponent:x,companyUsersArray:g,companyPositionsArray:w,begunModule:m,isProcessorOnly:T}),(null===x||void 0===x?void 0:x.id)&&(null===l||void 0===l?void 0:l.value)&&ae()(null===l||void 0===l?void 0:l.value)<=(0,de.now)()&&(0,de.now)()<ae()(null===l||void 0===l?void 0:l.value).add("minutes",10)&&r.createElement(Ye,{editMode:N,nextButtonClicked:c,isMandatoryError:s,blueprintIndex:n,setIsMandatoryError:p,blueprints:S,component:(0,a.Z)((0,a.Z)({},e),{},{name:"Video Call",selected_fields:[(0,a.Z)((0,a.Z)({},l),{},{options:(0,a.Z)((0,a.Z)({},l.options),{},{start:!0})})]}),companyData:f,components:_,allModules:I,products:b,authenticatedUser:C,selectedComponent:x,companyUsersArray:g,companyPositionsArray:w,begunModule:m,shouldDisplay:!0,isEnabled:!0})):r.createElement("div",{key:n,className:me.emptyElementsSection})})):r.createElement("div",{className:me.emptyElementsSection}),L=(0,r.useState)({currentBreakpoint:"lg",compactType:"vertical",mounted:!1,layouts:{lg:d.options.layout},editing:y}),O=(0,u.Z)(L,2),R=O[0],z=O[1];return r.createElement("div",{style:{width:"inherit"}},r.createElement(h.j3,{permissions:[h.po.processes.create]},r.createElement("button",{onClick:function(){A=R.layouts.lg.map((function(e){return(0,a.Z)((0,a.Z)({},e),{},{static:!1})})),z((0,a.Z)((0,a.Z)({},R),{},{layouts:{lg:A},editing:!R.editing}))},hidden:!R.editing},"Edit Layout"),r.createElement("button",{onClick:function(){var e=A.map((function(e){return(0,a.Z)((0,a.Z)({},e),{},{static:!0})}));(0,Z.T5)({options:(0,a.Z)((0,a.Z)({},d.options),{},{layout:e})},d.id,!0).pipe((0,v.P)()).subscribe({next:function(n){z((0,a.Z)((0,a.Z)({},R),{},{layouts:{lg:e},editing:!R.editing}))},error:function(e){z((0,a.Z)((0,a.Z)({},R),{},{layouts:{lg:d.options.layout},editing:!R.editing}))}})},hidden:!R.editing},"Save Layout")),U,(null===(l=m.processModule.module)||void 0===l?void 0:l.options.forSpecificUsers)&&(null===d||void 0===d?void 0:d.is_end)&&r.createElement("div",{style:{height:"100px"}}),(null===d||void 0===d||null===(i=d.pathway_steps)||void 0===i?void 0:i.length)>0&&function(){var e=d.pathway_steps.map((function(e){return{label:"".concat(e.name),value:e.id}})),n=g.map((function(e){return{label:"".concat(e.first_name," ").concat(e.last_name),value:e.id}}));return r.createElement("div",{className:me.emptyElementsSection,style:{width:"60%",padding:"20px 20px 20px 20px",height:"".concat(n.length*n.length>4?70:200,"px")}},r.createElement(P.Z,{visible:!0,mandatory:!1,items:e,onChange:function(e){E(e)},placeholder:"Continue to this step..."}))}(),(null===d||void 0===d||null===(t=d.pathway_processes)||void 0===t?void 0:t.length)>0&&function(){var e=d.pathway_processes.map((function(e){return{label:"".concat(e.name),value:e.id}})),n=g.map((function(e){return{label:"".concat(e.first_name," ").concat(e.last_name),value:e.id}}));return r.createElement("div",{className:me.emptyElementsSection,style:{width:"60%",padding:"20px 20px 20px 20px",height:"".concat(n.length*n.length>4?70:200,"px")}},r.createElement(P.Z,{visible:!0,mandatory:!1,items:e,onChange:function(){},placeholder:"Continue to this process..."}))}(),e.children)})),We=r.forwardRef((function(e,n){var o,l,i,s,v,c,p,m,f,_,h,g=e.begunModule,b=e.allModules,x=e.companyData,E=e.setSelectedComponent,C=e.selectedComponent,Z=e.companyUsersArray,w=e.companyPositionsArray,M=e.print,I=e.components,P=void 0===I?[]:I,N=(e.user,e.bypassCustom),T=void 0!==N&&N,D=e.goto,A=(0,r.useState)([]),U=(0,u.Z)(A,2),L=U[0],O=U[1],R=null===g||void 0===g||null===(o=g.processModule)||void 0===o||null===(l=o.completeSteps)||void 0===l?void 0:l.find((function(e){var n;return(null===(n=e.component_blueprints)||void 0===n?void 0:n.filter((function(e){return e.selected_fields.filter((function(e){return"Template"===e.data_type_name})).length>0})).length)>0&&0==T}));(0,r.useEffect)((function(){var o,l,i,t=[];if(j.Z(H.Z("group"))(null!==(o=null===C||void 0===C?void 0:C.component_fields)&&void 0!==o?o:[]).map((function(e){t=[].concat((0,d.Z)(t),[{id:e.component_blueprint_id,selected_fields:K.Z($.Z("group",e.group))(C.component_fields)}])})),(null===g||void 0===g||null===(l=g.processModule)||void 0===l||null===(i=l.completeSteps)||void 0===i?void 0:i.length)>0){var u=[r.createElement("div",{key:0,style:{display:null!==e&&void 0!==e&&e.noHeader?"none":""}},M&&r.createElement("p",{className:me.detailLabel},x.display_name)),R?r.createElement("div",{key:1}):z()];if(g.processModule.completeSteps.map((function(e){e.component_blueprints.filter((function(e){var n,o;return 0==(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.asModuleList)||void 0==(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.asModuleList)})).map((function(n,o){var l,i,s,v,c,p,m=null!==(l=null===C||void 0===C||null===(i=C.component_fields)||void 0===i?void 0:i.filter((function(e){return e.component_blueprint_id===n.id})))&&void 0!==l?l:[],f=!(null===m||void 0===m||!m.find((function(e){return!(""===e.value||void 0===e.value||null===e.value)})));(null===m||void 0===m?void 0:m.length)>0&&(null===(s=n.selected_fields)||void 0===s?void 0:s.filter((function(e){return 1==e.visible})).length)>0&&(null!==n.options?!1!==n.options.allowMultipleInputs&&void 0!==n.options.allowMultipleInputs&&null!==n.options.allowMultipleInputs||(u=[].concat((0,d.Z)(u),[r.createElement("div",{key:u.length,style:{display:f?"":"none"}},r.createElement(Xe,{step:e,isInherited:!1,nextButtonClicked:function(){},isMandatoryError:!1,stepId:e.id,blueprintIndex:o,setIsMandatoryError:function(){},component:(0,a.Z)((0,a.Z)({},n),{},{created_date:C.created_date,values:null!==(v=null===(c=t.find((function(e){return e.id===n.id})))||void 0===c?void 0:c.selected_fields)&&void 0!==v?v:[]}),begunModule:g,allModules:b,companyData:x,components:t,allComponents:P,companyUsersArray:Z,status:null===C||void 0===C?void 0:C.status,selectedComponent:C}))])):u=[].concat((0,d.Z)(u),[r.createElement("div",{key:u.length},r.createElement(Xe,{step:e,isInherited:!1,nextButtonClicked:function(){},isMandatoryError:!1,stepId:e.id,blueprintIndex:o,setIsMandatoryError:function(){},component:(0,a.Z)((0,a.Z)({},n),{},{created_date:C.created_date,values:null===(p=t.find((function(e){return e.id===n.id})))||void 0===p?void 0:p.selected_fields}),begunModule:g,allModules:b,companyData:x,components:t,allComponents:P,companyUsersArray:Z,status:null===C||void 0===C?void 0:C.status,selectedComponent:C}))]))}))})),R)return void O(r.createElement(k.C,{ref:n,begunModule:g,allModules:b,companyData:x,components:P,selectedComponent:C,setSelectedComponent:E,companyUsersArray:Z,companyPositionsArray:w,goto:D},u,r.createElement(en,{component:C}),r.createElement($e,{component:C})));O([].concat((0,d.Z)(u),[r.createElement(en,{component:C,key:u.length+1}),r.createElement($e,{component:C,key:u.length+2})]))}}),[C]);var z=function(){var e,n,o,l,i,d,u,s,v,c,p,m,f,_,h,b,E=null===g||void 0===g||null===(e=g.processModule)||void 0===e||null===(n=e.completeSteps)||void 0===n?void 0:n.find((function(e){return e.component_blueprints.filter((function(e){var n;return(null===(n=e.selected_fields)||void 0===n?void 0:n.filter((function(e){var n;return"item_code"===(null===(n=e.options)||void 0===n?void 0:n.mapToItem)||"Transactions Field"===e.data_type_name||"Template"===e.data_type_name})).length)>0})).length>0})),Z=null!==(o=null!==(l=null!==(i=null===E||void 0===E||null===(d=E.component_blueprints)||void 0===d?void 0:d.find((function(e){var n;return(null===(n=e.selected_fields)||void 0===n?void 0:n.filter((function(e){var n;return"item_code"===(null===(n=e.options)||void 0===n?void 0:n.mapToItem)})).length)>0})))&&void 0!==i?i:null===E||void 0===E||null===(u=E.component_blueprints)||void 0===u?void 0:u.find((function(e){var n;return(null===(n=e.selected_fields)||void 0===n?void 0:n.filter((function(e){return"Transactions Field"===e.data_type_name})).length)>0})))&&void 0!==l?l:null===E||void 0===E||null===(s=E.component_blueprints)||void 0===s?void 0:s.find((function(e){var n;return(null===(n=e.selected_fields)||void 0===n?void 0:n.filter((function(e){return"Template"===e.data_type_name})).length)>0})))&&void 0!==o?o:void 0,w=Z?null===(v=Z.selected_fields)||void 0===v||null===(c=v.find((function(e){return"Template"===e.data_type_name})))||void 0===c?void 0:c.field_name:"",M=null===x||void 0===x||null===(p=x.misc_info)||void 0===p||null===(m=p.templatesData)||void 0===m?void 0:m.find((function(e){return e.name===w})),k=M?(null===M||void 0===M||null===(f=M.tlist)||void 0===f?void 0:f.length)>0?null===M||void 0===M?void 0:M.tlist:null===(_=M.config)||void 0===_?void 0:_.filter((function(e){return"Text"===e.value||"Number"===e.value||"Connector"===e.value})):Z?Z.selected_fields.filter((function(e){var n,o,l;return 1==e.visible&&!(""===(null===(n=e.options)||void 0===n?void 0:n.mapToItem)||void 0==(null===(o=e.options)||void 0===o?void 0:o.mapToItem)||null==(null===(l=e.options)||void 0===l?void 0:l.mapToItem))})):[];return(null===C||void 0===C||null===(h=C.component_items)||void 0===h?void 0:h.length)>0&&r.createElement("div",{className:me.accordionContainer,style:{border:y.tq?"0":"",marginTop:"10px",padding:y.tq?"10px":"",backgroundColor:"var(--app-color-gray-lightest)"}},r.createElement(S.default,{modern:!0,className:me.listContainer,isReport:!1,"app-variant-is-mobile":"true",title:"Items",columns:k?k.map((function(e){return M?e.label:e.field_name})):["Product ID","Quantity","Price"],list:null===C||void 0===C||null===(b=C.component_items)||void 0===b?void 0:b.map((function(e){var n,o,l,i,d,u,s,v,c,p,m,f,_,h,y,g,b,x,E,C,Z,w,S,I,P,N,T,D,A;if((null===M||void 0===M||null===(n=M.tlist)||void 0===n?void 0:n.length)>0){var U={};return M.tlist.filter((function(n){U=(0,a.Z)((0,a.Z)({},U),{},(0,t.Z)({},null===n||void 0===n?void 0:n.label,e[null===n||void 0===n?void 0:n.key]))})),U}var L=e.item_code,O=e.quantity,R=null!==(o=e.alt_value)&&void 0!==o?o:0,z=null!==(l=e.value)&&void 0!==l?l:0,q=null!==(i=e.total)&&void 0!==i?i:0;return void 0!=M?(y={},(0,t.Z)(y,null!==(d=null===(u=M.config.find((function(e){return"item_code"===e.key})))||void 0===u?void 0:u.label)&&void 0!==d?d:"Item Code",r.createElement("div",{className:me.templateInformation},L)),(0,t.Z)(y,null!==(s=null===(v=M.config.find((function(e){return"value"===e.key})))||void 0===v?void 0:v.label)&&void 0!==s?s:"Price",r.createElement("div",{className:me.templateInformation},z)),(0,t.Z)(y,null!==(c=null===(p=M.config.find((function(e){return"total"===e.key})))||void 0===p?void 0:p.label)&&void 0!==c?c:"Total",r.createElement("div",{className:me.templateInformation},q)),(0,t.Z)(y,null!==(m=null===(f=M.config.find((function(e){return"quantity"===e.key})))||void 0===f?void 0:f.label)&&void 0!==m?m:"Quantity",r.createElement("div",{className:me.templateInformation},O)),(0,t.Z)(y,null!==(_=null===(h=M.config.find((function(e){return"alt_value"===e.key})))||void 0===h?void 0:h.label)&&void 0!==_?_:"Discount",r.createElement("div",{className:me.templateInformation},R)),(0,t.Z)(y,"id",e.id),y):null!==k&&void 0!==k&&k.find((function(e){var n,o,l,i,t;return"item_code"===(null===(n=e.options)||void 0===n?void 0:n.mapToItem)||"value"===(null===(o=e.options)||void 0===o?void 0:o.mapToItem)||"total"===(null===(l=e.options)||void 0===l?void 0:l.mapToItem)||"quantity"===(null===(i=e.options)||void 0===i?void 0:i.mapToItem)||"alt_value"===(null===(t=e.options)||void 0===t?void 0:t.mapToItem)}))?(D={},(0,t.Z)(D,null!==(g=null===(b=k.find((function(e){var n;return"item_code"===(null===(n=e.options)||void 0===n?void 0:n.mapToItem)})))||void 0===b?void 0:b.field_name)&&void 0!==g?g:"Product ID",r.createElement("div",{className:me.templateInformation},L)),(0,t.Z)(D,null!==(x=null===(E=k.find((function(e){var n;return"value"===(null===(n=e.options)||void 0===n?void 0:n.mapToItem)})))||void 0===E?void 0:E.field_name)&&void 0!==x?x:"Price",r.createElement("div",{className:me.templateInformation},z)),(0,t.Z)(D,null!==(C=null===(Z=k.find((function(e){var n;return"total"===(null===(n=e.options)||void 0===n?void 0:n.mapToItem)})))||void 0===Z?void 0:Z.field_name)&&void 0!==C?C:"Total",r.createElement("div",{className:me.templateInformation},q)),(0,t.Z)(D,null!==(w=null===(S=k.find((function(e){var n;return"quantity"===(null===(n=e.options)||void 0===n?void 0:n.mapToItem)})))||void 0===S?void 0:S.field_name)&&void 0!==w?w:"Quantity",r.createElement("div",{className:me.templateInformation},O)),(0,t.Z)(D,null!==(I=null===(P=k.find((function(e){var n;return"alt_value"===(null===(n=e.options)||void 0===n?void 0:n.mapToItem)})))||void 0===P?void 0:P.field_name)&&void 0!==I?I:"Discount",r.createElement("div",{className:me.templateInformation},R)),(0,t.Z)(D,null!==(N=null===(T=k.find((function(e){var n;return"alt_value"===(null===(n=e.options)||void 0===n?void 0:n.mapToItem)})))||void 0===T?void 0:T.field_name)&&void 0!==N?N:"Actual",r.createElement("div",{className:me.templateInformation},R)),(0,t.Z)(D,"id",e.id),D):(A={},(0,t.Z)(A,"Product ID",L),(0,t.Z)(A,"Quantity",O),(0,t.Z)(A,"Price",z),A)})),onListItemClick:function(e){}}))},q=r.createElement("div",null,((null===C||void 0===C||null===(i=C.shared_users)||void 0===i?void 0:i.length)>0||(null===C||void 0===C||null===(s=C.shared_positions)||void 0===s?void 0:s.length)>0)&&r.createElement("div",{className:me.accordionContainer},r.createElement("p",{className:me.cardTitle},"Shares"),r.createElement("div",{style:{display:"flex"}},(null===C||void 0===C||null===(v=C.shared_positions)||void 0===v?void 0:v.length)>0&&r.createElement(S.default,{className:me.sharesTable,columns:["Position"],list:null===C||void 0===C||null===(c=C.shared_positions)||void 0===c?void 0:c.map((function(e){var n,o=w.find((function(n){return n.value===e.id}));return(0,t.Z)({},"Position",null!==(n=null===o||void 0===o?void 0:o.label)&&void 0!==n?n:"")}))}),(null===C||void 0===C||null===(p=C.shared_users)||void 0===p?void 0:p.length)>0&&r.createElement(S.default,{className:me.sharesTable,columns:["User"],list:null===C||void 0===C||null===(m=C.shared_users)||void 0===m?void 0:m.map((function(e){var n=Z.find((function(n){return n.id===e.id}));return(0,t.Z)({},"User","".concat(null===n||void 0===n?void 0:n.first_name," ").concat(null===n||void 0===n?void 0:n.last_name))}))}))));return r.createElement("div",{ref:n,style:{userSelect:"none",padding:M?"50px 120px 50px 100px":"50px 10px 10px 10px",alignSelf:"center",width:"100%"}},L,(null===g||void 0===g||null===(f=g.processModule)||void 0===f||null===(_=f.module)||void 0===_||null===(h=_.options)||void 0===h?void 0:h.forSpecificUsers)&&q)})),Ye=function(e){var n,o,l,i,t,s,v,c,p,f,_,g,b,x,E,Z,w,M,S,k,P,N,T,D=e.allModules,A=e.component,L=e.blueprintIndex,O=e.nextButtonClicked,R=e.setIsMandatoryError,z=e.companyUsersArray,q=e.companyData,B=e.components,F=e.products,Y=e.authenticatedUser,j=e.begunModule,H=e.blueprints,J=e.selectedComponent,G=e.companyPositionsArray,V=e.editMode,Q=e.isProcessorOnly,X=e.shouldDisplay,K=void 0===X?(!1===(null===A||void 0===A||null===(n=A.options)||void 0===n?void 0:n.useCustomTemplate)||void 0===(null===A||void 0===A||null===(o=A.options)||void 0===o?void 0:o.useCustomTemplate))&&(void 0===(null===A||void 0===A||null===(l=A.options)||void 0===l?void 0:l.showOnly)||(!((null===A||void 0===A||null===(i=A.options)||void 0===i||null===(t=i.showOnly)||void 0===t?void 0:t.length)>0)||(null===A||void 0===A||null===(s=A.options)||void 0===s||null===(v=s.showOnly)||void 0===v?void 0:v.filter((function(e){var n;return(null===Y||void 0===Y||null===(n=Y.positions)||void 0===n?void 0:n.filter((function(n){return n.id===e})).length)>0})).length)>0)):X,ee=e.isEnabled,ne=void 0===ee?void 0===(null===J||void 0===J?void 0:J.id)||((null===J||void 0===J||null===(c=J.created_by)||void 0===c?void 0:c.id)===Y.id||(void 0===(null===j||void 0===j||null===(p=j.processModule)||void 0===p||null===(f=p.module)||void 0===f||null===(_=f.options)||void 0===_?void 0:_.strict)||0==(null===j||void 0===j||null===(g=j.processModule)||void 0===g||null===(b=g.module)||void 0===b||null===(x=b.options)||void 0===x?void 0:x.strict)||void 0!==(null===A||void 0===A||null===(E=A.options)||void 0===E?void 0:E.showOnly)&&((null===A||void 0===A||null===(Z=A.options)||void 0===Z||null===(w=Z.showOnly)||void 0===w?void 0:w.length)>0&&(null===A||void 0===A||null===(M=A.options)||void 0===M||null===(S=M.showOnly)||void 0===S?void 0:S.filter((function(e){var n;return(null===Y||void 0===Y||null===(n=Y.positions)||void 0===n?void 0:n.filter((function(n){return n.id===e})).length)>0})).length)>0))):ee,oe=(0,m.pQ)(),le=(0,u.Z)(oe,2),ie=le[0],te=le[1],de=(0,r.useState)(me.active),ae=(0,u.Z)(de,2),ue=ae[0],re=(ae[1],(0,r.useState)(!1)),se=(0,u.Z)(re,2),ve=se[0],ce=se[1],pe=(0,r.useState)(""),fe=(0,u.Z)(pe,2),_e=fe[0],he=fe[1],ye=(0,r.useRef)(null),ge=null===(k=ie.currentStep)||void 0===k?void 0:k.component_blueprints.findIndex((function(e){return e.id===A.id}));(0,r.useEffect)((function(){be()}),[O]);var be=function(){var e;null!==A&&void 0!==A&&null!==(e=A.selected_fields)&&void 0!==e&&e.some((function(e){var n;return!0===e.mandatory&&!0===e.visible&&(!e.value||(null===e||void 0===e||null===(n=e.value)||void 0===n?void 0:n.length)<1)}))?R(!0):R(!1)},Ee=(0,r.useCallback)((function(){var e,n,o,l=(0,d.Z)(null!==(e=null===(n=ie.currentStep)||void 0===n?void 0:n.component_blueprints)&&void 0!==e?e:[]),i=null===(o=l[ge])||void 0===o?void 0:o.selected_fields;be(),l[ge].selected_fields=null===i||void 0===i?void 0:i.map((function(e){return(0,a.Z)((0,a.Z)({},e),{},{errors:!0!==e.mandatory||e.value?"":"Field is mandatory"})})),te({action:m._U.setComponentBlueprints,value:l}),te({action:m._U.setModuleNewStepComponents,value:l})}),[ie.currentStep]),Ce=function(e,n){var o,l,i,t=(0,d.Z)(null!==(o=null===(l=ie.currentStep)||void 0===l?void 0:l.component_blueprints)&&void 0!==o?o:[]),a=null===(i=t[ge])||void 0===i?void 0:i.selected_fields[n];"Number"===(null===a||void 0===a?void 0:a.data_type_name)?Number(+e)?a.value=e:""===e&&(a.value=""):null!==a&&void 0!==a&&a.data_type_name&&(a.value=e),null!==a&&void 0!==a&&a.value&&a.mandatory&&(a.errors=""),be(),te({action:m._U.setComponentBlueprints,value:t}),te({action:m._U.setModuleNewStepComponents,value:t})},Ze=(0,r.useCallback)((function(e,n,o){var l,i,t,a=(0,d.Z)(null!==(l=null===(i=ie.currentStep)||void 0===i?void 0:i.component_blueprints)&&void 0!==l?l:[]),u=null===(t=a[ge])||void 0===t?void 0:t.selected_fields[n];u.options.country_code=null===e||void 0===e?void 0:e.countryCode,u.options.country_name=null===e||void 0===e?void 0:e.name,u.options.country_prefix="+".concat(null===e||void 0===e?void 0:e.dialCode),te({action:m._U.setComponentBlueprints,value:a}),te({action:m._U.setModuleNewStepComponents,value:a}),Ce(o,n)}),[ie]),we=(0,r.useCallback)((function(e,n){var o,l,i,t=(0,d.Z)(null!==(o=null===(l=ie.currentStep)||void 0===l?void 0:l.component_blueprints)&&void 0!==o?o:[]),a=null===(i=t[ge])||void 0===i?void 0:i.selected_fields[n];a.options.currency_type=null===e||void 0===e?void 0:e.label,a.options.currency_value=null===e||void 0===e?void 0:e.value,a.options.symbol=null===e||void 0===e?void 0:e.symbol,te({action:m._U.setComponentBlueprints,value:t}),te({action:m._U.setModuleNewStepComponents,value:t})}),[ie]),Me=A.selected_fields.filter((function(e){return"Transaction List"===e.data_type_name||"Step List"===e.data_type_name||"Pin"===e.data_type_name})).length>0;return r.createElement("div",{id:"accordion",className:me.accordionModuleContainer,key:L,style:{width:Me?"100%":"",border:Q&&ne?"4px solid var(--app-color-gray-lighter)":Me?"0":"",boxShadow:y.tq?Me?"0 var(--app-color-white-lightest)":"":1==(null===C.Nbs||void 0===C.Nbs||null===(P=C.Nbs.options)||void 0===P?void 0:P.popup)?"0 var(--app-color-white-lightest)":"",display:K?"":"none",pointerEvents:ne?"":"none"}},r.createElement("div",{className:xe()(me.accordionContainer,ue),"app-variant-has-error":_e?"error":"",style:{border:y.tq?"0":"",padding:y.tq?"0":"",margin:y.tq?"0":""}},r.createElement("div",{ref:ye,style:{maxHeight:ue===me.active?"":"0px",display:"flex"},className:me.content},r.createElement(Je,{blueprints:H,component:A,selectedComponent:J,handleInputChange:Ce,handlePrefixChange:Ze,handleCurrencyChange:we,checkIfAreMandatoryErrored:be,handleCheckbox:function(e,n){var o,l,i,t=(0,d.Z)(null!==(o=null===(l=ie.currentStep)||void 0===l?void 0:l.component_blueprints)&&void 0!==o?o:[]),a=null===(i=t[ge])||void 0===i?void 0:i.selected_fields[n];a&&(a.value=e,null!==a&&void 0!==a&&a.value&&a.mandatory&&(a.errors=""),te({action:m._U.setComponentBlueprints,value:t}),te({action:m._U.setModuleNewStepComponents,value:t}),be())},isInherited:!1,indexInContextArray:ge,handleLocationChange:function(e,n){var o,l,i,t=(0,d.Z)(null!==(o=null===(l=ie.currentStep)||void 0===l?void 0:l.component_blueprints)&&void 0!==o?o:[]);(null===(i=t[ge])||void 0===i?void 0:i.selected_fields[n]).value="".concat(e.lat,", ").concat(e.lng),te({action:m._U.setComponentBlueprints,value:t}),te({action:m._U.setModuleNewStepComponents,value:t})},processTaskContext:ie,begunModule:j,setTaskProcessContext:te,companyData:q,companyUsersArray:z,companyPositionsArray:G,components:B,products:F,allModules:D,editMode:V})),r.createElement("div",{style:{paddingLeft:"10px"}},r.createElement("div",{onClick:function(){var e;if(Ee(),null===A||void 0===A||null===(e=A.selected_fields)||void 0===e||!e.some((function(e){var n;return!0===e.mandatory&&!0===e.visible&&(!e.value||(null===e||void 0===e||null===(n=e.value)||void 0===n?void 0:n.length)<1)}))){var n={},o=A.selected_fields.map((function(e){var o,l;if("Formula"===e.data_type_name){var i,t,d,u,r=(0,U.LV)(e.options,A.selected_fields.filter((function(n){return e.options.list.includes(n.field_name)})),ie.components,null!==(i=ie.items)&&void 0!==i?i:[],null!==(t=null===ie||void 0===ie?void 0:ie.newStepComponents)&&void 0!==t?t:[]);if(null!==e&&void 0!==e&&null!==(d=e.options)&&void 0!==d&&d.mapToItem)n[null===e||void 0===e||null===(u=e.options)||void 0===u?void 0:u.mapToItem]="".concat(r);return(0,a.Z)((0,a.Z)({},e),{},{value:"".concat(r)})}null!==e&&void 0!==e&&null!==(o=e.options)&&void 0!==o&&o.mapToItem&&(n[null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.mapToItem]="".concat(null===e||void 0===e?void 0:e.value));return e}));if(Object.keys(n).length>0){var l,i=null===(l=ie.items)||void 0===l?void 0:l.find((function(e){return e.item_code===n.item_code}));void 0===i?te({action:m._U.addModuleItems,value:(0,a.Z)((0,a.Z)({},n),{},{id:(0,U.mR)()})}):0==n.quantity?te({action:m._U.removeModuleItems,value:i}):te({action:m._U.updateModuleItems,value:(0,a.Z)((0,a.Z)({},i),n)})}else{var t=JSON.parse(JSON.stringify((0,a.Z)((0,a.Z)({},A),{},{temp_id:(0,U.mR)(),selected_fields:o})));te({action:m._U.addModuleComponents,value:t})}ce(!1),he(""),A.selected_fields.map((function(e,n){Ce("",n)})),te({action:m._U.setModuleNewStepComponents,value:(0,d.Z)(W.Z((function(e){return e.selected_fields.filter((function(e){return""===e.value})).length>0}),(0,d.Z)(W.Z($.Z("id",A.id))(ie.newStepComponents))))})}},className:me.iconsContainer,style:{display:null===(null===A||void 0===A?void 0:A.options)?"none":!0===(null===A||void 0===A||null===(N=A.options)||void 0===N?void 0:N.allowMultipleInputs)?"":"none"}},ve?r.createElement("div",{className:me.loaderContainer},r.createElement(Se.Z,{type:y.G6?"Watch":"Puff",color:"var(--app-color-gray-dark)",secondaryColor:"gray",radius:32,height:32,width:"32px"})):r.createElement(h.zx,{light:!0},r.createElement(C.mm_,null))))),_e&&(null===_e||void 0===_e||null===(T=_e.errors)||void 0===T?void 0:T.title)&&r.createElement(I.Z,{message:_e.errors.title}),_e&&(null===_e||void 0===_e?void 0:_e.message)&&r.createElement(I.Z,{message:_e.message}))};function je(e){return null!==e&&void 0!==e&&e.country_prefix?null===e||void 0===e?void 0:e.country_prefix:null!==e&&void 0!==e&&e.currency_value?(null===e||void 0===e?void 0:e.currency_value)+" ":""}var He=function(e,n,o,l,i){var t,a,u,r=null===(u=(0,d.Z)(null!==(t=null===(a=i.currentStep)||void 0===a?void 0:a.component_blueprints)&&void 0!==t?t:[])[o])||void 0===u?void 0:u.selected_fields[l];switch(e){case"Link":!function(e){var n;try{n=new URL(e)}catch(o){return!1}return"http:"===n.protocol||"https:"===n.protocol}(n)?r.errors="This field should contain a link!":r.errors="";break;case"E-mail":case"Email":new RegExp(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/).test(n)?r.errors="":r.errors="This field should contain an valid email address!";break;case"Phone":new RegExp(/^[+]?[(]?[0-9]{3}[)]?[-\s.]?[0-9]{3}[-\s.]?[0-9]{4,6}$/im).test(n)?r.errors="":r.errors="This field should contain an valid phone number!";break;case"Email Recipient":new RegExp(/^([a-z0-9!#$%&'*+/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*)(([, ]+[a-z0-9!#$%&'*+/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])\.([a-z0-9]([a-z0-9-]*[a-z0-9]))*)?)*$/).test(n)?r.errors="":r.errors="This field should contain an valid email address!"}},Je=(0,r.memo)((function(e){var n,o,p,f,_,g=e.component,b=e.selectedComponent,x=e.handleInputChange,E=e.indexInContextArray,Z=e.handleCheckbox,M=e.processTaskContext,k=e.setTaskProcessContext,I=e.isInherited,T=e.checkIfAreMandatoryErrored,D=e.handlePrefixChange,A=e.handleCurrencyChange,O=e.handleLocationChange,R=e.companyData,F=e.components,Y=(e.products,e.begunModule),Q=e.blueprints,X=e.companyUsersArray,K=e.companyPositionsArray,$=e.allModules,te=e.editMode,ue=(0,r.useState)(X.map((function(e){return{label:e.first_name+" "+e.last_name,value:e.id,user:e}}))),re=(0,u.Z)(ue,2),_e=re[0],be=re[1],xe=(0,s.v9)((function(e){return e.authReducer})),Ce=xe.authenticatedUser,Se=(0,s.v9)((function(e){return e.sessionReducer})),Oe=Se.user,Re=(0,s.v9)((function(e){return e.flowReducer})),Fe=Re.currentLocation,We=Re.allTasks,Ye=(Re.allCompletedTasksPaginated,(0,r.useState)(!1)),Je=(0,u.Z)(Ye,2),Ve=Je[0],Xe=Je[1],Ke=(0,r.useState)(new Date),$e=(0,u.Z)(Ke,2),en=$e[0],on=$e[1],ln=(0,r.useState)([new Date,new Date(ae()().add(7,"days"))]),tn=(0,u.Z)(ln,2),dn=tn[0],an=tn[1],un=(0,u.Z)(dn,2),rn=un[0],sn=un[1],vn=(0,r.useState)(""),cn=(0,u.Z)(vn,2),pn=cn[0],mn=cn[1],fn=(0,r.useState)([{label:"",value:""}]),_n=(0,u.Z)(fn,2),hn=_n[0],yn=_n[1],gn=(0,r.useState)(!0),bn=(0,u.Z)(gn,2),xn=bn[0],En=bn[1],Cn=(0,r.useState)(!0),Zn=(0,u.Z)(Cn,2),wn=Zn[0],Mn=Zn[1],Sn=(0,r.useState)({source:!1,destination:!1}),kn=(0,u.Z)(Sn,2),In=kn[0],Pn=kn[1],Nn=(0,r.useState)("50px"),Tn=(0,u.Z)(Nn,2),Dn=Tn[0],An=Tn[1],Un=(0,r.useState)(Array(12).fill("")),Ln=(0,u.Z)(Un,2),On=Ln[0],Rn=Ln[1],zn=(0,r.useState)({candidates:[]}),qn=(0,u.Z)(zn,2),Bn=qn[0],Fn=qn[1],Wn=(0,r.useState)(!1),Yn=(0,u.Z)(Wn,2),jn=Yn[0],Hn=Yn[1],Jn=(0,r.useState)({}),Gn=(0,u.Z)(Jn,2),Vn=Gn[0],Qn=Gn[1],Xn=(0,r.useState)("day"),Kn=(0,u.Z)(Xn,2),$n=Kn[0],eo=Kn[1],no=(0,r.useState)({}),oo=(0,u.Z)(no,2),lo=oo[0],io=oo[1],to=((0,r.useRef)(),(0,r.useState)(!1)),ao=(0,u.Z)(to,2),uo=ao[0],ro=ao[1],so=function(){ro(!uo)},vo=function(e,n){on(e),x(e,n)},co=(0,r.useCallback)((function(e){void 0!==e&&(0==_e.length?Xe(!0):Xe(!1),(0,Ee.n0)(e).pipe((0,v.P)()).subscribe({next:function(e){be(e),Xe(!1)}}))}),[]),po=(0,r.useCallback)((function(){0==K.length?Xe(!0):Xe(!1),(0,w.hj)().pipe((0,v.P)(1)).subscribe({})}),[]),mo=(0,r.useCallback)((function(e){var n;if(0!=(null===e||void 0===e||null===(n=e.analyze)||void 0===n?void 0:n.length)&&void 0!=(null===e||void 0===e?void 0:e.analyze)){var o={role:"user",parts:[{text:e.analyze}]};1==(null===e||void 0===e?void 0:e.current)?o.parts=[].concat((0,d.Z)(o.parts),[{text:JSON.stringify({table:"Transaction",data:(0,a.Z)((0,a.Z)((0,a.Z)({},M.components.map((function(e){var n={};return e.selected_fields.filter((function(e){return n=(0,a.Z)((0,a.Z)({},n),{},(0,t.Z)({},e.field_name,e.value))})),n}))),M.newStepComponents.map((function(e){var n={};return e.selected_fields.filter((function(e){return n=(0,a.Z)((0,a.Z)({},n),{},(0,t.Z)({},e.field_name,e.value))})),n}))),{},{items:M.items.map((function(e){return{item:e.item_code,quantity:+e.quantity,value:e.value}}))})})}]):(void 0!==e.module_id&&(o.parts=[].concat((0,d.Z)(o.parts),[{text:JSON.stringify({table:$.find((function(n){return n.id===e.module_id})).name,data:F.filter((function(n){return n.module_id===e.module_id})).map((function(e){var n,o={};return e.component_fields.filter((function(e){return o=(0,a.Z)((0,a.Z)({},o),{},(0,t.Z)({},e.field_name,e.value))})),(0,a.Z)((0,a.Z)({},o),{},{created_date:e.created_date,created_by:null===(n=e.created_by)||void 0===n?void 0:n.id,items:null===e||void 0===e?void 0:e.component_items.map((function(e){return{item:e.item_code,quantity:+e.quantity,value:e.value}}))})}))})}])),void 0!==e.module2_id&&(o.parts=[].concat((0,d.Z)(o.parts),[{text:JSON.stringify({table:$.find((function(n){return n.id===e.module2_id})).name,data:F.filter((function(n){return n.module_id===e.module2_id})).map((function(e){var n,o={};return e.component_fields.filter((function(e){return o=(0,a.Z)((0,a.Z)({},o),{},(0,t.Z)({},e.field_name,e.value))})),(0,a.Z)((0,a.Z)({},o),{},{created_date:e.created_date,created_by:null===(n=e.created_by)||void 0===n?void 0:n.id,items:null===e||void 0===e?void 0:e.component_items.map((function(e){return{item:e.item_code,quantity:+e.quantity,value:e.value}}))})}))})}])),void 0!==e.module3_id&&(o.parts=[].concat((0,d.Z)(o.parts),[{text:JSON.stringify({table:$.find((function(n){return n.id===e.module3_id})).name,data:F.filter((function(n){return n.module_id===e.module3_id})).map((function(e){var n,o={};return e.component_fields.filter((function(e){return o=(0,a.Z)((0,a.Z)({},o),{},(0,t.Z)({},e.field_name,e.value))})),(0,a.Z)((0,a.Z)({},o),{},{created_date:e.created_date,created_by:null===(n=e.created_by)||void 0===n?void 0:n.id,items:null===e||void 0===e?void 0:e.component_items.map((function(e){return{item:e.item_code,quantity:+e.quantity,value:e.value}}))})}))})}]))),Fn({candidates:[]}),Xe(!0),(0,ge.hd)(JSON.stringify(o)).pipe((0,v.P)()).subscribe({next:function(e){Xe(!1),Fn(e)},error:function(e){Fn({candidates:[{content:{parts:[{text:JSON.stringify(e)}]}}]}),Xe(!1)}})}else Fn({candidates:[{content:{parts:[{text:"Enter a question that I could answer"}]}}]})}),[]),fo=function(e){var n;return null===M||void 0===M||null===(n=M.items)||void 0===n?void 0:n.map((function(n){var o={};return Object.keys(e.map).map((function(l){var i;o=(0,a.Z)((0,a.Z)({},o),{},(i={},(0,t.Z)(i,e.map[l],n[l]),(0,t.Z)(i,"item",n),i))})),o}))},_o=function(e){var n=e.field_name;return g.selected_fields.findIndex((function(e){return e.field_name===n}))},ho=function(e){var n=g.selected_fields.filter((function(e){return"Info"===e.data_type_name})),o=F.find((function(n){return n.id===e}));n.map((function(n){var l;null===n||void 0===n||null===(l=n.options)||void 0===l||l.list.map((function(l){var i,t,d=null===(i=o.component_fields)||void 0===i?void 0:i.find((function(e){return e.field_name===l})),a=_o({field_name:l});-1!=a&&(null===(t=o.component_fields)||void 0===t?void 0:t.length)>0&&(g.selected_fields[a].value=d?d.value:"",n.value=e)}))})),g.selected_fields.filter((function(e){return"Global"===e.data_type_name&&1==e.visible})).map((function(e){var n,l,i=null===(n=o.component_fields)||void 0===n?void 0:n.find((function(n){return n.field_name===e.field_name})),t=_o({field_name:e.field_name});-1!=t&&(null===(l=o.component_fields)||void 0===l?void 0:l.length)>0&&i&&(g.selected_fields[t].value=null===i||void 0===i?void 0:i.value)}))},yo=function(e){var n,o,l,i,t,d,a,u=null===(n=Y.processModule.module)||void 0===n||null===(o=n.options)||void 0===o?void 0:o.global;u||(u=null===(l=M.components.find((function(n){return n.selected_fields.filter((function(n){var o,l;return"Global"===n.data_type_name&&1==n.visible&&n.field_name===(null===(o=g.selected_fields.find((function(n){return n.data_type_name===e&&1==n.visible})))||void 0===o||null===(l=o.options)||void 0===l?void 0:l.global)})).length>0})))||void 0===l||null===(i=l.selected_fields.find((function(e){return"Global"===e.data_type_name})))||void 0===i?void 0:i.value);u||(u=null===(t=z.Z(q.Z("component_blueprints"),B.Z)(Y.processModule.completeSteps).find((function(n){return n.selected_fields.filter((function(n){var o,l;return n.field_name===(null===(o=g.selected_fields.find((function(n){return n.data_type_name===e&&1==n.visible})))||void 0===o||null===(l=o.options)||void 0===l?void 0:l.global)&&"Value"===n.data_type_name})).length>0})))||void 0===t||null===(d=t.selected_fields.find((function(e){return"Value"===e.data_type_name})))||void 0===d||null===(a=d.options)||void 0===a?void 0:a.value);return u?F.filter((function(n){return n.component_fields.filter((function(n){var o,l;return n.value===u&&n.field_name===(null===(o=g.selected_fields.find((function(n){return n.data_type_name===e})))||void 0===o||null===(l=o.options)||void 0===l?void 0:l.global)})).length>0})):F},go=(null===g||void 0===g||null===(n=g.selected_fields)||void 0===n?void 0:n.length)>0&&(null===g||void 0===g||null===(o=g.selected_fields)||void 0===o?void 0:o.sort((function(e,n){return e.index-n.index})).map((function(e,n){var o,s,p,f,_,w,$,ue,re,ge,xe,Se,Re,Ye,Je,Ke,$e,ln,tn,dn,un,vn,cn,fn,_n,gn,bn,Cn,Zn,Sn,kn,Nn,Tn,Un,Ln,zn,qn,Wn,Yn,Jn,Gn,Xn,Kn,no,oo,to,ao,ro,go,bo,xo,Eo,Co,Zo,wo,Mo,So,ko,Io,Po,No,To="";if((null===e||void 0===e||null===(o=e.options)||void 0===o||null===(s=o.fieldToMatch)||void 0===s?void 0:s.length)>0){var Do,Ao,Uo,Lo,Oo,Ro,zo,qo,Bo,Fo,Wo,Yo,jo,Ho,Jo,Go,Vo,Qo,Xo,Ko,$o,el,nl,ol,ll=g.selected_fields.find((function(n){var o;return n.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.fieldToMatch)}));if(ll&&(null===e||void 0===e||null===(Do=e.options)||void 0===Do||null===(Ao=Do.valueToMatch)||void 0===Ao?void 0:Ao.length)>0&&(null===e||void 0===e||null===(Uo=e.options)||void 0===Uo||null===(Lo=Uo.actionToPerform)||void 0===Lo?void 0:Lo.length)>0&&(null===e||void 0===e||null===(Oo=e.options)||void 0===Oo||null===(Ro=Oo.initialState)||void 0===Ro?void 0:Ro.length)>0)if(null!==e&&void 0!==e&&null!==(Bo=e.options)&&void 0!==Bo&&null!==(Fo=Bo.valueToMatch)&&void 0!==Fo&&Fo.split(",").includes(null===ll||void 0===ll?void 0:ll.value))"hide"===(null===e||void 0===e||null===(Wo=e.options)||void 0===Wo?void 0:Wo.actionToPerform)?e.visible=!1:"visible"===(null===e||void 0===e||null===(Yo=e.options)||void 0===Yo?void 0:Yo.actionToPerform)?e.visible=!0:"mandatory"===(null===e||void 0===e||null===(jo=e.options)||void 0===jo?void 0:jo.actionToPerform)?(e.mandatory=!0,e.visible=!0):"optional"===(null===e||void 0===e||null===(Ho=e.options)||void 0===Ho?void 0:Ho.actionToPerform)?(e.mandatory=!1,e.visible=!0):"visman"===(null===e||void 0===e||null===(Jo=e.options)||void 0===Jo?void 0:Jo.actionToPerform)?(e.mandatory=!0,e.visible=!0):"disable"===(null===e||void 0===e||null===(Go=e.options)||void 0===Go?void 0:Go.actionToPerform)&&(To="none");else"hidden"===(null===e||void 0===e||null===(Vo=e.options)||void 0===Vo?void 0:Vo.initialState)?e.visible=!1:"visible"===(null===e||void 0===e||null===(Qo=e.options)||void 0===Qo?void 0:Qo.initialState)?e.visible=!0:"mandatory"===(null===e||void 0===e||null===(Xo=e.options)||void 0===Xo?void 0:Xo.initialState)?(e.mandatory=!0,e.visible=!0):"optional"===(null===e||void 0===e||null===(Ko=e.options)||void 0===Ko?void 0:Ko.initialState)?(e.mandatory=!1,e.visible=!0):"visman"===(null===e||void 0===e||null===($o=e.options)||void 0===$o?void 0:$o.actionToPerform)?(e.mandatory=!0,e.visible=!0):"disable"===(null===e||void 0===e||null===(el=e.options)||void 0===el?void 0:el.actionToPerform)&&(To="none");if(ll&&(null===e||void 0===e||null===(zo=e.options)||void 0===zo||null===(qo=zo.valueToMatch2)||void 0===qo?void 0:qo.length)>0)if(null!==e&&void 0!==e&&null!==(nl=e.options)&&void 0!==nl&&null!==(ol=nl.valueToMatch2)&&void 0!==ol&&ol.split(",").includes(null===ll||void 0===ll?void 0:ll.value)){var il,tl,dl,al,ul,rl,sl,vl,cl,pl,ml,fl;if((null===e||void 0===e||null===(il=e.options)||void 0===il||null===(tl=il.value)||void 0===tl?void 0:tl.length)>0)if("Text"===(null===e||void 0===e?void 0:e.data_type_name))e.value=null===e||void 0===e||null===(ul=e.options)||void 0===ul?void 0:ul.value;else if("Date"===(null===e||void 0===e?void 0:e.data_type_name)){var _l,hl,yl,gl,bl,xl;if(0==(null===e||void 0===e||null===(_l=e.value)||void 0===_l?void 0:_l.length)||void 0==(null===e||void 0===e?void 0:e.value))"today"===(null===e||void 0===e||null===(hl=e.options)||void 0===hl?void 0:hl.value)?e.value=new Date(ae()((0,de.now)())):"tomorrow"===(null===e||void 0===e||null===(yl=e.options)||void 0===yl?void 0:yl.value)?e.value=new Date(ae()((0,de.now)()).add(1,"days")):"week"===(null===e||void 0===e||null===(gl=e.options)||void 0===gl?void 0:gl.value)?e.value=new Date(ae()((0,de.now)()).add(1,"weeks")):"month"===(null===e||void 0===e||null===(bl=e.options)||void 0===bl?void 0:bl.value)&&(e.value=new Date(ae()((0,de.now)()).add(1,"months"))),"none"===(null===e||void 0===e||null===(xl=e.options)||void 0===xl?void 0:xl.value)&&(e.value=void 0)}if((null===e||void 0===e||null===(dl=e.options)||void 0===dl||null===(al=dl.actionToPerform2)||void 0===al?void 0:al.length)>0)"hide"===(null===e||void 0===e||null===(rl=e.options)||void 0===rl?void 0:rl.actionToPerform2)?e.visible=!1:"visible"===(null===e||void 0===e||null===(sl=e.options)||void 0===sl?void 0:sl.actionToPerform2)?e.visible=!0:"mandatory"===(null===e||void 0===e||null===(vl=e.options)||void 0===vl?void 0:vl.actionToPerform2)?(e.mandatory=!0,e.visible=!0):"optional"===(null===e||void 0===e||null===(cl=e.options)||void 0===cl?void 0:cl.actionToPerform2)?(e.mandatory=!1,e.visible=!0):"visman"===(null===e||void 0===e||null===(pl=e.options)||void 0===pl?void 0:pl.actionToPerform2)?(e.mandatory=!0,e.visible=!0):"disable"===(null===e||void 0===e||null===(ml=e.options)||void 0===ml?void 0:ml.actionToPerform2)?To="none":"enable"===(null===e||void 0===e||null===(fl=e.options)||void 0===fl?void 0:fl.actionToPerform2)&&(To="")}}if("Record"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(p=e.options)||void 0===p||null===(f=p.component_id)||void 0===f?void 0:f.length)>0){var El,Cl,Zl,wl,Ml,Sl,kl,Il,Pl,Nl,Tl,Dl,Al,Ul,Ll,Ol,Rl,zl,ql,Bl,Fl,Wl,Yl,jl,Hl,Jl,Gl,Vl,Ql,Xl,Kl,$l,ei,ni,oi,li,ii,ti,di,ai,ui,ri,si=(null!==e&&void 0!==e&&null!==(El=e.options)&&void 0!==El&&El.global?yo(null===e||void 0===e?void 0:e.data_type_name):F).filter((function(n){var o;return n.component_fields.filter((function(n){var o;return n.component_blueprint_id===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.component_id)})).length>0||n.module_id===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.module_id)})),vi=si.map((function(n){var o,l,i,d,a="";return null===e||void 0===e||null===(o=e.options)||void 0===o||null===(l=o.names)||void 0===l||l.map((function(e){var o,l;return a=""===a?null===(o=n.component_fields.find((function(n){return n.field_name===e})))||void 0===o?void 0:o.value:"".concat(a," ").concat(null===(l=n.component_fields.find((function(n){return n.field_name===e})))||void 0===l?void 0:l.value)})),(0,t.Z)({label:""===a?n.title:a,value:n.id,component:n},null===e||void 0===e||null===(i=e.options)||void 0===i?void 0:i.output,null===(d=n.component_fields.find((function(n){var o;return n.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.output)})))||void 0===d?void 0:d.value)}));if((null===e||void 0===e||null===(Cl=e.options)||void 0===Cl||null===(Zl=Cl.filters)||void 0===Zl?void 0:Zl.length)>0){if((null===si||void 0===si?void 0:si.length)>0)if(e.value){if(ri=si.find((function(n){return n.component_fields.find((function(n){var o;return n.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.output)&&n.value===e.value}))}))){var ci,pi,mi;ho(null===(ci=ri)||void 0===ci?void 0:ci.id);var fi=(0,d.Z)(null!==(pi=null===(mi=M.currentStep)||void 0===mi?void 0:mi.component_blueprints)&&void 0!==pi?pi:[]);fi&&(M.newStepComponents=fi)}}else if(1==vi.length&&(ri=si[0])){var _i,hi,yi;ho(null===(_i=ri)||void 0===_i?void 0:_i.id);var gi=(0,d.Z)(null!==(hi=null===(yi=M.currentStep)||void 0===yi?void 0:yi.component_blueprints)&&void 0!==hi?hi:[]);gi&&(M.newStepComponents=gi)}if(1==vi.length||e.value){var bi,xi,Ei,Ci;if((null===e||void 0===e||null===(bi=e.options)||void 0===bi?void 0:bi.filters.length)>0)hn[null===e||void 0===e||null===(Ei=e.options)||void 0===Ei?void 0:Ei.filters[0]]=j.Z(H.Z("value"))(si.map((function(n){var o=null===n||void 0===n?void 0:n.component_fields.find((function(n){var o;return n.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[1])}));return{label:null===o||void 0===o?void 0:o.value,value:null===o||void 0===o?void 0:o.value,component:n}})).filter((function(n){var o;return(null===(o=n.component)||void 0===o?void 0:o.component_fields.filter((function(n){var o,l;return n.value===(null===(o=ri)||void 0===o||null===(l=o.component_fields.find((function(n){var o;return n.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[0])})))||void 0===l?void 0:l.value)})).length)>0})));if((null===e||void 0===e||null===(xi=e.options)||void 0===xi?void 0:xi.filters.length)>1)hn[null===e||void 0===e||null===(Ci=e.options)||void 0===Ci?void 0:Ci.filters[1]]=j.Z(H.Z("value"))(si.map((function(n){var o=n.component_fields.find((function(n){var o;return n.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[2])}));return{label:null===o||void 0===o?void 0:o.value,value:null===o||void 0===o?void 0:o.value,component:n}})).filter((function(n){var o;return(null===(o=n.component)||void 0===o?void 0:o.component_fields.filter((function(n){var o,l;return n.value===(null===(o=ri)||void 0===o||null===(l=o.component_fields.find((function(n){var o;return n.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[1])})))||void 0===l?void 0:l.value)})).length)>0})))}}else if(vi.length>0)if(e.value){if(ri=null===vi||void 0===vi?void 0:vi.find((function(n){var o;return n[null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.output]===e.value}))){var Zi,wi;ho(ri.value);var Mi=(0,d.Z)(null!==(Zi=null===(wi=M.currentStep)||void 0===wi?void 0:wi.component_blueprints)&&void 0!==Zi?Zi:[]);Mi&&(M.newStepComponents=Mi)}}else if(1==vi.length&&1==(null===e||void 0===e?void 0:e.mandatory)&&(ri=vi[0])){var Si,ki;ho(ri.value);var Ii=(0,d.Z)(null!==(Si=null===(ki=M.currentStep)||void 0===ki?void 0:ki.component_blueprints)&&void 0!==Si?Si:[]);Ii&&(M.newStepComponents=Ii)}return!ri&&null!==e&&void 0!==e&&e.value?r.createElement("div",{key:n},"A record ( ".concat(null===e||void 0===e?void 0:e.value," ) was previously selected but not found. Press the refresh button on the upper right side to retrieve the missing record. If record is still not found, please check with your admin.")):(null===e||void 0===e||null===(wl=e.options)||void 0===wl||null===(Ml=wl.filters)||void 0===Ml?void 0:Ml.length)>0?r.createElement("div",{key:n,style:{width:"100%",display:null!==e&&void 0!==e&&e.visible?"":"none",pointerEvents:To,border:"1px dashed gray",fontSize:"16px",color:"var(--app-color-gray-dark)",padding:"20px",marginBottom:"10px"}},null===Q||void 0===Q||null===(Sl=Q.find((function(n){var o;return n.id===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.component_id)})))||void 0===Sl?void 0:Sl.name,r.createElement("br",null),r.createElement("br",null),(null===e||void 0===e||null===(kl=e.options)||void 0===kl||null===(Il=kl.filters)||void 0===Il?void 0:Il.length)>0&&r.createElement(P.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-dark)"},className:me.multiselectComponent,visible:null===e||void 0===e?void 0:e.visible,mandatory:1==(null===e||void 0===e||null===(Pl=e.options)||void 0===Pl||null===(Nl=Pl.filters)||void 0===Nl?void 0:Nl.length)&&(null===e||void 0===e?void 0:e.mandatory),items:j.Z(H.Z("value"))(si.map((function(n){var o=n.component_fields.find((function(n){var o;return n.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[0])}));return{label:null===o||void 0===o?void 0:o.value,value:null===o||void 0===o?void 0:o.value,component:n}}))),loading:Ve,error:1==(null===e||void 0===e||null===(Tl=e.options)||void 0===Tl||null===(Dl=Tl.filters)||void 0===Dl?void 0:Dl.length)?null===e||void 0===e?void 0:e.errors:"",onChange:function(o){var l,i,d,a,u;(null===e||void 0===e||null===(l=e.options)||void 0===l||null===(i=l.filters)||void 0===i?void 0:i.length)>1?(Z(void 0,n),Mn(!1),En(!1),setTimeout((function(){En(!0),Mn(!0)}),10),yn((0,t.Z)({},null===e||void 0===e||null===(d=e.options)||void 0===d?void 0:d.filters[0],j.Z(H.Z("value"))(si.map((function(n){var l=n.component_fields.find((function(n){var o;return n.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[1])}));return{label:null===l||void 0===l?void 0:l.value,value:null===l||void 0===l?void 0:l.value,component:n,selected:o}})).filter((function(n){return n.component.component_fields.filter((function(n){var l;return n.value===o&&n.field_name===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.filters[0])})).length>0})))))):(An("50px"),Z(null!==(a=si.find((function(e){return e.value===o}))[null===e||void 0===e||null===(u=e.options)||void 0===u?void 0:u.output])&&void 0!==a?a:null,n),ho(si.find((function(e){return e.value===o})).component.id))},fieldLabel:null===e||void 0===e||null===(Al=e.options)||void 0===Al?void 0:Al.filters[0],value:ri?null===(Ul=ri.component_fields.find((function(n){var o;return n.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[0])})))||void 0===Ul?void 0:Ul.value:""}),r.createElement("div",{style:{display:null!==e&&void 0!==e&&e.visible?"":"none",marginBottom:"10px"}},(null===e||void 0===e||null===(Ll=e.options)||void 0===Ll||null===(Ol=Ll.filters)||void 0===Ol?void 0:Ol.length)>1&&xn&&r.createElement(P.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-dark)"},className:me.multiselectComponent,visible:null===e||void 0===e?void 0:e.visible,mandatory:2==(null===e||void 0===e||null===(Rl=e.options)||void 0===Rl||null===(zl=Rl.filters)||void 0===zl?void 0:zl.length)&&(null===e||void 0===e?void 0:e.mandatory),items:null!==(ql=hn[null===e||void 0===e||null===(Bl=e.options)||void 0===Bl?void 0:Bl.filters[0]])&&void 0!==ql?ql:[],loading:Ve,onClicked:function(e){return An(e?"180px":"50px")},onChange:function(o){var l,i,d,u,r,s,v,c,p;(null===e||void 0===e||null===(l=e.options)||void 0===l||null===(i=l.filters)||void 0===i?void 0:i.length)>2?(Mn(!1),setTimeout((function(){return Mn(!0)}),10),yn((0,a.Z)((0,a.Z)({},hn),{},(0,t.Z)({},null===e||void 0===e||null===(d=e.options)||void 0===d?void 0:d.filters[1],null!==(u=j.Z(H.Z("value"))(si.map((function(n){var o=n.component_fields.find((function(n){var o;return n.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[2])}));return{label:null===o||void 0===o?void 0:o.value,value:null===o||void 0===o?void 0:o.value,component:n}})).filter((function(n){return n.component.component_fields.filter((function(n){var l;return n.value===o&&n.field_name===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.filters[1])})).length>0})).filter((function(n){return n.component.component_fields.filter((function(n){var o,l;return n.value===hn[null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[0]][0].component.component_fields.find((function(n){var o;return n.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[0])})).value&&n.field_name===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.filters[0])})).length>0}))))&&void 0!==u?u:[])))):(An("50px"),R.start=!0,Z(null!==(r=null===(s=hn[null===e||void 0===e||null===(c=e.options)||void 0===c?void 0:c.filters[0]])||void 0===s||null===(v=s.find((function(e){return e.value===o})))||void 0===v?void 0:v.component.component_fields.find((function(n){var o;return n.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.output)})).value)&&void 0!==r?r:null,n),ho(hn[null===e||void 0===e||null===(p=e.options)||void 0===p?void 0:p.filters[0]].find((function(e){return e.value===o})).component.id),Mn(!1),En(!1),setTimeout((function(){En(!0),Mn(!0)}),10))},fieldLabel:null===e||void 0===e||null===(Fl=e.options)||void 0===Fl?void 0:Fl.filters[1],value:ri?null===(Wl=ri.component_fields.find((function(n){var o;return n.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[1])})))||void 0===Wl?void 0:Wl.value:""})),r.createElement("div",{style:{display:null!==e&&void 0!==e&&e.visible?"":"none",marginBottom:"10px"}},(null===e||void 0===e||null===(Yl=e.options)||void 0===Yl||null===(jl=Yl.filters)||void 0===jl?void 0:jl.length)>2&&wn&&r.createElement(P.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-dark)"},className:me.multiselectComponent,visible:null===e||void 0===e?void 0:e.visible,mandatory:3==(null===e||void 0===e||null===(Hl=e.options)||void 0===Hl||null===(Jl=Hl.filters)||void 0===Jl?void 0:Jl.length)&&(null===e||void 0===e?void 0:e.mandatory),items:null!==(Gl=hn[null===e||void 0===e||null===(Vl=e.options)||void 0===Vl?void 0:Vl.filters[1]])&&void 0!==Gl?Gl:[],loading:Ve,onClicked:function(e){return An(e?"180px":"50px")},onChange:function(o){var l,i,t,d,a;An("50px"),R.start=!0,Z(null!==(l=null===(i=hn[null===e||void 0===e||null===(d=e.options)||void 0===d?void 0:d.filters[1]])||void 0===i||null===(t=i.find((function(e){return e.value===o})))||void 0===t?void 0:t.component.component_fields.find((function(n){var o;return n.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.output)})).value)&&void 0!==l?l:null,n),ho(hn[null===e||void 0===e||null===(a=e.options)||void 0===a?void 0:a.filters[1]].find((function(e){return e.value===o})).component.id)},fieldLabel:null===e||void 0===e||null===(Ql=e.options)||void 0===Ql?void 0:Ql.filters[2],value:ri?null===(Xl=ri.component_fields.find((function(n){var o;return n.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[2])})))||void 0===Xl?void 0:Xl.value:""}))):"Tiles"===(null===e||void 0===e||null===(Kl=e.options)||void 0===Kl?void 0:Kl.selection)?r.createElement(ye.Z,{enabled:To,width:"100%",style:{border:"0"},editMode:te,showWidth:function(n){e.field_options=(0,a.Z)((0,a.Z)({},e.field_options),{},{width:"".concat(n,"px")})},key:n,fieldLabel:e.field_name,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:(null===($l=e.errors)||void 0===$l?void 0:$l.length)>0?"".concat(e.errors,". Try to select again"):"",notes:null===e||void 0===e||null===(ei=e.options)||void 0===ei?void 0:ei.notes},r.createElement("div",{style:{width:"100%"}},r.createElement(S.default,{rowStyleSelected:{border:"2px solid black"},initialSelected:vi.map((function(n){var o;return n[null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.output]})).indexOf(null===e||void 0===e?void 0:e.value),modern:!0,isReport:!1,className:me.listContainer,"app-variant-is-mobile":"true",columns:null===e||void 0===e||null===(ni=e.options)||void 0===ni?void 0:ni.names,list:vi.map((function(e){var n=e;return e.component.component_fields.filter((function(e){n[e.field_name]=e.value})),n})),onListItemClick:function(o){var l,i,t,d,a;o&&(null===e||void 0===e||null===(a=e.options)||void 0===a||a.list.map((function(e){var n,l,i=_o({field_name:e});-1!=i&&(g.selected_fields[i].value=null!==(n=null===(l=o.component.component_fields.find((function(n){return n.field_name===e})))||void 0===l?void 0:l.value)&&void 0!==n?n:"",g.selected_fields[i].disabled=!0)})));so(),ho(o),Z(null!==(l=null===vi||void 0===vi||null===(i=vi.find((function(e){return e.value===o.value})))||void 0===i||null===(t=i.component.component_fields)||void 0===t||null===(d=t.find((function(n){var o;return n.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.output)})))||void 0===d?void 0:d.value)&&void 0!==l?l:null,n)}}))):r.createElement(ye.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-dark)",fontWeight:"regular",paddingLeft:"5px"},enabled:To,width:"100%",style:{marginTop:"0px",border:"1px dashed var(--app-color-gray-light)",padding:"5px"},editMode:te,showWidth:function(n){e.field_options=(0,a.Z)((0,a.Z)({},e.field_options),{},{width:"".concat(n,"px")})},key:n,fieldLabel:Q.find((function(n){var o;return n.id===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.component_id)})).name,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:(null===(oi=e.errors)||void 0===oi?void 0:oi.length)>0?"".concat(e.errors,". Try to select again"):"",notes:null===e||void 0===e||null===(li=e.options)||void 0===li?void 0:li.notes},r.createElement("div",{style:{width:"inherit"}},r.createElement(P.Z,{key:n,visible:null===e||void 0===e?void 0:e.visible,mandatory:null===e||void 0===e?void 0:e.mandatory,items:vi,loading:Ve,error:"",className:me.dropdownClassContainer,onClicked:function(e){return An(e?"100px":"50px")},onChange:function(o){var l,i;R.start=!0,An("50px"),ho(o),Z(null!==(l=null===vi||void 0===vi?void 0:vi.find((function(e){return e.value===o}))[null===e||void 0===e||null===(i=e.options)||void 0===i?void 0:i.output])&&void 0!==l?l:null,n)},selectionType:(null===e||void 0===e||null===(ii=e.options)||void 0===ii?void 0:ii.selection.length)>0?null===e||void 0===e||null===(ti=e.options)||void 0===ti?void 0:ti.selection:null===e||void 0===e||null===(di=e.options)||void 0===di?void 0:di.type,value:null!==(ai=null===(ui=ri)||void 0===ui?void 0:ui.label)&&void 0!==ai?ai:""})))}if("Filters"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(_=e.options)||void 0===_||null===(w=_.component_id)||void 0===w?void 0:w.length)>0){var Pi,Ni,Ti,Di,Ai,Ui,Li,Oi,Ri,zi,qi,Bi,Fi,Wi,Yi,ji,Hi,Ji,Gi,Vi,Qi,Xi,Ki,$i,et,nt,ot,lt,it,tt,dt=(null!==e&&void 0!==e&&null!==(Pi=e.options)&&void 0!==Pi&&Pi.global?yo(null===e||void 0===e?void 0:e.data_type_name):F).filter((function(n){return n.component_fields.filter((function(n){var o;return n.component_blueprint_id===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.component_id)})).length>0})),at=dt.map((function(n){var o,l;return(0,t.Z)({label:n.title,value:n.id,component:n},null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.output,null===(l=n.component_fields.find((function(n){var o;return n.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.output)})))||void 0===l?void 0:l.value)}));if(dt.length>0){if(e.value){if(tt=dt.find((function(n){return n.component_fields.find((function(n){var o;return n.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.output)&&n.value===e.value}))}))){var ut,rt,st;ho(null===(ut=tt)||void 0===ut?void 0:ut.id);var vt=(0,d.Z)(null!==(rt=null===(st=M.currentStep)||void 0===st?void 0:st.component_blueprints)&&void 0!==rt?rt:[]);vt&&(M.newStepComponents=vt)}}else if(1==at.length&&1==(null===e||void 0===e?void 0:e.mandatory)&&(tt=dt[0])){var ct,pt,mt;ho(null===(ct=tt)||void 0===ct?void 0:ct.id);var ft=(0,d.Z)(null!==(pt=null===(mt=M.currentStep)||void 0===mt?void 0:mt.component_blueprints)&&void 0!==pt?pt:[]);ft&&(M.newStepComponents=ft)}if(1==at.length||e.value){var _t,ht,yt,gt;if((null===e||void 0===e||null===(_t=e.options)||void 0===_t?void 0:_t.filters.length)>0)hn[null===e||void 0===e||null===(yt=e.options)||void 0===yt?void 0:yt.filters[0]]=j.Z(H.Z("value"))(dt.map((function(n){var o=null===n||void 0===n?void 0:n.component_fields.find((function(n){var o;return n.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[1])}));return{label:null===o||void 0===o?void 0:o.value,value:null===o||void 0===o?void 0:o.value,component:n}})));if((null===e||void 0===e||null===(ht=e.options)||void 0===ht?void 0:ht.filters.length)>1)hn[null===e||void 0===e||null===(gt=e.options)||void 0===gt?void 0:gt.filters[1]]=j.Z(H.Z("value"))(dt.map((function(n){var o=n.component_fields.find((function(n){var o;return n.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[2])}));return{label:null===o||void 0===o?void 0:o.value,value:null===o||void 0===o?void 0:o.value,component:n}})))}}return!tt&&null!==e&&void 0!==e&&e.value?r.createElement("div",{key:n},"A record ( ".concat(null===e||void 0===e?void 0:e.value," ) was previously selected but not found. Press the refresh button on the upper right side to retrieve the missing record. If record is still not found, please check with your admin.")):r.createElement("div",{key:n,style:{width:"100%",display:null!==e&&void 0!==e&&e.visible?"":"none",pointerEvents:To,border:"1px dashed gray",fontSize:"16px",color:"var(--app-color-gray-dark)",marginBottom:"10px",padding:"20px"}},Q.find((function(n){var o;return n.id===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.component_id)})).name,r.createElement("br",null),r.createElement("br",null),(null===e||void 0===e||null===(Ni=e.options)||void 0===Ni||null===(Ti=Ni.filters)||void 0===Ti?void 0:Ti.length)>0&&r.createElement(P.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-dark)"},className:me.multiselectComponent,visible:null===e||void 0===e?void 0:e.visible,mandatory:1==(null===e||void 0===e||null===(Di=e.options)||void 0===Di||null===(Ai=Di.filters)||void 0===Ai?void 0:Ai.length)&&(null===e||void 0===e?void 0:e.mandatory),items:j.Z(H.Z("value"))(dt.map((function(n){var o=n.component_fields.find((function(n){var o;return n.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[0])}));return{label:null===o||void 0===o?void 0:o.value,value:null===o||void 0===o?void 0:o.value,component:n}}))),loading:Ve,error:1==(null===e||void 0===e||null===(Ui=e.options)||void 0===Ui||null===(Li=Ui.filters)||void 0===Li?void 0:Li.length)?null===e||void 0===e?void 0:e.errors:"",onChange:function(o){var l,i,d,a,u;(null===e||void 0===e||null===(l=e.options)||void 0===l||null===(i=l.filters)||void 0===i?void 0:i.length)>1?(Z(void 0,n),Mn(!1),En(!1),setTimeout((function(){En(!0),Mn(!0)}),10),yn((0,t.Z)({},null===e||void 0===e||null===(d=e.options)||void 0===d?void 0:d.filters[0],j.Z(H.Z("value"))(dt.map((function(n){var l=n.component_fields.find((function(n){var o;return n.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[1])}));return{label:null===l||void 0===l?void 0:l.value,value:null===l||void 0===l?void 0:l.value,component:n,selected:o}})).filter((function(n){return n.component.component_fields.filter((function(n){var l;return n.value===o&&n.field_name===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.filters[0])})).length>0})))))):(An("50px"),Z(null!==(a=dt.find((function(e){return e.value===o}))[null===e||void 0===e||null===(u=e.options)||void 0===u?void 0:u.output])&&void 0!==a?a:null,n),ho(dt.find((function(e){return e.value===o})).component.id))},fieldLabel:null===e||void 0===e||null===(Oi=e.options)||void 0===Oi?void 0:Oi.filters[0],value:tt?null===(Ri=tt.component_fields.find((function(n){var o;return n.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[0])})))||void 0===Ri?void 0:Ri.value:""}),r.createElement("div",{style:{display:null!==e&&void 0!==e&&e.visible?"":"none",marginBottom:"10px"}},(null===e||void 0===e||null===(zi=e.options)||void 0===zi||null===(qi=zi.filters)||void 0===qi?void 0:qi.length)>1&&xn&&r.createElement(P.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-dark)"},className:me.multiselectComponent,visible:null===e||void 0===e?void 0:e.visible,mandatory:2==(null===e||void 0===e||null===(Bi=e.options)||void 0===Bi||null===(Fi=Bi.filters)||void 0===Fi?void 0:Fi.length)&&(null===e||void 0===e?void 0:e.mandatory),items:null!==(Wi=hn[null===e||void 0===e||null===(Yi=e.options)||void 0===Yi?void 0:Yi.filters[0]])&&void 0!==Wi?Wi:[],loading:Ve,error:2==(null===e||void 0===e||null===(ji=e.options)||void 0===ji||null===(Hi=ji.filters)||void 0===Hi?void 0:Hi.length)?null===e||void 0===e?void 0:e.errors:"",onClicked:function(e){return An(e?"180px":"50px")},onChange:function(o){var l,i,d,u,r,s,v,c,p;(null===e||void 0===e||null===(l=e.options)||void 0===l||null===(i=l.filters)||void 0===i?void 0:i.length)>2?(Mn(!1),setTimeout((function(){return Mn(!0)}),10),yn((0,a.Z)((0,a.Z)({},hn),{},(0,t.Z)({},null===e||void 0===e||null===(d=e.options)||void 0===d?void 0:d.filters[1],null!==(u=j.Z(H.Z("value"))(dt.map((function(n){var o=n.component_fields.find((function(n){var o;return n.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[2])}));return{label:null===o||void 0===o?void 0:o.value,value:null===o||void 0===o?void 0:o.value,component:n}})).filter((function(n){return n.component.component_fields.filter((function(n){var l;return n.value===o&&n.field_name===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.filters[1])})).length>0})).filter((function(n){return n.component.component_fields.filter((function(n){var o,l;return n.value===hn[null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[0]][0].component.component_fields.find((function(n){var o;return n.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[0])})).value&&n.field_name===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.filters[0])})).length>0}))))&&void 0!==u?u:[])))):(so(),An("50px"),R.start=!0,Z(null!==(r=null===(s=hn[null===e||void 0===e||null===(c=e.options)||void 0===c?void 0:c.filters[0]])||void 0===s||null===(v=s.find((function(e){return e.value===o})))||void 0===v?void 0:v.component.component_fields.find((function(n){var o;return n.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.output)})).value)&&void 0!==r?r:null,n),ho(hn[null===e||void 0===e||null===(p=e.options)||void 0===p?void 0:p.filters[0]].find((function(e){return e.value===o})).component.id))},fieldLabel:null===e||void 0===e||null===(Ji=e.options)||void 0===Ji?void 0:Ji.filters[1],value:tt?null===(Gi=tt.component_fields.find((function(n){var o;return n.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[1])})))||void 0===Gi?void 0:Gi.value:""})),r.createElement("div",{style:{display:null!==e&&void 0!==e&&e.visible?"":"none",marginBottom:"10px"}},(null===e||void 0===e||null===(Vi=e.options)||void 0===Vi||null===(Qi=Vi.filters)||void 0===Qi?void 0:Qi.length)>2&&wn&&r.createElement(P.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-dark)"},className:me.multiselectComponent,visible:null===e||void 0===e?void 0:e.visible,mandatory:3==(null===e||void 0===e||null===(Xi=e.options)||void 0===Xi||null===(Ki=Xi.filters)||void 0===Ki?void 0:Ki.length)&&(null===e||void 0===e?void 0:e.mandatory),items:null!==($i=hn[null===e||void 0===e||null===(et=e.options)||void 0===et?void 0:et.filters[1]])&&void 0!==$i?$i:[],loading:Ve,error:3==(null===e||void 0===e||null===(nt=e.options)||void 0===nt||null===(ot=nt.filters)||void 0===ot?void 0:ot.length)?null===e||void 0===e?void 0:e.errors:"",onClicked:function(e){return An(e?"180px":"50px")},onChange:function(o){var l,i,t,d,a;An("50px"),R.start=!0,Z(null!==(l=null===(i=hn[null===e||void 0===e||null===(d=e.options)||void 0===d?void 0:d.filters[1]])||void 0===i||null===(t=i.find((function(e){return e.value===o})))||void 0===t?void 0:t.component.component_fields.find((function(n){var o;return n.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.output)})).value)&&void 0!==l?l:null,n),ho(hn[null===e||void 0===e||null===(a=e.options)||void 0===a?void 0:a.filters[1]].find((function(e){return e.value===o})).component.id)},fieldLabel:null===e||void 0===e||null===(lt=e.options)||void 0===lt?void 0:lt.filters[2],value:tt?null===(it=tt.component_fields.find((function(n){var o;return n.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[2])})))||void 0===it?void 0:it.value:""})))}if("Global"===(null===e||void 0===e?void 0:e.data_type_name)||"Connector"===(null===e||void 0===e?void 0:e.data_type_name)||"Emails"===(null===e||void 0===e?void 0:e.data_type_name)||"Template"===(null===e||void 0===e?void 0:e.data_type_name));else if("Action Button"!==(null===e||void 0===e?void 0:e.data_type_name)){var bt,xt,Et,Ct,Zt,wt,Mt,St,kt,It,Pt,Nt,Tt,Dt,At,Ut,Lt,Ot,Rt,zt,qt,Bt,Ft,Wt,Yt,jt,Ht,Jt,Gt,Vt,Qt,Xt,Kt,$t,ed,nd,od,ld,id,td,dd,ad,ud,rd,sd,vd,cd,pd,md,fd,_d,hd,yd,gd,bd,xd,Ed,Cd,Zd,wd,Md,Sd;if("GoogleAI Assistant"===(null===e||void 0===e?void 0:e.data_type_name))return r.createElement("div",{key:n,style:{display:e.visible?"":"none",color:"var(--app-color-gray-dark)",height:"inherit",width:"100%",flexDirection:"column",marginTop:"50px"}},r.createElement(ye.Z,{enabled:To,width:null!==(bt=null===e||void 0===e||null===(xt=e.field_options)||void 0===xt?void 0:xt.width)&&void 0!==bt?bt:"100%",editMode:te,showWidth:function(n){e.field_options=(0,a.Z)((0,a.Z)({},e.field_options),{},{width:"".concat(n,"px")})},key:n,fieldLabel:"".concat(null===e||void 0===e||null===(Et=e.options)||void 0===Et?void 0:Et.description),fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors,notes:null===e||void 0===e||null===(Ct=e.options)||void 0===Ct?void 0:Ct.notes},r.createElement("textarea",{className:me.fullLengthTextarea,type:e.data_type,onFocus:function(){},disabled:e.options.fixed,autoComplete:"none",onChange:function(e){x(e.target.value,n)},placeholder:"Enter your question here",value:1==e.options.fixed?null===e||void 0===e||null===(Zt=e.options)||void 0===Zt?void 0:Zt.analyze:e.value})),r.createElement("div",{style:{display:"flex"}},r.createElement(h.zx,{light:!0,loading:Ve,title:"Ask",clicked:function(){0==e.options.fixed&&(e.options.analyze=e.value),mo(e.options)}},r.createElement("img",{src:"https://ai.google/static/images/share.png",height:"90px",width:"140px"})),(null===Bn||void 0===Bn?void 0:Bn.candidates.length)>0&&r.createElement(h.zx,{title:"Clear",clicked:function(){Fn({candidates:[]}),x(void 0,n)}})));if("Chart"===e.data_type_name)return r.createElement(ye.Z,{width:"100%",key:n,fieldLabel:e.field_name,fieldIcon:e.icon,editMode:te,notes:null===e||void 0===e||null===(wt=e.options)||void 0===wt?void 0:wt.notes,isProcess:!0,visible:e.visible,error:e.errors,customIconBgColor:"white"},r.createElement("div",{className:"grid grid-cols-12 gap-4 md:gap-6 2xl:gap-7.5",style:{width:"inherit"}},"Line"===(null===e||void 0===e||null===(Mt=e.options)||void 0===Mt?void 0:Mt.orientation)&&r.createElement(De.Z,{series:[{name:"Product One",data:[23,11,22,27,13,22,37,21,44,22,30,45]},{name:"Product Two",data:[30,25,36,30,45,35,64,52,59,36,39,51]}]}),"Column"===(null===e||void 0===e||null===(St=e.options)||void 0===St?void 0:St.orientation)&&r.createElement(Ae.Z,{series:[{name:"Sales",data:[44,55,41,67,22,43,65]},{name:"Revenue",data:[13,23,20,8,13,27,15]}]}),"Donut"===(null===e||void 0===e||null===(kt=e.options)||void 0===kt?void 0:kt.orientation)&&r.createElement(Ue.Z,{series:[65,34,12,56],labels:["Desktop","Tablet","Mobile","AI"]})));if("Info"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===($=e.options)||void 0===$||null===(ue=$.list)||void 0===ue?void 0:ue.length)>0&&(null===e||void 0===e||null===(re=e.options)||void 0===re||null===(ge=re.component_id)||void 0===ge?void 0:ge.length)>0){var kd,Id,Pd,Nd,Td,Dd,Ad,Ud,Ld,Od=F.find((function(n){return n.id===(null===e||void 0===e?void 0:e.value)})),Rd={};if(Od)null===e||void 0===e||null===(Ld=e.options)||void 0===Ld||Ld.list.map((function(e,n){var o,l,i,t;if(0==Od.component_fields.length)return r.createElement("div",{key:n});var d,a=Od.component_fields.find((function(n){return n.field_name===e}));"Link"===(null===a||void 0===a?void 0:a.data_type_name)&&(null!==(o="".concat(null===a||void 0===a?void 0:a.value))&&void 0!==o&&o.includes("jpg")||null!==a&&void 0!==a&&null!==(l=a.options)&&void 0!==l&&l.image||null!==(i="".concat(null===a||void 0===a?void 0:a.value))&&void 0!==i&&i.includes("jpeg")||null!==(t="".concat(null===a||void 0===a?void 0:a.value))&&void 0!==t&&t.includes("png"))?Rd[e]=r.createElement("div",{key:n,onClick:function(){return window.open(null===a||void 0===a?void 0:a.value,"_blank")}},r.createElement("img",{alt:"lg",src:null===a||void 0===a?void 0:a.value,style:{width:"30px",height:"30px",cursor:"pointer"}})):Rd[e]=null!==(d=null===a||void 0===a?void 0:a.value)&&void 0!==d?d:""}));return Od&&("rows"===(null===e||void 0===e||null===(kd=e.options)||void 0===kd?void 0:kd.orientation)?r.createElement(ye.Z,{style:{border:"0"},width:"100%",key:n,fieldLabel:e.field_name,fieldIcon:e.icon,isProcess:!0,visible:!0,mandatory:e.mandatory,error:e.errors,notes:null===e||void 0===e||null===(Id=e.options)||void 0===Id?void 0:Id.notes},r.createElement(N.Z,{className:me.mobileTable_ii,style:{width:"100%"},tableHostSimple:me.tableHostSimple,columns:null!==(Pd=null===e||void 0===e||null===(Nd=e.options)||void 0===Nd?void 0:Nd.list)&&void 0!==Pd?Pd:[],list:[Rd]})):r.createElement("div",{style:{width:"inherit"},key:n},Od&&r.createElement(h.zx,{light:!0,title:"Show Information",style:{width:"100%",backgroundColor:"var(--app-color-blue)",color:"white"},clicked:function(){return so()}}),so&&r.createElement(Qe,{title:"Information:",nav:uo,openNav:so},r.createElement("div",{style:{color:"var(--app-color-gray-dark)",height:"inherit",width:"100%",display:null!==e&&void 0!==e&&e.visible?"":"none"}},Object.keys(Rd).length>0&&(null===e||void 0===e||null===(Td=e.options)||void 0===Td?void 0:Td.list.map((function(n,o){var l,i,t,d,a,u,s;if(0==Od.component_fields.length)return r.createElement("div",{key:o});var v=Od.component_fields.find((function(e){return e.field_name===n}));return o<3?r.createElement("div",{key:o},r.createElement("div",{className:me.actionsContainer,style:{fontSize:(n.length>10||v.value.length,"12px")}},r.createElement("div",null,n,":"),r.createElement("div",null,v?v.value:"")),r.createElement("hr",{style:{borderTop:"0.5px solid #D2D2D2"}})):r.createElement("div",{style:{border:"0"},key:o,fieldLabel:n,fieldIcon:e.icon,isProcess:!0,visible:!0,mandatory:e.mandatory,error:e.errors,notes:null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.notes},"Link"===(null===v||void 0===v?void 0:v.data_type_name)&&(null!==(i="".concat(null===v||void 0===v?void 0:v.value))&&void 0!==i&&i.includes("jpg")||null!==(t="".concat(null===v||void 0===v?void 0:v.value))&&void 0!==t&&t.includes("jpeg")||null!==v&&void 0!==v&&null!==(d=v.options)&&void 0!==d&&d.image||null!==(a="".concat(null===v||void 0===v?void 0:v.value))&&void 0!==a&&a.includes("png"))?r.createElement("div",{onClick:function(){return window.open(null===v||void 0===v?void 0:v.value,"_blank")}},r.createElement("img",{alt:"lg",src:null===v||void 0===v?void 0:v.value,style:{width:"50%",height:"100%",cursor:"pointer"}})):null!==e&&void 0!==e&&null!==(u=e.value)&&void 0!==u&&u.includes("pdf")?r.createElement("div",{style:{width:"inherit"},onClick:function(){return window.open(null===v||void 0===v?void 0:v.value,"_blank")}},r.createElement("embed",{src:"".concat(null===v||void 0===v?void 0:v.value,"#toolbar=0&navpanes=0&scrollbar=0&zoom=100%"),width:"100%",height:"1000px"})):(null===v||void 0===v||null===(s=v.value)||void 0===s?void 0:s.length)<50||void 0===v?r.createElement("input",{onBlur:function(n){return He(e.data_type_name,n.target.value,E,o,M)},type:e.data_type,value:v?v.value:"",autoComplete:"none",className:me.fieldTypeInput,name:e.field_name,disabled:!0,style:{border:"1px dashed rgba(234, 231, 231, 0.91)",height:"40px",fontSize:"18px",backgroundColor:"rgba(234, 231, 231, 0.91)"}}):r.createElement("textarea",{className:me.fieldTypeTextarea,type:e.data_type,value:v?v.value:"",onFocus:function(){},autoComplete:"none",onChange:function(e){},disabled:!0,style:{backgroundColor:"rgba(234, 231, 231, 0.91)",height:"auto",fontSize:"18px"}}))}))),!0===(null===g||void 0===g||null===(Dd=g.options)||void 0===Dd?void 0:Dd.allowMultipleInputs)&&(null===(Ad=Y.processModule.module.options)||void 0===Ad||null===(Ud=Ad.computes)||void 0===Ud?void 0:Ud.map((function(n,o){var l,i,t=null===F||void 0===F||null===(l=F.filter((function(e){return e.module_id===n.module_id})))||void 0===l?void 0:l.find((function(n){return n.component_fields.filter((function(n){var o,l;return n.value===(null!==(o=null===(l=Od.component_fields.find((function(n){var o;return n.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.key)})))||void 0===l?void 0:l.value)&&void 0!==o?o:"#$")})).length>0})),d=null===t||void 0===t?void 0:t.component_fields.find((function(e){return e.procedure_step_blueprint_field_id===n.field_id}));return r.createElement(ye.Z,{style:{display:d?"":"none",border:"0"},key:o,fieldLabel:null===d||void 0===d?void 0:d.field_name,fieldIcon:e.icon,isProcess:!0,visible:!0,mandatory:e.mandatory,error:e.errors,notes:null===e||void 0===e||null===(i=e.options)||void 0===i?void 0:i.notes},r.createElement("input",{onBlur:function(n){return He(e.data_type_name,n.target.value,E,o,M)},type:e.data_type,value:null===d||void 0===d?void 0:d.value,autoComplete:"none",className:me.fieldTypeInput,name:e.field_name,disabled:!0,style:{border:"1px dashed rgba(234, 231, 231, 0.91)",height:"40px",fontSize:"18px",backgroundColor:"rgba(234, 231, 231, 0.91)"}}))}))),r.createElement("br",null),r.createElement(h.zx,{clicked:function(){return so()},title:"Close",style:{width:"100%",backgroundColor:"orange"}})))))}if("Lookup"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(xe=e.options)||void 0===xe||null===(Se=xe.list)||void 0===Se?void 0:Se.length)>0&&(null===e||void 0===e||null===(Re=e.options)||void 0===Re||null===(Ye=Re.source_id)||void 0===Ye?void 0:Ye.length)>0&&null!==e&&void 0!==e&&null!==(Je=e.options)&&void 0!==Je&&null!==(Ke=Je.target_id)&&void 0!==Ke&&Ke.length){var zd,qd,Bd,Fd,Wd,Yd,jd,Hd,Jd,Gd,Vd,Qd,Xd,Kd,$d,ea,na,oa,la=function(e,n){var o,l,i,t,d,a,u,r=null===(o=Y.processModule.module)||void 0===o||null===(l=o.options)||void 0===l?void 0:l.global;return r||(r=null===(i=M.components.find((function(n){return n.selected_fields.filter((function(n){return 1==n.visible&&n.field_name===e})).length>0})))||void 0===i||null===(t=i.selected_fields.find((function(n){return n.field_name===e})))||void 0===t?void 0:t.value),r||(r=null===(d=z.Z(q.Z("component_blueprints"),B.Z)(Y.processModule.completeSteps).find((function(n){return n.selected_fields.filter((function(n){return n.field_name===e&&"Value"===n.data_type_name})).length>0})))||void 0===d||null===(a=d.selected_fields.find((function(n){return n.field_name===e})))||void 0===a||null===(u=a.options)||void 0===u?void 0:u.value),r?n.filter((function(n){return n[e]===r})):n}(null===e||void 0===e||null===(zd=e.options)||void 0===zd?void 0:zd.global,function(e,n,o,l,i){var t=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:F,r=u.filter((function(e){var n;return(null===(n=e.component_fields)||void 0===n?void 0:n.filter((function(e){return e.component_blueprint_id===o})).length)>0})),s=[];return u.filter((function(n){return n.component_fields.filter((function(n){return n.component_blueprint_id===e})).length>0})).map((function(e){var o={};l.map((function(n){var l;o[n]=null===(l=e.component_fields.find((function(e){return e.field_name===n})))||void 0===l?void 0:l.value}));var u=e.component_fields.find((function(e){return e.field_name===n}));void 0!==u&&r.filter((function(e){return e.component_fields.filter((function(e){return e.value===u.value&&e.field_name===n})).length>0})).map((function(n){var l,u,r,v=null!==(l=null===(u=n.component_fields.find((function(e){return-1!==t.indexOf(e.field_name)})))||void 0===u?void 0:u.value)&&void 0!==l?l:"",c={};t.length>0&&t.map((function(e){var o=n.component_fields.find((function(n){return n.field_name===e}));o&&(c[e]=o.value)}));var p={};i.length>0&&i.map((function(o){var l=n.component_fields.find((function(e){return e.field_name===o}));if(l)p[o]=l.value;else{var i=e.component_fields.find((function(e){return e.field_name===o}));i&&(p[o]=i.value)}})),s=[].concat((0,d.Z)(s),[(0,a.Z)((0,a.Z)((0,a.Z)({label:v,value:n.id,field:n,grouping:(null===(r=Object.values(o))||void 0===r?void 0:r.length)>0?Object.values(o)[0]:"Fields"},o),p),c)])}))})),s}(null===e||void 0===e||null===(qd=e.options)||void 0===qd?void 0:qd.source_id,null===e||void 0===e||null===(Bd=e.options)||void 0===Bd?void 0:Bd.common_field,null===e||void 0===e||null===(Fd=e.options)||void 0===Fd?void 0:Fd.target_id,null===e||void 0===e||null===(Wd=e.options)||void 0===Wd?void 0:Wd.sourceLabel,null===e||void 0===e||null===(Yd=e.options)||void 0===Yd?void 0:Yd.list,null!==(jd=null===e||void 0===e||null===(Hd=e.options)||void 0===Hd?void 0:Hd.rlist)&&void 0!==jd?jd:[]));return r.createElement(ye.Z,{enabled:To,width:"100%",style:{border:"Tiles"===(null===e||void 0===e||null===(Jd=e.options)||void 0===Jd?void 0:Jd.selection)?"0":"1px dashed gray"},titleProps:{fontSize:"12px",color:"var(--app-color-gray-dark)",fontWeight:"regular",paddingLeft:"5px"},editMode:te,showWidth:function(n){e.field_options=(0,a.Z)((0,a.Z)({},e.field_options),{},{width:"".concat(n,"px")})},key:n,fieldLabel:e.field_name,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors,notes:null===e||void 0===e||null===(Gd=e.options)||void 0===Gd?void 0:Gd.notes},r.createElement("div",{id:e.field_name,style:{width:"100%"}},"Dropdown"===(null===e||void 0===e||null===(Vd=e.options)||void 0===Vd?void 0:Vd.selection)?r.createElement(L.yV,{items:la,groupedBy:"grouping",groupname:"grouping",triggerType:"chevron",title:pn,className:me.dropdownClassContainer,inputClassName:me.peoplePositionsSelectInput,molclassname:me.peoplePositionsSelectMenuOverlay,moliclassname:me.peoplePositionsSelectMenuOverlayItem,notags:"true",onChange:function(o){var l;o.length>0&&(null===e||void 0===e||null===(l=e.options)||void 0===l||l.list.map((function(n){var l=_o({field_name:n});if(-1!=l){var i=F.find((function(e){return e.id===o[0].value})),t=i.component_fields.find((function(e){return e.field_name===n}));if(void 0==t){var d=i.component_fields.find((function(n){var o;return n.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.common_field)})),a=F.find((function(n){return n.component_fields.filter((function(n){var o;return n.value===d.value&&n.component_blueprint_id===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.source_id)})).length>0}));if(void 0!=a){var u=a.component_fields.find((function(e){return e.field_name===n}));void 0!=u?(g.selected_fields[l].value=u.value,g.selected_fields[l].disabled=!0):g.selected_fields[l].value=""}else g.selected_fields[l].value=""}else g.selected_fields[l].value=t.value,g.selected_fields[l].disabled=!0}})),Z("".concat(o[0].label,",").concat(o[0].value),n),mn("".concat(o[0].grouping)))}}):"Tiles"===(null===e||void 0===e||null===(Qd=e.options)||void 0===Qd?void 0:Qd.selection)?r.createElement(L.qq,{items:la,columns:null===e||void 0===e||null===(Xd=e.options)||void 0===Xd?void 0:Xd.rlist,columnsG:null===e||void 0===e||null===(Kd=e.options)||void 0===Kd?void 0:Kd.sourceLabel,initialSelected:null===e||void 0===e?void 0:e.value,selectedItems:null!==e&&void 0!==e&&null!==($d=e.options)&&void 0!==$d&&$d.showAll?la:hn,showAll:1==(null===e||void 0===e||null===(ea=e.options)||void 0===ea?void 0:ea.showAll),groupedBy:"grouping",groupname:"grouping",className:me.peoplePositionsSelect,onGroupChange:function(e){yn(la.filter((function(n){return n.grouping===e})))},onChange:function(o){var l;o&&(null===e||void 0===e||null===(l=e.options)||void 0===l||l.list.map((function(n){var l=_o({field_name:n});if(-1!=l){var i=F.find((function(e){return e.id===o.value})),t=i.component_fields.find((function(e){return e.field_name===n}));if(void 0==t){var d=i.component_fields.find((function(n){var o;return n.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.common_field)})),a=F.find((function(n){return n.component_fields.filter((function(n){var o;return n.value===d.value&&n.component_blueprint_id===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.source_id)})).length>0}));if(void 0!=a){var u=a.component_fields.find((function(e){return e.field_name===n}));void 0!=u?(g.selected_fields[l].value=u.value,g.selected_fields[l].disabled=!0):g.selected_fields[l].value=""}else g.selected_fields[l].value=""}else g.selected_fields[l].value=t.value,g.selected_fields[l].disabled=!0}})),so(),Z("".concat(o.label,",").concat(o.value),n))}}):r.createElement("div",{className:me.openSelectWithSearchHost},r.createElement(ke.Z,{title:null===e||void 0===e||null===(na=e.options)||void 0===na?void 0:na.sourceLabel,triggerType:"eyeglass",className:me.openSelectWithSearch,molclassname:me.menuOverlayList,moliclassname:me.menuOverlayListItem,inputClassName:me.menuOverlayListItemInput,inputContainerClassName:me.menuOverlayListItemInputContainerClassName,items:j.Z(H.Z("grouping"))(la).map((function(e){return{label:e.grouping,value:e.grouping}})),onChange:function(n){document.getElementById(e.field_name).style.height="80px",yn(la.filter((function(e){return e.grouping===n.value})))}}),r.createElement(ke.Z,{title:null===e||void 0===e||null===(oa=e.options)||void 0===oa?void 0:oa.referenceLabel,triggerType:"eyeglass",className:me.openSelectWithSearch,molclassname:me.menuOverlayList,moliclassname:me.menuOverlayListItem,inputClassName:me.menuOverlayListItemInput,inputContainerClassName:me.menuOverlayListItemInputContainerClassName,items:hn,onChange:function(o){var l;(document.getElementById(e.field_name).style.height="80px",o)&&(null===e||void 0===e||null===(l=e.options)||void 0===l||l.list.map((function(n){var l=_o({field_name:n});if(-1!=l){var i=F.find((function(e){return e.id===o.value})),t=i.component_fields.find((function(e){return e.field_name===n}));if(void 0==t){var d=i.component_fields.find((function(n){var o;return n.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.common_field)})),a=F.find((function(n){return n.component_fields.filter((function(n){var o;return n.value===d.value&&n.component_blueprint_id===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.source_id)})).length>0}));if(void 0!=a){var u=a.component_fields.find((function(e){return e.field_name===n}));void 0!=u?(g.selected_fields[l].value=u.value,g.selected_fields[l].disabled=!0):g.selected_fields[l].value=""}else g.selected_fields[l].value=""}else g.selected_fields[l].value=t.value,g.selected_fields[l].disabled=!0}})),Z("".concat(o.label,",").concat(o.value),n))}}))))}if(("Step List"===(null===e||void 0===e?void 0:e.data_type_name)||"Component List"===(null===e||void 0===e?void 0:e.data_type_name))&&(null===e||void 0===e||null===($e=e.options)||void 0===$e||null===(ln=$e.list)||void 0===ln?void 0:ln.length)>0&&(null===e||void 0===e||null===(tn=e.options)||void 0===tn||null===(dn=tn.component_id)||void 0===dn?void 0:dn.length)>0)return r.createElement("div",{key:n,style:{width:"100%",display:1==e.visible?"":"none"}},r.createElement(S.default,{columns:null===e||void 0===e||null===(It=e.options)||void 0===It?void 0:It.list,list:(No=null===e||void 0===e?void 0:e.options,M.components.filter((function(e){return e.id===No.component_id})).map((function(e){var n={};return No.list.map((function(o){var l,i;n=(0,a.Z)((0,a.Z)({},n),{},(i={},(0,t.Z)(i,o,null===(l=e.selected_fields.find((function(e){return e.field_name===o})))||void 0===l?void 0:l.value),(0,t.Z)(i,"temp_id",e.temp_id),i))})),n}))),onListItemClick:function(e){k({action:m._U.removeModuleComponents,value:e.temp_id})}}));if("Checkbox"===(null===e||void 0===e?void 0:e.data_type_name))return r.createElement(ye.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-light)"},enabled:To,border:{border:"0",paddingTop:"40px"},notes:null===e||void 0===e||null===(Pt=e.options)||void 0===Pt?void 0:Pt.notes,editMode:te,width:"100%",showWidth:function(n){e.field_options=(0,a.Z)((0,a.Z)({},e.field_options),{},{width:"".concat(n,"px")})},key:n,visible:e.visible,mandatory:e.mandatory,error:e.errors,customIconBgColor:"white"},r.createElement(Ie.X,{defaultChecked:null!==(Nt=e.value)&&void 0!==Nt&&Nt,checkboxLabel:null===e||void 0===e||null===(Tt=e.options)||void 0===Tt?void 0:Tt.value,onChange:function(e){Z(e.target.checked,n)}}));if("YesNo"===(null===e||void 0===e?void 0:e.data_type_name))return r.createElement(ye.Z,{enabled:To,style:{border:"0.5px dashed gray",padding:"10px"},width:"100%",editMode:te,key:n,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors},r.createElement("div",{class:"checkbox-wrapper-21"},r.createElement("div",{style:{display:"flex",justifyContent:"space-between",margin:"20px 0px"}},r.createElement("input",{id:"check-23",type:"checkbox",checked:null!==(Dt=null===e||void 0===e?void 0:e.value)&&void 0!==Dt&&Dt,onChange:function(e){return Z(e.target.checked,n)},style:{marginRight:"20px"}}),r.createElement("label",null,null!==(At=null===e||void 0===e||null===(Ut=e.options)||void 0===Ut?void 0:Ut.notes)&&void 0!==At?At:e.field_name))));if("Transaction List"===(null===e||void 0===e?void 0:e.data_type_name)&&null!==e&&void 0!==e&&null!==(un=e.options)&&void 0!==un&&un.map){var ia,ta,da,aa={item_code:null,quantity:null,value:null,alt_value:null,total:null},ua=Object.entries(Object.assign(aa,e.options.map)).reduce((function(e,n){var o=(0,u.Z)(n,2),l=o[0],i=o[1];return null===i||(e[l]=i),e}),{}),ra=Object.entries(Object.assign(aa,e.options.map)).reduce((function(e,n){var o=(0,u.Z)(n,2),l=o[0],i=o[1];return null===i||(e[l]=i),e}),{});return Object.keys(ua).map((function(e){var n;"item_code"===e?ra.item_code="Totals:":"quantity"===e?ra[e]="".concat(ee.Z((function(n,o){var l;return null!==(l=+n+ +o[e])&&void 0!==l?l:0}),0,null!==(n=null===M||void 0===M?void 0:M.items)&&void 0!==n?n:[])):("alt_value"===e||"value"===e||"total"===e)&&(ra[e]="")})),r.createElement("div",{key:n,style:{width:"inherit"}},r.createElement(ye.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-light)"},enabled:To,width:null!==(ia=null===e||void 0===e||null===(ta=e.field_options)||void 0===ta?void 0:ta.width)&&void 0!==ia?ia:"inherit",editMode:te,showWidth:function(n){e.field_options=(0,a.Z)((0,a.Z)({},e.field_options),{},{width:"".concat(n,"px")})},style:{border:"0",padding:"0"},key:n,visible:e.visible,notes:null===e||void 0===e||null===(da=e.options)||void 0===da?void 0:da.notes},r.createElement(N.Z,{key:n,style:{width:(Object.values(e.options.map).length,"100%")},title:y.tq?"":e.field_name,tableHostSimple:me.tableHostMobile,columns:Object.values(ua),footer:Object.values(ra),list:fo(e.options),onListItemClick:function(e){k({action:m._U.removeModuleItems,value:e.item})}})))}if("ID"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(vn=e.options)||void 0===vn||null===(cn=vn.id)||void 0===cn?void 0:cn.length)>0){var sa,va,ca=void 0===e.value||null===e.value?"".concat(null===e||void 0===e?void 0:e.options.id).concat(null===(null===R||void 0===R?void 0:R.misc_info)?1:null!==(sa=null===R||void 0===R?void 0:R.misc_info[null===e||void 0===e?void 0:e.field_name])&&void 0!==sa?sa:1):e.value;return e.value=ca,M.id=ca,r.createElement(ye.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-dark)",fontWeight:"regular",paddingLeft:"5px"},width:"100%",style:{marginTop:"0px",border:"1px dashed var(--app-color-gray-light)",padding:"5px"},editMode:te,showWidth:function(n){e.field_options=(0,a.Z)((0,a.Z)({},e.field_options),{},{width:"".concat(n,"px")})},key:n,fieldLabel:e.field_name,fieldIcon:e.icon,notes:null===e||void 0===e||null===(va=e.options)||void 0===va?void 0:va.notes,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors,customIconBgColor:"white"},r.createElement("div",{className:me.fieldTypeInput,style:{border:"0"}},e.value))}if("Notes"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(fn=e.options)||void 0===fn||null===(_n=fn.value)||void 0===_n?void 0:_n.length)>0)return r.createElement(ye.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-dark)",fontWeight:"regular",paddingLeft:"5px"},enabled:To,width:"100%",editMode:te,showWidth:function(n){e.field_options=(0,a.Z)((0,a.Z)({},e.field_options),{},{width:"".concat(n,"px")})},style:{border:"0"},key:n,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:!1,error:e.errors},r.createElement("label",{key:n,className:me.labelInput,style:{display:e.visible?"":"none"}},"".concat(e.field_name,": ").concat(null===e||void 0===e||null===(Lt=e.options)||void 0===Lt?void 0:Lt.value)));if("List Filter"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(gn=e.options)||void 0===gn||null===(bn=gn.value)||void 0===bn?void 0:bn.length)>0)return r.createElement(r.Fragment,null);if("Ratings"===(null===e||void 0===e?void 0:e.data_type_name))return r.createElement(r.Fragment,null);if("Value"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(Cn=e.options)||void 0===Cn||null===(Zn=Cn.module_id)||void 0===Zn?void 0:Zn.length)>0&&(null===e||void 0===e||null===(Sn=e.options)||void 0===Sn||null===(kn=Sn.component_id)||void 0===kn?void 0:kn.length)>0)return r.createElement(ye.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-light)"},width:"100%",style:{border:"0"},key:n,fieldLabel:e.field_name,fieldIcon:e.icon,editMode:te,showWidth:function(n){e.field_options=(0,a.Z)((0,a.Z)({},e.field_options),{},{width:"".concat(n,"px")})},notes:null===e||void 0===e||null===(Ot=e.options)||void 0===Ot?void 0:Ot.notes,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors,customIconBgColor:"white"},r.createElement("input",{value:null===e||void 0===e||null===(Rt=e.options)||void 0===Rt?void 0:Rt.value,className:me.fieldTypeInput,name:e.field_name,disabled:!0}));if("URL"===e.data_type_name)return r.createElement(ye.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-light)"},border:{border:"0"},width:"100%",editMode:te,showWidth:function(n){e.field_options=(0,a.Z)((0,a.Z)({},e.field_options),{},{width:"".concat(n,"px")})},key:n,notes:null===e||void 0===e||null===(zt=e.options)||void 0===zt?void 0:zt.notes,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors,customIconBgColor:"white"},null!==e&&void 0!==e&&null!==(qt=e.options.value)&&void 0!==qt&&qt.includes("jpg")||null!==e&&void 0!==e&&null!==(Bt=e.options.value)&&void 0!==Bt&&Bt.includes("jpeg")||null!==e&&void 0!==e&&null!==(Ft=e.options)&&void 0!==Ft&&Ft.image||null!==e&&void 0!==e&&null!==(Wt=e.options.value)&&void 0!==Wt&&Wt.includes("png")?r.createElement("div",{onClick:function(){return window.open(null===e||void 0===e?void 0:e.options.value,"_blank")}},r.createElement("img",{alt:"lg",src:null===e||void 0===e?void 0:e.options.value,style:{width:"100%",height:"100%",cursor:"pointer"}})):null!==e&&void 0!==e&&null!==(Yt=e.options.value)&&void 0!==Yt&&Yt.includes("pdf")?r.createElement("div",{style:{width:"inherit"},onClick:function(){return window.open(null===e||void 0===e?void 0:e.options.value,"_blank")}},r.createElement("embed",{src:"".concat(null===e||void 0===e?void 0:e.options.value,"#toolbar=0&navpanes=0&scrollbar=0&zoom=100%"),width:"100%",height:"1000px"})):r.createElement("div",{style:{width:"inherit"},onClick:function(){return window.open(null===e||void 0===e?void 0:e.options.value,"_blank")}},r.createElement("textarea",{disabled:!0,onChange:function(){},autoComplete:"none",value:null===(null===e||void 0===e?void 0:e.options.value)?"":null===e||void 0===e?void 0:e.options.value,className:me.fieldTypeInput,style:{height:"auto",width:"inherit",cursor:"pointer"},name:e.field_name})));if("Formula"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(Nn=e.options)||void 0===Nn||null===(Tn=Nn.operator)||void 0===Tn?void 0:Tn.length)>0){var pa,ma,fa=M.newStepComponents.filter((function(e){return null===e.options||(void 0===e.allowMultipleInputs||!1===e.options.allowMultipleInputs)})),_a=(0,U.LV)(null===e||void 0===e?void 0:e.options,g.selected_fields.filter((function(n){return e.options.list.includes(n.field_name)})),[].concat((0,d.Z)(M.components.filter((function(e){return fa.every((function(n){return n.id!==e.id}))}))),(0,d.Z)(W.Z((function(e){return e.selected_fields.filter((function(e){return""===e.value})).length>0}),fa))),null!==(pa=null===M||void 0===M?void 0:M.items)&&void 0!==pa?pa:[],null!==(ma=null===M||void 0===M?void 0:M.newStepComponents)&&void 0!==ma?ma:[]);return void 0!==_a&&0!==_a&&(e.value=_a),r.createElement(ye.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-dark)",fontWeight:"regular",paddingLeft:"5px"},width:"100%",style:{border:"1px dashed var(--app-color-gray-light)",padding:"5px"},editMode:te,showWidth:function(n){e.field_options=(0,a.Z)((0,a.Z)({},e.field_options),{},{width:"".concat(n,"px")})},key:n,fieldLabel:e.field_name,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors,customIconBgColor:"white"},r.createElement("div",{style:{flexDirection:"column",width:"inherit"},key:n},r.createElement("input",{value:_a||0,className:me.fieldTypeInput,name:e.field_name,readOnly:!0,style:{border:"0"}}),uo&&_a>0&&r.createElement(Qe,{title:"",nav:uo,openNav:so},r.createElement("div",{style:{color:"var(--app-color-gray-dark)",height:"inherit",width:"100%",display:null!==e&&void 0!==e&&e.visible?"":"none"}},r.createElement("div",{key:n},r.createElement("div",{className:me.actionsContainer,style:{fontSize:"20px"}},r.createElement("div",null,e.field_name,":"),r.createElement("div",{style:{fontWeight:"bolder"}},_a)),r.createElement("hr",{style:{borderTop:"0.5px solid #D2D2D2"}})),r.createElement("br",null),r.createElement(h.zx,{clicked:function(){return so()},title:"Continue",style:{width:"100%"}})))))}if("Dropdown"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(Un=e.options)||void 0===Un||null===(Ln=Un.list)||void 0===Ln?void 0:Ln.length)>0)return r.createElement(ye.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-dark)",fontWeight:"regular",paddingLeft:"5px"},enabled:To,width:"100%",style:{marginTop:"0px",border:"1px dashed var(--app-color-gray-light)",padding:"5px"},editMode:te,showWidth:function(n){e.field_options=(0,a.Z)((0,a.Z)({},e.field_options),{},{width:"".concat(n,"px")})},key:n,fieldLabel:e.field_name,notes:null===e||void 0===e||null===(jt=e.options)||void 0===jt?void 0:jt.notes,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors},r.createElement("div",{style:{width:"100%"}},r.createElement(P.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-light)"},key:n,visible:e.visible,mandatory:e.mandatory,items:null===e||void 0===e||null===(Ht=e.options)||void 0===Ht?void 0:Ht.list.map((function(e){return{label:e,value:e}})),className:me.dropdownClassContainer,error:e.errors,onClicked:function(e){return An(e?"180px":"50px")},onChange:function(e){An("50px"),Z(e,n)},selectionType:null===e||void 0===e||null===(Jt=e.options)||void 0===Jt?void 0:Jt.type,fieldIcon:e.icon,value:void 0===e.value||null===e.value?"":e.value})));if("Payments"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(zn=e.options)||void 0===zn||null===(qn=zn.list)||void 0===qn?void 0:qn.length)>0)return r.createElement(ye.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-dark)",fontWeight:"regular",paddingLeft:"5px"},enabled:To,width:"100%",style:{marginTop:"0px",border:"1px dashed var(--app-color-gray-light)",padding:"5px"},editMode:te,showWidth:function(n){e.field_options=(0,a.Z)((0,a.Z)({},e.field_options),{},{width:"".concat(n,"px")})},key:n,fieldLabel:e.field_name,notes:null===e||void 0===e||null===(Gt=e.options)||void 0===Gt?void 0:Gt.notes,fieldIcon:e.icon,isProcess:!0,visible:!0,mandatory:e.mandatory,error:On[n]},r.createElement("div",{style:{width:"100%",pointerEvents:!0===(null===Y||void 0===Y||null===(Vt=Y.processModule)||void 0===Vt?void 0:Vt.isUpdating)?"none":""}},null!==b&&void 0!==b&&null!==(Qt=b.payments)&&void 0!==Qt&&Qt.stripe_id?r.createElement("div",{style:{padding:"10px 5px 10px 5px",width:"100%",border:"0px solid var(--app-color-gray-lighter)"}},"".concat(null===e||void 0===e?void 0:e.value,", ").concat(null===b||void 0===b||null===(ld=b.payments)||void 0===ld?void 0:ld.stripe_id.slice(0,6))):r.createElement(P.Z,{key:n,visible:e.visible,mandatory:e.mandatory,items:!0===(null===(Xt=Y.processModule)||void 0===Xt||null===(Kt=Xt.module)||void 0===Kt||null===($t=Kt.options)||void 0===$t?void 0:$t.credits)?[].concat((0,d.Z)(null!==(ed=null===e||void 0===e||null===(nd=e.options)||void 0===nd?void 0:nd.list.map((function(e){return{label:e,value:e}})))&&void 0!==ed?ed:[]),[{label:"Wallet",value:"Wallet"}]):null===e||void 0===e||null===(od=e.options)||void 0===od?void 0:od.list.map((function(e){return{label:e,value:e}})),className:me.dropdownClassContainer,error:e.errors,onClicked:function(e){return An(e?"180px":"50px")},onChange:function(o){if(o){var l,i,t,d,a,u,r,s,v,c,p,m,f,_,h,y,g,b,x=null===(l=M.newStepComponents.find((function(n){return n.selected_fields.filter((function(n){var o;return n.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.paymentField)})).length>0})))||void 0===l||null===(i=l.selected_fields)||void 0===i?void 0:i.find((function(n){var o;return n.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.paymentField)})),E=null===(t=M.components.find((function(n){return n.selected_fields.filter((function(n){var o;return n.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.paymentField)})).length>0})))||void 0===t||null===(d=t.selected_fields)||void 0===d?void 0:d.find((function(n){var o;return n.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.paymentField)})),C=null===(a=M.currentStep)||void 0===a||null===(u=a.component_blueprints)||void 0===u||null===(r=u.find((function(n){var o;return null===n||void 0===n||null===(o=n.selected_fields)||void 0===o?void 0:o.find((function(n){var o;return n.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.paymentField)}))})))||void 0===r||null===(s=r.selected_fields)||void 0===s?void 0:s.find((function(n){var o;return n.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.paymentField)}));if(On[n]="",+(null!==(v=null===x||void 0===x?void 0:x.value)&&void 0!==v?v:0)>0)M.total=x.value,M.plan=x.value;else if(+(null!==(c=null===E||void 0===E?void 0:E.value)&&void 0!==c?c:0)>0)M.total=E.value,M.plan=E.value;else{if(!(+(null!==(p=null===C||void 0===C?void 0:C.value)&&void 0!==p?p:0)>0))return On[n]="Please enter a payment amount in the designated field",Rn([]),void setTimeout((function(){return Rn(On)}));M.total=C.value,M.plan=C.value}if(1==(null===(m=Y.processModule)||void 0===m||null===(f=m.module)||void 0===f||null===(_=f.options)||void 0===_?void 0:_.credits)&&"Wallet"===o){if(+(null!==(b=Oe.wallet)&&void 0!==b?b:0)<+M.total)return On[n]="Insufficient wallet balance",Rn([]),void setTimeout((function(){return Rn(On)}))}else if(1==(null===(h=Y.processModule)||void 0===h||null===(y=h.module)||void 0===y||null===(g=y.options)||void 0===g?void 0:g.credits)&&"Points"===o){var w,S;if(+(null!==(w=null===(S=Oe.options)||void 0===S?void 0:S.points)&&void 0!==w?w:0)<+M.total)return On[n]="Insufficient points balance",Rn([]),void setTimeout((function(){return Rn(On)}))}On[n]="",Rn([]),setTimeout((function(){return Rn(On)})),An("50px"),Z(o,n)}},selectionType:"Dropdown",fieldIcon:e.icon,value:void 0===e.value||null===e.value?"":e.value,placeholder:""})));if("Positions"===(null===e||void 0===e?void 0:e.data_type_name)&&"multiple"===(null===e||void 0===e||null===(Wn=e.options)||void 0===Wn?void 0:Wn.type))return r.createElement(ye.Z,{enabled:To,style:{height:"".concat((null===e||void 0===e||null===(id=e.value)||void 0===id?void 0:id.split(",").length)>2?"160":"45","px"),marginBottom:"50px"},width:"100%",editMode:te,key:n,fieldLabel:e.field_name,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors,notes:null===e||void 0===e||null===(td=e.options)||void 0===td?void 0:td.notes},r.createElement("div",{style:{width:"100%",border:"1px solid var(--app-color-gray-dark)"}},r.createElement(P.Z,{onOpen:function(e){An("50px"===Dn?"180px":"50px")},visible:null===e||void 0===e?void 0:e.visible,mandatory:null===e||void 0===e?void 0:e.mandatory,className:me.dropdownClassContainer,items:K.filter((function(n){var o,l;return null===e||void 0===e||null===(o=e.options)||void 0===o||null===(l=o.position_id)||void 0===l?void 0:l.includes(null===n||void 0===n?void 0:n.value)})),value:e.value,loading:Ve,error:null===e||void 0===e?void 0:e.errors,onChange:function(e){Z(e,n)},selectionType:"multiple",fieldIcon:null===e||void 0===e?void 0:e.icon,placeholder:""})));if("Positions"===(null===e||void 0===e?void 0:e.data_type_name)&&null!==e&&void 0!==e&&null!==(Yn=e.options)&&void 0!==Yn&&Yn.calendar){var ha,ya,ga,ba,xa,Ea,Ca,Za,wa,Ma,Sa,ka,Ia,Pa,Na,Ta,Da=JSON.parse(null!==(ha=null===e||void 0===e?void 0:e.value)&&void 0!==ha?ha:JSON.stringify({user:0})),Aa=We.find((function(e){return e.id===(null===Da||void 0===Da?void 0:Da.task)})),Ua=null===We||void 0===We?void 0:We.filter((function(e){var n,o,l,i;return(null===e||void 0===e||null===(n=e.add_info)||void 0===n?void 0:n.module_id)===(null===(o=Y.processModule)||void 0===o?void 0:o.module_id)&&e.creator.id===(null===Da||void 0===Da?void 0:Da.user)&&!(null!==e&&void 0!==e&&null!==(l=e.assignee)&&void 0!==l&&l.id)&&ae()((0,de.now)()).diff(ae()(null===e||void 0===e||null===(i=e.add_info)||void 0===i?void 0:i.start),"seconds")<0}));return r.createElement(ye.Z,{enabled:To,style:{marginBottom:"50px"},width:"100%",editMode:te,key:n,fieldLabel:e.field_name,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors,notes:null===e||void 0===e||null===(ya=e.options)||void 0===ya?void 0:ya.notes},r.createElement("div",{style:{display:"flex",flexDirection:"column",width:"100%"}},r.createElement("div",{style:{width:"100%",border:"1px solid var(--app-color-gray-dark)"}},r.createElement(P.Z,{onFocus:function(){return 0==K.length&&po()},visible:null===e||void 0===e?void 0:e.visible,mandatory:null===e||void 0===e?void 0:e.mandatory,className:"multiple"===(null===e||void 0===e||null===(ga=e.options)||void 0===ga?void 0:ga.type)?me.dropdownHeightClassContainer:me.dropdownClassContainer,value:null===(ba=K.find((function(e){return e.value===(null===Da||void 0===Da?void 0:Da.pos)})))||void 0===ba?void 0:ba.label,loading:Ve,items:K.filter((function(n){var o,l;return null===e||void 0===e||null===(o=e.options)||void 0===o||null===(l=o.position_id)||void 0===l?void 0:l.includes(null===n||void 0===n?void 0:n.value)})),error:null===e||void 0===e?void 0:e.errors,onChange:function(e){e.length>0&&(Da.pos=void 0,Da.user=void 0,Z(JSON.stringify(Da),n),(0,Ee.n0)([e]).pipe((0,c.q)(1)).subscribe({next:function(o){be(o),setTimeout((function(){Da.pos=e,Z(JSON.stringify(Da),n)}),0)}}))},selectionType:null===e||void 0===e||null===(xa=e.options)||void 0===xa?void 0:xa.type,fieldIcon:null===e||void 0===e?void 0:e.icon})),r.createElement("div",{style:{width:"100%"}},0==(null===_e||void 0===_e?void 0:_e.length)&&r.createElement("p",null,"No ".concat(e.field_name," found")),!Aa&&r.createElement(S.default,{initialSelected:null!==e&&void 0!==e&&e.value?_e.filter((function(e){var n,o;return(null===e||void 0===e||null===(n=e.user)||void 0===n||null===(o=n.positions)||void 0===o?void 0:o.filter((function(e){return(null===Da||void 0===Da?void 0:Da.pos)===(null===e||void 0===e?void 0:e.id)})).length)>0})).map((function(e){return e.value})).indexOf(null===Da||void 0===Da?void 0:Da.user):void 0,card:!0,isReport:!1,"app-variant-is-mobile":"true",columns:["Name","Info","About"].concat((0,d.Z)(null!==(Ea=null===R||void 0===R||null===(Ca=R.misc_info)||void 0===Ca?void 0:Ca.profile)&&void 0!==Ea?Ea:["Rate"]),["Location","Photo","Ratings"]),list:_e.filter((function(e){var n,o;return(null===e||void 0===e||null===(n=e.user)||void 0===n||null===(o=n.positions)||void 0===o?void 0:o.filter((function(e){return(null===Da||void 0===Da?void 0:Da.pos)===(null===e||void 0===e?void 0:e.id)})).length)>0})).map((function(e){var n,o,l,i,t,d,u,s,v,c,p,m,f,_=null===e||void 0===e||null===(n=e.user)||void 0===n||null===(o=n.ratings)||void 0===o?void 0:o.map((function(e){return+e.ratings}));return(0,a.Z)((0,a.Z)({},null!==(l=null===(i=e.user)||void 0===i||null===(t=i.options)||void 0===t?void 0:t.add_info)&&void 0!==l?l:{}),{},{Name:"".concat(e.user.first_name," ").concat(e.user.last_name),Location:r.createElement("div",{style:{marginTop:"10px"}},null===(d=e.user)||void 0===d?void 0:d.city),About:null!==(u=null===(s=e.user.options)||void 0===s?void 0:s.info)&&void 0!==u?u:null===(v=e.user)||void 0===v?void 0:v.positions.map((function(e){return e.name})).toString().replace(",",", "),id:e.user.id,Photo:null!==(c=null===(p=e.user)||void 0===p?void 0:p.photo)&&void 0!==c?c:null===Y||void 0===Y||null===(m=Y.processModule.module)||void 0===m||null===(f=m.options)||void 0===f?void 0:f.background,Ratings:(null===_||void 0===_?void 0:_.length)>0&&r.createElement("div",{className:me.simpleNames},Array(Math.round(ne.Z(oe.Z,[le.Z,ie.Z])(_))).fill(0).map((function(e,n){return r.createElement(ve.G,{key:n,icon:se.Tab,style:{color:"var(--app-color-blue)"}})})),Array(5-Math.round(ne.Z(oe.Z,[le.Z,ie.Z])(_))).fill(0).map((function(e,n){return r.createElement(ve.G,{key:n,icon:se.Tab,style:{color:"lightgray"}})})))})})),onListItemClick:function(e){if(e){var o=_e.find((function(n){return n.value===e.id}));Da.user=null===o||void 0===o?void 0:o.value,Z(JSON.stringify(Da),n),(0,Te.Mk)(null===o||void 0===o?void 0:o.value,!0).pipe((0,c.q)(1)).subscribe({})}}},(null===Ua||void 0===Ua?void 0:Ua.length)>0&&r.createElement("p",null,"Schedules"),(null===Ua||void 0===Ua?void 0:Ua.length)>0&&r.createElement(pe.tq,{slidesPerView:3,centeredSlides:!0,spaceBetween:5,initialSlide:1,pagination:{clickable:!0,dynamicBullets:!0},modules:[ce.pt,ce.tl],className:"mySwiper",style:{border:"0.8px dashed gray",padding:"5px",height:"200px",display:(null===Ua||void 0===Ua?void 0:Ua.length)>0?"":"none"}},null===Ua||void 0===Ua?void 0:Ua.map((function(e,n){return r.createElement(pe.o5,{key:n+100,className:me.swiperslide},r.createElement("div",{className:me.dashboardCard,onClick:function(){Hn(!0),Qn(e)}},r.createElement("div",{style:{fontSize:"10px"}},ae()(new Date(e.add_info.start)).format("h:mm a")),e.add_info.end!==e.add_info.start&&r.createElement("div",{style:{fontSize:"10px"}},ae()(new Date(e.add_info.end)).format("h:mm a")),r.createElement("hr",{style:{border:"0.8px dashed gray"}}),r.createElement("p",{style:{fontSize:"12px",fontWeight:"bold"}},ae()(new Date(e.add_info.start)).format("MMM")),r.createElement("div",{style:{fontSize:"20px",fontWeight:"bold"}},ae()(new Date(e.add_info.start)).format("DD"))))})))),Aa&&r.createElement(S.default,{modern:!0,isReport:!1,"app-variant-is-mobile":"true",columns:["Responsible",null!==(Za=null===e||void 0===e||null===(wa=e.options)||void 0===wa?void 0:wa.header)&&void 0!==Za?Za:"Name",null!==(Ma=null===e||void 0===e||null===(Sa=e.options)||void 0===Sa?void 0:Sa.start)&&void 0!==Ma?Ma:"Date","Photo"],list:[Aa].map((function(n){var o,l,i,d,a,u,r;return r={},(0,t.Z)(r,null!==(o=null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.header)&&void 0!==o?o:"Name",n.name),(0,t.Z)(r,null!==(i=null===e||void 0===e||null===(d=e.options)||void 0===d?void 0:d.start)&&void 0!==i?i:"Date",ae()(new Date(null===(a=n.add_info)||void 0===a?void 0:a.start)).format("MMM DD h:mm a")),(0,t.Z)(r,"Responsible","".concat(n.creator.first_name," ").concat(n.creator.last_name)),(0,t.Z)(r,"Photo",null===(u=n.creator)||void 0===u?void 0:u.photo),r})),onListItemClick:function(e){e&&(Hn(!0),Qn(Aa))}}),jn&&r.createElement(nn,{save:!1,modalVisible:jn,heading:null!==(ka=null===e||void 0===e||null===(Ia=e.options)||void 0===Ia?void 0:Ia.header)&&void 0!==ka?ka:Vn?"Update Calendar":"Create New Calendar",labels:null===e||void 0===e?void 0:e.options,task:Vn,isProcess:!0,blured:!1,onClose:function(){return Hn(!1)},isEdit:!!Vn,statuses:null===e||void 0===e||null===(Pa=e.options)||void 0===Pa?void 0:Pa.list,priority:null===e||void 0===e||null===(Na=e.options)||void 0===Na?void 0:Na.priority,span:null===e||void 0===e||null===(Ta=e.options)||void 0===Ta?void 0:Ta.span,start_date:en,onUpdate:function(o){if(o.creator.id!==(null===Ce||void 0===Ce?void 0:Ce.id)&&(null===o||void 0===o?void 0:o.assignee_id)===(null===Ce||void 0===Ce?void 0:Ce.id)){var l;if(M.assigned_to=o.creator.id,Da.task=null===o||void 0===o?void 0:o.id,null!==o&&void 0!==o&&null!==(l=o.add_info)&&void 0!==l&&l.value){var i,t,d,a,u,r,s,v,c;Da.value=null===o||void 0===o||null===(i=o.add_info)||void 0===i?void 0:i.value;var p,m=null===(t=M.components.find((function(n){return n.selected_fields.find((function(n){var o;return n.field_name===(null===(o=e.options)||void 0===o?void 0:o.valueL)}))})))||void 0===t?void 0:t.selected_fields.find((function(n){var o;return n.field_name===(null===(o=e.options)||void 0===o?void 0:o.valueL)}));if(m)m.value=null===o||void 0===o||null===(p=o.add_info)||void 0===p?void 0:p.value;var f,_=null===(d=M.newStepComponents.find((function(n){return n.selected_fields.find((function(n){var o;return n.field_name===(null===(o=e.options)||void 0===o?void 0:o.valueL)}))})))||void 0===d?void 0:d.selected_fields.find((function(n){var o;return n.field_name===(null===(o=e.options)||void 0===o?void 0:o.valueL)}));if(_)_.value=null===o||void 0===o||null===(f=o.add_info)||void 0===f?void 0:f.value;var h,y=null===(a=Y.processModule)||void 0===a||null===(u=a.steps)||void 0===u||null===(r=u.find((function(n){var o;return null===(o=n.component_blueprints)||void 0===o?void 0:o.find((function(n){var o;return null===n||void 0===n||null===(o=n.selected_fields)||void 0===o?void 0:o.find((function(n){var o;return n.field_name===(null===(o=e.options)||void 0===o?void 0:o.valueL)}))}))})))||void 0===r||null===(s=r.component_blueprints)||void 0===s||null===(v=s.find((function(n){var o;return null===n||void 0===n||null===(o=n.selected_fields)||void 0===o?void 0:o.find((function(n){var o;return n.field_name===(null===(o=e.options)||void 0===o?void 0:o.valueL)}))})))||void 0===v||null===(c=v.selected_fields)||void 0===c?void 0:c.find((function(n){var o;return n.field_name===(null===(o=e.options)||void 0===o?void 0:o.valueL)}));if(y)y.value=null===o||void 0===o||null===(h=o.add_info)||void 0===h?void 0:h.value}Z(JSON.stringify(Da),n)}}}))))}if("Positions"===(null===e||void 0===e?void 0:e.data_type_name))return r.createElement(ye.Z,{enabled:To,style:{height:"".concat((null===e||void 0===e||null===(dd=e.value)||void 0===dd?void 0:dd.split(",").length)>2?"160":"45","px"),marginBottom:"50px"},width:"100%",editMode:te,key:n,fieldLabel:e.field_name,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors,notes:null===e||void 0===e||null===(ad=e.options)||void 0===ad?void 0:ad.notes},r.createElement("div",{style:{width:"100%",border:"1px solid var(--app-color-gray-dark)"}},r.createElement(P.Z,{visible:null===e||void 0===e?void 0:e.visible,mandatory:null===e||void 0===e?void 0:e.mandatory,className:"multiple"===(null===e||void 0===e||null===(ud=e.options)||void 0===ud?void 0:ud.type)?me.dropdownHeightClassContainer:me.dropdownClassContainer,items:K.filter((function(n){var o,l;return null===e||void 0===e||null===(o=e.options)||void 0===o||null===(l=o.position_id)||void 0===l?void 0:l.includes(null===n||void 0===n?void 0:n.value)})),value:e.value,loading:Ve,error:null===e||void 0===e?void 0:e.errors,onChange:function(e){Z(e,n)},selectionType:null===e||void 0===e||null===(rd=e.options)||void 0===rd?void 0:rd.type,fieldIcon:null===e||void 0===e?void 0:e.icon})));if("Value Button"===(null===e||void 0===e?void 0:e.data_type_name))return r.createElement(ye.Z,{width:"100%",editMode:te,key:n,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors,customIconBgColor:"white"},r.createElement(S.default,{rowStyleSelected:{border:null!==e&&void 0!==e&&e.value?"2px solid black":"1px dashed black"},initialSelected:(null===(sd=e.options)||void 0===sd?void 0:sd.value)===(null===e||void 0===e?void 0:e.value)?0:void 0,modern:!0,isReport:!1,filtersContainer:me.filtersContainerII,"app-variant-is-mobile":"true",columns:["Type","Description","Image"],list:[{Type:null===(vd=e.options)||void 0===vd?void 0:vd.label,Description:null!==(cd=null===e||void 0===e||null===(pd=e.options)||void 0===pd?void 0:pd.notes)&&void 0!==cd?cd:e.field_name,Image:null===(md=e.options)||void 0===md?void 0:md.image}],onListItemClick:function(){var o;null!==e&&void 0!==e&&e.value?x(void 0,n):(null===g||void 0===g||null===(o=g.selected_fields)||void 0===o||o.filter((function(e){return"Value Button"===(null===e||void 0===e?void 0:e.data_type_name)})).map((function(e){e.value=void 0})),x(e.options.value,n))}}));if("Calendar"===(null===e||void 0===e?void 0:e.data_type_name))return r.createElement(ye.Z,{enabled:To,width:"100%",style:{width:"100%"},editMode:te,showWidth:function(n){e.field_options=(0,a.Z)((0,a.Z)({},e.field_options),{},{width:"".concat(n,"px")})},key:n,fieldLabel:e.field_name,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors,notes:null===e||void 0===e||null===(fd=e.options)||void 0===fd?void 0:fd.notes},r.createElement("div",{id:e.field_name,style:{width:"inherit",marginBottom:"160px"}},r.createElement(h.zx,{light:!0,clicked:function(){var e,n;Xe(!0),(0,Te.Mk)(null!==(e=null===b||void 0===b||null===(n=b.created_by)||void 0===n?void 0:n.id)&&void 0!==e?e:Ce.id,!0).pipe((0,c.q)(1)).subscribe({next:function(){Xe(!1)}})},loading:Ve,icon:r.createElement("img",{src:C.Fdh})}),!(jn||Ve)&&r.createElement(fe.Scheduler,{events:We.length>0?null===We||void 0===We||null===(_d=We.filter((function(e){var n,o;return(null===e||void 0===e||null===(n=e.add_info)||void 0===n?void 0:n.module_id)===(null===(o=Y.processModule)||void 0===o?void 0:o.module_id)})))||void 0===_d?void 0:_d.map((function(e){var n,o;return{event_id:e.id,title:e.description,start:new Date(Date.parse(null===(n=e.add_info)||void 0===n?void 0:n.start)),end:null!==e&&void 0!==e&&e.completed_at?new Date(Date.parse(e.completed_at)):new Date(Date.parse(null===(o=e.add_info)||void 0===o?void 0:o.end)),admin_id:2,color:"#50b500",editable:!1,deletable:!1}})):[],navigation:!0,view:$n,agenda:(null===b||void 0===b||null===(hd=b.created_by)||void 0===hd?void 0:hd.id)!==Ce.id&&!(null===b||void 0===b||null===(yd=b.created_by)||void 0===yd||!yd.id),day:{startHour:0,endHour:24,cellRenderer:function(e){e.height,e.start,e.onClick;var n=!1,o=(0,i.Z)(e,ze);return r.createElement(h.zx,(0,l.Z)({style:{height:"100%",background:"transparent",cursor:"pointer"},clicked:function(){Hn(!0),Qn(void 0)},disabled:n},o))}},month:(null===b||void 0===b||null===(gd=b.created_by)||void 0===gd?void 0:gd.id)!==Ce.id&&void 0!==(null===b||void 0===b?void 0:b.created_by)?null:{cellRenderer:function(e){e.height,e.start,e.onClick;var n=!1,o=(0,i.Z)(e,qe);return r.createElement(h.zx,(0,l.Z)({style:{height:"100%",background:"transparent",cursor:"pointer"},clicked:function(){Hn(!0),Qn(void 0)},disabled:n},o))}},week:(null===b||void 0===b||null===(bd=b.created_by)||void 0===bd?void 0:bd.id)!==Ce.id&&void 0!==(null===b||void 0===b?void 0:b.created_by)?null:{weekDays:[0,1,2,3,4,5],weekStartOn:6,startHour:0,endHour:25,step:60,cellRenderer:function(e){e.height;var n=e.start,o=(e.onClick,!1),t=(0,i.Z)(e,Be);return r.createElement(h.zx,(0,l.Z)({style:{height:"100%",background:"transparent",cursor:"pointer"},clicked:function(){on(n),Hn(!0),Qn(void 0)},disabled:o},t))}},onEventClick:function(e){Hn(!0),Qn(null===We||void 0===We?void 0:We.find((function(n){return n.id===e.event_id})))},onViewChange:function(e){return eo(e)}}),jn&&r.createElement(nn,{modalVisible:jn,heading:null!==e&&void 0!==e&&null!==(xd=e.options)&&void 0!==xd&&xd.title?null===e||void 0===e||null===(Ed=e.options)||void 0===Ed?void 0:Ed.title:Vn?"Update Calendar":"Create New Calendar",task:Vn,isProcess:!0,blured:!1,onClose:function(){return Hn(!1)},isEdit:!!Vn,statuses:null===e||void 0===e||null===(Cd=e.options)||void 0===Cd?void 0:Cd.list,priority:null===e||void 0===e||null===(Zd=e.options)||void 0===Zd?void 0:Zd.priority,span:null===e||void 0===e||null===(wd=e.options)||void 0===wd?void 0:wd.span,start_date:en})));if("Video"===(null===e||void 0===e?void 0:e.data_type_name)&&null!==e&&void 0!==e&&null!==(Jn=e.options)&&void 0!==Jn&&Jn.start)return r.createElement(ye.Z,{enabled:To,width:"100%",editMode:te,style:{},key:n,fieldLabel:e.field_name,notes:null===e||void 0===e||null===(Md=e.options)||void 0===Md?void 0:Md.notes,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors},r.createElement("div",{style:{width:"100%",height:"auto",border:"1px solid var(--app-color-gray-light)"}},r.createElement("div",{id:"custom-input",style:{cursor:"pointer",display:"flex",justifyContent:"center",width:"100%",alignItems:"stretch",padding:"5px",border:"0px solid var(--app-color-gray-lighter)"}},r.createElement(ve.G,{icon:se.WRo,style:{width:"20px",height:"20px"}}),r.createElement("input",{value:e.value?ae()(e.value).format("DD MMMM YYYY HH:mm"):"",disabled:!0,type:"text",style:{flex:1,marginTop:"auto",marginBottom:"auto",outline:"none",fontFamily:"var(--app-text-main-font)",fontSize:"16px",lineHeight:"20px",color:"#4A4A4A",textAlign:"left",maxWidth:"98%",border:"0px"},onChange:function(e){}})),r.createElement(Le.Z,{payload:{name:null===b||void 0===b?void 0:b.id}})));if("Video"!==(null===e||void 0===e?void 0:e.data_type_name)||null!==e&&void 0!==e&&null!==(Gn=e.options)&&void 0!==Gn&&Gn.start){if("People"===(null===e||void 0===e?void 0:e.data_type_name)&&null!==e&&void 0!==e&&null!==(Xn=e.options)&&void 0!==Xn&&Xn.calendar){var La,Oa,Ra,za,qa,Ba,Fa,Wa,Ya,ja,Ha,Ja,Ga,Va,Qa,Xa,Ka,$a,eu,nu,ou,lu=JSON.parse(null!==(La=null===e||void 0===e?void 0:e.value)&&void 0!==La?La:JSON.stringify({user:0})),iu=We.find((function(e){return e.id===(null===lu||void 0===lu?void 0:lu.task)})),tu=null===We||void 0===We?void 0:We.filter((function(e){var n,o,l,i;return(null===e||void 0===e||null===(n=e.add_info)||void 0===n?void 0:n.module_id)===(null===(o=Y.processModule)||void 0===o?void 0:o.module_id)&&e.creator.id===(null===lu||void 0===lu?void 0:lu.user)&&!(null!==e&&void 0!==e&&null!==(l=e.assignee)&&void 0!==l&&l.id)&&ae()((0,de.now)()).diff(ae()(null===e||void 0===e||null===(i=e.add_info)||void 0===i?void 0:i.start),"seconds")<0}));return r.createElement(ye.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-dark)",fontWeight:"regular"},enabled:To,width:"100%",editMode:te,dragEnd:function(n){var o,l=null===(o=document.getElementById(null===g||void 0===g?void 0:g.name))||void 0===o?void 0:o.getBoundingClientRect();document.getElementById(e.field_name).style.position="absolute",document.getElementById(e.field_name).style.top="".concat(n.top-l.top,"px"),document.getElementById(e.field_name).style.left="".concat(n.left-l.left,"px")},key:n,fieldLabel:null===e||void 0===e?void 0:e.field_name,notes:null===e||void 0===e||null===(Oa=e.options)||void 0===Oa?void 0:Oa.notes,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors},r.createElement("div",{style:{width:"100%"}},(null===e||void 0===e||null===(Ra=e.options)||void 0===Ra||null===(za=Ra.dropdown)||void 0===za?void 0:za.length)>0&&r.createElement("div",{style:{width:"100%",border:"0.5px solid var(--app-color-gray-dark)"}},r.createElement(P.Z,{visible:null===e||void 0===e?void 0:e.visible,mandatory:null===e||void 0===e?void 0:e.mandatory,className:me.dropdownClassContainer,items:null===e||void 0===e||null===(qa=e.options)||void 0===qa||null===(Ba=qa.dropdown)||void 0===Ba?void 0:Ba.map((function(e){return{label:e,value:e}})),value:null===lu||void 0===lu?void 0:lu.pos,error:null===e||void 0===e?void 0:e.errors,onChange:function(o){var l,i;o.length>0&&(lu.pos=void 0,lu.user=void 0,Z(JSON.stringify(lu),n),be([]),Xe(!0),(0,Ee.FY)(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.position_id,null===e||void 0===e||null===(i=e.options)||void 0===i?void 0:i.filter,o).pipe((0,c.q)(1)).subscribe({next:function(e){Xe(!1),be(e),setTimeout((function(){lu.pos=o,Z(JSON.stringify(lu),n)}),0)},error:function(){return Xe(!1)}}))},selectionType:null===e||void 0===e||null===(Fa=e.options)||void 0===Fa?void 0:Fa.type,fieldIcon:null===e||void 0===e?void 0:e.icon})),0==(null===_e||void 0===_e?void 0:_e.length)&&!Ve&&r.createElement("p",null,"No ".concat(e.field_name," found")),0==(null===_e||void 0===_e?void 0:_e.length)&&Ve&&r.createElement("p",null,"Searching for ".concat(e.field_name)),!iu&&r.createElement(S.default,{rowStyleSelected:{border:"2px solid var(--app-color-gray-light)"},initialSelected:null!==e&&void 0!==e&&e.value?_e.filter((function(n){var o,l;return(null===n||void 0===n||null===(o=n.user)||void 0===o||null===(l=o.positions)||void 0===l?void 0:l.filter((function(n){var o,l;return null===e||void 0===e||null===(o=e.options)||void 0===o||null===(l=o.position_id)||void 0===l?void 0:l.includes(null===n||void 0===n?void 0:n.id)})).length)>0})).map((function(e){return e.value})).indexOf(null===lu||void 0===lu?void 0:lu.user):void 0,card:!0,isReport:!1,"app-variant-is-mobile":"true",columns:["Name","Info","About"].concat((0,d.Z)(null!==(Wa=null===R||void 0===R||null===(Ya=R.misc_info)||void 0===Ya?void 0:Ya.profile)&&void 0!==Wa?Wa:["Rate"]),["Location","Photo","Ratings"]),list:_e.filter((function(n){var o,l;return(null===n||void 0===n||null===(o=n.user)||void 0===o||null===(l=o.positions)||void 0===l?void 0:l.filter((function(n){var o,l;return null===e||void 0===e||null===(o=e.options)||void 0===o||null===(l=o.position_id)||void 0===l?void 0:l.includes(null===n||void 0===n?void 0:n.id)})).length)>0})).map((function(e){var n,o,l,i,t,d,u,s,v,c,p,m=null===e||void 0===e||null===(n=e.user)||void 0===n||null===(o=n.ratings)||void 0===o?void 0:o.map((function(e){return+e.ratings}));return(0,a.Z)((0,a.Z)({},null!==(l=null===(i=e.user)||void 0===i||null===(t=i.options)||void 0===t?void 0:t.add_info)&&void 0!==l?l:{}),{},{Name:"".concat(e.user.first_name," ").concat(e.user.last_name),Location:r.createElement("div",{style:{marginTop:"10px",fontWeight:"bolder",fontSize:"12px"}},null===(d=e.user)||void 0===d?void 0:d.city),Info:null===(u=e.user.options)||void 0===u?void 0:u.info,id:e.user.id,Photo:null!==(s=null===(v=e.user)||void 0===v?void 0:v.photo)&&void 0!==s?s:null===Y||void 0===Y||null===(c=Y.processModule.module)||void 0===c||null===(p=c.options)||void 0===p?void 0:p.background,Ratings:(null===m||void 0===m?void 0:m.length)>0&&r.createElement("div",{className:me.simpleNames},Array(Math.round(ne.Z(oe.Z,[le.Z,ie.Z])(m))).fill(0).map((function(e,n){return r.createElement(ve.G,{key:n,icon:se.Tab,style:{color:"var(--app-color-blue)"}})})),Array(5-Math.round(ne.Z(oe.Z,[le.Z,ie.Z])(m))).fill(0).map((function(e,n){return r.createElement(ve.G,{key:n,icon:se.Tab,style:{color:"lightgray"}})})))})})),onListItemClick:function(e){if(e){var o=_e.find((function(n){return n.value===e.id}));lu.user=null===o||void 0===o?void 0:o.value,Z(JSON.stringify(lu),n),Xe(!0),(0,Te.Mk)(null===o||void 0===o?void 0:o.value,!0).pipe((0,c.q)(1)).subscribe({next:function(){return Xe(!1)},error:function(){return Xe(!1)}})}}},(null===tu||void 0===tu?void 0:tu.length)>0&&r.createElement("p",null,"Schedules"),(null===tu||void 0===tu?void 0:tu.length)>0&&(null===tu||void 0===tu?void 0:tu.length)>0?r.createElement(pe.tq,{slidesPerView:3,centeredSlides:!0,spaceBetween:10,initialSlide:1,pagination:{clickable:!0,dynamicBullets:!0},modules:[ce.pt,ce.tl],className:"mySwiper",style:{border:"0.8px dashed gray",padding:"5px",height:"200px",display:(null===tu||void 0===tu?void 0:tu.length)>0?"":"none",zIndex:"0"}},null===(ja=J.Z([G.Z(V.Z("due_date"))])(tu))||void 0===ja?void 0:ja.map((function(e,n){return r.createElement(pe.o5,{key:n+200,className:me.swiperslide},r.createElement("div",{className:me.dashboardCard,onClick:function(){Hn(!0),Qn(e)}},r.createElement("div",{style:{fontSize:"10px"}},ae()(new Date(e.add_info.start)).format("h:mm a")),e.add_info.end!==e.add_info.start&&r.createElement("div",{style:{fontSize:"10px"}},ae()(new Date(e.add_info.end)).format("h:mm a")),r.createElement("hr",{style:{border:"0.8px dashed gray"}}),r.createElement("p",{style:{fontSize:"12px",fontWeight:"bold"}},ae()(new Date(e.add_info.start)).format("MMM")),r.createElement("div",{style:{fontSize:"20px",fontWeight:"bold"}},ae()(new Date(e.add_info.start)).format("DD"))))}))):null!==lu&&void 0!==lu&&lu.user?r.createElement("p",{style:{fontSize:"12px",paddingLeft:"10px"}},Ve?"Searching for Schedules":"No Schedules Found"):r.createElement("div",null)),r.createElement("div",{className:me.centerDiv},!iu&&!(null!==e&&void 0!==e&&null!==(Ha=e.options)&&void 0!==Ha&&Ha.dropdown)&&(!(null!==e&&void 0!==e&&e.last_page)||1===(null===e||void 0===e?void 0:e.last_page))&&r.createElement(h.zx,{title:"More",style:{width:"30%"},clicked:function(){var o,l;(0,Ee.Wz)(null===(o=Y.processModule.module)||void 0===o||null===(l=o.options)||void 0===l?void 0:l.positions,5,1).pipe((0,v.P)()).subscribe({next:function(o){e.last_page=null===o||void 0===o?void 0:o.last_page,be(null===o||void 0===o?void 0:o.data),lu.user=void 0,Z(JSON.stringify(lu),n)}})}}),!iu&&!(null!==e&&void 0!==e&&null!==(Ja=e.options)&&void 0!==Ja&&Ja.dropdown)&&(null===e||void 0===e?void 0:e.last_page)>1&&r.createElement("div",{style:{display:"flex"}},(0,d.Z)(Array(Math.ceil(+(null===e||void 0===e?void 0:e.last_page)))).map((function(o,l){return r.createElement(h.zx,{title:l+1,clear:!0,key:l,style:{width:"40px",display:l<18?"":"none"},titleContainer:me.pageContainer,disabled:l==(null===e||void 0===e?void 0:e.page)-1,clicked:function(){var o,i;e.page=l+1,(0,Ee.Wz)(null===(o=Y.processModule.module)||void 0===o||null===(i=o.options)||void 0===i?void 0:i.positions,5,null===e||void 0===e?void 0:e.page).pipe((0,v.P)()).subscribe({next:function(o){e.last_page=null===o||void 0===o?void 0:o.last_page,be(null===o||void 0===o?void 0:o.data),lu.user=void 0,Z(JSON.stringify(lu),n)}})}})})))),iu&&r.createElement(S.default,{modern:!0,isReport:!1,"app-variant-is-mobile":"true",columns:["Responsible",null!==(Ga=null===e||void 0===e||null===(Va=e.options)||void 0===Va?void 0:Va.header)&&void 0!==Ga?Ga:"Name",null!==(Qa=null===e||void 0===e||null===(Xa=e.options)||void 0===Xa?void 0:Xa.start)&&void 0!==Qa?Qa:"Date","Photo"],list:[iu].map((function(n){var o,l,i,d,a,u,r;return r={},(0,t.Z)(r,null!==(o=null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.header)&&void 0!==o?o:"Name",n.name),(0,t.Z)(r,null!==(i=null===e||void 0===e||null===(d=e.options)||void 0===d?void 0:d.start)&&void 0!==i?i:"Date",ae()(new Date(null===(a=n.add_info)||void 0===a?void 0:a.start)).format("MMM DD h:mm a")),(0,t.Z)(r,"Responsible","".concat(n.creator.first_name," ").concat(n.creator.last_name)),(0,t.Z)(r,"Position",""),(0,t.Z)(r,"Photo",null===(u=n.creator)||void 0===u?void 0:u.photo),r})),onListItemClick:function(e){e&&(Hn(!0),Qn(iu))}}),jn&&r.createElement(nn,{save:!1,modalVisible:jn,heading:null!==(Ka=null===e||void 0===e||null===($a=e.options)||void 0===$a?void 0:$a.header)&&void 0!==Ka?Ka:Vn?"Update Calendar":"Create New Calendar",labels:null===e||void 0===e?void 0:e.options,task:Vn,isProcess:!0,blured:!1,onClose:function(){return Hn(!1)},isEdit:!!Vn,statuses:null===e||void 0===e||null===(eu=e.options)||void 0===eu?void 0:eu.list,priority:null===e||void 0===e||null===(nu=e.options)||void 0===nu?void 0:nu.priority,span:null===e||void 0===e||null===(ou=e.options)||void 0===ou?void 0:ou.span,start_date:en,onUpdate:function(o){if(o.creator.id!==(null===Ce||void 0===Ce?void 0:Ce.id)&&(null===o||void 0===o?void 0:o.assignee_id)===(null===Ce||void 0===Ce?void 0:Ce.id)){var l;if(M.assigned_to=o.creator.id,lu.task=null===o||void 0===o?void 0:o.id,null!==o&&void 0!==o&&null!==(l=o.add_info)&&void 0!==l&&l.value){var i,t,d,a,u,r,s,v,c;lu.value=null===o||void 0===o||null===(i=o.add_info)||void 0===i?void 0:i.value;var p,m=null===(t=M.components.find((function(n){return n.selected_fields.find((function(n){var o;return n.field_name===(null===(o=e.options)||void 0===o?void 0:o.valueL)}))})))||void 0===t?void 0:t.selected_fields.find((function(n){var o;return n.field_name===(null===(o=e.options)||void 0===o?void 0:o.valueL)}));if(m)m.value=null===o||void 0===o||null===(p=o.add_info)||void 0===p?void 0:p.value;var f,_=null===(d=M.newStepComponents.find((function(n){return n.selected_fields.find((function(n){var o;return n.field_name===(null===(o=e.options)||void 0===o?void 0:o.valueL)}))})))||void 0===d?void 0:d.selected_fields.find((function(n){var o;return n.field_name===(null===(o=e.options)||void 0===o?void 0:o.valueL)}));if(_)_.value=null===o||void 0===o||null===(f=o.add_info)||void 0===f?void 0:f.value;var h,y=null===(a=Y.processModule)||void 0===a||null===(u=a.steps)||void 0===u||null===(r=u.find((function(n){var o;return null===(o=n.component_blueprints)||void 0===o?void 0:o.find((function(n){var o;return null===n||void 0===n||null===(o=n.selected_fields)||void 0===o?void 0:o.find((function(n){var o;return n.field_name===(null===(o=e.options)||void 0===o?void 0:o.valueL)}))}))})))||void 0===r||null===(s=r.component_blueprints)||void 0===s||null===(v=s.find((function(n){var o;return null===n||void 0===n||null===(o=n.selected_fields)||void 0===o?void 0:o.find((function(n){var o;return n.field_name===(null===(o=e.options)||void 0===o?void 0:o.valueL)}))})))||void 0===v||null===(c=v.selected_fields)||void 0===c?void 0:c.find((function(n){var o;return n.field_name===(null===(o=e.options)||void 0===o?void 0:o.valueL)}));if(y)y.value=null===o||void 0===o||null===(h=o.add_info)||void 0===h?void 0:h.value}Z(JSON.stringify(lu),n)}}})))}var du,au,uu,ru,su,vu,cu,pu,mu,fu,_u,hu,yu,gu,bu,xu,Eu,Cu,Zu,wu,Mu,Su,ku,Iu,Pu,Nu,Tu,Du,Au,Uu,Lu,Ou,Ru,zu,qu,Bu,Fu,Wu,Yu,ju,Hu,Ju,Gu,Vu,Qu,Xu,Ku;if("People"===(null===e||void 0===e?void 0:e.data_type_name)&&(!0===(null===e||void 0===e||null===(Kn=e.options)||void 0===Kn?void 0:Kn.slider)||lo)&&(null===X||void 0===X?void 0:X.length)>0)return r.createElement(ye.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-dark)",fontWeight:"regular",paddingLeft:"5px"},enabled:To,width:"100%",editMode:te,showWidth:function(n){e.field_options=(0,a.Z)((0,a.Z)({},e.field_options),{},{width:"".concat(n,"px")})},dragEnd:function(n){var o,l=null===(o=document.getElementById(null===g||void 0===g?void 0:g.name))||void 0===o?void 0:o.getBoundingClientRect();document.getElementById(e.field_name).style.position="absolute",document.getElementById(e.field_name).style.top="".concat(n.top-l.top,"px"),document.getElementById(e.field_name).style.left="".concat(n.left-l.left,"px")},key:n,notes:null===e||void 0===e||null===(du=e.options)||void 0===du?void 0:du.notes,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors},r.createElement(pe.tq,{slidesPerView:1,centeredSlides:!0,spaceBetween:10,initialSlide:1,pagination:{clickable:!0,dynamicBullets:!0},style:{zIndex:0},modules:[ce.pt,ce.tl],className:"mySwiper"},X.filter((function(n){var o;return(null===n||void 0===n||null===(o=n.positions)||void 0===o?void 0:o.filter((function(n){var o,l;return null===e||void 0===e||null===(o=e.options)||void 0===o||null===(l=o.position_id)||void 0===l?void 0:l.includes(null===n||void 0===n?void 0:n.id)})).length)>0})).map((function(o,l){var i,d,u,s,v,c,p,m,f,_,h,y=null===o||void 0===o||null===(i=o.ratings)||void 0===i?void 0:i.map((function(e){return+e.ratings}));return r.createElement(pe.o5,{key:l,className:me.swiperslide},r.createElement("div",{style:{padding:"5px",width:"100%"},onClick:function(){var l;e.open=null===e||void 0===e||!e.open,e.idx=n,null!==e&&void 0!==e&&null!==(l=e.options)&&void 0!==l&&l.skip?io(e.open):Z(null===o||void 0===o?void 0:o.id,n)}},r.createElement(Pe.Z,{photo:null===o||void 0===o?void 0:o.photo,height:null!==e&&void 0!==e&&e.open?"auto":"260px",width:"100%",firstName:"".concat(null===o||void 0===o?void 0:o.first_name," ").concat(null===o||void 0===o?void 0:o.last_name),position:r.createElement("div",{style:{marginTop:"10px"}},null===o||void 0===o?void 0:o.city),email:null===(d=o.options)||void 0===d?void 0:d.info},(null===y||void 0===y?void 0:y.length)>0&&r.createElement("div",{className:me.simpleNames},Array(Math.round(ne.Z(oe.Z,[le.Z,ie.Z])(y))).fill(0).map((function(e,n){return r.createElement(ve.G,{key:n,icon:se.Tab,style:{color:"var(--app-color-blue)"}})})),Array(5-Math.round(ne.Z(oe.Z,[le.Z,ie.Z])(y))).fill(0).map((function(e,n){return r.createElement(ve.G,{key:n,icon:se.Tab,style:{color:"lightgray"}})}))),r.createElement("div",{className:me.simpleNames,style:{pointerEvents:"none",padding:"20px 10px 0 10px",color:"gray"}},(null===(u=e.options)||void 0===u?void 0:u.info)&&(null===e||void 0===e?void 0:e.open)&&(null===e||void 0===e?void 0:e.idx)==n&&r.createElement(r.Fragment,null,r.createElement("p",null,"General Info:"),r.createElement(S.default,{rowStyleSelected:{border:"2px solid var(--app-color-gray-light)"},card:!0,isReport:!1,"app-variant-is-mobile":"true",columns:["First Name","Last Name","Phone","Address","City","Postal","Bio"],list:[o].map((function(e){var n,o,l,i,d,a,u;return u={},(0,t.Z)(u,"First Name","".concat(null!==(n=null===e||void 0===e?void 0:e.first_name)&&void 0!==n?n:"")),(0,t.Z)(u,"Last Name","".concat(null!==(o=null===e||void 0===e?void 0:e.last_name)&&void 0!==o?o:"")),(0,t.Z)(u,"Phone","".concat(null!==(l=null===e||void 0===e?void 0:e.phone)&&void 0!==l?l:"")),(0,t.Z)(u,"Address","".concat(null!==(i=null===e||void 0===e?void 0:e.address)&&void 0!==i?i:"")),(0,t.Z)(u,"City","".concat(null!==(d=null===e||void 0===e?void 0:e.city)&&void 0!==d?d:"")),(0,t.Z)(u,"Postal","".concat(null!==(a=null===e||void 0===e?void 0:e.postal)&&void 0!==a?a:"")),u}))})),(null===(s=e.options)||void 0===s?void 0:s.other)&&(null===e||void 0===e?void 0:e.open)&&(null===e||void 0===e?void 0:e.idx)==n&&Object.keys(null!==(v=null===o||void 0===o||null===(c=o.options)||void 0===c?void 0:c.add_info)&&void 0!==v?v:{}).length>1&&r.createElement(r.Fragment,null,r.createElement("p",null,"More Info:"),r.createElement(S.default,{rowStyleSelected:{border:"2px solid var(--app-color-gray-light)"},card:!0,isReport:!1,"app-variant-is-mobile":"true",columns:Object.keys(null!==(p=null===o||void 0===o||null===(m=o.options)||void 0===m?void 0:m.add_info)&&void 0!==p?p:{}),list:[o].map((function(e){var n,o;return(0,a.Z)((0,a.Z)({},null!==(n=null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.add_info)&&void 0!==n?n:{}),{},{Rate:""})}))})),(null===(f=e.options)||void 0===f?void 0:f.info)&&(null===e||void 0===e?void 0:e.open)&&(null===o||void 0===o||null===(_=o.ratings)||void 0===_?void 0:_.length)>0&&r.createElement(r.Fragment,null,r.createElement("p",null,"What other users say:"),r.createElement(S.default,{rowStyleSelected:{border:"2px solid var(--app-color-gray-light)"},card:!0,isReport:!1,columns:["Feedback"],list:null===o||void 0===o||null===(h=o.ratings)||void 0===h?void 0:h.map((function(e,n){return{Feedback:'"'.concat(e.comments,'"')}}))}))))))}))));if("People"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(no=e.options)||void 0===no||null===(oo=no.position_id)||void 0===oo?void 0:oo.length)>0)return r.createElement(ye.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-dark)",fontWeight:"regular",paddingLeft:"5px"},enabled:To,width:"100%",style:{marginTop:"0px",border:"1px dashed var(--app-color-gray-light)",padding:"5px"},editMode:te,showWidth:function(n){e.field_options=(0,a.Z)((0,a.Z)({},e.field_options),{},{width:"".concat(n,"px")})},dragEnd:function(n){var o,l=null===(o=document.getElementById(null===g||void 0===g?void 0:g.name))||void 0===o?void 0:o.getBoundingClientRect();document.getElementById(e.field_name).style.position="absolute",document.getElementById(e.field_name).style.top="".concat(n.top-l.top,"px"),document.getElementById(e.field_name).style.left="".concat(n.left-l.left,"px")},key:n,fieldLabel:e.field_name,notes:null===e||void 0===e||null===(au=e.options)||void 0===au?void 0:au.notes,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors},r.createElement("div",{style:{width:"100%"}},r.createElement(P.Z,{onOpen:function(e){An("50px"===Dn?"180px":"50px")},onFocus:function(){var n;return 0==_e.length&&co(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.position_id)},visible:null===e||void 0===e?void 0:e.visible,mandatory:null===e||void 0===e?void 0:e.mandatory,titleProps:{fontSize:"12px",color:"var(--app-color-gray-light)"},className:me.dropdownClassContainer,items:_e.filter((function(n){var o,l;return(null===n||void 0===n||null===(o=n.user)||void 0===o||null===(l=o.positions)||void 0===l?void 0:l.filter((function(n){var o,l;return null===e||void 0===e||null===(o=e.options)||void 0===o||null===(l=o.position_id)||void 0===l?void 0:l.includes(null===n||void 0===n?void 0:n.id)})).length)>0})),value:"single"===(null===e||void 0===e||null===(uu=e.options)||void 0===uu?void 0:uu.type)?null===(ru=_e.find((function(n){return n.label===(null===e||void 0===e?void 0:e.value)})))||void 0===ru?void 0:ru.label:e.value,loading:Ve,error:null===e||void 0===e?void 0:e.errors,onChange:function(o){var l;if("single"===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.type)){var i,t,d=_e.find((function(e){return e.value===o}));if(1==(null===e||void 0===e||null===(i=e.options)||void 0===i?void 0:i.email))e.email=null===d||void 0===d||null===(t=d.user)||void 0===t?void 0:t.email;Z(null===d||void 0===d?void 0:d.label,n)}else Z(o,n);An("50px")},onClicked:function(e){return An(e?"180px":"50px")},selectionType:null===e||void 0===e||null===(su=e.options)||void 0===su?void 0:su.type,fieldIcon:null===e||void 0===e?void 0:e.icon})));if("People"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(to=e.options)||void 0===to||null===(ao=to.componentF)||void 0===ao?void 0:ao.length)>0&&(null===e||void 0===e||null===(ro=e.options)||void 0===ro||null===(go=ro.componentO)||void 0===go?void 0:go.length)>0){var $u,er,nr,or,lr,ir,tr=null===($u=M.components.find((function(n){return n.selected_fields.filter((function(n){var o;return n.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.componentF)})).length>0})))||void 0===$u?void 0:$u.selected_fields.find((function(n){var o;return n.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.componentF)})),dr=F.find((function(n){var o;return n.component_fields.filter((function(e){return e.value===(null===tr||void 0===tr?void 0:tr.value)})).length>0&&n.module_id===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.module_id)})),ar=null===dr||void 0===dr?void 0:dr.component_fields.find((function(n){var o;return n.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.componentO)}));return r.createElement(ye.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-dark)",fontWeight:"regular",paddingLeft:"5px"},enabled:To,width:"100%",style:{marginTop:"0px",border:"1px dashed var(--app-color-gray-light)",padding:"5px"},editMode:te,showWidth:function(n){e.field_options=(0,a.Z)((0,a.Z)({},e.field_options),{},{width:"".concat(n,"px")})},key:n,fieldLabel:e.field_name,notes:null===e||void 0===e||null===(er=e.options)||void 0===er?void 0:er.notes,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors},r.createElement("div",{style:{width:"100%"}},r.createElement(P.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-light)"},onFocus:function(){var n;An("180px"),0==_e.length&&co(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.position_id)},visible:null===e||void 0===e?void 0:e.visible,mandatory:null===e||void 0===e?void 0:e.mandatory,className:"multiple"===(null===e||void 0===e||null===(nr=e.options)||void 0===nr?void 0:nr.type)?me.dropdownHeightClassContainer:me.dropdownClassContainer,items:_e.filter((function(e){var n,o;return(null===e||void 0===e||null===(n=e.user)||void 0===n||null===(o=n.positions)||void 0===o?void 0:o.filter((function(e){var n;return null===ar||void 0===ar||null===(n=ar.value)||void 0===n?void 0:n.split(",").includes(null===e||void 0===e?void 0:e.name)})).length)>0})),value:"single"===(null===e||void 0===e||null===(or=e.options)||void 0===or?void 0:or.type)?null===(lr=_e.find((function(n){return n.label===(null===e||void 0===e?void 0:e.value)})))||void 0===lr?void 0:lr.label:e.value,loading:Ve,error:null===e||void 0===e?void 0:e.errors,onChange:function(o){var l;if("single"===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.type)){var i,t,d=_e.find((function(e){return e.value===o}));if(1==(null===e||void 0===e||null===(i=e.options)||void 0===i?void 0:i.email))e.email=null===d||void 0===d||null===(t=d.user)||void 0===t?void 0:t.email;Z(null===d||void 0===d?void 0:d.label,n)}else Z(o,n);An("50px")},onClicked:function(e){return An(e?"180px":"50px")},selectionType:null===e||void 0===e||null===(ir=e.options)||void 0===ir?void 0:ir.type,fieldIcon:null===e||void 0===e?void 0:e.icon,placeholder:"Select user..."})))}if("People"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(bo=e.options)||void 0===bo||null===(xo=bo.componentF)||void 0===xo?void 0:xo.length)>0&&(null===e||void 0===e||null===(Eo=e.options)||void 0===Eo||null===(Co=Eo.componentUO)||void 0===Co?void 0:Co.length)>0){var ur,rr,sr,vr,cr,pr,mr=null===(ur=M.components.find((function(n){return n.selected_fields.filter((function(n){var o;return n.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.componentF)})).length>0})))||void 0===ur?void 0:ur.selected_fields.find((function(n){var o;return n.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.componentF)})),fr=F.filter((function(n){var o;return n.module_id===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.module_id)})).find((function(e){return e.component_fields.filter((function(e){return(null===e||void 0===e?void 0:e.value)===(null===mr||void 0===mr?void 0:mr.value)})).length>0})),_r=fr?null===fr||void 0===fr?void 0:fr.component_fields.find((function(n){var o;return n.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.componentUO)})):"";return r.createElement(ye.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-dark)",fontWeight:"regular",paddingLeft:"5px"},enabled:To,width:"100%",style:{marginTop:"0px",border:"1px dashed var(--app-color-gray-light)",padding:"5px"},editMode:te,showWidth:function(n){e.field_options=(0,a.Z)((0,a.Z)({},e.field_options),{},{width:"".concat(n,"px")})},key:n,fieldLabel:e.field_name,notes:null===e||void 0===e||null===(rr=e.options)||void 0===rr?void 0:rr.notes,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors},r.createElement(P.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-light)"},onFocus:function(){var n;return 0==_e.length&&co(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.position_id)},visible:null===e||void 0===e?void 0:e.visible,mandatory:null===e||void 0===e?void 0:e.mandatory,className:"multiple"===(null===e||void 0===e||null===(sr=e.options)||void 0===sr?void 0:sr.type)?me.dropdownHeightClassContainer:me.dropdownClassContainer,items:_e.filter((function(e){var n;return null===_r||void 0===_r||null===(n=_r.value)||void 0===n?void 0:n.split(",").includes(null===e||void 0===e?void 0:e.label)})),value:"single"===(null===e||void 0===e||null===(vr=e.options)||void 0===vr?void 0:vr.type)?null===(cr=_e.find((function(n){return n.label===(null===e||void 0===e?void 0:e.value)})))||void 0===cr?void 0:cr.label:e.value,loading:Ve,error:null===e||void 0===e?void 0:e.errors,onChange:function(o){var l;if("single"===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.type)){var i,t,d=_e.find((function(e){return e.value===o}));if(1==(null===e||void 0===e||null===(i=e.options)||void 0===i?void 0:i.email))e.email=null===d||void 0===d||null===(t=d.user)||void 0===t?void 0:t.email;Z(null===d||void 0===d?void 0:d.label,n)}else Z(o,n);An("50px")},onClicked:function(e){return An(e?"180px":"50px")},selectionType:null===e||void 0===e||null===(pr=e.options)||void 0===pr?void 0:pr.type,fieldIcon:null===e||void 0===e?void 0:e.icon,placeholder:"Select user..."}))}if("Status"===(null===e||void 0===e?void 0:e.data_type_name)){var hr,yr,gr,br,xr,Er,Cr,Zr,wr,Mr,Sr,kr,Ir,Pr,Nr,Tr,Dr,Ar=(null===(hr=e.options)||void 0===hr||null===(yr=hr.list)||void 0===yr?void 0:yr.length)>0?null===(gr=e.options)||void 0===gr||null===(br=gr.list)||void 0===br?void 0:br.map((function(e){return{label:e,value:e}})):1==(null===Y||void 0===Y||null===(xr=Y.processModule)||void 0===xr||null===(Er=xr.module)||void 0===Er||null===(Cr=Er.options)||void 0===Cr?void 0:Cr.asGraphical)?[{label:"Show",value:"Show"},{label:"Hide",value:"Hide"}]:(null===R||void 0===R||null===(Zr=R.misc_info)||void 0===Zr||null===(wr=Zr.status)||void 0===wr?void 0:wr.length)>0?null===R||void 0===R||null===(Mr=R.misc_info)||void 0===Mr?void 0:Mr.status:[{label:"Ongoing",value:"Ongoing"},{label:"Pending",value:"Pending"},{label:"Awaiting Payment",value:"Awaiting Payment"},{label:"Awaiting Fulfillment",value:"Awaiting Fulfillment"},{label:"Awaiting Shipment",value:"Awaiting Shipment"},{label:"Awaiting Pickup",value:"Awaiting Pickup"},{label:"Partially Shipped",value:"Partially Shipped"},{label:"Completed",value:"Completed"},{label:"Shipped",value:"Shipped"},{label:"Cancelled",value:"Cancelled"},{label:"Declined",value:"Declined"},{label:"Refunded",value:"Refunded"},{label:"Disputed",value:"Disputed"},{label:"Done",value:"Done"},{label:"Closed (Will lock Edit)",value:"Closed"}];if((null===R||void 0===R||null===(Sr=R.misc_info)||void 0===Sr||null===(kr=Sr.rules)||void 0===kr?void 0:kr.length)>0)null===R||void 0===R||null===(Dr=R.misc_info)||void 0===Dr||Dr.rules.filter((function(e){return"status"===e.type})).filter((function(n){n.valueCondition===e.value&&(Ar="0"===n.allow?Ar.filter((function(o){var l;return n.values.concat(null===(l=e.options)||void 0===l?void 0:l.list).includes(o.value)})):Ar.filter((function(o){var l;return!n.values.concat(null===(l=e.options)||void 0===l?void 0:l.list).includes(o.value)})))}));return null!==Y&&void 0!==Y&&null!==(Ir=Y.processModule)&&void 0!==Ir&&null!==(Pr=Ir.module)&&void 0!==Pr&&null!==(Nr=Pr.options)&&void 0!==Nr&&Nr.canCancel&&(Ar=Ar.concat({label:"Request Cancellation",value:"Cancellation Request"})),r.createElement("div",{key:n,style:{width:"100%",pointerEvents:To,marginBottom:"10px",border:"1px dashed var(--app-color-gray-light)",padding:"5px"}},r.createElement(P.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-dark)",fontWeight:"regular",paddingLeft:"5px"},className:me.multiselectComponentNoBorder,style:{border:"0px"},key:n,visible:e.visible,mandatory:e.mandatory,value:null!==(Tr=e.value)&&void 0!==Tr?Tr:"",items:Ar,error:e.errors,onClicked:function(e){return An(e?"180px":"50px")},onChange:function(e){R.start=!0,An("50px"),Z(e,n);var o=g.selected_fields.find((function(n){return"Date"===n.data_type_name&n.field_name===e}));o&&(o.value=new Date(ae().now()))},fieldIcon:e.icon,fieldLabel:e.field_name}))}if("Profile"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(Zo=e.options)||void 0===Zo||null===(wo=Zo.type)||void 0===wo?void 0:wo.length)>0){var Ur,Lr,Or,Rr=Ce.id;if("creator"!==e.options.type&&"wallet"!==e.options.type||null===b||void 0===b||null===(Ur=b.created_by)||void 0===Ur||!Ur.id)if("creator"!==e.options.type&&"wallet"!==e.options.type||null!==b&&void 0!==b&&null!==(Lr=b.created_by)&&void 0!==Lr&&Lr.id){if("owner"!==e.options.type)return null;var zr;Rr=null!==b&&void 0!==b&&b.options?null===(zr=JSON.parse(null===b||void 0===b?void 0:b.options))||void 0===zr?void 0:zr.owner:""}else Rr=Ce.id;else Rr=b.user_id;return(null===(Or=Rr)||void 0===Or?void 0:Or.length)>0?(null===X||void 0===X?void 0:X.length)>0&&(null===X||void 0===X?void 0:X.filter((function(e){return e.id===Rr})).map((function(n,o){var l,i,t,d;return r.createElement("div",{className:me.centerDiv,key:o},"wallet"===e.options.type?r.createElement(S.default,{modern:!0,columns:["Name","Wallet","Email","Photo"],list:[{Name:"".concat(null===n||void 0===n?void 0:n.first_name," ").concat(null===n||void 0===n?void 0:n.last_name),Wallet:"".concat(null===(l=n.wallet)||void 0===l?void 0:l.toFixed(2)),Email:null===n||void 0===n?void 0:n.email,Photo:n.photo}]}):r.createElement(Pe.Z,{photo:null===n||void 0===n?void 0:n.photo,noPhoto:0==(null===e||void 0===e||null===(i=e.options)||void 0===i?void 0:i.show),firstName:"".concat(null===n||void 0===n?void 0:n.first_name),lastName:"".concat(null===n||void 0===n?void 0:n.last_name),position:null===n||void 0===n||null===(t=n.positions)||void 0===t||null===(d=t.slice(0,1))||void 0===d?void 0:d.map((function(e){return e.name})),email:null===n||void 0===n?void 0:n.email,cardClicked:function(){},width:y.tq?"100%":""}))}))):null}if("Pin"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(Mo=e.options)||void 0===Mo||null===(So=Mo.pintype)||void 0===So?void 0:So.length)>0)return r.createElement(ye.Z,{style:{border:"0",width:"100%"},enabled:To,key:n,fieldLabel:e.field_name,notes:null===e||void 0===e||null===(vu=e.options)||void 0===vu?void 0:vu.notes,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors},null!==e&&void 0!==e&&null!==(cu=e.options)&&void 0!==cu&&cu.source||null!==(pu=e.options)&&void 0!==pu&&pu.destination?r.createElement("div",{style:{color:"var(--app-color-gray-dark)",height:"inherit",width:"100%",display:null!==e&&void 0!==e&&e.visible?"":"none"}},r.createElement("div",{className:me.filtersContainer,style:{color:"var(--app-color-gray-dark)",height:"inherit",width:"100%",display:null!==e&&void 0!==e&&e.visible?"":"none"}},r.createElement("div",{className:me.actionsContainer,style:{fontSize:"12px"},onClick:function(){Pn({source:!0,destination:!1,field:e,index:n})}},r.createElement("div",{style:{width:"30%",textAlign:"left"}},r.createElement(ve.G,{icon:1==(null===e||void 0===e||null===(mu=e.options)||void 0===mu?void 0:mu.destination)?se.W3K:se.opg,style:{width:"20px",height:"20px",marginRight:"5px",color:"blue"}}),1==(null===e||void 0===e||null===(fu=e.options)||void 0===fu?void 0:fu.destination)?"From":"Pin",":"),r.createElement("div",{style:{width:"70%",textAlign:"left"}},null!==e&&void 0!==e&&e.value?null===(_u=JSON.parse(e.value))||void 0===_u||null===(hu=_u.source)||void 0===hu?void 0:hu.address:"")),1==(null===e||void 0===e||null===(yu=e.options)||void 0===yu?void 0:yu.destination)&&r.createElement("hr",{style:{borderTop:"0.5px solid #D2D2D2"}}),1==(null===e||void 0===e||null===(gu=e.options)||void 0===gu?void 0:gu.destination)&&r.createElement("div",{className:me.actionsContainer,style:{fontSize:"12px"},onClick:function(){Pn({source:!1,destination:!0,field:e,index:n})}},r.createElement("div",{style:{width:"30%",textAlign:"left"}},r.createElement(ve.G,{icon:se.opg,style:{width:"20px",height:"20px",marginRight:"5px",color:"green"}}),"To",":"),r.createElement("div",{style:{width:"70%",textAlign:"left"}},null!==e&&void 0!==e&&e.value?null===(bu=JSON.parse(e.value))||void 0===bu||null===(xu=bu.destination)||void 0===xu?void 0:xu.address:""))),(null===In||void 0===In?void 0:In.source)&&r.createElement(h.U7,{hasCloseIcon:!0,blured:!1,scrollable:!0,isOpen:In.source,shadowedContainerStyle:{width:"100%"},onClose:function(){return Pn({source:!1,destination:!1})}},r.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",marginTop:"30px"}},r.createElement("div",{className:me.title},null!==(Eu=null===In||void 0===In||null===(Cu=In.field)||void 0===Cu?void 0:Cu.field_name)&&void 0!==Eu?Eu:"Origin:"),r.createElement(we.Z,{value:null===(Zu=JSON.parse(null!==(wu=null===In||void 0===In||null===(Mu=In.field)||void 0===Mu?void 0:Mu.value)&&void 0!==wu?wu:JSON.stringify({source:{},destination:{}})))||void 0===Zu?void 0:Zu.source,onChange:function(o){var l,i,t,d,a,u,r,s,v,c,p=null!==In&&void 0!==In&&null!==(l=In.field)&&void 0!==l&&l.value?JSON.parse(null===In||void 0===In||null===(i=In.field)||void 0===i?void 0:i.value):{source:{lat:0,lng:0,address:""},destination:{lat:0,lng:0,address:""}};if(p.source.lat=o.geometry.location.lat,p.source.lng=o.geometry.location.lng,p.source.address=o.formatted_address,null!==In&&void 0!==In&&In.field&&(null===(t=e.options)||void 0===t||!t.compute))return x(JSON.stringify(p),In.index),void Pn({source:!1,destination:!1});var m,f,_,h,y,b,E,C,Z,w,S,k,I=null===g||void 0===g||null===(d=g.selected_fields)||void 0===d?void 0:d.find((function(e){var n;return"distance"===(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.mapToItem)}));I||((I=null===(m=M.newStepComponents)||void 0===m||null===(f=m.find((function(e){var n;return(null===(n=e.selected_fields)||void 0===n?void 0:n.filter((function(e){var n;return"distance"===(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.mapToItem)})).length)>0})))||void 0===f||null===(_=f.selected_fields)||void 0===_?void 0:_.find((function(e){var n;return"distance"===(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.mapToItem)})))||(I=null===(h=M.components)||void 0===h||null===(y=h.find((function(e){var n;return(null===(n=e.selected_fields)||void 0===n?void 0:n.filter((function(e){var n;return"distance"===(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.mapToItem)})).length)>0})))||void 0===y||null===(b=y.selected_fields)||void 0===b?void 0:b.find((function(e){var n;return"distance"===(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.mapToItem)})))||(I=null===(E=Y.processModule)||void 0===E||null===(C=E.steps[null!==(S=null===(k=Y.processModule)||void 0===k?void 0:k.stepIndex)&&void 0!==S?S:1].component_blueprints)||void 0===C||null===(Z=C.find((function(e){var n;return(null===(n=e.selected_fields)||void 0===n?void 0:n.filter((function(e){var n;return"distance"===(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.mapToItem)})).length)>0})))||void 0===Z||null===(w=Z.selected_fields)||void 0===w?void 0:w.find((function(e){var n;return"distance"===(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.mapToItem)}))));if(null!==p&&void 0!==p&&p.source&&null!==(a=e.options)&&void 0!==a&&a.compute&&0==(null===(u=e.options)||void 0===u?void 0:u.destination))p.distance=(0,U.Iw)(p.source.lat,p.source.lng,Fe.latitude,Fe.longitude),p.duration=0,I&&(I.value=p.distance,I.disabled=!0),x(JSON.stringify(p),n);else if(null!==(r=p.source)&&void 0!==r&&r.address&&null!==In&&void 0!==In&&null!==(s=In.field.options)&&void 0!==s&&s.compute){var P;null===(P=(0,Ne.Y)(p.source.address,p.destination.address))||void 0===P||P.subscribe({next:function(e){var n;if((null===e||void 0===e||null===(n=e.routes)||void 0===n?void 0:n.length)>0){var o,l,i,t,d,a=e.routes[0];if((null===a||void 0===a||null===(o=a.legs)||void 0===o?void 0:o.length)>0)p.distance=(null===(l=a.legs[0])||void 0===l||null===(i=l.distance)||void 0===i?void 0:i.value)/1e3,p.duration=null===(t=a.legs[0])||void 0===t||null===(d=t.duration)||void 0===d?void 0:d.value,p.steps=a.legs[0].steps,I&&(I.value=p.distance,I.disabled=!0)}},error:function(e){p.distance=(0,U.Iw)(p.source.lat,p.source.lng,p.destination.lat,p.destination.lng),p.duration=0,I&&(I.value=p.distance,I.disabled=!0)}})}else null!==(v=p.source)&&void 0!==v&&v.address&&(p.distance=(0,U.Iw)(p.source.lat,p.source.lng,p.destination.lat,p.destination.lng),p.duration=0,I&&(I.value=p.distance));x(JSON.stringify(p),null!==(c=null===In||void 0===In?void 0:In.index)&&void 0!==c?c:n),Pn({source:!1,destination:!1})},mapkey:null===(Su=R.misc_info)||void 0===Su?void 0:Su.map}))),(null===In||void 0===In?void 0:In.destination)&&r.createElement(h.U7,{hasCloseIcon:!0,blured:!1,scrollable:!0,isOpen:In.destination,shadowedContainerStyle:{width:"100%"},shadowedContainerClassname:me.mappopup,onClose:function(){return Pn({source:!1,destination:!1})}},r.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"}},r.createElement("div",{className:me.title},null!==(ku=null===In||void 0===In||null===(Iu=In.field)||void 0===Iu?void 0:Iu.field_name)&&void 0!==ku?ku:"Destination:"),r.createElement(we.Z,{value:null===(Pu=JSON.parse(null!==(Nu=null===In||void 0===In||null===(Tu=In.field)||void 0===Tu?void 0:Tu.value)&&void 0!==Nu?Nu:JSON.stringify({source:{},destination:{}})))||void 0===Pu?void 0:Pu.destination,onChange:function(e){var n,o,l,i,t,d,a,u,r,s,v,c,p,m=null!==In&&void 0!==In&&null!==(n=In.field)&&void 0!==n&&n.value?JSON.parse(null===In||void 0===In||null===(o=In.field)||void 0===o?void 0:o.value):{destination:{lat:0,lng:0,address:""},source:{lat:0,lng:0,address:""}},f=null===g||void 0===g||null===(l=g.selected_fields)||void 0===l?void 0:l.find((function(e){var n;return"distance"===(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.mapToItem)}));f||((f=null===(a=M.newStepComponents)||void 0===a||null===(u=a.find((function(e){var n;return(null===(n=e.selected_fields)||void 0===n?void 0:n.filter((function(e){var n;return"distance"===(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.mapToItem)})).length)>0})))||void 0===u||null===(r=u.selected_fields)||void 0===r?void 0:r.find((function(e){var n;return"distance"===(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.mapToItem)})))||(f=null===(s=M.components)||void 0===s||null===(v=s.find((function(e){var n;return(null===(n=e.selected_fields)||void 0===n?void 0:n.filter((function(e){var n;return"distance"===(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.mapToItem)})).length)>0})))||void 0===v||null===(c=v.selected_fields)||void 0===c?void 0:c.find((function(e){var n;return"distance"===(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.mapToItem)}))));(m.destination.lat=e.geometry.location.lat,m.destination.lng=e.geometry.location.lng,m.destination.address=e.formatted_address,null!==(i=m.destination)&&void 0!==i&&i.address&&null!==In&&void 0!==In&&null!==(t=In.field.options)&&void 0!==t&&t.compute)?null===(p=(0,Ne.Y)(m.source.address,m.destination.address))||void 0===p||p.subscribe({next:function(e){var n;if((null===e||void 0===e||null===(n=e.routes)||void 0===n?void 0:n.length)>0){var o,l,i,t,d,a=e.routes[0];if((null===a||void 0===a||null===(o=a.legs)||void 0===o?void 0:o.length)>0)m.distance=(null===(l=a.legs[0])||void 0===l||null===(i=l.distance)||void 0===i?void 0:i.value)/1e3,m.duration=null===(t=a.legs[0])||void 0===t||null===(d=t.duration)||void 0===d?void 0:d.value,m.steps=a.legs[0].steps,f&&(f.value=m.distance)}},error:function(e){m.distance=(0,U.Iw)(m.source.lat,m.source.lng,m.destination.lat,m.destination.lng),m.duration=0,f&&(f.value=m.distance)}}):null!==(d=m.destination)&&void 0!==d&&d.address&&(m.distance=(0,U.Iw)(m.source.lat,m.source.lng,m.destination.lat,m.destination.lng),m.duration=0,f&&(f.value=m.distance));x(JSON.stringify(m),null===In||void 0===In?void 0:In.index),Pn({source:!1,destination:!1})},mapkey:null===(Du=R.misc_info)||void 0===Du?void 0:Du.map})))):r.createElement(we.Z,{key:n,value:null===g||void 0===g?void 0:g.selected_fields[n].value,onLocationChange:function(e){return O(e,n)},mapkey:null===(Au=R.misc_info)||void 0===Au?void 0:Au.map}));if("Map"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(ko=e.options)||void 0===ko||null===(Io=ko.maptype)||void 0===Io?void 0:Io.length)>0)return r.createElement(ye.Z,{enabled:To,width:"100%",editMode:te,showWidth:function(n){e.field_options=(0,a.Z)((0,a.Z)({},e.field_options),{},{width:"".concat(n,"px")})},key:n,fieldLabel:e.field_name,notes:null===e||void 0===e||null===(Uu=e.options)||void 0===Uu?void 0:Uu.notes,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors},r.createElement(Me.Z,{key:n,value:null===g||void 0===g?void 0:g.selected_fields[n].value,onLocationChange:function(e){return O(e,n)}}));if("Summary"===(null===e||void 0===e?void 0:e.data_type_name)){var qr={};return M.components.map((function(e){return e.selected_fields.filter((function(e){return!("Pin"===e.data_type_name||"Lookup"===e.data_type_name||"Record"===e.data_type_name||"Ratings"===e.data_type_name||"People"===e.data_type_name||"Positions"===e.data_type_name||"Notes"===e.data_type_name||"URL"===e.data_type_name)&&1==e.visible})).map((function(e){var n,o;(0,U.gD)(null!==(n=null===e||void 0===e?void 0:e.value)&&void 0!==n?n:"")?qr[e.field_name]="":qr[e.field_name]="".concat(null!==(o=null===e||void 0===e?void 0:e.value)&&void 0!==o?o:"")}))})),M.newStepComponents.map((function(e){return e.selected_fields.filter((function(e){return!("Pin"===e.data_type_name||"Lookup"===e.data_type_name||"Record"===e.data_type_name||"Ratings"===e.data_type_name||"People"===e.data_type_name||"Positions"===e.data_type_name||"Notes"===e.data_type_name||"URL"===e.data_type_name)&&1==e.visible})).map((function(e){var n,o;(0,U.gD)(null!==(n=null===e||void 0===e?void 0:e.value)&&void 0!==n?n:"")?qr[e.field_name]="":qr[e.field_name]="".concat(null!==(o=null===e||void 0===e?void 0:e.value)&&void 0!==o?o:"")}))})),r.createElement(ye.Z,{enabled:To,width:"100%",editMode:te,style:{border:"0"},key:n,fieldLabel:e.field_name,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors},r.createElement("div",{key:n,style:{marginTop:"30px",width:"100%"}},r.createElement(S.default,{modern:!0,columns:Object.keys(qr),list:[qr]})))}return"Currency"===(null===e||void 0===e?void 0:e.data_type_name)&&null!==e&&void 0!==e&&null!==(Po=e.options)&&void 0!==Po&&Po.currency_type?r.createElement(ye.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-dark)",fontWeight:"regular",paddingLeft:"5px"},style:{border:"1px solid var(--app-color-gray-lighter)"},enabled:To,width:"100%",editMode:te,showWidth:function(n){e.field_options=(0,a.Z)((0,a.Z)({},e.field_options),{},{width:"".concat(n,"px")})},key:n,fieldLabel:e.field_name,notes:null===e||void 0===e||null===(Lu=e.options)||void 0===Lu?void 0:Lu.notes,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors},r.createElement("div",{style:{width:"inherit",display:"flex"}},r.createElement("div",{onClick:function(){return Xe(!Ve)},className:me.currencySymbol},null!==e&&void 0!==e&&null!==(Ou=e.options)&&void 0!==Ou&&Ou.symbol?null===e||void 0===e||null===(Ru=e.options)||void 0===Ru?void 0:Ru.symbol:""," "),Ve&&r.createElement(h.Ld,{items:U.s3,defaultSelectedItem:{label:null===e||void 0===e||null===(zu=e.options)||void 0===zu?void 0:zu.currency_type,value:null===e||void 0===e||null===(qu=e.options)||void 0===qu?void 0:qu.country_code},triggerType:"chevron",className:me.currencySelectComponent,inputClassName:me.currencySearchInput,inputContainerClassName:me.currencyInputContainerClassName,clearControlsClassName:me.currencyClearControlsClassName,molclassname:me.currencySelectMenuOverlayList,moliclassname:me.currencySelectMenuOverlayListItem,onChange:function(e){M.currency=e.value,A(e,n),Xe(!1)}}),!Ve&&r.createElement("input",{type:"number",autoComplete:"off",value:null!==(Bu=g.selected_fields[n].value)&&void 0!==Bu?Bu:0,className:me.currencyInput,onChange:function(e){x(e.target.value,n)}}))):r.createElement(ye.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-dark)",fontWeight:"regular",paddingLeft:"5px"},enabled:To,width:"100%",style:{marginTop:"0px",border:"1px dashed var(--app-color-gray-light)",padding:"5px"},editMode:te,showWidth:function(n){e.field_options=(0,a.Z)((0,a.Z)({},e.field_options),{},{width:"".concat(n,"px")})},key:n,fieldLabel:e.field_name,notes:null===e||void 0===e||null===(Fu=e.options)||void 0===Fu?void 0:Fu.notes,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors,customIconBgColor:"white"},"file"===e.data_type?r.createElement(Ge,{notes:null===e||void 0===e||null===(Wu=e.options)||void 0===Wu?void 0:Wu.notes,field_id:e.id,value:null===e||void 0===e?void 0:e.value,isInherited:I,checkIfAreMandatoryErrored:T,options:null===e||void 0===e?void 0:e.options,index:n,indexInContextArray:E}):"date"===e.data_type||null!==e&&void 0!==e&&null!==(Yu=e.options)&&void 0!==Yu&&Yu.country_code||null!==e&&void 0!==e&&null!==(ju=e.options)&&void 0!==ju&&ju.currency_type||"Number"===e.data_type_name?r.createElement("div",{style:{width:"inherit"}},"date"===e.data_type?"Range"===(null===e||void 0===e||null===(Hu=e.options)||void 0===Hu?void 0:Hu.type)?r.createElement(h.$m,{inputContainerClassName:me.inputContainerClassName,dateChangeHandler:function(e){return function(e,n){an(e),x(e,n)}(e,n)},startDate:rn,endDate:sn}):null!==e&&void 0!==e&&null!==(Ju=e.options)&&void 0!==Ju&&Ju.time?r.createElement("div",{style:{width:"100%",height:"auto",border:"0"}},r.createElement(he(),{showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:5,customInput:r.createElement("div",{id:"custom-input",style:{cursor:"pointer",display:"flex",justifyContent:"center",width:"100%",alignItems:"stretch",padding:"5px",border:"0px solid var(--app-color-gray-lighter)"}},r.createElement(ve.G,{icon:se.WRo,style:{marginLeft:"10px",width:"20px",height:"20px"}}),r.createElement("input",{value:e.value?ae()(e.value).format("DD MMMM YYYY HH:mm"):"",disabled:!0,type:"text",style:{flex:1,marginTop:"auto",marginBottom:"auto",outline:"none",fontFamily:"var(--app-text-main-font)",fontSize:"16px",lineHeight:"20px",color:"#4A4A4A",textAlign:"left",maxWidth:"98%",border:"0px"},onChange:function(e){}})),className:me.singleInputContainer,selected:null!==e&&void 0!==e&&e.value?new Date(ae()(null===e||void 0===e?void 0:e.value)):(0,de.now)(),onChange:function(e){e>(0,de.now)()&&vo(e,n)}})):r.createElement(h.X9,{toggleDP:function(e){return An(!0===e?"240px":"50px")},value:void 0==e.value?"":ae()(new Date(e.value)).format("Do MMMM YYYY"),dateChangeHandler:function(e){return vo(e,n)},selected:new Date(ae()(en,"YYYY-MM-DD")),iconClassName:me.calendar,inputContainerClassName:me.singleInputContainer,inputStyle:{textAlign:"left",border:"none",height:"auto",fontSize:"16px"},hasCalendarIcon:!0}):null!==e&&void 0!==e&&null!==(Gu=e.options)&&void 0!==Gu&&Gu.country_code?r.createElement("div",{style:{padding:"10px"}},r.createElement(Ze(),{specialLabel:"",value:g.selected_fields[n].value,country:null===e||void 0===e||null===(Vu=e.options)||void 0===Vu?void 0:Vu.country_code,onChange:function(e,o,l){D(o,n,l.target.value)},inputClass:me.phoneIInput,inputProps:{style:{border:"0"}}})):r.createElement("input",{onBlur:function(o){return He(e.data_type_name,o.target.value,E,n,M)},type:e.data_type,onChange:function(e){x(e.target.value,n)},autoComplete:"none",value:g.selected_fields[n].value?g.selected_fields[n].value:""===je(null===e||void 0===e?void 0:e.options)?"":je(null===e||void 0===e?void 0:e.options),placeholder:"Number"===g.selected_fields[n].data_type_name?"0":"",className:me.fieldTypeInput,style:{border:"0"},name:e.field_name,disabled:null!==(Qu=g.selected_fields[n].disabled)&&void 0!==Qu&&Qu})):"Long Text"===e.data_type_name?r.createElement("textarea",{className:me.fieldTypeTextarea,onBlur:function(o){return He(e.data_type_name,o.target.value,E,n,M)},type:e.data_type,value:g.selected_fields[n].value?g.selected_fields[n].value:""===je(null===e||void 0===e?void 0:e.options)?"":je(null===e||void 0===e?void 0:e.options),onFocus:function(){},disabled:null!==(Xu=g.selected_fields[n].disabled)&&void 0!==Xu&&Xu,autoComplete:"none",onChange:function(e){x(e.target.value,n)},placeholder:"Number"===g.selected_fields[n].data_type_name?"0":"",name:e.field_name,style:{border:"0"}}):r.createElement("input",{onBlur:function(o){return He(e.data_type_name,o.target.value,E,n,M)},type:e.data_type,onChange:function(e){x(e.target.value,n)},autoComplete:"none",value:g.selected_fields[n].value?g.selected_fields[n].value:""===je(null===e||void 0===e?void 0:e.options)?"":je(null===e||void 0===e?void 0:e.options),placeholder:"Number"===g.selected_fields[n].data_type_name?"0":"",className:me.fieldTypeInput,name:e.field_name,disabled:null!==(Ku=g.selected_fields[n].disabled)&&void 0!==Ku&&Ku,style:{border:"0"}}))}return r.createElement(ye.Z,{enabled:To,width:"100%",editMode:te,style:{},key:n,fieldLabel:e.field_name,notes:null===e||void 0===e||null===(Sd=e.options)||void 0===Sd?void 0:Sd.notes,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors},r.createElement("div",{style:{width:"100%",height:"auto",border:"1px solid var(--app-color-gray-light)"}},r.createElement(he(),{showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:5,customInput:r.createElement("div",{id:"custom-input",style:{cursor:"pointer",display:"flex",justifyContent:"center",width:"100%",alignItems:"stretch",padding:"5px",border:"0px solid var(--app-color-gray-lighter)"}},r.createElement(ve.G,{icon:se.WRo,style:{marginLeft:"10px",width:"20px",height:"20px"}}),r.createElement("input",{disabled:!0,value:e.value?ae()(e.value).format("DD MMMM YYYY HH:mm"):"",type:"text",style:{flex:1,marginTop:"auto",marginBottom:"auto",outline:"none",fontFamily:"var(--app-text-main-font)",fontSize:"16px",lineHeight:"20px",color:"#4A4A4A",textAlign:"left",width:"80%",border:"0px"},onChange:function(e){}})),className:me.singleInputContainer,selected:null!==e&&void 0!==e&&e.value?new Date(ae()(null===e||void 0===e?void 0:e.value)):(0,de.now)(),onChange:function(e){e>(0,de.now)()&&vo(e,n)}})))}})));return r.createElement("div",{id:null===g||void 0===g?void 0:g.name,className:me.emulatedFlexGap,style:{width:"100%",position:"relative",marginBottom:Dn}},go,(null===Bn||void 0===Bn||null===(p=Bn.candidates)||void 0===p?void 0:p.length)>0&&r.createElement(ye.Z,{width:"80%",fieldLabel:"Response",visible:!0},r.createElement("textarea",{className:me.fullLengthTextarea,type:"text",onFocus:function(){},disabled:!0,value:null===Bn||void 0===Bn||null===(f=Bn.candidates[0])||void 0===f||null===(_=f.content.parts[0])||void 0===_?void 0:_.text})))})),Ge=function(e){e.notes;var n,o=e.options,l=e.field_id,i=e.index,t=e.indexInContextArray,a=e.value,s=e.checkIfAreMandatoryErrored,v=(0,r.useState)(),c=(0,u.Z)(v,2),p=c[0],f=c[1],_=(0,r.useState)(!1),h=(0,u.Z)(_,2),b=h[0],x=h[1],E=(0,m.pQ)(),C=(0,u.Z)(E,2),Z=C[0],w=C[1];return r.createElement("div",{style:{width:"inherit",flexDirection:"column",fontSize:"12px"}},r.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",flex:"1 1",overflow:"hidden",fontSize:"14px"}},r.createElement("u",{onClick:function(){var e;null===(e=document.getElementById("file-change-".concat(l)))||void 0===e||e.click()},style:{cursor:"pointer",marginLeft:"2px",wordWrap:"break-word"}},null!==p&&void 0!==p&&p.name||a?"File":"Click to upload file..."),r.createElement("input",{accept:"."+(null===o||void 0===o||null===(n=o.accepted_mimes)||void 0===n?void 0:n.replace(/,/g,",.")),type:"file",onChange:function(){return function(e){var n,o,a=document.getElementById("file-change-".concat(l)).files[0],u=((null===a||void 0===a?void 0:a.size)/1024/1024).toFixed(4),r=(e/1024).toFixed(4);x(!0);var v=(0,d.Z)(null!==(n=null===(o=Z.currentStep)||void 0===o?void 0:o.component_blueprints)&&void 0!==n?n:[]);u>r?alert("File is too big!"):(0,g.kf)(a,l).subscribe({next:function(e){f(a),x(!1),v[t].selected_fields[i].value=null===e||void 0===e?void 0:e.file_url,v[t].selected_fields[i].value&&v[t].selected_fields[i].mandatory&&(v[t].selected_fields[i].errors=""),s(),w({action:m._U.setComponentBlueprints,value:v}),w({action:m._U.setModuleNewStepComponents,value:v})}})}(null===o||void 0===o?void 0:o.max_file_size)},style:{position:"absolute",visibility:"hidden",width:"0px"},id:"file-change-".concat(l),className:me.fieldTypeInput}),b&&r.createElement(Se.Z,{type:y.G6?"Watch":"Puff",color:"#4A4A4A",secondaryColor:"gray",radius:22,height:22,width:"22px"}),(null===p||void 0===p?void 0:p.type)&&r.createElement(Ve,{fileType:null===p||void 0===p?void 0:p.type})))},Ve=function(e){return"application/pdf"===(null===e||void 0===e?void 0:e.fileType)?r.createElement("img",{alt:"",src:C.edG}):r.createElement("img",{alt:"",src:C.dm0})},Qe=(0,r.memo)((function(e){var n=e.children,o=e.nav,l=e.openNav,i=e.title;return r.createElement(h.U7,{onClose:l,blured:!1,scrollable:!0,isOpen:o,shadowedContainerStyle:{width:"100%",minWidth:"50%",minHeight:"400px"},shadowedContainerClassname:me.popup},r.createElement("div",{style:{width:"inherit",height:"inherit"},onClick:l},i.length>0&&r.createElement("div",{className:me.actionsContainer},r.createElement("p",{className:me.infoTitle},i)),n))})),Xe=function(e){var n,o,l=e.component,i=e.blueprintIndex,t=e.setSelectedComponent,d=e.selectedComponent,a=e.companyData,s=e.components,v=e.allComponents,c=e.companyUsersArray,p=e.user,f=e.status,_=(0,m.pQ)(),h=(0,u.Z)(_,1)[0],g=(0,r.useState)(me.active),b=(0,u.Z)(g,1)[0],x=(0,r.useState)(""),E=(0,u.Z)(x,1)[0],C=null===(n=h.currentStep)||void 0===n?void 0:n.component_blueprints.findIndex((function(e){return e.id===l.id})),Z=l.selected_fields.filter((function(e){return"Pin"===e.data_type_name||"Map"===e.data_type_name})).length>0,w=null===d||void 0===d||null===(o=d.component_fields)||void 0===o?void 0:o.find((function(e){return"Action Button"===e.data_type_name}));return r.createElement("div",{id:"accordion",key:i,className:xe()(me.accordionContainer,b),"app-variant-has-error":E?"error":"",style:y.tq?Z?{padding:"0",border:"0"}:{border:"0"}:{}},r.createElement("p",{className:me.cardTitle,style:{fontSize:"16px"}},null===l||void 0===l?void 0:l.name,":"),r.createElement(Ke,{components:s,allComponents:v,component:l,handleInputChange:function(){},handlePrefixChange:function(){},handleCurrencyChange:function(){},checkIfAreMandatoryErrored:!1,handleCheckbox:function(){},isInherited:!1,indexInContextArray:C,handleLocationChange:function(){},processTaskContext:h,companyData:a,companyUsersArray:c,selectedComponent:d,setSelectedComponent:t,hasAction:w,user:p,status:f}))},Ke=(0,r.memo)((function(e){var n,o,l=e.component,i=e.components,d=e.companyData,c=e.allComponents,p=e.companyUsersArray,m=e.setSelectedComponent,f=e.selectedComponent,_=e.hasAction,b=e.user,x=e.status,E=(0,s.v9)((function(e){return e.flowReducer})),C=E.allTasks,Z=(0,r.useState)(!1),w=(0,u.Z)(Z,2),M=w[0],k=w[1],I=(0,r.useState)(0),P=(0,u.Z)(I,2),N=P[0],T=P[1],D=(0,r.useState)(!1),A=(0,u.Z)(D,2),U=A[0],L=A[1],O=(0,r.useState)(!1),z=(0,u.Z)(O,2),q=z[0],B=z[1],F=(null===l||void 0===l||null===(n=l.selected_fields)||void 0===n?void 0:n.length)>0&&(null===l||void 0===l||null===(o=l.selected_fields)||void 0===o?void 0:o.filter((function(e){return!0!==e.value||void 0!==(null===e||void 0===e?void 0:e.value)})).map((function(e,n){var o,u,s,E;if((null===e||void 0===e||null===(o=e.options)||void 0===o||null===(u=o.list)||void 0===u?void 0:u.length)>0&&(null===e||void 0===e||null===(s=e.options)||void 0===s||null===(E=s.component_id)||void 0===E?void 0:E.length)>0&&("Step List"===(null===e||void 0===e?void 0:e.data_type_name)||"Component List"===(null===e||void 0===e?void 0:e.data_type_name)))return r.createElement("div",{key:n,style:{width:"100%"}},r.createElement(S.default,{modern:!0,columns:e.options.list,list:(X=e.options,i.filter((function(e){return e.id===X.component_id})).map((function(e){var n={};return X.list.map((function(o){n=(0,a.Z)((0,a.Z)({},n),{},(0,t.Z)({},o,e.selected_fields.find((function(e){return e.field_name===o})).value))})),n})))}));if("output"===e.data_type&&"Formula"!==e.data_type_name&&"Record"!==e.data_type_name&&"Filters"!==e.data_type_name)return null;if("Info"===e.data_type_name)return null;if("URL"===e.data_type_name)return null;if("Map"===e.data_type_name)return null;if("Lookup"===e.data_type_name)return null;if("Rewards"===e.data_type_name)return null;if("Summary"===e.data_type_name)return null;if("Ratings"===e.data_type_name)return null;if("ID"===e.data_type_name){var Z,w,I=null!==(Z=null===R||void 0===R?void 0:te.Z(null===R||void 0===R?void 0:$.Z("field_name",e.field_name))(l.values))&&void 0!==Z?Z:null;return r.createElement("div",{key:n},r.createElement("div",{className:me.actionsContainer,style:{fontSize:"12px"}},r.createElement("div",null,e.field_name,":"),r.createElement("div",null,null===I||null===I.value?"":null===I||void 0===I||null===(w=I.value)||void 0===w?void 0:w.split(",")[0])),r.createElement("hr",{style:{borderTop:"0.5px solid #D2D2D2"}}))}var P,D,A,O,z,F,W,Y,j,H,J,G,V,Q,X,K=null!==(P=null===R||void 0===R?void 0:te.Z(null===R||void 0===R?void 0:$.Z("field_name",null===e||void 0===e?void 0:e.field_name))(null!==(D=null===f||void 0===f?void 0:f.component_fields)&&void 0!==D?D:[]))&&void 0!==P?P:{},ee=null===(A=K)||void 0===A?void 0:A.value,ne=null===l||void 0===l||null===(O=l.selected_fields)||void 0===O?void 0:O.find((function(e){return"Info"===e.data_type_name}));if(ne){var oe,le,ie=c.find((function(e){return(null===e||void 0===e?void 0:e.component_fields.filter((function(e){return e.component_blueprint_id===ne.options.component_id&&e.value===ee})).length)>0}));if(ie)return null===ne||void 0===ne||null===(oe=ne.options)||void 0===oe||null===(le=oe.list)||void 0===le?void 0:le.map((function(e,n){var o,l,i=null!==(o=null===(l=ie.component_fields.find((function(n){return n.field_name===e})))||void 0===l?void 0:l.value)&&void 0!==o?o:"";return r.createElement("div",{key:n},r.createElement("div",{className:me.actionsContainer,style:{fontSize:"12px"}},r.createElement("div",null,e,":"),r.createElement("div",null,i)),r.createElement("hr",{style:{borderTop:"0.5px solid #D2D2D2"}}))}))}if("Pin"===e.data_type_name&&(null!==e&&void 0!==e&&e.value||ee)){var ue,re,ce,pe,fe,_e,he,ge,be,xe,Ee,Ce,Ze,we,Me,Se=JSON.parse(null!==(ue=null===e||void 0===e?void 0:e.value)&&void 0!==ue?ue:ee),ke=null===f||void 0===f||null===(re=f.component_fields)||void 0===re||null===(ce=re.find((function(e){return"Status"===e.data_type_name})))||void 0===ce?void 0:ce.value;if(void 0===K)K=null===(Me=f.component_fields)||void 0===Me?void 0:Me.find((function(e){return"Pin"===e.data_type_name}));return r.createElement("div",{key:n,style:{display:"",width:"100%"}},q&&r.createElement(Ne.Z,{mapkey:null===(pe=d.misc_info)||void 0===pe?void 0:pe.map,pins:(null!==Se&&void 0!==Se&&Se.destination?[(0,a.Z)((0,a.Z)({},Se.destination),{},{type:"destination"}),(0,a.Z)((0,a.Z)({},Se.source),{},{type:"source"})]:[(0,a.Z)((0,a.Z)({},Se.source),{},{type:"source"})]).concat(null!==Se&&void 0!==Se&&Se.realtime?[(0,a.Z)((0,a.Z)({},Se.realtime),{},{type:"realtime"})]:[])}),r.createElement("div",{key:n,className:me.filtersContainer,style:{color:"var(--app-color-gray-dark)",height:"inherit",width:"100%",display:null!==e&&void 0!==e&&e.visible?"":"none"}},r.createElement("div",{className:me.actionsContainer,style:{fontSize:"12px"},onClick:function(){return B(!q)}},null!==Se&&void 0!==Se&&null!==(fe=Se.destination)&&void 0!==fe&&fe.address?r.createElement("div",{style:{width:"50px",textAlign:"left"}},"From:"):r.createElement(ve.G,{icon:se.opg,style:{color:"green",width:"20px",height:"20px"}}),r.createElement("div",{style:{width:"70%",textAlign:"right"}},Se.source.address)),(null===Se||void 0===Se||null===(_e=Se.destination)||void 0===_e?void 0:_e.address)&&r.createElement("hr",{style:{borderTop:"0.5px solid #D2D2D2"}}),(null===Se||void 0===Se||null===(he=Se.destination)||void 0===he?void 0:he.address)&&r.createElement("div",{className:me.actionsContainer,style:{fontSize:"12px"}},r.createElement("div",{style:{width:"50px",textAlign:"left"}},"To",":"),r.createElement("div",{style:{width:"70%",textAlign:"right"}},null===Se||void 0===Se||null===(ge=Se.destination)||void 0===ge?void 0:ge.address))),r.createElement(h.zx,{light:!0,title:0!=N?"Stop Location Updates":null!==e&&void 0!==e&&null!==(be=e.options)&&void 0!==be&&be.realtime?"Send Location Updates":"Update Location",clicked:function(){0===N?navigator.geolocation.getCurrentPosition((function(n){var o,l,i,t;Se&&(Se.realtime={lat:n.coords.latitude,lng:n.coords.longitude,id:"10"},e.value=JSON.stringify(Se),1==(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.realtime)?T(setInterval((function(){k(!0),(0,g.po)({component_id:f.id,index:e.index,value:JSON.stringify(Se),group:e.group,component_field_id:K.id}).subscribe({next:function(e){k(!1)},error:function(){return k(!1)},complete:function(){}})}),+(null!==(l=null===(i=K)||void 0===i||null===(t=i.options)||void 0===t?void 0:t.interval)&&void 0!==l?l:6e4))):(k(!0),(0,g.po)({component_id:f.id,index:K.index,value:JSON.stringify(Se),group:K.group,component_field_id:K.id}).subscribe({next:function(e){k(!1)},error:function(){return k(!1)},complete:function(){}})))})):(window.clearInterval(N),T(0))},loading:M,style:{width:"100%",display:"Closed"===(null===f||void 0===f?void 0:f.sttaus)||"New"===(null===f||void 0===f?void 0:f.sttaus)||(null===f||void 0===f?void 0:f.status)===(null===d||void 0===d||null===(xe=d.misc_info)||void 0===xe?void 0:xe.lock)||"Closed"===ke||"New"===ke||ke===(null===d||void 0===d||null===(Ee=d.misc_info)||void 0===Ee?void 0:Ee.lock)||"Cancelled"===ke?"none":_&&"user"===_.options.action&&(null===_||void 0===_?void 0:_.value)===(null===b||void 0===b?void 0:b.id)?"":"none"}}),q&&r.createElement(h.zx,{light:!0,title:"Refresh location",clicked:function(){k(!0),(0,g.r6)(f.id).pipe((0,v.P)()).subscribe({next:function(e){m(e),k(!1)},error:function(){return k(!1)}})},loading:M,style:{width:"100%",display:"Closed"===(null===f||void 0===f?void 0:f.sttaus)||"New"===(null===f||void 0===f?void 0:f.sttaus)||(null===f||void 0===f?void 0:f.status)===(null===d||void 0===d||null===(Ce=d.misc_info)||void 0===Ce?void 0:Ce.lock)||"Closed"===ke||"New"===ke||ke===(null===d||void 0===d||null===(Ze=d.misc_info)||void 0===Ze?void 0:Ze.lock)||"Cancelled"===ke?"none":_&&"user"===_.options.action&&null!==_&&void 0!==_&&_.value&&(null===f||void 0===f||null===(we=f.created_by)||void 0===we?void 0:we.id)===(null===b||void 0===b?void 0:b.id)?"":"none"}}))}if("Action Button"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(z=e.options)||void 0===z||null===(F=z.action)||void 0===F?void 0:F.length)>0)return null!==e&&void 0!==e&&e.value||ee?r.createElement(ye.Z,{width:"100%",key:n,style:{flexDirection:"column",border:"0"},isProcess:!0,visible:void 0!==(null===e||void 0===e?void 0:e.value)||e.visible,mandatory:!1,error:e.errors},r.createElement("div",{className:me.centeredDiv,style:{width:"inherit",fontSize:"14px",fontWeight:"normal"}},r.createElement("p",{style:{width:"inherit",fontSize:"12px",fontWeight:"bold"}},null!==e&&void 0!==e&&e.value||ee?null!==(H=e.options)&&void 0!==H&&H.notes?null===(J=e.options)||void 0===J?void 0:J.notes:"".concat(e.field_name,":"):"user"===e.options.action?"Not yet assigned":"No status"),"user"===e.options.action&&(null===p||void 0===p?void 0:p.length)>0&&(null===p||void 0===p?void 0:p.filter((function(n){return n.id===(ee||(null===e||void 0===e?void 0:e.value))})).map((function(e,n){var o,l,i,t,d,a;return r.createElement("div",{key:n,className:me.filtersContainer,style:{fontSize:"12px"}},r.createElement(Pe.Z,{ratings:(null===e||void 0===e||null===(o=e.ratings)||void 0===o?void 0:o.length)>0?null===e||void 0===e||null===(l=e.ratings)||void 0===l?void 0:l.map((function(e){return+e.ratings})):[],simple:!0,photo:e.photo,firstName:null===e||void 0===e?void 0:e.first_name,lastName:null===e||void 0===e?void 0:e.last_name,email:null===e||void 0===e||null===(i=e.positions)||void 0===i||null===(t=i.slice(0,1))||void 0===t?void 0:t.map((function(e){return e.name})),position:"",cardClicked:function(){return L(!U)},width:"100%"}),U&&r.createElement("div",{style:{padding:"10px"}},r.createElement("h3",null,"User Feedback:"),(null===e||void 0===e||null===(d=e.ratings)||void 0===d?void 0:d.length)>0?null===e||void 0===e||null===(a=e.ratings)||void 0===a?void 0:a.map((function(e,n){return r.createElement("div",{className:me.actionsContainer,key:n,style:{fontSize:"12px",marginBottom:"10px"}},r.createElement("div",{style:{width:"60%",textAlign:"left"}},'"'.concat(e.comments,'"')))})):null))}))))):null;if("Link"===e.data_type_name){var Ie,Te="".concat(ee||(null===e||void 0===e?void 0:e.value));return r.createElement(ye.Z,{width:y.tq?"100%":"50%",style:{border:"0"},key:n,fieldIcon:e.icon,isProcess:!0,visible:void 0!==(null===e||void 0===e?void 0:e.value)||e.visible,mandatory:!1,error:e.errors,customIconBgColor:"white"},null!==Te&&void 0!==Te&&Te.includes("jpg")||null!==Te&&void 0!==Te&&Te.includes("jpeg")||null!==e&&void 0!==e&&null!==(Ie=e.options)&&void 0!==Ie&&Ie.image||null!==Te&&void 0!==Te&&Te.includes("png")?r.createElement("div",{className:me.accordionContainer,onClick:function(){return window.open(Te,"_blank")}},r.createElement("img",{alt:"lg",src:Te,style:{width:"100%",height:"100%",cursor:"pointer"}})):null!==Te&&void 0!==Te&&Te.includes("pdf")?r.createElement("div",{className:me.accordionContainer,onClick:function(){return window.open(Te,"_blank")}},r.createElement("embed",{onClick:function(){return window.open(Te,"_blank")},src:"".concat(Te,"#toolbar=0&navpanes=0&scrollbar=0"),width:"400px",height:"500px"})):r.createElement("div",{style:{width:"inherit",textDecoration:"underline",textAlign:"center",cursor:"pointer"},onClick:function(){return window.open(ee,"_blank")}},"Link"))}if("Checkbox"===e.data_type_name)return r.createElement("div",{key:n},r.createElement("div",{className:me.actionsContainer,style:{fontSize:"12px"}},r.createElement("div",null,e.options.value,":"),r.createElement("div",null,void 0===ee?!0===(null===e||void 0===e?void 0:e.value)?"Yes":"No":1==ee?"Yes":"No")),r.createElement("hr",{style:{borderTop:"0.5px solid #D2D2D2"}}));if("Status"===e.data_type_name)return r.createElement("div",{key:n},r.createElement("div",{className:me.actionsContainer,style:{fontSize:"12px"}},r.createElement("div",null,"Status",":"),r.createElement("div",null,null!==(G=null===f||void 0===f?void 0:f.status)&&void 0!==G?G:ee)),r.createElement("hr",{style:{borderTop:"0.5px solid #D2D2D2"}}));if("Upload"===e.data_type_name)return r.createElement("div",{key:n},r.createElement("div",{className:me.actionsContainer,style:{fontSize:"12px"}},r.createElement("div",null,e.field_name,":"),(ee||(null===e||void 0===e?void 0:e.value))&&r.createElement("a",{style:{fontFamily:"var(--app-text-main-font)"},key:n,href:ee||(null===e||void 0===e?void 0:e.value),download:"Example-PDF-document",target:"_blank",rel:"noreferrer"},"Download File")),r.createElement("hr",{style:{borderTop:"0.5px solid #D2D2D2"}}));if("Tiles"===(null===e||void 0===e||null===(W=e.options)||void 0===W?void 0:W.selection)){var De,Ae,Ue=c.find((function(n){return(null===n||void 0===n?void 0:n.component_fields.filter((function(n){return n.component_blueprint_id===e.options.component_id&&n.value===ee})).length)>0}));if(Ue)return r.createElement("div",{key:n,className:me.filtersContainer,style:{color:"var(--app-color-gray-dark)",height:"inherit",width:"100%",display:null!==e&&void 0!==e&&e.visible?"":"none"}},null===e||void 0===e||null===(De=e.options)||void 0===De||null===(Ae=De.names)||void 0===Ae?void 0:Ae.map((function(e,n){var o,l,i,t,d=null!==(o=null===(l=Ue.component_fields.find((function(n){return n.field_name===e})))||void 0===l?void 0:l.value)&&void 0!==o?o:"";return null!==d&&void 0!==d&&d.includes("jpg")||null!==d&&void 0!==d&&d.includes("jpeg")||null!==d&&void 0!==d&&d.includes("png")?r.createElement("div",{key:n,style:{width:"inherit",display:"flex",justifyContent:"right",marginBottom:"20px"}},r.createElement("img",{alt:"lg",src:d,style:{objectFit:"contain",width:"40px",height:"30px",cursor:"pointer"}})):r.createElement("div",{key:n},r.createElement("div",{className:me.actionsContainer,style:{fontSize:"12px"}},r.createElement("div",{style:{width:"20%",textAlign:"left"}},e,":"),r.createElement("div",{style:{width:"80%",textAlign:"right"}},null!==(i=null===(t=Ue.component_fields.find((function(n){return n.field_name===e})))||void 0===t?void 0:t.value)&&void 0!==i?i:"")),r.createElement("hr",{style:{borderTop:"0.5px solid #D2D2D2"}}))})))}if("People"===e.data_type_name)if(e.options.calendar){var Oe,Re,ze=JSON.parse(null!==(Oe=ee)&&void 0!==Oe?Oe:null!==(Re=null===e||void 0===e?void 0:e.value)&&void 0!==Re?Re:JSON.stringify({})),qe=p.find((function(e){return e.id===ze.user}));if(ee=qe?"".concat(qe.first_name," ").concat(qe.last_name):"",null!==ze&&void 0!==ze&&ze.task){var Be,Fe=C.find((function(e){return e.id===ze.task}));return r.createElement("div",{key:n,style:{margin:"10px 0 10px 0",display:e.visible&&ee?"":"none"}},r.createElement("div",{className:me.actionsContainer,style:{fontSize:"12px"}},r.createElement("div",null,e.field_name,":"),r.createElement("div",{style:{display:"flex",flexDirection:"column",textAlign:"right"}},r.createElement("div",null,ee),Fe&&"Closed"!==f.status&&r.createElement("div",null,null===Fe||void 0===Fe?void 0:Fe.name),Fe&&"Closed"!==f.status&&r.createElement("div",null,ae()(new Date(null===Fe||void 0===Fe||null===(Be=Fe.add_info)||void 0===Be?void 0:Be.start)).format("DD MMM YYYY h:mm a")),(null===Fe||void 0===Fe?void 0:Fe.status)&&"Closed"!==f.status&&r.createElement("div",null,null===Fe||void 0===Fe?void 0:Fe.status))),r.createElement("hr",{style:{borderTop:"0.5px solid #D2D2D2"}}))}}else{var We=p.find((function(n){var o;return n.id===(null!==(o=ee)&&void 0!==o?o:e.value)}));ee=We?"".concat(We.first_name," ").concat(We.last_name):""}return"Video"===e.data_type_name&&x===(null!==(Y=null===e||void 0===e||null===(j=e.options)||void 0===j?void 0:j.status)&&void 0!==Y?Y:"New")&&null!==e&&void 0!==e&&e.value&&ae()(null===e||void 0===e?void 0:e.value)<=(0,de.now)()&&(0,de.now)()<ae()(null===e||void 0===e?void 0:e.value).add("minutes",+(null!==(V=null===e||void 0===e||null===(Q=e.options)||void 0===Q?void 0:Q.expiry)&&void 0!==V?V:30))?r.createElement("div",{key:n,style:{width:"100%",fontSize:"12px",display:"flex",flexDirection:"column",justifyContent:"center"}},r.createElement("div",null,e.field_name,":"),r.createElement("div",{style:{width:"100%",fontSize:"12px",display:"flex",flexDirection:"column",justifyContent:"center"}},r.createElement(Le.Z,{payload:{name:null===f||void 0===f?void 0:f.id}}))):r.createElement("div",{key:n,style:{margin:"10px 0 10px 0",display:e.visible&&ee?"":"none"}},r.createElement("div",{className:me.actionsContainer,style:{fontSize:"12px"}},r.createElement("div",null,e.field_name,":"),r.createElement("div",{style:{textAlign:"right",width:"60%"}},null===ee||void 0===ee?null!==e&&void 0!==e&&e.value?"Date"===e.data_type_name||"Video"===e.data_type_name?"Invalid date"===ae()(new Date(null===e||void 0===e?void 0:e.value)).format("DD MMM YYYY h:mm a")?"":ae()(new Date(null===e||void 0===e?void 0:e.value)).format("DD MMM YYYY h:mm a"):null===e||void 0===e?void 0:e.value:"":"Date"===e.data_type_name||"Video"===e.data_type_name?"Invalid date"===ae()(new Date(ee)).format("DD MMM YYYY h:mm a")?"":ae()(new Date(ee)).format("DD MMM YYYY h:mm a"):ee)),r.createElement("hr",{style:{borderTop:"0.5px solid #D2D2D2"}}))})));return r.createElement("div",{style:{width:"100%",display:M?"none":""}},F)})),$e=function(e){var n,o,l,i=e.component,t=e.title,d=void 0===t?"Created by":t,a=(0,s.v9)((function(e){return e.flowReducer})),u=a.companyUsersArray.find((function(e){var n;return e.id===(null===(n=i.created_by)||void 0===n?void 0:n.id)}));return r.createElement("div",{className:me.centeredDiv,style:{width:"inherit",fontSize:"14px",marginTop:"20px"}},r.createElement("div",{style:{fontFamily:"var(--app-text-main-font)",fontWeight:"bold",color:"var(--app-color-gray-dark)",paddingLeft:"5px"}},d),r.createElement("div",{className:me.filtersContainer},r.createElement(Pe.Z,{title:"Created by:",simple:!0,photo:null!==(n=null===u||void 0===u?void 0:u.photo)&&void 0!==n?n:"https://s3-symbol-logo.tradingview.com/logo-yazilim--600.png",email:"Transaction Date: ".concat(ae()(new Date(i.created_date)).format("DD MMM YYYY")),position:"Time: ".concat(ae()(new Date(i.created_date)).format("h:mm a")),firstName:r.createElement("div",{style:{fontWeight:"bold"}},"".concat(null===(o=i.created_by)||void 0===o?void 0:o.first_name," ").concat(null===(l=i.created_by)||void 0===l?void 0:l.last_name)),cardClicked:function(){},width:"100%"})))},en=function(e){var n,o,l,i,t,d,a,u,v,c,p,m,f,_,h=e.component,y=(0,s.v9)((function(e){return e.flowReducer})),g=y.companyData,b=(0,s.v9)((function(e){return e.authReducer})),x=b.authenticatedUser,E=null===h||void 0===h?void 0:h.component_fields.find((function(e){var n;return"Payments"===e.data_type_name&&("Done"===(null===h||void 0===h?void 0:h.status)||"Closed"===(null===h||void 0===h?void 0:h.status))&&(null===h||void 0===h||null===(n=h.created_by)||void 0===n?void 0:n.id)===(null===x||void 0===x?void 0:x.id)})),C=null===h||void 0===h?void 0:h.component_fields.find((function(e){var n;return e.field_name===(null===E||void 0===E||null===(n=E.options)||void 0===n?void 0:n.paymentField)}));return r.createElement("div",{className:me.filtersContainer,style:{display:E?"":"none"}},null!==h&&void 0!==h&&h.payments?r.createElement("div",null,r.createElement("div",{className:me.actionsContainer,style:{fontSize:"12px"}},r.createElement("div",null,"Payments:",":"),r.createElement("div",null,"".concat(null===(n=h.payments)||void 0===n?void 0:n.stripe_product,", ID: ").concat(null===(o=h.payments)||void 0===o?void 0:o.stripe_id.substring(0,5)))),r.createElement("hr",{style:{borderTop:"0.5px solid #D2D2D2"}}),r.createElement("div",{className:me.actionsContainer,style:{fontSize:"12px"}},r.createElement("div",null,"Amount Paid",":"),r.createElement("div",null,"".concat((+(null!==(l=null===(i=h.payments)||void 0===i?void 0:i.stripe_price)&&void 0!==l?l:0)).toFixed(2)))),r.createElement("hr",{style:{borderTop:"0.5px solid #D2D2D2"}}),(null===(t=h.assigned_to)||void 0===t?void 0:t.id)===(null===x||void 0===x?void 0:x.id)&&r.createElement("div",{className:me.actionsContainer,style:{fontSize:"12px"}},r.createElement("div",null,"Transaction Fees",":"),r.createElement("div",null,"".concat((+(null===(d=h.payments)||void 0===d?void 0:d.stripe_price)*(null!==(a=null===g||void 0===g||null===(u=g.misc_info)||void 0===u?void 0:u.rate)&&void 0!==a?a:.2)).toFixed(2))))):r.createElement("div",null,"Cash"===(null===E||void 0===E?void 0:E.value)&&r.createElement("div",{className:me.actionsContainer,style:{fontSize:"12px"}},r.createElement("div",null,"Payments:",":"),r.createElement("div",null,"Cash")),"Cash"===(null===E||void 0===E?void 0:E.value)&&r.createElement("div",{className:me.actionsContainer,style:{fontSize:"12px"}},r.createElement("div",null,"Cash Paid",":"),r.createElement("div",null,"".concat((+(null===C||void 0===C?void 0:C.value)).toFixed(2)))),"Cash"===(null===E||void 0===E?void 0:E.value)&&(null===(v=h.assigned_to)||void 0===v?void 0:v.id)===(null===x||void 0===x?void 0:x.id)&&r.createElement("div",{className:me.actionsContainer,style:{fontSize:"12px"}},r.createElement("div",null,"Deducted from wallet",":"),r.createElement("div",null,"".concat((+(null===C||void 0===C?void 0:C.value)+ +(null===C||void 0===C?void 0:C.value)*(null!==(c=null===g||void 0===g||null===(p=g.misc_info)||void 0===p?void 0:p.rate)&&void 0!==c?c:.2)).toFixed(2)))),"Cash"===(null===E||void 0===E?void 0:E.value)&&(null===(m=h.assigned_to)||void 0===m?void 0:m.id)===(null===x||void 0===x?void 0:x.id)&&r.createElement("div",{className:me.actionsContainer,style:{fontSize:"12px"}},r.createElement("div",null,"Total Fees",":"),r.createElement("div",null,"".concat((+(null===C||void 0===C?void 0:C.value)*(null!==(f=null===g||void 0===g||null===(_=g.misc_info)||void 0===_?void 0:_.rate)&&void 0!==f?f:.2)).toFixed(2)))),"Cash"!==(null===E||void 0===E?void 0:E.value)&&r.createElement("div",{className:me.actionsContainer,style:{fontSize:"12px",fontWeight:"bold"}},r.createElement("div",null,"Payments:",":"),r.createElement("div",{style:{color:"red"}},"Pending"))))},nn=function(e){var n=f.h.getState().flowReducer.companyUsersArray,o=e.isEdit,l=e.modalVisible,i=e.heading,t=e.onClose,d=e.isProcess,a=e.setIsProcessBegin,s=e.task,c=e.priority,p=void 0===c||c,m=e.shadowedContainerStyle,y=e.statuses,g=e.start_date,b=e.span,x=e.labels,E=void 0===x?{}:x,C=e.onUpdate,Z=void 0===C?function(){}:C,w=e.save,M=void 0===w||w,S=(0,r.useState)(E),k=(0,u.Z)(S,1)[0],I=(0,r.useState)(d),P=(0,u.Z)(I,1)[0],N=(0,r.useState)(i),T=(0,u.Z)(N,1)[0];return(0,r.useEffect)((function(){var e=[];if(s){var o,l;if(!n.find((function(e){var n;return e.id===(null===s||void 0===s||null===(n=s.creator)||void 0===n?void 0:n.id)})))e=e.concat(null===(o=s.creator)||void 0===o?void 0:o.id);if(!n.find((function(e){var n;return e.id===(null===s||void 0===s||null===(n=s.assignee)||void 0===n?void 0:n.id)})))e=e.concat(null===(l=s.assignee)||void 0===l?void 0:l.id);e.length>0&&(0,Ee.VG)(e).pipe((0,v.P)()).subscribe({next:function(e){f.h.dispatch((0,_.NY)(n.concat(e)))}})}}),[]),r.createElement("div",null,r.createElement(h.U7,{scrollable:!0,shadowedContainerStyle:m||{width:"100%",minHeight:"100vh"},isOpen:l,onClose:function(){},blured:!1},r.createElement("div",null,r.createElement("p",{style:{fontFamily:"var(--app-text-main-font)",fontSize:"20px",fontWeight:"bold",color:"#4A4A4A",marginTop:"50px",marginBottom:"20px",textAlign:"center"}},null!==s&&void 0!==s&&s.completed_at?"Completed Task":T),r.createElement(on,{labels:k,showPriority:p,statuses:y,task:s,setIsProcessBegin:a,setDisplayModal:t,isProcess:P,isEdit:o,onClose:function(){return t()},start_date:g,span:b,onUpdate:Z,save:M}))))};function on(e){var n,o,l,i,t,s,v,c,p,m,_,y,g,b,x,E,C,Z,w,M,S,k,P,N,D,L,O,R,z,q,B,F,W,Y,j,H,J,G,V,Q,X,K,$,ee,ne,oe,le,ie=f.h.getState().flowReducer,te=ie.selectedProcess,de=ie.companyUsersArray,ue=ie.begunModule,re=ie.companyData,ce=f.h.getState().sessionReducer.user,pe=e.isProcess,fe=e.statuses,_e=e.task,ge=e.isEdit,be=e.assigneeId,xe=e.setDisplayModal,Ee=e.onClose,Ce=e.start_date,Ze=void 0===Ce?(new Date).setDate((new Date).getDate()):Ce,we=e.span,Me=void 0===we||we,Se=e.labels,ke=e.onUpdate,Ie=void 0===ke?function(){}:ke,Pe=e.save,Ne=void 0===Pe||Pe,De=(0,r.useState)(null!==_e&&void 0!==_e&&null!==(n=_e.assignee)&&void 0!==n&&n.id?{assignee_id:null===_e||void 0===_e||null===(o=_e.assignee)||void 0===o?void 0:o.id}:""),Ae=(0,u.Z)(De,2),Ue=Ae[0],Le=Ae[1],Oe=(0,r.useState)(null!==_e&&void 0!==_e&&null!==(l=_e.process)&&void 0!==l&&l.id?{process:null===_e||void 0===_e||null===(i=_e.process)||void 0===i?void 0:i.id}:""),Re=(0,u.Z)(Oe,2),ze=(Re[0],Re[1]),qe=(0,r.useState)((null===_e||void 0===_e?void 0:_e.name)||""),Be=(0,u.Z)(qe,2),Fe=Be[0],We=Be[1],Ye=(0,r.useState)((null===_e||void 0===_e?void 0:_e.status)||""),je=(0,u.Z)(Ye,2),He=je[0],Je=je[1],Ge=(0,r.useState)((null===_e||void 0===_e?void 0:_e.description)||""),Ve=(0,u.Z)(Ge,2),Qe=Ve[0],Xe=Ve[1],Ke=(0,r.useState)(null!==_e&&void 0!==_e&&_e.due_date?new Date(null===_e||void 0===_e?void 0:_e.due_date):(new Date).setDate((new Date).getDate())+36e5),$e=(0,u.Z)(Ke,2),en=$e[0],nn=($e[1],(0,r.useState)(null!==_e&&void 0!==_e&&null!==(t=_e.add_info)&&void 0!==t&&t.start?new Date(null===_e||void 0===_e||null===(s=_e.add_info)||void 0===s?void 0:s.start):Ze)),on=(0,u.Z)(nn,2),tn=on[0],dn=on[1],an=(0,r.useState)(null!==_e&&void 0!==_e&&null!==(v=_e.add_info)&&void 0!==v&&v.end?new Date(null===_e||void 0===_e||null===(c=_e.add_info)||void 0===c?void 0:c.end):Ze),un=(0,u.Z)(an,2),rn=un[0],sn=un[1],vn=(0,r.useState)(null===_e||void 0===_e||null===(p=_e.add_info)||void 0===p?void 0:p.value),cn=(0,u.Z)(vn,2),pn=cn[0],mn=cn[1],fn=(0,r.useState)(""),_n=(0,u.Z)(fn,2),hn=_n[0],yn=_n[1],gn=(0,r.useState)(!1),bn=(0,u.Z)(gn,2),xn=bn[0],En=bn[1],Cn=(0,r.useState)(!1),Zn=(0,u.Z)(Cn,2),wn=Zn[0],Mn=Zn[1],Sn=(0,r.useState)(!1),kn=(0,u.Z)(Sn,2),In=kn[0],Pn=kn[1],Nn=(0,r.useState)(!1),Tn=(0,u.Z)(Nn,2),Dn=Tn[0],An=Tn[1],Un=(0,r.useState)(pe),Ln=(0,u.Z)(Un,2),On=Ln[0],Rn=(Ln[1],(0,r.useState)((null===_e||void 0===_e||null===(m=_e.add_info)||void 0===m?void 0:m.priority)||"")),zn=(0,u.Z)(Rn,2),qn=zn[0],Bn=(zn[1],(null===de||void 0===de?void 0:de.length)>0?ge&&(null===_e||void 0===_e||null===(_=_e.creator)||void 0===_?void 0:_.id)!==ce.id?[{label:ce.first_name+" "+ce.last_name,value:ce.id}]:(null===Se||void 0===Se||null===(y=Se.aList)||void 0===y?void 0:y.length)>0?de.filter((function(e){var n;return(null===e||void 0===e||null===(n=e.positions)||void 0===n?void 0:n.filter((function(e){var n,o;return null===Se||void 0===Se||null===(n=Se.options)||void 0===n||null===(o=n.aList)||void 0===o?void 0:o.includes(null===e||void 0===e?void 0:e.id)})).length)>0})).map((function(e){return{label:e.first_name+" "+e.last_name,value:e.id}})):de.map((function(e){return{label:e.first_name+" "+e.last_name,value:e.id}})):[]);(0,r.useEffect)((function(){return Pn(!0),function(){Pn(!1)}}),[]),(0,r.useEffect)((function(){if(On&&null!==te&&void 0!==te&&te.id&&In){ze({procedure_id:te.id}),Xe(te.description)}}),[On,In,te.description,te.id]);var Fn=fe?fe.map((function(e){return{label:e,value:e}})):[{label:"Ongoing",value:"Ongoing"},{label:"In Review",value:"In Review"},{label:"Approved",value:"Approved"},{label:"Postponed",value:"Postponed"},{label:"Moved",value:"Moved"},{label:"Cancelled",value:"Cancelled"}];return r.createElement("div",{className:me.newTaskFormHost,style:{padding:"0 20px 0 20px"}},r.createElement(A(),{style:{flex:1}},r.createElement(ye.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-dark)",fontWeight:"regular",paddingLeft:"5px"},enabled:void 0===(null===_e||void 0===_e?void 0:_e.id)||(null===_e||void 0===_e||!_e.completed_at)&&ce.id===(null===_e||void 0===_e||null===(g=_e.creator)||void 0===g?void 0:g.id),width:"100%",style:{marginTop:"0px",border:"1px dashed var(--app-color-gray-light)",padding:"5px"},editMode:!1,fieldLabel:null!==(b=null===Se||void 0===Se?void 0:Se.title)&&void 0!==b?b:"Event Name",isProcess:!0,visible:!0,mandatory:!0,error:null===hn||void 0===hn||null===(x=hn.errors)||void 0===x?void 0:x.name},r.createElement("textarea",{className:me.fieldTypeTextarea,type:"text",value:Fe,readOnly:void 0!==(null===_e||void 0===_e?void 0:_e.id)&&(!(null===_e||void 0===_e||!_e.completed_at)||ce.id!==(null===_e||void 0===_e||null===(E=_e.creator)||void 0===E?void 0:E.id)),autoComplete:"none",onChange:function(e){return We(e.target.value)},placeholder:"",style:{height:"60px",border:"0"}})),r.createElement(ye.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-dark)",fontWeight:"regular",paddingLeft:"5px"},enabled:void 0===(null===_e||void 0===_e?void 0:_e.id)||(null===_e||void 0===_e||!_e.completed_at)&&ce.id===(null===_e||void 0===_e||null===(C=_e.creator)||void 0===C?void 0:C.id),width:"100%",style:{marginTop:"0px",border:"1px dashed var(--app-color-gray-light)",padding:"5px"},editMode:!0,fieldLabel:null!==(Z=null===Se||void 0===Se?void 0:Se.description)&&void 0!==Z?Z:"Description",isProcess:!0,visible:(null!==_e&&void 0!==_e&&_e.completed_at,!0),mandatory:!0,error:null===hn||void 0===hn||null===(w=hn.errors)||void 0===w?void 0:w.name},r.createElement("textarea",{className:me.fieldTypeTextarea,style:{border:"0",minHeight:"160px"},readOnly:void 0!==(null===_e||void 0===_e?void 0:_e.id)&&(!(null===_e||void 0===_e||!_e.completed_at)||ce.id!==(null===_e||void 0===_e||null===(M=_e.creator)||void 0===M?void 0:M.id)),required:null===hn||void 0===hn||null===(S=hn.errors)||void 0===S?void 0:S.description,value:Qe,onChange:function(e){return Xe(e.target.value)}})),r.createElement(ye.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-dark)",fontWeight:"regular",paddingLeft:"5px"},enabled:void 0===(null===_e||void 0===_e?void 0:_e.id)||(null===_e||void 0===_e||!_e.completed_at)&&ce.id===(null===_e||void 0===_e||null===(k=_e.creator)||void 0===k?void 0:k.id),width:"100%",style:{marginTop:"0px",border:"1px dashed var(--app-color-gray-light)",padding:"5px"},editMode:!1,fieldLabel:null===Se||void 0===Se?void 0:Se.valueL,isProcess:!0,visible:!(null===Se||void 0===Se||!Se.valueL),mandatory:!0},r.createElement("div",null,r.createElement("input",{className:me.fieldTypeInput,style:{border:"0"},readOnly:void 0!==(null===_e||void 0===_e?void 0:_e.id)&&(!(null===_e||void 0===_e||!_e.completed_at)||ce.id!==(null===_e||void 0===_e||null===(P=_e.creator)||void 0===P?void 0:P.id)),value:pn,onChange:function(e){return mn(e.target.value)},onBlur:function(){var e,n,o;null!==ue&&void 0!==ue&&null!==(e=ue.processModule)&&void 0!==e&&null!==(n=e.module)&&void 0!==n&&null!==(o=n.options)&&void 0!==o&&o.credits&&+pn>+(null===ce||void 0===ce?void 0:ce.wallet)&&(mn("0.00"),yn({errors:{value:"You have insufficient funds in your wallet. You currently have ".concat(null===ce||void 0===ce?void 0:ce.wallet,".")}}))}}),hn&&(null===hn||void 0===hn||null===(N=hn.errors)||void 0===N?void 0:N.value)&&r.createElement(I.Z,{message:hn.errors.value,onClick:function(){return yn("")}}))),r.createElement(ye.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-dark)",fontWeight:"regular",paddingLeft:"5px"},enabled:void 0===(null===_e||void 0===_e?void 0:_e.id)||(null===_e||void 0===_e||!_e.completed_at)&&ce.id===(null===_e||void 0===_e||null===(D=_e.creator)||void 0===D?void 0:D.id),width:"100%",style:{marginTop:"0px",border:"1px dashed var(--app-color-gray-light)",padding:"5px"},editMode:!1,fieldLabel:null!==(L=null===Se||void 0===Se?void 0:Se.start)&&void 0!==L?L:"Start Date",isProcess:!0,visible:!0,mandatory:!0,error:null===hn||void 0===hn||null===(O=hn.errors)||void 0===O?void 0:O.due_date},r.createElement(he(),{showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:15,readOnly:void 0!==(null===_e||void 0===_e?void 0:_e.id)&&(!(null===_e||void 0===_e||!_e.completed_at)||ce.id!==(null===_e||void 0===_e||null===(R=_e.creator)||void 0===R?void 0:R.id)),placeholderText:"Start Date",customInput:r.createElement("div",{id:"custom-input",style:{cursor:"pointer",display:"flex",justifyContent:"center",width:"100%",alignItems:"stretch"}},r.createElement("input",{readOnly:!0,value:void 0!==(null===_e||void 0===_e?void 0:_e.id)&&(null!==_e&&void 0!==_e&&_e.completed_at||ce.id!==(null===_e||void 0===_e||null===(z=_e.creator)||void 0===z?void 0:z.id))?"".concat(ae()(tn).format("DD MMMM YYYY HH:mm")):ae()(tn).format("DD MMMM YYYY HH:mm"),type:"text",required:null===hn||void 0===hn||null===(q=hn.errors)||void 0===q?void 0:q.startDate,id:"start-date",style:{flex:1,marginTop:"auto",marginBottom:"auto",outline:"none",border:"none",fontFamily:"var(--app-text-main-font)",fontSize:"16px",fontWeight:"bold",lineHeight:"20px",color:"#4A4A4A",textAlign:(null===tn||void 0===tn?void 0:tn.length)>0?"center":"left",maxWidth:"98%"},placeholder:"Start Date",onChange:function(e){}}),r.createElement(ve.G,{icon:se.WRo,style:{width:"20px",height:"20px"}})),className:me.datePickerWrapper,selected:tn,onChange:function(e){ae()(e).diff(ae()(rn),"minutes")<1?dn(e):(dn(e),sn(e))}})),r.createElement(ye.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-dark)",fontWeight:"regular",paddingLeft:"5px"},enabled:void 0===(null===_e||void 0===_e?void 0:_e.id)||(null===_e||void 0===_e||!_e.completed_at)&&ce.id===(null===_e||void 0===_e||null===(B=_e.creator)||void 0===B?void 0:B.id),width:"100%",style:{marginTop:"0px",border:"1px dashed var(--app-color-gray-light)",padding:"5px"},editMode:!1,fieldLabel:null!==(F=null===Se||void 0===Se?void 0:Se.end)&&void 0!==F?F:"End Date",isProcess:!0,visible:!0,mandatory:!0,error:null===hn||void 0===hn||null===(W=hn.errors)||void 0===W?void 0:W.due_date},r.createElement(he(),{showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:15,readOnly:void 0!==(null===_e||void 0===_e?void 0:_e.id)&&(!(null===_e||void 0===_e||!_e.completed_at)||ce.id!==(null===_e||void 0===_e||null===(Y=_e.creator)||void 0===Y?void 0:Y.id)),placeholderText:"End Date",customInput:r.createElement("div",{id:"custom-input",style:{cursor:"pointer",display:"flex",justifyContent:"center",width:"100%",alignItems:"stretch"}},r.createElement("input",{readOnly:!0,value:ae()(rn).format("DD MMMM YYYY HH:mm"),type:"text",required:null===hn||void 0===hn||null===(j=hn.errors)||void 0===j?void 0:j.endDate,id:"due-date",style:{flex:1,marginTop:"auto",marginBottom:"auto",outline:"none",border:"none",fontFamily:"var(--app-text-main-font)",fontSize:"16px",fontWeight:"bold",lineHeight:"20px",color:"#4A4A4A",textAlign:(null===rn||void 0===rn?void 0:rn.length)>0?"center":"left",maxWidth:"98%"},placeholder:"Due Date",onChange:function(e){}}),r.createElement(ve.G,{icon:se.WRo,style:{width:"20px",height:"20px"}})),className:me.datePickerWrapper,selected:rn,onChange:function(e){ae()(e).diff(ae()(tn),"minutes")>0?!1===Me?ae()(e).format("DD")===ae()(rn).format("DD")?sn(e):sn(rn):sn(e):sn(rn)}})),r.createElement("div",{style:{marginBottom:"10px"}},r.createElement("label",{style:{fontSize:"12px",color:"var(--app-color-gray-dark)",fontWeight:"regular",paddingLeft:"5px"}},null!==(H=null===Se||void 0===Se?void 0:Se.assignee)&&void 0!==H?H:"Assignee",null!==_e&&void 0!==_e&&_e.completed_at?r.createElement("div",null,r.createElement("input",{style:{cursor:"auto"},placeholder:(null===_e||void 0===_e?void 0:_e.assignee.first_name)+" "+(null===_e||void 0===_e?void 0:_e.assignee.last_name),readOnly:!0})):r.createElement(T.ZP,{isSearchable:!1,key:"Assignee",styles:U.X2,defaultInputValue:"",components:{DropdownIndicator:U.ms},placeholder:"",value:Bn[Bn.findIndex((function(e){return e.value===Ue.assignee_id}))],options:Bn.concat([{label:"None",value:""}]),onChange:function(e){e&&Le((function(n){return(0,a.Z)((0,a.Z)({},n),{},{assignee_id:e.value})}))}})),hn&&(null===hn||void 0===hn||null===(J=hn.errors)||void 0===J?void 0:J.assignee_id)&&r.createElement(I.Z,{message:hn.errors.assignee_id})),((null===_e||void 0===_e?void 0:_e.completed_at)||ce.id===(null===_e||void 0===_e||null===(G=_e.creator)||void 0===G?void 0:G.id))&&r.createElement("div",{style:{marginBottom:"10px"}},r.createElement("label",{style:{fontSize:"12px",color:"var(--app-color-gray-dark)",fontWeight:"regular",paddingLeft:"5px"}},"Status",null!==_e&&void 0!==_e&&_e.completed_at?r.createElement("input",{style:{cursor:"auto"},placeholder:null!==(V=null===_e||void 0===_e?void 0:_e.status)&&void 0!==V?V:"No status set",readOnly:!0}):ce.id===(null===_e||void 0===_e||null===(Q=_e.creator)||void 0===Q?void 0:Q.id)?r.createElement(T.ZP,{onFocus:function(){return yn("")},key:"status",isSearchable:!1,styles:U.X2,defaultInputValue:"",components:{DropdownIndicator:U.ms},placeholder:"",value:Fn.find((function(e){return e.value===He})),options:ce.id===(null===_e||void 0===_e||null===(X=_e.creator)||void 0===X?void 0:X.id)?[].concat((0,d.Z)(Fn),[{label:null===re||void 0===re||null===(K=re.misc_info)||void 0===K?void 0:K.lock,value:null===re||void 0===re||null===($=re.misc_info)||void 0===$?void 0:$.lock},{label:"No status",value:""}]):Fn,onChange:function(e){return Je(e.value)}}):r.createElement("input",{style:{cursor:"auto"},placeholder:null!==(ee=null===_e||void 0===_e?void 0:_e.status)&&void 0!==ee?ee:"No status set",readOnly:!0})),hn&&(null===hn||void 0===hn||null===(ne=hn.errors)||void 0===ne?void 0:ne.procedure_id)&&r.createElement(I.Z,{message:hn.errors.procedure_id})),hn&&(null===hn||void 0===hn?void 0:hn.message)&&r.createElement(I.Z,{message:hn.message})),null!==_e&&void 0!==_e&&_e.completed_at?r.createElement("div",{className:me.buttonsContainer},r.createElement(h.zx,{clicked:Ee,className:me.saveButton,title:"Close"})):ge?r.createElement("div",{className:me.buttonsContainer},r.createElement(h.zx,{clicked:Ee,className:me.saveButton,title:"Close"}),Ne&&ce.id===(null===(oe=_e.creator)||void 0===oe?void 0:oe.id)&&!(null!==_e&&void 0!==_e&&null!==(le=_e.assignee)&&void 0!==le&&le.id)&&r.createElement(h.zx,{light:!0,clicked:function(){return An(!0)},className:me.saveButton,title:"Delete"}),Ne&&r.createElement(h.zx,{light:!0,clicked:function(){return function(){var n,o;En(!0);var l=Ue?Ue.assignee_id:be;(0,Te.xJ)({assignee_id:l,name:Fe,description:Qe,due_date:ae()(en).format("YYYY-MM-DD HH:mm"),status:null!==He&&void 0!==He?He:"",add_info:(0,a.Z)((0,a.Z)({},null===e||void 0===e||null===(n=e.task)||void 0===n?void 0:n.add_info),{},{priority:null!==qn&&void 0!==qn?qn:"",start:tn,end:rn,value:pn})},null===e||void 0===e||null===(o=e.task)||void 0===o?void 0:o.id).subscribe({next:function(e){Ie(e),En(!1),xe(!1)},error:function(e){e&&(yn(e.data),En(!1))},complete:function(){}})}()},className:me.saveButton,title:"Update",loading:xn}),!Ne&&r.createElement(h.zx,{title:"Save",light:!0,clicked:function(){var n;Ie((0,a.Z)((0,a.Z)({},null===e||void 0===e?void 0:e.task),{},{assignee_id:Ue?Ue.assignee_id:be,name:Fe,description:Qe,due_date:ae()(en).format("YYYY-MM-DD HH:mm"),status:null!==He&&void 0!==He?He:"",add_info:(0,a.Z)((0,a.Z)({},null===e||void 0===e||null===(n=e.task)||void 0===n?void 0:n.add_info),{},{priority:null!==qn&&void 0!==qn?qn:"",start:tn,end:rn,value:pn})})),xe(!1)},className:me.saveButton})):r.createElement("div",{className:me.buttonsContainer},r.createElement(h.zx,{clicked:Ee,className:me.saveButton,title:"Close"}),r.createElement(h.zx,{light:!0,clicked:function(){return En(!0),void(0,Te.vr)({newAssignee:Ue,taskProcess:null===ue||void 0===ue?void 0:ue.processModule,taskName:Fe,taskDescription:null!==Qe&&void 0!==Qe?Qe:"-",dueDate:ae()(rn).format("YYYY-MM-DD HH:mm"),add_info:{module_id:null===ue||void 0===ue?void 0:ue.processModule.module_id,priority:qn,start:tn,end:rn,value:pn}}).subscribe({next:function(e){Ee()},error:function(e){e&&(yn(e.data),En(!1))},complete:function(){En(!1),!On&&xe(!1)}})},className:me.saveButton,title:"Save",loading:xn})),Dn&&r.createElement(ln,{taskId:_e.id,isOpen:Dn,removeTask:function(e){Mn(!0),(0,Te._5)(e).subscribe({next:function(e){Mn(!1),An(!1)},error:function(e){Mn(!1)},complete:function(){xe(!1)}})},loading:wn,onClose:An}))}var ln=function(e){var n=e.isOpen,o=e.onClose,l=e.loading,i=e.removeTask,t=e.taskId;return r.createElement(h.U7,{isOpen:n,onClose:function(){return o(!1)},backdropColor:!0,blured:!0,scrollable:!0,shadowedContainerStyle:{width:"35%"}},r.createElement("div",null,r.createElement("p",{style:{textAlign:"center",fontSize:"20px",color:"#4A4A4A",fontFamily:"var(--app-text-main-font)"}},"Are you sure do you want to delete this task?"),r.createElement(h.zx,{loading:l,clicked:function(){return i(t)},title:"Yes, Delete",style:{fontWeight:"500",marginLeft:"auto",marginRight:"auto"}}),r.createElement("p",{style:{cursor:"pointer",textAlign:"center",fontSize:"16px",fontWeight:600,color:"#4A4A4A",fontFamily:"var(--app-text-main-font)"},onClick:function(){return o(!1)},className:"go-back-text"},"No, Go Back")))},tn=(0,s.$j)((function(e){var n=e.flowReducer,o=n.begunModule,l=n.allModules,i=n.companyData,t=n.components,d=n.rememberPath,a=n.lastUpdates,u=n.companyUsersArray,r=n.products,s=n.transactions,v=n.companyProcesses,c=n.companyPositionsArray,p=n.cart,m=n.blueprints,f=n.payable,_=n.allTasks,h=e.authReducer.authenticatedUser;return{user:e.sessionReducer.user,begunModule:o,allModules:l,companyData:i,components:t,rememberPath:d,lastUpdates:a,companyUsersArray:u,products:r,transactions:s,companyProcesses:v,companyPositionsArray:c,cart:p,blueprints:m,payable:f,authenticatedUser:h,allTasks:_}}),(function(e){return{onSetAuthenticatedUser:function(n){return e((0,b.IF)(n))}}}))((function(e){var n,o,l,i,b,Z,M,k,N,T,D,A,R,K,$,ee,ne,oe,le,ie,te,ce,pe,fe,_e,he,ye,ge,be,xe,Ce,Ze,we,Me,Se,ke,Ie,Ne,De,Ae,Ue,Le,ze,qe,Be,Ye,je,He,Je,Ge,Ve,Xe,Ke,$e,en,nn,on,ln,tn,dn,an,un,rn,sn,vn,cn,pn,mn,fn,_n,hn,yn,gn,bn,xn,En,Cn,Zn,wn,Mn,Sn,kn=e.navigateTo,In=void 0===kn?{}:kn,Pn=e.begunModule,Nn=e.user,Tn=e.cart,Dn=e.selectedProcess,An=void 0===Dn?{steps:[]}:Dn,Un=e.allModules,Ln=e.companyData,On=e.components,Rn=e.onCancel,zn=void 0===Rn?function(){}:Rn,qn=e.companyUsersArray,Bn=e.products,Fn=e.companyPositionsArray,Wn=e.blueprints,Yn=e.paymentID,jn=void 0===Yn?"":Yn,Hn=e.isEditing,Jn=void 0!==Hn&&Hn,Gn=e.payable,Vn=e.selectedComponent,Qn=e.setSelectedComponent,Xn=e.isProcessorOnly,Kn=void 0!==Xn&&Xn,$n=e.companyProcesses,eo=e.lastUpdates,no=e.allTasks,oo=(0,s.v9)((function(e){return e.authReducer})),lo=oo.authenticatedUser,io=(0,r.useState)(!1),to=(0,u.Z)(io,2),ao=to[0],uo=to[1],ro=(0,r.useState)(1),so=(0,u.Z)(ro,1)[0],vo=(0,r.useState)(!1),co=(0,u.Z)(vo,2),po=co[0],mo=co[1],fo=(0,r.useState)(!1),_o=(0,u.Z)(fo,2),ho=_o[0],yo=_o[1],go=(0,r.useState)(""),bo=(0,u.Z)(go,2),xo=bo[0],Eo=bo[1],Co=(0,r.useState)(!1),Zo=(0,u.Z)(Co,2),wo=Zo[0],Mo=Zo[1],So=(0,r.useState)(!1),ko=(0,u.Z)(So,2),Io=ko[0],Po=ko[1],No=(0,r.useState)(null===(n=null===Vn||void 0===Vn?void 0:Vn.is_complete)||void 0===n||n),To=(0,u.Z)(No,2),Do=To[0],Ao=To[1],Uo=(0,r.useState)([]),Lo=(0,u.Z)(Uo,2),Oo=Lo[0],Ro=Lo[1],zo=(0,r.useState)([]),qo=(0,u.Z)(zo,2),Bo=qo[0],Fo=qo[1],Wo=(0,r.useState)(!1),Yo=(0,u.Z)(Wo,2),jo=Yo[0],Ho=Yo[1],Jo=(0,r.useState)(!1),Go=(0,u.Z)(Jo,2),Vo=Go[0],Qo=Go[1],Xo=(0,r.useState)(!1),Ko=(0,u.Z)(Xo,2),$o=Ko[0],el=Ko[1],nl=(0,r.useState)(!1),ol=(0,u.Z)(nl,2),ll=ol[0],il=ol[1],tl=(0,r.useState)(!1),dl=(0,u.Z)(tl,2),al=dl[0],ul=dl[1],rl=(0,r.useState)(!1),sl=(0,u.Z)(rl,2),vl=sl[0],cl=sl[1],pl=(0,r.useState)(!1),ml=(0,u.Z)(pl,2),fl=ml[0],_l=ml[1],hl=(0,r.useState)([]),yl=(0,u.Z)(hl,2),gl=yl[0],bl=yl[1],xl=(0,r.useState)([]),El=(0,u.Z)(xl,2),Cl=El[0],Zl=El[1],wl=(0,r.useState)([]),Ml=(0,u.Z)(wl,2),Sl=Ml[0],kl=Ml[1],Il=(0,r.useState)(!1),Pl=(0,u.Z)(Il,2),Nl=Pl[0],Tl=Pl[1],Dl=(0,r.useState)(!1),Al=(0,u.Z)(Dl,2),Ul=Al[0],Ll=Al[1],Ol=(0,r.useState)(!1),Rl=(0,u.Z)(Ol,2),zl=Rl[0],ql=Rl[1],Bl=(0,r.useState)(!1),Fl=(0,u.Z)(Bl,2),Wl=Fl[0],Yl=Fl[1],jl=(0,r.useState)(5),Hl=(0,u.Z)(jl,2),Jl=Hl[0],Gl=Hl[1],Vl=(0,r.useState)(0),Ql=(0,u.Z)(Vl,2),Xl=Ql[0],Kl=Ql[1],$l=(0,r.useState)(!1),ei=(0,u.Z)($l,2),ni=ei[0],oi=ei[1],li=(0,r.useState)(!1),ii=(0,u.Z)(li,2),ti=(ii[0],ii[1]),di=(0,r.useState)(!1),ai=(0,u.Z)(di,2),ui=ai[0],ri=ai[1],si=(0,r.useState)(!1),vi=(0,u.Z)(si,2),ci=vi[0],pi=vi[1],mi=(0,x.s0)(),fi=(null===An||void 0===An||null===(o=An.steps)||void 0===o?void 0:o.length)>0?null===An||void 0===An?void 0:An.steps[Pn.processModule.stepIndex]:{},_i=(null===An||void 0===An||null===(l=An.steps)||void 0===l?void 0:l.length)>0?null===An||void 0===An||null===(i=An.steps[Pn.processModule.stepIndex])||void 0===i?void 0:i.pathway_steps:[],hi=(null===An||void 0===An||null===(b=An.steps)||void 0===b?void 0:b.length)>0?null===(Z=An.steps[Pn.processModule.stepIndex])||void 0===Z?void 0:Z.pathway_processes:[],yi=(0,r.useRef)(),gi=(0,r.useRef)(),bi=(0,m.pQ)(),xi=(0,u.Z)(bi,2),Ei=xi[0],Ci=xi[1];(0,r.useEffect)((function(){var e,n;if(void 0===(null===Pn||void 0===Pn||null===(e=Pn.processModule)||void 0===e?void 0:e.isUpdating)){var o=An;if(o&&o.steps.length>0){var l,i=(0,a.Z)((0,a.Z)((0,a.Z)({},Pn.processModule),o),{},{steps:o.steps.filter((function(e){var n,l,i,t,d,a;return void 0==(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.showStepAll)||1==(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.showStepAll)||0==(null===e||void 0===e||null===(i=e.options)||void 0===i?void 0:i.showStepAll)&&(null===e||void 0===e||null===(t=e.options)||void 0===t||null===(d=t.showOnly)||void 0===d?void 0:d.filter((function(e){return lo.positions.map((function(e){return e.id})).indexOf(e)>-1})).length)>0||(null===e||void 0===e||null===(a=e.options)||void 0===a?void 0:a.showStepAuthor)&&(null===lo||void 0===lo?void 0:lo.id)===(null===o||void 0===o?void 0:o.user_id)})).map((function(e,n){return(0,a.Z)((0,a.Z)({},e),{},{rank:n+1})}))});f.h.dispatch((0,_.q4)(i)),Ci({action:m._U.setCurrentStep,value:i.steps[null!==(l=Pn.processModule.stepIndex)&&void 0!==l?l:0]})}}else if(!0===(null===Pn||void 0===Pn||null===(n=Pn.processModule)||void 0===n?void 0:n.isUpdating)){var t;Ci({action:m._U.setCurrentStep,value:Pn.processModule.steps[null!==(t=Pn.processModule.stepIndex)&&void 0!==t?t:0]})}}),[]),(0,r.useEffect)((function(){var e=qn.filter((function(e){return 0==e.departments.length})).map((function(e){return{label:"".concat(e.first_name," ").concat(e.last_name),value:e.id,department:"General",user:e}}));qn.filter((function(e){return e.departments.length>0})).filter((function(n){n.departments.filter((function(o){e=[].concat((0,d.Z)(e),[{label:"".concat(n.first_name," ").concat(n.last_name),value:n.id,department:null===o||void 0===o?void 0:o.name,user:n}])}))})),Zl(e)}),[qn]),(0,r.useEffect)((function(){Gn.length>0&&""!==jn&&Gn.map((function(e,n){var o;uo(!0),(0,re.e_)({user_id:lo.id,id:null===e||void 0===e?void 0:e.id,total:-Math.abs(+(null!==(o=null===e||void 0===e?void 0:e.amount)&&void 0!==o?o:0)),product:null===e||void 0===e?void 0:e.product,notes:null===e||void 0===e?void 0:e.product,quantity:1}).pipe((0,v.P)()).subscribe({next:function(){if(uo(!1),n+1==Gn.length){var e,o,l,i;if(Gn.filter((function(e){return e.paymentID===jn})).length>0)cl((null===Pn||void 0===Pn||null===(e=Pn.processModule)||void 0===e||null===(o=e.module)||void 0===o||null===(l=o.options)||void 0===l||null===(i=l.message)||void 0===i?void 0:i.length)>0);f.h.dispatch((0,_.Wy)([])),ki()}}})}))}),[Gn,jn]),(0,r.useEffect)((function(){var e,n;if((null===Pn||void 0===Pn||null===(e=Pn.processModule)||void 0===e||null===(n=e.steps)||void 0===n?void 0:n.length)>0){var o,l,i={id:""},t=[],d=[];if(F.Z((function(e){e.component_fields.map((function(n){var o,l;e.procedure_id!==(null===Re||void 0===Re?void 0:Re.id)&&(null!==(o=i=$n.find((function(n){return n.id===e.procedure_id})))&&void 0!==o&&o.steps&&(t=z.Z(q.Z("component_blueprints"),B.Z)(null===(l=i)||void 0===l?void 0:l.steps),d=z.Z(q.Z("selected_fields"),B.Z)(t)));var a,u=d.find((function(e){return e.procedure_step_blueprint_field_id===n.procedure_step_blueprint_field_id}));u&&(n.data_type_name=u.data_type_name,n.data_type=u.data_type,n.field_name=u.field_name,n.options=u.options,n.component_blueprint_id=null===(a=t.find((function(e){return e.selected_fields.filter((function(e){return e.procedure_step_blueprint_field_id===n.procedure_step_blueprint_field_id})).length>0})))||void 0===a?void 0:a.id)}))}),On.filter((function(e){return e.component_fields.filter((function(e){return void 0===(null===e||void 0===e?void 0:e.field_name)})).length>0}))),void 0!==(null===In||void 0===In?void 0:In.key))bl(Ti(null===Pn||void 0===Pn||null===(o=Pn.processModule)||void 0===o||null===(l=o.module)||void 0===l?void 0:l.id,On,In.value,In.key));else bl(On.filter((function(e){var n,o;return e.module_id===(null===Pn||void 0===Pn||null===(n=Pn.processModule)||void 0===n||null===(o=n.module)||void 0===o?void 0:o.id)})))}}),[In,Pn,On]);var Zi=(0,r.useCallback)((function(){var e=!1;return fi.component_blueprints.filter((function(e){var n,o;return null===e.options||(!1===(null===(n=e.options)||void 0===n?void 0:n.allowMultipleInputs)||void 0===(null===(o=e.options)||void 0===o?void 0:o.allowMultipleInputs))})).some((function(e){var n;return!0===(null===(n=e.selected_fields)||void 0===n?void 0:n.filter((function(e){return"Profile"!==e.data_type_name&&"ID"!==e.data_type_name&&"Info"!==e.data_type_name&&"Notes"!==e.data_type_name&&"URL"!==e.data_type_name&&"Emails"!==e.data_type_name&&"Template"!==e.data_type_name&&"Global"!==e.data_type_name&&"Chart"!==e.data_type_name})).some((function(e){var n;return!0===e.mandatory&&!0===e.visible&&(!e.value||(null===e||void 0===e||null===(n=e.value)||void 0===n?void 0:n.length)<1)})))}))&&(e=!0),!0===e?(yo(!0),!0):(Eo(""),yo(!1),!1)}),[fi]),wi=function(e){var n;Mo(!0),Zi()&&!1===(null===Pn||void 0===Pn||null===(n=Pn.processModule)||void 0===n?void 0:n.isUpdating)?Ni():Si(e)},Mi=function(e){Ei.components=[],Ei.items=[],Ei.currentStep={},Ei.newStepComponents=[],Pn.processModule.steps.filter((function(e){return e.component_blueprints.filter((function(e){return e.selected_fields.filter((function(e){return e.value=void 0}))}))})),f.h.dispatch((0,_.q4)((0,a.Z)((0,a.Z)({},Pn.processModule),{},{isUpdating:!1}))),Po(!1),Mo(!0),Si(e),Ln.start=!1,(0,w.aK)().pipe((0,v.P)()).subscribe({next:function(){}})},Si=function(e){Mo(!1),yo(!1),mo(!1);var n={};if(void 0===e){if(void 0===(n=Pn.processModule.steps[Pn.processModule.stepIndex+1]))return void f.h.dispatch((0,_.Xc)({show:!0,message:"Misconfigured next step, please contact your administrator",color:"red",bottom:!0}));Ci({action:m._U.setCurrentStep,value:n}),f.h.dispatch((0,_.q4)((0,a.Z)((0,a.Z)({},Pn.processModule),{},{stepIndex:Pn.processModule.stepIndex+1})))}else{if(void 0==(n=An.steps.find((function(n){return n.id===e}))))n=An.steps[Pn.processModule.stepIndex+1],f.h.dispatch((0,_.q4)((0,a.Z)((0,a.Z)({},Pn.processModule),{},{stepIndex:Pn.processModule.stepIndex+1})));else{var o,l,i=An.steps[(null===(o=n)||void 0===o?void 0:o.rank)-1];if(void 0===i)return void f.h.dispatch((0,_.Xc)({show:!0,message:"Misconfigured next step, please contact your administrator",color:"red",bottom:!0}));f.h.dispatch((0,_.q4)((0,a.Z)((0,a.Z)({},Pn.processModule),{},{stepIndex:(null===(l=n)||void 0===l?void 0:l.rank)-1})))}Ci({action:m._U.setCurrentStep,value:n})}var t=Ei.newStepComponents.filter((function(e){return null===e.options||(void 0===e.allowMultipleInputs||!1===e.options.allowMultipleInputs)}));Ci({action:m._U.setComponents,value:[].concat((0,d.Z)(Ei.components.filter((function(e){return t.every((function(n){return n.id!==e.id}))}))),(0,d.Z)(W.Z((function(e){return e.selected_fields.filter((function(e){return""===e.value})).length>0}),t)))}),Ci({action:m._U.setModuleNewStepComponents,value:n.component_blueprints.filter((function(e){return e.selected_fields.filter((function(e){return"Status"===e.data_type_name||"ID"===e.data_type_name||"Value"===e.data_type_name})).length>0}))})},ki=function(){var e,n,o,l;Ci({action:m._U.setModuleItems,value:[]}),Ci({action:m._U.setComponents,value:[]}),Ci({action:m._U.addModuleComponents,value:[]}),Ci({action:m._U.setModuleNewStepComponents,value:[]}),f.h.dispatch((0,_.q4)((0,a.Z)((0,a.Z)({},null!==(e=null===Pn||void 0===Pn?void 0:Pn.processModule)&&void 0!==e?e:{}),{},{isUpdating:!1})));var i=(null===An||void 0===An||null===(n=An.steps)||void 0===n?void 0:n.length)>0&&!((null===An||void 0===An||null===(o=An.steps[0])||void 0===o||null===(l=o.component_blueprints)||void 0===l?void 0:l.filter((function(e){var n;return 1==(null===(n=e.options)||void 0===n?void 0:n.asModuleList)})).length)>0);Mi(Kn||i?Pn.processModule.steps[0].id:Pn.processModule.steps[1].id)},Ii=function(){var e,n,o,l,i,t,u,r,s,c,p,m,h,y;if(Zi())return Eo("Fill up all the required fields"),window.scrollTo({top:0,behavior:"smooth"}),void mo(!1);var b,x=Ei.newStepComponents.filter((function(e){var n,o;return null===e.options||(!1===(null===(n=e.options)||void 0===n?void 0:n.allowMultipleInputs)||void 0===(null===(o=e.options)||void 0===o?void 0:o.allowMultipleInputs))})),E=[].concat((0,d.Z)(Ei.components.filter((function(e){return x.every((function(n){return n.id!==e.id}))}))),(0,d.Z)(W.Z((function(e){return e.selected_fields.filter((function(e){return""===e.value})).length>0}),x))),C=[],Z=[],w="",M="",S=!1,k="None",I={x:0},P=null===Vn||void 0===Vn?void 0:Vn.status,N={},T=null!==Pn&&void 0!==Pn&&null!==(e=Pn.processModule)&&void 0!==e&&e.isUpdating?(null!==(n=Y.Z(Math.max,q.Z("group",j.Z(H.Z("group"))(null!==(o=null===Vn||void 0===Vn?void 0:Vn.component_fields)&&void 0!==o?o:[]))))&&void 0!==n?n:-1)+1:0;E.map((function(e,n){var o,l,i,t,u,r,s=n,v=null===(o=e.selected_fields.filter((function(e){return"Record"===e.data_type_name||"Filters"===e.data_type_name})))||void 0===o?void 0:o.find((function(e){return+(null===e||void 0===e?void 0:e.group)>=0}));v&&null!==Pn&&void 0!==Pn&&null!==(l=Pn.processModule)&&void 0!==l&&l.isUpdating?s=v.group:null!==Pn&&void 0!==Pn&&null!==(i=Pn.processModule)&&void 0!==i&&i.isUpdating&&(s=T,T++),e.selected_fields.filter((function(e){return"Record"===e.data_type_name||"Filters"===e.data_type_name})).map((function(e,n){var o;if(null!==e.value&&void 0!==e.value&&1!=(null===(o=e.options)||void 0===o?void 0:o.skip)){var l,i;Z=[].concat((0,d.Z)(Z),[(0,a.Z)((0,a.Z)({},e),{},{index:n,group:s})]),w=e.value,N[e.field_name]=e.value;var t=null===(l=On.find((function(n){return n.component_fields.filter((function(n){var o;return n.component_blueprint_id===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.component_id)&&(null===n||void 0===n?void 0:n.value)===w})).length>0})))||void 0===l||null===(i=l.component_fields.find((function(e){return"Email Recipient"===e.data_type_name})))||void 0===i?void 0:i.value;t&&(b=t)}}));var c=null===(t=e.selected_fields.filter((function(e){return!("Record"===e.data_type_name||"Filters"===e.data_type_name)})))||void 0===t?void 0:t.find((function(e){return+(null===e||void 0===e?void 0:e.group)>=0}));c&&null!==Pn&&void 0!==Pn&&null!==(u=Pn.processModule)&&void 0!==u&&u.isUpdating?s=c.group:null!==Pn&&void 0!==Pn&&null!==(r=Pn.processModule)&&void 0!==r&&r.isUpdating&&(s=T,T++),e.selected_fields.filter((function(e){return!("Record"===e.data_type_name||"Filters"===e.data_type_name)})).map((function(e,n){var o,l,i;if(null!==e.value&&void 0!==e.value&&1!=(null===(o=e.options)||void 0===o?void 0:o.skip)){if(N[e.field_name]=e.value,"ID"===(null===e||void 0===e?void 0:e.data_type_name))null!==Pn&&void 0!==Pn&&null!==(l=Pn.processModule)&&void 0!==l&&l.isUpdating?Z=[].concat((0,d.Z)(Z),[(0,a.Z)((0,a.Z)({},e),{},{index:n,group:s})]):(Z=[].concat((0,d.Z)(Z),[(0,a.Z)((0,a.Z)({},e),{},{index:n,group:s,value:"".concat(null===e||void 0===e?void 0:e.options.id).concat(null===(null===Ln||void 0===Ln?void 0:Ln.misc_info)?1:null!==(i=null===Ln||void 0===Ln?void 0:Ln.misc_info[null===e||void 0===e?void 0:e.field_name])&&void 0!==i?i:1)})]),C=[].concat((0,d.Z)(C),["".concat(e.field_name)]));else if("Value"===(null===e||void 0===e?void 0:e.data_type_name)){var t;Z=[].concat((0,d.Z)(Z),[(0,a.Z)((0,a.Z)({},e),{},{index:n,value:null===e||void 0===e||null===(t=e.options)||void 0===t?void 0:t.value,group:s})])}else if("Email Recipient"===(null===e||void 0===e?void 0:e.data_type_name))Z=[].concat((0,d.Z)(Z),[(0,a.Z)((0,a.Z)({},e),{},{index:n,value:e.value.replace(/ /g,""),group:s})]);else if("Product Lookup"===e.data_type_name)Z=(0,d.Z)(Z);else if("Status"===e.data_type_name&&"Draft"===e.value&&1==Do)S=!0,Z=[].concat((0,d.Z)(Z),[(0,a.Z)((0,a.Z)({},e),{},{index:n,value:"New",group:s})]),k="New";else if("Status"===e.data_type_name)Z=[].concat((0,d.Z)(Z),[(0,a.Z)((0,a.Z)({},e),{},{index:n,value:null===e||void 0===e?void 0:e.value,group:s})]),k=null===e||void 0===e?void 0:e.value;else if("Pin"===e.data_type_name)Z=[].concat((0,d.Z)(Z),[(0,a.Z)((0,a.Z)({},e),{},{index:n,value:null===e||void 0===e?void 0:e.value,group:s})]);else if("Formula"===e.data_type_name){var u,r=null!==Pn&&void 0!==Pn&&null!==(u=Pn.processModule)&&void 0!==u&&u.isUpdating?(0,U.LV)(null===e||void 0===e?void 0:e.options,Vn.component_fields.filter((function(n){var o;return null===(o=e.options)||void 0===o?void 0:o.list.includes(n.field_name)})),E,Ei.items):e.value;Z=[].concat((0,d.Z)(Z),[(0,a.Z)((0,a.Z)({},e),{},{index:n,value:r.toString(),group:s})])}else if("output"!==e.data_type){var v,c,p,m,f;if("People"===e.data_type_name)if(!0===(null===(f=e.options)||void 0===f?void 0:f.email)){var _,h,y=null===(_=Cl.find((function(n){return n.label===(null===e||void 0===e?void 0:e.value)})))||void 0===_||null===(h=_.user)||void 0===h?void 0:h.email;M=y?M.concat(M.length>0?",".concat(y):y):M,e.email=void 0}"email"===(null===e||void 0===e||null===(v=e.options)||void 0===v?void 0:v.actionToPerform2)&&null!==e&&void 0!==e&&null!==(c=e.options)&&void 0!==c&&null!==(p=c.valueToMatch2)&&void 0!==p&&null!==(m=p.split(","))&&void 0!==m&&m.includes(null===e||void 0===e?void 0:e.value)&&b&&(S=!0,M=M.concat(M.length>0?",".concat(b):b)),Z=[].concat((0,d.Z)(Z),[(0,a.Z)((0,a.Z)({},e),{},{index:n,group:s})])}}else if("Status"===(null===e||void 0===e?void 0:e.data_type_name))1==Do?(Z=[].concat((0,d.Z)(Z),[(0,a.Z)((0,a.Z)({},e),{},{index:n,value:"New",group:s})]),k="New"):(Z=[].concat((0,d.Z)(Z),[(0,a.Z)((0,a.Z)({},e),{},{index:n,value:"Draft",group:s})]),k="Draft"),N[e.field_name]=e.value;else if("Action Button"===(null===e||void 0===e?void 0:e.data_type_name)){var g,x,w;Z=(0,d.Z)(Z),N[e.field_name]=e.value,"status"===(null===e||void 0===e||null===(g=e.options)||void 0===g?void 0:g.action)?k=e.value:"user"!==(null===(x=e.options)||void 0===x?void 0:x.action)&&"creator"!==(null===(w=e.options)||void 0===w?void 0:w.action)||(Vn.assigned_to=null===e||void 0===e?void 0:e.value)}}))}));var D,A,L,O,R,z,B,F,J,G,V,Q,X,K,$,ee,ne,oe,le,ie,te,de,ae,ue,se,ve,ce,pe,me,fe,_e,he="";(null===(l=Pn.processModule)||void 0===l||null===(i=l.module)||void 0===i||null===(t=i.options)||void 0===t||null===(u=t.title)||void 0===u?void 0:u.length)>0?(null===(D=Pn.processModule)||void 0===D||null===(A=D.module)||void 0===A||null===(L=A.options)||void 0===L||null===(O=L.title)||void 0===O||O.map((function(e){if("Info"!==e){var n,o,l,i,t;he=""===he?"".concat(null!==(n=null===(o=Z.find((function(n){return n.field_name===e})))||void 0===o?void 0:o.value)&&void 0!==n?n:""):"".concat(null!==(l=he)&&void 0!==l?l:"","  ").concat(null!==(i=null===(t=Z.find((function(n){return n.field_name===e})))||void 0===t?void 0:t.value)&&void 0!==i?i:"")}else{var d,a=null===(d=Pn.processModule)||void 0===d?void 0:d.completeSteps.find((function(e){var n;return(null===(n=e.component_blueprints.filter((function(e){var n;return(null===(n=e.selected_fields.filter((function(e){return"Info"===e.data_type_name})))||void 0===n?void 0:n.length)>0})))||void 0===n?void 0:n.length)>0}));if(void 0!==a){var u,r,s,v,c,p,m,f,_,h=null===(u=a.component_blueprints)||void 0===u||null===(r=u.find((function(e){var n;return(null===(n=e.selected_fields.filter((function(e){return"Info"===e.data_type_name})))||void 0===n?void 0:n.length)>0})).selected_fields)||void 0===r?void 0:r.find((function(e){return"Info"===e.data_type_name})),y=On.find((function(e){var n;return(null===(n=e.component_fields.filter((function(e){return e.component_blueprint_id===h.options.component_id&&e.value===N[h.field_name]})))||void 0===n?void 0:n.length)>0}));if(y)if((null===h||void 0===h||null===(s=h.options)||void 0===s||null===(v=s.list)||void 0===v?void 0:v.length)>0)he=""===he?"".concat(null!==(c=null===(p=y.component_fields.find((function(e){var n;return e.field_name===(null===h||void 0===h||null===(n=h.options)||void 0===n?void 0:n.list[0])})))||void 0===p?void 0:p.value)&&void 0!==c?c:""):"".concat(null!==(m=he)&&void 0!==m?m:"","  ").concat(null!==(f=null===(_=y.component_fields.find((function(e){var n;return e.field_name===(null===h||void 0===h||null===(n=h.options)||void 0===n?void 0:n.list[0])})))||void 0===_?void 0:_.value)&&void 0!==f?f:"")}}})),null!==(R=Pn.processModule)&&void 0!==R&&null!==(z=R.module)&&void 0!==z&&null!==(B=z.options)&&void 0!==B&&B.title.find((function(e){return"UUID"===e}))&&(he="".concat(null!==Pn&&void 0!==Pn&&null!==(F=Pn.processModule)&&void 0!==F&&F.isUpdating?Vn.id:(0,U.mR)()))):he=null!==Pn&&void 0!==Pn&&null!==(J=Pn.processModule)&&void 0!==J&&J.isUpdating?Vn.id:(0,U.mR)();if(!0===(null===(r=Pn.processModule)||void 0===r||null===(s=r.module)||void 0===s||null===(c=s.options)||void 0===c?void 0:c.emailOutputs)){var ye,ge,be,xe,Ce,Ze=An.steps.find((function(e){var n;return(null===(n=e.component_blueprints.filter((function(e){var n;return(null===(n=e.selected_fields.filter((function(e){return"Info"===e.data_type_name&&1==e.options.email})))||void 0===n?void 0:n.length)>0})))||void 0===n?void 0:n.length)>0}));if(void 0!==Ze){var we,Me,Se=null===(we=Ze.component_blueprints)||void 0===we||null===(Me=we.find((function(e){var n;return(null===(n=e.selected_fields.filter((function(e){var n;return"Info"===e.data_type_name&&1==(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.email)})))||void 0===n?void 0:n.length)>0})).selected_fields)||void 0===Me?void 0:Me.find((function(e){var n;return"Info"===e.data_type_name&&!0===(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.email)})),ke=On.find((function(e){var n;return(null===(n=e.component_fields.filter((function(e){return e.component_blueprint_id===Se.options.component_id&&e.value===w})))||void 0===n?void 0:n.length)>0}));ke&&(V=Se.id,G=ke.id)}if(void 0!==(Ze=An.steps.find((function(e){var n;return!0===e.is_end&&(null===(n=e.component_blueprints.filter((function(e){var n;return(null===(n=e.selected_fields.filter((function(e){return"Emails"===e.data_type_name})))||void 0===n?void 0:n.length)>0})))||void 0===n?void 0:n.length)>0}))))(null===(be=Ze.component_blueprints)||void 0===be?void 0:be.find((function(e){var n;return(null===(n=e.selected_fields.filter((function(e){return"Emails"===e.data_type_name})))||void 0===n?void 0:n.length)>0}))).selected_fields.filter((function(e){return"Emails"===e.data_type_name})).filter((function(e){var n;Z.find((function(n){return n.value===e.options.valueToMatch&&n.field_name===e.options.fieldToMatch}))&&(b&&(Q=e,S=!0,!0===(null===(n=e.options)||void 0===n?void 0:n.copyEmailRecip)&&(M=M.concat(M.length>0?",".concat(b):b))))}));if(M=null!==(ye=M.split(","))&&void 0!==ye?ye:[],Sl.length>0||M.length>0)M=null!==Pn&&void 0!==Pn&&null!==(xe=Pn.processModule)&&void 0!==xe&&xe.isUpdating?!0===S?[].concat((0,d.Z)(Sl),(0,d.Z)(M)):(0,d.Z)(Sl):[].concat((0,d.Z)(Sl),(0,d.Z)(M));if(M.length>0&&(I={emailTo:M}),V&&G&&(I=(0,a.Z)((0,a.Z)({},I),{},{info:V,target:G})),(null===(ge=Q)||void 0===ge?void 0:ge.id.length)>0)I=(0,a.Z)((0,a.Z)({},I),{},{template:null===(Ce=Q)||void 0===Ce?void 0:Ce.id})}if(!0===(null===(p=Pn.processModule)||void 0===p||null===(m=p.module)||void 0===m||null===(h=m.options)||void 0===h?void 0:h.rewards)&&P!==k){var Ie,Pe,Ne,De,Ae,Ue,Le=Pn.processModule.steps.find((function(e){var n;return(null===(n=e.component_blueprints.filter((function(e){var n;return(null===(n=e.selected_fields.filter((function(e){return"Rewards"===e.data_type_name})))||void 0===n?void 0:n.length)>0})))||void 0===n?void 0:n.length)>0}));if(void 0!==Le)if((X=null===(Ie=Le.component_blueprints)||void 0===Ie||null===(Pe=Ie.find((function(e){var n;return(null===(n=e.selected_fields.filter((function(e){return"Rewards"===e.data_type_name})))||void 0===n?void 0:n.length)>0})).selected_fields)||void 0===Pe?void 0:Pe.find((function(e){return"Rewards"===e.data_type_name}))).options.status===k)lo.options.rewards=+(null!==(Ne=null===lo||void 0===lo||null===(De=lo.options)||void 0===De?void 0:De.rewards)&&void 0!==Ne?Ne:0)+ +(null===(Ae=X)||void 0===Ae||null===(Ue=Ae.options)||void 0===Ue?void 0:Ue.points)}(null===(y=Z)||void 0===y?void 0:y.length)>0?(uo(!0),null!==Pn&&void 0!==Pn&&null!==(K=Pn.processModule)&&void 0!==K&&K.isUpdating?(Vn.options=I,Vn.status=k,null!==Ei&&void 0!==Ei&&Ei.assigned_to&&(Vn.assigned_to={id:null===Ei||void 0===Ei?void 0:Ei.assigned_to}),(0,g.KL)((0,a.Z)((0,a.Z)({},Vn),{},{selected_fields:(0,d.Z)(Z),component_items:Ei.items}),Vn.id,null===Vn||void 0===Vn||null===($=Vn.shared_users)||void 0===$?void 0:$.map((function(e){return null===e||void 0===e?void 0:e.id})),he,Do,(null===(ee=Pn.processModule)||void 0===ee||null===(ne=ee.module)||void 0===ne||null===(oe=ne.options)||void 0===oe||null===(le=oe.shares)||void 0===le?void 0:le.length)>0?null===(ie=Pn.processModule)||void 0===ie||null===(te=ie.module)||void 0===te||null===(de=te.options)||void 0===de?void 0:de.shares:null===Vn||void 0===Vn||null===(ae=Vn.shared_positions)||void 0===ae?void 0:ae.map((function(e){return null===e||void 0===e?void 0:e.id}))).subscribe({next:function(e){var n,o,l,i,t,d,u,r;if(null!==(n=Pn.processModule)&&void 0!==n&&null!==(o=n.module)&&void 0!==o&&null!==(l=o.options)&&void 0!==l&&l.single)return localStorage.setItem(null===(d=Pn.processModule)||void 0===d?void 0:d.module.id,JSON.stringify(null===e||void 0===e?void 0:e.data)),void Si(null===(u=Pn.processModule)||void 0===u||null===(r=u.steps[0])||void 0===r?void 0:r.id);var s=Z.find((function(e){var n;return"People"===e.data_type_name&&!0===(null===(n=e.options)||void 0===n?void 0:n.calendar)}));if(s){var c,p,m=JSON.parse(null!==(c=null===s||void 0===s?void 0:s.value)&&void 0!==c?c:{task:0}),f=no.find((function(e){return e.id===(null===m||void 0===m?void 0:m.task)}));if(f)(0,Te.xJ)((0,a.Z)((0,a.Z)({},f),{},{assignee_id:null===e||void 0===e||null===(p=e.data.created_by)||void 0===p?void 0:p.id}),null===f||void 0===f?void 0:f.id).pipe((0,v.P)()).subscribe({})}var _,h=Z.find((function(e){return"Payments"===e.data_type_name})),y=Z.find((function(e){var n;return e.field_name===(null===h||void 0===h||null===(n=h.options)||void 0===n?void 0:n.paymentField)}));if(!h||null!==e&&void 0!==e&&null!==(i=e.data.payments)&&void 0!==i&&i.stripe_id||"Cash"===(null===h||void 0===h?void 0:h.value)||"Wallet"===(null===h||void 0===h?void 0:h.value)||"Points"===(null===h||void 0===h?void 0:h.value)||lo.id!==(null===Vn||void 0===Vn||null===(t=Vn.created_by)||void 0===t?void 0:t.id))if(h){var g,b;if(y&&"Cash"!==(null===h||void 0===h?void 0:h.value)&&k===(null===(g=Ln.misc_info)||void 0===g?void 0:g.lock)&&lo.id===(null===Vn||void 0===Vn||null===(b=Vn.assigned_to)||void 0===b?void 0:b.id)&&P!==k){var x,E,C=+(null===y||void 0===y?void 0:y.value)-+(null===y||void 0===y?void 0:y.value)*+(null!==(x=null===Ln||void 0===Ln||null===(E=Ln.misc_info)||void 0===E?void 0:E.rate)&&void 0!==x?x:.2);(0,re.e_)({user_id:lo.id,id:(0,U.mR)(),total:C,product:"CR-".concat(he),notes:"Wallet",quantity:1}).pipe((0,v.P)()).subscribe({next:function(){var e;lo.wallet=+(+(null!==(e=null===Nn||void 0===Nn?void 0:Nn.wallet)&&void 0!==e?e:0)+C),uo(!1),ki(),Li(),window.scrollTo({top:0,behavior:"smooth"})}})}else X?(0,Ee.Vy)(lo,null===lo||void 0===lo?void 0:lo.options).pipe((0,v.P)()).subscribe({next:function(){ki(),Li(),window.scrollTo({top:0,behavior:"smooth"})}}):(ki(),Li(),window.scrollTo({top:0,behavior:"smooth"})),uo(!1)}else uo(!1),ki(),Li(),window.scrollTo({top:0,behavior:"smooth"});else Ei.total=+(null===y||void 0===y?void 0:y.value),Ei.plan=+(null===y||void 0===y?void 0:y.value),Ei.id=null===e||void 0===e||null===(_=e.data)||void 0===_?void 0:_.title,uo(!1),Ll(!0)}})):(0,g.LM)({id:E[0].id,selected_fields:(0,d.Z)(Z),component_items:Ei.items,options:I,status:k,assigned_to:null!==(ue=null===Ei||void 0===Ei?void 0:Ei.assigned_to)&&void 0!==ue?ue:""},"",Pn.processModule.module_id,Oo,he,Do,(null===(se=Pn.processModule)||void 0===se||null===(ve=se.module)||void 0===ve||null===(ce=ve.options)||void 0===ce||null===(pe=ce.shares)||void 0===pe?void 0:pe.length)>0?null===(me=Pn.processModule)||void 0===me||null===(fe=me.module)||void 0===fe||null===(_e=fe.options)||void 0===_e?void 0:_e.shares:Bo).subscribe({next:function(e){var n,o,l,i,t,d,u;if(null!==(n=Pn.processModule)&&void 0!==n&&null!==(o=n.module)&&void 0!==o&&null!==(l=o.options)&&void 0!==l&&l.single)return localStorage.setItem(null===(t=Pn.processModule)||void 0===t?void 0:t.module.id,JSON.stringify(e)),void Si(null===(d=Pn.processModule)||void 0===d||null===(u=d.steps[0])||void 0===u?void 0:u.id);(null===(i=C)||void 0===i?void 0:i.length)>0&&Pi(C);var r=Z.find((function(e){var n;return"People"===e.data_type_name&&!0===(null===(n=e.options)||void 0===n?void 0:n.calendar)}));if(r){var s,c,p,m=JSON.parse(null!==(s=null===r||void 0===r?void 0:r.value)&&void 0!==s?s:{task:0}),h=no.find((function(e){return e.id===(null===m||void 0===m?void 0:m.task)}));if(h)(0,Te.xJ)((0,a.Z)((0,a.Z)({},h),{},{assignee_id:null!==(c=null===e||void 0===e||null===(p=e.created_by)||void 0===p?void 0:p.id)&&void 0!==c?c:lo.id}),null===h||void 0===h?void 0:h.id).pipe((0,v.P)()).subscribe({})}if(Pn.processModule.selectedComponent=e,Z.filter((function(e){return!("Cash"===(null===e||void 0===e?void 0:e.value)||"Wallet"===(null===e||void 0===e?void 0:e.value)||"Points"===(null===e||void 0===e?void 0:e.value))&&"Payments"===e.data_type_name})).length>0)uo(!1),Ll(!0);else if(Z.filter((function(e){return("Wallet"===(null===e||void 0===e?void 0:e.value)||"Points"===(null===e||void 0===e?void 0:e.value))&&"Payments"===e.data_type_name})).length>0){var y,b,x=Z.find((function(e){return"Payments"===e.data_type_name}));(0,re.e_)({user_id:lo.id,id:null!==(y=null===e||void 0===e?void 0:e.id)&&void 0!==y?y:(0,U.mR)(),total:-Ei.total,product:"DB-".concat(he),notes:null!==(b=null===x||void 0===x?void 0:x.value)&&void 0!==b?b:"Wallet",quantity:1}).pipe((0,v.P)()).subscribe({next:function(){var n,o;(0,Ee.Vy)(lo,(0,a.Z)((0,a.Z)({},null===lo||void 0===lo?void 0:lo.options),{},{points:+(+(null!==(n=null===Nn||void 0===Nn||null===(o=Nn.options)||void 0===o?void 0:o.points)&&void 0!==n?n:0)-("Points"===(null===x||void 0===x?void 0:x.value)?+Ei.total:0))})).pipe((0,v.P)()).subscribe({next:function(n){var o,l,i,t,d,a,u,r,s,c;(uo(!1),lo.options=n.options,null!==Pn&&void 0!==Pn&&null!==(o=Pn.processModule)&&void 0!==o&&null!==(l=o.steps)&&void 0!==l&&l.find((function(e){return e.component_blueprints.filter((function(e){return e.selected_fields.filter((function(e){return"Action Button"===e.data_type_name&&("user"===e.options.action||"creator"===e.options.action)})).length>0})).length>0})))?(_l((null===Pn||void 0===Pn||null===(i=Pn.processModule)||void 0===i||null===(t=i.module)||void 0===t||null===(d=t.options)||void 0===d||null===(a=d.message)||void 0===a?void 0:a.length)>0&&1==e.is_complete),Kl(setInterval((function(){(0,g.r6)(e.id).pipe((0,v.P)()).subscribe({next:function(e){var n;null!==e&&void 0!==e&&null!==(n=e.component_fields)&&void 0!==n&&n.find((function(e){return"Action Button"===e.data_type_name&&(null===e||void 0===e?void 0:e.value)}))&&(Qn(e),window.clearInterval(Xl))},error:function(){window.clearInterval(Xl)}})}),15e3))):cl((null===Pn||void 0===Pn||null===(u=Pn.processModule)||void 0===u||null===(r=u.module)||void 0===r||null===(s=r.options)||void 0===s||null===(c=s.message)||void 0===c?void 0:c.length)>0&&1==e.is_complete);f.h.dispatch((0,_.RV)({})),Li(),ki()}})}})}else{var E,w,M,S,k,I,P,N,T,D;if(uo(!1),null!==Pn&&void 0!==Pn&&null!==(E=Pn.processModule)&&void 0!==E&&null!==(w=E.steps)&&void 0!==w&&w.find((function(e){return e.component_blueprints.filter((function(e){return e.selected_fields.filter((function(e){return"Action Button"===e.data_type_name&&("user"===e.options.action||"creator"===e.options.action)})).length>0})).length>0})))_l((null===Pn||void 0===Pn||null===(M=Pn.processModule)||void 0===M||null===(S=M.module)||void 0===S||null===(k=S.options)||void 0===k||null===(I=k.message)||void 0===I?void 0:I.length)>0&&1==e.is_complete),Kl(setInterval((function(){(0,g.r6)(e.id).pipe((0,v.P)()).subscribe({next:function(e){var n;null!==e&&void 0!==e&&null!==(n=e.component_fields)&&void 0!==n&&n.find((function(e){return"Action Button"===e.data_type_name&&(null===e||void 0===e?void 0:e.value)}))&&(Qn(e),window.clearInterval(Xl))},error:function(){window.clearInterval(Xl)}})}),15e3));else cl((null===Pn||void 0===Pn||null===(P=Pn.processModule)||void 0===P||null===(N=P.module)||void 0===N||null===(T=N.options)||void 0===T||null===(D=T.message)||void 0===D?void 0:D.length)>0&&1==e.is_complete);f.h.dispatch((0,_.RV)({})),Li(),ki()}},error:function(e){var n,o,l,i;null!==e&&void 0!==e&&e.data&&(null!==C&&Pi(C),cl((null===Pn||void 0===Pn||null===(n=Pn.processModule)||void 0===n||null===(o=n.module)||void 0===o||null===(l=o.options)||void 0===l||null===(i=l.message)||void 0===i?void 0:i.length)>0&&1==(null===e||void 0===e?void 0:e.data.is_complete)),f.h.dispatch((0,_.RV)({})),ki())}})):(f.h.dispatch((0,_.Xc)({show:!0,message:"There are no items to be saved",color:"red"})),window.scrollTo({top:0,behavior:"smooth"}))},Pi=function(e){if((null===e||void 0===e?void 0:e.length)>0){var n,o=null!==(n=Ln.misc_info)&&void 0!==n?n:{};e.filter((function(e){var n;o[e]=+(null!==(n=o[e])&&void 0!==n?n:1)+1})),uo(!0),(0,w.x5)({misc_info:o}).pipe((0,v.P)()).subscribe({})}},Ni=function(){Eo("Fill up all the required fields"),window.scrollTo({top:0,behavior:"smooth"}),mo(!1)},Ti=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o=arguments.length>2?arguments[2]:void 0,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],t=n.filter((function(n){return n.module_id===e})).filter((function(e){var n;return i.length>0?i.includes(e.id):""===o?e:e.title.includes(o)||(null===(n=e.component_fields.filter((function(e){var n,i,t,d,a;return"Record"===e.data_type_name?null===(n=On.find((function(n){var o;return(null===(o=n.component_fields.filter((function(n){return n.field_name===e.options.output&&n.component_blueprint_id===e.options.component_id&&n.value===(null===e||void 0===e?void 0:e.value)})))||void 0===o?void 0:o.length)>0})))||void 0===n?void 0:n.component_fields.find((function(n){var o;return null===(o=e.options)||void 0===o?void 0:o.names.includes(n.field_name)})).value.includes(o):void 0!==l?("date"===e.data_type?null===(i=ae()(new Date(null===e||void 0===e?void 0:e.value)))||void 0===i?void 0:i.format("DD MMM YYYY").includes(o):null===e||void 0===e||null===(t=e.value)||void 0===t?void 0:t.includes(o))&&e.field_name===l:"date"===e.data_type?null===(d=ae()(new Date(null===e||void 0===e?void 0:e.value)))||void 0===d?void 0:d.format("DD MMM YYYY").includes(o):null===e||void 0===e||null===(a=e.value)||void 0===a?void 0:a.includes(o)})))||void 0===n?void 0:n.length)>0}));return t},Di=function(e){var n,o,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:gl,i=J.Z([G.Z(V.Z("created_date"))])(l.filter((function(e){return e.created_by.id===(null===lo||void 0===lo?void 0:lo.id)?e:"Expired"!==e.status}))).map((function(n){var o,l,i,d,u,r,s,v,c,p,m={};e.list.map((function(e){var o=n.component_fields.find((function(n){return n.field_name===e}));if(void 0!=o)if("People"===o.data_type_name)m=(0,a.Z)((0,a.Z)({},m),{},(0,t.Z)({},e,o.value));else if("Date"===o.data_type_name){var l,i=new Date(null===o||void 0===o||null===(l=o.value)||void 0===l?void 0:l.split(",")[0]);m=(0,a.Z)((0,a.Z)({},m),{},(0,t.Z)({},e,ae()(i).format("DD MMM YYYY")))}else if("Record"===o.data_type_name||"Component"===o.data_type_name){var d;m=(0,a.Z)((0,a.Z)({},m),{},(0,t.Z)({},e,y.tq?"".concat(null===o||void 0===o?void 0:o.value.slice(0,40)):"".concat(null===o||void 0===o?void 0:o.value))),null===(d=On.find((function(e){var n;return(null===(n=e.component_fields.filter((function(e){return e.field_name===o.options.output&&e.component_blueprint_id===o.options.component_id&&e.value===(null===o||void 0===o?void 0:o.value)})))||void 0===n?void 0:n.length)>0})))||void 0===d||d.component_fields.filter((function(e){m=(0,a.Z)((0,a.Z)({},m),{},(0,t.Z)({},e.field_name,y.tq?e.value.slice(0,40):e.value))}))}else if("Filters"===o.data_type_name){var u;m=(0,a.Z)((0,a.Z)({},m),{},(0,t.Z)({},e,y.tq?"".concat(null===o||void 0===o?void 0:o.value.slice(0,30)):"".concat(null===o||void 0===o?void 0:o.value))),null===(u=On.find((function(e){var n;return(null===(n=e.component_fields.filter((function(e){return e.field_name===o.options.output&&e.component_blueprint_id===o.options.component_id&&e.value===(null===o||void 0===o?void 0:o.value)})))||void 0===n?void 0:n.length)>0})))||void 0===u||u.component_fields.filter((function(e){m=(0,a.Z)((0,a.Z)({},m),{},(0,t.Z)({},e.field_name,y.tq?e.value.slice(0,40):e.value))}))}else if("Status"===o.data_type_name){var r,s,v,c,p,f;if(0==n.is_complete)m=(0,a.Z)((0,a.Z)({},m),{},(0,t.Z)({},e,"Draft"));else if(!((null===(r=Pn.processModule.module)||void 0===r||null===(s=r.options)||void 0===s?void 0:s.activeFor)>0&&ae()((0,de.now)()).diff(ae()(n.created_date),"minutes")>+(null===(v=Pn.processModule.module)||void 0===v||null===(c=v.options)||void 0===c?void 0:c.activeFor))||"New"!==n.status&&"Unassigned"!==n.status||null!==(p=n.assigned_to)&&void 0!==p&&p.id)m=(0,a.Z)((0,a.Z)({},m),{},(0,t.Z)({},e,"".concat(null!==(f=null===n||void 0===n?void 0:n.status)&&void 0!==f?f:null===o||void 0===o?void 0:o.value)));else m=(0,a.Z)((0,a.Z)({},m),{},(0,t.Z)({},e,"Expired"))}else{var _,h;m=(0,a.Z)((0,a.Z)({},m),{},(0,t.Z)({},e,y.tq?null===o||void 0===o||null===(_=o.value)||void 0===_?void 0:_.slice(0,40).split(",")[0]:null===o||void 0===o||null===(h=o.value)||void 0===h?void 0:h.split(",")[0]))}})),(null===n||void 0===n||null===(o=n.component_items)||void 0===o?void 0:o.length)>0&&(m=(0,a.Z)((0,a.Z)({},m),{},(0,t.Z)({},"Total Qty",n.component_items.reduce((function(e,n){return e+ +n.quantity}),0)))),(null===n||void 0===n||null===(l=n.shared_positions)||void 0===l?void 0:l.length)>0&&(m=(0,a.Z)((0,a.Z)({},m),{},{Shares:null===n||void 0===n?void 0:n.shared_positions.map((function(e){var n;return null===(n=Fn.find((function(n){return n.value===e.id})))||void 0===n?void 0:n.label})).toString()}));var f=new Date(n.created_date);return m=(0,a.Z)((0,a.Z)({},m),{},(c={id:n.id},(0,t.Z)(c,"Created By","".concat(null===n||void 0===n||null===(i=n.created_by)||void 0===i?void 0:i.first_name," ").concat(null===n||void 0===n||null===(d=n.created_by)||void 0===d?void 0:d.last_name)),(0,t.Z)(c,"Created Date",ae()(f).format("DD MMM YYYY")),(0,t.Z)(c,"Assigned To","".concat(null!==(u=null===n||void 0===n||null===(r=n.assigned_to)||void 0===r?void 0:r.first_name)&&void 0!==u?u:""," ").concat(null!==(s=null===n||void 0===n||null===(v=n.assigned_to)||void 0===v?void 0:v.last_name)&&void 0!==s?s:"")),(0,t.Z)(c,"Title",n.title),(0,t.Z)(c,"items",n.component_items),(0,t.Z)(c,"Status",n.status),(0,t.Z)(c,Pn.processModule.module.name,n.title),c)),null===e||void 0===e||null===(p=e.reports)||void 0===p||p.filter((function(e){return"Formula"===e.data_type_name})).map((function(e){var o=(0,U.LV)(e.options,e.options.list.map((function(e){var n;return{value:null!==(n=m[e])&&void 0!==n?n:0}})),On.filter((function(e){var n,o;return e.module_id===(null===Pn||void 0===Pn||null===(n=Pn.processModule)||void 0===n||null===(o=n.module)||void 0===o?void 0:o.id)})),null===n||void 0===n?void 0:n.component_items);m=(0,a.Z)((0,a.Z)({},m),{},(0,t.Z)({},e.field_name,"".concat(o)))})),m}));null===e||void 0===e||null===(n=e.reports)||void 0===n||n.filter((function(e){return"List Filter"===e.data_type_name})).map((function(e){i=i.filter((function(n){var o,l;return n[null===(o=e.options)||void 0===o?void 0:o.field]===(null===(l=e.options)||void 0===l?void 0:l.value)}))}));var u=null===e||void 0===e||null===(o=e.reports)||void 0===o?void 0:o.find((function(e){return"Transaction List"===e.data_type_name}));if(u){var r=[];i.map((function(e){e.items.filter((function(n){var o=(0,a.Z)({},e);Object.keys(u.options.map).map((function(e){o[u.options.map[e]]=n[e]})),r=[].concat((0,d.Z)(r),[o])})),delete e.items})),i=r}return i},Ai=null===Vn||void 0===Vn||null===(M=Vn.component_fields)||void 0===M||null===(k=M.find((function(e){return"Status"===e.data_type_name})))||void 0===k?void 0:k.value,Ui=(null===Pn||void 0===Pn||null===(N=Pn.processModule)||void 0===N||null===(T=N.steps)||void 0===T?void 0:T.length)>0?null===Pn||void 0===Pn||null===(D=Pn.processModule)||void 0===D||null===(A=D.steps)||void 0===A||null===(R=A.find((function(e){return(null===e||void 0===e?void 0:e.component_blueprints.filter((function(e){return e.selected_fields.filter((function(e){return"Action Button"===e.data_type_name})).length>0})).length)>0})))||void 0===R||null===(K=R.component_blueprints.find((function(e){var n;return(null===(n=e.selected_fields.filter((function(e){return"Action Button"===e.data_type_name})))||void 0===n?void 0:n.length)>0})))||void 0===K||null===($=K.options)||void 0===$?void 0:$.showOnly:[],Li=function(){var e,n,o,l;Qn({}),Ci({action:m._U.setModuleItems,value:Vn.component_items}),Ci({action:m._U.setModuleNewStepComponents,value:[]}),Ci({action:m._U.setComponents,value:[]}),(null===Pn||void 0===Pn||null===(e=Pn.processModule)||void 0===e||null===(n=e.steps)||void 0===n?void 0:n.length)>0&&(null===Pn||void 0===Pn||null===(o=Pn.processModule)||void 0===o||null===(l=o.steps)||void 0===l||l.filter((function(e){var n;return null===e||void 0===e||null===(n=e.component_blueprints)||void 0===n?void 0:n.filter((function(e){return e.selected_fields.filter((function(e){return e.value=void 0}))}))}))),f.h.dispatch((0,_.q4)((0,a.Z)((0,a.Z)({},Pn.processModule),{},{selectedComponent:{id:""},stepIndex:Kn||zi?0:1,isUpdating:!1})))},Oi=!!Array.isArray(null===Pn||void 0===Pn||null===(ee=Pn.processModule)||void 0===ee?void 0:ee.steps)&&(null===Pn||void 0===Pn||null===(ne=Pn.processModule)||void 0===ne||null===(oe=ne.steps)||void 0===oe||null===(le=oe.find((function(e){var n;return(null===e||void 0===e||null===(n=e.component_blueprints)||void 0===n?void 0:n.filter((function(e){return e.selected_fields.filter((function(e){return"Ratings"===e.data_type_name})).length>0})).length)>0})))||void 0===le||null===(ie=le.component_blueprints)||void 0===ie||null===(te=ie.find((function(e){var n;return(null===(n=e.selected_fields.filter((function(e){return"Ratings"===e.data_type_name})))||void 0===n?void 0:n.length)>0})))||void 0===te||null===(ce=te.selected_fields)||void 0===ce?void 0:ce.find((function(e){return"Ratings"===e.data_type_name}))),Ri=null===qn||void 0===qn?void 0:qn.find((function(e){var n,o,l,i;return e.id===(null===Pn||void 0===Pn||null===(n=Pn.processModule)||void 0===n||null===(o=n.selectedComponent)||void 0===o||null===(l=o.component_fields)||void 0===l||null===(i=l.find((function(e){var n;return e.field_name===(null===Oi||void 0===Oi||null===(n=Oi.options)||void 0===n?void 0:n.field)})))||void 0===i?void 0:i.value)})),zi=(null===An||void 0===An||null===(pe=An.steps)||void 0===pe?void 0:pe.length)>0&&!((null===An||void 0===An||null===(fe=An.steps[0])||void 0===fe||null===(_e=fe.component_blueprints)||void 0===_e?void 0:_e.filter((function(e){var n;return 1==(null===(n=e.options)||void 0===n?void 0:n.asModuleList)})).length)>0),qi=function(){var e,n,o,l,i,t;return r.createElement("div",{ref:gi,className:me.menuAccordionButtons},(0==zi&&Pn.processModule.stepIndex>1||1==zi&&Pn.processModule.stepIndex>0||(null===Vn||void 0===Vn?void 0:Vn.title))&&r.createElement(h.zx,{title:"Cancel",light:!0,style:{width:"100%",display:null!==(e=Pn.processModule.module.options)&&void 0!==e&&e.single?"none":""},clicked:function(){Ei.components.length>0||Ei.newStepComponents.length>0?ri(!0):(Pn.processModule.back_array=[],Si(zi?An.steps[0].id:An.steps[1].id),Tl(!1),Li(),zn())}}),(0==zi&&Pn.processModule.stepIndex>1||1==zi&&Pn.processModule.stepIndex>0)&&r.createElement(h.zx,{title:"Back",light:!0,style:{width:"100%"},clicked:function(){var e,n,o;if(1==Pn.processModule.stepIndex&&bl(On.filter((function(e){var n,o;return e.module_id===(null===Pn||void 0===Pn||null===(n=Pn.processModule)||void 0===n||null===(o=n.module)||void 0===o?void 0:o.id)}))),1==(null===fi||void 0===fi||null===(e=fi.options)||void 0===e?void 0:e.deleteOnBack)&&fi.component_blueprints.filter((function(e){return e.selected_fields.filter((function(e){return"output"!==e.data_type})).map((function(e){e.value=void 0}))})),(null===Pn||void 0===Pn||null===(n=Pn.processModule)||void 0===n||null===(o=n.back_array)||void 0===o?void 0:o.length)>0){var l,i=null===Pn||void 0===Pn||null===(l=Pn.processModule)||void 0===l?void 0:l.back_array.pop();i&&Si(i)}else{var t;Si(null===(t=Pn.processModule.steps[Pn.processModule.stepIndex-1])||void 0===t?void 0:t.id)}}}),!0===(null===fi||void 0===fi?void 0:fi.is_end)?r.createElement(h.zx,{disabled:!1===(null===Ln||void 0===Ln?void 0:Ln.start),title:1==(null===Pn||void 0===Pn||null===(n=Pn.processModule)||void 0===n?void 0:n.isUpdating)?"Update":Do&&null!==(o=null===Pn||void 0===Pn||null===(l=Pn.processModule)||void 0===l||null===(i=l.module)||void 0===i||null===(t=i.options)||void 0===t?void 0:t.save)&&void 0!==o?o:"Save",loading:ao,style:{width:"100%",display:Ei.components.length>0||Ei.newStepComponents.length>0?"":"none"},clicked:function(){var e,n,o,l,i,t;return Nl?Eo("Saving is not allowed in Edit Mode"):1==(null===Pn||void 0===Pn||null===(e=Pn.processModule)||void 0===e||null===(n=e.module)||void 0===n||null===(o=n.options)||void 0===o?void 0:o.emailOutputs)&&1==(null===Pn||void 0===Pn||null===(l=Pn.processModule)||void 0===l||null===(i=l.module)||void 0===i||null===(t=i.options)||void 0===t?void 0:t.selectiveEmail)&&Do?el(!0):Ii()}}):r.createElement(h.zx,{disabled:!1===(null===Ln||void 0===Ln?void 0:Ln.start),title:"Next",style:{width:"100%"},clicked:function(){var e,n,o,l,i,t,d,a,u;Array.isArray(null===Pn||void 0===Pn||null===(e=Pn.processModule)||void 0===e?void 0:e.back_array)||(Pn.processModule.back_array=[]),null===Pn||void 0===Pn||null===(n=Pn.processModule)||void 0===n||n.back_array.push(null===Ei||void 0===Ei||null===(o=Ei.currentStep)||void 0===o?void 0:o.id);var r,s,v,c,p,m=null===(l=fi.component_blueprints.find((function(e){return e.selected_fields.filter((function(e){var n,o;return"Dropdown"===e.data_type_name&&(null===(n=e.options)||void 0===n?void 0:n.jump1)&&"decision"===(null===(o=e.options)||void 0===o?void 0:o.type)})).length>0})))||void 0===l||null===(i=l.selected_fields)||void 0===i?void 0:i.find((function(e){var n;return"Dropdown"===e.data_type_name&&(null===(n=e.options)||void 0===n?void 0:n.jump1)})),h=null===(t=fi.component_blueprints.find((function(e){return e.selected_fields.filter((function(e){var n;return"Value Button"===e.data_type_name&&(null===(n=e.options)||void 0===n?void 0:n.jump1)})).length>0})))||void 0===t||null===(d=t.selected_fields)||void 0===d?void 0:d.filter((function(e){var n;return"Value Button"===e.data_type_name&&(null===(n=e.options)||void 0===n?void 0:n.jump1)}));if(null!==m&&void 0!==m&&null!==(a=m.options)&&void 0!==a&&a.jump1&&null!==m&&void 0!==m&&null!==(u=m.options)&&void 0!==u&&u.jump2)if(0==(null===m||void 0===m||null===(r=m.options)||void 0===r?void 0:r.list.indexOf(null===m||void 0===m?void 0:m.value)))wi(null===(v=$n.find((function(e){var n;return e.id===(null===m||void 0===m||null===(n=m.options)||void 0===n?void 0:n.process)})))||void 0===v||null===(c=v.steps)||void 0===c||null===(p=c.find((function(e){return e.id===(null===m||void 0===m?void 0:m.options.jump1)})))||void 0===p?void 0:p.id);else if(1==(null===m||void 0===m||null===(s=m.options)||void 0===s?void 0:s.list.indexOf(null===m||void 0===m?void 0:m.value))){var y,g,b;wi(null===(y=$n.find((function(e){var n;return e.id===(null===m||void 0===m||null===(n=m.options)||void 0===n?void 0:n.process)})))||void 0===y||null===(g=y.steps)||void 0===g||null===(b=g.find((function(e){return e.id===(null===m||void 0===m?void 0:m.options.jump2)})))||void 0===b?void 0:b.id)}else{var x,E;null===Pn||void 0===Pn||null===(x=Pn.processModule)||void 0===x||null===(E=x.back_array)||void 0===E||E.pop(),f.h.dispatch((0,_.Xc)({show:!0,message:"Please select a value for ".concat(null===m||void 0===m?void 0:m.field_name),color:"red",bottom:!1})),window.scrollTo({top:0,behavior:"smooth"})}else if((null===h||void 0===h?void 0:h.length)>0){var C,Z,w,M,S,k=h.filter((function(e){return void 0!==e.value}));if(1==k.length)wi(null===(C=$n.find((function(e){var n,o;return e.id===(null===(n=k[0])||void 0===n||null===(o=n.options)||void 0===o?void 0:o.process)})))||void 0===C||null===(Z=C.steps)||void 0===Z||null===(w=Z.find((function(e){var n;return e.id===(null===(n=k[0])||void 0===n?void 0:n.options.jump1)})))||void 0===w?void 0:w.id);else null===Pn||void 0===Pn||null===(M=Pn.processModule)||void 0===M||null===(S=M.back_array)||void 0===S||S.pop(),f.h.dispatch((0,_.Xc)({show:!0,message:"A selection is required",color:"red",bottom:!1})),window.scrollTo({top:0,behavior:"smooth"})}else if((null===fi||void 0===fi?void 0:fi.next_steps.length)>1||_i.length>1||hi.length>1)mo(!po);else if(1===fi.next_steps.length){var I;wi(null===fi||void 0===fi||null===(I=fi.next_steps[0])||void 0===I?void 0:I.id)}else{var P;wi(null===(P=An.steps[An.steps.findIndex((function(e){return e.id===fi.id}))+1])||void 0===P?void 0:P.id)}}}),po&&r.createElement("div",{className:me.goToNextStep},null===fi||void 0===fi?void 0:fi.next_steps.map((function(e,n){return r.createElement("div",{key:n,onClick:function(){return wi(e.id)},className:me.nextStepsContainer},r.createElement("div",{className:me.nextStepImageContainer},r.createElement(ve.G,{icon:se.d63})),r.createElement("p",null,null===e||void 0===e?void 0:e.name))})),null===_i||void 0===_i?void 0:_i.map((function(e,n){return r.createElement("div",{key:n,onClick:function(){return wi(e.id)},className:me.nextStepsContainer},r.createElement("div",{className:me.nextStepImageContainer},r.createElement(ve.G,{icon:se.t3U})),r.createElement("p",null,null===e||void 0===e?void 0:e.name))})),null===hi||void 0===hi?void 0:hi.map((function(e,n){return r.createElement("div",{key:n,onClick:function(){return function(e){f.h.dispatch((0,_.pU)(e)),mo(!1)}(e)},className:me.nextStepsContainer},r.createElement("div",{className:me.nextStepImageContainer},r.createElement(ve.G,{icon:se.t3U})),r.createElement("p",null,null===e||void 0===e?void 0:e.name))}))))};return r.createElement(p.LN,null,r.createElement(E.sM,null,r.createElement("div",{className:me.processStepHost,style:{backgroundColor:y.tq?"":!0===(null===fi||void 0===fi||null===(he=fi.options)||void 0===he?void 0:he.popup)?"var(--app-color-white-lightest)":""}},r.createElement("div",{className:me.leftCardMargin,"app-variant-is-mobile":y.tq?"true":"false"},r.createElement("div",{style:{display:"flex",justifyContent:"space-evenly",width:"100%"}},r.createElement("p",{className:me.stepTitle},null===fi||void 0===fi?void 0:fi.name),(0==Pn.processModule.stepIndex||1==Pn.processModule.stepIndex)&&r.createElement(h.zx,{light:!0,clicked:function(){uo(!0);var e=Un.find((function(e){return e.id===Pn.processModule.module_id}));eo.componentsByModule[e.name]=0,(0,O.vC)(e,U.Qc,1e3,1).pipe((0,c.q)(1)).subscribe({next:function(n){var o,l=null!==n&&void 0!==n&&n.data?null===n||void 0===n?void 0:n.data:n;f.h.dispatch((0,_.mK)(Q.Z(V.Z("created_date"),[].concat((0,d.Z)(On.filter((function(e){return e.module_id!==Pn.processModule.module_id}))),(0,d.Z)(l))),U.KI)),uo(!1),e.lastUpdate=(0,de.now)(),e.count=null!==(o=null===n||void 0===n?void 0:n.total)&&void 0!==o?o:0},complete:function(){},error:function(){return uo(!1)}})},icon:r.createElement("img",{src:C.Fdh}),loading:ao})),!Kn&&(null===fi||void 0===fi||null===(ye=fi.guidance)||void 0===ye?void 0:ye.length)>0&&r.createElement("label",{className:me.stepGuidanceSmaller},null===fi||void 0===fi?void 0:fi.guidance),xo&&(ho||Nl)&&r.createElement(I.Z,{message:xo,onClick:function(){return Eo("")}}),1===so&&void 0===(null===fi||void 0===fi?void 0:fi.component_blueprints)?r.createElement("div",{className:me.centeredSpinner}):(null===fi||void 0===fi||null===(ge=fi.component_blueprints)||void 0===ge?void 0:ge.filter((function(e){var n;return 1==(null===(n=e.options)||void 0===n?void 0:n.asModuleList)})).length)>0?null===fi||void 0===fi||null===(be=fi.component_blueprints)||void 0===be?void 0:be.filter((function(e){var n,o,l;return 1==e.options.asModuleList&&(lo.positions.filter((function(n){var o,l;return null===(o=e.options)||void 0===o||null===(l=o.showOnly)||void 0===l?void 0:l.includes(n.id)})).length>0||0==(null===(n=e.options)||void 0===n||null===(o=n.showOnly)||void 0===o?void 0:o.length)||void 0===(null===(l=e.options)||void 0===l?void 0:l.showOnly))})).map((function(e,n){var o,l,i;return r.createElement("div",{key:n,style:{width:"100%",padding:"0 10px 0 10px"}},r.createElement(S.default,{card:!0,className:me.listContainer,isReport:!1,"app-variant-is-mobile":"true",columns:(0,d.Z)(new Set((null!==(o=null===(l=e.selected_fields.find((function(e){return 1==e.visible&&"Info"===e.data_type_name})))||void 0===l||null===(i=l.options)||void 0===i?void 0:i.list)&&void 0!==o?o:[]).concat(J.Z([X.Z(V.Z("index"))])(e.selected_fields.filter((function(e){return 1==e.visible&&"Info"!==e.data_type_name}))).map((function(e){return e.field_name}))))).splice(0,3),list:Di({list:e.selected_fields.filter((function(e){return 1==e.visible||"Info"===e.data_type_name})).map((function(e){var n,o;return"Info"===e.data_type_name&&null!==(n=null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.key)&&void 0!==n?n:e.field_name}))}),onListItemClick:function(e){(null===e||void 0===e?void 0:e.id)===(null===ni||void 0===ni?void 0:ni.id)?oi(!1):oi(e)}},ni&&r.createElement("div",{style:{backgroundColor:"white"}},r.createElement(We,{ref:yi,begunModule:Pn,allModules:Un,companyData:Ln,components:On,selectedComponent:gl.find((function(e){return e.id===(null===ni||void 0===ni?void 0:ni.id)})),setSelectedComponent:Qn,companyUsersArray:qn,print:jo,step:C.Nbs,companyPositionsArray:Fn,user:Nn,goto:!1}))))})):1===so&&void 0===fi.component_blueprints?r.createElement(r.Fragment,null,"No components in step"):r.createElement("div",{className:me.processModuleContainer,"app-variant-is-mobile":y.tq?"true":"false"},r.createElement(h.U7,{blured:!1,scrollable:!1,isOpen:!y.tq&&(null!==(xe=null===fi||void 0===fi||null===(Ce=fi.options)||void 0===Ce?void 0:Ce.popup)&&void 0!==xe&&xe),shadowedContainerStyle:{width:"100%",minWidth:"50%"}},r.createElement(Fe,{nextButtonClicked:wo,step:fi,setIsMandatoryError:yo,isMandatoryError:ho,begunModule:Pn,companyData:Ln,blueprints:Wn,components:On,products:Bn,authenticatedUser:lo,isEditing:Jn,companyUsersArray:qn,usersArray:Cl,setUsers:Ro,setPositions:Fo,setIsCompleted:Ao,selectedComponent:Vn,goToNextStep:Si,companyPositionsArray:Fn,cart:Tn,allModules:Un,editMode:Nl},r.createElement("div",{className:me.menuRightButtons}),qi())),(!0!==(null===fi||void 0===fi||null===(Ze=fi.options)||void 0===Ze?void 0:Ze.popup)||y.tq)&&r.createElement(Fe,{nextButtonClicked:wo,step:fi,setIsMandatoryError:yo,isMandatoryError:ho,begunModule:Pn,companyData:Ln,blueprints:Wn,components:On,products:Bn,authenticatedUser:lo,isEditing:Jn,companyUsersArray:qn,usersArray:Cl,setUsers:Ro,setPositions:Fo,setIsCompleted:Ao,selectedComponent:Vn,goToNextStep:Si,companyPositionsArray:Fn,cart:Tn,allModules:Un,editMode:Nl,isProcessorOnly:Kn},qi())),ui&&r.createElement(Oe.Z,{openModal:ui,setOpenModal:ri,dialogHandler:function(){Pn.processModule.back_array=[],Si(zi?An.steps[0].id:An.steps[1].id),Tl(!1),Li(),zn()},title:"There are unsaved items, are you sure you want to cancel?",proceedTitle:"Yes",cancelTitle:"No, return back",loading:ao}),Vo&&r.createElement(h.U7,{isOpen:g.v7,onClose:function(){},backdropColor:!0,blured:!0,scrollable:!0,shadowedContainerStyle:{width:"100%"}},r.createElement("div",null,r.createElement("p",{className:me.deleteText},"Are you sure you want to delete ".concat(Vn.title,"?")),r.createElement("div",{style:{display:"flex",justifyContent:"center"}},r.createElement(h.zx,{title:"Delete",clicked:function(){ul(!0),(0,g.v7)(Vn.id).pipe((0,v.P)()).subscribe({next:function(){ul(!1),Po(!1),Qo(!1)},complete:function(){},error:function(){ul(!1),Qo(!1)}})},loading:al}),r.createElement(h.zx,{title:"No",light:!0,clicked:function(){return Qo(!1)}})))),ll&&r.createElement(h.U7,{isOpen:ll,onClose:function(){},backdropColor:!0,blured:!1,scrollable:!0,shadowedContainerStyle:{width:"100%"}},r.createElement("div",null,r.createElement("p",{className:me.deleteText},"Cannot delete ".concat(Vn.title,". Some transactions and master data are using this item")),r.createElement("div",{style:{display:"flex",justifyContent:"center"}},r.createElement(h.zx,{title:"Close",light:!0,clicked:function(){return il(!1)}}))))),ci&&r.createElement(Oe.Z,{openModal:ci,setOpenModal:pi,dialogHandler:function(){Ll(!1),pi(!1),f.h.dispatch((0,_.q4)((0,a.Z)((0,a.Z)({},Pn.processModule),{},{stepIndex:0,isUpdating:!1})))},title:"No payments made. Do you want to pay later?",proceedTitle:"Yes",cancelTitle:"No, return back"}),Ul&&r.createElement(h.U7,{hasCloseIcon:!0,isOpen:Ul,onClose:function(){return pi(!0)},backdropColor:!0,blured:!1,scrollable:!0,shadowedContainerStyle:{width:"100%"}},r.createElement(ue.default,{label:" ",withBack:!1,paymentPath:"begin-mobile",onClose:function(){return Ll(!1)},companyData:Ln,subscriptionInfo:{user_id:lo.id,ref:Ei.id,plan_price:null!==(we=null===Ei||void 0===Ei?void 0:Ei.plan)&&void 0!==we?we:0,currency:null!==(Me=null===Ei||void 0===Ei?void 0:Ei.currency)&&void 0!==Me?Me:"PHP",plan:"CC-".concat(Ei.id),total:null!==(Se=+(null===Ei||void 0===Ei?void 0:Ei.total))&&void 0!==Se?Se:0,billable_users:[lo],duration:0,dlabel:Ei.id,id:null===Pn||void 0===Pn||null===(ke=Pn.processModule)||void 0===ke||null===(Ie=ke.selectedComponent)||void 0===Ie?void 0:Ie.id},onError:function(e){ti(!0),Eo(e),yo(!0),Ll(!1),f.h.dispatch((0,_.q4)((0,a.Z)((0,a.Z)({},Pn.processModule),{},{stepIndex:0,isUpdating:!1})))}})),$o&&r.createElement(h.U7,{isOpen:$o,onClose:function(){return el(!1)},backdropColor:!0,blured:!0,scrollable:!0,shadowedContainerStyle:{width:"100%"}},r.createElement("div",null,r.createElement(h.jL,{ungrouped:!0,title:"nonmanager"===lo.user_type?"Type an email address to send copy of this transaction (optional)":"Select users to email this transaction (Optional)",columned:!0,withAckButton:!1},"nonmanager"===lo.user_type?r.createElement("input",{placeholder:"Use comma, no space, for multiple email addresses",className:me.emailInput,onChange:function(e){new RegExp(/^([a-z0-9!#$%&'*+/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*)(([, ]+[a-z0-9!#$%&'*+/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])\.([a-z0-9]([a-z0-9-]*[a-z0-9]))*)?)*$/).test(e.target.value)&&kl(e.target.value.split(","))}}):r.createElement(L.Cm,{id:"Users",tagEmplacement:"inlined",searchable:!1,items:Cl.filter((function(e){var n;return e.department===(null===(n=lo.departments[0])||void 0===n?void 0:n.name)})),groupedBy:"department",groupname:"department",triggerType:"chevron",initialSelectedValues:[],className:me.peoplePositionsSelect,inputClassName:me.peoplePositionsSelectInput,molclassname:me.peoplePositionsSelectMenuOverlay,moliclassname:me.peoplePositionsSelectMenuOverlayItem,onChange:function(e){e.length>0?kl(null===e||void 0===e?void 0:e.map((function(e){return null===e||void 0===e?void 0:e.user.email}))):kl([])}})),r.createElement("div",{style:{display:"flex",justifyContent:"center"}},r.createElement(h.zx,{title:"Back",light:!0,clicked:function(){return el(!1)}}),r.createElement(h.zx,{disabled:!1===(null===Ln||void 0===Ln?void 0:Ln.start),title:null!==Pn&&void 0!==Pn&&null!==(Ne=Pn.processModule)&&void 0!==Ne&&Ne.isUpdating?"Update":Do&&null!==(De=null===Pn||void 0===Pn||null===(Ae=Pn.processModule)||void 0===Ae||null===(Ue=Ae.module)||void 0===Ue||null===(Le=Ue.options)||void 0===Le?void 0:Le.save)&&void 0!==De?De:"Save",loading:ao,style:{width:"160px",marginLeft:"0px"},clicked:function(){el(!1),Ii()}})))),r.createElement(h.U7,{hasCloseIcon:!0,blured:!0,scrollable:!0,isOpen:(Io||!0===(null===Pn||void 0===Pn||null===(ze=Pn.processModule)||void 0===ze?void 0:ze.showDetail))&&void 0!==(null===Vn||void 0===Vn?void 0:Vn.title),shadowedContainerStyle:{padding:"0 20px 20px 20px",width:"100%"},sshadowedContainerClassname:me.popup,onClose:function(){Po(!1),Ho(!1),f.h.dispatch((0,_.q4)((0,a.Z)((0,a.Z)({},Pn.processModule),{},{showDetail:!1}))),Kn?Li():(bl(On.filter((function(e){var n,o;return e.module_id===(null===Pn||void 0===Pn||null===(n=Pn.processModule)||void 0===n||null===(o=n.module)||void 0===o?void 0:o.id)}))),Si(zi?An.steps[0].id:An.steps[1].id),Tl(!1),Li(),zn())}},r.createElement(We,{ref:yi,begunModule:Pn,allModules:Un,companyData:Ln,components:On,selectedComponent:Vn,setSelectedComponent:Qn,companyUsersArray:qn,print:jo,step:C.Nbs,companyPositionsArray:Fn,user:Nn,goto:!0}),r.createElement("div",{className:me.emulatedFlexGap,style:{width:"100%"}},(null===Vn||void 0===Vn||null===(qe=Vn.component_fields)||void 0===qe?void 0:qe.length)>0&&r.createElement(r.Fragment,null,(0,U.cQ)(Ai,Ui,Vn,lo,Pn,Ln)&&(null===Pn||void 0===Pn||null===(Be=Pn.processModule)||void 0===Be||null===(Ye=Be.steps)||void 0===Ye||null===(je=Ye.find((function(e){return e.component_blueprints.filter((function(e){return e.selected_fields.filter((function(e){return"Action Button"===e.data_type_name})).length>0})).length>0})))||void 0===je||null===(He=je.component_blueprints.find((function(e){return e.selected_fields.filter((function(e){return"Action Button"===e.data_type_name})).length>0})))||void 0===He?void 0:He.selected_fields.filter((function(e){return"Action Button"===e.data_type_name})).map((function(e,n){var o,l,i,t;if("status"===e.options.action){var d,u,s,c,p,m,y,b,x,E=(null===Ln||void 0===Ln||null===(d=Ln.misc_info)||void 0===d||null===(u=d.status)||void 0===u?void 0:u.length)>0?null===Ln||void 0===Ln||null===(s=Ln.misc_info)||void 0===s?void 0:s.status:[{label:"Ongoing",value:"Ongoing"},{label:"Pending",value:"Pending"},{label:"Awaiting Payment",value:"Awaiting Payment"},{label:"Awaiting Fulfillment",value:"Awaiting Fulfillment"},{label:"Awaiting Shipment",value:"Awaiting Shipment"},{label:"Awaiting Pickup",value:"Awaiting Pickup"},{label:"Partially Shipped",value:"Partially Shipped"},{label:"Completed",value:"Completed"},{label:"Shipped",value:"Shipped"},{label:"Cancelled",value:"Cancelled"},{label:"Declined",value:"Declined"},{label:"Refunded",value:"Refunded"},{label:"Disputed",value:"Disputed"},{label:"Done",value:"Done"},{label:"Closed (Will lock Edit)",value:"Closed"}];if((null===Ln||void 0===Ln||null===(c=Ln.misc_info)||void 0===c||null===(p=c.rules)||void 0===p?void 0:p.length)>0)null===Ln||void 0===Ln||null===(x=Ln.misc_info)||void 0===x||x.rules.filter((function(e){return"status"===e.type})).filter((function(n){n.valueCondition===e.value&&(E="0"===n.allow?E.filter((function(e){return n.values.includes(e.value)})):E.filter((function(e){return!n.values.includes(e.value)})))}));return r.createElement("div",{key:n,style:{width:"100%",display:"user"===e.options.action&&null!==(m=Vn.component_fields)&&void 0!==m&&null!==(y=m.find((function(n){return n.procedure_step_blueprint_field_id===e.procedure_step_blueprint_field_id})))&&void 0!==y&&y.value?"none":""}},r.createElement(P.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-light)"},className:me.multiselectComponent,key:n,visible:e.visible,mandatory:e.mandatory,value:null!==(b=e.value)&&void 0!==b?b:"",items:E,error:e.errors,onChange:function(n){var o,l,i,t;if(null!==(o=Pn.processModule)&&void 0!==o&&null!==(l=o.module)&&void 0!==l&&null!==(i=l.options)&&void 0!==i&&i.credits&&(n===(null===(t=Ln.options)||void 0===t?void 0:t.lock)||"Closed"===n)){var d,u,r,s,c,p,m,h,y,b,x=null===Pn||void 0===Pn||null===(d=Pn.processModule)||void 0===d||null===(u=d.steps)||void 0===u||null===(r=u.find((function(e){return e.component_blueprints.filter((function(e){return e.selected_fields.filter((function(e){return"Payments"===e.data_type_name})).length>0})).length>0})))||void 0===r||null===(s=r.component_blueprints.find((function(e){return e.selected_fields.filter((function(e){return"Payments"===e.data_type_name})).length>0})))||void 0===s?void 0:s.selected_fields.find((function(e){return"Payments"===e.data_type_name})),E=null===(c=Ei.newStepComponents.concat(Ei.components).find((function(e){return e.selected_fields.filter((function(e){var n;return e.field_name===(null===x||void 0===x||null===(n=x.options)||void 0===n?void 0:n.paymentField)})).length>0})))||void 0===c||null===(p=c.selected_fields)||void 0===p?void 0:p.find((function(e){var n;return e.field_name===(null===x||void 0===x||null===(n=x.options)||void 0===n?void 0:n.paymentField)})),C=0;if(null===(m=Pn.processModule)||void 0===m||null===(h=m.selectedComponent.payments)||void 0===h||!h.stripe_id)return Po(!1),Pn.processModule.showDetail=!1,void f.h.dispatch((0,_.Xc)({show:!0,message:"Check support payment docs",color:"red",spinner:!1,bottom:!0}));if(!(+(null!==(y=null===E||void 0===E?void 0:E.value)&&void 0!==y?y:0)>0))return void f.h.dispatch((0,_.Xc)({show:!0,message:"No amount found",color:"red",spinner:!1,bottom:!0}));C=+(null!==(b=null===E||void 0===E?void 0:E.value)&&void 0!==b?b:0),"Cash"!==(null===x||void 0===x?void 0:x.value)&&(0,re.e_)({user_id:lo.id,id:(0,U.mR)(),total:C,product:"CR-".concat(null===Vn||void 0===Vn?void 0:Vn.title),notes:"Wallet",quantity:1}).pipe((0,v.P)()).subscribe({next:function(){var e;Nn.wallet=+(+(null!==(e=null===Nn||void 0===Nn?void 0:Nn.wallet)&&void 0!==e?e:0)+C)}})}Ln.start=!0,uo(!0),(0,g.C0)({component_id:Vn.id,index:0,group:99,value:n,procedure_step_blueprint_field_id:e.procedure_step_blueprint_field_id}).subscribe({next:function(e){(0,g.zK)(null===Vn||void 0===Vn?void 0:Vn.id,n).subscribe({next:function(e){uo(!1),Po(!1),f.h.dispatch((0,_.q4)((0,a.Z)((0,a.Z)({},Pn.processModule),{},{showDetail:!1})))}})},error:function(){},complete:function(){}})},fieldIcon:e.icon,fieldLabel:e.field_name,placeholder:"Select status..."}))}return r.createElement("div",{key:n,style:{width:"100%"}},r.createElement(h.zx,{light:!0,title:e.field_name,loading:ao,clicked:function(){if("user"===e.options.action||"creator"===e.options.action){var n,o,l,i,t,d,u,r,s;if(1==(null===(n=Pn.processModule)||void 0===n||null===(o=n.module)||void 0===o||null===(l=o.options)||void 0===l?void 0:l.activeFor)&&ae()((0,de.now)()).diff(ae()(Vn.created_date),"minutes")>+(null===(i=Pn.processModule)||void 0===i||null===(t=i.module)||void 0===t||null===(d=t.options)||void 0===d?void 0:d.activeFor))return void f.h.dispatch((0,_.Xc)({show:!0,message:"This transaction has already expired.",color:"red",spinner:!1,bottom:!0}));var c="user"===e.options.action?lo:qn.find((function(e){var n;return e.id===(null===(n=Vn.created_by)||void 0===n?void 0:n.id)}));if(null!==(u=Pn.processModule)&&void 0!==u&&null!==(r=u.module)&&void 0!==r&&null!==(s=r.options)&&void 0!==s&&s.credits){var p,m,h,y,b,x,E,C,Z,w,M=null===Pn||void 0===Pn||null===(p=Pn.processModule)||void 0===p||null===(m=p.steps)||void 0===m||null===(h=m.find((function(e){return e.component_blueprints.filter((function(e){return e.selected_fields.filter((function(e){return"Payments"===e.data_type_name})).length>0})).length>0})))||void 0===h||null===(y=h.component_blueprints.find((function(e){return e.selected_fields.filter((function(e){return"Payments"===e.data_type_name})).length>0})))||void 0===y?void 0:y.selected_fields.find((function(e){return"Payments"===e.data_type_name})),S=null===(b=Ei.newStepComponents.concat(Ei.components).find((function(e){return e.selected_fields.filter((function(e){var n;return e.field_name===(null===M||void 0===M||null===(n=M.options)||void 0===n?void 0:n.paymentField)})).length>0})))||void 0===b||null===(x=b.selected_fields)||void 0===x?void 0:x.find((function(e){var n;return e.field_name===(null===M||void 0===M||null===(n=M.options)||void 0===n?void 0:n.paymentField)})),k=0;if(void 0===(null===c||void 0===c?void 0:c.wallet)||0===(null===c||void 0===c?void 0:c.wallet))return f.h.dispatch((0,_.Xc)({show:!0,message:"You need to setup funds for your wallet",color:"red",spinner:!1,bottom:!0})),Pn.processModule.showDetail=!1,void Po(!1);if(+(null!==(E=null===S||void 0===S?void 0:S.value)&&void 0!==E?E:0)>0&&"Cash"===(null===M||void 0===M?void 0:M.value)){var I,P,N,T,D;if((null!==(I=+(null===c||void 0===c?void 0:c.wallet))&&void 0!==I?I:0)<+(null===S||void 0===S?void 0:S.value)+ +(null===S||void 0===S?void 0:S.value)*+(null!==(P=null===(N=Ln.misc_info)||void 0===N?void 0:N.rate)&&void 0!==P?P:.2))return f.h.dispatch((0,_.Xc)({show:!0,message:"Insufficient funds in wallet",color:"red",spinner:!1,bottom:!0})),Pn.processModule.showDetail=!1,void Po(!1);k=null!==S&&void 0!==S&&S.value?+(null===S||void 0===S?void 0:S.value)+ +(null===S||void 0===S?void 0:S.value)*+(null!==(T=null===(D=Ln.misc_info)||void 0===D?void 0:D.rate)&&void 0!==T?T:.2):0}else if(!("Wallet"===(null===M||void 0===M?void 0:M.value)||"Points"===(null===M||void 0===M?void 0:M.value)||null!==(C=Pn.processModule)&&void 0!==C&&null!==(Z=C.selectedComponent)&&void 0!==Z&&null!==(w=Z.payments)&&void 0!==w&&w.stripe_id))return Po(!1),Pn.processModule.showDetail=!1,void f.h.dispatch((0,_.Xc)({show:!0,message:"Check support payment docs",color:"red",spinner:!1,bottom:!0}));"Cash"===(null===M||void 0===M?void 0:M.value)&&(0,re.e_)({user_id:lo.id,id:(0,U.mR)(),total:-k,product:"DB-".concat(null===Vn||void 0===Vn?void 0:Vn.title),notes:"Wallet",quantity:1}).pipe((0,v.P)()).subscribe({next:function(){var e;return c.wallet=+(+(null!==(e=null===c||void 0===c?void 0:c.wallet)&&void 0!==e?e:0)-k)},error:function(){return f.h.dispatch((0,_.Xc)({show:!0,message:"Purchase error encountered",color:"red",spinner:!1,bottom:!0}))}})}uo(!0),(0,g.C0)({component_id:Vn.id,index:0,group:99,value:c.id,procedure_step_blueprint_field_id:e.procedure_step_blueprint_field_id}).subscribe({next:function(e){(0,g.dn)(Vn.id,c.id).subscribe({next:function(e){uo(!1),Po(!1),f.h.dispatch((0,_.q4)((0,a.Z)((0,a.Z)({},Pn.processModule),{},{showDetail:!1})))}})},error:function(){},complete:function(){}})}else"status"===e.options.action||"date"===e.options.action||e.options.action,uo(!1)},style:{backgroundColor:"green",color:"white",width:"100%",display:"user"===e.options.action&&null!==(o=Vn.component_fields)&&void 0!==o&&null!==(l=o.find((function(n){return n.procedure_step_blueprint_field_id===e.procedure_step_blueprint_field_id})))&&void 0!==l&&l.value?"none":""}}),r.createElement(h.zx,{title:"Decline",light:!0,loading:ao,clicked:function(){var e,n;uo(!0);var o=Vn.component_fields.find((function(e){var n;return"People"===e.data_type_name&&!0===(null===(n=e.options)||void 0===n?void 0:n.calendar)}));(0,g.KL)((0,a.Z)((0,a.Z)({},Vn),{},{selected_fields:o?Vn.component_fields.filter((function(e){return e.id!==o.id})):Vn.component_fields,assigned_to:{id:""},status:"Unassigned"}),Vn.id,null===(e=Vn.shared_users)||void 0===e?void 0:e.map((function(e){return null===e||void 0===e?void 0:e.id})),Vn.title,Vn.is_complete,null===(n=Vn.shared_positions)||void 0===n?void 0:n.map((function(e){return null===e||void 0===e?void 0:e.id}))).subscribe({error:function(e){f.h.dispatch((0,_.Xc)({show:!0,message:"Errors found",color:"red"}))},next:function(e){f.h.dispatch((0,_.aT)(Vn.id)),uo(!1),Po(!1),f.h.dispatch((0,_.q4)((0,a.Z)((0,a.Z)({},Pn.processModule),{},{showDetail:!1})))}})},style:{backgroundColor:"red",color:"white",width:"100%",display:"user"===e.options.action&&null!==(i=Vn.component_fields)&&void 0!==i&&null!==(t=i.find((function(n){return n.procedure_step_blueprint_field_id===e.procedure_step_blueprint_field_id})))&&void 0!==t&&t.value?"none":""}}))})))),!(null!==Pn&&void 0!==Pn&&null!==(Je=Pn.processModule)&&void 0!==Je&&Je.canEdit)&&("Closed"===(null===Pn||void 0===Pn||null===(Ge=Pn.processModule)||void 0===Ge?void 0:Ge.status)||(null===Pn||void 0===Pn||null===(Ve=Pn.processModule)||void 0===Ve?void 0:Ve.status)===(null===Ln||void 0===Ln||null===(Xe=Ln.misc_info)||void 0===Xe?void 0:Xe.lock))&&(null===Pn||void 0===Pn||null===(Ke=Pn.processModule.selectedComponent)||void 0===Ke||null===($e=Ke.created_by)||void 0===$e?void 0:$e.id)===lo.id&&(null===Pn||void 0===Pn||null===(en=Pn.processModule)||void 0===en||null===(nn=en.steps)||void 0===nn?void 0:nn.find((function(e){return e.component_blueprints.filter((function(e){return e.selected_fields.filter((function(e){return"Ratings"===e.data_type_name})).length>0}))})))&&!(null!==Pn&&void 0!==Pn&&null!==(on=Pn.processModule.selectedComponent)&&void 0!==on&&on.component_fields.find((function(e){return"Ratings"===e.data_type_name})))&&Ri&&r.createElement(h.zx,{clear:!0,title:"Rate",style:{backgroundColor:"orange",color:"white",width:"100%"},clicked:function(){ql(!0)}}),(null===(ln=Pn.processModule)||void 0===ln?void 0:ln.canEdit)&&r.createElement(h.zx,{title:Pn.processModule.canEdit?"Edit":"Close",style:{width:"100%"},clicked:function(){Po(!1),Ho(!1),f.h.dispatch((0,_.q4)((0,a.Z)((0,a.Z)({},Pn.processModule),{},{showDetail:!1}))),Pn.processModule.canEdit||(Kn?Li():(bl(On.filter((function(e){var n,o;return e.module_id===(null===Pn||void 0===Pn||null===(n=Pn.processModule)||void 0===n||null===(o=n.module)||void 0===o?void 0:o.id)}))),Si(zi?An.steps[0].id:An.steps[1].id),Tl(!1),Li(),zn())),window.scrollTo({top:Pn.processModule.canEdit?1e3:0,behavior:"smooth"})}}),(null===Pn||void 0===Pn||null===(tn=Pn.processModule)||void 0===tn||null===(dn=tn.module)||void 0===dn||null===(an=dn.options)||void 0===an?void 0:an.canCancel)&&("New"===Vn.status||"Unassigned"===Vn.status)&&!(null!==(un=Vn.assigned_to)&&void 0!==un&&un.id)&&r.createElement(h.zx,{loading:ao,title:"Cancel Transaction",style:{backgroundColor:"red",color:"white",width:"100%"},clear:!0,clicked:function(){uo(!0),(0,g.tE)(null===Vn||void 0===Vn?void 0:Vn.id,"Cancelled").pipe((0,v.P)()).subscribe({next:function(e){var n;if(uo(!1),null!==e&&void 0!==e&&null!==(n=e.data.payments)&&void 0!==n&&n.stripe_id){var o,l=Math.abs(+(null===e||void 0===e||null===(o=e.data.payments)||void 0===o?void 0:o.stripe_price));(0,re.e_)({user_id:lo.id,id:(0,U.mR)(),total:l,product:"RF-".concat(Vn.title),notes:"Wallet",quantity:1}).pipe((0,v.P)()).subscribe({next:function(){var e;lo.wallet=+(+(null!==(e=null===Nn||void 0===Nn?void 0:Nn.wallet)&&void 0!==e?e:0)+l),uo(!1),Po(!1),Ho(!1),f.h.dispatch((0,_.q4)((0,a.Z)((0,a.Z)({},Pn.processModule),{},{showDetail:!1}))),window.scrollTo({top:0,behavior:"smooth"})}})}else uo(!1),Po(!1),Ho(!1),f.h.dispatch((0,_.q4)((0,a.Z)((0,a.Z)({},Pn.processModule),{},{showDetail:!1}))),window.scrollTo({top:0,behavior:"smooth"})}})}}),(null===Pn||void 0===Pn||null===(rn=Pn.processModule)||void 0===rn||null===(sn=rn.module)||void 0===sn||null===(vn=sn.options)||void 0===vn?void 0:vn.canCancel)&&"Cancellation Request"===(null===Vn||void 0===Vn?void 0:Vn.status)&&(null===lo||void 0===lo?void 0:lo.id)===(null===Vn||void 0===Vn||null===(cn=Vn.created_by)||void 0===cn?void 0:cn.id)&&r.createElement(h.zx,{loading:ao,title:"Allow Cancellation",style:{backgroundColor:"red",color:"white",width:"100%"},clear:!0,clicked:function(){var e;if(uo(!0),null!==(e=Vn.payments)&&void 0!==e&&e.stripe_id){var n,o,l=Math.abs(null!==(n=+(null===Vn||void 0===Vn||null===(o=Vn.payments)||void 0===o?void 0:o.stripe_price))&&void 0!==n?n:0);(0,re.e_)({user_id:lo.id,id:(0,U.mR)(),total:l,product:"RF-".concat(Vn.title),notes:"Wallet",quantity:1}).pipe((0,v.P)()).subscribe({next:function(){var e;lo.wallet=+(+(null!==(e=null===Nn||void 0===Nn?void 0:Nn.wallet)&&void 0!==e?e:0)+l),(0,g.tE)(null===Vn||void 0===Vn?void 0:Vn.id,"Cancelled").pipe((0,v.P)()).subscribe({next:function(e){uo(!1),Po(!1),Ho(!1),f.h.dispatch((0,_.q4)((0,a.Z)((0,a.Z)({},Pn.processModule),{},{showDetail:!1}))),window.scrollTo({top:0,behavior:"smooth"})}})}})}else(0,g.tE)(null===Vn||void 0===Vn?void 0:Vn.id,"Refund").pipe((0,v.P)()).subscribe({next:function(e){uo(!1),Po(!1),Ho(!1),f.h.dispatch((0,_.q4)((0,a.Z)((0,a.Z)({},Pn.processModule),{},{showDetail:!1}))),window.scrollTo({top:0,behavior:"smooth"})}})}}),(null===Pn||void 0===Pn||null===(pn=Pn.processModule)||void 0===pn||null===(mn=pn.module)||void 0===mn||null===(fn=mn.options)||void 0===fn?void 0:fn.canCancel)&&"Refund"===Vn.status&&(null===lo||void 0===lo?void 0:lo.id)===(null===(_n=Vn.assigned_to)||void 0===_n?void 0:_n.id)&&r.createElement(h.zx,{loading:ao,title:"Refund",style:{backgroundColor:"red",color:"white",width:"100%"},clear:!0,clicked:function(){var e=Vn.component_fields.find((function(e){var n;return"Payments"===e.data_type_name&&"Refund"===Vn.status&&(null===(n=Vn.assigned_to)||void 0===n?void 0:n.id)===(null===lo||void 0===lo?void 0:lo.id)})),n=Vn.component_fields.find((function(n){var o;return n.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.paymentField)}));if(n){var o,l,i;uo(!0);var t=Math.abs(null!==(o=+(null===n||void 0===n?void 0:n.value))&&void 0!==o?o:0)+ +(null===n||void 0===n?void 0:n.value)*+(null!==(l=null===(i=Ln.misc_info)||void 0===i?void 0:i.rate)&&void 0!==l?l:.2);(0,re.e_)({user_id:lo.id,id:(0,U.mR)(),total:t,product:"RF-".concat(Vn.title),notes:"Wallet",quantity:1}).pipe((0,v.P)()).subscribe({next:function(){var e;lo.wallet=+(+(null!==(e=null===Nn||void 0===Nn?void 0:Nn.wallet)&&void 0!==e?e:0)+t),(0,g.tE)(null===Vn||void 0===Vn?void 0:Vn.id,"Cancelled").pipe((0,v.P)()).subscribe({next:function(e){uo(!1),Po(!1),Ho(!1),ki(),Li(),window.scrollTo({top:0,behavior:"smooth"})}})}})}else uo(!1),Po(!1),Ho(!1),f.h.dispatch((0,_.q4)((0,a.Z)((0,a.Z)({},Pn.processModule),{},{showDetail:!1}))),window.scrollTo({top:0,behavior:"smooth"})}}))),Wl&&r.createElement(h.U7,{hasCloseIcon:!0,blured:!0,scrollable:!0,isOpen:Wl,shadowedContainerStyle:{borderTopLeftRadius:"30px",borderTopRightRadius:"30px",padding:"20px",width:"100%"},sshadowedContainerClassname:me.popup,onClose:function(){Yl(!1)}},r.createElement(We,{ref:yi,begunModule:Pn,allModules:Un,companyData:Ln,components:On,setSelectedComponent:Qn,selectedComponent:Vn,companyUsersArray:qn,print:jo,step:C.Nbs,companyPositionsArray:Fn,user:Nn,goto:!0}),r.createElement("div",{className:me.emulatedFlexGap,style:{width:"100%"}},r.createElement(h.zx,{title:"Close",style:{width:"100%"},clicked:function(){Yl(!1)}}))),zl&&r.createElement(h.U7,{isOpen:zl,hasCloseIcon:!0,onClose:function(){return ql(!1)},backdropColor:!0,blured:!1,scrollable:!0,shadowedContainerStyle:{width:"100%",height:"auto"}},r.createElement("div",{className:me.ratingsDiv},r.createElement("h3",null,"Rate your experience"),r.createElement("h5",null,"Ratings and reviews of users are visible to everyone"),r.createElement(Pe.Z,{photo:null===Ri||void 0===Ri?void 0:Ri.photo,firstName:null===Ri||void 0===Ri?void 0:Ri.first_name,lastName:null===Ri||void 0===Ri?void 0:Ri.last_name,email:null===Ri||void 0===Ri?void 0:Ri.email,position:null===Ri||void 0===Ri?void 0:Ri.phone,cardClicked:function(){},width:"100%"}),r.createElement("div",{className:me.slider},r.createElement(h.zx,{clear:!0,clicked:function(){return Gl(1)}},r.createElement(ve.G,{icon:se.Tab,style:{color:Jl<1?"lightgray":"black",height:"30px",width:"30px"}})),r.createElement(h.zx,{clear:!0,clicked:function(){return Gl(2)}},r.createElement(ve.G,{icon:se.Tab,style:{color:Jl<2?"lightgray":"black",height:"30px",width:"30px"}})),r.createElement(h.zx,{clear:!0,clicked:function(){return Gl(3)}},r.createElement(ve.G,{icon:se.Tab,style:{color:Jl<3?"lightgray":"black",height:"30px",width:"30px"}})),r.createElement(h.zx,{clear:!0,clicked:function(){return Gl(4)}},r.createElement(ve.G,{icon:se.Tab,style:{color:Jl<4?"lightgray":"black",height:"30px",width:"30px"}})),r.createElement(h.zx,{clear:!0,clicked:function(){return Gl(5)}},r.createElement(ve.G,{icon:se.Tab,style:{color:Jl<5?"lightgray":"black",height:"30px",width:"30px"}}))),"Comments:",r.createElement("textarea",{type:"text",autoComplete:"none",className:me.ratingsInput,name:"Comments",id:"Comments",style:{padding:"0 10px 0 10px",fontSize:"16px",backgroundColor:"rgba(234, 231, 231, 0.91)",marginBottom:"30px"}}),r.createElement(h.zx,{title:"Rate",clicked:function(){var e,n,o,l,i=null===Pn||void 0===Pn||null===(e=Pn.processModule)||void 0===e||null===(n=e.steps)||void 0===n||null===(o=n.find((function(e){return e.component_blueprints.filter((function(e){return e.selected_fields.filter((function(e){return"Ratings"===e.data_type_name})).length>0})).length>0})))||void 0===o||null===(l=o.component_blueprints.find((function(e){return e.selected_fields.filter((function(e){return"Ratings"===e.data_type_name})).length>0})).selected_fields)||void 0===l?void 0:l.find((function(e){return"Ratings"===e.data_type_name}));Ri&&(uo(!0),(0,g.C0)({component_id:Vn.id,index:0,gropup:100,value:"".concat(document.getElementById("Comments").value,",").concat(Jl),procedure_step_blueprint_field_id:i.procedure_step_blueprint_field_id}).subscribe({next:function(){(0,g.zK)(Vn.id,"Closed").subscribe({next:function(e){(0,Ee.DV)(Ri,{ratings:Jl,comments:document.getElementById("Comments").value,component_id:Vn.id}).pipe((0,v.P)()).subscribe({next:function(e){uo(!1),ql(!1),f.h.dispatch((0,_.q4)((0,a.Z)((0,a.Z)({},Pn.processModule),{},{showDetail:!1}))),Qn((0,a.Z)((0,a.Z)({},Vn),{},{status:"Closed"}))},error:function(e){uo(!1),ql(!1),f.h.dispatch((0,_.q4)((0,a.Z)((0,a.Z)({},Pn.processModule),{},{showDetail:!1}))),Li()}})}})}}))}}))),fl&&r.createElement(Qe,{title:"",nav:fl,openNav:function(){window.clearInterval(Xl),jn?mi("/"):_l(!1)}},r.createElement("div",{style:{color:"var(--app-color-gray-dark)",height:"inherit",width:"100%"}},r.createElement("div",null,r.createElement("div",{style:{textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center",padding:"0 20px 20px 20px"}},!(null!==Vn&&void 0!==Vn&&Vn.assigned_to)&&r.createElement(h.$j,{type:"BallTriangle",color:"black",height:30,width:"30px"}),r.createElement("p",{className:me.modalSubTitle},null!==Vn&&void 0!==Vn&&Vn.assigned_to?"Your transaction has been assigned to:":"Waiting for ".concat(null!==(hn=null===Vn||void 0===Vn?void 0:Vn.title)&&void 0!==hn?hn:"transaction"," to be assigned")),null!==Vn&&void 0!==Vn&&Vn.assigned_to||"Unassigned"!==(null===Vn||void 0===Vn?void 0:Vn.status)?(null===Vn||void 0===Vn?void 0:Vn.assigned_to)&&r.createElement(Pe.Z,{photo:null===Vn||void 0===Vn||null===(yn=Vn.assigned_to)||void 0===yn?void 0:yn.photo,height:"150px",width:y.tq?"100%":"80%",firstName:"".concat(null===Vn||void 0===Vn||null===(gn=Vn.assigned_to)||void 0===gn?void 0:gn.first_name," ").concat(null===Vn||void 0===Vn||null===(bn=Vn.assigned_to)||void 0===bn?void 0:bn.last_name),email:null!==(xn=null===Vn||void 0===Vn||null===(En=Vn.assigned_to)||void 0===En?void 0:En.phone)&&void 0!==xn?xn:""}):r.createElement(Pe.Z,{noPhoto:!0,height:"150px",width:y.tq?"100%":"80%",firstName:"Unassigned",email:"Please close and select another provider"})),r.createElement("hr",{style:{borderTop:"0.5px solid #D2D2D2"}})),r.createElement("br",null),r.createElement(h.zx,{clicked:function(){window.clearInterval(Xl),_l(!1)},title:"Hide",style:{width:"100%"},loading:ao}))),vl&&r.createElement(h.U7,{isOpen:vl,hasCloseIcon:!0,onClose:function(){return jn?mi("/"):cl(!1)},backdropColor:!0,blured:!1,scrollable:!0,shadowedContainerStyle:{width:"100%",height:"auto"}},r.createElement("div",{style:{textAlign:"center",padding:"20px"}},r.createElement("p",{className:me.modalTitle},null===(Cn=Pn.processModule.module)||void 0===Cn?void 0:Cn.name),r.createElement("p",{className:me.modalSubTitle},null!==(Zn=null===Pn||void 0===Pn||null===(wn=Pn.processModule)||void 0===wn||null===(Mn=wn.module)||void 0===Mn||null===(Sn=Mn.options)||void 0===Sn?void 0:Sn.message)&&void 0!==Zn?Zn:"Transaction saved"))))))}))},59401:function(e,n,o){"use strict";o.d(n,{sM:function(){return r}});var l=o(29439),i=o(1413),t=o(92957),d="SET_SELECTED_COMPONENT",a=(0,t.Z)((function(e,n){var o=n.action,l=n.value;return o===d?(0,i.Z)((0,i.Z)({},e),{},{selectedComponent:l}):(0,i.Z)({},e)}),{selectedComponent:[]}),u=(0,l.Z)(a,2),r=(u[0],u[1])},143:function(){},55382:function(){},72095:function(){},61219:function(){}}]);
//# sourceMappingURL=315.34128fa6.chunk.js.map