"use strict";(self.webpackChunkflowhero=self.webpackChunkflowhero||[]).push([[9974],{40317:function(e,t,n){n.r(t),n.d(t,{default:function(){return T},randomisedColor:function(){return D}});var i=n(93433),l=n(29439),a=n(67861),o=n(39518),r=n(23280),s=n(11577),c=n(10103),u=n(41771),d=n(71982),m=n(75105),p=n(10904),v=n(32588),f=n(40694),y=n(71871),g=n(63789),h=n(1413),x=(n(83381),n(73500)),E=n(79492),Z=n.n(E),C=n(70847),N=n(88374),b=n(34710),S=n(89293),w=n(67861),I=n(66918),_=(0,o.$j)((function(e){var t=e.flowReducer;return{inviteColleguesList:t.inviteColleguesList,companyPositionsArray:t.companyPositionsArray,companyData:t.companyData,companyUsersArray:t.companyUsersArray}}),(function(e){return{onSetInviteColleguesList:function(t){return e((0,N.vj)(t))},onTutorialModalOpen:function(t){return e((0,d.ay)(t))}}}))((function(e){var t,n,i,r,s,u,d=e.closeButtonAction,v=e.onContinueButtonAction,f=e.onCancel,y=e.inviteColleguesList,g=e.companyPositionsArray,E=e.companyUsersArray,_=(0,a.useState)({companyEmail:"",firstName:"",lastName:"",position:"",position_id:""}),A=(0,l.Z)(_,2),k=A[0],F=A[1],U=(0,a.useState)({companyEmail:"",firstName:"",lastName:"",position:""}),D=(0,l.Z)(U,2),T=D[0],j=D[1],P=(0,a.useState)("Hongkong"),L=(0,l.Z)(P,2),z=L[0],M=L[1],X=(0,a.useState)(""),B=(0,l.Z)(X,2),H=B[0],W=B[1],V=(0,a.useState)(!1),O=(0,l.Z)(V,2),R=O[0],q=O[1],Y=(0,a.useState)(!1),$=(0,l.Z)(Y,2),J=$[0],G=$[1],K=(0,o.I0)();(0,a.useEffect)((function(){}),[y]),(0,a.useEffect)((function(){(0,b.hj)().subscribe({})}),[]);var Q=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};e&&(j((0,h.Z)((0,h.Z)({},H),{},{companyEmail:""})),G(!0),(0,m.fu)({email:e}).pipe((0,c.q)(1)).subscribe({next:function(e){j((0,h.Z)((0,h.Z)({},H),{},{companyEmail:"Email already exists and being used. Please choose another email"})),G(!1)},error:function(e){G(!1),t()}}))},ee=(0,a.useCallback)((function(){var e,t,n;if(E.filter((function(e){return e.email===k.companyEmail})).length>0)j((function(e){return(0,h.Z)((0,h.Z)({},e),{},{companyEmail:"Email already exists and being used."})}));else{j({companyEmail:"",firstName:"",lastName:"",position:""}),W("");var i=!0;if((0,C.isEmail)(k.companyEmail)||(i=!1,j((function(e){return(0,h.Z)((0,h.Z)({},e),{},{companyEmail:"Invalid Company email"})}))),(null===(e=k.firstName)||void 0===e?void 0:e.length)<2&&(i=!1,j((function(e){return(0,h.Z)((0,h.Z)({},e),{},{firstName:"Invalid First name"})}))),(null===(t=k.lastName)||void 0===t?void 0:t.length)<2&&(i=!1,j((function(e){return(0,h.Z)((0,h.Z)({},e),{},{lastName:"Invalid Last name"})}))),(null===(n=k.position)||void 0===n?void 0:n.length)<2&&(i=!1,j((function(e){return(0,h.Z)((0,h.Z)({},e),{},{position:"Position id is not considered valid"})}))),i){var l={email:k.companyEmail,first_name:k.firstName,last_name:k.lastName,position_id:k.position_id};G(!0),(0,b.x7)(l).subscribe({next:function(e){K((0,N.Xc)({show:!0,message:"You have successfully created an invitation to ".concat(k.firstName," "),top:"0"})),v()},error:function(e){var t,n,i,l,a,o,r,s,c;e&&j({companyEmail:(null===e||void 0===e||null===(n=e.data)||void 0===n||null===(i=n.errors)||void 0===i?void 0:i.email)||"",firstName:(null===e||void 0===e||null===(l=e.data)||void 0===l||null===(a=l.errors)||void 0===a?void 0:a.first_name)||"",lastName:(null===e||void 0===e||null===(o=e.data)||void 0===o||null===(r=o.errors)||void 0===r?void 0:r.last_name)||"",position:(null===e||void 0===e||null===(s=e.data)||void 0===s||null===(c=s.errors)||void 0===c?void 0:c.position_id)||""});W("status ".concat(null===e||void 0===e?void 0:e.status,": ").concat(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)),G(!1)},complete:function(){return G(!1)}})}}}),[k]),te=function(){E.filter((function(e){return e.email===k.companyEmail})).length>0?j((function(e){return(0,h.Z)((0,h.Z)({},e),{},{companyEmail:"Email already exists"})})):E.filter((function(e){return e.username===k.username})).length>0?j((function(e){return(0,h.Z)((0,h.Z)({},e),{},{username:"Username already exists"})})):(q(!0),(0,m.r4)({email:k.companyEmail,username:k.username,first_name:k.firstName,last_name:k.lastName,timezone:z,position_id:[k.position_id]}).subscribe({next:function(e){K((0,N.Xc)({show:!0,message:"You have successfully created ".concat(k.firstName,'. Default password is "P@ssw0rd"'),top:"0"})),v()},error:function(e){var t,n,i,l,a,o,r,s,c,u;e&&j({companyEmail:(null===e||void 0===e||null===(n=e.data)||void 0===n||null===(i=n.errors)||void 0===i?void 0:i.email)||"",firstName:(null===e||void 0===e||null===(l=e.data)||void 0===l||null===(a=l.errors)||void 0===a?void 0:a.first_name)||"",lastName:(null===e||void 0===e||null===(o=e.data)||void 0===o||null===(r=o.errors)||void 0===r?void 0:r.last_name)||"",position:(null===e||void 0===e||null===(s=e.data)||void 0===s||null===(c=s.errors)||void 0===c?void 0:c.position_id)||"",username:(null===e||void 0===e||null===(u=e.data)||void 0===u?void 0:u.errors.username)||""});W("status ".concat(null===e||void 0===e?void 0:e.status,": ").concat(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)),q(!1)},complete:function(){return q(!1)}}))};return w.createElement("div",{style:{width:"inherit",minWidth:"300px"}},w.createElement(p.U7,{scrollable:!0,shadowedContainerStyle:{width:x.tq?"100%":"30%",minWidth:"450px"},isOpen:e.modalVisible,modalClosed:f,blured:e.blured},w.createElement("div",{style:{position:"relative",display:"flex",height:"96%",flexDirection:"column",justifyContent:"flex-start",alignItems:"stretch",margin:"2% 10% 2% 10%"}},w.createElement("div",{style:{margin:"0px 0 0px 0",alignSelf:"stretch",display:"flex",flexDirection:"row",width:"100%",justifyContent:e.headingCentered?"center":"flex-start",alignItems:e.headingCentered?"center":"stretch"}},e.headingImage&&w.createElement("img",{alt:"",src:e.headingImage,style:{alignSelf:"center",height:"30px",width:"32px"}}),w.createElement("h1",{style:{color:"#4A4A4A",fontFamily:"var(--app-text-main-font)",fontSize:"2em",lineHeight:"2em",margin:"0",padding:"0 0 0 10px",textAlign:"center",width:"100%"}},"Add Users")),w.createElement("div",{className:"subheadingContainer_IX"},w.createElement("p",{className:"subheading_IX"},"Fill the email, name and position of the user you\u2019d like to add. For invites, user will need to accept via email sent")),w.createElement("div",{style:{minHeight:"500px",display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"stretch"}},w.createElement(Z(),null,w.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-evenly",alignItems:"center"}},w.createElement("div",{style:{marginRight:"10px",width:"100%",height:"100%",flex:1,display:"flex",flexDirection:"column",justifyContent:"space-evenly",alignItems:"center",boxSizing:"border-box",minHeight:"480px",minWidth:"351px",backgroundColor:"#FFFFFF"}},w.createElement("div",{style:{margin:"10px 0px 0 0",dispay:"flex",width:"100%",flexDirection:"column",justifyContent:"space-evenly",alignItems:"center"}},w.createElement("input",{type:"text",name:"comapny-name",className:"inputStyle_IX",placeholder:"Email",value:k.companyEmail,onChange:function(e){F((function(t){return(0,h.Z)((0,h.Z)({},t),{},{companyEmail:e.target.value})}))},onFocus:function(){j((function(e){return(0,h.Z)((0,h.Z)({},e),{},{companyEmail:""})}))}}),(null===T||void 0===T||null===(t=T.companyEmail)||void 0===t?void 0:t.length)>0&&w.createElement("p",{style:{margin:"1px 0 1px 2px ",fontFamily:"var(--app-text-main-font)",fontSize:"14px",color:"var(--app-color-error)"}},null===T||void 0===T?void 0:T.companyEmail)),(null===T||void 0===T||null===(n=T.username)||void 0===n?void 0:n.length)>0&&w.createElement("div",{style:{margin:"10px 0px 0 0",dispay:"flex",width:"100%",flexDirection:"column",justifyContent:"space-evenly",alignItems:"center"}},w.createElement("input",{type:"text",name:"user-name",className:"inputStyle_IX",placeholder:"Username",value:k.username,onChange:function(e){F((function(t){return(0,h.Z)((0,h.Z)({},t),{},{username:e.target.value})}))}}),(null===T||void 0===T||null===(i=T.username)||void 0===i?void 0:i.length)>0&&w.createElement("p",{style:{margin:"1px 0 1px 2px ",fontFamily:"var(--app-text-main-font)",fontSize:"14px",color:"var(--app-color-error)"}},null===T||void 0===T?void 0:T.username)),w.createElement("div",{style:{margin:"10px 0px 0 0",dispay:"flex",width:"100%",flexDirection:"column",justifyContent:"space-evenly",alignItems:"center"}},w.createElement(p.Ld,{triggerType:"chevron",molclassname:"menuOverlayList_IX",moliclassname:"menuOverlayListItem_IX",title:"",placeholder:"Position",onChange:function(e){e&&F((function(t){return(0,h.Z)((0,h.Z)({},t),{},{position:e.label,position_id:e.value})}))},items:g}),(null===T||void 0===T||null===(r=T.position)||void 0===r?void 0:r.length)>0&&w.createElement("p",{style:{margin:"1px 0 1px 2px ",fontFamily:"var(--app-text-main-font)",fontSize:"14px",color:"var(--app-color-error)"}},null===T||void 0===T?void 0:T.position)),w.createElement("div",{style:{margin:"10px 0px 0 0",dispay:"flex",width:"100%",flexDirection:"column",justifyContent:"space-evenly",alignItems:"center"}},w.createElement("input",{type:"text",name:"first-name",className:"inputStyle_IX",placeholder:"First Name",value:k.firstName,onChange:function(e){F((function(t){return(0,h.Z)((0,h.Z)({},t),{},{firstName:e.target.value})}))},onFocus:function(){j((function(e){return(0,h.Z)((0,h.Z)({},e),{},{firstName:""})}))}}),(null===T||void 0===T||null===(s=T.firstName)||void 0===s?void 0:s.length)>0&&w.createElement("p",{style:{margin:"1px 0 1px 2px ",fontFamily:"var(--app-text-main-font)",fontSize:"14px",color:"var(--app-color-error)"}},null===T||void 0===T?void 0:T.firstName)),w.createElement("div",{style:{margin:"10px 0px 0 0",dispay:"flex",width:"100%",flexDirection:"column",justifyContent:"space-evenly",alignItems:"center"}},w.createElement("input",{type:"text",name:"last-name",className:"inputStyle_IX",placeholder:"Last Name",value:k.lastName,onChange:function(e){F((function(t){return(0,h.Z)((0,h.Z)({},t),{},{lastName:e.target.value})}))},onFocus:function(){j((function(e){return(0,h.Z)((0,h.Z)({},e),{},{lastName:""})}))}}),(null===T||void 0===T||null===(u=T.lastName)||void 0===u?void 0:u.length)>0&&w.createElement("p",{style:{margin:"1px 0 1px 2px ",fontFamily:"var(--app-text-main-font)",fontSize:"14px",color:"var(--app-color-error)"}},null===T||void 0===T?void 0:T.lastName)),w.createElement("div",{style:{margin:"10px 0px 0 0",dispay:"flex",width:"100%",flexDirection:"column",justifyContent:"space-evenly",alignItems:"center"}},w.createElement(p.Ld,{inputStyle:{pointerEvents:"none"},items:S.LY,defaultSelectedItem:I.find(I.propEq("value",z))(S.LY),triggerType:"chevron",placeholder:"Select timezone",onChange:function(e){M(null===e||void 0===e?void 0:e.value)}}))))),w.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",alignSelf:"center"}},w.createElement(p.zx,{title:"Close",clicked:d,style:{width:"100px"}}),w.createElement(p.zx,{title:"Invite User",light:!0,disabled:!1,loading:J,clicked:function(){Q(k.companyEmail,ee)},style:{width:"140px"}}),w.createElement(p.zx,{title:"Create User",light:!0,disabled:!1,loading:R,clicked:function(){return Q(k.companyEmail,te)},style:{width:"140px"}}))))))})),A=n(61616);document.title="Users | ".concat(S.iC);n(66918),n(84813);var k,F,U=String((k=10,F=245,k=Math.ceil(k),F=Math.floor(F),Math.floor(Math.random()*(F-k))+k)),D={color:"rgb(".concat(U,",").concat(U,",").concat(U,")")||0},T=(0,o.$j)((function(e){var t=e.authReducer.authenticatedUser.position,n=e.sessionReducer.user,i=e.flowReducer;return{companyData:i.companyData,companyPositionsArray:i.companyPositionsArray,position:t,allTasks:i.allTasks,allCompletedTasks:i.allCompletedTasks,allCompletedTasksPaginated:i.allCompletedTasksPaginated,user:n,companyUsersArray:i.companyUsersArray}}),(function(e){return{onSetOnBoardingVisible:function(t){return e((0,d.DJ)(t))},onToggleModalVisibility:function(t){return e((0,d.$6)(t))}}}))((function(e){var t=(0,r.TH)(),n=e.user,d=e.onToggleModalVisibility,h=e.onSetOnBoardingVisible,x=e.companyUsersArray,E=e.profile,Z=void 0!==E&&E,C=e.companyData,b=(0,a.useState)(!1),S=(0,l.Z)(b,2),w=S[0],I=S[1],k=(0,a.useState)(x),F=(0,l.Z)(k,2),U=F[0],D=F[1],T=(0,a.useState)([]),j=(0,l.Z)(T,2),P=(j[0],j[1]),L=(0,a.useState)(!1),z=(0,l.Z)(L,2),M=z[0],X=z[1],B=(0,a.useState)(!1),H=(0,l.Z)(B,2),W=H[0],V=H[1],O=(0,a.useState)(!1),R=(0,l.Z)(O,2),q=R[0],Y=R[1],$=(0,a.useState)(""),J=(0,l.Z)($,2),G=J[0],K=(J[1],(0,a.useState)([])),Q=(0,l.Z)(K,2),ee=(Q[0],Q[1]),te=(0,a.useState)({filterActive:!1,departments_filteredIds:[],positions_filteredIds:[]}),ne=(0,l.Z)(te,2),ie=ne[0],le=(ne[1],(0,a.useState)(!1)),ae=(0,l.Z)(le,2),oe=(ae[0],ae[1],(0,a.useState)(!1)),re=(0,l.Z)(oe,2),se=re[0],ce=re[1],ue=(0,o.I0)(),de=(0,r.s0)();(0,a.useEffect)((function(){I(!0),(0,m.pH)().pipe((0,s.P)()).subscribe({next:function(e){P(e)}}),ue((0,N.IW)(!Z)),0==x.length&&(ce(!0),(0,m.AW)().pipe((0,c.q)(1)).subscribe({next:function(e){0===e.length?(X(!0),ce(!1)):(D((0,i.Z)(e)),ce(!1))},error:function(e){ce(!1)},complete:function(){ce(!1)}}))}),[]),(0,a.useEffect)((function(){var e=null===U||void 0===U?void 0:U.find((function(e){return e.id==new URLSearchParams(null===t||void 0===t?void 0:t.search).get("userId")}));e&&me(e)}),[null===t||void 0===t?void 0:t.search,U]),(0,a.useEffect)((function(){if(ie.filterActive){var e=[].concat((0,i.Z)(ie.departments_filteredIds),(0,i.Z)(ie.positions_filteredIds));(null===e||void 0===e?void 0:e.length)>0&&ee((0,i.Z)(e))}}),[ie]);var me=function(e){de("/user-profile",{state:{user:e}})},pe=function(){Y(!0)};return a.createElement("div",{className:y.Z.usersHost},a.createElement("div",{style:{margin:"100px 0 0 0"}},a.createElement(A.Z,{headerTitle:Z?"My Profile":"Users",targetProcessing:!1})),w&&a.createElement("span",{className:y.Z.loadingIndicator},a.createElement(p.$j,{type:"BallTriangle",color:"var(--app-color-gray-dark)",height:30,width:"".concat(30,"px")})),a.createElement("br",null),a.createElement("div",{style:{display:Z?"none":"flex"}},"free"===(null===C||void 0===C?void 0:C.status)&&(null===x||void 0===x?void 0:x.length)<3&&a.createElement(f.Z,{title:"Add Users",clicked:pe,style:{width:"150px"}}),"on_trial"===(null===C||void 0===C?void 0:C.status)&&(null===x||void 0===x?void 0:x.length)<5&&a.createElement(f.Z,{title:"Add Users",clicked:pe,style:{width:"150px"}}),"active"===(null===C||void 0===C?void 0:C.status)&&a.createElement(f.Z,{title:"Add Users",clicked:pe,style:{width:"150px"}}),a.createElement(f.Z,{light:!0,clicked:function(){ce(!0),(0,m.AW)(!0).pipe((0,c.q)(1)).subscribe({next:function(e){0===e.length?(X(!0),ce(!1)):(D((0,i.Z)(e)),ce(!1))},error:function(e){ce(!1)},complete:function(){ce(!1)}})},icon:a.createElement("img",{src:u.Fdh}),loading:se})),a.createElement("br",null),M?a.createElement("div",{className:y.Z.noTeamMembers},a.createElement("img",{src:u.tfg,alt:""}),a.createElement("p",null,"There are currently no team members."),a.createElement(f.Z,{title:"Add Users",clicked:function(){d({eightModalVisible:!0,hideSkipBtn:!0}),h(!0),window.scrollTo(0,0)}})):a.createElement("div",{className:y.Z.colleaguesSection},a.createElement("div",{className:y.Z.rightSideContainer},Z?a.createElement("div",{style:{padding:"10px"}},a.createElement(v.Z,{photo:n.photo,firstName:null===n||void 0===n?void 0:n.first_name,lastName:null===n||void 0===n?void 0:n.last_name,position:null===n||void 0===n?void 0:n.phone,email:null===n||void 0===n?void 0:n.email,cardClicked:function(){}})):(null===U||void 0===U?void 0:U.length)>0&&(null===U||void 0===U?void 0:U.map((function(e,t){var n,i;return a.createElement("div",{key:t,style:{padding:"10px"}},a.createElement(v.Z,{photo:e.photo,firstName:null===e||void 0===e?void 0:e.first_name,lastName:null===e||void 0===e?void 0:e.last_name,position:null===e||void 0===e||null===(n=e.positions)||void 0===n||null===(i=n.slice(0,1))||void 0===i?void 0:i.map((function(e){return e.name})),email:null===e||void 0===e?void 0:e.email,cardClicked:function(){return me(e)}}))}))))),W&&a.createElement(g.Z,{isVisible:W,activeItem:G,handleClose:function(){V(!1)},isAdmin:n.is_admin}),q&&a.createElement(_,{hasTutorial:!0,modalVisible:q,closeButtonAction:function(){return Y(!1)},backButtonAction:function(){return Y(!1)},shadowedContainerStyle:{minWidth:"1110px",minHeight:"725px"},modalWrapperStyle:{minWidth:"1110px",minHeight:"725px"},onContinueButtonAction:function(){Y(!1)},onCancel:function(){return Y(!1)}}))}))}}]);
//# sourceMappingURL=9974.18a61917.chunk.js.map