"use strict";(self.webpackChunkflowhero=self.webpackChunkflowhero||[]).push([[200],{82200:function(e,t,n){n.r(t),n.d(t,{default:function(){return K}});var o=n(1413),i=n(29439),l=n(67861),r="BeginModule_headerContainer__6l-gP",d="BeginModule_modalLabelHeader__EVne0",s="BeginModule_modalLabel__WZVSY",a="BeginModule_modalButtons__bAjdy",u="BeginModule_importArea__2hmJ7",c="BeginModule_importText__YhRY+",p=n(39518),v=n(10103),f=n(11577),m=n(65019),h=n(88550),g=n(93389);var x,y,w,b,E,_,k,S,M=function(e,t){void 0===e&&(e=!0);var n=(0,l.useCallback)((function(n){if("function"!==typeof e||e())return n.preventDefault(),t&&(n.returnValue=t),t}),[e,t]);(0,l.useEffect)((function(){if(e)return function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];e&&e.addEventListener&&e.addEventListener.apply(e,t)}(window,"beforeunload",n),function(){return function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];e&&e.removeEventListener&&e.removeEventListener.apply(e,t)}(window,"beforeunload",n)}}),[e,n])},Z=n(88827),C=n(88374),P=n(32422),I=n(10904),U=n(73500),q=n(1542),A=n(6073),z=n(43984),O=n(75105),L=n(34665),D=n(23280),N=n(59401),B=n(29118),R=n(30168),T=n(43745),Y=T.ZP.div(x||(x=(0,R.Z)(["\n\twidth: 100%;\n\t\n\tmargin: 0 auto;\n\tpadding: 0 16px;\n\tpadding 0 8% 0 8%;\n"]))),j=T.ZP.div(y||(y=(0,R.Z)(["\n\tdisplay: flex;\n\tjustify-content: space-between;\n\tposition: relative;\n\tmargin-top: 40px;\n\t:before {\n\t\tcontent: '';\n\t\tposition: absolute;\n\t\tbackground: var(--app-color-gray-lighter);\n\t\theight: 4px;\n\t\twidth: 100%;\n\t\ttop: 50%;\n\t\ttransform: translateY(-50%);\n\t\topacity: 0.3;\n\t\tleft: 0;\n\t}\n\t:after {\n\t\tcontent: '';\n\t\tposition: absolute;\n\t\tbackground: #4a154b;\n\t\theight: 4px;\n\t\twidth: ",";\n\t\ttop: 50%;\n\t\ttransition: 0.4s ease;\n\t\ttransform: translateY(-50%);\n\t\tleft: 0;\n\t}\n"])),(function(e){return e.width})),W=T.ZP.div(w||(w=(0,R.Z)(["\n\tposition: relative;\n\tz-index: 1;\n"]))),G=T.ZP.div(b||(b=(0,R.Z)(["\n\twidth: 40px;\n\theight: 40px;\n\tborder-radius: 50%;\n\tbackground-color: #ffffff;\n\tborder: 3px solid ",";\n\ttransition: 0.4s ease;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n"])),(function(e){return"completed"===e.step?"black":"var(--app-color-gray-dark)"})),V=T.ZP.span(E||(E=(0,R.Z)(["\n\tfont-size: 19px;\n\tcolor: var(--app-color-gray-dark);\n\t@media (max-width: 600px) {\n\t\tfont-size: 16px;\n\t}\n"]))),$=T.ZP.div(_||(_=(0,R.Z)(["\n\tposition: absolute;\n\twidth: 300px;\n\ttop: 66px;\n\tleft: 50%;\n\ttransform: translate(-50%, -50%);\n"]))),F=T.ZP.span(k||(k=(0,R.Z)(["\n\tfont-size: 10px;\n\tcolor: var(--app-color-gray-dark);\n\n\t@media (max-width: 800px) {\n\t\tfont-size: 16px;\n\t}\n\t@media (max-width: 600px) {\n\t\tfont-size: 8px;\n\t}\n"]))),J=T.ZP.div(S||(S=(0,R.Z)(["\n\tfont-size: 26px;\n\tfont-weight: 600;\n\tcolor: #4a154b;\n\t-ms-transform: scaleX(-1) rotate(-46deg); /* IE 9 */\n\t-webkit-transform: scaleX(-1) rotate(-46deg); /* Chrome, Safari, Opera */\n\ttransform: scaleX(-1) rotate(-46deg);\n"]))),Q=function(e){var t=e.steps,n=e.activeStep,o=void 0===n?1:n,i=t.length,r="".concat(100/(i-1)*(o-1),"%");return l.createElement(Y,null,l.createElement(j,{width:r},t.map((function(e){var t=e.rank,n=e.name;return l.createElement(W,{key:t-1},l.createElement(G,{step:o>=t-1?"completed":"incomplete"},o>t-1?l.createElement(J,null,"L"):l.createElement(V,null,t-1)),l.createElement($,null,l.createElement(F,{key:t-1},n)))}))))},X=n(52902),H=n(12075),K=(n(85692),(0,p.$j)((function(e){var t=e.flowReducer,n=t.begunModule,o=t.companyProcesses,i=t.cart;return{begunModule:n,user:e.sessionReducer.user,companyProcesses:o,cart:i}}),(function(e){return{onSetAuthenticatedUser:function(t){return e((0,z.IF)(t))}}}))((function(e){var t,n,p,x,y,w,b,E,_,k,S,z,R,T,Y,j,W,G,V,$,F=e.begunModule,J=e.user,K=e.companyProcesses,ee=e.cart,te=(0,l.useState)(""),ne=(0,i.Z)(te,2),oe=ne[0],ie=ne[1],le=(0,l.useState)(!1),re=(0,i.Z)(le,2),de=re[0],se=re[1],ae=(0,l.useState)(!1),ue=(0,i.Z)(ae,2),ce=ue[0],pe=ue[1],ve=(0,h.pQ)(),fe=(0,i.Z)(ve,2),me=fe[0],he=fe[1],ge=(0,l.useState)(!1),xe=(0,i.Z)(ge,2),ye=xe[0],we=xe[1],be=(0,l.useState)(!1),Ee=(0,i.Z)(be,2),_e=Ee[0],ke=Ee[1],Se=(0,D.UO)(),Me=Se.moduleID,Ze=Se.paymentID,Ce=(0,D.TH)(),Pe=(0,l.useCallback)((function(e){e.forEach((function(e){var t;if(-1!==["xls","xlsx","csv"].indexOf(null===e||void 0===e||null===(t=e.name)||void 0===t?void 0:t.toString().split(".")[1])){var n=new FileReader;n.onabort=function(){},n.onerror=function(){},n.onload=function(e){},n.readAsBinaryString(e),n.onloadend=function(t){var n,o;ke(!0),(0,q._)(e,null===F||void 0===F||null===(n=F.processModule)||void 0===n||null===(o=n.module)||void 0===o?void 0:o.id).subscribe({next:function(){ke(!1),(0,A.OQ)(!1,!0).pipe((0,v.q)(1)).subscribe({})},complete:function(){ke(!1)},error:function(e){ke(!1)}})}}}))}),[null===F||void 0===F||null===(t=F.processModule)||void 0===t?void 0:t.module]),Ie=(0,B.uI)({onDrop:Pe}),Ue=Ie.getRootProps,qe=(Ie.getInputProps,Ie.isDragActive),Ae=(0,D.s0)();(0,l.useEffect)((function(){var e,t;if(void 0===(null===F||void 0===F||null===(e=F.processModule)||void 0===e?void 0:e.isUpdating)){var n=K.find((function(e){return e.id===F.processModule.id}));if(n&&n.steps.length>0){var i,l=(0,o.Z)((0,o.Z)((0,o.Z)({},F.processModule),n),{},{completeSteps:n.steps,steps:n.steps.filter((function(e){var t,o,i,l,r,d;return void 0==(null===e||void 0===e||null===(t=e.options)||void 0===t?void 0:t.showStepAll)||1==(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.showStepAll)||0==(null===e||void 0===e||null===(i=e.options)||void 0===i?void 0:i.showStepAll)&&(null===e||void 0===e||null===(l=e.options)||void 0===l||null===(r=l.showOnly)||void 0===r?void 0:r.filter((function(e){return J.positions.map((function(e){return e.id})).indexOf(e)>-1})).length)>0||(null===e||void 0===e||null===(d=e.options)||void 0===d?void 0:d.showStepAuthor)&&(null===J||void 0===J?void 0:J.id)===(null===n||void 0===n?void 0:n.user_id)})).map((function(e,t){return(0,o.Z)((0,o.Z)({},e),{},{rank:t+1})}))});Z.h.dispatch((0,C.q4)(l)),he({action:h._U.setCurrentStep,value:l.steps[null!==(i=F.processModule.stepIndex)&&void 0!==i?i:0]})}else(0,g.zJ)(F.processModule.id).pipe((0,f.P)()).subscribe({next:function(e){var t,n=(0,o.Z)((0,o.Z)((0,o.Z)({},F.processModule),e),{},{completeSteps:e.steps,steps:e.steps.filter((function(t){var n,o,i,l,r,d;return void 0==(null===t||void 0===t||null===(n=t.options)||void 0===n?void 0:n.showStepAll)||1==(null===t||void 0===t||null===(o=t.options)||void 0===o?void 0:o.showStepAll)||0==(null===t||void 0===t||null===(i=t.options)||void 0===i?void 0:i.showStepAll)&&(null===t||void 0===t||null===(l=t.options)||void 0===l||null===(r=l.showOnly)||void 0===r?void 0:r.filter((function(e){return J.positions.map((function(e){return e.id})).indexOf(e)>-1})).length)>0||(null===t||void 0===t||null===(d=t.options)||void 0===d?void 0:d.showStepAuthor)&&(null===J||void 0===J?void 0:J.id)===(null===e||void 0===e?void 0:e.user_id)}))});Z.h.dispatch((0,C.q4)(n)),he({action:h._U.setCurrentStep,value:n.steps[null!==(t=F.processModule.stepIndex)&&void 0!==t?t:0]})},error:function(e){}})}else if(!0===(null===F||void 0===F||null===(t=F.processModule)||void 0===t?void 0:t.isUpdating)){var r;he({action:h._U.setCurrentStep,value:F.processModule.steps[null!==(r=F.processModule.stepIndex)&&void 0!==r?r:0]})}if(Me){var d=new URLSearchParams(null===Ce||void 0===Ce?void 0:Ce.search);ie({key:d.get("key"),value:d.get("value")})}}),[]);return M(!0,"Are you sure want to leave this "),l.createElement(m.LN,null,l.createElement(N.sM,null,l.createElement("div",{className:r},l.createElement("div",null),!U.tq&&(null===me||void 0===me||null===(n=me.currentStep)||void 0===n?void 0:n.rank)>1&&(null===(p=F.processModule.steps)||void 0===p?void 0:p.length)>2&&l.createElement("div",{className:d,style:{width:(null===(x=F.processModule.steps)||void 0===x?void 0:x.length)>4?"100%":"50%",paddingBottom:"20px"}},l.createElement(Q,{steps:null===(y=F.processModule)||void 0===y||null===(w=y.steps)||void 0===w?void 0:w.slice(1),activeStep:null!==(b=(null===me||void 0===me||null===(E=me.currentStep)||void 0===E?void 0:E.rank)-1)&&void 0!==b?b:0})),l.createElement("div",{style:{display:"flex"}},l.createElement(I.j3,{permissions:[I.po.blueprints.process.create]},!0===(null===F||void 0===F||null===(_=F.processModule)||void 0===_||null===(k=_.module)||void 0===k||null===(S=k.options)||void 0===S?void 0:S.allowImport)&&1==(null===me||void 0===me||null===(z=me.currentStep)||void 0===z?void 0:z.rank)&&l.createElement(I.zx,{titleStyle:{fontWeight:"normal"},title:U.tq?"":ye?"Hide Import":"Import",icon:!ye&&U.tq&&l.createElement(H.G,{icon:X.cf$,style:{margin:"0px",width:"20px",height:"20px"}}),style:{marginLeft:"0px"},clicked:function(){return we(!ye)}})),l.createElement(I.zx,{titleStyle:{fontWeight:"normal"},title:U.tq?"":(null===J||void 0===J||null===(R=J.pinned_modules)||void 0===R?void 0:R.filter((function(e){return e.id===F.processModule.module_id})).length)>0?"Unpin":"Pin",icon:U.tq&&l.createElement(H.G,{icon:(null===J||void 0===J||null===(T=J.pinned_modules)||void 0===T?void 0:T.filter((function(e){return e.id===F.processModule.module_id})).length)>0?X.KUK:X.Lad,style:{margin:"0 0px",width:"20px",height:"20px"}}),loading:ce,style:{marginLeft:"0px",display:(null===me||void 0===me||null===(Y=me.currentStep)||void 0===Y?void 0:Y.rank)>1?"none":""},clicked:function(){var e;me.items=[],pe(!0),(null===J||void 0===J||null===(e=J.pinned_modules)||void 0===e?void 0:e.filter((function(e){return e.id===F.processModule.module_id})).length)>0?(0,q.Ev)(F.processModule.module_id).pipe((0,f.P)()).subscribe({next:function(){(0,O.IC)().pipe((0,f.P)()).subscribe({next:function(e){L.Fc.saveUser((0,o.Z)({},e)),pe(!1)}})}}):(0,q.tq)(F.processModule.module_id).pipe((0,f.P)()).subscribe({next:function(){(0,O.IC)().pipe((0,f.P)()).subscribe({next:function(e){L.Fc.saveUser((0,o.Z)({},e)),pe(!1),Z.h.dispatch((0,C.IW)(!0)),Ae("/dashboard")}})}})}}),l.createElement(I.zx,{titleStyle:{fontWeight:"normal"},title:!U.tq&&"Close",icon:U.tq&&l.createElement(H.G,{icon:X.QQm,style:{margin:"0 0px",width:"20px",height:"20px"}}),style:{marginLeft:"0px",display:(null===me||void 0===me||null===(j=me.currentStep)||void 0===j?void 0:j.rank)>1?"none":""},clicked:function(){var e,t,n;(setTimeout((function(){Z.h.dispatch((0,C.IW)(!0)),Z.h.dispatch((0,C.Xc)({show:!1,message:""}))}),10),(null===me||void 0===me||null===(e=me.items)||void 0===e?void 0:e.length)>0)?!0!==(null===(t=F.processModule.module)||void 0===t||null===(n=t.options)||void 0===n?void 0:n.saveCart)||!1!==F.processModule.isUpdating&&void 0!==F.processModule.isUpdating?(me.items=[],Ae("/dashboard"),Z.h.dispatch((0,C.q4)(""))):se(!0):(Ae("/dashboard"),Z.h.dispatch((0,C.q4)("")))}}))),ye&&l.createElement("div",{className:u},l.createElement("div",Ue(),qe?l.createElement("div",{className:c},l.createElement(H.G,{icon:X.cf$,style:{backgroundColor:"black",margin:"0 10px",width:"20px",height:"20px"}}),l.createElement("p",null,"Drop the files here ...")):l.createElement("div",{className:c},!_e&&l.createElement(H.G,{icon:X.cf$,style:{color:"black",margin:"0 10px",width:"20px",height:"20px"}}),l.createElement("p",null,_e?l.createElement(I.$j,{size:80,type:"ThreeDots"}):"Click or drag your file here to begin import. (ex .csv)")))),l.createElement(P.ZP,{navigateTo:oe,isEditing:!1,paymentID:Ze}),l.createElement(I.U7,{id:"pending-component-modal",blured:!0,scrollable:!1,isOpen:de,shadowedContainerStyle:{width:U.tq?"100%":"30%"}},l.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"}},l.createElement("p",{className:d},"Are you working on a transaction?"),l.createElement("div",{className:s},"You can press ".concat((null===ee||void 0===ee||null===(W=ee.items)||void 0===W?void 0:W.length)>0?"'Update Cart'":"'Add to Cart'"," to save any transaction you are working on without submitting it. You can resume it by clicking the cart icon on the menu bar. ").concat((null===ee||void 0===ee||null===(G=ee.items)||void 0===G?void 0:G.length)>0?"Pressing 'Empty Cart' will clear previous contents of your cart, and exit":"")),l.createElement("div",{className:a},l.createElement(I.zx,{title:"Close only",style:{width:"120px"},clicked:function(){he({action:h._U.clearOngoingTransaction}),window.history.back(),Z.h.dispatch((0,C.q4)(""))}}),l.createElement(I.zx,{title:(null===ee||void 0===ee||null===(V=ee.items)||void 0===V?void 0:V.length)>0?"Update Cart":"Add to Cart",light:!0,style:{width:"130px"},clicked:function(){var e,t,n,i;me.components.filter((function(e){return e.selected_fields.filter((function(e){return"ID"===e.data_type_name})).forEach((function(e){return e.value=void 0}))})),me.newStepComponents.filter((function(e){return e.selected_fields.filter((function(e){return"ID"===e.data_type_name})).forEach((function(e){return e.value=void 0}))})),(null===F||void 0===F||null===(e=F.processModule)||void 0===e||null===(t=e.steps)||void 0===t?void 0:t.length)>0&&(null===F||void 0===F||null===(n=F.processModule)||void 0===n||null===(i=n.steps)||void 0===i||i.filter((function(e){var t;return null===e||void 0===e||null===(t=e.component_blueprints)||void 0===t?void 0:t.filter((function(e){return e.selected_fields.filter((function(e){return"ID"===e.data_type_name})).filter((function(e){return e.value=void 0}))}))})));var l=JSON.parse(JSON.stringify({components:me.components,newStepComponents:me.newStepComponents,items:me.items,begunModule:(0,o.Z)((0,o.Z)({},F.processModule),{},{stepIndex:1})}));Z.h.dispatch((0,C.RV)(l)),he({action:h._U.clearOngoingTransaction}),window.history.back(),Z.h.dispatch((0,C.q4)(""))}}),l.createElement(I.zx,{title:"Empty Cart",light:!0,style:{width:"120px",display:(null===ee||void 0===ee||null===($=ee.items)||void 0===$?void 0:$.length)>0?"":"none"},clicked:function(){Z.h.dispatch((0,C.RV)({})),he({action:h._U.clearOngoingTransaction}),window.history.back(),Z.h.dispatch((0,C.q4)(""))}}))))))})))}}]);
//# sourceMappingURL=200.cea7f2bf.chunk.js.map