"use strict";(self.webpackChunkflowhero=self.webpackChunkflowhero||[]).push([[3358],{33358:(e,t,a)=>{a.r(t),a.d(t,{default:()=>me});var n=a(67861),s=a(39518),l=a(23280),o=a(88374);const r="Login_headerTopBarContainer__QWz8Y",i="Login_logoUrlImg__UaUon",d="Login_logoUrlImgMobile__gvaUr",c="Login_navbaritems__g7mXs",u="Login_navbarlinks__dLaYR";var m=a(87462),p=a(12265),h=a(47144),v=a.n(h),g=a(15049),f=a(10103),b=a(98500),_=a(23075),w=a.n(_),y=a(31787);w()(b);var E=a(71982),k=a(57417),x=a(48929),S=a(45987);const N="TextField_inputContainer__-Li1l",C="TextField_ornament__1DMyr",q="TextField_rightButton__miccv",Z="TextField_textLabel__zJNw6",I="TextField_textInput__TQ2mO",R="TextField_userTextInput__8z5C4",T="TextField_inputLabel__IAwPE",L="TextField_errorContainer__D-YWL",M=["isDisabled","readOnly","label","hasMandatoryIndicator","placeholder","charactersNo","icon","rightButtonLabel","rightButtonAction","rightButtonClass","errorMessage","defaultValue","onChange","name","type","autoComplete"],B=["className","hasError"],A=["className"],D=["children"],F=["hasMandatoryIndicator","children","className"],P=(0,n.forwardRef)((e,t)=>{const{isDisabled:a=!1,readOnly:s,label:l="",hasMandatoryIndicator:o,placeholder:r="Insert email",charactersNo:i,icon:d,rightButtonLabel:c,rightButtonAction:u,rightButtonClass:m,errorMessage:p,defaultValue:h,onChange:g,name:f,type:b="text",autoComplete:_}=e,w=(0,S.Z)(e,M),[y,E]=(0,n.useState)(null!==h&&void 0!==h?h:""),k=Boolean(p);return n.createElement("div",w,n.createElement(j,{hasMandatoryIndicator:o},l),y&&n.createElement("div",{className:Z},r),n.createElement(U,{hasError:k,className:N},n.createElement(O,{"app-readonly":s?"readonly":"",readOnly:s,autoComplete:_,disabled:a,name:f,type:b,placeholder:r,value:y,maxLength:i,onChange:e=>{E(e.target.value),null===g||void 0===g||g(e)},ref:t,className:R}),d&&n.createElement("div",{className:C},d),c&&n.createElement("button",{type:"button",onClick:u,className:v()(q,m),style:{fontFamily:"Montserrat",fontSize:"14px",fontWeight:"normal"}},c)),p&&n.createElement(V,null,p))}),U=(0,n.forwardRef)((e,t)=>{const{className:a,hasError:s}=e,l=(0,S.Z)(e,B);return n.createElement("div",(0,m.Z)({"app-error":s?"error":"",ref:t},l,{className:v()(N,a)}))}),O=(0,n.forwardRef)((e,t)=>{const{className:a}=e,s=(0,S.Z)(e,A);return n.createElement("input",(0,m.Z)({ref:t},s,{className:v()(I,a)}))});function V(e){const{children:t}=e,a=(0,S.Z)(e,D);return n.createElement("p",(0,m.Z)({className:L},a),t)}function j(e){const{hasMandatoryIndicator:t,children:a,className:s}=e,l=(0,S.Z)(e,F);return n.createElement("label",(0,m.Z)({className:v()(T,s)},l),a,t&&n.createElement("span",{className:"text-danger"},"*"))}var J=a(12075),z=a(52902),W=a(67861);const Y=(0,n.forwardRef)((e,t)=>{const[a,s]=(0,n.useState)(!1);return W.createElement(P,(0,m.Z)({},e,{ref:t,type:a?"text":"password",rightButtonLabel:a?W.createElement(J.G,{icon:z.Mdf,style:{color:"black",width:"16px",height:"16px"}}):W.createElement(J.G,{icon:z.Aq,style:{color:"var(--app-color-gray-light)",width:"16px",height:"16px"}}),rightButtonAction:()=>s(e=>!e),rightButtonClass:""}))}),K="LoginForm_host__UvJwq",Q="LoginForm_row__9D3he",X="LoginForm_signInButton__VPwbB",G="LoginForm_recoverPasswordButton__fDOss";var H=a(73500),$=a(49465);const ee="Please setup the company\nPlease contact comapny admin.\nBasic company information must be enroled\nBefore you will be granted access to ".concat($.iC),te=(0,n.memo)(e=>{var t,a,l,r,i,d,c,u;const{onLoginSuccess:h,className:_,onResetPassword:w}=e,S=(0,s.I0)(),{rememberMe:N}=(0,s.v9)(e=>e.authReducer.sessionSettings),[C,q]=(0,n.useState)(!1),[Z,I]=(0,n.useState)(""),{schemas:R,yup:T}=(0,n.useMemo)(()=>({yup:b,schemas:{email:b.string().min(6,"Username must have at least 8 characters"),password:b.string().min(8,"Password must have at least 8 characters"),passwordRepeat:b.string().oneOf([b.ref("password"),null],"Passwords does not match").required("Password repeat is required"),website:b.string().url(),phoneNumber:b.string().test({name:"phone-pattern",message:"Not a valid phone number",test:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return""==e||(0,y.yf)(e)}}),mobilePhoneNumber:b.string().test({name:"mobile-phone-pattern",message:"Not a valid mobile phone number",test:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return""==e||(0,y.yf)(e)}}),employerName:b.string().required("Employer name is required")}}),[]),{register:L,handleSubmit:M,formState:{errors:B},getValues:A}=(0,g.cI)({mode:"onSubmit",criteriaMode:"firstError",resolver:(0,p.X)(T.object().shape({email:R.email,password:R.password}))});return n.createElement("form",{onSubmit:M(e=>{I(""),q(!0);const{email:t,password:a,rememberMe:n}=A();(0,k.n$)({email:t,password:a,rememberMe:!0}).pipe((0,f.q)(1)).subscribe({next:e=>{const{is_admin:t,onboarding_status:a}=e;!1===a?!0===t?(S((0,E.DJ)(!0)),S((0,E.q9)(!0)),S((0,E.$6)({firstModalVisible:!0})),S((0,o.IW)(!1)),q(!1)):(I(ee),q(!1)):(S((0,E.DJ)(!1)),S((0,E.q9)(!1)),S((0,o.fj)(!0)),q(!1),null===h||void 0===h||h(e))},error:e=>{var t;const a="string"==typeof e.data?e.data:null!==e&&void 0!==e&&e.error?null===e||void 0===e?void 0:e.error:null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message;I(422===e.status||"Not authenticated"===a?"Invalid user name or password, please try again.":a),q(!1)}})}),className:v()(K,_),onClick:()=>I("")},n.createElement("div",{className:Q,"app-variant":"first-row"},n.createElement(P,(0,m.Z)({style:{backgroundColor:"rgb(246,244,236)"},autoComplete:N?"username":"new-password",type:"text",placeholder:"Email or Username",defaultValue:null!==(t=localStorage.getItem("username"))&&void 0!==t?t:""},L("email")))),n.createElement("div",{className:Q,"app-variant":"second-row"},n.createElement(Y,(0,m.Z)({style:{backgroundColor:"rgb(246,244,236)"},autoComplete:N?"on":"off",placeholder:"Password",defaultValue:null!==(a=localStorage.getItem("password"))&&void 0!==a?a:""},L("password")))),(Z||(null===(l=B.password)||void 0===l?void 0:l.message)||(null===(r=B.email)||void 0===r?void 0:r.message))&&n.createElement(V,null,"".concat(null!==Z&&void 0!==Z?Z:""," ").concat(null!==(i=null===(d=B.password)||void 0===d?void 0:d.message)&&void 0!==i?i:""," ").concat(null!==(c=null===(u=B.email)||void 0===u?void 0:u.message)&&void 0!==c?c:""," ")),n.createElement(x.zx,{disabled:C,loading:C,type:"submit",title:"Sign in",className:X}),n.createElement("div",{className:Q,"app-variant":"third-row"},n.createElement("br",null),n.createElement("p",{className:G,onClick:w},H.tq?"Forgot Password":"Need to find your password?"),n.createElement("br",null)))});var ae=a(6073),ne=(a(93389),a(1542)),se=a(34710),le=a(75105),oe=a(30994),re=a(27658),ie=a(51481),de=a(88827);a(96332);const ce=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const{authenticatedUser:t}=de.h.getState().authReducer,{companyData:a}=de.h.getState().flowReducer;!1===e?(0,ae.d7)($.KI).pipe((0,f.q)(1)).subscribe({complete:()=>{(0,ae.ew)().pipe((0,f.q)(1)).subscribe({complete:()=>{(0,ne.rz)($.Qc,!1).pipe((0,f.q)(1)).subscribe({}),(0,se.hj)().pipe((0,f.q)(1)).subscribe({next:()=>(0,ie.km)(t.id).pipe((0,f.q)(1)).subscribe({complete:()=>(0,ie.qp)($.KI,t.id).pipe((0,f.q)(1)).subscribe({})})})}})}}):(0,le.AW)().pipe((0,f.q)(1)).subscribe({}),""!==oe.lw&&(0,re.Hm)().pipe((0,f.q)(1)).subscribe({})};var ue=a(67861);const me=(0,n.memo)(e=>{var t,a;const{title:m}=e,p=(0,l.s0)(),h=(0,s.I0)(),{companyData:v,lastUpdates:g}=de.h.getState().flowReducer,{authenticated:b}=de.h.getState().sessionReducer,[_]=(0,n.useState)(null!==(t=JSON.parse(localStorage.getItem("companyData")))&&void 0!==t?t:{logo:""});return document.title="Login | ".concat($.iC),(0,n.useEffect)(()=>{b?p("/flowhero"):(h((0,o.fj)(!1)),h((0,o.aV)()),(0,k.iC)())},[]),0==b?ue.createElement("div",{style:{display:"flex",flexDirection:"row",width:"100%",height:"98vh"}},ue.createElement("div",{style:{width:H.tq?"100%":"20%",padding:"20px",minWidth:"300px"}},ue.createElement("div",{className:r,style:{fontSize:H.tq?"12px":"16px",marginTop:"20px"},onClick:()=>p("/flowhero")},!(null!==_&&void 0!==_&&_.logo)&&ue.createElement("p",{style:{fontFamily:"Montserrat"}},null===_||void 0===_||null===(a=_.display_name)||void 0===a?void 0:a.toUpperCase()),null!==_&&void 0!==_&&_.logo?ue.createElement("img",{alt:"lg",src:null===_||void 0===_?void 0:_.logo,className:H.tq?d:i}):H.tq?(0,$.lh)("30px","var(--app-color-gray-dark)","bold"):(0,$.lh)("32px","var(--app-color-gray-dark)","bold")),ue.createElement(te,{onLoginSuccess:e=>{const{isSingleApp:t}=e;if(g.componentsByModule={},"trial_ended"!==(null===v||void 0===v?void 0:v.status)&&"inactive"!==(null===v||void 0===v?void 0:v.status)){if(!0===t&&H.tq)return(()=>{const{authenticatedUser:e}=de.h.getState().authReducer;(0,ae.d7)($.KI).pipe((0,f.q)(1)).subscribe({}),(0,se.hj)().pipe((0,f.q)(1)).subscribe({next:()=>(0,ie.km)(e.id).pipe((0,f.q)(1)).subscribe({complete:()=>(0,ie.qp)($.KI,e.id).pipe((0,f.q)(1)).subscribe({})})})})(),void p("/mobile");ce()}else"inactive"===(null===v||void 0===v?void 0:v.status)?ce(!0):ce();p("/")},onResetPassword:()=>p("/reset-password")})),ue.createElement("div",{style:{width:"80%",display:H.tq?"none":"flex",backgroundColor:"rgb(246,244,236)",justifyContent:"flex-end",padding:"20px",height:"102vh"}},ue.createElement("ul",{className:c,style:{display:H.tq?"none":"",marginRight:"20px"}},ue.createElement("li",null,ue.createElement("a",{href:null!==_&&void 0!==_&&_.slug?"#/pages/home/".concat(null===_||void 0===_?void 0:_.slug):"#/flowhero/",className:u},"HOME")),ue.createElement("li",null,ue.createElement("a",{href:"#/",className:u},"CONTACT US")),ue.createElement("li",null,ue.createElement("a",{href:"#/legal",className:u},"PRIVACY"))))):ue.createElement("div",{style:{margin:"auto",width:"100%",height:"500px",display:"flex",alignContent:"center",alignItems:"center",justifyItems:"center",justifyContent:"center"}},(0,$.lh)("30px","var(--app-color-gray-dark)","bold"))})},51481:(e,t,a)=>{a.d(t,{Mk:()=>m,_5:()=>v,km:()=>p,qp:()=>h,vr:()=>g,xJ:()=>f,yW:()=>u});var n=a(1413),s=a(50981),l=a.n(s),o=a(95256),r=a(88374),i=a(88827),d=a(30994),c=a(96332);const u=e=>{const{sessionSettings:{last_access_token:t}}=i.h.getState().authReducer,a=(0,n.Z)((0,n.Z)({},d.ns.tasks.getTaskById(t,e)),{},{handlerEnabled:!0});return new o.y(e=>{(0,c.b)(a).then(t=>{var a,n;200===(null===t||void 0===t?void 0:t.status)&&null!==t&&void 0!==t&&t.data&&null!==t&&void 0!==t&&null!==(a=t.data)&&void 0!==a&&a.data&&(e.next(null===t||void 0===t||null===(n=t.data)||void 0===n?void 0:n.data),e.complete())}).catch(t=>{e.error(t)})})},m=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{sessionSettings:{last_access_token:a}}=i.h.getState().authReducer,{lastUpdates:u,allTasks:m,axiosAbort:p}=i.h.getState().flowReducer,h=(0,n.Z)((0,n.Z)({},d.ns.tasks.getAllTasksCreatedByUser(a,e)),{},{handlerEnabled:!0,signal:p.signal});return new o.y(e=>{t||l()((0,s.now)()).diff(l()(u.tasks),"minutes")>10||0===m.length?(0,c.b)(h).then(t=>{var a;if(200===(null===t||void 0===t?void 0:t.status)&&null!==t&&void 0!==t&&t.data&&null!==t&&void 0!==t&&null!==(a=t.data)&&void 0!==a&&a.data){var n;const a=null===t||void 0===t||null===(n=t.data)||void 0===n?void 0:n.data;i.h.dispatch((0,r.rh)(a)),e.next(a),e.complete()}}).catch(t=>{e.error(t)}):e.complete()})},p=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{sessionSettings:{last_access_token:a}}=i.h.getState().authReducer,{lastUpdates:u,allTasks:m,axiosAbort:p}=i.h.getState().flowReducer,h=(0,n.Z)((0,n.Z)({},d.ns.tasks.getAllTasks(a,e)),{},{handlerEnabled:!0,signal:p.signal});return new o.y(e=>{t||l()((0,s.now)()).diff(l()(u.tasks),"minutes")>10||0===m.length?(0,c.b)(h).then(t=>{var a;if(200===(null===t||void 0===t?void 0:t.status)&&null!==t&&void 0!==t&&t.data&&null!==t&&void 0!==t&&null!==(a=t.data)&&void 0!==a&&a.data){var l;const a=null===t||void 0===t||null===(l=t.data)||void 0===l?void 0:l.data;i.h.dispatch((0,r.rh)(a)),i.h.dispatch((0,r.C2)((0,n.Z)((0,n.Z)({},u),{},{tasks:(0,s.now)()}))),e.next(a),e.complete()}}).catch(t=>{e.error(t)}):e.complete()})},h=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{sessionSettings:{last_access_token:u}}=i.h.getState().authReducer,m=(0,n.Z)((0,n.Z)({},d.ns.tasks.getAllCompletedTasks(u,e,t)),{},{handlerEnabled:!0}),{lastUpdates:p,allCompletedTasks:h}=i.h.getState().flowReducer;return new o.y(t=>{a||l()((0,s.now)()).diff(l()(p.allCompletedTasks),"minutes")>10||0===h.data.length?(0,c.b)(m).then(a=>{var n;if(200===(null===a||void 0===a?void 0:a.status)&&null!==a&&void 0!==a&&a.data&&null!==a&&void 0!==a&&null!==(n=a.data)&&void 0!==n&&n.data){const n=null===a||void 0===a?void 0:a.data;i.h.dispatch((0,r.cL)(n,e)),t.next(n),t.complete()}}).catch(e=>{t.error(e)}):t.complete()})},v=e=>{const{sessionSettings:{last_access_token:t}}=i.h.getState().authReducer,a=new FormData,s=(0,n.Z)({},d.ns.tasks.deleteTask(t,e)),l=(0,n.Z)((0,n.Z)({},s),{},{headers:(0,n.Z)({},s.headers),data:a,handlerEnabled:!0});return new o.y(t=>(0,c.b)(l).then(a=>{200===(null===a||void 0===a?void 0:a.status)&&null!==a&&void 0!==a&&a.data&&(i.h.dispatch((0,r.Xc)({show:!0,message:"You have successfully deleted the task",color:"red"})),i.h.dispatch((0,r.OQ)(e)),t.next(a.data),t.complete())}).catch(e=>{t.error(e)}))},g=e=>{var t,a;const{sessionSettings:{last_access_token:s}}=i.h.getState().authReducer,l=new FormData;l.append("name",e.taskName),l.append("description",e.taskDescription),l.append("due_date",e.dueDate),null!==e&&void 0!==e&&null!==(t=e.newAssignee)&&void 0!==t&&t.assignee_id&&l.append("assignee_id",e.newAssignee.assignee_id),e.taskProcess&&l.append("procedure_id",null===(a=e.taskProcess)||void 0===a?void 0:a.id),e.add_info&&l.append("add_info",JSON.stringify(e.add_info));const u=(0,n.Z)((0,n.Z)({},d.ns.tasks.createTask(s)),{},{data:l,handlerEnabled:!0});return new o.y(e=>(0,c.b)(u).then(t=>{var a;if(null!==t&&void 0!==t&&t.data&&null!==t&&void 0!==t&&null!==(a=t.data)&&void 0!==a&&a.data){var n;const a=null===t||void 0===t||null===(n=t.data)||void 0===n?void 0:n.data;i.h.dispatch((0,r.Pb)(a)),i.h.dispatch((0,r.Xc)({show:!0,message:"You have successfully created a new task"})),e.next(a),e.complete()}}).catch(t=>{e.error(t)}))},f=(e,t)=>{var a;const{sessionSettings:{last_access_token:s}}=i.h.getState().authReducer,l={name:e.name,description:e.description,due_date:e.dueDate,assignee_id:e.assignee_id,status:null!==(a=null===e||void 0===e?void 0:e.status)&&void 0!==a?a:""};e.add_info&&(l.add_info=JSON.stringify(e.add_info));const u=(0,n.Z)((0,n.Z)({},d.ns.tasks.editTask(s,t)),{},{data:l,forwardAllErrors:!0});return new o.y(e=>(0,c.b)(u).then(t=>{var a;if(null!==t&&void 0!==t&&t.data&&null!==t&&void 0!==t&&null!==(a=t.data)&&void 0!==a&&a.data){var n;const a=null===t||void 0===t||null===(n=t.data)||void 0===n?void 0:n.data;i.h.dispatch((0,r.eT)(a)),e.next(a),e.complete()}}).catch(t=>{e.error(t)}))}}}]);
//# sourceMappingURL=3358.5327e160.chunk.js.map