"use strict";(self.webpackChunkflowhero=self.webpackChunkflowhero||[]).push([[3358],{33358:function(e,t,a){a.r(t),a.d(t,{default:function(){return he}});var n=a(29439),o=a(67861),r=a(39518),l=a(23280),s=a(88374),i="Login_headerTopBarContainer__QWz8Y",d="Login_logoUrlImg__UaUon",c="Login_logoUrlImgMobile__gvaUr",u="Login_navbaritems__g7mXs",m="Login_navbarlinks__dLaYR",h=a(87462),p=a(12265),v=a(47144),f=a.n(v),g=a(15049),b=a(10103),_=a(98500),w=a(23075),y=a.n(w),k=a(31787);y()(_);var x=a(71982),E=a(57417),C=a(10904),N=a(48630),S=a(45987),Z="TextField_inputContainer__-Li1l",q="TextField_ornament__1DMyr",I="TextField_rightButton__miccv",R="TextField_textInput__TQ2mO",T="TextField_userTextInput__8z5C4",M="TextField_inputLabel__IAwPE",L="TextField_errorContainer__D-YWL",B=["isDisabled","readOnly","label","hasMandatoryIndicator","placeholder","charactersNo","icon","rightButtonLabel","rightButtonAction","rightButtonClass","errorMessage","defaultValue","onChange","name","type","autoComplete"],A=["className","hasError"],D=["className"],U=["children"],P=["hasMandatoryIndicator","children","className"],F=(0,o.forwardRef)((function(e,t){var a=e.isDisabled,r=void 0!==a&&a,l=e.readOnly,s=e.label,i=void 0===s?"":s,d=e.hasMandatoryIndicator,c=e.placeholder,u=void 0===c?"Insert email":c,m=e.charactersNo,h=e.icon,p=e.rightButtonLabel,v=e.rightButtonAction,g=e.rightButtonClass,b=e.errorMessage,_=e.defaultValue,w=e.onChange,y=e.name,k=e.type,x=void 0===k?"text":k,E=e.autoComplete,C=(0,S.Z)(e,B),N=(0,o.useState)(null!==_&&void 0!==_?_:""),R=(0,n.Z)(N,2),M=R[0],L=R[1],A=Boolean(b);return o.createElement("div",C,o.createElement(z,{hasMandatoryIndicator:d},i),o.createElement(O,{hasError:A,className:Z},o.createElement(V,{"app-readonly":l?"readonly":"",readOnly:l,autoComplete:E,disabled:r,name:y,type:x,placeholder:u,value:M,maxLength:m,onChange:function(e){L(e.target.value),null===w||void 0===w||w(e)},ref:t,className:T}),h&&o.createElement("div",{className:q},h),p&&o.createElement("button",{type:"button",onClick:v,className:f()(I,g),style:{fontFamily:"Montserrat",fontSize:"14px",fontWeight:"normal"}},p)),b&&o.createElement(j,null,b))})),O=(0,o.forwardRef)((function(e,t){var a=e.className,n=e.hasError,r=(0,S.Z)(e,A);return o.createElement("div",(0,h.Z)({"app-error":n?"error":"",ref:t},r,{className:f()(Z,a)}))})),V=(0,o.forwardRef)((function(e,t){var a=e.className,n=(0,S.Z)(e,D);return o.createElement("input",(0,h.Z)({ref:t},n,{className:f()(R,a)}))}));function j(e){var t=e.children,a=(0,S.Z)(e,U);return o.createElement("p",(0,h.Z)({className:L},a),t)}function z(e){var t=e.hasMandatoryIndicator,a=e.children,n=e.className,r=(0,S.Z)(e,P);return o.createElement("label",(0,h.Z)({className:f()(M,n)},r),a,t&&o.createElement("span",{className:"text-danger"},"*"))}var W=a(12075),J=a(52902),X=a(67861),K=(0,o.forwardRef)((function(e,t){var a=(0,o.useState)(!1),r=(0,n.Z)(a,2),l=r[0],s=r[1];return X.createElement(F,(0,h.Z)({},e,{ref:t,type:l?"text":"password",rightButtonLabel:l?X.createElement(W.G,{icon:J.Mdf,style:{color:"black",width:"16px",height:"16px"}}):X.createElement(W.G,{icon:J.Aq,style:{color:"var(--app-color-gray-light)",width:"16px",height:"16px"}}),rightButtonAction:function(){return s((function(e){return!e}))},rightButtonClass:""}))})),Y="LoginForm_host__UvJwq",Q="LoginForm_row__9D3he",H="LoginForm_signInButton__VPwbB",G="LoginForm_recoverPasswordButton__fDOss",$=a(73500),ee=a(89293),te="This company do not have onboard required data yet!\nPlease contact comapny admin.\nBasic company information must be enroled\nBefore you will be granted access to ".concat(ee.iC),ae=(0,o.memo)((function(e){var t,a,l,i,d,c,u,m,v=e.onLoginSuccess,w=e.className,y=e.onResetPassword,S=(0,r.I0)(),Z=(0,r.v9)((function(e){return e.authReducer.sessionSettings})).rememberMe,q=(0,o.useState)(!1),I=(0,n.Z)(q,2),R=I[0],T=I[1],M=(0,o.useState)(""),L=(0,n.Z)(M,2),B=L[0],A=L[1],D=(0,o.useMemo)((function(){return{yup:_,schemas:{email:_.string().min(6,"Username must have at least 8 characters"),password:_.string().min(8,"Password must have at least 8 characters"),passwordRepeat:_.string().oneOf([_.ref("password"),null],"Passwords does not match").required("Password repeat is required"),website:_.string().url(),phoneNumber:_.string().test({name:"phone-pattern",message:"Not a valid phone number",test:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return""==e||(0,k.yf)(e)}}),mobilePhoneNumber:_.string().test({name:"mobile-phone-pattern",message:"Not a valid mobile phone number",test:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return""==e||(0,k.yf)(e)}}),employerName:_.string().required("Employer name is required")}}}),[]),U=D.schemas,P=D.yup,O=(0,g.cI)({mode:"onSubmit",criteriaMode:"firstError",resolver:(0,p.X)(P.object().shape({email:U.email,password:U.password}))}),V=O.register,z=O.handleSubmit,W=O.formState.errors,J=O.getValues;return o.createElement("form",{onSubmit:z((function(e){A(""),T(!0);var t=J(),a=t.email,n=t.password,o=t.rememberMe;(0,E.n$)({email:a,password:n,rememberMe:o}).pipe((0,b.q)(1)).subscribe({next:function(e){var t=e.is_admin;!1===e.onboarding_status?!0===t?(S((0,x.DJ)(!0)),S((0,x.q9)(!0)),S((0,x.$6)({firstModalVisible:!0})),S((0,s.IW)(!1)),T(!1)):(A(te),T(!1)):(S((0,x.DJ)(!1)),S((0,x.q9)(!1)),S((0,s.fj)(!0)),T(!1),null===v||void 0===v||v(e))},error:function(e){var t,a="string"==typeof e.data?e.data:null!==e&&void 0!==e&&e.error?null===e||void 0===e?void 0:e.error:null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message;A(422===e.status||"Not authenticated"===a?"Invalid user name or password, please try again.":a),T(!1)}})})),className:f()(Y,w),onClick:function(){return A("")}},o.createElement("div",{className:Q,"app-variant":"first-row"},o.createElement(F,(0,h.Z)({autoComplete:Z?"username":"new-password",type:"text",placeholder:"Email or Username",defaultValue:null!==(t=localStorage.getItem("username"))&&void 0!==t?t:""},V("email")))),o.createElement("div",{className:Q,"app-variant":"second-row"},o.createElement(K,(0,h.Z)({autoComplete:Z?"on":"off",placeholder:"Password",defaultValue:null!==(a=localStorage.getItem("password"))&&void 0!==a?a:""},V("password")))),(B||(null===(l=W.password)||void 0===l?void 0:l.message)||(null===(i=W.email)||void 0===i?void 0:i.message))&&o.createElement(j,null,"".concat(null!==B&&void 0!==B?B:""," ").concat(null!==(d=null===(c=W.password)||void 0===c?void 0:c.message)&&void 0!==d?d:""," ").concat(null!==(u=null===(m=W.email)||void 0===m?void 0:m.message)&&void 0!==u?u:""," ")),o.createElement(C.zx,{disabled:R,loading:R,type:"submit",title:"Sign in",className:H}),o.createElement("div",{className:Q,"app-variant":"third-row"},o.createElement(N.X,(0,h.Z)({defaultChecked:Z,checkboxLabel:"Remember me"},V("rememberMe"))),o.createElement("br",null),o.createElement("p",{className:G,onClick:y},$.tq?"Forgot Password":"Need to find your password?"),o.createElement("br",null)))})),ne=a(6073),oe=(a(93389),a(1542)),re=a(34710),le=a(75105),se=a(30994),ie=a(27658),de=a(51481),ce=a(88827),ue=(a(96332),function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=ce.h.getState().authReducer.authenticatedUser;ce.h.getState().flowReducer.companyData;!1===e?(0,ne.d7)(ee.KI).pipe((0,b.q)(1)).subscribe({complete:function(){(0,ne.ew)().pipe((0,b.q)(1)).subscribe({complete:function(){(0,oe.rz)(ee.Qc,!1).pipe((0,b.q)(1)).subscribe({}),(0,re.hj)().pipe((0,b.q)(1)).subscribe({next:function(){return(0,de.km)(t.id).pipe((0,b.q)(1)).subscribe({complete:function(){return(0,de.qp)(ee.KI,t.id).pipe((0,b.q)(1)).subscribe({})}})}})}})}}):(0,le.AW)().pipe((0,b.q)(1)).subscribe({}),""!==se.lw&&(0,ie.Hm)().pipe((0,b.q)(1)).subscribe({})}),me=a(67861),he=(0,o.memo)((function(e){e.title;var t,a,h=(0,l.s0)(),p=(0,r.I0)(),v=ce.h.getState().flowReducer,f=v.companyData,g=v.lastUpdates,_=ce.h.getState().sessionReducer.authenticated,w=(0,o.useState)(null!==(t=JSON.parse(localStorage.getItem("companyData")))&&void 0!==t?t:{logo:""}),y=(0,n.Z)(w,1)[0];return document.title="Login | ".concat(ee.iC),(0,o.useEffect)((function(){_?h("/flowhero"):(p((0,s.fj)(!1)),p((0,s.aV)()),(0,E.iC)())}),[]),0==_?me.createElement("div",{style:{display:"flex",flexDirection:"row",width:"100%",height:"98vh"}},me.createElement("div",{style:{width:$.tq?"100%":"20%",padding:"20px",minWidth:"300px"}},me.createElement("div",{className:i,style:{fontSize:$.tq?"12px":"16px",marginTop:"20px"},onClick:function(){return h("/flowhero")}},!(null!==y&&void 0!==y&&y.logo)&&me.createElement("p",null,null===y||void 0===y||null===(a=y.display_name)||void 0===a?void 0:a.toUpperCase()),null!==y&&void 0!==y&&y.logo?me.createElement("img",{alt:"lg",src:null===y||void 0===y?void 0:y.logo,className:$.tq?c:d}):$.tq?(0,ee.lh)("30px","var(--app-color-gray-dark)","bold"):(0,ee.lh)("32px","var(--app-color-gray-dark)","bold")),me.createElement(ae,{onLoginSuccess:function(e){var t=e.isSingleApp;if(g.componentsByModule={},"trial_ended"!==(null===f||void 0===f?void 0:f.status)&&"inactive"!==(null===f||void 0===f?void 0:f.status)){if(!0===t&&$.tq)return function(){var e=ce.h.getState().authReducer.authenticatedUser;(0,ne.d7)(ee.KI).pipe((0,b.q)(1)).subscribe({}),(0,re.hj)().pipe((0,b.q)(1)).subscribe({next:function(){return(0,de.km)(e.id).pipe((0,b.q)(1)).subscribe({complete:function(){return(0,de.qp)(ee.KI,e.id).pipe((0,b.q)(1)).subscribe({})}})}})}(),void h("/mobile");ue()}else"inactive"===(null===f||void 0===f?void 0:f.status)?ue(!0):ue();h("/")},onResetPassword:function(){return h("/reset-password")}})),me.createElement("div",{style:{width:"80%",display:$.tq?"none":"flex",backgroundColor:"rgb(246,244,236)",justifyContent:"flex-end",padding:"20px",height:"102vh"}},me.createElement("ul",{className:u,style:{display:$.tq?"none":"",marginRight:"20px"}},me.createElement("li",null,me.createElement("a",{href:null!==y&&void 0!==y&&y.slug?"#/pages/home/".concat(null===y||void 0===y?void 0:y.slug):"#/flowhero/",className:m},"HOME")),me.createElement("li",null,me.createElement("a",{href:"#/",className:m},"CONTACT US")),me.createElement("li",null,me.createElement("a",{href:"#/legal",className:m},"PRIVACY"))))):me.createElement("div",{style:{margin:"auto",width:"100%",height:"500px",display:"flex",alignContent:"center",alignItems:"center",justifyItems:"center",justifyContent:"center"}},(0,ee.lh)("30px","var(--app-color-gray-dark)","bold"))}))},48630:function(e,t,a){a.d(t,{X:function(){return _}});var n=a(4942),o=a(87462),r=a(45987),l=a(67861),s=a(64468),i="Checkbox_host__MtZZg",d="Checkbox_checkmarkContainer__7m7hu",c="Checkbox_input__fK+n4",u="Checkbox_checkboxControl__TezWV",m="Checkbox_checkboxControlIcon__5qzo9",h="Checkbox_checkboxLabel__lacXH",p="Checkbox_checkboxDisabled__Qo2Ag",v=a(41771),f=a(47144),g=a.n(f),b=["checkboxLabel","hasMandatoryIndicator","disabled","errormessage"];var _=(0,l.forwardRef)((function(e,t){var a=e.checkboxLabel,f=e.hasMandatoryIndicator,_=e.disabled,w=e.errormessage,y=(0,r.Z)(e,b);return l.createElement(s.__,{hasMandatoryIndicator:f,className:g()(i,(0,n.Z)({},p,_)),"app-checkbox-error":w&&(null===w||void 0===w?void 0:w.length)>0?"error":"false"},l.createElement("span",{className:g()(d)},l.createElement("input",(0,o.Z)({ref:t,className:g()(c),type:"checkbox",disabled:_},y)),l.createElement("span",{className:g()(u)},l.createElement(v.MKd,{className:g()(m)}))),l.createElement("span",{className:g()(h)},a))}))},51481:function(e,t,a){a.d(t,{Mk:function(){return m},_5:function(){return v},km:function(){return h},qp:function(){return p},vr:function(){return f},xJ:function(){return g},yW:function(){return u}});var n=a(1413),o=a(50981),r=a.n(o),l=a(95256),s=a(88374),i=a(88827),d=a(30994),c=a(96332),u=function(e){var t=i.h.getState().authReducer.sessionSettings.last_access_token,a=(0,n.Z)((0,n.Z)({},d.ns.tasks.getTaskById(t,e)),{},{handlerEnabled:!0});return new l.y((function(e){(0,c.b)(a).then((function(t){var a,n;200===(null===t||void 0===t?void 0:t.status)&&null!==t&&void 0!==t&&t.data&&null!==t&&void 0!==t&&null!==(a=t.data)&&void 0!==a&&a.data&&(e.next(null===t||void 0===t||null===(n=t.data)||void 0===n?void 0:n.data),e.complete())})).catch((function(t){e.error(t)}))}))},m=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=i.h.getState().authReducer.sessionSettings.last_access_token,u=i.h.getState().flowReducer,m=u.lastUpdates,h=u.allTasks,p=u.axiosAbort,v=(0,n.Z)((0,n.Z)({},d.ns.tasks.getAllTasksCreatedByUser(a,e)),{},{handlerEnabled:!0,signal:p.signal});return new l.y((function(e){t||r()((0,o.now)()).diff(r()(m.tasks),"minutes")>10||0===h.length?(0,c.b)(v).then((function(t){var a;if(200===(null===t||void 0===t?void 0:t.status)&&null!==t&&void 0!==t&&t.data&&null!==t&&void 0!==t&&null!==(a=t.data)&&void 0!==a&&a.data){var n,o=null===t||void 0===t||null===(n=t.data)||void 0===n?void 0:n.data;i.h.dispatch((0,s.rh)(o)),e.next(o),e.complete()}})).catch((function(t){e.error(t)})):e.complete()}))},h=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=i.h.getState().authReducer.sessionSettings.last_access_token,u=i.h.getState().flowReducer,m=u.lastUpdates,h=u.allTasks,p=u.axiosAbort,v=(0,n.Z)((0,n.Z)({},d.ns.tasks.getAllTasks(a,e)),{},{handlerEnabled:!0,signal:p.signal});return new l.y((function(e){t||r()((0,o.now)()).diff(r()(m.tasks),"minutes")>10||0===h.length?(0,c.b)(v).then((function(t){var a;if(200===(null===t||void 0===t?void 0:t.status)&&null!==t&&void 0!==t&&t.data&&null!==t&&void 0!==t&&null!==(a=t.data)&&void 0!==a&&a.data){var r,l=null===t||void 0===t||null===(r=t.data)||void 0===r?void 0:r.data;i.h.dispatch((0,s.rh)(l)),i.h.dispatch((0,s.C2)((0,n.Z)((0,n.Z)({},m),{},{tasks:(0,o.now)()}))),e.next(l),e.complete()}})).catch((function(t){e.error(t)})):e.complete()}))},p=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],u=i.h.getState().authReducer.sessionSettings.last_access_token,m=(0,n.Z)((0,n.Z)({},d.ns.tasks.getAllCompletedTasks(u,e,t)),{},{handlerEnabled:!0}),h=i.h.getState().flowReducer,p=h.lastUpdates,v=h.allCompletedTasks;return new l.y((function(t){a||r()((0,o.now)()).diff(r()(p.allCompletedTasks),"minutes")>10||0===v.data.length?(0,c.b)(m).then((function(a){var n;if(200===(null===a||void 0===a?void 0:a.status)&&null!==a&&void 0!==a&&a.data&&null!==a&&void 0!==a&&null!==(n=a.data)&&void 0!==n&&n.data){var o=null===a||void 0===a?void 0:a.data;i.h.dispatch((0,s.cL)(o,e)),t.next(o),t.complete()}})).catch((function(e){t.error(e)})):t.complete()}))},v=function(e){var t=i.h.getState().authReducer.sessionSettings.last_access_token,a=new FormData,o=(0,n.Z)({},d.ns.tasks.deleteTask(t,e)),r=(0,n.Z)((0,n.Z)({},o),{},{headers:(0,n.Z)({},o.headers),data:a,handlerEnabled:!0});return new l.y((function(t){return(0,c.b)(r).then((function(a){200===(null===a||void 0===a?void 0:a.status)&&null!==a&&void 0!==a&&a.data&&(i.h.dispatch((0,s.Xc)({show:!0,message:"You have successfully deleted the task",color:"red"})),i.h.dispatch((0,s.OQ)(e)),t.next(a.data),t.complete())})).catch((function(e){t.error(e)}))}))},f=function(e){var t,a,o=i.h.getState().authReducer.sessionSettings.last_access_token,r=new FormData;r.append("name",e.taskName),r.append("description",e.taskDescription),r.append("due_date",e.dueDate),null!==e&&void 0!==e&&null!==(t=e.newAssignee)&&void 0!==t&&t.assignee_id&&r.append("assignee_id",e.newAssignee.assignee_id),e.taskProcess&&r.append("procedure_id",null===(a=e.taskProcess)||void 0===a?void 0:a.id),e.add_info&&r.append("add_info",JSON.stringify(e.add_info));var u=(0,n.Z)((0,n.Z)({},d.ns.tasks.createTask(o)),{},{data:r,handlerEnabled:!0});return new l.y((function(e){return(0,c.b)(u).then((function(t){var a;if(null!==t&&void 0!==t&&t.data&&null!==t&&void 0!==t&&null!==(a=t.data)&&void 0!==a&&a.data){var n,o=null===t||void 0===t||null===(n=t.data)||void 0===n?void 0:n.data;i.h.dispatch((0,s.Pb)(o)),i.h.dispatch((0,s.Xc)({show:!0,message:"You have successfully created a new task"})),e.next(o),e.complete()}})).catch((function(t){e.error(t)}))}))},g=function(e,t){var a,o=i.h.getState().authReducer.sessionSettings.last_access_token,r={name:e.name,description:e.description,due_date:e.due_date,assignee_id:e.assignee_id,status:null!==(a=null===e||void 0===e?void 0:e.status)&&void 0!==a?a:""};e.add_info&&(r.add_info=JSON.stringify(e.add_info));var u=(0,n.Z)((0,n.Z)({},d.ns.tasks.editTask(o,t)),{},{data:r,forwardAllErrors:!0});return new l.y((function(e){return(0,c.b)(u).then((function(t){var a;if(null!==t&&void 0!==t&&t.data&&null!==t&&void 0!==t&&null!==(a=t.data)&&void 0!==a&&a.data){var n,o=null===t||void 0===t||null===(n=t.data)||void 0===n?void 0:n.data;i.h.dispatch((0,s.eT)(o)),e.next(o),e.complete()}})).catch((function(t){e.error(t)}))}))}}}]);
//# sourceMappingURL=3358.9f999224.chunk.js.map